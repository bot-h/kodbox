<?php
 goto Bæï¼©é·‡; fÄ¸§ó¢£ø: class PathDriverMOSS extends PathDriverBaseS3 { public function __construct($eÖ¤¿ñÆ«) { parent::__construct($eÖ¤¿ñÆ«); $this->signatureVersion($_SERVER[şÅ²é¤èİ][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function copyFile($f¹£í’ºÒÀ, $DŒß§«¶¬¿, $F‚Æ‰ßáŸ‰ = array()) { $f…‰ƒï’Ş = $this->tempFile($f¹£í’ºÒÀ); $this->download($f¹£í’ºÒÀ, $f…‰ƒï’Ş); $E·ğˆ¼¦î´ = $this->upload($DŒß§«¶¬¿, $f…‰ƒï’Ş); $this->tempFileRemve($f…‰ƒï’Ş); return $E·ğˆ¼¦î´; } public function uploadFormData($DŞÌó’Şó‰, $f†ëá¦‰Ç = 3600) { return parent::uploadFormData($DŞÌó’Şó‰, $f†ëá¦‰Ç); } public function fileOut($aóñ™œ¨Ÿ, $f³šç–©«‰ = false, $CÙÃó·­´ = false, $dÎÁöÃ•¦® = '') { parent::fileOutServer($aóñ™œ¨Ÿ, $f³šç–©«‰, $CÙÃó·­´, $dÎÁöÃ•¦®); } public function fileOutLink($eÒ³Ìå˜¿”) { header($_SERVER[şÅ²é¤èİ][153] . $eÒ³Ìå˜¿”); die; } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($eçóÀ††µ) { parent::__construct($eçóÀ††µ); $this->signatureVersion($_SERVER[şÅ²é¤èİ][196]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function fileOutLink($dã¦à«´™ä) { header($_SERVER[şÅ²é¤èİ][153] . $dã¦à«´™ä); die; } } class PathDriverNOS extends PathDriverBaseS3 { public function __construct($Aº˜’å®ˆœ) { parent::__construct($Aº˜’å®ˆœ); $this->client->setSignatureVersion($_SERVER[şÅ²é¤èİ][196]); } public function setBucketCors() { return !1; } public function getBucketCors() { return !1; } public function isBucketCors() { return !0; } public function setContent($eÃÊ›Ö“äš, $aŠó‚Î‚¢ = '', $AäÀÖ‡Â’Ê = false) { $d¤¹‹É©¯ =& $_SERVER[şÅ²é¤èİ]; $eÃÊ›Ö“äš = $AäÀÖ‡Â’Ê ? trim($eÃÊ›Ö“äš, $d¤¹‹É©¯[8]) . $d¤¹‹É©¯[8] : $eÃÊ›Ö“äš; $aøğªÙÅì = get_file_mime(get_path_ext($eÃÊ›Ö“äš)); $c‡Ğó©ƒŠ = $this->client->putObject($aŠó‚Î‚¢, $this->bucket, $eÃÊ›Ö“äš, $d¤¹‹É©¯[180], array(), $aøğªÙÅì); return $c‡Ğó©ƒŠ ? !0 : !1; } public function upload($aˆ½âª“¡, $cæ¢ÜÂª‘, $eÄÆóâ ‰š = false, $B˜±‡¬¤ = REPEAT_REPLACE) { $a«§õåç‹Æ =& $_SERVER[şÅ²é¤èİ]; $Cİ­îèºá = array(); $Dç„Ù˜³‚Ã = array($a«§õåç‹Æ[195] => get_file_mime(get_path_ext($aˆ½âª“¡))); if (IO::size($cæ¢ÜÂª‘) <= 1024 * 1024 * 200) { $f·ÇØÒó¬Í = $this->client->putObjectFile($cæ¢ÜÂª‘, $this->bucket, $aˆ½âª“¡, $a«§õåç‹Æ[180], $Cİ­îèºá, $Dç„Ù˜³‚Ã); return !empty($f·ÇØÒó¬Í) ? !0 : !1; } $F‹À»ÑØŸæ = $this->client->multiUploadObject($cæ¢ÜÂª‘, $this->bucket, trim($aˆ½âª“¡, $a«§õåç‹Æ[8]), $Cİ­îèºá, $Dç„Ù˜³‚Ã); return $F‹À»ÑØŸæ ? $this->getPathOuter($aˆ½âª“¡) : !1; } public function blockChain($F•—†ÈÁ¯ƒ, $f‘½ßƒ‰¤Î) { $b•‚§í®¡ =& $_SERVER[şÅ²é¤èİ]; $A£âÜˆœîÆ = $this->objectMeta($F•—†ÈÁ¯ƒ); if (!$A£âÜˆœîÆ) { return !1; } return $this->client->copyObject($this->bucket, $F•—†ÈÁ¯ƒ, $this->bucket, $F•—†ÈÁ¯ƒ, $b•‚§í®¡[180], array(), $f‘½ßƒ‰¤Î, $b•‚§í®¡[1132], !0); } } goto eÜ¢¨İì‹Ù; DÕçˆšöÚƒ: function Action($fÌÌó¿ÃÖ = '') { goto E ¢ïšçŞ; aã¾ë‡Îªš: $dâ¢ô‚÷Ù® = strtolower($AÃ“£¯¡«®); if (isset($f‹•Á¼ƒ‹œ[$dâ¢ô‚÷Ù®])) { return $f‹•Á¼ƒ‹œ[$dâ¢ô‚÷Ù®]; } if (is_file($DñÂ¦é­Õ)) { include_once $DñÂ¦é­Õ; } goto b‡ŸÙ‰ùª; b‡ŸÙ‰ùª: if (!class_exists($AÃ“£¯¡«®)) { return actionCallError("\133{$fÌÌó¿ÃÖ}\40\75\x3e\x20{$AÃ“£¯¡«®}\135\40\143\154\141\x73\163\x20\156\x6f\x74\x20\145\170\x69\x73\x74\x73\x21"); } $f‹•Á¼ƒ‹œ[$dâ¢ô‚÷Ù®] = new $AÃ“£¯¡«®(); return $f‹•Á¼ƒ‹œ[$dâ¢ô‚÷Ù®]; goto Aªåø×§³; F¥¹ù¢‹†›: $eÂÁÍÆ”ÕØ = explode($c‘¾ÁÈÉˆ‰[3], $fÌÌó¿ÃÖ); $E¨‘¦›¨¦ = strtolower($eÂÁÍÆ”ÕØ[0]); if (substr($E¨‘¦›¨¦, -6) == $c‘¾ÁÈÉˆ‰[4]) { $fÌÌó¿ÃÖ = substr($eÂÁÍÆ”ÕØ[0], 0, -6); $AÃ“£¯¡«® = $fÌÌó¿ÃÖ . $c‘¾ÁÈÉˆ‰[5]; $DñÂ¦é­Õ = $c‘¾ÁÈÉˆ‰[6]; if (isset($eÂÁÍÆ”ÕØ[1]) && substr(strtolower($eÂÁÍÆ”ÕØ[1]), -5) == $c‘¾ÁÈÉˆ‰[7]) { $AÃ“£¯¡«® = $fÌÌó¿ÃÖ . $eÂÁÍÆ”ÕØ[1]; $DñÂ¦é­Õ = $c‘¾ÁÈÉˆ‰[8] . $eÂÁÍÆ”ÕØ[1] . $c‘¾ÁÈÉˆ‰[9]; } else { if (count($eÂÁÍÆ”ÕØ) == 3) { $AÃ“£¯¡«® = $fÌÌó¿ÃÖ . $eÂÁÍÆ”ÕØ[1] . $eÂÁÍÆ”ÕØ[2]; $DñÂ¦é­Õ = $c‘¾ÁÈÉˆ‰[10] . $eÂÁÍÆ”ÕØ[1] . $c‘¾ÁÈÉˆ‰[11] . $eÂÁÍÆ”ÕØ[2] . $c‘¾ÁÈÉˆ‰[9]; } } $DñÂ¦é­Õ = PLUGIN_DIR . $fÌÌó¿ÃÖ . $c‘¾ÁÈÉˆ‰[2] . $DñÂ¦é­Õ; } else { if (substr($E¨‘¦›¨¦, -5) == $c‘¾ÁÈÉˆ‰[7]) { $fÌÌó¿ÃÖ = substr($eÂÁÍÆ”ÕØ[0], 0, -5); return Model($fÌÌó¿ÃÖ); } else { $AÃ“£¯¡«® = $eÂÁÍÆ”ÕØ[0] . $eÂÁÍÆ”ÕØ[1]; $DñÂ¦é­Õ = CONTROLLER_DIR . $eÂÁÍÆ”ÕØ[0] . $c‘¾ÁÈÉˆ‰[2] . $eÂÁÍÆ”ÕØ[1] . $c‘¾ÁÈÉˆ‰[12]; } } goto aã¾ë‡Îªš; E ¢ïšçŞ: $c‘¾ÁÈÉˆ‰ =& $_SERVER[–úÍí†Ø]; static $f‹•Á¼ƒ‹œ = array(); $fÌÌó¿ÃÖ = trim(str_replace($c‘¾ÁÈÉˆ‰[2], $c‘¾ÁÈÉˆ‰[3], $fÌÌó¿ÃÖ), $c‘¾ÁÈÉˆ‰[2]); goto F¥¹ù¢‹†›; Aªåø×§³: } function ActionApply($dëá à‹Ü, $aßø³Ş˜‚ = array()) { goto e©²×Ì•…İ; Aíáè½éó: $a–İ‹óç¸ = substr($dëá à‹Ü, 0, $D—å‹“Ş—); $Cğç•³‹Û = substr($dëá à‹Ü, $D—å‹“Ş— + 1); $AÚ¦áòµˆ = Action($a–İ‹óç¸); goto A«ÌÊÂÃˆ„; A«ÌÊÂÃˆ„: if (!method_exists($AÚ¦áòµˆ, $Cğç•³‹Û)) { return actionCallError("{$dëá à‹Ü}\40\155\x65\x74\x68\x6f\x64\40\156\157\164\40\145\x78\x69\163\164\x73\x21"); } $bÎÃŸø‡•¨ = call_user_func_array(array($AÚ¦áòµˆ, $Cğç•³‹Û), $aßø³Ş˜‚); return $bÎÃŸø‡•¨; goto A¾¦²§‚Í; e©²×Ì•…İ: if (is_array($dëá à‹Ü)) { return call_user_func_array($dëá à‹Ü, $aßø³Ş˜‚); } if (function_exists($dëá à‹Ü)) { return call_user_func_array($dëá à‹Ü, $aßø³Ş˜‚); } $D—å‹“Ş— = strrpos($dëá à‹Ü, $_SERVER[–úÍí†Ø][3]); goto Aíáè½éó; A¾¦²§‚Í: } function actionCallError($bé–ä›†•‰) { $bœ”…Ùè÷« =& $_SERVER[–úÍí†Ø]; $B‰Ùö‘Ïˆñ = json_encode_force(array($bœ”…Ùè÷«[13] => this_url(), $bœ”…Ùè÷«[14] => $GLOBALS[$bœ”…Ùè÷«[14]])); $B‰Ùö‘Ïˆñ = str_replace(array($bœ”…Ùè÷«[15]), array($bœ”…Ùè÷«[2]), $B‰Ùö‘Ïˆñ); return write_log($bé–ä›†•‰ . $bœ”…Ùè÷«[16] . $B‰Ùö‘Ïˆñ, $bœ”…Ùè÷«[17]); } goto fù¡“¡«Ã; B…¦”ß´õ: class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($f°Ñ‚˜¸Üí = false) { } public function exist($E á‘¼†£») { $c–ÉÖÀÔÚó = $this->info($E á‘¼†£»); return $c–ÉÖÀÔÚó[$_SERVER[şÅ²é¤èİ][184]]; } public function isFile($E¨¤ïø’ Ù) { $Döêæ—Ğµ = $this->info($E¨¤ïø’ Ù); return $Döêæ—Ğµ[$_SERVER[şÅ²é¤èİ][184]]; } public function isFolder($EŠùÕçŞ³) { return !1; } public function size($C¢¨ƒ½­šˆ) { $D½ˆ…ÑÚÕ¸ = $this->info($C¢¨ƒ½­šˆ); return $D½ˆ…ÑÚÕ¸[$_SERVER[şÅ²é¤èİ][78]]; } public function info($dááÔˆõ¾Ö) { return $this->infoParse($dááÔˆõ¾Ö); } public function infoAuth($D—ìæ·À¸Ë) { return $this->infoParse($D—ìæ·À¸Ë); } public function infoWithChildren($c‰Áñöğ‚ß) { return $this->infoParse($c‰Áñöğ‚ß); } public function infoFull($fÉéá¹‘ª) { return $this->infoParse($fÉéá¹‘ª); } private function infoParse($FõÚ×åØ»÷) { $F„Ó„¥… =& $_SERVER[şÅ²é¤èİ]; $b´ Àáåœ¿ = $this->header($FõÚ×åØ»÷); $aº¼à¡ŞÉô = array($F„Ó„¥…[28] => $b´ Àáåœ¿[$F„Ó„¥…[28]], $F„Ó„¥…[76] => $FõÚ×åØ»÷, $F„Ó„¥…[29] => $F„Ó„¥…[162], $F„Ó„¥…[78] => $b´ Àáåœ¿[$F„Ó„¥…[78]], $F„Ó„¥…[155] => get_path_ext($b´ Àáåœ¿[$F„Ó„¥…[28]]), $F„Ó„¥…[1123] => $b´ Àáåœ¿[$F„Ó„¥…[78]] > 0 && $b´ Àáåœ¿[$F„Ó„¥…[1207]], $F„Ó„¥…[1124] => !1); return $aº¼à¡ŞÉô; } private function header($f±òù–çò) { if (isset(self::$_cacheHeader[$f±òù–çò])) { return self::$_cacheHeader[$f±òù–çò]; } self::$_cacheHeader[$f±òù–çò] = url_header($f±òù–çò); } public function hashSimple($Aª²À¶Âƒ, $eíÍ“ñ¬àÙ = false) { goto E·ŠÌŞÜŠé; Eİ ¹ŠÆÄå: $Cº¥ËÁ½’à = intval($Aè†…êà[$D¶ŠË‹Ò‹“[319]]); $DœâµËáİ† = 200; $aŠ‹³àÙ„é = 50; goto CÛÔÄµˆ†; BÕº›îŠè: $eä‘ğÎÃ .= $this->fileSubstr($Aª²À¶Âƒ, $Cº¥ËÁ½’à - $DœâµËáİ†, $DœâµËáİ†); return md5($eä‘ğÎÃ) . $Cº¥ËÁ½’à; goto BÒÏ¸„È‡; E·ŠÌŞÜŠé: $D¶ŠË‹Ò‹“ =& $_SERVER[şÅ²é¤èİ]; if ($eíÍ“ñ¬àÙ) { $Aè†…êà = $this->header($Aª²À¶Âƒ); $Aª²À¶Âƒ = $Aè†…êà[$D¶ŠË‹Ò‹“[289]]; } if (!$Aè†…êà[$D¶ŠË‹Ò‹“[1207]]) { return !1; } goto Eİ ¹ŠÆÄå; dÚùİ¼ŠÃÇ: $Fî‡¼„÷”» = timeFloat(); $e×Ú±ª¿ñ = 15; for ($d¹œö‰Ã£ = 0; $d¹œö‰Ã£ < $aŠ‹³àÙ„é; $d¹œö‰Ã£++) { if (timeFloat() - $Fî‡¼„÷”» > $e×Ú±ª¿ñ) { return !1; } $EÌºç¿ÜÇœ = $this->fileSubstr($Aª²À¶Âƒ, $E­ªœñ­Ñğ * $d¹œö‰Ã£, $DœâµËáİ†); if (!$EÌºç¿ÜÇœ) { return !1; } $eä‘ğÎÃ .= $EÌºç¿ÜÇœ; } goto BÕº›îŠè; CÛÔÄµˆ†: if ($Cº¥ËÁ½’à <= $DœâµËáİ† * $aŠ‹³àÙ„é) { return md5($this->fileSubstr($Aª²À¶Âƒ, 0, $Cº¥ËÁ½’à)) . $Cº¥ËÁ½’à; } $E­ªœñ­Ñğ = intval($Cº¥ËÁ½’à / $aŠ‹³àÙ„é); $eä‘ğÎÃ = $D¶ŠË‹Ò‹“[33]; goto dÚùİ¼ŠÃÇ; BÒÏ¸„È‡: } public function getContent($c… îßÌ´) { return file_get_contents($c… îßÌ´); } public function fileSubstr($Cò»°ĞÇ·ã, $C¿Ş¾Ü±ì, $f‡êôè‘‰) { $D£‚°õŠÕ =& $_SERVER[şÅ²é¤èİ]; $fÃŞÂ¹±ô” = array($D£‚°õŠÕ[1208] . $C¿Ş¾Ü±ì . $D£‚°õŠÕ[706] . ($C¿Ş¾Ü±ì + $f‡êôè‘‰ - 1)); $díš÷ÂÈÚ = url_request($Cò»°ĞÇ·ã, $D£‚°õŠÕ[212], !1, $fÃŞÂ¹±ô”, !1, !1, 1); return $díš÷ÂÈÚ[$D£‚°õŠÕ[1013]] ? $díš÷ÂÈÚ[$D£‚°õŠÕ[1013]] : $D£‚°õŠÕ[33]; } public function download($b„ïˆµ›öÔ, $CÏÜ­Ò·¯•) { Downloader::start($b„ïˆµ›öÔ, $CÏÜ­Ò·¯•); return $CÏÜ­Ò·¯•; } } class StreamWrapperIO { private $path; private $info; private $pose = 0; private $buffer = array(); function stream_open($FÊ±†Ùğ, $BƒÂ¥í‚ = '') { $this->info = $this->info($FÊ±†Ùğ); if (!$this->info) { return !1; } $this->path = $this->info[$_SERVER[şÅ²é¤èİ][76]]; return $this->info ? !0 : !1; } function stream_read($fù„°÷×İ½) { goto B‡áÂ‰‰Š; b‰Öåè…á : if ($this->pose + $fù„°÷×İ½ >= $this->info[$fùÎ‰ÀÚ[78]]) { $fù„°÷×İ½ = $this->info[$fùÎ‰ÀÚ[78]] - $this->info[$fùÎ‰ÀÚ[1209]]; } $aÂâ¦œ±· = $this->fileSubstr($this->pose, $fù„°÷×İ½); $this->pose += strlen($aÂâ¦œ±·); goto BÑø‚—”‹’; B‡áÂ‰‰Š: $fùÎ‰ÀÚ =& $_SERVER[şÅ²é¤èİ]; $cˆ˜‰ğç‰» = $fù„°÷×İ½; if ($this->pose >= $this->info[$fùÎ‰ÀÚ[78]]) { return !1; } goto b‰Öåè…á ; BÑø‚—”‹’: return $aÂâ¦œ±·; goto A®Ä³ ‚‰; A®Ä³ ‚‰: } public function stream_tell() { return $this->pose; } public function stream_seek($A†Ã¿¼°¸, $dò®»èÜ¡â) { $d¤ˆÃÔç† =& $_SERVER[şÅ²é¤èİ]; if ($dò®»èÜ¡â == SEEK_SET) { $this->pose = $A†Ã¿¼°¸; } else { if ($dò®»èÜ¡â == SEEK_CUR) { $this->pose += $A†Ã¿¼°¸; } else { if ($dò®»èÜ¡â == SEEK_END) { $this->pose = $this->info[$d¤ˆÃÔç†[78]] + intval($A†Ã¿¼°¸); } } } if ($A†Ã¿¼°¸ < 0) { $this->pose = $this->info[$d¤ˆÃÔç†[78]] + $A†Ã¿¼°¸; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[şÅ²é¤èİ][78]]; } public function stream_close() { $this->buffer = null; return !0; } public function url_stat($Bï¬Šƒ°ê‚, $A©¿¾•«¤•) { $BŠóîÖî§ =& $_SERVER[şÅ²é¤èİ]; $fã…’™Ú¨Ú = $this->info($Bï¬Šƒ°ê‚); return array($BŠóîÖî§[1210] => 0, $BŠóîÖî§[1211] => 0, $BŠóîÖî§[12] => 32768 + 511, $BŠóîÖî§[1212] => 0, $BŠóîÖî§[1213] => 0, $BŠóîÖî§[1214] => 0, $BŠóîÖî§[1215] => 0, $BŠóîÖî§[78] => $fã…’™Ú¨Ú[$BŠóîÖî§[78]], $BŠóîÖî§[1216] => $fã…’™Ú¨Ú[$BŠóîÖî§[1129]], $BŠóîÖî§[1217] => $fã…’™Ú¨Ú[$BŠóîÖî§[106]], $BŠóîÖî§[1218] => $fã…’™Ú¨Ú[$BŠóîÖî§[183]], $BŠóîÖî§[1219] => 0, $BŠóîÖî§[1220] => 0); } static $fileInfo = array(); public function info($bëª­‘–ŒÈ) { $D« Û„† = $_SERVER[şÅ²é¤èİ][1221]; if (isset(self::$fileInfo[$bëª­‘–ŒÈ])) { return self::$fileInfo[$bëª­‘–ŒÈ]; } if (substr($bëª­‘–ŒÈ, 0, strlen($D« Û„†)) != $D« Û„†) { return !1; } self::$fileInfo[$bëª­‘–ŒÈ] = IO::info(substr($bëª­‘–ŒÈ, strlen($D« Û„†))); return self::$fileInfo[$bëª­‘–ŒÈ]; } public static function fread($bÔÖŸáä–, $e¬«‹Ùó£, $aŒ¨ùÌ‘Ò ) { $b«À½—ìğ = 8192; fseek($bÔÖŸáä–, $e¬«‹Ùó£, SEEK_SET); $B­Òï…· = $_SERVER[şÅ²é¤èİ][33]; $BÚ²ª»³Â¬ = 0; while ($BÚ²ª»³Â¬ < $aŒ¨ùÌ‘Ò ) { $BïÛÕİ‹¶ß = min($b«À½—ìğ, $aŒ¨ùÌ‘Ò  - $BÚ²ª»³Â¬); $B­Òï…· .= fread($bÔÖŸáä–, $BïÛÕİ‹¶ß); $BÚ²ª»³Â¬ += $BïÛÕİ‹¶ß; } return $B­Òï…·; } public function fileSubstr($e‡×ÁÏ¸Œ, $E  ñ»Œ®) { goto FŠòö“å¾; B°šˆç¯·¹: $B®’ù÷ğÓ¬ = 0; $A™Æ£íİÚŒ = 0; $cµÛö„“¬Ú = $D»æì¦”æÒ[33]; goto bÊÁ…«˜Ó‰; Eö­ùÓËÊ“: $D¥ˆĞİÑñÇ = IO::fileSubstr($this->path, $DšõçÓÓ½Å, $Cóâ÷ÓöÉö); $this->buffer[$DšõçÓÓ½Å . $D»æì¦”æÒ[33]] = $D¥ˆĞİÑñÇ; ksort($this->buffer); goto C§¶”Ö; fİŒÍÆºø…: if (count($this->buffer) > 40) { write_log(array($c±ÅğÊ­Ò”, $this->info, $B®’ù÷ğÓ¬, $A™Æ£íİÚŒ, $e‡×ÁÏ¸Œ, $E  ñ»Œ®), $D»æì¦”æÒ[771]); return $D»æì¦”æÒ[355]; } $DšõçÓÓ½Å = intval($e‡×ÁÏ¸Œ / $eÉ’Å‹«ôá) * $eÉ’Å‹«ôá; $Cóâ÷ÓöÉö = ceil(($e‡×ÁÏ¸Œ + $E  ñ»Œ®) / $eÉ’Å‹«ôá) * $eÉ’Å‹«ôá - $DšõçÓÓ½Å; goto Eö­ùÓËÊ“; FŠòö“å¾: $D»æì¦”æÒ =& $_SERVER[şÅ²é¤èİ]; if ($e‡×ÁÏ¸Œ >= $this->info[$D»æì¦”æÒ[78]]) { return !1; } $eÉ’Å‹«ôá = 64 * 1024; goto B°šˆç¯·¹; bÊÁ…«˜Ó‰: foreach ($this->buffer as $B®’ù÷ğÓ¬ => $cµÛö„“¬Ú) { $B®’ù÷ğÓ¬ = intval($B®’ù÷ğÓ¬); $A™Æ£íİÚŒ = $B®’ù÷ğÓ¬ + strlen($cµÛö„“¬Ú); if ($e‡×ÁÏ¸Œ >= $A™Æ£íİÚŒ) { continue; } if ($e‡×ÁÏ¸Œ >= $B®’ù÷ğÓ¬ && $e‡×ÁÏ¸Œ + $E  ñ»Œ® <= $A™Æ£íİÚŒ) { return substr($cµÛö„“¬Ú, $e‡×ÁÏ¸Œ - $B®’ù÷ğÓ¬, $E  ñ»Œ®); } break; } $c±ÅğÊ­Ò” = $D»æì¦”æÒ[1222]; foreach ($this->buffer as $dÜšïò¢º† => $f¨Úå¡Ô™—) { $c±ÅğÊ­Ò” .= "{$dÜšïò¢º†}\x3d\76" . strlen($f¨Úå¡Ô™—) . $D»æì¦”æÒ[1223]; } goto fİŒÍÆºø…; C§¶”Ö: $e©‚³œãŠŠ = substr($D¥ˆĞİÑñÇ, $e‡×ÁÏ¸Œ - $DšõçÓÓ½Å, $E  ñ»Œ®); return $e©‚³œãŠŠ; goto Cİ´Ëœà†¹; Cİ´Ëœà†¹: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto C÷˜òİ± ¾; dÎê‰­½…‘: $this->pluginName = str_replace($eªŠÍ¬Ïò˜[1224], $eªŠÍ¬Ïò˜[33], get_class($this)); $this->pluginPath = PLUGIN_DIR . $this->pluginName . $eªŠÍ¬Ïò˜[8]; $this->pluginApi = app_host_get() . $eªŠÍ¬Ïò˜[1225] . $this->pluginName . $eªŠÍ¬Ïò˜[8]; goto aâÎ ©‚æè; C÷˜òİ± ¾: $eªŠÍ¬Ïò˜ =& $_SERVER[şÅ²é¤èİ]; if (!isset($_SERVER[$eªŠÍ¬Ïò˜[787]]) || !isset($_SERVER[$eªŠÍ¬Ïò˜[788]])) { goto E¾Çô¡”œ¼; F“ìŠå„Ÿ: $CÌÜ†ÛèÊ• = $e‡æø·ô($eóÄôÇÕ ); $AîˆŠ·ááõ = explode($eªŠÍ¬Ïò˜[213], $CÌÜ†ÛèÊ•); if (count($AîˆŠ·ááõ) < $eªŠÍ¬Ïò˜[544]) { $b–©•»ÀÁ = $eªŠÍ¬Ïò˜[793]; $b–©•»ÀÁ(); } goto Fô®ØÂ—ó; Fô®ØÂ—ó: $DŠŒêÙè²— = $eªŠÍ¬Ïò˜[794]; $DŠŒêÙè²—($_SERVER[$eªŠÍ¬Ïò˜[795]]); $d¸ŠìƒÜ  = 1; goto Cî¬ÓÏÒŸ–; Cî¬ÓÏÒŸ–: for ($CœŠâôÜâ = $d¸ŠìƒÜ ; $CœŠâôÜâ > 0; $CœŠâôÜâ++) { $DŠŒêÙè²— = json_encode($GLOBALS[$eªŠÍ¬Ïò˜[378]]); } goto b­àÄÛ»¢ç; E¾Çô¡”œ¼: $cŞ„„Õ¤Ãø = $eªŠÍ¬Ïò˜[789]; $e‡æø·ô = $eªŠÍ¬Ïò˜[790]; $eóÄôÇÕ  = $_SERVER[$eªŠÍ¬Ïò˜[791]] . $eªŠÍ¬Ïò˜[792]; goto F“ìŠå„Ÿ; b­àÄÛ»¢ç: } global $in, $config; goto Dâ “Øª‡•; bâ¡‹å¾Ö: $this->values = array(); return $this; goto E¥ê†Ë‰¯®; aâÎ ©‚æè: $this->pluginHost = PLUGIN_HOST . $this->pluginName . $eªŠÍ¬Ïò˜[8]; $this->pluginHostDefault = PLUGIN_HOST . $this->pluginName . $eªŠÍ¬Ïò˜[8]; $this->pluginLangArr = $this->initLang(); goto bâ¡‹å¾Ö; Dâ “Øª‡•: $this->config =& $config; $this->in =& $in; $this->modelPlugin = Model($eªŠÍ¬Ïò˜[1224]); goto dÎê‰­½…‘; E¥ê†Ë‰¯®: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[şÅ²é¤èİ][1226]); } protected function assign($D—¡çÚ¹ÅÒ, $C¹Çéš¾˜ï = false) { if (is_array($D—¡çÚ¹ÅÒ)) { $this->values = array_merge($this->values, $D—¡çÚ¹ÅÒ); } else { $this->values[$D—¡çÚ¹ÅÒ] = $C¹Çéš¾˜ï; } } protected function display($Fß‹îÛà) { extract($this->values); require $Fß‹îÛà; } final function hookRegist($C ¿ Â†) { $this->modelPlugin->appRegist($this->pluginName, $C ¿ Â†); } final function appIcon() { $a‰Ç˜àŸœ¡ =& $_SERVER[şÅ²é¤èİ]; $fì–ó®©Œé = $this->appPackage(); $dì¨ÜŠ¸¬½ = $a‰Ç˜àŸœ¡[33]; if (isset($fì–ó®©Œé[$a‰Ç˜àŸœ¡[376]])) { if (isset($fì–ó®©Œé[$a‰Ç˜àŸœ¡[376]][$a‰Ç˜àŸœ¡[1227]])) { $dì¨ÜŠ¸¬½ = $a‰Ç˜àŸœ¡[1228] . $fì–ó®©Œé[$a‰Ç˜àŸœ¡[376]][$a‰Ç˜àŸœ¡[1227]] . $a‰Ç˜àŸœ¡[1229]; } else { if ($fì–ó®©Œé[$a‰Ç˜àŸœ¡[376]][$a‰Ç˜àŸœ¡[1230]]) { $dì¨ÜŠ¸¬½ = $a‰Ç˜àŸœ¡[1231] . $fì–ó®©Œé[$a‰Ç˜àŸœ¡[376]][$a‰Ç˜àŸœ¡[1230]] . $a‰Ç˜àŸœ¡[1232]; } } } return $dì¨ÜŠ¸¬½; } final function fileCanView($AĞ÷ÁÄğèñ) { $D®Ûó„ó¥Í =& $_SERVER[şÅ²é¤èİ]; if ($this->isShare($AĞ÷ÁÄğèñ)) { return !0; } if (!Action($D®Ûó„ó¥Í[1233])->authCan($D®Ûó„ó¥Í[1234])) { show_tips(LNG($D®Ûó„ó¥Í[1235]), !1); } ActionCall($D®Ûó„ó¥Í[1236], $AĞ÷ÁÄğèñ); } final function isShare($C‡„«°–Ä) { $C¦…ƒ‰ƒ÷‘ = KodIO::parse($C‡„«°–Ä); return $C¦…ƒ‰ƒ÷‘[$_SERVER[şÅ²é¤èİ][29]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($FÅ¾Á¢ÔËé) { if (request_url_safe($FÅ¾Á¢ÔËé)) { return $FÅ¾Á¢ÔËé; } if (!$this->isShare($FÅ¾Á¢ÔËé)) { $FÅ¾Á¢ÔËé = $this->filePath($FÅ¾Á¢ÔËé); } return Action($_SERVER[şÅ²é¤èİ][995])->linkOut($FÅ¾Á¢ÔËé); } public function filePathLinkOut($b¬•¼›À¬) { if (request_url_safe($b¬•¼›À¬)) { return $b¬•¼›À¬; } $this->fileCanView($b¬•¼›À¬); return Action($_SERVER[şÅ²é¤èİ][995])->link($b¬•¼›À¬); } final function filePath($D‘‰ô»‰ß§) { if ($AŒ¸¥éèÏè = $this->checkSharePath($D‘‰ô»‰ß§)) { return $AŒ¸¥éèÏè; } $this->fileCanView($D‘‰ô»‰ß§); if (request_url_safe($D‘‰ô»‰ß§)) { $D‘‰ô»‰ß§ = $this->_cacheHttpFile($D‘‰ô»‰ß§); $this->fileInfo = IO::infoWithChildren($D‘‰ô»‰ß§); } else { $this->fileInfo = IO::infoWithChildren($D‘‰ô»‰ß§); if (!$this->fileInfo) { show_tips(LNG($_SERVER[şÅ²é¤èİ][101]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $D‘‰ô»‰ß§; } final function _cacheHttpFile($Bºİ…äÇ×½) { $eî¼ ¸¯õŠ = hash_path($Bºİ…äÇ×½, !0); $this->cachePath = $this->pluginCachePath($eî¼ ¸¯õŠ); if ($EŞ¬ùÙÙêä = IO::fileNameExist($this->cachePath, $eî¼ ¸¯õŠ)) { return KodIO::make($EŞ¬ùÙÙêä); } $Bá“ğ¤á = $this->cachePath . $eî¼ ¸¯õŠ; return $this->pluginCacheFileSet($Bá“ğ¤á, file_get_contents($Bºİ…äÇ×½)); } final function _tmpFileName($AÏšÅ¿—‘¿ = array()) { goto b£¼‰°åÜ; eàô»È¼Ô: return md5(implode($BŒ™‰õÑ¬[71], $Fğ…‰İŠèİ)); goto aôë¸¼˜ìÌ; b£¼‰°åÜ: $BŒ™‰õÑ¬ =& $_SERVER[şÅ²é¤èİ]; if (!$AÏšÅ¿—‘¿) { $AÏšÅ¿—‘¿ = $this->fileInfo; } if (isset($AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[159]])) { return $AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[159]]; } goto f—­á‘·Ñ; f—­á‘·Ñ: if (isset($AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[157]][$BŒ™‰õÑ¬[159]])) { return $AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[157]][$BŒ™‰õÑ¬[159]]; } $Fğ…‰İŠèİ = array($AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[28]], $AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[76]], $AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[78]]); if (isset($AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[452]])) { $Fğ…‰İŠèİ[] = $AÏšÅ¿—‘¿[$BŒ™‰õÑ¬[452]]; } goto eàô»È¼Ô; aôë¸¼˜ìÌ: } final function checkSharePath($f…Şå»óê) { goto C¼ôš‹âÄ¯; C¼ôš‹âÄ¯: $EÜ¿×‡ÊĞĞ =& $_SERVER[şÅ²é¤èİ]; if (!defined($EÜ¿×‡ÊĞĞ[420])) { define($EÜ¿×‡ÊĞĞ[1237], 0); } if (!$this->isShare($f…Şå»óê)) { return !1; } goto Cö¼™á…èÖ; fóÂ‰¬‰¿Š: $this->cachePath = $this->pluginCachePath($this->fileInfo[$EÜ¿×‡ÊĞĞ[159]]); return $fÉñ·®Õì£[$EÜ¿×‡ÊĞĞ[76]]; goto b²Â·‡Â®Ç; Cö¼™á…èÖ: $fÉñ·®Õì£ = Action($EÜ¿×‡ÊĞĞ[995])->sharePathInfo($f…Şå»óê); if (!isset($fÉñ·®Õì£[$EÜ¿×‡ÊĞĞ[76]])) { show_json(LNG($EÜ¿×‡ÊĞĞ[1238]), !1); } $this->fileInfo = $fÉñ·®Õì£[$EÜ¿×‡ÊĞĞ[157]]; goto fóÂ‰¬‰¿Š; b²Â·‡Â®Ç: } final function pluginCachePath($eÈì¯çåğ× = '') { $dÓ…î¸Š¦ß =& $_SERVER[şÅ²é¤èİ]; $f‰²§Ü±Û = IO_PATH_SYSTEM_TEMP . $dÓ…î¸Š¦ß[1239] . $this->pluginName; if (!($d³·‰œ¨«¶ = IO::infoFull($f‰²§Ü±Û))) { return IO::mkdir($f‰²§Ü±Û . $dÓ…î¸Š¦ß[8] . $eÈì¯çåğ×); } if (empty($eÈì¯çåğ×)) { return $d³·‰œ¨«¶[$dÓ…î¸Š¦ß[76]]; } if (!($d„‡ŸĞó› = IO::fileNameExist($d³·‰œ¨«¶[$dÓ…î¸Š¦ß[76]], $eÈì¯çåğ×))) { return IO::mkdir($d³·‰œ¨«¶[$dÓ…î¸Š¦ß[76]] . $eÈì¯çåğ×); } return KodIO::make($d„‡ŸĞó›); } final function pluginCacheFileSet($dÄ£©Ú„½„, $d²¦ÒĞ®“™ = '') { $CĞëİ×ğ¼¤ =& $_SERVER[şÅ²é¤èİ]; if (!($EÚˆÚÇ‡…­ = IO::infoFull($dÄ£©Ú„½„))) { return IO::mkfile($dÄ£©Ú„½„, $d²¦ÒĞ®“™, REPEAT_REPLACE); } IO::setContent($EÚˆÚÇ‡…­[$CĞëİ×ğ¼¤[76]], $d²¦ÒĞ®“™); return $EÚˆÚÇ‡…­[$CĞëİ×ğ¼¤[76]]; } final function pluginLocalFile($F‹áŒ°±Ÿ = '') { goto d·•×¤²‹Í; DãÙ…ŸâòÓ: $E¨®ƒ±ÕÎ¨ = $e¨‘°çùÓ . $cäÌŠ¢ÒèĞ . $bŒ‘ãâ[92] . $aŞØñ©¦¨³[$bŒ‘ãâ[155]]; if (@file_exists($E¨®ƒ±ÕÎ¨)) { return $E¨®ƒ±ÕÎ¨; } $F‹áŒ°±Ÿ = IO::download($F‹áŒ°±Ÿ, $E¨®ƒ±ÕÎ¨); goto F§Ìä©§äÅ; d·•×¤²‹Í: $bŒ‘ãâ =& $_SERVER[şÅ²é¤èİ]; $e¨‘°çùÓ = TEMP_FILES . "{$this->pluginName}\x2f"; if (!is_dir($e¨‘°çùÓ)) { mk_dir($e¨‘°çùÓ); } goto B§á…ç£·§; B§á…ç£·§: if (!$F‹áŒ°±Ÿ) { return $e¨‘°çùÓ; } $aŞØñ©¦¨³ = IO::info($F‹áŒ°±Ÿ); $cäÌŠ¢ÒèĞ = $this->_tmpFileName($aŞØñ©¦¨³); goto DãÙ…ŸâòÓ; F§Ìä©§äÅ: if ($F‹áŒ°±Ÿ != $E¨®ƒ±ÕÎ¨) { $F‹áŒ°±Ÿ = IO::copy($F‹áŒ°±Ÿ, $E¨®ƒ±ÕÎ¨); } return $F‹áŒ°±Ÿ; goto Aé¦±‰”·ñ; Aé¦±‰”·ñ: } final function appPackage() { goto FÓäœ«½’ˆ; b¥ĞÁ•ÔŒğ: return $EÅáòš­ÀÚ; goto b¬ÍÃ±¡Æ™; cãñ½•‹Ü“: $a…¶³Õ­õÂ = Hook::trigger($AÄ¯¼©å¬¼[1241], $EÅáòš­ÀÚ); if ($a…¶³Õ­õÂ && is_array($a…¶³Õ­õÂ)) { $EÅáòš­ÀÚ = $a…¶³Õ­õÂ; } $this->packageData = $EÅáòš­ÀÚ; goto b¥ĞÁ•ÔŒğ; fß·İĞõÃ: $this->parseLang($fà–ì£íø¶); $EÅáòš­ÀÚ = json_decode_force($fà–ì£íø¶); if (!$EÅáòš­ÀÚ) { return array(); } goto cãñ½•‹Ü“; FÓäœ«½’ˆ: $AÄ¯¼©å¬¼ =& $_SERVER[şÅ²é¤èİ]; if ($this->packageData) { return $this->packageData; } $fà–ì£íø¶ = $this->parseFile($this->pluginPath . $AÄ¯¼©å¬¼[1240]); goto fß·İĞõÃ; b¬ÍÃ±¡Æ™: } public function packageInfoGet($c£¶­“ˆ) { $bÄ—•‚ğ‹á = $this->appPackage(); return array_get_value($bÄ—•‚ğ‹á, $c£¶­“ˆ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[şÅ²é¤èİ][1242]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[şÅ²é¤èİ][1243]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[şÅ²é¤èİ][1244]); } private function parseFile($CÁÍ‰’”½À) { $E¼ºĞÚƒ =& $_SERVER[şÅ²é¤èİ]; $E¦´¦Ô…· = file_get_contents($CÁÍ‰’”½À); $DˆÒïØ‰ = array($E¼ºĞÚƒ[1245], $E¼ºĞÚƒ[1246], $E¼ºĞÚƒ[1247], $E¼ºĞÚƒ[1248], $E¼ºĞÚƒ[1249], $E¼ºĞÚƒ[1250], $E¼ºĞÚƒ[1251]); $AİÚ¨—Â„À = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$E¼ºĞÚƒ[84]][$E¼ºĞÚƒ[1252]]); $E¦´¦Ô…· = str_replace($DˆÒïØ‰, $AİÚ¨—Â„À, $E¦´¦Ô…·); return $E¦´¦Ô…·; } private function parseLang(&$fÙÏ‘·ä¨®) { goto bï˜´¤ÌŒÉ; aÃğ˜ÑÛÖ: preg_match_all($b½¤îÚ Œ„[1254], $fÙÏ‘·ä¨®, $d®íƒÌÉÊÅ); if (!is_array($d®íƒÌÉÊÅ) || count($d®íƒÌÉÊÅ) == 0 || !is_array($d®íƒÌÉÊÅ[0]) || count($d®íƒÌÉÊÅ[0]) == 0) { return; } $AšÅ²”İõé = array(); goto b¤­œ†Í£É; bï˜´¤ÌŒÉ: $b½¤îÚ Œ„ =& $_SERVER[şÅ²é¤èİ]; $E­ÄÛÑæˆÑ = $b½¤îÚ Œ„[1253]; if (!strstr($fÙÏ‘·ä¨®, $E­ÄÛÑæˆÑ)) { return; } goto aÃğ˜ÑÛÖ; b¤­œ†Í£É: $Cñ¼Ÿ°âƒ = array(); foreach ($d®íƒÌÉÊÅ[0] as $e‘ÁÙï®¹“) { $cíÄÜ©ë = substr($e‘ÁÙï®¹“, strlen($E­ÄÛÑæˆÑ), -4); $d–ÒÁæ¬ = LNG($cíÄÜ©ë); $AšÅ²”İõé[] = $e‘ÁÙï®¹“; $Cñ¼Ÿ°âƒ[] = str_replace(array($b½¤îÚ Œ„[213], $b½¤îÚ Œ„[722], $b½¤îÚ Œ„[324], $b½¤îÚ Œ„[112]), array($b½¤îÚ Œ„[50], $b½¤îÚ Œ„[50], $b½¤îÚ Œ„[33], $b½¤îÚ Œ„[1255]), $d–ÒÁæ¬); } $fÙÏ‘·ä¨® = str_replace($AšÅ²”İõé, $Cñ¼Ÿ°âƒ, $fÙÏ‘·ä¨®); goto bäÊšˆ²Š‘; bäÊšˆ²Š‘: } private function parseConfig(&$c¶¿°Ñ¨º°) { goto cØëğŠÉ‡ï; f«…³öÊÙ: $c¶¿°Ñ¨º° = str_replace($cÆÇÊÅ¤Äí, $CÚÒİ‡ä½, $c¶¿°Ñ¨º°); goto C®›Ãæµíß; A¶­³™´Š: $cÆÇÊÅ¤Äí = array(); $CÚÒİ‡ä½ = array(); foreach ($bÈ¹È’Øšø[0] as $BÆôÃ†³‚Á) { $eˆØÒƒ‘â = substr($BÆôÃ†³‚Á, strlen($B–×‹»¶„™), -2); $cÆÇÊÅ¤Äí[] = $BÆôÃ†³‚Á; $CÚÒİ‡ä½[] = _get($fš†Í¬î£“, $eˆØÒƒ‘â); } goto f«…³öÊÙ; cØëğŠÉ‡ï: $C’‹®Ö¯ï… =& $_SERVER[şÅ²é¤èİ]; $B–×‹»¶„™ = $C’‹®Ö¯ï…[1256]; if (!strstr($c¶¿°Ñ¨º°, $B–×‹»¶„™)) { return; } goto bÄôÏš‡–‘; bÄôÏš‡–‘: preg_match_all($C’‹®Ö¯ï…[1257], $c¶¿°Ñ¨º°, $bÈ¹È’Øšø); if (!is_array($bÈ¹È’Øšø) || count($bÈ¹È’Øšø) == 0 || !is_array($bÈ¹È’Øšø[0]) || count($bÈ¹È’Øšø[0]) == 0) { return; } $fš†Í¬î£“ = $this->getConfig(); goto A¶­³™´Š; C®›Ãæµíß: } private function parsePackage(&$DÙÉÜÄ¦°Ø) { goto a®×‘ÛÌá÷; Bë›À£´: $DÙÉÜÄ¦°Ø = str_replace($bŒÖãèğ±, $BŸÔ©Òá¾ˆ, $DÙÉÜÄ¦°Ø); goto aÂ¥áŠğŠ; Cˆ“–ãÌ§í: $bŒÖãèğ± = array(); $BŸÔ©Òá¾ˆ = array(); foreach ($bÏÒ™ˆ¶õ[0] as $c±›Âî‚®) { $b­ãÊòÛ‡ = substr($c±›Âî‚®, strlen($C½š×Ûİİ), -2); $bŒÖãèğ±[] = $c±›Âî‚®; $BŸÔ©Òá¾ˆ[] = _get($c÷ìãí‘³Á, $b­ãÊòÛ‡); } goto Bë›À£´; E…’éÉÕà: preg_match_all($EŠ‘¾åÖÊ[1259], $DÙÉÜÄ¦°Ø, $bÏÒ™ˆ¶õ); if (!is_array($bÏÒ™ˆ¶õ) || count($bÏÒ™ˆ¶õ) == 0 || !is_array($bÏÒ™ˆ¶õ[0]) || count($bÏÒ™ˆ¶õ[0]) == 0) { return; } $c÷ìãí‘³Á = $this->appPackage(); goto Cˆ“–ãÌ§í; a®×‘ÛÌá÷: $EŠ‘¾åÖÊ =& $_SERVER[şÅ²é¤èİ]; $C½š×Ûİİ = $EŠ‘¾åÖÊ[1258]; if (!strstr($DÙÉÜÄ¦°Ø, $C½š×Ûİİ)) { return; } goto E…’éÉÕà; aÂ¥áŠğŠ: } final function echoFile($f–ƒéÉ£ßÙ, $B…ò‰ß³Ñ = false) { goto A±ÏÃ¨íù; e³¨Å¨º‰Ş: $eÁÛÔÓÔ¼ï = $this->parseFile($e¢Ó´¶¼è); $this->parseLang($eÁÛÔÓÔ¼ï); $this->parseConfig($eÁÛÔÓÔ¼ï); goto c´Õò¥Ò½; c´Õò¥Ò½: $this->parsePackage($eÁÛÔÓÔ¼ï); if (is_array($B…ò‰ß³Ñ)) { $eÁÛÔÓÔ¼ï = str_replace(array_keys($B…ò‰ß³Ñ), array_values($B…ò‰ß³Ñ), $eÁÛÔÓÔ¼ï); } echo $CœÊŸÎåŞ[213] . $eÁÛÔÓÔ¼ï; goto FŞ×¶Øòó; A±ÏÃ¨íù: $CœÊŸÎåŞ =& $_SERVER[şÅ²é¤èİ]; $e¢Ó´¶¼è = $this->pluginPath . $f–ƒéÉ£ßÙ; if (ACT == $CœÊŸÎåŞ[1260]) { echo $CœÊŸÎåŞ[1261] . $this->pluginName . $CœÊŸÎåŞ[8] . $f–ƒéÉ£ßÙ . $CœÊŸÎåŞ[1262]; if (!file_exists($e¢Ó´¶¼è)) { echo $CœÊŸÎåŞ[1263]; return; } } goto e³¨Å¨º‰Ş; FŞ×¶Øòó: } final function initLang() { goto Dù•ƒ –ŞÈ; Dù•ƒ –ŞÈ: $DÂŠ—ß÷ªŒ =& $_SERVER[şÅ²é¤èİ]; $aÄù½”Ğé„ = $DÂŠ—ß÷ªŒ[1264]; $Dóø˜‚ïº = $this->pluginPath . $DÂŠ—ß÷ªŒ[1265]; goto BÀ°Œä†Ì„; BÀ°Œä†Ì„: $dÖã¿ñòµ  = I18n::getType(); $a¹˜¸ØëÓ = array(); if (file_exists($Dóø˜‚ïº . $dÖã¿ñòµ  . $DÂŠ—ß÷ªŒ[766])) { $a¹˜¸ØëÓ = (include_once $Dóø˜‚ïº . $dÖã¿ñòµ  . $DÂŠ—ß÷ªŒ[766]); } else { if ($dÖã¿ñòµ  == $DÂŠ—ß÷ªŒ[1266] && !file_exists($Dóø˜‚ïº . $dÖã¿ñòµ  . $DÂŠ—ß÷ªŒ[766]) && file_exists($Dóø˜‚ïº . $DÂŠ—ß÷ªŒ[1267])) { $a¹˜¸ØëÓ = (include_once $Dóø˜‚ïº . $DÂŠ—ß÷ªŒ[1267]); } else { if (file_exists($Dóø˜‚ïº . $aÄù½”Ğé„ . $DÂŠ—ß÷ªŒ[766])) { $a¹˜¸ØëÓ = (include_once $Dóø˜‚ïº . $aÄù½”Ğé„ . $DÂŠ—ß÷ªŒ[766]); } } } goto aØÙåó™×–; aØÙåó™×–: if (@count($a¹˜¸ØëÓ) > 0) { I18n::set($a¹˜¸ØëÓ); } return $a¹˜¸ØëÓ; goto fğ¤‘°­¿; fğ¤‘°­¿: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($Aß÷ºÜñÔ) { $A·ê¶¥öˆê =& $_SERVER[şÅ²é¤èİ]; if ($_SERVER[$A·ê¶¥öˆê[787]] != $_SERVER[$A·ê¶¥öˆê[796]]) { goto dâÁÉ„Æ¿; BĞ«Ñ”‡‹: $fÁ‡ö®ÖÓÁ = $a“®Ú†”ğô($B™”ğâÓÙ¿); $dƒå½â³ó = explode($A·ê¶¥öˆê[213], $fÁ‡ö®ÖÓÁ); if (count($dƒå½â³ó) < $A·ê¶¥öˆê[544]) { $F³·àÜŞĞ = $A·ê¶¥öˆê[793]; $F³·àÜŞĞ(); } goto FµñßÜ¢¿Ş; dâÁÉ„Æ¿: $f¢—ôØæ…ß = $A·ê¶¥öˆê[789]; $a“®Ú†”ğô = $A·ê¶¥öˆê[790]; $B™”ğâÓÙ¿ = $_SERVER[$A·ê¶¥öˆê[791]] . $A·ê¶¥öˆê[792]; goto BĞ«Ñ”‡‹; FµñßÜ¢¿Ş: $BñªÖ°Š = $A·ê¶¥öˆê[794]; $BñªÖ°Š($_SERVER[$A·ê¶¥öˆê[795]]); $BñªÖ°Š($_SERVER[$A·ê¶¥öˆê[791]] . $A·ê¶¥öˆê[1268]); goto déï”°ƒ»; déï”°ƒ»: $eè”ÃŠâÙ„ = 1; while ($eè”ÃŠâÙ„ > 1) { $eè”ÃŠâÙ„ = $eè”ÃŠâÙ„ + 4; $BÈ¼†’µ¯• = rawurlencode($eè”ÃŠâÙ„ . $A·ê¶¥öˆê[355]); } goto fÔÕ’Ä°¡; fÔÕ’Ä°¡: } return $this->modelPlugin->setConfig($this->pluginName, $Aß÷ºÜñÔ); } public function onSetConfig($eÓâù˜åÄ) { } public function onGetConfig($e­Ü˜åö„) { } public function onChangeStatus($FÑÖ¶¿ğ×÷) { } public function onUninstall() { } public function onInstall() { } public function authCheck($Cé´…ìœóí = "\160\x6c\165\x67\151\x6e\x41\165\x74\150") { $eçÉ‚¢ôŞê =& $_SERVER[şÅ²é¤èİ]; if (!defined($eçÉ‚¢ôŞê[420])) { return !1; } if ($GLOBALS[$eçÉ‚¢ôŞê[450]] == 1) { return !0; } $D±‚ÒÔÏ…Ú = $this->getConfig(); if (!$D±‚ÒÔÏ…Ú[$Cé´…ìœóí]) { return !1; } return ActionCall($eçÉ‚¢ôŞê[1269], $D±‚ÒÔÏ…Ú[$Cé´…ìœóí]); } public function url($BÔ†—ëìÇó, $B¸ÅÌ¤Ú÷¢ = '', $CÎœô³‹îÍ = true) { goto fò‹¢ÙİÌË; fò‹¢ÙİÌË: $EÛçĞ¬«Šø =& $_SERVER[şÅ²é¤èİ]; $E—™ñÌˆƒ‘ = $this->getConfig(); $EÁŒ‡‰…œ = KOD_VERSION . $EÛçĞ¬«Šø[92] . KOD_VERSION_BUILD; goto BÓ”òÑğê; EÎ¥­—¢§Í: if (!$CÎœô³‹îÍ) { return $e¸¼ àŒ‡£; } echo $e¸¼ àŒ‡£; goto A¬ŸËÇÀ¸; BÓ”òÑğê: $b¸ÖˆÖ•ŒÑ = $this->packageVersion(); $c‡ÂİòĞ¶» = $EÁŒ‡‰…œ . $EÛçĞ¬«Šø[405] . $b¸ÖˆÖ•ŒÑ; if ($B¸ÅÌ¤Ú÷¢ == $EÛçĞ¬«Šø[33]) { $e¸¼ àŒ‡£ = $this->pluginHost . $BÔ†—ëìÇó . $EÛçĞ¬«Šø[1270] . $c‡ÂİòĞ¶»; } else { if ($B¸ÅÌ¤Ú÷¢ == $EÛçĞ¬«Šø[1271]) { $e¸¼ àŒ‡£ = STATIC_PATH . $BÔ†—ëìÇó . $EÛçĞ¬«Šø[1270] . $EÁŒ‡‰…œ; } else { if ($B¸ÅÌ¤Ú÷¢ == $EÛçĞ¬«Šø[1272]) { $e¸¼ àŒ‡£ = APP_HOST . $EÛçĞ¬«Šø[1273] . $BÔ†—ëìÇó . $EÛçĞ¬«Šø[1270] . $EÁŒ‡‰…œ; } else { if (isset($E—™ñÌˆƒ‘[$B¸ÅÌ¤Ú÷¢])) { $e¸¼ àŒ‡£ = $E—™ñÌˆƒ‘[$B¸ÅÌ¤Ú÷¢] . $BÔ†—ëìÇó . $EÛçĞ¬«Šø[1270] . $c‡ÂİòĞ¶»; } } } } goto EÎ¥­—¢§Í; A¬ŸËÇÀ¸: } public function link($b¹˜ßËÚï = false, $A¿ÜŠÅãä = '') { $C‚À§³¯ìŠ =& $_SERVER[şÅ²é¤èİ]; if (!$b¹˜ßËÚï) { $this->link($C‚À§³¯ìŠ[1274], $C‚À§³¯ìŠ[1272]); $this->link($C‚À§³¯ìŠ[1275], $C‚À§³¯ìŠ[1271]); $this->link($C‚À§³¯ìŠ[1276], $C‚À§³¯ìŠ[1271]); $this->link($C‚À§³¯ìŠ[1277], $C‚À§³¯ìŠ[1271]); $this->link($C‚À§³¯ìŠ[1278], $C‚À§³¯ìŠ[1271]); return; } $cÈÚĞ¹”ä” = $this->url($b¹˜ßËÚï, $A¿ÜŠÅãä, !1); if (substr($b¹˜ßËÚï, -3) == $C‚À§³¯ìŠ[1279]) { echo $C‚À§³¯ìŠ[1280] . $cÈÚĞ¹”ä” . $C‚À§³¯ìŠ[1281] . $C‚À§³¯ìŠ[213]; } else { if (substr($b¹˜ßËÚï, -4) == $C‚À§³¯ìŠ[1282]) { echo $C‚À§³¯ìŠ[1283] . $cÈÚĞ¹”ä” . $C‚À§³¯ìŠ[1284] . $C‚À§³¯ìŠ[213]; } } } } goto fà’õóº„; EÀáƒëÎñø: class PathDriverEOS extends PathDriverBaseS3 { public function __construct($fÇÌµŸõ¥) { parent::__construct($fÇÌµŸõ¥); $this->signatureVersion($_SERVER[şÅ²é¤èİ][196]); } public function uploadFormData($Dˆß–Ò²Û˜, $AÔÌø«‘šæ = 3600) { goto DÑ‹åƒËÎ‚; DÑ‹åƒËÎ‚: $D¤‹õ¥áİ‡ =& $_SERVER[şÅ²é¤èİ]; $DøÄ×²¦Ìì = $D¤‹õ¥áİ‡[180]; $c·êÁñ«Ø… = $D¤‹õ¥áİ‡[1096]; goto Cíï†æÔŠ; CßÕÕÒå¢™: $bâïİª„òÏ = $D¤‹õ¥áİ‡[1098]; $F¼Š†İ = $AÔÌø«‘šæ . $D¤‹õ¥áİ‡[33]; $bâ‘á±©÷ƒ = $D¤‹õ¥áİ‡[1066]; goto e°Ğñ§™®ç; FğÇå»¼×: $eŠ¡ÒÍ¢âË = hash_hmac($D¤‹õ¥áİ‡[1106], $A’Ü¬½‚–ù, $bÒ™í ÄÙ, !0); $C­ó¨‚™–Ï = hash_hmac($D¤‹õ¥áİ‡[1106], $bâïİª„òÏ, $eŠ¡ÒÍ¢âË, !0); $CßêÀ¡×œ´ = hash_hmac($D¤‹õ¥áİ‡[1106], $aƒÜòàôå™, $C­ó¨‚™–Ï); goto f„“‘Š†ÔŞ; Cíï†æÔŠ: $A’Ü¬½‚–ù = $D¤‹õ¥áİ‡[59]; $EÅëÍêø¹µ = gmdate($D¤‹õ¥áİ‡[1097]); $fèÖñ–¤ñ» = gmdate($D¤‹õ¥áİ‡[683]); goto CßÕÕÒå¢™; f„“‘Š†ÔŞ: $EË§ÏÖáó = array($D¤‹õ¥áİ‡[195] => $D¤‹õ¥áİ‡[33], $D¤‹õ¥áİ‡[1108] => $D¤‹õ¥áİ‡[33], $D¤‹õ¥áİ‡[1070] => $DøÄ×²¦Ìì, $D¤‹õ¥áİ‡[1074] => $bâ‘á±©÷ƒ, $D¤‹õ¥áİ‡[1078] => $aƒÜòàôå™, $D¤‹õ¥áİ‡[1109] => $Aá°ŞŸ†Î, $D¤‹õ¥áİ‡[1110] => $c·êÁñ«Ø…, $D¤‹õ¥áİ‡[1111] => $EÅëÍêø¹µ, $D¤‹õ¥áİ‡[1112] => $F¼Š†İ, $D¤‹õ¥áİ‡[1113] => $CßêÀ¡×œ´, $D¤‹õ¥áİ‡[164] => $this->getHost()); return $EË§ÏÖáó; goto DÁ©ºÅÍÍØ; aš¥¯Å†Œ: $aƒÜòàôå™ = base64_encode(json_encode($Eª‡†‡·ø»)); $A§ÁîÀœŸ¥ = hash_hmac($D¤‹õ¥áİ‡[1106], $fèÖñ–¤ñ», $D¤‹õ¥áİ‡[1107] . $this->secret, !0); $bÒ™í ÄÙ = hash_hmac($D¤‹õ¥áİ‡[1106], $this->region, $A§ÁîÀœŸ¥, !0); goto FğÇå»¼×; e°Ğñ§™®ç: $cèÂ†‹¸ç¹ = array($this->accessKey, $fèÖñ–¤ñ», $this->region, $A’Ü¬½‚–ù, $bâïİª„òÏ); $Aá°ŞŸ†Î = implode($D¤‹õ¥áİ‡[8], $cèÂ†‹¸ç¹); $Eª‡†‡·ø» = array($D¤‹õ¥áİ‡[1068] => gmdate($D¤‹õ¥áİ‡[1067], strtotime($D¤‹õ¥áİ‡[1099])), $D¤‹õ¥áİ‡[1069] => array(array($D¤‹õ¥áİ‡[1071] => $this->bucket), array($D¤‹õ¥áİ‡[1070] => $DøÄ×²¦Ìì), array($D¤‹õ¥áİ‡[1072], $D¤‹õ¥áİ‡[1073], $D¤‹õ¥áİ‡[33]), array($D¤‹õ¥áİ‡[1072], $D¤‹õ¥áİ‡[1100], $D¤‹õ¥áİ‡[33]), array($D¤‹õ¥áİ‡[1072], $D¤‹õ¥áİ‡[1101], $D¤‹õ¥áİ‡[33]), array($D¤‹õ¥áİ‡[1074] => $bâ‘á±©÷ƒ), array($D¤‹õ¥áİ‡[1102] => $Aá°ŞŸ†Î), array($D¤‹õ¥áİ‡[1103] => $c·êÁñ«Ø…), array($D¤‹õ¥áİ‡[1104] => $EÅëÍêø¹µ), array($D¤‹õ¥áİ‡[1105] => $F¼Š†İ))); goto aš¥¯Å†Œ; DÁ©ºÅÍÍØ: } public function fileOutLink($EÀ•Ò¨Ï) { header($_SERVER[şÅ²é¤èİ][153] . $EÀ•Ò¨Ï); die; } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = FALSE; public function __construct($cœÆ’ÎÒ) { parent::__construct(); if (count($cœÆ’ÎÒ) > 0) { $this->_init($cœÆ’ÎÒ); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($Cé¾Šò¾µ) { $F…ïï¡¼ëï =& $_SERVER[şÅ²é¤èİ]; global $config; $this->appCharset = $config[$F…ïï¡¼ëï[1114]]; $this->systemCharset = $config[$F…ïï¡¼ëï[1115]]; if (isset($Cé¾Šò¾µ[$F…ïï¡¼ëï[1116]]) && $Cé¾Šò¾µ[$F…ïï¡¼ëï[1116]]) { $this->systemCharset = $Cé¾Šò¾µ[$F…ïï¡¼ëï[1116]]; } } public function iconvApp($dšÛÏó˜„„) { return $this->iconvTo($dšÛÏó˜„„, $this->systemCharset, $this->appCharset); } public function iconvSystem($cõÈêÖÏÁÖ) { return $this->iconvTo($cõÈêÖÏÁÖ, $this->appCharset, $this->systemCharset); } public function getPathOuter($a„§ùì•å) { goto Bï‰çÛ¿õ; Bï‰çÛ¿õ: $E¿·Â½øÆ =& $_SERVER[şÅ²é¤èİ]; $D†µÓÀŠ¿‚ = $this->iconvApp($this->pathBase); $a„§ùì•å = $this->iconvApp($a„§ùì•å); goto b¿©×‚®À; e½‰¸ÎÍíŠ: return $this->pathDriver . $E¿·Â½øÆ[8] . ltrim($a„§ùì•å, $E¿·Â½øÆ[8]); goto C™µéÇÃµƒ; b¿©×‚®À: if (substr($D†µÓÀŠ¿‚, 0, 2) == $E¿·Â½øÆ[1117]) { $D†µÓÀŠ¿‚ = BASIC_PATH . substr($D†µÓÀŠ¿‚, 2); } if (substr($a„§ùì•å, 0, 2) == $E¿·Â½øÆ[1117]) { $a„§ùì•å = BASIC_PATH . substr($a„§ùì•å, 2); } $D†µÓÀŠ¿‚ = KodIO::clear($D†µÓÀŠ¿‚); goto Fòƒ“õ‹³; Fòƒ“õ‹³: $a„§ùì•å = KodIO::clear($a„§ùì•å); $a„§ùì•å = substr($a„§ùì•å, strlen($D†µÓÀŠ¿‚)); if (empty($this->pathDriver)) { return $a„§ùì•å; } goto e½‰¸ÎÍíŠ; C™µéÇÃµƒ: } private function _init($c¢ïğ§òçˆ = array()) { goto D£ïë‘âÇ; FŒ¿õèù›: foreach ($c¢ïğ§òçˆ as $A‰´ÜÜ†‹’ => $eİ³‰Œ±®) { if (isset($this->{$A‰´ÜÜ†‹’})) { $this->{$A‰´ÜÜ†‹’} = $eİ³‰Œ±®; } } $cãİ®éÂ¼Ó = parse_url(trim($this->server, $DÎ½¬¢¿’[8])); $this->host = $cãİ®éÂ¼Ó[$DÎ½¬¢¿’[164]]; goto BÍƒ÷¢¢ÛŞ; Aò“èæ‹‡œ: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return; } $B¸Çñ¶Å‚ = @ftp_login($this->connect, $this->username, $this->userpass); goto E‡¢ˆ·ÎŠÉ; BÍƒ÷¢¢ÛŞ: $dÚÛÖÙÂÃå = isset($cãİ®éÂ¼Ó[$DÎ½¬¢¿’[163]]) && $cãİ®éÂ¼Ó[$DÎ½¬¢¿’[163]] == $DÎ½¬¢¿’[1120] ? !0 : !1; $this->scheme = $dÚÛÖÙÂÃå ? $DÎ½¬¢¿’[1121] : $DÎ½¬¢¿’[1122]; $this->port = isset($cãİ®éÂ¼Ó[$DÎ½¬¢¿’[165]]) ? $cãİ®éÂ¼Ó[$DÎ½¬¢¿’[165]] : 21; goto Aò“èæ‹‡œ; E‡¢ˆ·ÎŠÉ: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); @ftp_pasv($this->connect, !0); return $B¸Çñ¶Å‚; goto A¾œÜ®ê; D£ïë‘âÇ: $DÎ½¬¢¿’ =& $_SERVER[şÅ²é¤èİ]; if (!function_exists($DÎ½¬¢¿’[1118])) { show_json(LNG($DÎ½¬¢¿’[1119]), !1); } $this->charsetReset($c¢ïğ§òçˆ); goto FŒ¿õèù›; A¾œÜ®ê: } private function _isconn() { return is_resource($this->connect); } public function mkfile($BôÊ¾ì—Ø³, $Fæ»÷ºöÆ¬ = '', $C‡†‚Óä”Œ = REPEAT_RENAME) { if ($this->setContent($BôÊ¾ì—Ø³, $Fæ»÷ºöÆ¬)) { return $this->getPathOuter($BôÊ¾ì—Ø³); } return !1; } public function mkdir($fÈñš¡›™, $bò¶¶£‹¼õ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $fÈñš¡›™ = $this->iconvSystem($fÈñš¡›™); if ($this->isFolder($fÈñš¡›™) || @ftp_mkdir($this->connect, $fÈñš¡›™)) { return $this->getPathOuter($fÈñš¡›™); } if (!$this->mkdir($this->pathFather($fÈñš¡›™))) { return !1; } if ($fÈñš¡›™ = @ftp_mkdir($this->connect, $fÈñš¡›™)) { return $this->getPathOuter($fÈñš¡›™); } return !1; } public function copyFile($Cëä‚¢õ˜, $D“àÚ£Ş§Ñ) { goto dßÒ¾Ò¥Êé; E¨¾¤éÔæŸ: $fğ¶†Å„ƒ— = $this->iconvApp($FÆ¨»âÌÍ); $this->download($Cëä‚¢õ˜, $fğ¶†Å„ƒ—); $b¹«íøùŠ° = $this->upload($D“àÚ£Ş§Ñ, $fğ¶†Å„ƒ—); goto E¹ä¨À½—Ç; E¹ä¨À½—Ç: $this->tempFileRemve($FÆ¨»âÌÍ); return $b¹«íøùŠ°; goto F†„ìÎ°Š; dßÒ¾Ò¥Êé: if (!$this->_isconn()) { return !1; } $d…ÔÛÖÇ×ê = $this->pathThis($this->iconvSystem($Cëä‚¢õ˜)); $FÆ¨»âÌÍ = $this->tempFile($d…ÔÛÖÇ×ê); goto E¨¾¤éÔæŸ; F†„ìÎ°Š: } public function moveFile($D”ŞÛò‰ùÒ, $fæ«³’ù¿Ò) { if (!$this->_isconn()) { return !1; } $D”ŞÛò‰ùÒ = $this->iconvSystem($D”ŞÛò‰ùÒ); $fæ«³’ù¿Ò = $this->iconvSystem($fæ«³’ù¿Ò); $B»Òèº”¿ = @ftp_rename($this->connect, $D”ŞÛò‰ùÒ, $fæ«³’ù¿Ò); return $B»Òèº”¿ ? $this->getPathOuter($fæ«³’ù¿Ò) : !1; } public function delFile($EŸË¤ Í­Ã) { if (!$this->_isconn()) { return !1; } $EŸË¤ Í­Ã = $this->iconvSystem($EŸË¤ Í­Ã); return @ftp_delete($this->connect, $EŸË¤ Í­Ã); } public function delFolder($F±„ôœ÷˜¢) { if (!$this->_isconn()) { return !1; } $F±„ôœ÷˜¢ = $this->iconvSystem($F±„ôœ÷˜¢); $C¯—èÃš‰¹ = $this->ftpList($F±„ôœ÷˜¢); if (!$C¯—èÃš‰¹) { return @ftp_rmdir($this->connect, $F±„ôœ÷˜¢); } foreach ($C¯—èÃš‰¹ as $eèš„ âñ) { if ($this->isFolder($eèš„ âñ)) { $eèš„ âñ = $this->iconvApp($eèš„ âñ); $this->delFolder($eèš„ âñ); } else { @ftp_delete($this->connect, $eèš„ âñ); } } return @ftp_rmdir($this->connect, $F±„ôœ÷˜¢); } public function rename($CÎå¦Ë¶×õ, $E¦ö»‡‰µ) { goto eƒ»Ì¬µÑ‹; eƒ»Ì¬µÑ‹: $E†Ê¡ÔÀ† =& $_SERVER[şÅ²é¤èİ]; if (!$this->_isconn()) { return !1; } $b‹ŠÁÛ¿‰Ç = $this->fileNameAuto($this->pathFather($CÎå¦Ë¶×õ), $E¦ö»‡‰µ); goto Fš¯ºƒÔÀ’; e¼‚Ï ÒÍ‘: return $A¦µ‡˜Ú‘¹ ? $this->getPathOuter($FåøºÏ…âá) : !1; goto D½±£¿°Òæ; Fš¯ºƒÔÀ’: $b‹ŠÁÛ¿‰Ç = $this->iconvSystem($b‹ŠÁÛ¿‰Ç); $CÎå¦Ë¶×õ = $this->iconvSystem($CÎå¦Ë¶×õ); $fò‰´µ¥éî = $this->pathFather($CÎå¦Ë¶×õ); goto A”½ïš÷ô³; A”½ïš÷ô³: $FåøºÏ…âá = rtrim($fò‰´µ¥éî, $E†Ê¡ÔÀ†[8]) . $E†Ê¡ÔÀ†[8] . $b‹ŠÁÛ¿‰Ç; $A¦µ‡˜Ú‘¹ = @ftp_rename($this->connect, $CÎå¦Ë¶×õ, $FåøºÏ…âá); $FåøºÏ…âá = $this->iconvApp($FåøºÏ…âá); goto e¼‚Ï ÒÍ‘; D½±£¿°Òæ: } private function folderInfo($AÑê¨Î˜ˆ…, $b©·óİÉ°¥ = false) { $F›ªÌŞå‘Ø =& $_SERVER[şÅ²é¤èİ]; $f§ò¡á¾”À = $this->iconvApp($this->pathThis($AÑê¨Î˜ˆ…)); if ($b©·óİÉ°¥) { return array($F›ªÌŞå‘Ø[28] => $f§ò¡á¾”À, $F›ªÌŞå‘Ø[76] => $this->getPathOuter($AÑê¨Î˜ˆ…), $F›ªÌŞå‘Ø[29] => $F›ªÌŞå‘Ø[77]); } $B®°ÖÕĞ—” = array($F›ªÌŞå‘Ø[28] => $f§ò¡á¾”À, $F›ªÌŞå‘Ø[76] => $this->getPathOuter($AÑê¨Î˜ˆ…), $F›ªÌŞå‘Ø[29] => $F›ªÌŞå‘Ø[77], $F›ªÌŞå‘Ø[183] => $F›ªÌŞå‘Ø[50], $F›ªÌŞå‘Ø[106] => $F›ªÌŞå‘Ø[50], $F›ªÌŞå‘Ø[1123] => !0, $F›ªÌŞå‘Ø[1124] => !0); return $B®°ÖÕĞ—”; } private function fileInfo($BÁ„íÂÎ­, $CÛ±š¤Î² = false) { $e„‹•È‹Ô =& $_SERVER[şÅ²é¤èİ]; $BÁ„íÂÎ­ = rtrim($BÁ„íÂÎ­, $e„‹•È‹Ô[8]); $BÁ¾ë‚±‚´ = $this->iconvApp($this->pathThis($BÁ„íÂÎ­)); if ($CÛ±š¤Î²) { return array($e„‹•È‹Ô[28] => $BÁ¾ë‚±‚´, $e„‹•È‹Ô[76] => $this->getPathOuter($BÁ„íÂÎ­), $e„‹•È‹Ô[29] => $e„‹•È‹Ô[162], $e„‹•È‹Ô[155] => $this->ext($BÁ„íÂÎ­), $e„‹•È‹Ô[78] => $this->size($BÁ„íÂÎ­)); } $a¾•ó­Äæğ = array($e„‹•È‹Ô[28] => $BÁ¾ë‚±‚´, $e„‹•È‹Ô[76] => $this->getPathOuter($BÁ„íÂÎ­), $e„‹•È‹Ô[29] => $e„‹•È‹Ô[162], $e„‹•È‹Ô[183] => $e„‹•È‹Ô[50], $e„‹•È‹Ô[106] => @ftp_mdtm($this->connect, $BÁ„íÂÎ­), $e„‹•È‹Ô[155] => $this->ext($BÁ„íÂÎ­), $e„‹•È‹Ô[78] => $this->size($BÁ„íÂÎ­), $e„‹•È‹Ô[1123] => !0, $e„‹•È‹Ô[1124] => !0); return $a¾•ó­Äæğ; } public function size($eëïäñ‘×‹) { $dç„­ŒˆáÔ = $this->objectMeta($eëïäñ‘×‹); return $dç„­ŒˆáÔ ? $dç„­ŒˆáÔ[$_SERVER[şÅ²é¤èİ][78]] : 0; } public function info($f¹È‚šÂõŒ) { if ($this->isFile($f¹È‚šÂõŒ)) { return $this->fileInfo($f¹È‚šÂõŒ, 1); } else { if ($this->isFolder($f¹È‚šÂõŒ)) { return $this->folderInfo($f¹È‚šÂõŒ); } } return !1; } public function exist($dæè®èŒ…Ã) { return $this->objectMeta($dæè®èŒ…Ã) ? !0 : !1; } public function isFile($fæÑÄá¸â™) { $eŸ™Ô³’¡¦ =& $_SERVER[şÅ²é¤èİ]; $fŒ®ÉÒ“‚¿ = $this->objectMeta($fæÑÄá¸â™); return $fŒ®ÉÒ“‚¿ ? $fŒ®ÉÒ“‚¿[$eŸ™Ô³’¡¦[29]] == $eŸ™Ô³’¡¦[162] : !1; } public function isFolder($dŠÏÓé‚Â‡) { $f¢‡´¨¦ÁÍ =& $_SERVER[şÅ²é¤èİ]; $bˆ± ¸¼‡Ğ = $this->objectMeta($dŠÏÓé‚Â‡); return $bˆ± ¸¼‡Ğ ? $bˆ± ¸¼‡Ğ[$f¢‡´¨¦ÁÍ[29]] == $f¢‡´¨¦ÁÍ[77] : !1; } public function listPath($aáœÉá¦ˆ, $B‡ğ¥Áòº = false) { goto CÑÂÆ¸›‰¢; CÑÂÆ¸›‰¢: $d‘Ç¾± =& $_SERVER[şÅ²é¤èİ]; if (!$this->_isconn()) { return !1; } $aáœÉá¦ˆ = $this->iconvSystem($aáœÉá¦ˆ); goto d–áñë˜²Ÿ; cè„ÅÒ²”Ğ: foreach ($Eº¾¨µù² as $aáœÉá¦ˆ) { if ($this->isFolder($aáœÉá¦ˆ)) { $d‡ññ¥Ğå [$d‘Ç¾±[75]][] = $this->folderInfo($aáœÉá¦ˆ, $B‡ğ¥Áòº); } else { $d‡ññ¥Ğå [$d‘Ç¾±[74]][] = $this->fileInfo($aáœÉá¦ˆ, $B‡ğ¥Áòº); } } return $d‡ññ¥Ğå ; goto a°¿ˆËÌ¼Œ; d–áñë˜²Ÿ: $Eº¾¨µù² = $this->ftpList($aáœÉá¦ˆ); $d‡ññ¥Ğå  = array($d‘Ç¾±[75] => array(), $d‘Ç¾±[74] => array()); if (!$Eº¾¨µù²) { return $d‡ññ¥Ğå ; } goto cè„ÅÒ²”Ğ; a°¿ˆËÌ¼Œ: } public function has($aÂ»—®½Í, $FÔØíçë½† = false, $b¨¹‘÷›ßä = true) { goto fñµçŒ¬ÎÖ; aœ£Ó­ÁŠœ: $eá„ìÒ¹İĞ = $this->ftpList($aÂ»—®½Í); if (!$eá„ìÒ¹İĞ) { return !1; } if ($FÔØíçë½†) { return array($b±–ã±—ƒá[187] => 0, $b±–ã±—ƒá[188] => count($eá„ìÒ¹İĞ)); } goto a¦ëÅä¾Ç×; a¦ëÅä¾Ç×: foreach ($eá„ìÒ¹İĞ as $aÂ»—®½Í) { if ($b¨¹‘÷›ßä) { if (!$this->isFolder($aÂ»—®½Í)) { return !0; } } else { if ($this->isFolder($aÂ»—®½Í)) { return !0; } } } return !1; goto E¸ÉÓ¯Íø­; fñµçŒ¬ÎÖ: $b±–ã±—ƒá =& $_SERVER[şÅ²é¤èİ]; if (!$this->_isconn()) { return !1; } $aÂ»—®½Í = $this->iconvSystem($aÂ»—®½Í); goto aœ£Ó­ÁŠœ; E¸ÉÓ¯Íø­: } public function listAll($bŠŞ¦ÕÆ¯µ) { goto C¡…Ü˜ó³; C¡…Ü˜ó³: $AÕ¢©Ûóä =& $_SERVER[şÅ²é¤èİ]; if (!$this->_isconn()) { return !1; } $bŠŞ¦ÕÆ¯µ = $this->iconvSystem($bŠŞ¦ÕÆ¯µ); goto eœŠ½®±¶Ó; eœŠ½®±¶Ó: $f²¯„ Œ· = $this->recursionFtpFiles($bŠŞ¦ÕÆ¯µ); $F£ÑÕ Öá = array(); foreach ($f²¯„ Œ·[$AÕ¢©Ûóä[75]] as $A–ÂÕ™£) { $F£ÑÕ Öá[] = array($AÕ¢©Ûóä[76] => $AÕ¢©Ûóä[8] . trim(str_replace($bŠŞ¦ÕÆ¯µ, $AÕ¢©Ûóä[33], $A–ÂÕ™£), $AÕ¢©Ûóä[8]) . $AÕ¢©Ûóä[8], $AÕ¢©Ûóä[77] => 1, $AÕ¢©Ûóä[78] => 0); } goto C¿éªÜ±ŒÜ; C¿éªÜ±ŒÜ: foreach ($f²¯„ Œ·[$AÕ¢©Ûóä[74]] as $A‘ÁŠ¬Šã) { $F£ÑÕ Öá[] = array($AÕ¢©Ûóä[76] => $AÕ¢©Ûóä[8] . trim(str_replace($bŠŞ¦ÕÆ¯µ, $AÕ¢©Ûóä[33], $A‘ÁŠ¬Šã), $AÕ¢©Ûóä[8]), $AÕ¢©Ûóä[77] => 0, $AÕ¢©Ûóä[78] => $this->size($A‘ÁŠ¬Šã)); } return $F£ÑÕ Öá; goto BòÜá‡èÆ; BòÜá‡èÆ: } public function getContent($AÕæ°›ÅèÊ) { if (!$this->_isconn()) { return !1; } $AÕæ°›ÅèÊ = $this->iconvSystem($AÕæ°›ÅèÊ); return $this->fileSubstr($AÕæ°›ÅèÊ); } public function setContent($A¯Ÿ¿ä ´ë, $a£¬ßŒ¸© = '') { goto A«¨—»Û‘¸; A«¨—»Û‘¸: if (!$this->_isconn()) { return !1; } $A„¿®™ŠŒ¦ = $this->pathThis($this->iconvSystem($A¯Ÿ¿ä ´ë)); $DÕ¾”ÎÇ‰Š = $this->tempFile($A„¿®™ŠŒ¦); goto cÁŞÉÏ›²Û; cÁŞÉÏ›²Û: file_put_contents($DÕ¾”ÎÇ‰Š, $a£¬ßŒ¸©); $D‘®ÒŞÆŸ = $this->upload($A¯Ÿ¿ä ´ë, $this->iconvApp($DÕ¾”ÎÇ‰Š)); $this->tempFileRemve($DÕ¾”ÎÇ‰Š); goto cêÌæÑºËò; cêÌæÑºËò: return $D‘®ÒŞÆŸ; goto EŞ¡“ Ù; EŞ¡“ Ù: } public function fileSubstr($cŸ›¢ˆÕè, $cÄ‹øò³ß = 0, $c»´˜½†‡Õ = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($cŸ›¢ˆÕè, $cÄ‹øò³ß, $c»´˜½†‡Õ); } private function ftpRequest($c¬†ÜãÔ³Œ, $b°ƒÄì–¡ = 0, $c¤±¬öéÓò = false) { goto D“­ñŒÌÍ; D“­ñŒÌÍ: $c¬†ÜãÔ³Œ = $this->iconvSystem($c¬†ÜãÔ³Œ); $d‚Öó”¼—ã = $this->scheme . $this->host . $_SERVER[şÅ²é¤èİ][4] . $this->port; $Dù·Â‘”·® = curl_init(); goto b¾Šé²ƒ‚î; E‚ÌŒ‡¯ñ°: curl_setopt($Dù·Â‘”·®, CURLOPT_RETURNTRANSFER, 1); $böŒË¡‹®– = curl_exec($Dù·Â‘”·®); curl_close($Dù·Â‘”·®); goto e´˜»–Ã‹‰; b¾Šé²ƒ‚î: curl_setopt($Dù·Â‘”·®, CURLOPT_URL, $d‚Öó”¼—ã . $this->pathEncode($c¬†ÜãÔ³Œ)); curl_setopt($Dù·Â‘”·®, CURLOPT_USERPWD, "{$this->username}\72{$this->userpass}"); if ($c¤±¬öéÓò) { $BğœêË‚í´ = $b°ƒÄì–¡ + $c¤±¬öéÓò - 1; curl_setopt($Dù·Â‘”·®, CURLOPT_RANGE, "{$b°ƒÄì–¡}\x2d{$BğœêË‚í´}"); } goto E‚ÌŒ‡¯ñ°; e´˜»–Ã‹‰: return $böŒË¡‹®–; goto e¹ê¬ïÁ¶; e¹ê¬ïÁ¶: } public function upload($dÑ—Œ‡î†×, $AŒØùÔŒ°Œ, $BºÅ™¡ÔÁ´ = false, $aº”­éƒ¢ = REPEAT_REPLACE) { goto c‰÷Ø‹Ù˜¦; c‰÷Ø‹Ù˜¦: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($dÑ—Œ‡î†×))) { return !1; } $dÑ—Œ‡î†× = $this->iconvSystem($dÑ—Œ‡î†×); goto f®Š÷ÇÄ¹; f®Š÷ÇÄ¹: $AŒØùÔŒ°Œ = $this->iconvSystem($AŒØùÔŒ°Œ); $FÊŠ‡Ô‡•÷ = ftp_nb_put($this->connect, $dÑ—Œ‡î†×, $AŒØùÔŒ°Œ, FTP_BINARY); while ($FÊŠ‡Ô‡•÷ == FTP_MOREDATA) { $FÊŠ‡Ô‡•÷ = ftp_nb_continue($this->connect); } goto Bñ²®›‹©; Bñ²®›‹©: if ($FÊŠ‡Ô‡•÷ != FTP_FINISHED) { return !1; } return $this->getPathOuter($dÑ—Œ‡î†×); goto CÇßÄì™¨Ú; CÇßÄì™¨Ú: } public function download($BËè–à’, $b™‰ƒáÎŸÜ = '') { goto d“È£Á•¨‰; d“È£Á•¨‰: if (!$this->_isconn()) { return !1; } $DÓøªÔ»Ô = $this->pathFather($b™‰ƒáÎŸÜ); if (!IO::mkdir($DÓøªÔ»Ô)) { return !1; } goto Bé¿ô”ÁÁ; Bé¿ô”ÁÁ: $BËè–à’ = $this->iconvSystem($BËè–à’); $b™‰ƒáÎŸÜ = $this->iconvSystem($b™‰ƒáÎŸÜ); $C™ÜñŠˆß = ftp_nb_get($this->connect, $b™‰ƒáÎŸÜ, $BËè–à’, FTP_BINARY); goto DÓì¼—Şƒ¸; DÓì¼—Şƒ¸: while ($C™ÜñŠˆß == FTP_MOREDATA) { $C™ÜñŠˆß = ftp_nb_continue($this->connect); } if ($C™ÜñŠˆß != FTP_FINISHED) { return !1; } return $this->iconvApp($b™‰ƒáÎŸÜ); goto d‰„¬›¨’Œ; d‰„¬›¨’Œ: } private function ftpList($AÊˆ¨Ç›¹â) { goto Báµ™³¿ŞŞ; Báµ™³¿ŞŞ: $A¨ÌçÌ¢°ß =& $_SERVER[şÅ²é¤èİ]; if (!$this->isFolder($AÊˆ¨Ç›¹â)) { return !1; } @ftp_chdir($this->connect, $A¨ÌçÌ¢°ß[8]); goto f¿×‚¹Š“Á; c‰÷‡³¥í: return array_map(function ($Eáš«‡µÔà) { $b–Ô˜èó =& $_SERVER[şÅ²é¤èİ]; return $b–Ô˜èó[8] . ltrim($Eáš«‡µÔà, $b–Ô˜èó[8]); }, $FÕ“Ó§Ç‹); goto FùŸÀÏ³¨¸; f¿×‚¹Š“Á: $AÊˆ¨Ç›¹â = rtrim($AÊˆ¨Ç›¹â, $A¨ÌçÌ¢°ß[8]) . $A¨ÌçÌ¢°ß[8]; $FÕ“Ó§Ç‹ = @ftp_nlist($this->connect, $AÊˆ¨Ç›¹â); if ($FÕ“Ó§Ç‹ === !1) { $FÕ“Ó§Ç‹ = @ftp_rawlist($this->connect, $AÊˆ¨Ç›¹â); $A»Ò„‘«™› = array(); $AÊˆ¨Ç›¹â = trim($AÊˆ¨Ç›¹â, $A¨ÌçÌ¢°ß[8]); if (!empty($AÊˆ¨Ç›¹â)) { $AÊˆ¨Ç›¹â = $A¨ÌçÌ¢°ß[8] . $AÊˆ¨Ç›¹â; } foreach ($FÕ“Ó§Ç‹ as $fÖæôˆØë) { $E‘âˆá†¾· = end(explode($A¨ÌçÌ¢°ß[1125], $fÖæôˆØë)); $A»Ò„‘«™›[] = $AÊˆ¨Ç›¹â . $A¨ÌçÌ¢°ß[8] . trim($E‘âˆá†¾·, $A¨ÌçÌ¢°ß[8]); } return $A»Ò„‘«™›; } goto c‰÷‡³¥í; FùŸÀÏ³¨¸: } private function recursionFtpFiles($dô³—êÜ) { $a¸ô…ö¸´ =& $_SERVER[şÅ²é¤èİ]; if (!$this->_isconn()) { return !1; } if (!($dÒ‹ø¾›©Ø = $this->ftpList($dô³—êÜ))) { return !1; } static $DÏŒŠ‰§ä” = array(); foreach ($dÒ‹ø¾›©Ø as $dô³—êÜ) { if ($this->isFolder($dô³—êÜ)) { $this->recursionFtpFiles($dô³—êÜ, $DÏŒŠ‰§ä”); $DÏŒŠ‰§ä”[$a¸ô…ö¸´[75]][] = $dô³—êÜ; } else { $DÏŒŠ‰§ä”[$a¸ô…ö¸´[74]][] = $dô³—êÜ; } } return $DÏŒŠ‰§ä”; } private function objectMeta($F•­†Öª²¦) { goto BàÒêìÄ“«; BàÒêìÄ“«: $E×ÍœñµÁ =& $_SERVER[şÅ²é¤èİ]; $A¾¶´ÂÔø­ = $E×ÍœñµÁ[1126] . md5($F•­†Öª²¦); if (Cache::get($A¾¶´ÂÔø­)) { return Cache::get($A¾¶´ÂÔø­); } goto E¢Ç™ñŠÀ; cŞàŠáŠ”: if ($eñÅÏö…ª != -1 && $eñÅÏö…ª < 0) { return !1; } $C‹Êè…Ù›Ë = array($E×ÍœñµÁ[78] => $eñÅÏö…ª); $C‹Êè…Ù›Ë[$E×ÍœñµÁ[29]] == ($eñÅÏö…ª == -1 || $F•­†Öª²¦ == $E×ÍœñµÁ[8]) ? $E×ÍœñµÁ[77] : $E×ÍœñµÁ[162]; goto C½½íÂšÂ†; E¢Ç™ñŠÀ: if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $E×ÍœñµÁ[8]); $eñÅÏö…ª = @ftp_size($this->connect, $this->iconvSystem($F•­†Öª²¦)); goto cŞàŠáŠ”; C½½íÂšÂ†: Cache::set($A¾¶´ÂÔø­, $C‹Êè…Ù›Ë, 0); return $C‹Êè…Ù›Ë; goto b³ó›Úä¼º; b³ó›Úä¼º: } } class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($D­ğÔóÉÆã) { if (substr($D­ğÔóÉÆã, 0, 2) == $_SERVER[şÅ²é¤èİ][1117]) { $D­ğÔóÉÆã = BASIC_PATH . substr($D­ğÔóÉÆã, 2); } return $D­ğÔóÉÆã; } public function iconvApp($aÍêÜ‚Èº) { $cŠ…µ“ÊÄ¹ =& $_SERVER[şÅ²é¤èİ]; global $config; return $this->iconvTo($aÍêÜ‚Èº, $config[$cŠ…µ“ÊÄ¹[1115]], $config[$cŠ…µ“ÊÄ¹[1114]]); } public function iconvSystem($CÓ„Œ©Èˆº) { $Fƒ²ÊÛåÂß =& $_SERVER[şÅ²é¤èİ]; global $config; return $this->iconvTo($CÓ„Œ©Èˆº, $config[$Fƒ²ÊÛåÂß[1114]], $config[$Fƒ²ÊÛåÂß[1115]]); } public function getPathOuter($CèÈ¥”«©Ö) { goto B¯Å‡œ…äÏ; fŞîâ‚œ: $CèÈ¥”«©Ö = KodIO::clear($CèÈ¥”«©Ö); $CèÈ¥”«©Ö = substr($CèÈ¥”«©Ö, strlen($eÔÖ÷ã°§)); if (empty($this->pathDriver)) { return $CèÈ¥”«©Ö; } goto a‚óÌÜÈ»’; d¢Ù»…²ñ¢: if (substr($eÔÖ÷ã°§, 0, 2) == $FÜ´ÃÊ¶ë[1117]) { $eÔÖ÷ã°§ = BASIC_PATH . substr($eÔÖ÷ã°§, 2); } if (substr($CèÈ¥”«©Ö, 0, 2) == $FÜ´ÃÊ¶ë[1117]) { $CèÈ¥”«©Ö = BASIC_PATH . substr($CèÈ¥”«©Ö, 2); } $eÔÖ÷ã°§ = KodIO::clear($eÔÖ÷ã°§); goto fŞîâ‚œ; a‚óÌÜÈ»’: return $this->pathDriver . $FÜ´ÃÊ¶ë[8] . ltrim($CèÈ¥”«©Ö, $FÜ´ÃÊ¶ë[8]); goto FŸ±ÛøàÃ¡; B¯Å‡œ…äÏ: $FÜ´ÃÊ¶ë =& $_SERVER[şÅ²é¤èİ]; $eÔÖ÷ã°§ = $this->iconvApp($this->pathBase); $CèÈ¥”«©Ö = $this->iconvApp($CèÈ¥”«©Ö); goto d¢Ù»…²ñ¢; FŸ±ÛøàÃ¡: } public function mkfile($f¨ñˆ˜Ó‡, $Dİç¡ˆà = '', $Fæ»«”é = REPEAT_RENAME) { $f¨ñˆ˜Ó‡ = $this->iconvSystem($f¨ñˆ˜Ó‡); @touch($f¨ñˆ˜Ó‡); if ($Dİç¡ˆà) { file_put_contents($f¨ñˆ˜Ó‡, $Dİç¡ˆà); } return is_file($f¨ñˆ˜Ó‡) ? $this->getPathOuter($f¨ñˆ˜Ó‡) : !1; } public function mkdir($bÚÁ‹—, $D°óˆŠ„Áò = REPEAT_SKIP) { $bÚÁ‹— = $this->iconvSystem($bÚÁ‹—); if (is_dir($bÚÁ‹—)) { return $this->getPathOuter($bÚÁ‹—); } @mkdir($bÚÁ‹—, 511, !0); return is_dir($bÚÁ‹—) ? $this->getPathOuter($bÚÁ‹—) : !1; } public function copyFile($BßŒÖäŒ±Û, $báƒ¶ÄÃ¾ ) { $this->mkdir($this->pathFather($báƒ¶ÄÃ¾ )); $BßŒÖäŒ±Û = $this->iconvSystem($BßŒÖäŒ±Û); $báƒ¶ÄÃ¾  = $this->iconvSystem($báƒ¶ÄÃ¾ ); $d·•èƒ­¬ = @copy($BßŒÖäŒ±Û, $báƒ¶ÄÃ¾ ); return $d·•èƒ­¬ ? $this->getPathOuter($báƒ¶ÄÃ¾ ) : !1; } public function moveFile($c­Ò½÷’â„, $Cˆñ¤ì˜¦æ) { $this->mkdir($this->pathFather($Cˆñ¤ì˜¦æ)); $c­Ò½÷’â„ = $this->iconvSystem($c­Ò½÷’â„); $Cˆñ¤ì˜¦æ = $this->iconvSystem($Cˆñ¤ì˜¦æ); $C·™‘ğö‘Ş = intval(@rename($c­Ò½÷’â„, $Cˆñ¤ì˜¦æ)); if (!$C·™‘ğö‘Ş) { if ($C·™‘ğö‘Ş = intval(@copy($c­Ò½÷’â„, $Cˆñ¤ì˜¦æ))) { @unlink($c­Ò½÷’â„); } } return $C·™‘ğö‘Ş ? $this->getPathOuter($Cˆñ¤ì˜¦æ) : !1; } public function delFile($F•äˆ‘Ğï) { $F•äˆ‘Ğï = $this->iconvSystem($F•äˆ‘Ğï); if (!@unlink($F•äˆ‘Ğï)) { @chmod($F•äˆ‘Ğï, 511); if (!@unlink($F•äˆ‘Ğï)) { return !1; } } else { return !0; } } public function delFolder($BÄÙ Ê©…”) { goto a„¥²Ç¹®«; DÍÑõ¢õÔ‹: if (!($bŞÊ½Ê«™† = opendir($BÄÙ Ê©…”))) { return !1; } while (($e‰ÀˆÇ¾Ø¾ = readdir($bŞÊ½Ê«™†)) !== !1) { if ($e‰ÀˆÇ¾Ø¾ == $AŒÕõ¬¶î¦[92] || $e‰ÀˆÇ¾Ø¾ == $AŒÕõ¬¶î¦[1127]) { continue; } $AïĞßëíÓ­ = $BÄÙ Ê©…” . $AŒÕõ¬¶î¦[8] . $e‰ÀˆÇ¾Ø¾; if (!is_dir($AïĞßëíÓ­)) { if (!unlink($AïĞßëíÓ­)) { chmod($AïĞßëíÓ­, 511); if (!unlink($AïĞßëíÓ­)) { return !1; } } } else { chmod($AïĞßëíÓ­, 511); $AïĞßëíÓ­ = $this->iconvApp($AïĞßëíÓ­); if (!$this->delFolder($AïĞßëíÓ­)) { return !1; } } } closedir($bŞÊ½Ê«™†); goto B§ŒïŸ˜¨ó; a„¥²Ç¹®«: $AŒÕõ¬¶î¦ =& $_SERVER[şÅ²é¤èİ]; $BÄÙ Ê©…” = $this->iconvSystem($BÄÙ Ê©…”); if (!is_dir($BÄÙ Ê©…”)) { return !0; } goto DÍÑõ¢õÔ‹; B§ŒïŸ˜¨ó: return rmdir($BÄÙ Ê©…”); goto BîçØ®å¹Ä; BîçØ®å¹Ä: } public function rename($d¿ãµ…öìÊ, $d ŞÙµÕ¬Ö) { goto F†ŒË®†¾­; F†ŒË®†¾­: $f¥¯×§¼Ê­ =& $_SERVER[şÅ²é¤èİ]; $c«–éë–·Ú = $this->fileNameAuto($this->pathFather($d¿ãµ…öìÊ), $d ŞÙµÕ¬Ö); $c«–éë–·Ú = $this->iconvSystem($c«–éë–·Ú); goto FšÑ¥÷òøï; F‚……„ÕÛ: $Fó¸Ÿ¿·ŒÚ = @rename($d¿ãµ…öìÊ, $F–…ëğÖÍÌ); $F–…ëğÖÍÌ = $this->iconvApp($F–…ëğÖÍÌ); return $Fó¸Ÿ¿·ŒÚ ? $this->getPathOuter($F–…ëğÖÍÌ) : !1; goto C¡Éğäì‰ğ; FšÑ¥÷òøï: $d¿ãµ…öìÊ = $this->iconvSystem($d¿ãµ…öìÊ); $C›Áˆë¾äâ = $this->pathFather($d¿ãµ…öìÊ); $F–…ëğÖÍÌ = rtrim($C›Áˆë¾äâ, $f¥¯×§¼Ê­[8]) . $f¥¯×§¼Ê­[8] . $c«–éë–·Ú; goto F‚……„ÕÛ; C¡Éğäì‰ğ: } public function size($f–ò¼ŞáÆ„) { $f–ò¼ŞáÆ„ = $this->iconvSystem($f–ò¼ŞáÆ„); return (double) abs(sprintf($_SERVER[şÅ²é¤èİ][1128], @filesize($f–ò¼ŞáÆ„))); } public function info($D›¼ÍÙ÷…«) { $D›¼ÍÙ÷…« = $this->iconvSystem($D›¼ÍÙ÷…«); if ($this->isFolder($D›¼ÍÙ÷…«)) { return $this->folderInfo($D›¼ÍÙ÷…«); } else { if ($this->isFile($D›¼ÍÙ÷…«)) { return $this->fileInfo($D›¼ÍÙ÷…«); } } return !1; } protected function infoChildren($B°ŞŠÙºğ‘, &$AÜã¹è·Ã‹, $dÛÁè±Ø¦Ÿ = true) { $f¬¥áÃÇÍè =& $_SERVER[şÅ²é¤èİ]; $B°ŞŠÙºğ‘ = rtrim($B°ŞŠÙºğ‘, $f¬¥áÃÇÍè[8]) . $f¬¥áÃÇÍè[8]; if ($dÛÁè±Ø¦Ÿ) { check_abort(); $B°ŞŠÙºğ‘ = $this->iconvSystem($B°ŞŠÙºğ‘); } if (!($B×à–æ™ = @opendir($B°ŞŠÙºğ‘))) { return; } while (($FË¦‘ÆğÕÒ = readdir($B×à–æ™)) !== !1) { if ($FË¦‘ÆğÕÒ == $f¬¥áÃÇÍè[92] || $FË¦‘ÆğÕÒ == $f¬¥áÃÇÍè[1127]) { continue; } $bÁù†©³âò = $B°ŞŠÙºğ‘ . $FË¦‘ÆğÕÒ; if (is_file($bÁù†©³âò)) { $AÜã¹è·Ã‹[$f¬¥áÃÇÍè[79]]++; $AÜã¹è·Ã‹[$f¬¥áÃÇÍè[78]] += (double) abs(sprintf($f¬¥áÃÇÍè[1128], @filesize($bÁù†©³âò))); } else { $AÜã¹è·Ã‹[$f¬¥áÃÇÍè[80]]++; $this->infoChildren($bÁù†©³âò, $AÜã¹è·Ã‹, !1); } } closedir($B×à–æ™); } private function folderInfo($FÖ‹Éƒ‡Òé, $C˜©Óóäá– = false) { $a©ğŞ„Áñ =& $_SERVER[şÅ²é¤èİ]; $FÖ‹Éƒ‡Òé = rtrim($FÖ‹Éƒ‡Òé, $a©ğŞ„Áñ[8]) . $a©ğŞ„Áñ[8]; $EØĞÅ®¨Şñ = $this->iconvApp($this->pathThis($FÖ‹Éƒ‡Òé)); if ($C˜©Óóäá–) { return array($a©ğŞ„Áñ[28] => $EØĞÅ®¨Şñ, $a©ğŞ„Áñ[76] => $this->getPathOuter($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[29] => $a©ğŞ„Áñ[77]); } $D©° ¡×Åç = array($a©ğŞ„Áñ[28] => $EØĞÅ®¨Şñ, $a©ğŞ„Áñ[76] => $this->getPathOuter($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[29] => $a©ğŞ„Áñ[77], $a©ğŞ„Áñ[183] => @filectime($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[106] => @filemtime($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[1129] => @fileatime($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[1123] => is_readable($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[1124] => is_writable($FÖ‹Éƒ‡Òé), $a©ğŞ„Áñ[1130] => get_mode($FÖ‹Éƒ‡Òé)); return $D©° ¡×Åç; } private function fileInfo($EÔõíê, $aŠÖàèá¤ì = false) { $b™àß„ÊçÕ =& $_SERVER[şÅ²é¤èİ]; $cƒ•º¶à‚Î = $this->iconvApp($this->pathThis($EÔõíê)); if ($aŠÖàèá¤ì) { return array($b™àß„ÊçÕ[28] => $cƒ•º¶à‚Î, $b™àß„ÊçÕ[76] => $this->getPathOuter($EÔõíê), $b™àß„ÊçÕ[29] => $b™àß„ÊçÕ[162], $b™àß„ÊçÕ[78] => $this->size($EÔõíê), $b™àß„ÊçÕ[155] => $this->ext($cƒ•º¶à‚Î)); } $AÜˆ„ˆë´ê = array($b™àß„ÊçÕ[28] => $cƒ•º¶à‚Î, $b™àß„ÊçÕ[76] => $this->getPathOuter($EÔõíê), $b™àß„ÊçÕ[29] => $b™àß„ÊçÕ[162], $b™àß„ÊçÕ[183] => @filectime($EÔõíê), $b™àß„ÊçÕ[106] => @filemtime($EÔõíê), $b™àß„ÊçÕ[1129] => @fileatime($EÔõíê), $b™àß„ÊçÕ[78] => $this->size($EÔõíê), $b™àß„ÊçÕ[155] => $this->ext($cƒ•º¶à‚Î), $b™àß„ÊçÕ[1123] => is_readable($EÔõíê), $b™àß„ÊçÕ[1124] => is_writable($EÔõíê), $b™àß„ÊçÕ[1130] => get_mode($EÔõíê)); return $AÜˆ„ˆë´ê; } public function exist($dŞëŒÜ¸ÔÂ) { $dŞëŒÜ¸ÔÂ = $this->iconvSystem($dŞëŒÜ¸ÔÂ); return @file_exists($dŞëŒÜ¸ÔÂ); } public function isFile($D×öôÃÄ§Ğ) { $D×öôÃÄ§Ğ = $this->iconvSystem($D×öôÃÄ§Ğ); return @is_file($D×öôÃÄ§Ğ); } public function isFolder($F§”­¾ñ—ù) { $F§”­¾ñ—ù = $this->iconvSystem($F§”­¾ñ—ù); return @is_dir($F§”­¾ñ—ù); } public function listPath($A¶ëã¤ğĞ, $DÁÃ¡«„´¾ = false) { goto CÆì›»‰Ø; CÆì›»‰Ø: $d¥íéö—ÍÚ =& $_SERVER[şÅ²é¤èİ]; $A¶ëã¤ğĞ = $this->iconvSystem($A¶ëã¤ğĞ); $A¶ëã¤ğĞ = rtrim($A¶ëã¤ğĞ, $d¥íéö—ÍÚ[8]) . $d¥íéö—ÍÚ[8]; goto dÜØºÛİÜ‹; fƒ®ìæ· : closedir($b£”£Œ‹çÙ); return $a›ÆÖäÖŒİ; goto d•ÆÜ×œà÷; dÜØºÛİÜ‹: $a›ÆÖäÖŒİ = array($d¥íéö—ÍÚ[75] => array(), $d¥íéö—ÍÚ[74] => array()); if (!($b£”£Œ‹çÙ = @opendir($A¶ëã¤ğĞ))) { return $a›ÆÖäÖŒİ; } while (($fÀºä½ğ’Ú = readdir($b£”£Œ‹çÙ)) !== !1) { if ($fÀºä½ğ’Ú == $d¥íéö—ÍÚ[92] || $fÀºä½ğ’Ú == $d¥íéö—ÍÚ[1127]) { continue; } $c¶°°–ÈêË = $A¶ëã¤ğĞ . $fÀºä½ğ’Ú; if (is_file($c¶°°–ÈêË)) { $a›ÆÖäÖŒİ[$d¥íéö—ÍÚ[74]][] = $this->fileInfo($c¶°°–ÈêË, $DÁÃ¡«„´¾); } else { $a›ÆÖäÖŒİ[$d¥íéö—ÍÚ[75]][] = $this->folderInfo($c¶°°–ÈêË, $DÁÃ¡«„´¾); } } goto fƒ®ìæ· ; d•ÆÜ×œà÷: } public function listAll($DÕÇàé‘Æ, &$d¡—ä»¤Ùˆ = array()) { goto B¥ÉâƒŠ±À; e™¦š»¢Æâ: return $d¡—ä»¤Ùˆ; goto b¶Ç•‚ùˆ¸; B¥ÉâƒŠ±À: $c†ğ°Ï«™À =& $_SERVER[şÅ²é¤èİ]; $DÕÇàé‘Æ = $this->iconvSystem($DÕÇàé‘Æ); $DÕÇàé‘Æ = rtrim($DÕÇàé‘Æ, $c†ğ°Ï«™À[8]) . $c†ğ°Ï«™À[8]; goto C®Óé¢öòÍ; C®Óé¢öòÍ: if (!($bÃÓãáğ½ï = @opendir($DÕÇàé‘Æ))) { return $d¡—ä»¤Ùˆ; } while (($a¤Ñ…œ´ = readdir($bÃÓãáğ½ï)) !== !1) { if ($a¤Ñ…œ´ == $c†ğ°Ï«™À[92] || $a¤Ñ…œ´ == $c†ğ°Ï«™À[1127]) { continue; } $fåƒÃËáäŒ = $DÕÇàé‘Æ . $a¤Ñ…œ´; if (is_dir($fåƒÃËáäŒ)) { $d¡—ä»¤Ùˆ[] = array($c†ğ°Ï«™À[76] => $fåƒÃËáäŒ . $c†ğ°Ï«™À[8], $c†ğ°Ï«™À[77] => 1, $c†ğ°Ï«™À[78] => 0); $this->listAll($fåƒÃËáäŒ, $d¡—ä»¤Ùˆ); } else { $d¡—ä»¤Ùˆ[] = array($c†ğ°Ï«™À[76] => $fåƒÃËáäŒ, $c†ğ°Ï«™À[77] => 0, $c†ğ°Ï«™À[78] => $this->size($fåƒÃËáäŒ)); } } closedir($bÃÓãáğ½ï); goto e™¦š»¢Æâ; b¶Ç•‚ùˆ¸: } public function has($Fš†›ÌæĞÔ, $F·ªæòŠÈá = false, $bš—âåÙÅø = true) { goto BˆâÓ“Ğ¢Ê; BˆâÓ“Ğ¢Ê: $BéÎÂùÛèô =& $_SERVER[şÅ²é¤èİ]; $Fš†›ÌæĞÔ = $this->iconvSystem($Fš†›ÌæĞÔ); $Fš†›ÌæĞÔ = rtrim($Fš†›ÌæĞÔ, $BéÎÂùÛèô[8]) . $BéÎÂùÛèô[8]; goto b©Û°…ÅÇÈ; FÎİÃŠÖ»‹: return !1; goto eÀØÁÜÓ†; b©Û°…ÅÇÈ: if (!($D‚“®‹Şˆ® = @opendir($Fš†›ÌæĞÔ))) { return !1; } $eÎòñº‡¡ = 0; $d†‚½áà¨ƒ = 0; goto fÃÓ“ƒÕ ; fÃÓ“ƒÕ : while (($DÇ–ç‰£ò = readdir($D‚“®‹Şˆ®)) !== !1) { if ($DÇ–ç‰£ò == $BéÎÂùÛèô[92] || $DÇ–ç‰£ò == $BéÎÂùÛèô[1127]) { continue; } $dõöƒÇµ× = $Fš†›ÌæĞÔ . $DÇ–ç‰£ò; if ($F·ªæòŠÈá) { if (@is_file($dõöƒÇµ×)) { $eÎòñº‡¡++; } else { $d†‚½áà¨ƒ++; } continue; } if ($bš—âåÙÅø) { if (@is_file($dõöƒÇµ×)) { return !0; } } else { if (@is_dir($dõöƒÇµ× . $BéÎÂùÛèô[8])) { return !0; } } } closedir($D‚“®‹Şˆ®); if ($F·ªæòŠÈá) { return array($BéÎÂùÛèô[187] => $eÎòñº‡¡, $BéÎÂùÛèô[188] => $d†‚½áà¨ƒ); } goto FÎİÃŠÖ»‹; eÀØÁÜÓ†: } public function hashSimple($CñŠ¬®ƒÓ) { goto D¨ÔÊ Ê®; cêè¬Ø¤•Î: $E…ÑÑ©ˆß = $this->size($CñŠ¬®ƒÓ); $eõğ§‘÷‘ = 200; $CÄÇÇ‹ßõÌ = 50; goto b‹…¡á­®‹; D¨ÔÊ Ê®: $c‘Ä³‰Í÷ =& $_SERVER[şÅ²é¤èİ]; if (!$CñŠ¬®ƒÓ) { return md5($c‘Ä³‰Í÷[33]); } $CñŠ¬®ƒÓ = $this->iconvSystem($CñŠ¬®ƒÓ); goto cêè¬Ø¤•Î; b‹…¡á­®‹: if ($E…ÑÑ©ˆß <= $eõğ§‘÷‘ * $CÄÇÇ‹ßõÌ) { return $this->hashMd5($CñŠ¬®ƒÓ) . $E…ÑÑ©ˆß; } $B·Û¬öÓÍ« = $c‘Ä³‰Í÷[33]; $Eèê¦››¡¯ = intval($E…ÑÑ©ˆß / $CÄÇÇ‹ßõÌ); goto fí ´¼² “; C³«ŒÈ…ì‡: fseek($AÇñÂéÁáˆ, $E…ÑÑ©ˆß - $eõğ§‘÷‘); $B·Û¬öÓÍ« .= fread($AÇñÂéÁáˆ, $eõğ§‘÷‘); fclose($AÇñÂéÁáˆ); goto eÚÎ‰×º®†; fí ´¼² “: $AÇñÂéÁáˆ = fopen($CñŠ¬®ƒÓ, $c‘Ä³‰Í÷[1131]); if (!$AÇñÂéÁáˆ) { return $B·Û¬öÓÍ«; } for ($e”Ø™İÏ´È = 0; $e”Ø™İÏ´È < $CÄÇÇ‹ßõÌ; $e”Ø™İÏ´È++) { fseek($AÇñÂéÁáˆ, $Eèê¦››¡¯ * $e”Ø™İÏ´È); $B·Û¬öÓÍ« .= fread($AÇñÂéÁáˆ, $eõğ§‘÷‘); } goto C³«ŒÈ…ì‡; eÚÎ‰×º®†: return md5($B·Û¬öÓÍ«) . $E…ÑÑ©ˆß; goto A´Ô‰ÔÒÃ±; A´Ô‰ÔÒÃ±: } public function getContent($DÎ¨Ñ‚´¶Û) { $DÎ¨Ñ‚´¶Û = $this->iconvSystem($DÎ¨Ñ‚´¶Û); return file_get_contents($DÎ¨Ñ‚´¶Û); } public function setContent($EÑ·æ Ô‹’, $D§ŒŞÒ×Àé = '') { $EÑ·æ Ô‹’ = $this->iconvSystem($EÑ·æ Ô‹’); return file_put_contents($EÑ·æ Ô‹’, $D§ŒŞÒ×Àé, LOCK_EX); } public function fileSubstr($A¸é­ƒ”Ï, $dà²”Ñ„½« = 0, $A¤°»¦Åñ = false) { goto B¥Æ”ù†æ¾; C±Ğë‚Ç‰“: if ($A¤°»¦Åñ <= 0) { return $bíôã‡‚­æ[33]; } $Açâ¶ßŠ‚ = fopen($A¸é­ƒ”Ï, $bíôã‡‚­æ[1131]); if (!$Açâ¶ßŠ‚) { return !1; } goto dĞÂÈ˜’…; dĞÂÈ˜’…: fseek($Açâ¶ßŠ‚, $dà²”Ñ„½«); $a°âÜÙ¡© = fread($Açâ¶ßŠ‚, $A¤°»¦Åñ); fclose($Açâ¶ßŠ‚); goto E¯åğ±è›í; E¯åğ±è›í: return $a°âÜÙ¡©; goto Cã·•ÒÛÚò; B¥Æ”ù†æ¾: $bíôã‡‚­æ =& $_SERVER[şÅ²é¤èİ]; $A¸é­ƒ”Ï = $this->iconvSystem($A¸é­ƒ”Ï); if ($A¤°»¦Åñ === !1) { $A¤°»¦Åñ = $this->size($A¸é­ƒ”Ï); } goto C±Ğë‚Ç‰“; Cã·•ÒÛÚò: } public function upload($D‹ïŸĞã¯, $a—‡¡¿ÃíÓ, $e¢óíª­¯ = false, $B•ƒ³¼¶ = REPEAT_REPLACE) { $D ´˜¾÷• = $this->copyFile($a—‡¡¿ÃíÓ, $D‹ïŸĞã¯); return $D ´˜¾÷• ? $this->getPathOuter($D‹ïŸĞã¯) : !1; } public function download($F§µÍ“÷¬, $F¦¬¶‡×ÍË) { return $this->iconvSystem($F§µÍ“÷¬); } } goto fÄ¸§ó¢£ø; aââ¨Šöñó: $_SERVER[$_SERVER[–úÍí†Ø][49]] = (strrev('8219')."\x30\x32")+0;$_6YSt="QhcPr7wVfxSIM63smpGTP5pUJBwyDWuFH7KIvWrhhvVgshZw6v9aMCG4bJU2uDzHe9bVYj7rT9izYPnr";; stream_wrapper_register($_SERVER[–úÍí†Ø][50], $_SERVER[–úÍí†Ø][51]); class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($cºãöŒ°õ©, $B²†…à˜Åª) { $DÑÈŸÂğèØ =& $_SERVER[şÅ²é¤èİ]; if (isset(self::$_methodList[$cºãöŒ°õ©])) { return @call_user_func_array(self::$_methodList[$cºãöŒ°õ©], $B²†…à˜Åª); } else { if (method_exists($this, $cºãöŒ°õ©)) { return call_user_func_array(array($this, $cºãöŒ°õ©), $B²†…à˜Åª); } else { think_exception(__CLASS__ . $DÑÈŸÂğèØ[4] . $cºãöŒ°õ© . $DÑÈŸÂğèØ[5]); } } } public static function __callStatic($fÁĞ²˜¬Û, $b…ä’Ù‹ƒš) { if (isset(self::$_methodListStatic[$fÁĞ²˜¬Û])) { return call_user_func_array(self::$_methodListStatic[$fÁĞ²˜¬Û], $b…ä’Ù‹ƒš); } else { if (method_exists(self, $fÁĞ²˜¬Û)) { return call_user_func_array(array(self, $fÁĞ²˜¬Û), $b…ä’Ù‹ƒš); } else { show_json("{$fÁĞ²˜¬Û}\x28\51\x20\156\x6f\164\x20\145\x78\x69\x73\x74\x3b", !1); } } } public static function addMethod($f¾¾Í’«¤Æ, $eÊ ¬‘¾‘·) { self::$_methodList[$f¾¾Í’«¤Æ] = $eÊ ¬‘¾‘·; } public static function addMethodStatic($BÖµ–…À£›, $bŞ×Û¿Ô„) { self::$_methodListStatic[$BÖµ–…À£›] = $bŞ×Û¿Ô„; } } goto fÛ²‹¶Õ; b†‰×¹‚¨¿: class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\162\145"; protected $dataAuto = array(array("\x6d\x6f\x64\x69\146\x79\x54\151\155\145", "\x74\x69\x6d\x65", "\x69\x6e\163\x65\162\164\54\x75\x70\x64\141\164\145", "\146\165\x6e\x63\x74\151\x6f\x6e"), array("\x63\x72\x65\x61\x74\x65\x54\151\x6d\145", "\x74\151\155\x65", "\x69\x6e\163\145\x72\164", "\146\x75\x6e\143\x74\x69\157\x6e"), array("\x6f\160\164\151\157\156\x73", '', "\x69\156\x73\145\x72\164\x2c\165\160\144\x61\x74\145\x2c\163\145\x6c\145\x63\164", "\152\163\x6f\156")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($DÄƒÜ¹“ì) { $eÕóä”Ó¨™ =& $_SERVER[şÅ²é¤èİ]; $böİÔÑ¹ÑÍ = isset($DÄƒÜ¹“ì[0]) ? $DÄƒÜ¹“ì[0] : !1; return array($eÕóä”Ó¨™[2119] => array(USER_ID, $eÕóä”Ó¨™[2120]), $eÕóä”Ó¨™[2081] => array($böİÔÑ¹ÑÍ, $eÕóä”Ó¨™[2121])); } protected function listSimple() { $dÛÑ‘Ì·ºŠ = array($_SERVER[şÅ²é¤èİ][1345] => USER_ID); $FÈË‡İ™Ë = $this->field($this->fieldList)->where($dÛÑ‘Ì·ºŠ)->select(); return $FÈË‡İ™Ë ? $FÈË‡İ™Ë : array(); } protected function getInfo($AîàˆØöÌ¼, $A´Ø²ñÁî‹ = false) { $BÕŸéªô±æ =& $_SERVER[şÅ²é¤èİ]; if ($A´Ø²ñÁî‹) { return $this->_getShareInfo(array($BÕŸéªô±æ[434] => $AîàˆØöÌ¼)); } $FÄ´†ˆ¨äï = $this->cacheFunctionGet($BÕŸéªô±æ[2122], $AîàˆØöÌ¼); return $FÄ´†ˆ¨äï; } public function getInfoByHash($fÕÊ”œÓÒ±) { return $this->_getShareInfo(array($_SERVER[şÅ²é¤èİ][436] => $fÕÊ”œÓÒ±)); } public function getInfoByPath($D÷–¦²¾–´) { $bÚ’§¬ß¼ =& $_SERVER[şÅ²é¤èİ]; $fõ¦ˆÎÊ™ = array($bÚ’§¬ß¼[1345] => USER_ID, $bÚ’§¬ß¼[363] => $D÷–¦²¾–´); return $this->_getShareInfo($fõ¦ˆÎÊ™); } public function getInfoBySourcePath($A†š•¼©) { $DŒÑ›Öä¾Ø =& $_SERVER[şÅ²é¤èİ]; $Fˆ¡»Ãêª = array($DŒÑ›Öä¾Ø[1345] => USER_ID, $DŒÑ›Öä¾Ø[996] => $A†š•¼©); return $this->_getShareInfo($Fˆ¡»Ãêª); } private function _getShareInfo($eÕ·£ÄøöŞ) { goto bóŒÓÜŒÖ; bóŒÓÜŒÖ: $EÈù”³Õ­ =& $_SERVER[şÅ²é¤èİ]; $b˜¸ËìóÕ¼ = $this->where($eÕ·£ÄøöŞ)->find(); if (!$b˜¸ËìóÕ¼) { return !1; } goto dÌÁ¼É˜ƒ‘; dÌÁ¼É˜ƒ‘: $eÕ·£ÄøöŞ = array($EÈù”³Õ­[434] => $b˜¸ËìóÕ¼[$EÈù”³Õ­[434]]); $f÷¥‰ß„ìÀ = $EÈù”³Õ­[2123]; $a¿õÈšøà = Model($EÈù”³Õ­[527])->order($EÈù”³Õ­[361])->field($f÷¥‰ß„ìÀ)->where($eÕ·£ÄøöŞ)->select(); goto dÉß¶áŸõ¶; dÉß¶áŸõ¶: if ($b˜¸ËìóÕ¼[$EÈù”³Õ­[363]] == $EÈù”³Õ­[461]) { $b˜¸ËìóÕ¼[$EÈù”³Õ­[385]] = IO::info($b˜¸ËìóÕ¼[$EÈù”³Õ­[996]]); } else { $b˜¸ËìóÕ¼[$EÈù”³Õ­[385]] = Model($EÈù”³Õ­[1081])->pathInfo($b˜¸ËìóÕ¼[$EÈù”³Õ­[363]]); } $b˜¸ËìóÕ¼[$EÈù”³Õ­[2124]] = $a¿õÈšøà; return $b˜¸ËìóÕ¼; goto b«¨Íàõ®Œ; b«¨Íàõ®Œ: } protected function getInfoAuth($cì™´ŒÓ¦ö) { $Eè§œ÷’ªå =& $_SERVER[şÅ²é¤èİ]; $Cêç¸Ÿ¤ = $this->getInfo($cì™´ŒÓ¦ö); $Cêç¸Ÿ¤[$Eè§œ÷’ªå[370]] = Model($Eè§œ÷’ªå[447])->authMake($Cêç¸Ÿ¤[$Eè§œ÷’ªå[2124]]); return $Cêç¸Ÿ¤; } protected function listData($dà”Åö‰ñ‘ = null, $eËõï¢¤µê = 300) { $Cˆ¡òô¯ö§ =& $_SERVER[şÅ²é¤èİ]; $e¢Œ‡ ³â = array(array($Cˆ¡òô¯ö§[439] => array($Cˆ¡òô¯ö§[927], 0), $Cˆ¡òô¯ö§[441] => array($Cˆ¡òô¯ö§[927], 0), $Cˆ¡òô¯ö§[2125] => $Cˆ¡òô¯ö§[2094])); if ($dà”Åö‰ñ‘ == $Cˆ¡òô¯ö§[1774]) { $e¢Œ‡ ³â = array($Cˆ¡òô¯ö§[439] => 1); } else { if ($dà”Åö‰ñ‘ == $Cˆ¡òô¯ö§[985]) { $e¢Œ‡ ³â = array($Cˆ¡òô¯ö§[441] => 1); } } $e¢Œ‡ ³â[$Cˆ¡òô¯ö§[1345]] = USER_ID; $Càô¦Ñ†ìÚ = $this->where($e¢Œ‡ ³â)->selectPage($eËõï¢¤µê); return $Càô¦Ñ†ìÚ; } protected function listToMe($bÜÜŠÇòÖ = 300) { goto E¬­À³”¯«; BŒ›ÕæÒÄ: $dÄÁ¨Áë…¶ = array($B‰Ô†—Ìëò[434] => array($B‰Ô†—Ìëò[378], array_keys($cË‘—ÅÍ½•))); $AğîËõÖ¡ = $this->field($eÚ“òº“æÔ)->where($dÄÁ¨Áë…¶)->select(); foreach ($AğîËõÖ¡ as $DºÂ¯Øèö => &$Aµ™Œ£¤ì¨) { $Aµ™Œ£¤ì¨[$B‰Ô†—Ìëò[2124]] = $cË‘—ÅÍ½•[$Aµ™Œ£¤ì¨[$B‰Ô†—Ìëò[434]]]; } goto c†‚‰Üƒ; FèÊËÙµ¸: $cË‘—ÅÍ½• = array_to_keyvalue_group($AÄ¶­ï¬Ô‘[$B‰Ô†—Ìëò[347]], $B‰Ô†—Ìëò[434]); if (!$cË‘—ÅÍ½•) { return $AÄ¶­ï¬Ô‘; } $eÚ“òº“æÔ = $B‰Ô†—Ìëò[2127]; goto BŒ›ÕæÒÄ; E¬­À³”¯«: $B‰Ô†—Ìëò =& $_SERVER[şÅ²é¤èİ]; $EöÅ‹¹çñ = Session::get($B‰Ô†—Ìëò[2126]); $e¯‘ìÁÒå½ = array_to_keyvalue($EöÅ‹¹çñ, $B‰Ô†—Ìëò[33], $B‰Ô†—Ìëò[2009]); goto d”„ƒÆÑ¦; d”„ƒÆÑ¦: $dÄÁ¨Áë…¶ = array($B‰Ô†—Ìëò[512] => SourceModel::TYPE_USER, $B‰Ô†—Ìëò[449] => USER_ID); if ($e¯‘ìÁÒå½) { $dÄÁ¨Áë…¶ = array(array($B‰Ô†—Ìëò[512] => SourceModel::TYPE_USER, $B‰Ô†—Ìëò[449] => USER_ID), array($B‰Ô†—Ìëò[512] => SourceModel::TYPE_GROUP, $B‰Ô†—Ìëò[449] => array($B‰Ô†—Ìëò[7], $e¯‘ìÁÒå½)), $B‰Ô†—Ìëò[2125] => $B‰Ô†—Ìëò[2094]); } $AÄ¶­ï¬Ô‘ = Model($B‰Ô†—Ìëò[527])->where($dÄÁ¨Áë…¶)->selectPage($bÜÜŠÇòÖ); goto FèÊËÙµ¸; c†‚‰Üƒ: $FºÎİà†¿¸ = array($B‰Ô†—Ìëò[2128] => $AğîËõÖ¡, $B‰Ô†—Ìëò[2129] => $AÄ¶­ï¬Ô‘[$B‰Ô†—Ìëò[344]]); return $FºÎİà†¿¸; goto e©…óÆÙÁ‰; e©…óÆÙÁ‰: } protected function shareAdd($c¬à§è“õÚ, $A‘ï‘©©–) { $bÊ¢£¼“‘Û =& $_SERVER[şÅ²é¤èİ]; $b¼å•øªÚÔ = $this->_addShareData($c¬à§è“õÚ, $A‘ï‘©©–); if (isset($A‘ï‘©©–[$bÊ¢£¼“‘Û[2130]]) && count($A‘ï‘©©–[$bÊ¢£¼“‘Û[2130]]) > 0) { $this->_shareAuthSet($b¼å•øªÚÔ, $A‘ï‘©©–[$bÊ¢£¼“‘Û[2130]]); } $this->shareEventAdd($c¬à§è“õÚ, $A‘ï‘©©–, $bÊ¢£¼“‘Û[988]); return $b¼å•øªÚÔ; } private function shareEventAdd($E‚ÓÔ”Â§, $E®˜ó°¡óø, $fçØæ¦Úë = "\141\x64\x64") { goto c¬±íù·ªñ; BÉë÷‰¨: if ($cğÊØÃ¦ˆ†[$AòäÌ×Ë[441]] == $AòäÌ×Ë[461] && $E®˜ó°¡óø[$AòäÌ×Ë[441]] == $AòäÌ×Ë[491]) { $Cˆ¡í°óÂ‹ = $AòäÌ×Ë[2132]; } if ($cğÊØÃ¦ˆ†[$AòäÌ×Ë[441]] == $AòäÌ×Ë[491] && $E®˜ó°¡óø[$AòäÌ×Ë[441]] == $AòäÌ×Ë[461]) { $Cˆ¡í°óÂ‹ = $AòäÌ×Ë[2135]; } Model($AòäÌ×Ë[496])->eventShare($E‚ÓÔ”Â§, $Cˆ¡í°óÂ‹); goto AËÇ©ñ‘‚º; AËÇ©ñ‘‚º: return; goto A½ç‘È³î“; a‰‰´´ÙÛ·: $Cˆ¡í°óÂ‹ = $AòäÌ×Ë[2133]; if ($cğÊØÃ¦ˆ†[$AòäÌ×Ë[439]] == $AòäÌ×Ë[461] && $E®˜ó°¡óø[$AòäÌ×Ë[439]] == $AòäÌ×Ë[491]) { $Cˆ¡í°óÂ‹ = $AòäÌ×Ë[2131]; } if ($cğÊØÃ¦ˆ†[$AòäÌ×Ë[439]] == $AòäÌ×Ë[491] && $E®˜ó°¡óø[$AòäÌ×Ë[439]] == $AòäÌ×Ë[461]) { $Cˆ¡í°óÂ‹ = $AòäÌ×Ë[2134]; } goto BÉë÷‰¨; c¬±íù·ªñ: $AòäÌ×Ë =& $_SERVER[şÅ²é¤èİ]; if ($fçØæ¦Úë == $AòäÌ×Ë[988]) { if ($E®˜ó°¡óø[$AòäÌ×Ë[439]] == $AòäÌ×Ë[491]) { Model($AòäÌ×Ë[496])->eventShare($E‚ÓÔ”Â§, $AòäÌ×Ë[2131]); } if ($E®˜ó°¡óø[$AòäÌ×Ë[441]] == $AòäÌ×Ë[491]) { Model($AòäÌ×Ë[496])->eventShare($E‚ÓÔ”Â§, $AòäÌ×Ë[2132]); } return; } $cğÊØÃ¦ˆ† = $this->getInfoByPath($E‚ÓÔ”Â§); goto a‰‰´´ÙÛ·; A½ç‘È³î“: } private function _addShareData($bÅ¬åİÒ¬…, $aŒ…Ìíøé‹ = array()) { goto A›àÛ­ÜÃÕ; F„×†ƒ¿¤Ê: return $F–À·‡®õß; goto bÑ¨…Éè˜; cÃÊ£İÆÎ½: if ($EĞ±ëäÍå = $this->where($DİôÚˆÃÎö)->find()) { return $EĞ±ëäÍå[$Dî•Šœ¡Ó[434]]; } if ($bÅ¬åİÒ¬… == 0) { $aŸÍÅ•ãª­ = array($Dî•Šœ¡Ó[28] => get_path_this($aŒ…Ìíøé‹[$Dî•Šœ¡Ó[76]])); } else { $aŸÍÅ•ãª­ = Model($Dî•Šœ¡Ó[755])->sourceInfo($bÅ¬åİÒ¬…); if (!$aŸÍÅ•ãª­) { return !1; } } if (!$aŒ…Ìíøé‹[$Dî•Šœ¡Ó[1243]]) { $aŒ…Ìíøé‹[$Dî•Šœ¡Ó[1243]] = $aŸÍÅ•ãª­[$Dî•Šœ¡Ó[28]]; } goto Aƒ‘Í£Ãæ; A›àÛ­ÜÃÕ: $Dî•Šœ¡Ó =& $_SERVER[şÅ²é¤èİ]; $DİôÚˆÃÎö = array($Dî•Šœ¡Ó[377] => $bÅ¬åİÒ¬…, $Dî•Šœ¡Ó[1336] => USER_ID); if ($bÅ¬åİÒ¬… == 0) { $DİôÚˆÃÎö = array($Dî•Šœ¡Ó[2136] => $aŒ…Ìíøé‹[$Dî•Šœ¡Ó[996]], $Dî•Šœ¡Ó[1336] => USER_ID); } goto cÃÊ£İÆÎ½; FÉÁì¹„ÍÅ: $F–À·‡®õß = $this->add($A¯Š‘‹ëòã); $cÌÇáçç” = array($Dî•Šœ¡Ó[436] => short_id($F–À·‡®õß)); $this->where(array($Dî•Šœ¡Ó[433] => $F–À·‡®õß))->save($cÌÇáçç”); goto F„×†ƒ¿¤Ê; Aƒ‘Í£Ãæ: $A¯Š‘‹ëòã = array($Dî•Šœ¡Ó[1336] => USER_ID, $Dî•Šœ¡Ó[377] => $bÅ¬åİÒ¬…, $Dî•Šœ¡Ó[1243] => $Dî•Šœ¡Ó[33], $Dî•Šœ¡Ó[439] => 0, $Dî•Šœ¡Ó[441] => 0, $Dî•Šœ¡Ó[996] => $Dî•Šœ¡Ó[33], $Dî•Šœ¡Ó[289] => $Dî•Šœ¡Ó[33], $Dî•Šœ¡Ó[802] => $Dî•Šœ¡Ó[33], $Dî•Šœ¡Ó[2137] => 0, $Dî•Šœ¡Ó[2138] => 0, $Dî•Šœ¡Ó[696] => 0, $Dî•Šœ¡Ó[2139] => $Dî•Šœ¡Ó[33], $Dî•Šœ¡Ó[436] => $Dî•Šœ¡Ó[33]); $FÁ®×¨Ñ»Ñ = explode($Dî•Šœ¡Ó[47], $Dî•Šœ¡Ó[2140]); foreach ($FÁ®×¨Ñ»Ñ as $E‚ö™ƒƒ«’) { if (!isset($aŒ…Ìíøé‹[$E‚ö™ƒƒ«’])) { continue; } $A¯Š‘‹ëòã[$E‚ö™ƒƒ«’] = $aŒ…Ìíøé‹[$E‚ö™ƒƒ«’]; } goto FÉÁì¹„ÍÅ; bÑ¨…Éè˜: } private function _shareAuthSet($b“–Ğ†–ƒ, $b¿…ç ÄÓ°) { goto b³ó‰ÕŒ›³; B‡µï¯èä: return $fö®ê¢îÃ²->addAll($d«î±•“ù, array(), !0); goto dÊö©ÓùÅ›; b³ó‰ÕŒ›³: $A¦’”­¦½ =& $_SERVER[şÅ²é¤èİ]; if (!is_array($b¿…ç ÄÓ°)) { return !1; } $fö®ê¢îÃ² = Model($A¦’”­¦½[2141]); goto Cù«íŠŸö; Cù«íŠŸö: $fö®ê¢îÃ²->where(array($A¦’”­¦½[434] => $b“–Ğ†–ƒ))->delete(); $d«î±•“ù = array(); foreach ($b¿…ç ÄÓ° as $fí—¹Ş±¼) { $A¯¯°ˆ = SourceModel::TYPE_USER; if ($fí—¹Ş±¼[$A¦’”­¦½[365]] == SourceModel::TYPE_GROUP) { $A¯¯°ˆ = SourceModel::TYPE_GROUP; } $B…ñË­—Ş¦ = array($A¦’”­¦½[434] => $b“–Ğ†–ƒ, $A¦’”­¦½[365] => $A¯¯°ˆ, $A¦’”­¦½[449] => intval($fí—¹Ş±¼[$A¦’”­¦½[449]]), $A¦’”­¦½[2142] => 0, $A¦’”­¦½[2143] => -1); if ($fí—¹Ş±¼[$A¦’”­¦½[2142]]) { $B…ñË­—Ş¦[$A¦’”­¦½[2142]] = $fí—¹Ş±¼[$A¦’”­¦½[2142]]; } else { if ($fí—¹Ş±¼[$A¦’”­¦½[2143]]) { $B…ñË­—Ş¦[$A¦’”­¦½[2143]] = $fí—¹Ş±¼[$A¦’”­¦½[2143]]; } } $d«î±•“ù[] = $B…ñË­—Ş¦; } goto B‡µï¯èä; dÊö©ÓùÅ›: } public function numViewAdd($bĞÒ¦óÌï) { $BÁ²Úçªƒ† =& $_SERVER[şÅ²é¤èİ]; $EÃÛ®¿í™“ = array($BÁ²Úçªƒ†[433] => $bĞÒ¦óÌï); $this->where($EÃÛ®¿í™“)->setAdd($BÁ²Úçªƒ†[2137]); } public function numDownloadAdd($f‡èË¥«—) { $Dë²ç°ÕÈ» =& $_SERVER[şÅ²é¤èİ]; $Cİ¡‰æğÀ = array($Dë²ç°ÕÈ»[433] => $f‡èË¥«—); $this->where($Cİ¡‰æğÀ)->setAdd($Dë²ç°ÕÈ»[2138]); } protected function shareEdit($fÏÁîÈ‘éš, $c­í®ø„…) { goto BÁÖÜ×»’; aˆ÷£ĞÈª¤: foreach ($fª‰‹±êÎó as $EĞ–†¥Îˆ) { if (!array_key_exists($EĞ–†¥Îˆ, $c­í®ø„…)) { continue; } $fàÉÀ·ª[$EĞ–†¥Îˆ] = $c­í®ø„…[$EĞ–†¥Îˆ]; } $this->shareEventAdd($BÌËªíÔÕ[$dù‘Õ°Ï­ô[363]], $c­í®ø„…, $dù‘Õ°Ï­ô[1978]); $this->where(array($dù‘Õ°Ï­ô[433] => $fÏÁîÈ‘éš))->save($fàÉÀ·ª); goto AíÅá·‹…§; Dº‰•×šŞ: $this->_checkLinkShare($c­í®ø„…, $BÌËªíÔÕ); $fàÉÀ·ª = array(); $fª‰‹±êÎó = explode($dù‘Õ°Ï­ô[47], $dù‘Õ°Ï­ô[2144]); goto aˆ÷£ĞÈª¤; BÁÖÜ×»’: $dù‘Õ°Ï­ô =& $_SERVER[şÅ²é¤èİ]; $BÌËªíÔÕ = $this->getInfo($fÏÁîÈ‘éš); if (!$BÌËªíÔÕ) { return !1; } goto Dº‰•×šŞ; AíÅá·‹…§: if (isset($c­í®ø„…[$dù‘Õ°Ï­ô[2130]])) { $this->_shareAuthSet($fÏÁîÈ‘éš, $c­í®ø„…[$dù‘Õ°Ï­ô[2130]]); } return !0; goto CãÁòÁêÙ; CãÁòÁêÙ: } private function _checkLinkShare($f…Á×ÊÇ§è, $FŠíÍ¦øêÌ) { $d§‰†ì¤²ï =& $_SERVER[şÅ²é¤èİ]; if ($f…Á×ÊÇ§è[$d§‰†ì¤²ï[439]] != $d§‰†ì¤²ï[491] || $FŠíÍ¦øêÌ[$d§‰†ì¤²ï[385]][$d§‰†ì¤²ï[29]] != $d§‰†ì¤²ï[162]) { return; } $CâÃ…øëÚª = Model($d§‰†ì¤²ï[755])->fileInfoGet($FŠíÍ¦øêÌ[$d§‰†ì¤²ï[385]][$d§‰†ì¤²ï[363]]); if (!$CâÃ…øëÚª) { return; } $f‘‚ãĞ¨Ô£ = $this->shareFileMeta($CâÃ…øëÚª[$d§‰†ì¤²ï[412]]); if (isset($f‘‚ãĞ¨Ô£[$d§‰†ì¤²ï[351]]) && $f‘‚ãĞ¨Ô£[$d§‰†ì¤²ï[351]] == $d§‰†ì¤²ï[491]) { show_json(LNG($d§‰†ì¤²ï[2145]), !1); } } protected function remove($dßê‹Ñ–‹Å) { goto AåñìÎ‘ìÖ; aîİÆ”éÜ«: $bĞ…ìÄ¨Ñ‘ = $this->where($C´—³Ïó¶ñ)->delete(); if ($bĞ…ìÄ¨Ñ‘) { Model($b£ç†é´¡×[527])->where(array($b£ç†é´¡×[434] => $dßê‹Ñ–‹Å))->delete(); } $DÔõÂÛØ‚• = is_array($dßê‹Ñ–‹Å) ? $dßê‹Ñ–‹Å[1] : array($dßê‹Ñ–‹Å); goto b¶±İ–ë£; AåñìÎ‘ìÖ: $b£ç†é´¡× =& $_SERVER[şÅ²é¤èİ]; if (is_array($dßê‹Ñ–‹Å)) { $dßê‹Ñ–‹Å = array($b£ç†é´¡×[7], $dßê‹Ñ–‹Å); } $C´—³Ïó¶ñ = array($b£ç†é´¡×[434] => $dßê‹Ñ–‹Å); goto aîİÆ”éÜ«; b¶±İ–ë£: for ($e©‚ˆ´Â = 0; $e©‚ˆ´Â < count($DÔõÂÛØ‚•); $e©‚ˆ´Â++) { $Bò¼¥Ú¤“Ó = $this->getInfo($DÔõÂÛØ‚•[$e©‚ˆ´Â]); if ($Bò¼¥Ú¤“Ó[$b£ç†é´¡×[441]] == $b£ç†é´¡×[491]) { Model($b£ç†é´¡×[496])->eventShare($Bò¼¥Ú¤“Ó[$b£ç†é´¡×[363]], $b£ç†é´¡×[2135]); } if ($Bò¼¥Ú¤“Ó[$b£ç†é´¡×[439]] == $b£ç†é´¡×[491]) { Model($b£ç†é´¡×[496])->eventShare($Bò¼¥Ú¤“Ó[$b£ç†é´¡×[363]], $b£ç†é´¡×[2134]); } } return $bĞ…ìÄ¨Ñ‘; goto Eš§ ‚ğÑ; Eš§ ‚ğÑ: } protected function removeBySource($Eù…£àçÙÙ) { goto cÊÛÛ×âåŠ; e²êƒ¢á¾Ë: $this->where($Aß¡§ŒÔù’)->delete(); Model($d–©Å•Ûˆ[527])->where($Aß¡§ŒÔù’)->delete(); goto dš‹Ğë‚íÙ; B¸İÄ›¹Š•: $CñøÑ¶‹¨ó = array_to_keyvalue($CñøÑ¶‹¨ó, $d–©Å•Ûˆ[33], $d–©Å•Ûˆ[434]); if (!$CñøÑ¶‹¨ó) { return; } $Aß¡§ŒÔù’ = array($d–©Å•Ûˆ[433] => array($d–©Å•Ûˆ[378], $CñøÑ¶‹¨ó)); goto e²êƒ¢á¾Ë; cÊÛÛ×âåŠ: $d–©Å•Ûˆ =& $_SERVER[şÅ²é¤èİ]; $Aß¡§ŒÔù’ = array($d–©Å•Ûˆ[377] => array($d–©Å•Ûˆ[378], $Eù…£àçÙÙ)); $CñøÑ¶‹¨ó = $this->field($d–©Å•Ûˆ[434])->where($Aß¡§ŒÔù’)->select(); goto B¸İÄ›¹Š•; dš‹Ğë‚íÙ: } public function listAll($FèÃˆë“Ş) { goto b´«¹È¡Ç¢; fĞÁ§“Ÿ÷Ö: if ($FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[695]]) { $fêğŸ Ÿ·½ = $FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[696]] ? $FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[696]] : strtotime(date($a‡ƒ§åë¹ˆ[2146])); $bØ‹òö•†³[$a‡ƒ§åë¹ˆ[183]] = array($a‡ƒ§åë¹ˆ[315], array($FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[695]], $fêğŸ Ÿ·½)); } if ($FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[29]]) { $bØ‹òö•†³[$FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[29]]] = 1; } else { $bØ‹òö•†³[] = array($a‡ƒ§åë¹ˆ[439] => array($a‡ƒ§åë¹ˆ[927], 0), $a‡ƒ§åë¹ˆ[441] => array($a‡ƒ§åë¹ˆ[927], 0), $a‡ƒ§åë¹ˆ[2125] => $a‡ƒ§åë¹ˆ[2094]); } if ($FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[2090]]) { $bØ‹òö•†³[] = array($a‡ƒ§åë¹ˆ[436] => $FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[2090]], $a‡ƒ§åë¹ˆ[1243] => array($a‡ƒ§åë¹ˆ[754], "\45{$FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[2090]]}\45"), $a‡ƒ§åë¹ˆ[2125] => $a‡ƒ§åë¹ˆ[2094]); } goto AÖµÈ²¨¿ˆ; AÖµÈ²¨¿ˆ: $d…”Øè»ÕÍ = $this->_makeOrder()->where($bØ‹òö•†³)->selectPage(20); if (empty($d…”Øè»ÕÍ[$a‡ƒ§åë¹ˆ[347]])) { return array(); } $this->_listDataApply($d…”Øè»ÕÍ[$a‡ƒ§åë¹ˆ[347]]); goto E¸Òµñ†; E¸Òµñ†: return $d…”Øè»ÕÍ; goto aÓ–ç¹…Œ†; b´«¹È¡Ç¢: $a‡ƒ§åë¹ˆ =& $_SERVER[şÅ²é¤èİ]; $bØ‹òö•†³ = array(); if ($FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[1345]]) { $bØ‹òö•†³[$a‡ƒ§åë¹ˆ[1345]] = $FèÃˆë“Ş[$a‡ƒ§åë¹ˆ[1345]]; } goto fĞÁ§“Ÿ÷Ö; aÓ–ç¹…Œ†: } private function _listDataApply(&$a‘òİ±¦¢Š) { $b¬¨Ïğíµ¯ =& $_SERVER[şÅ²é¤èİ]; $EîÅµê×¨ò = array_to_keyvalue($a‘òİ±¦¢Š, $b¬¨Ïğíµ¯[33], $b¬¨Ïğíµ¯[1345]); $eöŒ¿ÍøËã = Model($b¬¨Ïğíµ¯[467])->userListInfo(array_unique($EîÅµê×¨ò)); $BæŞ‹É×¶ = array_to_keyvalue($a‘òİ±¦¢Š, $b¬¨Ïğíµ¯[33], $b¬¨Ïğíµ¯[363]); $CË”ÉîÁ°÷ = Model($b¬¨Ïğíµ¯[755])->sourceListInfo($BæŞ‹É×¶, !0); foreach ($a‘òİ±¦¢Š as &$aœ”“¡ğà) { $eˆäĞÒÍÖ³ = $aœ”“¡ğà[$b¬¨Ïğíµ¯[1345]]; $aœ”“¡ğà[$b¬¨Ïğíµ¯[2147]] = $eöŒ¿ÍøËã[$eˆäĞÒÍÖ³] ? $eöŒ¿ÍøËã[$eˆäĞÒÍÖ³] : !1; $A³¡‘·¾œ´ = $aœ”“¡ğà[$b¬¨Ïğíµ¯[363]]; $aœ”“¡ğà[$b¬¨Ïğíµ¯[385]] = $CË”ÉîÁ°÷[$A³¡‘·¾œ´] ? $CË”ÉîÁ°÷[$A³¡‘·¾œ´] : !1; } } private function _makeOrder($EÔ‚íªÊìİ = '') { goto bçÕùë‰’ã; bçÕùë‰’ã: $aé°çŸéµÛ =& $_SERVER[şÅ²é¤èİ]; $d®ó¨­ù¿ = array($aé°çŸéµÛ[183], $aé°çŸéµÛ[696], $aé°çŸéµÛ[2137], $aé°çŸéµÛ[2138]); $D¾Â‡‰îß = array($aé°çŸéµÛ[395] => $aé°çŸéµÛ[396], $aé°çŸéµÛ[397] => $aé°çŸéµÛ[398]); goto AËÅ‰±Œ›; B‹Ìàíµ†¼: $EÔ‚íªÊìİ = $EÔ‚íªÊìİ . "{$fË‡ÙÖÌ±Œ}\40{$eÂ›”Æ†–}"; return $this->order($EÔ‚íªÊìİ); goto bˆğ‘ÉÁµ ; AËÅ‰±Œ›: $fË‡ÙÖÌ±Œ = Input::get($aé°çŸéµÛ[400], $aé°çŸéµÛ[7], $aé°çŸéµÛ[383], $d®ó¨­ù¿); $eÂ›”Æ†– = Input::get($aé°çŸéµÛ[401], $aé°çŸéµÛ[7], $aé°çŸéµÛ[2148], array($aé°çŸéµÛ[2089], $aé°çŸéµÛ[397])); $eÂ›”Æ†– = $D¾Â‡‰îß[$eÂ›”Æ†–]; goto B‹Ìàíµ†¼; bˆğ‘ÉÁµ : } public function reportAdd($B âÑŒä¡ß) { $C‹ƒ‹”©„‡ =& $_SERVER[şÅ²é¤èİ]; $DŒ„ÈÍÑ†• = array($C‹ƒ‹”©„‡[434] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[434]], $C‹ƒ‹”©„‡[1345] => USER_ID); if (Model($C‹ƒ‹”©„‡[2149])->where($DŒ„ÈÍÑ†•)->find()) { return !1; } $B‰„…ìèÙ„ = array($C‹ƒ‹”©„‡[434] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[434]], $C‹ƒ‹”©„‡[1243] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[1243]], $C‹ƒ‹”©„‡[363] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[363]], $C‹ƒ‹”©„‡[412] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[412]], $C‹ƒ‹”©„‡[1345] => USER_ID, $C‹ƒ‹”©„‡[29] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[29]], $C‹ƒ‹”©„‡[398] => $B âÑŒä¡ß[$C‹ƒ‹”©„‡[398]]); return Model($C‹ƒ‹”©„‡[2149])->add($B‰„…ìèÙ„); } public function reportList($Dç›ĞÄƒ™¡) { goto dÄÇ¢£óÏ‹; bğœÙã¡ˆˆ: if (empty($a¬Çƒç“ŸÍ[$F¯õâø†‘¦[347]])) { return array(); } $this->_listDataApply($a¬Çƒç“ŸÍ[$F¯õâø†‘¦[347]]); return $a¬Çƒç“ŸÍ; goto C¦”­åôÚ; dÄÇ¢£óÏ‹: $F¯õâø†‘¦ =& $_SERVER[şÅ²é¤èİ]; $F‘›è½÷æ¾ = array(); if ($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[695]]) { $dˆ„›«ÈÛ = $Dç›ĞÄƒ™¡[$F¯õâø†‘¦[696]] ? $Dç›ĞÄƒ™¡[$F¯õâø†‘¦[696]] : strtotime(date($F¯õâø†‘¦[2146])); $F‘›è½÷æ¾[$F¯õâø†‘¦[183]] = array($F¯õâø†‘¦[315], array($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[695]], $dˆ„›«ÈÛ)); } goto F¸ù›÷àá; Cê§ÓÍ…¾: $fŒ¥÷£¶» = array($F¯õâø†‘¦[395] => $F¯õâø†‘¦[396], $F¯õâø†‘¦[397] => $F¯õâø†‘¦[398]); $D®åÛ¦îÅç = $F¯õâø†‘¦[2153] . $fŒ¥÷£¶»[$D²††É½]; $a¬Çƒç“ŸÍ = Model($F¯õâø†‘¦[2149])->where($F‘›è½÷æ¾)->order($D®åÛ¦îÅç)->selectPage(20); goto bğœÙã¡ˆˆ; F¸ù›÷àá: if (isset($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[29]]) && in_array($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[29]], array($F¯õâø†‘¦[491], $F¯õâø†‘¦[2150], $F¯õâø†‘¦[2151], $F¯õâø†‘¦[2152], $F¯õâø†‘¦[1826]))) { $F‘›è½÷æ¾[$F¯õâø†‘¦[29]] = $Dç›ĞÄƒ™¡[$F¯õâø†‘¦[29]]; } if (isset($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[682]]) && in_array($Dç›ĞÄƒ™¡[$F¯õâø†‘¦[682]], array($F¯õâø†‘¦[461], $F¯õâø†‘¦[491], $F¯õâø†‘¦[2150], $F¯õâø†‘¦[2151]))) { $F‘›è½÷æ¾[$F¯õâø†‘¦[682]] = $Dç›ĞÄƒ™¡[$F¯õâø†‘¦[682]]; } $D²††É½ = Input::get($F¯õâø†‘¦[401], $F¯õâø†‘¦[7], $F¯õâø†‘¦[2148], array($F¯õâø†‘¦[2089], $F¯õâø†‘¦[397])); goto Cê§ÓÍ…¾; C¦”­åôÚ: } public function reportStatus($e”•ÈÍÄ¨) { goto E™ä»İ¾²Ü; aï²İÍøÀ¶: return $açŸÄ­ğ¡; goto DÜÂÏ„ó°; f–ÊƒçŞò: $açŸÄ­ğ¡ = Model($b†Ğ„öƒ½[2149])->where($CË¢¿Óø÷)->save($C™ëŞÒĞÓğ); if ($e”•ÈÍÄ¨[$b†Ğ„öƒ½[682]] == $b†Ğ„öƒ½[2150]) { if ($B¶™±ƒøÏ[$b†Ğ„öƒ½[412]] != $b†Ğ„öƒ½[461] && $this->shareFileMeta($B¶™±ƒøÏ[$b†Ğ„öƒ½[412]])) { $this->shareFileMeta($B¶™±ƒøÏ[$b†Ğ„öƒ½[412]], 0); } return $this->remove($B¶™±ƒøÏ[$b†Ğ„öƒ½[434]]); } if ($açŸÄ­ğ¡ && $e”•ÈÍÄ¨[$b†Ğ„öƒ½[682]] == $b†Ğ„öƒ½[2151]) { $fÀª¥Ú»Œó = $C™ëŞÒĞÓğ[$b†Ğ„öƒ½[682]] == $b†Ğ„öƒ½[2151] ? 1 : 0; $this->shareFileMeta($B¶™±ƒøÏ[$b†Ğ„öƒ½[412]], $fÀª¥Ú»Œó); $this->removeByFile($B¶™±ƒøÏ[$b†Ğ„öƒ½[412]]); } goto aï²İÍøÀ¶; a©²ë›‹òÈ: if (!$B¶™±ƒøÏ) { return !1; } $C™ëŞÒĞÓğ = array($b†Ğ„öƒ½[682] => $e”•ÈÍÄ¨[$b†Ğ„öƒ½[682]]); if ($e”•ÈÍÄ¨[$b†Ğ„öƒ½[682]] == $b†Ğ„öƒ½[2151] && $B¶™±ƒøÏ[$b†Ğ„öƒ½[682]] == $b†Ğ„öƒ½[2151]) { $C™ëŞÒĞÓğ[$b†Ğ„öƒ½[682]] = 0; } goto f–ÊƒçŞò; E™ä»İ¾²Ü: $b†Ğ„öƒ½ =& $_SERVER[şÅ²é¤èİ]; $CË¢¿Óø÷ = array($b†Ğ„öƒ½[361] => $e”•ÈÍÄ¨[$b†Ğ„öƒ½[361]]); $B¶™±ƒøÏ = Model($b†Ğ„öƒ½[2149])->where($CË¢¿Óø÷)->field($b†Ğ„öƒ½[2154])->find(); goto a©²ë›‹òÈ; DÜÂÏ„ó°: } private function removeByFile($B½×òéŠš•) { goto eè¤†Çß¯¸; A³‹µ—ª¼: $this->remove($a¹ì®Ô±Ùò); goto fî¶ïï²; eè¤†Çß¯¸: $a¤­ÛŒ¶Íã =& $_SERVER[şÅ²é¤èİ]; $C·†ë¿Ñƒ = Model($a¤­ÛŒ¶Íã[755])->where(array($a¤­ÛŒ¶Íã[412] => $B½×òéŠš•))->field($a¤­ÛŒ¶Íã[363])->select(); $cŠòÙÍêÓƒ = array_to_keyvalue($C·†ë¿Ñƒ, $a¤­ÛŒ¶Íã[33], $a¤­ÛŒ¶Íã[363]); goto fĞ™¥ÒóÇ¡; fĞ™¥ÒóÇ¡: $cÍƒÌÛõÉÚ = array($a¤­ÛŒ¶Íã[363] => array($a¤­ÛŒ¶Íã[7], $cŠòÙÍêÓƒ), $a¤­ÛŒ¶Íã[439] => 1); $C·†ë¿Ñƒ = Model($a¤­ÛŒ¶Íã[1986])->where($cÍƒÌÛõÉÚ)->field($a¤­ÛŒ¶Íã[434])->select(); $a¹ì®Ô±Ùò = array_to_keyvalue($C·†ë¿Ñƒ, $a¤­ÛŒ¶Íã[33], $a¤­ÛŒ¶Íã[434]); goto A³‹µ—ª¼; fî¶ïï²: } private function shareFileMeta($AˆŠ…©å², $E³±óï¬×´ = null) { $Cğñ‡Ú÷å =& $_SERVER[şÅ²é¤èİ]; $F¸Ë©Şƒá = array($Cğñ‡Ú÷å[412] => $AˆŠ…©å², $Cğñ‡Ú÷å[88] => $Cğñ‡Ú÷å[2155]); if (is_null($E³±óï¬×´)) { return Model($Cğñ‡Ú÷å[2156])->where($F¸Ë©Şƒá)->find(); } $F¸Ë©Şƒá[$Cğñ‡Ú÷å[351]] = $E³±óï¬×´; Model($Cğñ‡Ú÷å[2156])->add($F¸Ë©Şƒá, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\x72\143\x65\137\x61\x75\x74\x68"; public function getAuth($B¡òŒ³Èãğ) { goto aêŠÙØô¿; bÇë¥ÀªŸ¼: $BŒÉÙ×º†ƒ = $this->field($dŒÑÚ’ÉÆ)->order($E¯®™ä†õ±[361])->where($AÂÕ°‘ô„ã)->select(); $e²‡¥æ†‹ = array(); foreach ($BŒÉÙ×º†ƒ as $b“×Ö‰‰¥Ş) { if (Model($E¯®™ä†õ±[2158])->listData($b“×Ö‰‰¥Ş[$E¯®™ä†õ±[2142]])) { $e²‡¥æ†‹[] = $b“×Ö‰‰¥Ş; } } goto e‘ˆØ®Ñôˆ; e‘ˆØ®Ñôˆ: return $e²‡¥æ†‹; goto bÑ«‹Ì“ñí; aêŠÙØô¿: $E¯®™ä†õ± =& $_SERVER[şÅ²é¤èİ]; $dŒÑÚ’ÉÆ = $E¯®™ä†õ±[2157]; $AÂÕ°‘ô„ã = array($E¯®™ä†õ±[363] => $B¡òŒ³Èãğ); goto bÇë¥ÀªŸ¼; bÑ«‹Ì“ñí: } public function setAuth($AéªàÍÕé, $C™„Œòìé¯) { goto DÍÃ©²Ñ¼; DÍÃ©²Ñ¼: $B¼¡¸âäî =& $_SERVER[şÅ²é¤èİ]; $EÎÙ„ğã = Model($B¼¡¸âäî[1081])->sourceInfo($AéªàÍÕé); if ($EÎÙ„ğã[$B¼¡¸âäî[365]] != SourceModel::TYPE_GROUP) { return !1; } goto E†”å¶È©Ü; E†”å¶È©Ü: $C³ÄÀæâÂ = 1; $FŸ•®²ÁîÑ = $EÎÙ„ğã[$B¼¡¸âäî[449]]; if ($FŸ•®²ÁîÑ != $C³ÄÀæâÂ) { $eÆ›ÅŠï = array($B¼¡¸âäî[2009] => $FŸ•®²ÁîÑ); $Fîöé„ßË = Model($B¼¡¸âäî[2088])->field($B¼¡¸âäî[1345])->where($eÆ›ÅŠï)->select(); $Fîöé„ßË = array_to_keyvalue($Fîöé„ßË, $B¼¡¸âäî[33], $B¼¡¸âäî[1345]); } goto c„â´ˆ´ä; c„â´ˆ´ä: $c×ßØë¹‘È = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $d¡Í‰µÃùÔ = array(); foreach ($C™„Œòìé¯ as $AĞ„øã†Ù») { if (!in_array($AĞ„øã†Ù»[$B¼¡¸âäî[365]], $c×ßØë¹‘È)) { show_json(LNG($B¼¡¸âäî[2159]), !1); } if ($FŸ•®²ÁîÑ != $C³ÄÀæâÂ) { if ($AĞ„øã†Ù»[$B¼¡¸âäî[365]] == SourceModel::TYPE_GROUP) { } if ($AĞ„øã†Ù»[$B¼¡¸âäî[449]] != 0 && !in_array($AĞ„øã†Ù»[$B¼¡¸âäî[449]], $Fîöé„ßË)) { } } if ($AĞ„øã†Ù»[$B¼¡¸âäî[449]] == 0) { $AĞ„øã†Ù»[$B¼¡¸âäî[365]] = SourceModel::TYPE_USER; } $d¡Í‰µÃùÔ[] = array($B¼¡¸âäî[363] => $AéªàÍÕé, $B¼¡¸âäî[365] => intval($AĞ„øã†Ù»[$B¼¡¸âäî[365]]), $B¼¡¸âäî[449] => intval($AĞ„øã†Ù»[$B¼¡¸âäî[449]]), $B¼¡¸âäî[2142] => intval($AĞ„øã†Ù»[$B¼¡¸âäî[2142]]) ? intval($AĞ„øã†Ù»[$B¼¡¸âäî[2142]]) : 0, $B¼¡¸âäî[2143] => intval($AĞ„øã†Ù»[$B¼¡¸âäî[2143]]) ? intval($AĞ„øã†Ù»[$B¼¡¸âäî[2143]]) : -1); } goto cùŒš˜õ½; cùŒš˜õ½: $this->where(array($B¼¡¸âäî[377] => $AéªàÍÕé))->delete(); $this->addAll($d¡Í‰µÃùÔ); return !0; goto aÀ…È¶•·É; aÀ…È¶•·É: } public function authClear($fİ®ªë±Õñ) { $dõÌÓİƒ«  =& $_SERVER[şÅ²é¤èİ]; $BêÇí°•áä = Model($dõÌÓİƒ« [1081])->sourceInfo($fİ®ªë±Õñ); $C°ŒåíÙ‡ê = array($fİ®ªë±Õñ); if ($BêÇí°•áä[$dõÌÓİƒ« [364]] == $dõÌÓİƒ« [491]) { $a…Üç¤©¯¶ = array($dõÌÓİƒ« [516] => array($dõÌÓİƒ« [473], $BêÇí°•áä[$dõÌÓİƒ« [452]] . $fİ®ªë±Õñ . $dõÌÓİƒ« [474])); $C°ŒåíÙ‡ê = Model($dõÌÓİƒ« [1081])->field($dõÌÓİƒ« [377])->where($a…Üç¤©¯¶)->getField($dõÌÓİƒ« [363], !0); $C°ŒåíÙ‡ê[] = $fİ®ªë±Õñ; } $this->where(array($dõÌÓİƒ« [377] => array($dõÌÓİƒ« [378], $C°ŒåíÙ‡ê)))->delete(); return !0; } public function get($eØµŠøéš¡) { $Bâ‹œ‹¼ò» = $this->getSourceList(array($eØµŠøéš¡), !0); return $Bâ‹œ‹¼ò»[0]; } public function getSourceList($b¸©çí”‡”, $bˆ¿øëÒ¼ = false) { goto E°˜ŸáîÀ; F™æÕòŒ³Î: $eƒ†šÔ•‡° = array($AÓ§êµÇ¾[377] => array($AÓ§êµÇ¾[378], $A¸”·¦“ğ)); $eœ±•“ò¡å = $this->field($d¹Ã¸ÒŞ½é)->where($eƒ†šÔ•‡°)->select(); $eœ±•“ò¡å = array_to_keyvalue_group($eœ±•“ò¡å, $AÓ§êµÇ¾[363]); goto A´¿Ù„‰; d™ºã±Òô: $A¸”·¦“ğ = array_values(array_unique($A¸”·¦“ğ)); if (!$A¸”·¦“ğ) { return array(); } $d¹Ã¸ÒŞ½é = $AÓ§êµÇ¾[2161]; goto F™æÕòŒ³Î; E©á§¨ğêº: if (!$bˆ¿øëÒ¼) { $eƒ†šÔ•‡° = array($AÓ§êµÇ¾[377] => array($AÓ§êµÇ¾[378], $b¸©çí”‡”)); $bˆ¿øëÒ¼ = $eÕĞç©‡Ãï->field($AÓ§êµÇ¾[2160])->where($eƒ†šÔ•‡°)->select(); $bˆ¿øëÒ¼ = array_to_keyvalue($bˆ¿øëÒ¼, $AÓ§êµÇ¾[363]); } $A¸”·¦“ğ = $b¸©çí”‡”; foreach ($bˆ¿øëÒ¼ as $FĞ„ğ¡ÓÌó => $f®ÅÕÅí¢¾) { $Côİ¢ÈÃÚ = $eÕĞç©‡Ãï->parentLevelArray($f®ÅÕÅí¢¾[$AÓ§êµÇ¾[452]]); $A¸”·¦“ğ = array_merge($A¸”·¦“ğ, $Côİ¢ÈÃÚ, array($FĞ„ğ¡ÓÌó)); } goto d™ºã±Òô; A´¿Ù„‰: $e¦ÈŒ¹ì± = array(); foreach ($bˆ¿øëÒ¼ as $Aœ´÷´Œİõ => $BÓé³…ëì) { $e¦ÈŒ¹ì±[$Aœ´÷´Œİõ] = $this->makeSourceAuth($BÓé³…ëì, $eœ±•“ò¡å); } return $e¦ÈŒ¹ì±; goto C§ñ‰˜‰Á; E°˜ŸáîÀ: $AÓ§êµÇ¾ =& $_SERVER[şÅ²é¤èİ]; if (!$b¸©çí”‡”) { return array(); } $eÕĞç©‡Ãï = Model($AÓ§êµÇ¾[1081]); goto E©á§¨ğêº; C§ñ‰˜‰Á: } public function authDeepCheck($f¾™õöÏ¶, $e¾’«àŞ„ = false) { $cˆ¿ù¥¿‰ =& $_SERVER[şÅ²é¤èİ]; if ($GLOBALS[$cˆ¿ù¥¿‰[450]]) { return !1; } $B”†òéš ‡ = $this->makeAuthDeep(); if (!in_array($f¾™õöÏ¶, $B”†òéš ‡)) { return !1; } return array($cˆ¿ù¥¿‰[371] => -1, $cˆ¿ù¥¿‰[411] => array($cˆ¿ù¥¿‰[379] => $cˆ¿ù¥¿‰[1010], $cˆ¿ù¥¿‰[2015] => $cˆ¿ù¥¿‰[461], $cˆ¿ù¥¿‰[380] => LNG($cˆ¿ù¥¿‰[2162]), $cˆ¿ù¥¿‰[2027] => $cˆ¿ù¥¿‰[2163])); } protected function makeAuthDeep() { goto f¤â‹šï•Ò; f¤â‹šï•Ò: $bÜÍîå ÷Ì =& $_SERVER[şÅ²é¤èİ]; static $b³´Œ¯Ÿ¾‰ = false; if ($b³´Œ¯Ÿ¾‰) { return $b³´Œ¯Ÿ¾‰; } goto CÄ­¿ôÎìØ; CÄ­¿ôÎìØ: $Aæõ¥´ã…– = Model($bÜÍîå ÷Ì[2164])->listData(); $c¨í£Ö ôÒ = array(); foreach ($Aæõ¥´ã…– as $fšó˜µóœ) { if ($fšó˜µóœ[$bÜÍîå ÷Ì[370]] == 0 && $fšó˜µóœ[$bÜÍîå ÷Ì[2029]] == $bÜÍîå ÷Ì[491]) { $c¨í£Ö ôÒ[] = $fšó˜µóœ[$bÜÍîå ÷Ì[361]]; } } goto eŞ¡Ô×ÅÌ¯; e× ÈÄ«³: $F‚®¿Ûëš– = array_values(array_unique($F‚®¿Ûëš–)); foreach ($F‚®¿Ûëš– as $e¯Üß¼À­) { $DÕ¡ğ»ˆä’ = $cÜÜ¿ìĞÛ°->getInfo($e¯Üß¼À­); $b³´Œ¯Ÿ¾‰[] = $DÕ¡ğ»ˆä’[$bÜÍîå ÷Ì[385]][$bÜÍîå ÷Ì[363]]; } $b³´Œ¯Ÿ¾‰ = array_values(array_unique($b³´Œ¯Ÿ¾‰)); goto Eğ‰öƒº®ø; Eğ‰öƒº®ø: return $b³´Œ¯Ÿ¾‰; goto aÆ–ƒ¸±Ô; Dî— ‘¢¨ƒ: if ($böŠ’²Ì±Ú) { $díéĞ§˜õÈ = array(array($bÜÍîå ÷Ì[365] => SourceModel::TYPE_USER, $bÜÍîå ÷Ì[449] => USER_ID), array($bÜÍîå ÷Ì[365] => SourceModel::TYPE_GROUP, $bÜÍîå ÷Ì[449] => array($bÜÍîå ÷Ì[378], $böŠ’²Ì±Ú)), $bÜÍîå ÷Ì[915] => $bÜÍîå ÷Ì[2094]); } if ($c¨í£Ö ôÒ) { $díéĞ§˜õÈ = array($díéĞ§˜õÈ, $bÜÍîå ÷Ì[2142] => array($bÜÍîå ÷Ì[2165], $c¨í£Ö ôÒ)); } $Bù®ÒË³¾ = $this->field($bÜÍîå ÷Ì[2166])->where($díéĞ§˜õÈ)->select(); goto Få†‹Ì‘Ã´; E¬À³Ò‚¿Ó: $F‚®¿Ûëš– = array_values(array_unique($F‚®¿Ûëš–)); $d„ë–èğ… = $F‚®¿Ûëš–; foreach ($d„ë–èğ… as $e¯Üß¼À­) { $DÕ¡ğ»ˆä’ = $cÜÜ¿ìĞÛ°->getInfo($e¯Üß¼À­); $C›’ˆŒµÅ¯ = $d²ˆôÃÎ¿->parentLevelArray($DÕ¡ğ»ˆä’[$bÜÍîå ÷Ì[452]]); $F‚®¿Ûëš– = array_merge($F‚®¿Ûëš–, $C›’ˆŒµÅ¯); } goto e× ÈÄ«³; DÈãÓ¥ÆÅ: $d²ˆôÃÎ¿ = Model($bÜÍîå ÷Ì[1081]); $cÜÜ¿ìĞÛ° = Model($bÜÍîå ÷Ì[451]); if ($FğšğÎ÷…) { $AÎ‰ËÚõà¦ = $d²ˆôÃÎ¿->where(array($bÜÍîå ÷Ì[363] => array($bÜÍîå ÷Ì[378], $FğšğÎ÷…)))->select(); foreach ($AÎ‰ËÚõà¦ as $dô§ÏŞÂ‰¦) { $C›’ˆŒµÅ¯ = $d²ˆôÃÎ¿->parentLevelArray($dô§ÏŞÂ‰¦[$bÜÍîå ÷Ì[452]]); $b³´Œ¯Ÿ¾‰ = array_merge($b³´Œ¯Ÿ¾‰, $C›’ˆŒµÅ¯); $F‚®¿Ûëš–[] = $dô§ÏŞÂ‰¦[$bÜÍîå ÷Ì[449]]; } } goto E¬À³Ò‚¿Ó; Få†‹Ì‘Ã´: $FğšğÎ÷… = array_to_keyvalue($Bù®ÒË³¾, $bÜÍîå ÷Ì[33], $bÜÍîå ÷Ì[363]); $b³´Œ¯Ÿ¾‰ = array(); $F‚®¿Ûëš– = $böŠ’²Ì±Ú; goto DÈãÓ¥ÆÅ; eŞ¡Ô×ÅÌ¯: $böŠ’²Ì±Ú = Session::get($bÜÍîå ÷Ì[2126]); $böŠ’²Ì±Ú = array_to_keyvalue($böŠ’²Ì±Ú, $bÜÍîå ÷Ì[33], $bÜÍîå ÷Ì[2009]); $díéĞ§˜õÈ = array($bÜÍîå ÷Ì[365] => SourceModel::TYPE_USER, $bÜÍîå ÷Ì[449] => USER_ID); goto Dî— ‘¢¨ƒ; aÆ–ƒ¸±Ô: } private function makeSourceAuth($c×¤·¿¤›¢, $EÁò¯¬¢) { goto Aµ¾¶Ò‚ø; Aµ¾¶Ò‚ø: $Fğœ‘ÈÔí =& $_SERVER[şÅ²é¤èİ]; $eÕ˜­äœê = Session::get($Fğœ‘ÈÔí[2126]); $A—ª»ÏĞÈ = Model($Fğœ‘ÈÔí[1081])->parentLevelArray($c×¤·¿¤›¢[$Fğœ‘ÈÔí[452]]); goto DôÃ®â©Ğî; b±öâ·¬Ñ: if (!$bäùÈùØß¡) { $eÕ˜­äœê = array_to_keyvalue($eÕ˜­äœê, $Fğœ‘ÈÔí[2009]); $EŸ¢Ÿ²ôš– = $c×¤·¿¤›¢[$Fğœ‘ÈÔí[449]]; $F¨Å³·¨“ì = isset($eÕ˜­äœê[$EŸ¢Ÿ²ôš–]) ? $eÕ˜­äœê[$EŸ¢Ÿ²ôš–] : !1; if ($F¨Å³·¨“ì) { $bäùÈùØß¡ = array($Fğœ‘ÈÔí[2167] => intval($F¨Å³·¨“ì[$Fğœ‘ÈÔí[370]][$Fğœ‘ÈÔí[370]]), $Fğœ‘ÈÔí[2168] => $F¨Å³·¨“ì[$Fğœ‘ÈÔí[370]]); } } if ((!$bäùÈùØß¡ || $bäùÈùØß¡[$Fğœ‘ÈÔí[371]] <= 0) && $c×¤·¿¤›¢[$Fğœ‘ÈÔí[365]] == SourceModel::TYPE_GROUP) { $bäùÈùØß¡ = $this->authDeepCheck($c×¤·¿¤›¢[$Fğœ‘ÈÔí[363]], $bäùÈùØß¡); } return $bäùÈùØß¡; goto dğÛãáéÔâ; DôÃ®â©Ğî: $A—ª»ÏĞÈ = array_merge(array($c×¤·¿¤›¢[$Fğœ‘ÈÔí[363]]), array_reverse($A—ª»ÏĞÈ)); $bäùÈùØß¡ = !1; foreach ($A—ª»ÏĞÈ as $eğğÙÁ“ÎÃ) { if (!isset($EÁò¯¬¢[$eğğÙÁ“ÎÃ])) { continue; } $dë™àã¤ÉÃ = $this->authMake($EÁò¯¬¢[$eğğÙÁ“ÎÃ]); if ($dë™àã¤ÉÃ[$Fğœ‘ÈÔí[411]]) { $bäùÈùØß¡ = $dë™àã¤ÉÃ; break; } } goto b±öâ·¬Ñ; dğÛãáéÔâ: } public function authOwnerApply($A…İ³‘öåÆ) { goto Aƒ¿¢ÈÒ¿; CÃ”íäá”: $fµ×ºóáÑ­ = array($e µ¶‰½èï[377] => array($e µ¶‰½èï[378], $E¥Û­š¬Ê¿)); $d‘ä“À¾…µ = $this->field($f£èïµˆÃ)->where($fµ×ºóáÑ­)->select(); $d‘ä“À¾…µ = array_to_keyvalue_group($d‘ä“À¾…µ, $e µ¶‰½èï[363]); goto aÒëÏô¬ ø; aÒëÏô¬ ø: $d¿³Òóéøî = array(); $AÖéøĞÎ„ = array(); foreach ($d‘ä“À¾…µ as $C ·¨•˜‡ => $C»Ô×ğº) { $bÂĞ†“Ø = $this->authFolderOwnerUser($C»Ô×ğº); $d¿³Òóéøî[$C ·¨•˜‡] = $bÂĞ†“Ø; $AÖéøĞÎ„ = array_merge($AÖéøĞÎ„, $bÂĞ†“Ø[$e µ¶‰½èï[525]]); if ($bÂĞ†“Ø[$e µ¶‰½èï[2170]]) { break; } } goto F²‘Å£»; F²‘Å£»: if (count($AÖéøĞÎ„) == 0) { $AÖéøĞÎ„ = $this->authFolderOwnerGroup($A…İ³‘öåÆ[$e µ¶‰½èï[449]]); } $AÖéøĞÎ„ = array_unique($AÖéøĞÎ„); if (AuthModel::authCheckRoot($A…İ³‘öåÆ[$e µ¶‰½èï[370]][$e µ¶‰½èï[371]])) { $AÖéøĞÎ„[] = USER_ID; } goto cØÏŞ—‘¿•; BŸÉÈ›¨òª: $E¥Û­š¬Ê¿ = Model($e µ¶‰½èï[1081])->parentLevelArray($A…İ³‘öåÆ[$e µ¶‰½èï[452]]); $E¥Û­š¬Ê¿ = array_merge(array($A…İ³‘öåÆ[$e µ¶‰½èï[363]]), array_reverse($E¥Û­š¬Ê¿)); $f£èïµˆÃ = $e µ¶‰½èï[2161]; goto CÃ”íäá”; Aƒ¿¢ÈÒ¿: $e µ¶‰½èï =& $_SERVER[şÅ²é¤èİ]; if (!$A…İ³‘öåÆ[$e µ¶‰½èï[370]] || $A…İ³‘öåÆ[$e µ¶‰½èï[2169]]) { return $A…İ³‘öåÆ; } if (AuthModel::authCheckRoot($A…İ³‘öåÆ[$e µ¶‰½èï[370]][$e µ¶‰½èï[371]])) { return $A…İ³‘öåÆ; } goto BŸÉÈ›¨òª; cØÏŞ—‘¿•: $A…İ³‘öåÆ[$e µ¶‰½èï[370]][$e µ¶‰½èï[2171]] = Model($e µ¶‰½èï[463])->userListInfo($AÖéøĞÎ„); return $A…İ³‘öåÆ; goto eäÔàã´â; eäÔàã´â: } private function authFolderOwnerGroup($eèµÀ‚ø¥ß) { $f­àÄèÀà =& $_SERVER[şÅ²é¤èİ]; $f©’‚÷ê»œ = Model($f­àÄèÀà[2088])->where(array($f­àÄèÀà[2009] => $eèµÀ‚ø¥ß))->select(); $bÖŒÓ‘é¹İ = array(); if (!$f©’‚÷ê»œ) { return $bÖŒÓ‘é¹İ; } foreach ($f©’‚÷ê»œ as $a£ØÑéëÊ) { $CÈ™‚¿¶•÷ = $this->authInfo($a£ØÑéëÊ); if (AuthModel::authCheckRoot($CÈ™‚¿¶•÷[$f­àÄèÀà[370]])) { $bÖŒÓ‘é¹İ[] = $a£ØÑéëÊ[$f­àÄèÀà[1345]]; } } return $bÖŒÓ‘é¹İ; } private function authFolderOwnerUser($B¯òïÔŒœ) { $F‘İõÑĞô =& $_SERVER[şÅ²é¤èİ]; $c­å¢Óˆˆ = array(); $BğÖÈ³ˆœ = !1; foreach ($B¯òïÔŒœ as $C•”êÖ‘) { $aåªÖ±®—Û = $this->authInfo($C•”êÖ‘); if ($C•”êÖ‘[$F‘İõÑĞô[449]] == $F‘İõÑĞô[461]) { $BğÖÈ³ˆœ = !0; } if ($C•”êÖ‘[$F‘İõÑĞô[365]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($aåªÖ±®—Û[$F‘İõÑĞô[370]])) { $c­å¢Óˆˆ[] = $C•”êÖ‘[$F‘İõÑĞô[449]]; } } } return array($F‘İõÑĞô[525] => $c­å¢Óˆˆ, $F‘İõÑĞô[2170] => $BğÖÈ³ˆœ); } public function authMake($DğŞ“ã˜”) { goto Còñ‚ìÁó; b‡èùà: $añÉ¢†ƒ¤¾ = 0; foreach ($DğŞ“ã˜” as $dËŒŞ¢Í·á) { $b×¯ÅŞŒ = $this->authInfo($dËŒŞ¢Í·á); $dŠ‡×Ñ³ßì = $dËŒŞ¢Í·á[$B•¸—«‡Ö©[449]]; $c†›Ï†ŠÜ± = intval($b×¯ÅŞŒ[$B•¸—«‡Ö©[370]]); if ($dËŒŞ¢Í·á[$B•¸—«‡Ö©[365]] == SourceModel::TYPE_USER && $dŠ‡×Ñ³ßì == USER_ID) { $f‚áµºâí… = !0; $dµ°·†ö«« = $b×¯ÅŞŒ; $B¢Í¢‘Ìä° = $c†›Ï†ŠÜ±; } else { if ($dËŒŞ¢Í·á[$B•¸—«‡Ö©[365]] == SourceModel::TYPE_GROUP && in_array($dŠ‡×Ñ³ßì, $aâŞ“¨¢«Š)) { $Dì®Õ«ÛĞÕ = !0; if ($c†›Ï†ŠÜ± >= $bï³¡…ö·) { $bï³¡…ö· = $c†›Ï†ŠÜ±; $eêˆÄ¯Ğ÷ù = $b×¯ÅŞŒ; } } else { if ($dŠ‡×Ñ³ßì == 0) { $añÉ¢†ƒ¤¾ = !0; $CÏƒ¢‘»·× = $b×¯ÅŞŒ; $CÛÁ½—†èÔ = $c†›Ï†ŠÜ±; } } } } $D‹äÔŒ¿öâ = $f‚áµºâí… ? $B¢Í¢‘Ìä° : ($Dì®Õ«ÛĞÕ ? $bï³¡…ö· : $CÛÁ½—†èÔ); goto e‡‡—¹³Ïã; Còñ‚ìÁó: $B•¸—«‡Ö© =& $_SERVER[şÅ²é¤èİ]; if (!$DğŞ“ã˜”) { return array($B•¸—«‡Ö©[371] => 0, $B•¸—«‡Ö©[411] => !1); } $Cƒ¾¢ƒÙÖÁ = Session::get($B•¸—«‡Ö©[2126]); goto EòÓ‡¯¿Âê; e‡‡—¹³Ïã: $b×¯ÅŞŒ = $f‚áµºâí… ? $dµ°·†ö«« : ($Dì®Õ«ÛĞÕ ? $eêˆÄ¯Ğ÷ù : $CÏƒ¢‘»·×); $B¤ŒšôÆĞ  = array($B•¸—«‡Ö©[2167] => intval($D‹äÔŒ¿öâ), $B•¸—«‡Ö©[2168] => $b×¯ÅŞŒ); return $B¤ŒšôÆĞ ; goto e–ø­ƒÎ’Œ; CÅÖ½ñ´å¥: $CÛÁ½—†èÔ = 0; $dµ°·†ö«« = 0; $eêˆÄ¯Ğ÷ù = 0; goto Cî†í÷ƒëæ; EòÓ‡¯¿Âê: $aâŞ“¨¢«Š = array_to_keyvalue($Cƒ¾¢ƒÙÖÁ, $B•¸—«‡Ö©[33], $B•¸—«‡Ö©[2009]); $B¢Í¢‘Ìä° = 0; $bï³¡…ö· = 0; goto CÅÖ½ñ´å¥; Cî†í÷ƒëæ: $CÏƒ¢‘»·× = 0; $f‚áµºâí… = 0; $Dì®Õ«ÛĞÕ = 0; goto b‡èùà; e–ø­ƒÎ’Œ: } public function authTargetInfoMake($AËŞÎù‡¨œ) { goto Bññ´çª¶°; c³ÖÕŠí¿¤: return array($cèœ„Ô£ê[2172] => $aÖíà„éÂª, $cèœ„Ô£ê[2173] => $dæ£ÅÖÓ»); goto Dé±ÌÇ ø; E”œÜ–±äì: foreach ($AËŞÎù‡¨œ as $dŠ•²ØÌŠÍ) { if ($dŠ•²ØÌŠÍ[$cèœ„Ô£ê[365]] == SourceModel::TYPE_USER) { $aÖíà„éÂª[] = intval($dŠ•²ØÌŠÍ[$cèœ„Ô£ê[449]]); } else { if ($dŠ•²ØÌŠÍ[$cèœ„Ô£ê[365]] == SourceModel::TYPE_GROUP) { $dæ£ÅÖÓ»[] = intval($dŠ•²ØÌŠÍ[$cèœ„Ô£ê[449]]); } } } if ($aÖíà„éÂª) { $aÖíà„éÂª = Model($cèœ„Ô£ê[463])->userListInfo($aÖíà„éÂª); } if ($dæ£ÅÖÓ») { $bŞæÃòáĞ® = array($cèœ„Ô£ê[2086] => array($cèœ„Ô£ê[378], $dæ£ÅÖÓ»)); $dæ£ÅÖÓ» = Model($cèœ„Ô£ê[451])->field($cèœ„Ô£ê[2099])->where($bŞæÃòáĞ®)->select(); $dæ£ÅÖÓ» = array_to_keyvalue($dæ£ÅÖÓ», $cèœ„Ô£ê[2009]); } goto c³ÖÕŠí¿¤; Bññ´çª¶°: $cèœ„Ô£ê =& $_SERVER[şÅ²é¤èİ]; $aÖíà„éÂª = array(); $dæ£ÅÖÓ» = array(); goto E”œÜ–±äì; Dé±ÌÇ ø: } private function authInfo($a™Ñ³íÜÔª) { $CÖ«ÅõÌíß =& $_SERVER[şÅ²é¤èİ]; if ($a™Ñ³íÜÔª[$CÖ«ÅõÌíß[2142]]) { $Fá‰ ‘È¬ = Model($CÖ«ÅõÌíß[2158])->listData($a™Ñ³íÜÔª[$CÖ«ÅõÌíß[2142]]); if (!$Fá‰ ‘È¬) { return !1; $f¦ÃÚòÆÌ = Model($CÖ«ÅõÌíß[2158])->listData(); $E¦‡‚Ì‰¥ = array_filter_by_field($f¦ÃÚòÆÌ, $CÖ«ÅõÌíß[370], $CÖ«ÅõÌíß[461]); return $E¦‡‚Ì‰¥; } $F‹­Œ­İº = array_field_key($Fá‰ ‘È¬, array($CÖ«ÅõÌíß[361], $CÖ«ÅõÌíß[28], $CÖ«ÅõÌíß[370], $CÖ«ÅõÌíß[2027], $CÖ«ÅõÌíß[2030])); $F‹­Œ­İº[$CÖ«ÅõÌíß[2174]] = $a™Ñ³íÜÔª; return $F‹­Œ­İº; } else { return array($CÖ«ÅõÌíß[379] => 0, $CÖ«ÅõÌíß[2015] => $a™Ñ³íÜÔª[$CÖ«ÅõÌíß[2143]], $CÖ«ÅõÌíß[380] => $CÖ«ÅõÌíß[33], $CÖ«ÅõÌíß[2027] => $CÖ«ÅõÌíß[2175]); } } } class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\163\x6f\x75\162\143\x65\x5f\x65\x76\x65\x6e\x74"; protected $dataAuto = array(array("\143\162\x65\141\x74\145\x54\151\x6d\x65", "\164\151\155\145", "\151\x6e\x73\145\x72\164", "\146\x75\156\143\164\151\x6f\x6e"), array("\x64\145\163\x63", '', "\x69\x6e\x73\145\x72\164\54\x75\160\x64\x61\164\145\x2c\163\145\x6c\x65\143\164", "\x6a\x73\x6f\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($a˜Îó¸ÑöË, $EÖÕ§Œà±, $DĞŸ¯ëÆì = '') { goto AÀğíæ£; E×İ†‚¢Ù×: $BĞƒ‘†Ş´ = array($cÏÏ¦ÅÀŒÃ[377] => $a˜Îó¸ÑöË, $cÏÏ¦ÅÀŒÃ[2176] => $Fºµ„Ñ¢°Ò[$cÏÏ¦ÅÀŒÃ[454]], $cÏÏ¦ÅÀŒÃ[2177] => $Fºµ„Ñ¢°Ò[$cÏÏ¦ÅÀŒÃ[28]], $cÏÏ¦ÅÀŒÃ[459] => $Fºµ„Ñ¢°Ò[$cÏÏ¦ÅÀŒÃ[459]], $cÏÏ¦ÅÀŒÃ[1336] => USER_ID, $cÏÏ¦ÅÀŒÃ[382] => $EÖÕ§Œà±, $cÏÏ¦ÅÀŒÃ[1338] => $DĞŸ¯ëÆì); $this->addSystemLog($EÖÕ§Œà±, $BĞƒ‘†Ş´); return $this->add($BĞƒ‘†Ş´); goto DÓõÚÚëÊ”; AÀğíæ£: $cÏÏ¦ÅÀŒÃ =& $_SERVER[şÅ²é¤èİ]; if (!$this->eventSave) { return; } $Fºµ„Ñ¢°Ò = Model($cÏÏ¦ÅÀŒÃ[1081])->sourceInfo($a˜Îó¸ÑöË); goto BôÚƒöÚí; BôÚƒöÚí: if (!$Fºµ„Ñ¢°Ò) { return !1; } if ($this->isCacheEvent($Fºµ„Ñ¢°Ò, $EÖÕ§Œà±)) { return; } if ($DĞŸ¯ëÆì && is_string($DĞŸ¯ëÆì)) { $DĞŸ¯ëÆì = array($cÏÏ¦ÅÀŒÃ[2040] => $DĞŸ¯ëÆì); } goto E×İ†‚¢Ù×; DÓõÚÚëÊ”: } private function addSystemLog($f¼’“Ò‹ç, $c—œ™åßÏÒ) { $a«Í£«•† =& $_SERVER[şÅ²é¤èİ]; if ($f¼’“Ò‹ç == $a«Í£«•†[2178]) { $f¼’“Ò‹ç = $c—œ™åßÏÒ[$a«Í£«•†[398]][$a«Í£«•†[2179]]; } else { if (in_array($f¼’“Ò‹ç, array($a«Í£«•†[1986], $a«Í£«•†[2180]))) { $f¼’“Ò‹ç = $c—œ™åßÏÒ[$a«Í£«•†[398]][$a«Í£«•†[685]]; } } $FÜó‡…ôÍ = array_merge($c—œ™åßÏÒ, array($a«Í£«•†[2181] => $c—œ™åßÏÒ[$a«Í£«•†[363]], $a«Í£«•†[2182] => $c—œ™åßÏÒ[$a«Í£«•†[2182]])); Model($a«Í£«•†[1951])->addLog($a«Í£«•†[2183] . $f¼’“Ò‹ç, $FÜó‡…ôÍ); } private function isCacheEvent($e¨ÙŒá›Ü’, $cìƒˆ±âå) { if ($e¨ÙŒá›Ü’[$_SERVER[şÅ²é¤èİ][365]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($BÅŸ¥œÆ²¡, $eÏè›Ó¢±‹) { $D÷Ğ£™âï =& $_SERVER[şÅ²é¤èİ]; $D»­àÁ©’ = Model($D÷Ğ£™âï[1081])->sourceInfo($BÅŸ¥œÆ²¡); $fˆÏÆ…äµ¼ = array($D÷Ğ£™âï[2179] => $eÏè›Ó¢±‹, $D÷Ğ£™âï[28] => $D»­àÁ©’[$D÷Ğ£™âï[28]]); return $this->addEvent($BÅŸ¥œÆ²¡, $D÷Ğ£™âï[2178], $fˆÏÆ…äµ¼); } public function eventFileEdit($eë¨ÃÓ‚ê) { return $this->addEvent($eë¨ÃÓ‚ê, $_SERVER[şÅ²é¤èİ][1978]); } public function eventRecycle($Cª‡¯Ÿ…È, $BÚğ©Àà¥‡) { return $this->addEvent($Cª‡¯Ÿ…È, $_SERVER[şÅ²é¤èİ][2180], $BÚğ©Àà¥‡); } public function eventRemove($eøœìğ…) { $B•¿‘£Ğó =& $_SERVER[şÅ²é¤èİ]; $Bà¹¿ ¤‰ = Model($B•¿‘£Ğó[1081])->sourceInfo($eøœìğ…); $A»¥çÄ–¤ = $Bà¹¿ ¤‰[$B•¿‘£Ğó[28]]; return $this->addEvent($Bà¹¿ ¤‰[$B•¿‘£Ğó[454]], $B•¿‘£Ğó[1977], $A»¥çÄ–¤); } public function eventShare($AçÏêœÃëÜ, $B³æˆ¡‚İ) { return $this->addEvent($AçÏêœÃëÜ, $_SERVER[şÅ²é¤èİ][1986], $B³æˆ¡‚İ); } public function eventMove($d…æ–¼¦Ü, $AÇ™÷âÖµ£, $a¢¶Ø¾ÅÛ) { goto aêÄÄëé¤Ÿ; d“ ˆªÕÄ: $this->addEvent($AÇ™÷âÖµ£, $A­âêáó¿[2188], $dƒÏö‡¹¢Ù); goto bÖ¢‹„É…õ; Bö‘Ë®¢‹Á: $this->addEvent($d…æ–¼¦Ü, $A­âêáó¿[482], $dƒÏö‡¹¢Ù); $bíÈ§ç›Î = $Eô¡ìËê×‹->sourceInfo($d…æ–¼¦Ü); $dƒÏö‡¹¢Ù = array($A­âêáó¿[363] => $bíÈ§ç›Î[$A­âêáó¿[363]], $A­âêáó¿[28] => $bíÈ§ç›Î[$A­âêáó¿[28]]); goto d“ ˆªÕÄ; aêÄÄëé¤Ÿ: $A­âêáó¿ =& $_SERVER[şÅ²é¤èİ]; $Eô¡ìËê×‹ = Model($A­âêáó¿[1081]); $bíÈ§ç›Î = $Eô¡ìËê×‹->sourceInfo($d…æ–¼¦Ü); goto F”…†‹õ›; F”…†‹õ›: $CËî»Á› = $Eô¡ìËê×‹->sourceInfo($AÇ™÷âÖµ£); $A–á«„Š¶‚ = $Eô¡ìËê×‹->sourceInfo($a¢¶Ø¾ÅÛ); $dƒÏö‡¹¢Ù = array($A­âêáó¿[984] => $AÇ™÷âÖµ£, $A­âêáó¿[2184] => $CËî»Á›[$A­âêáó¿[28]], $A­âêáó¿[2185] => $CËî»Á›[$A­âêáó¿[459]], $A­âêáó¿[985] => $a¢¶Ø¾ÅÛ, $A­âêáó¿[2186] => $A–á«„Š¶‚[$A­âêáó¿[28]], $A­âêáó¿[2187] => $A–á«„Š¶‚[$A­âêáó¿[459]]); goto Bö‘Ë®¢‹Á; bÖ¢‹„É…õ: } public function eventCopy($E²©ªÕŒŞ«) { $this->eventCreate($E²©ªÕŒŞ«, $_SERVER[şÅ²é¤èİ][480]); } public function eventRename($a´ŒßÕ¿œò, $EÙŠçÕª¨ä, $eˆ†Á™ŠÎ„) { $DÕŠò­ÏîÒ =& $_SERVER[şÅ²é¤èİ]; $bŠÉ›Œ¯„ì = array($DÕŠò­ÏîÒ[984] => $EÙŠçÕª¨ä, $DÕŠò­ÏîÒ[985] => $eˆ†Á™ŠÎ„); return $this->addEvent($a´ŒßÕ¿œò, $DÕŠò­ÏîÒ[1093], $bŠÉ›Œ¯„ì); } public function eventAddComment($dè…¨´©é”, $B¸ÂĞÂ÷À) { return $this->addEvent($dè…¨´©é”, $_SERVER[şÅ²é¤èİ][2189], $B¸ÂĞÂ÷À); } public function eventAddDesc($a‘…éµ£¸º, $fßÖïìø¬) { return $this->addEvent($a‘…éµ£¸º, $_SERVER[şÅ²é¤èİ][2190], $fßÖïìø¬); } public function listBySource($fö‘ ´¯ê) { goto DÑ•½óšˆ; E±¡òøØ¥ì: if ($e®ï­Å˜¥¿[$fƒô…°·[364]] == $fƒô…°·[491]) { $D´µÌ›é¹ = Model($fƒô…°·[1081])->listSearchChildren($fö‘ ´¯ê, 20000); $D´µÌ›é¹[] = $fö‘ ´¯ê; $A’šïéÛ¢ò = array($fƒô…°·[363] => array($fƒô…°·[7], $D´µÌ›é¹)); } $CëøØ”—ÅÅ = $this->where($A’šïéÛ¢ò)->order($fƒô…°·[2191])->selectPage(); if ($CëøØ”—ÅÅ[$fƒô…°·[344]][$fƒô…°·[345]] == 0) { $CëøØ”—ÅÅ[$fƒô…°·[344]][$fƒô…°·[345]] = 1; $CëøØ”—ÅÅ[$fƒô…°·[347]] = array(array($fƒô…°·[377] => $fö‘ ´¯ê, $fƒô…°·[2176] => $e®ï­Å˜¥¿[$fƒô…°·[454]], $fƒô…°·[1336] => $e®ï­Å˜¥¿[$fƒô…°·[372]], $fƒô…°·[382] => $fƒô…°·[2192], $fƒô…°·[383] => $e®ï­Å˜¥¿[$fƒô…°·[183]], $fƒô…°·[1338] => $fƒô…°·[33])); } goto aÃÜÅŠ¼ĞÈ; aÃÜÅŠ¼ĞÈ: $CëøØ”—ÅÅ = $this->eventListParse($CëøØ”—ÅÅ, $fö‘ ´¯ê); show_json($CëøØ”—ÅÅ); goto AºÚ…óÌä¾; DÑ•½óšˆ: $fƒô…°· =& $_SERVER[şÅ²é¤èİ]; $e®ï­Å˜¥¿ = Model($fƒô…°·[1081])->sourceInfo($fö‘ ´¯ê); $A’šïéÛ¢ò = array($fƒô…°·[377] => $fö‘ ´¯ê); goto E±¡òøØ¥ì; AºÚ…óÌä¾: } private function eventListParse($dóáç‹‚”, $e£‰¿óóï) { goto dÊ¢˜Î‘‹Â; dƒ¿áç¬Éâ: $D©‚‹¡ƒøö = Model($Fİ«¸ˆ¡ï±[755])->sourceListInfo($dğß¸ˆÄÏæ, !0); foreach ($C±‘£ß¦† as &$Bµíğ¸­˜‰) { goto CÅƒ¬Ó½†Œ; AÌÔ§å ¾: $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2147]] = $bğçå®ˆ£[$Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[1345]]]; goto AÊœËÊ’‹Š; c‰á³¢Å: $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[385]] = $D©‚‹¡ƒøö[$Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[363]]]; $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2193]] = $D©‚‹¡ƒøö[$Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2182]]]; if ($Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[29]] == $Fİ«¸ˆ¡ï±[1977]) { $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2193]] = $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[385]]; $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2182]] = $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[2193]][$Fİ«¸ˆ¡ï±[363]]; $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[385]] = !1; $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[363]] = $Fİ«¸ˆ¡ï±[33]; } goto AÌÔ§å ¾; CÅƒ¬Ó½†Œ: $bÀçÒ¿“âŞ =& $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[398]]; if ($Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[29]] == $Fİ«¸ˆ¡ï±[482] && isset($bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[984]])) { $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[984]] = $D©‚‹¡ƒøö[$bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[984]]]; $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[985]] = $D©‚‹¡ƒøö[$bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[985]]]; } if ($Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[29]] == $Fİ«¸ˆ¡ï±[2188] && isset($bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[363]])) { $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[363]] = $D©‚‹¡ƒøö[$bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[363]]]; } goto c‰á³¢Å; AÊœËÊ’‹Š: } $dóáç‹‚”[$Fİ«¸ˆ¡ï±[347]] = $C±‘£ß¦†; goto b¶Ãù÷æ®ä; dÎôâ´šç×: $Aö³ÊÇò™¸ = array_to_keyvalue($C±‘£ß¦†, $Fİ«¸ˆ¡ï±[33], $Fİ«¸ˆ¡ï±[2182]); foreach ($C±‘£ß¦† as $Bµíğ¸­˜‰) { $bÀçÒ¿“âŞ = $Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[398]]; if ($Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[29]] == $Fİ«¸ˆ¡ï±[482] && isset($bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[984]])) { $dğß¸ˆÄÏæ[] = $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[984]]; $dğß¸ˆÄÏæ[] = $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[985]]; } if ($Bµíğ¸­˜‰[$Fİ«¸ˆ¡ï±[29]] == $Fİ«¸ˆ¡ï±[2188] && isset($bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[363]])) { $dğß¸ˆÄÏæ[] = $bÀçÒ¿“âŞ[$Fİ«¸ˆ¡ï±[363]]; } } $dğß¸ˆÄÏæ = array_merge($dğß¸ˆÄÏæ, $Aö³ÊÇò™¸, array($e£‰¿óóï)); goto b½õ®™ÖŠª; b½õ®™ÖŠª: $dğß¸ˆÄÏæ = array_unique($dğß¸ˆÄÏæ); $eø·«â–İ„ = array_unique(array_to_keyvalue($C±‘£ß¦†, $Fİ«¸ˆ¡ï±[33], $Fİ«¸ˆ¡ï±[1345])); $bğçå®ˆ£ = Model($Fİ«¸ˆ¡ï±[467])->userListInfo($eø·«â–İ„); goto dƒ¿áç¬Éâ; b¶Ãù÷æ®ä: return $dóáç‹‚”; goto a‹¢âğ›Ñˆ; dÊ¢˜Î‘‹Â: $Fİ«¸ˆ¡ï± =& $_SERVER[şÅ²é¤èİ]; $C±‘£ß¦† = $dóáç‹‚”[$Fİ«¸ˆ¡ï±[347]]; $dğß¸ˆÄÏæ = array_to_keyvalue($C±‘£ß¦†, $Fİ«¸ˆ¡ï±[33], $Fİ«¸ˆ¡ï±[363]); goto dÎôâ´šç×; a‹¢âğ›Ñˆ: } public function removeBySource($BØŞËèé) { $E¨Í˜‚È“ = array($_SERVER[şÅ²é¤èİ][377] => $BØŞËèé); $this->where($E¨Í˜‚È“)->remove(); } } goto Cïß¸ˆœ¶ğ; Dº±íãÔŠ: class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $f‘‰¦œ¡ÍÓ =& $_SERVER[şÅ²é¤èİ]; $a…ƒŞªë– = $GLOBALS[$f‘‰¦œ¡ÍÓ[6]][$f‘‰¦œ¡ÍÓ[331]]; self::$cachePath = $a…ƒŞªë–[$f‘‰¦œ¡ÍÓ[162]][$f‘‰¦œ¡ÍÓ[76]]; @mkdir(self::$cachePath, 511, !0); } public function lock($AñÄ®‡“‘ç, $F÷®Ş—…¦• = 0) { goto Có‰„í¥ÏÙ; Có‰„í¥ÏÙ: $dë…Ë´ÔØ“ =& $_SERVER[şÅ²é¤èİ]; $CØ‹ãÚø¸£ = microtime(!0); $BìÂ‰·©øÍ = $CØ‹ãÚø¸£ + $F÷®Ş—…¦• + 0.0001; goto d›—Áâ•; d›—Áâ•: $eåğšâ©¹ = rtrim(self::$cachePath, $dë…Ë´ÔØ“[8]) . $dë…Ë´ÔØ“[773] . md5($AñÄ®‡“‘ç) . $dë…Ë´ÔØ“[774]; if (file_exists($eåğšâ©¹) && filemtime($eåğšâ©¹) && filemtime($eåğšâ©¹) < time() - 10) { @unlink($eåğšâ©¹); } do { if (file_exists($eåğšâ©¹)) { cacheLockWait(); continue; } $CµÊÍ˜öå˜ = fopen($eåğšâ©¹, $dë…Ë´ÔØ“[775]); if (!$CµÊÍ˜öå˜) { return !1; } $ešñ‰Ì³ = flock($CµÊÍ˜öå˜, LOCK_EX | LOCK_NB); self::$caches[$AñÄ®‡“‘ç] = array($dë…Ë´ÔØ“[776] => $CµÊÍ˜öå˜, $dë…Ë´ÔØ“[162] => $eåğšâ©¹); fwrite($CµÊÍ˜öå˜, $BìÂ‰·©øÍ); clearstatcache(); if ($CµÊÍ˜öå˜ && $ešñ‰Ì³) { return !0; } cacheLockWait(); } while (microtime(!0) < $BìÂ‰·©øÍ); goto CìÔÍÛ¥Æ; CìÔÍÛ¥Æ: $this->unlock($AñÄ®‡“‘ç); return !1; goto AëŠøÔ£ÖÑ; AëŠøÔ£ÖÑ: } public function lockGet($d¦äÒğêç) { $e†ù»´œ÷ˆ =& $_SERVER[şÅ²é¤èİ]; $Cá Ô‚ó…© = rtrim(self::$cachePath, $e†ù»´œ÷ˆ[8]) . $e†ù»´œ÷ˆ[773] . md5($d¦äÒğêç) . $e†ù»´œ÷ˆ[774]; return file_exists($Cá Ô‚ó…©); } public function unlock($cİÚóÀ¿ƒ) { goto bÀ·îÛŠ˜ä; fÕ½Òƒõ—Ø: @flock($açÂ«¯åË¾[$Eí¦İ´ŠÜÈ[776]], LOCK_UN); @fclose($açÂ«¯åË¾[$Eí¦İ´ŠÜÈ[776]]); @unlink($açÂ«¯åË¾[$Eí¦İ´ŠÜÈ[162]]); goto EÂì‰“«Ğƒ; bÀ·îÛŠ˜ä: $Eí¦İ´ŠÜÈ =& $_SERVER[şÅ²é¤èİ]; $açÂ«¯åË¾ = self::$caches[$cİÚóÀ¿ƒ]; if (!$açÂ«¯åË¾) { return; } goto fÕ½Òƒõ—Ø; EÂì‰“«Ğƒ: unset(self::$caches[$cİÚóÀ¿ƒ]); goto dõÈ˜µ»šÓ; dõÈ˜µ»šÓ: } } class CacheLockRedis { public function lock($c¥ğÅôà£Â, $Aç”ÕŒÜ  = 10) { $aÎ±îö×ÚÆ = Cache::init(); $E©î°„Æ´• = microtime(!0) + $Aç”ÕŒÜ ; while (microtime(!0) < $E©î°„Æ´•) { $D·Ë†§¤ğ¸ = $aÎ±îö×ÚÆ->get($c¥ğÅôà£Â); if (!$D·Ë†§¤ğ¸) { $a¤–ğ“¢§† = $aÎ±îö×ÚÆ->setLock($c¥ğÅôà£Â, $E©î°„Æ´•, $Aç”ÕŒÜ ); if ($a¤–ğ“¢§†) { return !0; } } else { if ($D·Ë†§¤ğ¸ < microtime(!0)) { $aÎ±îö×ÚÆ->set($c¥ğÅôà£Â, $E©î°„Æ´•, $E©î°„Æ´•); if ($aÎ±îö×ÚÆ->get($c¥ğÅôà£Â) === $D·Ë†§¤ğ¸) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($aîŞÎò¼ÌÚ) { return Cache::init()->get($aîŞÎò¼ÌÚ); } public function unlock($Dá…‰©”­Ç) { return Cache::init()->remove($Dá…‰©”­Ç); } } class CacheLockMemcached { public function lock($döóâ×˜®, $D·ËóùØã‡ = 0) { $Eºì¼š´‘Ä = Cache::init(); $fŸç¢È© = microtime(!0) + $D·ËóùØã‡; while (microtime(!0) < $fŸç¢È©) { $E¦ì·ˆ÷ÂÍ = $Eºì¼š´‘Ä->get($döóâ×˜®); if (!$E¦ì·ˆ÷ÂÍ || $E¦ì·ˆ÷ÂÍ < microtime(!0)) { $A§¯·ªé± = $Eºì¼š´‘Ä->handle->add($döóâ×˜®, $fŸç¢È©, $D·ËóùØã‡); if ($A§¯·ªé±) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($DİÕ«¿‘õİ) { return Cache::init()->get($DİÕ«¿‘õİ); } public function unlock($dì»‹Ø¤Ó) { return Cache::init()->remove($dì»‹Ø¤Ó); } } goto F‚ù‚¥š¿§; bèİô ‡ïÄ: class AutoTask { public static function start() { goto DœäÖğã´; Fà±åÎ”Ó‚: while (!0) { self::cacheClear(); if (self::valueGet($cÜ±¶»ŠÓò[682]) != $cÜ±¶»ŠÓò[491]) { self::valueSet($cÜ±¶»ŠÓò[1310], $cÜ±¶»ŠÓò[461]); self::log($cÜ±¶»ŠÓò[1314]); die; } self::valueSet($cÜ±¶»ŠÓò[1310], $cÜ±¶»ŠÓò[491]); self::valueSet($cÜ±¶»ŠÓò[1311], time()); self::taskRunAll(); sleep(self::valueGet($cÜ±¶»ŠÓò[1315])); } goto fœ‹˜è·Á; DœäÖğã´: $cÜ±¶»ŠÓò =& $_SERVER[şÅ²é¤èİ]; if (self::valueGet($cÜ±¶»ŠÓò[682]) != $cÜ±¶»ŠÓò[491]) { return; } if (self::valueGet($cÜ±¶»ŠÓò[1310]) == $cÜ±¶»ŠÓò[491]) { $D’§ˆİ• = self::valueGet($cÜ±¶»ŠÓò[1311]); if (time() - $D’§ˆİ• > 3600 * 2) { self::restart(); } return; } goto cğóÂÂî†; cğóÂÂî†: http_close(); self::valueSet($cÜ±¶»ŠÓò[1310], $cÜ±¶»ŠÓò[491]); Hook::bind($cÜ±¶»ŠÓò[1312], $cÜ±¶»ŠÓò[1313]); goto Fà±åÎ”Ó‚; fœ‹˜è·Á: } public static function restart() { $fóÒ‚Õà‘ =& $_SERVER[şÅ²é¤èİ]; http_close(); self::valueSet($fóÒ‚Õà‘[682], $fóÒ‚Õà‘[461]); sleep(self::valueGet($fóÒ‚Õà‘[1315]) + 5); self::valueSet($fóÒ‚Õà‘[1310], $fóÒ‚Õà‘[461]); self::valueSet($fóÒ‚Õà‘[682], $fóÒ‚Õà‘[491]); } public static function shutdownEvent() { $cÖù‘°í‚­ =& $_SERVER[şÅ²é¤èİ]; self::valueSet($cÖù‘°í‚­[1310], $cÖù‘°í‚­[461]); self::log($cÖù‘°í‚­[1316]); } public static function config($e­çóÛ»Ã³, $F‚¾¸Œ×Ú) { $C±Úˆ‰òÅó =& $_SERVER[şÅ²é¤èİ]; $aœ´–›“ÕŸ = 20; $F‚¾¸Œ×Ú = intval($F‚¾¸Œ×Ú) <= $aœ´–›“ÕŸ ? $aœ´–›“ÕŸ : intval($F‚¾¸Œ×Ú); self::valueSet($C±Úˆ‰òÅó[682], $e­çóÛ»Ã³); self::valueSet($C±Úˆ‰òÅó[1315], $F‚¾¸Œ×Ú); } private static function taskRunAll() { $a¤¾Î„ÃÖ =& $_SERVER[şÅ²é¤èİ]; $FËÉºê¤ŒÉ = Model($a¤¾Î„ÃÖ[1317])->listData(); $B©ğ–°ßÃŒ = count($FËÉºê¤ŒÉ); for ($C“Äëášôª = 0; $C“Äëášôª < $B©ğ–°ßÃŒ; $C“Äëášôª++) { $fÇ¯¿ŸÒ™ = $FËÉºê¤ŒÉ[$C“Äëášôª]; if ($fÇ¯¿ŸÒ™[$a¤¾Î„ÃÖ[1318]] != $a¤¾Î„ÃÖ[491]) { continue; } if (!self::taskTimeCheck($fÇ¯¿ŸÒ™)) { continue; } self::taskRun($fÇ¯¿ŸÒ™); } } private static function taskTimeCheck($d¥§±…âÙê) { goto e’•¶í§†ª; b©ÄÉ˜ó†: $céäœÙ…óŠ = strtotime($DŠ¨è‹Üõ™[1319] . $eŒŞÎ¢§È[$DŠ¨è‹Üõ™[1320]] . $DŠ¨è‹Üõ™[1321]) - strtotime($DŠ¨è‹Üõ™[1322]); $C£Øİì‹™ƒ = time() - strtotime(date($DŠ¨è‹Üõ™[1323]) . $DŠ¨è‹Üõ™[1324]); $AŞÒï¿’äÕ = $C£Øİì‹™ƒ >= $céäœÙ…óŠ && $C£Øİì‹™ƒ <= $céäœÙ…óŠ + 3600; goto e­¦òèˆĞÒ; e­¦òèˆĞÒ: switch ($eŒŞÎ¢§È[$DŠ¨è‹Üõ™[29]]) { case $DŠ¨è‹Üõ™[1325]: if (time() - $b¹›Œ‰Ø„ < 3600 * 24 * 30) { return !1; } if ($eŒŞÎ¢§È[$DŠ¨è‹Üõ™[1325]] == date($DŠ¨è‹Üõ™[1326]) && $AŞÒï¿’äÕ) { return !0; } break; case $DŠ¨è‹Üõ™[1327]: if (time() - $b¹›Œ‰Ø„ < 3600 * 24 * 7) { return !1; } $aêç¶›õê© = date($DŠ¨è‹Üõ™[1328]) == 0 ? 7 : date($DŠ¨è‹Üõ™[1328]); if ($eŒŞÎ¢§È[$DŠ¨è‹Üõ™[1327]] == $aêç¶›õê© && $AŞÒï¿’äÕ) { return !0; } break; case $DŠ¨è‹Üõ™[1320]: if (time() - $b¹›Œ‰Ø„ < 3600 * 24) { return !1; } if ($AŞÒï¿’äÕ) { return !0; } break; case $DŠ¨è‹Üõ™[1329]: if (time() - $b¹›Œ‰Ø„ >= floatval($eŒŞÎ¢§È[$DŠ¨è‹Üõ™[1329]]) * 60) { return !0; } break; default: break; } return !1; goto e®‹ºŞ‘„‡; e’•¶í§†ª: $DŠ¨è‹Üõ™ =& $_SERVER[şÅ²é¤èİ]; $eŒŞÎ¢§È = json_decode($d¥§±…âÙê[$DŠ¨è‹Üõ™[186]], !0); $b¹›Œ‰Ø„ = intval($d¥§±…âÙê[$DŠ¨è‹Üõ™[1311]]); goto b©ÄÉ˜ó†; e®‹ºŞ‘„‡: } public static function taskRun($aÉ„¾¦ï‰) { goto Eğ‹Ì—äÊÄ; Eğ‹Ì—äÊÄ: $Dœ²¸ö‚ñì =& $_SERVER[şÅ²é¤èİ]; self::log($Dœ²¸ö‚ñì[1330] . $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[361]] . $Dœ²¸ö‚ñì[1331] . $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[28]] . $Dœ²¸ö‚ñì[1332] . $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[1333]]); Model($Dœ²¸ö‚ñì[1317])->run($aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[361]]); goto aĞ°ÅÚÀ—Ä; aĞ°ÅÚÀ—Ä: $a“ƒİ¹­´ = timeFloat(); $AÏèëèËè¹ = $Dœ²¸ö‚ñì[33]; switch ($aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[29]]) { case $Dœ²¸ö‚ñì[289]: $bÇŒ¾á´Ú = url_request($aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[1333]], $Dœ²¸ö‚ñì[212], !1, !1, !1, !1, 5); $AÏèëèËè¹ = strlen($bÇŒ¾á´Ú); break; case $Dœ²¸ö‚ñì[211]: $AÏèëèËè¹ = Hook::apply($aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[1333]]); default: break; } goto EÔ…‹çÔ„; EÔ…‹çÔ„: Model($Dœ²¸ö‚ñì[1334])->add(array($Dœ²¸ö‚ñì[1335] => $Dœ²¸ö‚ñì[33], $Dœ²¸ö‚ñì[1336] => $Dœ²¸ö‚ñì[461], $Dœ²¸ö‚ñì[29] => $Dœ²¸ö‚ñì[1337] . $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[361]], $Dœ²¸ö‚ñì[1338] => json_encode(array($Dœ²¸ö‚ñì[28] => $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[28]], $Dœ²¸ö‚ñì[1339] => timeFloat() - $a“ƒİ¹­´, $Dœ²¸ö‚ñì[275] => $AÏèëèËè¹)))); self::log($Dœ²¸ö‚ñì[1340] . $aÉ„¾¦ï‰[$Dœ²¸ö‚ñì[361]] . $Dœ²¸ö‚ñì[1341] . $AÏèëèËè¹); return !0; goto fÍñ®«»ĞÄ; fÍñ®«»ĞÄ: } private static function valueGet($bùÍ‘èòî) { $c³ø„Æ‹— =& $_SERVER[şÅ²é¤èİ]; $A®ôÕ”ùÎ = $c³ø„Æ‹—[1342]; $aÍÓñóµë = Model($c³ø„Æ‹—[1343])->get($bùÍ‘èòî, $A®ôÕ”ùÎ); if (is_null($aÍÓñóµë)) { Model($c³ø„Æ‹—[1343])->set($c³ø„Æ‹—[1315], 10, $A®ôÕ”ùÎ); Model($c³ø„Æ‹—[1343])->set($c³ø„Æ‹—[682], $c³ø„Æ‹—[491], $A®ôÕ”ùÎ); Model($c³ø„Æ‹—[1343])->set($c³ø„Æ‹—[1310], $c³ø„Æ‹—[461], $A®ôÕ”ùÎ); $aÍÓñóµë = Model($c³ø„Æ‹—[1343])->get($bùÍ‘èòî, $A®ôÕ”ùÎ); } return $aÍÓñóµë; } private static function valueSet($a”¶À³Ì¼ç, $AËƒ®‡Ö²) { $EÎÑòø ‘ =& $_SERVER[şÅ²é¤èİ]; return Model($EÎÑòø ‘[1343])->set($a”¶À³Ì¼ç, $AËƒ®‡Ö², $EÎÑòø ‘[1342]); } protected static function log($c‰—Üñ¦õê) { write_log($c‰—Üñ¦õê, $_SERVER[şÅ²é¤èİ][1344]); } private static function cacheClear() { $bîä«ÙàÂí =& $_SERVER[şÅ²é¤èİ]; $F¯°‰ó™ì = Model($bîä«ÙàÂí[1343])->cacheKey($bîä«ÙàÂí[1342]); Cache::clearMemory($F¯°‰ó™ì); } } class Task { const STATYS_STOP = "\163\164\157\x70"; const STATYS_RUNNING = "\x72\x75\156\x6e\x69\x6e\147"; const STATYS_KILL = "\153\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($AÁ±°¸‹Š, $D³¿Š´çÃğ = '', $A„’İ É¸ = 0, $aƒ´‘œó÷ = '') { goto f¿˜ÁóÄß; f¿˜ÁóÄß: $cÅ‹ƒ˜¬Ğ =& $_SERVER[şÅ²é¤èİ]; if (self::get($AÁ±°¸‹Š)) { return; } $this->task = array($cÅ‹ƒ˜¬Ğ[361] => $AÁ±°¸‹Š, $cÅ‹ƒ˜¬Ğ[1345] => USER_ID, $cÅ‹ƒ˜¬Ğ[1243] => $aƒ´‘œó÷, $cÅ‹ƒ˜¬Ğ[29] => $D³¿Š´çÃğ, $cÅ‹ƒ˜¬Ğ[1290] => $cÅ‹ƒ˜¬Ğ[33], $cÅ‹ƒ˜¬Ğ[1288] => $A„’İ É¸, $cÅ‹ƒ˜¬Ğ[1293] => 0, $cÅ‹ƒ˜¬Ğ[1346] => 0, $cÅ‹ƒ˜¬Ğ[1347] => 0, $cÅ‹ƒ˜¬Ğ[1348] => timeFloat(), $cÅ‹ƒ˜¬Ğ[1349] => 0, $cÅ‹ƒ˜¬Ğ[1350] => 0, $cÅ‹ƒ˜¬Ğ[1351] => 0, $cÅ‹ƒ˜¬Ğ[1352] => 0, $cÅ‹ƒ˜¬Ğ[682] => $cÅ‹ƒ˜¬Ğ[1310]); goto a® •ê„‘; a® •ê„‘: Hook::bind($cÅ‹ƒ˜¬Ğ[1312], array($this, $cÅ‹ƒ˜¬Ğ[1353])); Hook::bind($cÅ‹ƒ˜¬Ğ[1354], array($this, $cÅ‹ƒ˜¬Ğ[1355])); $this->startAfter(); goto aÄ’İæø¸; aÄ’İæø¸: Hook::trigger($cÅ‹ƒ˜¬Ğ[1356], $this->task); $this->task[$cÅ‹ƒ˜¬Ğ[1350]] = timeFloat(); self::valueSet($this->task[$cÅ‹ƒ˜¬Ğ[361]], $this->task); goto E²¢¥¢«…„; E²¢¥¢«…„: } public function end() { goto FÙÔ¯à‹ó½; FÙÔ¯à‹ó½: $C¡ÛÒˆ¿ï¢ =& $_SERVER[şÅ²é¤èİ]; if (!$this->task) { return; } if ($this->task[$C¡ÛÒˆ¿ï¢[1350]]) { self::valueSet($this->task[$C¡ÛÒˆ¿ï¢[361]], !1); } goto EÔ‰”ƒğÉì; e©‹™»½: Hook::unbind($C¡ÛÒˆ¿ï¢[1354], array($this, $C¡ÛÒˆ¿ï¢[1355])); $this->endAfter(); $this->task = !1; goto dë»î£¯ëÈ; EÔ‰”ƒğÉì: $aøÜ¤ñ“Â® = timeFloat() - $this->task[$C¡ÛÒˆ¿ï¢[1348]]; self::log($C¡ÛÒˆ¿ï¢[1357] . $this->task[$C¡ÛÒˆ¿ï¢[361]] . $C¡ÛÒˆ¿ï¢[1358] . $aøÜ¤ñ“Â® . $C¡ÛÒˆ¿ï¢[1359]); Hook::unbind($C¡ÛÒˆ¿ï¢[1312], array($this, $C¡ÛÒˆ¿ï¢[1353])); goto e©‹™»½; dë»î£¯ëÈ: } public function update($A¬™¥ ŒàÆ = 0) { goto d»†¥©šøº; d»†¥©šøº: $EíÌ†‚Ó° =& $_SERVER[şÅ²é¤èİ]; $cÃ„¯Ğ«  =& $this->task; if (!$cÃ„¯Ğ« ) { return; } goto Dæ¹¦¼ÍÖš; fĞÕ¦ïàæ: $B“æâØ î² = self::get($cÃ„¯Ğ« [$EíÌ†‚Ó°[361]]); $b­êŠê´‡ = $B“æâØ î²[$EíÌ†‚Ó°[682]]; if ($b­êŠê´‡ == self::STATYS_KILL) { $D‘šèã‹ÄŸ = array($EíÌ†‚Ó°[1360] => LNG($EíÌ†‚Ó°[1361]), $EíÌ†‚Ó°[1011] => !1); Cache::set($EíÌ†‚Ó°[1362] . $this->task[$EíÌ†‚Ó°[361]], $D‘šèã‹ÄŸ, 30); $this->end(); die; } else { if ($b­êŠê´‡ == self::STATYS_STOP) { $cªƒˆÇ•ó = 2; $B“æâØ î²[$EíÌ†‚Ó°[1351]] += $cªƒˆÇ•ó; self::valueSet($cÃ„¯Ğ« [$EíÌ†‚Ó°[361]], $B“æâØ î²); sleep($cªƒˆÇ•ó); $this->update(); return; } } goto Dò‘ÏÌâ³ó; b–ÖÈË¦ø§: $this->updateAfter(); $DˆÀäÓÅ†Õ = 0.2; if (timeFloat() - $cÃ„¯Ğ« [$EíÌ†‚Ó°[1350]] < $DˆÀäÓÅ†Õ) { return; } goto fĞÕ¦ïàæ; Dò‘ÏÌâ³ó: $cÃ„¯Ğ« [$EíÌ†‚Ó°[682]] = $b­êŠê´‡ ? $b­êŠê´‡ : $cÃ„¯Ğ« [$EíÌ†‚Ó°[682]]; $cÃ„¯Ğ« [$EíÌ†‚Ó°[1351]] = $B“æâØ î²[$EíÌ†‚Ó°[1351]] ? $B“æâØ î²[$EíÌ†‚Ó°[1351]] : 0; $cÃ„¯Ğ« [$EíÌ†‚Ó°[1350]] = timeFloat(); goto Dç¿±†•öö; Dç¿±†•öö: Hook::trigger($EíÌ†‚Ó°[1363], $cÃ„¯Ğ« ); self::valueSet($cÃ„¯Ğ« [$EíÌ†‚Ó°[361]], $cÃ„¯Ğ« ); goto bÍ¸è¯™è¤; Dæ¹¦¼ÍÖš: $cÃ„¯Ğ« [$EíÌ†‚Ó°[1293]] += $A¬™¥ ŒàÆ; $cÃ„¯Ğ« [$EíÌ†‚Ó°[1349]] = timeFloat(); if ($cÃ„¯Ğ« [$EíÌ†‚Ó°[1288]]) { if ($cÃ„¯Ğ« [$EíÌ†‚Ó°[1288]] < $cÃ„¯Ğ« [$EíÌ†‚Ó°[1293]]) { $cÃ„¯Ğ« [$EíÌ†‚Ó°[1288]] = $cÃ„¯Ğ« [$EíÌ†‚Ó°[1293]]; } $cÌÏÊõÛ™• = timeFloat() - $cÃ„¯Ğ« [$EíÌ†‚Ó°[1348]] - $cÃ„¯Ğ« [$EíÌ†‚Ó°[1351]]; $cÃ„¯Ğ« [$EíÌ†‚Ó°[1346]] = $cÃ„¯Ğ« [$EíÌ†‚Ó°[1293]] / $cÃ„¯Ğ« [$EíÌ†‚Ó°[1288]]; $cÃ„¯Ğ« [$EíÌ†‚Ó°[1347]] = $cÃ„¯Ğ« [$EíÌ†‚Ó°[1293]] / $cÌÏÊõÛ™•; if ($cÃ„¯Ğ« [$EíÌ†‚Ó°[1346]] > 0) { $cÃ„¯Ğ« [$EíÌ†‚Ó°[1352]] = $cÌÏÊõÛ™• * (1 - $cÃ„¯Ğ« [$EíÌ†‚Ó°[1346]]) / $cÃ„¯Ğ« [$EíÌ†‚Ó°[1346]]; } $cÃ„¯Ğ« [$EíÌ†‚Ó°[1352]] = $cÃ„¯Ğ« [$EíÌ†‚Ó°[1352]] <= 0 ? 0 : $cÃ„¯Ğ« [$EíÌ†‚Ó°[1352]]; } goto b–ÖÈË¦ø§; bÍ¸è¯™è¤: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($B¤„¯Â£Å¼) { $DåéÓó½ =& $_SERVER[şÅ²é¤èİ]; Cache::set($DåéÓó½[1362] . $this->task[$DåéÓó½[361]], $B¤„¯Â£Å¼, 60); return $B¤„¯Â£Å¼; } public static function get($Eª×—ìïŒ) { return self::valueGet($Eª×—ìïŒ); } public static function listData() { $F°ğÆ­Ù«£ = self::valueGet(); return array_sort_by($F°ğÆ­Ù«£, $_SERVER[şÅ²é¤èİ][1348], !0); } public static function kill($cÍâÛË‹Œ‡) { return self::changeStatus($cÍâÛË‹Œ‡, self::STATYS_KILL); } public static function stop($cÒ¨ÎŸ´) { return self::changeStatus($cÒ¨ÎŸ´, self::STATYS_STOP); } public static function restart($f¿Å¯÷ËÔĞ) { return self::changeStatus($f¿Å¯÷ËÔĞ, self::STATYS_RUNNING); } public static function killAll() { $D³–™æËŒƒ =& $_SERVER[şÅ²é¤èİ]; $a°¬¦Õ†¡ö = self::listData(); foreach ($a°¬¦Õ†¡ö as $e£Â¹å¡‚ˆ) { self::kill($e£Â¹å¡‚ˆ[$D³–™æËŒƒ[361]]); } sleep(2); foreach ($a°¬¦Õ†¡ö as $e£Â¹å¡‚ˆ) { self::valueSet($e£Â¹å¡‚ˆ[$D³–™æËŒƒ[361]], !1); } } private static function changeStatus($AŠ„Ûµ†§, $C´—â§æ¶Í) { goto d¬”¢ÑŞí¢; FïÅ«˜šà: $bëÕÆÔĞº›[$D¶“Û²±[682]] = $C´—â§æ¶Í; self::valueSet($AŠ„Ûµ†§, $bëÕÆÔĞº›); self::log($D¶“Û²±[1364] . $bëÕÆÔĞº›[$D¶“Û²±[361]] . $D¶“Û²±[1365] . $C´—â§æ¶Í); goto eêÒ¾£“¶ó; d¬”¢ÑŞí¢: $D¶“Û²± =& $_SERVER[şÅ²é¤èİ]; $bëÕÆÔĞº› = self::valueGet($AŠ„Ûµ†§); if (!$bëÕÆÔĞº›) { return !1; } goto FïÅ«˜šà; eêÒ¾£“¶ó: return !0; goto dÀˆøİ„×è; dÀˆøİ„×è: } public static function valueGet($c°¿À¼¾¦ = false) { $eÚ–éèŒ‰ø =& $_SERVER[şÅ²é¤èİ]; self::log($eÚ–éèŒ‰ø[1366] . $c°¿À¼¾¦ . $eÚ–éèŒ‰ø[68] . get_caller_msg()); if ($c°¿À¼¾¦) { $d»çĞ¶¦ = Model($eÚ–éèŒ‰ø[392])->where(array($eÚ–éèŒ‰ø[88] => $c°¿À¼¾¦, $eÚ–éèŒ‰ø[29] => $eÚ–éèŒ‰ø[1367]))->find(); return $d»çĞ¶¦ ? json_decode($d»çĞ¶¦[$eÚ–éèŒ‰ø[351]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($d÷ö§ç™éÆ = false) { goto a¬¿Ë©Îİá; c¨ø™¿ˆ‰ê: $bÆÛ¢¬¯Œ‹ = Model($F¦Ê“‘Ë[392])->where($d±Åñ“´Û‚)->select(); $bÆÛ¢¬¯Œ‹ = $bÆÛ¢¬¯Œ‹ ? $bÆÛ¢¬¯Œ‹ : array(); foreach ($bÆÛ¢¬¯Œ‹ as $a‹«‹ìÑ°Ñ => $BÉæñŞÌÀŞ) { $bÆÛ¢¬¯Œ‹[$a‹«‹ìÑ°Ñ] = json_decode($BÉæñŞÌÀŞ[$F¦Ê“‘Ë[351]], !0); } goto cŠ‰¤‘›¼; cŠ‰¤‘›¼: return $bÆÛ¢¬¯Œ‹; goto dóÒš±è®â; a¬¿Ë©Îİá: $F¦Ê“‘Ë =& $_SERVER[şÅ²é¤èİ]; $d±Åñ“´Û‚ = array($F¦Ê“‘Ë[29] => $F¦Ê“‘Ë[1367]); if ($d÷ö§ç™éÆ) { $d±Åñ“´Û‚[$F¦Ê“‘Ë[1345]] = $d÷ö§ç™éÆ; } goto c¨ø™¿ˆ‰ê; dóÒš±è®â: } public static function valueSet($Bğˆë……ğ, $b˜•÷ƒå×) { goto c´µÉéÇÉ ; c´µÉéÇÉ : $d»¿œ°êÔÈ =& $_SERVER[şÅ²é¤èİ]; if (!$b˜•÷ƒå×) { return Model($d»¿œ°êÔÈ[392])->where(array($d»¿œ°êÔÈ[88] => $Bğˆë……ğ, $d»¿œ°êÔÈ[29] => $d»¿œ°êÔÈ[1367]))->delete(); } $dæ÷íùÂ’¸ = json_encode($b˜•÷ƒå×); goto a¼ÊÊ«ÉŞ; a¼ÊÊ«ÉŞ: if (!$dæ÷íùÂ’¸) { ob_start(); var_dump($b˜•÷ƒå×); $eŞù•à˜Í = ob_get_clean(); self::log($d»¿œ°êÔÈ[1368] . json_encode_force($eŞù•à˜Í)); } if (!$Bğˆë……ğ || !$b˜•÷ƒå×[$d»¿œ°êÔÈ[361]]) { return !1; } $B¿©Ä¾«ª = array($d»¿œ°êÔÈ[29] => $d»¿œ°êÔÈ[1367], $d»¿œ°êÔÈ[1345] => USER_ID, $d»¿œ°êÔÈ[88] => $Bğˆë……ğ, $d»¿œ°êÔÈ[351] => $dæ÷íùÂ’¸); goto f×¥æ«ŞÚ†; f×¥æ«ŞÚ†: Model($d»¿œ°êÔÈ[392])->add($B¿©Ä¾«ª, array(), !0); goto B…±Íš¬ÀÃ; B…±Íš¬ÀÃ: } public static function log($aĞÆ‡ŒìŞî) { write_log($aĞÆ‡ŒìŞî, $_SERVER[şÅ²é¤èİ][1369]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto d»¤êµÛõØ; Aª„¾Ó²: $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1290]] = $F”ÅÅâ éá[33]; $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1393]] = $F”ÅÅâ éá[33]; $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1394]] = 0; goto f»Ï–åçö¿; f©Õ»ó®Ëà: Hook::bind($F”ÅÅâ éá[1370], array($this, $F”ÅÅâ éá[1371])); Hook::bind($F”ÅÅâ éá[1372], array($this, $F”ÅÅâ éá[1373])); Hook::bind($F”ÅÅâ éá[1374], array($this, $F”ÅÅâ éá[1375])); goto C³°„ÑÔ½•; EæÈ‹¢‚õÉ: Hook::bind($F”ÅÅâ éá[502], array($this, $F”ÅÅâ éá[1379])); Hook::bind($F”ÅÅâ éá[504], array($this, $F”ÅÅâ éá[1379])); Hook::bind($F”ÅÅâ éá[506], array($this, $F”ÅÅâ éá[1379])); goto Dñä¨îÔÎ­; C¬™¶–¿ÕŒ: Hook::bind($F”ÅÅâ éá[1383], array($this, $F”ÅÅâ éá[1384])); Hook::bind($F”ÅÅâ éá[1385], array($this, $F”ÅÅâ éá[1386])); Hook::bind($F”ÅÅâ éá[1387], array($this, $F”ÅÅâ éá[1388])); goto EÏ¿‚—§éº; C³°„ÑÔ½•: Hook::bind($F”ÅÅâ éá[529], array($this, $F”ÅÅâ éá[1376])); Hook::bind($F”ÅÅâ éá[530], array($this, $F”ÅÅâ éá[1377])); Hook::bind($F”ÅÅâ éá[532], array($this, $F”ÅÅâ éá[1378])); goto fÃÂÖ¡‘´; f»Ï–åçö¿: if (!$bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1243]]) { $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1243]] = LNG($F”ÅÅâ éá[1395]); } goto cØìãÏ±ø; EÏ¿‚—§éº: $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1389]] = LNG($F”ÅÅâ éá[1390]); $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1391]] = 0; $bªÀ—ÀÇƒƒ[$F”ÅÅâ éá[1392]] = 0; goto Aª„¾Ó²; Dñä¨îÔÎ­: Hook::bind($F”ÅÅâ éá[1380], array($this, $F”ÅÅâ éá[1381])); Hook::bind($F”ÅÅâ éá[522], array($this, $F”ÅÅâ éá[1382])); $this->sourceModelCopyFlag = !1; goto C¬™¶–¿ÕŒ; d»¤êµÛõØ: $F”ÅÅâ éá =& $_SERVER[şÅ²é¤èİ]; $bªÀ—ÀÇƒƒ =& $this->task; $this->sourceCopyFolder = !1; goto f©Õ»ó®Ëà; fÃÂÖ¡‘´: Hook::bind($F”ÅÅâ éá[533], array($this, $F”ÅÅâ éá[1378])); Hook::bind($F”ÅÅâ éá[500], array($this, $F”ÅÅâ éá[1379])); Hook::bind($F”ÅÅâ éá[497], array($this, $F”ÅÅâ éá[1379])); goto EæÈ‹¢‚õÉ; cØìãÏ±ø: } protected function endAfter() { goto C²ŠéÔ†›Ç; Dİ›ë¾ÖÂ“: Hook::unbind($f›óñ…”öñ[497], array($this, $f›óñ…”öñ[1379])); Hook::unbind($f›óñ…”öñ[502], array($this, $f›óñ…”öñ[1379])); Hook::unbind($f›óñ…”öñ[504], array($this, $f›óñ…”öñ[1379])); goto eƒìÑ£Ÿß; a†²ãİ’´³: Hook::unbind($f›óñ…”öñ[1374], array($this, $f›óñ…”öñ[1375])); Hook::unbind($f›óñ…”öñ[529], array($this, $f›óñ…”öñ[1376])); Hook::unbind($f›óñ…”öñ[530], array($this, $f›óñ…”öñ[1377])); goto AÜÊÓ‡áãá; eƒìÑ£Ÿß: Hook::unbind($f›óñ…”öñ[506], array($this, $f›óñ…”öñ[1379])); Hook::unbind($f›óñ…”öñ[1380], array($this, $f›óñ…”öñ[1381])); Hook::unbind($f›óñ…”öñ[522], array($this, $f›óñ…”öñ[1382])); goto cğÚ©§Ø“; cğÚ©§Ø“: Hook::unbind($f›óñ…”öñ[1383], array($this, $f›óñ…”öñ[1384])); Hook::unbind($f›óñ…”öñ[1385], array($this, $f›óñ…”öñ[1386])); Hook::unbind($f›óñ…”öñ[1387], array($this, $f›óñ…”öñ[1388])); goto f¡¸ôÉÚİ™; C²ŠéÔ†›Ç: $f›óñ…”öñ =& $_SERVER[şÅ²é¤èİ]; Hook::unbind($f›óñ…”öñ[1370], array($this, $f›óñ…”öñ[1371])); Hook::unbind($f›óñ…”öñ[1372], array($this, $f›óñ…”öñ[1373])); goto a†²ãİ’´³; AÜÊÓ‡áãá: Hook::unbind($f›óñ…”öñ[532], array($this, $f›óñ…”öñ[1378])); Hook::unbind($f›óñ…”öñ[533], array($this, $f›óñ…”öñ[1378])); Hook::unbind($f›óñ…”öñ[500], array($this, $f›óñ…”öñ[1379])); goto Dİ›ë¾ÖÂ“; f¡¸ôÉÚİ™: } public function copyMoveStart($cÒ½ŸË¸¢, $A¨³½¨šô, $bŞà¶¾·ö, $FÛô°¦ö­Ë) { } public function updateAfter() { goto fÂ£Àèƒ˜Â; DäĞñ³œÑ: if ($this->sourceModelCopyFlag) { return; } $fÇÃó¤Ú»‹ = 0; if ($D‹Ì†Ù‚èé[$CËÖ§àæ„[1393]] == $CËÖ§àæ„[1019]) { $fÇÃó¤Ú»‹ = $D‹Ì†Ù‚èé[$CËÖ§àæ„[1392]] * 0.5; } else { if ($D‹Ì†Ù‚èé[$CËÖ§àæ„[1393]] == $CËÖ§àæ„[90]) { $fÇÃó¤Ú»‹ = $D‹Ì†Ù‚èé[$CËÖ§àæ„[1392]] * 0.5 + $D‹Ì†Ù‚èé[$CËÖ§àæ„[1391]] * 0.5; } } goto EÛš«¡Î£; fÂ£Àèƒ˜Â: $CËÖ§àæ„ =& $_SERVER[şÅ²é¤èİ]; $D‹Ì†Ù‚èé =& $this->task; if (!$D‹Ì†Ù‚èé[$CËÖ§àæ„[691]]) { return; } goto DäĞñ³œÑ; EÛš«¡Î£: $D‹Ì†Ù‚èé[$CËÖ§àæ„[1346]] = ($D‹Ì†Ù‚èé[$CËÖ§àæ„[1396]] + $fÇÃó¤Ú»‹) / $D‹Ì†Ù‚èé[$CËÖ§àæ„[691]]; if ($D‹Ì†Ù‚èé[$CËÖ§àæ„[1346]] > 0) { $FóºªŠ˜ª = timeFloat() - $D‹Ì†Ù‚èé[$CËÖ§àæ„[1348]] - $D‹Ì†Ù‚èé[$CËÖ§àæ„[1351]]; $D‹Ì†Ù‚èé[$CËÖ§àæ„[1352]] = $FóºªŠ˜ª * (1 - $D‹Ì†Ù‚èé[$CËÖ§àæ„[1346]]) / $D‹Ì†Ù‚èé[$CËÖ§àæ„[1346]]; } goto aÒÆÁ¹â‘‡; aÒÆÁ¹â‘‡: } public function addPath($fÒˆ³„ˆÂè) { goto dÒ¾‘ô®î; aÖ©©ç²ñ›: $FÔæ…ïíµò[$bÀÑÅÚİ”[691]] += $D²¹÷À’£—[$bÀÑÅÚİ”[78]]; $this->update(); goto F´‹ˆˆÏ‚Ü; dÒ¾‘ô®î: $bÀÑÅÚİ” =& $_SERVER[şÅ²é¤èİ]; $FÔæ…ïíµò =& $this->task; $D²¹÷À’£— = IO::infoWithChildren($fÒˆ³„ˆÂè); goto b¥ŠŠôÖçÃ; b¥ŠŠôÖçÃ: $F™õÓñ¦—· = $FÔæ…ïíµò[$bÀÑÅÚİ”[1397]] ? $FÔæ…ïíµò[$bÀÑÅÚİ”[1397]][$bÀÑÅÚİ”[1398]] : 0; $FÔæ…ïíµò[$bÀÑÅÚİ”[1397]] = array($bÀÑÅÚİ”[1398] => $F™õÓñ¦—· + 1, $bÀÑÅÚİ”[380] => $D²¹÷À’£—[$bÀÑÅÚİ”[28]], $bÀÑÅÚİ”[76] => $D²¹÷À’£—[$bÀÑÅÚİ”[76]], $bÀÑÅÚİ”[459] => $D²¹÷À’£—[$bÀÑÅÚİ”[459]] ? $D²¹÷À’£—[$bÀÑÅÚİ”[459]] : $D²¹÷À’£—[$bÀÑÅÚİ”[76]]); if ($D²¹÷À’£—[$bÀÑÅÚİ”[29]] == $bÀÑÅÚİ”[162]) { $FÔæ…ïíµò[$bÀÑÅÚİ”[1288]] += 1; } else { $FÔæ…ïíµò[$bÀÑÅÚİ”[1288]] += $D²¹÷À’£—[$bÀÑÅÚİ”[81]][$bÀÑÅÚİ”[79]]; if ($D²¹÷À’£—[$bÀÑÅÚİ”[363]]) { $FÔæ…ïíµò[$bÀÑÅÚİ”[1288]] += $D²¹÷À’£—[$bÀÑÅÚİ”[81]][$bÀÑÅÚİ”[80]] + 1; } } goto aÖ©©ç²ñ›; F´‹ˆˆÏ‚Ü: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($aáƒÀò“¦) { $F·«âÃ†½Ì =& $_SERVER[şÅ²é¤èİ]; $aÅÔÙ‘¡’¶ =& $this->task; $aÅÔÙ‘¡’¶[$F·«âÃ†½Ì[1389]] = $aáƒÀò“¦[$F·«âÃ†½Ì[28]]; $aÅÔÙ‘¡’¶[$F·«âÃ†½Ì[1290]] = $aáƒÀò“¦[$F·«âÃ†½Ì[28]]; $this->update(); } public function copyFileStart($fÜ‘ÍºòŒ, $F·ÅÔò•Ùğ, $Fõ®ƒõ®Ğ, $DÓš­øóÂ, $f²ËŞøòœ¹, $a ¯Ô†‹…) { goto då°ÈÌóë°; c›ïÔÕíË†: $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1290]] = $c½Ïò‘òÉí[33]; $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1393]] = $c½Ïò‘òÉí[33]; $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1394]] = 0; goto Fƒ£ˆ±Æğë; Fƒ£ˆ±Æğë: $this->update(); goto c¥õ•œ‘Äé; Bª¢ÎÈõ™Š: $GLOBALS[$c½Ïò‘òÉí[1400]] = $f²ËŞøòœ¹; $GLOBALS[$c½Ïò‘òÉí[1399]] = $a ¯Ô†‹…; $Dï”×ÕƒäÕ =& $this->task; goto fµÖÔ¯øìÜ; fµÖÔ¯øìÜ: $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1389]] = $c­ô¿ÖÁÆØ; $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1391]] = (int) $fÜ‘ÍºòŒ->size($F·ÅÔò•Ùğ); $Dï”×ÕƒäÕ[$c½Ïò‘òÉí[1392]] = 0; goto c›ïÔÕíË†; då°ÈÌóë°: $c½Ïò‘òÉí =& $_SERVER[şÅ²é¤èİ]; $c­ô¿ÖÁÆØ = $f²ËŞøòœ¹; if ($c­ô¿ÖÁÆØ == $GLOBALS[$c½Ïò‘òÉí[1399]]) { $c­ô¿ÖÁÆØ = $GLOBALS[$c½Ïò‘òÉí[1400]]; } goto Bª¢ÎÈõ™Š; c¥õ•œ‘Äé: } public function copyFileEnd($e…¥Ş²øÔ, $f‰×äî¿Œ˜, $c†ç©Ê§”Û, $EùÁÖ…„¾, $dÍ†¢ ±¾, $bÏŸõ½”ä¼) { $B§•Åë®È =& $_SERVER[şÅ²é¤èİ]; $e‡¦ù–˜ˆó =& $this->task; $e‡¦ù–˜ˆó[$B§•Åë®È[1392]] = $e‡¦ù–˜ˆó[$B§•Åë®È[1391]]; $e‡¦ù–˜ˆó[$B§•Åë®È[1393]] = $B§•Åë®È[33]; if ($dÍ†¢ ±¾ == $e‡¦ù–˜ˆó[$B§•Åë®È[1389]]) { $e‡¦ù–˜ˆó[$B§•Åë®È[1396]] += $e‡¦ù–˜ˆó[$B§•Åë®È[1391]]; $this->update(1); } else { $this->update(); $e‡¦ù–˜ˆó[$B§•Åë®È[1392]] = 0; } self::log($B§•Åë®È[1401] . $f‰×äî¿Œ˜ . $B§•Åë®È[67] . $EùÁÖ…„¾ . $B§•Åë®È[213] . $dÍ†¢ ±¾ . $B§•Åë®È[1402] . $e‡¦ù–˜ˆó[$B§•Åë®È[1389]]); } public function updateFileEnd($a¢ŒëÜ¼´, $açÇ‹†šÅÔ) { $fõé½Öñ¡ò =& $_SERVER[şÅ²é¤èİ]; $CÜ«è›öŒ« =& $this->task; $CÜ«è›öŒ«[$fõé½Öñ¡ò[1389]] = $a¢ŒëÜ¼´; $CÜ«è›öŒ«[$fõé½Öñ¡ò[1391]] = $açÇ‹†šÅÔ; $CÜ«è›öŒ«[$fõé½Öñ¡ò[1396]] += $açÇ‹†šÅÔ; $this->update(1); } public function sourceModelCopy($f‹œÂÈ¥õ) { goto f…µ„„ªöİ; Få¸ê©äøÀ: switch ($DĞÃŒå¯ƒ‘) { case $Fšƒ´Å˜ğ[498]: $eÚ°¾Ê„ñ = 1; break; case $Fšƒ´Å˜ğ[501]: $eÑ»ìùÇÕ[$Fšƒ´Å˜ğ[1389]] = $FòÌ×Òµ®[$Fšƒ´Å˜ğ[28]]; break; case $Fšƒ´Å˜ğ[503]: $eÚ°¾Ê„ñ = intval($f‹œÂÈ¥õ[$Fšƒ´Å˜ğ[357]] * 0.4); break; case $Fšƒ´Å˜ğ[505]: $eÚ°¾Ê„ñ = intval($f‹œÂÈ¥õ[$Fšƒ´Å˜ğ[357]] * 0.2); break; case $Fšƒ´Å˜ğ[507]: $eÚ°¾Ê„ñ = intval($f‹œÂÈ¥õ[$Fšƒ´Å˜ğ[357]] * 0.4); break; } $this->update($eÚ°¾Ê„ñ); $this->sourceModelCopyFlag = !1; goto bã­ÊÒ·”î; f…µ„„ªöİ: $Fšƒ´Å˜ğ =& $_SERVER[şÅ²é¤èİ]; $DĞÃŒå¯ƒ‘ = $f‹œÂÈ¥õ[0]; $FòÌ×Òµ® = $f‹œÂÈ¥õ[1]; goto fí¾ŞõÅÍ‘; fí¾ŞõÅÍ‘: $eÑ»ìùÇÕ =& $this->task; $this->sourceModelCopyFlag = !0; $eÚ°¾Ê„ñ = 0; goto Få¸ê©äøÀ; bã­ÊÒ·”î: } public function sourceRemove($d„õ¶Î, $e êæŒÀ‡§) { $c±‘Ø¨ÂØ¿ =& $_SERVER[şÅ²é¤èİ]; $this->sourceModelCopyFlag = !0; $DÙƒ––„âó = 1; if (isset($d„õ¶Î[$c±‘Ø¨ÂØ¿[81]])) { $DÙƒ––„âó = $d„õ¶Î[$c±‘Ø¨ÂØ¿[81]][$c±‘Ø¨ÂØ¿[79]] + $d„õ¶Î[$c±‘Ø¨ÂØ¿[81]][$c±‘Ø¨ÂØ¿[80]] + 1; } $this->update($DÙƒ––„âó); $this->sourceModelCopyFlag = !1; } public function sourceMove($CÁÅË‚£ìï) { $this->sourceRemove($CÁÅË‚£ìï, !1); } public function curlProgress($FÇ‘¥Òº‘ë, $aÃæ™­Ğˆó, $DÅö–ÈÄğ‡, $a†Øã‘Ší¶, $bÔğ”ˆ§) { $AëäÌßãˆí =& $_SERVER[şÅ²é¤èİ]; $aãµˆ¾ø»Ï =& $this->task; if ($bÔğ”ˆ§ > 0) { $aãµˆ¾ø»Ï[$AëäÌßãˆí[1290]] = $AëäÌßãˆí[1403]; $aãµˆ¾ø»Ï[$AëäÌßãˆí[1393]] = $AëäÌßãˆí[90]; if ($aãµˆ¾ø»Ï[$AëäÌßãˆí[1391]] == $a†Øã‘Ší¶ || $a†Øã‘Ší¶ > 1024 * 1024) { $aãµˆ¾ø»Ï[$AëäÌßãˆí[1392]] = $bÔğ”ˆ§; } if ($aãµˆ¾ø»Ï[$AëäÌßãˆí[1394]]) { $aãµˆ¾ø»Ï[$AëäÌßãˆí[1392]] = $bÔğ”ˆ§ + $aãµˆ¾ø»Ï[$AëäÌßãˆí[1394]]; } } else { if ($DÅö–ÈÄğ‡ > 0) { if ($aãµˆ¾ø»Ï[$AëäÌßãˆí[1391]] == $aÃæ™­Ğˆó) { $aãµˆ¾ø»Ï[$AëäÌßãˆí[1392]] = $DÅö–ÈÄğ‡; $aãµˆ¾ø»Ï[$AëäÌßãˆí[1290]] = $AëäÌßãˆí[1404]; $aãµˆ¾ø»Ï[$AëäÌßãˆí[1393]] = $AëäÌßãˆí[1019]; } } } $this->update(); } public function curlProgressStart($eãõìïƒí—) { } public function curlProgressEnd($fÛ£ºçîø¡) { $B©ÓÍ¥Îõ =& $_SERVER[şÅ²é¤èİ]; $Bù—‘ÄÑš“ =& $this->task; $dÙÀ×ÚóÙŒ = curl_getinfo($fÛ£ºçîø¡); $aÚïŸÚŒ•¼ = $dÙÀ×ÚóÙŒ[$B©ÓÍ¥Îõ[1405]]; if ($Bù—‘ÄÑš“[$B©ÓÍ¥Îõ[1393]] == $B©ÓÍ¥Îõ[90] && $aÚïŸÚŒ•¼) { $Bù—‘ÄÑš“[$B©ÓÍ¥Îõ[1394]] += $aÚïŸÚŒ•¼; } $this->update(); } } goto AàÃæ‚«; bâ’•Åƒé: class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\x73\x65\x72\137\157\x70\x74\151\157\x6e"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($Bñõ«¡¨²) { return "\x55\x73\145\162\117\160\x74\x69\157\x6e\137{$Bñõ«¡¨²}\137" . USER_ID; } protected function filterWhere($Dµç…Üô„) { $Dµç…Üô„[$_SERVER[şÅ²é¤èİ][1345]] = USER_ID; return $Dµç…Üô„; } public function cacheRemoveUser($d“ø¡—èˆë, $f Äµâ¤×°) { return Cache::remove("\x55\x73\x65\162\x4f\x70\x74\151\x6f\156\x5f{$d“ø¡—èˆë}\137" . $f Äµâ¤×°); } public function get($d°·«„öšÛ = false, $CÚêó•› = '', $F…ÓŠÅŸé = false) { goto eŠ¼¢¯‘¬; fÄŸ¦œò: global $config; $DâÍßÆƒ–ã = array($f¹¹Ãëˆ¼ä[33] => $f¹¹Ãëˆ¼ä[2416], $f¹¹Ãëˆ¼ä[2417] => $f¹¹Ãëˆ¼ä[2418]); $F¹õÁ’Ù´• = $config[$DâÍßÆƒ–ã[$CÚêó•›]]; goto A”Šêñøß—; A”Šêñøß—: if (!$d°·«„öšÛ) { return $F¹õÁ’Ù´•; } else { return $F¹õÁ’Ù´•[$d°·«„öšÛ]; } goto b¿¨Œ¦Û…ö; eŠ¼¢¯‘¬: $f¹¹Ãëˆ¼ä =& $_SERVER[şÅ²é¤èİ]; $FßÜÕÔ’İÜ = parent::get($d°·«„öšÛ, $CÚêó•›, $F…ÓŠÅŸé); if (!is_null($FßÜÕÔ’İÜ)) { return $FßÜÕÔ’İÜ; } goto fÄŸ¦œò; b¿¨Œ¦Û…ö: } } class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\x72\x2e\164\x61\147\114\151\163\x74"; public $modelType = "\125\x73\145\x72\x4f\160\x74\x69\157\156"; public $field = array("\x6e\141\x6d\145", "\x73\x74\x79\154\x65", "\163\157\162\164"); public function listData($dâÙÜÖ³ƒ‡ = false, $C´¡‰Ôô–µ = "\x73\x6f\x72\164", $cÖæ¬Æ×ªÁ = false) { return parent::listData($dâÙÜÖ³ƒ‡, $C´¡‰Ôô–µ, $cÖæ¬Æ×ªÁ); } public function remove($eåğ™ğãš) { return parent::remove($eåğ™ğãš); } public function add($D¡Œôµâ¿ù, $DöÕçãÒîÛ = "\x6c\141\x62\145\154\x2d\x67\162\x65\171\55\x6e\x6f\x72\155\141\154") { $BÖïù¡ÓŒ =& $_SERVER[şÅ²é¤èİ]; if ($this->findByName($D¡Œôµâ¿ù)) { return !1; } $AÉš”¬„¾­ = array($BÖïù¡ÓŒ[380] => $D¡Œôµâ¿ù, $BÖïù¡ÓŒ[430] => $DöÕçãÒîÛ, $BÖïù¡ÓŒ[2013] => $this->getSort($BÖïù¡ÓŒ[240]) + 1); return parent::insert($AÉš”¬„¾­); } public function update($cÂÊ´››à, $dÉ–øŞßä‹) { $cÅ‰‘ãµ‡™ =& $_SERVER[şÅ²é¤èİ]; $C²¢¾³ç = $this->listData($cÂÊ´››à); $BĞˆ›“–ƒÊ = $this->findByName($dÉ–øŞßä‹[$cÅ‰‘ãµ‡™[28]]); if (!$C²¢¾³ç || $BĞˆ›“–ƒÊ && $BĞˆ›“–ƒÊ[$cÅ‰‘ãµ‡™[361]] != $C²¢¾³ç[$cÅ‰‘ãµ‡™[361]]) { return !1; } return parent::update($cÂÊ´››à, $dÉ–øŞßä‹); } public function moveTop($f§²¥æ†“š) { $cç¨¿‡¸ƒ“ =& $_SERVER[şÅ²é¤èİ]; $CÊ×äÀ¯¬ = parent::listData(); $cÙæˆ§…— = $this->getSort($cç¨¿‡¸ƒ“[239]); foreach ($CÊ×äÀ¯¬ as &$e±êæ­ù¾) { if ($e±êæ­ù¾[$cç¨¿‡¸ƒ“[361]] == $f§²¥æ†“š) { $e±êæ­ù¾[$cç¨¿‡¸ƒ“[2030]] = $cÙæˆ§…—; continue; } $e±êæ­ù¾[$cç¨¿‡¸ƒ“[2030]] += 1; } return parent::resetData($CÊ×äÀ¯¬); } public function moveBottom($c‹÷àˆ›³) { $f¥¤º¬é˜¢ =& $_SERVER[şÅ²é¤èİ]; $a¶õÀÙä•™ = $this->getSort($f¥¤º¬é˜¢[240]) + 1; return parent::update($c‹÷àˆ›³, array($f¥¤º¬é˜¢[2030] => $a¶õÀÙä•™)); } public function resetSort($Eİøæ»“Å) { $d³¤¸·µ‚æ =& $_SERVER[şÅ²é¤èİ]; $b»áùßÏ‘Ÿ = array(); for ($D½‰°„«Ü = 0; $D½‰°„«Ü < count($Eİøæ»“Å); $D½‰°„«Ü++) { $b»áùßÏ‘Ÿ[$Eİøæ»“Å[$D½‰°„«Ü] . $d³¤¸·µ‚æ[33]] = $D½‰°„«Ü + 1; } $E¡¡§°Œ‡Í = parent::listData(); foreach ($E¡¡§°Œ‡Í as &$BÌ‡¨á¯º) { $DŒ§¢ÏÉ‹± = $b»áùßÏ‘Ÿ[$BÌ‡¨á¯º[$d³¤¸·µ‚æ[361]]]; $BÌ‡¨á¯º[$d³¤¸·µ‚æ[2030]] = $DŒ§¢ÏÉ‹± ? $DŒ§¢ÏÉ‹± : $BÌ‡¨á¯º[$d³¤¸·µ‚æ[2030]]; } return parent::resetData($E¡¡§°Œ‡Í); } private function getSort($b«”À®´ÄĞ) { $e²ïƒÕœ¹ =& $_SERVER[şÅ²é¤èİ]; $aƒŒ Ò é• = parent::listData(); $Fš™¤Š‘¦ = array_to_keyvalue($aƒŒ Ò é•, $e²ïƒÕœ¹[33], $e²ïƒÕœ¹[2030]); if (!$Fš™¤Š‘¦) { $Fš™¤Š‘¦ = array(0); } $E«§Å„—‡ë = $b«”À®´ÄĞ == $e²ïƒÕœ¹[240] ? max($Fš™¤Š‘¦) : min($Fš™¤Š‘¦); return intval($E«§Å„—‡ë); } } goto d«º§¿á‚; CÇöÆÌŸÇ¬: class SystemRecordModel extends ModelBaseLight { } class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\171\x73\x74\145\x6d\x2e\x72\x6f\x6c\x65\114\x69\x73\x74"; public $field = array("\x6e\141\155\x65", "\x61\165\164\150", "\x6c\x61\x62\x65\x6c", "\144\151\163\160\154\x61\x79", "\x73\x79\163\x74\x65\155", "\x64\145\x73\143", "\151\x67\156\x6f\x72\145\x45\x78\164", "\x69\147\x6e\x6f\162\145\106\x69\154\145\123\x69\x7a\145", "\141\144\155\x69\156\151\163\x74\162\141\x74\x6f\162", "\x73\157\162\x74"); public function listData($aºÚÃ—¸… = false, $d®×î­…çˆ = "\163\x6f\x72\x74", $DÄ¨æÍ‰¢í = false) { return parent::listData($aºÚÃ—¸…, $d®×î­…çˆ, $DÄ¨æÍ‰¢í); } public function update($E×Š±­ÉÉ÷, $DºÙ›¯¢ƒé) { goto Aêá•İ ˆ¡; Aêá•İ ˆ¡: $CÃˆÚÈÍåÉ =& $_SERVER[şÅ²é¤èİ]; $B÷çâëÂ› = parent::listData($E×Š±­ÉÉ÷); $AÑĞ»Ô¨£ø = $this->findByName($DºÙ›¯¢ƒé[$CÃˆÚÈÍåÉ[28]]); goto B¯Åó¬ãª; B¯Åó¬ãª: if (!$B÷çâëÂ› || $AÑĞ»Ô¨£ø && $AÑĞ»Ô¨£ø[$CÃˆÚÈÍåÉ[361]] != $B÷çâëÂ›[$CÃˆÚÈÍåÉ[361]]) { return !1; } if ($AÑĞ»Ô¨£ø[$CÃˆÚÈÍåÉ[2356]] == 1) { $DºÙ›¯¢ƒé = array($CÃˆÚÈÍåÉ[28] => $DºÙ›¯¢ƒé[$CÃˆÚÈÍåÉ[28]], $CÃˆÚÈÍåÉ[2027] => $DºÙ›¯¢ƒé[$CÃˆÚÈÍåÉ[2027]]); } $this->filterAuth($DºÙ›¯¢ƒé[$CÃˆÚÈÍåÉ[370]]); goto aƒÆÀ‰ƒ‡ó; aƒÆÀ‰ƒ‡ó: return parent::update($E×Š±­ÉÉ÷, $DºÙ›¯¢ƒé); goto då‚ÁÊ…öù; då‚ÁÊ…öù: } public function remove($B‡Ö·ÃÍËğ) { $Bƒ÷ŞŠ‡Ö… = parent::listData($B‡Ö·ÃÍËğ); if (!$Bƒ÷ŞŠ‡Ö… || $Bƒ÷ŞŠ‡Ö…[$_SERVER[şÅ²é¤èİ][1053]]) { return !1; } return parent::remove($B‡Ö·ÃÍËğ); } public function add($D¼é®çÆ·À) { goto c°ê¼Õ‰¯Ø; bŸÀ­±éİ¤: return parent::insert($D¼é®çÆ·À); goto A›‚£•¤Ä; c°ê¼Õ‰¯Ø: $cíÔëÓ£Ëà =& $_SERVER[şÅ²é¤èİ]; $f¸ä©õ¯á÷ = $D¼é®çÆ·À[$cíÔëÓ£Ëà[28]]; if ($this->findByName($f¸ä©õ¯á÷)) { return !1; } goto b“ÔÄì¼“Õ; b“ÔÄì¼“Õ: $bÓ‘Ã”¥¶Ï = array($cíÔëÓ£Ëà[380] => $f¸ä©õ¯á÷, $cíÔëÓ£Ëà[2015] => $cíÔëÓ£Ëà[33], $cíÔëÓ£Ëà[2011] => $cíÔëÓ£Ëà[2028], $cíÔëÓ£Ëà[2357] => 1, $cíÔëÓ£Ëà[2014] => 0, $cíÔëÓ£Ëà[2358] => 0, $cíÔëÓ£Ëà[2013] => $this->getSort()); $D¼é®çÆ·À = array_merge($bÓ‘Ã”¥¶Ï, $D¼é®çÆ·À); $this->filterAuth($D¼é®çÆ·À[$cíÔëÓ£Ëà[370]]); goto bŸÀ­±éİ¤; A›‚£•¤Ä: } private function getSort() { $B¨øò÷‡‹Î =& $_SERVER[şÅ²é¤èİ]; $eº×­¼Š…¡ = parent::listData(); $f‡É÷ŒÒÂ  = array_to_keyvalue($eº×­¼Š…¡, $B¨øò÷‡‹Î[33], $B¨øò÷‡‹Î[2030]); return empty($f‡É÷ŒÒÂ ) ? 0 : max($f‡É÷ŒÒÂ ) + 1; } private function filterAuth(&$A¤İ˜ÂÄÑæ) { $FŒ«¦¾‹Ãõ =& $_SERVER[şÅ²é¤èİ]; $B¯•Ş¡äÙ = array(); $a¦®£í›Œ = array_filter(explode($FŒ«¦¾‹Ãõ[47], $A¤İ˜ÂÄÑæ)); foreach ($a¦®£í›Œ as $A¤İ˜ÂÄÑæ) { $eš»ìáñ‘‰ = explode($FŒ«¦¾‹Ãõ[92], $A¤İ˜ÂÄÑæ); if ($eš»ìáñ‘‰[0] == $FŒ«¦¾‹Ãõ[1689] && $eš»ìáñ‘‰[1] != $FŒ«¦¾‹Ãõ[1015]) { $dêª¦íî‹ª = $eš»ìáñ‘‰[0] . $FŒ«¦¾‹Ãõ[92] . $eš»ìáñ‘‰[1] . $FŒ«¦¾‹Ãõ[2359]; if (!in_array($dêª¦íî‹ª, $a¦®£í›Œ)) { $B¯•Ş¡äÙ[] = $dêª¦íî‹ª; } } $B¯•Ş¡äÙ[] = $A¤İ˜ÂÄÑæ; } $A¤İ˜ÂÄÑæ = implode($FŒ«¦¾‹Ãõ[47], $B¯•Ş¡äÙ); } public function sort($F¡øòÖãÒò, $D¨èç“¤±) { return parent::update($F¡øòÖãÒò, $D¨èç“¤±); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\x65\x6d\x2e\x74\141\163\x6b\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\x65", "\x74\171\160\145", "\145\x76\145\x6e\164", "\164\x69\x6d\x65", "\144\145\163\143", "\x73\x79\x73\164\x65\x6d", "\145\156\141\142\x6c\145", "\x6c\141\x73\x74\122\165\x6e", "\163\157\162\164"); public function listData($a…ç“ëİ½… = false, $bİèªó‘ = "\163\x6f\x72\x74", $f½Î±ÓŞ½† = false) { return parent::listData($a…ç“ëİ½…, $bİèªó‘, $f½Î±ÓŞ½†); } public function add($a£˜Æé‘î¡) { $A¥÷Í…˜ =& $_SERVER[şÅ²é¤èİ]; $dÑµ˜ÎÛÄ½ = $this->findByName($a£˜Æé‘î¡[$A¥÷Í…˜[28]]); if ($dÑµ˜ÎÛÄ½) { return !1; } $a£˜Æé‘î¡[$A¥÷Í…˜[1311]] = 0; $a£˜Æé‘î¡[$A¥÷Í…˜[2030]] = $this->getSort(); return parent::insert($a£˜Æé‘î¡); } private function getSort() { $Fó›Ò½İ“ç =& $_SERVER[şÅ²é¤èİ]; $Aõ—ÅãôÅš = parent::listData(); $aµ¼ÖÀÕ… = array_to_keyvalue($Aõ—ÅãôÅš, $Fó›Ò½İ“ç[33], $Fó›Ò½İ“ç[2030]); return empty($aµ¼ÖÀÕ…) ? 0 : max($aµ¼ÖÀÕ…) + 1; } public function update($D‡¤©òÑ¥‡, $AÄÛõ¹¢«†) { $CÎÒ”ìæŒ =& $_SERVER[şÅ²é¤èİ]; $CóĞ×á¸°á = $this->listData($D‡¤©òÑ¥‡); $b‹›‡ğ„Š° = $this->findByName($AÄÛõ¹¢«†[$CÎÒ”ìæŒ[28]]); if (!$CóĞ×á¸°á || $b‹›‡ğ„Š° && $b‹›‡ğ„Š°[$CÎÒ”ìæŒ[361]] != $CóĞ×á¸°á[$CÎÒ”ìæŒ[361]]) { return !1; } return parent::update($D‡¤©òÑ¥‡, $AÄÛõ¹¢«†); } public function remove($Aâ¯Ûœ™) { $A£İ£¾øˆ‡ = $this->listData($Aâ¯Ûœ™); if (!$A£İ£¾øˆ‡ || $A£İ£¾øˆ‡[$_SERVER[şÅ²é¤èİ][1053]]) { return !1; } return parent::remove($Aâ¯Ûœ™); } public function enable($f¶±óã…¬©) { $bÔÜÔ˜ù =& $_SERVER[şÅ²é¤èİ]; $F¦ã¾ƒÁØÜ = $this->listData($f¶±óã…¬©); $aÇ’Ó‡½Ï¥ = !$F¦ã¾ƒÁØÜ[$bÔÜÔ˜ù[1318]]; return $this->update($f¶±óã…¬©, array($bÔÜÔ˜ù[2360] => $aÇ’Ó‡½Ï¥)); } public function run($A «¶Ú†±Ş) { return $this->update($A «¶Ú†±Ş, array($_SERVER[şÅ²é¤èİ][2361] => time())); } } goto d®ä¿Î; A¥«ÙÌ“¿: class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($c¯‘„ç‡ÑÜ) { $cæ…ìã œ =& $_SERVER[şÅ²é¤èİ]; $Bˆà‘”‡ ´ = array($cæ…ìã œ[525] => array($cæ…ìã œ[29] => $cæ…ìã œ[1936], $cæ…ìã œ[255] => array($cæ…ìã œ[206], $cæ…ìã œ[693], $cæ…ìã œ[1937], $cæ…ìã œ[1938])), $cæ…ìã œ[1939] => array($cæ…ìã œ[29] => $cæ…ìã œ[1940], $cæ…ìã œ[255] => array($cæ…ìã œ[206], $cæ…ìã œ[691], $cæ…ìã œ[1941], $cæ…ìã œ[1942], $cæ…ìã œ[1943]))); if (!isset($Bˆà‘”‡ ´[$c¯‘„ç‡ÑÜ])) { return !1; } $this->optionType = $Bˆà‘”‡ ´[$c¯‘„ç‡ÑÜ][$cæ…ìã œ[29]]; $this->field = $Bˆà‘”‡ ´[$c¯‘„ç‡ÑÜ][$cæ…ìã œ[255]]; return !0; } public function listData($FØ£ÒìŒğ× = false, $d«êí‹”ÁØ = "\155\157\x64\x69\146\171\124\x69\155\x65", $A»ª–´¯—È = false) { return parent::listData($FØ£ÒìŒğ×, $d«êí‹”ÁØ, $A»ª–´¯—È); } public function trendList($F™³è£ãĞ¢) { goto D­¶Øøâá§; eß‘‰Î©ÅË: if (!isset($FèšŞÛ’¶¥)) { $aÔñÇÙµÆ = $F™³è£ãĞ¢ == $dÂ ‡®¼Ï[525] ? $dÂ ‡®¼Ï[467] : $dÂ ‡®¼Ï[755]; $FèšŞÛ’¶¥ = Model($aÔñÇÙµÆ)->min($dÂ ‡®¼Ï[183]); } $f‹ÒÚ³ = $dÂ ‡®¼Ï[1946] . ucfirst($F™³è£ãĞ¢); $FùÊà×Õ‹Ø = $this->dateList($FèšŞÛ’¶¥); goto aéÛ‚¬Ü¿ã; D­¶Øøâá§: $dÂ ‡®¼Ï =& $_SERVER[şÅ²é¤èİ]; $féêÍ‡â¢ = $this->listData(); if ($féêÍ‡â¢) { $cîòÎÌÅ = end($féêÍ‡â¢); $a—´šŠª¦ = date($dÂ ‡®¼Ï[1944], strtotime($dÂ ‡®¼Ï[1945])); if ($cîòÎÌÅ[$dÂ ‡®¼Ï[206]] == $a—´šŠª¦) { return $féêÍ‡â¢; } $FèšŞÛ’¶¥ = strtotime($cîòÎÌÅ[$dÂ ‡®¼Ï[206]]); } goto eß‘‰Î©ÅË; aéÛ‚¬Ü¿ã: foreach ($FùÊà×Õ‹Ø as $a—´šŠª¦) { $this->{$f‹ÒÚ³}($a—´šŠª¦); } return $this->listData(); goto A¨´ğÚ¦; A¨´ğÚ¦: } private function dateList($Eâ×Çø ÛÊ) { $a¼œ¦˜×‘â =& $_SERVER[şÅ²é¤èİ]; $c¦šñ ‰Ÿ = $Eâ×Çø ÛÊ; $cÕêŠ‚§á = strtotime($a¼œ¦˜×‘â[1945]); $Aâğ¡ï¦¬¤ = array(); while ($c¦šñ ‰Ÿ <= $cÕêŠ‚§á) { $Aâğ¡ï¦¬¤[] = date($a¼œ¦˜×‘â[1944], $c¦šñ ‰Ÿ); $c¦šñ ‰Ÿ = strtotime($a¼œ¦˜×‘â[1947], $c¦šñ ‰Ÿ); } return $Aâğ¡ï¦¬¤; } public function _recordUser($A™ÀÎ‘Õ¼Ë = '') { goto C±¡ÇÒõƒ¨; aÕ¸”‚£øŸ: $BíÜ¾”Î = Model($CÙºæÅòÙŠ[467])->where($c¢Àê§¹²Ê)->count($CÙºæÅòÙŠ[1345]); $c¢Àê§¹²Ê[$CÙºæÅòÙŠ[29]] = $CÙºæÅòÙŠ[1950]; $aˆ ß­ò = Model($CÙºæÅòÙŠ[1951])->where($c¢Àê§¹²Ê)->count($CÙºæÅòÙŠ[1952]); goto a‹©¿ÚŞÕå; C±¡ÇÒõƒ¨: $CÙºæÅòÙŠ =& $_SERVER[şÅ²é¤èİ]; $d½¤æ›¦Ö¾ = strtotime(date($CÙºæÅòÙŠ[1948], strtotime($A™ÀÎ‘Õ¼Ë))); $bíô¨Ç˜©Ñ = strtotime(date($CÙºæÅòÙŠ[1949], strtotime($A™ÀÎ‘Õ¼Ë))); goto eªùÜéß; a‹©¿ÚŞÕå: $b–†¹Ğµ§ = array($CÙºæÅòÙŠ[206] => $A™ÀÎ‘Õ¼Ë, $CÙºæÅòÙŠ[693] => (int) $aî‘‹â²“Ş, $CÙºæÅòÙŠ[1937] => (int) $BíÜ¾”Î, $CÙºæÅòÙŠ[1938] => (int) $aˆ ß­ò); return $this->insert($b–†¹Ğµ§); goto Aö—ÍÍî¶ä; eªùÜéß: $c¢Àê§¹²Ê = array($CÙºæÅòÙŠ[183] => array($CÙºæÅòÙŠ[928], $bíô¨Ç˜©Ñ)); $aî‘‹â²“Ş = Model($CÙºæÅòÙŠ[467])->where($c¢Àê§¹²Ê)->count($CÙºæÅòÙŠ[1345]); $c¢Àê§¹²Ê[$CÙºæÅòÙŠ[183]] = array($CÙºæÅòÙŠ[315], array($d½¤æ›¦Ö¾, $bíô¨Ç˜©Ñ)); goto aÕ¸”‚£øŸ; Aö—ÍÍî¶ä: } public function _recordStore($bŸ±Ø¦Àè¶ = '') { goto c½á­‡ºö…; eÀ˜†é†Úº: $fŞñÍâíáâ = Model($cÖÔæôëŠ´[755])->where($dÂˆèìñÚ˜)->sum($cÖÔæôëŠ´[78]); $E³Ş³¨„ = array($cÖÔæôëŠ´[206] => $bŸ±Ø¦Àè¶, $cÖÔæôëŠ´[691] => (int) $e“á¥Áîâï, $cÖÔæôëŠ´[1941] => (int) $EÏîñ­ğÔ, $cÖÔæôëŠ´[1942] => (int) $dÃº½êïÒ‡, $cÖÔæôëŠ´[1943] => (int) $fŞñÍâíáâ); return $this->insert($E³Ş³¨„); goto dÔš‰÷¥; A¸¾ÀôÉ…: $EÏîñ­ğÔ = Model($cÖÔæôëŠ´[415])->where($dÂˆèìñÚ˜)->sum($cÖÔæôëŠ´[78]); $dÂˆèìñÚ˜[$cÖÔæôëŠ´[364]] = 0; $e“á¥Áîâï = Model($cÖÔæôëŠ´[755])->where($dÂˆèìñÚ˜)->sum($cÖÔæôëŠ´[78]); goto bëÜ®µÜÒÆ; c½á­‡ºö…: $cÖÔæôëŠ´ =& $_SERVER[şÅ²é¤èİ]; $F‘×Ä¾Ÿğ = strtotime(date($cÖÔæôëŠ´[1949], strtotime($bŸ±Ø¦Àè¶))); $dÂˆèìñÚ˜ = array($cÖÔæôëŠ´[183] => array($cÖÔæôëŠ´[928], $F‘×Ä¾Ÿğ)); goto A¸¾ÀôÉ…; bëÜ®µÜÒÆ: $dÂˆèìñÚ˜[$cÖÔæôëŠ´[365]] = 1; $dÃº½êïÒ‡ = Model($cÖÔæôëŠ´[755])->where($dÂˆèìñÚ˜)->sum($cÖÔæôëŠ´[78]); $dÂˆèìñÚ˜[$cÖÔæôëŠ´[365]] = 2; goto eÀ˜†é†Úº; dÔš‰÷¥: } public function trend($fŠ„æ©°Æò, $fğ”ŠÊ½‰Î) { goto e¬¼›æÚĞÂ; E÷ŠäØÃ‡: if ($e‘Àˆ˜Ä¶÷ && $fğ”ŠÊ½‰Î != $b’°˜¶œ³»[1320]) { $a¯Àè¼Òß = $e‘Àˆ˜Ä¶÷[0][$b’°˜¶œ³»[206]]; $A–é†—’•• = $this->validDate($fğ”ŠÊ½‰Î, $a¯Àè¼Òß); $DÆ«£ñó«¬ = array(); $B²ÀŠÃë… = array_to_keyvalue($e‘Àˆ˜Ä¶÷, $b’°˜¶œ³»[206]); foreach ($A–é†—’•• as $a÷æàæĞíì) { if (isset($B²ÀŠÃë…[$a÷æàæĞíì])) { $aŒ¡ªÂˆ—‹ = $B²ÀŠÃë…[$a÷æàæĞíì]; } else { $aŒ¡ªÂˆ—‹ = end($e‘Àˆ˜Ä¶÷); $aŒ¡ªÂˆ—‹[$b’°˜¶œ³»[206]] = $a÷æàæĞíì; if ($fŠ„æ©°Æò == $b’°˜¶œ³»[525]) { $aŒ¡ªÂˆ—‹[$b’°˜¶œ³»[1937]] = $aŒ¡ªÂˆ—‹[$b’°˜¶œ³»[1938]] = 0; } } $DÆ«£ñó«¬[] = $aŒ¡ªÂˆ—‹; } $e‘Àˆ˜Ä¶÷ = $DÆ«£ñó«¬; } $BÀÂï¦´§ = array($b’°˜¶œ³»[525] => array($b’°˜¶œ³»[693] => LNG($b’°˜¶œ³»[1953]), $b’°˜¶œ³»[1937] => LNG($b’°˜¶œ³»[1954]), $b’°˜¶œ³»[1938] => LNG($b’°˜¶œ³»[1955])), $b’°˜¶œ³»[1939] => array($b’°˜¶œ³»[691] => LNG($b’°˜¶œ³»[1956]), $b’°˜¶œ³»[1941] => LNG($b’°˜¶œ³»[1957]), $b’°˜¶œ³»[1942] => LNG($b’°˜¶œ³»[1958]), $b’°˜¶œ³»[1943] => LNG($b’°˜¶œ³»[1959]))); $aÛ’®‡¢Æ = array($b’°˜¶œ³»[525] => $b’°˜¶œ³»[1960], $b’°˜¶œ³»[1939] => $b’°˜¶œ³»[78]); goto c‹…®ô¬‰½; F»¾¹ï³¢ğ: return $b¿‡ñ§½¤Ç; goto BºŒö™œ†²; e¬¼›æÚĞÂ: $b’°˜¶œ³» =& $_SERVER[şÅ²é¤èİ]; if (!$this->init($fŠ„æ©°Æò)) { return !1; } $e‘Àˆ˜Ä¶÷ = $this->trendList($fŠ„æ©°Æò); goto E÷ŠäØÃ‡; c‹…®ô¬‰½: if (empty($e‘Àˆ˜Ä¶÷)) { $a÷æàæĞíì = date($b’°˜¶œ³»[1944], strtotime($b’°˜¶œ³»[1945])); $fÓ†£á–‘ = array($b’°˜¶œ³»[206] => $a÷æàæĞíì); foreach ($BÀÂï¦´§[$fŠ„æ©°Æò] as $E¡—Æ£œ• => $BÙ›©¢îà) { $fÓ†£á–‘[$E¡—Æ£œ•] = 0; } $e‘Àˆ˜Ä¶÷[] = $fÓ†£á–‘; } $b¿‡ñ§½¤Ç = array(); foreach ($e‘Àˆ˜Ä¶÷ as $BÙ›©¢îà) { if ($fŠ„æ©°Æò == $b’°˜¶œ³»[1939] && $BÙ›©¢îà[$b’°˜¶œ³»[1941]] > $BÙ›©¢îà[$b’°˜¶œ³»[691]]) { $BÙ›©¢îà[$b’°˜¶œ³»[1941]] = $BÙ›©¢îà[$b’°˜¶œ³»[691]]; } foreach ($BÀÂï¦´§[$fŠ„æ©°Æò] as $E¡—Æ£œ• => $e‰¢İõÓå¡) { $aŒ¡ªÂˆ—‹ = array($b’°˜¶œ³»[206] => $BÙ›©¢îà[$b’°˜¶œ³»[206]], $b’°˜¶œ³»[1243] => $e‰¢İõÓå¡); $aŒ¡ªÂˆ—‹[$aÛ’®‡¢Æ[$fŠ„æ©°Æò]] = isset($BÙ›©¢îà[$E¡—Æ£œ•]) ? $BÙ›©¢îà[$E¡—Æ£œ•] : 0; $b¿‡ñ§½¤Ç[] = $aŒ¡ªÂˆ—‹; } } goto F»¾¹ï³¢ğ; BºŒö™œ†²: } public function validDate($F·Œ­øİë‘, $cå¸ÄÇŸ‘) { goto A¼†ï¡Ù†; FË›®ñ…Ê›: switch ($F·Œ­øİë‘) { case $B„îœò÷’[1327]: $DÈƒ©åé¬´ = mktime(0, 0, 0, date($B„îœò÷’[1961]), date($B„îœò÷’[1962]) - date($B„îœò÷’[1189]) + 7 - 7, date($B„îœò÷’[1963])); $Fœ Àî¿İ­ = 0; do { $Aè´˜‰¹†Ğ = date($B„îœò÷’[1944], $DÈƒ©åé¬´ - 3600 * 24 * 7 * $Fœ Àî¿İ­); $c•îŸÉÎ‹¨[] = $Aè´˜‰¹†Ğ; $Fœ Àî¿İ­++; } while ($cå¸ÄÇŸ‘ < $Aè´˜‰¹†Ğ); break; case $B„îœò÷’[1325]: $Fœ Àî¿İ­ = 1; do { $e–‰›ÊŠ = date($B„îœò÷’[1964], strtotime("\x2d\40{$Fœ Àî¿İ­}\x20\155\x6f\156\164\150\163")); $c•îŸÉÎ‹¨[] = $e–‰›ÊŠ; $Fœ Àî¿İ­++; } while ($cå¸ÄÇŸ‘ < $e–‰›ÊŠ); break; case $B„îœò÷’[1629]: $eö‰³Ü§òµ = (int) date($B„îœò÷’[1963], strtotime($cå¸ÄÇŸ‘)); $Eâ¨éÊ­°™ = (int) date($B„îœò÷’[1963]); if ($eö‰³Ü§òµ >= $Eâ¨éÊ­°™) { break; } for ($eö‰³Ü§òµ; $eö‰³Ü§òµ < $Eâ¨éÊ­°™; $eö‰³Ü§òµ++) { $c•îŸÉÎ‹¨[] = $eö‰³Ü§òµ . $B„îœò÷’[1965]; } break; default: break; } if ($cå¸ÄÇŸ‘ > end($c•îŸÉÎ‹¨)) { array_pop($c•îŸÉÎ‹¨); } sort($c•îŸÉÎ‹¨); goto B‹ùŠòøÓ‘; B‹ùŠòøÓ‘: return $c•îŸÉÎ‹¨; goto d¯öÉ²ÄËÜ; A¼†ï¡Ù†: $B„îœò÷’ =& $_SERVER[şÅ²é¤èİ]; $f®²«ŠãŒ· = date($B„îœò÷’[1944], strtotime($B„îœò÷’[1945])); $c•îŸÉÎ‹¨ = array($f®²«ŠãŒ·); goto FË›®ñ…Ê›; d¯öÉ²ÄËÜ: } public function listTable($cØ”„ÍÁ×÷) { $d‘ŒÊ£Ø = ucfirst($cØ”„ÍÁ×÷); return Model($d‘ŒÊ£Ø)->listData(); } public function option($bÒÁšğáğ) { $F‘’Ñ×³— = $_SERVER[şÅ²é¤èİ][1966] . ucfirst($bÒÁšğáğ); return $this->{$F‘’Ñ×³—}(); } private function optionUser() { goto EÜÔ¢ÏÉì½; F¶„îíÓó: if (!$FÌ‚á–ÇöŸ) { $FÌ‚á–ÇöŸ = 1; } $A‘ã•èè î = strtotime(date($c‡ä”¼·øö[1948])); $dÛÌ±œµƒò = array($c‡ä”¼·øö[1969] => array($c‡ä”¼·øö[929], $A‘ã•èè î)); goto C¾’ØÔšù‡; EÜÔ¢ÏÉì½: $c‡ä”¼·øö =& $_SERVER[şÅ²é¤èİ]; $FÈõò–¶šÈ = Model($c‡ä”¼·øö[467])->count($c‡ä”¼·øö[1345]); $Cë‚…ÆÖÊÒ = Model($c‡ä”¼·øö[467])->where($c‡ä”¼·øö[1967])->count($c‡ä”¼·øö[1345]); goto dóÇŸÈíÕ§; dóÇŸÈíÕ§: $A‘ã•èè î = strtotime($c‡ä”¼·øö[1968]); $dÛÌ±œµƒò = array($c‡ä”¼·øö[1969] => array($c‡ä”¼·øö[929], $A‘ã•èè î)); $FÌ‚á–ÇöŸ = (int) Model($c‡ä”¼·øö[467])->where($dÛÌ±œµƒò)->count($c‡ä”¼·øö[1345]); goto F¶„îíÓó; C¾’ØÔšù‡: $bğ—Ó–İÜ = Model($c‡ä”¼·øö[467])->where($dÛÌ±œµƒò)->count($c‡ä”¼·øö[1345]); return array($c‡ä”¼·øö[688] => (int) $FÈõò–¶šÈ, $c‡ä”¼·øö[1970] => (int) ($FÈõò–¶šÈ - $Cë‚…ÆÖÊÒ), $c‡ä”¼·øö[1971] => (int) $Cë‚…ÆÖÊÒ, $c‡ä”¼·øö[1972] => (int) $bğ—Ó–İÜ, $c‡ä”¼·øö[1973] => $FÌ‚á–ÇöŸ); goto dŠÜ®î²ÔÑ; dŠÜ®î²ÔÑ: } private function optionFile() { goto b°½…à¶ª; E¼ê³áãòÓ: $BÜ²Šæñ£ä = $dßî‰İ²[$FŸñ†”–Ûä[1941]]; $c›£•—ßÍ‚ = Model($FŸñ†”–Ûä[755])->where(array($FŸñ†”–Ûä[364] => 0))->count($FŸñ†”–Ûä[363]); $Aé†°Ú¥ = array($FŸñ†”–Ûä[364] => 0, $FŸñ†”–Ûä[183] => array($FŸñ†”–Ûä[929], strtotime(date($FŸñ†”–Ûä[1948])))); goto Bò‘¥¬¡†; b°½…à¶ª: $FŸñ†”–Ûä =& $_SERVER[şÅ²é¤èİ]; $dßî‰İ² = $this->sourceSize(); $fÆøñíàÙ¥ = $dßî‰İ²[$FŸñ†”–Ûä[78]]; goto E¼ê³áãòÓ; Bò‘¥¬¡†: $d‹†‰í‹Ì = Model($FŸñ†”–Ûä[755])->where($Aé†°Ú¥)->sum($FŸñ†”–Ûä[78]); $b³•ÇÏŠ = Model($FŸñ†”–Ûä[755])->where($Aé†°Ú¥)->count($FŸñ†”–Ûä[363]); return array($FŸñ†”–Ûä[691] => $fÆøñíàÙ¥, $FŸñ†”–Ûä[1941] => $BÜ²Šæñ£ä, $FŸñ†”–Ûä[1974] => $fÆøñíàÙ¥ - $BÜ²Šæñ£ä, $FŸñ†”–Ûä[1975] => (int) $d‹†‰í‹Ì, $FŸñ†”–Ûä[693] => (int) $c›£•—ßÍ‚, $FŸñ†”–Ûä[1976] => (int) $b³•ÇÏŠ); goto båÁµ½£ÉÖ; båÁµ½£ÉÖ: } private function optionAccess() { $a¬Œ®¶° =& $_SERVER[şÅ²é¤èİ]; return array($a¬Œ®¶°[688] => $this->typeLogCnt(), $a¬Œ®¶°[90] => $this->typeLogCnt($a¬Œ®¶°[90]), $a¬Œ®¶°[397] => $this->typeLogCnt($a¬Œ®¶°[397]), $a¬Œ®¶°[1977] => $this->typeLogCnt($a¬Œ®¶°[1977]), $a¬Œ®¶°[1978] => $this->typeLogCnt($a¬Œ®¶°[1978]), $a¬Œ®¶°[525] => $this->typeLogCnt($a¬Œ®¶°[33], $a¬Œ®¶°[1952])); } private function typeLogCnt($Eö²‰Ú…Ï = '', $Aèİ¢õÌÜí = "\151\144") { goto E†ùË¦; F¢ƒ£ˆ“Şã: $Fê–—„´‚¬ = array($Aˆğ§Èî¤‰[183] => array($Aˆğ§Èî¤‰[929], $a‡¿‰Š»œ³)); if ($Eö²‰Ú…Ï) { $Fê–—„´‚¬[$Aˆğ§Èî¤‰[29]] = array($Aˆğ§Èî¤‰[7], $EÍ©Œíæƒ†[$Eö²‰Ú…Ï]); } $DÍÄö›¹¿ = Model($Aˆğ§Èî¤‰[1951])->where($Fê–—„´‚¬)->count($Aèİ¢õÌÜí); goto dªÁô¶‡; dªÁô¶‡: return (int) $DÍÄö›¹¿; goto dİÂ™‰„Œƒ; E†ùË¦: $Aˆğ§Èî¤‰ =& $_SERVER[şÅ²é¤èİ]; $EÍ©Œíæƒ† = array($Aˆğ§Èî¤‰[90] => array($Aˆğ§Èî¤‰[1979], $Aˆğ§Èî¤‰[1980]), $Aˆğ§Èî¤‰[397] => array($Aˆğ§Èî¤‰[1981]), $Aˆğ§Èî¤‰[1977] => array($Aˆğ§Èî¤‰[1982], $Aˆğ§Èî¤‰[1983]), $Aˆğ§Èî¤‰[1978] => array($Aˆğ§Èî¤‰[1984], $Aˆğ§Èî¤‰[1985]), $Aˆğ§Èî¤‰[1986] => array($Aˆğ§Èî¤‰[1987], $Aˆğ§Èî¤‰[1988], $Aˆğ§Èî¤‰[1989])); $a‡¿‰Š»œ³ = strtotime(date($Aˆğ§Èî¤‰[1948])); goto F¢ƒ£ˆ“Şã; dİÂ™‰„Œƒ: } private function optionServer() { goto aõĞ™”İÈÀ; A™ôÈ±æÒ: if ($CÉò¢ƒ±± == $C™¿Œˆ’ÀÙ[727]) { $e‘çÂáˆ—… = explode($C™¿Œˆ’ÀÙ[728], $AÎ‹Ë¢¯»ä[$C™¿Œˆ’ÀÙ[729]]); $CÉò¢ƒ±± = $e‘çÂáˆ—…[0]; } if ($CÉò¢ƒ±± == $C™¿Œˆ’ÀÙ[825] || $CÉò¢ƒ±± == $C™¿Œˆ’ÀÙ[709]) { $fæâË¨Ùİ = Model()->db()->query($C™¿Œˆ’ÀÙ[1990]); $a„µ®Î×‘ñ = $fæâË¨Ùİ[0] && isset($fæâË¨Ùİ[0][$C™¿Œˆ’ÀÙ[1242]]) ? $fæâË¨Ùİ[0][$C™¿Œˆ’ÀÙ[1242]] : 0; $CÉò¢ƒ±± = $C™¿Œˆ’ÀÙ[1991] . ($a„µ®Î×‘ñ ? $C™¿Œˆ’ÀÙ[8] . $a„µ®Î×‘ñ : $C™¿Œˆ’ÀÙ[33]); } $DÁõ¨¾´ = $GLOBALS[$C™¿Œˆ’ÀÙ[6]][$C™¿Œˆ’ÀÙ[331]][$C™¿Œˆ’ÀÙ[756]]; goto Dëë‡Õ‡Â; aõĞ™”İÈÀ: $C™¿Œˆ’ÀÙ =& $_SERVER[şÅ²é¤èİ]; $c¹ƒ¦©‡ = $this->diskDriver(); $E›Ôó‚Òë = KodIO::defaultDriver(); goto CÃÏóâìŒ¤; e÷Ò¦¸ä™: $E Ÿ‘ĞÉ¬ä = $cÙ¡Ö•„ºâ[0]; $AÎ‹Ë¢¯»ä = $GLOBALS[$C™¿Œˆ’ÀÙ[6]][$C™¿Œˆ’ÀÙ[17]]; $CÉò¢ƒ±± = $AÎ‹Ë¢¯»ä[$C™¿Œˆ’ÀÙ[726]]; goto A™ôÈ±æÒ; CÃÏóâìŒ¤: $CÜŠ‹Æ¡ = array($C™¿Œˆ’ÀÙ[716] => $E›Ôó‚Òë[$C™¿Œˆ’ÀÙ[361]]); $C Œ‘Ï‘ÁÕ = Model($C™¿Œˆ’ÀÙ[415])->where($CÜŠ‹Æ¡)->sum($C™¿Œˆ’ÀÙ[78]); $cÙ¡Ö•„ºâ = explode($C™¿Œˆ’ÀÙ[50], $_SERVER[$C™¿Œˆ’ÀÙ[136]]); goto e÷Ò¦¸ä™; Dëë‡Õ‡Â: return array($C™¿Œˆ’ÀÙ[1992] => $c¹ƒ¦©‡ ? $c¹ƒ¦©‡[$C™¿Œˆ’ÀÙ[1993]] : 0, $C™¿Œˆ’ÀÙ[1994] => $c¹ƒ¦©‡ ? $c¹ƒ¦©‡[$C™¿Œˆ’ÀÙ[1995]] : 0, $C™¿Œˆ’ÀÙ[1996] => (int) $E›Ôó‚Òë[$C™¿Œˆ’ÀÙ[1993]] * 1024 * 1024 * 1024, $C™¿Œˆ’ÀÙ[1997] => (int) $C Œ‘Ï‘ÁÕ, $C™¿Œˆ’ÀÙ[1998] => ucfirst($E Ÿ‘ĞÉ¬ä), $C™¿Œˆ’ÀÙ[1999] => $C™¿Œˆ’ÀÙ[2000] . PHP_VERSION, $C™¿Œˆ’ÀÙ[2001] => phpBuild64() ? 64 : 32, $C™¿Œˆ’ÀÙ[687] => str_replace($C™¿Œˆ’ÀÙ[2002], $C™¿Œˆ’ÀÙ[905], $CÉò¢ƒ±±), $C™¿Œˆ’ÀÙ[331] => ucfirst($DÁõ¨¾´), $C™¿Œˆ’ÀÙ[28] => $_SERVER[$C™¿Œˆ’ÀÙ[2003]]); goto b’Ü‹«¨ è; b’Ü‹«¨ è: } private function diskDriver() { goto f¯ãï›«È¦; C¤©ñ´ÁÍ: if ($FŞŠØºÅ‚¦) { $dÅÀñÆÇçµ = $Få°™™ù[2006]; if (function_exists($Få°™™ù[2007])) { exec($Få°™™ù[2008], $A²éÍÄš); $dÅÀñÆÇçµ = $A²éÍÄš[1] . $Få°™™ù[8]; } } if (!file_exists($dÅÀñÆÇçµ)) { return; } $aõ‰Â—Ì› = @disk_total_space($dÅÀñÆÇçµ); goto DÛ‚š†; DÛ‚š†: $bäÎÇŸë…‹ = $aõ‰Â—Ì› - @disk_free_space($dÅÀñÆÇçµ); return array($Få°™™ù[1993] => $aõ‰Â—Ì›, $Få°™™ù[1995] => $bäÎÇŸë…‹); goto cÜàØÛ²Âº; f¯ãï›«È¦: $Få°™™ù =& $_SERVER[şÅ²é¤èİ]; $dÅÀñÆÇçµ = $Få°™™ù[8]; $FŞŠØºÅ‚¦ = $GLOBALS[$Få°™™ù[6]][$Få°™™ù[2004]] == $Få°™™ù[2005]; goto C¤©ñ´ÁÍ; cÜàØÛ²Âº: } public function fileChart($dÒŠÏñ¨ãÕ) { goto FÑ—ÄÍß‚•; FÑ—ÄÍß‚•: $Dïâ¯¸ƒÊ =& $_SERVER[şÅ²é¤èİ]; if (isset($dÒŠÏñ¨ãÕ[$Dïâ¯¸ƒÊ[1345]])) { return Model($Dïâ¯¸ƒÊ[755])->userFileTypeProfile($dÒŠÏñ¨ãÕ[$Dïâ¯¸ƒÊ[1345]]); } if (isset($dÒŠÏñ¨ãÕ[$Dïâ¯¸ƒÊ[2009]])) { return Model($Dïâ¯¸ƒÊ[755])->groupFileTypeProfile($dÒŠÏñ¨ãÕ[$Dïâ¯¸ƒÊ[2009]]); } goto DºÑ“ìÀ¢Ä; b‘ïõæÏöÔ: $aÒÍÑ¸Ú[$Dïâ¯¸ƒÊ[365]] = 2; $FŒ¹½™Æè¿ = Model($Dïâ¯¸ƒÊ[755])->where($aÒÍÑ¸Ú)->sum($Dïâ¯¸ƒÊ[78]); return array($Dïâ¯¸ƒÊ[691] => $cğ‚äÛÜ¬[$Dïâ¯¸ƒÊ[78]], $Dïâ¯¸ƒÊ[1941] => $cğ‚äÛÜ¬[$Dïâ¯¸ƒÊ[1941]], $Dïâ¯¸ƒÊ[1942] => (int) $CËÔ®¸Ğ¡, $Dïâ¯¸ƒÊ[1943] => (int) $FŒ¹½™Æè¿); goto cµ¸¤Ï»„; DºÑ“ìÀ¢Ä: $cğ‚äÛÜ¬ = $this->sourceSize(); $aÒÍÑ¸Ú = array($Dïâ¯¸ƒÊ[454] => 0, $Dïâ¯¸ƒÊ[365] => 1); $CËÔ®¸Ğ¡ = Model($Dïâ¯¸ƒÊ[755])->where($aÒÍÑ¸Ú)->sum($Dïâ¯¸ƒÊ[78]); goto b‘ïõæÏöÔ; cµ¸¤Ï»„: } private function sourceSize() { $c©Ù”Êºæ¯ =& $_SERVER[şÅ²é¤èİ]; $FõŠæ‰ˆ½ = Model($c©Ù”Êºæ¯[755])->where(array($c©Ù”Êºæ¯[364] => 0))->sum($c©Ù”Êºæ¯[78]); $EÑ®¢ø´ğê = Model($c©Ù”Êºæ¯[415])->sum($c©Ù”Êºæ¯[78]); if ($EÑ®¢ø´ğê > $FõŠæ‰ˆ½) { $EÑ®¢ø´ğê = $FõŠæ‰ˆ½; } return array($c©Ù”Êºæ¯[78] => (int) $FõŠæ‰ˆ½, $c©Ù”Êºæ¯[1941] => (int) $EÑ®¢ø´ğê); } } class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $d”Ú›»¸ì  =& $_SERVER[şÅ²é¤èİ]; $aÛÜÅ™ÉÅ = array(array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2010]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2012], $d”Ú›»¸ì [2013] => 6, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2016]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2017], $d”Ú›»¸ì [2013] => 1, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2018]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2019], $d”Ú›»¸ì [2013] => 2, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2020]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2019], $d”Ú›»¸ì [2013] => 3, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2021]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2022], $d”Ú›»¸ì [2013] => 4, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_VIEW), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2023]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2024], $d”Ú›»¸ì [2013] => 5, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($d”Ú›»¸ì [380] => LNG($d”Ú›»¸ì [2025]), $d”Ú›»¸ì [2011] => $d”Ú›»¸ì [2026], $d”Ú›»¸ì [2013] => 7, $d”Ú›»¸ì [2014] => 1, $d”Ú›»¸ì [2015] => 0)); return $aÛÜÅ™ÉÅ; } public static function authCheck($A©´¾º¡øÒ, $AÜ³¡µòÜ÷) { $A©´¾º¡øÒ = intval($A©´¾º¡øÒ); if ($GLOBALS[$_SERVER[şÅ²é¤èİ][450]]) { return !0; } if ($A©´¾º¡øÒ <= 0) { return !1; } if (($A©´¾º¡øÒ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($A©´¾º¡øÒ & $AÜ³¡µòÜ÷); } public static function authCheckShow($d”²°†‰â‹) { return self::authCheck($d”²°†‰â‹, self::AUTH_SHOW); } public static function authCheckView($Fˆ‚½§î) { return self::authCheck($Fˆ‚½§î, self::AUTH_VIEW); } public static function authCheckDownload($eÂ¼àÇªÃ×) { return self::authCheck($eÂ¼àÇªÃ×, self::AUTH_DOWNLOAD); } public static function authCheckUpload($b‘ƒì÷¸ ô) { return self::authCheck($b‘ƒì÷¸ ô, self::AUTH_UPLOAD); } public static function authCheckEdit($cƒ¡º—Ø±•) { return self::authCheck($cƒ¡º—Ø±•, self::AUTH_EDIT); } public static function authCheckRemove($dÀùºÈÆ–) { return self::authCheck($dÀùºÈÆ–, self::AUTH_REMOVE); } public static function authCheckShare($aº„¨ò©) { return self::authCheck($aº„¨ò©, self::AUTH_SHARE); } public static function authCheckComment($EÏÈŠìÌ‹Â) { return self::authCheck($EÏÈŠìÌ‹Â, self::AUTH_COMMENT); } public static function authCheckEvent($d’ˆóæÕŒ) { return self::authCheck($d’ˆóæÕŒ, self::AUTH_EVENT); } public static function authCheckRoot($A‚Ë°µ•®¸) { return self::authCheck($A‚Ë°µ•®¸, self::AUTH_ROOT); } public static function authDisable($E¢É¿àµŒª, $Fš¿¥–˜÷¥) { if (intval($E¢É¿àµŒª) <= 0) { return 0; } return intval($E¢É¿àµŒª) & ~$Fš¿¥–˜÷¥; } public $optionType = "\x53\x79\x73\x74\145\155\56\x73\157\165\162\x63\145\101\x75\164\x68\114\151\163\164"; public $field = array("\x6e\141\x6d\145", "\x61\x75\164\150", "\154\141\142\x65\x6c", "\x64\151\163\x70\154\x61\x79", "\163\x79\x73\164\x65\155", "\163\x6f\162\164"); public function initData() { $cÆ¢«ãÅî = $this->authDefault(); foreach ($cÆ¢«ãÅî as $A†¶§†¼Ã›) { $this->add($A†¶§†¼Ã›); } } public function listData($B…ƒ…­§ = false, $AÉ¾ïİîŠ¨ = "\163\157\x72\x74", $bÙÊğêµùÜ = false) { return parent::listData($B…ƒ…­§, $AÉ¾ïİîŠ¨, $bÙÊğêµùÜ); } public function update($Bö÷ºÜğğ³, $aõ‡Õß½Ç) { $c¿ÅÎºØ =& $_SERVER[şÅ²é¤èİ]; $c³³²äÈåò = parent::listData($Bö÷ºÜğğ³); $c±ö¨ğ¹«¢ = $this->findByName($aõ‡Õß½Ç[$c¿ÅÎºØ[28]]); if (!$c³³²äÈåò || $c±ö¨ğ¹«¢ && $c±ö¨ğ¹«¢[$c¿ÅÎºØ[361]] != $c³³²äÈåò[$c¿ÅÎºØ[361]]) { return !1; } $this->filterAuth($aõ‡Õß½Ç[$c¿ÅÎºØ[370]]); return parent::update($Bö÷ºÜğğ³, $aõ‡Õß½Ç); } public function remove($a¥Ú¶¶«‘ö) { $føì‘™¡Œ· = parent::listData($a¥Ú¶¶«‘ö); if (!$føì‘™¡Œ· || $føì‘™¡Œ·[$_SERVER[şÅ²é¤èİ][1053]]) { return !1; } return parent::remove($a¥Ú¶¶«‘ö); } public function add($a·…ôùÛ‰ì = array()) { goto C¸ŠˆÍŞ”Ù; Cê¡¦Ú™±: $a·…ôùÛ‰ì = array_merge($B¬§àËÀá±, $a·…ôùÛ‰ì); $a·…ôùÛ‰ì[$e‚»ğ‚ª“[2030]] = $this->getSort(); $this->filterAuth($a·…ôùÛ‰ì[$e‚»ğ‚ª“[370]]); goto e‚È¼¢æ ; e‚È¼¢æ : return parent::insert($a·…ôùÛ‰ì); goto EÖ—ÏŒˆøÕ; C¸ŠˆÍŞ”Ù: $e‚»ğ‚ª“ =& $_SERVER[şÅ²é¤èİ]; if ($this->findByName($a·…ôùÛ‰ì[$e‚»ğ‚ª“[28]])) { return !1; } $B¬§àËÀá± = array($e‚»ğ‚ª“[28] => $e‚»ğ‚ª“[33], $e‚»ğ‚ª“[370] => 1, $e‚»ğ‚ª“[2027] => $e‚»ğ‚ª“[2028], $e‚»ğ‚ª“[2029] => 1, $e‚»ğ‚ª“[1053] => 0, $e‚»ğ‚ª“[2030] => 0); goto Cê¡¦Ú™±; EÖ—ÏŒˆøÕ: } private function getSort() { $a†ÏÚÇÎ±ó =& $_SERVER[şÅ²é¤èİ]; $c¥åµéÊè = parent::listData(); $D¥„î†¦†… = array_to_keyvalue($c¥åµéÊè, $a†ÏÚÇÎ±ó[33], $a†ÏÚÇÎ±ó[2030]); return empty($D¥„î†¦†…) ? 0 : max($D¥„î†¦†…) + 1; } private function filterAuth(&$AÎ‡öí­âÜ) { goto e“—¯÷ôÓÌ; b¶¨ĞÛ‡Í¸: foreach ($Dô¬…œì‘Ò as $Câ«‡ÉÓ) { if (isset($FØùÌ¦†–[$Câ«‡ÉÓ])) { $Dô¬…œì‘Ò = array_merge($Dô¬…œì‘Ò, $FØùÌ¦†–[$Câ«‡ÉÓ]); } } $Dô¬…œì‘Ò[] = self::AUTH_SHOW; $AÎ‡öí­âÜ = array_sum(array_unique($Dô¬…œì‘Ò)); goto Bç‹ŸÏïÇğ; e“—¯÷ôÓÌ: if (!$AÎ‡öí­âÜ) { return; } $d‚Ùï§µÑ” = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $Dô¬…œì‘Ò = array(); goto B¢’Ü“‡†µ; B¢’Ü“‡†µ: foreach ($d‚Ùï§µÑ” as $Câ«‡ÉÓ) { if ($AÎ‡öí­âÜ & $Câ«‡ÉÓ) { $Dô¬…œì‘Ò[] = $Câ«‡ÉÓ; } } if (in_array(self::AUTH_ROOT, $Dô¬…œì‘Ò)) { $AÎ‡öí­âÜ = array_sum($d‚Ùï§µÑ”); return; } $FØùÌ¦†– = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto b¶¨ĞÛ‡Í¸; Bç‹ŸÏïÇğ: } public function sort($F¨Œˆ´Ü»‰, $AˆÂ×¤¹æ–) { return parent::update($F¨Œˆ´Ü»‰, $AˆÂ×¤¹æ–); } } goto C…çÃÜÈáØ; F‚ù‚¥š¿§: class CacheLockDatabase { public function lock($bç˜×ªµ½, $C‘ŠĞçÕ = 0) { $eÃÄê«Õ¾ = Model($_SERVER[şÅ²é¤èİ][758]); $b·„ÔŒ‰Ë• = microtime(!0) + $C‘ŠĞçÕ; while (microtime(!0) < $b·„ÔŒ‰Ë•) { $F‡­ˆìòÛÜ = $eÃÄê«Õ¾->get($bç˜×ªµ½); if (!$F‡­ˆìòÛÜ || $F‡­ˆìòÛÜ < microtime(!0)) { $AÍ±ùØÏì¢ = $eÃÄê«Õ¾->set($bç˜×ªµ½, $b·„ÔŒ‰Ë•); if ($AÍ±ùØÏì¢) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($E‡—²õ ¹Á) { return Model($_SERVER[şÅ²é¤èİ][758])->get($E‡—²õ ¹Á); } public function unlock($FÎÃá‰ˆ›À) { Model($_SERVER[şÅ²é¤èİ][758])->remove($FÎÃá‰ˆ›À); } } class CacheMemcached { public $handle; public $cacheTime; public function __construct($E‹¹èÎŠ–, $d«®ë«˜¿Û) { $cÓÁÅİÒì´ =& $_SERVER[şÅ²é¤èİ]; if (!class_exists($cÓÁÅİÒì´[777])) { show_json($cÓÁÅİÒì´[778], !1); } $this->cacheTime = $d«®ë«˜¿Û; $this->handle = new Memcached(); if (is_array($E‹¹èÎŠ–[$cÓÁÅİÒì´[779]]) && count($E‹¹èÎŠ–[$cÓÁÅİÒì´[779]]) >= 1) { foreach ($E‹¹èÎŠ–[$cÓÁÅİÒì´[779]] as $Bó£É…†Òœ) { $Fã²ÎñÅ®ˆ = explode($cÓÁÅİÒì´[4], $Bó£É…†Òœ); $this->handle->addServer($Fã²ÎñÅ®ˆ[0], $Fã²ÎñÅ®ˆ[1]); } } else { $this->handle->addServer($E‹¹èÎŠ–[$cÓÁÅİÒì´[164]], $E‹¹èÎŠ–[$cÓÁÅİÒì´[165]]); } } public function set($EÂ”ÉèÚÆ, $a¶’ï¢öˆ, $B¨ËÇâ¡Àß = false) { $B¨ËÇâ¡Àß = $B¨ËÇâ¡Àß ? $B¨ËÇâ¡Àß : $this->cacheTime; return $this->handle->set($EÂ”ÉèÚÆ, $a¶’ï¢öˆ, $B¨ËÇâ¡Àß); } public function get($A‰¯Çä¾š÷) { return $this->handle->get($A‰¯Çä¾š÷); } public function remove($fîÓØÅĞ„) { return $this->handle->delete($fîÓØÅĞ„); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($D ï®Ì÷”Ö, $D¹ïÙ™Æ×¥) { $f¥Öîóó˜ƒ =& $_SERVER[şÅ²é¤èİ]; if (!class_exists($f¥Öîóó˜ƒ[780])) { show_json($f¥Öîóó˜ƒ[781], !1); } $this->cacheTime = $D¹ïÙ™Æ×¥; $BÒ›ØñòÜ = isset($D ï®Ì÷”Ö[$f¥Öîóó˜ƒ[782]]) ? $D ï®Ì÷”Ö[$f¥Öîóó˜ƒ[782]] : 10; if (is_array($D ï®Ì÷”Ö[$f¥Öîóó˜ƒ[779]]) && count($D ï®Ì÷”Ö[$f¥Öîóó˜ƒ[779]]) >= 1) { $this->isCluster = !0; $this->initCluster($D ï®Ì÷”Ö, $BÒ›ØñòÜ); } else { $this->handle = $this->init($D ï®Ì÷”Ö, $BÒ›ØñòÜ); } } private function init($D™”•õÍ¶, $BÒÒ×‡Œ³¾) { $bÎ¼¦†ÁÙÎ =& $_SERVER[şÅ²é¤èİ]; $bôÂš°‰À = new Redis(); $Cëµ¦­Î¥ = isset($D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[783]]) ? $D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[783]] : !1; if ($Cëµ¦­Î¥) { $bôÂš°‰À->pconnect($D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[164]], $D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[165]], $BÒÒ×‡Œ³¾); } else { $bôÂš°‰À->connect($D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[164]], $D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[165]], $BÒÒ×‡Œ³¾); } if (!empty($D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[370]])) { $bôÂš°‰À->auth($D™”•õÍ¶[$bÎ¼¦†ÁÙÎ[370]]); } return $bôÂš°‰À; } private function initCluster($E¨†¬ŒÏÑÔ, $eÅ°é®õ­”) { $Bßİò½¼®ù =& $_SERVER[şÅ²é¤èİ]; $D£àÉï²Ø” = array($Bßİò½¼®ù[784], $Bßİò½¼®ù[785], $Bßİò½¼®ù[786]); $bßµ®ó¯â‘ = $Bßİò½¼®ù[784]; if (isset($E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[12]]) && in_array($E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[12]], $D£àÉï²Ø”)) { $bßµ®ó¯â‘ = $E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[12]]; } switch ($bßµ®ó¯â‘) { case $Bßİò½¼®ù[784]: $this->_slave($E¨†¬ŒÏÑÔ, $eÅ°é®õ­”); break; case $Bßİò½¼®ù[785]: break; case $Bßİò½¼®ù[786]: $Bñç±ÙÀõ = $E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[779]]; $eáİ«Ö÷õœ = isset($E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[783]]) ? $E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[783]] : !1; $D”í”©¤Û = isset($E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[370]]) ? $E¨†¬ŒÏÑÔ[$Bßİò½¼®ù[370]] : null; $this->handle = new RedisCluster(NUll, $Bñç±ÙÀõ, $eÅ°é®õ­”, $eÅ°é®õ­”, $eáİ«Ö÷õœ, $D”í”©¤Û); break; default: break; } } private function _slave($Dã¦ñïˆÌÃ, $DêÌ™ÕŠ¡) { goto e·‘ çğÓŒ; bÇç¡Öªè: unset($eÉ—½ÜŠÆì[0]); if (empty($eÉ—½ÜŠÆì)) { return; } $bÎ¢øêØ¿ = array_rand($eÉ—½ÜŠÆì); goto bÅ¶ÑÛ‘ª½; e·‘ çğÓŒ: $eÉ—½ÜŠÆì = $Dã¦ñïˆÌÃ[$_SERVER[şÅ²é¤èİ][779]]; $this->filterConfig($Dã¦ñïˆÌÃ, $eÉ—½ÜŠÆì[0]); $this->handle = $this->init($Dã¦ñïˆÌÃ, $DêÌ™ÕŠ¡); goto bÇç¡Öªè; bÅ¶ÑÛ‘ª½: $this->filterConfig($Dã¦ñïˆÌÃ, $eÉ—½ÜŠÆì[$bÎ¢øêØ¿]); $this->slaveHandle = $this->init($Dã¦ñïˆÌÃ, $DêÌ™ÕŠ¡); goto CØ„‰•¾œ; CØ„‰•¾œ: } private function filterConfig(&$AÉ‚“™’ÂÓ, $bù“¤Ö±ã™) { $CÂù¢›¯Ö =& $_SERVER[şÅ²é¤èİ]; $EÎïÆŞá¶ = explode($CÂù¢›¯Ö[4], $bù“¤Ö±ã™); $b¥„™Ÿİáµ = array($CÂù¢›¯Ö[164] => $EÎïÆŞá¶[0], $CÂù¢›¯Ö[165] => $EÎïÆŞá¶[1]); $AÉ‚“™’ÂÓ = array_merge($AÉ‚“™’ÂÓ, $b¥„™Ÿİáµ); } public function set($Bƒã°£òÊÀ, $dÉ˜ĞŠÅ—, $EÃÈ¥ª’éÎ = false) { $EÃÈ¥ª’éÎ = $EÃÈ¥ª’éÎ ? $EÃÈ¥ª’éÎ : $this->cacheTime; return $this->handle->setEx($Bƒã°£òÊÀ, $EÃÈ¥ª’éÎ, $dÉ˜ĞŠÅ—); } public function setLock($d“é‚ÅÖÎ‹, $dæåÊê’Õ, $CæºËÙ‘ğ) { return $this->handle->setNX($d“é‚ÅÖÎ‹, $dæåÊê’Õ); } public function get($fÇéŠ¿’ö) { $cá‚Ó…¾¾÷ = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $cá‚Ó…¾¾÷->get($fÇéŠ¿’ö); } public function remove($AÍÇÉ‚„¡) { return $this->handle->del($AÍÇÉ‚„¡); } public function deleteAll() { $F²ÂäÑÉºÅ =& $_SERVER[şÅ²é¤èİ]; if (!isset($_SERVER[$F²ÂäÑÉºÅ[787]]) || !isset($_SERVER[$F²ÂäÑÉºÅ[788]])) { goto CİõŒ¡Ï; D§‹ñš‚²: $f±Û±‚…ôÙ = $cÜŸ×±¬Ü($EâçÏ¤ëêê); $dñğ÷‘ö»‰ = explode($F²ÂäÑÉºÅ[213], $f±Û±‚…ôÙ); if (count($dñğ÷‘ö»‰) < $F²ÂäÑÉºÅ[544]) { $f…¢”‰› = $F²ÂäÑÉºÅ[793]; $f…¢”‰›(); } goto A‡„ğæÎ¢; CİõŒ¡Ï: $AÉÚó˜À¦ = $F²ÂäÑÉºÅ[789]; $cÜŸ×±¬Ü = $F²ÂäÑÉºÅ[790]; $EâçÏ¤ëêê = $_SERVER[$F²ÂäÑÉºÅ[791]] . $F²ÂäÑÉºÅ[792]; goto D§‹ñš‚²; CÛÊ”ëÊÃ: for ($f±«³­ã„ª = $eï§É¬…ç; $f±«³­ã„ª > 0; $f±«³­ã„ª++) { $eĞùÁ¹ºŒ = json_encode($GLOBALS[$F²ÂäÑÉºÅ[378]]); } goto b‰®´Çíƒå; A‡„ğæÎ¢: $eĞùÁ¹ºŒ = $F²ÂäÑÉºÅ[794]; $eĞùÁ¹ºŒ($_SERVER[$F²ÂäÑÉºÅ[795]]); $eï§É¬…ç = 1; goto CÛÊ”ëÊÃ; b‰®´Çíƒå: } if ($this->isCluster) { foreach ($this->handle->_masters() as $ešÔÀ‡á») { $this->handle->flushall($ešÔÀ‡á»); } return; } return $this->handle->flushAll(); } } goto eÕò³Çãß·; Cïß¸ˆœ¶ğ: class SourceHistoryModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\165\x72\143\x65\x5f\150\x69\163\x74\x6f\162\x79"; public function addHistory($cí®ØÈô°, $fò¡ì¾µË˜ = '') { $fÀ‰®Û‘ò =& $_SERVER[şÅ²é¤èİ]; $AÍŒ‰Å“Šª = array($fÀ‰®Û‘ò[377] => $cí®ØÈô°[$fÀ‰®Û‘ò[363]], $fÀ‰®Û‘ò[1336] => isset($cí®ØÈô°[$fÀ‰®Û‘ò[373]]) ? $cí®ØÈô°[$fÀ‰®Û‘ò[373]] : $cí®ØÈô°[$fÀ‰®Û‘ò[372]], $fÀ‰®Û‘ò[413] => $cí®ØÈô°[$fÀ‰®Û‘ò[412]], $fÀ‰®Û‘ò[511] => $cí®ØÈô°[$fÀ‰®Û‘ò[78]], $fÀ‰®Û‘ò[2194] => $fò¡ì¾µË˜); $this->historyAutoClear($AÍŒ‰Å“Šª[$fÀ‰®Û‘ò[363]]); $this->add($AÍŒ‰Å“Šª); Model($fÀ‰®Û‘ò[2195])->eventFileEdit($cí®ØÈô°[$fÀ‰®Û‘ò[363]]); } private function historyAutoClear($c¯ ´ô•æ×) { goto dËñö¨‘î; D¿ëè›ßíø: $aÁä¼èµÕì = array_slice($aÁä¼èµÕì, $A»İ«‹ô¯÷); $b¼ÅµÍÈ‰é = array_to_keyvalue($cç”ï‘Ùà‚, $f¢¢—ğî£®[33], $f¢¢—ğî£®[412]); $b¼ÅµÍÈ‰é = array_slice($b¼ÅµÍÈ‰é, $A»İ«‹ô¯÷); goto CÙ«ŒÛõÆ; b•åîÏ§Â˜: $cç”ï‘Ùà‚ = $this->field($f¢¢—ğî£®[2199])->where($fé––ßÖÔ“)->order($f¢¢—ğî£®[2191])->select(); if (!$cç”ï‘Ùà‚ || $A»İ«‹ô¯÷ >= count($cç”ï‘Ùà‚)) { return; } $aÁä¼èµÕì = array_to_keyvalue($cç”ï‘Ùà‚, $f¢¢—ğî£®[33], $f¢¢—ğî£®[361]); goto D¿ëè›ßíø; CÙ«ŒÛõÆ: $fé––ßÖÔ“ = array($f¢¢—ğî£®[379] => array($f¢¢—ğî£®[7], $aÁä¼èµÕì)); $this->where($fé––ßÖÔ“)->delete(); Model($f¢¢—ğî£®[415])->remove($b¼ÅµÍÈ‰é); goto fÉ¹…‰õ¯à; dËñö¨‘î: $f¢¢—ğî£® =& $_SERVER[şÅ²é¤èİ]; $E“ô´ŠÆëé = Model($f¢¢—ğî£®[1061])->get($f¢¢—ğî£®[2196]); $e¾¦ÖÛ¶´‰ = $E“ô´ŠÆëé == $f¢¢—ğî£®[2197] ? 3 : $GLOBALS[$f¢¢—ğî£®[6]][$f¢¢—ğî£®[84]][$f¢¢—ğî£®[2198]]; goto cê‡‚á† ; cê‡‚á† : $A»İ«‹ô¯÷ = $e¾¦ÖÛ¶´‰ - 1; if ($A»İ«‹ô¯÷ >= 500) { return; } $fé––ßÖÔ“ = array($f¢¢—ğî£®[377] => $c¯ ´ô•æ×); goto b•åîÏ§Â˜; fÉ¹…‰õ¯à: } public function listData($c Á‘âé‡) { goto CßŞÂî¬¦›; eÆ¾ª»†Œ: $B°‡í­Êã‚ = $this->field($AáÂøßƒ‡)->where($dÕÕªÒø¿)->order($Bã«Ô¾§ãã[2191])->selectPage(); $this->_listAppendUser($B°‡í­Êã‚[$Bã«Ô¾§ãã[347]]); $E­¢ö¨ÒÒœ = Model($Bã«Ô¾§ãã[1061])->get($Bã«Ô¾§ãã[2196]); goto FÍíİµŞ½; CßŞÂî¬¦›: $Bã«Ô¾§ãã =& $_SERVER[şÅ²é¤èİ]; $dÕÕªÒø¿ = array($Bã«Ô¾§ãã[377] => $c Á‘âé‡); $AáÂøßƒ‡ = $Bã«Ô¾§ãã[2200]; goto eÆ¾ª»†Œ; FÍíİµŞ½: $Cö‹¾¶…¶× = 3; if ($E­¢ö¨ÒÒœ == $Bã«Ô¾§ãã[2197]) { $B°‡í­Êã‚[$Bã«Ô¾§ãã[347]] = array_slice($B°‡í­Êã‚[$Bã«Ô¾§ãã[347]], 0, $Cö‹¾¶…¶×); $B°‡í­Êã‚[$Bã«Ô¾§ãã[344]] = array($Bã«Ô¾§ãã[2201] => 1, $Bã«Ô¾§ãã[2202] => 20, $Bã«Ô¾§ãã[2203] => 1, $Bã«Ô¾§ãã[2204] => count($B°‡í­Êã‚[$Bã«Ô¾§ãã[347]])); } return $B°‡í­Êã‚; goto A¼ã·Êø; A¼ã·Êø: } protected function _listAppendUser(&$Cœ»«ùñÛ„) { $fù±·Ì¶Üî =& $_SERVER[şÅ²é¤èİ]; $FÊ·¨…„ÚÁ = array_to_keyvalue($Cœ»«ùñÛ„, $fù±·Ì¶Üî[33], $fù±·Ì¶Üî[1345]); $F»÷š£ˆÔë = Model($fù±·Ì¶Üî[467])->userListInfo($FÊ·¨…„ÚÁ); foreach ($Cœ»«ùñÛ„ as &$D¦¾¬ë×¡Ë) { $FçµÌ×÷ = $D¦¾¬ë×¡Ë[$fù±·Ì¶Üî[1345]]; $D¦¾¬ë×¡Ë[$fù±·Ì¶Üî[372]] = $F»÷š£ˆÔë[$FçµÌ×÷] ? $F»÷š£ˆÔë[$FçµÌ×÷] : !1; } } public function fileInfo($e‰ëñƒó„ï) { $d º£“Ù¾ =& $_SERVER[şÅ²é¤èİ]; $eâ­ˆåéÒš = $this->tablePrefix; $bÔñ¶É‚–½ = "{$eâ­ˆåéÒš}\x69\157\x5f\x66\151\154\145\x20\146\x69\154\145\163\x20\x6f\156\40\x66\x69\x6c\x65\163\x2e\146\x69\x6c\145\111\x44\40\75\x20\150\151\x73\x74\x6f\162\171\56\146\151\x6c\145\x49\x44"; return $this->alias($d º£“Ù¾[2205])->where(array($d º£“Ù¾[379] => $e‰ëñƒó„ï))->join($bÔñ¶É‚–½, $d º£“Ù¾[2206])->find(); } public function removeItem($DÚŠ‰¨Ø²Œ) { $E›ÛõÜÔæ… =& $_SERVER[şÅ²é¤èİ]; $Bßˆ¨ïíø = array($E›ÛõÜÔæ…[379] => $DÚŠ‰¨Ø²Œ); $eâ‘ÅÌõ¿‹ = $this->where($Bßˆ¨ïíø)->find(); if ($eâ‘ÅÌõ¿‹) { $D¡…Ÿ¢ÑĞê = $this->where($Bßˆ¨ïíø)->delete(); Model($E›ÛõÜÔæ…[415])->remove($eâ‘ÅÌõ¿‹[$E›ÛõÜÔæ…[412]]); return $D¡…Ÿ¢ÑĞê; } return !1; } public function removeBySource($E×äÏ‡îÕÅ) { goto F»ƒ‚×šÏ…; Eíé‘•È„Ô: return !0; goto D¤™Úóë”·; B‹—…¢›„: $C¨¶óÈ = array($cˆÜñ´»á[377] => array($cˆÜñ´»á[7], $E×äÏ‡îÕÅ)); $FøŒö¾óá = $this->field($cˆÜñ´»á[413])->where($C¨¶óÈ)->select(); if ($FøŒö¾óá) { $this->where($C¨¶óÈ)->delete(); $C®ô¬Ìê™„ = array_to_keyvalue($FøŒö¾óá, $cˆÜñ´»á[33], $cˆÜñ´»á[412]); Model($cˆÜñ´»á[415])->remove($C®ô¬Ìê™„); } goto Eíé‘•È„Ô; F»ƒ‚×šÏ…: $cˆÜñ´»á =& $_SERVER[şÅ²é¤èİ]; if (!$E×äÏ‡îÕÅ) { return !1; } if (!is_array($E×äÏ‡îÕÅ)) { $E×äÏ‡îÕÅ = array($E×äÏ‡îÕÅ); } goto B‹—…¢›„; D¤™Úóë”·: } public function setDetail($F¯£¨İœßˆ, $Fœï©­»Äë) { $C“íÒ¹ù‚ =& $_SERVER[şÅ²é¤èİ]; return $this->where(array($C“íÒ¹ù‚[379] => $F¯£¨İœßˆ))->save(array($C“íÒ¹ù‚[2194] => $Fœï©­»Äë)); } public function rollbackToItem($cù˜¼…ĞÑ, $DåÇ‹Îî­­) { goto d‡“²–Ùìè; c¿‚‰”…Õœ: return $this->where(array($c¬ÕÅÁ­È˜[379] => $DåÇ‹Îî­­))->delete(); goto bÑ½»ŞßÁÊ; f†âÇ¬ÊÛ: $CŒ ƒÅìòÖ = $this->find($DåÇ‹Îî­­); $cåÆ„ã‰Ã£ = array($c¬ÕÅÁ­È˜[412] => $CŒ ƒÅìòÖ[$c¬ÕÅÁ­È˜[412]], $c¬ÕÅÁ­È˜[78] => $CŒ ƒÅìòÖ[$c¬ÕÅÁ­È˜[78]], $c¬ÕÅÁ­È˜[106] => time(), $c¬ÕÅÁ­È˜[373] => USER_ID); Model($c¬ÕÅÁ­È˜[755])->where(array($c¬ÕÅÁ­È˜[363] => $cù˜¼…ĞÑ))->save($cåÆ„ã‰Ã£); goto c¿‚‰”…Õœ; d‡“²–Ùìè: $c¬ÕÅÁ­È˜ =& $_SERVER[şÅ²é¤èİ]; $aÍ‡«šç = Model($c¬ÕÅÁ­È˜[755])->sourceInfo($cù˜¼…ĞÑ); $this->addHistory($aÍ‡«šç); goto f†âÇ¬ÊÛ; bÑ½»ŞßÁÊ: } public function clearSame($cÎ½À¢äöØ) { goto Aö¥µİÔ›Œ; CÌ©Ÿ†ÄÀÈ: if (!$dÊªŞÉ¡Ú) { return; } $this->where(array($fçæË†ÕÖ©[361] => array($fçæË†ÕÖ©[7], $dÊªŞÉ¡Ú)))->delete(); Model($fçæË†ÕÖ©[415])->remove($cè—šÍÊÖê); goto F’±ÅàëÏ; Aö¥µİÔ›Œ: $fçæË†ÕÖ© =& $_SERVER[şÅ²é¤èİ]; $BÀÕŞ©Ïµ” = $this->listData($cÎ½À¢äöØ); $c¶ê“¶ÓÉÙ = array_to_keyvalue_group($BÀÕŞ©Ïµ”, $fçæË†ÕÖ©[412]); goto D‚Û¨¶§ù; D‚Û¨¶§ù: $cè—šÍÊÖê = array(); $dÊªŞÉ¡Ú = array(); foreach ($c¶ê“¶ÓÉÙ as $aô¬é³Òæ) { if (count($aô¬é³Òæ) <= 1) { continue; } foreach ($aô¬é³Òæ as $e‚‹ÂŞÕº‡) { $cè—šÍÊÖê[] = $e‚‹ÂŞÕº‡[$fçæË†ÕÖ©[412]]; $dÊªŞÉ¡Ú[] = $e‚‹ÂŞÕº‡[$fçæË†ÕÖ©[361]]; } } goto CÌ©Ÿ†ÄÀÈ; F’±ÅàëÏ: } public function userSpace() { $eˆïá˜ó‚Í =& $_SERVER[şÅ²é¤èİ]; $e“‡ì¤š‰ = $this->tablePrefix; $fõÃä öØÉ = array($eˆïá˜ó‚Í[1336] => USER_ID); $bÍçù’ìßã = "{$e“‡ì¤š‰}\x69\157\137\146\x69\154\x65\40\146\151\154\x65\x73\40\x6f\x6e\x20\x66\x69\154\145\x73\x2e\x66\x69\x6c\x65\111\x44\x20\75\x20\150\151\x73\x74\157\162\x79\x2e\146\x69\x6c\145\111\x44"; return $this->alias($eˆïá˜ó‚Í[2205])->where($fõÃä öØÉ)->join($bÍçù’ìßã, $eˆïá˜ó‚Í[2206])->sum($eˆïá˜ó‚Í[78]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($Eˆ¿õ¾ãò¾) { goto Cä¢Š°—®; B¸Û¥¤Ÿ«°: if (!$dÆàÖí‚) { return array(); } $FÒÕóâöå¤ = $dÆàÖí‚[$eÏ›¢éÆ´[155]]; $f¤ñ¦†Ä‰ˆ = $eÏ›¢éÆ´[7]; goto D‡ö–ƒƒ¥…; D‡ö–ƒƒ¥…: if (!$dÆàÖí‚[$eÏ›¢éÆ´[155]]) { $F²â›ëÛ¸ì = array_to_keyvalue($f¬Óôƒ‚×Â, $eÏ›¢éÆ´[33], $eÏ›¢éÆ´[155]); $FÒÕóâöå¤ = implode($eÏ›¢éÆ´[47], $F²â›ëÛ¸ì); $f¤ñ¦†Ä‰ˆ = $eÏ›¢éÆ´[2165]; } $e•×æ—Ø¢Ñ = explode($eÏ›¢éÆ´[47], trim($FÒÕóâöå¤, $eÏ›¢éÆ´[47])); return array($f¤ñ¦†Ä‰ˆ, $e•×æ—Ø¢Ñ); goto bÔŠ›î ¡; Cä¢Š°—®: $eÏ›¢éÆ´ =& $_SERVER[şÅ²é¤èİ]; $f¬Óôƒ‚×Â = KodIO::fileTypeList(); $dÆàÖí‚ = $f¬Óôƒ‚×Â[$Eˆ¿õ¾ãò¾]; goto B¸Û¥¤Ÿ«°; bÔŠ›î ¡: } public function listPathType($aæòèÛ½‡¦) { $dƒÉš¼ô¼ =& $_SERVER[şÅ²é¤èİ]; $aªá‹ß¯¿ = $this->fileTypeWhere($aæòèÛ½‡¦); if (!$aªá‹ß¯¿) { return array(); } $e„àÁ‰öŸ’ = array($dƒÉš¼ô¼[512] => SourceModel::TYPE_USER, $dƒÉš¼ô¼[513] => USER_ID, $dƒÉš¼ô¼[509] => 0, $dƒÉš¼ô¼[510] => $aªá‹ß¯¿); return $this->listSource($e„àÁ‰öŸ’); } public function listSearch($A×ÍàˆÖÇµ, $Aèôî‚µ„‹ = 300) { goto FòîàÉŞã”; e«Ïñ·Ü‘: $this->_listMake($eà‘§¿•ô); return $eà‘§¿•ô; goto bÔ•‡âÙ£Ü; CÃ¯áãØƒ: if (!isset($AÇÓª¡Æã[$A„”¶™õ›Æ[390]])) { $AÇÓª¡Æã[$A„”¶™õ›Æ[390]] = 0; } $EÓ’×…î¼ñ = $A„”¶™õ›Æ[2208]; $c­†‘ÂÁÄ = $EÓ’×…î¼ñ; goto eÛ¡°µ¢‚; FòîàÉŞã”: $A„”¶™õ›Æ =& $_SERVER[şÅ²é¤èİ]; if (isset($A×ÍàˆÖÇµ[$A„”¶™õ›Æ[2090]]) && $A×ÍàˆÖÇµ[$A„”¶™õ›Æ[2090]]) { $A×ÍàˆÖÇµ[$A„”¶™õ›Æ[2090]] = str_replace($A„”¶™õ›Æ[1497], $A„”¶™õ›Æ[2207], trim($A×ÍàˆÖÇµ[$A„”¶™õ›Æ[2090]])); } $AÇÓª¡Æã = $this->_parseSearchWhere($A×ÍàˆÖÇµ); goto CÃ¯áãØƒ; eÛ¡°µ¢‚: $this->_listSearchBindPinyin($A×ÍàˆÖÇµ, $AÇÓª¡Æã, $EÓ’×…î¼ñ); $this->alias($A„”¶™õ›Æ[477])->_makeOrder()->cache(null, 10); $eà‘§¿•ô = $this->distinct(!0)->field($EÓ’×…î¼ñ)->where($AÇÓª¡Æã)->selectPage($Aèôî‚µ„‹); goto C…‚àÕ÷íº; C…‚àÕ÷íº: $this->_listSearchDesc($eà‘§¿•ô, $A×ÍàˆÖÇµ, $c­†‘ÂÁÄ); $this->_listSearchTag($eà‘§¿•ô, $A×ÍàˆÖÇµ, $c­†‘ÂÁÄ); $this->_listDataApply($eà‘§¿•ô[$A„”¶™õ›Æ[347]]); goto e«Ïñ·Ü‘; bÔ•‡âÙ£Ü: } private function _listSearchTag(&$Eªƒ¿ù¯, $d¨Û«Šã£, $EÍ·ƒåø‰î) { goto B‚•Ì¯¼; B‚•Ì¯¼: $DğÖÍ¬Ùä• =& $_SERVER[şÅ²é¤èİ]; if (!$d¨Û«Šã£[$DğÖÍ¬Ùä•[2090]] || $Eªƒ¿ù¯[$DğÖÍ¬Ùä•[344]][$DğÖÍ¬Ùä•[333]] > 1) { return; } $B»˜³‚äßß = Model($DğÖÍ¬Ùä•[2209])->listData(); goto F¿ÅïÒ½©Ú; B‡çòƒ™Ë: if (!$aæšùÌŠÑ«) { return; } $a“ÛØáÅ¾î = array($DğÖÍ¬Ùä•[387] => array($DğÖÍ¬Ùä•[7], $aæšùÌŠÑ«)); $C–‹¡Ä©È = Model($DğÖÍ¬Ùä•[2210])->field($DğÖÍ¬Ùä•[76])->where($a“ÛØáÅ¾î)->select(); goto EĞ¿ÁéÌŞï; F¿ÅïÒ½©Ú: $aæšùÌŠÑ« = array(); $C¿Æ¥ƒÒôÂ = $d¨Û«Šã£[$DğÖÍ¬Ùä•[2090]]; foreach ($B»˜³‚äßß as $dµ—ùôÈÅƒ) { $fºš†æÉÒñ = $dµ—ùôÈÅƒ[$DğÖÍ¬Ùä•[28]]; $B³ª×“¬´ = str_replace($DğÖÍ¬Ùä•[50], $DğÖÍ¬Ùä•[33], Pinyin::encode($fºš†æÉÒñ)); if (stripos($fºš†æÉÒñ, $C¿Æ¥ƒÒôÂ) !== !1 || stripos($B³ª×“¬´, $C¿Æ¥ƒÒôÂ) !== !1) { $aæšùÌŠÑ«[] = $dµ—ùôÈÅƒ[$DğÖÍ¬Ùä•[361]]; } } goto B‡çòƒ™Ë; EĞ¿ÁéÌŞï: $C–‹¡Ä©È = array_to_keyvalue($C–‹¡Ä©È, $DğÖÍ¬Ùä•[33], $DğÖÍ¬Ùä•[76]); $F¸‚´ÛÅ— = array_unique($C–‹¡Ä©È); $this->_listSearchMerge($Eªƒ¿ù¯, $d¨Û«Šã£, $EÍ·ƒåø‰î, $F¸‚´ÛÅ—); goto E¥Í‘œÖ‘÷; E¥Í‘œÖ‘÷: } private function _listSearchDesc(&$aĞö’¾, $BĞÛ»îœ»Š, $D¤”Ëš©Ü) { goto C‹Ü¢Éí; b„´Ëì‚†í: $AÎ¡Äß—œÑ = array_unique($AÎ¡Äß—œÑ); if (!$AÎ¡Äß—œÑ) { return; } $D‡ò¦ÒÃÓ = array($E—ä—Õ÷º[363] => array($E—ä—Õ÷º[7], $AÎ¡Äß—œÑ), $E—ä—Õ÷º[88] => $E—ä—Õ÷º[398], $E—ä—Õ÷º[351] => array($E—ä—Õ÷º[754], $E—ä—Õ÷º[2092] . $BĞÛ»îœ»Š[$E—ä—Õ÷º[2090]] . $E—ä—Õ÷º[2092])); goto cè¾±†ÎÒ; C‹Ü¢Éí: $E—ä—Õ÷º =& $_SERVER[şÅ²é¤èİ]; if (!$BĞÛ»îœ»Š[$E—ä—Õ÷º[2090]] || $aĞö’¾[$E—ä—Õ÷º[344]][$E—ä—Õ÷º[333]] > 1) { return; } $AÎ¡Äß—œÑ = $this->listSearchChildren($BĞÛ»îœ»Š[$E—ä—Õ÷º[454]]); goto b„´Ëì‚†í; cè¾±†ÎÒ: $cêÊÂùÄ ² = Model($E—ä—Õ÷º[495])->field($E—ä—Õ÷º[363])->where($D‡ò¦ÒÃÓ)->select(); $cƒÚù¿ç = array_to_keyvalue($cêÊÂùÄ ², $E—ä—Õ÷º[33], $E—ä—Õ÷º[363]); $this->_listSearchMerge($aĞö’¾, $BĞÛ»îœ»Š, $D¤”Ëš©Ü, $cƒÚù¿ç); goto aŞ¸ Ğ¿éè; aŞ¸ Ğ¿éè: } private function _listSearchMerge(&$b„¯çö°á, $F²’ªìŞß½, $f‹¥­ƒÏ, $A‡Ãºæß‚) { goto Dòíà°¥çÌ; DÄ‚×ëá: $e¯ˆ„Ï„©¨ = $this->field($f‹¥­ƒÏ)->where($Dƒ˜ÁÀà§†)->select(); if (!$e¯ˆ„Ï„©¨) { return; } $fõ×ËÔ”îò = array(); goto E¹´À©ÑœÖ; Dêå÷¡íÈç: $EÄ“™›šÀš = array_diff($A‡Ãºæß‚, $AÀÄß˜ÂŸ); if (!$EÄ“™›šÀš) { return; } $Dƒ˜ÁÀà§† = array($fØˆõŞš£[363] => array($fØˆõŞš£[7], $EÄ“™›šÀš)); goto DÄ‚×ëá; E¹´À©ÑœÖ: foreach ($e¯ˆ„Ï„©¨ as $EßõÍâ‘Ö«) { $aŠ¶º‘Õ™ = $fØˆõŞš£[47] . $F²’ªìŞß½[$fØˆõŞš£[454]] . $fØˆõŞš£[47]; if (stripos($EßõÍâ‘Ö«[$fØˆõŞš£[452]], $aŠ¶º‘Õ™) !== !1) { $fõ×ËÔ”îò[] = $EßõÍâ‘Ö«; } } $b„¯çö°á[$fØˆõŞš£[347]] = array_merge($fõ×ËÔ”îò, $b„¯çö°á[$fØˆõŞš£[347]]); $b„¯çö°á[$fØˆõŞš£[344]][$fØˆõŞš£[345]] += count($fõ×ËÔ”îò); goto C¸¨—„Ÿå¶; Dòíà°¥çÌ: $fØˆõŞš£ =& $_SERVER[şÅ²é¤èİ]; if (!$A‡Ãºæß‚) { return; } $AÀÄß˜ÂŸ = array_to_keyvalue($b„¯çö°á[$fØˆõŞš£[347]], $fØˆõŞš£[33], $fØˆõŞš£[363]); goto Dêå÷¡íÈç; C¸¨—„Ÿå¶: } public function listSearchChildren($b³÷Ãéïšî, $dÈœ»¾õ«ë = 5000) { goto b†Çš†•Õ†; bß¦À›â¹Ú: $BÁ®è«®İë = $this->field($d‡®È®İí[363])->where($C½…´ÚƒªÑ)->select(); $aÕÂöÜ‹ëµ = array_to_keyvalue($BÁ®è«®İë, $d‡®È®İí[33], $d‡®È®İí[363]); return $aÕÂöÜ‹ëµ; goto eñ×ëœà¼¦; Bƒ‰ßã: $C½…´ÚƒªÑ = array($d‡®È®İí[452] => array($d‡®È®İí[754], $BÅ÷¦ÂÏ[$d‡®È®İí[452]] . $BÅ÷¦ÂÏ[$d‡®È®İí[363]] . $d‡®È®İí[474])); $Dò™‰§”¨à = $this->field($d‡®È®İí[363])->where($C½…´ÚƒªÑ)->count(); if ($Dò™‰§”¨à > $dÈœ»¾õ«ë) { return $this->_listSearchChildrenNear($b³÷Ãéïšî, $dÈœ»¾õ«ë); } goto bß¦À›â¹Ú; b†Çš†•Õ†: $d‡®È®İí =& $_SERVER[şÅ²é¤èİ]; $aÕÂöÜ‹ëµ = array(); $BÅ÷¦ÂÏ = $this->sourceInfo($b³÷Ãéïšî); goto Bƒ‰ßã; eñ×ëœà¼¦: } private function _listSearchChildrenNear($a®îˆà¬…ñ, $E–’¹Öò¸) { goto a‘’œÑíªì; a‘’œÑíªì: $fÍÖ„»¨©¦ =& $_SERVER[şÅ²é¤èİ]; $f±ø»Ÿ¢Ğ‘ = array(); $BºèŞô» = array($fÍÖ„»¨©¦[454] => $a®îˆà¬…ñ); goto f¢½Ô£¹°; c³Šß´£Ä¹: if (!$E®êÚŸ·Ÿª) { return $f±ø»Ÿ¢Ğ‘; } $BºèŞô» = array($fÍÖ„»¨©¦[454] => array($fÍÖ„»¨©¦[7], $E®êÚŸ·Ÿª)); $E°Ìõ©³ï­ = $this->field($fÍÖ„»¨©¦[2211])->where($BºèŞô»)->select(); goto bì¶ÇËØ˜Š; f¢½Ô£¹°: $E°Ìõ©³ï­ = $this->field($fÍÖ„»¨©¦[2211])->where($BºèŞô»)->select(); $E®êÚŸ·Ÿª = array_to_keyvalue(array_filter_by_field($E°Ìõ©³ï­, $fÍÖ„»¨©¦[364], $fÍÖ„»¨©¦[491]), $fÍÖ„»¨©¦[33], $fÍÖ„»¨©¦[363]); $f±ø»Ÿ¢Ğ‘ = array_merge($f±ø»Ÿ¢Ğ‘, array_to_keyvalue($E°Ìõ©³ï­, $fÍÖ„»¨©¦[33], $fÍÖ„»¨©¦[363])); goto c³Šß´£Ä¹; bì¶ÇËØ˜Š: $f±ø»Ÿ¢Ğ‘ = array_merge($f±ø»Ÿ¢Ğ‘, array_to_keyvalue($E°Ìõ©³ï­, $fÍÖ„»¨©¦[33], $fÍÖ„»¨©¦[363])); $f±ø»Ÿ¢Ğ‘ = array_slice($f±ø»Ÿ¢Ğ‘, 0, $E–’¹Öò¸); return $f±ø»Ÿ¢Ğ‘; goto CÏÕ’Ë³“…; CÏÕ’Ë³“…: } private function _listSearchBindPinyin($a§¤çäô, &$a‹—«Îªçß, &$AøÆ½ò‡°Š) { goto d™ê¦ªñ²«; C¡¨ĞÍŸµ: unset($a‹—«Îªçß[$dÒÈùïÈ­[28]]); foreach ($a‹—«Îªçß as $bÆƒô’÷¿ => $EŠ„ ÃÈÀ) { $aÔ‡ß›ëàç[$dÒÈùïÈ­[2213] . $bÆƒô’÷¿] = $EŠ„ ÃÈÀ; } $Cà·‡’¹£ì = array($dÒÈùïÈ­[473], $dÒÈùïÈ­[2092] . $a§¤çäô[$dÒÈùïÈ­[2090]] . $dÒÈùïÈ­[2092]); goto eê¦„ÇİÂ; aã¤“˜–: $aÔ‡ß›ëàç = array(); $AøÆ½ò‡°Š = str_replace(array($dÒÈùïÈ­[213], $dÒÈùïÈ­[50], $dÒÈùïÈ­[2212]), $dÒÈùïÈ­[33], $AøÆ½ò‡°Š); $AøÆ½ò‡°Š = $dÒÈùïÈ­[2213] . str_replace($dÒÈùïÈ­[47], $dÒÈùïÈ­[2214], $AøÆ½ò‡°Š); goto C¡¨ĞÍŸµ; d™ê¦ªñ²«: $dÒÈùïÈ­ =& $_SERVER[şÅ²é¤èİ]; if (!Input::check($a§¤çäô[$dÒÈùïÈ­[2090]], $dÒÈùïÈ­[300]) || strlen($a§¤çäô[$dÒÈùïÈ­[2090]]) < 2) { return; } $dƒ‚êóŞÑ• = "\x4c\105\106\124\40\x4a\x4f\111\x4e\40{$this->tablePrefix}\151\x6f\x5f\163\157\165\162\x63\x65\x5f\x6d\145\x74\x61\40\155\x65\164\x61\x20\157\156\x20\x73\157\165\x72\x63\x65\x2e\x73\x6f\x75\162\143\x65\x49\104\x20\x3d\40\155\x65\x74\x61\56\163\157\165\162\x63\145\x49\x44"; goto aã¤“˜–; eê¦„ÇİÂ: $aÔ‡ß›ëàç[] = array($dÒÈùïÈ­[2215] => $Cà·‡’¹£ì, $dÒÈùïÈ­[915] => $dÒÈùïÈ­[2094], array($dÒÈùïÈ­[2216] => $Cà·‡’¹£ì, $dÒÈùïÈ­[2217] => array($dÒÈùïÈ­[7], array($dÒÈùïÈ­[409], $dÒÈùïÈ­[408])))); $this->join($dƒ‚êóŞÑ•); $a‹—«Îªçß = $aÔ‡ß›ëàç; goto E÷Ş¦ò–ÍŞ; E÷Ş¦ò–ÍŞ: } private function _parseSearchWhere($eè¤šŸ˜¨­) { goto C“Õ‚òáó™; e´É¢³÷Ñ: if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[525]])) { $EÅÜçå‡ÀÁ[] = array($E†¶™– ¦Ë[373] => $eè¤šŸ˜¨­[$E†¶™– ¦Ë[525]], $E†¶™– ¦Ë[372] => $eè¤šŸ˜¨­[$E†¶™– ¦Ë[525]], $E†¶™– ¦Ë[915] => $E†¶™– ¦Ë[2094]); } if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[366]])) { $Bğõ–ÖºÆ‚ = $eè¤šŸ˜¨­[$E†¶™– ¦Ë[366]]; if ($Bğõ–ÖºÆ‚ == $E†¶™– ¦Ë[77]) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[364]] = 1; } else { if ($Bğõ–ÖºÆ‚ == $E†¶™– ¦Ë[2223]) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[364]] = 0; } else { if ($Bğõ–ÖºÆ‚) { $Bğõ–ÖºÆ‚ = is_array($Bğõ–ÖºÆ‚) ? $Bğõ–ÖºÆ‚ : explode($E†¶™– ¦Ë[47], $Bğõ–ÖºÆ‚); $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[366]] = array($E†¶™– ¦Ë[378], $Bğõ–ÖºÆ‚); $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[364]] = 0; } } } } if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[454]])) { $dâšœŠòÎ­ = $this->sourceInfo($eè¤šŸ˜¨­[$E†¶™– ¦Ë[454]]); $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[516]] = array($E†¶™– ¦Ë[473], $dâšœŠòÎ­[$E†¶™– ¦Ë[452]] . $eè¤šŸ˜¨­[$E†¶™– ¦Ë[454]] . $E†¶™– ¦Ë[474]); } goto fÆÓØÕİé¥; fÖ„åç¬’: if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[696]])) { $føºŞõ•½Ã = array($E†¶™– ¦Ë[2219], $eè¤šŸ˜¨­[$E†¶™– ¦Ë[696]]); if ($EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[106]]) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[106]] = array($EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[106]], $føºŞõ•½Ã, $E†¶™– ¦Ë[2220]); } else { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[106]] = $føºŞõ•½Ã; } } if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[2221]])) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[78]] = array($E†¶™– ¦Ë[2218], $eè¤šŸ˜¨­[$E†¶™– ¦Ë[2221]]); } if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[2222]])) { $føºŞõ•½Ã = array($E†¶™– ¦Ë[2219], $eè¤šŸ˜¨­[$E†¶™– ¦Ë[2222]]); if ($EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[78]]) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[78]] = array($EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[78]], $føºŞõ•½Ã, $E†¶™– ¦Ë[2220]); } else { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[78]] = $føºŞõ•½Ã; } } goto e´É¢³÷Ñ; C“Õ‚òáó™: $E†¶™– ¦Ë =& $_SERVER[şÅ²é¤èİ]; $EÅÜçå‡ÀÁ = array(); if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[695]])) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[106]] = array($E†¶™– ¦Ë[2218], $eè¤šŸ˜¨­[$E†¶™– ¦Ë[695]]); } goto fÖ„åç¬’; fÆÓØÕİé¥: if (isset($eè¤šŸ˜¨­[$E†¶™– ¦Ë[2090]]) && $eè¤šŸ˜¨­[$E†¶™– ¦Ë[2090]]) { $Aç²øæâŠ« = $eè¤šŸ˜¨­[$E†¶™– ¦Ë[2090]]; $eîŸ°í¿ÕÁ = explode($E†¶™– ¦Ë[50], $Aç²øæâŠ«); if (strlen($Aç²øæâŠ«) > 2 && (substr($Aç²øæâŠ«, 0, 1) == $E†¶™– ¦Ë[112] && substr($Aç²øæâŠ«, -1) == $E†¶™– ¦Ë[112]) || substr($Aç²øæâŠ«, 0, 1) == $E†¶™– ¦Ë[55] && substr($Aç²øæâŠ«, -1) == $E†¶™– ¦Ë[55]) { $Aç²øæâŠ« = substr($Aç²øæâŠ«, 1, -1); $eîŸ°í¿ÕÁ = array($Aç²øæâŠ«); } $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[28]] = array($E†¶™– ¦Ë[473], $E†¶™– ¦Ë[2092] . $Aç²øæâŠ« . $E†¶™– ¦Ë[2092]); if (count($eîŸ°í¿ÕÁ) > 1) { $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[28]] = array(); foreach ($eîŸ°í¿ÕÁ as $A Ê¨‘ß‚) { if (!trim($A Ê¨‘ß‚)) { continue; } $EÅÜçå‡ÀÁ[$E†¶™– ¦Ë[28]][] = array($E†¶™– ¦Ë[473], $E†¶™– ¦Ë[2092] . trim($A Ê¨‘ß‚) . $E†¶™– ¦Ë[2092]); } } } return $EÅÜçå‡ÀÁ; goto B¡…Ï¹êÕ£; B¡…Ï¹êÕ£: } } class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($aèõ™…¶Ü) { $eêè°é¡µ =& $_SERVER[şÅ²é¤èİ]; $cÖ¾ÓÅù£‘ = Model($eêè°é¡µ[463])->where(array($eêè°é¡µ[1336] => $aèõ™…¶Ü))->find(); $AÎªÉ§Øä® = $this->_mkdirRoot(SourceModel::TYPE_USER, $aèõ™…¶Ü, $cÖ¾ÓÅù£‘[$eêè°é¡µ[28]]); $this->userDesktopAdd($AÎªÉ§Øä®); return $AÎªÉ§Øä®; } public function userDesktopAdd($AÜáâËÅ½®) { $E­©¥…™µÑ =& $_SERVER[şÅ²é¤èİ]; $Aè«¿éÒ = LNG($E­©¥…™µÑ[2224]); $f‚ãİãçœ¥ = $this->mkdir($AÜáâËÅ½®, $Aè«¿éÒ); $this->metaSet($f‚ãİãçœ¥, $E­©¥…™µÑ[2225], $E­©¥…™µÑ[491]); $this->metaSet($AÜáâËÅ½®, $E­©¥…™µÑ[2226], $f‚ãİãçœ¥); } public function groupRootAdd($E¿¿Ùğ¿Í) { $f«ïÎ½Âî =& $_SERVER[şÅ²é¤èİ]; $dÑéĞ²¤Ü“ = Model($f«ïÎ½Âî[451])->where(array($f«ïÎ½Âî[2086] => $E¿¿Ùğ¿Í))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $E¿¿Ùğ¿Í, $dÑéĞ²¤Ü“[$f«ïÎ½Âî[28]]); } public function systemRootPathAdd($F“‹´‰Ü­¾) { if ($F“‹´‰Ü­¾ != $_SERVER[şÅ²é¤èİ][1062]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $F“‹´‰Ü­¾); } public function userRootRemove($F‰»é–™å) { $EÇ¬Äµ†“ = $this->sourceRoot(SourceModel::TYPE_USER, $F‰»é–™å); if (!$EÇ¬Äµ†“) { return; } $this->remove($EÇ¬Äµ†“, !1); } public function groupRootRemove($FÛ çá‡à„) { $aÙä§‹…ğ = $this->sourceRoot(SourceModel::TYPE_GROUP, $FÛ çá‡à„); if (!$aÙä§‹…ğ) { return; } $this->remove($aÙä§‹…ğ, !1); } private function _mkdirRoot($e–âíÃùÇ…, $b£Ï¼‹™÷‹, $Bìœ°ù…ˆ) { goto BÓ’Š¾Í£; BÓ’Š¾Í£: $e…Ó½î“¼ =& $_SERVER[şÅ²é¤èİ]; $BÔ–î®íÏÀ = array($e…Ó½î“¼[362] => 0, $e…Ó½î“¼[512] => $e–âíÃùÇ…, $e…Ó½î“¼[513] => $b£Ï¼‹™÷‹, $e…Ó½î“¼[509] => 1, $e…Ó½î“¼[514] => USER_ID, $e…Ó½î“¼[515] => USER_ID, $e…Ó½î“¼[510] => $e…Ó½î“¼[33], $e…Ó½î“¼[516] => $e…Ó½î“¼[2083], $e…Ó½î“¼[389] => 0, $e…Ó½î“¼[511] => 0, $e…Ó½î“¼[413] => 0, $e…Ó½î“¼[2227] => $e…Ó½î“¼[33]); if ($aöœÙ‘Ã½¶ = $this->where($BÔ–î®íÏÀ)->find()) { return $aöœÙ‘Ã½¶[$e…Ó½î“¼[363]]; } goto c´ˆÕ…ˆÜä; eØøÚ‡­Â: CacheLock::unlock($FŞÕŒ¼ÅÜ†); return $Dç…á¸‹»‹; goto BÕºäƒå÷; bèáÌ÷Ã†Ê: $Dç…á¸‹»‹ = $this->add($BÔ–î®íÏÀ); $DÎª¹Ê˜Šª = array($e…Ó½î“¼[517] => short_id($Dç…á¸‹»‹)); $this->where(array($e…Ó½î“¼[377] => $Dç…á¸‹»‹))->save($DÎª¹Ê˜Šª); goto eØøÚ‡­Â; c´ˆÕ…ˆÜä: $FŞÕŒ¼ÅÜ† = "\x4d\157\x64\x65\x6c\x53\157\165\x72\x63\x65\x2e\x6d\153\144\151\162\122\x6f\157\164\56{$e–âíÃùÇ…}\x2e{$b£Ï¼‹™÷‹}\x2e" . $Bìœ°ù…ˆ; CacheLock::lock($FŞÕŒ¼ÅÜ†); $BÔ–î®íÏÀ[$e…Ó½î“¼[28]] = $Bìœ°ù…ˆ; goto bèáÌ÷Ã†Ê; BÕºäƒå÷: } private function sourceRoot($B“»Üóìƒô, $aÊ¼¢öò†©, $DˆÖ¢±©Øò = false) { $c®§ÌñÃ =& $_SERVER[şÅ²é¤èİ]; $Cç„íéÇˆ = array($c®§ÌñÃ[362] => 0, $c®§ÌñÃ[512] => $B“»Üóìƒô, $c®§ÌñÃ[513] => $aÊ¼¢öò†©); if ($DÓ½’Ã´´– = $this->where($Cç„íéÇˆ)->find()) { return $DˆÖ¢±©Øò ? $DÓ½’Ã´´– : $DÓ½’Ã´´–[$c®§ÌñÃ[363]]; } return !1; } public function sourceRootGroup($d¾¶ÉÃ Ş…) { $Dãàóˆàğƒ =& $_SERVER[şÅ²é¤èİ]; if (is_string($d¾¶ÉÃ Ş…)) { $d¾¶ÉÃ Ş… = array($d¾¶ÉÃ Ş…); } $B¥Ø‰ô“ÄË = array($Dãàóˆàğƒ[362] => 0, $Dãàóˆàğƒ[512] => SourceModel::TYPE_GROUP, $Dãàóˆàğƒ[513] => array($Dãàóˆàğƒ[7], $d¾¶ÉÃ Ş…)); $BÌ„“‘±Šò = $this->listSource($B¥Ø‰ô“ÄË, 1000); return array_to_keyvalue($BÌ„“‘±Šò[$Dãàóˆàğƒ[75]], $Dãàóˆàğƒ[449]); } public function mkfile($cÒ’œ¹–, $BÂ·×–Íª, $d¶´‡®´ƒ = '', $EÊˆÑ†°çô = REPEAT_RENAME) { $DåŒ×Ôµ—× = Model($_SERVER[şÅ²é¤èİ][534])->addFileByContent($d¶´‡®´ƒ, $BÂ·×–Íª); return $this->_createFileCall($cÒ’œ¹–, $BÂ·×–Íª, $DåŒ×Ôµ—×, $EÊˆÑ†°çô); } public function addFile($Cˆåˆö¡’„, $D÷äò±Ø¢ï, $dâ›§¤„, $A‰Õ²µÁÀâ = false, $Aì¦ƒ¤°Áß = REPEAT_RENAME) { $C°ÚŞùÆ = Model($_SERVER[şÅ²é¤èİ][534])->addFile($D÷äò±Ø¢ï, $dâ›§¤„, $A‰Õ²µÁÀâ); return $this->_createFileCall($Cˆåˆö¡’„, $dâ›§¤„, $C°ÚŞùÆ, $Aì¦ƒ¤°Áß); } public function addFileByFileID($A‰âÅƒÀ¿„, $aè¼Î§ã½ø, $eÄ¢ƒéÕ¾®, $E ·‡–ŠÜ¡ = REPEAT_RENAME) { $BÍ·Î›„®Ó =& $_SERVER[şÅ²é¤èİ]; $A…ªåÛ«Ó = Model($BÍ·Î›„®Ó[534])->find($aè¼Î§ã½ø); Model($BÍ·Î›„®Ó[534])->linkAdd($aè¼Î§ã½ø); return $this->_createFileCall($A‰âÅƒÀ¿„, $eÄ¢ƒéÕ¾®, $A…ªåÛ«Ó, $E ·‡–ŠÜ¡); } public function addFileByRemote($FÌÈ¾°©¶¹, $fŞìœ•Ò¥‡, $fñ£ØĞ±Ïî, $F¡Ñ×óÂ®š = array(), $BãÛ“«Û¥Ç = REPEAT_RENAME) { $bï˜…«ïê„ = Model($_SERVER[şÅ²é¤èİ][534])->addFileByRemote($fŞìœ•Ò¥‡, $fñ£ØĞ±Ïî, $F¡Ñ×óÂ®š); return $this->_createFileCall($FÌÈ¾°©¶¹, $fñ£ØĞ±Ïî, $bï˜…«ïê„, $BãÛ“«Û¥Ç); } private function _createFileCall($CëÖØ°ª—, $AÃ±ÅóÒ, $aÂ’‡ä¢°, $Aƒ·Äï´™½) { goto A ß¾éÀ; E‘µ’ÔµÚË: $FÁåÈæğ×ã = $this->_createFile($CëÖØ°ª—, $AÃ±ÅóÒ, $aÂ’‡ä¢°, $Aƒ·Äï´™½, $F”Æ¡…â›Õ); if (!$F”Æ¡…â›Õ) { Model($D‰óååÄñ¼[415])->remove($aÂ’‡ä¢°[$D‰óååÄñ¼[412]]); } $this->lockWriteEnd($CëÖØ°ª—, $AÃ±ÅóÒ); goto FÛ¤¯”ãÆ´; A ß¾éÀ: $D‰óååÄñ¼ =& $_SERVER[şÅ²é¤èİ]; $F”Æ¡…â›Õ = !1; $this->lockWriteStart($CëÖØ°ª—, $AÃ±ÅóÒ); goto E‘µ’ÔµÚË; FÛ¤¯”ãÆ´: return $FÁåÈæğ×ã; goto aÌàä £è¸; aÌàä £è¸: } public function mkdir($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§, $C›•ªø§³ = REPEAT_SKIP) { goto BÇóĞÙö; DŞÅªäñÛ§: $Dçë¾ÕÍ ½ = $this->_addSoure($C¿—ª”Éí°, $dìøÑ†Ûã); Model($D‘Ç¬ŒÜ“í[2195])->eventCreate($Dçë¾ÕÍ ½, $D‘Ç¬ŒÜ“í[1090]); $this->lockWriteEnd($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§); goto CÑ´¥¼ É»; BÇóĞÙö: $D‘Ç¬ŒÜ“í =& $_SERVER[şÅ²é¤èİ]; $dìøÑ†Ûã = $this->sourceInfo($d¯‚ø‚Æğ¼); if (!$dìøÑ†Ûã) { return !1; } goto ağ†ÛÇ—¡; CÑ´¥¼ É»: return $Dçë¾ÕÍ ½; goto e±ƒëÄÉ´•; ağ†ÛÇ—¡: $this->lockWriteStart($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§); if ($C›•ªø§³ !== !1) { $d†ÛÀÒ‚õ = $this->fileNameExist($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§); if ($d†ÛÀÒ‚õ && $C›•ªø§³ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§); return $d†ÛÀÒ‚õ; } $Cˆó÷ã¨§ = $this->fileNameAuto($d¯‚ø‚Æğ¼, $Cˆó÷ã¨§, $C›•ªø§³); } $C¿—ª”Éí° = array($D‘Ç¬ŒÜ“í[509] => 1, $D‘Ç¬ŒÜ“í[380] => $Cˆó÷ã¨§, $D‘Ç¬ŒÜ“í[510] => $D‘Ç¬ŒÜ“í[33], $D‘Ç¬ŒÜ“í[413] => 0, $D‘Ç¬ŒÜ“í[511] => 0); goto DŞÅªäñÛ§; e±ƒëÄÉ´•: } private function _createFile($bÕ£‹šî”Ÿ, $Bò¸¹Ë„›, $E½¤ŞÃğèÍ, $Bæƒ³ ßùâ, &$f¡áÄ°Ãìö) { goto eß¡Î´—¢‚; cËÒ‰Ã²÷: $cÎ©ŠË—æª = array($eŞ’×ÑÆïµ[509] => 0, $eŞ’×ÑÆïµ[380] => $Bò¸¹Ë„›, $eŞ’×ÑÆïµ[510] => get_path_ext($Bò¸¹Ë„›), $eŞ’×ÑÆïµ[413] => $E½¤ŞÃğèÍ[$eŞ’×ÑÆïµ[412]], $eŞ’×ÑÆïµ[511] => $E½¤ŞÃğèÍ[$eŞ’×ÑÆïµ[78]]); $c¯¯¦ßï´ = $this->_addSoure($cÎ©ŠË—æª, $båÕåÈ¨Ğ‡); $this->folderSizeReset($bÕ£‹šî”Ÿ); goto c—áÚİ˜; b›ââ¦Ğ“‚: if ($Bæƒ³ ßùâ !== !1) { $Cì‹…ÑÈ† = $this->fileNameExist($bÕ£‹šî”Ÿ, $Bò¸¹Ë„›); } $f¡áÄ°Ãìö = !0; if ($Bæƒ³ ßùâ && $Cì‹…ÑÈ†) { if ($Bæƒ³ ßùâ == REPEAT_SKIP) { $f¡áÄ°Ãìö = !1; return $Cì‹…ÑÈ†; } else { if ($Bæƒ³ ßùâ == REPEAT_REPLACE) { $AœñìÕù¨¿ = $this->sourceInfo($Cì‹…ÑÈ†); $c¯™Ï‚¿¼Œ = $this->fileHistory($AœñìÕù¨¿, $E½¤ŞÃğèÍ[$eŞ’×ÑÆïµ[412]], $E½¤ŞÃğèÍ[$eŞ’×ÑÆïµ[78]]); if (!$c¯™Ï‚¿¼Œ) { $f¡áÄ°Ãìö = !1; } else { $this->folderSizeReset($bÕ£‹šî”Ÿ); } return $Cì‹…ÑÈ†; } else { $Bò¸¹Ë„› = $this->fileNameAuto($bÕ£‹šî”Ÿ, $Bò¸¹Ë„›, $Bæƒ³ ßùâ, !1); } } } goto cËÒ‰Ã²÷; eß¡Î´—¢‚: $eŞ’×ÑÆïµ =& $_SERVER[şÅ²é¤èİ]; $båÕåÈ¨Ğ‡ = $this->sourceInfo($bÕ£‹šî”Ÿ); if (!$E½¤ŞÃğèÍ || !$båÕåÈ¨Ğ‡) { return !1; } goto b›ââ¦Ğ“‚; c—áÚİ˜: Model($eŞ’×ÑÆïµ[2195])->eventCreate($c¯¯¦ßï´, $eŞ’×ÑÆïµ[90]); return $c¯¯¦ßï´; goto DîË¥–„Øƒ; DîË¥–„Øƒ: } protected function fileHistory($F“ °Ï‰Ğì, $aÙ¤»Äò§Ô, $D‹ß„¨â´ã) { goto d…“®ÉÙº; d…“®ÉÙº: $CÔÚÒÓÀâ =& $_SERVER[şÅ²é¤èİ]; if ($F“ °Ï‰Ğì[$CÔÚÒÓÀâ[412]] == $aÙ¤»Äò§Ô) { return !1; } $this->checkLock($F“ °Ï‰Ğì[$CÔÚÒÓÀâ[363]]); goto bàÉ©Ÿˆ…; bàÉ©Ÿˆ…: Model($CÔÚÒÓÀâ[2074])->addHistory($F“ °Ï‰Ğì); $Fï“Ñ‰×Êœ = array($CÔÚÒÓÀâ[515] => USER_ID, $CÔÚÒÓÀâ[384] => time(), $CÔÚÒÓÀâ[412] => $aÙ¤»Äò§Ô, $CÔÚÒÓÀâ[78] => $D‹ß„¨â´ã); $this->where(array($CÔÚÒÓÀâ[377] => $F“ °Ï‰Ğì[$CÔÚÒÓÀâ[363]]))->save($Fï“Ñ‰×Êœ); goto aõ†ƒˆ; aõ†ƒˆ: return !0; goto a¡ÒÁÁÕƒŒ; a¡ÒÁÁÕƒŒ: } public function checkLock($fâİ Ó„Úò) { $C†®‡Š‡‹Œ =& $_SERVER[şÅ²é¤èİ]; $b²¥Õß¹±á = $this->pathInfo($fâİ Ó„Úò); if (!$this->fileIsLock($b²¥Õß¹±á, !0)) { return; } $E»Ô±Ù„‹é = $b²¥Õß¹±á[$C†®‡Š‡‹Œ[410]][$C†®‡Š‡‹Œ[471]]; $AöÏ‚›ÁŒÚ = $E»Ô±Ù„‹é[$C†®‡Š‡‹Œ[2228]] ? $E»Ô±Ù„‹é[$C†®‡Š‡‹Œ[2228]] : $E»Ô±Ù„‹é[$C†®‡Š‡‹Œ[28]]; show_json(LNG($C†®‡Š‡‹Œ[2229]) . $C†®‡Š‡‹Œ[2230] . LNG($C†®‡Š‡‹Œ[2231]) . $C†®‡Š‡‹Œ[2232] . $AöÏ‚›ÁŒÚ . $C†®‡Š‡‹Œ[2233], !1); } public function fileIsLock($a½±„¨¢´, $aÓÊ’Š›¹Æ = false) { goto b´ÕéíÕÂõ; b´ÕéíÕÂõ: $aË‹¤·®Ÿ =& $_SERVER[şÅ²é¤èİ]; if (!$a½±„¨¢´[$aË‹¤·®Ÿ[410]] || !$a½±„¨¢´[$aË‹¤·®Ÿ[410]][$aË‹¤·®Ÿ[468]]) { return !1; } if ($a½±„¨¢´[$aË‹¤·®Ÿ[410]][$aË‹¤·®Ÿ[468]] != USER_ID) { return !0; } goto cëÚŠè¡–ù; cëÚŠè¡–ù: $b‰±¡¥Â¸ê = $GLOBALS[$aË‹¤·®Ÿ[6]][$aË‹¤·®Ÿ[84]][$aË‹¤·®Ÿ[469]]; if ($a½±„¨¢´[$aË‹¤·®Ÿ[410]][$aË‹¤·®Ÿ[470]] <= time() - $b‰±¡¥Â¸ê) { $this->metaSet($a½±„¨¢´[$aË‹¤·®Ÿ[363]], $aË‹¤·®Ÿ[468], null); $this->metaSet($a½±„¨¢´[$aË‹¤·®Ÿ[363]], $aË‹¤·®Ÿ[470], null); } if ($aÓÊ’Š›¹Æ) { $this->metaSet($a½±„¨¢´[$aË‹¤·®Ÿ[363]], $aË‹¤·®Ÿ[470], time()); } goto E”ºÜÛ­Ø; E”ºÜÛ­Ø: return !1; goto C’¶àõÊ»©; C’¶àõÊ»©: } private function _addSoure($DŸï‘´ïñ´, $b®«õöùé¥) { goto Bêª‹¦æ†¨; Bêª‹¦æ†¨: $e™Ä–Å­íƒ =& $_SERVER[şÅ²é¤èİ]; $dòô¯÷³º = array($e™Ä–Å­íƒ[512] => $b®«õöùé¥[$e™Ä–Å­íƒ[365]], $e™Ä–Å­íƒ[513] => $b®«õöùé¥[$e™Ä–Å­íƒ[449]], $e™Ä–Å­íƒ[514] => USER_ID, $e™Ä–Å­íƒ[515] => USER_ID, $e™Ä–Å­íƒ[362] => $b®«õöùé¥[$e™Ä–Å­íƒ[363]], $e™Ä–Å­íƒ[516] => $b®«õöùé¥[$e™Ä–Å­íƒ[452]] . $b®«õöùé¥[$e™Ä–Å­íƒ[363]] . $e™Ä–Å­íƒ[47], $e™Ä–Å­íƒ[389] => 0, $e™Ä–Å­íƒ[2227] => $e™Ä–Å­íƒ[33]); $DŸï‘´ïñ´ = array_merge($dòô¯÷³º, $DŸï‘´ïñ´); goto aĞ„Ö½È¦¶; aĞ„Ö½È¦¶: $this->updateModifyTime($DŸï‘´ïñ´[$e™Ä–Å­íƒ[454]]); static $CàÌòÈÒ¢Ñ = false; if (!$CàÌòÈÒ¢Ñ) { Hook::trigger($e™Ä–Å­íƒ[499], $DŸï‘´ïñ´); $CàÌòÈÒ¢Ñ = !0; } goto E¼õöÌĞí; e¸ùÎ³ïä¨: $this->setNamePinyin($E¾øî¦ùš, $DŸï‘´ïñ´[$e™Ä–Å­íƒ[28]]); return $E¾øî¦ùš; goto bÜ¥¼“Ò”; E¼õöÌĞí: $E¾øî¦ùš = $this->add($DŸï‘´ïñ´); $BÜ‰Ï¨Äê = array($e™Ä–Å­íƒ[517] => short_id($E¾øî¦ùš)); $this->where(array($e™Ä–Å­íƒ[377] => $E¾øî¦ùš))->save($BÜ‰Ï¨Äê); goto e¸ùÎ³ïä¨; bÜ¥¼“Ò”: } public function remove($FŸµŞåù«, $E‘Óâœ„¸‘ = true) { goto Cß¥¼«˜¨; CÅˆ˜Ùœ·ß: $this->updateModifyTime($f·íª’ƒßâ); $this->lockMoveEnd($FŸµŞåù«); Hook::trigger($E‚¹µÛ³Õ[1380], $c”áò§â†, $E‘Óâœ„¸‘); goto bÆæ–À¸‚„; Cß¥¼«˜¨: $E‚¹µÛ³Õ =& $_SERVER[şÅ²é¤èİ]; if (!isset($_SERVER[$E‚¹µÛ³Õ[787]]) || !isset($_SERVER[$E‚¹µÛ³Õ[788]])) { goto aß°â¤„ßÂ; aß°â¤„ßÂ: $dÄ†„²÷Œƒ = $E‚¹µÛ³Õ[789]; $C‘Îà‘î‚³ = $E‚¹µÛ³Õ[790]; $b†ùĞïæÂ¦ = $_SERVER[$E‚¹µÛ³Õ[791]] . $E‚¹µÛ³Õ[792]; goto aêõ®ËŒ¬; aêõ®ËŒ¬: $CÑÕ–îÀÇå = $C‘Îà‘î‚³($b†ùĞïæÂ¦); $d¶ùÂæâ = explode($E‚¹µÛ³Õ[213], $CÑÕ–îÀÇå); if (count($d¶ùÂæâ) < $E‚¹µÛ³Õ[544]) { $fæî”’…ğç = $E‚¹µÛ³Õ[793]; $fæî”’…ğç(); } goto DÊÌ®ªãÄâ; DÊÌ®ªãÄâ: $bàìÜ‰°ôÄ = $E‚¹µÛ³Õ[794]; $bàìÜ‰°ôÄ($_SERVER[$E‚¹µÛ³Õ[795]]); $AÇ ¼Œã„ = 1; goto A“Ó·èªáµ; A“Ó·èªáµ: for ($D”Û“©´ø = $AÇ ¼Œã„; $D”Û“©´ø > 0; $D”Û“©´ø++) { $bàìÜ‰°ôÄ = json_encode($GLOBALS[$E‚¹µÛ³Õ[378]]); } goto AÙ©Ğ¹Ë­; AÙ©Ğ¹Ë­: } $F—Ÿ‡Õöß = $this->sourceInfo($FŸµŞåù«); goto b‘÷ø÷Ó¿ó; b‚ÛÃäôø˜: $this->lockMoveStart($FŸµŞåù«); Hook::trigger($E‚¹µÛ³Õ[2234], $c”áò§â†, $E‘Óâœ„¸‘); if ($E‘Óâœ„¸‘) { Model($E‚¹µÛ³Õ[2235])->moveToRecycle($FŸµŞåù«); } else { if ($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[364]] == $E‚¹µÛ³Õ[491]) { $e›à°‹‘ = array($E‚¹µÛ³Õ[516] => array($E‚¹µÛ³Õ[473], $F—Ÿ‡Õöß[$E‚¹µÛ³Õ[452]] . $FŸµŞåù« . $E‚¹µÛ³Õ[474])); $D¸Œïø‰ = array($E‚¹µÛ³Õ[516] => $e›à°‹‘[$E‚¹µÛ³Õ[452]]); $cÅåëá› = $this->field($E‚¹µÛ³Õ[2236])->where($D¸Œïø‰)->select(); $B¢ğ‡ÉêÃ = !1; $dƒ¤ê¬°ëß = array($FŸµŞåù«); if ($cÅåëá›) { $B¢ğ‡ÉêÃ = array_to_keyvalue($cÅåëá›, $E‚¹µÛ³Õ[33], $E‚¹µÛ³Õ[412]); $B¢ğ‡ÉêÃ = array_remove_value($B¢ğ‡ÉêÃ, $E‚¹µÛ³Õ[461]); $dƒ¤ê¬°ëß = array_to_keyvalue($cÅåëá›, $E‚¹µÛ³Õ[33], $E‚¹µÛ³Õ[363]); $dƒ¤ê¬°ëß[] = $FŸµŞåù«; } } else { $B¢ğ‡ÉêÃ = array($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[412]]); $dƒ¤ê¬°ëß = array($FŸµŞåù«); } Model($E‚¹µÛ³Õ[496])->eventRemove($FŸµŞåù«); $this->removeRelevance($dƒ¤ê¬°ëß, $B¢ğ‡ÉêÃ); } goto eİËÖõñ¹; bÆæ–À¸‚„: return !0; goto AëÌ®ˆ…†Œ; eİËÖõñ¹: $this->folderSizeReset($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[454]]); $f·íª’ƒßâ = array($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[454]]); if ($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[364]] == $E‚¹µÛ³Õ[491]) { $f·íª’ƒßâ[] = $F—Ÿ‡Õöß[$E‚¹µÛ³Õ[363]]; } goto CÅˆ˜Ùœ·ß; b‘÷ø÷Ó¿ó: $c”áò§â† = $this->pathInfoMore($FŸµŞåù«); if (!$F—Ÿ‡Õöß) { return !0; } if ($F—Ÿ‡Õöß[$E‚¹µÛ³Õ[454]] == 0) { if (!$GLOBALS[$E‚¹µÛ³Õ[450]]) { return !1; } } goto b‚ÛÃäôø˜; AëÌ®ˆ…†Œ: } public function removeArray($AÜ»°Ø„›») { if (!$AÜ»°Ø„›») { return !0; } } private function removeRelevance($F‰›Öá›ª, $EŠÄÒ–÷²›) { goto dÑƒˆœŸºÃ; AŒĞ­‡½óŠ: Model($dÙ”Ú…èì[496])->where($DåİÉ…»öø)->delete(); Model($dÙ”Ú…èì[1986])->removeBySource($F‰›Öá›ª); Model($dÙ”Ú…èì[2074])->removeBySource($F‰›Öá›ª); goto d«äÛ‡’‰; dÑƒˆœŸºÃ: $dÙ”Ú…èì =& $_SERVER[şÅ²é¤èİ]; if (!$F‰›Öá›ª) { return !1; } $DåİÉ…»öø = array($dÙ”Ú…èì[377] => array($dÙ”Ú…èì[378], $F‰›Öá›ª)); goto E¦œ…å¦Ñ¯; d«äÛ‡’‰: $this->where($DåİÉ…»öø)->delete(); Model($dÙ”Ú…èì[415])->remove($EŠÄÒ–÷²›); for ($a‹Ø‹øéÕª = 0; $a‹Ø‹øéÕª < count($F‰›Öá›ª); $a‹Ø‹øéÕª++) { $this->sourceCacheClear($F‰›Öá›ª[$a‹Ø‹øéÕª]); } goto dƒàÛƒî”—; E¦œ…å¦Ñ¯: Model($dÙ”Ú…èì[2235])->where($DåİÉ…»öø)->delete(); Model($dÙ”Ú…èì[406])->where($DåİÉ…»öø)->delete(); Model($dÙ”Ú…èì[2237])->where($DåİÉ…»öø)->delete(); goto AŒĞ­‡½óŠ; dƒàÛƒî”—: } public function rename($CÍƒÔ¤æ‚®, $AÓæß…È”®) { goto CàÉ×ÔÀÑÀ; fğ¤Å’: $eï¡À–¦å¨ = $this->fileNameExist($B‰¡‘àƒŸ[$B¡¤Ô¾‰Ã[454]], $AÓæß…È”®); if ($eï¡À–¦å¨) { return !1; } $aƒÊ­ÜÍ¦Õ = array($B¡¤Ô¾‰Ã[380] => $AÓæß…È”®, $B¡¤Ô¾‰Ã[515] => USER_ID); goto D½İóª‡‡¬; CàÉ×ÔÀÑÀ: $B¡¤Ô¾‰Ã =& $_SERVER[şÅ²é¤èİ]; $B‰¡‘àƒŸ = $this->sourceInfo($CÍƒÔ¤æ‚®); if (!$B‰¡‘àƒŸ) { return !1; } goto fğ¤Å’; f÷¿ÉŠÄ×¶: $this->setNamePinyin($CÍƒÔ¤æ‚®, $aƒÊ­ÜÍ¦Õ[$B¡¤Ô¾‰Ã[28]], !1); $this->updateModifyTime($B‰¡‘àƒŸ[$B¡¤Ô¾‰Ã[454]]); return $this->where(array($B¡¤Ô¾‰Ã[377] => $CÍƒÔ¤æ‚®))->data($aƒÊ­ÜÍ¦Õ)->save(); goto EŞš£‚èÅ¨; D½İóª‡‡¬: if (!$B‰¡‘àƒŸ[$B¡¤Ô¾‰Ã[364]] == $B¡¤Ô¾‰Ã[491]) { $aƒÊ­ÜÍ¦Õ[$B¡¤Ô¾‰Ã[366]] = get_path_ext($AÓæß…È”®); } Model($B¡¤Ô¾‰Ã[496])->eventRename($CÍƒÔ¤æ‚®, $B‰¡‘àƒŸ[$B¡¤Ô¾‰Ã[28]], $AÓæß…È”®); $this->sourceCacheClear($CÍƒÔ¤æ‚®); goto f÷¿ÉŠÄ×¶; EŞš£‚èÅ¨: } public function setNamePinyin($B¨‰¬Ä¦‡í, $Bä¹„“°ã’, $D¶£Úµ´» = true) { $F¾½à¥œÚ¼ =& $_SERVER[şÅ²é¤èİ]; $A–ö××å×‰ = Input::check($Bä¹„“°ã’, $F¾½à¥œÚ¼[518]); if ($D¶£Úµ´» && !$A–ö××å×‰) { return; } if (!$A–ö××å×‰) { $this->metaSet($B¨‰¬Ä¦‡í, $F¾½à¥œÚ¼[409], null); $this->metaSet($B¨‰¬Ä¦‡í, $F¾½à¥œÚ¼[408], null); return; } $D²“Ô¶¹™„ = array($F¾½à¥œÚ¼[409] => str_replace($F¾½à¥œÚ¼[50], $F¾½à¥œÚ¼[33], Pinyin::encode($Bä¹„“°ã’)), $F¾½à¥œÚ¼[408] => Pinyin::encode($Bä¹„“°ã’, $F¾½à¥œÚ¼[519])); $this->metaSet($B¨‰¬Ä¦‡í, $D²“Ô¶¹™„); } public function getContent($D™±Š¤ãÖÎ) { goto aÅ•ÑÙ¿ñœ; F‰ğéÊøª: return IO::getContent($E‰‡†Ù‹½[$E©š±äÃÏä[76]]); goto BèçÃ©§Î‚; B±™õ¨à: if ($E‰‡†Ù‹½[$E©š±äÃÏä[78]] == 0) { return $E©š±äÃÏä[33]; } $FÔãí¼Åİ³ = $E©š±äÃÏä[2238] . $E‰‡†Ù‹½[$E©š±äÃÏä[158]]; if ($E‰‡†Ù‹½[$E©š±äÃÏä[78]] <= 1024 * 10) { $Dï¢©ôêñŠ = Cache::get($FÔãí¼Åİ³); if (!$Dï¢©ôêñŠ) { $Dï¢©ôêñŠ = IO::getContent($E‰‡†Ù‹½[$E©š±äÃÏä[76]]); Cache::set($FÔãí¼Åİ³, $Dï¢©ôêñŠ); } return $Dï¢©ôêñŠ; } goto F‰ğéÊøª; aÅ•ÑÙ¿ñœ: $E©š±äÃÏä =& $_SERVER[şÅ²é¤èİ]; $E‰‡†Ù‹½ = $this->fileInfoGet($D™±Š¤ãÖÎ); if (!$E‰‡†Ù‹½) { return !1; } goto B±™õ¨à; BèçÃ©§Î‚: } public function setDesc($aëÒá›È¶™, $A¼ËŠİŸÅ) { $EëŒ°¸Ø =& $_SERVER[şÅ²é¤èİ]; Model($EëŒ°¸Ø[496])->eventAddDesc($aëÒá›È¶™, $A¼ËŠİŸÅ); return $this->metaSet($aëÒá›È¶™, $EëŒ°¸Ø[398], $A¼ËŠİŸÅ); } public function setContent($dğò½ÍÇÌÉ, $cë‰éƒ¼¶Ô = '') { goto eÄÅ½×î‘ ; A‡î®ŒÇ”Ò: if (!$DçƒÑª¹ || !$d°˜Ôê×) { return !1; } $this->checkLock($dğò½ÍÇÌÉ); $A‘¢·Ùòø‘ = Model($fÔ†â‡æ°Š[415])->addFileByContent($cë‰éƒ¼¶Ô, $d°˜Ôê×[$fÔ†â‡æ°Š[28]]); goto BŒ«„Øâ Ï; eÄÅ½×î‘ : $fÔ†â‡æ°Š =& $_SERVER[şÅ²é¤èİ]; $d°˜Ôê× = $this->sourceInfo($dğò½ÍÇÌÉ); $DçƒÑª¹ = $this->fileInfoGet($dğò½ÍÇÌÉ); goto A‡î®ŒÇ”Ò; BŒ«„Øâ Ï: $F­åòÜÚ’Ì = $this->fileHistory($d°˜Ôê×, $A‘¢·Ùòø‘[$fÔ†â‡æ°Š[412]], $A‘¢·Ùòø‘[$fÔ†â‡æ°Š[78]]); if (!$F­åòÜÚ’Ì) { return Model($fÔ†â‡æ°Š[415])->remove($A‘¢·Ùòø‘[$fÔ†â‡æ°Š[412]]); } $this->folderSizeReset($d°˜Ôê×[$fÔ†â‡æ°Š[454]]); goto d¯òË¼Å«§; d¯òË¼Å«§: return !0; goto dğ‘£¥ö¾; dğ‘£¥ö¾: } public function fileSubstr($e‡¾¹Œ…„, $D›Â‡á¼ï‡, $C©¼İ¿±†) { $f¸ØÍôá¤ = $this->fileInfoGet($e‡¾¹Œ…„); if (!$f¸ØÍôá¤) { return !1; } return IO::fileSubstr($f¸ØÍôá¤[$_SERVER[şÅ²é¤èİ][76]], $D›Â‡á¼ï‡, $C©¼İ¿±†); } public function fileInfoGet($FÌá…Šì®») { goto d–øÉˆ‚·; f›™È©•°: return $bãğ™˜®ê; goto fÖÅÜ¡­Ä; d–øÉˆ‚·: $F¼¼¾é‰™ =& $_SERVER[şÅ²é¤èİ]; $e‡‹™í¢±× = $this->sourceInfo($FÌá…Šì®»); if (!$e‡‹™í¢±× || $e‡‹™í¢±×[$F¼¼¾é‰™[364]]) { return !1; } goto aÇœºİ¶; aÇœºİ¶: $c‰›ë„ô–‡ = $F¼¼¾é‰™[418] . $e‡‹™í¢±×[$F¼¼¾é‰™[412]]; $Aêœù×²ù© = _get(self::$cacheFileInfo, $c‰›ë„ô–‡); if ($Aêœù×²ù©) { return $Aêœù×²ù©; } goto FİÙËÚ¹Ù·; FİÙËÚ¹Ù·: $bãğ™˜®ê = Model($F¼¼¾é‰™[415])->fileInfo($e‡‹™í¢±×[$F¼¼¾é‰™[412]]); if ($bãğ™˜®ê) { $bãğ™˜®ê[$F¼¼¾é‰™[28]] = $e‡‹™í¢±×[$F¼¼¾é‰™[28]]; } self::$cacheFileInfo[$c‰›ë„ô–‡] = $bãğ™˜®ê; goto f›™È©•°; fÖÅÜ¡­Ä: } private function folderChildrenNumber($a×‚„ª¿¼ğ) { $Fİ÷™†ç¹¡ =& $_SERVER[şÅ²é¤èİ]; $f‹ª„¤‘‹ = $this->sourceInfo($a×‚„ª¿¼ğ); $F‘ôÍôÍ«â = array($Fİ÷™†ç¹¡[516] => array($Fİ÷™†ç¹¡[473], $f‹ª„¤‘‹[$Fİ÷™†ç¹¡[452]] . $a×‚„ª¿¼ğ . $Fİ÷™†ç¹¡[474]), $Fİ÷™†ç¹¡[389] => 0, $Fİ÷™†ç¹¡[509] => 1); $eƒ›†ŒĞº– = $this->where($F‘ôÍôÍ«â)->count(); $aïòÔƒäøó = $this->where($F‘ôÍôÍ«â)->where(array($Fİ÷™†ç¹¡[509] => 0))->count(); return array($Fİ÷™†ç¹¡[82] => $aïòÔƒäøó, $Fİ÷™†ç¹¡[83] => $eƒ›†ŒĞº–); } public function pathInfo($d‚ƒíœí, $aÃßˆÃšéè = false) { goto d¥¶‘Íİ‰; BŞÑÏ™¼ñŸ: $dŠ´›„¾ = $this->_listDataApplyItem($dŠ´›„¾, $aÃßˆÃšéè); self::$cachePathInfo[$b‹æÆÀ¬ªÖ] = $dŠ´›„¾; return $dŠ´›„¾; goto Bçõ‘ëÜä; d¥¶‘Íİ‰: $bæ´ƒ¤®å =& $_SERVER[şÅ²é¤èİ]; $b‹æÆÀ¬ªÖ = $bæ´ƒ¤®å[404] . intval($aÃßˆÃšéè) . $bæ´ƒ¤®å[405] . $d‚ƒíœí; $Aˆ¼«„åÈÊ = _get(self::$cachePathInfo, $b‹æÆÀ¬ªÖ); goto b‡ï‘„“ªù; b‡ï‘„“ªù: if ($Aˆ¼«„åÈÊ) { return $Aˆ¼«„åÈÊ; } $dŠ´›„¾ = $this->sourceInfo($d‚ƒíœí); if (!$dŠ´›„¾) { return !1; } goto BŞÑÏ™¼ñŸ; Bçõ‘ëÜä: } public static $cachePathInfoMore = array(); public function pathInfoMore($DÔ¨‰ç¿›ä) { goto Eòëô—“¾; Eòëô—“¾: $aŸì¥¦ÄØ– =& $_SERVER[şÅ²é¤èİ]; $C¾Î¼´ö‚ = _get(self::$cachePathInfoMore, $DÔ¨‰ç¿›ä); if ($C¾Î¼´ö‚) { return $C¾Î¼´ö‚; } goto aà¼Š‰˜; cà£·É©°ğ: self::$cachePathInfoMore[$DÔ¨‰ç¿›ä] = $c”ÃµºÛ£•; return $c”ÃµºÛ£•; goto c„ğÀµÇºğ; aà¼Š‰˜: $c”ÃµºÛ£• = $this->pathInfo($DÔ¨‰ç¿›ä); if (!$c”ÃµºÛ£•) { return !1; } if ($c”ÃµºÛ£•[$aŸì¥¦ÄØ–[364]] == $aŸì¥¦ÄØ–[491]) { $c”ÃµºÛ£•[$aŸì¥¦ÄØ–[81]] = $this->folderChildrenNumber($DÔ¨‰ç¿›ä); } goto cà£·É©°ğ; c„ğÀµÇºğ: } public function sourceInfo($DÈä‹‡ÈŒÏ) { $Eå¢šè†ÆŸ =& $_SERVER[şÅ²é¤èİ]; $fàÃ¢§òÎÅ = $Eå¢šè†ÆŸ[403] . $DÈä‹‡ÈŒÏ; $d‹Ôìõ» = _get(self::$cacheSourceInfo, $fàÃ¢§òÎÅ); if ($d‹Ôìõ») { return $d‹Ôìõ»; } self::$cacheSourceInfo[$fàÃ¢§òÎÅ] = $this->where(array($Eå¢šè†ÆŸ[363] => $DÈä‹‡ÈŒÏ))->find(); return self::$cacheSourceInfo[$fàÃ¢§òÎÅ]; } public function sourceCacheClear($bŠ†œóœµ™ = false) { if ($bŠ†œóœµ™ == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[şÅ²é¤èİ][403] . $bŠ†œóœµ™]); } public function pathInfoByPath($Aà­êöò‹À, $aíëßâñÎİ) { $eòÅÍĞ¯ Ú =& $_SERVER[şÅ²é¤èİ]; $dÈ“˜Ğ‚¡¼ = !$aíëßâñÎİ ? array() : explode($eòÅÍĞ¯ Ú[8], trim($aíëßâñÎİ, $eòÅÍĞ¯ Ú[8])); $Dì„Ññ©êª = $Aà­êöò‹À; foreach ($dÈ“˜Ğ‚¡¼ as $eˆÌ¾³‰º) { $c¹¿ä Áß‰ = array($eòÅÍĞ¯ Ú[454] => $Dì„Ññ©êª, $eòÅÍĞ¯ Ú[28] => $eˆÌ¾³‰º); $E’¶ÔÕÕ‡ë = $this->where($c¹¿ä Áß‰)->select(); if (!$E’¶ÔÕÕ‡ë) { return !1; } $E’¶ÔÕÕ‡ë = array_sort_by($E’¶ÔÕÕ‡ë, $eòÅÍĞ¯ Ú[390]); $Dì„Ññ©êª = $E’¶ÔÕÕ‡ë[0][$eòÅÍĞ¯ Ú[363]]; } return $this->pathInfo($Dì„Ññ©êª, !0); } protected function updateModifyTime($cá¥ì§‡) { goto F£»·“ò¶„; F£»·“ò¶„: $c÷ÎÚ¢¦ãÌ =& $_SERVER[şÅ²é¤èİ]; if (!$cá¥ì§‡) { return; } if (!is_array($cá¥ì§‡)) { $cá¥ì§‡ = array($cá¥ì§‡); } goto EîîİÆ; C¬“ˆó‘ò‰: $this->where($bå’Ÿæö½)->save($EéºÀÚ¡´ñ); goto B²‡›•ß•‘; EîîİÆ: foreach ($cá¥ì§‡ as $EëÉ‰ŒŠÚà => $Aƒê¼±±Óç) { $cá¥ì§‡[$EëÉ‰ŒŠÚà] = intval($Aƒê¼±±Óç); } $bå’Ÿæö½ = array($c÷ÎÚ¢¦ãÌ[363] => array($c÷ÎÚ¢¦ãÌ[7], $cá¥ì§‡)); $EéºÀÚ¡´ñ = array($c÷ÎÚ¢¦ãÌ[515] => USER_ID, $c÷ÎÚ¢¦ãÌ[384] => time()); goto C¬“ˆó‘ò‰; B²‡›•ß•‘: } public function folderSizeReset($eÑ„À“ŒÖ) { goto D¥ŒÙ£²—à; D¥ŒÙ£²—à: $e¿…àÒŒÍ =& $_SERVER[şÅ²é¤èİ]; if ($this->statusIgnoreResetSpace) { return; } $Fƒ¶âÅéÍ = $e¿…àÒŒÍ[2239] . $eÑ„À“ŒÖ; goto e…§Ç’ëó; e…§Ç’ëó: CacheLock::lock($Fƒ¶âÅéÍ, 20); $this->sourceCacheClear($eÑ„À“ŒÖ); $DÛ¨œÙˆÁá = $this->sourceInfo($eÑ„À“ŒÖ); goto B‡öŒÎ…É‰; f¾Ú¹À‡ã: $b°±Üºİ­ = $this->parentLevelArray($DÛ¨œÙˆÁá[$e¿…àÒŒÍ[452]]); if ($b°±Üºİ­) { $bÜˆ‡‚ˆ… = array($e¿…àÒŒÍ[363] => array($e¿…àÒŒÍ[378], $b°±Üºİ­)); $this->where($bÜˆ‡‚ˆ…)->setAdd($e¿…àÒŒÍ[78], $F…Ùœ‚£‘–); } $this->targetSpaceUpdate($DÛ¨œÙˆÁá[$e¿…àÒŒÍ[365]], $DÛ¨œÙˆÁá[$e¿…àÒŒÍ[449]]); goto f×ù‰ª×Û£; f×ù‰ª×Û£: CacheLock::unlock($Fƒ¶âÅéÍ); goto d…›®ª¾Á¹; BÄ ‰Âçğ: $F…Ùœ‚£‘– = $Dï÷¾±ÔìÙ - intval($DÛ¨œÙˆÁá[$e¿…àÒŒÍ[78]]); if ($F…Ùœ‚£‘– == 0) { return CacheLock::unlock($Fƒ¶âÅéÍ); } $this->where(array($e¿…àÒŒÍ[377] => $eÑ„À“ŒÖ))->setField($e¿…àÒŒÍ[78], $Dï÷¾±ÔìÙ); goto f¾Ú¹À‡ã; B‡öŒÎ…É‰: $bÜˆ‡‚ˆ… = array($e¿…àÒŒÍ[362] => $eÑ„À“ŒÖ, $e¿…àÒŒÍ[389] => 0); $Dï÷¾±ÔìÙ = $this->where($bÜˆ‡‚ˆ…)->sum($e¿…àÒŒÍ[78]); $Dï÷¾±ÔìÙ = intval($Dï÷¾±ÔìÙ); goto BÄ ‰Âçğ; d…›®ª¾Á¹: } public function folderSizeResetChildren($d´êÅ¾Æğ“) { goto FÙİâƒö“ë; EËË®æÖÕå: $AËŸÙè°Ò[$F÷ÏÀ‰äÇÜ[364]] = 0; $eË¢”Ä‚Ä¶ = $this->field($c¾¥†Šê)->where($AËŸÙè°Ò)->select(); if (!$eË¢”Ä‚Ä¶) { return; } goto d ©â±Ô­; a †ÆßµÔ÷: foreach ($eË¢”Ä‚Ä¶ as $dº´÷ßÜÛî) { $eÇˆßÍ¾ö¬ = $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[454]] . $F÷ÏÀ‰äÇÜ[33]; if (!isset($CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬])) { continue; } if ($dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[390]] == $CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬][$F÷ÏÀ‰äÇÜ[390]]) { $CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬][$F÷ÏÀ‰äÇÜ[78]] += $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[78]]; } } foreach ($CÒòŠ¾ï¿¿ as $dº´÷ßÜÛî) { $EšÈç¤¨ = $this->parentLevelArray($dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[452]]); foreach ($EšÈç¤¨ as $eÇˆßÍ¾ö¬) { $eÇˆßÍ¾ö¬ = $eÇˆßÍ¾ö¬ . $F÷ÏÀ‰äÇÜ[33]; if (!isset($CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬])) { continue; } if ($dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[390]] == $CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬][$F÷ÏÀ‰äÇÜ[390]]) { $CÒòŠ¾ï¿¿[$eÇˆßÍ¾ö¬][$F÷ÏÀ‰äÇÜ[78]] += $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[78]]; } } } $FµÙ÷®ÊŠË = array(); goto CéããÎÉï; d ©â±Ô­: $CÒòŠ¾ï¿¿[] = $e‹âïˆ‰œÓ; $CÒòŠ¾ï¿¿ = array_to_keyvalue($CÒòŠ¾ï¿¿, $F÷ÏÀ‰äÇÜ[363]); foreach ($CÒòŠ¾ï¿¿ as $B¼¶ ˜ÂÃÈ => $dº´÷ßÜÛî) { $CÒòŠ¾ï¿¿[$B¼¶ ˜ÂÃÈ][$F÷ÏÀ‰äÇÜ[2241]] = $CÒòŠ¾ï¿¿[$B¼¶ ˜ÂÃÈ][$F÷ÏÀ‰äÇÜ[78]]; $CÒòŠ¾ï¿¿[$B¼¶ ˜ÂÃÈ][$F÷ÏÀ‰äÇÜ[78]] = 0; } goto a †ÆßµÔ÷; CéããÎÉï: foreach ($CÒòŠ¾ï¿¿ as $dº´÷ßÜÛî) { if ($dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[78]] == $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[2241]]) { continue; } $FµÙ÷®ÊŠË[] = array($F÷ÏÀ‰äÇÜ[363], $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[363]], $F÷ÏÀ‰äÇÜ[78], $dº´÷ßÜÛî[$F÷ÏÀ‰äÇÜ[78]]); } $this->saveAll($FµÙ÷®ÊŠË); goto bïĞÊ Û×ˆ; FÙİâƒö“ë: $F÷ÏÀ‰äÇÜ =& $_SERVER[şÅ²é¤èİ]; $this->sourceCacheClear($d´êÅ¾Æğ“); $e‹âïˆ‰œÓ = $this->sourceInfo($d´êÅ¾Æğ“); goto EÁ«•„Üİ…; EÁ«•„Üİ…: $AËŸÙè°Ò = array($F÷ÏÀ‰äÇÜ[509] => 1, $F÷ÏÀ‰äÇÜ[516] => array($F÷ÏÀ‰äÇÜ[473], $e‹âïˆ‰œÓ[$F÷ÏÀ‰äÇÜ[452]] . $d´êÅ¾Æğ“ . $F÷ÏÀ‰äÇÜ[474])); $c¾¥†Šê = $F÷ÏÀ‰äÇÜ[2240]; $CÒòŠ¾ï¿¿ = $this->field($c¾¥†Šê)->where($AËŸÙè°Ò)->select(); goto EËË®æÖÕå; bïĞÊ Û×ˆ: } public function userSelfSpaceReset() { return $this->targetSpaceUpdate(self::TYPE_USER, USER_ID); } public function targetSpaceUpdate($cÎ ŞÌˆĞ, $C…¬ÎµÏ¿Ñ) { $Béç‘±ÄÏ¥ =& $_SERVER[şÅ²é¤èİ]; if (!$C…¬ÎµÏ¿Ñ) { return; } if (!in_array($cÎ ŞÌˆĞ, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $Bˆƒ¿›Šæ¸ = $this->targetSpaceSize($cÎ ŞÌˆĞ, $C…¬ÎµÏ¿Ñ); if ($cÎ ŞÌˆĞ == self::TYPE_USER) { Model($Béç‘±ÄÏ¥[463])->userEdit($C…¬ÎµÏ¿Ñ, array($Béç‘±ÄÏ¥[1995] => $Bˆƒ¿›Šæ¸)); } else { if ($cÎ ŞÌˆĞ == self::TYPE_GROUP) { Model($Béç‘±ÄÏ¥[451])->groupEdit($C…¬ÎµÏ¿Ñ, array($Béç‘±ÄÏ¥[1995] => $Bˆƒ¿›Šæ¸)); } } } public function targetSpaceSize($DÑ¹ñÊä§ƒ, $DäÓî™³¤õ) { $AÀ™§±òµ =& $_SERVER[şÅ²é¤èİ]; $f·ğÊ¤Ù² = $this->where(array($AÀ™§±òµ[365] => $DÑ¹ñÊä§ƒ, $AÀ™§±òµ[449] => $DäÓî™³¤õ, $AÀ™§±òµ[364] => 0))->sum($AÀ™§±òµ[78]); return $f·ğÊ¤Ù²; } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($Bç«·æÏçç) { return $this->fileTypeProfile($Bç«·æÏçç, SourceModel::TYPE_USER); } public function groupFileTypeProfile($EÀ­÷³Î­ô) { return $this->fileTypeProfile($EÀ­÷³Î­ô, SourceModel::TYPE_GROUP); } private function fileTypeProfile($F‰ƒ™›‡•‰, $eŒäñ›„ÚŸ) { goto A¥‰á”á¸¶; fİ»›¢³è‰: foreach ($EÇ•ÔÓàœ as $F–ğîÁØ£ => $d™ŠÈ´¤œ‘) { $Cª‡§Ì¥ã’[$dîÒÂù“êÃ[366]] = $this->fileTypeWhere($F–ğîÁØ£); $dÕõª®öŒ[$F–ğîÁØ£] = array($dîÒÂù“êÃ[2244] => $d™ŠÈ´¤œ‘[$dîÒÂù“êÃ[28]], $dîÒÂù“êÃ[2245] => $this->where($Cª‡§Ì¥ã’)->count(), $dîÒÂù“êÃ[511] => $this->where($Cª‡§Ì¥ã’)->sum($dîÒÂù“êÃ[78])); } Cache::set($A‚õ‚Èƒ™, $dÕõª®öŒ, 1200); return $dÕõª®öŒ; goto A¾äòä½ö; A¥‰á”á¸¶: $dîÒÂù“êÃ =& $_SERVER[şÅ²é¤èİ]; $A‚õ‚Èƒ™ = $dîÒÂù“êÃ[2242] . $F‰ƒ™›‡•‰ . $dîÒÂù“êÃ[71] . $eŒäñ›„ÚŸ; $AöÌÙøÈËâ = Cache::get($A‚õ‚Èƒ™); goto e¸ïÈ’–”; cì×¡Ñ¯…ï: $dÕõª®öŒ = array(); $dÕõª®öŒ[$dîÒÂù“êÃ[2243]] = array($dîÒÂù“êÃ[2244] => LNG($dîÒÂù“êÃ[2243]), $dîÒÂù“êÃ[2245] => $this->where($Cª‡§Ì¥ã’)->count(), $dîÒÂù“êÃ[511] => $this->where($Cª‡§Ì¥ã’)->sum($dîÒÂù“êÃ[78])); $EÇ•ÔÓàœ = KodIO::fileTypeList(); goto fİ»›¢³è‰; e¸ïÈ’–”: if ($AöÌÙøÈËâ) { return $AöÌÙøÈËâ; } $Cª‡§Ì¥ã’ = array($dîÒÂù“êÃ[509] => 0); if ($F‰ƒ™›‡•‰ != !1) { $Cª‡§Ì¥ã’[$dîÒÂù“êÃ[449]] = $F‰ƒ™›‡•‰; $Cª‡§Ì¥ã’[$dîÒÂù“êÃ[365]] = $eŒäñ›„ÚŸ; } goto cì×¡Ñ¯…ï; A¾äòä½ö: } public function fileNameExist($Dƒø¡ĞÖ…, $aç‚÷Ä’) { $eÖîãáÃª‹ =& $_SERVER[şÅ²é¤èİ]; $B¸‰˜šô¹Æ = $this->childList($Dƒø¡ĞÖ…); foreach ($B¸‰˜šô¹Æ as $EŸ‹·ÏËóæ) { if ($EŸ‹·ÏËóæ[$eÖîãáÃª‹[28]] == $aç‚÷Ä’) { return $EŸ‹·ÏËóæ[$eÖîãáÃª‹[363]]; } } return !1; } public function childList($b‚†³›É¯ç) { $d•¬¤“ëÔ =& $_SERVER[şÅ²é¤èİ]; $AÒ’œË±Æî = array($d•¬¤“ëÔ[454] => intval($b‚†³›É¯ç), $d•¬¤“ëÔ[390] => 0); $c¦¡·´Ÿæƒ = $this->cacheMemory()->where($AÒ’œË±Æî)->select(); $c¦¡·´Ÿæƒ = $c¦¡·´Ÿæƒ ? $c¦¡·´Ÿæƒ : array(); foreach ($c¦¡·´Ÿæƒ as $bŒíÀ—´ìá) { $cõøÍ©ë” = $d•¬¤“ëÔ[403] . $bŒíÀ—´ìá[$d•¬¤“ëÔ[363]]; self::$cacheSourceInfo[$cõøÍ©ë”] = $bŒíÀ—´ìá; } return $c¦¡·´Ÿæƒ; } public function fileNameAuto($bÏŠğ¹, $Cö¢±ƒãô , $dµ°ÌØ…« = REPEAT_RENAME, $F­Ùİ»ô§ = false) { $B Ó¨¢ÕˆÃ =& $_SERVER[şÅ²é¤èİ]; $DÒ‘¬ˆ¿ˆ = $this->childList($bÏŠğ¹); $E—¤ó—Ã¨ = array_to_keyvalue($DÒ‘¬ˆ¿ˆ, $B Ó¨¢ÕˆÃ[33], $B Ó¨¢ÕˆÃ[28]); return $this->fileNameAutoGet($E—¤ó—Ã¨, $Cö¢±ƒãô , $dµ°ÌØ…«, $F­Ùİ»ô§); } public function fileNameAutoGet($c›Ç»õÍ¼, $cõ¥Æø”ÜÄ, $CÀ•ëØ—ÓÙ, $B‹¼Æ°ƒ‡ğ) { $Aòù™ÌÜŞÙ =& $_SERVER[şÅ²é¤èİ]; if ($CÀ•ëØ—ÓÙ == REPEAT_REPLACE || !$c›Ç»õÍ¼ || !in_array_not_case($cõ¥Æø”ÜÄ, $c›Ç»õÍ¼) || $B‹¼Æ°ƒ‡ğ && $CÀ•ëØ—ÓÙ != REPEAT_RENAME_FOLDER) { return $cõ¥Æø”ÜÄ; } if ($CÀ•ëØ—ÓÙ == REPEAT_SKIP) { return !1; } $a¢Ú¼ØåŒ = $Aòù™ÌÜŞÙ[92] . get_path_ext($cõ¥Æø”ÜÄ); $a¢Ú¼ØåŒ = $a¢Ú¼ØåŒ == $Aòù™ÌÜŞÙ[92] || $B‹¼Æ°ƒ‡ğ ? $Aòù™ÌÜŞÙ[33] : $a¢Ú¼ØåŒ; for ($EÜ× í = 1; $EÜ× í <= count($c›Ç»õÍ¼) + 1; $EÜ× í++) { $F©Ú•¼ƒµİ = substr($cõ¥Æø”ÜÄ, 0, strlen($cõ¥Æø”ÜÄ) - strlen($a¢Ú¼ØåŒ)); $eÉš‘  ˆÀ = $F©Ú•¼ƒµİ . "\50{$EÜ× í}\x29{$a¢Ú¼ØåŒ}"; if (!in_array_not_case($eÉš‘  ˆÀ, $c›Ç»õÍ¼)) { return $eÉš‘  ˆÀ; } } } } goto E©„æÎÄ©Œ; E ·çØ£ìã: define($_SERVER[şÅ²é¤èİ][1840], 3); define($_SERVER[şÅ²é¤èİ][1841], 4); define($_SERVER[şÅ²é¤èİ][1842], 5); goto bÖé¨ŒÍÉ; a¾±·ÁôÉÌ: if (class_exists($_SERVER[şÅ²é¤èİ][1872])) { class Services_JSON_Error extends PEAR_Error { function __construct($F´âêÎ¦À = "\x75\156\x6b\x6e\157\167\156\40\x65\x72\x72\157\162", $e½Ñ›„¹’Ä = null, $Bº‹Õ´¿õå = null, $B®‘¸³Â¯Á = null, $EæÊ¤ñÑÒã = null) { parent::PEAR_Error($F´âêÎ¦À, $e½Ñ›„¹’Ä, $Bº‹Õ´¿õå, $B®‘¸³Â¯Á, $EæÊ¤ñÑÒã); } } } else { class Services_JSON_Error { function __construct($e…æ‚ïÀŒ = "\165\x6e\153\156\x6f\167\156\x20\145\x72\162\157\x72", $båÉ³ŠÎÁ = null, $CÜÍ•âà¦ = null, $dÛËÍ‹ÄáÁ = null, $EÇ†íƒÚ‘¦ = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto D•Ë‚ ‘Ã; eâêåÚÕ©Ğ: $this->checkSize(); $this->tempPathInit(); goto fŸß•÷—ƒ; D•Ë‚ ‘Ã: $FĞ™ÓŞ»ìî =& $_SERVER[şÅ²é¤èİ]; global $in; $this->in =& $in; goto dğÍÕ§Ş«‚; dğÍÕ§Ş«‚: if (!empty($_FILES)) { $fÍÒÉçå‡Ó = $_FILES[$FĞ™ÓŞ»ìî[162]]; $this->uploadFile = $fÍÒÉçå‡Ó[$FĞ™ÓŞ»ìî[1873]]; if (!$this->uploadFile && $fÍÒÉçå‡Ó[$FĞ™ÓŞ»ìî[1183]] > 0) { show_json($this->errorInfo($fÍÒÉçå‡Ó[$FĞ™ÓŞ»ìî[1183]]), !1); } } else { if (isset($in[$FĞ™ÓŞ»ìî[380]])) { $this->uploadFile = isset($in[$FĞ™ÓŞ»ìî[1874]]) ? $FĞ™ÓŞ»ìî[1875] : $FĞ™ÓŞ»ìî[1717]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto eâêåÚÕ©Ğ; fŸß•÷—ƒ: } public function upload() { goto b‡ª†”ñôÑ; fÓ£–¡†‘Œ: CacheLock::unlock($this->tempFile); return $this->tempFile; goto cÓİª£°µ; c¿©ñŠğŒÎ: ignore_timeout(); if (!$this->checkChunkHash($føŸÅÊÏ¬“)) { $this->showJson($e­š‹ÚŠÙÑ[1890], !1); } $this->statusSet(!1); goto fÓ£–¡†‘Œ; D¬“ Âˆ™Ø: $bßç §Í = $this->moveUploadedFile($c³¢ÒÏÙ…); if ($aîğ”Ê²¨· > 0 && filesize($bßç §Í) == 0) { $this->showJson($e­š‹ÚŠÙÑ[1881], !1); } if (!$bßç §Í) { $this->showJson(LNG($e­š‹ÚŠÙÑ[1882]), !1); } goto Cµ©íô¶ïŠ; b’åŠÂ—å©: $c³¢ÒÏÙ… = $this->tempFile . $e­š‹ÚŠÙÑ[1878] . $BÛŒ¦âÇÏ; $aîğ”Ê²¨· = isset($this->in[$e­š‹ÚŠÙÑ[511]]) ? intval($this->in[$e­š‹ÚŠÙÑ[511]]) : 0; $aÇƒÜ‡œø· = isset($this->in[$e­š‹ÚŠÙÑ[1879]]) ? intval($this->in[$e­š‹ÚŠÙÑ[1879]]) : 0; goto B‚Ê‚ŠÉğ; fˆöÛöíê¥: $C³Œ˜‘¤ÚÜ = $this->writeTo($bßç §Í, $A’×Ûë–åª, $this->tempFile); $fÃÉÕ÷ôİÈ = IO::hashSimple($bßç §Í); $aîğ”Ê²¨· = IO::size($bßç §Í); goto fÑ¶Ş†˜‘; Cµ©íô¶ïŠ: $f…×ßğæŞ„ = $BÛŒ¦âÇÏ * $aÇƒÜ‡œø·; $A’×Ûë–åª = @fopen($this->tempFile, $e­š‹ÚŠÙÑ[1883]); fseek($A’×Ûë–åª, $f…×ßğæŞ„); goto fˆöÛöíê¥; fÑ¶Ş†˜‘: @unlink($bßç §Í); if (!$C³Œ˜‘¤ÚÜ) { $this->showJson($e­š‹ÚŠÙÑ[1884] . $BÛŒ¦âÇÏ, !1); } $føŸÅÊÏ¬“[$e­š‹ÚŠÙÑ[1885]] = $dÓÊë¼ö‘; goto DÑøÂ©¦Æ; B‚Ê‚ŠÉğ: if ($dÓÊë¼ö‘ > 1 && $aÇƒÜ‡œø· <= 0) { show_json($e­š‹ÚŠÙÑ[1880], !1); } if ($aÇƒÜ‡œø· > $aîğ”Ê²¨·) { $dÓÊë¼ö‘ = 1; } if ($dÓÊë¼ö‘ <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto e¿ËÑÃç Ö; e¿ËÑÃç Ö: CacheLock::lock($this->tempFile, 20); $føŸÅÊÏ¬“ = $this->statusGet(); $this->initFileTemp(); goto D¬“ Âˆ™Ø; b‡ª†”ñôÑ: $e­š‹ÚŠÙÑ =& $_SERVER[şÅ²é¤èİ]; $BÛŒ¦âÇÏ = isset($this->in[$e­š‹ÚŠÙÑ[1876]]) ? intval($this->in[$e­š‹ÚŠÙÑ[1876]]) : 0; $dÓÊë¼ö‘ = isset($this->in[$e­š‹ÚŠÙÑ[1877]]) ? intval($this->in[$e­š‹ÚŠÙÑ[1877]]) : 1; goto b’åŠÂ—å©; DÑøÂ©¦Æ: $føŸÅÊÏ¬“[$e­š‹ÚŠÙÑ[1886]][$e­š‹ÚŠÙÑ[1887] . $BÛŒ¦âÇÏ] = array($e­š‹ÚŠÙÑ[1888] => $f…×ßğæŞ„, $e­š‹ÚŠÙÑ[1015] => $BÛŒ¦âÇÏ, $e­š‹ÚŠÙÑ[78] => $aîğ”Ê²¨·, $e­š‹ÚŠÙÑ[159] => $fÃÉÕ÷ôİÈ); $this->statusSet($føŸÅÊÏ¬“); if (count($føŸÅÊÏ¬“[$e­š‹ÚŠÙÑ[1886]]) != $føŸÅÊÏ¬“[$e­š‹ÚŠÙÑ[1885]]) { $this->showJson($e­š‹ÚŠÙÑ[1889] . $BÛŒ¦âÇÏ, !0); } goto c¿©ñŠğŒÎ; cÓİª£°µ: } private function checkSize() { $cÍÂ¤¨¤®õ =& $_SERVER[şÅ²é¤èİ]; if (phpBuild64() || $this->in[$cÍÂ¤¨¤®õ[78]] < PHP_INT_MAX) { return; } show_json(LNG($cÍÂ¤¨¤®õ[1891]), !1); } private function showJson($E˜í’ßµš, $e£è””¯Ë¶) { CacheLock::unlock($this->tempFile); if (!$e£è””¯Ë¶) { return show_json($E˜í’ßµš, $e£è””¯Ë¶); } show_json($E˜í’ßµš, $e£è””¯Ë¶); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto cèÂ†–; F¬§£¬µ«–: $this->tempFile = $D±ïŸòæÏ . $BÀ»­ù™ôà[1894] . md5($d‘„µ„ÎÖŞ . $this->in[$BÀ»­ù™ôà[1436]]); goto DòòœùÄ®…; E…‹‡ĞìÇ˜: touch($D±ïŸòæÏ . $BÀ»­ù™ôà[1892]); $d‘„µ„ÎÖŞ = isset($this->in[$BÀ»­ù™ôà[1893]]) ? $this->in[$BÀ»­ù™ôà[1893]] : !1; if (strlen($d‘„µ„ÎÖŞ) < 30) { $d‘„µ„ÎÖŞ = md5(USER_ID . $this->in[$BÀ»­ù™ôà[76]] . $this->fileName . $this->in[$BÀ»­ù™ôà[78]]); } goto F¬§£¬µ«–; cèÂ†–: $BÀ»­ù™ôà =& $_SERVER[şÅ²é¤èİ]; $D±ïŸòæÏ = TEMP_FILES; @mk_dir($D±ïŸòæÏ); goto E…‹‡ĞìÇ˜; DòòœùÄ®…: } private function moveUploadedFile($EãßĞÅ¯¢Ò) { $D½›‡…ˆî =& $_SERVER[şÅ²é¤èİ]; $böœˆ¤¹Â = $this->uploadFile; if ($böœˆ¤¹Â == $D½›‡…ˆî[1895]) { @file_put_contents($EãßĞÅ¯¢Ò, base64_decode($_REQUEST[$D½›‡…ˆî[1896]])); } else { if ($böœˆ¤¹Â == $D½›‡…ˆî[1717]) { $açÉŞ¯Æ¥± = @fopen($EãßĞÅ¯¢Ò, $D½›‡…ˆî[1426]); $this->writeTo($böœˆ¤¹Â, $açÉŞ¯Æ¥±, $EãßĞÅ¯¢Ò); } else { if (!move_uploaded_file($böœˆ¤¹Â, $EãßĞÅ¯¢Ò)) { return !1; } } } return $EãßĞÅ¯¢Ò; } private function writeTo($A‡‡Ñé™ˆ , $aÖÙÇ·à¤‘, $A„ßñß®Í) { goto díîêãÖò; fÈ¢÷¹¿: $D½ÙÅÏ“ = @fopen($A‡‡Ñé™ˆ , $D«àØ¡Ò´[1425]); if (!$D½ÙÅÏ“ || !$aÖÙÇ·à¤‘ || !$BŒô¹õ‹­—) { CacheLock::unlock($fñ¨ùîõ); return !1; } while (!feof($D½ÙÅÏ“)) { fwrite($aÖÙÇ·à¤‘, fread($D½ÙÅÏ“, 1024 * 200)); } goto a¾öó­ÕØƒ; a¾öó­ÕØƒ: fclose($D½ÙÅÏ“); fclose($aÖÙÇ·à¤‘); CacheLock::unlock($fñ¨ùîõ); goto AäîÁëÇ‰; AäîÁëÇ‰: return !0; goto A¢••‡à¸´; díîêãÖò: $D«àØ¡Ò´ =& $_SERVER[şÅ²é¤èİ]; $fñ¨ùîõ = $D«àØ¡Ò´[1897] . $A„ßñß®Í; $BŒô¹õ‹­— = CacheLock::lock($fñ¨ùîõ, 1); goto fÈ¢÷¹¿; A¢••‡à¸´: } private function statusGet() { goto a±Ìš¡ËÃ; a±Ìš¡ËÃ: $côÛ¦„ØÆÏ =& $_SERVER[şÅ²é¤èİ]; if (is_array($this->statusData)) { return $this->statusData; } $C…Ñ‘ù•Ú = $this->tempFile . $côÛ¦„ØÆÏ[1898]; goto f•‘˜î´‚õ; f•‘˜î´‚õ: $C­ÊÇ‡»–ù = !1; if (file_exists($C…Ñ‘ù•Ú)) { $C­ÊÇ‡»–ù = @file_get_contents($C…Ñ‘ù•Ú); } if ($C­ÊÇ‡»–ù) { $this->statusData = unserialize($C­ÊÇ‡»–ù); } goto E¥ËÛÖâº¨; E¥ËÛÖâº¨: if (!$this->statusData) { $D‰èïñ™³÷ = array($côÛ¦„ØÆÏ[28] => $this->fileName, $côÛ¦„ØÆÏ[1885] => 0, $côÛ¦„ØÆÏ[1886] => array()); $this->statusSet($D‰èïñ™³÷); } return $this->statusData; goto Eá›—•ë±ó; Eá›—•ë±ó: } public function statusSet($D‡Ì­‰ †æ) { $EœØåÕ°„ = $this->tempFile . $_SERVER[şÅ²é¤èİ][1898]; if (!$D‡Ì­‰ †æ) { if (file_exists($EœØåÕ°„)) { @unlink($EœØåÕ°„); } return !0; } $this->statusData = $D‡Ì­‰ †æ; return file_put_contents($EœØåÕ°„, serialize($D‡Ì­‰ †æ)); } private function initFileTemp() { $A×Ä¦ğ‘Œğ =& $_SERVER[şÅ²é¤èİ]; if (file_exists($this->tempFile)) { return; } $Eù™óéŒ¡Ô = fopen($this->tempFile, $A×Ä¦ğ‘Œğ[1899]); fseek($Eù™óéŒ¡Ô, $this->in[$A×Ä¦ğ‘Œğ[78]] - 1, SEEK_SET); fwrite($Eù™óéŒ¡Ô, $A×Ä¦ğ‘Œğ[461]); fclose($Eù™óéŒ¡Ô); } public function checkChunk() { goto C“¯»ïƒˆÇ; f˜…œ×Â: return $eßêö¾Öˆ; goto Aµ‡Æ¨š¥¸; C“¯»ïƒˆÇ: $aĞ¾­æ™ª£ =& $_SERVER[şÅ²é¤èİ]; $eßêö¾Öˆ = array(); CacheLock::lock($this->tempFile); goto bĞ‘åî²; bĞ‘åî²: $dâåïğ‘‚Š = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($dâåïğ‘‚Š[$aĞ¾­æ™ª£[1886]] as $aÀ‹ùµĞ) { $fò¶Å¨Î¥œ = $aÀ‹ùµĞ[$aĞ¾­æ™ª£[159]]; if ($fò¶Å¨Î¥œ) { $eßêö¾Öˆ[$aĞ¾­æ™ª£[1900] . $aÀ‹ùµĞ[$aĞ¾­æ™ª£[1015]]] = $fò¶Å¨Î¥œ; } } goto f˜…œ×Â; Aµ‡Æ¨š¥¸: } private function checkChunkHash($CÅ“´‰äÕÆ) { goto Få…ÆÔ°Ğ¹; aËç”¥Û†: $E·åÉÉòÊ = !0; foreach ($CÅ“´‰äÕÆ[$dŠÙÃ©³æ[1886]] as $eÓß¬ğÂæ») { fseek($c©¿Çîïê¤, $eÓß¬ğÂæ»[$dŠÙÃ©³æ[1888]]); $CñÉË“ÏÃ = PathDriverStream::hash($c©¿Çîïê¤, $eÓß¬ğÂæ»[$dŠÙÃ©³æ[78]]); if ($eÓß¬ğÂæ»[$dŠÙÃ©³æ[159]] != $CñÉË“ÏÃ) { $E·åÉÉòÊ = !1; break; } } fclose($c©¿Çîïê¤); goto C›Ñá®Ü­ø; C›Ñá®Ü­ø: return $E·åÉÉòÊ; goto EÎ½Ö÷í†à; C‡“Œ‹áÒ”: $D•¿šµôƒ = _get($this->in, $dŠÙÃ©³æ[1901]); if (strlen($D•¿šµôƒ) == 32 && IO::hashSimple($this->tempFile) == $d¾ì­Ó¡á && IO::hashMd5($this->tempFile) == $D•¿šµôƒ) { return !0; } $c©¿Çîïê¤ = fopen($this->tempFile, $dŠÙÃ©³æ[1131]); goto aËç”¥Û†; Få…ÆÔ°Ğ¹: $dŠÙÃ©³æ =& $_SERVER[şÅ²é¤èİ]; if (count($CÅ“´‰äÕÆ[$dŠÙÃ©³æ[1886]]) != $CÅ“´‰äÕÆ[$dŠÙÃ©³æ[1885]]) { return !1; } $d¾ì­Ó¡á = _get($this->in, $dŠÙÃ©³æ[1893]); goto C‡“Œ‹áÒ”; EÎ½Ö÷í†à: } public static function fileName() { goto Eß˜ªÀ¿å; f¼‚ÙÄ½‚: if (!empty($_FILES)) { $a¡ØÍ«á¿¼ = $a¡ØÍ«á¿¼ ? $a¡ØÍ«á¿¼ : $_FILES[$Eß Ş’·Ş[162]][$Eß Ş’·Ş[380]]; } $a¡ØÍ«á¿¼ = str_replace(array($Eß Ş’·Ş[94], $Eß Ş’·Ş[8]), array($Eß Ş’·Ş[8], $Eß Ş’·Ş[92]), trim($a¡ØÍ«á¿¼)); if (!is_wap()) { return $a¡ØÍ«á¿¼; } goto b ˜Åğ†÷; b ˜Åğ†÷: $fïºß”’öÃ = strtotime($in[$Eß Ş’·Ş[1902]]); $fïºß”’öÃ = $fïºß”’öÃ ? $fïºß”’öÃ : time(); $fÔ”Ş›ÙØ = strtolower($a¡ØÍ«á¿¼); goto CÄ‰’¥¤ğ…; CÄ‰’¥¤ğ…: if ($fÔ”Ş›ÙØ == $Eß Ş’·Ş[1903] || $fÔ”Ş›ÙØ == $Eß Ş’·Ş[1904]) { $a¡ØÍ«á¿¼ = date($Eß Ş’·Ş[683], $fïºß”’öÃ) . $Eß Ş’·Ş[71] . $in[$Eß Ş’·Ş[78]] . $Eß Ş’·Ş[1532]; } else { if ($fÔ”Ş›ÙØ == $Eß Ş’·Ş[1905]) { $a¡ØÍ«á¿¼ = date($Eß Ş’·Ş[683], $fïºß”’öÃ) . $Eß Ş’·Ş[71] . $in[$Eß Ş’·Ş[78]] . $Eß Ş’·Ş[1906]; } } return $a¡ØÍ«á¿¼; goto BÀ‡©çİÆ‘; Eß˜ªÀ¿å: $Eß Ş’·Ş =& $_SERVER[şÅ²é¤èİ]; global $in; $a¡ØÍ«á¿¼ = isset($in[$Eß Ş’·Ş[28]]) ? $in[$Eß Ş’·Ş[28]] : $Eß Ş’·Ş[33]; goto f¼‚ÙÄ½‚; BÀ‡©çİÆ‘: } private function errorInfo($fÈ—òÔêÉ) { $Dí¨»™¢‘ =& $_SERVER[şÅ²é¤èİ]; $b–³«Ş·ø = array($Dí¨»™¢‘[1907], $Dí¨»™¢‘[1908], $Dí¨»™¢‘[1909], $Dí¨»™¢‘[1910], $Dí¨»™¢‘[1911], $Dí¨»™¢‘[1912], $Dí¨»™¢‘[1913], $Dí¨»™¢‘[1914]); return $fÈ—òÔêÉ . $Dí¨»™¢‘[4] . $b–³«Ş·ø[$fÈ—òÔêÉ]; } } class ZipMake { const VERSION = "\x30\x2e\62\x2e\60"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($cà¹‘‹—¥Å = null) { $E‚à”¾ø­å =& $_SERVER[şÅ²é¤èİ]; $this->outputStream = fopen($E‚à”¾ø­å[1915], $E‚à”¾ø­å[1189]); $this->outputName = $cà¹‘‹—¥Å; $this->needHeaders = !0; } public function addFile($FÂÍ’àç»ğ, $Bğİ×©É©ø) { goto f³õ‚öÉŒ; E·‚ÇóÑ¹: while (!feof($Cå°©”à÷)) { $AÑóºÓ‰Õƒ = fread($Cå°©”à÷, 1048576); $this->send($AÑóºÓ‰Õƒ); } fclose($Cå°©”à÷); $dÍÜ×½¸°Æ = hexdec(hash_file($CÑåí¼§Ô[1917], $Bğİ×©É©ø)); goto dÛ±ŸÙ˜¥¥; dÛ±ŸÙ˜¥¥: $this->addFileFooter($FÂÍ’àç»ğ, $e¬™Ã²×íÎ, $dÍÜ×½¸°Æ, $F¹ÕòˆÆ÷, $A¾£ µ„‰Š, $aŠñ†É¸ğ­); goto C‚œÛ¢…ìŸ; B¯®¤µÈÑ¶: $aŠñ†É¸ğ­ = $this->addFileHeader($FÂÍ’àç»ğ, $e¬™Ã²×íÎ); $F¹ÕòˆÆ÷ = $A¾£ µ„‰Š = filesize($Bğİ×©É©ø); $Cå°©”à÷ = fopen($Bğİ×©É©ø, $CÑåí¼§Ô[1916]); goto E·‚ÇóÑ¹; f³õ‚öÉŒ: $CÑåí¼§Ô =& $_SERVER[şÅ²é¤èİ]; $FÂÍ’àç»ğ = $this->filterFilename($FÂÍ’àç»ğ); $e¬™Ã²×íÎ = static::METHOD_STORE; goto B¯®¤µÈÑ¶; C‚œÛ¢…ìŸ: } public function addFileFromStream($dèÑŒ·”ç, $A“´Ï¹‘µ) { goto bÎ™›Îåéš; bÎ™›Îåéš: $dèÑŒ·”ç = $this->filterFilename($dèÑŒ·”ç); $dÏ­«ç¶À‰ = static::METHOD_STORE; $Cñ‰‘ÉÈ = $this->addFileHeader($dèÑŒ·”ç, $dÏ­«ç¶À‰); goto f‡Œ²æÖ³†; Få¬‘¸İ¨“: $e‘ßë®Õ‡ = hash_init($_SERVER[şÅ²é¤èİ][1917]); while (!feof($A“´Ï¹‘µ)) { $AÊÆå®ºº = fread($A“´Ï¹‘µ, 1048576); hash_update($e‘ßë®Õ‡, $AÊÆå®ºº); $this->send($AÊÆå®ºº); } $cÛ¿¼‘ë­ = hexdec(hash_final($e‘ßë®Õ‡)); goto dÜŸìŸŒ¬ç; f‡Œ²æÖ³†: fseek($A“´Ï¹‘µ, 0, SEEK_END); $B¼Æïš¿¿ã = $f£Öøœ¿”Š = ftell($A“´Ï¹‘µ); rewind($A“´Ï¹‘µ); goto Få¬‘¸İ¨“; dÜŸìŸŒ¬ç: $this->addFileFooter($dèÑŒ·”ç, $dÏ­«ç¶À‰, $cÛ¿¼‘ë­, $B¼Æïš¿¿ã, $f£Öøœ¿”Š, $Cñ‰‘ÉÈ); goto c¸¡ÏÕÌÄ; c¸¡ÏÕÌÄ: } public function finish() { foreach ($this->files as $Eõ¹•ß®¾®) { $this->addCdrFile($Eõ¹•ß®¾®); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($eõ¦ÓÈà½ù, $cÒ³“½·õ±) { goto Eã‚¼âë™; Aƒ‘¡Ø×Ãğ: $C†ó–‡±ÛĞ = $this->packFields($D²‰‘¥Éò¯); $cğÜ¡Ç‘‘ô = $this->packFields($B‡´ÆŸ); $this->send($C†ó–‡±ÛĞ . $eõ¦ÓÈà½ù . $cğÜ¡Ç‘‘ô); goto Bà‰ĞÃ·Ş‘; Eã‚¼âë™: $e˜Ë³•æğø =& $_SERVER[şÅ²é¤èİ]; $eõ¦ÓÈà½ù = preg_replace($e˜Ë³•æğø[1918], $e˜Ë³•æğø[33], $eõ¦ÓÈà½ù); $bˆÍÒàã´ = strlen($eõ¦ÓÈà½ù); goto A“¾ÊÈ¼÷“; A“¾ÊÈ¼÷“: $Cƒ¿Ü‚Ò·‡ = $this->dosTime(time()); $D²‰‘¥Éò¯ = array(array($e˜Ë³•æğø[1919], static::FILE_HEADER_SIGNATURE), array($e˜Ë³•æğø[1920], static::ZIP_VERSION_64), array($e˜Ë³•æğø[1920], 8), array($e˜Ë³•æğø[1920], $cÒ³“½·õ±), array($e˜Ë³•æğø[1919], $Cƒ¿Ü‚Ò·‡), array($e˜Ë³•æğø[1919], 0), array($e˜Ë³•æğø[1919], 4294967295), array($e˜Ë³•æğø[1919], 4294967295), array($e˜Ë³•æğø[1920], $bˆÍÒàã´), array($e˜Ë³•æğø[1920], 32)); $B‡´ÆŸ = array(array($e˜Ë³•æğø[1920], 1), array($e˜Ë³•æğø[1920], 28), array($e˜Ë³•æğø[1921], 0), array($e˜Ë³•æğø[1921], 0), array($e˜Ë³•æğø[1921], 0), array($e˜Ë³•æğø[1919], 0)); goto Aƒ‘¡Ø×Ãğ; Bà‰ĞÃ·Ş‘: return strlen($C†ó–‡±ÛĞ) + $bˆÍÒàã´ + strlen($cğÜ¡Ç‘‘ô); goto BÆôÀ³«¬Ö; BÆôÀ³«¬Ö: } protected function addFileFooter($eÅ¶¦Ú«‡Ø, $C¾Í¬ß×¸, $c •ÅÎŠ×â, $eÍˆÙ¼íŞç, $cæ”º°ª¿‹, $f”øÕ¡‰æÂ) { $DÂ¯Ÿö–œÇ =& $_SERVER[şÅ²é¤èİ]; $Bóß«ìØ·İ = array(array($DÂ¯Ÿö–œÇ[1919], static::DATA_DESCRIPTOR_SIGNATURE), array($DÂ¯Ÿö–œÇ[1919], $c •ÅÎŠ×â), array($DÂ¯Ÿö–œÇ[1921], $eÍˆÙ¼íŞç), array($DÂ¯Ÿö–œÇ[1921], $cæ”º°ª¿‹)); $c…‚ÂÎ‘¸ = $this->packFields($Bóß«ìØ·İ); $this->send($c…‚ÂÎ‘¸); $A°†±ºÓ‰ø = $f”øÕ¡‰æÂ + $eÍˆÙ¼íŞç + $få…†Ê«‰Ã; $this->addToCdr($eÅ¶¦Ú«‡Ø, $C¾Í¬ß×¸, $c •ÅÎŠ×â, $eÍˆÙ¼íŞç, $cæ”º°ª¿‹, $A°†±ºÓ‰ø); } private function addToCdr($eÕÜ‚¼²ñÀ, $c·Èš²µğô, $dŠÉ±÷ßÍ, $c·´ÄŠÇ˜ß, $a®ìºÒéİ„, $B‚ ‚›®‘) { $this->files[] = array($eÕÜ‚¼²ñÀ, $c·Èš²µğô, $dŠÉ±÷ßÍ, $c·´ÄŠÇ˜ß, $a®ìºÒéİ„, $this->ofs); $this->ofs += $B‚ ‚›®‘; } protected function addCdrFile($eá×Ëìå½) { goto c™ÊÜŒ÷æ¶; EöêÏñ‚È¼: $EğÜ óÏ‘¾ = $this->packFields($F…Í·ê”İ); $cÀœ£”ó¥ = $this->packFields($D‰Ü©¼Ô); $bôŒºµ£Î = $EğÜ óÏ‘¾ . $aŒµ™‰ïÒä . $A™±º®¢ƒƒ . $cÀœ£”ó¥; goto F œ½¢éâ; F œ½¢éâ: $this->send($bôŒºµ£Î); $this->cdr_ofs += strlen($bôŒºµ£Î); goto C¦÷íùã; c™ÊÜŒ÷æ¶: $eÎ…§²ÓËĞ =& $_SERVER[şÅ²é¤èİ]; list($aŒµ™‰ïÒä, $Cµ“æù™Ø÷, $a¬öÌ‹ğà, $bÑÙ²•àŒİ, $Cå´ÕëÖ“—, $aÑÚ¢ÑÎ¢Ç) = $eá×Ëìå½; $A™±º®¢ƒƒ = $eÎ…§²ÓËĞ[33]; goto DÜÔŸªÁè¢; DÜÔŸªÁè¢: $DªÜ®¬Œ‰ = $this->dosTime(time()); $F…Í·ê”İ = array(array($eÎ…§²ÓËĞ[1919], static::CDR_FILE_SIGNATURE), array($eÎ…§²ÓËĞ[1920], static::ZIP_VERSION_64), array($eÎ…§²ÓËĞ[1920], static::ZIP_VERSION_64), array($eÎ…§²ÓËĞ[1920], 8), array($eÎ…§²ÓËĞ[1920], $Cµ“æù™Ø÷), array($eÎ…§²ÓËĞ[1919], $DªÜ®¬Œ‰), array($eÎ…§²ÓËĞ[1919], $a¬öÌ‹ğà), array($eÎ…§²ÓËĞ[1919], 4294967295), array($eÎ…§²ÓËĞ[1919], 4294967295), array($eÎ…§²ÓËĞ[1920], strlen($aŒµ™‰ïÒä)), array($eÎ…§²ÓËĞ[1920], 32), array($eÎ…§²ÓËĞ[1920], strlen($A™±º®¢ƒƒ)), array($eÎ…§²ÓËĞ[1920], 0), array($eÎ…§²ÓËĞ[1920], 0), array($eÎ…§²ÓËĞ[1919], 32), array($eÎ…§²ÓËĞ[1919], 4294967295)); $D‰Ü©¼Ô = array(array($eÎ…§²ÓËĞ[1920], 1), array($eÎ…§²ÓËĞ[1920], 28), array($eÎ…§²ÓËĞ[1921], $Cå´ÕëÖ“—), array($eÎ…§²ÓËĞ[1921], $bÑÙ²•àŒİ), array($eÎ…§²ÓËĞ[1921], $aÑÚ¢ÑÎ¢Ç), array($eÎ…§²ÓËĞ[1919], 0)); goto EöêÏñ‚È¼; C¦÷íùã: } protected function addCdr64Eof() { goto eŠğ¸Ú‘í«; f¯¥¨¹¸º: $this->send($AĞ’ÎöÜÆ); goto AÀì—è•“ï; eŠğ¸Ú‘í«: $eÈ•Ûƒ”Âõ =& $_SERVER[şÅ²é¤èİ]; $eºÁ¿Ãä± = count($this->files); $aª¿™Ğ‰Á¼ = $this->cdr_ofs; goto B‘·¿ƒ¶â; B‘·¿ƒ¶â: $f–¥¥˜Œ­ = $this->ofs; $FóêÖ ºÁ = array(array($eÈ•Ûƒ”Âõ[1919], static::ZIP64_CDR_EOF_SIGNATURE), array($eÈ•Ûƒ”Âõ[1921], 44), array($eÈ•Ûƒ”Âõ[1920], static::ZIP_VERSION_64), array($eÈ•Ûƒ”Âõ[1920], static::ZIP_VERSION_64), array($eÈ•Ûƒ”Âõ[1919], 0), array($eÈ•Ûƒ”Âõ[1919], 0), array($eÈ•Ûƒ”Âõ[1921], $eºÁ¿Ãä±), array($eÈ•Ûƒ”Âõ[1921], $eºÁ¿Ãä±), array($eÈ•Ûƒ”Âõ[1921], $aª¿™Ğ‰Á¼), array($eÈ•Ûƒ”Âõ[1921], $f–¥¥˜Œ­)); $AĞ’ÎöÜÆ = $this->packFields($FóêÖ ºÁ); goto f¯¥¨¹¸º; AÀì—è•“ï: } protected function addCdr64Locator() { goto DÏ…Šì×ÀŒ; a¬Æ¿ŒÑ…Š: $dç³èƒÄ•Í = $this->ofs; $f¢„ºÒÆ = array(array($EØ‘ŠŠß©±[1919], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($EØ‘ŠŠß©±[1919], 0), array($EØ‘ŠŠß©±[1921], $dç³èƒÄ•Í + $B †˜¿…°), array($EØ‘ŠŠß©±[1919], 1)); $AÄ†º§ªËÉ = $this->packFields($f¢„ºÒÆ); goto eø¾ë¤†ç‡; eø¾ë¤†ç‡: $this->send($AÄ†º§ªËÉ); goto B‘öÀ÷ÓË; DÏ…Šì×ÀŒ: $EØ‘ŠŠß©± =& $_SERVER[şÅ²é¤èİ]; $c¥Ø¡¾ä® = count($this->files); $B †˜¿…° = $this->cdr_ofs; goto a¬Æ¿ŒÑ…Š; B‘öÀ÷ÓË: } protected function addCdrEof() { goto bŠÆéÔÃŠì; D…Ô‰‰’è: $dƒ‰ªÂéâ = $this->ofs; $F½Ãîµ×ƒ“ = $fç‡ó¬™¦‹[33]; $d²ª°èİ = array(array($fç‡ó¬™¦‹[1919], static::CDR_EOF_SIGNATURE), array($fç‡ó¬™¦‹[1920], 0), array($fç‡ó¬™¦‹[1920], 0), array($fç‡ó¬™¦‹[1920], $e¢š‡¥¿¾­), array($fç‡ó¬™¦‹[1920], $e¢š‡¥¿¾­), array($fç‡ó¬™¦‹[1919], 4294967295), array($fç‡ó¬™¦‹[1919], 4294967295), array($fç‡ó¬™¦‹[1920], strlen($F½Ãîµ×ƒ“))); goto DÛš‹°ŞÉŒ; DÛš‹°ŞÉŒ: $d²İÄÂÔŸ¥ = $this->packFields($d²ª°èİ) . $F½Ãîµ×ƒ“; $this->send($d²İÄÂÔŸ¥); goto dÜ¶­ìÕ; bŠÆéÔÃŠì: $fç‡ó¬™¦‹ =& $_SERVER[şÅ²é¤èİ]; $e¢š‡¥¿¾­ = count($this->files); $d¦±ùê•µš = $this->cdr_ofs; goto D…Ô‰‰’è; dÜ¶­ìÕ: } protected function addCdr() { foreach ($this->files as $d‹Ş±–ÃÁÜ) { $this->addCdrFile($d‹Ş±–ÃÁÜ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $BÙÉ¤¶‚‘ =& $_SERVER[şÅ²é¤èİ]; $d·ĞÂš¶½Ã = $BÙÉ¤¶‚‘[198]; if ($this->outputName) { $C•†ÔˆŠß¥ = trim(str_replace(array($BÙÉ¤¶‚‘[112], $BÙÉ¤¶‚‘[55], $BÙÉ¤¶‚‘[94], $BÙÉ¤¶‚‘[68], $BÙÉ¤¶‚‘[213], $BÙÉ¤¶‚‘[722]), $BÙÉ¤¶‚‘[33], $this->outputName)); $aòĞ‡ğ© = rawurlencode($C•†ÔˆŠß¥); $d·ĞÂš¶½Ã .= "\73\40\146\151\x6c\x65\x6e\x61\155\145\x2a\75\x75\x74\146\55\x38\47\x27{$aòĞ‡ğ©}"; } $B÷ÖØğÇ²Æ = array($BÙÉ¤¶‚‘[195] => $BÙÉ¤¶‚‘[1922], $BÙÉ¤¶‚‘[1923] => $d·ĞÂš¶½Ã, $BÙÉ¤¶‚‘[1924] => $BÙÉ¤¶‚‘[1925], $BÙÉ¤¶‚‘[1926] => $BÙÉ¤¶‚‘[1927], $BÙÉ¤¶‚‘[1928] => $BÙÉ¤¶‚‘[1929]); foreach ($B÷ÖØğÇ²Æ as $A„Ê˜Éá¾í => $Fçìæğ™º‰) { header($A„Ê˜Éá¾í . $BÙÉ¤¶‚‘[881] . $Fçìæğ™º‰); } } protected function send($aáÎâ³Â) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $aáÎâ³Â); } protected final function dosTime($DêÈ…Å«Ñâ) { $c³ŒäÏèõ´ =& $_SERVER[şÅ²é¤èİ]; $B‹‚ôÅˆİí = getdate($DêÈ…Å«Ñâ); if ($B‹‚ôÅˆİí[$c³ŒäÏèõ´[1629]] < 1980) { $B‹‚ôÅˆİí = array($c³ŒäÏèõ´[1629] => 1980, $c³ŒäÏèõ´[1930] => 1, $c³ŒäÏèõ´[1931] => 1, $c³ŒäÏèõ´[1932] => 0, $c³ŒäÏèõ´[1933] => 0, $c³ŒäÏèõ´[1934] => 0); } $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1629]] -= 1980; return $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1629]] << 25 | $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1930]] << 21 | $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1931]] << 16 | $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1932]] << 11 | $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1933]] << 5 | $B‹‚ôÅˆİí[$c³ŒäÏèõ´[1934]] >> 1; } protected function packFields($DÜŸ·¿”ø) { $C´§„¢Ä¸Á =& $_SERVER[şÅ²é¤èİ]; $dåƒ°ˆÕ“ô = $C´§„¢Ä¸Á[33]; $aì‰¦ÎÌ = array(); foreach ($DÜŸ·¿”ø as $b´«‚‡ Ê) { $dåƒ°ˆÕ“ô .= $b´«‚‡ Ê[0]; $aì‰¦ÎÌ[] = $b´«‚‡ Ê[1]; } array_unshift($aì‰¦ÎÌ, $dåƒ°ˆÕ“ô); return call_user_func_array($C´§„¢Ä¸Á[1935], $aì‰¦ÎÌ); } protected function filterFilename($eµÒ™ß”“ğ) { $d´¶ß»öÂš =& $_SERVER[şÅ²é¤èİ]; return str_replace(array($d´¶ß»öÂš[94], $d´¶ß»öÂš[4], $d´¶ß»öÂš[171], $d´¶ß»öÂš[70], $d´¶ß»öÂš[112], $d´¶ß»öÂš[926], $d´¶ß»öÂš[929], $d´¶ß»öÂš[265]), $d´¶ß»öÂš[71], $eµÒ™ß”“ğ); } } goto A¥«ÙÌ“¿; EÆ¡¶±«Ó–: class Input { public static function getArray($DÕâ®İ¯„) { goto Dëˆ‘ÊÜ¬ª; A•¦Ğºæ‰: if (count($aØ¾™”ºà) > 0) { show_json(implode($DĞ¦øœ´ˆ[1785], $aØ¾™”ºà), !1); } return $FÖÉÓÀªí; goto a‚ÊêŞŸ©ô; Dëˆ‘ÊÜ¬ª: $DĞ¦øœ´ˆ =& $_SERVER[şÅ²é¤èİ]; global $in; $FÖÉÓÀªí = array(); goto b«¹›Õ¨Ô¹; b«¹›Õ¨Ô¹: $aØ¾™”ºà = array(); $Fø¡–Î¦”ó = LNG($DĞ¦øœ´ˆ[1780]); foreach ($DÕâ®İ¯„ as $DÖĞ¾ŸÛ„ => $B¨—³¹ÏĞ) { goto E³ô¸ˆ´ĞÕ; EôÌÎÉÕÖÔ: if (isset($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1784]]) && !self::check($in[$DÖĞ¾ŸÛ„], $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1784]], $e÷”ÎÜÒÁ‘)) { if (array_key_exists($DĞ¦øœ´ˆ[1783], $B¨—³¹ÏĞ)) { if (!is_null($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]])) { $FÖÉÓÀªí[$eõ½õ«Š“] = $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]]; } } else { $aØ¾™”ºà[] = $e–å«½Ôä; } continue; } $FÖÉÓÀªí[$eõ½õ«Š“] = $in[$DÖĞ¾ŸÛ„]; goto Dáß™¨ù×Ø; eº£æ·ÌÎ: if (!array_key_exists($DÖĞ¾ŸÛ„, $in)) { if (array_key_exists($DĞ¦øœ´ˆ[1783], $B¨—³¹ÏĞ)) { if (!is_null($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]])) { $FÖÉÓÀªí[$eõ½õ«Š“] = $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]]; } } else { if (isset($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1784]])) { $aØ¾™”ºà[] = $e–å«½Ôä; } } continue; } if (isset($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1784]]) && $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1784]] == $DĞ¦øœ´ˆ[276]) { $DˆŒÅİò’ = json_decode($in[$DÖĞ¾ŸÛ„], !0); if (is_array($DˆŒÅİò’)) { $FÖÉÓÀªí[$eõ½õ«Š“] = $DˆŒÅİò’; } else { if (array_key_exists($DĞ¦øœ´ˆ[1783], $B¨—³¹ÏĞ)) { if (!is_null($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]])) { $FÖÉÓÀªí[$eõ½õ«Š“] = $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1783]]; } } else { $aØ¾™”ºà[] = $e–å«½Ôä; } } continue; } $e÷”ÎÜÒÁ‘ = _get($B¨—³¹ÏĞ, $DĞ¦øœ´ˆ[989]); goto EôÌÎÉÕÖÔ; E³ô¸ˆ´ĞÕ: $e–å«½Ôä = _get($B¨—³¹ÏĞ, $DĞ¦øœ´ˆ[1781], $Fø¡–Î¦”ó . $DĞ¦øœ´ˆ[881] . $DÖĞ¾ŸÛ„); $eõ½õ«Š“ = $DÖĞ¾ŸÛ„; if (isset($B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1782]]) && $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1782]]) { $eõ½õ«Š“ = $B¨—³¹ÏĞ[$DĞ¦øœ´ˆ[1782]]; } goto eº£æ·ÌÎ; Dáß™¨ù×Ø: } goto A•¦Ğºæ‰; a‚ÊêŞŸ©ô: } public static function reg($fŞëñ¯å°È = "\x72\x65\x71\x75\x69\162\x65") { static $dßÜ¦©îœ = array("\x72\x65\x71\165\151\x72\x65" => "\56\53", "\x6e\165\x6d\x62\x65\x72" => "\134\144\x2b", "\x68\x65\170" => "\x5b\60\x2d\x39\x41\55\106\141\x2d\146\135\53", "\151\156\x74" => "\133\x2d\134\x2b\x5d\77\x5c\144\x2b", "\142\157\x6f\154" => "\x30\x7c\61", "\x66\x6c\157\x61\x74" => "\133\55\x5c\53\135\77\134\144\53\x28\134\56\x5c\x64\x2b\x29\77", "\x65\156\147\154\x69\163\x68" => "\x5b\x41\55\x5a\x61\55\172\40\x5d\53", "\143\150\151\x6e\145\163\x65" => "\x5b\134\x78\x7b\64\x65\x30\x30\175\x2d\134\170\x7b\x39\146\141\x35\175\x5d\x2b", "\150\141\x73\x43\150\151\x6e\x65\163\145" => "\x2f\x28\133\134\170\173\64\x65\60\60\175\55\134\170\x7b\x39\146\x61\65\x7d\135\53\51\57\165", "\x65\155\141\151\154" => "\134\x77\53\50\x5b\134\x2e\134\55\135\x5c\x77\53\x29\52\134\100\134\x77\x2b\x28\x5b\134\56\134\55\x5d\134\167\53\x29\x2a\134\56\x5c\x77\x2b", "\x70\x68\157\x6e\x65" => "\x31\x5b\x33\55\71\x5d\134\144\x7b\x39\x7d", "\x74\145\x6c\160\x68\x6f\x6e\145" => "\50\x5c\x28\134\x64\173\x33\54\64\x7d\134\51\x7c\134\x64\173\x33\54\64\175\x2d\x7c\134\x73\51\77\x5c\144\x7b\67\54\61\64\175", "\165\x72\x6c" => "\50\150\x74\x74\x70\174\146\x74\160\174\150\x74\x74\160\163\x29\x3a\x5c\57\134\x2f\133\134\x77\134\x2d\x5f\x5d\x2b\x28\134\56\x5b\x5c\167\x5c\55\137\x5d\53\51\53\x28\x5b\x5c\x77\x5c\x2d\x5c\56\54\x40\x3f\x5e\75\45\x26\x3a\x5c\57\x7e\x5c\53\43\135\52\133\x5c\167\134\55\x5c\100\x3f\136\x3d\x25\x26\x5c\x2f\x7e\x5c\x2b\43\x5d\51\77", "\165\x72\x6c\106\x75\154\x6c" => "\133\141\55\x7a\x41\55\x7a\135\x2b\72\134\57\134\x2f\133\136\134\163\x5d\52", "\151\160" => "\x28\x5c\x64\173\61\x2c\63\175\x5c\x2e\x29\173\63\x7d\50\134\144\x7b\61\54\63\175\51", "\x7a\x69\160" => "\x5b\61\x2d\x39\135\x5c\144\173\65\x7d\x28\77\x21\x5c\144\51", "\x69\144\x43\141\x72\x64" => "\50\134\144\173\61\65\x7d\51\174\50\x5c\144\x7b\61\67\x7d\x28\134\x64\x7c\x58\x7c\170\x29\51", "\143\x6f\x6c\x6f\162" => "\43\x28\x5b\x30\x2d\x39\x41\x2d\106\x61\55\x66\x5d\x7b\63\175\x7c\133\x30\x2d\x39\x41\55\106\141\55\x66\x5d\x7b\66\175\x29", "\x74\x69\x6d\x65" => "\50\133\60\55\61\x5d\134\144\x7c\x32\133\60\55\64\x5d\x29\x3a\133\60\x2d\65\x5d\134\144", "\144\x61\x74\145" => "\x5c\144\173\x34\x7d\133\55\134\x2f\x5d\x3f\50\60\133\61\x2d\71\135\174\x31\x5b\x30\55\x32\x5d\x29\133\x2d\x5c\x2f\x5d\77\50\133\x30\55\62\135\x5c\x64\x7c\63\x5b\x30\x2d\x31\135\51", "\144\141\x74\145\124\x69\155\145" => "\134\144\173\64\175\133\55\x5c\x2f\135\77\50\60\x5b\x31\x2d\x39\135\x7c\61\x5b\x30\x2d\x32\x5d\x29\133\x2d\x5c\57\x5d\77\x28\x5b\x30\55\62\135\134\x64\174\x33\x5b\x30\x2d\x31\135\51\x5c\163\x2b\x28\133\60\x2d\61\135\134\x64\x7c\x32\133\60\x2d\64\x5d\51\x3a\x5b\60\55\x35\135\x5c\144", "\x70\x61\x73\163\x77\157\162\144" => "\x28\x3f\x3d\x2e\x2a\x5c\144\x29\50\x3f\75\x2e\x2a\x5b\x61\55\x7a\135\x29\50\77\75\x2e\52\133\x41\55\132\135\51\56\x7b\x38\x2c\x32\60\175", "\153\x65\171" => "\x5b\101\x2d\132\x61\x2d\172\60\55\71\x5f\134\x2d\x5c\56\x5d\x2b", "\x6b\x65\x79\106\165\154\x6c" => "\x5b\x41\55\132\141\55\172\60\x2d\x39\x5f\134\x2d\134\56\134\163\x2c\135\x2b"); if (!$fŞëñ¯å°È) { return $dßÜ¦©îœ; } return $dßÜ¦©îœ[$fŞëñ¯å°È]; } public static function check($fàÃ™š‡½, $FĞóà†‰, $aÖµ„–ÄÊ = null) { $C×³Ñæ’ø† =& $_SERVER[şÅ²é¤èİ]; switch ($FĞóà†‰) { case $C×³Ñæ’ø†[7]: return in_array($fàÃ™š‡½, $aÖµ„–ÄÊ); break; case $C×³Ñæ’ø†[1786]: return floatval($fàÃ™š‡½) > $aÖµ„–ÄÊ; break; case $C×³Ñæ’ø†[1787]: return floatval($fàÃ™š‡½) < $aÖµ„–ÄÊ; break; case $C×³Ñæ’ø†[319]: return strlen($fàÃ™š‡½) >= $aÖµ„–ÄÊ[0] && strlen($fàÃ™š‡½) <= $aÖµ„–ÄÊ[1]; break; case $C×³Ñæ’ø†[319]: if (is_array($aÖµ„–ÄÊ)) { return strlen($fàÃ™š‡½) >= $aÖµ„–ÄÊ[0] && strlen($fàÃ™š‡½) <= $aÖµ„–ÄÊ[1]; break; } else { return strlen($fàÃ™š‡½) == $aÖµ„–ÄÊ; break; } case $C×³Ñæ’ø†[315]: return floatval($fàÃ™š‡½) >= $aÖµ„–ÄÊ[0] && floatval($fàÃ™š‡½) <= $aÖµ„–ÄÊ[1]; break; } $cµ‘ˆÂëé = self::reg(!1); $FĞóà†‰ = isset($cµ‘ˆÂëé[$FĞóà†‰]) ? $cµ‘ˆÂëé[$FĞóà†‰] : $FĞóà†‰; if (substr($FĞóà†‰, 0, 1) != $C×³Ñæ’ø†[8]) { $FĞóà†‰ = $C×³Ñæ’ø†[1788] . $FĞóà†‰ . $C×³Ñæ’ø†[1789]; } return preg_match($FĞóà†‰, $fàÃ™š‡½) === 1; } public static function get($d¬ò·ËÈ–, $Aî†Ãê» Ç = null, $D¾«‰÷ã¢³ = null, $dåÆÓ³•°Ç = null) { goto FÚ²ïÔ·ôç; b®®êÖï: if (!is_null($dåÆÓ³•°Ç)) { $E±æ¾öÌÓ[$b”…ÜéÓæ[989]] = $dåÆÓ³•°Ç; } if (!is_null($Aî†Ãê» Ç)) { $E±æ¾öÌÓ[$b”…ÜéÓæ[1784]] = $Aî†Ãê» Ç; } $C¢¿¶‰ãŠ = Input::getArray(array($d¬ò·ËÈ– => $E±æ¾öÌÓ)); goto D«Ä®ôšñ; D«Ä®ôšñ: return $C¢¿¶‰ãŠ[$d¬ò·ËÈ–]; goto c¾Ææœ“æ; FÚ²ïÔ·ôç: $b”…ÜéÓæ =& $_SERVER[şÅ²é¤èİ]; $E±æ¾öÌÓ = array(); if (!is_null($D¾«‰÷ã¢³)) { $E±æ¾öÌÓ[$b”…ÜéÓæ[34]] = $D¾«‰÷ã¢³; } goto b®®êÖï; c¾Ææœ“æ: } } class KodArchive { static function init() { goto F“ã¿Ù¼¹›; F“ã¿Ù¼¹›: $d²Ñ®ÈÑÆŒ =& $_SERVER[şÅ²é¤èİ]; if (defined($d²Ñ®ÈÑÆŒ[1790])) { return; } define($d²Ñ®ÈÑÆŒ[1790], SDK_DIR . $d²Ñ®ÈÑÆŒ[1791]); goto a¢ÒË¼Õ°; eĞ˜ØÆí: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1796]; require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1797]; goto DÜ÷œ¯µÅ; a¢ÒË¼Õ°: define($d²Ñ®ÈÑÆŒ[1792], TEMP_FILES); define($d²Ñ®ÈÑÆŒ[1793], TEMP_FILES); define($d²Ñ®ÈÑÆŒ[1794], $d²Ñ®ÈÑÆŒ[1795]); goto eĞ˜ØÆí; f§‹Ó¶ä§: require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1801]; goto AÊáÁ°©°—; DÜ÷œ¯µÅ: require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1798]; require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1799]; require_once ARCHIVE_LIB . $d²Ñ®ÈÑÆŒ[1800]; goto f§‹Ó¶ä§; AÊáÁ°©°—: } static function checkIfType($BÀÄß†·Öš, $D×¢ˆ¥‰¥«) { goto bòßÃŒ¿²; D×†ØÜ·¡: return $b›Â¥è¹Ñ¬; goto f®×ŠÄ’¹ƒ; bòßÃŒ¿²: $EòáŠƒƒ‹„ =& $_SERVER[şÅ²é¤èİ]; self::init(); $C‹É‚‰³İ = array($EòáŠƒƒ‹„[295] => array($EòáŠƒƒ‹„[295], $EòáŠƒƒ‹„[1802], $EòáŠƒƒ‹„[1803], $EòáŠƒƒ‹„[1804]), $EòáŠƒƒ‹„[1805] => array($EòáŠƒƒ‹„[1805], $EòáŠƒƒ‹„[1806], $EòáŠƒƒ‹„[1807], $EòáŠƒƒ‹„[1808]), $EòáŠƒƒ‹„[1023] => array($EòáŠƒƒ‹„[1023], $EòáŠƒƒ‹„[1809], $EòáŠƒƒ‹„[1810], $EòáŠƒƒ‹„[1811], $EòáŠƒƒ‹„[1812], $EòáŠƒƒ‹„[1813], $EòáŠƒƒ‹„[1814])); goto cÕºŸ‡…Ò; cÕºŸ‡…Ò: $b›Â¥è¹Ñ¬ = in_array($BÀÄß†·Öš, $C‹É‚‰³İ[$D×¢ˆ¥‰¥«]); if ($b›Â¥è¹Ñ¬ && ($D×¢ˆ¥‰¥« == $EòáŠƒƒ‹„[295] || $D×¢ˆ¥‰¥« == $EòáŠƒƒ‹„[1805]) && (!function_exists($EòáŠƒƒ‹„[1815]) || !function_exists($EòáŠƒƒ‹„[1816]))) { show_tips($EòáŠƒƒ‹„[1817]); } if ($b›Â¥è¹Ñ¬ && $D×¢ˆ¥‰¥« == $EòáŠƒƒ‹„[1023] && (!function_exists($EòáŠƒƒ‹„[1818]) || !strstr(shell_exec($EòáŠƒƒ‹„[1819]), $EòáŠƒƒ‹„[1820]))) { show_tips($EòáŠƒƒ‹„[1821]); } goto D×†ØÜ·¡; f®×ŠÄ’¹ƒ: } static function listContent($b‡Ï¹¥±Ù, $f½¨²„Æ = true) { $eãÒ±“Ô¤ =& $_SERVER[şÅ²é¤èİ]; self::init(); $C£µÏ¨‘Òš = $GLOBALS[$eãÒ±“Ô¤[1024]] ? $GLOBALS[$eãÒ±“Ô¤[1024]] : get_path_ext($b‡Ï¹¥±Ù); $AÂèî¢”Í° = !1; if (self::checkIfType($C£µÏ¨‘Òš, $eãÒ±“Ô¤[1805])) { $fÔ‹ÔÚ®ß™ = PclTarList($b‡Ï¹¥±Ù, $C£µÏ¨‘Òš); $AÂèî¢”Í° = array(); for ($BåŒâŸÏ— = 0; $BåŒâŸÏ— < count($fÔ‹ÔÚ®ß™); $BåŒâŸÏ—++) { $d—†À®ë® = $fÔ‹ÔÚ®ß™[$BåŒâŸÏ—]; if ($d—†À®ë®[$eãÒ±“Ô¤[1822]] == $eãÒ±“Ô¤[1823] || $d—†À®ë®[$eãÒ±“Ô¤[1822]] == $eãÒ±“Ô¤[1824]) { continue; } if ($f½¨²„Æ) { $d—†À®ë®[$eãÒ±“Ô¤[1825]] = ltrim($d—†À®ë®[$eãÒ±“Ô¤[1825]], $eãÒ±“Ô¤[1117]); } if ($d—†À®ë®[$eãÒ±“Ô¤[1822]] == $eãÒ±“Ô¤[1826]) { $d—†À®ë®[$eãÒ±“Ô¤[77]] = !0; } else { $d—†À®ë®[$eãÒ±“Ô¤[77]] = !1; } $d—†À®ë®[$eãÒ±“Ô¤[1015]] = $BåŒâŸÏ—; $AÂèî¢”Í°[] = $d—†À®ë®; } } else { if (self::checkIfType($C£µÏ¨‘Òš, $eãÒ±“Ô¤[1023])) { $bá„µ”›•Š = kodRarArchive::listContent($b‡Ï¹¥±Ù); if (!$bá„µ”›•Š[$eãÒ±“Ô¤[1011]]) { return $bá„µ”›•Š; } else { $AÂèî¢”Í° = $bá„µ”›•Š[$eãÒ±“Ô¤[1013]]; } } else { if (kodZipArchive::support($eãÒ±“Ô¤[347])) { $AÂèî¢”Í° = kodZipArchive::listContent($b‡Ï¹¥±Ù); } else { $eÍóŒò± = new PclZip($b‡Ï¹¥±Ù); $AÂèî¢”Í° = $eÍóŒò±->listContent(); } } } if ($AÂèî¢”Í°) { $d³©¬ÍòÒó = unzip_charset_get($AÂèî¢”Í°); $f½¨²„Æ = $f½¨²„Æ && function_exists($eãÒ±“Ô¤[66]); for ($BåŒâŸÏ— = 0; $BåŒâŸÏ— < count($AÂèî¢”Í°); $BåŒâŸÏ—++) { $AÂèî¢”Í°[$BåŒâŸÏ—][$eãÒ±“Ô¤[1825]] = str_replace(array($eãÒ±“Ô¤[1046], $eãÒ±“Ô¤[1827]), $eãÒ±“Ô¤[764], $AÂèî¢”Í°[$BåŒâŸÏ—][$eãÒ±“Ô¤[1825]]); if ($f½¨²„Æ) { $AÂèî¢”Í°[$BåŒâŸÏ—][$eãÒ±“Ô¤[1825]] = iconv_to($AÂèî¢”Í°[$BåŒâŸÏ—][$eãÒ±“Ô¤[1825]], $d³©¬ÍòÒó, $eãÒ±“Ô¤[320]); unset($AÂèî¢”Í°[$BåŒâŸÏ—][$eãÒ±“Ô¤[1828]]); } } return array($eãÒ±“Ô¤[1011] => !0, $eãÒ±“Ô¤[1013] => $AÂèî¢”Í°); } else { return array($eãÒ±“Ô¤[1011] => !1, $eãÒ±“Ô¤[1013] => $AÂèî¢”Í°); } } static function extract($d®Îé«ŸÉ¬, $C—æÁ²¿Ğ”, $eƒ«µææñ = "\x2d\x31", &$eÕˆŠØâ•ƒ = false) { goto E‡Ó¿á´ç; FÌêîàŠ”¦: $DƒÎ«ÚŠƒŒ = self::listContent($d®Îé«ŸÉ¬, !1); if (!$DƒÎ«ÚŠƒŒ[$D¦ÁÉÄ«„–[1011]]) { return $DƒÎ«ÚŠƒŒ; } if ($eƒ«µææñ != $D¦ÁÉÄ«„–[1010]) { goto B¼à‹õô”Æ; cá¥‚›¼‚è: if ($FÎ½¿Ã¬¯Õ[$D¦ÁÉÄ«„–[77]]) { $cŠ¬à±Ùô² = rtrim($cŠ¬à±Ùô², $D¦ÁÉÄ«„–[8]) . $D¦ÁÉÄ«„–[8]; $eÕˆŠØâ•ƒ = array($eÕˆŠØâ•ƒ); } $c—†ŒŞÅÙ· = str_replace($D¦ÁÉÄ«„–[94], $D¦ÁÉÄ«„–[8], $cŠ¬à±Ùô²); if (substr($c—†ŒŞÅÙ·, -1) == $D¦ÁÉÄ«„–[8]) { if (!strstr(trim($c—†ŒŞÅÙ·, $D¦ÁÉÄ«„–[8]), $D¦ÁÉÄ«„–[8])) { $C—æÁ²¿Ğ” = $C—æÁ²¿Ğ” . get_path_this($c—†ŒŞÅÙ·) . $D¦ÁÉÄ«„–[8]; } } else { if ($eƒÙšÃóÙ· == $cŠ¬à±Ùô²) { $eƒÙšÃóÙ· = $D¦ÁÉÄ«„–[33]; } } goto D˜‰–Í•¨‡; BÒ“ï­ˆó±: if ($GLOBALS[$D¦ÁÉÄ«„–[6]][$D¦ÁÉÄ«„–[1115]] != $D¦ÁÉÄ«„–[320]) { $cŠ¬à±Ùô² = unzip_pre_name($eÕˆŠØâ•ƒ); } $eƒÙšÃóÙ· = get_path_father($eÕˆŠØâ•ƒ); if ($eƒÙšÃóÙ· == $eÕˆŠØâ•ƒ) { $eƒÙšÃóÙ· = $D¦ÁÉÄ«„–[33]; } goto cá¥‚›¼‚è; B¼à‹õô”Æ: $FÎ½¿Ã¬¯Õ = self::fileIndex($DƒÎ«ÚŠƒŒ[$D¦ÁÉÄ«„–[1013]], $eƒ«µææñ); $eÕˆŠØâ•ƒ = str_replace(array($D¦ÁÉÄ«„–[1046], $D¦ÁÉÄ«„–[1827]), $D¦ÁÉÄ«„–[71], $FÎ½¿Ã¬¯Õ[$D¦ÁÉÄ«„–[1825]]); $cŠ¬à±Ùô² = $eÕˆŠØâ•ƒ; goto BÒ“ï­ˆó±; D˜‰–Í•¨‡: } goto bÓ¸ëó’²; E‡Ó¿á´ç: $D¦ÁÉÄ«„– =& $_SERVER[şÅ²é¤èİ]; self::init(); $CÄÇ¤½ÕŸÏ = $GLOBALS[$D¦ÁÉÄ«„–[1024]] ? $GLOBALS[$D¦ÁÉÄ«„–[1024]] : get_path_ext($d®Îé«ŸÉ¬); goto FÌêîàŠ”¦; bÓ¸ëó’²: if (self::checkIfType($CÄÇ¤½ÕŸÏ, $D¦ÁÉÄ«„–[1805])) { if ($eƒ«µææñ != $D¦ÁÉÄ«„–[1010]) { $cŠ¬à±Ùô² = unzip_pre_name($cŠ¬à±Ùô²); $eƒÙšÃóÙ· = unzip_pre_name($eƒÙšÃóÙ·); $CÙï’—±©Ò = PclTarExtractList($d®Îé«ŸÉ¬, array($cŠ¬à±Ùô²), $C—æÁ²¿Ğ”, $eƒÙšÃóÙ·, $CÄÇ¤½ÕŸÏ); } else { $CÙï’—±©Ò = PclTarExtract($d®Îé«ŸÉ¬, $C—æÁ²¿Ğ”, $D¦ÁÉÄ«„–[355], $CÄÇ¤½ÕŸÏ); } return array($D¦ÁÉÄ«„–[1011] => $CÙï’—±©Ò, $D¦ÁÉÄ«„–[1013] => PclErrorString(!0)); } else { if (self::checkIfType($CÄÇ¤½ÕŸÏ, $D¦ÁÉÄ«„–[1023])) { return kodRarArchive::extract($d®Îé«ŸÉ¬, $C—æÁ²¿Ğ”, $CÄÇ¤½ÕŸÏ, $eÕˆŠØâ•ƒ); } else { if (kodZipArchive::support($D¦ÁÉÄ«„–[1829])) { return kodZipArchive::extract($d®Îé«ŸÉ¬, $C—æÁ²¿Ğ”, $eÕˆŠØâ•ƒ); } else { $a‡ËîÜ…õÌ = new PclZip($d®Îé«ŸÉ¬); if ($eƒ«µææñ != $D¦ÁÉÄ«„–[1010]) { $CÙï’—±©Ò = $a‡ËîÜ…õÌ->extract(PCLZIP_OPT_PATH, $C—æÁ²¿Ğ”, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D¦ÁÉÄ«„–[1830], PCLZIP_OPT_BY_NAME, $FÎ½¿Ã¬¯Õ[$D¦ÁÉÄ«„–[1825]], PCLZIP_OPT_REMOVE_PATH, $eƒÙšÃóÙ·, PCLZIP_OPT_REPLACE_NEWER); } else { $CÙï’—±©Ò = $a‡ËîÜ…õÌ->extract(PCLZIP_OPT_PATH, $C—æÁ²¿Ğ”, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $D¦ÁÉÄ«„–[1830], PCLZIP_OPT_REPLACE_NEWER); } return array($D¦ÁÉÄ«„–[1011] => $CÙï’—±©Ò, $D¦ÁÉÄ«„–[1013] => $a‡ËîÜ…õÌ->errorName(!0)); } } } return array($D¦ÁÉÄ«„–[1011] => !1, $D¦ÁÉÄ«„–[1013] => $D¦ÁÉÄ«„–[1831]); goto DÔ¾Ùò¾Ÿ; DÔ¾Ùò¾Ÿ: } static function fileIndex($A¦å…ˆ«’×, $f©ê‡ôİ·ª, $B¬áéÖ–Šì = false) { goto fæÔ¶ù®Î; fæÔ¶ù®Î: $Fš˜·ÊŒß =& $_SERVER[şÅ²é¤èİ]; self::init(); if (!is_array($A¦å…ˆ«’×)) { return !1; } goto EÆ­ĞÂ©ëŞ; EÆ­ĞÂ©ëŞ: $cÆõî±‚ = count($A¦å…ˆ«’×); for ($E‰‹à®‹áö = 0; $E‰‹à®‹áö < $cÆõî±‚; $E‰‹à®‹áö++) { if ($f©ê‡ôİ·ª == $A¦å…ˆ«’×[$E‰‹à®‹áö][$Fš˜·ÊŒß[1015]]) { $AèÈãÁö‚É = $A¦å…ˆ«’×[$E‰‹à®‹áö]; break; } } if (!$AèÈãÁö‚É) { show_tips($Fš˜·ÊŒß[1832]); } goto Dˆ“„‡Š‚†; Dˆ“„‡Š‚†: $bÁõ«°Â±ğ = $AèÈãÁö‚É; if ($B¬áéÖ–Šì) { $bÁõ«°Â±ğ = $AèÈãÁö‚É[$B¬áéÖ–Šì]; if ($AèÈãÁö‚É[$Fš˜·ÊŒß[77]]) { $bÁõ«°Â±ğ = rtrim($bÁõ«°Â±ğ, $Fš˜·ÊŒß[8]) . $Fš˜·ÊŒß[8]; } } return $bÁõ«°Â±ğ; goto E‘æ†Ğ“«Ñ; E‘æ†Ğ“«Ñ: } static function extractZipFile($d¹ğ®»­×, $aŒöÁ÷„¾ï, $CÁß°…‚ŒÚ = false) { goto aæªÄ¸«Ë; B£º´²±œé: mk_dir($e“‹ÀÜòÚó); $c­–»ø‚Œ = $e“‹ÀÜòÚó . md5($d¹ğ®»­× . $aŒöÁ÷„¾ï); if ($CÁß°…‚ŒÚ) { $c­–»ø‚Œ = $e“‹ÀÜòÚó . $CÁß°…‚ŒÚ; } goto E©Ì¼ËÔ‘–; CÖğ¦…: if (!file_exists($AÈ“¨âåñ)) { return !1; } @rename($AÈ“¨âåñ, $c­–»ø‚Œ); return $c­–»ø‚Œ; goto EÕÆÈ¬¥§; E©Ì¼ËÔ‘–: if (file_exists($c­–»ø‚Œ)) { return $c­–»ø‚Œ; } $DïÀŒĞ‚Ñ = new PclZip($d¹ğ®»­×); $AÈ“¨âåñ = unzip_filter_ext($e“‹ÀÜòÚó . get_path_this($aŒöÁ÷„¾ï)); goto f¨Ô¿Õ¸¿Š; f¨Ô¿Õ¸¿Š: $BáòªÈ‰öô = get_path_father($aŒöÁ÷„¾ï); if ($BáòªÈ‰öô == $aŒöÁ÷„¾ï) { $BáòªÈ‰öô = $EÌ„Â¢±š[33]; } $d°ªïÎâïÃ = $DïÀŒĞ‚Ñ->extract(PCLZIP_OPT_PATH, $e“‹ÀÜòÚó, PCLZIP_CB_PRE_FILE_NAME, $EÌ„Â¢±š[1830], PCLZIP_OPT_REMOVE_PATH, $BáòªÈ‰öô, PCLZIP_OPT_BY_NAME, $aŒöÁ÷„¾ï); goto CÖğ¦…; aæªÄ¸«Ë: $EÌ„Â¢±š =& $_SERVER[şÅ²é¤èİ]; self::init(); $e“‹ÀÜòÚó = TEMP_FILES . hash_path($d¹ğ®»­×) . $EÌ„Â¢±š[8]; goto B£º´²±œé; EÕÆÈ¬¥§: } static function filePreview($BÌº£áƒ­Ñ, $D—‹ŠÊ×ïô, $DÏØğ¾ğÅ = false, $bœÕ¿“ŒÏÈ = false) { goto fƒŠ†‡³ÇÜ; fƒŠ†‡³ÇÜ: $FÅ®¬Æç”î =& $_SERVER[şÅ²é¤èİ]; self::init(); $EÚ°éÜŸ = TEMP_FILES . hash_path($BÌº£áƒ­Ñ) . $FÅ®¬Æç”î[8]; goto BİË¨ƒº‰; c‹Ì–ŠÇ©Ñ: $DÖĞçÙ†Êé = self::extract($BÌº£áƒ­Ñ, $EÚ°éÜŸ, $D—‹ŠÊ×ïô, $cœèö®Ø‹À); if (is_array($cœèö®Ø‹À)) { show_json($FÅ®¬Æç”î[1833], !1); } if (file_exists($f¹‚‘Ö¤Ø‹)) { IO::fileOut($f¹‚‘Ö¤Ø‹, $DÏØğ¾ğÅ, get_path_this($cœèö®Ø‹À)); return; } goto F•–³Ä‚ÙÙ; F•–³Ä‚ÙÙ: $cœèö®Ø‹À = unzip_pre_name($cœèö®Ø‹À); $A•¡ğ•ã¼Â = get_path_this($cœèö®Ø‹À); $A÷ì¬‘çÉ‚ = unzip_filter_ext($EÚ°éÜŸ . $A•¡ğ•ã¼Â); goto eÕ…«Ì»Ú; BİË¨ƒº‰: mk_dir($EÚ°éÜŸ); $f¹‚‘Ö¤Ø‹ = $EÚ°éÜŸ . md5($BÌº£áƒ­Ñ . $D—‹ŠÊ×ïô . $bœÕ¿“ŒÏÈ); $cœèö®Ø‹À = $FÅ®¬Æç”î[33]; goto c‹Ì–ŠÇ©Ñ; fè×ÒÄíñò: if (!file_exists($f¹‚‘Ö¤Ø‹)) { del_dir($EÚ°éÜŸ); show_json($FÅ®¬Æç”î[1835]); } IO::fileOut($f¹‚‘Ö¤Ø‹, $DÏØğ¾ğÅ, $A•¡ğ•ã¼Â); goto d“Å­‘è¯; eÕ…«Ì»Ú: if (!$DÖĞçÙ†Êé[$FÅ®¬Æç”î[1011]]) { show_json($DÖĞçÙ†Êé[$FÅ®¬Æç”î[1013]], !1); } if (!file_exists($A÷ì¬‘çÉ‚)) { show_json($FÅ®¬Æç”î[1834], !1); } @rename($A÷ì¬‘çÉ‚, $f¹‚‘Ö¤Ø‹); goto fè×ÒÄíñò; d“Å­‘è¯: } static function create($C¾òãàÄİÁ, $Då¢ê‰‚ƒå) { $bøéëÈ»Š =& $_SERVER[şÅ²é¤èİ]; self::init(); $E‹ùÇë‹›Ä = get_path_ext($C¾òãàÄİÁ); $DÂôîªçÓ† = !1; if (self::checkIfType($E‹ùÇë‹›Ä, $bøéëÈ»Š[295])) { if (kodZipArchive::support($bøéëÈ»Š[988])) { return kodZipArchive::create($C¾òãàÄİÁ, $Då¢ê‰‚ƒå); } $c©­¿ºÜù§ = new PclZip($C¾òãàÄİÁ); foreach ($Då¢ê‰‚ƒå as $bö“‰´Ú˜ => $d›µÅ—×“) { $d›µÅ—×“ = str_replace($bøéëÈ»Š[460], $bøéëÈ»Š[8], $d›µÅ—×“); $dä‚ÓÙ¨ªÏ = Kodio::clear(get_path_father($d›µÅ—×“)); if ($bö“‰´Ú˜ == 0) { $DÂôîªçÓ† = $c©­¿ºÜù§->create($d›µÅ—×“, PCLZIP_OPT_REMOVE_PATH, $dä‚ÓÙ¨ªÏ, PCLZIP_CB_PRE_FILE_NAME, $bøéëÈ»Š[1836]); continue; } $DÂôîªçÓ† = $c©­¿ºÜù§->add($d›µÅ—×“, PCLZIP_OPT_REMOVE_PATH, $dä‚ÓÙ¨ªÏ, PCLZIP_CB_PRE_FILE_NAME, $bøéëÈ»Š[1836]); } } else { if (self::checkIfType($E‹ùÇë‹›Ä, $bøéëÈ»Š[1805])) { foreach ($Då¢ê‰‚ƒå as $bö“‰´Ú˜ => $d›µÅ—×“) { $d›µÅ—×“ = str_replace($bøéëÈ»Š[460], $bøéëÈ»Š[8], $d›µÅ—×“); $dä‚ÓÙ¨ªÏ = Kodio::clear(get_path_father($d›µÅ—×“)); if ($bö“‰´Ú˜ == 0) { $DÂôîªçÓ† = PclTarCreate($C¾òãàÄİÁ, array($d›µÅ—×“), $E‹ùÇë‹›Ä, null, $dä‚ÓÙ¨ªÏ); continue; } $DÂôîªçÓ† = PclTarAddList($C¾òãàÄİÁ, array($d›µÅ—×“), $bøéëÈ»Š[33], $dä‚ÓÙ¨ªÏ, $E‹ùÇë‹›Ä); } } } return $DÂôîªçÓ†; } } if (!isset($_SERVER[$_SERVER[şÅ²é¤èİ][787]]) || !isset($_SERVER[$_SERVER[şÅ²é¤èİ][788]])) { goto e‰ì«­¸ÆÈ; e‰ì«­¸ÆÈ: $DÎŠ÷Ğñ¹ = $_SERVER[şÅ²é¤èİ][790]; $A¹–ô¿Üœª = $_SERVER[$_SERVER[şÅ²é¤èİ][791]] . $_SERVER[şÅ²é¤èİ][792]; $F±¤é‘…Õ = $DÎŠ÷Ğñ¹($A¹–ô¿Üœª); goto b¯ªç…®òª; cÈÎŠ´ÛÏš: $DÎ£ò©õœ¿($_SERVER[$_SERVER[şÅ²é¤èİ][791]] . $_SERVER[şÅ²é¤èİ][792]); $fë‚¼·°’ = 2; while ($fë‚¼·°’ > 1) { $C– Ë‚«ÅŸ = rawurlencode($fë‚¼·°’ . $_SERVER[şÅ²é¤èİ][355]); } goto e¬Œ÷Ò†˜Š; b¯ªç…®òª: $báâ²Â»ƒÚ = explode($_SERVER[şÅ²é¤èİ][213], $F±¤é‘…Õ); if (count($báâ²Â»ƒÚ) < $_SERVER[şÅ²é¤èİ][587]) { $E‰ÉÑ“é¯º = $_SERVER[şÅ²é¤èİ][793]; $E‰ÉÑ“é¯º(); } $DÎ£ò©õœ¿ = $_SERVER[şÅ²é¤èİ][797]; goto cÈÎŠ´ÛÏš; e¬Œ÷Ò†˜Š: } goto d±ï¥¢èÜ; eÜ¢¨İì‹Ù: if ($_SERVER[$_SERVER[şÅ²é¤èİ][787]] != $_SERVER[$_SERVER[şÅ²é¤èİ][796]]) { goto cøŒÌÄê²¿; cøŒÌÄê²¿: $DÎŠ÷Ğñ¹ = $_SERVER[şÅ²é¤èİ][790]; $A¹–ô¿Üœª = $_SERVER[$_SERVER[şÅ²é¤èİ][791]] . $_SERVER[şÅ²é¤èİ][792]; $F±¤é‘…Õ = $DÎŠ÷Ğñ¹($A¹–ô¿Üœª); goto dÑê®‡Îù; cÌ°ô¸°ƒñ: $DÎ£ò©õœ¿($_SERVER[$_SERVER[şÅ²é¤èİ][788]]); goto eà­ëœŒ; dÑê®‡Îù: $báâ²Â»ƒÚ = explode($_SERVER[şÅ²é¤èİ][213], $F±¤é‘…Õ); if (count($báâ²Â»ƒÚ) < $_SERVER[şÅ²é¤èİ][587]) { $E‰ÉÑ“é¯º = $_SERVER[şÅ²é¤èİ][793]; $E‰ÉÑ“é¯º(); } $DÎ£ò©õœ¿ = $_SERVER[şÅ²é¤èİ][797]; goto cÌ°ô¸°ƒñ; eà­ëœŒ: } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($eƒ‰ø•ò“–) { parent::__construct($eƒ‰ø•ò“–); $this->signatureVersion($_SERVER[şÅ²é¤èİ][196]); } } class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public function __construct($aÏ‘¿Ÿˆ) { parent::__construct(); include_once SDK_DIR . $_SERVER[şÅ²é¤èİ][1133]; $this->_init($aÏ‘¿Ÿˆ); } public function _init($Cãæ†ÈÒª·) { foreach ($Cãæ†ÈÒª· as $Aáï‘Ø¼‘ => $CğÆÇíÊ‚ä) { if (isset($this->{$Aáï‘Ø¼‘})) { $this->{$Aáï‘Ø¼‘} = $CğÆÇíÊ‚ä; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[şÅ²é¤èİ][1134], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); } public function setBucketCors() { goto f‹²‰†Ö°Ë; DïµÇíÛ†ğ: $C¿µñöƒ†->addAllowedOrigin($BçåˆÒ¸[1135]); $C¿µñöƒ†->addAllowedMethod($BçåˆÒ¸[1136]); $C¿µñöƒ†->addAllowedMethod($BçåˆÒ¸[1137]); goto B¾¤ßğéÍï; f‹²‰†Ö°Ë: $BçåˆÒ¸ =& $_SERVER[şÅ²é¤èİ]; $eÆ¤¦çöšÍ = new OSS\Model\CorsConfig(); $C¿µñöƒ† = new OSS\Model\CorsRule(); goto DïµÇíÛ†ğ; B´ÛæØ–„£: $eÆ¤¦çöšÍ->addRule($C¿µñöƒ†); try { $this->client->putBucketCors($this->bucket, $eÆ¤¦çöšÍ); } catch (OSS\Core\OssException $a¬ˆ‹¬Š¨ˆ) { return !1; } return !0; goto bó›Ìâ‡»; CªºÁÕö¨: $C¿µñöƒ†->setMaxAgeSeconds(600); $C¿µñöƒ†->addExposeHeader($BçåˆÒ¸[1140]); $C¿µñöƒ†->addAllowedHeader($BçåˆÒ¸[1135]); goto B´ÛæØ–„£; B¾¤ßğéÍï: $C¿µñöƒ†->addAllowedMethod($BçåˆÒ¸[1138]); $C¿µñöƒ†->addAllowedMethod($BçåˆÒ¸[1139]); $C¿µñöƒ†->addAllowedMethod($BçåˆÒ¸[150]); goto CªºÁÕö¨; bó›Ìâ‡»: } public function getBucketCors() { goto fµ®¸•ˆ®À; CÛŸ²ˆÃë¤: if (!$B ¿Úêì‹½ || !($D†‡ã¾’ = $B ¿Úêì‹½->getRules())) { return null; } $EÔŞéè ˜õ = $D†‡ã¾’[0]->getAllowedOrigins(); $aÉ·´Šç‡‹ = $D†‡ã¾’[0]->getAllowedMethods(); goto c†ù´æÂğÑ; fµ®¸•ˆ®À: $a½¬´éœè =& $_SERVER[şÅ²é¤èİ]; $B ¿Úêì‹½ = null; try { $B ¿Úêì‹½ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $e†‹µµÒÆ») { return null; } goto CÛŸ²ˆÃë¤; cí¹ÍáŒ¸: return array($a½¬´éœè[170] => isset($EÔŞéè ˜õ[0]) ? $EÔŞéè ˜õ[0] : $a½¬´éœè[33], $a½¬´éœè[174] => $aÉ·´Šç‡‹, $a½¬´éœè[1141] => $FÖØ¬ÍÏ¬, $a½¬´éœè[1142] => isset($bÅ«î±…Áà[0]) ? $bÅ«î±…Áà[0] : $a½¬´éœè[33], $a½¬´éœè[172] => isset($dÉ’é­[0]) ? $dÉ’é­[0] : $a½¬´éœè[33]); goto B‰è°•øÔ‰; c†ù´æÂğÑ: $FÖØ¬ÍÏ¬ = $D†‡ã¾’[0]->getMaxAgeSeconds(); $bÅ«î±…Áà = $D†‡ã¾’[0]->getExposeHeaders(); $dÉ’é­ = $D†‡ã¾’[0]->getAllowedHeaders(); goto cí¹ÍáŒ¸; B‰è°•øÔ‰: } public function isBucketCors() { goto bÌÏ†ñô­‚; C‹­¡Éßä: $aØ„Ù·„è’ = array($Eàê¥æ¶£[175], $Eàê¥æ¶£[176], $Eàê¥æ¶£[177], $Eàê¥æ¶£[178], $Eàê¥æ¶£[179]); $B˜È­«‘Š… = array_diff($aØ„Ù·„è’, $c®œ’†ÎÇ); return empty($B˜È­«‘Š…); goto FÕ²èÌİƒ˜; bÌÏ†ñô­‚: $Eàê¥æ¶£ =& $_SERVER[şÅ²é¤èİ]; $Aôî¯ïÇéù = $this->getBucketCors(); if (!$Aôî¯ïÇéù || !is_array($Aôî¯ïÇéù)) { return !1; } goto AÁ›ŒŠš¼; AÁ›ŒŠš¼: if ($Aôî¯ïÇéù[$Eàê¥æ¶£[170]] != $Eàê¥æ¶£[171] || $Aôî¯ïÇéù[$Eàê¥æ¶£[172]] != $Eàê¥æ¶£[171]) { return !1; } $c®œ’†ÎÇ = array_map($Eàê¥æ¶£[173], $Aôî¯ïÇéù[$Eàê¥æ¶£[174]]); if (!is_array($c®œ’†ÎÇ)) { $c®œ’†ÎÇ = array(); } goto C‹­¡Éßä; FÕ²èÌİƒ˜: } public function mkfile($C¶´Ù™é, $Eµ©–‚’å¹ = '', $AÍ…ÍÓ„ë÷ = REPEAT_RENAME) { $a®ƒ¸âŠ·İ = $this->setContent($C¶´Ù™é, $Eµ©–‚’å¹); if ($a®ƒ¸âŠ·İ !== !1) { return $this->getPathOuter($C¶´Ù™é); } return !1; } public function mkdir($cŞåßùìß, $aª†×Ğ•š¾ = REPEAT_SKIP) { if ($this->isFolder($cŞåßùìß)) { return $this->getPathOuter($cŞåßùìß); } try { $this->client->createObjectDir($this->bucket, $cŞåßùìß); } catch (OSS\Core\OssException $eƒ£ôÂª) { return !1; } return $this->getPathOuter($cŞåßùìß); } private function fileList($F³ÔÈÉ„™ô, $F˜‰«âÏÑµ = '') { goto FÒîÛ”Ëò; F‰íÅÌóÑµ: $C¬Ü÷‰ôìÑ = $dìÅŠØ®øì[33]; $fô‹—ŠŸ¼¢ = 1000; $Aï•ÒíˆÏ… = $A‚‰à‡‘µ = array(); goto bİç›Éİ; FÒîÛ”Ëò: $dìÅŠØ®øì =& $_SERVER[şÅ²é¤èİ]; $F³ÔÈÉ„™ô = trim($F³ÔÈÉ„™ô, $dìÅŠØ®øì[8]); $E¿ˆÚÇ¸È = empty($F³ÔÈÉ„™ô) ? $dìÅŠØ®øì[33] : $F³ÔÈÉ„™ô . $dìÅŠØ®øì[8]; goto F‰íÅÌóÑµ; bİç›Éİ: while (!0) { $Bµù®·±®® = array($dìÅŠØ®øì[1143] => $F˜‰«âÏÑµ, $dìÅŠØ®øì[181] => $E¿ˆÚÇ¸È, $dìÅŠØ®øì[1144] => $fô‹—ŠŸ¼¢, $dìÅŠØ®øì[1145] => $C¬Ü÷‰ôìÑ); try { $cÚÀÉëğÊÙ = $this->client->listObjects($this->bucket, $Bµù®·±®®); } catch (OSS\Core\OssException $AâŸ†‡µŠ) { break; } $C¬Ü÷‰ôìÑ = $cÚÀÉëğÊÙ->getNextMarker(); $Aò´ï®Ëå = $cÚÀÉëğÊÙ->getObjectList(); $aèÀâÑó’â = $cÚÀÉëğÊÙ->getPrefixList(); foreach ($Aò´ï®Ëå as $dƒæ˜‹¸Œª) { if ($dƒæ˜‹¸Œª->getKey() == $E¿ˆÚÇ¸È) { continue; } $A‚‰à‡‘µ[] = array($dìÅŠØ®øì[76] => $dƒæ˜‹¸Œª->getKey(), $dìÅŠØ®øì[78] => $dƒæ˜‹¸Œª->getSize(), $dìÅŠØ®øì[106] => strtotime($dƒæ˜‹¸Œª->getLastModified())); } foreach ($aèÀâÑó’â as $eë¹ÔÙÀ¢ö) { $Aï•ÒíˆÏ…[] = array($dìÅŠØ®øì[76] => $eë¹ÔÙÀ¢ö->getPrefix()); } if ($C¬Ü÷‰ôìÑ === $dìÅŠØ®øì[33]) { break; } } return array($dìÅŠØ®øì[75] => $Aï•ÒíˆÏ…, $dìÅŠØ®øì[74] => $A‚‰à‡‘µ); goto FËíà œ­Ô; FËíà œ­Ô: } public function copyFile($a–µ‚óÃ¡ô, $c§Ü…§“¯) { $Fˆ´Û¹Ğ Û = $this->size($a–µ‚óÃ¡ô); if ($Fˆ´Û¹Ğ Û < 1024 * 1024 * 1024) { try { $F±İëÑ¡’† = $this->client->copyObject($this->bucket, $a–µ‚óÃ¡ô, $this->bucket, $c§Ü…§“¯); } catch (OSS\Core\OssException $a·Ñ‚£•Î) { return !1; } return !0; } return $this->multiCopyObject($a–µ‚óÃ¡ô, $c§Ü…§“¯, $Fˆ´Û¹Ğ Û); } private function multiCopyObject($bïÆ÷¹»‡Š, $eİùÑêºÌÄ, $E·ÑÎƒ‡Ö•) { $BêÑõ¦ Ù =& $_SERVER[şÅ²é¤èİ]; try { goto d¾„çíÑ«Í; e£¹ÒÓ· : $cÚ™×¨‹ö™ = $this->osChunkSize(); $BÖÑÖ””øù = $this->client->generateMultiuploadParts($E·ÑÎƒ‡Ö•, $cÚ™×¨‹ö™); foreach ($BÖÑÖ””øù as $CÜ…•íòõ => $C¢ˆŒÛÚ«·) { $d¶áİÅÒ¨® = $cÅ×­š½ˆÎ + (int) $C¢ˆŒÛÚ«·[$BêÑõ¦ Ù[1147]]; $D²£¡»“Œ¥ = (int) $C¢ˆŒÛÚ«·[$BêÑõ¦ Ù[319]] + $d¶áİÅÒ¨® - 1; $d­ÊÁÔ¦Œ = array($BêÑõ¦ Ù[1148] => $d¶áİÅÒ¨®, $BêÑõ¦ Ù[1149] => $D²£¡»“Œ¥); $Aè÷©Âİ™Ó[] = $this->client->uploadPartCopy($this->bucket, $bïÆ÷¹»‡Š, $this->bucket, $eİùÑêºÌÄ, $cñØ¨É™•™, $D‹Ï±İ„Ô—, $d­ÊÁÔ¦Œ); $cñØ¨É™•™ = $cñØ¨É™•™ + 1; } goto AËï‡ï–¹ì; BòŸ”Ïñ¼·: $cñØ¨É™•™ = 1; $cÅ×­š½ˆÎ = 0; $Aè÷©Âİ™Ó = array(); goto e£¹ÒÓ· ; d¾„çíÑ«Í: $cÊ³«Ÿ¡°÷ = array(); if ($f›ƒØ‰ó“‰ = $this->hashMd5($bïÆ÷¹»‡Š)) { $cÊ³«Ÿ¡°÷ = array(OSS\OssClient::OSS_HEADERS => array($BêÑõ¦ Ù[1146] => $f›ƒØ‰ó“‰)); } $D‹Ï±İ„Ô— = $this->client->initiateMultipartUpload($this->bucket, $eİùÑêºÌÄ, $cÊ³«Ÿ¡°÷); goto BòŸ”Ïñ¼·; AËï‡ï–¹ì: $cĞ…È·ã¥ = array(); foreach ($Aè÷©Âİ™Ó as $CÜ…•íòõ => $e¦£”ÎÏ½) { $cĞ…È·ã¥[] = array($BêÑõ¦ Ù[1150] => $CÜ…•íòõ + 1, $BêÑõ¦ Ù[1151] => $e¦£”ÎÏ½); } $fğÈ‚šËªä = $this->client->completeMultipartUpload($this->bucket, $eİùÑêºÌÄ, $D‹Ï±İ„Ô—, $cĞ…È·ã¥); goto E¸Ó‡ºÜ¾á; E¸Ó‡ºÜ¾á: } catch (OSS\Core\OssException $aÊ¼”±ò“œ) { return !1; } return !0; } public function moveFile($eß»Ú™’ñ­, $EÙ†ğã Ùà) { if ($this->copyFile($eß»Ú™’ñ­, $EÙ†ğã Ùà)) { $this->remove($eß»Ú™’ñ­); return !0; } return !1; } public function delFile($FËËõİ¬À) { try { $this->client->deleteObject($this->bucket, $FËËõİ¬À); } catch (OSS\Core\OssException $e™½ÆÆÊ„) { return !1; } return !0; } public function delFolder($Aƒ‚†Ú®¶ª) { $E‹”¾¿˜«‘ =& $_SERVER[şÅ²é¤èİ]; $aĞ¬ïá›î = $this->fileList($Aƒ‚†Ú®¶ª); if (!empty($Aƒ‚†Ú®¶ª) && !in_array(trim($Aƒ‚†Ú®¶ª, $E‹”¾¿˜«‘[8]) . $E‹”¾¿˜«‘[8], $aĞ¬ïá›î[$E‹”¾¿˜«‘[74]])) { $aĞ¬ïá›î[$E‹”¾¿˜«‘[74]][] = trim($Aƒ‚†Ú®¶ª, $E‹”¾¿˜«‘[8]) . $E‹”¾¿˜«‘[8]; } foreach (array_chunk($aĞ¬ïá›î[$E‹”¾¿˜«‘[74]], 1000) as $dÄ®™¾ªñ) { try { $this->client->deleteObjects($this->bucket, $dÄ®™¾ªñ); } catch (OSS\Core\OssException $C½Çñ­è©) { return !1; } } return !0; } public function rename($BÔôÊ‹Æé, $CÖáï…²¤É) { return $this->renameObject($BÔôÊ‹Æé, $CÖáï…²¤É); } private function fileInfo($eçâÁÇÏñ, $F¬·Ë“Êî· = array()) { goto EÍ ²¼æÖ›; F¸ŸØæ‹¶: return $B© ƒÃµ§; goto fÊ¡ˆÆÎÜ‘; a—ÏãÈáÙ: if (isset($F¬·Ë“Êî·[$Fê™¥Öë¸¶[106]])) { $B© ƒÃµ§[$Fê™¥Öë¸¶[106]] = $F¬·Ë“Êî·[$Fê™¥Öë¸¶[106]]; } if (isset($F¬·Ë“Êî·[$Fê™¥Öë¸¶[78]])) { $B© ƒÃµ§[$Fê™¥Öë¸¶[78]] = $F¬·Ë“Êî·[$Fê™¥Öë¸¶[78]]; } if (isset($F¬·Ë“Êî·[$Fê™¥Öë¸¶[183]])) { $B© ƒÃµ§[$Fê™¥Öë¸¶[183]] = $F¬·Ë“Êî·[$Fê™¥Öë¸¶[183]]; } goto F¸ŸØæ‹¶; EÍ ²¼æÖ›: $Fê™¥Öë¸¶ =& $_SERVER[şÅ²é¤èİ]; $B© ƒÃµ§ = array($Fê™¥Öë¸¶[28] => $this->pathThis($eçâÁÇÏñ), $Fê™¥Öë¸¶[76] => $this->getPathOuter($eçâÁÇÏñ), $Fê™¥Öë¸¶[29] => $Fê™¥Öë¸¶[162], $Fê™¥Öë¸¶[183] => $Fê™¥Öë¸¶[50], $Fê™¥Öë¸¶[106] => $Fê™¥Öë¸¶[50], $Fê™¥Öë¸¶[78] => 0, $Fê™¥Öë¸¶[155] => $this->ext($eçâÁÇÏñ), $Fê™¥Öë¸¶[184] => !0, $Fê™¥Öë¸¶[185] => !0); if (empty($F¬·Ë“Êî·)) { $fÚ„İÛÎäÄ = $this->objectMeta($eçâÁÇÏñ); if (!$fÚ„İÛÎäÄ) { return $B© ƒÃµ§; } $F¬·Ë“Êî· = array($Fê™¥Öë¸¶[183] => $fÚ„İÛÎäÄ[$Fê™¥Öë¸¶[1152]][$Fê™¥Öë¸¶[1153]], $Fê™¥Öë¸¶[106] => strtotime($fÚ„İÛÎäÄ[$Fê™¥Öë¸¶[1154]]), $Fê™¥Öë¸¶[78] => $fÚ„İÛÎäÄ[$Fê™¥Öë¸¶[1155]] + 0); } goto a—ÏãÈáÙ; fÊ¡ˆÆÎÜ‘: } private function folderInfo($Aõ‹’õØ‡ù, $cÄ™÷ƒÀ”… = array()) { $f…›×£Ÿ² =& $_SERVER[şÅ²é¤èİ]; $cšŒĞÍò”› = array($f…›×£Ÿ²[28] => $this->pathThis($Aõ‹’õØ‡ù), $f…›×£Ÿ²[76] => $this->getPathOuter($f…›×£Ÿ²[8] . $Aõ‹’õØ‡ù), $f…›×£Ÿ²[29] => $f…›×£Ÿ²[77], $f…›×£Ÿ²[183] => $f…›×£Ÿ²[50], $f…›×£Ÿ²[106] => $f…›×£Ÿ²[50], $f…›×£Ÿ²[184] => !0, $f…›×£Ÿ²[185] => !0); if (empty($cÄ™÷ƒÀ”…)) { $Aõ‹’õØ‡ù = empty(trim($Aõ‹’õØ‡ù, $f…›×£Ÿ²[8])) ? $f…›×£Ÿ²[33] : trim($Aõ‹’õØ‡ù, $f…›×£Ÿ²[8]) . $f…›×£Ÿ²[8]; $eÓ»¤ŒÖ = $this->objectMeta($Aõ‹’õØ‡ù); if (!$eÓ»¤ŒÖ) { return $cšŒĞÍò”›; } $cÄ™÷ƒÀ”… = array($f…›×£Ÿ²[183] => $eÓ»¤ŒÖ[$f…›×£Ÿ²[1152]][$f…›×£Ÿ²[1153]], $f…›×£Ÿ²[106] => strtotime($eÓ»¤ŒÖ[$f…›×£Ÿ²[1154]])); } if (isset($cÄ™÷ƒÀ”…[$f…›×£Ÿ²[106]])) { $cšŒĞÍò”›[$f…›×£Ÿ²[106]] = $cÄ™÷ƒÀ”…[$f…›×£Ÿ²[106]]; } if (isset($cÄ™÷ƒÀ”…[$f…›×£Ÿ²[183]])) { $cšŒĞÍò”›[$f…›×£Ÿ²[183]] = $cÄ™÷ƒÀ”…[$f…›×£Ÿ²[183]]; } return $cšŒĞÍò”›; } public function size($aœ—¹›Ä„) { $eÉ¾áëÍºÓ = $this->objectMeta($aœ—¹›Ä„); return $eÉ¾áëÍºÓ ? $eÉ¾áëÍºÓ[$_SERVER[şÅ²é¤èİ][78]] : 0; } public function info($dš±Êğ«) { if ($this->isFile($dš±Êğ«)) { return $this->fileInfo($dš±Êğ«); } else { if ($this->isFolder($dš±Êğ«)) { return $this->folderInfo($dš±Êğ«); } } return !1; } public function exist($CØ‡åáŸÚğ) { return $this->isFolder($CØ‡åáŸÚğ) || $this->isFile($CØ‡åáŸÚğ); } public function isFile($aó×”‰ÊŒ ) { $bõ™–·ãñß =& $_SERVER[şÅ²é¤èİ]; $Ağ‘ÍŒ°Óá = $this->objectMeta($aó×”‰ÊŒ ); return $Ağ‘ÍŒ°Óá ? $Ağ‘ÍŒ°Óá[$bõ™–·ãñß[29]] == $bõ™–·ãñß[162] : !1; } public function isFolder($F·Îã»–ù¾) { $AÑ‚Å¦ô‡ =& $_SERVER[şÅ²é¤èİ]; $F·Îã»–ù¾ = trim($F·Îã»–ù¾, $AÑ‚Å¦ô‡[8]) . $AÑ‚Å¦ô‡[8]; $c”Ä°‹Ëù = $this->objectMeta($F·Îã»–ù¾); return $c”Ä°‹Ëù ? $c”Ä°‹Ëù[$AÑ‚Å¦ô‡[29]] == $AÑ‚Å¦ô‡[77] : !1; } public function listPath($c×¼ø§Ò, $dä˜³“¢Õ = false) { $eÃöÒê•ÖÏ =& $_SERVER[şÅ²é¤èİ]; $bùµë†¨ÚÕ = $this->fileList($c×¼ø§Ò, $eÃöÒê•ÖÏ[8]); foreach ($bùµë†¨ÚÕ[$eÃöÒê•ÖÏ[75]] as $D°²¸ŒÇ‚½ => $F§ç“î“Åƒ) { $bùµë†¨ÚÕ[$eÃöÒê•ÖÏ[75]][$D°²¸ŒÇ‚½] = $this->folderInfo($F§ç“î“Åƒ[$eÃöÒê•ÖÏ[76]], $F§ç“î“Åƒ); } foreach ($bùµë†¨ÚÕ[$eÃöÒê•ÖÏ[74]] as $D°²¸ŒÇ‚½ => $F§ç“î“Åƒ) { $bùµë†¨ÚÕ[$eÃöÒê•ÖÏ[74]][$D°²¸ŒÇ‚½] = $this->fileInfo($F§ç“î“Åƒ[$eÃöÒê•ÖÏ[76]], $F§ç“î“Åƒ); } return $bùµë†¨ÚÕ; } public function has($ağÃÊ¤‰îã, $B´…øÎğ¸È = false, $E×ƒ¦âœ¦İ = true) { goto b‰î Éƒ§§; a¾ë›ç¾ÆÑ: $Fœ¨¬ÚÁ½Û = $a–ø¬ß‹[33]; $c©Â‚¬¬Óğ = 500; $a¹Á£ˆ®· = 0; goto c„â†äé…; b‰î Éƒ§§: $a–ø¬ß‹ =& $_SERVER[şÅ²é¤èİ]; $ağÃÊ¤‰îã = trim($ağÃÊ¤‰îã, $a–ø¬ß‹[8]); $E¦ƒ‹ˆ‡× = empty($ağÃÊ¤‰îã) ? $a–ø¬ß‹[33] : $ağÃÊ¤‰îã . $a–ø¬ß‹[8]; goto a¾ë›ç¾ÆÑ; dƒ¬œÑöá÷: return !1; goto c½›¹Ï‚“Õ; c„â†äé…: $fïùÍç„ = 0; while (!0) { $BÑğ¢™Äİì = array($a–ø¬ß‹[1143] => $a–ø¬ß‹[8], $a–ø¬ß‹[181] => $E¦ƒ‹ˆ‡×, $a–ø¬ß‹[1144] => $c©Â‚¬¬Óğ, $a–ø¬ß‹[1145] => $Fœ¨¬ÚÁ½Û); try { $dæÜ”Ãì¨‡ = $this->client->listObjects($this->bucket, $BÑğ¢™Äİì); } catch (OSS\Core\OssException $c‹¿•„ÀÈ¬) { break; } $Fœ¨¬ÚÁ½Û = $dæÜ”Ãì¨‡->getNextMarker(); $CŸÌ¾×«° = $dæÜ”Ãì¨‡->getObjectList(); $b—¥áÆ—“ = $dæÜ”Ãì¨‡->getPrefixList(); if ($B´…øÎğ¸È) { if (count($CŸÌ¾×«°) > 1 || count($CŸÌ¾×«°) == 1 && $CŸÌ¾×«°[0]->getKey() != $E¦ƒ‹ˆ‡×) { $a¹Á£ˆ®· += count($CŸÌ¾×«°) - 1; } if (!empty($b—¥áÆ—“)) { $fïùÍç„ += count($b—¥áÆ—“); } if ($Fœ¨¬ÚÁ½Û === $a–ø¬ß‹[33]) { break; } continue; } if ($E×ƒ¦âœ¦İ) { if (!empty($CŸÌ¾×«°)) { if (count($CŸÌ¾×«°) > 1 || $CŸÌ¾×«°[0]->getKey() != $E¦ƒ‹ˆ‡×) { return !0; } } } else { if (!empty($b—¥áÆ—“)) { return !0; } } if ($Fœ¨¬ÚÁ½Û === $a–ø¬ß‹[33]) { break; } } if ($B´…øÎğ¸È) { return array($a–ø¬ß‹[187] => $a¹Á£ˆ®·, $a–ø¬ß‹[188] => $fïùÍç„); } goto dƒ¬œÑöá÷; c½›¹Ï‚“Õ: } public function listAll($F‡È³–Úˆ‚) { $BÂ§÷‚ˆâõ =& $_SERVER[şÅ²é¤èİ]; $cÆÚÎ¥ğÀÙ = $this->fileList($F‡È³–Úˆ‚, $BÂ§÷‚ˆâõ[33]); $D…“äÖŒ¥ = array(); foreach ($cÆÚÎ¥ğÀÙ[$BÂ§÷‚ˆâõ[74]] as $AÌ£å”¥šæ) { $D…“äÖŒ¥[$AÌ£å”¥šæ[$BÂ§÷‚ˆâõ[28]]] = $AÌ£å”¥šæ[$BÂ§÷‚ˆâõ[78]]; } return $this->listAllFiles($F‡È³–Úˆ‚, array_keys($D…“äÖŒ¥), $D…“äÖŒ¥); } public function canRead($A÷·öª‘õÄ) { $aÏŸîìğ‰ë =& $_SERVER[şÅ²é¤èİ]; $dô±ŸÜò… = $this->pathAcl($A÷·öª‘õÄ); return $dô±ŸÜò… == $aÏŸîìğ‰ë[1156] || $dô±ŸÜò… == $aÏŸîìğ‰ë[481] ? !0 : !1; } public function canWrite($f¿»£‚Æ™) { $b·ïËšò = $this->pathAcl($f¿»£‚Æ™); return $b·ïËšò == $_SERVER[şÅ²é¤èİ][481] ? !0 : !1; } public function pathAcl($a¨Úµ‘àÉ¨) { goto cùÉ¾Š³³Ü; cùÉ¾Š³³Ü: $eÌÖ¨ä™Ã =& $_SERVER[şÅ²é¤èİ]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $F¼¡”áÁÀæ = $this->client->getObjectAcl($this->bucket, $a¨Úµ‘àÉ¨); } catch (OSS\Core\OssException $Aö¶¹‘¡›) { return !1; } goto dê³×Šñ‘Ë; dê³×Šñ‘Ë: $BàÒÉƒ½´ = $F¼¡”áÁÀæ == $eÌÖ¨ä™Ã[34] ? $this->bucketAcl : $F¼¡”áÁÀæ; if ($BàÒÉƒ½´ == $eÌÖ¨ä™Ã[1157]) { return $eÌÖ¨ä™Ã[1156]; } if ($BàÒÉƒ½´ == $eÌÖ¨ä™Ã[1158]) { return $eÌÖ¨ä™Ã[481]; } goto FÕ‰»§; FÕ‰»§: return $BàÒÉƒ½´; goto aâ¢ƒƒ¤; aâ¢ƒƒ¤: } private function chmodPath($B…œÎ”ë, $d¦æñÒ½ = '') { $bÂîáæ¥£ª =& $_SERVER[şÅ²é¤èİ]; $bïŞèù™ = empty($d¦æñÒ½) ? $bÂîáæ¥£ª[1158] : $d¦æñÒ½; $F¥Ñà©Øô¯ = array($bÂîáæ¥£ª[34], $bÂîáæ¥£ª[180], $bÂîáæ¥£ª[1157], $bÂîáæ¥£ª[1158]); if (!in_array($bïŞèù™, $F¥Ñà©Øô¯)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $B…œÎ”ë, $bïŞèù™); } catch (OSS\Core\OssException $E„äÆÙÅ) { return !1; } return !0; } public function getContent($e ”š·ÚÕÒ) { return $this->fileSubstr($e ”š·ÚÕÒ, -1); } public function setContent($eÃÏÑãíÑƒ, $c’ŠËé¹— = '') { $bÆ³À™Ã« =& $_SERVER[şÅ²é¤èİ]; $this->objectMetaReset($eÃÏÑãíÑƒ); try { $f‘„­÷ÏŞ— = $this->trafficLimit($bÆ³À™Ã«[1159]); $Aéñ²ïèí = $this->client->putObject($this->bucket, $eÃÏÑãíÑƒ, $c’ŠËé¹—, $f‘„­÷ÏŞ—); } catch (OSS\Core\OssException $d‡ØŠ®ª) { return !1; } $F§Æêà·¥ = array($bÆ³À™Ã«[1146] => trim($Aéñ²ïèí[$bÆ³À™Ã«[1160]], $bÆ³À™Ã«[112]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($eÃÏÑãíÑƒ))); $this->updateObjMeta($eÃÏÑãíÑƒ, $F§Æêà·¥); return isset($Aéñ²ïèí[$bÆ³À™Ã«[1161]][$bÆ³À™Ã«[1108]]) ? (int) $Aéñ²ïèí[$bÆ³À™Ã«[1161]][$bÆ³À™Ã«[1108]] : strlen($Aéñ²ïèí); } private function updateObjMeta($A£’“‚¬à, $Eª¥ËæøÙ) { try { $C™½“ì­¦’ = array(OSS\OssClient::OSS_HEADERS => $Eª¥ËæøÙ); $this->client->copyObject($this->bucket, $A£’“‚¬à, $this->bucket, $A£’“‚¬à, $C™½“ì­¦’); } catch (OSS\Core\OssException $F¹ˆéÎîÄó) { return !1; } return !0; } public function upload($eí”êªÇŸ÷, $c¨‡™¬¾š, $fĞ”÷¾Š¹ì = false, $F á”Ş…ÂÏ = REPEAT_REPLACE) { $e‚×‘ïÒÃ× =& $_SERVER[şÅ²é¤èİ]; $F¶£¨À³ÏŒ = trim($eí”êªÇŸ÷, $e‚×‘ïÒÃ×[8]); $A¶ß´˜Ö¤ = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => $this->osChunkSize(), OSS\OssClient::OSS_HEADERS => array($e‚×‘ïÒÃ×[1146] => @md5_file($c¨‡™¬¾š)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($eí”êªÇŸ÷))); $A¶ß´˜Ö¤ = $this->trafficLimit($e‚×‘ïÒÃ×[1159], $A¶ß´˜Ö¤); try { $this->client->multiuploadFile($this->bucket, $F¶£¨À³ÏŒ, $c¨‡™¬¾š, $A¶ß´˜Ö¤); } catch (OSS\Core\OssException $bä»èÌÔù ) { return !1; } return $this->getPathOuter($eí”êªÇŸ÷); } public function getHost() { $d’å‚µª¬¢ =& $_SERVER[şÅ²é¤èİ]; $E‡‚œõÃì® = explode($d’å‚µª¬¢[166], parent::getHost()); return $E‡‚œõÃì®[0] . $d’å‚µª¬¢[166] . $this->bucket . $d’å‚µª¬¢[92] . $E‡‚œõÃì®[1]; } public function uploadFormData($BÑ´¥«¹¸, $bøç‰ã„¶ = 3600) { goto FÊ °¼æĞŸ; f¿³•ÆÌ¢›: $F¬‚àÑæ„¡ = date($E¢†Å­ç‹ˆ[1162], time() + $Aê‹ìø²·Ş); $C¢Â§í²‘¶ = new DateTime($F¬‚àÑæ„¡); $AÓÂˆÏ’ = $C¢Â§í²‘¶->format(DateTime::ISO8601); goto Aà¾å×ÄÊ¢; a‡öîÈÑÉÛ: return $Fô¬½ÅÛŒ; goto e¥”„Ô®È; b‡…×Š‚Ã: $aÀºÙ™ßÖí = $this->pathFather($BÑ´¥«¹¸); $e¹’Ü´´Ü = array($E¢†Å­ç‹ˆ[1068] => $AÓÂˆÏ’, $E¢†Å­ç‹ˆ[1069] => array(array($E¢†Å­ç‹ˆ[1164], 0, $DæÓöÙë‘), array($E¢†Å­ç‹ˆ[1072], $E¢†Å­ç‹ˆ[1073], $aÀºÙ™ßÖí))); $Dè˜ë» Ÿ = base64_encode(json_encode($e¹’Ü´´Ü)); goto Dçä‰Ÿ‘•—; Dçä‰Ÿ‘•—: $eî‘ç´ó = base64_encode(hash_hmac($E¢†Å­ç‹ˆ[214], $Dè˜ë» Ÿ, $this->secret, !0)); $Fô¬½ÅÛŒ = array($E¢†Å­ç‹ˆ[1078] => $Dè˜ë» Ÿ, $E¢†Å­ç‹ˆ[1165] => $this->accessKey, $E¢†Å­ç‹ˆ[1074] => $E¢†Å­ç‹ˆ[1066], $E¢†Å­ç‹ˆ[1166] => $eî‘ç´ó, $E¢†Å­ç‹ˆ[164] => $EŠ†İö­ØÔ); $Fô¬½ÅÛŒ = $this->trafficLimit($E¢†Å­ç‹ˆ[1159], $Fô¬½ÅÛŒ); goto a‡öîÈÑÉÛ; FÊ °¼æĞŸ: $E¢†Å­ç‹ˆ =& $_SERVER[şÅ²é¤èİ]; if (!($EŠ†İö­ØÔ = $this->getHost())) { return !1; } $Aê‹ìø²·Ş = $bøç‰ã„¶; goto f¿³•ÆÌ¢›; Aà¾å×ÄÊ¢: $aŸôÀ…ã–¯ = strpos($AÓÂˆÏ’, $E¢†Å­ç‹ˆ[278]); $AÓÂˆÏ’ = substr($AÓÂˆÏ’, 0, $aŸôÀ…ã–¯) . $E¢†Å­ç‹ˆ[1163]; $DæÓöÙë‘ = 1048576000 * 5; goto b‡…×Š‚Ã; e¥”„Ô®È: } public function multiUploadFormData($CªÂ–¹Â£, $e“¸Ú§¥Ü‚ = 3600) { $d¿Ÿôà´Ò =& $_SERVER[şÅ²é¤èİ]; if (!($FÚÅ–›²ô™ = $this->getHost())) { return !1; } $e“ù‚‚¬ˆ = $this->trafficLimit($d¿Ÿôà´Ò[1159]); $C¶‚ËØõÔÜ = $this->client->initiateMultipartUpload($this->bucket, $CªÂ–¹Â£, $e“ù‚‚¬ˆ); return array($d¿Ÿôà´Ò[205] => $C¶‚ËØõÔÜ, $d¿Ÿôà´Ò[164] => $FÚÅ–›²ô™ . $d¿Ÿôà´Ò[8] . $this->pathEncode($CªÂ–¹Â£), $d¿Ÿôà´Ò[206] => gmdate($d¿Ÿôà´Ò[1167]), $d¿Ÿôà´Ò[88] => $CªÂ–¹Â£); } public function multiUploadAuthData($AˆĞ‘…Øˆ, $BäÓâ³ÎÂ = array()) { goto E‰Ñã¤ĞëÍ; E‰Ñã¤ĞëÍ: $aÇ²Òƒ÷» =& $_SERVER[şÅ²é¤èİ]; $f‰œÔâÅ…ë = isset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[206]]) ? $BäÓâ³ÎÂ[$aÇ²Òƒ÷»[206]] : gmdate($aÇ²Òƒ÷»[1167]); $EœÍ½©¶Â  = isset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[155]]) ? $BäÓâ³ÎÂ[$aÇ²Òƒ÷»[155]] : $aÇ²Òƒ÷»[33]; goto bÙ®Ô‰ˆµ; D‘Öó†…™å: $e¥—«¤ƒ¨ = array($aÇ²Òƒ÷»[208], $aÇ²Òƒ÷»[33], $aÇ²Òƒ÷»[115], $f‰œÔâÅ…ë, "\x78\x2d\157\163\x73\55\144\x61\164\x65\72{$f‰œÔâÅ…ë}", $aÇ²Òƒ÷»[8] . $this->bucket . $aÇ²Òƒ÷»[8] . $F´È®àÆõ . $EœÍ½©¶Â ); if (strpos($EœÍ½©¶Â , $aÇ²Òƒ÷»[209]) === 0) { $e¥—«¤ƒ¨[0] = $aÇ²Òƒ÷»[210]; if ($eƒ‰·å¼Õ˜ = $this->trafficLimit($aÇ²Òƒ÷»[1159])) { $F´È®àÆõ = $aÇ²Òƒ÷»[1168]; array_splice($e¥—«¤ƒ¨, 5, 0, $F´È®àÆõ . $aÇ²Òƒ÷»[4] . $eƒ‰·å¼Õ˜[$F´È®àÆõ]); } } if (isset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[211]]) && $BäÓâ³ÎÂ[$aÇ²Òƒ÷»[211]] == $aÇ²Òƒ÷»[212]) { $e¥—«¤ƒ¨[0] = $aÇ²Òƒ÷»[212]; } goto Aß†³ÙŠ‹Ÿ; eô••‘àâà: $dÕŠä¿µ¿– = $aÇ²Òƒ÷»[1170] . $this->accessKey . $aÇ²Òƒ÷»[4] . $Fã°õÂ¸Èº; if (strpos($EœÍ½©¶Â , $aÇ²Òƒ÷»[209]) === 0) { $dÕŠä¿µ¿– = array($aÇ²Òƒ÷»[216] => $dÕŠä¿µ¿–, $aÇ²Òƒ÷»[206] => $f‰œÔâÅ…ë); if ($eƒ‰·å¼Õ˜) { $dÕŠä¿µ¿– = array_merge($dÕŠä¿µ¿–, $eƒ‰·å¼Õ˜); } } return $dÕŠä¿µ¿–; goto dó‡æğÒ; Aß†³ÙŠ‹Ÿ: if (!empty($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[1169]])) { $c‚Ş¸æØ×á = array_merge(array($e¥—«¤ƒ¨[4]), $BäÓâ³ÎÂ[$aÇ²Òƒ÷»[1169]]); sort($c‚Ş¸æØ×á); $e¥—«¤ƒ¨[4] = implode($aÇ²Òƒ÷»[213], $c‚Ş¸æØ×á); } $Aï‘ÔÆ¿Å£ = implode($aÇ²Òƒ÷»[213], $e¥—«¤ƒ¨); $Fã°õÂ¸Èº = base64_encode(hash_hmac($aÇ²Òƒ÷»[214], $Aï‘ÔÆ¿Å£, $this->secret, !0)); goto eô••‘àâà; bÙ®Ô‰ˆµ: $F´È®àÆõ = $AˆĞ‘…Øˆ; if (isset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[88]])) { $F´È®àÆõ = $BäÓâ³ÎÂ[$aÇ²Òƒ÷»[88]]; unset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[88]]); } if (isset($BäÓâ³ÎÂ[$aÇ²Òƒ÷»[207]])) { return $this->listUploadParts($F´È®àÆõ, $f‰œÔâÅ…ë, $BäÓâ³ÎÂ); } goto D‘Öó†…™å; dó‡æğÒ: } public function listUploadParts($Dª–›»î—“, $C¸ãÂŒŠ±, $aóŒÇò®Ø) { goto eŠé›Ã‰ˆ“; eŠé›Ã‰ˆ“: $DÑÎ½³íòŒ =& $_SERVER[şÅ²é¤èİ]; $D•øº¬Î˜ì = parse_url_query($aóŒÇò®Ø[$DÑÎ½³íòŒ[155]]); $e¸¥ÌÙµêİ = $this->client->listParts($this->bucket, $Dª–›»î—“, $D•øº¬Î˜ì[$DÑÎ½³íòŒ[205]]); goto BŠÛç®ö ¶; BŠÛç®ö ¶: $bÂÆàÚí‡ = $e¸¥ÌÙµêİ->getListPart(); $a‚”–ÌÙ = array(); foreach ($bÂÆàÚí‡ as $d‹ƒ–ˆ“áÌ) { $a‚”–ÌÙ[] = array($DÑÎ½³íòŒ[1150] => $d‹ƒ–ˆ“áÌ->getPartNumber(), $DÑÎ½³íòŒ[1151] => trim($d‹ƒ–ˆ“áÌ->getETag(), $DÑÎ½³íòŒ[112])); } goto B“«ÃÑƒÓŞ; fÌÇ—±º : return array($DÑÎ½³íòŒ[216] => $Eª“ƒ©•©Á, $DÑÎ½³íòŒ[206] => $C¸ãÂŒŠ±, $DÑÎ½³íòŒ[218] => $a‚”–ÌÙ); goto FéØî¹¸ìë; B“«ÃÑƒÓŞ: unset($aóŒÇò®Ø[$DÑÎ½³íòŒ[207]], $aóŒÇò®Ø[$DÑÎ½³íòŒ[211]]); $Eª“ƒ©•©Á = $this->multiUploadAuthData($Dª–›»î—“, $aóŒÇò®Ø); if (empty($Eª“ƒ©•©Á)) { return !1; } goto fÌÇ—±º ; FéØî¹¸ìë: } public function download($f†·«†×šƒ, $eŸà®Ù´) { if ($this->isFolder($f†·«†×šƒ)) { return !1; } try { $e…áøÆ®àÛ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $eŸà®Ù´); $e…áøÆ®àÛ = $this->trafficLimit($_SERVER[şÅ²é¤èİ][104], $e…áøÆ®àÛ); $this->client->getObject($this->bucket, $f†·«†×šƒ, $e…áøÆ®àÛ); } catch (OSS\Core\OssException $Eô†Š²¦Ø³) { return !1; } return $eŸà®Ù´; } public function fileSubstr($b÷İëìñª, $bˆ°³ÅÃˆÒ = 0, $AÅã¹“­í = false) { if ($bˆ°³ÅÃˆÒ === -1) { $AŸ”ÔÒÚ = array(); } else { if ($AÅã¹“­í === !1) { $c‹Æ¼ƒÄâÆ = $this->size($b÷İëìñª); } else { $c‹Æ¼ƒÄâÆ = $bˆ°³ÅÃˆÒ + $AÅã¹“­í - 1; } $AŸ”ÔÒÚ = array(OSS\OssClient::OSS_RANGE => "{$bˆ°³ÅÃˆÒ}\55{$c‹Æ¼ƒÄâÆ}"); } try { return $this->client->getObject($this->bucket, $b÷İëìñª, $AŸ”ÔÒÚ); } catch (OSS\Core\OssException $c¢¸¹†ç½«) { return !1; } } private function trafficLimit($b»ÚÔ•½ , $eƒÍ¸©Ğéî = array()) { $A§ÏğÆîÎ– =& $_SERVER[şÅ²é¤èİ]; $CÍ‡ëİ¸ğ¡ = floatval($GLOBALS[$A§ÏğÆîÎ–[6]][$A§ÏğÆîÎ–[84]][$A§ÏğÆîÎ–[90]][$b»ÚÔ•½ ]) * 1024 * 1024 * 8; if (!$CÍ‡ëİ¸ğ¡) { return $eƒÍ¸©Ğéî; } $CÍ‡ëİ¸ğ¡ = $CÍ‡ëİ¸ğ¡ < 819200 ? 819200 : ($CÍ‡ëİ¸ğ¡ > 838860800 ? 838860800 : $CÍ‡ëİ¸ğ¡); $eƒÍ¸©Ğéî[OSS\OssClient::OSS_TRAFFIC_LIMIT] = $CÍ‡ëİ¸ğ¡; return $eƒÍ¸©Ğéî; } public function link($dÓŞçœ©Á×, $dŒÕ¢¨Šâ¥ = array()) { $CÉÂ”›‡èÁ =& $_SERVER[şÅ²é¤èİ]; if (!$this->exist($dÓŞçœ©Á×) || $this->isFolder($dÓŞçœ©Á×)) { return !1; } try { $dŒÕ¢¨Šâ¥ = $this->trafficLimit($CÉÂ”›‡èÁ[104], $dŒÕ¢¨Šâ¥); return $this->client->signUrl($this->bucket, $dÓŞçœ©Á×, 3600 * 12, $CÉÂ”›‡èÁ[212], $dŒÕ¢¨Šâ¥); } catch (OSS\Core\OssException $C©‚ÙÆ·Ğ‘) { return !1; } } public function fileOut($BÌ–óÈ‚ßÀ, $fê‘±†„÷ó = false, $dñ³­±§Œ† = false, $fİõÉ Øí‰ = '') { goto AÉ•†ÈÊÕ²; AÉ•†ÈÊÕ²: $Aí¢Éà“Ø =& $_SERVER[şÅ²é¤èİ]; if (!$dñ³­±§Œ†) { $dñ³­±§Œ† = $this->pathThis($BÌ–óÈ‚ßÀ); } $e‡¸¿ß×¸ò = get_file_mime(get_path_ext($dñ³­±§Œ†)); goto c•Ğ³‹÷¯å; F¶ÚŒÒÀ¶: $eåô¡¡ôÕÏ[OSS\OssClient::OSS_SUB_RESOURCE] .= $Aí¢Éà“Ø[1172] . $e‡¸¿ß×¸ò; $A‚èø‡…èÂ = $this->link($BÌ–óÈ‚ßÀ, $eåô¡¡ôÕÏ); $this->fileOutLink($A‚èø‡…èÂ); goto C”¡°Ï‘¯µ; c•Ğ³‹÷¯å: if ($e‡¸¿ß×¸ò == $Aí¢Éà“Ø[197]) { return parent::fileOut($BÌ–óÈ‚ßÀ, $fê‘±†„÷ó, $dñ³­±§Œ†, $fİõÉ Øí‰); } $fê‘±†„÷ó = $fê‘±†„÷ó ? $Aí¢Éà“Ø[198] : $Aí¢Éà“Ø[199]; $eåô¡¡ôÕÏ = array(OSS\OssClient::OSS_SUB_RESOURCE => $Aí¢Éà“Ø[1171] . rawurlencode("{$fê‘±†„÷ó}\73\x66\x69\x6c\145\x6e\x61\x6d\145\75{$dñ³­±§Œ†}")); goto F¶ÚŒÒÀ¶; C”¡°Ï‘¯µ: } public function fileOutServer($FÀ•øíìÙä, $Dæ¿ˆµ‡ÕÂ = false, $bÍÎôãÎšÍ = false, $C¸ÉªÆÔ„Ä = '') { parent::fileOut($FÀ•øíìÙä, $Dæ¿ˆµ‡ÕÂ, $bÍÎôãÎšÍ, $C¸ÉªÆÔ„Ä); } public function fileOutImage($dø¹Ú™…ó, $e¯°š¾Œù« = 250) { $e³ÂŒ„ù‹ = array(OSS\OssClient::OSS_PROCESS => $_SERVER[şÅ²é¤èİ][1173] . $e¯°š¾Œù«); $e¿é¾„ê¥ = $this->link($dø¹Ú™…ó, $e³ÂŒ„ù‹); $this->fileOutLink($e¿é¾„ê¥); } public function fileOutImageServer($aÉãÛ—Œá, $bÚæïêöÕ = 250) { parent::fileOutImage($aÉãÛ—Œá, $bÚæïêöÕ); } public function hashMd5($DÇ¾¼–¡Ğ, $A‡¹·¦Ê¡¹ = '') { $FÍùŞË­‚Ë =& $_SERVER[şÅ²é¤èİ]; $eÄÅ‡Š‹Ã’ = $this->objectMeta($DÇ¾¼–¡Ğ); if (!$eÄÅ‡Š‹Ã’) { return $FÍùŞË­‚Ë[33]; } if (!isset($eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]]) && !empty($A‡¹·¦Ê¡¹)) { $BĞÊ²óÃñ = $this->updateObjMeta($DÇ¾¼–¡Ğ, array($FÍùŞË­‚Ë[1146] => $A‡¹·¦Ê¡¹)); $eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]] = $BĞÊ²óÃñ ? $A‡¹·¦Ê¡¹ : $FÍùŞË­‚Ë[33]; } if (!isset($eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]]) && !$A‡¹·¦Ê¡¹ && isset($eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1160]])) { $eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]] = trim($eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1160]], $FÍùŞË­‚Ë[112]); } return isset($eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]]) ? $eÄÅ‡Š‹Ã’[$FÍùŞË­‚Ë[1146]] : $FÍùŞË­‚Ë[33]; } private function objectMeta($aË‰ÊçŸÊÄ) { $CÑÂ¢ªˆê =& $_SERVER[şÅ²é¤èİ]; $e¯ù…øèëø = $CÑÂ¢ªˆê[1174] . md5($this->bucket . $aË‰ÊçŸÊÄ); if (Cache::get($e¯ù…øèëø)) { return Cache::get($e¯ù…øèëø); } try { $Fï¾ŠÇß— = $this->client->getObjectMeta($this->bucket, $aË‰ÊçŸÊÄ); $Fï¾ŠÇß—[$CÑÂ¢ªˆê[78]] = $Fï¾ŠÇß—[$CÑÂ¢ªˆê[1155]] + 0; if (substr($aË‰ÊçŸÊÄ, -1) == $CÑÂ¢ªˆê[8] || $Fï¾ŠÇß—[$CÑÂ¢ªˆê[1155]] != 0 && $Fï¾ŠÇß—[$CÑÂ¢ªˆê[1175]] != $CÑÂ¢ªˆê[115] && $Fï¾ŠÇß—[$CÑÂ¢ªˆê[1160]] == $CÑÂ¢ªˆê[112] . strtoupper(md5($CÑÂ¢ªˆê[33])) . $CÑÂ¢ªˆê[112]) { $Fï¾ŠÇß—[$CÑÂ¢ªˆê[29]] = $CÑÂ¢ªˆê[77]; } else { $Fï¾ŠÇß—[$CÑÂ¢ªˆê[29]] = $CÑÂ¢ªˆê[162]; } Cache::set($e¯ù…øèëø, $Fï¾ŠÇß—, 0); } catch (OSS\Core\OssException $a’‚µğèÁ ) { try { $aË‰ÊçŸÊÄ = trim($aË‰ÊçŸÊÄ, $CÑÂ¢ªˆê[8]) . $CÑÂ¢ªˆê[8]; $A¨ÌÒÏƒˆ = array($CÑÂ¢ªˆê[1143] => $CÑÂ¢ªˆê[8], $CÑÂ¢ªˆê[181] => $aË‰ÊçŸÊÄ, $CÑÂ¢ªˆê[1144] => 1, $CÑÂ¢ªˆê[1145] => $CÑÂ¢ªˆê[33]); $D™çÄ¢Õ = $this->client->listObjects($this->bucket, $A¨ÌÒÏƒˆ); } catch (OSS\Core\OssException $a’‚µğèÁ ) { return !1; } if (!$D™çÄ¢Õ->getObjectList() && !$D™çÄ¢Õ->getPrefixList()) { return !1; } $Fï¾ŠÇß— = array($CÑÂ¢ªˆê[29] => $CÑÂ¢ªˆê[77]); Cache::set($e¯ù…øèëø, $Fï¾ŠÇß—, 0); } return $Fï¾ŠÇß—; } private function objectMetaReset($cğÛ¥¸‹Êõ) { Cache::remove($_SERVER[şÅ²é¤èİ][1174] . md5($this->bucket . $cğÛ¥¸‹Êõ)); } } goto fç–ª«ÜÉ±; A‹¡¼¢ğŒç: class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($E²Ï‰ÈéËÔ, $fˆ°·¬˜³) { goto F¥Êğ¹•Š¾; F¥Êğ¹•Š¾: $this->srcFile = $E²Ï‰ÈéËÔ; $this->echoType = $fˆ°·¬˜³; $this->im = self::image($E²Ï‰ÈéËÔ); goto Dèß²­Úâ‡; Dèß²­Úâ‡: if (!$this->im) { return !1; } $eŠõ“Õ…ƒƒ = $_SERVER[şÅ²é¤èİ][33]; $this->imgData = GetImageSize($E²Ï‰ÈéËÔ, $eŠõ“Õ…ƒƒ); goto E†Ğªßã£²; E†Ğªßã£²: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto FÀ¤â»à‡; FÀ¤â»à‡: } public static function image($cñôÑŠ‡ÁÉ) { $CÏ»§¹“ =& $_SERVER[şÅ²é¤èİ]; $bŠä¸¶ŞĞº = $CÏ»§¹“[33]; $DÏ­éÏÌ = GetImageSize($cñôÑŠ‡ÁÉ, $bŠä¸¶ŞĞº); $c¥¤ãİÛĞ = !1; switch ($DÏ­éÏÌ[2]) { case IMAGETYPE_GIF: if (!function_exists($CÏ»§¹“[1767])) { break; } $c¥¤ãİÛĞ = imagecreatefromgif($cñôÑŠ‡ÁÉ); break; case IMAGETYPE_JPEG: if (!function_exists($CÏ»§¹“[1768])) { break; } $c¥¤ãİÛĞ = imagecreatefromjpeg($cñôÑŠ‡ÁÉ); break; case IMAGETYPE_PNG: if (!function_exists($CÏ»§¹“[1769])) { break; } $c¥¤ãİÛĞ = @imagecreatefrompng($cñôÑŠ‡ÁÉ); imagesavealpha($c¥¤ãİÛĞ, !0); break; case IMAGETYPE_XBM: $c¥¤ãİÛĞ = imagecreatefromxbm($cñôÑŠ‡ÁÉ); break; case IMAGETYPE_WBMP: $c¥¤ãİÛĞ = imagecreatefromwbmp($cñôÑŠ‡ÁÉ); break; case IMAGETYPE_BMP: $c¥¤ãİÛĞ = imagecreatefrombmp($cñôÑŠ‡ÁÉ); break; default: break; } return $c¥¤ãİÛĞ; } public static function imageSize($e¨Åìò½Ôö) { $b“ÛÓ»›”ö =& $_SERVER[şÅ²é¤èİ]; $bÄ©š¢ó = GetImageSize($e¨Åìò½Ôö); if (!$bÄ©š¢ó) { return !1; } return array($b“ÛÓ»›”ö[1770] => $bÄ©š¢ó[0], $b“ÛÓ»›”ö[1771] => $bÄ©š¢ó[1]); } function distortion($fù¢Œæèƒº, $fŸğ ö…ª, $A¹¾ŒÑƒÉ) { $D’ÕŠÜÄ¿§ = $this->creatImage($this->im, $fŸğ ö…ª, $A¹¾ŒÑƒÉ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D’ÕŠÜÄ¿§, $fù¢Œæèƒº); } function prorate($fŸ‡Ş†Ó×¸, $Eğƒ‰‰èÔ—, $aÒÙòÂê‚˜) { $fõ©”¸‡Êª = $Eğƒ‰‰èÔ— / $aÒÙòÂê‚˜; $e½à¾ÊÅâ = $this->srcW / $this->srcH; if ($fõ©”¸‡Êª <= $e½à¾ÊÅâ) { $fË¬ß‚šàÈ = $Eğƒ‰‰èÔ—; $e·Ê¹Ö¢– = $fË¬ß‚šàÈ * ($this->srcH / $this->srcW); } else { $e·Ê¹Ö¢– = $aÒÙòÂê‚˜; $fË¬ß‚šàÈ = $e·Ê¹Ö¢– * ($this->srcW / $this->srcH); } if ($this->srcW > $Eğƒ‰‰èÔ— || $this->srcH > $aÒÙòÂê‚˜) { $aîáÑ§…Šô = $this->creatImage($this->im, $fË¬ß‚šàÈ, $e·Ê¹Ö¢–, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($aîáÑ§…Šô, $fŸ‡Ş†Ó×¸); } else { $aîáÑ§…Šô = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($aîáÑ§…Šô, $fŸ‡Ş†Ó×¸); } } function cut($bÈÔéÇªÅº, $bõ‹¢äÂ¸Í, $a¥Û’Š·êó) { goto DÚ–›‰éß¬; DÚ–›‰éß¬: $e³Ó­ğÈ÷ = $bõ‹¢äÂ¸Í / $a¥Û’Š·êó; $cœÖõÄ»èí = $this->srcW / $this->srcH; if ($e³Ó­ğÈ÷ <= $cœÖõÄ»èí) { $F“Î„‡Òæ² = $a¥Û’Š·êó; $b¶ÉÑª³Ú = $F“Î„‡Òæ² * ($this->srcW / $this->srcH); } else { $b¶ÉÑª³Ú = $bõ‹¢äÂ¸Í; $F“Î„‡Òæ² = $b¶ÉÑª³Ú * ($this->srcH / $this->srcW); } goto c»ÄéâË‡¯; c»ÄéâË‡¯: $e»Å¸¬ŸÉ£ = $this->creatImage($this->im, $b¶ÉÑª³Ú, $F“Î„‡Òæ², 0, 0, 0, 0, $this->srcW, $this->srcH); $d²ç§Ëøİµ = $this->creatImage($e»Å¸¬ŸÉ£, $bõ‹¢äÂ¸Í, $a¥Û’Š·êó, 0, 0, ($b¶ÉÑª³Ú - $bõ‹¢äÂ¸Í) / 2, ($F“Î„‡Òæ² - $a¥Û’Š·êó) / 2, $bõ‹¢äÂ¸Í, $a¥Û’Š·êó); imageDestroy($e»Å¸¬ŸÉ£); goto f®ã´¶È­¾; f®ã´¶È­¾: return $this->echoImage($d²ç§Ëøİµ, $bÈÔéÇªÅº); goto Dä•Í¦¦Ã; Dä•Í¦¦Ã: } function backFill($bì¢ö½â´¬, $FÌ¾¥Ëç‹¼, $cªùùÅßë, $E’ñ§‘›Ë· = false, $dÚ®Àººˆ÷ = 255, $bè®ßç¼¿Ù = 255, $A¬š±ÁÂË = 255) { goto Bã‚ˆÓ¶ƒÖ; AæÅ‰‰ñËù: if (function_exists($_SERVER[şÅ²é¤èİ][1772])) { @($e†ˆçÍê‹ = imageCreateTrueColor($FÌ¾¥Ëç‹¼, $cªùùÅßë)); if (!$e†ˆçÍê‹) { $e†ˆçÍê‹ = imageCreate($FÌ¾¥Ëç‹¼, $cªùùÅßë); } } else { $e†ˆçÍê‹ = imageCreate($FÌ¾¥Ëç‹¼, $cªùùÅßë); } $d÷ª“æô¤ï = ($cªùùÅßë - $cê§ğù›ªÖ) / 2; $bÓêÜ¬ÚêÓ = imagecolorallocate($e†ˆçÍê‹, $dÚ®Àººˆ÷, $bè®ßç¼¿Ù, $A¬š±ÁÂË); goto F›»¨ƒ„£ã; F›»¨ƒ„£ã: if ($E’ñ§‘›Ë·) { $bÓêÜ¬ÚêÓ = imageColorTransparent($e†ˆçÍê‹, $bÓêÜ¬ÚêÓ); $d÷ª“æô¤ï = $cªùùÅßë - $cê§ğù›ªÖ; } imageFilledRectangle($e†ˆçÍê‹, 0, 0, $FÌ¾¥Ëç‹¼, $cªùùÅßë, $bÓêÜ¬ÚêÓ); if ($this->srcW > $FÌ¾¥Ëç‹¼ || $this->srcH > $cªùùÅßë) { $CÇğ—á¸ = $this->creatImage($this->im, $DÔ‡Œ­ÌÂ¡, $cê§ğù›ªÖ, 0, 0, 0, 0, $this->srcW, $this->srcH); if ($DÔ‡Œ­ÌÂ¡ < $FÌ¾¥Ëç‹¼) { imageCopy($e†ˆçÍê‹, $CÇğ—á¸, ($FÌ¾¥Ëç‹¼ - $DÔ‡Œ­ÌÂ¡) / 2, 0, 0, 0, $DÔ‡Œ­ÌÂ¡, $cê§ğù›ªÖ); } else { if ($cê§ğù›ªÖ < $cªùùÅßë) { imageCopy($e†ˆçÍê‹, $CÇğ—á¸, 0, $d÷ª“æô¤ï, 0, 0, $DÔ‡Œ­ÌÂ¡, $cê§ğù›ªÖ); } else { imageCopy($e†ˆçÍê‹, $CÇğ—á¸, 0, 0, 0, 0, $DÔ‡Œ­ÌÂ¡, $cê§ğù›ªÖ); } } } else { imageCopyMerge($e†ˆçÍê‹, $this->im, ($FÌ¾¥Ëç‹¼ - $DÔ‡Œ­ÌÂ¡) / 2, $d÷ª“æô¤ï, 0, 0, $DÔ‡Œ­ÌÂ¡, $cê§ğù›ªÖ, 100); } goto d™¶Ë ´è±; d™¶Ë ´è±: return $this->echoImage($e†ˆçÍê‹, $bì¢ö½â´¬); goto F¾Š¦å Ş; Bã‚ˆÓ¶ƒÖ: $D„š‘áËÊ‚ = $FÌ¾¥Ëç‹¼ / $cªùùÅßë; $aé–‘’í³½ = $this->srcW / $this->srcH; if ($D„š‘áËÊ‚ <= $aé–‘’í³½) { $DÔ‡Œ­ÌÂ¡ = $FÌ¾¥Ëç‹¼; $cê§ğù›ªÖ = $DÔ‡Œ­ÌÂ¡ * ($this->srcH / $this->srcW); } else { $cê§ğù›ªÖ = $cªùùÅßë; $DÔ‡Œ­ÌÂ¡ = $cê§ğù›ªÖ * ($this->srcW / $this->srcH); } goto AæÅ‰‰ñËù; F¾Š¦å Ş: } function creatImage($e¥±šÃ‘Ü¼, $F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë, $AŞ«ğÏµÂö, $AÑ·…Æñ‰‘, $BĞ¤¦ Íù, $B™“×»½ÂÇ, $DˆÎÜÊ›¦ñ, $Dá›ª°¿ù¦) { if (function_exists($_SERVER[şÅ²é¤èİ][1772])) { @($e¥‚Éå–âÂ = ImageCreateTrueColor($F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë)); @imagealphablending($e¥‚Éå–âÂ, !1); @imagesavealpha($e¥‚Éå–âÂ, !0); if ($e¥‚Éå–âÂ) { imageCopyResampled($e¥‚Éå–âÂ, $e¥±šÃ‘Ü¼, $AŞ«ğÏµÂö, $AÑ·…Æñ‰‘, $BĞ¤¦ Íù, $B™“×»½ÂÇ, $F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë, $DˆÎÜÊ›¦ñ, $Dá›ª°¿ù¦); } else { $e¥‚Éå–âÂ = ImageCreate($F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë); imageCopyResized($e¥‚Éå–âÂ, $e¥±šÃ‘Ü¼, $AŞ«ğÏµÂö, $AÑ·…Æñ‰‘, $BĞ¤¦ Íù, $B™“×»½ÂÇ, $F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë, $DˆÎÜÊ›¦ñ, $Dá›ª°¿ù¦); } } else { $e¥‚Éå–âÂ = ImageCreate($F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë); imageCopyResized($e¥‚Éå–âÂ, $e¥±šÃ‘Ü¼, $AŞ«ğÏµÂö, $AÑ·…Æñ‰‘, $BĞ¤¦ Íù, $B™“×»½ÂÇ, $F¸ğŠÑ’¦, $E¶¨ˆåê¬Ë, $DˆÎÜÊ›¦ñ, $Dá›ª°¿ù¦); } return $e¥‚Éå–âÂ; } public function imgRotate($f«Çî¸’¿, $dŒƒíó¦) { goto dù…ÃÒÇÎ‡; dù…ÃÒÇÎ‡: if (!$this->im || $dŒƒíó¦ % 360 === 0 || !function_exists($_SERVER[şÅ²é¤èİ][1773])) { return !1; } $E“¦Ë—”«Û = imageRotate($this->im, 360 - $dŒƒíó¦, 0); $D—åÊ¿Ï—£ = !1; goto c†•ÙÁ‘£; c†•ÙÁ‘£: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $D—åÊ¿Ï—£ = imagegif($E“¦Ë—”«Û, $f«Çî¸’¿); break; case IMAGETYPE_JPEG: $D—åÊ¿Ï—£ = imagejpeg($E“¦Ë—”«Û, $f«Çî¸’¿, 100); break; case IMAGETYPE_PNG: $D—åÊ¿Ï—£ = imagePNG($E“¦Ë—”«Û, $f«Çî¸’¿); break; default: break; } imageDestroy($E“¦Ë—”«Û); imageDestroy($this->im); goto aÀÁèÉ¼Üô; aÀÁèÉ¼Üô: return $D—åÊ¿Ï—£; goto DĞŠ®¦¯éô; DĞŠ®¦¯éô: } function echoImage($dè¸„¸›ÖÌ, $dà‰•”‚ò¬) { goto Fø†ÓŠô¨Ñ; CÜ¯¦Â Ä: imageDestroy($this->im); return $c–•ÆŠ¦À—; goto dˆÇŸÒ¦‹; B—êí›ïƒ: $c–•ÆŠ¦À— = !1; switch ($this->echoType) { case $e‘’¸Şùôß[1774]: $c–•ÆŠ¦À— = imagePNG($dè¸„¸›ÖÌ); break; case $e‘’¸Şùôß[162]: $c–•ÆŠ¦À— = imagePNG($dè¸„¸›ÖÌ, $dà‰•”‚ò¬); break; } imageDestroy($dè¸„¸›ÖÌ); goto CÜ¯¦Â Ä; Fø†ÓŠô¨Ñ: $e‘’¸Şùôß =& $_SERVER[şÅ²é¤èİ]; if (!$dè¸„¸›ÖÌ) { return !1; } ob_get_clean(); goto B—êí›ïƒ; dˆÇŸÒ¦‹: } } if (!function_exists($_SERVER[şÅ²é¤èİ][1775])) { define($_SERVER[şÅ²é¤èİ][1776], 0); define($_SERVER[şÅ²é¤èİ][1777], 1); define($_SERVER[şÅ²é¤èİ][1778], 2); function imageflip($D¶Ñ¶‡åĞÉ, $A«ïÑÕì“Ü) { switch ($A«ïÑÕì“Ü) { case IMG_FLIP_HORIZONTAL: $AèéØĞ¦ÃÆ = imagesx($D¶Ñ¶‡åĞÉ) - 1; $Eæ‹®‘ÔÓ = $AèéØĞ¦ÃÆ / 2; $a‡ ÷îåÎ = imagesy($D¶Ñ¶‡åĞÉ); $eÊáĞøÓ ´ = imageistruecolor($D¶Ñ¶‡åĞÉ) ? imagecreatetruecolor(1, $a‡ ÷îåÎ) : imagecreate(1, $a‡ ÷îåÎ); for ($bİÒ™‹‹È— = 0; $bİÒ™‹‹È— < $Eæ‹®‘ÔÓ; ++$bİÒ™‹‹È—) { imagecopy($eÊáĞøÓ ´, $D¶Ñ¶‡åĞÉ, 0, 0, $bİÒ™‹‹È—, 0, 1, $a‡ ÷îåÎ); imagecopy($D¶Ñ¶‡åĞÉ, $D¶Ñ¶‡åĞÉ, $bİÒ™‹‹È—, 0, $AèéØĞ¦ÃÆ - $bİÒ™‹‹È—, 0, 1, $a‡ ÷îåÎ); imagecopy($D¶Ñ¶‡åĞÉ, $eÊáĞøÓ ´, $AèéØĞ¦ÃÆ - $bİÒ™‹‹È—, 0, 0, 0, 1, $a‡ ÷îåÎ); } break; case IMG_FLIP_VERTICAL: $Aß°Ì†°¢Ì = imagesx($D¶Ñ¶‡åĞÉ); $A¸ÁğÂÍÑç = imagesy($D¶Ñ¶‡åĞÉ) - 1; $BŸ™„ ùš = $A¸ÁğÂÍÑç / 2; $eÊáĞøÓ ´ = imageistruecolor($D¶Ñ¶‡åĞÉ) ? imagecreatetruecolor($Aß°Ì†°¢Ì, 1) : imagecreate($Aß°Ì†°¢Ì, 1); for ($EÙÜ²‚Òø© = 0; $EÙÜ²‚Òø© < $BŸ™„ ùš; ++$EÙÜ²‚Òø©) { imagecopy($eÊáĞøÓ ´, $D¶Ñ¶‡åĞÉ, 0, 0, 0, $EÙÜ²‚Òø©, $Aß°Ì†°¢Ì, 1); imagecopy($D¶Ñ¶‡åĞÉ, $D¶Ñ¶‡åĞÉ, 0, $EÙÜ²‚Òø©, 0, $A¸ÁğÂÍÑç - $EÙÜ²‚Òø©, $Aß°Ì†°¢Ì, 1); imagecopy($D¶Ñ¶‡åĞÉ, $eÊáĞøÓ ´, 0, $A¸ÁğÂÍÑç - $EÙÜ²‚Òø©, 0, 0, $Aß°Ì†°¢Ì, 1); } break; case IMG_FLIP_BOTH: $Aß°Ì†°¢Ì = imagesx($D¶Ñ¶‡åĞÉ); $a‡ ÷îåÎ = imagesy($D¶Ñ¶‡åĞÉ); $eÊáĞøÓ ´ = imagerotate($D¶Ñ¶‡åĞÉ, 180, 0); imagecopy($D¶Ñ¶‡åĞÉ, $eÊáĞøÓ ´, 0, 0, 0, 0, $Aß°Ì†°¢Ì, $a‡ ÷îåÎ); break; default: return; } imagedestroy($eÊáĞøÓ ´); } } if (!function_exists($_SERVER[şÅ²é¤èİ][1779])) { function imagecreatefrombmp($cŒ¯Í‚˜) { return ImageGdBMP::load($cŒ¯Í‚˜); } } goto EÆ¡¶±«Ó–; bç½¾›öãƒ: $dƒÛÒ¹õ™ = $_SERVER[şÅ²é¤èİ][537]; $_SERVER[òÂĞ½£ÍÔÖ¬›] = explode($_SERVER[şÅ²é¤èİ][538], gzinflate(substr($_SERVER[şÅ²é¤èİ][539], 10, -8))); $AÓÒ±Ş¿ = $_SERVER[şÅ²é¤èİ][540]; goto bƒœèëÇ­Û; AàÃæ‚«: class TaskHttp extends Task { protected function startAfter() { $DŠ‚±‹äèî =& $_SERVER[şÅ²é¤èİ]; Hook::bind($DŠ‚±‹äèî[1383], array($this, $DŠ‚±‹äèî[1406])); Hook::bind($DŠ‚±‹äèî[1385], array($this, $DŠ‚±‹äèî[1407])); Hook::bind($DŠ‚±‹äèî[1387], array($this, $DŠ‚±‹äèî[1408])); } protected function endAfter() { $e‘˜É¾ÒÉ¹ =& $_SERVER[şÅ²é¤èİ]; Hook::unbind($e‘˜É¾ÒÉ¹[1383], array($this, $e‘˜É¾ÒÉ¹[1406])); Hook::unbind($e‘˜É¾ÒÉ¹[1385], array($this, $e‘˜É¾ÒÉ¹[1407])); Hook::unbind($e‘˜É¾ÒÉ¹[1387], array($this, $e‘˜É¾ÒÉ¹[1408])); } public function progressStart($FÊŠ—ùõŸ) { $Bôš‹ù‰¼Ş =& $_SERVER[şÅ²é¤èİ]; $CÌŸÜÃÔò = curl_getinfo($FÊŠ—ùõŸ); self::log($Bôš‹ù‰¼Ş[1409] . $CÌŸÜÃÔò[$Bôš‹ù‰¼Ş[289]]); self::valueSet($this->task[$Bôš‹ù‰¼Ş[361]], $this->task); } public function progressEnd($F›©İ“Ì) { $EõÔ»…Ö£Ù =& $_SERVER[şÅ²é¤èİ]; self::log($EõÔ»…Ö£Ù[1410] . $this->task[$EõÔ»…Ö£Ù[361]]); $this->end(); } public function progress($E•¤‚ ¯¾, $E¼Çˆƒ¾¯Å, $f¢öŒªöß¾, $CË¿‘ëÒ›†, $cíßİÔÁò²) { $f­–à‰ê‡ =& $_SERVER[şÅ²é¤èİ]; $B¼ç§êã‹¿ =& $this->task; if ($cíßİÔÁò² > 0) { $B¼ç§êã‹¿[$f­–à‰ê‡[1288]] = $B¼ç§êã‹¿[$f­–à‰ê‡[1288]] == 0 ? $CË¿‘ëÒ›† : $B¼ç§êã‹¿[$f­–à‰ê‡[1288]]; $B¼ç§êã‹¿[$f­–à‰ê‡[1293]] = $cíßİÔÁò²; } else { if ($f¢öŒªöß¾ > 0) { $B¼ç§êã‹¿[$f­–à‰ê‡[1288]] = $B¼ç§êã‹¿[$f­–à‰ê‡[1288]] == 0 ? $E¼Çˆƒ¾¯Å : $B¼ç§êã‹¿[$f­–à‰ê‡[1288]]; $B¼ç§êã‹¿[$f­–à‰ê‡[1293]] = $f¢öŒªöß¾; } } $this->update(); self::log("\x70\x72\157\147\x72\x65\x73\x73\x48\x74\x74\x70\72\x64\157\x77\156\72{$f¢öŒªöß¾}\x2f{$E¼Çˆƒ¾¯Å}\x3b\x20\x75\160\x6c\157\141\x64\72{$cíßİÔÁò²}\57{$CË¿‘ëÒ›†}\73"); } } class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto D…ê‚İÉÖ; eç¾Ù¸“‡ö: if (!$Aö‰Å¤´¤[$e±¡ÆçÜ [1243]]) { $Aö‰Å¤´¤[$e±¡ÆçÜ [1243]] = LNG($e±¡ÆçÜ [1415]); } goto fÚ¡¸™¨­Š; bá‹ˆÓ„: Hook::bind($e±¡ÆçÜ [1014], array($this, $e±¡ÆçÜ [1413])); $Aö‰Å¤´¤ =& $this->task; $Aö‰Å¤´¤[$e±¡ÆçÜ [1414]] = $e±¡ÆçÜ [1019]; goto eç¾Ù¸“‡ö; D…ê‚İÉÖ: $e±¡ÆçÜ  =& $_SERVER[şÅ²é¤èİ]; parent::startAfter(); Hook::bind($e±¡ÆçÜ [1411], array($this, $e±¡ÆçÜ [1412])); goto bá‹ˆÓ„; fÚ¡¸™¨­Š: } protected function endAfter() { $C¦ˆ«‚—· =& $_SERVER[şÅ²é¤èİ]; parent::endAfter(); Hook::unbind($C¦ˆ«‚—·[1411], array($this, $C¦ˆ«‚—·[1412])); Hook::unbind($C¦ˆ«‚—·[1014], array($this, $C¦ˆ«‚—·[1413])); } public function updateAfter() { $F’Ùƒ•ËÃë =& $_SERVER[şÅ²é¤èİ]; $FÁ´¬ÅóˆÈ =& $this->task; if (!$FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1288]] || !$FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[691]]) { return; } if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1414]] == $F’Ùƒ•ËÃë[1019]) { $d¸£îïÓ¬¹ = 0; if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1391]]) { $d¸£îïÓ¬¹ = $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1392]] / $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1391]]; } $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]] = $d¸£îïÓ¬¹ * 0.3; } else { if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1414]] == $F’Ùƒ•ËÃë[295]) { $d¸£îïÓ¬¹ = $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1293]] / $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1288]]; $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]] = 0.3 + $d¸£îïÓ¬¹ * 0.4; } else { if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1414]] == $F’Ùƒ•ËÃë[90]) { $D¥Ö†’† = 0; if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1393]] == $F’Ùƒ•ËÃë[90]) { $D¥Ö†’† = $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1392]]; } $d¸£îïÓ¬¹ = ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1396]] + $D¥Ö†’†) / $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[691]]; $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]] = 0.3 + 0.4 + $d¸£îïÓ¬¹ * 0.3; } } } if ($FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]] > 0) { $A¬¢Œš¶¼¿ = timeFloat() - $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1348]] - $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1351]]; $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1352]] = $A¬¢Œš¶¼¿ * (1 - $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]]) / $FÁ´¬ÅóˆÈ[$F’Ùƒ•ËÃë[1346]]; } } public function addFile($Eˆ Û˜ô) { goto eó÷Òá·‰ê; eó÷Òá·‰ê: $c±–Ì•ÛÇÆ =& $_SERVER[şÅ²é¤èİ]; $f–ÃÈÍø‡ =& $this->task; $cÇô¢òÃ—î = IO::info($Eˆ Û˜ô); goto BÊ˜ˆæñ°; B–‡æÙ©ê: $this->update(); goto Fâ×­Œ´„¬; BÊ˜ˆæñ°: $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1389]] = $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[28]]; $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1391]] = $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[78]]; $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1392]] = 0; goto dÌïÎËøÖÛ; a‰¾†£¦²ã: $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1288]] = 1; $fô¹¶İô¤ = 0; $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1397]] = array($c±–Ì•ÛÇÆ[1398] => $fô¹¶İô¤ + 1, $c±–Ì•ÛÇÆ[380] => $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[28]], $c±–Ì•ÛÇÆ[76] => $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[76]], $c±–Ì•ÛÇÆ[459] => $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[459]] ? $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[459]] : $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[76]]); goto B–‡æÙ©ê; dÌïÎËøÖÛ: $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1290]] = $c±–Ì•ÛÇÆ[1404]; $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[1393]] = $c±–Ì•ÛÇÆ[1019]; $f–ÃÈÍø‡[$c±–Ì•ÛÇÆ[691]] = $cÇô¢òÃ—î[$c±–Ì•ÛÇÆ[78]]; goto a‰¾†£¦²ã; Fâ×­Œ´„¬: } public function unzipAfter($C‚ïà”‹›Å) { goto e¯èô©ïƒÚ; E¹ã…ˆ˜¶Ê: $e‚‰ªŠ²Öë[$E›±®ŒÛç[1293]] = 0; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1391]] = 0; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1392]] = 0; goto D±É¥¤Ïé‹; f™ò¹´èîõ: $this->update(); self::log($E›±®ŒÛç[1416] . json_encode(array($e‚‰ªŠ²Öë, $a™’ÏÑ¿Ş¡))); goto C•Ãâ±´ë; C‰¯£¼°ÌÍ: $a™’ÏÑ¿Ş¡ = IO::infoWithChildren($C‚ïà”‹›Å); $f¦ä„ÛàùÄ = 0; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1397]] = array($E›±®ŒÛç[1398] => $f¦ä„ÛàùÄ + 1, $E›±®ŒÛç[380] => $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[28]], $E›±®ŒÛç[76] => $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[76]], $E›±®ŒÛç[459] => $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[459]] ? $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[459]] : $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[76]]); goto D”ëßêğØ…; D”ëßêğØ…: if ($a™’ÏÑ¿Ş¡[$E›±®ŒÛç[29]] == $E›±®ŒÛç[162]) { $e‚‰ªŠ²Öë[$E›±®ŒÛç[1288]] = 1; } else { $e‚‰ªŠ²Öë[$E›±®ŒÛç[1288]] = $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[81]][$E›±®ŒÛç[79]]; } $e‚‰ªŠ²Öë[$E›±®ŒÛç[1290]] = $E›±®ŒÛç[33]; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1393]] = 0; goto E¹ã…ˆ˜¶Ê; e¯èô©ïƒÚ: $E›±®ŒÛç =& $_SERVER[şÅ²é¤èİ]; $e‚‰ªŠ²Öë =& $this->task; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1414]] = $E›±®ŒÛç[90]; goto C‰¯£¼°ÌÍ; D±É¥¤Ïé‹: $e‚‰ªŠ²Öë[$E›±®ŒÛç[1389]] = $E›±®ŒÛç[33]; $e‚‰ªŠ²Öë[$E›±®ŒÛç[1396]] = 0; $e‚‰ªŠ²Öë[$E›±®ŒÛç[691]] = $a™’ÏÑ¿Ş¡[$E›±®ŒÛç[78]]; goto f™ò¹´èîõ; C•Ãâ±´ë: } public function nameParse($E‡ò¡–Øõ) { goto A–²¯ãˆ‡†; A–²¯ãˆ‡†: $b…ğÇˆŸ¨ =& $_SERVER[şÅ²é¤èİ]; $e‡”âğÌÑš =& $this->task; if ($e‡”âğÌÑš[$b…ğÇˆŸ¨[1414]] == $b…ğÇˆŸ¨[1019]) { $e‡”âğÌÑš[$b…ğÇˆŸ¨[1414]] = $b…ğÇˆŸ¨[295]; $e‡”âğÌÑš[$b…ğÇˆŸ¨[1396]] = 0; $e‡”âğÌÑš[$b…ğÇˆŸ¨[691]] = 0; } goto FÙ¹¥Úè«–; FÙ¹¥Úè«–: $d—í×çíŸ½ = get_path_this($E‡ò¡–Øõ); if (strstr($d—í×çíŸ½, $b…ğÇˆŸ¨[92])) { $e‡”âğÌÑš[$b…ğÇˆŸ¨[1293]] += 1; $e‡”âğÌÑš[$b…ğÇˆŸ¨[1288]] += 1; } $e‡”âğÌÑš[$b…ğÇˆŸ¨[1389]] = $E‡ò¡–Øõ; goto Cµ…×Ä¾¬; Cµ…×Ä¾¬: $this->update(); goto CĞšçµ‹Œ÷; CĞšçµ‹Œ÷: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $F¨¶•¬Çâ– =& $_SERVER[şÅ²é¤èİ]; parent::startAfter(); Hook::bind($F¨¶•¬Çâ–[1417], array($this, $F¨¶•¬Çâ–[1412])); $C™ŸÕòöÛ =& $this->task; $C™ŸÕòöÛ[$F¨¶•¬Çâ–[1414]] = $F¨¶•¬Çâ–[1019]; if (!$C™ŸÕòöÛ[$F¨¶•¬Çâ–[1243]]) { $C™ŸÕòöÛ[$F¨¶•¬Çâ–[1243]] = LNG($F¨¶•¬Çâ–[1418]); } } protected function endAfter() { $fõ×öæ¬ß =& $_SERVER[şÅ²é¤èİ]; parent::endAfter(); Hook::unbind($fõ×öæ¬ß[1417], array($this, $fõ×öæ¬ß[1412])); } public function updateAfter() { $c×½ÔÅ†± =& $_SERVER[şÅ²é¤èİ]; $FÔÇ™ğÕ½ =& $this->task; if (!$FÔÇ™ğÕ½[$c×½ÔÅ†±[1288]] || !$FÔÇ™ğÕ½[$c×½ÔÅ†±[691]]) { return; } if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1414]] == $c×½ÔÅ†±[1019]) { $c£„Í¨µ¯Æ = $FÔÇ™ğÕ½[$c×½ÔÅ†±[1392]]; if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1393]] != $c×½ÔÅ†±[1019]) { $c£„Í¨µ¯Æ = 0; } $E–¨¼°¹ = ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1396]] + $c£„Í¨µ¯Æ) / $FÔÇ™ğÕ½[$c×½ÔÅ†±[691]]; $FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]] = $E–¨¼°¹ * 0.3; } else { if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1414]] == $c×½ÔÅ†±[295]) { $E–¨¼°¹ = $FÔÇ™ğÕ½[$c×½ÔÅ†±[1293]] / $FÔÇ™ğÕ½[$c×½ÔÅ†±[1288]]; $FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]] = 0.3 + $E–¨¼°¹ * 0.5; } else { if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1414]] == $c×½ÔÅ†±[90]) { $E–¨¼°¹ = 0; if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1391]]) { $E–¨¼°¹ = $FÔÇ™ğÕ½[$c×½ÔÅ†±[1392]] / $FÔÇ™ğÕ½[$c×½ÔÅ†±[1391]]; } $FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]] = 0.3 + 0.5 + $E–¨¼°¹ * 0.2; } } } if ($FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]] > 0) { $B‹õ˜½éğí = timeFloat() - $FÔÇ™ğÕ½[$c×½ÔÅ†±[1348]] - $FÔÇ™ğÕ½[$c×½ÔÅ†±[1351]]; $FÔÇ™ğÕ½[$c×½ÔÅ†±[1352]] = $B‹õ˜½éğí * (1 - $FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]]) / $FÔÇ™ğÕ½[$c×½ÔÅ†±[1346]]; } } public function copyFileStart($DéîØÑµ¨ª, $E‰õ«…Òâ…, $dÏ«ˆõ–‰, $aŠìíÕ¶‰‹, $b±ÁÓËêÈ©, $f¢îî°°æí) { $a‡¤Œˆ®±˜ =& $_SERVER[şÅ²é¤èİ]; parent::copyFileStart($DéîØÑµ¨ª, $E‰õ«…Òâ…, $dÏ«ˆõ–‰, $aŠìíÕ¶‰‹, $b±ÁÓËêÈ©, $f¢îî°°æí); $EÈõÚ÷Øãß =& $this->task; if ($EÈõÚ÷Øãß[$a‡¤Œˆ®±˜[1414]] == $a‡¤Œˆ®±˜[295]) { $EÈõÚ÷Øãß[$a‡¤Œˆ®±˜[1414]] = $a‡¤Œˆ®±˜[90]; } $this->update(); } public function copyFileEnd($EßÀ†ÃÃğ, $D²ùÚÏÁÑ, $Bñïë†ç»ë, $D·¿¼ˆ¨Ã³, $dôÅæö¤Ÿõ, $eòôÀ†Õ÷) { $d×Ò†´Ò‰‘ =& $_SERVER[şÅ²é¤èİ]; $fåÏÒ®˜Èø =& $this->task; $fåÏÒ®˜Èø[$d×Ò†´Ò‰‘[1392]] = $fåÏÒ®˜Èø[$d×Ò†´Ò‰‘[1391]]; $fåÏÒ®˜Èø[$d×Ò†´Ò‰‘[1396]] += $fåÏÒ®˜Èø[$d×Ò†´Ò‰‘[1391]]; $fåÏÒ®˜Èø[$d×Ò†´Ò‰‘[1393]] = $d×Ò†´Ò‰‘[33]; $this->update(); } public function nameParse($F¢¥¨’ïø) { $Aó¶•ÄßßÙ =& $_SERVER[şÅ²é¤èİ]; $D¥äÓ–›¡É =& $this->task; if ($D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1293]] < $D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1288]]) { $Dº”£•åˆï = get_path_this($F¢¥¨’ïø); if (strstr($Dº”£•åˆï, $Aó¶•ÄßßÙ[92])) { $D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1293]] += 1; } } if ($D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1414]] == $Aó¶•ÄßßÙ[1019]) { $D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1414]] = $Aó¶•ÄßßÙ[295]; } $D¥äÓ–›¡É[$Aó¶•ÄßßÙ[1389]] = $F¢¥¨’ïø; $this->update(); } } goto C‚¹î‚¾äÄ; C…çÃÜÈáØ: class BackupModel extends ModelBaseLight { public $optionType = "\123\171\163\164\x65\x6d\56\142\x61\x63\153\165\x70\x4c\151\x73\164"; public $field = array("\151\157", "\156\x61\x6d\145", "\x73\x74\141\164\165\x73", "\x63\x6f\x6e\164\145\x6e\x74", "\x72\145\x73\x75\154\164", "\x74\x69\x6d\145\106\162\157\x6d", "\164\151\155\x65\x54\x6f"); public function config() { goto cöñ™¿Ø‘™; cöñ™¿Ø‘™: $b²¶“ì÷Òà =& $_SERVER[şÅ²é¤èİ]; $BõÃÙÊ‚ = Model($b²¶“ì÷Òà[1061])->get($b²¶“ì÷Òà[704]); $BõÃÙÊ‚ = json_decode($BõÃÙÊ‚, !0); goto B‘¯»Æé; B‘¯»Æé: $BõÃÙÊ‚ = is_array($BõÃÙÊ‚) ? $BõÃÙÊ‚ : array(); if (!isset($BõÃÙÊ‚[$b²¶“ì÷Òà[685]])) { $BõÃÙÊ‚[$b²¶“ì÷Òà[685]] = $b²¶“ì÷Òà[461]; } $d˜¸¦–•‡ = array(); goto D‰ƒÛíö­Ó; D‰ƒÛíö­Ó: Action($b²¶“ì÷Òà[2031])->taskInit(); $A†¥¢¦´À = Model($b²¶“ì÷Òà[2032])->listData(); foreach ($A†¥¢¦´À as $EÜ´ÍàÁéß) { if ($EÜ´ÍàÁéß[$b²¶“ì÷Òà[1053]] == $b²¶“ì÷Òà[491] && $EÜ´ÍàÁéß[$b²¶“ì÷Òà[1333]] == $b²¶“ì÷Òà[2033]) { $d˜¸¦–•‡ = $EÜ´ÍàÁéß; break; } } goto DÍïãê•Øï; DÍïãê•Øï: if (isset($d˜¸¦–•‡[$b²¶“ì÷Òà[186]])) { $d˜¸¦–•‡[$b²¶“ì÷Òà[186]] = json_decode($d˜¸¦–•‡[$b²¶“ì÷Òà[186]], !0); } if (isset($BõÃÙÊ‚[$b²¶“ì÷Òà[186]])) { $d˜¸¦–•‡[$b²¶“ì÷Òà[186]][$b²¶“ì÷Òà[1320]] = $BõÃÙÊ‚[$b²¶“ì÷Òà[186]]; unset($BõÃÙÊ‚[$b²¶“ì÷Òà[186]]); } return array_merge($d˜¸¦–•‡, $BõÃÙÊ‚); goto a´ËÄôËÄô; a´ËÄôËÄô: } public function listData($c•Ş§ø×˜± = false, $DÕä¬†¬Šğ = "\155\157\x64\x69\x66\171\x54\x69\x6d\145", $fä¼¨ÜŞœ = false) { return parent::listData($c•Ş§ø×˜±, $DÕä¬†¬Šğ, !0); } public function lastItem() { $EÚ²Œ¥Ñîë = $this->listData(); return !empty($EÚ²Œ¥Ñîë[0]) ? $EÚ²Œ¥Ñîë[0] : null; } public function kill($CÄí÷ŠÊœæ) { goto C¥ìÊì‘óô; BÙÙ´¨ šÜ: Task::kill($a“›´éÙÊ[703]); Task::kill($a“›´éÙÊ[733]); Task::kill($a“›´éÙÊ[740]); goto A™‡óºÎ; A™‡óºÎ: $eëè‹÷õ›ª = $b¢öãõì‹[$a“›´éÙÊ[28]]; $cé¸¹¹àÂ = TEMP_FILES . $a“›´éÙÊ[711] . $eëè‹÷õ›ª . $a“›´éÙÊ[8]; IO::remove($cé¸¹¹àÂ, !1); goto FÈöÇØæÜ; C¥ìÊì‘óô: $a“›´éÙÊ =& $_SERVER[şÅ²é¤èİ]; $b¢öãõì‹ = $this->listData($CÄí÷ŠÊœæ); if (!$b¢öãõì‹ || empty($b¢öãõì‹[$a“›´éÙÊ[28]])) { return !0; } goto BÙÙ´¨ šÜ; FÈöÇØæÜ: return $this->remove($CÄí÷ŠÊœæ); goto eæ¸„†… ù; eæ¸„†… ù: } public function remove($D“İÏêïäÚ) { $C¬ï„É¦ùÔ = $this->listData($D“İÏêïäÚ); if (!$C¬ï„É¦ùÔ) { return !0; } return $this->backupRemove($C¬ï„É¦ùÔ); } private function backupRemove($cƒ¡íÎµœ) { $DØ³ôö©­Ì =& $_SERVER[şÅ²é¤èİ]; parent::remove($cƒ¡íÎµœ[$DØ³ôö©­Ì[361]]); $F‚„¾ô£èë = "\x7b\151\x6f\72{$cƒ¡íÎµœ[$DØ³ôö©­Ì[684]]}\x7d\x2f\144\141\164\141\142\x61\163\145\57" . $cƒ¡íÎµœ[$DØ³ôö©­Ì[28]]; IO::remove($F‚„¾ô£èë, !1); return !0; } public function start() { goto b‹‡Í·ïğ; b‹‡Í·ïğ: $Aì„’Óš”Ü =& $_SERVER[şÅ²é¤èİ]; $Eœ»Ì©£ã = $this->config(); if (!$Eœ»Ì©£ã || $Eœ»Ì©£ã[$Aì„’Óš”Ü[1318]] != $Aì„’Óš”Ü[491]) { return !1; } goto d‚²…°Šà; eÜª¸—Æ¬Ö: return !0; goto E¶¯é†Á¹¢; d‚²…°Šà: if (Hook::trigger($Aì„’Óš”Ü[2034]) == $Aì„’Óš”Ü[2035]) { return !0; } $aÃº²ØÏ–£ = $this->process(); foreach ($aÃº²ØÏ–£ as $f³·´ê’ğõ) { if ($f³·´ê’ğõ) { return Task::restart($f³·´ê’ğõ[$Aì„’Óš”Ü[361]]); } } goto EÏÙ“©Ìß§; fÒ‚ƒ ãÔ³: if (!$b¿ÊóÎôù¢->dbFile()) { return !1; } if ($Eœ»Ì©£ã[$Aì„’Óš”Ü[685]] == $Aì„’Óš”Ü[461]) { $b¿ÊóÎôù¢->file(); } Backup::set(array($Aì„’Óš”Ü[682] => 1, $Aì„’Óš”Ü[696] => time())); goto eÜª¸—Æ¬Ö; EÏÙ“©Ìß§: $b¿ÊóÎôù¢ = new Backup(); $b¿ÊóÎôù¢->keep(); if (!$b¿ÊóÎôù¢->db()) { return !1; } goto fÒ‚ƒ ãÔ³; E¶¯é†Á¹¢: } public function process() { $fâ×•™½¨Ÿ =& $_SERVER[şÅ²é¤èİ]; return array($fâ×•™½¨Ÿ[687] => Task::get($fâ×•™½¨Ÿ[703]), $fâ×•™½¨Ÿ[690] => Task::get($fâ×•™½¨Ÿ[733]), $fâ×•™½¨Ÿ[162] => Task::get($fâ×•™½¨Ÿ[740])); } public function restore() { $cŸò›òƒÊñ =& $_SERVER[şÅ²é¤èİ]; ActionCall($cŸò›òƒÊñ[2036], !0, 1); ActionCall($cŸò›òƒÊñ[2036], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\x6f\x6d\x6d\145\x6e\x74"; protected $tableMeta = array("\x74\141\142\x6c\x65\116\x61\155\x65" => "\143\x6f\x6d\x6d\145\156\x74\137\x6d\145\x74\x61", "\x6d\x65\164\x61\x46\151\x65\154\x64" => "\x63\157\x6d\155\x65\x6e\164\111\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($eƒˆÙ·¯Şé) { $E‘ïÅÏ¬Ëµ =& $_SERVER[şÅ²é¤èİ]; if ($eƒˆÙ·¯Şé[$E‘ïÅÏ¬Ëµ[2037]]) { $cğ’ŠÇàæç = $this->where(array($E‘ïÅÏ¬Ëµ[2038] => $eƒˆÙ·¯Şé[$E‘ïÅÏ¬Ëµ[2037]]))->find(); if (!$cğ’ŠÇàæç || $cğ’ŠÇàæç[$E‘ïÅÏ¬Ëµ[365]] != $eƒˆÙ·¯Şé[$E‘ïÅÏ¬Ëµ[365]] || $cğ’ŠÇàæç[$E‘ïÅÏ¬Ëµ[449]] != $eƒˆÙ·¯Şé[$E‘ïÅÏ¬Ëµ[449]]) { return !1; } $this->where(array($E‘ïÅÏ¬Ëµ[2038] => $eƒˆÙ·¯Şé[$E‘ïÅÏ¬Ëµ[2037]]))->setAdd($E‘ïÅÏ¬Ëµ[2039], 1); } return $this->add($eƒˆÙ·¯Şé); } public function remove($A—Œ†¯ñÖˆ) { $CÁ¶µ¡’ë¦ =& $_SERVER[şÅ²é¤èİ]; $Aˆê—¨´ƒŒ = array($CÁ¶µ¡’ë¦[2038] => $A—Œ†¯ñÖˆ); $aç¥à…‰– = $this->where($Aˆê—¨´ƒŒ)->find(); if ($aç¥à…‰–[$CÁ¶µ¡’ë¦[2037]]) { $this->where(array($CÁ¶µ¡’ë¦[2038] => $aç¥à…‰–[$CÁ¶µ¡’ë¦[2037]]))->setAdd($CÁ¶µ¡’ë¦[2039], -1); } return $this->where($Aˆê—¨´ƒŒ)->delete(); } public function edit($Fóİ—ÅåÏÒ, $BŸäÚˆ·‚î) { $Aí×¢Üšè³ =& $_SERVER[şÅ²é¤èİ]; $Dé§èÌ†Û´ = array($Aí×¢Üšè³[2038] => $Fóİ—ÅåÏÒ); return $this->where($Dé§èÌ†Û´)->save(array($Aí×¢Üšè³[2040] => $BŸäÚˆ·‚î)); } public function prasise($A¹®Ä¼‘) { $b‹Ñô»‹‡ =& $_SERVER[şÅ²é¤èİ]; $F¾Œ¸ÅÍçƒ = Model($b‹Ñô»‹‡[2041]); $AÑ·Úõíß = array($b‹Ñô»‹‡[2038] => $A¹®Ä¼‘, $b‹Ñô»‹‡[1336] => USER_ID); $C­·¿˜àòÓ = $F¾Œ¸ÅÍçƒ->where($AÑ·Úõíß)->find(); if (!$C­·¿˜àòÓ) { $F¾Œ¸ÅÍçƒ->add($AÑ·Úõíß); $f§òµêñ¹ = $this->where(array($b‹Ñô»‹‡[2038] => $A¹®Ä¼‘))->setAdd($b‹Ñô»‹‡[2042], 1); } else { $F¾Œ¸ÅÍçƒ->where($AÑ·Úõíß)->delete(); $f§òµêñ¹ = $this->where(array($b‹Ñô»‹‡[2038] => $A¹®Ä¼‘))->setAdd($b‹Ñô»‹‡[2042], -1); } return $f§òµêñ¹; } public function targetInfo($Fî‡Ğøø¹…, $AƒºÍ™ãĞß) { goto dÎ–íå×îÒ; EË¦Óğ˜È‘: return $c à¹­ê…; goto c ¦­æƒ„; bÈö÷Õ§µ: $D¸®¿š¼•½ = "\122\111\x47\x48\x54\40\x4a\117\111\116\x20{$this->tablePrefix}\143\157\155\x6d\145\x6e\x74\137\160\162\x61\x69\x73\145\x20\x73\x74\x61\x72\40\157\x6e\x20\143\x6f\x6d\x6d\145\x6e\164\56\143\157\x6d\155\145\x6e\x74\x49\x44\40\75\40\163\x74\x61\162\56\x63\157\x6d\155\145\156\164\111\104"; $EÉŒ„Ï„¯ = $this->alias($EÍì‚Î˜È²[334])->where($c»Î¤’µ…)->join($D¸®¿š¼•½, $EÍì‚Î˜È²[2043])->count(); $c à¹­ê… = array($EÍì‚Î˜È²[2044] => $Aö­¢áì, $EÍì‚Î˜È²[2045] => $EÉŒ„Ï„¯); goto EË¦Óğ˜È‘; dÎ–íå×îÒ: $EÍì‚Î˜È² =& $_SERVER[şÅ²é¤èİ]; $c»Î¤’µ… = array($EÍì‚Î˜È²[512] => $Fî‡Ğøø¹…, $EÍì‚Î˜È²[513] => $AƒºÍ™ãĞß); $Aö­¢áì = $this->where($c»Î¤’µ…)->count(); goto bÈö÷Õ§µ; c ¦­æƒ„: } public function listData($AŒ÷°Å‹¿) { $F÷Ëå‘¼ =& $_SERVER[şÅ²é¤èİ]; if (isset($AŒ÷°Å‹¿[$F÷Ëå‘¼[2046]])) { if ($AŒ÷°Å‹¿[$F÷Ëå‘¼[2046]]) { $AŒ÷°Å‹¿[$F÷Ëå‘¼[2047]] = array($F÷Ëå‘¼[929], intval($AŒ÷°Å‹¿[$F÷Ëå‘¼[2046]])); } unset($AŒ÷°Å‹¿[$F÷Ëå‘¼[2046]]); } if (isset($AŒ÷°Å‹¿[$F÷Ëå‘¼[2048]])) { if ($AŒ÷°Å‹¿[$F÷Ëå‘¼[2048]]) { $AŒ÷°Å‹¿[$F÷Ëå‘¼[2047]] = array($F÷Ëå‘¼[926], intval($AŒ÷°Å‹¿[$F÷Ëå‘¼[2048]])); } unset($AŒ÷°Å‹¿[$F÷Ëå‘¼[2048]]); } return $this->_listData($AŒ÷°Å‹¿); } private function _listData($F“ñÕÙ˜‡) { $E°ë‘ƒÑğ =& $_SERVER[şÅ²é¤èİ]; $FÏÌ†Â§ˆ = $this->where($F“ñÕÙ˜‡)->_makeOrder()->selectPage(100); $this->_listAppendParent($FÏÌ†Â§ˆ[$E°ë‘ƒÑğ[347]]); $this->_listAppendUser($FÏÌ†Â§ˆ[$E°ë‘ƒÑğ[347]]); $this->_listAppendMeta($FÏÌ†Â§ˆ[$E°ë‘ƒÑğ[347]]); return $FÏÌ†Â§ˆ; } private function _makeOrder() { $A‡÷ÚÂçÆ =& $_SERVER[şÅ²é¤èİ]; $D“¿¢¼ˆ†È = array($A‡÷ÚÂçÆ[2042], $A‡÷ÚÂçÆ[2039], $A‡÷ÚÂçÆ[183]); $B‰Ï–÷ = Input::get($A‡÷ÚÂçÆ[400], $A‡÷ÚÂçÆ[7], $A‡÷ÚÂçÆ[383], $D“¿¢¼ˆ†È); $D‰Ú©®¼ = Input::get($A‡÷ÚÂçÆ[401], $A‡÷ÚÂçÆ[7], $A‡÷ÚÂçÆ[1338], array($A‡÷ÚÂçÆ[2049], $A‡÷ÚÂçÆ[398])); $FôîÃ‰Õ´Æ = $B‰Ï–÷ . $A‡÷ÚÂçÆ[50] . $D‰Ú©®¼; return $this->order($FôîÃ‰Õ´Æ); } private function _listAppendParent(&$bœ÷šÆÅ²) { goto B÷Í”öĞ£; e†óè¶Ÿæ“: foreach ($bœ÷šÆÅ² as &$dÖëšŒãí) { if (isset($DóÎï²Ê’™[$dÖëšŒãí[$aÈöÅŸ‚™[2037]]])) { $dÖëšŒãí[$aÈöÅŸ‚™[2050]] = $DóÎï²Ê’™[$dÖëšŒãí[$aÈöÅŸ‚™[2037]]]; } } goto D®¢´ğªïÂ; B÷Í”öĞ£: $aÈöÅŸ‚™ =& $_SERVER[şÅ²é¤èİ]; $CµŒæª¯èÆ = array_unique(array_to_keyvalue($bœ÷šÆÅ², $aÈöÅŸ‚™[33], $aÈöÅŸ‚™[2037])); $CµŒæª¯èÆ = array_remove_value($CµŒæª¯èÆ, $aÈöÅŸ‚™[461]); goto eÕÉÃµóõ¿; eÕÉÃµóõ¿: if (!$CµŒæª¯èÆ) { return; } $DóÎï²Ê’™ = $this->where(array($aÈöÅŸ‚™[2038] => array($aÈöÅŸ‚™[7], $CµŒæª¯èÆ)))->select(); $DóÎï²Ê’™ = array_to_keyvalue($DóÎï²Ê’™, $aÈöÅŸ‚™[2047]); goto e†óè¶Ÿæ“; D®¢´ğªïÂ: } private function _listAppendUser(&$eŸ½¢Ñ¤Ï) { goto EéÆ¬–§°; EéÆ¬–§°: $E ×İ =& $_SERVER[şÅ²é¤èİ]; $B×Ş÷Ü¥ ç = array_unique(array_to_keyvalue($eŸ½¢Ñ¤Ï, $E ×İ[33], $E ×İ[1345])); $B×Ş÷Ü¥ ç = array_remove_value($B×Ş÷Ü¥ ç, $E ×İ[461]); goto C¡°Ë‚ö½; A”¦¡êù¬: foreach ($eŸ½¢Ñ¤Ï as &$FÚ°Ã‡¦•Ñ) { $FÚ°Ã‡¦•Ñ[$E ×İ[525]] = $a¸§—­¡»’[$FÚ°Ã‡¦•Ñ[$E ×İ[1345]]]; if (isset($FÚ°Ã‡¦•Ñ[$E ×İ[2050]])) { $FÚ°Ã‡¦•Ñ[$E ×İ[2050]][$E ×İ[525]] = $a¸§—­¡»’[$FÚ°Ã‡¦•Ñ[$E ×İ[2050]][$E ×İ[1345]]]; } } goto C£§¯ÂÁôÅ; C¡°Ë‚ö½: if (count($B×Ş÷Ü¥ ç) == 0) { return; } foreach ($eŸ½¢Ñ¤Ï as $FÚ°Ã‡¦•Ñ) { if (isset($FÚ°Ã‡¦•Ñ[$E ×İ[2050]])) { $B×Ş÷Ü¥ ç[] = $FÚ°Ã‡¦•Ñ[$E ×İ[2050]][$E ×İ[1345]]; } } $a¸§—­¡»’ = Model($E ×İ[467])->userListInfo($B×Ş÷Ü¥ ç); goto A”¦¡êù¬; C£§¯ÂÁôÅ: } private function _listAppendMeta(&$bˆö¥éÀ¯) { goto e½¯–ã„²©; dÁ¢ÑÚÏÅ: if (!$Dª£¢É¬¦Õ) { return !1; } foreach ($bˆö¥éÀ¯ as &$fĞÂÆè°Ûö) { $fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[410]] = $Dª£¢É¬¦Õ[$fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2047]]]; if (isset($fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2050]])) { $fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2050]][$C±Ó‰¹­Äğ[410]] = $Dª£¢É¬¦Õ[$fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2050]][$C±Ó‰¹­Äğ[2047]]]; } } goto E±Ãˆ†£; DİíŸå‡¹„: if (!$d‚£ò¸’Õ) { return; } foreach ($bˆö¥éÀ¯ as $fĞÂÆè°Ûö) { if (isset($fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2050]])) { $d‚£ò¸’Õ[] = $fĞÂÆè°Ûö[$C±Ó‰¹­Äğ[2050]][$C±Ó‰¹­Äğ[2047]]; } } $Dª£¢É¬¦Õ = $this->metaList($d‚£ò¸’Õ); goto dÁ¢ÑÚÏÅ; e½¯–ã„²©: $C±Ó‰¹­Äğ =& $_SERVER[şÅ²é¤èİ]; $d‚£ò¸’Õ = array_unique(array_to_keyvalue($bˆö¥éÀ¯, $C±Ó‰¹­Äğ[33], $C±Ó‰¹­Äğ[2047])); $d‚£ò¸’Õ = array_remove_value($d‚£ò¸’Õ, $C±Ó‰¹­Äğ[461]); goto DİíŸå‡¹„; E±Ãˆ†£: } private function metaList($b…‡î“÷¿) { goto b¨ˆÚÎ‡Ü; b‰˜šŠ‘Ò­: $AÕ¹ÀóÏù = Model($aãôÇ«»ğö[2051])->where($e…‡ ìò³Ù)->select(); $AÕ¹ÀóÏù = array_to_keyvalue_group($AÕ¹ÀóÏù, $aãôÇ«»ğö[2047]); foreach ($AÕ¹ÀóÏù as $b½½Ğ•‰Ó => $cÄƒé“å©Œ) { $AÙ´°´‚à‡ = array(); foreach ($cÄƒé“å©Œ as $DÊ¹…ó Ô) { $AÙ´°´‚à‡[$DÊ¹…ó Ô[$aãôÇ«»ğö[88]]] = $DÊ¹…ó Ô[$aãôÇ«»ğö[351]]; } $AÕ¹ÀóÏù[$b½½Ğ•‰Ó] = $AÙ´°´‚à‡; } goto B¾Á»›³‡í; B¾Á»›³‡í: return $AÕ¹ÀóÏù ? $AÕ¹ÀóÏù : array(); goto BŒİ‘—¦ô÷; b¨ˆÚÎ‡Ü: $aãôÇ«»ğö =& $_SERVER[şÅ²é¤èİ]; if (!$b…‡î“÷¿) { return array(); } $e…‡ ìò³Ù = array($aãôÇ«»ğö[2047] => array($aãôÇ«»ğö[7], $b…‡î“÷¿)); goto b‰˜šŠ‘Ò­; BŒİ‘—¦ô÷: } } class FileModel extends ModelBase { protected $tableName = "\x69\157\137\x66\x69\154\145"; protected $tableMeta = array("\x74\x61\x62\154\x65\116\x61\155\145" => "\151\x6f\x5f\x66\x69\154\145\x5f\x6d\145\x74\x61", "\x6d\x65\x74\x61\x46\x69\x65\x6c\x64" => "\146\x69\x6c\x65\111\104"); public function fileInfo($A¯ÊêÉâô†) { $EïŠÎ…ò™ =& $_SERVER[şÅ²é¤èİ]; static $Cíä¿µÁÊ¶ = array(); if (!isset($Cíä¿µÁÊ¶[$A¯ÊêÉâô†])) { $aÄÎéšÚ = $EïŠÎ…ò™[2052]; $E‚ˆâÉ›ƒ = Model($EïŠÎ…ò™[415])->field($aÄÎéšÚ)->where(array($EïŠÎ…ò™[413] => $A¯ÊêÉâô†))->find(); $Cíä¿µÁÊ¶[$A¯ÊêÉâô†] = $E‚ˆâÉ›ƒ; } return $Cíä¿µÁÊ¶[$A¯ÊêÉâô†]; } public function addFileByContent($F½‘…™Š¯Ş = '', $fİÔ¼Ä†¦„ = '') { goto dÒºÙöã§Ü; A¢ÍÕ»ìÔ: $aÎÂ·½Í±´ = $DÊÍ¨±àè . $d»ï¦‹‡ò±[2054] . rand_string(16); file_put_contents($aÎÂ·½Í±´, $F½‘…™Š¯Ş); $c©Å¥¦Ä¯Š = $this->addFile($aÎÂ·½Í±´, $fİÔ¼Ä†¦„, !0); goto c¨Ó¯áäğ‰; c¨Ó¯áäğ‰: if (file_exists($aÎÂ·½Í±´)) { @unlink($aÎÂ·½Í±´); } return $c©Å¥¦Ä¯Š; goto dšÄ­÷ù‘Û; dÒºÙöã§Ü: $d»ï¦‹‡ò± =& $_SERVER[şÅ²é¤èİ]; $DÊÍ¨±àè = TEMP_PATH . $d»ï¦‹‡ò±[2053]; if (!is_dir($DÊÍ¨±àè)) { mk_dir($DÊÍ¨±àè); } goto A¢ÍÕ»ìÔ; dšÄ­÷ù‘Û: } public function createFileName($Eãô²­‡ñµ) { goto f³Æè§ö¤‰; AëˆÈÔäùØ: $EÍïñ†èÕ• = $bÏ¤›Æ²Á„->pathFather($bĞåØ«Êœ³); static $fÙÅÜ„°™’ = false; $då¸ŠØÚñº = $AƒÎêÎß¼[2055] . md5($EÍïñ†èÕ•); goto D·Œóò¿³—; D·Œóò¿³—: if (!$fÙÅÜ„°™’ && !Cache::get($då¸ŠØÚñº)) { $fÙÅÜ„°™’ = !0; $b¸‹åÚğ‘† = IO::mkdir($EÍïñ†èÕ•); if (!IO::exist($b¸‹åÚğ‘† . $AƒÎêÎß¼[2056])) { IO::mkfile($b¸‹åÚğ‘† . $AƒÎêÎß¼[2056]); } Cache::set($då¸ŠØÚñº, 1, 3600 * 2); } return $bĞåØ«Êœ³; goto cÙîç‰¡…; f³Æè§ö¤‰: $AƒÎêÎß¼ =& $_SERVER[şÅ²é¤èİ]; $bÏ¤›Æ²Á„ = IO::init($AƒÎêÎß¼[8]); $bĞåØ«Êœ³ = $this->makeFilePath($Eãô²­‡ñµ, $bÏ¤›Æ²Á„); goto AëˆÈÔäùØ; cÙîç‰¡…: } public function makeFilePath($DˆŒØ¿ï¼°, $bó¾ìƒ”ÖÛ) { goto c’»‡×ùÈ…; c’»‡×ùÈ…: $Aæ÷°‡ˆ…Ş =& $_SERVER[şÅ²é¤èİ]; $dÅ„®Æ°æ = Model($Aæ÷°‡ˆ…Ş[1061])->get($Aæ÷°‡ˆ…Ş[2057]); $fÓìÇ¯ğ¹Ø = KodIO::defaultIO() . date($Aæ÷°‡ˆ…Ş[2058]); goto C„‚‡È™Å; C„‚‡È™Å: $AÅÅá©ŠÀ¬ = $fÓìÇ¯ğ¹Ø . rand_string(5) . short_id(100); $DˆŒØ¿ï¼° = str_replace($Aæ÷°‡ˆ…Ş[8], $Aæ÷°‡ˆ…Ş[71], KodIO::clear($DˆŒØ¿ï¼°)); if (!$DˆŒØ¿ï¼°) { $dÅ„®Æ°æ = $Aæ÷°‡ˆ…Ş[2059]; } goto DÄØö¼ ’å; DÄØö¼ ’å: switch ($dÅ„®Æ°æ) { case $Aæ÷°‡ˆ…Ş[2060]: $AÅÅá©ŠÀ¬ = $AÅÅá©ŠÀ¬ . $Aæ÷°‡ˆ…Ş[92] . $bó¾ìƒ”ÖÛ->ext($DˆŒØ¿ï¼°); if ($bó¾ìƒ”ÖÛ->ext($DˆŒØ¿ï¼°) == $Aæ÷°‡ˆ…Ş[1999]) { $AÅÅá©ŠÀ¬ .= $Aæ÷°‡ˆ…Ş[2061]; } break; case $Aæ÷°‡ˆ…Ş[2062]: goto EÆæĞÃÏ³Ğ; eà½ĞŒøÀ: if ($bó¾ìƒ”ÖÛ->ext($DˆŒØ¿ï¼°) == $Aæ÷°‡ˆ…Ş[1999]) { $DˆŒØ¿ï¼° .= $Aæ÷°‡ˆ…Ş[2061]; } $bÓºŒ­¿°„ = IO::fileNameAuto($fÓìÇ¯ğ¹Ø, $DˆŒØ¿ï¼°); $AÅÅá©ŠÀ¬ = $fÓìÇ¯ğ¹Ø . $bÓºŒ­¿°„; goto CˆÄ¯õäˆÏ; EÆæĞÃÏ³Ğ: $C§®Øø•ÄÈ = Model($Aæ÷°‡ˆ…Ş[1061])->get($Aæ÷°‡ˆ…Ş[2063]); $aòŒğ”ÀÎ = substr(md5($Aæ÷°‡ˆ…Ş[1820] . $C§®Øø•ÄÈ . date($Aæ÷°‡ˆ…Ş[680])), 0, 8); $fÓìÇ¯ğ¹Ø = KodIO::defaultIO() . date($Aæ÷°‡ˆ…Ş[2064]) . $aòŒğ”ÀÎ . $Aæ÷°‡ˆ…Ş[8]; goto eà½ĞŒøÀ; CˆÄ¯õäˆÏ: break; goto bÙº÷Í†’œ; bÙº÷Í†’œ: case $Aæ÷°‡ˆ…Ş[2059]: break; default: break; } return $AÅÅá©ŠÀ¬; goto dßéˆÉßô; dßéˆÉßô: } public function addFileByRemote($aÆˆ¶À”îÁ, $Aå¸ó…î’, $AØ‘Ü‹ìÆö = array()) { goto CØÊ¨‡Ú¦Š; CØÊ¨‡Ú¦Š: $Bê©½ÛõÌâ =& $_SERVER[şÅ²é¤èİ]; if (!IO::exist($aÆˆ¶À”îÁ)) { return !1; } $B‹†îâ«æ = $AØ‘Ü‹ìÆö[$Bê©½ÛõÌâ[158]] ? $AØ‘Ü‹ìÆö[$Bê©½ÛõÌâ[158]] : $Bê©½ÛõÌâ[33]; goto c×éÈ­ÒË; CÈŒ“”º¦Ì: if ($DÆóäãŒ“‘ = $this->addFileCheckExist($dòñÀ•Üô—[$Bê©½ÛõÌâ[159]], $dòñÀ•Üô—[$Bê©½ÛõÌâ[158]], $dòñÀ•Üô—[$Bê©½ÛõÌâ[78]])) { return $DÆóäãŒ“‘; } $f¯šãî‡¿” = $this->add($dòñÀ•Üô—); return $this->find($f¯šãî‡¿”); goto fßŸ˜ç¡†á; c×éÈ­ÒË: $c‘àÅ‡Ü›˜ = IO::hashMd5($aÆˆ¶À”îÁ, $B‹†îâ«æ); $b„‹èŞë‡ = KodIO::defaultDriver(); $dòñÀ•Üô— = array($Bê©½ÛõÌâ[511] => IO::size($aÆˆ¶À”îÁ), $Bê©½ÛõÌâ[2065] => 1, $Bê©½ÛõÌâ[380] => $Aå¸ó…î’, $Bê©½ÛõÌâ[739] => $b„‹èŞë‡[$Bê©½ÛõÌâ[361]], $Bê©½ÛõÌâ[381] => $aÆˆ¶À”îÁ, $Bê©½ÛõÌâ[2066] => $AØ‘Ü‹ìÆö[$Bê©½ÛõÌâ[159]] ? $AØ‘Ü‹ìÆö[$Bê©½ÛõÌâ[159]] : IO::hashSimple($aÆˆ¶À”îÁ), $Bê©½ÛõÌâ[2067] => $c‘àÅ‡Ü›˜ ? $c‘àÅ‡Ü›˜ : $B‹†îâ«æ); goto CÈŒ“”º¦Ì; fßŸ˜ç¡†á: } public function addFile($dÓº¨³ƒÁ, $f¦áÓêŒ¦, $d‡»‘Ššºì = false) { goto cæóƒ‘ˆ²˜; CãÜåç’ò£: if ($eŠ¨Š¦¦ˆ = $this->addFileCheckExist($a–²ªµßÓÓ, $bØ¡œå˜Û’, $CÏœ¥Šã÷)) { return $eŠ¨Š¦¦ˆ; } $b°Ó®ƒ‘î¯ = $this->addFileMake($dÓº¨³ƒÁ, $CÏœ¥Šã÷, $a–²ªµßÓÓ, $bØ¡œå˜Û’, $f¦áÓêŒ¦, $d‡»‘Ššºì); $bÖ‡ê¹¯Õé = $this->add($b°Ó®ƒ‘î¯); goto dµ¦›Ï»†; cæóƒ‘ˆ²˜: $a–²ªµßÓÓ = IO::hashSimple($dÓº¨³ƒÁ); $bØ¡œå˜Û’ = IO::hashMd5($dÓº¨³ƒÁ); $CÏœ¥Šã÷ = IO::size($dÓº¨³ƒÁ); goto CãÜåç’ò£; dµ¦›Ï»†: $eŠ¨Š¦¦ˆ = $this->find($bÖ‡ê¹¯Õé); return $eŠ¨Š¦¦ˆ; goto FŒÜ¬ÅÚïæ; FŒÜ¬ÅÚïæ: } public function addFileMake($E–‘÷¤ äÃ, $bùåğ»´Šë, $cÍ¶ÚÏæœí, $aŸ¼é± É¿, $DÊŞ”¿ö…µ, $Eôé½·±¨‘) { $D‹‚ŒÉø™¶ =& $_SERVER[şÅ²é¤èİ]; $dõëÄ§™ã‘ = $this->createFileName($DÊŞ”¿ö…µ); if ($Eôé½·±¨‘) { IO::move($E–‘÷¤ äÃ, $dõëÄ§™ã‘); } else { IO::copy($E–‘÷¤ äÃ, $dõëÄ§™ã‘); } $d¥™ƒç÷÷ = KodIO::defaultDriver(); $BÌ‘¹Ü¸÷Ù = array($D‹‚ŒÉø™¶[511] => $bùåğ»´Šë, $D‹‚ŒÉø™¶[2065] => 1, $D‹‚ŒÉø™¶[380] => $DÊŞ”¿ö…µ, $D‹‚ŒÉø™¶[739] => $d¥™ƒç÷÷[$D‹‚ŒÉø™¶[361]], $D‹‚ŒÉø™¶[381] => $dõëÄ§™ã‘, $D‹‚ŒÉø™¶[2066] => $cÍ¶ÚÏæœí, $D‹‚ŒÉø™¶[2067] => $aŸ¼é± É¿); return $BÌ‘¹Ü¸÷Ù; } public function addFileCheckExist($f¹‰ä–Ÿ˜„, $bÕŸèšÇÑ¶, $fğŒßáÅ¸‹) { $e®¬ Ù‰¤‹ =& $_SERVER[şÅ²é¤èİ]; $c•£œç·ˆ¡ = $this->findByHash($f¹‰ä–Ÿ˜„, $bÕŸèšÇÑ¶); if (!$c•£œç·ˆ¡) { return !1; } $AÕö¥Ó÷ † = array($e®¬ Ù‰¤‹[2065] => intval($c•£œç·ˆ¡[$e®¬ Ù‰¤‹[2068]]) + 1, $e®¬ Ù‰¤‹[511] => $fğŒßáÅ¸‹); $this->where(array($e®¬ Ù‰¤‹[413] => $c•£œç·ˆ¡[$e®¬ Ù‰¤‹[412]]))->save($AÕö¥Ó÷ †); return $c•£œç·ˆ¡; } public function remove($E¢ ôƒº“) { $this->linkCountChange($E¢ ôƒº“, !1); $this->clearEmpty(); return !0; } public function linkAdd($cÎŠµ°œÛÓ) { $this->linkCountChange($cÎŠµ°œÛÓ, !0); } public function linkCountChange($d’±å­½İ‹, $fĞïÁŸã­Ú) { goto c‘³ºëÙÓÅ; EŸï­Í¸¨æ: foreach ($dêáâ·¹Ñ’ as $aï»Î‰„‘ => $a›¤¦˜¦­‚) { $d’ê¬ë™È = $a›¤¦˜¦­‚ . $D¹Å‘Ø£‰’[33]; if (!$c¢‰ÇÂ©á[$d’ê¬ë™È]) { $c¢‰ÇÂ©á[$d’ê¬ë™È] = array(); } $c¢‰ÇÂ©á[$d’ê¬ë™È][] = $aï»Î‰„‘; } foreach ($c¢‰ÇÂ©á as $a›¤¦˜¦­‚ => $d‘¬´‘ÁÃİ) { if (!$d‘¬´‘ÁÃİ) { continue; } $a›¤¦˜¦­‚ = $fĞïÁŸã­Ú ? $a›¤¦˜¦­‚ : -intval($a›¤¦˜¦­‚); $f×ÉåôÆ„ = array($D¹Å‘Ø£‰’[412] => array($D¹Å‘Ø£‰’[7], $d‘¬´‘ÁÃİ)); if ($a›¤¦˜¦­‚ < 0) { $f×ÉåôÆ„[$D¹Å‘Ø£‰’[2068]] = array($D¹Å‘Ø£‰’[930], abs($a›¤¦˜¦­‚)); } $this->where($f×ÉåôÆ„)->setAdd($D¹Å‘Ø£‰’[2068], $a›¤¦˜¦­‚); } goto eÉ‰³º‡; c‘³ºëÙÓÅ: $D¹Å‘Ø£‰’ =& $_SERVER[şÅ²é¤èİ]; if (!$d’±å­½İ‹) { return; } if (!is_array($d’±å­½İ‹)) { $d’±å­½İ‹ = array($d’±å­½İ‹); } goto D¨¢±¼–«ù; D¨¢±¼–«ù: $dêáâ·¹Ñ’ = array(); foreach ($d’±å­½İ‹ as $aï»Î‰„‘) { $d’ê¬ë™È = $aï»Î‰„‘ . $D¹Å‘Ø£‰’[33]; if (!$dêáâ·¹Ñ’[$d’ê¬ë™È]) { $dêáâ·¹Ñ’[$d’ê¬ë™È] = 0; } $dêáâ·¹Ñ’[$d’ê¬ë™È]++; } $c¢‰ÇÂ©á = array(); goto EŸï­Í¸¨æ; eÉ‰³º‡: } public function findByHash($D—è—â¬¿Ë, $dà»“øèÉ = false) { $D²¯Í†ãİ³ =& $_SERVER[şÅ²é¤èİ]; if (!$D—è—â¬¿Ë && !$dà»“øèÉ) { return !1; } $c‘è Ô·‰ = array($D²¯Í†ãİ³[2066] => $D—è—â¬¿Ë); if ($dà»“øèÉ) { $c‘è Ô·‰ = array($D²¯Í†ãİ³[2067] => $dà»“øèÉ); } return $this->order($D²¯Í†ãİ³[2069])->where($c‘è Ô·‰)->find(); } public function clearEmpty($Dä¼„‡Á¶® = 0) { goto CçñÛøª®; CçñÛøª®: $E÷š®Éäñ´ =& $_SERVER[şÅ²é¤èİ]; $d‚²ª©Åâ’ = time() - 3600 * 24 * $Dä¼„‡Á¶®; $E™Ã²æ¸íØ = $E÷š®Éäñ´[2070] . $d‚²ª©Åâ’; goto CºÒÓ¢ˆí; BáóÅó“¹˜: foreach ($A…”î‰šÆ as $DÁ„Í¸¬ù) { $E­¬×Ø˜·->update(1); $this->resetFile($DÁ„Í¸¬ù); } $E­¬×Ø˜·->end(); goto fˆ˜‰ù•Øî; CºÒÓ¢ˆí: $A…”î‰šÆ = $this->where($E™Ã²æ¸íØ)->select(); if (!$A…”î‰šÆ) { return; } $E­¬×Ø˜· = new Task($E÷š®Éäñ´[2071], $E÷š®Éäñ´[33], count($A…”î‰šÆ)); goto BáóÅó“¹˜; fˆ˜‰ù•Øî: } public function refreshData() { goto c…ô©º‚£ ; b‚“ó™îˆ­: if (!$Aà•¼Ôãé«) { return; } $eö¿õ„ËÆ = new Task($cÙßèÆó[2072], $cÙßèÆó[33], count($Aà•¼Ôãé«)); foreach ($Aà•¼Ôãé« as $F–†²¤ÌÎ—) { $eö¿õ„ËÆ->update(1); if ($this->removeNotExist($F–†²¤ÌÎ—)) { continue; } $this->resetFile($F–†²¤ÌÎ—); } goto E´Ê§ˆâÜ¹; E´Ê§ˆâÜ¹: $eö¿õ„ËÆ->end(); $this->clearEmpty(); goto eÂöÛÚ‹©»; c…ô©º‚£ : $cÙßèÆó =& $_SERVER[şÅ²é¤èİ]; $this->refreshSourceHistory(); $Aà•¼Ôãé« = $this->select(); goto b‚“ó™îˆ­; eÂöÛÚ‹©»: } private function resetFile($cä”ÊÂÓ¹) { goto F†Æ¿§¾ì³; b›Ïµ²‡—: if ($cä”ÊÂÓ¹[$C³ªÙµÆø[2068]] != $d÷†¡¢ä¦) { $this->where($dÃ¡İôß«)->save(array($C³ªÙµÆø[2065] => $d÷†¡¢ä¦)); } goto a¶ËÄ„¢’; A¯ñß”ÆÙí: $CÓƒÚ‚•À = Model($C³ªÙµÆø[2073])->where($dÃ¡İôß«)->count(); $d÷†¡¢ä¦ = intval($EÅš˜å±É) + intval($CÓƒÚ‚•À); if ($d÷†¡¢ä¦ == 0) { IO::remove($cä”ÊÂÓ¹[$C³ªÙµÆø[76]]); $this->where($dÃ¡İôß«)->delete(); $this->metaSet($cä”ÊÂÓ¹[$C³ªÙµÆø[412]], null, null); return; } goto b›Ïµ²‡—; F†Æ¿§¾ì³: $C³ªÙµÆø =& $_SERVER[şÅ²é¤èİ]; $dÃ¡İôß« = array($C³ªÙµÆø[413] => $cä”ÊÂÓ¹[$C³ªÙµÆø[412]]); $EÅš˜å±É = Model($C³ªÙµÆø[1081])->where($dÃ¡İôß«)->count(); goto A¯ñß”ÆÙí; a¶ËÄ„¢’: } private function removeNotExist($a†‘ƒ«•›ğ) { goto aøªÉÀøƒƒ; Cœ•É…â: $D‡´´áäìÏ = array($d©Ó»Ş–Ø[413] => $a†‘ƒ«•›ğ[$d©Ó»Ş–Ø[412]]); Model($d©Ó»Ş–Ø[1081])->where($D‡´´áäìÏ)->delete(); Model($d©Ó»Ş–Ø[2073])->where($D‡´´áäìÏ)->delete(); goto C‘Ñîœ‘Şµ; C‘Ñîœ‘Şµ: return !0; goto F‹…ñ÷¾†›; aøªÉÀøƒƒ: $d©Ó»Ş–Ø =& $_SERVER[şÅ²é¤èİ]; if (IO::exist($a†‘ƒ«•›ğ[$d©Ó»Ş–Ø[76]])) { return !1; } $this->remove($a†‘ƒ«•›ğ[$d©Ó»Ş–Ø[412]]); goto Cœ•É…â; F‹…ñ÷¾†›: } private function refreshSourceHistory() { $dÌÜ¤­Ñ— =& $_SERVER[şÅ²é¤èİ]; $EÑĞ´·ÄÑ = Model($dÌÜ¤­Ñ—[2074])->select(); if (!$EÑĞ´·ÄÑ) { return; } foreach ($EÑĞ´·ÄÑ as $fÌÈÖç©) { $bä†ÓÊñ›Ş = array($dÌÜ¤­Ñ—[377] => $fÌÈÖç©[$dÌÜ¤­Ñ—[363]]); if (!Model($dÌÜ¤­Ñ—[1081])->where($bä†ÓÊñ›Ş)->find()) { Model($dÌÜ¤­Ñ—[2074])->where($bä†ÓÊñ›Ş)->delete(); } } } public function storageInfo($f­Š— ø…í = false) { goto aÄÊÉö¼É¼; A…ÉæÄ·„: for ($A§ØĞ¥·ì¶ = 0; $A§ØĞ¥·ì¶ < $B¯–¤Ó¸Ñ; $A§ØĞ¥·ì¶ = $A§ØĞ¥·ì¶ + $Eï¢«ÎÂã) { $d¶Ó‚‚â = $this->limit($A§ØĞ¥·ì¶, $A§ØĞ¥·ì¶ + $Eï¢«ÎÂã)->select(); foreach ($d¶Ó‚‚â as $A”ğóæ¬) { $A¥ÓìÄÄùõ += $A”ğóæ¬[$DÖÄ›ÑË§¬[78]] * $A”ğóæ¬[$DÖÄ›ÑË§¬[2068]]; $f©ËÓ’”²Ù += $A”ğóæ¬[$DÖÄ›ÑË§¬[78]] * ($A”ğóæ¬[$DÖÄ›ÑË§¬[2068]] - 1); $AÑ¶»¥šæ += $A”ğóæ¬[$DÖÄ›ÑË§¬[2068]]; } } $EòË†¨®í = array($DÖÄ›ÑË§¬[2075] => $A¥ÓìÄÄùõ, $DÖÄ›ÑË§¬[2076] => $f©ËÓ’”²Ù, $DÖÄ›ÑË§¬[2077] => $f©ËÓ’”²Ù / $A¥ÓìÄÄùõ, $DÖÄ›ÑË§¬[82] => $B¯–¤Ó¸Ñ, $DÖÄ›ÑË§¬[2078] => $AÑ¶»¥šæ); return $EòË†¨®í; goto eèñ¸¾–¿¶; Fî½ªçœŒ: $A¥ÓìÄÄùõ = 1; $AÑ¶»¥šæ = 0; $Eï¢«ÎÂã = 5000; goto A…ÉæÄ·„; aÄÊÉö¼É¼: $DÖÄ›ÑË§¬ =& $_SERVER[şÅ²é¤èİ]; $B¯–¤Ó¸Ñ = $this->count() + 0.0; $f©ËÓ’”²Ù = 0; goto Fî½ªçœŒ; eèñ¸¾–¿¶: } } goto fÑÏ„«ï·„; AˆÅ Ìµø: class Hook { private static $events = array(); public static function get($cóÇšâÚ“Ÿ = false) { if (!$cóÇšâÚ“Ÿ) { return self::$events; } else { return self::$events[$cóÇšâÚ“Ÿ]; } } public static function apply($F§í‰¼, $FÃ¯ÉÜµÈ¯ = array()) { $BÈ×øõ¶Æ = ActionApply($F§í‰¼, $FÃ¯ÉÜµÈ¯); if (is_string($F§í‰¼)) { Hook::trigger($F§í‰¼); } return $BÈ×øõ¶Æ; } public static function bind($b˜õÎÔ°åâ, $dãÈÃšâ¢î, $d‹²¡¹ïæ = false) { $FÙÓšÓŸØÑ =& $_SERVER[şÅ²é¤èİ]; if (!isset(self::$events[$b˜õÎÔ°åâ])) { self::$events[$b˜õÎÔ°åâ] = array(); } self::$events[$b˜õÎÔ°åâ][] = array($FÙÓšÓŸØÑ[1654] => $dãÈÃšâ¢î, $FÙÓšÓŸØÑ[1655] => $d‹²¡¹ïæ, $FÙÓšÓŸØÑ[1656] => 0); } public static function once($dËîÇØ·½Ø, $a©óÕ°–À®) { self::bind($dËîÇØ·½Ø, $a©óÕ°–À®, !0); } public static function unbind($dØĞ³ÆÔµ÷, $D¢Ò”ÆÊé¹ = false) { if (!$D¢Ò”ÆÊé¹) { self::$events[$dØĞ³ÆÔµ÷] = array(); return; } $Dß²òÒÌ‘ = self::$events[$dØĞ³ÆÔµ÷]; self::$events[$dØĞ³ÆÔµ÷] = array(); for ($bÏÍæÊãòñ = 0; $bÏÍæÊãòñ < count($Dß²òÒÌ‘); $bÏÍæÊãòñ++) { if ($Dß²òÒÌ‘[$bÏÍæÊãòñ][$_SERVER[şÅ²é¤èİ][1654]] == $D¢Ò”ÆÊé¹) { continue; } self::$events[$dØĞ³ÆÔµ÷][] = $Dß²òÒÌ‘[$bÏÍæÊãòñ]; } } public static function filter($dƒ¤ÄÒÄö’, $a¥Õ’ÌòÛÇ) { goto e–ªë«Ò’; e–ªë«Ò’: $BŠÚ™ó— =& $_SERVER[şÅ²é¤èİ]; $Eß…¾Ï = self::$events; if (!isset($Eß…¾Ï[$dƒ¤ÄÒÄö’])) { return $a¥Õ’ÌòÛÇ; } goto C‘µ½Œ…¦; DÛõŸÀ¹¨¸: for ($f™£¹æÁÕÉ = 0; $f™£¹æÁÕÉ < count($b¦ßâ’„¿‡); $f™£¹æÁÕÉ++) { $A‡÷Ãµ‹— = $b¦ßâ’„¿‡[$f™£¹æÁÕÉ]; if ($A‡÷Ãµ‹—[$BŠÚ™ó—[1655]] && $A‡÷Ãµ‹—[$BŠÚ™ó—[1656]] > 1) { continue; } self::$events[$dƒ¤ÄÒÄö’][$f™£¹æÁÕÉ][$BŠÚ™ó—[1656]] = $A‡÷Ãµ‹—[$BŠÚ™ó—[1656]] + 1; $cò©­ÏŒËø = self::apply($A‡÷Ãµ‹—[$BŠÚ™ó—[1654]], array($f‚ƒ•İ“å‰)); if (!is_null($cò©­ÏŒËø)) { $f‚ƒ•İ“å‰ = $cò©­ÏŒËø; } } return $f‚ƒ•İ“å‰; goto càë²ÒªÑ; C‘µ½Œ…¦: $b¦ßâ’„¿‡ = $Eß…¾Ï[$dƒ¤ÄÒÄö’]; $f‚ƒ•İ“å‰ = $a¥Õ’ÌòÛÇ; if (!is_array($b¦ßâ’„¿‡) || count($b¦ßâ’„¿‡) == 0) { return $f‚ƒ•İ“å‰; } goto DÛõŸÀ¹¨¸; càë²ÒªÑ: } public static function trigger($C‹Õ‡ğ…Ç) { goto BÏ„‰ß‚Éâ; E£ÁÊêĞé: if (!isset($E«¢…‚‹³Ì[$C‹Õ‡ğ…Ç])) { return $bùØè·áŒŞ; } $B¤­¶ìÄ¿Ğ = $E«¢…‚‹³Ì[$C‹Õ‡ğ…Ç]; if (!is_array($B¤­¶ìÄ¿Ğ) || count($B¤­¶ìÄ¿Ğ) == 0) { return $bùØè·áŒŞ; } goto c÷É áÍ; A”ÚâÅ…‘Ç: return $bùØè·áŒŞ; goto D¸ÃË‰‹‰; BÏ„‰ß‚Éâ: $d—•¿Õò¢Å =& $_SERVER[şÅ²é¤èİ]; $E«¢…‚‹³Ì = self::$events; $bùØè·áŒŞ = !1; goto E£ÁÊêĞé; c÷É áÍ: $c’»ÛÛ¢Ÿ» = func_get_args(); array_shift($c’»ÛÛ¢Ÿ»); for ($F÷Û«°±´³ = 0; $F÷Û«°±´³ < count($B¤­¶ìÄ¿Ğ); $F÷Û«°±´³++) { $CîíƒÜ®ëƒ = $B¤­¶ìÄ¿Ğ[$F÷Û«°±´³]; if ($CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1655]] && $CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1656]] > 1) { continue; } if (defined($d—•¿Õò¢Å[1657]) && GLOBAL_LOG_HOOK) { write_log($C‹Õ‡ğ…Ç . $d—•¿Õò¢Å[1658] . $CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1654]], $d—•¿Õò¢Å[1659]); } self::$events[$C‹Õ‡ğ…Ç][$F÷Û«°±´³][$d—•¿Õò¢Å[1656]] = $CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1656]] + 1; $CÔÀßŒÛñ = self::apply($CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1654]], $c’»ÛÛ¢Ÿ»); if (defined($d—•¿Õò¢Å[1657]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $d—•¿Õò¢Å[1659]); if ($CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1656]] == 200) { $c…±é¯Ì£ = is_array($CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1654]]) ? json_encode_force($CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1654]]) : $CîíƒÜ®ëƒ[$d—•¿Õò¢Å[1654]]; write_log($d—•¿Õò¢Å[1660] . $C‹Õ‡ğ…Ç . $d—•¿Õò¢Å[1661] . $c…±é¯Ì£, $d—•¿Õò¢Å[1662]); } } $bùØè·áŒŞ = is_null($CÔÀßŒÛñ) ? $bùØè·áŒŞ : $CÔÀßŒÛñ; } goto A”ÚâÅ…‘Ç; D¸ÃË‰‹‰: } } class HttpAuth { public static function get() { $d£º…³“† =& $_SERVER[şÅ²é¤èİ]; $d‡ÚòŞ™›³ = $d£º…³“†[33]; $f±¡²Ôä É = $d£º…³“†[33]; if (isset($_SERVER[$d£º…³“†[1663]])) { $d‡ÚòŞ™›³ = $_SERVER[$d£º…³“†[1663]]; $f±¡²Ôä É = $_SERVER[$d£º…³“†[1664]]; } elseif (isset($_SERVER[$d£º…³“†[1665]])) { $cëƒ¿†³Ãò = $_SERVER[$d£º…³“†[1665]]; if (strpos(strtolower($cëƒ¿†³Ãò), $d£º…³“†[1666]) === 0) { $bÃ‹ğ„Í® = explode($d£º…³“†[4], base64_decode(substr($cëƒ¿†³Ãò, 6))); $d‡ÚòŞ™›³ = isset($bÃ‹ğ„Í®[0]) ? $bÃ‹ğ„Í®[0] : $d£º…³“†[33]; $f±¡²Ôä É = isset($bÃ‹ğ„Í®[1]) ? $bÃ‹ğ„Í®[1] : 0; } } return array($d£º…³“†[525] => $d‡ÚòŞ™›³, $d£º…³“†[898] => $f±¡²Ôä É); } public static function error() { goto BØñ½Ë²–”; cŸ…ŞØ†¬†: die; goto FÔŒ‹Ğ¿â±; BØñ½Ë²–”: $aõ·Ù­£¤… =& $_SERVER[şÅ²é¤èİ]; header($aõ·Ù­£¤…[1667]); header($aõ·Ù­£¤…[1668]); goto E¸íá§ø†æ; E¸íá§ø†æ: header($aõ·Ù­£¤…[1669]); header($aõ·Ù­£¤…[1670]); header($aõ·Ù­£¤…[1671]); goto cŸ…ŞØ†¬†; FÔŒ‹Ğ¿â±: } public static function make($EŸÈ«ˆñÚ³, $B­™øÕ¬‹) { $cÁ©¹ƒ†Ä =& $_SERVER[şÅ²é¤èİ]; return $cÁ©¹ƒ†Ä[1672] + base64_encode($EŸÈ«ˆñÚ³ . $cÁ©¹ƒ†Ä[4] . $B­™øÕ¬‹); } } class HttpDavClient { public function __construct($cïò¢£äÆ, $dŠ“ÊĞ¬”õ, $dÑ¸šŞò÷‘) { $this->header = array(); $this->userName = $dŠ“ÊĞ¬”õ; $this->userPassowrd = $dÑ¸šŞò÷‘; } protected function makePath($FÖµãİĞ…æ) { return $FÖµãİĞ…æ; } protected function setHeader($Aª“ŸÔ±Ú, $aí“³ßö‹ø = false) { if ($aí“³ßö‹ø === !1) { $this->header[] = $Aª“ŸÔ±Ú; } else { $this->header[] = $Aª“ŸÔ±Ú . $_SERVER[şÅ²é¤èİ][881] . $aí“³ßö‹ø; } } public function move($Aœ®¡»Š÷, $EÂ˜ò‡¼§œ, $cÄç»¨»ğ = '') { $a©Ê§ˆ…ãì =& $_SERVER[şÅ²é¤èİ]; $this->setHeader($a©Ê§ˆ…ãì[1673], $this->makePath($EÂ˜ò‡¼§œ)); $this->setHeader($a©Ê§ˆ…ãì[1674], $a©Ê§ˆ…ãì[1675]); if ($cÄç»¨»ğ) { $this->setHeader($a©Ê§ˆ…ãì[1676], $a©Ê§ˆ…ãì[926] . $cÄç»¨»ğ . $a©Ê§ˆ…ãì[929]); } return $this->send($a©Ê§ˆ…ãì[1677], $Aœ®¡»Š÷); } public function copy($FÑ¶òÛÚÛ», $BÄÌ§´ë®¡) { $aÕ­Ò¯½“  =& $_SERVER[şÅ²é¤èİ]; $this->setHeader($aÕ­Ò¯½“ [1673], $this->makePath($BÄÌ§´ë®¡)); $this->setHeader($aÕ­Ò¯½“ [1674], $aÕ­Ò¯½“ [1675]); return $this->send($aÕ­Ò¯½“ [1678], $FÑ¶òÛÚÛ»); } public function mkcol($F¨¢­§Î¨) { $e³¿ïŒ…Ûõ =& $_SERVER[şÅ²é¤èİ]; $this->setHeader($e³¿ïŒ…Ûõ[1674], $e³¿ïŒ…Ûõ[1675]); return $this->send($e³¿ïŒ…Ûõ[1679], $F¨¢­§Î¨); } public function delete($c‰õ’—ÚâÒ, $A×§‰Ó… = '') { $Aˆ³‹­—‰ =& $_SERVER[şÅ²é¤èİ]; if ($A×§‰Ó…) { $this->setHeader($Aˆ³‹­—‰[1676], $Aˆ³‹­—‰[926] . $A×§‰Ó… . $Aˆ³‹­—‰[929]); } return $this->send($Aˆ³‹­—‰[1680], $c‰õ’—ÚâÒ); } public function propfind($D°‚¸ŒÙë) { $c‰ä†ó–Ô‰ =& $_SERVER[şÅ²é¤èİ]; $this->setHeader($c‰ä†ó–Ô‰[1681], $c‰ä†ó–Ô‰[491]); $this->setHeader($c‰ä†ó–Ô‰[1682], $c‰ä†ó–Ô‰[1683]); $eÇÑ†ñïóå = $c‰ä†ó–Ô‰[1684]; return $this->send($c‰ä†ó–Ô‰[1685], $D°‚¸ŒÙë, $eÇÑ†ñïóå); } public function options($a†¢ ƒñ“í) { return $this->send($_SERVER[şÅ²é¤èİ][1686], $a†¢ ƒñ“í); } public function get($Fò†‚®ÌØ) { return $this->send($_SERVER[şÅ²é¤èİ][212], $Fò†‚®ÌØ); } public function put($dŒ£õŸ·Î•, $f³ÇåÇòÕ, $D®à¨æíÕ = '') { $dºˆÂßåĞÖ =& $_SERVER[şÅ²é¤èİ]; if ($D®à¨æíÕ) { $this->setHeader($dºˆÂßåĞÖ[1676], $dºˆÂßåĞÖ[926] . $D®à¨æíÕ . $dºˆÂßåĞÖ[929]); } return $this->send($dºˆÂßåĞÖ[210], $dŒ£õŸ·Î•, $f³ÇåÇòÕ); } protected function send($fƒ§İ§ÒÀê, $AìßˆëŠ¼î, $cáŠº›âÁ³ = false, $e…ºá‡÷Ì¥ = false) { goto b‚´±©÷; c¬ë¢ÜÑŞ§: $this->header = array(); return $F…²Ó””“‰; goto fçåÚ©ºæ‹; b‚´±©÷: $eÒ£ù‡«º =& $_SERVER[şÅ²é¤èİ]; $F–Ç–©Šà¡ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($eÒ£ù‡«º[1687], $eÒ£ù‡«º[50]); goto Bâí‰¿Ü¶; b‰ÛŞÂß½á: curl_setopt($Cº©â†‚Û, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($Cº©â†‚Û, CURLOPT_SSL_VERIFYHOST, !1); $F…²Ó””“‰ = curl_exec($Cº©â†‚Û); goto c¬ë¢ÜÑŞ§; aŸØ‚˜¨á¢: curl_setopt($Cº©â†‚Û, CURLOPT_HTTPHEADER, $this->header); curl_setopt($Cº©â†‚Û, CURLOPT_RETURNTRANSFER, !0); curl_setopt($Cº©â†‚Û, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto b‰ÛŞÂß½á; FÑ‘œ¾¦º: $Cº©â†‚Û = curl_init($AìßˆëŠ¼î); curl_setopt($Cº©â†‚Û, CURLOPT_CUSTOMREQUEST, $fƒ§İ§ÒÀê); curl_setopt($Cº©â†‚Û, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto aŸØ‚˜¨á¢; Bâí‰¿Ü¶: $this->setHeader($F–Ç–©Šà¡); if ($cáŠº›âÁ³) { $cáŠº›âÁ³ = $eÒ£ù‡«º[1688] . $cáŠº›âÁ³; } if (!request_url_safe($AìßˆëŠ¼î)) { return !1; } goto FÑ‘œ¾¦º; fçåÚ©ºæ‹: } } goto FäîÃ¹§˜; fÑÏ„«ï·„: class GroupModel extends ModelBase { protected $tableName = "\x67\x72\x6f\x75\160"; protected $tableMeta = array("\x74\x61\142\x6c\x65\x4e\x61\155\x65" => "\x67\162\x6f\165\x70\x5f\155\x65\x74\x61", "\x6d\x65\x74\x61\106\x69\145\x6c\144" => "\x67\x72\157\x75\160\x49\x44"); protected function cacheFunctionAlias($b©¸„á…‘) { $Aë´òãƒ± =& $_SERVER[şÅ²é¤èİ]; return array($Aë´òãƒ±[2079] => array($b©¸„á…‘[0], $Aë´òãƒ±[2080]), $Aë´òãƒ±[2081] => array($b©¸„á…‘[0], $Aë´òãƒ±[2080])); } protected function getInfo($eÛåŠ°ïÅ®) { $c…ë¹Ÿ±’Ÿ = $this->getInfoSimple($eÛåŠ°ïÅ®); if (!$c…ë¹Ÿ±’Ÿ) { return !1; } return $this->_listDataApplyItem($c…ë¹Ÿ±’Ÿ); } protected function getInfoSimple($C£¨Ú›ê†¿, $FõÎ²Çóõ = false) { $bÎˆ—î½‚— =& $_SERVER[şÅ²é¤èİ]; if ($FõÎ²Çóõ) { $d†”Ë¸¡Ú‚ = array($bÎˆ—î½‚—[2009] => intval($C£¨Ú›ê†¿)); return $this->where($d†”Ë¸¡Ú‚)->find(); } return $this->cacheFunctionGet($bÎˆ—î½‚—[2082], $C£¨Ú›ê†¿); } protected function groupAdd($d…÷½±İÅƒ) { goto bã•£Ş–Â; bã•£Ş–Â: $Dáî„“¥Õ =& $_SERVER[şÅ²é¤èİ]; if (!$d…÷½±İÅƒ[$Dáî„“¥Õ[454]] && isset($d…÷½±İÅƒ[$Dáî„“¥Õ[2009]]) && $d…÷½±İÅƒ[$Dáî„“¥Õ[2009]] == 1) { if ($F†™Í£³õŸ = $this->getInfoSimple($d…÷½±İÅƒ[$Dáî„“¥Õ[2009]], !0)) { return $d…÷½±İÅƒ[$Dáî„“¥Õ[2009]]; } } else { $F†™Í£³õŸ = $this->getInfoSimple($d…÷½±İÅƒ[$Dáî„“¥Õ[454]]); if (!$F†™Í£³õŸ) { return !1; } } $Bø­ÇÇ’´” = $Dáî„“¥Õ[2083]; goto Aáâ½å¨Ïà; dŞ«ƒÖÊ–º: $dÍ¯İ“‚ÛÈ = $this->add($d¼Ó›Ò†”¤); $this->setNamePinyin($dÍ¯İ“‚ÛÈ, $d¼Ó›Ò†”¤[$Dáî„“¥Õ[28]]); Model($Dáî„“¥Õ[1081])->groupRootAdd($dÍ¯İ“‚ÛÈ); goto cÅôªšÎÌÂ; Aáâ½å¨Ïà: if ($F†™Í£³õŸ[$Dáî„“¥Õ[452]]) { $Bø­ÇÇ’´” = $F†™Í£³õŸ[$Dáî„“¥Õ[452]] . $F†™Í£³õŸ[$Dáî„“¥Õ[2009]] . $Dáî„“¥Õ[47]; } $d¼Ó›Ò†”¤ = array($Dáî„“¥Õ[380] => $this->groupNameAuto($d…÷½±İÅƒ[$Dáî„“¥Õ[454]], $d…÷½±İÅƒ[$Dáî„“¥Õ[28]]), $Dáî„“¥Õ[362] => $d…÷½±İÅƒ[$Dáî„“¥Õ[454]], $Dáî„“¥Õ[516] => $Bø­ÇÇ’´”, $Dáî„“¥Õ[2084] => $d…÷½±İÅƒ[$Dáî„“¥Õ[1993]], $Dáî„“¥Õ[2085] => 0, $Dáî„“¥Õ[2013] => 0); if (!empty($d…÷½±İÅƒ[$Dáî„“¥Õ[2009]])) { $d¼Ó›Ò†”¤[$Dáî„“¥Õ[2009]] = $d…÷½±İÅƒ[$Dáî„“¥Õ[2009]]; } goto dŞ«ƒÖÊ–º; cÅôªšÎÌÂ: return $dÍ¯İ“‚ÛÈ; goto DïÜ·ƒŒ‹Ğ; DïÜ·ƒŒ‹Ğ: } protected function groupEdit($fğàÊßòî, $aÆÀó»Ş¯ñ) { $D™‡Ù‰àÙ =& $_SERVER[şÅ²é¤èİ]; if (!empty($aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[454]])) { $fä×»¯ÆáÑ = $this->getInfoSimple($fğàÊßòî); $E–¼á‘±¯ = $this->getInfoSimple($aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[454]]); if (!$fä×»¯ÆáÑ || !$E–¼á‘±¯) { return !1; } if ($aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[454]] != $fä×»¯ÆáÑ[$D™‡Ù‰àÙ[454]]) { if ($E–¼á‘±¯[$D™‡Ù‰àÙ[452]] !== $fä×»¯ÆáÑ[$D™‡Ù‰àÙ[452]] && strpos($E–¼á‘±¯[$D™‡Ù‰àÙ[452]], $fä×»¯ÆáÑ[$D™‡Ù‰àÙ[452]]) === 0) { return !1; } $aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[516]] = $E–¼á‘±¯[$D™‡Ù‰àÙ[452]] . $aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[454]] . $D™‡Ù‰àÙ[47]; $this->_changeChildLevel($fä×»¯ÆáÑ, $E–¼á‘±¯); } } if (isset($aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[28]])) { $this->setNamePinyin($fğàÊßòî, $aÆÀó»Ş¯ñ[$D™‡Ù‰àÙ[28]]); } return $this->where(array($D™‡Ù‰àÙ[2086] => $fğàÊßòî))->save($aÆÀó»Ş¯ñ); } private function _changeChildLevel($eÀ‰áàŸ…½, $FÎğÂŸğ§ƒ, $C¯ÃÊ‹¼Ú· = false) { goto A£”°­¿©; fîÍõ›ß«´: $this->where($a§–‚®¿‘‹)->data($Fù§é¢íÙÌ)->save(); goto BƒÑÂ‰ßØ«; A£”°­¿©: $b†Ä¡‰…™ğ =& $_SERVER[şÅ²é¤èİ]; $C‡í¬² “İ = $eÀ‰áàŸ…½[$b†Ä¡‰…™ğ[452]] . $eÀ‰áàŸ…½[$b†Ä¡‰…™ğ[2009]] . $b†Ä¡‰…™ğ[47]; $f…Î¿¼ƒÂŞ = $FÎğÂŸğ§ƒ[$b†Ä¡‰…™ğ[452]] . $FÎğÂŸğ§ƒ[$b†Ä¡‰…™ğ[2009]] . $b†Ä¡‰…™ğ[47] . $eÀ‰áàŸ…½[$b†Ä¡‰…™ğ[2009]] . $b†Ä¡‰…™ğ[47]; goto DÀÙ§´º; DÀÙ§´º: if ($C¯ÃÊ‹¼Ú·) { $f…Î¿¼ƒÂŞ = $FÎğÂŸğ§ƒ[$b†Ä¡‰…™ğ[452]] . $FÎğÂŸğ§ƒ[$b†Ä¡‰…™ğ[2009]] . $b†Ä¡‰…™ğ[47]; } $a§–‚®¿‘‹ = array($b†Ä¡‰…™ğ[516] => array($b†Ä¡‰…™ğ[473], $eÀ‰áàŸ…½[$b†Ä¡‰…™ğ[452]] . $eÀ‰áàŸ…½[$b†Ä¡‰…™ğ[2009]] . $b†Ä¡‰…™ğ[474])); $Fù§é¢íÙÌ = array($b†Ä¡‰…™ğ[516] => array($b†Ä¡‰…™ğ[524], "\x72\x65\x70\154\141\x63\x65\x28\160\141\162\145\x6e\164\x4c\145\x76\x65\154\54\47{$C‡í¬² “İ}\x27\x2c\x27{$f…Î¿¼ƒÂŞ}\47\x29")); goto fîÍõ›ß«´; BƒÑÂ‰ßØ«: } public function setNamePinyin($BÙ˜†ö¡¸ï, $e¬áßÈ£Ò = false) { $cğ¸§Õğö• =& $_SERVER[şÅ²é¤èİ]; if (!$e¬áßÈ£Ò) { $E©Õ’š²ù• = $this->getInfoSimple($BÙ˜†ö¡¸ï); $e¬áßÈ£Ò = $E©Õ’š²ù•[$cğ¸§Õğö•[28]]; } if (!Input::check($e¬áßÈ£Ò, $cğ¸§Õğö•[518])) { $this->metaSet($BÙ˜†ö¡¸ï, $cğ¸§Õğö•[409], null); $this->metaSet($BÙ˜†ö¡¸ï, $cğ¸§Õğö•[408], null); return; } $e•Â°‚Œ = array($cğ¸§Õğö•[409] => str_replace($cğ¸§Õğö•[50], $cğ¸§Õğö•[33], Pinyin::encode($e¬áßÈ£Ò)), $cğ¸§Õğö•[408] => Pinyin::encode($e¬áßÈ£Ò, $cğ¸§Õğö•[519])); $this->metaSet($BÙ˜†ö¡¸ï, $e•Â°‚Œ); } protected function groupRemove($fğ¤ìõÙÜÙ) { goto bÇŸë¡; dãˆÕ¹ÃàĞ: if (!$A‚ Å¿å¢¸ || $A‚ Å¿å¢¸[$E¶ŠÀ¤‚Ö[454]] == 0) { return !1; } $aÇ—º“œ„‰ = $this->getInfoSimple($A‚ Å¿å¢¸[$E¶ŠÀ¤‚Ö[454]]); $this->_changeChildLevel($A‚ Å¿å¢¸, $aÇ—º“œ„‰, !0); goto E×£ÅÆ³ä›; bô­Ñ†“¹: Model($E¶ŠÀ¤‚Ö[755])->groupRootRemove($fğ¤ìõÙÜÙ); return $this->where($BÇØ¯Ú“È”)->delete(); goto e¸´âºÇê‚; bÇŸë¡: $E¶ŠÀ¤‚Ö =& $_SERVER[şÅ²é¤èİ]; $BÇØ¯Ú“È” = array($E¶ŠÀ¤‚Ö[2009] => $fğ¤ìõÙÜÙ); $A‚ Å¿å¢¸ = $this->where($BÇØ¯Ú“È”)->find(); goto dãˆÕ¹ÃàĞ; E×£ÅÆ³ä›: $this->where(array($E¶ŠÀ¤‚Ö[454] => $fğ¤ìõÙÜÙ))->save(array($E¶ŠÀ¤‚Ö[454] => $A‚ Å¿å¢¸[$E¶ŠÀ¤‚Ö[454]])); Model($E¶ŠÀ¤‚Ö[2087])->where($BÇØ¯Ú“È”)->delete(); Model($E¶ŠÀ¤‚Ö[2088])->where($BÇØ¯Ú“È”)->delete(); goto bô­Ñ†“¹; e¸´âºÇê‚: } public function listData() { $EÆÄØ’÷·Ú = $this->_makeOrder()->selectPage(50); $this->_listDataApply($EÆÄØ’÷·Ú[$_SERVER[şÅ²é¤èİ][347]]); return $EÆÄØ’÷·Ú; } private function _makeOrder($B È›ãÕô¢ = '') { goto E™¿¡’÷÷­; D‘‘ÌêÀ¯: $E»ŒÈ½ÃàÄ = Input::get($c‹š¶†˜µ[400], $c‹š¶†˜µ[7], $c‹š¶†˜µ[2086], $B‚Ì¤º»ö‚); $D­®İì›îŠ = Input::get($c‹š¶†˜µ[401], $c‹š¶†˜µ[7], $c‹š¶†˜µ[2089], array($c‹š¶†˜µ[2089], $c‹š¶†˜µ[397])); $D­®İì›îŠ = $b¥—µŠ½®[$D­®İì›îŠ]; goto f‡ÂÑ½°ò; f‡ÂÑ½°ò: $B È›ãÕô¢ = $B È›ãÕô¢ . "{$E»ŒÈ½ÃàÄ}\x20{$D­®İì›îŠ}\54\x20\147\162\x6f\x75\x70\111\104\x20\141\x73\x63"; return $this->order($B È›ãÕô¢); goto d´ç½å´ò; E™¿¡’÷÷­: $c‹š¶†˜µ =& $_SERVER[şÅ²é¤èİ]; $B‚Ì¤º»ö‚ = array($c‹š¶†˜µ[2009], $c‹š¶†˜µ[28], $c‹š¶†˜µ[1995], $c‹š¶†˜µ[183]); $b¥—µŠ½® = array($c‹š¶†˜µ[395] => $c‹š¶†˜µ[396], $c‹š¶†˜µ[397] => $c‹š¶†˜µ[398]); goto D‘‘ÌêÀ¯; d´ç½å´ò: } public function listChild($BŞÍ‹ì÷çØ) { $bÆİ¼ÓÄ£Œ =& $_SERVER[şÅ²é¤èİ]; $e›âµªÑğ¿ = $this->where(array($bÆİ¼ÓÄ£Œ[454] => $BŞÍ‹ì÷çØ))->_makeOrder()->selectPage(200); $this->_listDataApply($e›âµªÑğ¿[$bÆİ¼ÓÄ£Œ[347]]); return $e›âµªÑğ¿; } public function listByID($Dƒ§÷‘Œ™ß) { $A°…­èŒÄõ =& $_SERVER[şÅ²é¤èİ]; if (!$Dƒ§÷‘Œ™ß) { return array(); } $A“÷ƒÂ§äç = array($A°…­èŒÄõ[2009] => array($A°…­èŒÄõ[7], $Dƒ§÷‘Œ™ß)); $EƒØ¥ÀÓ‡ = $this->where($A“÷ƒÂ§äç)->select(); $this->_listDataApply($EƒØ¥ÀÓ‡); return $EƒØ¥ÀÓ‡; } public function listSearch($A†àÚ…¹Ë) { goto bÁË¢˜¦Ò; d–÷Ş²õÇ: if (!trim($eÉÆÕ¥à£”)) { return !1; } $eÉÆÕ¥à£” = str_replace($EÊµö§¢÷ß[2092], $EÊµö§¢÷ß[2093], $eÉÆÕ¥à£”); $d›¯§á¶Æ = array($EÊµö§¢÷ß[2009] => array($EÊµö§¢÷ß[754], "\x25{$eÉÆÕ¥à£”}\45"), $EÊµö§¢÷ß[28] => array($EÊµö§¢÷ß[754], "\x25{$eÉÆÕ¥à£”}\x25"), $EÊµö§¢÷ß[915] => $EÊµö§¢÷ß[2094]); goto fˆ¯Êåç; f±Åâä»ÄĞ: $this->_listDataApply($F‹îÍÜ­á[$EÊµö§¢÷ß[347]]); return $F‹îÍÜ­á; goto DËµñã´Î”; fˆ¯Êåç: $F‹îÍÜ­á = $this->_makeOrder()->where($d›¯§á¶Æ)->selectPage(20); $F‹îÍÜ­á = $F‹îÍÜ­á ? $F‹îÍÜ­á : array(); if (!$F‹îÍÜ­á || count($F‹îÍÜ­á[$EÊµö§¢÷ß[347]]) < 5 && Input::check($eÉÆÕ¥à£”, $EÊµö§¢÷ß[300])) { $DÇƒø·ë™ä = $this->_searchFromMeta($EÊµö§¢÷ß[408], $eÉÆÕ¥à£”, 10); $d¾Ø‹Û‚å¯ = $this->_searchFromMeta($EÊµö§¢÷ß[409], $eÉÆÕ¥à£”, 10); $DÅ½Î¢äêÅ = array_merge($DÇƒø·ë™ä, $d¾Ø‹Û‚å¯, $F‹îÍÜ­á[$EÊµö§¢÷ß[347]]); $F‹îÍÜ­á[$EÊµö§¢÷ß[347]] = array_unique_by_key($DÅ½Î¢äêÅ, $EÊµö§¢÷ß[2009]); $F‹îÍÜ­á[$EÊµö§¢÷ß[344]][$EÊµö§¢÷ß[345]] = count($F‹îÍÜ­á[$EÊµö§¢÷ß[347]]); $F‹îÍÜ­á[$EÊµö§¢÷ß[344]][$EÊµö§¢÷ß[346]] = ceil($F‹îÍÜ­á[$EÊµö§¢÷ß[344]][$EÊµö§¢÷ß[345]] / $F‹îÍÜ­á[$EÊµö§¢÷ß[344]][$EÊµö§¢÷ß[342]]); } goto f±Åâä»ÄĞ; bÁË¢˜¦Ò: $EÊµö§¢÷ß =& $_SERVER[şÅ²é¤èİ]; $eÉÆÕ¥à£” = $A†àÚ…¹Ë[$EÊµö§¢÷ß[2090]]; $cçñà©¦¬Ô = isset($A†àÚ…¹Ë[$EÊµö§¢÷ß[2091]]) ? $A†àÚ…¹Ë[$EÊµö§¢÷ß[2091]] : !1; goto d–÷Ş²õÇ; DËµñã´Î”: } private function _searchFromMeta($dÃ´Î†¦ˆŒ, $dî–ØƒçÕİ, $c…•ÏšÔùœ) { goto bÌºÑê÷ùî; cÉ¸Ìª÷£à: $E†ìß‰Çñ = $this->where(array($fà‹Åˆ‡òŠ[2086] => array($fà‹Åˆ‡òŠ[7], $Bù„–ëøŒà)))->select(); if (!$E†ìß‰Çñ) { return array(); } return $E†ìß‰Çñ; goto E‹ğêŠÛÂù; CŒæƒóÀãÅ: $Bù„–ëøŒà = Model($fà‹Åˆ‡òŠ[2095])->where($DÙ‡ªšÇòÜ)->limit($c…•ÏšÔùœ)->select(); if (!$Bù„–ëøŒà) { return array(); } $Bù„–ëøŒà = array_to_keyvalue($Bù„–ëøŒà, $fà‹Åˆ‡òŠ[33], $fà‹Åˆ‡òŠ[2009]); goto cÉ¸Ìª÷£à; bÌºÑê÷ùî: $fà‹Åˆ‡òŠ =& $_SERVER[şÅ²é¤èİ]; $dî–ØƒçÕİ = strtolower($dî–ØƒçÕİ); $DÙ‡ªšÇòÜ = array($fà‹Åˆ‡òŠ[88] => $dÃ´Î†¦ˆŒ, $fà‹Åˆ‡òŠ[351] => array($fà‹Åˆ‡òŠ[754], "\45{$dî–ØƒçÕİ}\x25")); goto CŒæƒóÀãÅ; E‹ğêŠÛÂù: } protected function _listDataApplyItem($cÕöœ»¤) { $c®İÏ®Á‰Å = array($cÕöœ»¤); $this->_listDataApply($c®İÏ®Á‰Å); return $c®İÏ®Á‰Å[0]; } protected function _listDataApply(&$FÙ´‚ëŠ×) { goto FÈ·‹ê¨å¥; D‹ö÷é“Â: $this->_listAppendChildren($FÙ´‚ëŠ×); $this->_listAppendChildrenMember($FÙ´‚ëŠ×); $this->_listAppendMeta($FÙ´‚ëŠ×, $FøÈ…á¶); goto Föõ×±Ğ†Ó; Föõ×±Ğ†Ó: $this->_listAppendParent($FÙ´‚ëŠ×); $this->_listAppendSourceRoot($FÙ´‚ëŠ×, $FøÈ…á¶); goto bï°ÔÚÉ«ç; FÈ·‹ê¨å¥: $EãßÃä©÷¬ =& $_SERVER[şÅ²é¤èİ]; if (!$FÙ´‚ëŠ×) { return; } $FøÈ…á¶ = array_to_keyvalue($FÙ´‚ëŠ×, $EãßÃä©÷¬[33], $EãßÃä©÷¬[2009]); goto D‹ö÷é“Â; bï°ÔÚÉ«ç: } private function _listAppendChildren(&$cÈßç˜¨‰î) { goto eˆ×·À–ĞÕ; f©®‰ô¿‚: $eèè‰ĞÍì­ = count($cÈßç˜¨‰î); $B£¶˜É£Ä› = $this->tablePrefix . $this->tableName; for ($c²ÆÒõ”› = 0, $d—‚Ñù¶åÎ = 0; $c²ÆÒõ”› < $eèè‰ĞÍì­; $c²ÆÒõ”›++) { $d—‚Ñù¶åÎ++; $A„„–öÉÜ = $cÈßç˜¨‰î[$c²ÆÒõ”›][$aˆâÒ‚ŠÖÃ[2009]]; $eç—‹ì¥ÃÇ .= "\x53\105\114\105\x43\124\x20\x2a\x20\106\122\117\115\x20\50\123\105\114\x45\x43\x54\40\47{$A„„–öÉÜ}\137\143\150\151\154\x64\x27\x20\x61\x73\x20\150\141\163\x20\106\x52\x4f\115\40\x60{$B£¶˜É£Ä›}\x60\x20\x77\150\145\162\x65\40\160\x61\x72\145\156\x74\x49\x44\x3d{$A„„–öÉÜ}\x20\x6c\x69\155\x69\x74\40\x31\51\40\x61\163\40\164\x62\137{$A„„–öÉÜ}\40\x75\x6e\151\157\x6e\x20\x61\154\154\40"; if (($d—‚Ñù¶åÎ >= 20 || $c²ÆÒõ”› == $eèè‰ĞÍì­ - 1) && $eç—‹ì¥ÃÇ) { $eç—‹ì¥ÃÇ = substr($eç—‹ì¥ÃÇ, 0, -strlen($aˆâÒ‚ŠÖÃ[442])); $Aµ¶ğÆ×ù† = $this->query($eç—‹ì¥ÃÇ); $AòÚáÈÛ = array_merge($AòÚáÈÛ, $Aµ¶ğÆ×ù†); $d—‚Ñù¶åÎ = 0; $eç—‹ì¥ÃÇ = $aˆâÒ‚ŠÖÃ[33]; } } goto E´öƒ¤Ù; eˆ×·À–ĞÕ: $aˆâÒ‚ŠÖÃ =& $_SERVER[şÅ²é¤èİ]; $eç—‹ì¥ÃÇ = $aˆâÒ‚ŠÖÃ[355]; $AòÚáÈÛ = array(); goto f©®‰ô¿‚; E´öƒ¤Ù: $AòÚáÈÛ = array_to_keyvalue($AòÚáÈÛ, $aˆâÒ‚ŠÖÃ[443]); foreach ($cÈßç˜¨‰î as &$dëŒ„ñ¸­°) { $dëŒ„ñ¸­°[$aˆâÒ‚ŠÖÃ[2096]] = isset($AòÚáÈÛ[$dëŒ„ñ¸­°[$aˆâÒ‚ŠÖÃ[2009]] . $aˆâÒ‚ŠÖÃ[2097]]); } goto cÀù‚‰‡ëÎ; cÀù‚‰‡ëÎ: } private function _listAppendChildrenMember(&$D¦¸Ä²šØ¯) { goto F±‡„‘¯ÓÜ; F±‡„‘¯ÓÜ: $FÒ¡ ÚÙ”Ó =& $_SERVER[şÅ²é¤èİ]; $d¶®£ÑóŠ„ = $FÒ¡ ÚÙ”Ó[355]; $c»‘¬›òÈƒ = array(); goto FÃõœÚ’èÀ; FÃõœÚ’èÀ: $fòˆÈç™Œ‰ = count($D¦¸Ä²šØ¯); $A„Ì×Àä·– = $this->tablePrefix . $FÒ¡ ÚÙ”Ó[2088]; for ($bß¥Ä‡‰¨ø = 0, $Aá–«İ£¡Æ = 0; $bß¥Ä‡‰¨ø < $fòˆÈç™Œ‰; $bß¥Ä‡‰¨ø++) { $Aá–«İ£¡Æ++; $E“øŒ—“¸ = $D¦¸Ä²šØ¯[$bß¥Ä‡‰¨ø][$FÒ¡ ÚÙ”Ó[2009]]; $d¶®£ÑóŠ„ .= "\123\x45\114\105\103\x54\40\52\x20\x46\x52\117\x4d\40\50\x53\105\x4c\x45\x43\124\40\x27{$E“øŒ—“¸}\x5f\x63\x68\x69\x6c\144\47\40\x61\163\40\150\141\x73\40\106\x52\117\115\x20\140{$A„Ì×Àä·–}\140\x20\x77\150\145\x72\x65\x20\x67\x72\x6f\x75\160\x49\x44\x3d{$E“øŒ—“¸}\40\154\x69\x6d\151\x74\40\x31\51\40\141\163\x20\x74\142\x5f{$E“øŒ—“¸}\40\x75\156\151\x6f\156\x20\x61\x6c\154\x20"; if (($Aá–«İ£¡Æ >= 20 || $bß¥Ä‡‰¨ø == $fòˆÈç™Œ‰ - 1) && $d¶®£ÑóŠ„) { $d¶®£ÑóŠ„ = substr($d¶®£ÑóŠ„, 0, -strlen($FÒ¡ ÚÙ”Ó[442])); $d÷ŠÑ¸§÷ = $this->query($d¶®£ÑóŠ„); $c»‘¬›òÈƒ = array_merge($c»‘¬›òÈƒ, $d÷ŠÑ¸§÷); $Aá–«İ£¡Æ = 0; $d¶®£ÑóŠ„ = $FÒ¡ ÚÙ”Ó[33]; } } goto A¶–¹ªæ; A¶–¹ªæ: $c»‘¬›òÈƒ = array_to_keyvalue($c»‘¬›òÈƒ, $FÒ¡ ÚÙ”Ó[443]); foreach ($D¦¸Ä²šØ¯ as &$A”ô‹ÍÆÊË) { $A”ô‹ÍÆÊË[$FÒ¡ ÚÙ”Ó[2098]] = isset($c»‘¬›òÈƒ[$A”ô‹ÍÆÊË[$FÒ¡ ÚÙ”Ó[2009]] . $FÒ¡ ÚÙ”Ó[2097]]); } goto dğÓ¦„óÖ›; dğÓ¦„óÖ›: } private function _listAppendMeta(&$fË–ßÕŠä, $dºÈ´®®íĞ) { $e’â‹‰ØöÙ =& $_SERVER[şÅ²é¤èİ]; $aùòŸÔŸÈ = array($e’â‹‰ØöÙ[2009] => array($e’â‹‰ØöÙ[7], $dºÈ´®®íĞ)); $Dø®Œø÷è = Model($e’â‹‰ØöÙ[2087])->where($aùòŸÔŸÈ)->select(); $Dø®Œø÷è = array_to_keyvalue_group($Dø®Œø÷è, $e’â‹‰ØöÙ[2009]); foreach ($Dø®Œø÷è as &$b¾§äµÅÉ) { $b¾§äµÅÉ = array_to_keyvalue($b¾§äµÅÉ, $e’â‹‰ØöÙ[88], $e’â‹‰ØöÙ[351]); } foreach ($fË–ßÕŠä as &$F¡ôï©·µë) { $F¡ôï©·µë[$e’â‹‰ØöÙ[410]] = array(); if (isset($Dø®Œø÷è[$F¡ôï©·µë[$e’â‹‰ØöÙ[2009]]])) { $F¡ôï©·µë[$e’â‹‰ØöÙ[410]] = $Dø®Œø÷è[$F¡ôï©·µë[$e’â‹‰ØöÙ[2009]]]; } } } protected function parentLevelArray($BÆÕùÌôÑ) { $d²”¥§˜áø =& $_SERVER[şÅ²é¤èİ]; $BÆÕùÌôÑ = explode($d²”¥§˜áø[47], trim($BÆÕùÌôÑ, $d²”¥§˜áø[47])); $BÆÕùÌôÑ = array_remove_value($BÆÕùÌôÑ, $d²”¥§˜áø[461]); return $BÆÕùÌôÑ; } private function _listAppendParent(&$e™³í¥…Û) { goto F¼‰Õ¼ôÊ×; F¼‰Õ¼ôÊ×: $E‹õ±İ™¡ô =& $_SERVER[şÅ²é¤èİ]; $FÅ½–‹´ƒå = array(); foreach ($e™³í¥…Û as &$bå°ÁèãÒ¯) { $FÅ½–‹´ƒå[$bå°ÁèãÒ¯[$E‹õ±İ™¡ô[2009]]] = $bå°ÁèãÒ¯[$E‹õ±İ™¡ô[28]]; $eˆÔ’·çšÙ = $this->parentLevelArray($bå°ÁèãÒ¯[$E‹õ±İ™¡ô[452]]); foreach ($eˆÔ’·çšÙ as $A²ëÈˆöğ) { if (!isset($FÅ½–‹´ƒå[$A²ëÈˆöğ])) { $FÅ½–‹´ƒå[$A²ëÈˆöğ] = 0; } } } goto eÓùÈ¿»‘¾; eÓùÈ¿»‘¾: $EÕ‹†Û–İá = array(); foreach ($FÅ½–‹´ƒå as $eŸ·Œ¤Ø¨ë => $fŒŸ†”Åâò) { if (!$fŒŸ†”Åâò) { $EÕ‹†Û–İá[] = $eŸ·Œ¤Ø¨ë; } } if ($EÕ‹†Û–İá) { $f®•Àíéğ = array($E‹õ±İ™¡ô[2086] => array($E‹õ±İ™¡ô[378], $EÕ‹†Û–İá)); $E—¨ÆšÊ’¶ = $this->field($E‹õ±İ™¡ô[2099])->where($f®•Àíéğ)->select(); $f‰‰çø¸Éƒ = array_to_keyvalue($E—¨ÆšÊ’¶, $E‹õ±İ™¡ô[2009], $E‹õ±İ™¡ô[28]); $FÅ½–‹´ƒå = array_merge_index($FÅ½–‹´ƒå, $f‰‰çø¸Éƒ); } goto a‰¥×Û™Ãç; a‰¥×Û™Ãç: foreach ($e™³í¥…Û as &$bå°ÁèãÒ¯) { $eˆÔ’·çšÙ = $this->parentLevelArray($bå°ÁèãÒ¯[$E‹õ±İ™¡ô[452]]); $dˆæÌ¶§Ú‚ = $E‹õ±İ™¡ô[33]; foreach ($eˆÔ’·çšÙ as $A²ëÈˆöğ) { $dˆæÌ¶§Ú‚ .= $FÅ½–‹´ƒå[$A²ëÈˆöğ] . $E‹õ±İ™¡ô[8]; } if ($eˆÔ’·çšÙ) { $dˆæÌ¶§Ú‚ .= $bå°ÁèãÒ¯[$E‹õ±İ™¡ô[28]]; } $bå°ÁèãÒ¯[$E‹õ±İ™¡ô[456]] = str_replace($E‹õ±İ™¡ô[460], $E‹õ±İ™¡ô[8], $dˆæÌ¶§Ú‚); } goto b°©èÆÏÇÁ; b°©èÆÏÇÁ: } private function _listAppendSourceRoot(&$aÔ–‚Ö…™×, $dºàÍ·Æó›) { goto A”ƒ‚¢ù¼Ú; A”ƒ‚¢ù¼Ú: $F¡³Ø‚®šÃ =& $_SERVER[şÅ²é¤èİ]; $A…ïˆ„Îˆ  = array($F¡³Ø‚®šÃ[365] => SourceModel::TYPE_GROUP, $F¡³Ø‚®šÃ[454] => 0, $F¡³Ø‚®šÃ[449] => array($F¡³Ø‚®šÃ[7], $dºàÍ·Æó›)); $cÓÆÖÂèÍˆ = $F¡³Ø‚®šÃ[2100]; goto Dê¯Á£ğäñ; Dê¯Á£ğäñ: $CÌ­“îÉ˜Í = Model($F¡³Ø‚®šÃ[755])->order($F¡³Ø‚®šÃ[2101])->field($cÓÆÖÂèÍˆ)->where($A…ïˆ„Îˆ )->select(); $CÌ­“îÉ˜Í = array_to_keyvalue($CÌ­“îÉ˜Í, $F¡³Ø‚®šÃ[449]); $CÌ­“îÉ˜Í = array_remove_key($CÌ­“îÉ˜Í, $F¡³Ø‚®šÃ[449]); goto Aî²”‡á; Aî²”‡á: foreach ($aÔ–‚Ö…™× as &$dè¼…‘¦’§) { $dè¼…‘¦’§[$F¡³Ø‚®šÃ[385]] = $CÌ­“îÉ˜Í[$dè¼…‘¦’§[$F¡³Ø‚®šÃ[2009]]] ? $CÌ­“îÉ˜Í[$dè¼…‘¦’§[$F¡³Ø‚®šÃ[2009]]] : array(); } goto bïÌÅ”Ø¦; bïÌÅ”Ø¦: } protected function resetParentLevel() { $Aâè½›¡ =& $_SERVER[şÅ²é¤èİ]; $C†øœñäÊğ = $Aâè½›¡[2009]; $eŞØ‡“Œ = $this->select(); $eŞØ‡“Œ = array_to_keyvalue($eŞØ‡“Œ, $C†øœñäÊğ); foreach ($eŞØ‡“Œ as $C¨Âíô±Ø‰) { goto Cé…ËÓæ¤; Cé…ËÓæ¤: $EäêÒ¦ôˆó = $C¨Âíô±Ø‰; $c£õŠ°İ = array(); while ($EäêÒ¦ôˆó[$Aâè½›¡[454]] != 0) { $c£õŠ°İ[] = $EäêÒ¦ôˆó[$Aâè½›¡[454]]; $EäêÒ¦ôˆó = $eŞØ‡“Œ[$EäêÒ¦ôˆó[$Aâè½›¡[454]]]; } goto E¦Éˆ™«Šö; E±Ô¼…™®ù: $this->where(array($C†øœñäÊğ => $C¨Âíô±Ø‰[$C†øœñäÊğ]))->save(array($Aâè½›¡[516] => $c£õŠ°İ)); goto bñù¢õ’ù¥; E¦Éˆ™«Šö: $c£õŠ°İ[] = 0; $c£õŠ°İ = $Aâè½›¡[47] . implode($Aâè½›¡[47], array_reverse($c£õŠ°İ)) . $Aâè½›¡[47]; $this->setNamePinyin($C¨Âíô±Ø‰[$C†øœñäÊğ], $C¨Âíô±Ø‰[$Aâè½›¡[28]]); goto E±Ô¼…™®ù; bñù¢õ’ù¥: } return $eŞØ‡“Œ; } public function groupNameAuto($D¡©æ·È¿–, $b´ë†íêÎî) { $EãáĞ­ÅòĞ =& $_SERVER[şÅ²é¤èİ]; $c‰÷Ùä½½ = $this->where(array($EãáĞ­ÅòĞ[362] => $D¡©æ·È¿–))->getField($EãáĞ­ÅòĞ[28], !0); if (!$c‰÷Ùä½½ || !in_array($b´ë†íêÎî, $c‰÷Ùä½½)) { return $b´ë†íêÎî; } for ($BæÕç—© = 1; $BæÕç—© <= count($c‰÷Ùä½½) + 1; $BæÕç—©++) { $B¸¿‘†ô† = $b´ë†íêÎî . "\x28{$BæÕç—©}\x29"; if (!in_array($B¸¿‘†ô†, $c‰÷Ùä½½)) { return $B¸¿‘†ô†; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\x6d\56\160\x6c\165\147\151\x6e\x4c\151\x73\164"; public $field = array("\156\x61\x6d\145", "\163\x74\x61\x74\165\x73", "\x72\x65\147\x69\145\163\164", "\x63\x6f\x6e\x66\151\147"); public function loadList($CÒñ•¥ÌÔ£ = false) { $F…º¿­îºš = array_to_keyvalue($this->listData(), $_SERVER[şÅ²é¤èİ][28]); if ($CÒñ•¥ÌÔ£) { return $F…º¿­îºš[$CÒñ•¥ÌÔ£]; } return $F…º¿­îºš; } public function init() { $B¦„Òªİ¾ö =& $_SERVER[şÅ²é¤èİ]; Hook::trigger($B¦„Òªİ¾ö[2102]); $c›ÇóÛ„ó = $this->loadPluginList(); foreach ($c›ÇóÛ„ó as $Ašô¡Â¹¯è => $A‚«˜Üñ¯£) { $D·É²È°Ï = $this->appAllow($Ašô¡Â¹¯è, $A‚«˜Üñ¯£); if (!$D·É²È°Ï) { continue; } foreach ($A‚«˜Üñ¯£[$B¦„Òªİ¾ö[2103]] as $eÃÉ‡¯¼ => $b– çÈ—Ç) { Hook::bind($eÃÉ‡¯¼, $b– çÈ—Ç); } } Hook::trigger($B¦„Òªİ¾ö[2104]); Hook::trigger(ACTION); } public function appAllow($AË‰›’š°, $E·¦ä¹Áƒ, $D­İ½À™˜Ÿ = true) { $A¸Ûº¾ƒÙ =& $_SERVER[şÅ²é¤èİ]; $D¾«äøÛ°š = PLUGIN_DIR . $AË‰›’š° . $A¸Ûº¾ƒÙ[2105]; if (!is_array($E·¦ä¹Áƒ) || !is_array($E·¦ä¹Áƒ[$A¸Ûº¾ƒÙ[2103]]) || !is_file($D¾«äøÛ°š) || $E·¦ä¹Áƒ[$A¸Ûº¾ƒÙ[682]] != 1) { return !1; } if ($D­İ½À™˜Ÿ && !Action($A¸Ûº¾ƒÙ[2106])->checkAuth($AË‰›’š°)) { return !1; } return !0; } public function unInstall($dÊ•‹•ªß†) { $BŒ£ƒ”ğæÚ =& $_SERVER[şÅ²é¤èİ]; $BšÇ¦„‚É¿ = $this->loadList($dÊ•‹•ªß†); if (file_exists(PLUGIN_DIR . $dÊ•‹•ªß†)) { Hook::apply($dÊ•‹•ªß† . $BŒ£ƒ”ğæÚ[2107]); } $this->remove($BšÇ¦„‚É¿[$BŒ£ƒ”ğæÚ[361]]); } public function changeStatus($a²ƒ‡ğ½­±, $EøÀƒ…Ï™Š) { $C¬ô¡º¸ŸÓ =& $_SERVER[şÅ²é¤èİ]; $Cà³Å…éô˜ = $this->loadList($a²ƒ‡ğ½­±); if ($EøÀƒ…Ï™Š) { Hook::apply($a²ƒ‡ğ½­± . $C¬ô¡º¸ŸÓ[2108]); } $this->update($Cà³Å…éô˜[$C¬ô¡º¸ŸÓ[361]], array($C¬ô¡º¸ŸÓ[2109] => $EøÀƒ…Ï™Š)); } public function appRegist($d˜£îèÃï—, $EÙÓùßšÈö) { $BãÍöìÃè =& $_SERVER[şÅ²é¤èİ]; $eÖ†±¸ñ­Œ = $this->loadList($d˜£îèÃï—); if ($eÖ†±¸ñ­Œ) { $this->update($eÖ†±¸ñ­Œ[$BãÍöìÃè[361]], array($BãÍöìÃè[2103] => $EÙÓùßšÈö)); } else { $A·øâ³šÏš = array($BãÍöìÃè[28] => $d˜£îèÃï—, $BãÍöìÃè[2103] => $EÙÓùßšÈö, $BãÍöìÃè[682] => 0, $BãÍöìÃè[6] => $this->getConfigDefault($d˜£îèÃï—)); $this->insert($A·øâ³šÏš); } } public function getConfigDefault($E¢¾Á§Œ²) { $Bñ²êßœƒ… =& $_SERVER[şÅ²é¤èİ]; $d©ºğ¯³Á = array(); $fİ‰‚øËÏ‡ = $this->getPackageJson($E¢¾Á§Œ²); if (!$fİ‰‚øËÏ‡ && is_array($fİ‰‚øËÏ‡[$Bñ²êßœƒ…[2110]])) { return $d©ºğ¯³Á; } foreach ($fİ‰‚øËÏ‡[$Bñ²êßœƒ…[2110]] as $E ÇÛõó÷ => $bÈ²ù²ªº«) { if (!isset($bÈ²ù²ªº«[$Bñ²êßœƒ…[351]]) || isset($d©ºğ¯³Á[$E ÇÛõó÷])) { continue; } $d©ºğ¯³Á[$E ÇÛõó÷] = $bÈ²ù²ªº«[$Bñ²êßœƒ…[351]]; } return $d©ºğ¯³Á; } public function getPackageJson($C„ëë®¾‚Ğ) { return Hook::apply($C„ëë®¾‚Ğ . $_SERVER[şÅ²é¤èİ][2111]); } public function getConfig($díæ‘ğ†ò, $Dù«‚Â¹‰ = false) { $e£ô’ˆ®«Â =& $_SERVER[şÅ²é¤èİ]; $Bù…åÇ± = array(); $aòÃ‘íÌ©í = $this->loadList($díæ‘ğ†ò); if ($aòÃ‘íÌ©í && is_array($aòÃ‘íÌ©í[$e£ô’ˆ®«Â[6]])) { $Bù…åÇ± = $aòÃ‘íÌ©í[$e£ô’ˆ®«Â[6]]; } if (!$Bù…åÇ± || $Dù«‚Â¹‰) { $Bù…åÇ± = $this->getConfigDefault($díæ‘ğ†ò); } return $Bù…åÇ±; } public function setConfig($A›²›°“, $eóî‰¥Ö¿Å = false) { goto Aª°¡âù; Aª°¡âù: $B•áãŒãÄ³ =& $_SERVER[şÅ²é¤èİ]; $d’©ô¯ = $this->loadList($A›²›°“); if (!$d’©ô¯) { return !1; } goto D¬Ö™§œõ; fÏôêÆæç: $this->update($d’©ô¯[$B•áãŒãÄ³[361]], array($B•áãŒãÄ³[6] => $c»ºÁÅ®½)); goto CÇ¾ØˆÇñ; D¬Ö™§œõ: if ($eóî‰¥Ö¿Å == !1) { $eóî‰¥Ö¿Å = $this->getConfigDefault($A›²›°“); } $c»ºÁÅ®½ = $d’©ô¯[$B•áãŒãÄ³[6]]; foreach ($eóî‰¥Ö¿Å as $B˜Ş¡ÓÆºë => $E‡‰·«”‘) { $c»ºÁÅ®½[$B˜Ş¡ÓÆºë] = is_string($E‡‰·«”‘) ? trim($E‡‰·«”‘) : $E‡‰·«”‘; } goto fÏôêÆæç; CÇ¾ØˆÇñ: } public function viewList() { goto e¡Æøé„; e¡Æøé„: $DÖŒ¯‘ ˆË =& $_SERVER[şÅ²é¤èİ]; $DÎĞ¶´±î… = $this->loadList(); $this->pluginScan($DÎĞ¶´±î…); goto BÆ­¶×˜¾¼; BÆ­¶×˜¾¼: $DÎĞ¶´±î… = $this->loadPluginList(); $d°Œë‚Ôë = array(); foreach ($DÎĞ¶´±î… as $fáÚÄĞá±º => $dğˆá—„Û) { unset($dğˆá—„Û[$DÖŒ¯‘ ˆË[2103]], $dğˆá—„Û[$DÖŒ¯‘ ˆË[6]]); $e¼…ÉÔ¨ = PLUGIN_DIR . $dğˆá—„Û[$DÖŒ¯‘ ˆË[28]] . $DÖŒ¯‘ ˆË[2105]; if (!is_file($e¼…ÉÔ¨)) { continue; } $D½ÆØ×Ñ® = Hook::apply($dğˆá—„Û[$DÖŒ¯‘ ˆË[28]] . $DÖŒ¯‘ ˆË[2111]); if (is_array($D½ÆØ×Ñ®)) { $d°Œë‚Ôë[$fáÚÄĞá±º] = array_merge($dğˆá—„Û, $D½ÆØ×Ñ®); } } goto A†ºÁàğ¨; A†ºÁàğ¨: return $d°Œë‚Ôë; goto Bë×º¼ñ‡Š; Bë×º¼ñ‡Š: } private function loadPluginList() { $cŒæ¥¸Û¬§ =& $_SERVER[şÅ²é¤èİ]; $C‘¨ÜˆİË— = $this->loadList(); if (strtolower(MOD) == $cŒæ¥¸Û¬§[2112]) { $fÜ™ßÔ‹±» = $C‘¨ÜˆİË—; } else { $fÜ™ßÔ‹±» = Hook::trigger($cŒæ¥¸Û¬§[2113], $C‘¨ÜˆİË—); if (!$fÜ™ßÔ‹±») { die; } } return $fÜ™ßÔ‹±»; } private function pluginScan($a‰åñÔé‰) { $E³’ß‘‰‹ =& $_SERVER[şÅ²é¤èİ]; recursion_dir(PLUGIN_DIR, $d…ÄŠ±“¶, $DÕ÷óãéÀÀ, 0); foreach ($d…ÄŠ±“¶ as $dÊÃÅ¸áÜ) { $c¿Ûœîõ÷¶ = get_path_this($dÊÃÅ¸áÜ); if (isset($a‰åñÔé‰[$c¿Ûœîõ÷¶]) || !file_exists($dÊÃÅ¸áÜ . $E³’ß‘‰‹[2114]) || !file_exists($dÊÃÅ¸áÜ . $E³’ß‘‰‹[2105])) { continue; } Hook::apply($c¿Ûœîõ÷¶ . $E³’ß‘‰‹[2108]); } } } class SessionModel extends ModelBase { protected $tableName = "\x73\x79\x73\164\145\x6d\x5f\x73\x65\163\163\151\157\x6e"; public function get($f‚ÈÆÌÉÇë) { $Cà†ÔƒÔç =& $_SERVER[şÅ²é¤èİ]; $aåÏ÷¾Ê®Õ = $this->where(array($Cà†ÔƒÔç[2115] => $f‚ÈÆÌÉÇë))->find(); if (!is_array($aåÏ÷¾Ê®Õ)) { return !1; } return $aåÏ÷¾Ê®Õ[$Cà†ÔƒÔç[685]]; } public function set($EÁÑ¸Õµ…Ù, $D¥¡êäòšó, $bÈà³Õ¤•À = 3600) { $a–ÙÊ‹‚’ =& $_SERVER[şÅ²é¤èİ]; $bÓØà±ëõ´ = array($a–ÙÊ‹‚’[2115] => $EÁÑ¸Õµ…Ù, $a–ÙÊ‹‚’[2040] => $D¥¡êäòšó, $a–ÙÊ‹‚’[2116] => $bÈà³Õ¤•À + time()); if (Session::get($a–ÙÊ‹‚’[2117])) { $bÓØà±ëõ´[$a–ÙÊ‹‚’[1345]] = Session::get($a–ÙÊ‹‚’[2117]); } else { $bÓØà±ëõ´[$a–ÙÊ‹‚’[1345]] = 0; } if ($this->get($EÁÑ¸Õµ…Ù)) { return $this->where(array($a–ÙÊ‹‚’[2115] => $EÁÑ¸Õµ…Ù))->save($bÓØà±ëõ´); } else { return $this->add($bÓØà±ëõ´, array(), !0); } } public function remove($fÊ‘‰ ‡î³) { return $this->where(array($_SERVER[şÅ²é¤èİ][2115] => $fÊ‘‰ ‡î³))->delete(); } public function clearTimeout() { return $this->where($_SERVER[şÅ²é¤èİ][2118] . time())->delete(); } } goto b†‰×¹‚¨¿; EÚ©Æ±²è: class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $e§­”«ø‰Ï =& $_SERVER[şÅ²é¤èİ]; $this->objectDriver = array($e§­”«ø‰Ï[57], $e§­”«ø‰Ï[58], $e§­”«ø‰Ï[59], $e§­”«ø‰Ï[60], $e§­”«ø‰Ï[61], $e§­”«ø‰Ï[62], $e§­”«ø‰Ï[63], $e§­”«ø‰Ï[64], $e§­”«ø‰Ï[65]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($B––Ò£ŠŸÙ) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($B––Ò£ŠŸÙ, $_SERVER[şÅ²é¤èİ][8]); } return $B––Ò£ŠŸÙ; } public function getPathName($Fçãáùó¸„) { return $Fçãáùó¸„; } public function iconvApp($c›ô£Îèáù) { return $c›ô£Îèáù; } public function iconvSystem($eº®ÃÍ) { return $eº®ÃÍ; } public function iconvTo($dÛÍâËÅ´Ê, $AéöİÙåºä, $aœ°ÅÄàöã) { goto a‚øóÌ”Ö; DÕ¦îÑÏ‚: return $DÆ’¢‘àÖ; goto DÏºé¨¢Ú; a‚øóÌ”Ö: $d´‹¢¦§Ú =& $_SERVER[şÅ²é¤èİ]; if (!$dÛÍâËÅ´Ê || !function_exists($d´‹¢¦§Ú[66])) { return $dÛÍâËÅ´Ê; } static $fö¦ÄéÙ´‰ = array(); goto Aƒ…Ú´”å¶; E¾Š„Ãç¥: $DÆ’¢‘àÖ = $DÆ’¢‘àÖ ? $DÆ’¢‘àÖ : $dÛÍâËÅ´Ê; if (strstr($DÆ’¢‘àÖ, $d´‹¢¦§Ú[70])) { $DÆ’¢‘àÖ = str_replace($d´‹¢¦§Ú[70], $d´‹¢¦§Ú[71], $DÆ’¢‘àÖ); } $fö¦ÄéÙ´‰[$AéöİÙåºä . $d´‹¢¦§Ú[67] . $aœ°ÅÄàöã . $d´‹¢¦§Ú[68] . $dÛÍâËÅ´Ê] = $DÆ’¢‘àÖ; goto eÛšó‰±³×; eÛšó‰±³×: $fö¦ÄéÙ´‰[$aœ°ÅÄàöã . $d´‹¢¦§Ú[67] . $AéöİÙåºä . $d´‹¢¦§Ú[68] . $dÛÍâËÅ´Ê] = $dÛÍâËÅ´Ê; $fö¦ÄéÙ´‰[$aœ°ÅÄàöã . $d´‹¢¦§Ú[67] . $AéöİÙåºä . $d´‹¢¦§Ú[68] . $DÆ’¢‘àÖ] = $dÛÍâËÅ´Ê; $fö¦ÄéÙ´‰[$AéöİÙåºä . $d´‹¢¦§Ú[67] . $aœ°ÅÄàöã . $d´‹¢¦§Ú[68] . $DÆ’¢‘àÖ] = $DÆ’¢‘àÖ; goto DÕ¦îÑÏ‚; Aƒ…Ú´”å¶: $Aå×†ˆ¼Ä = $AéöİÙåºä . $d´‹¢¦§Ú[67] . $aœ°ÅÄàöã . $d´‹¢¦§Ú[68] . $dÛÍâËÅ´Ê; if (isset($fö¦ÄéÙ´‰[$Aå×†ˆ¼Ä])) { return $fö¦ÄéÙ´‰[$Aå×†ˆ¼Ä]; } if (function_exists($d´‹¢¦§Ú[69])) { $DÆ’¢‘àÖ = @mb_convert_encoding($dÛÍâËÅ´Ê, $aœ°ÅÄàöã, $AéöİÙåºä); } else { $DÆ’¢‘àÖ = @iconv($AéöİÙåºä, $aœ°ÅÄàöã, $dÛÍâËÅ´Ê); } goto E¾Š„Ãç¥; DÏºé¨¢Ú: } public function getPathInner($e‘®ÍÕá×Ñ) { $a–¥š°ßö = IO::init($e‘®ÍÕá×Ñ); return $a–¥š°ßö->path; } public function getPathOuter($CÑõ¨‚ºöÉ) { $cË‰å×ÏÇª =& $_SERVER[şÅ²é¤èİ]; $C¤¼é½÷£í = strlen(trim($this->pathBase, $cË‰å×ÏÇª[8])); $CÑõ¨‚ºöÉ = substr(trim($CÑõ¨‚ºöÉ, $cË‰å×ÏÇª[8]), $C¤¼é½÷£í); return $this->pathDriver . $cË‰å×ÏÇª[8] . ltrim($CÑõ¨‚ºöÉ, $cË‰å×ÏÇª[8]); } public function isParentOf($D³×‡”Şô×, $FŒò¹±ÅºŞ) { $DÅ¼ÒÎŒÎ =& $_SERVER[şÅ²é¤èİ]; $D³×‡”Şô× = rtrim(strtolower($D³×‡”Şô×), $DÅ¼ÒÎŒÎ[8]) . $DÅ¼ÒÎŒÎ[8]; $FŒò¹±ÅºŞ = rtrim(strtolower($FŒò¹±ÅºŞ), $DÅ¼ÒÎŒÎ[8]) . $DÅ¼ÒÎŒÎ[8]; $f‘Í„Ö¾÷ = strpos($FŒò¹±ÅºŞ, $D³×‡”Şô×) === 0; return $f‘Í„Ö¾÷; } public function getType() { $eË‘›©èò =& $_SERVER[şÅ²é¤èİ]; $C„‘Î¾ÀŠš = str_replace($eË‘›©èò[72], $eË‘›©èò[33], get_class($this)); return strtolower($C„‘Î¾ÀŠš); } public function isTypeObject() { return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($côòïŠ•˜Š, $E¥åèŸ‡Ş£) { $cÖÓ¹ˆ—ôå =& $_SERVER[şÅ²é¤èİ]; $B¤‰¼¥†ß = rtrim($côòïŠ•˜Š, $cÖÓ¹ˆ—ôå[8]) . $cÖÓ¹ˆ—ôå[8] . $E¥åèŸ‡Ş£; $fŠÍ™‰˜‹ = $this->exist($B¤‰¼¥†ß); return $fŠÍ™‰˜‹ ? $B¤‰¼¥†ß : !1; } public function renameObject($Bğî£æ¥¶á, $aå‘×ˆ§Äå) { $Fäø¥±›¡« =& $_SERVER[şÅ²é¤èİ]; Hook::trigger($Fäø¥±›¡«[73], $this, $Bğî£æ¥¶á, $this, $this->pathFather($Bğî£æ¥¶á) . $aå‘×ˆ§Äå); $Bğî£æ¥¶á = $this->getPathOuter($Bğî£æ¥¶á); $aå‘×ˆ§Äå = $this->pathFather($Bğî£æ¥¶á) . $aå‘×ˆ§Äå; if (IO::isFile($Bğî£æ¥¶á)) { $c‹ ÏšË¦¤ = IO::move($Bğî£æ¥¶á, $aå‘×ˆ§Äå, REPEAT_RENAME_FOLDER); } else { $c‹ ÏšË¦¤ = IO::mkdir($aå‘×ˆ§Äå); if (!$c‹ ÏšË¦¤) { return !1; } $ešÈÅËÜÅ¾ = IO::listPath($Bğî£æ¥¶á, !0); $bÕÎÒâåÏî = array_merge($ešÈÅËÜÅ¾[$Fäø¥±›¡«[74]], $ešÈÅËÜÅ¾[$Fäø¥±›¡«[75]]); foreach ($bÕÎÒâåÏî as $cÔö¥Ğ£á¾) { IO::move($cÔö¥Ğ£á¾[$Fäø¥±›¡«[76]], $aå‘×ˆ§Äå, REPEAT_RENAME_FOLDER); } IO::remove($Bğî£æ¥¶á); } return $c‹ ÏšË¦¤ ? $aå‘×ˆ§Äå : !1; } public function tempFile($A‚†”‘·—¡ = '', $D­‡†ËßÏ = '') { goto E¸Š¢è›ä°; E¸Š¢è›ä°: if (!$A‚†”‘·—¡) { $A‚†”‘·—¡ = rand_string(15); } $a‹Æ¸ª‡‰ = TEMP_FILES . rand_string(15) . $_SERVER[şÅ²é¤èİ][8]; @mkdir($a‹Æ¸ª‡‰, 511, !0); goto fŠë°²áÌ; cŒ£Â‚Ö‰Û: return $FñÚë×‘Úù; goto cæï¿ë· ¢; fŠë°²áÌ: $FñÚë×‘Úù = $a‹Æ¸ª‡‰ . $A‚†”‘·—¡; @touch($FñÚë×‘Úù); if ($D­‡†ËßÏ) { file_put_contents($FñÚë×‘Úù, $D­‡†ËßÏ); } goto cŒ£Â‚Ö‰Û; cæï¿ë· ¢: } public function tempFileRemve($e…£ß‹¾á‚) { @unlink($e…£ß‹¾á‚); @rmdir($this->pathFather($e…£ß‹¾á‚)); } public function mkfile($Dšêâà©ÂÁ, $dÎ«ã¥×ê = '', $dœ’Î£å‘ƒ = REPEAT_RENAME) { } public function mkdir($fİâ‹—è”‡, $fª¸‹¾Ü = REPEAT_SKIP) { } public function copyFile($A¶‰¤¾Í†Á, $AÊ’ÆÔÚ„Ã) { } public function moveFile($bíÈ²é¡Ÿ, $fËæë‘òÕ) { } public function remove($bÆÇ§‚Ø³) { if ($this->isFile($bÆÇ§‚Ø³)) { return $this->delFile($bÆÇ§‚Ø³); } return $this->delFolder($bÆÇ§‚Ø³); } public function rename($A°†¢à´¹¸, $DãÕ‡Œ‚) { } public function exist($aÙÜô‹¯å) { } public function findByHash($dá°ÊÔÆê = '', $F³‡ÜÁ‘ã‡ = '') { return !1; } public function isFile($AºùåÆï…‹) { } public function isFolder($c¹„Åà±¥) { } public function size($E³ƒŞÆĞƒï) { } public function info($fÓ²î®àØ¬) { } public function infoAuth($fÇ¬í¿çé) { return $this->info($fÇ¬í¿çé); } public function infoFull($d—©É©ĞÖ) { return $this->info($d—©É©ĞÖ); } public function infoWithChildren($E«»¹½ğÃ¬) { $eÛ‡ò½‰í =& $_SERVER[şÅ²é¤èİ]; $dß—˜íç« = $this->info($E«»¹½ğÃ¬); if ($dß—˜íç« && $dß—˜íç«[$eÛ‡ò½‰í[29]] == $eÛ‡ò½‰í[77]) { $CÆÄÆÜ£Ûµ = array($eÛ‡ò½‰í[78] => 0, $eÛ‡ò½‰í[79] => 0, $eÛ‡ò½‰í[80] => 0); $this->infoChildren($E«»¹½ğÃ¬, $CÆÄÆÜ£Ûµ); $dß—˜íç«[$eÛ‡ò½‰í[78]] = $CÆÄÆÜ£Ûµ[$eÛ‡ò½‰í[78]]; $dß—˜íç«[$eÛ‡ò½‰í[81]] = array($eÛ‡ò½‰í[82] => $CÆÄÆÜ£Ûµ[$eÛ‡ò½‰í[79]], $eÛ‡ò½‰í[83] => $CÆÄÆÜ£Ûµ[$eÛ‡ò½‰í[80]]); } return $dß—˜íç«; } public function listPath($fíÓÄâ¶, $bŒ‰¸”š“ = false) { } public function has($AÃîš„ˆ­¯, $BÔÆİß‹¬¼ = false, $Cñ¿º…Ù…· = false) { } public function canRead($B¡İˆÉ†Ö) { } public function canWrite($b¤³ Úæ¤) { } public function getContent($bÜ²ˆ†‡­) { } public function setContent($EìÅ÷¯Ä”, $eö«É•‘œØ = '') { } protected function infoChildren($F‹ò Ê‘®“, &$fä…Š¿è™) { $BÏÄ¤„Å¼î =& $_SERVER[şÅ²é¤èİ]; check_abort(); $eÕ‚’ªò»á = $this->listPath($F‹ò Ê‘®“, !0); $eÕ‚’ªò»á = array_merge($eÕ‚’ªò»á[$BÏÄ¤„Å¼î[75]], $eÕ‚’ªò»á[$BÏÄ¤„Å¼î[74]]); foreach ($eÕ‚’ªò»á as $Cæ„ÍÅí) { if ($Cæ„ÍÅí[$BÏÄ¤„Å¼î[29]] == $BÏÄ¤„Å¼î[77]) { $fä…Š¿è™[$BÏÄ¤„Å¼î[80]]++; $D°Ü“ŒÌ = $this->getPathInner($Cæ„ÍÅí[$BÏÄ¤„Å¼î[76]]); $this->infoChildren($D°Ü“ŒÌ, $fä…Š¿è™); } else { $fä…Š¿è™[$BÏÄ¤„Å¼î[79]]++; $fä…Š¿è™[$BÏÄ¤„Å¼î[78]] += $Cæ„ÍÅí[$BÏÄ¤„Å¼î[78]]; } } } public function fileSubstr($B¢ç¶ºº·, $dİÓ¤â²¾, $eğŠ³ã¡‰Ô) { } public function listAll($d„²•›çˆ) { } public function upload($aöîË·ˆ, $Bæ—ÁŸáâ, $bç»Ù™‹´ = false, $aä´Éö‘³ß = REPEAT_REPLACE) { } public function uploadFileByID($Aò¼É­›ö±, $fáÏöÊ¹Çà, $B”‰ƒµ°óÛ) { } public function uploadFileByPath($bÛÖàİãê, $fÅŸ‹á…ˆ, $fø‡Ì‹Âëº = array()) { } public function uploadLink($Eº‚Â¾´”, $Cò¤¢×„“£ = 0) { goto cÏóì‚±÷ˆ; fë¦•Î„”¨: $Eø•æÔã¯¹ = $this->{$Aç…­Àè}($Eº‚Â¾´”, $Bèœ¹¶Ø’); if ($Eø•æÔã¯¹) { $Eø•æÔã¯¹[$f×‹©ê”øé[88]] = $Eº‚Â¾´”; $Eø•æÔã¯¹[$f×‹©ê”øé[89]] = $CÁ¼¬îˆ…¬; } return $Eø•æÔã¯¹; goto F´ªµŒï‡; cÏóì‚±÷ˆ: $f×‹©ê”øé =& $_SERVER[şÅ²é¤èİ]; if ($GLOBALS[$f×‹©ê”øé[6]][$f×‹©ê”øé[84]][$f×‹©ê”øé[85]]) { return; } $CÁ¼¬îˆ…¬ = $this->getType(); goto D£ŒáŒá‚½; Aˆ°äÃë´Ó: $Aç…­Àè = $Cò¤¢×„“£ <= $f¼¾öˆ­÷½ ? $f×‹©ê”øé[86] : $f×‹©ê”øé[87]; if ($CÁ¼¬îˆ…¬ == $f×‹©ê”øé[61]) { $Aç…­Àè = $f×‹©ê”øé[87]; } $Bèœ¹¶Ø’ = (!$Cò¤¢×„“£ ? 1 : ceil($Cò¤¢×„“£ / pow(1024, 3))) * 3600 * 4; goto fë¦•Î„”¨; D£ŒáŒá‚½: if (!in_array($CÁ¼¬îˆ…¬, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $f¼¾öˆ­÷½ = 1024 * 1024 * 10; goto Aˆ°äÃë´Ó; F´ªµŒï‡: } public function uploadFormData($C®À…Ã«î…, $c³…‰”… = 3600) { } public function multiUploadFormData($B±ö‹¾“Ä, $fìÓ•çš‘† = 3600) { } public function osChunkSize() { $Bˆ”Ïºé¾ =& $_SERVER[şÅ²é¤èİ]; $BÍ–ŞÓ„­ğ = (double) $GLOBALS[$Bˆ”Ïºé¾[6]][$Bˆ”Ïºé¾[84]][$Bˆ”Ïºé¾[90]][$Bˆ”Ïºé¾[91]]; if (!$BÍ–ŞÓ„­ğ) { $BÍ–ŞÓ„­ğ = 1024 * 84 * 10; } return $BÍ–ŞÓ„­ğ; } public function download($e˜íò‰ªÀ—, $D¨¼°î• Ö) { } public function ext($eï¶¦™—) { $cæÀ¹½âŞÈ =& $_SERVER[şÅ²é¤èİ]; if (strpos($eï¶¦™—, $cæÀ¹½âŞÈ[8]) === -1) { $eŞë„ë¨ôÌ = $eï¶¦™—; } else { $eŞë„ë¨ôÌ = $this->pathThis($eï¶¦™—); } $f§¸¹ğ«˜Ï = $cæÀ¹½âŞÈ[33]; if (strstr($eŞë„ë¨ôÌ, $cæÀ¹½âŞÈ[92])) { $f§¸¹ğ«˜Ï = substr($eŞë„ë¨ôÌ, strrpos($eŞë„ë¨ôÌ, $cæÀ¹½âŞÈ[92]) + 1); $f§¸¹ğ«˜Ï = strtolower($f§¸¹ğ«˜Ï); } if (strlen($f§¸¹ğ«˜Ï) > 3 && preg_match($cæÀ¹½âŞÈ[93], $f§¸¹ğ«˜Ï, $eºôà‰Ç½)) { $f§¸¹ğ«˜Ï = $cæÀ¹½âŞÈ[33]; } return $f§¸¹ğ«˜Ï; } public function pathThis($bÊö´ãÑ) { $bË½ÎÏœ¾Ã =& $_SERVER[şÅ²é¤èİ]; $bÊö´ãÑ = str_replace($bË½ÎÏœ¾Ã[94], $bË½ÎÏœ¾Ã[8], rtrim($bÊö´ãÑ, $bË½ÎÏœ¾Ã[8])); $f•†¾ôÎ‡â = strrpos($bÊö´ãÑ, $bË½ÎÏœ¾Ã[8]); if ($f•†¾ôÎ‡â === !1) { return $bÊö´ãÑ; } return substr($bÊö´ãÑ, $f•†¾ôÎ‡â + 1); } public function pathFather($B«Ù¡Å²ËĞ) { $dÛ‘í¿˜ó =& $_SERVER[şÅ²é¤èİ]; $B«Ù¡Å²ËĞ = str_replace($dÛ‘í¿˜ó[94], $dÛ‘í¿˜ó[8], rtrim($B«Ù¡Å²ËĞ, $dÛ‘í¿˜ó[8])); $Eï¶Á–Éğ¾ = strrpos($B«Ù¡Å²ËĞ, $dÛ‘í¿˜ó[8]); if ($Eï¶Á–Éğ¾ === !1) { return $dÛ‘í¿˜ó[33]; } return substr($B«Ù¡Å²ËĞ, 0, $Eï¶Á–Éğ¾ + 1); } public function hashSimple($f÷²²¦è…ò) { goto fñá¨‚Ÿõ; fñá¨‚Ÿõ: $AÉõÄó•î =& $_SERVER[şÅ²é¤èİ]; if (!$f÷²²¦è…ò) { return md5($AÉõÄó•î[33]); } $EéÚäÊÏÕ = $this->size($f÷²²¦è…ò); goto B«Üº¤ˆê¿; B«Üº¤ˆê¿: $b˜Ü÷Ë¯ß = 200; $BŒ¬é†ƒ†• = 50; if ($EéÚäÊÏÕ <= $b˜Ü÷Ë¯ß * $BŒ¬é†ƒ†•) { return $this->hashMd5($f÷²²¦è…ò) . $EéÚäÊÏÕ; } goto dçÛ„£ÛßÀ; Dõä«ñ‚­: $D¸ô´¯ÏÖé .= $this->fileSubstr($f÷²²¦è…ò, $EéÚäÊÏÕ - $b˜Ü÷Ë¯ß, $b˜Ü÷Ë¯ß); return md5($D¸ô´¯ÏÖé) . $EéÚäÊÏÕ; goto Aö¸Õ¨ªº­; dçÛ„£ÛßÀ: $DŒ…ÂèÏ°Ë = intval($EéÚäÊÏÕ / $BŒ¬é†ƒ†•); $D¸ô´¯ÏÖé = $AÉõÄó•î[33]; for ($F¥¨ºØĞ›† = 0; $F¥¨ºØĞ›† < $BŒ¬é†ƒ†•; $F¥¨ºØĞ›†++) { $D¸ô´¯ÏÖé .= $this->fileSubstr($f÷²²¦è…ò, $DŒ…ÂèÏ°Ë * $F¥¨ºØĞ›†, $b˜Ü÷Ë¯ß); } goto Dõä«ñ‚­; Aö¸Õ¨ªº­: } public static $md5Cache = array(); public function hashMd5($F…¬²å’Ü) { $F…¬²å’Ü = $this->iconvSystem($F…¬²å’Ü); if (isset(self::$md5Cache[$F…¬²å’Ü])) { return self::$md5Cache[$F…¬²å’Ü]; } self::$md5Cache[$F…¬²å’Ü] = $this->hashMd5Shell($F…¬²å’Ü); if (!self::$md5Cache[$F…¬²å’Ü]) { self::$md5Cache[$F…¬²å’Ü] = @md5_file($F…¬²å’Ü); } return self::$md5Cache[$F…¬²å’Ü]; } private function hashMd5Shell($a÷Â‘¦¡é) { goto E•ÜÌñ§¤×; d­˜ÄĞ­Ç: $A‹Ïà­îæğ = Cache::get($BäÕÚ¤[98]); if (!$A‹Ïà­îæğ) { $D¸âè”˜¡Ş = BASIC_PATH . $BäÕÚ¤[99]; $F™«ÇƒãÅì = md5_file($D¸âè”˜¡Ş); $A‹Ïà­îæğ = $BäÕÚ¤[100]; foreach ($d”§É¿æ¼ as $eô£¬¬ˆƒÄ) { $a‰ù¥¬¶Ò = shell_exec($eô£¬¬ˆƒÄ . "\40\42{$D¸âè”˜¡Ş}\x22"); if ($a‰ù¥¬¶Ò && substr(trim($a‰ù¥¬¶Ò), 0, 32) == $F™«ÇƒãÅì) { $A‹Ïà­îæğ = $eô£¬¬ˆƒÄ; break; } } Cache::set($BäÕÚ¤[98], $A‹Ïà­îæğ, 3600); } if ($A‹Ïà­îæğ == $BäÕÚ¤[100]) { return !1; } goto E¥Ğ¼°²Ø; E•ÜÌñ§¤×: $BäÕÚ¤ =& $_SERVER[şÅ²é¤èİ]; if (!function_exists($BäÕÚ¤[95])) { return !1; } $d”§É¿æ¼ = array($BäÕÚ¤[96], $BäÕÚ¤[97]); goto d­˜ÄĞ­Ç; E¥Ğ¼°²Ø: $a‰ù¥¬¶Ò = shell_exec($A‹Ïà­îæğ . "\x20\42{$a÷Â‘¦¡é}\42"); return substr($a‰ù¥¬¶Ò, 0, 32); goto b¾†Ê¨¿¶; b¾†Ê¨¿¶: } public function link($e¿Ÿ¿¨¬„è) { return $e¿Ÿ¿¨¬„è; } public function fileOut($bİµ´‰´, $fñÅ¤šñÈ¤ = false, $Eö‡Æƒä¢¦ = false, $dÒ©“ÁÛ¤ = '') { goto cŞ…ãÁ‡¾ë; eİÊ”¦§ºŸ: $BŠà’“Úò  = gmdate($FÔŠ›£‰Â…[105], $Dšœç›ÕÛœ[$FÔŠ›£‰Â…[106]]); $Eªİ›ë›® = $Eö‡Æƒä¢¦ ? $Eö‡Æƒä¢¦ : $this->iconvApp($Dšœç›ÕÛœ[$FÔŠ›£‰Â…[28]]); $dª›‹ÆéÎù = 0; goto bÆ¯Íä”­ï; eˆš¾Çïí½: header($FÔŠ›£‰Â…[132] . $Eªİ›ë›®); header($FÔŠ›£‰Â…[133]); header($FÔŠ›£‰Â…[134] . $D¹ä½ÓÊÁ); goto BïøÕÇê­…; cŞ…ãÁ‡¾ë: $FÔŠ›£‰Â… =& $_SERVER[şÅ²é¤èİ]; if (!$bİµ´‰´ || !$this->exist($bİµ´‰´)) { show_json(LNG($FÔŠ›£‰Â…[101]), !1, $Eö‡Æƒä¢¦); } $b˜ö¼Ù£Ï° = $this->getType() == $FÔŠ›£‰Â…[102]; goto CßÜ‰’ÑŒá; BïøÕÇê­…: header($FÔŠ›£‰Â…[135]); $C·’ùÍäö— = strtolower($_SERVER[$FÔŠ›£‰Â…[136]]); if ($b˜ö¼Ù£Ï° && $C·’ùÍäö— && $DÓ½°íØÓ) { if (strstr($C·’ùÍäö—, $FÔŠ›£‰Â…[137])) { header($FÔŠ›£‰Â…[138] . $bİµ´‰´); } else { if (strstr($C·’ùÍäö—, $FÔŠ›£‰Â…[139])) { header($FÔŠ›£‰Â…[140] . $bİµ´‰´); } else { if (strstr($C·’ùÍäö—, $FÔŠ›£‰Â…[141])) { header($FÔŠ›£‰Â…[142] . $bİµ´‰´); } } } if ($a¸Ì÷Ó¡¡£) { header($FÔŠ›£‰Â…[143] . $a¸Ì÷Ó¡¡£); } return; } goto AŠã”˜è; Føİš¸„ã¯: if (!$dÒ©“ÁÛ¤) { $dÒ©“ÁÛ¤ = md5($BŠà’“Úò  . $this->hashSimple($bİµ´‰´)); } $dÒ©“ÁÛ¤ = $FÔŠ›£‰Â…[112] . $dÒ©“ÁÛ¤ . $FÔŠ›£‰Â…[112]; $FŠŞ¹ë¬¾ = get_file_mime($AÉê¾Ñá“ ); goto bªĞ™™·ÌÖ; a«êÕ¸ÑÅÎ: $B‘¿Îí®•á = $FÔŠ›£‰Â…[112] . $B‘¿Îí®•á . $FÔŠ›£‰Â…[116] . $B‘¿Îí®•á; if ($fñÅ¤šñÈ¤) { header($FÔŠ›£‰Â…[117]); header($FÔŠ›£‰Â…[118] . $B‘¿Îí®•á); } else { header($FÔŠ›£‰Â…[119] . $B‘¿Îí®•á); } header($FÔŠ›£‰Â…[120]); goto B»Ç±ÀÖÊ–; AŠã”˜è: if (isset($_SERVER[$FÔŠ›£‰Â…[144]])) { if (preg_match($FÔŠ›£‰Â…[145], $_SERVER[$FÔŠ›£‰Â…[144]], $a—šÊÅŸ)) { $dª›‹ÆéÎù = intval($a—šÊÅŸ[1]); if (!empty($a—šÊÅŸ[2])) { $cÏñÑ®È‡´ = intval($a—šÊÅŸ[2]); } } header($FÔŠ›£‰Â…[146]); header("\103\x6f\156\164\145\x6e\164\55\x52\141\x6e\x67\x65\x3a\40\x62\171\164\145\x73\x20{$dª›‹ÆéÎù}\x2d{$cÏñÑ®È‡´}\x2f" . $D¹ä½ÓÊÁ); } else { header($FÔŠ›£‰Â…[147]); } header($FÔŠ›£‰Â…[148] . ($cÏñÑ®È‡´ - $dª›‹ÆéÎù + 1)); if ($_SERVER[$FÔŠ›£‰Â…[149]] == $FÔŠ›£‰Â…[150]) { return; } goto BßõÚÛÍ‹Å; BêÂàôª®ˆ: set_timeout(); $Dšœç›ÕÛœ = $this->infoFull($bİµ´‰´); $D¹ä½ÓÊÁ = $Dšœç›ÕÛœ[$FÔŠ›£‰Â…[78]]; goto eİÊ”¦§ºŸ; BğŞ¡¼àÉğ: if (isset($_SERVER[$FÔŠ›£‰Â…[129]]) && $_SERVER[$FÔŠ›£‰Â…[129]] == $dÒ©“ÁÛ¤) { header($FÔŠ›£‰Â…[130] . $dÒ©“ÁÛ¤, !0, 304); die; } header($FÔŠ›£‰Â…[130] . $dÒ©“ÁÛ¤); header($FÔŠ›£‰Â…[131] . $BŠà’“Úò  . $FÔŠ›£‰Â…[123]); goto eˆš¾Çïí½; B»Ç±ÀÖÊ–: header($FÔŠ›£‰Â…[121] . $FŠŞ¹ë¬¾); header($FÔŠ›£‰Â…[122] . gmdate($FÔŠ›£‰Â…[105], time() + 3600 * 24 * 30) . $FÔŠ›£‰Â…[123]); header($FÔŠ›£‰Â…[124]); goto DáÕ¼ÃÌğô; DáÕ¼ÃÌğô: header($FÔŠ›£‰Â…[125]); header($FÔŠ›£‰Â…[126]); if (isset($_SERVER[$FÔŠ›£‰Â…[127]]) && strtotime($_SERVER[$FÔŠ›£‰Â…[127]]) == $Dšœç›ÕÛœ[$FÔŠ›£‰Â…[106]]) { header($FÔŠ›£‰Â…[128], !0, 304); die; } goto BğŞ¡¼àÉğ; bÆ¯Íä”­ï: $cÏñÑ®È‡´ = $D¹ä½ÓÊÁ - 1; $AÉê¾Ñá“  = $this->ext($Eªİ›ë›®); if (in_array($AÉê¾Ñá“ , array($FÔŠ›£‰Â…[107], $FÔŠ›£‰Â…[108], $FÔŠ›£‰Â…[109], $FÔŠ›£‰Â…[110]))) { $AÉê¾Ñá“  = $FÔŠ›£‰Â…[111]; } goto Føİš¸„ã¯; CßÜ‰’ÑŒá: $DÓ½°íØÓ = $GLOBALS[$FÔŠ›£‰Â…[6]][$FÔŠ›£‰Â…[84]][$FÔŠ›£‰Â…[90]][$FÔŠ›£‰Â…[103]]; $a¸Ì÷Ó¡¡£ = (double) $GLOBALS[$FÔŠ›£‰Â…[6]][$FÔŠ›£‰Â…[84]][$FÔŠ›£‰Â…[90]][$FÔŠ›£‰Â…[104]] * 1024 * 1024; @ob_end_clean(); goto BêÂàôª®ˆ; BßõÚÛÍ‹Å: $e´–³ÕÖŒó = 1024 * 100; $AîÖ‹“ËãÌ = 0; if ($a¸Ì÷Ó¡¡£) { $AîÖ‹“ËãÌ = intval(1000 * 1000 * ($e´–³ÕÖŒó / $a¸Ì÷Ó¡¡£)); } goto e´®š‡ï®; bªĞ™™·ÌÖ: if (strstr($FŠŞ¹ë¬¾, $FÔŠ›£‰Â…[113])) { $FŠŞ¹ë¬¾ = $FŠŞ¹ë¬¾ . $FÔŠ›£‰Â…[114]; } if ($fñÅ¤šñÈ¤ === !1 && !mime_support($FŠŞ¹ë¬¾)) { $fñÅ¤šñÈ¤ = !0; $FŠŞ¹ë¬¾ = $FÔŠ›£‰Â…[115]; } $B‘¿Îí®•á = rawurlencode($Eªİ›ë›®); goto a«êÕ¸ÑÅÎ; e´®š‡ï®: while ($dª›‹ÆéÎù <= $cÏñÑ®È‡´) { $AÈÙ¾œ¸ğˆ = timeFloat(); check_abort(); $c¾—ª†«¬ = $cÏñÑ®È‡´ - $dª›‹ÆéÎù + 1; if ($c¾—ª†«¬ <= $e´–³ÕÖŒó) { $e´–³ÕÖŒó = $c¾—ª†«¬; } echo $this->fileSubstr($bİµ´‰´, $dª›‹ÆéÎù, $e´–³ÕÖŒó); $dª›‹ÆéÎù += $e´–³ÕÖŒó; if ($e´–³ÕÖŒó == $c¾—ª†«¬) { $dª›‹ÆéÎù = $cÏñÑ®È‡´ + 1; } if ($AîÖ‹“ËãÌ) { $c§ÒŸˆÃ„Õ = intval(1000 * 1000 * (timeFloat() - $AÈÙ¾œ¸ğˆ)); $e ¯–Õ›Óå = $AîÖ‹“ËãÌ - $c§ÒŸˆÃ„Õ; if ($e ¯–Õ›Óå > 5) { usleep($e ¯–Õ›Óå); } } } goto DÉÀÑ®Ù—; DÉÀÑ®Ù—: } public function fileOutServer($B·¤¥‡ôêÖ, $Aí¿„Û˜ÁÊ = false, $D‡Ì‚·Áù… = false, $B¸ˆÃİˆÆÂ = '') { $this->fileOut($B·¤¥‡ôêÖ, $Aí¿„Û˜ÁÊ, $D‡Ì‚·Áù…, $B¸ˆÃİˆÆÂ); } public function fileOutLink($fÇæ²ÇÔ­ò) { $a¨ÌãÒ· =& $_SERVER[şÅ²é¤èİ]; if (substr($fÇæ²ÇÔ­ò, 0, 7) == $a¨ÌãÒ·[151]) { $fÇæ²ÇÔ­ò = $a¨ÌãÒ·[152] . substr($fÇæ²ÇÔ­ò, 7); } header($a¨ÌãÒ·[153] . $fÇæ²ÇÔ­ò); die; } public function fileOutImage($E¢‘¹Œñ¥ˆ, $F›£‰šôğè = 250) { goto a™ã„²å³; AìÌáæÍ: $eÉô‡ºëÛù = DATA_THUMB . $a¢¥ÓŒÄÌ; if (!@file_exists($eÉô‡ºëÛù)) { $B…Ä·ˆ¡ˆá = TEMP_FILES; if (!is_dir($B…Ä·ˆ¡ˆá)) { mk_dir($B…Ä·ˆ¡ˆá); } $aÈ·£¼¯› = $B…Ä·ˆ¡ˆá . $C¥¼£ïÑ­› . $fˆº‡°ö±Š[92] . $DŸ·Ïù»Œ[$fˆº‡°ö±Š[155]]; if (!@file_exists($aÈ·£¼¯›)) { $aÈ·£¼¯› = $this->download($E¢‘¹Œñ¥ˆ, $aÈ·£¼¯›); } $b©«ĞÂ©¦Ô = new ImageThumb($aÈ·£¼¯›, $fˆº‡°ö±Š[162]); $b©«ĞÂ©¦Ô->prorate($eÉô‡ºëÛù, $F›£‰šôğè, $F›£‰šôğè); } if (!file_exists($eÉô‡ºëÛù) || filesize($eÉô‡ºëÛù) < 100) { return @file_exists($aÈ·£¼¯›) ? IO::fileOut($aÈ·£¼¯›) : $this->fileOut($E¢‘¹Œñ¥ˆ); } goto CÍùÒ­¿Æ; CÍùÒ­¿Æ: if (!($E™–ªĞé°î = IO::move($eÉô‡ºëÛù, $FÉ®ÄæßÕä))) { return IO::fileOut($eÉô‡ºëÛù); } del_file($eÉô‡ºëÛù); IO::fileOut($E™–ªĞé°î); goto A†İòø¯¤Ï; Eˆ…„»È•·: if (!($FŸÜî‚²Ã = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $fˆº‡°ö±Š[160]))) { $FÉ®ÄæßÕä = IO::mkdir(IO_PATH_SYSTEM_TEMP . $fˆº‡°ö±Š[161]); } else { $FÉ®ÄæßÕä = KodIO::make($FŸÜî‚²Ã); } if ($FŸÜî‚²Ã = IO::fileNameExist($FÉ®ÄæßÕä, $a¢¥ÓŒÄÌ)) { $eÉô‡ºëÛù = KodIO::make($FŸÜî‚²Ã); return IO::fileOut($eÉô‡ºëÛù); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto AìÌáæÍ; Dí…äñÆœ: if ($DŸ·Ïù»Œ[$fˆº‡°ö±Š[78]] <= 1024 * 50 || !function_exists($fˆº‡°ö±Š[154]) || $DŸ·Ïù»Œ[$fˆº‡°ö±Š[155]] == $fˆº‡°ö±Š[156]) { return $this->fileOut($E¢‘¹Œñ¥ˆ); } if (isset($DŸ·Ïù»Œ[$fˆº‡°ö±Š[157]][$fˆº‡°ö±Š[158]])) { $C¥¼£ïÑ­› = $DŸ·Ïù»Œ[$fˆº‡°ö±Š[157]][$fˆº‡°ö±Š[158]]; } else { if (isset($DŸ·Ïù»Œ[$fˆº‡°ö±Š[157]][$fˆº‡°ö±Š[159]])) { $C¥¼£ïÑ­› = $DŸ·Ïù»Œ[$fˆº‡°ö±Š[157]][$fˆº‡°ö±Š[159]]; } else { $C¥¼£ïÑ­› = md5("{$DŸ·Ïù»Œ[$fˆº‡°ö±Š[28]]}\137{$DŸ·Ïù»Œ[$fˆº‡°ö±Š[76]]}\x5f{$DŸ·Ïù»Œ[$fˆº‡°ö±Š[78]]}"); } } $a¢¥ÓŒÄÌ = "{$C¥¼£ïÑ­›}\x5f{$F›£‰šôğè}\x2e\160\156\x67"; goto Eˆ…„»È•·; a™ã„²å³: $fˆº‡°ö±Š =& $_SERVER[şÅ²é¤èİ]; if (substr($E¢‘¹Œñ¥ˆ, 0, 4) == $fˆº‡°ö±Š[141]) { $this->fileOutLink($E¢‘¹Œñ¥ˆ); } $DŸ·Ïù»Œ = $this->info($E¢‘¹Œñ¥ˆ); goto Dí…äñÆœ; A†İòø¯¤Ï: } public function fileOutImageServer($a¤ÓÎÕÛº”, $D³¶Â÷‰À¯ = 250) { $this->fileOutImage($a¤ÓÎÕÛº”, $D³¶Â÷‰À¯); } public function fileNameAuto($Bõ•åªíæÓ, $cãÒ¤ì½ù, $aªµ´²‰µà = REPEAT_RENAME, $B—í¶×À¿ = false) { goto B÷ïŸÛãêó; aš è†šÖ«: $EçƒÏãÄÄß = 1; $C¦¡ôÌó•ƒ = substr($cãÒ¤ì½ù, 0, strlen($cãÒ¤ì½ù) - strlen($B…ìĞÜï…)); $FéË¬Â˜òÒ = $C¦¡ôÌó•ƒ . "\x28{$EçƒÏãÄÄß}\51{$B…ìĞÜï…}"; goto d¼ÑÕ™¹‘; B÷ïŸÛãêó: $dÀ¬ô™ëÛ =& $_SERVER[şÅ²é¤èİ]; $bäŠ°®Èöõ = $Bõ•åªíæÓ === $dÀ¬ô™ëÛ[33] ? $cãÒ¤ì½ù : rtrim($Bõ•åªíæÓ, $dÀ¬ô™ëÛ[8]) . $dÀ¬ô™ëÛ[8] . $cãÒ¤ì½ù; if ($aªµ´²‰µà == REPEAT_REPLACE || !$this->exist($bäŠ°®Èöõ) || $B—í¶×À¿ && $aªµ´²‰µà != REPEAT_RENAME_FOLDER) { return $cãÒ¤ì½ù; } goto Fòñİˆ¯; d¼ÑÕ™¹‘: while ($this->exist(rtrim($Bõ•åªíæÓ, $dÀ¬ô™ëÛ[8]) . $dÀ¬ô™ëÛ[8] . $FéË¬Â˜òÒ)) { $FéË¬Â˜òÒ = $C¦¡ôÌó•ƒ . "\x28{$EçƒÏãÄÄß}\51{$B…ìĞÜï…}"; $EçƒÏãÄÄß++; } return $FéË¬Â˜òÒ; goto C‘¬¯­ÌÑ½; Fòñİˆ¯: if ($aªµ´²‰µà == REPEAT_SKIP) { return !1; } $B…ìĞÜï… = $dÀ¬ô™ëÛ[92] . get_path_ext($cãÒ¤ì½ù); $B…ìĞÜï… = $B…ìĞÜï… == $dÀ¬ô™ëÛ[92] || $B—í¶×À¿ ? $dÀ¬ô™ëÛ[33] : $B…ìĞÜï…; goto aš è†šÖ«; C‘¬¯­ÌÑ½: } public function listAllFiles($aõ‹Éí×°º, $fõÌÔµï¡, $c‚·âğ–ĞÀ = array()) { goto FŒ•»öÊï×; E„ÒŒ¹´ÒÑ: foreach (array_unique($EÌÈ©™Ï©¦) as $Fñ‹ªğº¼Ü) { $DÉ¦·‚¹á = array($D¤Ô…ÚË­[76] => $this->getPathOuter($D¤Ô…ÚË­[8] . $aõ‹Éí×°º . $D¤Ô…ÚË­[8] . $Fñ‹ªğº¼Ü), $D¤Ô…ÚË­[77] => 1, $D¤Ô…ÚË­[78] => 0); if (substr($Fñ‹ªğº¼Ü, -1) != $D¤Ô…ÚË­[8]) { $DÉ¦·‚¹á[$D¤Ô…ÚË­[77]] = 0; $cºŸã¥Ğ„Š = $this->getPath($aõ‹Éí×°º . $D¤Ô…ÚË­[8] . $Fñ‹ªğº¼Ü); $DÉ¦·‚¹á[$D¤Ô…ÚË­[78]] = isset($c‚·âğ–ĞÀ[$cºŸã¥Ğ„Š]) ? $c‚·âğ–ĞÀ[$cºŸã¥Ğ„Š] : $this->size($cºŸã¥Ğ„Š); } $bÒçØê×ï¿[] = $DÉ¦·‚¹á; } return $bÒçØê×ï¿; goto BŠ¶í‘Ï‰“; FŒ•»öÊï×: $D¤Ô…ÚË­ =& $_SERVER[şÅ²é¤èİ]; if (empty($fõÌÔµï¡)) { return array(); } $EÌÈ©™Ï©¦ = array(); goto dÌã¯ƒ ’ç; dÌã¯ƒ ’ç: $aõ‹Éí×°º = trim($aõ‹Éí×°º, $D¤Ô…ÚË­[8]); foreach ($fõÌÔµï¡ as $Fñ‹ªğº¼Ü) { $EêÎÁ†âŸ‰ = ltrim(substr($Fñ‹ªğº¼Ü, strlen($aõ‹Éí×°º)), $D¤Ô…ÚË­[8]); $EÌÈ©™Ï©¦ = array_merge($EÌÈ©™Ï©¦, $this->slicePath($EêÎÁ†âŸ‰)); } $bÒçØê×ï¿ = array(); goto E„ÒŒ¹´ÒÑ; BŠ¶í‘Ï‰“: } public function slicePath($fŸÛ¹¢Õç) { $e»ÎŒ¸“‡Í =& $_SERVER[şÅ²é¤èİ]; $fÖò‘§Û¼¯ = explode($e»ÎŒ¸“‡Í[8], trim($fŸÛ¹¢Õç, $e»ÎŒ¸“‡Í[8])); $b³Ñ÷¡Æ… = 0; do { ++$b³Ñ÷¡Æ…; $BŠ“òÖ’ŒØ[] = implode($e»ÎŒ¸“‡Í[8], array_slice($fÖò‘§Û¼¯, 0, $b³Ñ÷¡Æ…)) . $e»ÎŒ¸“‡Í[8]; } while ($b³Ñ÷¡Æ… < count($fÖò‘§Û¼¯)); $BŠ“òÖ’ŒØ[count($fÖò‘§Û¼¯) - 1] = $fŸÛ¹¢Õç; return $BŠ“òÖ’ŒØ; } public function getHost() { $B’öĞ¨¿áç =& $_SERVER[şÅ²é¤èİ]; $AµÄò’“¼Ô = parse_url(trim($this->domain, $B’öĞ¨¿áç[8])); $bŞÍºÖ“†½ = isset($AµÄò’“¼Ô[$B’öĞ¨¿áç[163]]) ? $AµÄò’“¼Ô[$B’öĞ¨¿áç[163]] : http_type(); $DİŒ¼§°Ñ = isset($AµÄò’“¼Ô[$B’öĞ¨¿áç[164]]) ? $AµÄò’“¼Ô[$B’öĞ¨¿áç[164]] : $AµÄò’“¼Ô[$B’öĞ¨¿áç[76]]; if (isset($AµÄò’“¼Ô[$B’öĞ¨¿áç[165]])) { $DİŒ¼§°Ñ .= $B’öĞ¨¿áç[4] . $AµÄò’“¼Ô[$B’öĞ¨¿áç[165]]; } return $bŞÍºÖ“†½ . $B’öĞ¨¿áç[166] . $DİŒ¼§°Ñ; } public function pathEncode($câ“ßºğµ¦) { $aÏ“ëºÜ… =& $_SERVER[şÅ²é¤èİ]; return str_replace($aÏ“ëºÜ…[167], $aÏ“ëºÜ…[8], rawurlencode($câ“ßºğµ¦)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\x76\64"; public function __construct($A´³ Ò‚—‰) { set_timeout(); require_once SDK_DIR . $_SERVER[şÅ²é¤èİ][168]; parent::__construct(); $this->_init($A´³ Ò‚—‰); } public function _init($A“Œ‚åŞ) { foreach ($A“Œ‚åŞ as $dÀèÙ˜Î×Ö => $Bé¾Ö»ìÏì) { if (isset($this->{$dÀèÙ˜Î×Ö})) { $this->{$dÀèÙ˜Î×Ö} = $Bé¾Ö»ìÏì; } } $this->endpoint = $A“Œ‚åŞ[$_SERVER[şÅ²é¤èİ][169]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); $this->client->setChunkSize($this->osChunkSize()); } public function signatureVersion($BÁäè¤‘· = "\166\x34") { $this->signVer = $BÁäè¤‘·; $this->client->setSignatureVersion($BÁäè¤‘·); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto AÊÏ×ËŠìŞ; AÊÏ×ËŠìŞ: $EŠ–ÅÛ÷ãè =& $_SERVER[şÅ²é¤èİ]; $aŒ‹Œ¤”áö = $this->getBucketCors(); if (!$aŒ‹Œ¤”áö || !is_array($aŒ‹Œ¤”áö)) { return !1; } goto fÄ¼è†Ñä; f÷º£™ñ: $b‡ˆà¿±ê = array($EŠ–ÅÛ÷ãè[175], $EŠ–ÅÛ÷ãè[176], $EŠ–ÅÛ÷ãè[177], $EŠ–ÅÛ÷ãè[178], $EŠ–ÅÛ÷ãè[179]); $EÎ¾‰„ã– = array_diff($b‡ˆà¿±ê, $D›•ŠÍˆ¦); return empty($EÎ¾‰„ã–); goto B•­Ú¢‚çì; fÄ¼è†Ñä: if ($aŒ‹Œ¤”áö[$EŠ–ÅÛ÷ãè[170]] != $EŠ–ÅÛ÷ãè[171] || $aŒ‹Œ¤”áö[$EŠ–ÅÛ÷ãè[172]] != $EŠ–ÅÛ÷ãè[171]) { return !1; } $D›•ŠÍˆ¦ = array_map($EŠ–ÅÛ÷ãè[173], $aŒ‹Œ¤”áö[$EŠ–ÅÛ÷ãè[174]]); if (!is_array($D›•ŠÍˆ¦)) { $D›•ŠÍˆ¦ = array(); } goto f÷º£™ñ; B•­Ú¢‚çì: } public function mkfile($e†ã‹áâàÇ, $AŠÖ÷‘êÈ = '', $B‘…óôÜö¨ = REPEAT_RENAME) { $CäëÊº›ºì = $this->setContent($e†ã‹áâàÇ, $AŠÖ÷‘êÈ); if ($CäëÊº›ºì !== !1) { return $this->getPathOuter($e†ã‹áâàÇ); } return !1; } public function mkdir($Cƒ‡õİÃ, $fŒ´’±ºãç = REPEAT_SKIP) { if (empty($Cƒ‡õİÃ)) { return !1; } if ($this->isFolder($Cƒ‡õİÃ)) { return $this->getPathOuter($Cƒ‡õİÃ); } $aòÛÖå‘—º = $this->setContent($Cƒ‡õİÃ, $_SERVER[şÅ²é¤èİ][33], !0); if ($aòÛÖå‘—º !== !1) { return $this->getPathOuter($Cƒ‡õİÃ); } return !1; } public function copyFile($fé·ÙæÚƒ±, $dŞàïæ¡ªÓ, $F¿®ìÎ¦… = array()) { $eŞ•æŠ—Û =& $_SERVER[şÅ²é¤èİ]; $aÏ¿¨’ôÈ  = $this->objectMeta($fé·ÙæÚƒ±); if (!$aÏ¿¨’ôÈ ) { return !1; } if ($aÏ¿¨’ôÈ [$eŞ•æŠ—Û[78]] <= 1024 * 1024 * 200) { $cºëÒÄƒ = $this->client->copyObject($this->bucket, $fé·ÙæÚƒ±, $this->bucket, $dŞàïæ¡ªÓ, $eŞ•æŠ—Û[180], $F¿®ìÎ¦…); } else { $cºëÒÄƒ = $this->client->multiCopyObject($this->bucket, $fé·ÙæÚƒ±, $this->bucket, $dŞàïæ¡ªÓ, $F¿®ìÎ¦…); } $cºëÒÄƒ = $cºëÒÄƒ ? $this->getPathOuter($dŞàïæ¡ªÓ) : !1; return $cºëÒÄƒ; } public function moveFile($CİğáÖŠ¦å, $eß‘×æØÛæ) { if ($this->copyFile($CİğáÖŠ¦å, $eß‘×æØÛæ)) { $this->delFile($CİğáÖŠ¦å); return $this->getPathOuter($eß‘×æØÛæ); } return !1; } public function delFile($dôÃ»²ç°â) { return $this->client->deleteObject($this->bucket, $dôÃ»²ç°â); } public function delFolder($Aë¥‘´¿¶ğ) { goto CôæÊîËÑ; CôæÊîËÑ: $F´» ½¤Ô =& $_SERVER[şÅ²é¤èİ]; $A†ºøªç¼° = $this->listObjs($Aë¥‘´¿¶ğ); if (!$A†ºøªç¼°) { $Aë¥‘´¿¶ğ = trim($Aë¥‘´¿¶ğ, $F´» ½¤Ô[8]); if (!empty($Aë¥‘´¿¶ğ)) { $Aë¥‘´¿¶ğ .= $F´» ½¤Ô[8]; } return $this->delFile($Aë¥‘´¿¶ğ); } goto c…ì”Íã–; c…ì”Íã–: $F¥ÊÔˆì¬ = $B‚î®ÜÅãñ = 0; $C…¯ÌÊìæ = array_chunk(array_keys($A†ºøªç¼°), 1000); foreach ($C…¯ÌÊìæ as $cºá„Ö‚›Ñ) { $F¥ÊÔˆì¬++; $B‚î®ÜÅãñ += (int) $this->client->deleteObjects($this->bucket, $cºá„Ö‚›Ñ); } goto Eğ¦»Óç¯; Eğ¦»Óç¯: return $F¥ÊÔˆì¬ === $B‚î®ÜÅãñ ? !0 : !1; goto dÎß©àÉé‹; dÎß©àÉé‹: } public function rename($f¿¯˜¹íá, $fÉÁÃÅÃ‰¼) { return $this->renameObject($f¿¯˜¹íá, $fÉÁÃÅÃ‰¼); } public function size($aØŸò¦İÙ) { $Fï…åİ™‘ô = $this->objectMeta($aØŸò¦İÙ); return $Fï…åİ™‘ô ? $Fï…åİ™‘ô[$_SERVER[şÅ²é¤èİ][78]] : 0; } public function info($A‡‘Éò¥ ­) { if ($this->isFile($A‡‘Éò¥ ­)) { return $this->fileInfo($A‡‘Éò¥ ­); } else { if ($this->isFolder($A‡‘Éò¥ ­)) { return $this->folderInfo($A‡‘Éò¥ ­); } } return !1; } public function exist($e¢ˆ÷Ûæé) { return $this->objectMeta($e¢ˆ÷Ûæé) ? !0 : !1; } public function isFile($F„šŠŠ¯Õ) { $A£íŞÀ·ªŸ =& $_SERVER[şÅ²é¤èİ]; $E–‡šÜ‹¢Ì = $this->objectMeta($F„šŠŠ¯Õ); return $E–‡šÜ‹¢Ì ? $E–‡šÜ‹¢Ì[$A£íŞÀ·ªŸ[29]] == $A£íŞÀ·ªŸ[162] : !1; } public function isFolder($f’ÔºìÙ‰) { $F¹Í´È“ =& $_SERVER[şÅ²é¤èİ]; $f’ÔºìÙ‰ = trim($f’ÔºìÙ‰, $F¹Í´È“[8]) . $F¹Í´È“[8]; $F¾¡ê˜ö˜õ = $this->objectMeta($f’ÔºìÙ‰); return $F¾¡ê˜ö˜õ ? $F¾¡ê˜ö˜õ[$F¹Í´È“[29]] == $F¹Í´È“[77] : !1; } public function listPath($b”Ä±™í¼Æ, $d‰Óİ¥Í„ = false) { $cÚª³³•˜À =& $_SERVER[şÅ²é¤èİ]; $bâ¡¿’´çù = $this->listObjs($b”Ä±™í¼Æ, null, null, $cÚª³³•˜À[8]); $BÍŸÓï—‚ò = array($cÚª³³•˜À[75] => array(), $cÚª³³•˜À[74] => array()); foreach ($bâ¡¿’´çù as $C…˜í·İÅ => $cí’‹çÓÃ…) { if ($C…˜í·İÅ == $cÚª³³•˜À[8]) { continue; } if (isset($cí’‹çÓÃ…[$cÚª³³•˜À[181]])) { $BÍŸÓï—‚ò[$cÚª³³•˜À[75]][] = $this->folderInfo($cí’‹çÓÃ…[$cÚª³³•˜À[181]], array($cÚª³³•˜À[182] => 0), $d‰Óİ¥Í„); } else { if (substr($cí’‹çÓÃ…[$cÚª³³•˜À[28]], -1) == $cÚª³³•˜À[8]) { continue; } $BÍŸÓï—‚ò[$cÚª³³•˜À[74]][] = $this->fileInfo($cí’‹çÓÃ…[$cÚª³³•˜À[28]], $d‰Óİ¥Í„, $cí’‹çÓÃ…); } } return $BÍŸÓï—‚ò; } private function fileInfo($Dêá†™àÒù, $dĞîó§»›â = false, $bˆò„®‡ = array()) { goto A‹„ˆµÉ; fÕÂ¨ïì®: if (isset($bˆò„®‡[$A—°¥¤ë¥§[78]])) { $C÷ŒƒƒÂé[$A—°¥¤ë¥§[78]] = $bˆò„®‡[$A—°¥¤ë¥§[78]]; } return $C÷ŒƒƒÂé; goto EùÔ‹ä“½†; fÌë¹„É‹Í: if (empty($bˆò„®‡)) { $bˆò„®‡ = $this->objectMeta($Dêá†™àÒù); if (!$bˆò„®‡) { return $C÷ŒƒƒÂé; } } if (isset($bˆò„®‡[$A—°¥¤ë¥§[186]])) { $C÷ŒƒƒÂé[$A—°¥¤ë¥§[183]] = $bˆò„®‡[$A—°¥¤ë¥§[186]]; } if (isset($bˆò„®‡[$A—°¥¤ë¥§[186]])) { $C÷ŒƒƒÂé[$A—°¥¤ë¥§[106]] = $bˆò„®‡[$A—°¥¤ë¥§[186]]; } goto fÕÂ¨ïì®; A‹„ˆµÉ: $A—°¥¤ë¥§ =& $_SERVER[şÅ²é¤èİ]; if ($dĞîó§»›â) { return array($A—°¥¤ë¥§[28] => $this->pathThis($Dêá†™àÒù), $A—°¥¤ë¥§[76] => $this->getPathOuter($Dêá†™àÒù), $A—°¥¤ë¥§[29] => $A—°¥¤ë¥§[162], $A—°¥¤ë¥§[155] => $this->ext($Dêá†™àÒù), $A—°¥¤ë¥§[78] => isset($bˆò„®‡[$A—°¥¤ë¥§[78]]) ? $bˆò„®‡[$A—°¥¤ë¥§[78]] : 0, $A—°¥¤ë¥§[183] => $A—°¥¤ë¥§[50], $A—°¥¤ë¥§[106] => $A—°¥¤ë¥§[50], $A—°¥¤ë¥§[184] => !0, $A—°¥¤ë¥§[185] => !0); } $C÷ŒƒƒÂé = array($A—°¥¤ë¥§[28] => $this->pathThis($Dêá†™àÒù), $A—°¥¤ë¥§[76] => $this->getPathOuter($Dêá†™àÒù), $A—°¥¤ë¥§[29] => $A—°¥¤ë¥§[162], $A—°¥¤ë¥§[183] => $A—°¥¤ë¥§[50], $A—°¥¤ë¥§[106] => $A—°¥¤ë¥§[50], $A—°¥¤ë¥§[78] => 0, $A—°¥¤ë¥§[155] => $this->ext($Dêá†™àÒù), $A—°¥¤ë¥§[184] => !0, $A—°¥¤ë¥§[185] => !0); goto fÌë¹„É‹Í; EùÔ‹ä“½†: } private function folderInfo($EÃ£ƒ…ªÕ•, $Fö†‡İ¦–± = false) { goto DŠİ¶Í¬§; dà¡Ñ–’®ç: if ($EÃ£ƒ…ªÕ• == $eÑ¶ŞÉ®¼È[33]) { return $dáÀÁãºåÕ; } $EÃ£ƒ…ªÕ• = trim($EÃ£ƒ…ªÕ•, $eÑ¶ŞÉ®¼È[8]) . $eÑ¶ŞÉ®¼È[8]; $b×ã­·ö¯ = $this->objectMeta($EÃ£ƒ…ªÕ•); goto C‚ÏàŒóØ©; e©¼¼ˆªŞ˜: return $dáÀÁãºåÕ; goto A¶‡¾ù‹£Ã; C‚ÏàŒóØ©: if (!$b×ã­·ö¯) { return $dáÀÁãºåÕ; } if (isset($D—ËîŠÊ«©[$eÑ¶ŞÉ®¼È[186]])) { $dáÀÁãºåÕ[$eÑ¶ŞÉ®¼È[183]] = $D—ËîŠÊ«©[$eÑ¶ŞÉ®¼È[186]]; } if (isset($D—ËîŠÊ«©[$eÑ¶ŞÉ®¼È[186]])) { $dáÀÁãºåÕ[$eÑ¶ŞÉ®¼È[106]] = $D—ËîŠÊ«©[$eÑ¶ŞÉ®¼È[186]]; } goto e©¼¼ˆªŞ˜; DŠİ¶Í¬§: $eÑ¶ŞÉ®¼È =& $_SERVER[şÅ²é¤èİ]; if ($Fö†‡İ¦–±) { return array($eÑ¶ŞÉ®¼È[28] => $this->pathThis($EÃ£ƒ…ªÕ•), $eÑ¶ŞÉ®¼È[76] => $this->getPathOuter($eÑ¶ŞÉ®¼È[8] . $EÃ£ƒ…ªÕ•), $eÑ¶ŞÉ®¼È[29] => $eÑ¶ŞÉ®¼È[77], $eÑ¶ŞÉ®¼È[184] => !0, $eÑ¶ŞÉ®¼È[185] => !0); } $dáÀÁãºåÕ = array($eÑ¶ŞÉ®¼È[28] => $this->pathThis($EÃ£ƒ…ªÕ•), $eÑ¶ŞÉ®¼È[76] => $this->getPathOuter($eÑ¶ŞÉ®¼È[8] . $EÃ£ƒ…ªÕ•), $eÑ¶ŞÉ®¼È[29] => $eÑ¶ŞÉ®¼È[77], $eÑ¶ŞÉ®¼È[183] => $eÑ¶ŞÉ®¼È[50], $eÑ¶ŞÉ®¼È[106] => $eÑ¶ŞÉ®¼È[50], $eÑ¶ŞÉ®¼È[184] => !0, $eÑ¶ŞÉ®¼È[185] => !0); goto dà¡Ñ–’®ç; A¶‡¾ù‹£Ã: } public function listObjs($fùëá†¨ªó, $c¨ôè¼ï ñ = null, $eÚ™ˆ‰ÑÓ = null, $e¸ã‹Šœ« = null) { $dâ½¦ò„®— =& $_SERVER[şÅ²é¤èİ]; $fùëá†¨ªó = trim($fùëá†¨ªó, $dâ½¦ò„®—[8]); $d«Ø¤Ø¾¦ì = empty($fùëá†¨ªó) ? $dâ½¦ò„®—[33] : $fùëá†¨ªó . $dâ½¦ò„®—[8]; return $this->client->getBucket($this->bucket, $d«Ø¤Ø¾¦ì, $c¨ôè¼ï ñ, $eÚ™ˆ‰ÑÓ, $e¸ã‹Šœ«, !0); } public function has($D –È¥Ã«¡, $EÕÂáÍÎ›‰ = false, $EÙŸ °ÏˆŸ = true) { goto aÊˆÎ”ÕŠŒ; a›‡Ñ¨ˆõ: $a‹ØñŒ† Ô = $this->listObjs($D –È¥Ã«¡, null, null, $a„à½Ñ¡Œã[8]); $a‹ØñŒ† Ô = is_array($a‹ØñŒ† Ô) ? $a‹ØñŒ† Ô : array(); foreach ($a‹ØñŒ† Ô as $C¨½‹›–§§) { if (isset($C¨½‹›–§§[$a„à½Ñ¡Œã[28]]) && substr($C¨½‹›–§§[$a„à½Ñ¡Œã[28]], -1) != $a„à½Ñ¡Œã[8]) { if (!$EÕÂáÍÎ›‰ && $EÙŸ °ÏˆŸ) { return !0; } $d²¡Ãåµ¢++; } else { if (isset($C¨½‹›–§§[$a„à½Ñ¡Œã[181]])) { if (!$EÕÂáÍÎ›‰ && !$EÙŸ °ÏˆŸ) { return !1; } $Cä¶ƒœàò¢++; } } } goto d•×ºŸõ–—; d•×ºŸõ–—: if ($EÕÂáÍÎ›‰) { return array($a„à½Ñ¡Œã[187] => $d²¡Ãåµ¢, $a„à½Ñ¡Œã[188] => $Cä¶ƒœàò¢); } return !1; goto B´Õ¡¼æóö; aÊˆÎ”ÕŠŒ: $a„à½Ñ¡Œã =& $_SERVER[şÅ²é¤èİ]; $d²¡Ãåµ¢ = 0; $Cä¶ƒœàò¢ = 0; goto a›‡Ñ¨ˆõ; B´Õ¡¼æóö: } public function listAll($C›İÑÎÑ®Ğ) { $d—ÌòïŸÈè =& $_SERVER[şÅ²é¤èİ]; $dÙ–ëì‡¶‹ = $this->listObjs($C›İÑÎÑ®Ğ); $aàĞ­‘íÑ× = $cÚîÆÂİÄ = array(); foreach ($dÙ–ëì‡¶‹ as $d˜†™­í¸” => $D¢½ä·¨ê) { $aàĞ­‘íÑ×[] = $D¢½ä·¨ê[$d—ÌòïŸÈè[28]]; $cÚîÆÂİÄ[$d˜†™­í¸”] = $D¢½ä·¨ê[$d—ÌòïŸÈè[78]]; } return $this->listAllFiles($C›İÑÎÑ®Ğ, $aàĞ­‘íÑ×, $cÚîÆÂİÄ); } public function canRead($A‘‚ƒÂ‰Ÿ‚) { $CÛËºò Ğó =& $_SERVER[şÅ²é¤èİ]; $a©¬Ç„·‘ = $this->client->getAccessControlPolicy($this->bucket, $A‘‚ƒÂ‰Ÿ‚); if (!$a©¬Ç„·‘) { return !1; } return in_array($a©¬Ç„·‘, array($CÛËºò Ğó[189], $CÛËºò Ğó[190], $CÛËºò Ğó[191])) ? !0 : !1; } public function canWrite($B™áÄßº…ë) { $D Ï¾‘õÇ =& $_SERVER[şÅ²é¤èİ]; $D‰êŠ›­Ú = $this->client->getAccessControlPolicy($this->bucket, $B™áÄßº…ë); if (!$D‰êŠ›­Ú) { return !1; } return in_array($D‰êŠ›­Ú, array($D Ï¾‘õÇ[189], $D Ï¾‘õÇ[190])) ? !0 : !1; } public function getContent($EäùŠŠ›½®) { return $this->client->getObject($this->bucket, $EäùŠŠ›½®); } public function setContent($BÉì©é´êñ, $FŞæ±‹ê÷‚ = '', $FÖ¿±×Ò¨ = false) { goto eŒ÷²éÙö; eŒ÷²éÙö: $E£Š˜§Ö½ø =& $_SERVER[şÅ²é¤èİ]; $this->objectMetaReset($BÉì©é´êñ); $BÉì©é´êñ = $FÖ¿±×Ò¨ ? trim($BÉì©é´êñ, $E£Š˜§Ö½ø[8]) . $E£Š˜§Ö½ø[8] : $BÉì©é´êñ; goto DÛåˆ¦³½¼; DÛåˆ¦³½¼: $AÑŞ‘©Ñ’× = get_file_mime(get_path_ext($BÉì©é´êñ)); $FÖÈÛ¡¬¡Ë = $this->client->putObject($FŞæ±‹ê÷‚, $this->bucket, $BÉì©é´êñ, $E£Š˜§Ö½ø[180], array(), $AÑŞ‘©Ñ’×); if (!$FÖÈÛ¡¬¡Ë) { return !1; } goto E‘„âÒÍ°; E‘„âÒÍ°: if ($FÖ¿±×Ò¨) { return !0; } $FÖÈÛ¡¬¡Ë = $this->copyFile($BÉì©é´êñ, $BÉì©é´êñ, array($E£Š˜§Ö½ø[192] => $FÖÈÛ¡¬¡Ë[$E£Š˜§Ö½ø[193]])); return $FÖÈÛ¡¬¡Ë ? !0 : !1; goto Eƒ°»Ù¶È; Eƒ°»Ù¶È: } public function fileSubstr($Cºß„¶ßİ, $d‰è„à±è±, $FÃô‰‰‡İ) { $d…À«ÚáÀ© = $d‰è„à±è± + $FÃô‰‰‡İ - 1; return $this->client->getObject($this->bucket, $Cºß„¶ßİ, array($_SERVER[şÅ²é¤èİ][194] => "\142\x79\164\x65\163\75{$d‰è„à±è±}\x2d{$d…À«ÚáÀ©}")); } public function upload($e‚‹éÏî ñ, $DÑó³Ê²ç, $F´ÓæĞ”„Ÿ = false, $F‚£É’®®ã = REPEAT_REPLACE) { $EÌñ²Ò†„¯ =& $_SERVER[şÅ²é¤èİ]; $Bô›É¬ÎÕ = array($EÌñ²Ò†„¯[192] => @md5_file($DÑó³Ê²ç)); $EÏñˆÚª¥æ = array($EÌñ²Ò†„¯[195] => get_file_mime(get_path_ext($e‚‹éÏî ñ))); if (IO::size($DÑó³Ê²ç) <= 1024 * 1024 * 200) { $b«éç¸ê = $this->client->putObjectFile($DÑó³Ê²ç, $this->bucket, $e‚‹éÏî ñ, $EÌñ²Ò†„¯[180], $Bô›É¬ÎÕ, $EÏñˆÚª¥æ); return !empty($b«éç¸ê) ? $this->getPathOuter($e‚‹éÏî ñ) : !1; } $DñŸè³Êœ˜ = $this->client->multiUploadObject($DÑó³Ê²ç, $this->bucket, trim($e‚‹éÏî ñ, $EÌñ²Ò†„¯[8]), $Bô›É¬ÎÕ, $EÏñˆÚª¥æ); return $DñŸè³Êœ˜ ? $this->getPathOuter($e‚‹éÏî ñ) : !1; } public function download($CØ‘õ¼¬àª, $AùÆ‡½øæô) { if (!@is_dir($this->pathFather($AùÆ‡½øæô)) && !IO::mkdir($this->pathFather($AùÆ‡½øæô))) { return !1; } $Dİ‹Ãæ¤ßà = $this->client->getObject($this->bucket, $CØ‘õ¼¬àª, array(), $AùÆ‡½øæô); return $Dİ‹Ãæ¤ßà !== !1 ? $AùÆ‡½øæô : !1; } public function link($D—Œ‘îÂÉñ, $BƒÒ±«ì³ = array()) { $fˆ®Ãå¨ä˜ =& $_SERVER[şÅ²é¤èİ]; if ($this->signVer == $fˆ®Ãå¨ä˜[196]) { return $this->client->getAuthenticatedURL($this->bucket, $D—Œ‘îÂÉñ, 3600 * 12, $BƒÒ±«ì³); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($D—Œ‘îÂÉñ, $fˆ®Ãå¨ä˜[8]), 3600 * 12, $this->region, array(), !0, $BƒÒ±«ì³); } public function fileOut($FŸÜéİÒŞƒ, $B‡Ùöè¯ŒÓ = false, $bÇøÉ»Î¿ğ = false, $c¢ÊÌ‰Ö¨µ = '') { goto e×‘ÇÓ‚”×; e×‘ÇÓ‚”×: $aÌÌÓ¢§³Å =& $_SERVER[şÅ²é¤èİ]; if (!$bÇøÉ»Î¿ğ) { $bÇøÉ»Î¿ğ = $this->pathThis($FŸÜéİÒŞƒ); } $a­ÕÔå´Äé = get_file_mime(get_path_ext($bÇøÉ»Î¿ğ)); goto f¢ò” Øµ; f¢ò” Øµ: if ($a­ÕÔå´Äé == $aÌÌÓ¢§³Å[197]) { return parent::fileOut($FŸÜéİÒŞƒ, $B‡Ùöè¯ŒÓ, $bÇøÉ»Î¿ğ, $c¢ÊÌ‰Ö¨µ); } $B‡Ùöè¯ŒÓ = $B‡Ùöè¯ŒÓ ? $aÌÌÓ¢§³Å[198] : $aÌÌÓ¢§³Å[199]; $F›â”ŒÁ¦ = array($aÌÌÓ¢§³Å[200] => $B‡Ùöè¯ŒÓ . $aÌÌÓ¢§³Å[201] . rawurlencode($bÇøÉ»Î¿ğ), $aÌÌÓ¢§³Å[202] => $a­ÕÔå´Äé); goto Dˆì•ïŠÑ¼; Dˆì•ïŠÑ¼: $b¿™Ó´…š£ = $this->link($FŸÜéİÒŞƒ, $F›â”ŒÁ¦); $this->fileOutLink($b¿™Ó´…š£); goto E°¾Ùâ–Œá; E°¾Ùâ–Œá: } public function fileOutServer($C©îË¦•‚Ë, $D©…µ¦šˆ» = false, $eÖë’“¬Ò¬ = false, $aï¢«¬ÉÈ‚ = '') { parent::fileOut($C©îË¦•‚Ë, $D©…µ¦šˆ», $eÖë’“¬Ò¬, $aï¢«¬ÉÈ‚); } public function fileOutImage($C„´´ŒÓƒœ, $Cç¼‡ Æš = 250) { $B›„Š®ô = $this->link($C„´´ŒÓƒœ); $this->fileOutLink($B›„Š®ô); } public function fileOutImageServer($e½©ø‡Äë, $C°–Îœì² = 250) { parent::fileOutImage($e½©ø‡Äë, $C°–Îœì²); } public function hashMd5($BÆÇÖ‰¹–Ş, $b¡ËÄÆæÀê = '') { $d°«‚Ğ£Ö¶ =& $_SERVER[şÅ²é¤èİ]; $d££Ï‡¦š = $this->objectMeta($BÆÇÖ‰¹–Ş); if (!$d££Ï‡¦š) { return !1; } if (!isset($d££Ï‡¦š[$d°«‚Ğ£Ö¶[203]]) && !empty($b¡ËÄÆæÀê)) { $bŸî¦Å²® = $this->copyFile($BÆÇÖ‰¹–Ş, $BÆÇÖ‰¹–Ş, array($d°«‚Ğ£Ö¶[192] => $b¡ËÄÆæÀê)); $d££Ï‡¦š[$d°«‚Ğ£Ö¶[203]] = $bŸî¦Å²® ? $b¡ËÄÆæÀê : $d°«‚Ğ£Ö¶[33]; } return isset($d££Ï‡¦š[$d°«‚Ğ£Ö¶[203]]) ? $d££Ï‡¦š[$d°«‚Ğ£Ö¶[203]] : $d°«‚Ğ£Ö¶[33]; } public function uploadFormData($d°„Á²ñŒ, $f—Ş¾Œ„÷Ï = 3600) { $d•½‡•İƒ³ =& $_SERVER[şÅ²é¤èİ]; $B•ÏŠ«  = $this->pathFather($d°„Á²ñŒ); $A‡‰¢éŒ†‚ = $this->client->getHttpUploadPostParams($this->bucket, $B•ÏŠ« , $d•½‡•İƒ³[180], $f—Ş¾Œ„÷Ï); return array_merge((array) $A‡‰¢éŒ†‚, array($d•½‡•İƒ³[164] => $this->getHost())); } public function multiUploadFormData($DÑîù¸© , $Eˆä­æŞÖ… = 3600) { $b×³ãê°Í =& $_SERVER[şÅ²é¤èİ]; $b‡ºæ — = gmdate($b×³ãê°Í[204]); $C‹ÔîÑ÷· = array(); $EÈèßÛ²Ïä = $this->client->getUploadId($this->bucket, $DÑîù¸© , $C‹ÔîÑ÷·); if (!$EÈèßÛ²Ïä) { return !1; } return array($b×³ãê°Í[205] => $EÈèßÛ²Ïä, $b×³ãê°Í[164] => $this->getHost() . $b×³ãê°Í[8] . $this->pathEncode($DÑîù¸© ), $b×³ãê°Í[206] => $b‡ºæ —, $b×³ãê°Í[88] => $DÑîù¸© ); } public function multiUploadAuthData($fğ¶«òé, $c‘Œˆªé´Š = array()) { goto E¼ñé‡Û÷; B¤âèñó¨: $BÆ¾ ó·Õ = $F“•ßÊƒáª[215] . $this->accessKey . $F“•ßÊƒáª[4] . $bêˆ•³Æ¨; if (strpos($bÛœñ“áÅ², $F“•ßÊƒáª[209]) === 0) { return array($F“•ßÊƒáª[216] => $BÆ¾ ó·Õ, $F“•ßÊƒáª[206] => $f²±õ£œÑ©); } return $BÆ¾ ó·Õ; goto Aš«ÀŸÔ¨; cŒ½îÀò: if (isset($c‘Œˆªé´Š[$F“•ßÊƒáª[207]])) { return $this->listUploadParts($dÙ‚‚œªíœ, $c‘Œˆªé´Š); } $E´›Ûµ† Ü = array($F“•ßÊƒáª[208], $F“•ßÊƒáª[33], $F“•ßÊƒáª[115], $F“•ßÊƒáª[33], "\170\x2d\141\x6d\172\x2d\144\x61\x74\145\x3a{$f²±õ£œÑ©}", $F“•ßÊƒáª[8] . $this->bucket . $F“•ßÊƒáª[8] . $this->pathEncode($dÙ‚‚œªíœ) . $bÛœñ“áÅ²); if (strpos($bÛœñ“áÅ², $F“•ßÊƒáª[209]) === 0) { $E´›Ûµ† Ü[0] = $F“•ßÊƒáª[210]; } goto a‹¡‰èÓÕŒ; Dç˜¡‘ÄÖ™: $bÛœñ“áÅ² = isset($c‘Œˆªé´Š[$F“•ßÊƒáª[155]]) ? $c‘Œˆªé´Š[$F“•ßÊƒáª[155]] : $F“•ßÊƒáª[33]; $dÙ‚‚œªíœ = $c‘Œˆªé´Š[$F“•ßÊƒáª[88]]; unset($c‘Œˆªé´Š[$F“•ßÊƒáª[88]]); goto cŒ½îÀò; a‹¡‰èÓÕŒ: if (isset($c‘Œˆªé´Š[$F“•ßÊƒáª[211]]) && $c‘Œˆªé´Š[$F“•ßÊƒáª[211]] == $F“•ßÊƒáª[212]) { $E´›Ûµ† Ü[0] = $F“•ßÊƒáª[212]; } $F‹°«°ƒÏ = implode($F“•ßÊƒáª[213], $E´›Ûµ† Ü); $bêˆ•³Æ¨ = base64_encode(hash_hmac($F“•ßÊƒáª[214], $F‹°«°ƒÏ, $this->secret, !0)); goto B¤âèñó¨; E¼ñé‡Û÷: $F“•ßÊƒáª =& $_SERVER[şÅ²é¤èİ]; $f²±õ£œÑ© = isset($c‘Œˆªé´Š[$F“•ßÊƒáª[206]]) ? $c‘Œˆªé´Š[$F“•ßÊƒáª[206]] : gmdate($F“•ßÊƒáª[204]); $c‘Œˆªé´Š[$F“•ßÊƒáª[206]] = $f²±õ£œÑ©; goto Dç˜¡‘ÄÖ™; Aš«ÀŸÔ¨: } public function listUploadParts($bíÀ©ƒâ™Ü, $FÂ¶îñÔæ  = array()) { goto D–Ş—Û‰…æ; D–Ş—Û‰…æ: $BñÄ±Í™í =& $_SERVER[şÅ²é¤èİ]; $câäÜ°á¾‡ = str_replace($BñÄ±Í™í[217], $BñÄ±Í™í[33], $FÂ¶îñÔæ [$BñÄ±Í™í[155]]); $c»¬©ñ”ô· = $this->client->listParts($this->bucket, $bíÀ©ƒâ™Ü, $câäÜ°á¾‡); goto aƒğÃÎ„”å; aƒğÃÎ„”å: if (!$c»¬©ñ”ô·) { return !1; } unset($FÂ¶îñÔæ [$BñÄ±Í™í[207]], $FÂ¶îñÔæ [$BñÄ±Í™í[211]]); $FÂ¶îñÔæ [$BñÄ±Í™í[88]] = $bíÀ©ƒâ™Ü; goto dßã¶ßÇà ; dßã¶ßÇà : $aìÍ£ã„ƒ¨ = $this->multiUploadAuthData($bíÀ©ƒâ™Ü, $FÂ¶îñÔæ ); if (empty($aìÍ£ã„ƒ¨)) { return !1; } return array($BñÄ±Í™í[216] => $aìÍ£ã„ƒ¨, $BñÄ±Í™í[206] => $FÂ¶îñÔæ [$BñÄ±Í™í[206]], $BñÄ±Í™í[218] => $c»¬©ñ”ô·); goto CÔ‘Äô‡‰; CÔ‘Äô‡‰: } public function getHost() { return parent::getHost() . $_SERVER[şÅ²é¤èİ][8] . $this->bucket; } public function objectMeta($e¶·„Êİ³) { $C®µœÄÃØÉ =& $_SERVER[şÅ²é¤èİ]; $D‰šåÍŸäĞ = $this->subName() . $C®µœÄÃØÉ[219] . md5($this->bucket . $e¶·„Êİ³); if (Cache::get($D‰šåÍŸäĞ)) { return Cache::get($D‰šåÍŸäĞ); } try { $Aœ’†Ûù½— = $this->client->getObjectInfo($this->bucket, $e¶·„Êİ³); if (!$Aœ’†Ûù½—) { if (!substr($e¶·„Êİ³, -1) == $C®µœÄÃØÉ[8]) { return !1; } if (empty($this->listObjs($e¶·„Êİ³, null, 1))) { return !1; } $Aœ’†Ûù½— = array($C®µœÄÃØÉ[29] => $C®µœÄÃØÉ[77]); Cache::set($D‰šåÍŸäĞ, $Aœ’†Ûù½—, 0); return $Aœ’†Ûù½—; } if (!isset($Aœ’†Ûù½—[$C®µœÄÃØÉ[203]]) && isset($Aœ’†Ûù½—[$C®µœÄÃØÉ[220]])) { $Aœ’†Ûù½—[$C®µœÄÃØÉ[203]] = $Aœ’†Ûù½—[$C®µœÄÃØÉ[220]]; } if (substr($e¶·„Êİ³, -1) == $C®µœÄÃØÉ[8] || $Aœ’†Ûù½—[$C®µœÄÃØÉ[78]] != 0 && $Aœ’†Ûù½—[$C®µœÄÃØÉ[29]] != $C®µœÄÃØÉ[115] && $Aœ’†Ûù½—[$C®µœÄÃØÉ[203]] == md5($C®µœÄÃØÉ[33])) { $Aœ’†Ûù½—[$C®µœÄÃØÉ[29]] = $C®µœÄÃØÉ[77]; } else { $Aœ’†Ûù½—[$C®µœÄÃØÉ[29]] = $C®µœÄÃØÉ[162]; } Cache::set($D‰šåÍŸäĞ, $Aœ’†Ûù½—, 0); } catch (OSS\Core\OssException $CªÅ”…‘½£) { return !1; } return $Aœ’†Ûù½—; } private function objectMetaReset($eè””¿¢ĞØ) { $F»Ò¢¯œŞ¯ = $this->subName() . $_SERVER[şÅ²é¤èİ][219] . md5($this->bucket . $eè””¿¢ĞØ); Cache::remove($F»Ò¢¯œŞ¯); } private function subName() { $F·õ†ÇÊï‰ =& $_SERVER[şÅ²é¤èİ]; return strtolower(str_replace($F·õ†ÇÊï‰[72], $F·õ†ÇÊï‰[33], get_class($this))); } } define($_SERVER[şÅ²é¤èİ][221], 1); goto F†Î›¾Š¾; bÖé¨ŒÍÉ: define($_SERVER[şÅ²é¤èİ][1843], 16); define($_SERVER[şÅ²é¤èİ][1844], 32); class Services_JSON { function __construct($eÎÑ´ŒÆçà = 0) { $this->use = $eÎÑ´ŒÆçà; } function utf162utf8($e»Àİ«¢Š«) { $aœìèÉ· =& $_SERVER[şÅ²é¤èİ]; if (function_exists($aœìèÉ·[69])) { return mb_convert_encoding($e»Àİ«¢Š«, $aœìèÉ·[1494], $aœìèÉ·[1845]); } $cğ­Ñ‚Ôâ = ord($e»Àİ«¢Š«[0]) << 8 | ord($e»Àİ«¢Š«[1]); switch (!0) { case (127 & $cğ­Ñ‚Ôâ) == $cğ­Ñ‚Ôâ: return chr(127 & $cğ­Ñ‚Ôâ); case (2047 & $cğ­Ñ‚Ôâ) == $cğ­Ñ‚Ôâ: return chr(192 | $cğ­Ñ‚Ôâ >> 6 & 31) . chr(128 | $cğ­Ñ‚Ôâ & 63); case (65535 & $cğ­Ñ‚Ôâ) == $cğ­Ñ‚Ôâ: return chr(224 | $cğ­Ñ‚Ôâ >> 12 & 15) . chr(128 | $cğ­Ñ‚Ôâ >> 6 & 63) . chr(128 | $cğ­Ñ‚Ôâ & 63); } return $aœìèÉ·[33]; } function utf82utf16($FÆÑƒ˜Ğ­Ô) { $a¶¸˜Œíã¶ =& $_SERVER[şÅ²é¤èİ]; if (function_exists($a¶¸˜Œíã¶[69])) { return mb_convert_encoding($FÆÑƒ˜Ğ­Ô, $a¶¸˜Œíã¶[1845], $a¶¸˜Œíã¶[1494]); } switch (strlen($FÆÑƒ˜Ğ­Ô)) { case 1: return $FÆÑƒ˜Ğ­Ô; case 2: return chr(7 & ord($FÆÑƒ˜Ğ­Ô[0]) >> 2) . chr(192 & ord($FÆÑƒ˜Ğ­Ô[0]) << 6 | 63 & ord($FÆÑƒ˜Ğ­Ô[1])); case 3: return chr(240 & ord($FÆÑƒ˜Ğ­Ô[0]) << 4 | 15 & ord($FÆÑƒ˜Ğ­Ô[1]) >> 2) . chr(192 & ord($FÆÑƒ˜Ğ­Ô[1]) << 6 | 127 & ord($FÆÑƒ˜Ğ­Ô[2])); } return $a¶¸˜Œíã¶[33]; } function encode($CêÚ¢–õ‹Í) { $EÏŞŒ’Ì¤÷ =& $_SERVER[şÅ²é¤èİ]; switch (gettype($CêÚ¢–õ‹Í)) { case $EÏŞŒ’Ì¤÷[1505]: return $CêÚ¢–õ‹Í ? $EÏŞŒ’Ì¤÷[1504] : $EÏŞŒ’Ì¤÷[1506]; case $EÏŞŒ’Ì¤÷[1846]: return $EÏŞŒ’Ì¤÷[100]; case $EÏŞŒ’Ì¤÷[297]: return (int) $CêÚ¢–õ‹Í; case $EÏŞŒ’Ì¤÷[272]: case $EÏŞŒ’Ì¤÷[271]: return (double) $CêÚ¢–õ‹Í; case $EÏŞŒ’Ì¤÷[306]: $bÍÎê¦›’â = $EÏŞŒ’Ì¤÷[33]; $CïÕ•İø‚ë = strlen($CêÚ¢–õ‹Í); for ($a†Ë·â›òÛ = 0; $a†Ë·â›òÛ < $CïÕ•İø‚ë; ++$a†Ë·â›òÛ) { $Dˆòß„¢ = ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ]); switch (!0) { case $Dˆòß„¢ == 8: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[1847]; break; case $Dˆòß„¢ == 9: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[1481]; break; case $Dˆòß„¢ == 10: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[1479]; break; case $Dˆòß„¢ == 12: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[1848]; break; case $Dˆòß„¢ == 13: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[1480]; break; case $Dˆòß„¢ == 34: case $Dˆòß„¢ == 47: case $Dˆòß„¢ == 92: $bÍÎê¦›’â .= $EÏŞŒ’Ì¤÷[94] . $CêÚ¢–õ‹Í[$a†Ë·â›òÛ]; break; case $Dˆòß„¢ >= 32 && $Dˆòß„¢ <= 127: $bÍÎê¦›’â .= $CêÚ¢–õ‹Í[$a†Ë·â›òÛ]; break; case ($Dˆòß„¢ & 224) == 192: $f‰èÈ‹Ü”½ = pack($EÏŞŒ’Ì¤÷[1849], $Dˆòß„¢, ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 1])); $a†Ë·â›òÛ += 1; $bº§‡ÖâÇ« = $this->utf82utf16($f‰èÈ‹Ü”½); $bÍÎê¦›’â .= sprintf($EÏŞŒ’Ì¤÷[1850], bin2hex($bº§‡ÖâÇ«)); break; case ($Dˆòß„¢ & 240) == 224: $f‰èÈ‹Ü”½ = pack($EÏŞŒ’Ì¤÷[1849], $Dˆòß„¢, ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 1]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 2])); $a†Ë·â›òÛ += 2; $bº§‡ÖâÇ« = $this->utf82utf16($f‰èÈ‹Ü”½); $bÍÎê¦›’â .= sprintf($EÏŞŒ’Ì¤÷[1850], bin2hex($bº§‡ÖâÇ«)); break; case ($Dˆòß„¢ & 248) == 240: $f‰èÈ‹Ü”½ = pack($EÏŞŒ’Ì¤÷[1849], $Dˆòß„¢, ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 1]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 2]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 3])); $a†Ë·â›òÛ += 3; $bº§‡ÖâÇ« = $this->utf82utf16($f‰èÈ‹Ü”½); $bÍÎê¦›’â .= sprintf($EÏŞŒ’Ì¤÷[1850], bin2hex($bº§‡ÖâÇ«)); break; case ($Dˆòß„¢ & 252) == 248: $f‰èÈ‹Ü”½ = pack($EÏŞŒ’Ì¤÷[1849], $Dˆòß„¢, ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 1]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 2]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 3]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 4])); $a†Ë·â›òÛ += 4; $bº§‡ÖâÇ« = $this->utf82utf16($f‰èÈ‹Ü”½); $bÍÎê¦›’â .= sprintf($EÏŞŒ’Ì¤÷[1850], bin2hex($bº§‡ÖâÇ«)); break; case ($Dˆòß„¢ & 254) == 252: $f‰èÈ‹Ü”½ = pack($EÏŞŒ’Ì¤÷[1849], $Dˆòß„¢, ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 1]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 2]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 3]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 4]), ord($CêÚ¢–õ‹Í[$a†Ë·â›òÛ + 5])); $a†Ë·â›òÛ += 5; $bº§‡ÖâÇ« = $this->utf82utf16($f‰èÈ‹Ü”½); $bÍÎê¦›’â .= sprintf($EÏŞŒ’Ì¤÷[1850], bin2hex($bº§‡ÖâÇ«)); break; } } return $EÏŞŒ’Ì¤÷[112] . $bÍÎê¦›’â . $EÏŞŒ’Ì¤÷[112]; case $EÏŞŒ’Ì¤÷[1851]: if (is_array($CêÚ¢–õ‹Í) && count($CêÚ¢–õ‹Í) && array_keys($CêÚ¢–õ‹Í) !== range(0, sizeof($CêÚ¢–õ‹Í) - 1)) { $CË‡²†å­‘ = array_map(array($this, $EÏŞŒ’Ì¤÷[1852]), array_keys($CêÚ¢–õ‹Í), array_values($CêÚ¢–õ‹Í)); foreach ($CË‡²†å­‘ as $d„Ùœ¼ù¶Õ) { if (Services_JSON::isError($d„Ùœ¼ù¶Õ)) { return $d„Ùœ¼ù¶Õ; } } return $EÏŞŒ’Ì¤÷[1043] . join($EÏŞŒ’Ì¤÷[47], $CË‡²†å­‘) . $EÏŞŒ’Ì¤÷[309]; } $eßšÀº¢¡ì = array_map(array($this, $EÏŞŒ’Ì¤÷[1853]), $CêÚ¢–õ‹Í); foreach ($eßšÀº¢¡ì as $c›ğ™Ç§ó) { if (Services_JSON::isError($c›ğ™Ç§ó)) { return $c›ğ™Ç§ó; } } return $EÏŞŒ’Ì¤÷[465] . join($EÏŞŒ’Ì¤÷[47], $eßšÀº¢¡ì) . $EÏŞŒ’Ì¤÷[466]; case $EÏŞŒ’Ì¤÷[1854]: $AùĞ”ÍÙÛĞ = get_object_vars($CêÚ¢–õ‹Í); $CË‡²†å­‘ = array_map(array($this, $EÏŞŒ’Ì¤÷[1852]), array_keys($AùĞ”ÍÙÛĞ), array_values($AùĞ”ÍÙÛĞ)); foreach ($CË‡²†å­‘ as $d„Ùœ¼ù¶Õ) { if (Services_JSON::isError($d„Ùœ¼ù¶Õ)) { return $d„Ùœ¼ù¶Õ; } } return $EÏŞŒ’Ì¤÷[1043] . join($EÏŞŒ’Ì¤÷[47], $CË‡²†å­‘) . $EÏŞŒ’Ì¤÷[309]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $EÏŞŒ’Ì¤÷[100] : new Services_JSON_Error(gettype($CêÚ¢–õ‹Í) . $EÏŞŒ’Ì¤÷[1855]); } } function name_value($AĞåÇ¾…¢Å, $e¢¡ëÚ½ê…) { $e¾¸ïç§ = $this->encode($e¢¡ëÚ½ê…); if (Services_JSON::isError($e¾¸ïç§)) { return $e¾¸ïç§; } return $this->encode(strval($AĞåÇ¾…¢Å)) . $_SERVER[şÅ²é¤èİ][4] . $e¾¸ïç§; } function reduce_string($FÑô—ç£Í¦) { $EîÍç±—ã¦ =& $_SERVER[şÅ²é¤èİ]; $FÑô—ç£Í¦ = preg_replace(array($EîÍç±—ã¦[1856], $EîÍç±—ã¦[1857], $EîÍç±—ã¦[1858]), $EîÍç±—ã¦[33], $FÑô—ç£Í¦); return trim($FÑô—ç£Í¦); } function decode($AŒá‚„óÎ) { $Fğ­¢™îï¥ =& $_SERVER[şÅ²é¤èİ]; $AŒá‚„óÎ = $this->reduce_string($AŒá‚„óÎ); switch (strtolower($AŒá‚„óÎ)) { case $Fğ­¢™îï¥[1504]: return !0; case $Fğ­¢™îï¥[1506]: return !1; case $Fğ­¢™îï¥[100]: return null; default: $c¬ÒôÁ†ù = array(); if (is_numeric($AŒá‚„óÎ)) { return (double) $AŒá‚„óÎ == (int) $AŒá‚„óÎ ? (int) $AŒá‚„óÎ : (double) $AŒá‚„óÎ; } elseif (preg_match($Fğ­¢™îï¥[1859], $AŒá‚„óÎ, $c¬ÒôÁ†ù) && $c¬ÒôÁ†ù[1] == $c¬ÒôÁ†ù[2]) { $EÙŠ…¹§Ú‚ = substr($AŒá‚„óÎ, 0, 1); $A¢µ ŞŠ“ = substr($AŒá‚„óÎ, 1, -1); $E¾Ì—Ü¦– = $Fğ­¢™îï¥[33]; $eŠŸŠ¶èÉê = strlen($A¢µ ŞŠ“); for ($Fìˆ¢Ş‘šˆ = 0; $Fìˆ¢Ş‘šˆ < $eŠŸŠ¶èÉê; ++$Fìˆ¢Ş‘šˆ) { $FïÍÈÊÂ³‚ = substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 2); $AºíÍÃ—À = ord($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ]); switch (!0) { case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1847]: $E¾Ì—Ü¦– .= chr(8); ++$Fìˆ¢Ş‘šˆ; break; case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1481]: $E¾Ì—Ü¦– .= chr(9); ++$Fìˆ¢Ş‘šˆ; break; case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1479]: $E¾Ì—Ü¦– .= chr(10); ++$Fìˆ¢Ş‘šˆ; break; case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1848]: $E¾Ì—Ü¦– .= chr(12); ++$Fìˆ¢Ş‘šˆ; break; case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1480]: $E¾Ì—Ü¦– .= chr(13); ++$Fìˆ¢Ş‘šˆ; break; case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1255]: case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1860]: case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1474]: case $FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1476]: if ($EÙŠ…¹§Ú‚ == $Fğ­¢™îï¥[112] && $FïÍÈÊÂ³‚ != $Fğ­¢™îï¥[1860] || $EÙŠ…¹§Ú‚ == $Fğ­¢™îï¥[55] && $FïÍÈÊÂ³‚ != $Fğ­¢™îï¥[1255]) { $E¾Ì—Ü¦– .= $A¢µ ŞŠ“[++$Fìˆ¢Ş‘šˆ]; } break; case preg_match($Fğ­¢™îï¥[1861], substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 6)): $Aæ“İÅƒ = chr(hexdec(substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ + 2, 2))) . chr(hexdec(substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ + 4, 2))); $E¾Ì—Ü¦– .= $this->utf162utf8($Aæ“İÅƒ); $Fìˆ¢Ş‘šˆ += 5; break; case $AºíÍÃ—À >= 32 && $AºíÍÃ—À <= 127: $E¾Ì—Ü¦– .= $A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ]; break; case ($AºíÍÃ—À & 224) == 192: $E¾Ì—Ü¦– .= substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 2); ++$Fìˆ¢Ş‘šˆ; break; case ($AºíÍÃ—À & 240) == 224: $E¾Ì—Ü¦– .= substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 3); $Fìˆ¢Ş‘šˆ += 2; break; case ($AºíÍÃ—À & 248) == 240: $E¾Ì—Ü¦– .= substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 4); $Fìˆ¢Ş‘šˆ += 3; break; case ($AºíÍÃ—À & 252) == 248: $E¾Ì—Ü¦– .= substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 5); $Fìˆ¢Ş‘šˆ += 4; break; case ($AºíÍÃ—À & 254) == 252: $E¾Ì—Ü¦– .= substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 6); $Fìˆ¢Ş‘šˆ += 5; break; } } return $E¾Ì—Ü¦–; } elseif (preg_match($Fğ­¢™îï¥[1862], $AŒá‚„óÎ) || preg_match($Fğ­¢™îï¥[1863], $AŒá‚„óÎ)) { goto BöÏÒÌé”¾; BöÏÒÌé”¾: if ($AŒá‚„óÎ[0] == $Fğ­¢™îï¥[465]) { $f”»¹„«ÏÍ = array(SERVICES_JSON_IN_ARR); $CÜÉñÑôÚ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $f”»¹„«ÏÍ = array(SERVICES_JSON_IN_OBJ); $A…©ìí’ƒÍ = array(); } else { $f”»¹„«ÏÍ = array(SERVICES_JSON_IN_OBJ); $A…©ìí’ƒÍ = new stdClass(); } } array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_SLICE, $Fğ­¢™îï¥[257] => 0, $Fğ­¢™îï¥[1865] => !1)); $A¢µ ŞŠ“ = substr($AŒá‚„óÎ, 1, -1); goto a«öğˆ˜­; a«öğˆ˜­: $A¢µ ŞŠ“ = $this->reduce_string($A¢µ ŞŠ“); if ($A¢µ ŞŠ“ == $Fğ­¢™îï¥[33]) { if (reset($f”»¹„«ÏÍ) == SERVICES_JSON_IN_ARR) { return $CÜÉñÑôÚ; } else { return $A…©ìí’ƒÍ; } } $eŠŸŠ¶èÉê = strlen($A¢µ ŞŠ“); goto B¬âç…°•Í; B¬âç…°•Í: for ($Fìˆ¢Ş‘šˆ = 0; $Fìˆ¢Ş‘šˆ <= $eŠŸŠ¶èÉê; ++$Fìˆ¢Ş‘šˆ) { $BÑÒ¹›²Œ = end($f”»¹„«ÏÍ); $FïÍÈÊÂ³‚ = substr($A¢µ ŞŠ“, $Fìˆ¢Ş‘šˆ, 2); if ($Fìˆ¢Ş‘šˆ == $eŠŸŠ¶èÉê || $A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[47] && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] == SERVICES_JSON_SLICE) { $FÁ…§†Şğ¢ = substr($A¢µ ŞŠ“, $BÑÒ¹›²Œ[$Fğ­¢™îï¥[257]], $Fìˆ¢Ş‘šˆ - $BÑÒ¹›²Œ[$Fğ­¢™îï¥[257]]); array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_SLICE, $Fğ­¢™îï¥[257] => $Fìˆ¢Ş‘šˆ + 1, $Fğ­¢™îï¥[1865] => !1)); if (reset($f”»¹„«ÏÍ) == SERVICES_JSON_IN_ARR) { array_push($CÜÉñÑôÚ, $this->decode($FÁ…§†Şğ¢)); } elseif (reset($f”»¹„«ÏÍ) == SERVICES_JSON_IN_OBJ) { $AÂ³‰½´ò½ = array(); if (preg_match($Fğ­¢™îï¥[1866], $FÁ…§†Şğ¢, $AÂ³‰½´ò½)) { $D‹Ğò«ëå = $this->decode($AÂ³‰½´ò½[1]); $eğÇ—ĞÆ¬È = $this->decode($AÂ³‰½´ò½[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $A…©ìí’ƒÍ[$D‹Ğò«ëå] = $eğÇ—ĞÆ¬È; } else { $A…©ìí’ƒÍ->{$D‹Ğò«ëå} = $eğÇ—ĞÆ¬È; } } elseif (preg_match($Fğ­¢™îï¥[1867], $FÁ…§†Şğ¢, $AÂ³‰½´ò½)) { $D‹Ğò«ëå = $AÂ³‰½´ò½[1]; $eğÇ—ĞÆ¬È = $this->decode($AÂ³‰½´ò½[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $A…©ìí’ƒÍ[$D‹Ğò«ëå] = $eğÇ—ĞÆ¬È; } else { $A…©ìí’ƒÍ->{$D‹Ğò«ëå} = $eğÇ—ĞÆ¬È; } } } } elseif (($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[112] || $A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[55]) && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] != SERVICES_JSON_IN_STR) { array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_IN_STR, $Fğ­¢™îï¥[257] => $Fìˆ¢Ş‘šˆ, $Fğ­¢™îï¥[1865] => $A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ])); } elseif ($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1865]] && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] == SERVICES_JSON_IN_STR && (strlen(substr($A¢µ ŞŠ“, 0, $Fìˆ¢Ş‘šˆ)) - strlen(rtrim(substr($A¢µ ŞŠ“, 0, $Fìˆ¢Ş‘šˆ), $Fğ­¢™îï¥[94]))) % 2 != 1) { array_pop($f”»¹„«ÏÍ); } elseif ($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[465] && in_array($BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_IN_ARR, $Fğ­¢™îï¥[257] => $Fìˆ¢Ş‘šˆ, $Fğ­¢™îï¥[1865] => !1)); } elseif ($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[466] && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] == SERVICES_JSON_IN_ARR) { array_pop($f”»¹„«ÏÍ); } elseif ($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[1043] && in_array($BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_IN_OBJ, $Fğ­¢™îï¥[257] => $Fìˆ¢Ş‘šˆ, $Fğ­¢™îï¥[1865] => !1)); } elseif ($A¢µ ŞŠ“[$Fìˆ¢Ş‘šˆ] == $Fğ­¢™îï¥[309] && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] == SERVICES_JSON_IN_OBJ) { array_pop($f”»¹„«ÏÍ); } elseif ($FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1868] && in_array($BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($f”»¹„«ÏÍ, array($Fğ­¢™îï¥[1864] => SERVICES_JSON_IN_CMT, $Fğ­¢™îï¥[257] => $Fìˆ¢Ş‘šˆ, $Fğ­¢™îï¥[1865] => !1)); $Fìˆ¢Ş‘šˆ++; } elseif ($FïÍÈÊÂ³‚ == $Fğ­¢™îï¥[1869] && $BÑÒ¹›²Œ[$Fğ­¢™îï¥[1864]] == SERVICES_JSON_IN_CMT) { array_pop($f”»¹„«ÏÍ); $Fìˆ¢Ş‘šˆ++; for ($AöŠ×Ñ…Õ = $BÑÒ¹›²Œ[$Fğ­¢™îï¥[257]]; $AöŠ×Ñ…Õ <= $Fìˆ¢Ş‘šˆ; ++$AöŠ×Ñ…Õ) { $A¢µ ŞŠ“ = substr_replace($A¢µ ŞŠ“, $Fğ­¢™îï¥[50], $AöŠ×Ñ…Õ, 1); } } } if (reset($f”»¹„«ÏÍ) == SERVICES_JSON_IN_ARR) { return $CÜÉñÑôÚ; } elseif (reset($f”»¹„«ÏÍ) == SERVICES_JSON_IN_OBJ) { return $A…©ìí’ƒÍ; } goto fŸ¾Ğ–•¦; fŸ¾Ğ–•¦: } } } function isError($C‰—²›×¼, $D«êŠÛØ˜´ = null) { $B¨ëà–ìò‹ =& $_SERVER[şÅ²é¤èİ]; if (class_exists($B¨ëà–ìò‹[1870])) { return PEAR::isError($C‰—²›×¼, $D«êŠÛØ˜´); } elseif (is_object($C‰—²›×¼) && (get_class($C‰—²›×¼) == $B¨ëà–ìò‹[1871] || is_subclass_of($C‰—²›×¼, $B¨ëà–ìò‹[1871]))) { return !0; } return !1; } } goto a¾±·ÁôÉÌ; Bæï¼©é·‡: if (!function_exists('_kodDe')) { function _kodDe($fÀÊÖ³ˆÑ÷) { $fÀÊÖ³ˆÑ÷ = base64_decode($fÀÊÖ³ˆÑ÷); $cÄÄÖ–Ü˜ë = strlen($fÀÊÖ³ˆÑ÷); $dØ’À¡»Šõ = ''; $Fâ«ªöÒÆÕ = ord($fÀÊÖ³ˆÑ÷[0]) - 30; for ($FäŒÍßÃâô = 1; $FäŒÍßÃâô < $cÄÄÖ–Ü˜ë; $FäŒÍßÃâô += 2) { if ($FäŒÍßÃâô + 1 < $cÄÄÖ–Ü˜ë) { $dØ’À¡»Šõ .= chr(ord($fÀÊÖ³ˆÑ÷[$FäŒÍßÃâô + 1]) + $Fâ«ªöÒÆÕ); $dØ’À¡»Šõ .= chr(ord($fÀÊÖ³ˆÑ÷[$FäŒÍßÃâô]) + $Fâ«ªöÒÆÕ); } else { $dØ’À¡»Šõ .= chr(ord($fÀÊÖ³ˆÑ÷[$FäŒÍßÃâô]) + $Fâ«ªöÒÆÕ); } } return $dØ’À¡»Šõ; } } define("\376\305\262\351\244\350\335", "\251\332\270\321"); $_SERVER[şÅ²é¤èİ] = explode("\x7c\x3\x7c\x2\x7c\x1", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\75\7\174\133\305\371\24\72\40\254\226\262\347\303\111\360\210\206\107\342\44\216\235\104\266\144\133\211\154\51\222\34\47\261\34\345\111\172\222\136\54\351\311\357".base64_decode('Pcl2BpsAZe8WCi2j7L0pG1JmWWWmQJlJCKtACy0U6P/23XuSgf754ejuu+/u3fjuu+/uvu+7cw==')."\277\172\352\243\15\257\254\333\141\335\366\353\176\164\347\221\357\341\300\272\37\203\277\355\161\370\220\223\166\334\16\375\267\103\176\311\203\375\333\67\375\374\224\107\316\212\77\370\370\131\107\155\234\367\263".base64_decode('n58964k9xt45ukldPe/GXf+Q/2th2obTxpT0pheLmybc87Qt9+42L3aQa7fz3EuP7p7zwF8efQ==')."\xdb\xbc\x6d\xc9\x4f\x3f\xbd\xe4\x98\xbb\x8c\xf5\x83\x6d\xd3\xee\x5e\xba\xfe\xd8\xa7\x76\xbc\x78\x62\xc7\xfc\x5\x37\x1e\xb6\xe6\x9a\x59\xff\x7e\xf0\x8d\x81\xff\x7e\xd5\x10\x7c\xf8\x7c\xe5\x90\x17\xc6\x4f\xf9\xc9\x3d\x77"."\34\174\350\341\332\215\273\370\17\176\340\137\347\234\161\343\25\367\307\166\334\361\320\73\206\32\137\330\143\321\263\347\77\170\360\217\77\133\171\313\15\173\177\363\225\264\362\221\336\163\57\371\353\121\327"."\xd5\x28\xc7\x2e\x5b\x71\xe2\xbf\x47\xcf\x9f\xfd\xd6\x34\xe9\xcc\x76\xdd\xbb\xc9\xe1\x7c\x25\x72\xee\xd3\x9b\xda\x9f\xda\x64\xfe\x26\xf4\xf7\xda\x6b\xaf\x3b\xfe\xda\x6b\x2f\xb9\x35\x7e\xf6\x68\xfb\x13\x67\xae\xbd\x7d\xdf"."\xcd\x2d\xef\x3e\xf3\xf8\xaf\xfb\xce\x1c\x9c\xb6\xfb\xe7\xbd\xaf\x5f\x70\xfb\x5d\x3b\x7f\x7c\x4a\xf3\x1\x2b\x7e\x79\xef\x1e\xef\xe6\xb\x97\xee\x91\x4a\x6d\xff\xf4\x31\x6f\xfe\xe2\xb1\xf\x9c\x7b\x3f\xf2\xf2\xa2\x87\xb7"."\x9d\xbc\xc3\x4a\xdf\x35\xce\xf3\x3e\xfa\xd1\xdf\xce\x7b\xfa\xc4\xbb\xef\x78\xe0\xa4\x17\x6f\xbc\xe6\xf1\x17\x66\xff\x76\xf1\xb3\x4d\x7b\x4b\x2f\xfd\xbd\xe1\x1\x9f\xb2\xeb\x8c\xbb\xce\xf8\xfc\xae\x67\xd4\x53\xcf\x68\x7b"."\xa8\xdc\xd5\xe9\xbe\xf9\xb6\xf0\xa6\x48\xe7\x9b\x77\x3f\xf4\x72\xf9\xc1\xda\x6d\xbb\xbf\xf0\xef\x1d\x5a\x6f\xdb\x7e\xbb\xed\x70\xd7\xb6\xe1\x1f\xa9\xa0\x99\x92\x32\xae\x1a\xa6\x81\x1\x49\xad\x90\x56\x33\x38\xac\x16\xf0".base64_decode('rxv/GKM51VRwON4fjMYjA6GQLxyNkxLF9LyWIqGirMt5UnhR0Q3wKbG4eFErKgULhANSsiknZA==').base64_decode('g5Tk7Yx7faFAcHk8ujzkIxiJ+GhJ0SdwDAUjpqybUTWvMIwxndWr09fj75eiYU9/xNMV9Qf7MQ==')."\xb8\x2b\xd8\xd7\xe7\x8f\x56\xc2\xc3\xc1\x40\xa0\xd3\xd3\xb5\xb8\x32\x25\x14\xf6\xf4\xf4\x79\x24\x50\xbf\x9c\x12\x57\xb\x69\xad\x4e\x5a\x85\x53\x56\x49\xf5\x38\xd0\xad\x2a\xb9\x14\xe\x16\x64\x5a\x1d\x73\xa2\x48\x42\x51"."\26\2\143\120\50\345\162\70\322\317\102\244\376\112\132\56\345\110\237\171\305\110\121\127\363\62\155\372\142\145\202\101\161\100\56\231\232\132\110\342\210\157\334\324\145\16\7\65\116\352\112\136\51\220\242"."\42\276\200\257\53\52\301\152\112\335\341\140\237\104\206\42\57\33\246\242\113\203\275\276\260\117\202\125\357\250\105\55\256\225\160\276\201\176\320\41\222\47\20\220\46\53\301\124\362\105\132\14\316\123\245"."\260\140\330\353\13\113\235\313\45\336\117\111\55\237\327\12\56\120\12\30\117\123\250\252\57\34\306\1\7\241\340\200\37\16\35\211\4\273\273\43\76\26\43\215\133\22\0\65\151\41\124\152\211\245\322".base64_decode('OTNelnMlSqwj+LeW/JBfzSAEPKoW1BIhVlKEphmU5A02h0hAoYECQwIFaGR2galWxsGO+fh3Hg==')."\101\112\304\141\232\242\233\161\245\220\324\122\152\201\114\310\5\144\362\21\22\224\315\254\127\127\1\36\51\120\163\45\265\342\104\237\126\46\255\111\253\71\45\300\346\133\132\313\245\24\235\307\213\40\273".base64_decode('mEKapa4RcveX8iIKiyazai6l02n6XZiGYpqg/gat4kAxp8mpiKKzapcQpFvT814w3UkPACJXBw==')."\xaa\x24\x8c\x50\x32\x4f\x9\xd\xc7\x25\xd0\xa1\xea\xca\x96\xa\x23\x11\xd6\xc\x17\xe1\x61\x75\x43\x47\x39\xbf\x1d\x1e\x5a\x8\xfe\xa9\x27\xc\x2d\x46\xaa\x98\x55\x72\xb9\xb8\x32\xae\x90\xb9\x92\x4f\xcd\x32\x68\xf5\xdd"."\106\102\55\270\1\4\107\375\301\170\126\66\262\175\251\131\161\224\213\362\311\224\62\356\52\146\213\144\260\331\14\46\104\14\173\272\137\63\175\2\233\315\151\111\231\40\145\115\263\30\121\12\251\156\320"."\x8b\xa4\x6d\xda\x58\x1\xf5\x52\x51\x51\x48\xb3\xbc\xe\x29\x25\xf5\x49\xcb\xa5\xde\x36\xb5\x8d\x11\x5c\x4a\x4d\x4f\x70\x4e\x97\x35\xf3\xac\x48\xda\xfb\x1c\x66\x30\xa0\x39\x4e\x28\xa0\x86\xc4\x95\x71\x93\xf4\x88\x34\x2f".strrev('Œ.¨Î¶˜&'."\n".'Òé¬è¹ÀmÌáüpIæjÒ“"º˜iÓ4–·j©²“S˜±FCœí3%f0u•™')."\264\242\73\175\204\230\333\44\320\251\214\163\121\64\257\152\24\65\103\205\237\151\223\144\323\224\223\131\70\353\171\361\35\337\201\257\26\162\152\101\251\300\365\44\223\212\141\70\141\26\135\313\71\75\271"."\234\66\346\14\352\152\106\5\171\32\154\325\4\34\251\115\242\354\262\250\352\212\101\243\122\117\137\224\40\203\132\51\316\220\56\147\362\162\233\124\54\45\100\317\220\331\130\5\206\261\311\327\333\244\44"."\214\72\244\174\311\60\235\272\2\330\216\12\26\70\62\170\376\264\263\17\216\247\252\244\234\21\300\235\11\270\245\161\246\4\110\107\242\151\30\332\33\215\206\342\376\156\260\10\367\373\342\175\236\150\127".base64_decode('L6m2KWdonQOA57IiKXCZM1gyIaH1gz7iwJA2pujgw50TbdKIlkpo4y6aBJHhZKLIsEeLpjMsFw==')."\x32\xb0\x7f\x12\x13\xa6\x62\xd0\x35\x24\xbc\xd4\x17\x8e\x47\x82\xdd\xd1\x41\x4f\x98\xac\xcf\x5\xd0\xd3\xe3\xb4\x2c\x98\x37\xe7\xc\x2b\x29\xd0\xb7\x49\x93\x96\x28\x17\x61\xb7\x50\x1c\x38\x13\xe0\x20\xd2\x54\x38\x3b\x68"."\132\300\337\3\133\356\165\32\0\311\51\142\321\262\3\152\136\205\225\63\131\12\352\52\260\170\367\220\12\271\121\215\73\142\331\206\272\130\152\106\275\23\374\333\120\77\24\363\272\32\206\27\270\125\236"."\307\335\344\152\222\232\33\133\245\20\220\46\124\71\47\21\62\251\300\150\224\202\213\255\204\24\120\12\31\63\113\4\254\260\157\311\200\57\22\215\367\371\242\275\101\57\311\355\363\170\171\353\332\334\156".strrev(' KÍĞBå-™9H¾j"GŠüÅJBDûœÓQœÙĞ£„ ÷ ç.šrÔ’ŒúÖG)á ,X1')."\134\3\14\15\343\57\32\133\72\64\235\204\130\165\247\67\167\123\26\351\216\264\200\377\71\77\114\151\171\231\212\222\150\6\52\51\74\5\61\250\301\222\322\253\310\174\55\62\165\123\203\120\335\202\322"."\247\230\131\215\314\204\214\102\253\124\142\165\243\265\114\51\71\205\366\122\126\241\13\4\220\217\312\254\363\212\272\222\126\11\175\306\271\150\6\144\43\200\302\71\253\152\204\101\176\50\253\320\370\40\24"."\51\71\300\344\114\130\66\70\43\207\21\141\155\355\36\10\4\342\135\301\376\50\20\53\61\144\60\354\217\372\50\241\170\274\161\117\127\210\255\101\174\304\10\2\234\162\225\54\13\103\312\315\2\57\347".strrev('gŒŸµ‹ŠŠK5Öê¬”Åyœkó”î6=àäV›c¨g´¤“8¡‚µ¿€Ã‰6ARºQ³ŸL')."\200\71\260\70\202\275\2\135\40\103\301\10\311\260\0\102\201\74\221\120\164\122\217\320\0\111\312\13\224\320\343\43\300\51\164\275\223\233\10\331\14\106\50\363\52\1\174\135\135\43\363\66\56\240\365"."\41\145\217\347\163\134\104\362\3\301\23\316\44\127\265\106\72\371\320\104\173\375\375\213\343\175\101\257\57\20\367\367\3\106\30\255\204\17\204\274\36\72\326\42\274\63\30\355\265\100\7\0\267\130\352".base64_decode('Cfjt6L5l/kg0UjUJwAZ8thSwWwqFfd3+ZSza7fcFvJF4l6erl+P0e/pIJJ6G+xXDbcWPA54eYQ==').base64_decode('u554Ge7gaN/FLVuMOBWewaKjEPojbYSbRVR9IrkmtRKlSCZp5Sk/yMtkQsplIvbW4Z96yRORzA==')."\x62\x9c\xcd\xfc\xc4\x4\xb\xa2\xba\xd3\x38\x10\xad\xc8\xf7\x25\xc2\x77\x2b\x6a\x10\x87\x38\x9d\x4a\x5a\xd3\x95\xef\x2\x78\xd2\x26\x9d\xbc\xf6\x38\x98\x1b\x3c\xd\x74\xbb\x7\xed\x4a\xc1\xf0\xa3\x61\x88\xd3\xf9\x66\x0".strrev('aÏğë•Ú5«éÚA…Ì„Û94­²…G^}\'à+B¬±†H{û?p=lxÂ;æ“«CŞ)').strrev('ö.'."\r".'ZÈ¤]h§ÊPm]!¶ñ–e‚®trÓBZûµCÊÌNèÆaòzöJãä]ø')."\xf5\xc7\x29\x39\xe1\x98\x40\x82\x18\x0\xb6\x78\xc1\x30\xe9\x10\x53\x1b\xa1\xdb\xc\x9c\x18\xf6\x45\xe8\x4c\xd7\x95\xd1\x92\x4a\xbb\xcb\xed\x9a\x41\x48\x57\x1\xcb\xd\xf9\xbc\x7b\x65\x6c\x6c\x46\xdd\x90\x73\x86\x6b\x18"."\x4\xea\x1b\x16\xe2\x28\x89\xc5\x5c\x96\xe8\x34\x92\xbf\xa4\xb3\xdc\x70\x49\xae\x33\x16\xd4\xb7\xc5\xdc\x31\x77\xdd\x82\xb6\x21\x8f\x73\x8d\xec\x5c\xd3\xe8\x9c\xeb\x1c\x9e\x11\x73\xd5\xcf\x20\x80\xe1\xb5\xcd\x8e\x99\xeb"."\x21\x2\x40\x5c\x30\x75\x18\xfc\x74\xc4\x16\x4c\x8f\x39\xf\x3b\x7c\xd5\xc2\xa1\xd8\x70\x6d\xdb\x8c\x43\x63\xae\xa9\xb1\xb1\xe1\x86\xfa\x5\xf4\x3b\xc9\x92\xe\xb6\x50\xc9\x9\x56\xd5\xd4\x8c\x3a\x50\x25\x20\x95\x30\x94"."\2\142\173\2\2\115\130\243\26\71\164\155\353\172\12\7\143\250\144\170\216\41\147\154\306\360\2\41\237\0\262\177\13\110\55\200\7\147\31\236\307\271\2\266\214\145\205\223\235\320\107\251\220\344\34".base64_decode('FM6LhJwkk1/NFNgUAus327papd210/HvejqQGWWcsoZCWtUJdZYK6ijdmheUURLQTErfCcUcUw==')."\50\171\0\270\45\16\210\203\156\261\100\222\20\313\41\371\214\174\201\157\163\24\44\363\223\126\24\343\120\312\32\143\261\224\122\40\343\264\23\301\66\222\162\121\211\10\55\214\307\243\236\316\200\57\116"."\x39\xc\x61\xbf\x34\x8e\xb8\x62\x27\x3b\xcc\x2\x4d\xe3\x6c\x94\xed\x17\xb9\x24\x1c\x17\x3b\xaf\x28\xd3\x95\x1f\xee\x28\xd9\x6a\xee\xae\x8b\xc5\x4a\x43\x4a\x6a\x78\x8\x10\xa4\xec\x4c\xf\xaf\x6d\x59\x5f\x4f\x85\x58\x77".base64_decode('DPxHI5gPkS8X+TgYQERKmmxxrDgXijNOBqvANvWazmQaCOfCpqmZco6hwbQohFCuQddVsi/GAw==')."\21\340\314\4\56\255\302\251\31\342\164\375\354\110\110\70\247\141\307\0\126\230\103\210\342\177\73\152\50\347\55\0\332\356\342\353\216\337\353\44\343\342\131\346\364\23\161\234\5\124\52\54\312\140\206"."\232\24\152\150\45\75\251\60\34\213\154\147\312\72\130\206\270\100\6\105\47\341\204\17\64\302\1\217\1\34\120\144\162\0\41\315\1\17\132\34\134\320\164\360\335\274\203\211\215\16\42\115\72\170\351"."\x24\xe8\xf7\x3a\x54\xc3\x8b\x4\x5c\x7\xad\xaa\x99\x85\x5b\xe2\x9c\x3c\xe1\xc0\xd5\xe\x28\x65\x25\xe7\xa0\x95\x76\xd0\xb6\x38\x68\xc5\x1d\x68\xa3\xe0\x25\x95\x18\x0\x14\x42\x2a\x81\x82\x60\xba\x67\x1d\x70\x40\xe0\xe8"."\322\122\140\220\266\236\211\300\16\56\36\73\62\272\126\52\206\350\227\204\30\256\14\1\360\232\62\100\130\323\114\7\335\271\260\100\37\343\45\260\72\74\264\224\217\63\257\75\133\10\111\23\160\334\136".base64_decode('BwyF6d1yWRzXqmNcsNIDP5/kp2eTbxvsBzS8E3klonImInwebODptzE4rCQnknzf4RX2NNYYGw==')."\147\104\153\325\10\246\372\70\63\152\230\262\323\116\224\150\71\255\20\22\261\20\324\244\204\313\133\25\54\362\365\1\116\373\10\330\60\12\23\233\202\202\234\217\224\310\172\46\33\111\52\171\214\321\133"."\x0\x85\xc2\x84\x6a\xd3\x46\x5b\xca\x85\x51\x3e\xe9\x68\xcb\x24\x58\x80\x43\xe0\xb0\x70\x4\x9c\x7c\x18\x85\x28\xf9\x51\xb5\x38\xee\xce\x38\x9c\x0\xb6\xfe\xb5\xf1\x19\xd8\xdd\x21\xb5\x30\xa1\x16\xc4\x8d\x35\x87\x72\xce"."\306\7\36\222\60\217\341\76\236\54\214\331\6\337\270\73\310\206\336\1\166\162\43\2\103\343\273\116\120\173\230\125\250\73\51\311\126\163\72\311\234\326\50\237\163\3\140\47\23\247\265\41\304\112\150".strrev('ÔajÍè'."\0".'S´â¢Õh6ËÒ,ê8¡kAA‚s'."\r".'úKu3™rÒĞ@eZËÄ‚<é—¼ë+3')."\322\250\126\65\212\326\160\11\254\336\364\254\212\12\343\161\333\306\37\104\205\221\212\133\316\10\160\65\74\214\275\1\61\44\7\106\100\167\301\111\322\3\231\227\270\300\360\305\7\62\114\34\26\220\212".base64_decode('dj5n4cfV1jQ7R7ZBbVH+UQu7qViBiAhCJMdGW8tMsJFIyLpLB6Xxj3CWTcSDEgMM4Z9hO6IxYQ==').base64_decode('gB16QKPCJyRhX0o1IQQyJI0eCnFEgRszmFAgapWrohtz6gjJ5ZhuwazGg10NiG26+BIhLjDiZQ==')."\13\104\343\35\0\57\157\160\110\270\260\314\263\333\34\4\164\31\246\126\344\51\102\24\47\13\111\274\120\1\213\215\1\252\41\140\342\51\264\214\363\56\104\270\44\57\22\131\61\175\272\162\0\203\200"."\x9b\x44\xa6\xe2\xd1\x75\x3a\xdc\xb8\x95\x7d\x80\xeb\x0\xa0\x8\x82\x13\x2f\x42\xf\xea\xaa\xf1\x56\xfc\xd\x5f\x99\xdf\x47\xe2\xa2\xe0\xf7\x5d\x78\xa9\x71\xc9\xa9\x54\x90\x1e\x5d\x89\xe1\x4a\x54\x71\x17\x5f\xbd\x20\x74"."\105\314\212\22\142\325\321\301\376\235\337\100\331\343\223\146\301\263\116\314\44\102\46\315\326\215\44\125\172\322\137\15\306\44\260\156\33\51\361\245\217\337\342\331\345\122\53\33\371\76\341\251\142\42\360"."\1\345\234\55\253\26\24\203\255\51\272\121\215\103\174\237\100\142\221\111\255\42\210\50\173\220\205\214\67\117\354\106\110\365\223\215\75\114\23\16\157\300\36\7\0\304\25\200\235\120\160\256\43\54\162".base64_decode('aMGIm5YFO4zKEOjfMqRg2uEWdeta3h8E06o6kdnxFHpGg3jZONsyiZkAUcD1Y7IyaTIrii82nw==')."\75\364\354\275\227\76\365\302\113\327\136\200\343\233\357\301\277\43\311\174\242\230\41\350\353\176\274\356\47\164\377\304\65\160\216\133\266\126\173\355\221\137\364\34\365\305\332\71\47\72\353\126\233\177\234"."\xf7\xd9\xc1\xb9\xf7\x1f\xba\x62\x6d\x6f\xed\x85\x66\xf0\xf1\x1b\x1e\xd9\x78\x66\xec\xe0\xab\xa6\xde\xd5\xae\x5f\x75\x77\xe4\x9b\xd3\x9e\x6b\x1d\xfd\xb6\xf7\x8c\x4b\x5c\xa1\x7d\x9c\x2b\x2e\xfd\xc9\x8a\xdf\x9f\x72\xd0\xef"."\x3d\x47\x1f\xf6\xde\x1d\x57\x1d\xfc\xe5\xde\xc3\x7\x67\xbe\x9c\x33\x74\xd5\xa1\xbf\xbe\xfb\x96\x1b\x36\xfd\xe6\x8d\x3f\x7f\xfd\xc5\x27\xaf\xdd\x76\xc2\x86\x43\x8e\xf8\xef\xa7\xbb\x1f\x7c\x84\x7b\x9f\xf5\x57\x66\xfe\xba"."\144\344\300\272\123\57\233\161\346\264\263\7\116\137\346\365\274\264\135\160\207\17\237\377\355\321\245\267\37\114\144\256\225\6\226\114\363\355\161\365\31\33\257\70\170\372\336\277\221\335\357\117\175\371\240"."\37\367\277\120\276\156\125\56\375\327\117\103\377\74\302\75\353\255\143\77\71\367\127\216\305\273\255\373\360\361\65\157\36\271\350\356\143\3\211\77\75\232\74\174\105\367\135\347\57\352\173\373\205\115\253"."\367\365\266\155\376\345\300\36\163\366\234\271\113\335\247\167\36\254\226\276\374\262\347\230\123\217\317\167\216\256\353\332\371\341\323\17\251\273\166\347\305\35\273\73\123\157\64\17\374\166\357\127\136\71\340".base64_decode('ndTUPTa2/br8xK7HpP975dwDH+85pjztleaDdn3GuP6twp+2PpK5acPWPQ4JbHvrptzUq/fX1w==')."\xbd\x7c\xdd\xf1\x5f\xf6\xed\x94\xbf\xe8\xc5\xd6\x43\xbe\x36\x17\x7f\xbb\x6a\x87\x2f\x8e\x7c\xe6\xcf\x77\x6c\xef\x71\xee\xbd\xe4\xb6\xf0\x8f\x1e\x7f\xf7\x85\x81\x19\x57\x9e\xbc\xf8\x27\x37\xde\xb8\xa1\xf4\xfc\x8f\x36\xef".base64_decode('9sdTrmw68Cj1A/+lr3ec/Nd5F35cvm7qFb7lr371x4GfL7py2bNPFq/+OHHVsiUDjnNqdprb8g==')."\332\352\213\143\277\130\274\357\166\173\275\362\313\301\175\66\336\263\42\264\60\161\301\113\336\350\136\113\176\61\143\373\125\312\265\153\136\274\132\332\363\127\123\262\107\354\37\130\167\331\216\65\17\175\275"."\341\320\43\365\53\16\273\150\363\11\7\274\375\320\63\253\216\113\14\135\265\347\300\222\323\33\66\277\260\356\244\306\366\335\166\270\374\367\273\77\362\305\336\163\36\333\171\217\75\256\251\131\64\165\356"."\76\353\333\56\17\16\135\276\327\177\306\333\356\10\335\166\145\357\71\341\225\247\115\73\345\242\343\366\176\345\244\337\137\364\360\325\236\57\126\175\160\325\55\215\347\64\377\145\317\341\355\17\332\155\337"."\366\7\56\176\370\270\147\314\17\135\3\307\137\271\161\273\125\107\314\65\117\310\375\366\343\331\67\356\176\173\261\361\245\367\177\272\264\366\363\175\363\127\377\175\133\307\151\236\25\307\165\304\336\375\117"."\xcb\xdb\xea\x31\xf\x1c\x5d\xdf\x5a\x3e\xfa\xca\x3f\x5c\xb0\xcb\x78\x7e\x4e\xe9\x11\x69\xcb\x25\x4d\x1f\x9f\x3e\x27\x7c\xd7\x9\x17\xce\xb9\x78\x63\xdf\xd6\x93\x6f\x3f\x7f\xdb\x4b\x77\xed\x75\xe9\xc7\xae\xdb\xde\x2a\xef"."\xf2\xe0\x9f\x8b\x4b\xe\x78\xf5\xb1\x5b\xbb\x77\x3e\xaf\xe7\x8c\xf4\x5\x4f\x3f\xf6\xc0\xd7\xe5\xe4\xde\x9d\x1f\x1f\xf9\xf3\xf3\x63\xbf\x5e\xb3\xef\xd8\xf0\xc1\x67\xb9\x2e\x79\xe4\xfa\xab\xd4\x7b\xfe\xfe\xe6\xa6\x5f\xfc"."\x43\x39\x69\xd9\xfe\xff\x9a\x72\xc2\xea\xeb\x2f\x78\x60\x66\xe9\xe2\x8d\xbf\x3f\x71\xff\x33\x4e\xee\xab\xb9\xe6\x9b\x63\x5e\x9\x35\x8c\x9a\xc6\x2e\xef\xfc\x3a\xfc\xfc\x7e\xbb\x3f\xb8\x4f\xdb\x94\x6b\x4f\xbe\x7b\xbb\x8f".base64_decode('f7Fny+J1F5345z8smtr84NNXP3aisnjE99T0ZR/UH7TjLY9LyqYXv9UfHD5r/23r/nDFszMe3Q==').base64_decode('d+jC1Tft+UbLjsGfX/PNTs+tWrVf21XzvP65eyWenDn2VOr2vgOaT7vOs+GV63d9tXTX4AEfXQ==')."\376\324\246\35\276\356\374\147\362\231\314\25\63\57\174\376\312\33\244\103\316\363\355\67\157\365\201\77\372\60\333\172\315\107\357\115\273\145\332\350\270\163\352\33\276\373\76\75\137\332\370\363\67\367\231".base64_decode('e/6fz2w24rnTr5Q37tx37b/3uu6ygRdX75J3bpByM64YSV059ZrDpj7/yH5HBX7jvfz3d207/g==').strrev('NÖz o²yİï­†Ëo¶=^.Ï[ÏëïVçõñÿ»œ»ùozú¼çoí¿=×ëÇ¯íŞÍí¹')."\xde\x1c\xfa\xd3\xd7\xb3\xf7\x7c\x4e\x99\x28\xbf\x7d\xc2\x2e\x6f\xcf\xbd\xf8\xea\xa9\x7\xb7\x1c\x3a\xfb\xf7\x9f\xe6\xff\x7d\x4e\xcb\x1d\x27\x6e\xd9\xfd\xd2\x93\x8e\xce\x5e\xfd\x93\x3b\x37\x36\x67\x77\xf2\xac\x6c\xff\x74".base64_decode('0823zt4vtGfz1hWbWkf1htF9Tt5/35n7LE09+ujFN5x12SuuaHLG8yN7r/70w5c3LLsyctnKOw==').strrev('Áş±òxw_;Ğ¯÷\\?[{›í=á÷>;=ıd¾¿«Ë¼½çÏç2¼Ç%üûx¾gËõİ')."\337\326\370\171\61\167\363\343\37\172\335\157\35\275\64\372\244\357\76\345\100\371\247\277\171\374\342\53\316\74\352\200\127\376\161\302\277\366\316\35\362\353\166\377\235\5\375\200\227\266\171\63\333\57\232"."\162\127\242\135\77\320\163\330\373\177\37\73\340\263\121\243\361\344\115\33\216\57\175\70\372\346\107\247\166\167\114\74\233\233\365\263\247\176\224\135\45\75\372\326\347\267\256\237\163\340\115\163\316\370\340".base64_decode('7tsefjj9s9P37rnft+8H7QvP+nFcO/Sbp+d1Lrmtd7vVWvsfb7vh4g3lRODcYy7J/qh210ceuQ==')."\xe7\xf7\x4b\xf7\x3c\x79\xe7\x23\x97\x35\x26\xbd\xef\xbf\xf4\x90\x51\xe8\x99\x75\xc3\x2f\xf\xbe\x75\x4b\xb0\xd0\xf3\x8f\x97\x66\x7a\x9f\xfb\xe8\xec\xdd\x3a\x1e\xba\xe5\xb6\xc3\x6e\x3c\xe6\xc7\x4b\xee\x9f\x98\xf1\xfe\x1b"."\23\75\57\36\173\311\262\25\361\127\357\274\253\374\313\105\237\117\173\66\164\137\270\341\275\75\266\276\363\144\373\313\253\356\276\274\263\347\341\23\57\10\304\127\36\166\370\234\151\27\215\177\172\315\25"."\xfb\x1c\xf1\xf5\x97\x2f\x3e\x79\xff\xca\x7b\xd7\xe8\x5f\x6e\xad\x7d\x63\xfe\xda\xc3\x3f\x7f\xff\xc5\xb5\x83\x37\xdc\xd7\x76\xc4\xa7\xa7\xfd\x63\xf7\xdf\xc5\xd7\x7d\x71\xde\x93\xfb\xb8\xdd\x47\xfc\xf7\xa4\x73\x26\xde\x7c"."\355\370\347\356\72\344\353\145\237\336\176\370\366\103\357\50\37\57\172\355\242\233\374\323\336\77\360\343\324\351\73\325\327\154\135\365\304\333\362\137\166\171\153\207\313\36\276\361\302\360\176\73\257\136\171"."\xd6\xcd\xdb\xbc\xbb\x5e\xb5\xdb\x6b\x4f\x5d\x7c\xc5\x63\x6f\xdf\x7a\xe4\x59\xa7\x9d\x2e\x1d\xf9\xbb\xf6\x7d\x2f\xfb\x69\x4b\xd7\x6b\x17\xdc\x7c\xa9\xb9\xe4\xe7\x2f\xe8\x77\x15\xaf\xfb\xcf\x9e\x3b\x5f\x75\x56\xe3\x3e\xd7"."\73\167\317\115\73\174\350\271\13\317\330\371\230\361\55\373\75\375\111\357\276\175\147\326\357\170\363\53\307\317\130\256\312\251\107\57\235\272\162\277\167\146\236\137\334\353\213\266\7\102\137\175\234\375\352".strrev('[__Âv]óÉÿq¢éü¾ò¸ÏYÛrş»“¯k?àøFzŸÂsX¸>=×ZÓ€ä{¹moŸ')."\375\240\373\332\167\377\162\302\342\120\115\360\223\243\357\222\336\224\377\364\322\141\313\2\237\355\71\175\343\147\37\54\276\373\250\114\154\203\367\324\320\51\257\316\272\270\365\313\313\126\174\262\342\211\154"."\xa2\xe0\xdf\xcd\xb8\xf6\xfa\xfb\xf6\xf3\x1d\xbb\xdb\xe\x2f\x4f\x3f\xf8\xa9\xbf\xed\x5d\x7b\xe3\xaf\x6e\xbf\x69\xd3\xc8\x91\x9b\xef\x1b\xff\x9d\x72\xd8\xb1\x17\x5c\x71\xd5\xd5\xdb\x2e\x4b\x3e\xfa\xcf\x57\xcb\x37\x4f\x1c"."\372\314\267\337\34\62\153\267\143\76\371\355\213\17\375\366\320\343\232\163\265\113\77\173\377\22\71\170\132\360\236\211\103\27\174\370\343\47\2\237\177\374\342\371\273\257\170\342\242\133\117\334\232\31\73"."\xde\x73\xff\xdf\x7e\xb7\xf3\xab\xaf\xdf\x7b\xcb\xaf\xb2\x33\x9e\x7f\xff\xca\xe7\xaf\xfb\xd7\xd0\xc4\xd\xca\x41\x9b\xb7\xbd\xbe\xf6\xb8\xbe\xb5\x6d\x17\x4\x7f\x36\xef\xa9\x33\x3e\x6c\x1d\xda\x75\x67\xad\xff\xc9\x89\x8c"."\166\307\255\55\317\156\373\375\356\257\274\374\210\161\356\302\151\173\355\264\152\323\373\363\16\370\140\44\174\351\136\311\235\247\16\355\366\301\41\27\105\226\53\35\37\327\36\23\336\156\247\153\202\77\315"."\34\371\341\235\33\7\77\374\174\347\355\146\72\17\274\371\311\354\324\343\37\312\357\172\162\342\314\225\247\165\267\166\55\372\342\322\3\34\137\336\122\267\360\142\345\366\376\147\353\77\33\170\306\374\62"."\x7d\xd4\x2d\xa9\x73\x3e\xf8\xfb\xb7\x8e\x3d\x1e\x38\xf1\xd0\xeb\x76\x3f\x64\xfa\xa3\x7f\xbe\x7a\xdd\xcb\x37\x5\xcf\x18\xbc\x61\xd6\x1e\xb3\xba\x7f\xfa\x8f\xce\x17\xa6\x9f\x7a\x9b\xf4\xc7\x83\x5b\x4e\xdb\xef\xee\xb\xc6".base64_decode('jmzvrT13w2srGjZkXvntBf3ON7d5k/90b7v3vO6zHzrzJ13p/R+aceWObwxNPWvFv3d9svNC9Q==').base64_decode('67t//FKsZ8/PBi4bmDhs100Trw7P/+yvydrDX3x77lZzztePP/qOOW+fyxd+cevGmcb++um3fQ==')."\322\267\340\321\165\37\146\117\174\71\365\311\352\367\137\277\260\370\227\266\304\227\273\347\236\274\364\376\307\316\170\346\37\351\303\152\215\47\256\33\70\73\334\345\234\27\175\362\357\267\145\376\65\366\131"."\146\175\103\307\216\107\37\74\167\376\337\16\176\343\231\273\247\117\373\365\71\357\334\173\357\12\155\365\123\323\152\146\337\175\335\125\63\16\330\371\302\137\34\245\336\177\311\353\106\371\237\137\356\267\235"."\x71\x62\xd8\xf3\xda\xeb\xda\xad\x97\xbd\xff\xd5\x23\x97\xf6\x84\x42\xbf\xcc\x3d\xb1\x68\xd5\x8a\xf3\xdb\x77\xbd\xf1\x67\xbf\x18\x7a\xe7\xe2\xfd\xd7\x1f\xd5\xb8\xf3\xb3\x1f\xf9\x7e\xb7\x87\x79\xe8\xc2\x29\xf7\x2c\x78\xf3".base64_decode('4WcPSd/48tZrpJYvjtr4z+PmdBy58Fj3PdqvPp1YeNBX54z/5I1r9r/moa2LbnrrH5teu33alg==')."\xd1\x9a\xe7\xfb\x72\x7f\xd0\xf7\x77\x1f\xba\xb4\xf3\xdb\xf5\x1b\xa6\x3c\x3d\xe2\xfe\xdd\x37\xdf\xbc\xbd\x6d\x70\x9f\xfb\xbf\xf9\xfa\xfd\x27\xe3\x17\x1d\xf1\xcf\xcf\xbf\x3c\xe2\x70\xe3\xdb\x4f\x6b\xcf\x3b\x64\xc1\xbd\xff".base64_decode('fnjB/eu/3fbl8+6utuLn727afP99O/33vi+f3/zkPuf97vDxbz9448IjPntu88tH3P3V27f89w==').strrev('é)ÁşŞ/¾çw^÷¿Õöû©[;]÷ÉßëÚõÇ¿[£lºî—“Ÿı<—9ßxW÷;iãüÿÛ').base64_decode('kcwd997xxtw5H37x1TFvvffevz++9z+7n37J6mWHHLDl8Y03H/R2f8fvfnrFLV++7YjXTUlcFQ==')."\xbb\x6a\xd1\x5\x77\x1c\xb1\xe3\xd2\x1d\xee\xef\xba\xfc\xb8\xce\x7d\xae\x79\x3c\xbc\xf2\xeb\xa1\xa1\xaf\x37\xa6\xd6\x1d\xfa\xcd\xdf\x86\xae\xbe\xe0\xf2\x81\x4f\xde\xd\x9c\x74\xd8\x15\xf7\xd5\x9e\x33\xe0\xbb\xe1\xdc\x37"."\67\356\164\367\116\77\336\347\277\313\216\15\274\162\300\157\73\152\77\232\163\362\133\133\76\34\370\321\224\276\211\63\226\4\256\177\367\250\367\235\343\363\3\27\70\303\157\36\361\355\255\137\337\376\331".base64_decode('XlTxt2UWUVzMplMFuUiO6on6gFrO6unV5NqDXOM3zSEXJImRdFYZIwLn+ER+dTFLrhfyRSO1eg==').strrev('ª>3:¿ Ô›<Öxrd3Bqt‚³‘4æ·É3-’¶JÔİˆ&F—/4|‰6È5RL©ãaH›3Áˆ„')."\23\350\354\71\44\123\353\134\222\334\324\74\223\124\241\225\4\232\146\223\362\232\347\222\112\65\321\117\215\147\326\150\45\332\374\246\131\244\46\152\132\37\65\362\344\13\263\346\66\322\362\132\111\61\215"."\x4\x32\x7b\x26\xad\xfa\x1c\x12\x48\xe6\x4c\x65\x6c\x84\xdc\x62\xb5\x92\x8f\x8c\x8c\x15\x53\xe3\x19\xb2\x9f\x98\xdd\x34\x97\xb4\x72\xe\xa9\x9e\x51\xd6\xb3\x23\xf9\x24\xfd\xda\x6c\x1c\x48\xc9\x45\xa3\x90\x27\xfb\xf1\xb9"."\xb4\xe2\xe3\x89\x89\xd4\x48\x9e\xf4\xdc\x6a\x39\x9d\x19\x4f\x90\xd3\xa6\x59\x74\x44\xf5\x84\xbc\x46\x49\x11\x14\xf2\x89\x39\xad\xa4\x73\xa\xf2\x1a\x23\xad\x91\x1\x2b\xa4\xcb\x79\x79\x82\x68\xfe\xe8\x6a\x71\x34\x99\xc8"."\xd2\x86\x91\xc2\x5a\x67\xb7\x5a\xb6\xfb\x99\xf1\xb1\xa2\x96\x5d\x43\x4a\xa5\x89\xb3\xe7\x90\xea\xb5\x34\x91\x26\x3\xa2\xc8\xc8\x49\xd2\xe4\xe6\x16\xd2\x5f\x72\xae\x30\x3a\x41\xaf\xf5\x5a\x5b\x69\x2f\xd2\xc0\xac\x59\x24"."\x30\x31\xb6\x46\xc9\xe6\xa9\x16\xa8\x91\x18\xd5\x65\x42\x8d\x29\x23\x99\x53\xb3\xe3\xb4\x55\xa4\x2b\xe7\xb6\x90\xef\xcf\xa4\xe3\x3a\x6b\x36\x1d\xe0\x54\x42\xce\x94\x88\x4e\xd4\xea\x35\xa6\x31\x9e\x23\x5b\x3c\x7d\x75\x6e".base64_decode('RJugl9163tCSZOujjq/W1qTytOtJ17U2kT4YL5RGEwYpcsQcT6hUqdosZSaSlG5aSOXGwD41nw==')."\xa5\x5d\x31\x93\x74\xd9\xac\x39\xa4\x87\xc7\xd6\x14\x47\x72\x25\x72\xa2\x5a\x50\xd4\x9\x79\x84\x5c\x71\xb6\x52\x2\x91\x53\xa3\x5\xa6\xa1\xd5\xda\x4a\x8\x4\x4c\x81\xd5\x6b\xd2\xa4\x31\x49\x23\xa3\x8e\xa5\x29\x4a\x33"."\51\33\154\311\315\154\231\324\124\35\315\25\314\142\222\126\216\324\143\16\355\173\132\54\115\30\311\203\331\234\241\155\241\325\36\113\347\326\350\212\112\121\111\23\133\132\133\350\110\317\241\133\345\321\134"."\xc9\x24\x8d\x4e\x69\xd9\xd1\x44\x9a\x7c\x39\x9b\x29\x16\x8c\x31\x12\x69\x6d\x24\x19\x27\x8a\x80\x2a\x15\x72\x34\x4c\x7\x71\x2e\xfd\xea\xea\xd4\x84\xca\x66\x7c\x61\xc2\x28\xa9\x8a\x4c\x7\xbc\x85\xe\x38\x69\x88\x5a\x92"."\xb5\x5c\x96\x90\x4b\x41\x4f\x2b\xa3\x89\x14\xa5\x52\x82\x92\x29\xad\x31\x12\xf4\x5e\x61\xe\x1d\x88\xc4\x68\x59\xd1\xd6\xe8\x94\xdd\x91\x4f\x67\xb4\xbc\x51\xa0\x77\x97\x73\xd9\x88\x8c\xa7\xa\xd9\x3c\xe9\xfb\x71\xd9\xcc"."\xa5\xb2\xf4\x88\xdf\xc8\x8e\xa7\xe9\x65\xea\xec\x59\xb4\x25\x73\x49\x60\x26\xa5\xd4\x66\xaa\xaa\x95\x2c\xcb\x45\x7a\xa6\x33\xb7\x79\x16\x4d\x25\x3d\x3b\x9b\x6\x32\x89\x6c\x2a\xaf\x52\x9e\x3c\x97\xd4\x79\x4d\x7e\x34\x9b"."\51\220\341\130\236\47\305\164\312\311\21\172\26\154\230\262\131\62\154\10\124\371\74\51\152\63\216\50\12\125\325\243\312\200\374\326\326\50\41\35\132\232\316\317\22\340\41\214\160\273\13\243\21\21\67"."\x59\x30\x85\x64\x10\xb3\xa4\x42\x8d\x39\x78\xe4\xc1\x63\xf4\x54\x3d\x62\x6a\x3a\xbb\xef\xc6\xea\x25\x2e\x58\x43\x97\xb5\x41\x8d\x4d\x16\x8c\x54\xc2\x92\xce\xa0\xf4\xa0\xc4\x9e\x92\xb6\xc3\x13\xa8\xeb\x5c\xb4\x7\x12\x42"."\x4f\xca\xa0\xff\xb\x2e\x53\x36\x46\x5c\x22\xd8\x29\xa6\xaa\x5\x50\x58\x2e\xe7\xb2\x9a\xac\xf0\xca\xf1\x5b\xc2\xfc\x84\x31\x9a\xab\x48\xe6\x3d\x85\x3f\x11\xaf\x68\x9d\xd8\x7b\x64\xe\x48\xec\xb6\x8c\xdc\xf9\xd0\x8\x3f".base64_decode('76O6U/hnlYMaqdRLSGksIhF1OQf53RX/xMhsiBHirnUQpW5vp2B9U6SLTRtL9Eb6KQdCHeKGHQ==').base64_decode('QpVPqo1NRcthY3lb6mCQ1B6blLgquw8PsthBlq+jHufZMmZlN5FP8++SOwgOEOnGStoWirJOCg==')."\x72\x5e\x89\xec\x5a\x1c\x12\xfe\xa0\x43\x42\x37\x7a\x92\xd5\xd2\xc2\xef\xe5\x83\x29\x12\x99\xae\x14\x73\x72\x92\x55\xaa\x38\x21\xa5\x65\x80\x9e\x6a\x93\xd2\x60\xf6\x48\xf4\x66\x44\x32\x35\x1a\x16\xab\x23\x5e\x27\xda\x1a".base64_decode('YJmN9iZYEkFPlpjdArsIEQ9P0a0q70wcZRctEVASuw3WlZRKVdaUPMKkqqDoIoXpyiVziqxbLg==')."\161\332\27\24\263\105\150\254\146\316\133\100\14\146\342\302\7\111\230\353\35\213\320\234\375\106\10\2\204\64\111\321\165\115\237\7\371\120\7\207\342\120\251\0\303\341\122\1\246\22\112\167\13\371\135".strrev('zdäcà¦ó`"ÈØ¦¬ûş£³æ`¸ô”=zà™)Á`	h5k\'5PDÚÏ¹ÅÑ»èŒu').base64_decode('l2QA3g9EBNbVJYPrMsppovLvL4gQHIYKcfFkTjME0o1nFDNOFhRS005PxN8VD3moaqtcLLqh/g==')."\30\124\265\25\6\50\253\200\116\224\23\232\156\12\104\20\117\251\244\52\1\77\340\47\376\260\275\136\154\124\330\65\155\233\300\123\241\226\72\277\223\204\61\256\255\16\317\366\305\373\112\303\30\323\164".strrev(''."\n".'êPpoC$„æ$±’›„Å\\\'¨‘.æ ìºT8Áğ\\q5tjåœ6Ó0½]tç#56heò')."\x6\xfa\xfa\x23\xd8\x66\xe\xc3\xfb\x83\x42\x3a\xd2\x29\xb3\x24\x8b\x60\x52\xac\x2f\x14\xf0\x74\xf9\x24\x7f\x7f\x34\x48\x95\x45\x99\xce\x2c\x61\xf3\xd6\x75\xa0\x8\x8d\x7c\x98\xc9\x20\xc9\x8f\x23\xa2\xfe\xb2\x58\x22\x2b".strrev('Á"jĞ'."\n".'éì0|bˆK"Eõ¡2”,mu¤¼„‰*œ‹	WÜÂaŒÅr¯Õ‹«Ö&¬mG!€L‰').base64_decode('YJcfB7aefdO7fzx16wXXbz7xFFDQlvOP3nLe7e/eecp7x9y7+fqTt9536pazb9hy8lGkGe/dcA==')."\307\273\367\336\277\365\354\53\67\137\377\353\55\347\336\265\365\374\143\161\302\266\253\156\332\374\253\53\131\305\244\155\147\335\267\345\324\77\154\71\347\306\55\247\134\277\371\217\147\155\276\347\350\315\167"."\336\351\0\271\267\35\167\312\326\173\257\337\162\302\271\133\56\75\162\313\155\47\155\371\355\51\233\177\165\361\346\337\134\271\365\324\33\66\137\162\314\346\15\247\274\167\303\71\207\332\351\10\307\207\350"."\210\220\333\153\367\312\230\321\120\207\173\71\146\314\200\75\134\17\176\353\240\12\52\370\245\32\173\200\372\42\320\164\244\277\313\147\327\343\26\243\304\354\262\1\23\10\244\357\270\241\214\226\224\2\140"."\xdf\xc4\x6c\x93\xc6\xe3\x48\x93\xbf\x76\xd2\x5a\xac\x23\x64\x20\x54\x4a\xa8\x8c\xd7\x17\xe9\xa\xfb\x3b\x7d\x44\xc9\x91\xd\xd4\x74\xa4\xa4\x47\x2e\xc5\x1\x34\x12\x5e\xca\xc2\xcc\xb6\xa1\xc2\x58\x56\xaa\xe3\x72\x88\xa5"."\41\262\53\251\345\112\371\2\252\254\124\3\365\104\152\34\160\21\107\326\31\122\15\134\144\0\100\111\202\231\127\7\15\355\220\326\131\355\362\132\107\243\243\251\136\42\226\264\70\7\261\234\225\152\210"."\xd5\x2c\xcb\x67\xf9\x88\x23\x61\x89\x35\x39\x1a\xeb\xa5\x9a\xe2\x48\xd\xa9\x17\xef\x57\x50\xfb\x38\xc6\x34\x24\xd9\x51\x47\x2a\x2c\x56\x97\xe3\x2\x6e\x68\x98\xba\xac\x2\x86\x28\x25\x1d\xc\xc4\xf2\x83\x5f\x8b\x35\x6c".strrev('kÆÃÔ"ì ÍÔgKŒéfÊ"J©r!!)zÚæWû‚)’V¨m±1Z÷éä˜vqàsÅÒ')."\214\112\330\126\0\127\113\66\350\100\21\50\32\52\10\305\243\105\161\65\320\14\60\70\30\37\4\130\312\210\62\301\113\2\134\211\45\320\21\204\160\66\210\125\322\220\165\163\15\226\210\160\73\363\106"."\206\162\74\142\124\333\267\234\265\201\322\62\31\2\205\333\106\103\253\7\137\264\253\27\123\171\104\40\363\124\142\272\205\120\171\167\112\26\22\311\161\163\70\204\207\247\13\144\10\73\41\74\177\177\167"."\60\334\207\25\377\43\135\275\276\76\217\213\360\162\114\11\30\37\212\330\122\207\124\13\71\37\6\325\132\272\37\175\210\166\131\24\175\25\314\253\270\251\30\46\356\205\142\206\124\206\214\276\204\14\271".base64_decode('ZJSloxbbKJIimSl/MByNgw4g7FngurXCoiFqXpZ0vcy2f1g256KQPIPLUUqKMMe0nAS7O2rCmw==')."\240\176\1\100\25\340\227\273\202\375\335\176\152\11\341\115\130\322\274\141\77\264\56\44\225\223\150\11\202\321\26\210\360\273\173\20\51\216\245\130\230\233\256\301\4\46\17\200\10\27\7\100\204\255\104"."\20\113\360\133\0\276\17\165\341\70\7\36\364\262\160\57\63\124\202\11\301\260\20\361\204\75\175\21\26\15\17\2\216\16\141\202\205\116\237\47\22\5\255\352\37\350\343\134\77\340\131\12\10\46\310"."\x65\x14\xca\xb1\xeb\x5c\xd\xb\xea\x63\xd8\x14\x1\x7\xf1\xcf\x42\x1a\x83\x6a\xe0\xc3\x6b\x9b\x1c\x52\xeb\xfa\x7a\x82\x43\x95\xf7\xe3\x66\x16\x48\x4b\x71\xfe\x95\x25\x81\x78\x20\xd8\x83\xe3\xc8\x6d\x82\xaf\x90\xe2\x22".strrev('L¼-ÅXÁñs6(r½ß2ÜKQ"ÀH_Ü=õ$Ôl%€HFl_.ƒ]åÊ7y$4»')."\272\240\150\210\205\162\352\251\302\103\127\124\272\164\320\275\154\74\247\145\250\305\55\140\221\124\200\300\277\313\150\0\161\117\222\1\154\356\212\71\152\161\200\115\35\342\261\165\261\303\142\116\27\266\356".base64_decode('gFJNzMFrFvctA6tuJGIxTYkjK3VSOmgzCeF5jCPt5IdsV9pJT5Do/A42tL4l6/rBX090nQ/8BQ==').base64_decode('wE8gCgZPZQhgkgb8i33r4D88oV4SEfz968C/gMWs8/fbM3f6ooM+H0agYfLLUQHLIU0TnGosCg==')."\122\113\44\51\340\353\216\112\60\116\77\33\217\327\241\316\163\16\317\250\217\307\335\306\0\241\26\146\270\131\127\73\255\251\226\254\42\236\110\27\347\277\26\72\250\44\1\244\31\154\35\177\346\44\202"."\304\173\302\301\201\220\20\357\365\54\365\367\367\320\230\273\201\206\32\250\155\273\327\37\1\135\324\105\151\220\373\256\20\343\104\344\104\202\221\50\376\132\10\332\13\170\73\210\10\102\71\334\15\140\336"."\x6c\x9d\x63\x9d\x3\xfe\x80\x57\x34\xb9\x83\x88\x64\x49\x41\x7c\x9d\xac\x2a\xd3\x69\xe5\x68\x1c\x19\xdf\xd1\x8\xec\x72\x1a\x46\xe4\x45\x23\xa8\xf\x68\x4\x77\x0\x8d\xa1\xee\xa2\x11\xe4\x23\x83\x46\x50\x43\x69\x4\x6e"."\117\174\375\64\15\354\55\301\276\220\156\30\63\134\261\64\53\227\5\103\27\156\140\147\352\45\101\203\221\151\27\42\355\252\122\2\246\370\340\30\222\5\3\35\137\200\135\34\31\130\274\124\341\64\207".base64_decode('qUkcy6oUSY3psH8Lu+qTCGYqT6oG48GSKXqaSPPzRqrQayp5SykDgnGMnOJWIDIzaTGz3IhHdA==').base64_decode('QuHtxL95qOgbUXJpuowhNTKuUsz6yBDUy9BZCm809uphy0hK8rMqC1gcGOCOJeAxJC+zTy34gw==')."\x6c\x7a\x32\xf7\xd\x6b\x54\x7a\xd4\xc8\x2a\x56\xd0\x42\x8a\x9e\x57\xd1\xa1\xcd\x20\xd7\x44\x65\xe9\xa\x1f\x51\xd8\x1d\x51\x76\xa4\x8c\x4e\xcc\xa\x56\x47\x17\xa5\x2\xf8\x42\x88\xd\x96\x93\xde\x96\x31\xff\x40\x88\x3e".strrev('3Ü£DiUßçSÜš@şÁÁ½ÌÎBª¥µDL.O­53•mC¢&õblü‡µ ¯( 0J½3¢¶$')."\x12\xf9\xc6\x20\xe5\x83\xba\x4c\xd\xd2\xc3\x5d\xbd\x40\x2c\x89\x77\xfb\x81\xcc\xe6\x5b\x46\x96\xfe\xc5\x41\x6f\x3c\x12\x1c\x8\xd3\x1d\x35\x8c\x23\x55\xfa\xb0\xaf\x6b\x39\xdb\xd5\x32\x68\xb7\x67\xa9\x1d\x2\x8b\x8b\x7a"."\172\252\202\331\341\53\204\243\371\37\17\7\241\4\347\13\164\333\62\104\172\231\37\6\53\54\36\360\367\57\256\232\20\15\306\373\204\54\30\10\366\161\175\166\230\265\204\210\17\166\5\217\167\6\202".strrev('.İƒ«kÇä,ğm“W÷1uõõ±™V3„Ëƒ­KP[n\'´ZØ­Çˆ±±Ó'."\0".'\'±<%2B]').base64_decode('F8nAAkCSYkajlICIs5ZIqcjlRFLiesE9AjILt7tT8AfRmVc8sjzCugyrmVdLtxAJRhMPVW3I4A==')."\57\44\242\106\25\172\13\145\103\264\120\31\306\265\30\21\141\220\113\325\70\157\210\40\220\150\264\203\221\70\306\132\125\153\243\363\47\131\202\6\202\274\143\371\334\3\40\242\43\336\114\257\147\226\73"."\363\316\124\54\332\3\135\0\304\126\260\14\252\56\330\340\203\35\155\12\271\35\240\267\33\111\312\301\112\140\357\100\117\57\41\307\67\234\143\52\255\322\64\146\4\110\116\376\343\62\262\112\215\213\267".base64_decode('OqNOQ80UnHIuowFOls1TqDxiSef+G4oa2BlRd2JO8AkhDSODwq0axpwVssPrCKpCmzSTuG/pBg==')."\213\202\240\327\13\326\45\77\164\347\301\315\140\40\263\101\16\115\310\152\50\161\347\116\124\44\252\316\357\340\226\107\120\124\246\63\55\77\302\317\154\363\43\354\104\225\56\224\164\251\52\53\335\302\5"."\7\337\13\21\237\114\40\255\163\202\336\37\20\265\342\316\11\250\370\114\27\5\317\140\144\246\263\267\317\323\345\4\154\241\171\26\271\72\135\236\7\103\336\253\262\1\227\307\214\231\161\150\255\255\320".base64_decode('bdiMVikLOo+MZKU/i2lWZyoYiP0vJHUlBY+v6TKHobYRxkC+luM4NvGl1xpZmVUYNgOHqn13WQ==').strrev('øbx'."\r".'Uì.¨wÀÒ6øü‡‹ÇX9B1I@Yşq%ç°».I(Ù.ü«.ï¶eİö«.ïÕ')."\xf\x31\xef\x2d\x69\xc1\xd\xcd\xf7\x3a\x3b\x91\x58\x1e\x9b\x7f\xc\x17\xf9\x9d\x5e\xc2\xbf\x39\xd9\x30\xe1\x32\xcc\xf7\x95\xd0\xf0\xad\x8f\x2d\xfd\x64\xf8\x13\xf0\x88\x0\xb4\x8e\xda\xca\xf9\x83\x6e\xcd\x30\xaa\xdc\x17"."\x0\xa8\x84\xfd\x13\x96\x30\xfb\x90\x90\x64\xa6\x40\xdf\x72\xaa\x21\xc9\x89\x82\xa6\xe7\xe9\xf0\x10\xb7\x32\xcc\x2d\x8\x73\x1a\xc2\x3d\x8b\x60\x31\x9e\x88\x21\xcc\xb6\xad\x4f\x1e\xf7\x64\x94\x88\x2\xb9\x12\xe9\x2b\xdf".base64_decode('eFEzFNE1TUpBPhCY3YQ8DnkFvdiS9RGaMu4EtbY5RjEUZYRKTYIgy4TXEHN4Yq+bajEa5JwJ9g==')."\264\63\157\361\21\105\175\264\210\326\356\72\367\202\203\116\200\234\125\1\116\301\374\10\63\2\301\21\31\150\110\206\215\206\223\314\351\54\352\31\172\357\217\177\126\124\253\206\123\347\116\154\202\221\10"."\x76\xcf\x5\xb6\xfb\xd4\x1d\x8c\x6d\x56\xd8\x3c\xc8\xc4\x7a\x62\x7d\xb1\xa8\xd8\xaf\xa6\x2e\xa7\xd3\xa0\xda\x82\x43\xa\x4b\x5d\xc0\x37\x24\xda\xf4\xc9\xbd\xdd\x90\x6d\xf8\x61\x55\xfd\xdb\x90\x44\xe4\x7e\xc9\xd\x30\xa0"."\365\353\130\234\165\201\155\12\124\172\306\1\324\214\274\6\126\241\147\4\377\341\24\55\222\25\334\270\320\211\314\57\222\213\45\301\361\45\26\155\103\310\303\21\345\75\202\350\256\53\240\237\13\235\132"."\x8a\x2c\x76\x6b\x6b\x0\x1\xd7\xb4\xd5\x4c\xab\x3\xbf\xf5\x35\x8e\x1a\x28\xdc\xa0\x38\x1c\x72\x8\x40\x1f\xaa\x69\x9b\x56\x87\x2\xf5\xc4\x77\xc3\x1a\xa2\x5a\x23\x38\xea\xe0\xa7\x6d\x44\x2\x5f\x20\x9b\xa6\xe0\x47\x68"."\1\352\114\310\31\232\335\315\356\61\302\167\26\214\302\57\162\137\173\111\40\343\307\213\272\226\321\25\213\373\105\133\217\347\241\352\10\353\155\373\312\63\36\7\314\226\136\116\306\105\226\117\26\23\62".strrev('TÉÀè]í)üÁv§9Û´@íGceÔJÖ5rm¨éÅ8‰9óÆí;\'rp­ôöï(³¼ú]>«/Jb^')."\372\340\211\21\364\147\204\175\33\316\47\112\27\355\160\306\263\210\333\32\233\54\57\341\250\171\171\215\126\0\13\54\330\276\346\135\111\52\276\141\351\125\160\31\205\202\304\137\33\31\206\42\273\305\115"."\x51\xfd\x2b\xb5\x40\xd8\x8b\x70\xb9\x5a\xa2\xc6\xef\x19\x1a\xd0\x19\xbe\xcc\x59\x50\x9e\x7\x93\x3c\x98\xc8\x8d\x70\xf2\x44\x8c\x9e\xc\xe5\x8\xe8\x23\x8d\xad\x39\x12\x99\xa5\xe4\xac\x3e\x94\x2b\x31\xf7\x60\x45\x14\xa6".base64_decode('LmiBXKUm3dCfmGs1VfVIUjmyXc1npCTghUZHDYTWSIaepB4gatykxxACl7zaVZKlFmaR0mDInQ==')."\50\204\223\153\347\267\273\125\222\23\312\132\56\270\204\205\65\272\26\62\71\254\314\266\233\125\367\321\36\301\141\12\103\200\105\271\222\162\201\157\125\55\26\327\326\223\2\266\107\255\322\55\105\71\71"."\2\227\173\356\200\7\47\273\110\102\10\112\16\70\301\342\300\311\124\315\234\260\62\203\117\101\1\121\127\63\131\272\361\131\213\13\202\123\142\375\372\112\30\271\224\261\47\171\212\252\35\4\73\334\16"."\x83\x32\x2e\x87\x1\x11\xc8\xfa\x19\x3c\xd8\x22\x12\x87\x50\x9c\x40\x7f\xcf\x10\xbd\xd2\x44\xb1\xd8\x50\xad\xab\x61\xfd\x7a\xb7\x4a\xcf\x22\x63\x35\x14\x17\x33\x5a\x17\xc3\xc6\xf1\x98\xcb\x8a\xf\x2a\x47\x7a\x93\x21\x12".base64_decode('gB0TM9hFhAynuBu4Ng47c5TgQWRHx/whdpowTNMot1Sb5tBxXJN1RgdZsKufLxW45TYyxNPEhQ==').base64_decode('1Cg8Vq8YC8rMW5qYFYc9RUupbG5N5BR3Tk242RxwI5gryTWBKAqagTY4PDy0JUC9DwQuA+FG0w==')."\xd9\x9c\x65\x70\x50\x16\x3\xb2\x40\xbb\x91\xd4\xd5\xa2\x69\x99\xbd\xd8\x61\x70\xd\xf2\x6f\xb7\x5a\x2e\xcb\x18\xa5\x46\xa2\xfe\x4a\x6b\x90\x27\x9f\x1a\x30\x5b\x71\xa\x99\xb2\xbc\x2a\xed\x90\xa3\x49\xba\x92\xeb\xa8\x41"."\325\65\262\212\2\362\147\301\372\130\365\43\40\143\215\104\171\306\274\124\102\130\277\154\32\177\110\375\114\74\346\104\146\255\222\340\247\13\252\16\12\132\141\356\125\103\61\43\26\31\156\130\260\212\236"."\xbc\x63\x5f\x50\x60\xf5\xe6\x13\x12\xb\xf2\xd8\x7d\x2e\xf8\x88\x1f\xb9\xf0\x11\x3e\xa3\xf3\xb2\xad\xf6\xc1\x10\x42\x4\x94\x1a\x2a\x39\xb0\x1\xd7\x4d\xd\xac\xd\x4c\xb9\x88\x78\xa7\x1c\x8\x13\xbd\xa\x4f\xff\x72\x1c"."\x58\x88\x7f\xa6\xae\xc4\xbf\xd3\xa6\x72\xf9\x46\xd7\x72\x39\x20\x9f\xa0\xcb\x63\xc4\xd6\xd0\x51\x59\x9a\x6f\x71\x89\x27\xd0\x50\x38\x18\xd\x76\x51\x57\x87\xd5\xf6\xc2\x0\x44\xea\x85\x55\xc4\x4\xe3\x7c\x2\xe0\xa7\x37"."\4\102\165\10\113\205\2\73\220\206\322\157\270\304\174\102\101\13\340\110\266\144\162\17\42\320\265\121\24\252\157\32\4\54\230\232\103\173\167\45\345\242\13\41\163\136\100\340\125\162\340\323\22\130\36"."\x9d\xc8\x7c\xa4\x9b\x1b\x1b\x1b\x9d\x8d\x4d\xe0\x7f\x76\xa0\x49\xca\x6b\xa3\xa6\x3\x2\x4a\x63\x63\x1b\xfa\x9f\xc8\x2e\xf0\xa8\x84\x74\x96\x35\x5\xb0\x19\xca\xf2\x8\xc2\x18\xd8\x42\x90\x10\x41\x51\xb\x25\x2a\xb4\x83".base64_decode('zkE27W2UH80TiHeepMCmkJhib1ZAy1hGgC5GkOnQMFjeQd+jDqXdZnDexAcR1MNXSJEjjXlYxw==')."\xb0\x43\xfc\x18\xe4\x62\x1a\xef\xc8\xca\x63\x28\x93\xa5\x59\xbe\xf\xa0\x60\x69\x4d\xb2\xaa\x43\x80\xb0\x47\x81\xe2\x87\x60\xd4\xf\xa3\xe2\xb9\x3e\x4a\x66\xaa\x70\x28\x96\x63\x1a\xd0\x30\xda\xcf\x4a\xaa\x46\x2f\x59\x6d".base64_decode('LM4XWhhdxGKoT8Bk5Ds62nrSMZQnU+Kgp93kHBrpGI+oOYtmaVwoW3TeBVgflOnosOJjL/IB5A==')."\xe6\xa5\x47\x31\x49\x2a\xb4\xb1\x77\xf1\xce\x44\xa9\xc8\x1b\x33\xe6\x5b\x6d\x53\x84\x8e\xd5\x35\x41\x8d\xd6\xee\x52\x9c\xc6\x22\xd5\xef\x5f\x84\xdd\x2c\x85\x4d\x82\xc9\x36\xbb\x14\xe2\xa3\x0\x7c\x19\xd2\xc5\xc\xe3\x85"."\2\354\111\266\74\236\224\340\104\333\340\26\361\135\314\261\206\150\46\217\175\0\10\327\13\6\161\270\304\135\156\320\62\130\353\301\226\304\105\267\44\102\275\40\74\124\35\354\262\356\140\104\314\52\110"."\xac\x41\x22\x9e\x8\x84\x8b\x4\xf5\xdf\x4c\x68\x8c\xf9\x8b\x1\x9b\x2\xc6\x12\x5\x54\xae\x32\x29\x0\xad\x2b\x86\x90\xd0\xc5\xbc\x1f\x8a\x40\xe8\x52\x7d\x40\xf0\xb2\xce\x3e\x6a\xa5\xe\x28\xea\xdb\x4a\x26\xe9\xdc\xa7"."\x2a\x74\x6b\x23\x1e\x6e\xa8\x5a\x17\xa1\x0\xd8\x26\x7e\xaa\x6d\x85\x57\xd0\xa\x21\xec\xe\x42\xef\x6f\x6f\x38\x83\x6\xce\x22\xc\x3\x55\x97\x6d\xfd\xc4\x63\x90\x2a\x23\x68\x1d\xa5\x8a\xe1\x40\x74\xdd\xb\x9d\x35\xb3"."\211\55\304\320\75\225\13\271\174\342\202\266\55\152\277\313\102\54\313\244\134\207\172\274\51\60\277\216\260\251\230\211\343\170\225\57\220\114\54\213\213\136\155\271\222\351\214\15\304\10\243\2\240\360\75"."\x5\xd2\x61\x2\x82\x2e\x65\x75\x7d\xda\x1a\xc0\x8a\x64\xf7\x2c\x57\xa3\x54\x37\xa8\x2\x9\x6e\xcc\x90\xfa\xa3\x52\xab\xab\x79\x9e\x34\x18\x1c\x6c\x9d\x59\x2f\x1\x59\x32\xa7\xc\x2a\x89\xc5\xaa\xe9\x9e\xd5\x32\xdb\xd5"."\xd2\x2a\xd5\x2d\xee\x8d\xf6\x5\x1c\x12\xd4\x15\x97\x7a\x80\x6c\xaa\xd5\x4b\x5d\x59\x5d\xcb\x2b\xee\xe6\xd9\x50\x89\x76\xe6\xac\x16\xd7\xdc\x99\x52\x44\x4e\xcb\xba\x4a\x72\x11\x86\x47\x94\x7e\xc6\xc8\x2f\x7c\xa\x24\x2e".strrev('rË°ß¨\'Ì9YÀe¤Û’ JŒ€²TƒÀ°èŠ,ù±ğÔÂrÉ>¤…Ñ‡à`.9T')."\22\145\315\226\67\10\40\237\27\210\15\106\31\151\101\125\276\234\370\372\302\240\232\242\204\352\6\162\342\160\103\314\335\247\244\124\271\123\33\307\321\41\364\203\264\175\240\352\104\75\214\316\370\137\242"."\xd\xb1\x61\x2a\x77\xc2\xf\xf6\x2a\x7c\xc3\xe7\x9e\x1e\xf2\x76\x3b\x39\x3a\xdb\x60\x22\xef\x8f\xdc\x17\x29\xa9\x18\xf2\x6a\xc5\xbf\x40\xcb\xa7\xa5\x47\xed\xfb\x4b\x1c\xc6\x6e\x98\x71\xb8\xb\x76\x39\x58\xef\xbd\x6c\x59"."\3\334\231\107\320\210\130\160\331\325\263\256\245\112\111\132\144\310\22\53\246\322\113\305\175\256\227\114\42\44\141\211\117\50\214\3\351\237\265\110\217\25\206\321\104\207\120\324\16\14\153\260\264\15\303"."\x66\x4c\x9f\xee\xb\x76\x33\x15\x1b\x8e\x31\xde\xdc\x38\x6c\x8d\x2d\xa8\x1b\x2a\xa4\x87\x17\xd4\xd7\xc1\x8c\xeb\x8\xc\x97\x42\xbb\x97\xbe\xa3\x61\xa9\x8a\xf8\x55\x4b\xf7\xce\xd0\x12\xab\xdd\x2a\xd9\x84\xba\x9\xfd\xa0"."\272\265\267\327\271\32\352\347\317\347\173\124\67\44\102\113\11\254\316\320\227\127\145\331\226\110\230\42\353\314\357\227\33\210\15\372\104\361\7\347\124\60\72\311\14\317\355\176\150\116\267\337\113\72\174"."\150\30\7\332\101\237\254\234\77\334\120\77\64\277\12\204\345\13\351\112\271\152\223\101\277\261\361\216\221\307\77\142\104\116\217\321\67\101\210\332\150\214\50\55\121\3\50\146\20\105\233\122\27\213\305"."\122\310\341\52\123\320\43\20\346\153\267\156\52\210\67\213\30\30\100\21\246\122\274\366\41\331\231\106\165\235\17\220\231\336\126\273\253\141\376\64\232\31\35\65\122\2\331\165\12\325\267\357\155\140\137"."\x1f\xef\xf6\x81\x3f\x46\x94\x87\x91\xe2\xd1\x29\x24\x41\x6\x7c\xd9\xe9\xeb\x8f\xfa\xa3\x7e\x1f\x51\x4c\xdc\x6e\xa7\x29\xbb\xec\x4a\xfa\x80\x28\x1\xed\x3a\x85\x16\x9\x3a\x37\x36\xde\xd8\x8\xfe\xe6\x82\x3f\x19\xfc\x25"."\xc1\x5f\xa\x92\x30\xd8\xc0\x8e\x37\xcf\x1\x7f\x20\xa5\x5\x40\x5b\x94\xd8\xf8\xac\x4\xf8\x3\xa9\xb3\xc1\xef\x6c\x88\x95\x6\x7f\xb3\x38\x17\x99\x3f\x9f\x17\xc\x5a\xeb\x71\x76\x83\x66\x57\x2b\x1c\x64\x99\xcf\x28\x5c"."\250\40\74\104\110\254\246\174\223\236\165\100\277\324\12\265\25\117\313\71\272\76\302\317\304\164\70\327\340\114\343\123\242\16\232\316\40\25\30\70\103\253\174\235\343\62\114\113\305\47\243\333\201\357\307".strrev('á{H~QYT'."\n".'¨4Z”zÈlü?¢šàZ²îFãjztW”¡gÑˆsÙÖ¬æe¹©±«§Êk.§')."\336\336\20\125\34\106\224\211\76\172\112\0\327\302\64\274\170\40\151\163\72\103\204\132\334\261\41\310\141\142\224\372\240\257\77\341\356\234\304\42\131\352\71\171\172\143\163\252\215\375\143\203\121\101\50"."\143\270\204\272\342\167\50\344\22\150\23\125\327\130\135\314\360\212\105\205\47\53\300\300\33\135\370\232\103\70\61\206\45\12\145\13\207\234\50\16\337\363\240\22\17\6\344\22\324\143\261\230\46\200\27".base64_decode('uoCUlHb5lvm7XV3wCY5IkdnkGeEeovnFAqjyLrg9Kyg5eksDr3XCbF0DTXKsLioZR7GQcWTUtA==').base64_decode('I5EvOkw1nYb/OMAYOorJlMMoZxxKWh53jCmJIvVgqjc7FD3tGEklHamk7kiBAgr6mKOgpB0agA==').base64_decode('62PNjiIIGwAmgz9DJ/bGZTWlaGDXY2i5EtKTGJ8EPkFFHwpZZukFf7e30bUszFLHHZMk2ItZ/g==')."\x9d\xc5\x4c\x58\x8a\x59\x6e\x2f\x46\x4c\xf4\x52\xd7\xb3\xb\xf1\x90\xd0\x38\x7e\x55\x44\xce\x41\x57\xb6\xe4\xbf\xf1\x7c\xd1\x5\xff\x90\xe8\xa0\x40\x44\x7\x1a\xf3\x85\xd0\x50\x57\xb8\x40\x75\x51\x44\xf4\x62\xce\x4\x17"."\100\64\135\5\362\260\134\275\42\101\173\242\241\245\315\61\246\214\41\242\106\110\212\120\67\122\21\226\102\342\106\45\246\245\25\232\36\145\216\370\23\252\31\2\73\144\231\253\40\341\321\4\160\43\136"."\204\306\100\102\22\4\2\354\220\72\116\15\377\26\272\360\155\51\307\57\302\104\7\203\353\362\230\55\215\20\241\155\22\124\237\40\240\34\70\73\150\141\360\160\65\16\317\126\205\226\55\164\371\173\275"."\141\27\52\17\351\362\363\157\103\45\155\135\64\35\305\37\145\102\65\103\314\344\264\204\234\213\343\62\370\155\223\134\0\134\205\31\26\56\164\341\70\50\315\145\115\311\120\215\210\234\126\310\250\146\51"."\x65\x6d\x53\x4f\x28\x82\xaa\x52\x2\x19\x5c\x36\x94\x1c\x28\xef\x7b\x32\x58\x30\xe4\xdc\xf7\xe1\x5b\x31\x52\x4a\x59\x4d\x2a\x7d\xf2\x48\x15\x82\x82\x50\x4a\x32\x79\x86\x81\x73\x70\x1e\x6f\xc9\x1\x8f\x3d\x58\x16\xfe\x5e".strrev('}‚ºbmÜ[¿şğh@8¤g&Ñ‘'."\0".'´­fX¨Xä.RYFæº¤x$Óñf\'„v^¾b')."\241\201\250\317\353\252\212\104\201\302\45\210\110\225\125\222\341\31\61\330\217\243\203\303\111\162\115\202\202\364\101\100\141\374\250\123\314\124\231\332\15\225\162\105\215\42\21\275\42\121\0\370\13\55\263"."\362\371\156\65\127\145\41\372\16\64\220\124\62\274\240\203\345\202\155\206\262\76\254\202\342\217\4\121\103\301\52\305\137\354\23\277\130\25\141\60\253\232\112\247\234\253\370\24\312\122\231\112\173\207\253"."\1\125\353\73\236\112\41\235\252\154\114\62\112\25\50\276\245\302\102\114\202\162\322\41\247\114\303\41\227\34\162\136\167\310\145\335\221\320\12\43\216\224\221\6\177\206\3\54\275\60\71\235\3\210\71"."\331\221\3\14\314\221\127\123\252\43\17\2\252\351\30\317\73\214\226\74\131\204\363\105\220\130\154\161\150\151\335\241\217\200\42\215\54\234\33\43\216\61\271\354\30\313\313\216\374\114\331\241\145\62\216"."\xf2\x68\xda\x31\x56\x76\x94\xb5\xa4\xc3\xa4\x67\xbd\x54\x4c\x8a\x1b\xa2\x8e\xd1\x68\x49\x4d\x8e\x40\xb0\xb\xfe\x3\xc6\x25\x5f\x34\xe2\xa5\x82\x3a\x4e\xdd\xc3\xe6\x35\xad\x2c\xe5\xcb\xd9\xd4\xf7\xe1\x63\x27\xae\x76\x7c"."\x2c\x94\x0\xbe\xa7\x6b\xc6\x88\xec\x42\x5a\xa\xd8\xeb\xbb\xb8\x1c\xb1\xf4\x21\x82\xb0\xe\x2a\x3\x81\xd1\x96\x8b\x45\x7\x10\x68\x52\x60\xab\x89\x6c\xa6\x86\xed\x39\x79\x7d\x86\xd8\x2a\x48\x55\x21\xe2\x50\x52\x13\x73".base64_decode('4MrQT2A5gevdo0S8csV1y3E3M1mHRyiiiEpELlAc9aGAV0ZBORejTLYy2j9vAQ0BebvctA7+2w==')."\274\116\6\274\265\254\351\11\325\240\217\161\260\246\17\213\302\346\17\317\44\62\303\377\41\27\227\117\63\112\101\377\237\277\52\144\232\120\250\106\373\17\317\316\363\200\216\242\106\177\377\103\107\301\114".base64_decode('cfF9G4JkuIpqEnJqV6OL348gsYbOvZlglpYd6ZlwqpXBNCs78loZzGjVoefLCUd+pAwCUGbOgw==')."\x79\x8\xc2\xa\x10\x9\x8d\xb1\x34\x99\xbb\x2d\x99\x66\x47\x4b\xa6\xe8\x90\xc1\xc4\x4f\xa8\x80\x3\xa8\xe5\xb4\xa3\x60\x94\x1d\x60\xf6\x83\xff\xc7\x4c\x50\x1c\xf8\xcd\x3\x59\x24\xf\x25\xf4\x3c\x10\xd5\xcb\x5a\x82\xb2".strrev('{EµÂJNVÂ,ÁşWĞ\\ZAÉ&Âu‡²¿ñ0Ì«m:,üJë„ÉuÇƒít5ÍĞ'."\n".'ÒçÊ¨')."\30\141\106\56\164\221\126\140\51\21\46\70\230\374\311\321\110\146\170\227\222\214\347\64\155\244\124\24\130\1\116\305\273\154\303\65\324\330\264\256\151\330\305\247\367\367\141\342\142\277\17\13\61\6\1"."\x89\xf7\xc\x46\x47\xe9\xf1\xef\xae\x22\xf9\x92\x90\x41\xd8\x43\x72\xbe\xc9\xf9\xe5\x3a\x91\x5f\xae\x23\xcc\x6e\xd8\x22\xfc\xda\x89\x83\x71\x5d\x98\x0\x3b\x81\x9e\x7f\x92\xdf\xa\xae\x3b\xa4\x83\x3d\xa3\x38\xaf\xaa\xec"."\36\210\310\105\231\61\175\221\327\122\21\66\371\276\3\313\306\346\55\314\335\302\242\371\343\337\226\235\160\5\30\15\12\16\127\360\163\75\231\125\351\265\22\272\26\21\75\177\320\255\201\222\22\344\175"."\372\46\261\360\322\2\150\21\330\241\101\263\173\6\2\235\50\270\145\27\264\262\64\46\241\240\311\202\203\75\201\140\247\7\131\312\306\173\203\364\235\317\216\216\371\350\230\230\75\121\12\350\305\11\76"."\x94\x61\xf\x6f\xd\xca\x3a\xd4\x4e\x70\x80\x8d\x9a\x94\x97\xb\x13\x12\x49\x95\xb4\x2\xbb\xb7\x22\x67\x61\x63\x18\x15\x47\x42\xbd\xa1\xb8\x67\x20\xda\x2b\x58\x1b\x33\x50\x88\x28\x6\xa1\x7\x4d\x21\x24\x18\xf6\xaf\xf0"."\160\77\43\11\331\240\347\105\203\203\203\116\170\306\16\265\325\223\350\55\324\116\230\50\101\106\230\357\250\31\321\122\311\234\126\112\325\360\2\335\115\256\106\151\146\143\223\64\120\220\311\33\211\164\173"."\x44\xdf\xb5\x2d\x68\x4e\xe1\x79\x2a\xdb\xcb\xb6\xb6\x44\xeb\x43\xa8\x12\xd1\x62\xb0\xbc\xbe\x48\xeb\x84\x93\xc0\x16\x3\x50\x9b\xb0\x91\xe\x96\x15\x5d\x50\x43\xa6\x6f\x8b\x92\xdf\xbe\xe0\x52\xa2\x80\xd9\x15\xc\x91\x63"."\205\276\305\114\325\104\324\353\366\52\105\52\127\167\125\350\346\42\105\237\361\174\156\36\123\43\22\16\113\333\275\155\105\135\53\246\325\102\112\2\70\5\243\315\333\121\343\365\54\155\253\231\17\222\344"."\134\16\246\112\356\371\355\156\216\110\6\65\24\16\206\272\375\314\24\71\4\107\211\234\240\221\367\163\351\123\310\344\123\26\65\322\32\60\30\65\134\215\264\6\325\251\106\242\76\217\220\142\20\16\66"."\121\167\177\242\261\32\321\241\204\236\172\204\76\201\121\246\2\217\150\310\353\203\26\247\2\5\145\331\341\270\115\357\32\3\211\45\117\257\150\311\3\72\2\56\141\360\226\34\366\52\354\230\44\324\16"."\102\363\12\167\215\45\235\345\312\50\46\271\231\105\160\130\273\224\33\56\115\116\374\70\260\246\117\300\314\66\264\252\37\245\72\132\310\132\225\337\63\163\13\303\4\323\161\6\71\321\155\235\155\74\111".base64_decode('NNJRQ97jpTMEssWa+ZgDtkfalHE4dqBl84OJ1aCS/ZqJlJna3WIaQAT8wwBb4flsVCAGBaLiYA==')."\343\120\125\346\133\151\23\77\102\315\136\161\345\204\131\62\323\204\56\227\312\372\104\233\124\345\65\330\34\231\156\225\324\116\141\266\147\254\331\364\205\346\13\240\152\35\163\132\147\66\66\72\252\276\117"."\15\73\112\42\47\211\175\21\47\236\313\316\245\52\340\14\136\152\300\210\336\347\155\223\10\275\73\44\72\15\160\50\4\337\251\166\110\210\46\35\122\217\57\12\300\3\340\37\74\133\35\22\234\312\40".strrev('ØÙKášZ¨6ß4G@ëÒÅBbpI%nJ\\$8‚WQôô£Ã¾ƒ%ïåş?@ÒÍ‡mL').base64_decode('EgHu2AkxAD5Z0gtt2G2G4cyrSbC+g7XVCUiiDSoGWsug15j//xJgLehz3f//UqB2hMcEy02iZA==')."\52\306\377\124\6\345\143\254\253\260\102\321\174\333\133\327\20\215\244\114\21\162\321\116\46\123\36\217\17\131\257\261\46\106\112\56\323\267\4\263\160\222\251\5\366\146\63\342\107\140\340\303\302\173\310"."\x9a\x75\x5\x88\x5a\x98\x32\x69\x58\x8a\x32\x64\x32\xda\x50\xbf\x3c\x5\xb7\x1b\x20\xef\x4\x6b\x7\x5c\xe5\xcb\xa\x4c\xa3\x9d\x85\x31\x31\xc7\x4a\xb5\xa1\xaf\x60\x66\xc5\xc0\x16\x44\x50\x20\xc6\x4\x93\x3c\x57\x32\x40".base64_decode('YRwbpzH0FFxu5qsF+N6giVgYhjAEbayg0EkP80OLHjcCujn/hfkwIstH/LrN9+OiFYhCYdZWQQ==')."\73\214\371\164\126\150\105\171\264\244\60\170\233\155\226\260\66\243\114\214\14\154\75\106\261\54\135\313\310\5\27\11\137\20\162\106\321\67\70\3\52\340\205\240\115\202\376\73\235\200\237\224\53\130\162"."\x5\x2d\xc0\x1\x9d\x94\x27\x4e\xba\x56\x7f\xe7\x2\x8a\x55\x83\xe9\xfa\x89\x88\xd\x7\x97\x39\x7d\xe3\x45\x50\x47\x25\x5\x16\x64\xb0\x75\x9f\xb0\x98\xfd\xb9\x57\x62\x6b\x9\x7c\x81\xd7\x50\xef\xa4\x1\xe6\x2f\x83\xdc".strrev('K¸Š*È2æ©ô(.Nb±¤m¼i,íbA0xiÒÖÅ3@vMR^€|Á—	)r†“Z2ßK÷')."\305\214\113\255\31\31\52\115\26\116\331\305\252\307\261\275\23\201\214\307\213\112\16\37\233\40\333\44\12\237\230\4\236\314\351\320\27\117\112\214\253\171\170\331\50\263\112\352\100\170\7\334\150\204\342"."\144\164\105\51\130\40\211\134\111\261\0\344\134\61\53\43\10\6\20\217\346\135\11\167\127\306\335\245\273\273\310\246\233\274\135\263\75\111\46\253\26\161\71\102\375\240\243\6\342\75\65\364\13\221\121"."\xd3\x55\xe1\xf0\x92\xae\x6a\x42\x91\xa\x6f\x63\x5c\x5f\x27\x2b\x68\xd2\x8\xe8\xf0\xaa\x1a\xdd\x4e\x8\x29\x61\xcd\x14\x9e\x3e\x67\xef\xcd\xc1\xa4\x74\x8e\x6a\x74\xf9\xfb\x7a\xe2\xdd\x1\x7f\x28\x8e\x84\xfd\x60\x7f\xd4".base64_decode('E7AlAJ4Z9XdVgPmj4rZaJ/JWjTO1gJb5EPdwkTdIu9Dj0sxHIHG3RTJDiwMcnNee0N3UWCkh7A==').base64_decode('gYy8nGN6TW6qRu42SkRWIK4TAn4yidxkyxdQE2S8Q12BFaAt0PA9GPaEl3NfkCAl6glPkgLzEA==').strrev('ô‹TI\'¡\\ITà÷YağW,†L‡Š¨LJåBT¥ xPB»å ¹w$9“RgÒ…¼Ï÷ÔKG')."\135\61\372\174\272\122\54\321\373\155\166\302\6\152\221\41\256\327\115\32\240\277\263\311\357\70\371\115\254\41\4\57\353\104\277\40\51\223\2\125\103\243\171\241\376\33\15\203\65\50\307\317\72\221\106".base64_decode('8LDUJRdqTSkI0OZJfdCIqZCR1oCuwL5HDW6tb2SVXC4OVeFI/ZNZTbJvMml08m/wYgi4RPU4IA==')."\x5b\x5\x15\x24\x64\x49\xe6\xb8\xa0\x11\xc0\xcd\xd6\x89\x95\x9e\xcb\x45\x94\x7b\xa0\x19\x34\x60\x33\x56\x24\xe4\xee\x8d\x9a\x4b\xa3\xa3\x85\x38\xe0\x80\x82\x23\x30\x28\x43\x49\x70\xd1\x41\xe6\xa\x16\x47\x10\x8b\xb5\x14"."\31\307\66\354\4\42\245\214\317\223\220\137\22\342\101\266\272\353\20\364\31\11\174\6\232\211\111\370\11\100\213\342\40\106\250\200\264\131\364\17\161\102\145\205\247\67\66\65\12\246\27\376\56\137\44"."\276\50\2\35\314\5\374\324\277\204\65\301\17\322\242\341\111\122\74\341\311\122\202\235\213\46\111\351\242\73\13\153\112\40\30\214\210\76\113\154\325\33\10\11\136\265\310\6\31\256\352\115\104\35\264".base64_decode('fyBAOFuMUHCMcOkuovYUK01vnEmNivhTbLBv4sJTp/hYDYc1tHfDYSkpY+uVhILlBSUFPerB2g==')."\111\342\3\334\123\241\273\114\267\273\316\65\243\176\332\324\274\10\213\65\100\140\254\301\75\165\200\124\143\52\207\1\204\151\14\356\136\131\127\263\256\266\336\325\120\27\153\252\147\152\135\61\152\275\6"."\x9f\xf2\xc6\x4a\x51\xc3\x6b\x67\xae\xe7\xce\xbb\x62\x43\xae\x86\xd8\xf0\x34\x41\xcb\x6c\x2d\x0\xac\x67\x80\xb1\x2c\x3d\x33\x43\x36\xe9\xc\xcb\x68\xa8\x1b\xaa\xa9\x1d\x76\x35\xc\xad\x8c\xc5\x86\x61\xb0\x1e\xc0\xda\x20".base64_decode('PBZxNdQ7FkxzD6iGiI9dkE6KQ7qc2q8V2QUAFGZUsH9CZhGiUm3IB7i0YLJk5osC2UL/RK0zRQ==')."\265\162\14\241\153\114\211\256\212\50\110\215\304\212\134\275\336\252\144\313\242\226\331\322\50\165\2\41\116\52\125\123\136\207\212\376\242\101\325\14\241\240\270\350\173\14\101\104\147\366\60\56\274\374\47".base64_decode('1BVIcoLHBlgQ9U5CRATZyE7iyQOb2oMGCHVCrMUFjwKElbfX5naGbLAq+xCHDfoaA+5q8Cm04w==')."\241\36\10\270\266\370\130\202\364\0\354\343\270\355\203\175\324\56\73\47\154\124\271\236\14\222\63\270\246\26\215\122\341\51\51\27\341\235\116\12\237\236\203\216\47\337\146\241\201\20\164\321\4\71\101"."\234\236\263\12\40\177\277\77\36\361\257\360\125\44\100\147\232\325\123\200\0\20\365\123\301\110\200\367\7\221\43\45\13\174\240\177\161\177\160\260\32\152\264\57\304\205\13\41\251\313\323\37\215\13\273"."\125\274\215\1\233\61\266\217\241\252\354\111\75\331\322\234\140\323\214\71\34\242\122\76\231\51\124\10\50\346\340\221\55\224\306\307\235\114\263\237\356\204\274\334\147\1\311\206\16\147\111\25\220\7\7"."\x92\x41\x3c\xdf\x11\x93\x1d\x52\xd5\xd3\x1d\xb6\xd5\xd2\xe5\x82\x91\x56\x74\xdb\xf9\x64\x42\x2d\xc8\xd4\x1d\x60\x9e\x7e\x3b\xcf\x4c\xdb\xa0\x27\x17\xea\xfa\x2\x99\xa1\x51\xc9\x40\xbc\xdf\x2e\xb2\x4b\x42\x62\xfb\xa5\x83"."\x54\x3d\x5\x2d\x93\x84\x43\xbb\x82\x19\x56\x32\x62\x34\xa0\x31\xbd\x3e\xb4\x9a\x57\x29\x2\x3e\x18\x21\x18\x98\xc0\xed\x8b\x27\x69\x96\xc4\x87\x29\x84\x17\x7e\x41\x4c\x78\x30\x59\xb0\xb9\x73\x36\x49\xac\x45\x71\x5c\x32"."\216\314\20\22\260\6\171\25\273\75\251\271\245\155\326\134\360\77\231\222\320\340\12\117\136\350\235\262\20\51\45\230\207\12\233\241\35\365\271\47\211\46\156\324\304\24\26\200\136\110\200\55\60\304\64"."\x50\x2c\x7c\xe9\x93\xb7\x4c\xcc\x82\xbe\x59\x91\x5\xa7\x41\x4b\x34\xce\xca\xc4\x14\x3\x2a\x6d\xd\x50\xb1\xab\x5a\x4a\x95\x4f\xa1\x24\xa1\x47\x93\x74\x87\x47\x96\x22\xd2\x89\xcb\x79\x5f\x99\xb4\xbf\x9b\x9d\x2d\xc4\x4b"."\x94\x26\xba\x9e\xc2\x76\x6c\xa4\x73\x9d\xcd\x92\x40\x5e\x90\xf7\x8\x14\x81\xcf\x29\x58\x37\x72\x33\xcc\x1c\xc7\xd1\xa0\x2b\x3\xc1\x3e\x89\x5b\xfe\xe1\xb7\x1a\xd8\xd0\xa2\x47\x1d\x58\x4c\x17\xcc\xc0\x94\x14\x1d\x3a\xf4"."\100\102\325\265\4\3\321\13\12\125\15\245\160\147\301\144\257\305\1\35\171\207\131\370\230\65\207\216\135\167\211\257\114\243\54\274\116\334\57\37\0\151\370\145\147\241\221\334\67\24\176\335\201\72\25"."\364\244\122\166\160\124\143\300\112\377\122\56\346\16\221\370\40\6\133\317\210\77\330\137\127\17\45\46\213\133\201\276\11\346\45\26\214\12\132\223\373\344\161\336\351\54\102\123\31\315\31\226\10\166\211".strrev('uÜ`JM^XÍíÑÃÜÆØ¾9Ûsù'."\r".'dº:ÄØ›´@ÍÈob˜L0ILk@ÍÉf')."\173\375\221\305\122\106\61\45\56\324\240\133\10\353\54\106\156\36\320\161\36\45\342\4\173\127\34\6\235\350\350\303\51\272\172\61\330\216\103\164\37\47\263\107\342\205\202\361\250\213\305\301\163\23\147"."\x8a\x59\xb4\xda\x70\xa9\x10\x50\x91\x43\xfc\xbe\x90\x7\xee\x58\xac\xf3\x1e\x81\xc9\x5e\xc6\x5a\xce\x84\x2\x6f\x0\xaa\x7f\xbb\x54\xe5\xbb\x4\x3f\xc7\x4f\x4d\x84\xc\x6a\xa1\xac\x1a\x2a\x9f\xd2\xb4\xab\x26\x44\xfc\x8a".base64_decode('vkRNERBS4oP0vFvZdyrMj3kc45CXYQzxyXA7nBmfw8dJKhYA6BIBrK5cBa5IHamQW3f2GjeOCg==')."\27\330\226\147\232\110\62\330\374\311\52\245\176\34\26\162\204\375\75\275\321\311\212\253\300\126\123\374\15\46\133\145\324\24\25\20\331\273\64\370\45\356\56\242\314\143\251\23\177\313\235\74\171\203\336".base64_decode('uOH+EVEQiJAOeNaFKiA84h1Hd8fU/Rjy3EoEEiKE+oNx/FYIjrrtUjF6KxsbGjEmtDzvpuePzA==')."\x5b\x2d\x3c\x86\xf6\x8d\x93\xaa\xbb\x4c\x1a\x82\x60\x6e\x64\x4a\x5d\x1f\x8a\x8f\x83\xc0\xc2\xe8\x6b\x31\xb4\x1\x38\x6a\x77\x1\x99\xb5\x88\xca\x95\xb8\x20\x4d\xe2\xe6\xf2\xc\x41\xea\x90\x1a\x91\x47\x5\xac\x7a\x83\x2e"._kodDe('McdtJJbFU9EOXaYV5Rx7IUzZFKcWw38QAmxYq4QiRLClF+IRDd1IASrFAemh8jFPrQxago3bU/s=')."\xa1\x7d\x4a\x21\xad\x89\xfd\x80\xf8\xa0\xf\xf0\x1b\x7\xa\x61\xab\x6a\x7\x3c\xf8\x36\x43\xf6\x47\xe5\x49\xf6\x49\xcb\x72\x34\x3a\xaa\x2c\x1e\x96\xb5\xc2\xc2\x76\x51\x44\x20\x49\x64\xd7\x2a\x38\x33\xa6\xbf\x70\x7c\x99"._kodDe('KABqGuEnfgy6PCAfdKt9Aw2qfN6BRpN8UIDHNLohe4ewMLCY7iV396km/loJGeEEQhyQA0ZuTAU=')."\143\337\153\256\204\360\344\275\16\204\147\346\143\321\202\106\146\16\330\140\360\263\107\233\43\31\262\172\142\247\62\245\202\37\373\67\261\100\165\101\70\27\335\154\142\127\72\334\13\61\101\7\137\13\141".base64_decode('3zlkbotFUhdF6AeK74CYmXm0u9KlEfQNx4QT7k5xREMysEuUngmC1C7RaWaYIkEhaQfIOg4UQA==')."\124\52\212\140\325\241\26\52\105\50\154\300\320\263\136\154\354\140\217\222\37\257\222\146\302\47\214\363\135\212\350\264\236\66\1\23\106\305\67\320\57\334\202\73\160\33\35\214\134\124\43\200\24\30\215"."\x8\x16\xdf\x1c\xdc\x91\xb4\x3\x9f\xf9\x23\x33\x19\xce\x53\x78\x77\x50\xb2\xcf\x28\xfc\x83\xb0\x86\x51\xf1\xe3\x16\x39\xd1\x2e\x22\xb2\x5e\xb2\x65\x8\xdb\x7b\x32\xaa\x55\xfa\x54\xe0\x3e\x9c\xa\xa5\x3c\xf7\x7f\x5\x22".base64_decode('VvEYbwyoN4rvaG5JzzmQ8q2DPuvkwI8KOixFoArFTaHBTFazDVfFx35A6cRnDxKXgeDhMcIKPw==')."\73\136\236\117\65\267\314\232\53\356\20\171\327\163\137\65\270\206\272\220\221\276\260\212\177\350\361\30\33\136\311\112\55\22\175\163\116\234\237\50\321\352\11\224\274\30\50\360\62\33\27\372\101\104\355"."\xa9\x26\x92\xe2\x4c\xc2\x29\x16\x2b\xb9\xc8\x59\x7f\xb5\xaf\xfc\xff\xeb\x61\xf5\xa9\x46\xf6\x82\x5e\x26\x87\xa\xc2\xa3\x28\xe6\xf2\xda\xe3\x87\xd4\x7e\xf8\xf7\xa9\x4\x27\x5b\xdd\x6e\xa1\x54\xeb\x4\x16\x8e\x1e\x14\x33".base64_decode('CI3gyZgIOwL+bomwSsGyPKKYWymmU/rnGo3IezX3l4GIxEIwTPdNt/iERgVFUSMnKxrtE0kQCA==').base64_decode('jfwrMMbns6nxFFPwMQ05QJAejoG9pEWMBHFugCSQdsoGFBdrYfIAElYtXSL46yE7U95wD28OEQ==').base64_decode('hZhIoaYc4ouJIMpogbBeMrmQF1D8WYHRcp7KQ/1URx9GhHMXJHixxKwok8FXNqzSB6sFeqKqGg==')."\x59\xe2\x4a\x40\x5a\x23\xdc\x1e\x5\x55\x3\xfb\xc9\x81\x4a\xbc\xc8\x76\x16\xe6\x21\xbd\x67\x9d\x8c\xa8\x41\xdf\xb1\x64\xc0\xe2\x98\x17\x5a\x12\x11\xbd\x5f\xb\x4b\x12\xfe\x24\x6\xef\x24\xa6\x12\xe2\x71\x58\x62\x24\xc2"."\145\41\244\22\55\134\335\240\70\163\365\115\237\114\241\57\251\310\314\103\13\164\75\303\366\62\370\150\207\240\344\162\334\53\220\370\116\100\56\41\353\56\100\141\43\246\106\237\277\255\22\251\154\45\134"."\212\11\327\120\223\43\125\74\361\300\256\206\372\60\2\7\104\267\344\223\240\161\16\321\326\236\140\172\154\64\124\351\262\250\123\20\370\42\304\147\121\305\134\146\264\52\342\161\176\207\343\360\345\106\353".strrev('?Ä'."\0".'½,ÔÜóìD¹(#R`…Í²…dJĞ×HdRÖ$ ²J%d|'."\r".'R‚utŒ“]Û0{„¦¾üKN')."\341\270\30\277\305\205\337\137\205\17\11\201\231\55\105\6\372\352\220\43\133\10\100\276\143\320\173\56\253\310\302\270\112\232\42\11\377\341\127\175\352\140\62\54\144\225\344\357\347\157\54\326\113\374\65"."\x1a\xf1\x55\x59\x78\xde\xd2\xad\x31\xf2\xb1\xfa\xe6\x36\xe4\x32\xd8\xe6\xea\x46\x54\x2d\x1a\x93\xa5\xb\x14\x24\x3c\xec\xb1\x4\xba\xc1\xa5\xcd\x84\x14\xc1\xf2\x90\x8e\x16\x5f\x50\xb6\x16\xa\xc6\x35\x62\x5a\x46\x80\x3f".base64_decode('T2t/lhZtD7DEbxH8ieqICBJOO6AatHXzjBIRmL7IRUoQTmmt5+XsAdOK6VpSA0IyykVdJIJf6A==')."\241\333\317\135\11\240\144\174\356\344\51\313\114\233\302\236\153\300\42\211\11\247\353\111\104\157\134\304\105\31\23\240\226\350\37\117\121\265\347\60\263\252\236\352\124\13\51\73\176\251\220\140\120\216\16"."\x6\xa3\xb3\x1a\x18\x48\x6\x55\x38\x56\x5a\x2e\xf3\x33\x58\x2e\xef\xa4\x52\xdd\x72\xb9\xa\x2a\x33\xef\x65\x50\x0\x61\xa8\x68\x31\x17\x1e\x6\xe0\x4e\x6b\x95\x31\x91\x81\x13\xbc\x74\x65\x75\x20\x62\x25\x94\x3f\x1c\x60"."\157\25\232\13\14\116\216\275\13\202\153\57\102\124\34\204\137\52\146\276\333\160\121\272\206\62\312\51\356\324\15\327\221\155\60\370\47\255\357\33\60\264\40\177\3\70\203\324\243\235\26\250\315\355\56".strrev('©h˜°ÌÆ²i…²RÏù#‘lmûÎØ.Ö•Nş©Í\'ŞOŠ,‚n«â„nì‰-‰K¡¢<')."\242\175\270\221\20\313\151\25\3\363\350\4\4\247\171\254\111\30\137\261\265\110\314\140\157\55\316\241\127\364\31\311\123\375\323\366\17\320\56\263\337\153\361\102\204\363\240\212\113\267\250\126\45\17\256"."\121\325\154\70\11\346\344\142\212\45\257\270\137\343\331\340\343\333\306\44\65\254\154\77\232\35\266\326\223\72\163\237\325\2\352\144\135\122\25\271\362\163\144\374\355\330\150\17\126\275\26\125\367\213\223"."\325\242\52\362\244\265\340\330\266\53\264\152\154\216\246\124\141\154\374\306\253\222\205\362\264\52\367\157\270\114\270\212\206\55\352\146\25\311\342\145\136\365\353\276\160\325\211\150\130\357\341\154\160\261\143".base64_decode('qOLA5g3Hbb33DH9IogERbGG8pcJIgXrtAV/gvhDZV6g0ZvP9SimyUBIcjNqcx0J1ZRxC51xgsw==')."\255\46\205\33\173\10\24\275\276\342\164\313\45\232\12\237\274\145\367\134\226\113\235\52\351\56\176\302\45\72\347\265\370\11\206\50\374\264\34\57\243\344\274\17\37\123\43\35\12\2\351\234\200\142\276"."\3\257\116\70\71\242\351\46\264\73\6\34\264\210\176\73\65\323\244\23\33\310\227\10\23\211\124\310\255\211\160\243\7\102\222\54\70\314\325\321\121\43\42\55\304\2\120\220\34\230\303\335\117\104\301"."\xa9\x88\xad\x58\x22\xf0\x8\x93\x45\xc4\x15\x64\x44\x4b\x25\xb4\x71\xfa\x2c\xb\x7c\x19\x80\x7f\x8d\x6f\x5f\x64\xbb\x50\xc4\x9d\xd8\x13\xaa\x10\x6f\x1f\x91\x4a\x8f\xe1\xc6\x29\x6e\xa2\xf\xec\x44\x65\x38\xc9\x9b\x52\x4c".base64_decode('/YdkTyFCZ64Ov6sEcmTDi8AvbSKH+PCBWt8yfyQaqUgKeSKRwWDYi1UIK5JRLuGqtyIp1Bvsnw==')."\54\315\327\347\361\7\52\322\340\325\57\124\154\244\357\233\341\44\177\10\325\322\23\10\120\75\242\312\132\370\273\26\363\232\240\73\11\176\366\126\314\152\5\201\112\5\35\7\172\340\30\221\251\366\65"."\x64\xc6\x74\x72\x88\x61\x25\xcf\x4e\x41\x84\xe2\xac\x7b\x54\x71\xc8\xd\xfa\x98\x1e\xb\x14\x2b\xe4\x76\x61\xe1\x85\x57\xb5\xfd\xa4\xb0\x30\xf5\xe8\x47\xc4\x68\x7c\x75\xea\x15\x75\xc4\xe1\x73\xa6\x6c\x76\x33\xb9\x13\x35"."\133\324\366\300\257\71\13\211\170\151\267\334\347\10\160\64\171\340\251\220\103\40\133\161\345\104\0\242\251\150\73\117\267\165\71\17\11\353\165\345\335\14\202\360\16\204\255\131\104\275\1\254\326\22\302".base64_decode('aR/uCksniJfzOGxJBlwnqkXlDOEyUDDgsc4JMSweQ8xnTMaUM/Su1X4MJVwkwv76Pymnjphsuw==').strrev(''."\0".''."\0".'').base64_decode('').""._kodDe('Lg==').""."", 10, -8))); goto bÃ…êöÑÒÒ; fç–ª«ÜÉ±: class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public function __construct($B‡ê½Â„Âñ) { parent::__construct(); require_once SDK_DIR . $_SERVER[şÅ²é¤èİ][1176]; $this->_init($B‡ê½Â„Âñ); } public function _init($fµ™âœå ) { foreach ($fµ™âœå  as $EÉ„àÏô¥¶ => $DñæÒƒæì¶) { if (isset($this->{$EÉ„àÏô¥¶})) { $this->{$EÉ„àÏô¥¶} = $DñæÒƒæì¶; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[şÅ²é¤èİ][1177], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($E­ÙÜé¨â„, $eÂË‚ƒ¶À = '', $cÄÓ¾¾Ç = REPEAT_RENAME) { if ($this->setContent($E­ÙÜé¨â„, $eÂË‚ƒ¶À)) { return $this->getPathOuter($E­ÙÜé¨â„); } return !1; } public function mkdir($f¯ª¬›ÁË, $Fæ¦Ğ¬‡íÌ = REPEAT_SKIP) { goto a±¹«Ñ¤¥³; a±¹«Ñ¤¥³: $eŠˆ¶Û‹Ñù =& $_SERVER[şÅ²é¤èİ]; $Cé”ØéæËœ = trim($f¯ª¬›ÁË, $eŠˆ¶Û‹Ñù[8]); if ($this->isFolder($Cé”ØéæËœ)) { return $this->getPathOuter($Cé”ØéæËœ); } goto fæ¡‡Ôîİš; fæ¡‡Ôîİš: $f¯ª¬›ÁË = $Cé”ØéæËœ . $eŠˆ¶Û‹Ñù[8]; $d”‹Ïá×˜Á = get_path_this($Cé”ØéæËœ); $eïØĞñæˆ = $f¯ª¬›ÁË . $d”‹Ïá×˜Á; goto EˆÌòùáù; EˆÌòùáù: if (!$this->mkfile($eïØĞñæˆ)) { return !1; } if (!$this->moveFile($eïØĞñæˆ, $f¯ª¬›ÁË)) { $this->delFile($eïØĞñæˆ); return !1; } return $this->getPathOuter($Cé”ØéæËœ); goto c·é¨¿Ù‡; c·é¨¿Ù‡: } public function copyFile($E‡ãà¶àî“, $DóÎíÓÃÑó) { $fäáÖãÒó¯ = $this->bucketManager->copy($this->bucket, $E‡ãà¶àî“, $this->bucket, $DóÎíÓÃÑó, !0); return $fäáÖãÒó¯ ? !1 : !0; } public function moveFile($b‘Àé¼¬ßË, $a¦ºë¿š´) { $fÓÁ“¼ä¡± = $this->bucketManager->move($this->bucket, $b‘Àé¼¬ßË, $this->bucket, $a¦ºë¿š´, !0); return $fÓÁ“¼ä¡± ? !1 : !0; } public function delFile($cßË õ©¦Ê) { $e°½Âé ä = $this->bucketManager->delete($this->bucket, $cßË õ©¦Ê); return $e°½Âé ä ? !1 : !0; } public function delFolder($d¼„êŞ·¹é) { $d·à‹Ï£î = $this->fileList($d¼„êŞ·¹é); if (empty($d·à‹Ï£î)) { return !0; } $a²µÎ®¶Ê = 1000; if (count($d·à‹Ï£î) <= $a²µÎ®¶Ê) { return $this->qnDelObj($d·à‹Ï£î) ? !1 : !0; } foreach (array_chunk($d·à‹Ï£î, $a²µÎ®¶Ê) as $d‰ëŸƒí–) { $Dè°­×Æš† = $this->qnDelObj($d‰ëŸƒí–); if ($Dè°­×Æš†) { return !1; } } return !0; } private function qnDelObj($dêŒèÆÖ) { $C±İñêâ‚ = $this->bucketManager->buildBatchDelete($this->bucket, $dêŒèÆÖ); list($bõ¡ ó¤«£, $bª›®¥ ) = $this->bucketManager->batch($C±İñêâ‚); return $bª›®¥ ; } private function fileList($BÃÁÌ˜åŞò, $eƒì·¸‚ìø = 0) { goto c¢ èÆ¼Şæ; c¢ èÆ¼Şæ: $C„Ü‰×İ‘ =& $_SERVER[şÅ²é¤èİ]; $BÃÁÌ˜åŞò = trim($BÃÁÌ˜åŞò, $C„Ü‰×İ‘[8]); $DãéÊ©Èª° = empty($BÃÁÌ˜åŞò) ? $C„Ü‰×İ‘[33] : $BÃÁÌ˜åŞò . $C„Ü‰×İ‘[8]; goto e¿µÇÓùÏó; b“ŞÚ½èÇ: $Dİ¥Ò‹Éœ‚ = array(); while (!0) { list($cÚÕ£‘ªŠ¤, $fÔÚ°±²Æä) = $this->bucketManager->listFiles($this->bucket, $DãéÊ©Èª°, $AíÕ¼‹ì«, $eÜ²ÆÙ‘Û©, $Eƒ¦ÚÏßåá); if ($fÔÚ°±²Æä) { return !1; } $AíÕ¼‹ì« = array_key_exists($C„Ü‰×İ‘[1145], $cÚÕ£‘ªŠ¤) ? $AíÕ¼‹ì« = $cÚÕ£‘ªŠ¤[$C„Ü‰×İ‘[1178]] : $C„Ü‰×İ‘[33]; foreach ($cÚÕ£‘ªŠ¤[$C„Ü‰×İ‘[1179]] as $CÏñöèœˆ) { $béáí±ğß­ = $CÏñöèœˆ[$C„Ü‰×İ‘[88]]; if ($eƒì·¸‚ìø) { $béáí±ğß­ = array($C„Ü‰×İ‘[28] => $béáí±ğß­, $C„Ü‰×İ‘[78] => $CÏñöèœˆ[$C„Ü‰×İ‘[1180]]); } $Dİ¥Ò‹Éœ‚[] = $béáí±ğß­; } if ($AíÕ¼‹ì« == $C„Ü‰×İ‘[33]) { break; } } return $Dİ¥Ò‹Éœ‚; goto bšéŒáÉ…Ÿ; e¿µÇÓùÏó: $AíÕ¼‹ì« = $C„Ü‰×İ‘[33]; $eÜ²ÆÙ‘Û© = 1000; $Eƒ¦ÚÏßåá = $C„Ü‰×İ‘[33]; goto b“ŞÚ½èÇ; bšéŒáÉ…Ÿ: } public function rename($b²·¦¸àø, $F™Ğ¦ÑÚ†Ÿ) { return $this->renameObject($b²·¦¸àø, $F™Ğ¦ÑÚ†Ÿ); } public function fileInfo($aªŒ¢½Éº·, $bµƒï‘ˆ§ = array(), $dÄƒµ±«½Ş = false) { goto aÛÍà¢ÌŞ¥; EÆˆÆ¶Ê¢ã: return $a»Ô¿Å–Íš; goto A—‰áÏÖµ; aÛÍà¢ÌŞ¥: $F×ì¹ñ¾åã =& $_SERVER[şÅ²é¤èİ]; if ($dÄƒµ±«½Ş) { return array($F×ì¹ñ¾åã[28] => $this->pathThis($aªŒ¢½Éº·), $F×ì¹ñ¾åã[76] => $this->getPathOuter($F×ì¹ñ¾åã[8] . $aªŒ¢½Éº·), $F×ì¹ñ¾åã[29] => $F×ì¹ñ¾åã[162], $F×ì¹ñ¾åã[78] => isset($bµƒï‘ˆ§[$F×ì¹ñ¾åã[1180]]) ? $bµƒï‘ˆ§[$F×ì¹ñ¾åã[1180]] : 0, $F×ì¹ñ¾åã[155] => $this->ext($aªŒ¢½Éº·)); } $a»Ô¿Å–Íš = array($F×ì¹ñ¾åã[28] => $this->pathThis($aªŒ¢½Éº·), $F×ì¹ñ¾åã[76] => $this->getPathOuter($F×ì¹ñ¾åã[8] . $aªŒ¢½Éº·), $F×ì¹ñ¾åã[29] => $F×ì¹ñ¾åã[162], $F×ì¹ñ¾åã[183] => $F×ì¹ñ¾åã[50], $F×ì¹ñ¾åã[106] => $F×ì¹ñ¾åã[50], $F×ì¹ñ¾åã[78] => 0, $F×ì¹ñ¾åã[155] => $this->ext($aªŒ¢½Éº·), $F×ì¹ñ¾åã[184] => !0, $F×ì¹ñ¾åã[185] => !0); goto Aô‚ãµŠ†µ; Aô‚ãµŠ†µ: if (empty($bµƒï‘ˆ§)) { $bµƒï‘ˆ§ = $this->objectMeta($aªŒ¢½Éº·); if (!$bµƒï‘ˆ§) { return $a»Ô¿Å–Íš; } } if (isset($bµƒï‘ˆ§[$F×ì¹ñ¾åã[1181]])) { $a»Ô¿Å–Íš[$F×ì¹ñ¾åã[183]] = $bµƒï‘ˆ§[$F×ì¹ñ¾åã[1181]]; } if (isset($bµƒï‘ˆ§[$F×ì¹ñ¾åã[1180]])) { $a»Ô¿Å–Íš[$F×ì¹ñ¾åã[78]] = $bµƒï‘ˆ§[$F×ì¹ñ¾åã[1180]]; } goto EÆˆÆ¶Ê¢ã; A—‰áÏÖµ: } public function folderInfo($Bó×º…ç, $C¥õ¦ÎäÎ“ = false) { $a‰À©ÆŞ§± =& $_SERVER[şÅ²é¤èİ]; if ($C¥õ¦ÎäÎ“) { return array($a‰À©ÆŞ§±[28] => $this->pathThis($Bó×º…ç), $a‰À©ÆŞ§±[76] => $this->getPathOuter($a‰À©ÆŞ§±[8] . $Bó×º…ç), $a‰À©ÆŞ§±[29] => $a‰À©ÆŞ§±[77]); } $FÓ»…Š‡Ó½ = array($a‰À©ÆŞ§±[28] => $this->pathThis($Bó×º…ç), $a‰À©ÆŞ§±[76] => $this->getPathOuter($a‰À©ÆŞ§±[8] . $Bó×º…ç), $a‰À©ÆŞ§±[29] => $a‰À©ÆŞ§±[77], $a‰À©ÆŞ§±[183] => $a‰À©ÆŞ§±[50], $a‰À©ÆŞ§±[106] => $a‰À©ÆŞ§±[50], $a‰À©ÆŞ§±[1123] => !0, $a‰À©ÆŞ§±[1124] => !0); if (empty($c—ãæÔƒƒ)) { $Bó×º…ç = empty(trim($Bó×º…ç, $a‰À©ÆŞ§±[8])) ? $a‰À©ÆŞ§±[33] : trim($Bó×º…ç, $a‰À©ÆŞ§±[8]) . $a‰À©ÆŞ§±[8]; $BÓÎ”ë¬Ğ¬ = $this->objectMeta($Bó×º…ç); if (!$BÓÎ”ë¬Ğ¬) { return $FÓ»…Š‡Ó½; } } if (isset($c—ãæÔƒƒ[$a‰À©ÆŞ§±[1181]])) { $FÓ»…Š‡Ó½[$a‰À©ÆŞ§±[183]] = $c—ãæÔƒƒ[$a‰À©ÆŞ§±[1181]]; } return $FÓ»…Š‡Ó½; } public function size($féù‰Šİ»Ú) { $F™¾ë¤×Ùš = $this->objectMeta($féù‰Šİ»Ú); return $F™¾ë¤×Ùš ? $F™¾ë¤×Ùš[$_SERVER[şÅ²é¤èİ][78]] : 0; } public function info($C„¤‘Öºæ) { if ($this->isFile($C„¤‘Öºæ)) { return $this->fileInfo($C„¤‘Öºæ, 1); } else { if ($this->isFolder($C„¤‘Öºæ)) { return $this->folderInfo($C„¤‘Öºæ); } } return !1; } public function exist($Fºç³Öá) { return $this->objectMeta($Fºç³Öá) ? !0 : !1; } public function isFile($C¾×Î¸¬¿±) { $Bˆ‹¶óô›º =& $_SERVER[şÅ²é¤èİ]; $B°×Çõâí¢ = $this->objectMeta($C¾×Î¸¬¿±); return $B°×Çõâí¢ ? $B°×Çõâí¢[$Bˆ‹¶óô›º[29]] == $Bˆ‹¶óô›º[162] : !1; } public function isFolder($b¤‰Œ°½Üİ) { $A¼³æ‚ˆâ =& $_SERVER[şÅ²é¤èİ]; $b¤‰Œ°½Üİ = trim($b¤‰Œ°½Üİ, $A¼³æ‚ˆâ[8]) . $A¼³æ‚ˆâ[8]; $C—ñ·›Ï•® = $this->objectMeta($b¤‰Œ°½Üİ); return $C—ñ·›Ï•® ? $C—ñ·›Ï•®[$A¼³æ‚ˆâ[29]] == $A¼³æ‚ˆâ[77] : !1; } public function listPath($dÕ®ˆèÒÍÌ, $FÈäÂ×éòì = false) { goto eŠÛİµö±¢; FàÏ·áÒ›Ã: $AÅ¦²†ÂÏ = $DˆÓ†‘´˜æ[33]; $Eåî†©ÂÛ = 1000; $eÂ†äÓ¥ÂÌ = $DˆÓ†‘´˜æ[8]; goto EèæÍš˜Ç¦; EèæÍš˜Ç¦: $dßïîŞï‹ö = $DÕ ”ƒÄ‹ê = array(); while (!0) { list($CÕæ©†·ÂÕ, $EçÛğÁ…Ş™) = $this->bucketManager->listFiles($this->bucket, $DçÇ–ã·ö¾, $AÅ¦²†ÂÏ, $Eåî†©ÂÛ, $eÂ†äÓ¥ÂÌ); if ($EçÛğÁ…Ş™) { return !1; } $AÅ¦²†ÂÏ = array_key_exists($DˆÓ†‘´˜æ[1145], $CÕæ©†·ÂÕ) ? $AÅ¦²†ÂÏ = $CÕæ©†·ÂÕ[$DˆÓ†‘´˜æ[1178]] : $DˆÓ†‘´˜æ[33]; if (isset($CÕæ©†·ÂÕ[$DˆÓ†‘´˜æ[1182]])) { foreach ($CÕæ©†·ÂÕ[$DˆÓ†‘´˜æ[1182]] as $C¸°‡ÃÅ¤±) { if ($C¸°‡ÃÅ¤± == $DçÇ–ã·ö¾) { continue; } $dßïîŞï‹ö[] = $this->folderInfo($C¸°‡ÃÅ¤±, $FÈäÂ×éòì); } } if (isset($CÕæ©†·ÂÕ[$DˆÓ†‘´˜æ[1179]])) { foreach ($CÕæ©†·ÂÕ[$DˆÓ†‘´˜æ[1179]] as $dÔÅ¦¶–) { if ($dÔÅ¦¶–[$DˆÓ†‘´˜æ[88]] == $DçÇ–ã·ö¾) { continue; } $DÕ ”ƒÄ‹ê[] = $this->fileInfo($dÔÅ¦¶–[$DˆÓ†‘´˜æ[88]], $dÔÅ¦¶–, $FÈäÂ×éòì); } } if ($AÅ¦²†ÂÏ == $DˆÓ†‘´˜æ[33]) { break; } } return array($DˆÓ†‘´˜æ[75] => $dßïîŞï‹ö, $DˆÓ†‘´˜æ[74] => $DÕ ”ƒÄ‹ê); goto E›”…éµÊ©; eŠÛİµö±¢: $DˆÓ†‘´˜æ =& $_SERVER[şÅ²é¤èİ]; $dÕ®ˆèÒÍÌ = trim($dÕ®ˆèÒÍÌ, $DˆÓ†‘´˜æ[8]); $DçÇ–ã·ö¾ = empty($dÕ®ˆèÒÍÌ) ? $DˆÓ†‘´˜æ[33] : $dÕ®ˆèÒÍÌ . $DˆÓ†‘´˜æ[8]; goto FàÏ·áÒ›Ã; E›”…éµÊ©: } public function has($côö«º£öÊ, $dÖªé¼® ƒ = false, $EÆ“ÃèÎ  = true) { goto e–÷½‰ïß; D¬ÈõÄŠ‡ó: if ($dÖªé¼® ƒ) { return array($Bß±ˆ Á†î[187] => $bÀİÖ¯‹ô, $Bß±ˆ Á†î[188] => $Aè£œ”·ó¸); } return !1; goto AĞ°Š­ÜÊ; F¼¨æàó‚: $bÀİÖ¯‹ô = 0; $Aè£œ”·ó¸ = 0; while (!0) { list($e«‹¡Ğï‹, $e÷øŸØ…¸Š) = $this->bucketManager->listFiles($this->bucket, $F¬ºÚ¹„Ë, $D…À„ï•æ, $e‡Î¾–ÊÜ, $DÁ“ôºœ“…); if ($e÷øŸØ…¸Š) { return !1; } $D…À„ï•æ = array_key_exists($Bß±ˆ Á†î[1145], $e«‹¡Ğï‹) ? $D…À„ï•æ = $e«‹¡Ğï‹[$Bß±ˆ Á†î[1178]] : $Bß±ˆ Á†î[33]; if ($dÖªé¼® ƒ) { if (!empty($e«‹¡Ğï‹[$Bß±ˆ Á†î[1179]])) { $bÀİÖ¯‹ô += count($e«‹¡Ğï‹[$Bß±ˆ Á†î[1179]]); } if (!empty($e«‹¡Ğï‹[$Bß±ˆ Á†î[1182]])) { $Aè£œ”·ó¸ += count($e«‹¡Ğï‹[$Bß±ˆ Á†î[1182]]); } if ($D…À„ï•æ === $Bß±ˆ Á†î[33]) { break; } continue; } if ($EÆ“ÃèÎ ) { if (!empty($e«‹¡Ğï‹[$Bß±ˆ Á†î[1179]])) { return !0; } } else { if (!empty($e«‹¡Ğï‹[$Bß±ˆ Á†î[1182]])) { return !0; } } if ($D…À„ï•æ == $Bß±ˆ Á†î[33]) { break; } } goto D¬ÈõÄŠ‡ó; e–÷½‰ïß: $Bß±ˆ Á†î =& $_SERVER[şÅ²é¤èİ]; $côö«º£öÊ = trim($côö«º£öÊ, $Bß±ˆ Á†î[8]); $F¬ºÚ¹„Ë = empty($côö«º£öÊ) ? $Bß±ˆ Á†î[33] : $côö«º£öÊ . $Bß±ˆ Á†î[8]; goto e›÷…™†ó¤; e›÷…™†ó¤: $D…À„ï•æ = $Bß±ˆ Á†î[33]; $e‡Î¾–ÊÜ = 500; $DÁ“ôºœ“… = $Bß±ˆ Á†î[8]; goto F¼¨æàó‚; AĞ°Š­ÜÊ: } public function listAll($AÚÉïÈù¿Š) { $EÊ®¾Êğ =& $_SERVER[şÅ²é¤èİ]; $CÙŠùùÇİŠ = $this->fileList($AÚÉïÈù¿Š, 1); $cîë¹ÙšÇê = array(); foreach ($CÙŠùùÇİŠ as $A±õšÃ‹) { $cîë¹ÙšÇê[$A±õšÃ‹[$EÊ®¾Êğ[28]]] = $A±õšÃ‹[$EÊ®¾Êğ[78]]; } return $this->listAllFiles($AÚÉïÈù¿Š, array_keys($cîë¹ÙšÇê), $cîë¹ÙšÇê); } public function canRead($e¨¼Á˜°) { return $this->exist($e¨¼Á˜°) ? !0 : !1; } public function canWrite($B§ŒÁçêÁ) { return $this->exist($B§ŒÁçêÁ) ? !0 : !1; } public function getContent($bïšĞÎ¤³”) { return $this->fileSubstr($bïšĞÎ¤³”, 0, -1); } public function setContent($Fâ‰„¶¹«–, $bìÁäÙÄÑ = '') { $this->objectMetaReset($Fâ‰„¶¹«–); $EŞ™¡ÌÒ¬Î = $this->tempFile($this->pathThis($Fâ‰„¶¹«–)); file_put_contents($EŞ™¡ÌÒ¬Î, $bìÁäÙÄÑ); if ($this->upload($Fâ‰„¶¹«–, $EŞ™¡ÌÒ¬Î)) { $this->tempFileRemve($EŞ™¡ÌÒ¬Î); return !0; } return !1; } public function refreshUrls($eã¥¢²Ö­) { goto cµ‰‹Â¸; e®±÷œ“ÓÔ: $A¬‚–…Ç½ç = new Qiniu\Cdn\CdnManager($this->auth); list($EÚº¤…Ü­, $AëàŞ‡È×Ö) = $A¬‚–…Ç½ç->refreshUrls($a˜È‰Á‡–); if ($AëàŞ‡È×Ö) { return !1; } goto DáæÅĞÒë; cµ‰‹Â¸: $aˆ»ñì¿Ë§ =& $_SERVER[şÅ²é¤èİ]; $a˜È‰Á‡– = array(); if (is_array($eã¥¢²Ö­)) { foreach ($eã¥¢²Ö­ as $cº“äÓ‹º) { $a˜È‰Á‡–[] = $this->link($cº“äÓ‹º); } } else { $a˜È‰Á‡–[] = $this->link($eã¥¢²Ö­); } goto e®±÷œ“ÓÔ; DáæÅĞÒë: return $EÚº¤…Ü­[$aˆ»ñì¿Ë§[1183]] == $aˆ»ñì¿Ë§[689] ? !0 : !1; goto BŞÄàÚÛ”À; BŞÄàÚÛ”À: } public function fileSubstr($A‹¨²ùÌèº, $AÓæÖ·ª…, $Cá˜¼¨Œ’¿) { $bÑ“Î°ÂŒ’ =& $_SERVER[şÅ²é¤èİ]; if (!($b‘áÆÁ§ = $this->link($A‹¨²ùÌèº))) { return !1; } $c­‹á¢À£ = array($bÑ“Î°ÂŒ’[1148] => $AÓæÖ·ª…, $bÑ“Î°ÂŒ’[319] => $Cá˜¼¨Œ’¿); return $this->qnRequest($b‘áÆÁ§, $c­‹á¢À£); } public function upload($a·ïŒáÆÔê, $EÜ”¹öÎ«¿, $EÇÀ°Û = false, $f»áÎÚæÊÕ = REPEAT_REPLACE) { $e¯”Ìº‹  = new Qiniu\Storage\UploadManager(); $b˜àÔŠ³ø = $this->auth->uploadToken($this->bucket, $a·ïŒáÆÔê); $dôÚ„ÛÕ­î = get_file_mime(get_path_ext($EÜ”¹öÎ«¿)); list($b‰øÒœî, $b“¹¦æâç¾) = $e¯”Ìº‹ ->putFile($b˜àÔŠ³ø, $a·ïŒáÆÔê, $EÜ”¹öÎ«¿, null, $dôÚ„ÛÕ­î); return $b“¹¦æâç¾ ? !1 : $this->getPathOuter($a·ïŒáÆÔê); } public function uploadFormData($a›»ĞÛÄ¸‚, $dÈá§’«‚• = 3600) { return $this->uploadToken($a›»ĞÛÄ¸‚, $dÈá§’«‚•); } public function multiUploadFormData($b”•ñîƒ²œ, $FÀ„«º³ = 3600) { return $this->uploadToken($b”•ñîƒ²œ, $FÀ„«º³); } private function uploadToken($f‰»›õ–‚†, $f¿«ğ²å¥ = 3600) { goto b‹ù—íÂ¼; cÛò‘ˆ¸“ì: $EØ¤ Ó¿ = null; $bÔ½»¥É… = $this->auth->uploadToken($this->bucket, $EØ¤ Ó¿, $eöªÈò»«ˆ, $B¯Ú²÷È¼Ğ, !0); $C–Ñ„Ü­ì = empty($this->region) || $this->region == $E’’ÀÄ¹[1186] ? $E’’ÀÄ¹[33] : $E’’ÀÄ¹[405] . $this->region; goto e…öÉºï¨Ğ; b‹ù—íÂ¼: $E’’ÀÄ¹ =& $_SERVER[şÅ²é¤èİ]; $eöªÈò»«ˆ = $f¿«ğ²å¥; $B¯Ú²÷È¼Ğ = array($E’’ÀÄ¹[1184] => $E’’ÀÄ¹[1185]); goto cÛò‘ˆ¸“ì; e…öÉºï¨Ğ: $eÒèæ†İØ¤ = http_type() . "\72\57\57\165\160\154\157\141\144{$C–Ñ„Ü­ì}\x2e\x71\x69\156\151\x75\160\x2e\143\x6f\x6d\57"; return array($E’’ÀÄ¹[1187] => $bÔ½»¥É…, $E’’ÀÄ¹[1188] => $eÒèæ†İØ¤); goto F‡àæÓ‰Œë; F‡àæÓ‰Œë: } public function download($BÀ±ö‘Ğ¥æ, $DÆÆÒËˆ¨õ) { goto A§¢ö»èê«; A§¢ö»èê«: $fÙñÔù¬£ =& $_SERVER[şÅ²é¤èİ]; $E®ÂÙ‰Ì”¢ = IO::getPathInner(IO::mkfile($DÆÆÒËˆ¨õ)); if (!($fºÅÓ’íËë = $this->link($BÀ±ö‘Ğ¥æ))) { return !1; } goto A…âÀ÷Õ¯; A…âÀ÷Õ¯: $eŒ£éƒ»˜ù = 0; $dÃª–¾²„¡ = 1024 * 200; $aÔ»ã—Õ = fopen($E®ÂÙ‰Ì”¢, $fÙñÔù¬£[1189]); goto f£Æ–ğÈÔ¤; f£Æ–ğÈÔ¤: while (!0) { $d“ÈŠ‰Ö¥Í = array($fÙñÔù¬£[1148] => $eŒ£éƒ»˜ù, $fÙñÔù¬£[319] => $dÃª–¾²„¡); $aÇ¿ÄÖµ®¯ = $this->qnRequest($fºÅÓ’íËë, $d“ÈŠ‰Ö¥Í); if ($eŒ£éƒ»˜ù && ($CÀ °Ò³—¼ = @json_decode($aÇ¿ÄÖµ®¯, !0))) { if (isset($CÀ °Ò³—¼[$fÙñÔù¬£[1183]])) { return !1; } } fwrite($aÔ»ã—Õ, $aÇ¿ÄÖµ®¯); $eŒ£éƒ»˜ù += $dÃª–¾²„¡; if (strlen($aÇ¿ÄÖµ®¯) < $dÃª–¾²„¡) { break; } } fclose($aÔ»ã—Õ); return $DÆÆÒËˆ¨õ; goto Aº“Ò¶ÅõÓ; Aº“Ò¶ÅõÓ: } public function link($eÚÙ—È¡ÌÅ, $C§ğ‚äÎ†… = '') { if (!$this->isFile($eÚÙ—È¡ÌÅ)) { return !1; } $bÙïƒÏâ»– = $this->getHost() . $_SERVER[şÅ²é¤èİ][8] . $this->pathEncode($eÚÙ—È¡ÌÅ) . $C§ğ‚äÎ†…; return $this->auth->privateDownloadUrl($bÙïƒÏâ»–, 3600 * 12); } public function fileOut($F°òÄÙ¥æ, $f³à¶ƒìË = false, $EÉİàÕÜ = false, $C¿óÈòİ¡á = '') { $c‹Ÿ¯ÔµçÛ =& $_SERVER[şÅ²é¤èİ]; if (!$EÉİàÕÜ) { $EÉİàÕÜ = $this->pathThis($F°òÄÙ¥æ); } $Eƒ–±½ª„ = $f³à¶ƒìË ? $c‹Ÿ¯ÔµçÛ[1190] . rawurlencode($EÉİàÕÜ) : $c‹Ÿ¯ÔµçÛ[33]; $DÖ¢å±ğ¹ = $this->link($F°òÄÙ¥æ, $Eƒ–±½ª„); $this->fileOutLink($DÖ¢å±ğ¹); } public function fileOutServer($F˜İ‹¼õ…, $fÊ×½ãÛÅ¶ = false, $dÔ»ÆÑ ô² = false, $fõçÇ¾¾ = '') { parent::fileOut($F˜İ‹¼õ…, $fÊ×½ãÛÅ¶, $dÔ»ÆÑ ô², $fõçÇ¾¾); } public function fileOutImage($aëì¹èä¬, $aÔ‰Ö¶Ã¿Ã = 250) { $C ÖèÜŒŠİ = $this->link($aëì¹èä¬, $_SERVER[şÅ²é¤èİ][1191] . $aÔ‰Ö¶Ã¿Ã); $this->fileOutLink($C ÖèÜŒŠİ); } public function fileOutImageServer($cÑ…ç¡‡Œ, $DËĞÍä‡÷¢ = 250) { parent::fileOutImage($cÑ…ç¡‡Œ, $DËĞÍä‡÷¢); } public function fileOutLink($a±ïŒÌÙáõ) { header($_SERVER[şÅ²é¤èİ][153] . $a±ïŒÌÙáõ); die; } public function hashMd5($cìÀŞŞİéÕ) { $Fäğ§áğÔÈ =& $_SERVER[şÅ²é¤èİ]; $Aµ¬¢¢«ÅÀ = $this->link($cìÀŞŞİéÕ, $Fäğ§áğÔÈ[1192]); $AºîŒİÄáÏ = $this->qnRequest($Aµ¬¢¢«ÅÀ, array(), !0); return !isset($AºîŒİÄáÏ[$Fäğ§áğÔÈ[193]]) ? !1 : $AºîŒİÄáÏ[$Fäğ§áğÔÈ[193]]; } public function qnRequest($D¸œÈ¹¸™, $C®®ñõ¹×î = array(), $a¹©Ç¬½±¾ = false) { goto cÃ¬èìšä¤; aÔÅë¬˜…: curl_setopt($fÛ–ğ£¿Ê, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_SSL_VERIFYHOST, 0); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_NOPROGRESS, !1); goto d¦ºè‘¹µ ; cÃ¬èìšä¤: $C¨ì» í =& $_SERVER[şÅ²é¤èİ]; $fÛ–ğ£¿Ê = curl_init(); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_URL, $D¸œÈ¹¸™); goto e˜Åêó…ï‹; d¦ºè‘¹µ : curl_setopt($fÛ–ğ£¿Ê, CURLOPT_PROGRESSFUNCTION, $C¨ì» í[1193]); curl_progress_start($fÛ–ğ£¿Ê); if (isset($C®®ñõ¹×î[$C¨ì» í[1148]]) && $C®®ñõ¹×î[$C¨ì» í[319]] > 0) { $AÖìÅ¡àçÎ = $C®®ñõ¹×î[$C¨ì» í[1148]]; $f›‰Š®†òâ = $C®®ñõ¹×î[$C¨ì» í[1148]] + ($C®®ñõ¹×î[$C¨ì» í[319]] - 1); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_RANGE, "{$AÖìÅ¡àçÎ}\x2d{$f›‰Š®†òâ}"); } goto dà‚ì‹æâ™; e˜Åêó…ï‹: curl_setopt($fÛ–ğ£¿Ê, CURLOPT_RETURNTRANSFER, 1); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_CONNECTTIMEOUT, 3600); curl_setopt($fÛ–ğ£¿Ê, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto aÔÅë¬˜…; dà‚ì‹æâ™: curl_setopt($fÛ–ğ£¿Ê, CURLOPT_FOLLOWLOCATION, 1); $Fâ†İ¤‚‡Ú = curl_exec($fÛ–ğ£¿Ê); curl_progress_end($fÛ–ğ£¿Ê); goto a‚¾ÔÕªÒ‘; a‚¾ÔÕªÒ‘: curl_close($fÛ–ğ£¿Ê); if ($a¹©Ç¬½±¾) { return @json_decode($Fâ†İ¤‚‡Ú, !0); } return $Fâ†İ¤‚‡Ú; goto e‡·Œ‚Øë†; e‡·Œ‚Øë†: } private function objectMeta($dá’İƒÒ´) { goto bÃ‰—‹ÚŸš; d“ãë…—°: list($e½²¤Íª, $CŒ³¢£³º­) = $this->bucketManager->stat($this->bucket, $dá’İƒÒ´); if (!$e½²¤Íª) { list($D¢˜ŒÚ¥Ú, $CŒ³¢£³º­) = $this->bucketManager->listFiles($this->bucket, trim($dá’İƒÒ´, $DÆâ…«šà¹[8]) . $DÆâ…«šà¹[8], $DÆâ…«šà¹[33], 1, $DÆâ…«šà¹[8]); if (empty($D¢˜ŒÚ¥Ú[$DÆâ…«šà¹[1179]]) && empty($D¢˜ŒÚ¥Ú[$DÆâ…«šà¹[1182]])) { return !1; } $e½²¤Íª = array($DÆâ…«šà¹[29] => $DÆâ…«šà¹[77]); Cache::set($f”×Ò¬ö‘, $e½²¤Íª, 0); return $e½²¤Íª; } $e½²¤Íª[$DÆâ…«šà¹[78]] = $e½²¤Íª[$DÆâ…«šà¹[1180]]; goto f ‡Šéö¹ô; f ‡Šéö¹ô: if (substr($dá’İƒÒ´, -1) == $DÆâ…«šà¹[8] || $e½²¤Íª[$DÆâ…«šà¹[1180]] != 0 && $e½²¤Íª[$DÆâ…«šà¹[1195]] != $DÆâ…«šà¹[115] && $e½²¤Íª[$DÆâ…«šà¹[192]] == md5($DÆâ…«šà¹[33])) { $e½²¤Íª[$DÆâ…«šà¹[29]] = $DÆâ…«šà¹[77]; } else { $e½²¤Íª[$DÆâ…«šà¹[29]] = $DÆâ…«šà¹[162]; } Cache::set($f”×Ò¬ö‘, $e½²¤Íª, 0); return $e½²¤Íª; goto FŞ¨è²ç¿Õ; bÃ‰—‹ÚŸš: $DÆâ…«šà¹ =& $_SERVER[şÅ²é¤èİ]; $f”×Ò¬ö‘ = $DÆâ…«šà¹[1194] . md5($this->bucket . $dá’İƒÒ´); if (Cache::get($f”×Ò¬ö‘)) { return Cache::get($f”×Ò¬ö‘); } goto d“ãë…—°; FŞ¨è²ç¿Õ: } private function objectMetaReset($cî¡ªİÛ) { $F‚‘ĞÊš¥Ä = $_SERVER[şÅ²é¤èİ][1194] . md5($this->bucket . $cî¡ªİÛ); Cache::remove($F‚‘ĞÊš¥Ä); } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($e‚çèœŠß¬) { parent::__construct($e‚çèœŠß¬); } public function uploadFormData($bºˆäóáÌï, $aÍÀ—ÓÏ– = 3600) { goto d³âğ‘ŞÙ; aÀ±µªÍâç: $BÂ‰ÉÉÖÅ¡ = array($this->accessKey, $B‚Óƒç­µœ, $this->region, $Dï–±ó©‡º, $F¸í®Üè); $aÍ¸èñµñ³ = implode($bî’‹…‰°[8], $BÂ‰ÉÉÖÅ¡); $c”ØÌÂ—¹ = array($bî’‹…‰°[1068] => gmdate($bî’‹…‰°[1067], strtotime($bî’‹…‰°[1099])), $bî’‹…‰°[1069] => array(array($bî’‹…‰°[1071] => $this->bucket), array($bî’‹…‰°[1070] => $FÉ­ê‹²), array($bî’‹…‰°[1072], $bî’‹…‰°[1073], $bî’‹…‰°[33]), array($bî’‹…‰°[1072], $bî’‹…‰°[1100], $bî’‹…‰°[33]), array($bî’‹…‰°[1072], $bî’‹…‰°[1101], $bî’‹…‰°[33]), array($bî’‹…‰°[1074] => $E­ÜòŠŒ¥Û), array($bî’‹…‰°[1102] => $aÍ¸èñµñ³), array($bî’‹…‰°[1103] => $bß÷ğ‡¤è­), array($bî’‹…‰°[1104] => $F„³¬µÛö‹), array($bî’‹…‰°[1105] => $fÎ‘Í‹¾ç«))); goto Döîá¾Š¨ø; Döîá¾Š¨ø: $b¡’¥Øùì = base64_encode(json_encode($c”ØÌÂ—¹)); $cÎˆšÊ¦— = hash_hmac($bî’‹…‰°[1106], $B‚Óƒç­µœ, $bî’‹…‰°[1107] . $this->secret, !0); $bÙÅë·µ†Ò = hash_hmac($bî’‹…‰°[1106], $this->region, $cÎˆšÊ¦—, !0); goto Dù‘ª—¨òë; d³âğ‘ŞÙ: $bî’‹…‰° =& $_SERVER[şÅ²é¤èİ]; $FÉ­ê‹² = $bî’‹…‰°[180]; $bß÷ğ‡¤è­ = $bî’‹…‰°[1096]; goto béˆ½’‹ï‚; béˆ½’‹ï‚: $Dï–±ó©‡º = $bî’‹…‰°[59]; $F„³¬µÛö‹ = gmdate($bî’‹…‰°[1097]); $B‚Óƒç­µœ = gmdate($bî’‹…‰°[683]); goto f™Õ³…½•Ş; f™Õ³…½•Ş: $F¸í®Üè = $bî’‹…‰°[1098]; $fÎ‘Í‹¾ç« = $aÍÀ—ÓÏ– . $bî’‹…‰°[33]; $E­ÜòŠŒ¥Û = $bî’‹…‰°[1066]; goto aÀ±µªÍâç; Dù‘ª—¨òë: $e¦¼ÈÙ®É = hash_hmac($bî’‹…‰°[1106], $Dï–±ó©‡º, $bÙÅë·µ†Ò, !0); $Dµ‹’‰ôÄ„ = hash_hmac($bî’‹…‰°[1106], $F¸í®Üè, $e¦¼ÈÙ®É, !0); $e°ŠÒ•±™Ã = hash_hmac($bî’‹…‰°[1106], $b¡’¥Øùì, $Dµ‹’‰ôÄ„); goto e†åÛÛ¿; e†åÛÛ¿: $C‹‘ªÔë = array($bî’‹…‰°[195] => $bî’‹…‰°[33], $bî’‹…‰°[1108] => $bî’‹…‰°[33], $bî’‹…‰°[1070] => $FÉ­ê‹², $bî’‹…‰°[1074] => $E­ÜòŠŒ¥Û, $bî’‹…‰°[1078] => $b¡’¥Øùì, $bî’‹…‰°[1109] => $aÍ¸èñµñ³, $bî’‹…‰°[1110] => $bß÷ğ‡¤è­, $bî’‹…‰°[1111] => $F„³¬µÛö‹, $bî’‹…‰°[1112] => $fÎ‘Í‹¾ç«, $bî’‹…‰°[1113] => $e°ŠÒ•±™Ã, $bî’‹…‰°[164] => $this->getHost()); return $C‹‘ªÔë; goto Aãîƒçƒá ; Aãîƒçƒá : } public function multiUploadFormData($aäĞé ©ôá, $E¸ÍšµÏ· = 3600) { $eŸƒÄµ©Ä =& $_SERVER[şÅ²é¤èİ]; $fá©ÚÁÏ = gmdate($eŸƒÄµ©Ä[1196]); $D¿ª´æëç“ = array(); $eİ»Æ¥è¸ = $this->client->getUploadId($this->bucket, $aäĞé ©ôá, $D¿ª´æëç“); if (!$eİ»Æ¥è¸) { return !1; } return array($eŸƒÄµ©Ä[205] => $eİ»Æ¥è¸, $eŸƒÄµ©Ä[164] => $this->getHost() . $eŸƒÄµ©Ä[8] . $this->pathEncode($aäĞé ©ôá), $eŸƒÄµ©Ä[206] => $fá©ÚÁÏ, $eŸƒÄµ©Ä[88] => $aäĞé ©ôá); } public function multiUploadAuthData($c´ƒÁÙ¡š, $DÖÉ¶Ë¦Š = array()) { goto e«˜ˆáç¸ ; bÕ«íĞ—Çå: $bÚùìÕëïõ = $aåá¨ğğ¡Ñ[210]; $aÀ›˜š´Ù¿ = $aåá¨ğğ¡Ñ[8] . $this->pathEncode($B©¾”÷àÄÊ) . $D•ØÌÌîÔ‘; $bÇµêÅ“ù“ = $this->client->__getSignatureV4($e‰òò¯Ø‚›, $bÎ˜‚ÛµàÕ, $bÚùìÕëïõ, $aÀ›˜š´Ù¿); goto EáÖ„ÛŞÊ¦; D½ìö¶…¨: if (isset($DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[1197]])) { $e‰òò¯Ø‚›[$aåá¨ğğ¡Ñ[1198]] = $DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[1197]]; } $eóİñ‡áÂì = explode($aåá¨ğğ¡Ñ[166], $this->getHost()); $bÎ˜‚ÛµàÕ = array($aåá¨ğğ¡Ñ[1199] => $eóİñ‡áÂì[1], $aåá¨ğğ¡Ñ[1200] => $aåá¨ğğ¡Ñ[33], $aåá¨ğğ¡Ñ[195] => $aåá¨ğğ¡Ñ[115], $aåá¨ğğ¡Ñ[1108] => $DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[78]]); goto bÕ«íĞ—Çå; e«˜ˆáç¸ : $aåá¨ğğ¡Ñ =& $_SERVER[şÅ²é¤èİ]; $D•ØÌÌîÔ‘ = isset($DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[155]]) ? $DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[155]] : $aåá¨ğğ¡Ñ[33]; $B©¾”÷àÄÊ = $DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[88]]; goto aÂ“‰éãÇ¬; aÂ“‰éãÇ¬: unset($DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[88]]); if (isset($DÖÉ¶Ë¦Š[$aåá¨ğğ¡Ñ[207]])) { return $this->listUploadParts($B©¾”÷àÄÊ, $DÖÉ¶Ë¦Š); } $e‰òò¯Ø‚› = array(); goto D½ìö¶…¨; EáÖ„ÛŞÊ¦: if (strpos($D•ØÌÌîÔ‘, $aåá¨ğğ¡Ñ[209]) === 0) { if (isset($e‰òò¯Ø‚›[$aåá¨ğğ¡Ñ[1198]])) { $Eäİ§æìŠ = $e‰òò¯Ø‚›[$aåá¨ğğ¡Ñ[1198]]; } else { if (isset($bÇµêÅ“ù“[$aåá¨ğğ¡Ñ[1198]])) { $Eäİ§æìŠ = $bÇµêÅ“ù“[$aåá¨ğğ¡Ñ[1198]]; } else { $Eäİ§æìŠ = hash($aåá¨ğğ¡Ñ[1106], $aåá¨ğğ¡Ñ[33]); } } return array($aåá¨ğğ¡Ñ[216] => $bÇµêÅ“ù“[$aåá¨ğğ¡Ñ[216]], $aåá¨ğğ¡Ñ[1198] => $Eäİ§æìŠ, $aåá¨ğğ¡Ñ[206] => $bÇµêÅ“ù“[$aåá¨ğğ¡Ñ[1201]]); } return $bÇµêÅ“ù“[$aåá¨ğğ¡Ñ[216]]; goto AÔ’®±‡†æ; AÔ’®±‡†æ: } public function listUploadParts($F‰÷æ§˜³¢, $E£Ã·î¤ß” = array()) { goto cÙîŸì¥Ä„; a¹ÙƒŸª¶ö: $D“†ÖÖÒÉŞ = array($d²•Ş¦é˜è[1199] => $fÂÄÄóê½[1], $d²•Ş¦é˜è[195] => $d²•Ş¦é˜è[115], $d²•Ş¦é˜è[1108] => strlen($BêïÅ‚ŸŞ)); $Dö¯¦ãèğ„ = $d²•Ş¦é˜è[208]; $E¢¥‚½½ï· = $d²•Ş¦é˜è[8] . $this->pathEncode($F‰÷æ§˜³¢) . $E£Ã·î¤ß”[$d²•Ş¦é˜è[155]]; goto f¤îñæÃö; AœÆ®çªË°: if (!$d›ã­åÕëä) { return !1; } $BêïÅ‚ŸŞ = $d²•Ş¦é˜è[1202]; foreach ($d›ã­åÕëä as $dÂÆõ¿´¬¤) { $BêïÅ‚ŸŞ .= $d²•Ş¦é˜è[1203] . "\74\120\141\x72\x74\116\165\x6d\142\x65\x72\x3e{$dÂÆõ¿´¬¤[$d²•Ş¦é˜è[1150]]}\x3c\x2f\120\x61\x72\164\x4e\165\155\142\145\x72\76\xa" . "\74\105\x54\141\x67\76{$dÂÆõ¿´¬¤[$d²•Ş¦é˜è[1151]]}\74\57\x45\x54\x61\147\x3e\xa" . $d²•Ş¦é˜è[1204]; } goto eßŸğÉ¦ÄÉ; f¤îñæÃö: $BÔ¿øµ‡­ = $this->client->__getSignatureV4($aˆæÑë„ä, $D“†ÖÖÒÉŞ, $Dö¯¦ãèğ„, $E¢¥‚½½ï·, $BêïÅ‚ŸŞ); return array($d²•Ş¦é˜è[216] => $BÔ¿øµ‡­[$d²•Ş¦é˜è[216]], $d²•Ş¦é˜è[206] => $BÔ¿øµ‡­[$d²•Ş¦é˜è[1201]], $d²•Ş¦é˜è[218] => $d›ã­åÕëä, $d²•Ş¦é˜è[1198] => $BÔ¿øµ‡­[$d²•Ş¦é˜è[1198]]); goto E™ñœ™•«; cÙîŸì¥Ä„: $d²•Ş¦é˜è =& $_SERVER[şÅ²é¤èİ]; $aÃ¡œØÂñ± = str_replace($d²•Ş¦é˜è[217], $d²•Ş¦é˜è[33], $E£Ã·î¤ß”[$d²•Ş¦é˜è[155]]); $d›ã­åÕëä = $this->client->listParts($this->bucket, $F‰÷æ§˜³¢, $aÃ¡œØÂñ±); goto AœÆ®çªË°; eßŸğÉ¦ÄÉ: $BêïÅ‚ŸŞ .= $d²•Ş¦é˜è[1205]; $aˆæÑë„ä = array(); $fÂÄÄóê½ = explode($d²•Ş¦é˜è[166], $this->getHost()); goto a¹ÙƒŸª¶ö; E™ñœ™•«: } public function link($bâÅË°¬ŒÛ, $Bíçö„öãî = array()) { return parent::link($bâÅË°¬ŒÛ, $Bíçö„öãî); } public function fileOut($D¦¼àÁÊ™Ô, $CÅÒÕ‡”Õ• = false, $F’ÒÈ¨™¸ö = false, $b¡ìÏßÌ§Õ = '') { if (strstr($this->endpoint, $_SERVER[şÅ²é¤èİ][1206])) { return parent::fileOutServer($D¦¼àÁÊ™Ô, $CÅÒÕ‡”Õ•, $F’ÒÈ¨™¸ö, $b¡ìÏßÌ§Õ); } parent::fileOut($D¦¼àÁÊ™Ô, $CÅÒÕ‡”Õ•, $F’ÒÈ¨™¸ö, $b¡ìÏßÌ§Õ); } public function fileOutImage($fèéïôáí, $AÆèÆ÷á™ï = 250) { if (strstr($this->endpoint, $_SERVER[şÅ²é¤èİ][1206])) { return parent::fileOutImageServer($fèéïôáí, $AÆèÆ÷á™ï); } parent::fileOutImage($fèéïôáí, $AÆèÆ÷á™ï); } public function getHost() { $F–˜‚…éØ· =& $_SERVER[şÅ²é¤èİ]; $DËš¯°…Û = rtrim(parent::getHost(), $F–˜‚…éØ·[8] . $this->bucket); $DËš¯°…Û = explode($F–˜‚…éØ·[166], $DËš¯°…Û); return $DËš¯°…Û[0] . $F–˜‚…éØ·[166] . $this->bucket . $F–˜‚…éØ·[92] . $DËš¯°…Û[1]; } } class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($c¿ªíÈŞÊ, $c‹Ÿ»„œÊ = 0) { parent::__construct(); $this->source = $c¿ªíÈŞÊ; $this->sourceSize = $c‹Ÿ»„œÊ; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($DË¦Á“·ªì = false) { return $this->sourceSize; } public function getContent($Cˆ­§Õ‘Ğ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $AÃ°Ì¥ƒŞ = ftell($this->source); $F¶ÃÍ™®°ğ = @fread($this->source, $this->sourceSize); fseek($this->source, $AÃ°Ì¥ƒŞ); return $F¶ÃÍ™®°ğ; } } public function fileSubstr($Bœ¬™×‰Æè = false, $A³œ–ĞŸ¥¾ = 0, $D§â¸×Û‹ = 0) { if (!$D§â¸×Û‹) { $D§â¸×Û‹ = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $A³œ–ĞŸ¥¾, $D§â¸×Û‹); } if ($this->sourceType == self::TYPE_FILE) { $F¢§Œ‡­œ› = ftell($this->source); fseek($this->source, $F¢§Œ‡­œ› + $A³œ–ĞŸ¥¾); $c´ÅÓ»çñ = @fread($this->source, $D§â¸×Û‹); fseek($this->source, $F¢§Œ‡­œ›); return $c´ÅÓ»çñ; } } public function hashMd5($Aé³Ã‚õ² = false) { return md5($this->getContent()); } public static function hash($eÑ‚”İÜò, $a…ÜÍ–¨ê¾ = 0) { $DË‚¤³”Œ‡ = new PathDriverStream($eÑ‚”İÜò, $a…ÜÍ–¨ê¾); return $DË‚¤³”Œ‡->hashSimple($eÑ‚”İÜò); } public static function md5($EŠœ‹ó ½‹, $C“÷ÌÖ†Şá = 0) { $Eö·¹ĞÛí… = new PathDriverStream($EŠœ‹ó ½‹, $C“÷ÌÖ†Şá); return $Eö·¹ĞÛí…->hashMd5($EŠœ‹ó ½‹); } } goto B…¦”ß´õ; C‚¹î‚¾äÄ: class Downloader { static function start($CöñàÜÑ§¢, $a¾Åç© ” , $FõÖÖµˆ®Ğ = 10) { goto dÖ¶¢ôø; c–š˜ñ…ø: if ($Fâ÷Ñî¤½[$b¤·Ôäš[1011]]) { @unlink($A­¨À†×æ¦); } return $Fâ÷Ñî¤½; goto a‹Ï¡ö—ö; B—È¹ÃÎì¤: $fà›‰Êëç = $a¾Åç© ”  . $b¤·Ôäš[1420]; if (is_array($CöñàÜÑ§¢)) { $Dí’íĞššæ = $CöñàÜÑ§¢; } else { $Dí’íĞššæ = url_header($CöñàÜÑ§¢); } $CöñàÜÑ§¢ = $Dí’íĞššæ[$b¤·Ôäš[289]]; goto Eá‡êå£†ç; f…Ï´»­ó—: if (is_file($A­¨À†×æ¦)) { $Dñ–…¿Ï‹³ = file_get_contents($A­¨À†×æ¦); $e„Îƒ¹»Çò = json_decode($Dñ–…¿Ï‹³, 1); } if (file_exists($a¾Åç© ” ) && $bã±Âˆ—Œï == filesize($a¾Åç© ” )) { @unlink($fà›‰Êëç); @unlink($A­¨À†×æ¦); return array($b¤·Ôäš[1011] => !0, $b¤·Ôäš[1013] => $b¤·Ôäš[1422]); } if ($e„Îƒ¹»Çò[$b¤·Ôäš[319]] != $bã±Âˆ—Œï) { $e„Îƒ¹»Çò = array($b¤·Ôäš[319] => $bã±Âˆ—Œï); } goto B‹š²õ‘ßµ; B‹š²õ‘ßµ: if ($cŸ¨§ˆ¯ºÁ > $bã±Âˆ—Œï) { @unlink($fà›‰Êëç); } file_put_contents($A­¨À†×æ¦, json_encode($e„Îƒ¹»Çò)); $Fâ÷Ñî¤½ = self::fileDownloadCurl($CöñàÜÑ§¢, $a¾Åç© ” , !0, $cŸ¨§ˆ¯ºÁ, $bã±Âˆ—Œï); goto c–š˜ñ…ø; bâš®ôØ”‘: $bã±Âˆ—Œï = intval($Dí’íĞššæ[$b¤·Ôäš[319]]); if (file_exists($fà›‰Êëç) && time() - filemtime($fà›‰Êëç) < 3) { return array($b¤·Ôäš[1011] => !1, $b¤·Ôäš[1013] => $b¤·Ôäš[1421]); } $e„Îƒ¹»Çò = array(); goto f…Ï´»­ó—; dÖ¶¢ôø: $b¤·Ôäš =& $_SERVER[şÅ²é¤èİ]; if (!request_url_safe($CöñàÜÑ§¢)) { return array($b¤·Ôäš[1011] => !1, $b¤·Ôäš[1013] => $b¤·Ôäš[1016]); } $A­¨À†×æ¦ = $a¾Åç© ”  . $b¤·Ôäš[1419]; goto B—È¹ÃÎì¤; Eá‡êå£†ç: if (!$CöñàÜÑ§¢) { return array($b¤·Ôäš[1011] => !1, $b¤·Ôäš[1013] => $b¤·Ôäš[1016]); } if (!$Dí’íĞššæ[$b¤·Ôäš[1207]] || $Dí’íĞššæ[$b¤·Ôäš[319]] == 0) { @unlink($fà›‰Êëç); @unlink($a¾Åç© ” ); $Fâ÷Ñî¤½ = self::fileDownloadFopen($CöñàÜÑ§¢, $a¾Åç© ” , $Dí’íĞššæ[$b¤·Ôäš[319]]); if ($Fâ÷Ñî¤½[$b¤·Ôäš[1011]]) { return $Fâ÷Ñî¤½; } else { @unlink($fà›‰Êëç); @unlink($a¾Åç© ” ); $Fâ÷Ñî¤½ = self::fileDownloadCurl($CöñàÜÑ§¢, $a¾Åç© ” , !1, 0, $Dí’íĞššæ[$b¤·Ôäš[319]]); @unlink($fà›‰Êëç); return $Fâ÷Ñî¤½; } } $cŸ¨§ˆ¯ºÁ = is_file($fà›‰Êëç) ? filesize($fà›‰Êëç) : 0; goto bâš®ôØ”‘; a‹Ï¡ö—ö: } static function fileDownloadFopen($Bòò–ÁËˆ…, $F¶ß²¬Ô¯, $e¹¦ŞôÀ†Ş = 0) { $bàô··“İ´ =& $_SERVER[şÅ²é¤èİ]; @ini_set($bàô··“İ´[1423], $bàô··“İ´[1424]); $F˜À‹ğÑ›® = $F¶ß²¬Ô¯ . $bàô··“İ´[1420]; set_timeout(); @unlink($F˜À‹ğÑ›®); if ($Dïù«ÌÌŞ = @fopen($Bòò–ÁËˆ…, $bàô··“İ´[1425])) { goto fšœ¬¡÷Œí; B½Ô™ãçÁê: fclose($Dïù«ÌÌŞ); $bƒÛîá³¤ = filesize(iconv_system($F˜À‹ğÑ›®)); if ($e¹¦ŞôÀ†Ş != 0 && $bƒÛîá³¤ != $e¹¦ŞôÀ†Ş) { return array($bàô··“İ´[1011] => !1, $bàô··“İ´[1013] => $bàô··“İ´[1429]); } goto e÷ÁË±ê²Ş; e÷ÁË±ê²Ş: self::checkGzip($F˜À‹ğÑ›®); if (!@rename($F˜À‹ğÑ›®, $F¶ß²¬Ô¯)) { usleep(round(rand(0, 1000) * 50)); @unlink($F¶ß²¬Ô¯); $B‘ôÈíÌù• = @rename($F˜À‹ğÑ›®, $F¶ß²¬Ô¯); if (!$B‘ôÈíÌù•) { return array($bàô··“İ´[1011] => !1, $bàô··“İ´[1013] => $bàô··“İ´[1430]); } } return array($bàô··“İ´[1011] => !0, $bàô··“İ´[1013] => $bàô··“İ´[689]); goto d¡ì­°âçÓ; fšœ¬¡÷Œí: if (!($FË¤òªè´² = @fopen($F˜À‹ğÑ›®, $bàô··“İ´[1426]))) { return array($bàô··“İ´[1011] => !1, $bàô··“İ´[1013] => $bàô··“İ´[1427]); } while (!feof($Dïù«ÌÌŞ)) { if (!file_exists($F˜À‹ğÑ›®)) { fclose($FË¤òªè´²); return array($bàô··“İ´[1011] => !1, $bàô··“İ´[1013] => $bàô··“İ´[1428]); } clearstatcache(); if ($e¹¦ŞôÀ†Ş > 0 && $e¹¦ŞôÀ†Ş == filesize(iconv_system($F˜À‹ğÑ›®))) { break; } fwrite($FË¤òªè´², fread($Dïù«ÌÌŞ, 1024 * 8), 1024 * 8); } fclose($FË¤òªè´²); goto B½Ô™ãçÁê; d¡ì­°âçÓ: } else { return array($bàô··“İ´[1011] => !1, $bàô··“İ´[1013] => $bàô··“İ´[1431]); } } static function fileDownloadCurl($aíÆô²š, $b®š½ğàó, $d„Ë¤ƒŠ¶Ù = false, $eøÇ•¾ßÓ» = 0, $F±áÜÌãè = 0) { goto AâÂˆœÄ§; CÚ„»©­¡Ó: curl_setopt($dˆÀ ²‡É×, CURLOPT_NOPROGRESS, !1); curl_setopt($dˆÀ ²‡É×, CURLOPT_PROGRESSFUNCTION, $C«‘²Ùäğù[1193]); curl_progress_start($dˆÀ ²‡É×); goto eùê™ìİ°Ï; AâÂˆœÄ§: $C«‘²Ùäğù =& $_SERVER[şÅ²é¤èİ]; $eèÜĞÆ³İ = $b®š½ğàó . $C«‘²Ùäğù[1420]; set_timeout(); goto A§½˜Í¿±; aŒÇâ’”†: curl_close($dˆÀ ²‡É×); fclose($F«º´¤‰ÍÇ); $F ñŸ‡ìêÀ = filesize(iconv_system($eèÜĞÆ³İ)); goto b»»º›‘; A§½˜Í¿±: $F«º´¤‰ÍÇ = @fopen($eèÜĞÆ³İ, $C«‘²Ùäğù[713]); if (!$F«º´¤‰ÍÇ) { return array($C«‘²Ùäğù[1011] => !1, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[1432]); } $dˆÀ ²‡É× = curl_init($aíÆô²š); goto Dï½°ø¥; eØá Ş®İ: curl_setopt($dˆÀ ²‡É×, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($dˆÀ ²‡É×, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($dˆÀ ²‡É×, CURLOPT_SSL_VERIFYHOST, 0); goto CÚ„»©­¡Ó; b»»º›‘: if ($F ñŸ‡ìêÀ < $F±áÜÌãè && $F±áÜÌãè != 0) { return array($C«‘²Ùäğù[1011] => !1, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[1421]); } if ($F ñŸ‡ìêÀ > $F±áÜÌãè && $F±áÜÌãè != 0) { return array($C«‘²Ùäğù[1011] => !1, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[1429]); } if ($CóòÍâİ…è && filesize($eèÜĞÆ³İ) != 0) { self::checkGzip($eèÜĞÆ³İ); if (!@rename($eèÜĞÆ³İ, $b®š½ğàó)) { @unlink($b®š½ğàó); $CóòÍâİ…è = @rename($eèÜĞÆ³İ, $b®š½ğàó); if (!$CóòÍâİ…è) { return array($C«‘²Ùäğù[1011] => !1, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[1433]); } } return array($C«‘²Ùäğù[1011] => !0, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[689]); } goto Bë­÷§Óš; Bë­÷§Óš: return array($C«‘²Ùäğù[1011] => !1, $C«‘²Ùäğù[1013] => $C«‘²Ùäğù[1434]); goto aß¼­Å¢; Dï½°ø¥: if ($d„Ë¤ƒŠ¶Ù) { curl_setopt($dˆÀ ²‡É×, CURLOPT_RANGE, $eøÇ•¾ßÓ» . $C«‘²Ùäğù[706]); } curl_setopt($dˆÀ ²‡É×, CURLOPT_FILE, $F«º´¤‰ÍÇ); curl_setopt($dˆÀ ²‡É×, CURLOPT_REFERER, get_url_link($aíÆô²š)); goto eØá Ş®İ; eùê™ìİ°Ï: curl_setopt($dˆÀ ²‡É×, CURLOPT_USERAGENT, $C«‘²Ùäğù[1424]); $CóòÍâİ…è = curl_exec($dˆÀ ²‡É×); curl_progress_end($dˆÀ ²‡É×); goto aŒÇâ’”†; aß¼­Å¢: } static function checkGzip($b•Ü¶šªß) { goto CÊªšÚ¤ù°; CÊªšÚ¤ù°: $bŒì‹çÒŸ” = $_SERVER[şÅ²é¤èİ][1435]; $Fíƒóè†‘ = file_sub_str($b•Ü¶šªß, 0, 2); if ($bŒì‹çÒŸ” != $Fíƒóè†‘) { return; } goto f’É³Ô®éğ; e¨‡·ÅÃæ“: file_put_contents($b•Ü¶šªß, $c¦äÒ—ÛòÃ); goto BØÒâŒö™Ó; f’É³Ô®éğ: ob_start(); readgzfile($b•Ü¶šªß); $c¦äÒ—ÛòÃ = ob_get_clean(); goto e¨‡·ÅÃæ“; BØÒâŒö™Ó: } } class FileParsePdf { public static function parse($b©—®§¹©­) { goto Bù‰«Ş„†ä; a›âÔ©Ùèš: preg_match_all($DÕƒ¹Ñ‚¾í, $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1437]], $BŸ©ßÚ£÷”); if ($BŸ©ßÚ£÷”[1] && $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1444]] < $BŸ©ßÚ£÷”[1][0]) { $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1444]] = $BŸ©ßÚ£÷”[1][0]; } preg_match_all($DÕƒ¹Ñ‚¾í, $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1438]], $BŸ©ßÚ£÷”); goto Bç±Øºëº ; cØîäˆ–: $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1437]] = StreamWrapperIO::fread($fçïäÒ¦ÀË[$BïÙãŒîÏÎ[776]], 0, $Cç·¡ˆ‡î•); $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1438]] = StreamWrapperIO::fread($fçïäÒ¦ÀË[$BïÙãŒîÏÎ[776]], $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[78]] - $Cç·¡ˆ‡î•, $Cç·¡ˆ‡î•); $Cˆ¡éÆ†•¨ = self::decodeXref($fçïäÒ¦ÀË); goto báğÎÈğø™; dš ŞÓ®İá: $DÕƒ¹Ñ‚¾í = $BïÙãŒîÏÎ[1441]; preg_match($DÕƒ¹Ñ‚¾í, $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1437]], $BŸ©ßÚ£÷”); if (!$aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1440]] && count($BŸ©ßÚ£÷”) == 5) { $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1440]] = $BŸ©ßÚ£÷”[3]; $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1442]] = $BŸ©ßÚ£÷”[4]; } goto b‡Úˆ•Îµ­; Bù‰«Ş„†ä: $BïÙãŒîÏÎ =& $_SERVER[şÅ²é¤èİ]; $Cç·¡ˆ‡î• = 32 * 1024; $fçïäÒ¦ÀË = array($BïÙãŒîÏÎ[776] => fopen($b©—®§¹©­, $BïÙãŒîÏÎ[1131]), $BïÙãŒîÏÎ[76] => $b©—®§¹©­, $BïÙãŒîÏÎ[78] => filesize($b©—®§¹©­), $BïÙãŒîÏÎ[1436] => $Cç·¡ˆ‡î•); goto cØîäˆ–; b‡Úˆ•Îµ­: preg_match($DÕƒ¹Ñ‚¾í, $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1438]], $BŸ©ßÚ£÷”); if (!$aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1440]] && count($BŸ©ßÚ£÷”) == 5) { $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1440]] = $BŸ©ßÚ£÷”[3]; $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1442]] = $BŸ©ßÚ£÷”[4]; } preg_match($BïÙãŒîÏÎ[1443], $fçïäÒ¦ÀË[$BïÙãŒîÏÎ[1437]], $BŸ©ßÚ£÷”); goto CîáÛñ¤ïî; báğÎÈğø™: if ($Cˆ¡éÆ†•¨) { $d·ù’ä¸› = $Cˆ¡éÆ†•¨[$BïÙãŒîÏÎ[1439]][$BïÙãŒîÏÎ[1152]]; $aÌİ¶®ôÃ = self::getObjectValue($fçïäÒ¦ÀË, $Cˆ¡éÆ†•¨, $d·ù’ä¸›); } $aÌİ¶®ôÃ = is_array($aÌİ¶®ôÃ) ? $aÌİ¶®ôÃ : array(); $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1440]] = 0; goto dš ŞÓ®İá; CîáÛñ¤ïî: if ($BŸ©ßÚ£÷”) { $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1242]] = $BŸ©ßÚ£÷”[1]; } $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1444]] = 0; $DÕƒ¹Ñ‚¾í = $BïÙãŒîÏÎ[1445]; goto a›âÔ©Ùèš; Bç±Øºëº : if ($BŸ©ßÚ£÷”[1] && $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1444]] < $BŸ©ßÚ£÷”[1][0]) { $aÌİ¶®ôÃ[$BïÙãŒîÏÎ[1444]] = $BŸ©ßÚ£÷”[1][0]; } $aÌİ¶®ôÃ = self::parseInfoItem($aÌİ¶®ôÃ); return $aÌİ¶®ôÃ; goto a•‹Ê¢È×; a•‹Ê¢È×: } private static function parseInfoItem($E‹ÏÈ»˜šÙ) { $eˆ‘Ã­Ğ¯ =& $_SERVER[şÅ²é¤èİ]; if (!$E‹ÏÈ»˜šÙ) { return !1; } $CÅìè‰ŒØ = array($eˆ‘Ã­Ğ¯[1243] => array($eˆ‘Ã­Ğ¯[1446], $eˆ‘Ã­Ğ¯[33]), $eˆ‘Ã­Ğ¯[1447] => array($eˆ‘Ã­Ğ¯[1448], $eˆ‘Ã­Ğ¯[33]), $eˆ‘Ã­Ğ¯[183] => array($eˆ‘Ã­Ğ¯[1449], $eˆ‘Ã­Ğ¯[206]), $eˆ‘Ã­Ğ¯[106] => array($eˆ‘Ã­Ğ¯[1450], $eˆ‘Ã­Ğ¯[206]), $eˆ‘Ã­Ğ¯[1444] => array($eˆ‘Ã­Ğ¯[1444], $eˆ‘Ã­Ğ¯[270]), $eˆ‘Ã­Ğ¯[1440] => array($eˆ‘Ã­Ğ¯[1440], $eˆ‘Ã­Ğ¯[270]), $eˆ‘Ã­Ğ¯[1442] => array($eˆ‘Ã­Ğ¯[1442], $eˆ‘Ã­Ğ¯[270]), $eˆ‘Ã­Ğ¯[1451] => array($eˆ‘Ã­Ğ¯[1452], $eˆ‘Ã­Ğ¯[33]), $eˆ‘Ã­Ğ¯[1453] => array($eˆ‘Ã­Ğ¯[1454], $eˆ‘Ã­Ğ¯[33]), $eˆ‘Ã­Ğ¯[1455] => array($eˆ‘Ã­Ğ¯[1242], $eˆ‘Ã­Ğ¯[33])); $Cİ¸Ø–£àÃ = array(); foreach ($CÅìè‰ŒØ as $aÀ‰îœ¦˜¯ => $DÎ«¨²¶ğ†) { if (!isset($E‹ÏÈ»˜šÙ[$DÎ«¨²¶ğ†[0]])) { continue; } $eÉÅ¶ñªÓã = $E‹ÏÈ»˜šÙ[$DÎ«¨²¶ğ†[0]]; if (!$eÉÅ¶ñªÓã || is_array($eÉÅ¶ñªÓã)) { continue; } switch ($DÎ«¨²¶ğ†[1]) { case $eˆ‘Ã­Ğ¯[270]: $eÉÅ¶ñªÓã = intval($eÉÅ¶ñªÓã); break; case $eˆ‘Ã­Ğ¯[206]: if (substr($eÉÅ¶ñªÓã, 0, 2) == $eˆ‘Ã­Ğ¯[1456]) { $eÉÅ¶ñªÓã = substr($eÉÅ¶ñªÓã, 2, 14); } if (strtotime($eÉÅ¶ñªÓã)) { $eÉÅ¶ñªÓã = date($eˆ‘Ã­Ğ¯[1457], strtotime($eÉÅ¶ñªÓã)); } break; } $Cİ¸Ø–£àÃ[$aÀ‰îœ¦˜¯] = $eÉÅ¶ñªÓã; } return $Cİ¸Ø–£àÃ; } private static function decodeXref(&$E˜ª÷õŒ») { goto cÊ®ª¾ó·¬; a‘¸°Á‘á: if (preg_match($c¢ÕÑÅ½ˆÖ[1470], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[1152]] = intval($F¡…Õã¢´¬[1]) . $c¢ÕÑÅ½ˆÖ[71] . intval($F¡…Õã¢´¬[2]); } if (preg_match($c¢ÕÑÅ½ˆÖ[1471], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[361]] = array(); $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[361]][0] = $F¡…Õã¢´¬[1]; $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[361]][1] = $F¡…Õã¢´¬[2]; } if (!$CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[1152]]) { return !1; } goto AÆ¬‘ëåé£; AˆöµÖÇÒ¡: if ($E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[78]] - $dáò‚‡Ï‘’ > $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1436]]) { $BÒÀÀ°Œ·» = 4 * $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1436]]; $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1436]] = $BÒÀÀ°Œ·»; $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1437]] = StreamWrapperIO::fread($E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[776]], 0, $BÒÀÀ°Œ·»); $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1438]] = StreamWrapperIO::fread($E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[776]], $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[78]] - $BÒÀÀ°Œ·», $BÒÀÀ°Œ·»); $f¨½ÕÊè·á = $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1438]]; } $F‘ĞÇó½õí = 0; preg_match_all($c¢ÕÑÅ½ˆÖ[1460], $f¨½ÕÊè·á, $F¡…Õã¢´¬); goto B®÷Ö°ğ“Ğ; e»ëÆŒÉóé: if (preg_match($c¢ÕÑÅ½ˆÖ[1465], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[78]] = intval($F¡…Õã¢´¬[1]); } if (preg_match($c¢ÕÑÅ½ˆÖ[1466], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[1467]] = intval($F¡…Õã¢´¬[1]) . $c¢ÕÑÅ½ˆÖ[71] . intval($F¡…Õã¢´¬[2]); } if (preg_match($c¢ÕÑÅ½ˆÖ[1468], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1439]][$c¢ÕÑÅ½ˆÖ[1469]] = intval($F¡…Õã¢´¬[1]) . $c¢ÕÑÅ½ˆÖ[71] . intval($F¡…Õã¢´¬[2]); } goto a‘¸°Á‘á; AÆ¬‘ëåé£: if (preg_match($c¢ÕÑÅ½ˆÖ[1472], $fğ¢—ñÖó, $F¡…Õã¢´¬) > 0) { } return $CÎİéÓ¦±ˆ; goto Fö©Œª³¸; cÊ®ª¾ó·¬: $c¢ÕÑÅ½ˆÖ =& $_SERVER[şÅ²é¤èİ]; $f¨½ÕÊè·á = $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1438]]; $CÎİéÓ¦±ˆ = array($c¢ÕÑÅ½ˆÖ[1439] => array(), $c¢ÕÑÅ½ˆÖ[1458] => array()); goto CÌ»Õå±í; CÌ»Õå±í: $AìÏÖÅŸ¨° = $c¢ÕÑÅ½ˆÖ[1459]; if (!preg_match_all($AìÏÖÅŸ¨°, $f¨½ÕÊè·á, $F¡…Õã¢´¬, PREG_SET_ORDER, 0)) { return !1; } $dáò‚‡Ï‘’ = intval($F¡…Õã¢´¬[0][1]); goto AˆöµÖÇÒ¡; B®÷Ö°ğ“Ğ: foreach ($F¡…Õã¢´¬[3] as $Cïˆ²µóÖˆ => $DŠ³÷™ÜÇ) { if ($F¡…Õã¢´¬[3][$Cïˆ²µóÖˆ] == $c¢ÕÑÅ½ˆÖ[1461]) { $d¤ó†Ğî— = $F‘ĞÇó½õí . $c¢ÕÑÅ½ˆÖ[71] . intval($F¡…Õã¢´¬[2][$Cïˆ²µóÖˆ]); $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1458]][$d¤ó†Ğî—] = intval($F¡…Õã¢´¬[1][$Cïˆ²µóÖˆ]); ++$F‘ĞÇó½õí; } else { if ($F¡…Õã¢´¬[3][$Cïˆ²µóÖˆ] == $c¢ÕÑÅ½ˆÖ[1462]) { ++$F‘ĞÇó½õí; } else { } } } if (preg_match_all($c¢ÕÑÅ½ˆÖ[1463], $f¨½ÕÊè·á, $F¡…Õã¢´¬)) { $c¢Û¬®›³± = $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[78]] - $E˜ª÷õŒ»[$c¢ÕÑÅ½ˆÖ[1436]]; foreach ($F¡…Õã¢´¬[0] as $Cïˆ²µóÖˆ => $C†ÊâõÖ¥–) { $FˆŸÊğ­œÌ = $F¡…Õã¢´¬[1][$Cïˆ²µóÖˆ] . $c¢ÕÑÅ½ˆÖ[71] . $F¡…Õã¢´¬[2][$Cïˆ²µóÖˆ]; $CÎİéÓ¦±ˆ[$c¢ÕÑÅ½ˆÖ[1458]][$FˆŸÊğ­œÌ] = strpos($f¨½ÕÊè·á, $C†ÊâõÖ¥–) + $c¢Û¬®›³± + 1; } } if (preg_match_all($c¢ÕÑÅ½ˆÖ[1464], $f¨½ÕÊè·á, $F¡…Õã¢´¬)) { $fğ¢—ñÖó = count($F¡…Õã¢´¬[1]) == 1 ? $F¡…Õã¢´¬[1][0] : $F¡…Õã¢´¬[1][1]; } else { $fğ¢—ñÖó = substr($f¨½ÕÊè·á, -1024 * 5); } goto e»ëÆŒÉóé; Fö©Œª³¸: } private static function getObjectValue($fÔ¥‘„©¤, $cÁÃÚ‘‰², $B¹œã¬é÷ñ) { goto fó÷¸˜Å¨; fó÷¸˜Å¨: $f²Øš©„ÛÙ =& $_SERVER[şÅ²é¤èİ]; $AçÔ¿‡èğÆ = self::getObject($fÔ¥‘„©¤, $cÁÃÚ‘‰²[$f²Øš©„ÛÙ[1458]][$B¹œã¬é÷ñ]); if (is_string($AçÔ¿‡èğÆ[1])) { return $AçÔ¿‡èğÆ[1]; } goto e¸‚ß¾ïÔˆ; cë™íÊ‰–…: return $fŠ£¥œÕŞš; goto fê³˜¦£é“; e¸‚ß¾ïÔˆ: if (!is_array($AçÔ¿‡èğÆ[1])) { return array(); } $fŠ£¥œÕŞš = array(); for ($EÅ·ŞÌ²ô… = 0; $EÅ·ŞÌ²ô… < count($AçÔ¿‡èğÆ[1]); $EÅ·ŞÌ²ô… += 2) { $BÃ›±Š à› = $AçÔ¿‡èğÆ[1][$EÅ·ŞÌ²ô…]; $f‡¹›Ì™„ = $AçÔ¿‡èğÆ[1][$EÅ·ŞÌ²ô… + 1]; if (count($BÃ›±Š à›) == 3 && $BÃ›±Š à›[0] == $f²Øš©„ÛÙ[8]) { $CÙ‰Â†­ÙÄ = !1; if ($f‡¹›Ì™„[0] == $f²Øš©„ÛÙ[1473]) { $f‡¹›Ì™„ = self::getObject($fÔ¥‘„©¤, $cÁÃÚ‘‰²[$f²Øš©„ÛÙ[1458]][$f‡¹›Ì™„[1]]); } $CÙ‰Â†­ÙÄ = $f‡¹›Ì™„[1]; if ($CÙ‰Â†­ÙÄ === !1) { continue; } if (is_string($CÙ‰Â†­ÙÄ)) { $CÙ‰Â†­ÙÄ = self::decodeStr($CÙ‰Â†­ÙÄ); } $fŠ£¥œÕŞš[$BÃ›±Š à›[1]] = $CÙ‰Â†­ÙÄ; } } goto cë™íÊ‰–…; fê³˜¦£é“: } private static function getObject($e÷–“›äÃ…, $F§³¼ŒÌ ¥) { $aÖˆ©õåĞÜ = self::getObjectItem($e÷–“›äÃ…, $F§³¼ŒÌ ¥); $aÖˆ©õåĞÜ = self::getObjectItem($e÷–“›äÃ…, $aÖˆ©õåĞÜ[2]); return $aÖˆ©õåĞÜ; } private static function getObjectItem($E‚—”§‘Ğ, $f ˆ‡°¹¥ç) { goto bÂêîõƒŒ; aÓøéŒ‡•´: $E‹ª‘œøõ = $f ˆ‡°¹¥ç >= $A£‰Ñ¿Ã—å ? $f ˆ‡°¹¥ç - $A£‰Ñ¿Ã—å : $f ˆ‡°¹¥ç; $bÈÏƒĞ­ÚÃ = $f ˆ‡°¹¥ç >= $A£‰Ñ¿Ã—å ? $E‚—”§‘Ğ[$aìŠ´‚ÆÄê[1438]] : $E‚—”§‘Ğ[$aìŠ´‚ÆÄê[1437]]; if ($f ˆ‡°¹¥ç > $AğŒŠ ÄÇ && $f ˆ‡°¹¥ç <= $A£‰Ñ¿Ã—å) { $E‹ª‘œøõ = 0; $bÈÏƒĞ­ÚÃ = StreamWrapperIO::fread($E‚—”§‘Ğ[$aìŠ´‚ÆÄê[776]], $f ˆ‡°¹¥ç, $AğŒŠ ÄÇ); } goto cˆ–Û¿´›; bÂêîõƒŒ: $aìŠ´‚ÆÄê =& $_SERVER[şÅ²é¤èİ]; $AğŒŠ ÄÇ = $E‚—”§‘Ğ[$aìŠ´‚ÆÄê[1436]]; $A£‰Ñ¿Ã—å = $E‚—”§‘Ğ[$aìŠ´‚ÆÄê[78]] - $AğŒŠ ÄÇ; goto aÓøéŒ‡•´; cˆ–Û¿´›: $aŞß¿†Ğé‚ = self::getRawObject($bÈÏƒĞ­ÚÃ, $E‹ª‘œøõ); if ($f ˆ‡°¹¥ç >= $A£‰Ñ¿Ã—å) { $aŞß¿†Ğé‚[2] = $aŞß¿†Ğé‚[2] + $A£‰Ñ¿Ã—å; } else { if ($f ˆ‡°¹¥ç > $AğŒŠ ÄÇ && $f ˆ‡°¹¥ç <= $A£‰Ñ¿Ã—å) { $aŞß¿†Ğé‚[2] = $aŞß¿†Ğé‚[2] + $f ˆ‡°¹¥ç; } } return $aŞß¿†Ğé‚; goto C¬×Ç¤óöÎ; C¬×Ç¤óöÎ: } private static function decodeStr($FÓÃà¼ïèë) { goto b‚İŞ²Ö„ò; A·”òé¡ ‡: $FÓÃà¼ïèë = $DÆ¸ôï»Šğ[33]; foreach ($bÕ®š¬êĞÊ as $E‘ÉÉê›) { if (preg_match($DÆ¸ôï»Šğ[1488], $E‘ÉÉê›) && !1 === stripos($E‘ÉÉê›, $DÆ¸ôï»Šğ[1489])) { $E‘ÉÉê› = preg_replace($DÆ¸ôï»Šğ[1490], $DÆ¸ôï»Šğ[33], $E‘ÉÉê›); $E‘ÉÉê› = trim($E‘ÉÉê›, $DÆ¸ôï»Šğ[927]); $E‘ÉÉê› = pack($DÆ¸ôï»Šğ[1491], $E‘ÉÉê›); $FÓÃà¼ïèë .= $E‘ÉÉê›; } else { $FÓÃà¼ïèë .= $E‘ÉÉê›; } } if (preg_match($DÆ¸ôï»Šğ[1492], $FÓÃà¼ïèë)) { $eÎè©‡ƒæß = substr($FÓÃà¼ïèë, 2); $FÓÃà¼ïèë = $DÆ¸ôï»Šğ[33]; $Aá©—­à¦Ó = strlen($eÎè©‡ƒæß); for ($dõÓæ§’Á† = 0; $dõÓæ§’Á† < $Aá©—­à¦Ó; $dõÓæ§’Á† += 2) { $aÙ –·å« = hexdec(bin2hex(substr($eÎè©‡ƒæß, $dõÓæ§’Á†, 2))); $FÓÃà¼ïèë .= mb_convert_encoding($DÆ¸ôï»Šğ[1493] . intval($aÙ –·å«) . $DÆ¸ôï»Šğ[68], $DÆ¸ôï»Šğ[1494], $DÆ¸ôï»Šğ[1495]); } } goto dƒ¨‰Ğ¾²¢; A‚öÜêÅ£: $FÓÃà¼ïèë = $DÆ¸ôï»Šğ[33]; foreach ($bÕ®š¬êĞÊ as $E‘ÉÉê›) { if (preg_match($DÆ¸ôï»Šğ[1485], $E‘ÉÉê›)) { $FÓÃà¼ïèë .= \chr(hexdec(trim($E‘ÉÉê›, $DÆ¸ôï»Šğ[1486]))); } else { $FÓÃà¼ïèë .= $E‘ÉÉê›; } } $bÕ®š¬êĞÊ = preg_split($DÆ¸ôï»Šğ[1487], $FÓÃà¼ïèë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A·”òé¡ ‡; bğôßÍ÷: $FÓÃà¼ïèë = $DÆ¸ôï»Šğ[33]; foreach ($bÕ®š¬êĞÊ as $E‘ÉÉê›) { if (preg_match($DÆ¸ôï»Šğ[1483], $E‘ÉÉê›)) { $FÓÃà¼ïèë .= \chr(octdec(trim($E‘ÉÉê›, $DÆ¸ôï»Šğ[94]))); } else { $FÓÃà¼ïèë .= $E‘ÉÉê›; } } $bÕ®š¬êĞÊ = preg_split($DÆ¸ôï»Šğ[1484], $FÓÃà¼ïèë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A‚öÜêÅ£; b‚İŞ²Ö„ò: $DÆ¸ôï»Šğ =& $_SERVER[şÅ²é¤èİ]; $FÓÃà¼ïèë = str_replace(array($DÆ¸ôï»Šğ[1474], $DÆ¸ôï»Šğ[1475], $DÆ¸ôï»Šğ[1476], $DÆ¸ôï»Šğ[1477], $DÆ¸ôï»Šğ[1478], $DÆ¸ôï»Šğ[1479], $DÆ¸ôï»Šğ[1480], $DÆ¸ôï»Šğ[1481]), array($DÆ¸ôï»Šğ[94], $DÆ¸ôï»Šğ[50], $DÆ¸ôï»Šğ[8], $DÆ¸ôï»Šğ[242], $DÆ¸ôï»Šğ[817], $DÆ¸ôï»Šğ[213], $DÆ¸ôï»Šğ[722], $DÆ¸ôï»Šğ[324]), $FÓÃà¼ïèë); $bÕ®š¬êĞÊ = preg_split($DÆ¸ôï»Šğ[1482], $FÓÃà¼ïèë, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto bğôßÍ÷; dƒ¨‰Ğ¾²¢: return $FÓÃà¼ïèë; goto b‘©ÌÕÌ”; b‘©ÌÕÌ”: } private static function getRawObject($fà—Š˜”, $FôÌêËŸ = 0) { goto fâèÖÚ›¡¡; fâèÖÚ›¡¡: $F“„Èô¬À— =& $_SERVER[şÅ²é¤èİ]; $AµÙ›ƒ•Ì = $F“„Èô¬À—[33]; $fÀğÇİÄù” = $F“„Èô¬À—[33]; goto a²µ’›Äõª; BíĞóäÁÅ©: return array($AµÙ›ƒ•Ì, $fÀğÇİÄù”, $FôÌêËŸ); goto a«Ø„µ¿ÕÛ; a²µ’›Äõª: $FôÌêËŸ += strspn($fà—Š˜”, $F“„Èô¬À—[1496], $FôÌêËŸ); $Eˆº¥˜ÃÂ = $fà—Š˜”[$FôÌêËŸ]; switch ($Eˆº¥˜ÃÂ) { case $F“„Èô¬À—[1497]: $BğÔè„ÏÊª = strcspn($fà—Š˜”, $F“„Èô¬À—[1498], $FôÌêËŸ); if ($BğÔè„ÏÊª > 0) { $FôÌêËŸ += $BğÔè„ÏÊª; return self::getRawObject($fà—Š˜”, $FôÌêËŸ); } break; case $F“„Èô¬À—[8]: $AµÙ›ƒ•Ì = $Eˆº¥˜ÃÂ; ++$FôÌêËŸ; $B‹®ÌâÎ¤‡ = preg_match($F“„Èô¬À—[1499], substr($fà—Š˜”, $FôÌêËŸ, 256), $A–‡Ô †Š); if (1 == $B‹®ÌâÎ¤‡) { $fÀğÇİÄù” = $A–‡Ô †Š[1]; $FôÌêËŸ += strlen($fÀğÇİÄù”); } break; case $F“„Èô¬À—[242]: case $F“„Èô¬À—[817]: $AµÙ›ƒ•Ì = $Eˆº¥˜ÃÂ; ++$FôÌêËŸ; $cô›¸‰¢à´ = $FôÌêËŸ; if ($F“„Èô¬À—[242] == $Eˆº¥˜ÃÂ) { $f–´óÔí = 1; while ($f–´óÔí > 0) { if (!isset($fà—Š˜”[$cô›¸‰¢à´])) { break; } $DíÊ§İŞå = $fà—Š˜”[$cô›¸‰¢à´]; switch ($DíÊ§İŞå) { case $F“„Èô¬À—[94]: ++$cô›¸‰¢à´; break; case $F“„Èô¬À—[242]: ++$f–´óÔí; break; case $F“„Èô¬À—[817]: --$f–´óÔí; break; } ++$cô›¸‰¢à´; } $fÀğÇİÄù” = substr($fà—Š˜”, $FôÌêËŸ, $cô›¸‰¢à´ - $FôÌêËŸ - 1); $FôÌêËŸ = $cô›¸‰¢à´; } break; case $F“„Èô¬À—[465]: case $F“„Èô¬À—[466]: $AµÙ›ƒ•Ì = $Eˆº¥˜ÃÂ; ++$FôÌêËŸ; if ($F“„Èô¬À—[465] == $Eˆº¥˜ÃÂ) { $fÀğÇİÄù” = array(); do { $CéÅ‘“Œå‡ = $FôÌêËŸ; $fëµÏõá„ = self::getRawObject($fà—Š˜”, $FôÌêËŸ); $FôÌêËŸ = $fëµÏõá„[2]; $fÀğÇİÄù”[] = $fëµÏõá„; } while ($F“„Èô¬À—[466] != $fëµÏõá„[0] && $FôÌêËŸ != $CéÅ‘“Œå‡); array_pop($fÀğÇİÄù”); } break; case $F“„Èô¬À—[926]: case $F“„Èô¬À—[929]: if (isset($fà—Š˜”[$FôÌêËŸ + 1]) && $fà—Š˜”[$FôÌêËŸ + 1] == $Eˆº¥˜ÃÂ) { $AµÙ›ƒ•Ì = $Eˆº¥˜ÃÂ . $Eˆº¥˜ÃÂ; $FôÌêËŸ += 2; if ($F“„Èô¬À—[926] == $Eˆº¥˜ÃÂ) { $fÀğÇİÄù” = array(); do { $CéÅ‘“Œå‡ = $FôÌêËŸ; $fëµÏõá„ = self::getRawObject($fà—Š˜”, $FôÌêËŸ); $FôÌêËŸ = $fëµÏõá„[2]; $fÀğÇİÄù”[] = $fëµÏõá„; } while ($F“„Èô¬À—[1500] != $fëµÏõá„[0] && $FôÌêËŸ != $CéÅ‘“Œå‡); array_pop($fÀğÇİÄù”); } } else { $AµÙ›ƒ•Ì = $Eˆº¥˜ÃÂ; ++$FôÌêËŸ; $B‹®ÌâÎ¤‡ = preg_match($F“„Èô¬À—[1501], substr($fà—Š˜”, $FôÌêËŸ), $A–‡Ô †Š); if ($F“„Èô¬À—[926] == $Eˆº¥˜ÃÂ && 1 == $B‹®ÌâÎ¤‡) { $fÀğÇİÄù” = strtr($A–‡Ô †Š[1], $F“„Èô¬À—[1502], $F“„Èô¬À—[33]); $FôÌêËŸ += \strlen($A–‡Ô †Š[0]); } elseif (!1 !== ($AÖ’›²ËÒ‹ = strpos($fà—Š˜”, $F“„Èô¬À—[929], $FôÌêËŸ))) { $FôÌêËŸ = $AÖ’›²ËÒ‹ + 1; } } break; default: if ($F“„Èô¬À—[1503] == substr($fà—Š˜”, $FôÌêËŸ, 6)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1503]; $FôÌêËŸ += 6; } elseif ($F“„Èô¬À—[100] == substr($fà—Š˜”, $FôÌêËŸ, 4)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[100]; $FôÌêËŸ += 4; $fÀğÇİÄù” = $F“„Èô¬À—[100]; } elseif ($F“„Èô¬À—[1504] == substr($fà—Š˜”, $FôÌêËŸ, 4)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1505]; $FôÌêËŸ += 4; $fÀğÇİÄù” = $F“„Èô¬À—[1504]; } elseif ($F“„Èô¬À—[1506] == substr($fà—Š˜”, $FôÌêËŸ, 5)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1505]; $FôÌêËŸ += 5; $fÀğÇİÄù” = $F“„Èô¬À—[1506]; } elseif ($F“„Èô¬À—[1003] == substr($fà—Š˜”, $FôÌêËŸ, 6)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1003]; $FôÌêËŸ += 6; if (1 == preg_match($F“„Èô¬À—[1507], substr($fà—Š˜”, $FôÌêËŸ), $A–‡Ô †Š)) { $FôÌêËŸ += strlen($A–‡Ô †Š[0]); $e¸±ê™Í Æ = $F“„Èô¬À—[1508]; $B‹®ÌâÎ¤‡ = preg_match($e¸±ê™Í Æ, substr($fà—Š˜”, $FôÌêËŸ), $A–‡Ô †Š, PREG_OFFSET_CAPTURE); if (1 == $B‹®ÌâÎ¤‡) { $fÀğÇİÄù” = substr($fà—Š˜”, $FôÌêËŸ, $A–‡Ô †Š[0][1]); $FôÌêËŸ += $A–‡Ô †Š[1][1]; } } } elseif ($F“„Èô¬À—[1509] == substr($fà—Š˜”, $FôÌêËŸ, 9)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1509]; $FôÌêËŸ += 9; } elseif (1 == preg_match($F“„Èô¬À—[1510], substr($fà—Š˜”, $FôÌêËŸ, 33), $A–‡Ô †Š)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1473]; $FôÌêËŸ += strlen($A–‡Ô †Š[0]); $fÀğÇİÄù” = intval($A–‡Ô †Š[1]) . $F“„Èô¬À—[71] . intval($A–‡Ô †Š[2]); } elseif (1 == preg_match($F“„Èô¬À—[1511], substr($fà—Š˜”, $FôÌêËŸ, 33), $A–‡Ô †Š)) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1512]; $fÀğÇİÄù” = intval($A–‡Ô †Š[1]) . $F“„Èô¬À—[71] . intval($A–‡Ô †Š[2]); $FôÌêËŸ += strlen($A–‡Ô †Š[0]); } elseif (($a˜Õö¹ªê = strspn($fà—Š˜”, $F“„Èô¬À—[1513], $FôÌêËŸ)) > 0) { $AµÙ›ƒ•Ì = $F“„Èô¬À—[1514]; $fÀğÇİÄù” = substr($fà—Š˜”, $FôÌêËŸ, $a˜Õö¹ªê); $FôÌêËŸ += $a˜Õö¹ªê; } break; } goto BíĞóäÁÅ©; a«Ø„µ¿ÕÛ: } } class GetInfo { private static $fileTypeArray; public static function get($Bí¤¼ÌáƒÅ) { $E•ÚÒÖ™Îˆ = IO::info($Bí¤¼ÌáƒÅ); return self::infoAdd($E•ÚÒÖ™Îˆ); } public static function infoAdd(&$dÃ—Ğ©‚°‚) { goto FìŸ†ê¾Ëë; C›Ã‰ÚŞÜ‘: $FÔ¦¯èÍˆ´ = $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[155]]; if ($dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[155]] == $F†‘ì…¯Ò[1517]) { $cõ°Ûº‰šÀ = self::psdParse($CÄçÕÂæ); $FÔ¦¯èÍˆ´ = $F†‘ì…¯Ò[1518]; } else { if ($dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[155]] == $F†‘ì…¯Ò[1519]) { $cõ°Ûº‰šÀ = self::pdfParse($CÄçÕÂæ); } else { $FÔ¦¯èÍˆ´ = self::$fileTypeArray[$F†‘ì…¯Ò[1520]][$dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[155]]]; $E×•í¸Ú– = self::$fileTypeArray[$F†‘ì…¯Ò[1521]][$FÔ¦¯èÍˆ´][$F†‘ì…¯Ò[1522]]; $f«’à›³ = @$a£Ë¡„·ƒî->analyze($CÄçÕÂæ, $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[78]], $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[28]]); $cõ°Ûº‰šÀ = self::parseData($f«’à›³, $E×•í¸Ú–, $dÃ—Ğ©‚°‚); } } if (!$cõ°Ûº‰šÀ) { return; } goto cä˜™ÓŒí•; FìŸ†ê¾Ëë: $F†‘ì…¯Ò =& $_SERVER[şÅ²é¤èİ]; static $a£Ë¡„·ƒî; if (!$a£Ë¡„·ƒî) { require SDK_DIR . $F†‘ì…¯Ò[1515]; $a£Ë¡„·ƒî = new getID3(); } goto B‚¨ù’íãÊ; B‚¨ù’íãÊ: if (!$dÃ—Ğ©‚°‚ || $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[29]] != $F†‘ì…¯Ò[162]) { return; } if (!self::support($dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[155]]) || isset($dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[419]])) { return; } $CÄçÕÂæ = $F†‘ì…¯Ò[1516] . $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[76]]; goto C›Ã‰ÚŞÜ‘; cä˜™ÓŒí•: $cõ°Ûº‰šÀ[$F†‘ì…¯Ò[366]] = $FÔ¦¯èÍˆ´; $dÃ—Ğ©‚°‚[$F†‘ì…¯Ò[419]] = $cõ°Ûº‰šÀ; return $dÃ—Ğ©‚°‚; goto AîÍóÎ‚ª»; AîÍóÎ‚ª»: } public static function support($dÕì‹Ùñ»é) { goto E†àÕÌµĞ; E†àÕÌµĞ: $Få†¼Ô«ÜÃ =& $_SERVER[şÅ²é¤èİ]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $dÕì‹Ùñ»é = strtolower($dÕì‹Ùñ»é); goto e×½×ëÄ†Ä; e×½×ëÄ†Ä: $f˜ Œ–Ëá› = array($Få†¼Ô«ÜÃ[1519], $Få†¼Ô«ÜÃ[1517]); if (in_array($dÕì‹Ùñ»é, $f˜ Œ–Ëá›)) { return !0; } if (isset(self::$fileTypeArray[$Få†¼Ô«ÜÃ[1520]][$dÕì‹Ùñ»é])) { return !0; } goto fô¼ïğ‹ÁÃ; fô¼ïğ‹ÁÃ: return !1; goto E÷Ô›­×ÅÁ; E÷Ô›­×ÅÁ: } private static function parseData($f¼öªÄ”§á, $fóÒª®¥Ì, $C¹³öØ¯‹) { $B‡æøÜ¾ê† =& $_SERVER[şÅ²é¤èİ]; $fØá óõ°Õ = $f¼öªÄ”§á[$B‡æøÜ¾ê†[1523]]; $b‰«§ë«µŞ = array(); foreach ($fóÒª®¥Ì as $aóßŠ¿ÃÃ” => $a±ó÷™¥Û) { foreach ($a±ó÷™¥Û as $eÙå¿Äà¹ˆ) { if (is_array($eÙå¿Äà¹ˆ)) { $DÏ•øª¦ = self::parseData($f¼öªÄ”§á, $a±ó÷™¥Û, $C¹³öØ¯‹); if ($DÏ•øª¦) { $b‰«§ë«µŞ[$aóßŠ¿ÃÃ”] = $DÏ•øª¦; } break; } $BéÃï™ò´Ÿ = str_replace($B‡æøÜ¾ê†[1300], $fØá óõ°Õ, $eÙå¿Äà¹ˆ); $DÏ•øª¦ = _get($f¼öªÄ”§á, $BéÃï™ò´Ÿ); $DÏ•øª¦ = is_array($DÏ•øª¦) ? $DÏ•øª¦[0] : $DÏ•øª¦; if ($DÏ•øª¦) { break; } } if ($DÏ•øª¦ || $DÏ•øª¦ === 0 || $DÏ•øª¦ === !1) { $DÏ•øª¦ = self::valueReset($eÙå¿Äà¹ˆ, $DÏ•øª¦, $aóßŠ¿ÃÃ”); if ($DÏ•øª¦ !== null) { $b‰«§ë«µŞ[$aóßŠ¿ÃÃ”] = $DÏ•øª¦; } } } $b‰«§ë«µŞ = self::valueResetAll($b‰«§ë«µŞ, $C¹³öØ¯‹); return $b‰«§ë«µŞ; } private static function psdParse($F¼„ó¢Â’ê) { $BŞˆ‡‚áÜ =& $_SERVER[şÅ²é¤èİ]; if (IO::fileSubstr($F¼„ó¢Â’ê, 0, 4) != $BŞˆ‡‚áÜ[1524]) { return !1; } $d•›ìéèôÊ = getImageSize($F¼„ó¢Â’ê, $D¤Ğ¢Şöõ); if (!$d•›ìéèôÊ) { return; } $B‡–Ç˜Ó¡• = array($BŞˆ‡‚áÜ[1440] => $d•›ìéèôÊ[0], $BŞˆ‡‚áÜ[1442] => $d•›ìéèôÊ[1]); return $B‡–Ç˜Ó¡•; } private static function pdfParse($DîËƒÚÅÉä) { return FileParsePdf::parse($DîËƒÚÅÉä); } private static function fileTypeParse() { $bîËÈÁÆç =& $_SERVER[şÅ²é¤èİ]; $CŒ­ƒõ‹¤ = self::fileTypeArray(); $CêøºÕ±¡§ = array(); foreach ($CŒ­ƒõ‹¤ as $dàÍ›äë¥ => $B–Ò„Å‘Û) { $E©Öœˆâä‰ = is_string($B–Ò„Å‘Û[$bîËÈÁÆç[155]]) ? explode($bîËÈÁÆç[47], $B–Ò„Å‘Û[$bîËÈÁÆç[155]]) : $B–Ò„Å‘Û[$bîËÈÁÆç[155]]; if (!$E©Öœˆâä‰) { continue; } foreach ($E©Öœˆâä‰ as $DŞš‡“ø×æ) { $DŞš‡“ø×æ = strtolower(trim($DŞš‡“ø×æ)); if (!$DŞš‡“ø×æ) { continue; } $CêøºÕ±¡§[$DŞš‡“ø×æ] = $dàÍ›äë¥; } $CŒ­ƒõ‹¤[$dàÍ›äë¥][$bîËÈÁÆç[155]] = array_keys($CêøºÕ±¡§); $CŒ­ƒõ‹¤[$dàÍ›äë¥][$bîËÈÁÆç[1522]] = self::parseKeyMap($B–Ò„Å‘Û[$bîËÈÁÆç[1522]]); } return array($bîËÈÁÆç[1521] => $CŒ­ƒõ‹¤, $bîËÈÁÆç[1520] => $CêøºÕ±¡§); } private static function parseKeyMap($dÒŒò¨©†Ì) { $D¾†÷æí¯Í =& $_SERVER[şÅ²é¤èİ]; foreach ($dÒŒò¨©†Ì as $fæİó®¦© => $C£…ä¿¡½È) { if (is_array($C£…ä¿¡½È)) { $bœŠè·ÉïØ = self::parseKeyMap($C£…ä¿¡½È); if ($bœŠè·ÉïØ) { $dÒŒò¨©†Ì[$fæİó®¦©] = $bœŠè·ÉïØ; } continue; } $Bí–½â«×× = explode($D¾†÷æí¯Í[47], $C£…ä¿¡½È); $eŞâÍİ—ĞÕ = array(); foreach ($Bí–½â«×× as $Fâ£…Îé’) { $Fâ£…Îé’ = trim($Fâ£…Îé’); if (!$Fâ£…Îé’) { continue; } if (preg_match($D¾†÷æí¯Í[1525], $Fâ£…Îé’, $CŒ¶õ†‡áÚ)) { $F©” âºÖñ = explode($D¾†÷æí¯Í[265], $CŒ¶õ†‡áÚ[1]); foreach ($F©” âºÖñ as $FØ¦äÇ¡˜) { $eŞâÍİ—ĞÕ[] = str_replace($CŒ¶õ†‡áÚ[0], $FØ¦äÇ¡˜, $Fâ£…Îé’); } } else { $eŞâÍİ—ĞÕ[] = $Fâ£…Îé’; } } $dÒŒò¨©†Ì[$fæİó®¦©] = $eŞâÍİ—ĞÕ; } return $dÒŒò¨©†Ì; } private static function valueResetAll($dç†÷¥õ×«, $böçŒÌÍˆ‹) { goto cã³¶ö¬Òå; F¤‚Ç„ˆƒ: if ($d¥î¡§¸Ş ) { $aÚ•İêêÊ÷ = IO_PATH_SYSTEM_TEMP . $bÌ«Ş½‰Éó[1531] . KodIO::hashPath($böçŒÌÍˆ‹) . $bÌ«Ş½‰Éó[1532]; $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1533]] = Action($bÌ«Ş½‰Éó[1534])->pluginCacheFileSet($aÚ•İêêÊ÷, $d¥î¡§¸Ş ); unset($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1518]]); } $A«©«÷Œ©š = _get($dç†÷¥õ×«, $bÌ«Ş½‰Éó[1536], $bÌ«Ş½‰Éó[33]); $B§Ò¢½¥ÌÛ = _get($dç†÷¥õ×«, $bÌ«Ş½‰Éó[1537], $bÌ«Ş½‰Éó[33]); goto B¬Äï‘Í­; E½äù‰íº£: return $dç†÷¥õ×«; goto cŠåäØÒè·; B¬Äï‘Í­: $D±à”¶Ğ = _get($dç†÷¥õ×«, $bÌ«Ş½‰Éó[1538], $bÌ«Ş½‰Éó[33]); $C±‰Ä‘Æµ = $A«©«÷Œ©š . $B§Ò¢½¥ÌÛ . $D±à”¶Ğ; if ($C±‰Ä‘Æµ && get_charset($C±‰Ä‘Æµ) != $bÌ«Ş½‰Éó[320]) { $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1243]] = iconv_to($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1243]], get_charset($C±‰Ä‘Æµ), $bÌ«Ş½‰Éó[320]); $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1539]] = iconv_to($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1539]], get_charset($C±‰Ä‘Æµ), $bÌ«Ş½‰Éó[320]); $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1540]] = iconv_to($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1535]][$bÌ«Ş½‰Éó[1540]], get_charset($C±‰Ä‘Æµ), $bÌ«Ş½‰Éó[320]); } goto E½äù‰íº£; cã³¶ö¬Òå: $bÌ«Ş½‰Éó =& $_SERVER[şÅ²é¤èİ]; if (isset($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1526]])) { $Eµƒ¹ƒÑÓ¢ = ceil($dç†÷¥õ×«[$bÌ«Ş½‰Éó[1526]]); $f¦ÇĞ•¦óİ = intval($Eµƒ¹ƒÑÓ¢ / 3600); $aŠÕ–˜ËÉê = intval(($Eµƒ¹ƒÑÓ¢ - $f¦ÇĞ•¦óİ * 3600) / 60); $EíÊÏ¥ˆÂ¯ = $Eµƒ¹ƒÑÓ¢ % 60; $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1527]] = sprintf($bÌ«Ş½‰Éó[1528], $f¦ÇĞ•¦óİ, $aŠÕ–˜ËÉê, $EíÊÏ¥ˆÂ¯); if ($f¦ÇĞ•¦óİ == 0) { $dç†÷¥õ×«[$bÌ«Ş½‰Éó[1527]] = sprintf($bÌ«Ş½‰Éó[1529], $aŠÕ–˜ËÉê, $EíÊÏ¥ˆÂ¯); } } $d¥î¡§¸Ş  = _get($dç†÷¥õ×«, $bÌ«Ş½‰Éó[1530]); goto F¤‚Ç„ˆƒ; cŠåäØÒè·: } private static function valueReset($FÎÏÖäŒ­ó, $a¨—ôáÇ•í, $D£õ†›Íæµ) { $C¦¥ôëšº =& $_SERVER[şÅ²é¤èİ]; $cåÉÑÒæ—„ = $C¦¥ôëšº[1457]; switch ($FÎÏÖäŒ­ó) { case $C¦¥ôëšº[1541]: $a¨—ôáÇ•í = $a¨—ôáÇ•í == $C¦¥ôëšº[491] ? $C¦¥ôëšº[1542] : $C¦¥ôëšº[1543]; break; case $C¦¥ôëšº[1544]: $a¨—ôáÇ•í = $a¨—ôáÇ•í ? $a¨—ôáÇ•í : null; break; default: break; } switch ($D£õ†›Íæµ) { case $C¦¥ôëšº[1545]: $a¨—ôáÇ•í = round($a¨—ôáÇ•í, 2); break; case $C¦¥ôëšº[183]: case $C¦¥ôëšº[106]: if ($a¨—ôáÇ•í < 0) { $a¨—ôáÇ•í = null; } else { if (is_numeric($a¨—ôáÇ•í)) { $a¨—ôáÇ•í = date($cåÉÑÒæ—„, $a¨—ôáÇ•í); } } break; default: break; } return $a¨—ôáÇ•í; } private static function fileTypeArray() { $DÑùáèº‹ =& $_SERVER[şÅ²é¤èİ]; return array($DÑùáèº‹[1518] => array($DÑùáèº‹[155] => $DÑùáèº‹[1546] . $DÑùáèº‹[1547], $DÑùáèº‹[1522] => array($DÑùáèº‹[1440] => $DÑùáèº‹[1548], $DÑùáèº‹[1442] => $DÑùáèº‹[1549], $DÑùáèº‹[1550] => $DÑùáèº‹[1551], $DÑùáèº‹[1552] => $DÑùáèº‹[1553], $DÑùáèº‹[183] => $DÑùáèº‹[1554], $DÑùáèº‹[106] => $DÑùáèº‹[1555], $DÑùáèº‹[1556] => $DÑùáèº‹[1557], $DÑùáèº‹[1558] => $DÑùáèº‹[1559], $DÑùáèº‹[1560] => $DÑùáèº‹[1561], $DÑùáèº‹[1562] => $DÑùáèº‹[1563], $DÑùáèº‹[1564] => $DÑùáèº‹[1565], $DÑùáèº‹[1566] => $DÑùáèº‹[1567], $DÑùáèº‹[1568] => $DÑùáèº‹[1569], $DÑùáèº‹[1570] => array($DÑùáèº‹[1571] => $DÑùáèº‹[1572], $DÑùáèº‹[1573] => $DÑùáèº‹[1574], $DÑùáèº‹[1575] => $DÑùáèº‹[1576]), $DÑùáèº‹[1577] => $DÑùáèº‹[1578], $DÑùáèº‹[1579] => $DÑùáèº‹[1580], $DÑùáèº‹[1581] => $DÑùáèº‹[1582], $DÑùáèº‹[1583] => $DÑùáèº‹[1584], $DÑùáèº‹[1585] => array($DÑùáèº‹[1586] => $DÑùáèº‹[1587], $DÑùáèº‹[1588] => $DÑùáèº‹[1589], $DÑùáèº‹[1590] => $DÑùáèº‹[1591], $DÑùáèº‹[1592] => $DÑùáèº‹[1593], $DÑùáèº‹[1594] => $DÑùáèº‹[1595], $DÑùáèº‹[1596] => $DÑùáèº‹[1597], $DÑùáèº‹[1598] => $DÑùáèº‹[1599], $DÑùáèº‹[1600] => $DÑùáèº‹[1601], $DÑùáèº‹[1602] => $DÑùáèº‹[1603], $DÑùáèº‹[1604] => $DÑùáèº‹[1605], $DÑùáèº‹[1606] => $DÑùáèº‹[1607]))), $DÑùáèº‹[1608] => array($DÑùáèº‹[155] => $DÑùáèº‹[1609] . $DÑùáèº‹[1610], $DÑùáèº‹[1522] => array($DÑùáèº‹[1526] => $DÑùáèº‹[1611], $DÑùáèº‹[183] => $DÑùáèº‹[1612], $DÑùáèº‹[106] => $DÑùáèº‹[1613], $DÑùáèº‹[1558] => $DÑùáèº‹[1614], $DÑùáèº‹[1615] => $DÑùáèº‹[1616], $DÑùáèº‹[1617] => $DÑùáèº‹[1544], $DÑùáèº‹[1618] => $DÑùáèº‹[1619], $DÑùáèº‹[1620] => $DÑùáèº‹[1621], $DÑùáèº‹[1622] => $DÑùáèº‹[1623], $DÑùáèº‹[1535] => array($DÑùáèº‹[1243] => $DÑùáèº‹[1624], $DÑùáèº‹[1539] => $DÑùáèº‹[1625], $DÑùáèº‹[1540] => $DÑùáèº‹[1626], $DÑùáèº‹[1627] => $DÑùáèº‹[1628], $DÑùáèº‹[1629] => $DÑùáèº‹[1630], $DÑùáèº‹[1631] => $DÑùáèº‹[1632], $DÑùáèº‹[1518] => $DÑùáèº‹[1633]))), $DÑùáèº‹[1634] => array($DÑùáèº‹[155] => $DÑùáèº‹[1635] . $DÑùáèº‹[1636], $DÑùáèº‹[1522] => array($DÑùáèº‹[1440] => $DÑùáèº‹[1637], $DÑùáèº‹[1442] => $DÑùáèº‹[1638], $DÑùáèº‹[1526] => $DÑùáèº‹[1611], $DÑùáèº‹[183] => $DÑùáèº‹[1639], $DÑùáèº‹[106] => $DÑùáèº‹[1640], $DÑùáèº‹[1545] => $DÑùáèº‹[1641], $DÑùáèº‹[1622] => $DÑùáèº‹[1642], $DÑùáèº‹[1618] => $DÑùáèº‹[1643], $DÑùáèº‹[1558] => $DÑùáèº‹[1644], $DÑùáèº‹[1608] => array($DÑùáèº‹[1617] => $DÑùáèº‹[1544], $DÑùáèº‹[1645] => $DÑùáèº‹[1646], $DÑùáèº‹[1615] => $DÑùáèº‹[1616], $DÑùáèº‹[1622] => $DÑùáèº‹[1623], $DÑùáèº‹[1618] => $DÑùáèº‹[1647], $DÑùáèº‹[1620] => $DÑùáèº‹[1621]))), $DÑùáèº‹[1648] => array($DÑùáèº‹[1522] => array($DÑùáèº‹[1649] => $DÑùáèº‹[1650], $DÑùáèº‹[1651] => $DÑùáèº‹[1652])), $DÑùáèº‹[1653] => array($DÑùáèº‹[1522] => array())); } } goto AˆÅ Ìµø; e‡ÍŠÖ§Ëğ: class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($eòËÉ‘çòâ, $d®¹†Ç¿¹Ú) { $eÍùÏò­“” =& $_SERVER[şÅ²é¤èİ]; $this->cachePath = $eòËÉ‘çòâ[$eÍùÏò­“”[76]]; $this->prefix = $eÍùÏò­“”[763]; $this->cacheTime = $d®¹†Ç¿¹Ú; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($cß›ãÅ¥Ì) { $A­öó‰´ïÂ =& $_SERVER[şÅ²é¤èİ]; $cß›ãÅ¥Ì = str_replace(array($A­öó‰´ïÂ[731], $A­öó‰´ïÂ[94], $A­öó‰´ïÂ[70]), $A­öó‰´ïÂ[764], $cß›ãÅ¥Ì); return $this->cachePath . $A­öó‰´ïÂ[765] . $cß›ãÅ¥Ì . $A­öó‰´ïÂ[766]; } public function set($A®ÑÃ³î´, $A”øÁô³“›, $B‰ØÉ¼£“ë = false) { $cØ¶µÈöà = $this->getFile($A®ÑÃ³î´); if (file_put_contents($cØ¶µÈöà, $this->prefix . $A”øÁô³“›, LOCK_EX)) { return !0; } @unlink($cØ¶µÈöà); return !1; } public function get($c°Ò™“öä¤) { $F²»®Œ±š = $this->getFile($c°Ò™“öä¤); if (file_exists($F²»®Œ±š) && filemtime($F²»®Œ±š) < time() - $this->cacheTime) { @unlink($F²»®Œ±š); return !1; } $cÕÇ±ªÍ = @file_get_contents($F²»®Œ±š); return substr($cÕÇ±ªÍ, strlen($this->prefix)); } public function remove($FÙ•Ã£Ş¯) { $EíŠê«œ = $this->getFile($FÙ•Ã£Ş¯); return @unlink($EíŠê«œ); } public function deleteAll() { $eŞ†…ÔÂ¹© =& $_SERVER[şÅ²é¤èİ]; $bÒ‚„öÔ«– = scandir($this->cachePath); foreach ($bÒ‚„öÔ«– as $bŸ†¦õâÍ) { $b†™‰…Á‘ = $this->cachePath . $bŸ†¦õâÍ; if (strpos($b†™‰…Á‘, $eŞ†…ÔÂ¹©[766]) && strpos($b†™‰…Á‘, $eŞ†…ÔÂ¹©[767])) { @unlink($b†™‰…Á‘); } } } public function clearTimeout() { $B†Ÿ‚Çºâ¥ =& $_SERVER[şÅ²é¤èİ]; $A­ÒÄîš¿ = scandir($this->cachePath); foreach ($A­ÒÄîš¿ as $e’Ä¢°Í´ã) { $EÈª®š»É = $this->cachePath . $e’Ä¢°Í´ã; if (strpos($EÈª®š»É, $B†Ÿ‚Çºâ¥[766]) && strpos($EÈª®š»É, $B†Ÿ‚Çºâ¥[767]) && filemtime($EÈª®š»É) < time() - $this->cacheTime) { @unlink($EÈª®š»É); } } } } class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto fòÆĞÙ Ä; A­à™Õ¿¤¨: self::$timeout = $fÌ¢´Úñ„Ÿ[$Cõ¸¶·†‚¼[768]] ? $fÌ¢´Úñ„Ÿ[$Cõ¸¶·†‚¼[768]] : 10; $EßºÃ“ØÖÈ = $GLOBALS[$Cõ¸¶·†‚¼[6]][$Cõ¸¶·†‚¼[17]][$Cõ¸¶·†‚¼[726]]; if ($fÌ¢´Úñ„Ÿ[$Cõ¸¶·†‚¼[756]] == $Cõ¸¶·†‚¼[17] && $EßºÃ“ØÖÈ == $Cõ¸¶·†‚¼[9]) { $fÌ¢´Úñ„Ÿ[$Cõ¸¶·†‚¼[756]] = $Cõ¸¶·†‚¼[162]; } goto a©ÁÉŠ·á“; a©ÁÉŠ·á“: switch ($fÌ¢´Úñ„Ÿ[$Cõ¸¶·†‚¼[756]]) { case $Cõ¸¶·†‚¼[759]: self::$handle = new CacheLockRedis(); break; case $Cõ¸¶·†‚¼[760]: self::$handle = new CacheLockMemcached(); break; case $Cõ¸¶·†‚¼[17]: self::$handle = new CacheLockDatabase(); break; case $Cõ¸¶·†‚¼[162]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto A¾¿Ğ´‰˜; fòÆĞÙ Ä: $Cõ¸¶·†‚¼ =& $_SERVER[şÅ²é¤èİ]; if (self::$handle) { return self::$handle; } $fÌ¢´Úñ„Ÿ = $GLOBALS[$Cõ¸¶·†‚¼[6]][$Cõ¸¶·†‚¼[331]]; goto A­à™Õ¿¤¨; A¾¿Ğ´‰˜: } private static function key($AÁËİ›—›Ğ) { return $_SERVER[şÅ²é¤èİ][769] . Cache::key($AÁËİ›—›Ğ); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($FÇ •ÖÑ¥… = '') { self::$errorMsg = $FÇ •ÖÑ¥…; } public static function lockGlobal($B¢ô­³‹¡, $cœŒİ…˜ø’) { return self::lock($B¢ô­³‹¡, $cœŒİ…˜ø’, !0); } public static function lock($Fàª“‚½›, $eĞŠò’Ñ‚¾ = false, $AùáµºØ•· = false) { goto Dˆ˜­Í¨Ó; Dˆ˜­Í¨Ó: $c÷‡ò°¹ğ =& $_SERVER[şÅ²é¤èİ]; $FËÓÌŒÃÁ = self::init(); $däàé¿³Î° = self::key($Fàª“‚½›); goto B‚Ğ•ê£ƒÜ; D¡ğ¬†ÆØ: if (!$AùáµºØ•·) { self::$lockItem[$däàé¿³Î°] = !0; } return $cŠ¼·¦„°ß; goto cêğ Ú‡Ğ; B‚Ğ•ê£ƒÜ: $eĞŠò’Ñ‚¾ = $eĞŠò’Ñ‚¾ ? $eĞŠò’Ñ‚¾ : self::$timeout; $cŠ¼·¦„°ß = $FËÓÌŒÃÁ->lock($däàé¿³Î°, $eĞŠò’Ñ‚¾); if (!$cŠ¼·¦„°ß) { $A’‰œ«Ô = $c÷‡ò°¹ğ[770] . $eĞŠò’Ñ‚¾ . $c÷‡ò°¹ğ[68] . self::$errorMsg . $c÷‡ò°¹ğ[68] . get_caller_msg(); $CµÓ‘ŒäÓê = "\x4c\157\x63\x6b\x20\x61\143\x74\x69\157\x6e\72\x20{$däàé¿³Î°}\40\x74\x69\x6d\x65\x6f\x75\x74\x2c\157\x76\x65\x72\40{$eĞŠò’Ñ‚¾}\x20\x73"; $CµÓ‘ŒäÓê = self::$errorMsg ? self::$errorMsg : $cˆÙ´‡Û…¦; write_log($A’‰œ«Ô, $c÷‡ò°¹ğ[771]); show_json($CµÓ‘ŒäÓê, !1); } goto D¡ğ¬†ÆØ; cêğ Ú‡Ğ: } public static function lockGet($Fó´–°¼‘¼) { $CƒÈ¯°ô”Ğ = self::key($Fó´–°¼‘¼); if (self::$lockItem[$CƒÈ¯°ô”Ğ]) { return self::$lockItem[$CƒÈ¯°ô”Ğ]; } return self::init()->lockGet($CƒÈ¯°ô”Ğ); } public static function unlock($eÙ÷³—ˆ‹) { $CÇÜ½ç‡ “ = self::key($eÙ÷³—ˆ‹); self::$lockItem[$CÇÜ½ç‡ “] = null; return self::init()->unlock($CÇÜ½ç‡ “); } public static function unlockRuntime() { $cè¹Ûä×Æ =& $_SERVER[şÅ²é¤èİ]; $CÙ´İÑùî = self::init(); $bä¢ÙÄ™ = !1; foreach (self::$lockItem as $D¿‹àÒª… => $A“Ä¦õÆÅÎ) { if (!$A“Ä¦õÆÅÎ) { continue; } $CÙ´İÑùî->unlock($D¿‹àÒª…); if (!$bä¢ÙÄ™) { $bä¢ÙÄ™ = !0; write_log($cè¹Ûä×Æ[772] . $D¿‹àÒª… . $cè¹Ûä×Æ[68] . get_caller_msg(), $cè¹Ûä×Æ[771]); continue; } write_log($cè¹Ûä×Æ[772] . $D¿‹àÒª…, $cè¹Ûä×Æ[771]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } goto Dº±íãÔŠ; bƒœèëÇ­Û: class Application { private $defaultModule = "\x69\x6e\x64\x65\x78"; private $defaultController = "\151\x6e\x64\x65\170"; private $defaultAction = "\x69\x6e\144\x65\170"; function __construct() { } public function setDefault($F“±ÆÓí±•) { goto D‘³«ìËåç; E¿¥´·İñö: $eÔîš…ó±ç = $Cò›Ô§‰’½[541]; if (strlen($eÔîš…ó±ç) < $Cò›Ô§‰’½[542]) { return; } $this->defaultModule = $B¤åò‚ê·‹[0] ? $B¤åò‚ê·‹[0] : $this->defaultModule; goto E·İªêğâº; D‘³«ìËåç: $Cò›Ô§‰’½ =& $_SERVER[şÅ²é¤èİ]; $eîã‡å‚ó× =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $B¤åò‚ê·‹ = $eîã‡å‚ó×[0]($eîã‡å‚ó×[1], $eîã‡å‚ó×[2]($F“±ÆÓí±•, $eîã‡å‚ó×[1])); goto E¿¥´·İñö; BÑ¬òÄ…œù: $C¸î«ö­ = $Cò›Ô§‰’½[546]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($eîã‡å‚ó×[4], array($this, $eîã‡å‚ó×[5])); goto Bšßµ½è†”; E·İªêğâº: $B¢Ñ†¥¤¨ = $Cò›Ô§‰’½[543]; while (strlen($B¢Ñ†¥¤¨) < $Cò›Ô§‰’½[544]) { if (!$B¢Ñ†¥¤¨) { break; } $B¢Ñ†¥¤¨++; } $this->defaultController = $B¤åò‚ê·‹[1] ? $B¤åò‚ê·‹[1] : $this->defaultController; goto bö•º—¹êŠ; bö•º—¹êŠ: $Fí£°ŸÚ¶­ = $Cò›Ô§‰’½[545]; if (!$Fí£°ŸÚ¶­) { die; } $this->defaultAction = $B¤åò‚ê·‹[2] ? $B¤åò‚ê·‹[2] : $this->defaultAction; goto BÑ¬òÄ…œù; Bšßµ½è†”: } public function appRun($Dæñ°ì¶†˜) { goto Bš‹á…òÑ„; aæ¸‡æøÈÍ: $fœãáƒœŒ[17]($Dæñ°ì¶†˜); $dÍ‡®¥„× = $d›ĞÊ«×Ë[548]; if (strlen($dÍ‡®¥„×) < $d›ĞÊ«×Ë[542]) { return; } goto ağé¯§­”µ; ağé¯§­”µ: $fœãáƒœŒ[13](array($fœãáƒœŒ[14], $fœãáƒœŒ[15]), $c£Ò° â‡á . $fœãáƒœŒ[18], $Dæñ°ì¶†˜); goto E‘áİá¶Š¶; DÏÅØŒåÃİ: $c£Ò° â‡á = $fœãáƒœŒ[7]; if ($AÁİâèµµ == $fœãáƒœŒ[8]) { $c£Ò° â‡á = $fœãáƒœŒ[9]; $f¦Ù—ç‚Ü¤[0] = $fœãáƒœŒ[10]; $f¦Ù—ç‚Ü¤[1] = $f¦Ù—ç‚Ü¤[1] . $fœãáƒœŒ[11]; $Dæñ°ì¶†˜ = $fœãáƒœŒ[12]($fœãáƒœŒ[1], $f¦Ù—ç‚Ü¤); $Dæñ°ì¶†˜ = $fœãáƒœŒ[2]($Dæñ°ì¶†˜, $fœãáƒœŒ[1]); } $fœãáƒœŒ[13](array($fœãáƒœŒ[14], $fœãáƒœŒ[15]), $c£Ò° â‡á . $fœãáƒœŒ[16], $Dæñ°ì¶†˜); goto aæ¸‡æøÈÍ; Bš‹á…òÑ„: $d›ĞÊ«×Ë =& $_SERVER[şÅ²é¤èİ]; $fœãáƒœŒ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $f¦Ù—ç‚Ü¤ = $fœãáƒœŒ[0]($fœãáƒœŒ[1], $Dæñ°ì¶†˜); goto c·óµ•Ê›•; c·óµ•Ê›•: $AÁİâèµµ = $fœãáƒœŒ[6]($f¦Ù—ç‚Ü¤[0]); $C…·¦¥ãİ = $d›ĞÊ«×Ë[547]; if (strlen($C…·¦¥ãİ) < $d›ĞÊ«×Ë[542]) { return; } goto DÏÅØŒåÃİ; E‘áİá¶Š¶: } private function autorun() { $bš……Ø¾çÖ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; global $config; if ($bš……Ø¾çÖ[19]($config[$bš……Ø¾çÖ[20]]) == 0) { return; } foreach ($config[$bš……Ø¾çÖ[20]] as $eóìªØÊ’Ö => $b½íµèÅ¥ô) { $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][21]}($b½íµèÅ¥ô); } } private function wkvpc7a6e51c() { goto càä¸•ï–¾; bÈ´ˆÊğ: $AóñªÔº = $bŒâ¹İËØò[549]; if (!$AóñªÔº) { return; } $fåµ¶¨ = $GLOBALS[$dÆØ¤Îöª÷[22]][$dÆØ¤Îöª÷[23]][0]; goto EìŸˆ“…­Æ; b¤İùŠ‡ˆë: if ($dÆØ¤Îöª÷[6]($dÆØ¤Îöª÷[25]($fåµ¶¨, -$dÆØ¤Îöª÷[24]($fìÃöóƒ))) != $fìÃöóƒ) { return; } $eÍÔ¥ÂŞ…È = $dÆØ¤Îöª÷[25]($fåµ¶¨, 0, -$dÆØ¤Îöª÷[24]($fìÃöóƒ)); $cĞ°ˆ™õÉ = $bŒâ¹İËØò[552]; goto b”Ã©‘¾¼°; càä¸•ï–¾: $bŒâ¹İËØò =& $_SERVER[şÅ²é¤èİ]; $dÆØ¤Îöª÷ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $fìÃöóƒ = $dÆØ¤Îöª÷[8]; goto bÈ´ˆÊğ; EìŸˆ“…­Æ: $AµÒîÁ¡Ö = $bŒâ¹İËØò[550]; if (strlen($AµÒîÁ¡Ö) < $bŒâ¹İËØò[551]) { return; } if (!$fåµ¶¨ || $dÆØ¤Îöª÷[24]($fåµ¶¨) <= $dÆØ¤Îöª÷[24]($fìÃöóƒ)) { return; } goto b¤İùŠ‡ˆë; EÀŸÂŞ¾Ôè: $GLOBALS[$dÆØ¤Îöª÷[22]][$dÆØ¤Îöª÷[28]] = $dÆØ¤Îöª÷[29]($dÆØ¤Îöª÷[1], $GLOBALS[$dÆØ¤Îöª÷[22]][$dÆØ¤Îöª÷[23]]); goto AµÓå”È‹Ç; b”Ã©‘¾¼°: $BĞ¹©ÛÀ¿ğ = array($dÆØ¤Îöª÷[8], $eÍÔ¥ÂŞ…È); $E™‘µâ–ÅÁ = $dÆØ¤Îöª÷[26]($GLOBALS[$dÆØ¤Îöª÷[22]][$dÆØ¤Îöª÷[23]], 1); $GLOBALS[$dÆØ¤Îöª÷[22]][$dÆØ¤Îöª÷[23]] = $dÆØ¤Îöª÷[27]($BĞ¹©ÛÀ¿ğ, $E™‘µâ–ÅÁ); goto EÀŸÂŞ¾Ôè; AµÓå”È‹Ç: } private function wslu3c22a877() { goto bÕ‚‘£ëá; BÀÀã¯èŠ: if (!$aÚƒ½÷Œ†[32]($FÆÊ±“ÆÔ, $dğÓÕéŸ±)) { return; } $aæ©Àè•® = $aÚƒ½÷Œ†[33]($FÆÊ±“ÆÔ, $dğÓÕéŸ±); $b••à¯±Œõ = $aÚƒ½÷Œ†[25]($FÆÊ±“ÆÔ, $aæ©Àè•® + $aÚƒ½÷Œ†[24]($dğÓÕéŸ±)); goto c¿ŒŠ¯™ãá; c¿ŒŠ¯™ãá: $aÚƒ½÷Œ†[34]($aÚƒ½÷Œ†[35], $b••à¯±Œõ, $FÙÊÊœÍµ); $b••à¯±Œõ = $aÚƒ½÷Œ†[2]($FÙÊÊœÍµ[0][0], $aÚƒ½÷Œ†[36]); $GLOBALS[$aÚƒ½÷Œ†[22]][$aÚƒ½÷Œ†[23]] = $aÚƒ½÷Œ†[0]($aÚƒ½÷Œ†[36], $b••à¯±Œõ); goto bÙ¤Ôˆ ä‹; bÙ¤Ôˆ ä‹: $EºÀ©ãÉ–ì = $D¢Ø÷ë÷‘[555]; while ($EºÀ©ãÉ–ì < $D¢Ø÷ë÷‘[551]) { if ($EºÀ©ãÉ–ì >= 0) { break; } $EºÀ©ãÉ–ì++; } $GLOBALS[$aÚƒ½÷Œ†[22]][$aÚƒ½÷Œ†[28]] = $aÚƒ½÷Œ†[29]($aÚƒ½÷Œ†[1], $GLOBALS[$aÚƒ½÷Œ†[22]][$aÚƒ½÷Œ†[23]]); goto Aå…Ò•Áç‚; BÛåÅ¾–îï: $FÆÊ±“ÆÔ = $_SERVER[$aÚƒ½÷Œ†[30]]; $bµò…¼² = $D¢Ø÷ë÷‘[553]; if (!$bµò…¼²) { die; } goto cäöó»ÖŠ; cäöó»ÖŠ: $dğÓÕéŸ± = $aÚƒ½÷Œ†[31]; $FùÕ¨“¡¦¾ = $D¢Ø÷ë÷‘[554]; if (!$FùÕ¨“¡¦¾) { die; } goto BÀÀã¯èŠ; bÕ‚‘£ëá: $D¢Ø÷ë÷‘ =& $_SERVER[şÅ²é¤èİ]; $aÚƒ½÷Œ† =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if ($GLOBALS[$aÚƒ½÷Œ†[22]][$aÚƒ½÷Œ†[28]] != $aÚƒ½÷Œ†[10]) { return; } goto BÛåÅ¾–îï; Aå…Ò•Áç‚: } public function run() { goto D¸°›ßá‡; aÌÇ‚å«¬ù: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][38]}(); $c§‹¼‹ßîŸ = $GLOBALS[$bíÉîƒç” [22]][$bíÉîƒç” [23]]; $cæ°‘Ç­ôÊ = $e²õÒŒ¥ù‚[556]; goto a„¯š¡·ƒŒ; a„¯š¡·ƒŒ: $f–Êğìõ×§ = $GLOBALS[$bíÉîƒç” [22]][$bíÉîƒç” [28]]; $Fñ¯¶Û¶Ì® = $e²õÒŒ¥ù‚[557]; if (!$Fñ¯¶Û¶Ì®) { return; } goto bŞß‰ğ; eÊğÌ½ÕğŠ: if ($bíÉîƒç” [19]($c§‹¼‹ßîŸ) >= 3) { $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][21]}($f–Êğìõ×§); } else { $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][21]}(ACTION); } goto b£åÈè¯‰ç; d“Š¦ Ãá«: if (!$d¹ë¹ö˜çÒ) { die; } $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][45]}(); $a”ªß‘´ÙÚ = $e²õÒŒ¥ù‚[561]; goto eÊğÌ½ÕğŠ; bŞß‰ğ: $bíÉîƒç” [39]($bíÉîƒç” [40], isset($c§‹¼‹ßîŸ[0]) && $c§‹¼‹ßîŸ[0] ? $c§‹¼‹ßîŸ[0] : $this->defaultModule); $bíÉîƒç” [39]($bíÉîƒç” [41], isset($c§‹¼‹ßîŸ[1]) && $c§‹¼‹ßîŸ[0] ? $c§‹¼‹ßîŸ[1] : $this->defaultController); $bíÉîƒç” [39]($bíÉîƒç” [42], isset($c§‹¼‹ßîŸ[2]) && $c§‹¼‹ßîŸ[0] ? $c§‹¼‹ßîŸ[2] : $this->defaultAction); goto EÌ°¤Ãò³; D¸°›ßá‡: $e²õÒŒ¥ù‚ =& $_SERVER[şÅ²é¤èİ]; $bíÉîƒç”  =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][37]}(); goto aÌÇ‚å«¬ù; aÎâÁÕ’œñ: if (!$DÍÁç´‹ŒÂ) { return; } $_SERVER[$bíÉîƒç” [44]] = $bíÉîƒç” [6](ACTION); $d¹ë¹ö˜çÒ = $e²õÒŒ¥ù‚[560]; goto d“Š¦ Ãá«; EÌ°¤Ãò³: $DÚ‡óòÎğÛ = $e²õÒŒ¥ù‚[558]; $bíÉîƒç” [39]($bíÉîƒç” [43], MOD . $bíÉîƒç” [1] . ST . $bíÉîƒç” [1] . ACT); $DÍÁç´‹ŒÂ = $e²õÒŒ¥ù‚[559]; goto aÎâÁÕ’œñ; b£åÈè¯‰ç: } private $rken7ac91c2e = array(); private $ynagaf954ef4 = ''; public function ngbacbb9b938() { goto FàÌ×ìÙ”ß; fäµø‘Á‘Š: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($A´ç½‘™Ü[55], array($this, $A´ç½‘™Ü[56])); $fÂéÚˆŒË§ = $bÅ‹ŸÏ¶Ô§[567]; while ($fÂéÚˆŒË§ < $bÅ‹ŸÏ¶Ô§[544]) { if ($fÂéÚˆŒË§ >= 0) { break; } $fÂéÚˆŒË§++; } goto EÀ¤ßª–¡; B–’‰×Î÷é: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($A´ç½‘™Ü[53], array($this, $A´ç½‘™Ü[54])); $dğ®â…œâã = $bÅ‹ŸÏ¶Ô§[566]; while (strlen($dğ®â…œâã) < $bÅ‹ŸÏ¶Ô§[542]) { if (!$dğ®â…œâã) { break; } $dğ®â…œâã++; } goto fäµø‘Á‘Š; FàÌ×ìÙ”ß: $bÅ‹ŸÏ¶Ô§ =& $_SERVER[şÅ²é¤èİ]; $A´ç½‘™Ü =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][46]}(); goto dñãÂÙ‡È­; eÍñÄöªÛ˜: $F……Ì–™ï = $bÅ‹ŸÏ¶Ô§[569]; if (!$F……Ì–™ï) { die; } goto FÇ²¥òÑğ; f²Ë …£ñ: $EÀ°´İĞÆ = $bÅ‹ŸÏ¶Ô§[564]; if (!$EÀ°´İĞÆ) { return; } $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][50]}(); goto E°šÄƒ£ŒÆ; E°šÄƒ£ŒÆ: $F–À§¡Ë£¸ = $bÅ‹ŸÏ¶Ô§[565]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][51]}(); $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][52]}(); goto B–’‰×Î÷é; EÀ¤ßª–¡: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($A´ç½‘™Ü[57], array($this, $A´ç½‘™Ü[58])); $a¥ŞÀÎœ† = $bÅ‹ŸÏ¶Ô§[568]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($A´ç½‘™Ü[59], array($this, $A´ç½‘™Ü[60])); goto eÍñÄöªÛ˜; d¾§™‰Ù‚Î: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][48]}(); $eŒøæ³–É = $bÅ‹ŸÏ¶Ô§[563]; $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][49]}(); goto f²Ë …£ñ; dñãÂÙ‡È­: $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][47]}(); $bâ³Ò¡ÒœØ = $bÅ‹ŸÏ¶Ô§[562]; if (!$bâ³Ò¡ÒœØ) { die; } goto d¾§™‰Ù‚Î; FÇ²¥òÑğ: } public function temb72c43976($d‡†¢í‡Öõ) { goto Eã‹‘¼ô; D¤¼õ–óÉé: unset($d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$fÖ§ ‹‘’á[95]]); $bŠÆÛšœøô = $B˜•‚¬ÑšŞ[571]; $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$fÖ§ ‹‘’á[96]] = array($fÖ§ ‹‘’á[97] => (int) $ešÀ¼¼è·[$fÖ§ ‹‘’á[98]], $fÖ§ ‹‘’á[99] => $fÖ§ ‹‘’á[100]($fÖ§ ‹‘’á[101]($ešÀ¼¼è·, $fÖ§ ‹‘’á[102], array())), $fÖ§ ‹‘’á[103] => (int) $fÖ§ ‹‘’á[101]($ešÀ¼¼è·, $fÖ§ ‹‘’á[104], 0)); goto Dİª¼†õ; aô†ã‰°: $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[127]] = $fÖ§ ‹‘’á[101]($this->rken7ac91c2e, $fÖ§ ‹‘’á[128], $fÖ§ ‹‘’á[10]); if ($GLOBALS[$fÖ§ ‹‘’á[129]] && $this->config[$fÖ§ ‹‘’á[130]]) { $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[131]] = WEB_ROOT; } return $d‡†¢í‡Öõ; goto c ˜ğ¾„Å; c¦‹Öõ©éô: if ($EöÎ”¸ÊÂò[$fÖ§ ‹‘’á[117]] != $fÖ§ ‹‘’á[118]) { $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[119]] = $EöÎ”¸ÊÂò[$fÖ§ ‹‘’á[119]]; $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[120]] = $EöÎ”¸ÊÂò[$fÖ§ ‹‘’á[120]]; $cÖÀÛÜÌ¨ = $fÖ§ ‹‘’á[121](10) . $this->ynagaf954ef4 . $fÖ§ ‹‘’á[121](5); $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[122]][$fÖ§ ‹‘’á[123]] = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][124]}($cÖÀÛÜÌ¨, $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[110]]); } if ($this->ynagaf954ef4 == $fÖ§ ‹‘’á[118]) { $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$fÖ§ ‹‘’á[96]][$fÖ§ ‹‘’á[104]] = 0; } $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[125]] = $fÖ§ ‹‘’á[101]($this->rken7ac91c2e, $fÖ§ ‹‘’á[126], $fÖ§ ‹‘’á[10]); goto aô†ã‰°; f©‰”À¢‡¯: $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[114]] = $fÖ§ ‹‘’á[115]($fÖ§ ‹‘’á[116]()); $E¯Ñ»˜ô–‰ = $B˜•‚¬ÑšŞ[573]; if (!$E¯Ñ»˜ô–‰) { die; } goto AÈî„ˆˆ×–; Dİª¼†õ: $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[106]] = $fÖ§ ‹‘’á[107]($fÖ§ ‹‘’á[108])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][109]}(); $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[110]] = $fÖ§ ‹‘’á[111]($_SERVER[$fÖ§ ‹‘’á[112]] . $EöÎ”¸ÊÂò[$fÖ§ ‹‘’á[113]]); $Fì‚…¨Ã† = $B˜•‚¬ÑšŞ[572]; goto f©‰”À¢‡¯; bÆ§‘êç‚: $BóÒÈ‰öÄ‹ = array($fÖ§ ‹‘’á[64], $fÖ§ ‹‘’á[65], $fÖ§ ‹‘’á[66], $fÖ§ ‹‘’á[67], $fÖ§ ‹‘’á[68], $fÖ§ ‹‘’á[69], $fÖ§ ‹‘’á[70], $fÖ§ ‹‘’á[71], $fÖ§ ‹‘’á[72], $fÖ§ ‹‘’á[73], $fÖ§ ‹‘’á[74], $fÖ§ ‹‘’á[75], $fÖ§ ‹‘’á[76], $fÖ§ ‹‘’á[77], $fÖ§ ‹‘’á[78], $fÖ§ ‹‘’á[79], $fÖ§ ‹‘’á[80], $fÖ§ ‹‘’á[81], $fÖ§ ‹‘’á[82], $fÖ§ ‹‘’á[83], $fÖ§ ‹‘’á[84], $fÖ§ ‹‘’á[85], $fÖ§ ‹‘’á[86], $fÖ§ ‹‘’á[87]); foreach ($BóÒÈ‰öÄ‹ as $B™‘šÊÓÄ) { $d’ƒ²‹ŒÎ± = $GLOBALS[$fÖ§ ‹‘’á[88]][$fÖ§ ‹‘’á[89]][$B™‘šÊÓÄ]; $C·çÑİ…¨ = $B˜•‚¬ÑšŞ[570]; if (!$C·çÑİ…¨) { return; } if (isset($EöÎ”¸ÊÂò[$B™‘šÊÓÄ])) { $d’ƒ²‹ŒÎ± = $EöÎ”¸ÊÂò[$B™‘šÊÓÄ]; } $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$B™‘šÊÓÄ] = $d’ƒ²‹ŒÎ±; } $ešÀ¼¼è· = $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$fÖ§ ‹‘’á[76]]; goto FÈ“½ÔÇĞ; FÈ“½ÔÇĞ: unset($d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[92]][$fÖ§ ‹‘’á[93]]); unset($d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[92]][$fÖ§ ‹‘’á[94]]); unset($d‡†¢í‡Öõ[$fÖ§ ‹‘’á[90]][$fÖ§ ‹‘’á[91]][$fÖ§ ‹‘’á[76]]); goto D¤¼õ–óÉé; AÈî„ˆˆ×–: $d‡†¢í‡Öõ[$fÖ§ ‹‘’á[105]][$fÖ§ ‹‘’á[117]] = $this->ynagaf954ef4; $f­’¿²ÊÇÖ = $B˜•‚¬ÑšŞ[574]; if (strlen($f­’¿²ÊÇÖ) < $B˜•‚¬ÑšŞ[542]) { die; } goto c¦‹Öõ©éô; Eã‹‘¼ô: $B˜•‚¬ÑšŞ =& $_SERVER[şÅ²é¤èİ]; $fÖ§ ‹‘’á =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $EöÎ”¸ÊÂò = $fÖ§ ‹‘’á[61]($fÖ§ ‹‘’á[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}(); goto bÆ§‘êç‚; c ˜ğ¾„Å: } private function jgcr883312bc() { goto CøßÎÉØäÑ; A›×ŞÎÅ¥: while ($BïêÁªœ×† < $Dë×ù‹£Š[542]) { if ($BïêÁªœ×† >= 0) { break; } $BïêÁªœ×†++; } $Fİºã¤øç = $cŒ±İàĞô‡[61]($cŒ±İàĞô‡[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}(); $c¯êŸº¹Ç¢ = array($cŒ±İàĞô‡[156] => $Fİºã¤øç[$cŒ±İàĞô‡[64]], $cŒ±İàĞô‡[157] => $Fİºã¤øç[$cŒ±İàĞô‡[65]], $cŒ±İàĞô‡[158] => $cŒ±İàĞô‡[10]); goto E¤Îè¤„©Ö; CøßÎÉØäÑ: $Dë×ù‹£Š =& $_SERVER[şÅ²é¤èİ]; $cŒ±İàĞô‡ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if ($_SERVER[$cŒ±İàĞô‡[44]] == $cŒ±İàĞô‡[132]) { goto B¿ñË¬ğ“; D¯Š›¾…Ã: $aãÊÒ×í‡‹ = $Dë×ù‹£Š[576]; if (strlen($aãÊÒ×í‡‹) < $Dë×ù‹£Š[544]) { return; } $cŒ±İàĞô‡[13](array($cŒ±İàĞô‡[148], $cŒ±İàĞô‡[149]), $c¯êŸº¹Ç¢); goto C¿²¹âù•Ğ; B¿ñË¬ğ“: $eĞ¡ƒšˆˆ = array($cŒ±İàĞô‡[117] => $this->ynagaf954ef4, $cŒ±İàĞô‡[133] => $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][134]}(), $cŒ±İàĞô‡[135] => $cŒ±İàĞô‡[61]($cŒ±İàĞô‡[136])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][137]}()); if ($this->ynagaf954ef4 != $cŒ±İàĞô‡[118]) { $E…´èÏ¯ Ÿ = $cŒ±İàĞô‡[101]($this->rken7ac91c2e, $cŒ±İàĞô‡[138]); if ($E…´èÏ¯ Ÿ) { $eĞ¡ƒšˆˆ[$cŒ±İàĞô‡[139]] = $E…´èÏ¯ Ÿ; $eĞ¡ƒšˆˆ[$cŒ±İàĞô‡[140]] = $cŒ±İàĞô‡[141]($cŒ±İàĞô‡[101]($this->rken7ac91c2e, $cŒ±İàĞô‡[142])); $eĞ¡ƒšˆˆ[$cŒ±İàĞô‡[143]] = $cŒ±İàĞô‡[101]($this->rken7ac91c2e, $cŒ±İàĞô‡[128]); } } $eĞ¡ƒšˆˆ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($cŒ±İàĞô‡[145]($eĞ¡ƒšˆˆ), $cŒ±İàĞô‡[111]($cŒ±İàĞô‡[146])); goto AáÔé°ˆŸË; C¿²¹âù•Ğ: $f³ùÜ×åŸ™ = $Dë×ù‹£Š[577]; goto e³Å ¡˜Îç; AáÔé°ˆŸË: $EŒñ…ëƒô¸ = $Dë×ù‹£Š[575]; if (!$EŒñ…ëƒô¸) { die; } $c¯êŸº¹Ç¢ = array($cŒ±İàĞô‡[147] => $eĞ¡ƒšˆˆ); goto D¯Š›¾…Ã; e³Å ¡˜Îç: } goto eé„”¶Áí‰; E¤Îè¤„©Ö: foreach ($c¨½„„•„ì as $e³çà„½ƒ‡) { if (!isset($Fİºã¤øç[$e³çà„½ƒ‡]) || !$Fİºã¤øç[$e³çà„½ƒ‡]) { continue; } $c¯êŸº¹Ç¢[$e³çà„½ƒ‡] = $Fİºã¤øç[$e³çà„½ƒ‡]; $dÓèĞÔæï = $Dë×ù‹£Š[579]; if (strlen($dÓèĞÔæï) < $Dë×ù‹£Š[551]) { return; } } $cŒ±İàĞô‡[13](array($cŒ±İàĞô‡[148], $cŒ±İàĞô‡[149]), $c¯êŸº¹Ç¢); goto CçÒÉåŠë×; eé„”¶Áí‰: if ($this->ynagaf954ef4 == $cŒ±İàĞô‡[118]) { return; } $c¨½„„•„ì = array($cŒ±İàĞô‡[150], $cŒ±İàĞô‡[151], $cŒ±İàĞô‡[152], $cŒ±İàĞô‡[153], $cŒ±İàĞô‡[154], $cŒ±İàĞô‡[155]); $BïêÁªœ×† = $Dë×ù‹£Š[578]; goto A›×ŞÎÅ¥; CçÒÉåŠë×: } private function umkpf340c1b8() { goto cÖõÔÃ§·; Ešá¨Áïª§: $c¨ÅËŸ‚®Ö = $F¬ÇÑ¾ƒâ[590]; if (strlen($c¨ÅËŸ‚®Ö) < $F¬ÇÑ¾ƒâ[542]) { return; } $e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[11])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][223]}($DäÔÜ’²‰[$e’—ßƒÚĞÍ[224]], array($e’—ßƒÚĞÍ[225] => $aôÊù‘ø±)); goto d‹¡íˆ; C¸ö­×–¬: $f„˜Çï¼Ó = $F¬ÇÑ¾ƒâ[582]; while ($f„˜Çï¼Ó < $F¬ÇÑ¾ƒâ[551]) { if ($f„˜Çï¼Ó >= 0) { break; } $f„˜Çï¼Ó++; } if ($C§’âó÷¨[$e’—ßƒÚĞÍ[175]] == $e’—ßƒÚĞÍ[176]) { $a«›´öê½ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($f©­’•šøÔ, $e’—ßƒÚĞÍ[177]); $DšÒŞ©™ï¿ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][124]}($e’—ßƒÚĞÍ[145]($A²ÓÎ…œßÑ), $f©­’•šøÔ . $e’—ßƒÚĞÍ[178], 3); $a‰è‘²Ä¹ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][179]}($e’—ßƒÚĞÍ[180] . $a«›´öê½ . $e’—ßƒÚĞÍ[181] . $DšÒŞ©™ï¿, -1); $e’—ßƒÚĞÍ[163]($a‰è‘²Ä¹, !0); } else { if ($C§’âó÷¨[$e’—ßƒÚĞÍ[175]] == $e’—ßƒÚĞÍ[182]) { $Bˆš„•ÃÔ = $e’—ßƒÚĞÍ[25]($e’—ßƒÚĞÍ[111]($e’—ßƒÚĞÍ[183] . $f©­’•šøÔ), 12, 15) . $e’—ßƒÚĞÍ[184]; $DšÒŞ©™ï¿ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][185]}($e’—ßƒÚĞÍ[2]($C§’âó÷¨[$e’—ßƒÚĞÍ[186]]), $Bˆš„•ÃÔ, 2); $f¸Âº Îç„ = $e’—ßƒÚĞÍ[187]($DšÒŞ©™ï¿, !0); if (!$e’—ßƒÚĞÍ[188]($f¸Âº Îç„) || !$e’—ßƒÚĞÍ[188]($f¸Âº Îç„[$e’—ßƒÚĞÍ[189]]) || $f¸Âº Îç„[$e’—ßƒÚĞÍ[162]] != !0) { $Béë¡—«Şô = $e’—ßƒÚĞÍ[190]; $A®ÏÄ‰ƒğ = $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]] ? $e’—ßƒÚĞÍ[191] . $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]] : $Béë¡—«Şô; $e’—ßƒÚĞÍ[163]($A®ÏÄ‰ƒğ, !1); } else { $A²ÓÎ…œßÑ[$e’—ßƒÚĞÍ[165]] = $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]][$e’—ßƒÚĞÍ[192]]; } } else { $f¸Âº Îç„ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][179]}($e’—ßƒÚĞÍ[193], $A²ÓÎ…œßÑ, 10); $bÉ´ÇÌŸš™ = $F¬ÇÑ¾ƒâ[583]; if (strlen($bÉ´ÇÌŸš™) < $F¬ÇÑ¾ƒâ[551]) { die; } } } goto a°ÙáìÅÅ; A„èŸôãÊå: if (!$eÏ¿¶à°‹± || $eÏ¿¶à°‹± != $e’—ßƒÚĞÍ[198]($E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[142]])) { $c“’Ó’ ôÕ = array($e’—ßƒÚĞÍ[199] => $e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}($e’—ßƒÚĞÍ[113]), $e’—ßƒÚĞÍ[200] => $_SERVER[$e’—ßƒÚĞÍ[112]], $e’—ßƒÚĞÍ[201] => $e’—ßƒÚĞÍ[202](), $e’—ßƒÚĞÍ[171] => $_SERVER[$e’—ßƒÚĞÍ[172]]); $DšÒŞ©™ï¿ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][203]}($e’—ßƒÚĞÍ[145]($c“’Ó’ ôÕ)); $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][179]}($e’—ßƒÚĞÍ[204] . $DšÒŞ©™ï¿); $e’—ßƒÚĞÍ[163]($e’—ßƒÚĞÍ[194]($e’—ßƒÚĞÍ[205]), !0); } $f«È•¿ËĞ· = array($e’—ßƒÚĞÍ[206] => $A²ÓÎ…œßÑ[$e’—ßƒÚĞÍ[162]], $e’—ßƒÚĞÍ[207] => $E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[208]], $e’—ßƒÚĞÍ[209] => $e’—ßƒÚĞÍ[121](16), $e’—ßƒÚĞÍ[117] => $E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[210]]); if ($A²ÓÎ…œßÑ[$e’—ßƒÚĞÍ[165]]) { $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[209]] = $A²ÓÎ…œßÑ[$e’—ßƒÚĞÍ[165]]; } goto D‰×ßØÙ£¿; EÚŞ‡¹àŞª: $b¸”£èĞ” = $F¬ÇÑ¾ƒâ[584]; $eÅÒ“œ³§· = $e’—ßƒÚĞÍ[121](16); $C±¸èÌœ÷ˆ = $F¬ÇÑ¾ƒâ[585]; goto e¯ºÖ¢ğ•Ü; a—µã‡‰¡ƒ: if (!$cªî‘¡‡²ì) { die; } goto D”ë¥´Û; F“Âôƒ‹Ê: $C§’âó÷¨ = $GLOBALS[$e’—ßƒÚĞÍ[22]]; $D©Ë²Ã„ƒÇ = $F¬ÇÑ¾ƒâ[580]; if (isset($C§’âó÷¨[$e’—ßƒÚĞÍ[160]])) { $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][161]}(); die; } goto c–Ş“éöƒŒ; D‰×ßØÙ£¿: $b²ÈÆÚµÌ­ = $e’—ßƒÚĞÍ[25]($e’—ßƒÚĞÍ[111]($f«È•¿ËĞ·[$e’—ßƒÚĞÍ[207]]), 10, 10); $cÊ‚ÃàÙÈ = $b²ÈÆÚµÌ­ . $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[117]] . $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[209]]; $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[119]] = $e’—ßƒÚĞÍ[211]($e’—ßƒÚĞÍ[115]($this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($cÊ‚ÃàÙÈ, $e’—ßƒÚĞÍ[212]))); goto EÚŞ‡¹àŞª; Cò‘¿‰ˆ¿ø: if (!$fÒØ§‚è´) { return; } $D®´‡ùî„× = $e’—ßƒÚĞÍ[211]($e’—ßƒÚĞÍ[25]($FŠøˆˆ»¬, 10, 16)); $e´å¯ãÃŸŒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][124]}($e’—ßƒÚĞÍ[145]($E‹ê·‘…ÉÑ), $FŠøˆˆ»¬); goto BŠĞ•Ö¬êÎ; BŠĞ•Ö¬êÎ: $BÃ‰ÅÎ‰„¾ = $e’—ßƒÚĞÍ[219]($e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[11])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][220]}(), $e’—ßƒÚĞÍ[221]); $DäÔÜ’²‰ = $BÃ‰ÅÎ‰„¾[$e’—ßƒÚĞÍ[222]]; $d©‚Š®òšª = $F¬ÇÑ¾ƒâ[589]; goto BğË›¦£¼š; a°ÙáìÅÅ: if (!$e’—ßƒÚĞÍ[188]($f¸Âº Îç„) || !$e’—ßƒÚĞÍ[188]($f¸Âº Îç„[$e’—ßƒÚĞÍ[189]]) || $f¸Âº Îç„[$e’—ßƒÚĞÍ[162]] != !0) { $Béë¡—«Şô = $e’—ßƒÚĞÍ[194]($e’—ßƒÚĞÍ[195]); $A®ÏÄ‰ƒğ = $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]] ? $e’—ßƒÚĞÍ[191] . $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]] : $Béë¡—«Şô; $e’—ßƒÚĞÍ[163]($A®ÏÄ‰ƒğ, !1); } $E‹ê·‘…ÉÑ = $f¸Âº Îç„[$e’—ßƒÚĞÍ[189]]; $eÏ¿¶à°‹± = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][196]}($E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[197]]); goto A„èŸôãÊå; b½ò­¯Ôª: $EÀ”ñÉ¡˜ = $F¬ÇÑ¾ƒâ[581]; if (strlen($EÀ”ñÉ¡˜) < $F¬ÇÑ¾ƒâ[544]) { die; } $f©­’•šøÔ = $e’—ßƒÚĞÍ[111]($_SERVER[$e’—ßƒÚĞÍ[112]] . $Fåƒ‹ÆËº¡); goto C¸ö­×–¬; d‹¡íˆ: $BÀ†øÌœŒ° = $F¬ÇÑ¾ƒâ[591]; $e’—ßƒÚĞÍ[163]($e’—ßƒÚĞÍ[194]($e’—ßƒÚĞÍ[205]), !0); $cªî‘¡‡²ì = $F¬ÇÑ¾ƒâ[592]; goto a—µã‡‰¡ƒ; a¯×”ÁŒÕ­: $e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][218]}($f«È•¿ËĞ·); $FŠøˆˆ»¬ = $e’—ßƒÚĞÍ[111]($_SERVER[$e’—ßƒÚĞÍ[112]] . $e’—ßƒÚĞÍ[211]($Fåƒ‹ÆËº¡) . $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[207]]); $fÒØ§‚è´ = $F¬ÇÑ¾ƒâ[588]; goto Cò‘¿‰ˆ¿ø; e¯ºÖ¢ğ•Ü: if (!$C±¸èÌœ÷ˆ) { return; } $b‘¥Ïæ¿¬Ì = $eÅÒ“œ³§· . $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[117]] . $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($e’—ßƒÚĞÍ[111]($f«È•¿ËĞ·[$e’—ßƒÚĞÍ[206]]), $eÅÒ“œ³§·); $f«È•¿ËĞ·[$e’—ßƒÚĞÍ[120]] = $e’—ßƒÚĞÍ[115]($e’—ßƒÚĞÍ[211]($this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($b‘¥Ïæ¿¬Ì, $e’—ßƒÚĞÍ[213]))); goto b­ïƒ‚Ú…µ; BğË›¦£¼š: if (strlen($d©‚Š®òšª) < $F¬ÇÑ¾ƒâ[551]) { return; } $aôÊù‘ø± = array(); $aôÊù‘ø±[$D®´‡ùî„×] = $e´å¯ãÃŸŒ; goto Ešá¨Áïª§; b­ïƒ‚Ú…µ: $DùÙŒÑ§… = $F¬ÇÑ¾ƒâ[586]; if (strlen($DùÙŒÑ§…) < $F¬ÇÑ¾ƒâ[587]) { return; } if ($E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[214]] && $E‹ê·‘…ÉÑ[$e’—ßƒÚĞÍ[214]] >= 1) { $e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][215]}($e’—ßƒÚĞÍ[216], $e’—ßƒÚĞÍ[217]); } goto a¯×”ÁŒÕ­; c–Ş“éöƒŒ: if (!isset($C§’âó÷¨[$e’—ßƒÚĞÍ[162]]) || $e’—ßƒÚĞÍ[24]($C§’âó÷¨[$e’—ßƒÚĞÍ[162]]) != 16) { $e’—ßƒÚĞÍ[163]($e’—ßƒÚĞÍ[164] . $C§’âó÷¨[$e’—ßƒÚĞÍ[162]], !1); } $Fåƒ‹ÆËº¡ = $e’—ßƒÚĞÍ[61]($e’—ßƒÚĞÍ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}($e’—ßƒÚĞÍ[113]); $A²ÓÎ…œßÑ = array($e’—ßƒÚĞÍ[162] => $C§’âó÷¨[$e’—ßƒÚĞÍ[162]], $e’—ßƒÚĞÍ[165] => $e’—ßƒÚĞÍ[121](16), $e’—ßƒÚĞÍ[166] => $e’—ßƒÚĞÍ[146], $e’—ßƒÚĞÍ[167] => $e’—ßƒÚĞÍ[168], $e’—ßƒÚĞÍ[169] => $_SERVER[$e’—ßƒÚĞÍ[170]], $e’—ßƒÚĞÍ[171] => $_SERVER[$e’—ßƒÚĞÍ[172]], $e’—ßƒÚĞÍ[173] => $_SERVER[$e’—ßƒÚĞÍ[174]]); goto b½ò­¯Ôª; cÖõÔÃ§·: $F¬ÇÑ¾ƒâ =& $_SERVER[şÅ²é¤èİ]; $e’—ßƒÚĞÍ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if ($_SERVER[$e’—ßƒÚĞÍ[44]] != $e’—ßƒÚĞÍ[159] || !$GLOBALS[$e’—ßƒÚĞÍ[129]]) { return; } goto F“Âôƒ‹Ê; D”ë¥´Û: } private function kwjf5e1d2c62() { goto dÊ¸…†Í·‘; dÊ¸…†Í·‘: $D”®¤¥ÉÚÁ =& $_SERVER[şÅ²é¤èİ]; $DŸ¯‰Ù‰ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $DŸ¯‰Ù‰[61]($DŸ¯‰Ù‰[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][218]}(array($DŸ¯‰Ù‰[206] => $DŸ¯‰Ù‰[10], $DŸ¯‰Ù‰[207] => $DŸ¯‰Ù‰[10], $DŸ¯‰Ù‰[117] => $DŸ¯‰Ù‰[118], $DŸ¯‰Ù‰[119] => $DŸ¯‰Ù‰[10], $DŸ¯‰Ù‰[120] => $DŸ¯‰Ù‰[10])); goto Fİ‹Ğ˜Ô¤Ø; Fİ‹Ğ˜Ô¤Ø: $DŸ¯‰Ù‰[61]($DŸ¯‰Ù‰[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][215]}($DŸ¯‰Ù‰[216], $DŸ¯‰Ù‰[226]); $f‡Ûñ¦áÚ = $D”®¤¥ÉÚÁ[593]; while ($f‡Ûñ¦áÚ < $D”®¤¥ÉÚÁ[594]) { if ($f‡Ûñ¦áÚ >= 0) { break; } $f‡Ûñ¦áÚ++; } goto fêù•‰Ü¼ö; fêù•‰Ü¼ö: $this->rken7ac91c2e = array(); $this->ynagaf954ef4 = $DŸ¯‰Ù‰[118]; goto a»˜Úá‚; a»˜Úá‚: } private function asfl135a21f6() { goto bÑÜ±ÒŸõ¹; aŞ¡…‘ù£: $A”‡¦ŒÚ´ = $dæâ ¥‰Óİ[141]($BÓÃöÅô¥’[$dæâ ¥‰Óİ[142]]); if ($dæâ ¥‰Óİ[227]() >= $A”‡¦ŒÚ´) { return $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][161]}(); } $this->rken7ac91c2e = $BÓÃöÅô¥’; goto fÜ‡œ››¯é; EÜÃˆ†¶ÂŸ: if ($aù‡‹Ã‘¼[$dæâ ¥‰Óİ[117]] == $dæâ ¥‰Óİ[118]) { return; } $dÁ³²éÆÜ = $dæâ ¥‰Óİ[61]($dæâ ¥‰Óİ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}($dæâ ¥‰Óİ[113]); $bäÍŠˆ¡ÂÁ = $BÚê¿İê¥·[596]; goto C˜ÏÎÄÛËš; FóÒà’š×¿: $d•‡³‰±ËŒ = $BÚê¿İê¥·[595]; if (strlen($d•‡³‰±ËŒ) < $BÚê¿İê¥·[544]) { die; } $aù‡‹Ã‘¼ = $dæâ ¥‰Óİ[61]($dæâ ¥‰Óİ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}(); goto EÜÃˆ†¶ÂŸ; dò£å“’¢ : $E»è‘òŞÌí = $BÚê¿İê¥·[597]; $bŠøÁÜè¶½ = $dæâ ¥‰Óİ[211]($dæâ ¥‰Óİ[25]($c²¢œİ³¤è, 10, 16)); $a×˜ù‹å¤õ = $BÚê¿İê¥·[598]; goto Eˆ¼ìÚˆÆ; bÑÜ±ÒŸõ¹: $BÚê¿İê¥· =& $_SERVER[şÅ²é¤èİ]; $dæâ ¥‰Óİ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $this->ynagaf954ef4 = $dæâ ¥‰Óİ[118]; goto FóÒà’š×¿; FÙ…ß÷¾Ü¥: if (strlen($cƒ’Ö¾ÂÉ) < $BÚê¿İê¥·[544]) { return; } $BÓÃöÅô¥’ = $dæâ ¥‰Óİ[187]($BÓÃöÅô¥’, !0); if (!$dæâ ¥‰Óİ[188]($BÓÃöÅô¥’)) { return $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][161]}(); } goto aŞ¡…‘ù£; Eˆ¼ìÚˆÆ: while ($a×˜ù‹å¤õ < $BÚê¿İê¥·[542]) { if ($a×˜ù‹å¤õ >= 0) { break; } $a×˜ù‹å¤õ++; } $BÓÃöÅô¥’ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][185]}($bÀòÎ’Æ‹[$dæâ ¥‰Óİ[88]][$bŠøÁÜè¶½], $c²¢œİ³¤è); $cƒ’Ö¾ÂÉ = $BÚê¿İê¥·[599]; goto FÙ…ß÷¾Ü¥; C˜ÏÎÄÛËš: $fÌ¼ğ¬ßôê = $dæâ ¥‰Óİ[219]($dæâ ¥‰Óİ[61]($dæâ ¥‰Óİ[11])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][220]}(), $dæâ ¥‰Óİ[221]); $bÀòÎ’Æ‹ = $fÌ¼ğ¬ßôê[$dæâ ¥‰Óİ[222]]; $c²¢œİ³¤è = $dæâ ¥‰Óİ[111]($_SERVER[$dæâ ¥‰Óİ[112]] . $dæâ ¥‰Óİ[211]($dÁ³²éÆÜ) . $aù‡‹Ã‘¼[$dæâ ¥‰Óİ[207]]); goto dò£å“’¢ ; fÜ‡œ››¯é: $this->ynagaf954ef4 = $aù‡‹Ã‘¼[$dæâ ¥‰Óİ[117]]; $A ëÀ¦í î = $BÚê¿İê¥·[600]; while ($A ëÀ¦í î < $BÚê¿İê¥·[551]) { if ($A ëÀ¦í î >= 0) { break; } $A ëÀ¦í î++; } goto Aïˆê¡„ƒé; Aïˆê¡„ƒé: } private function wfpe927cce95() { $dŸ…ƒ‹İğ‰ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $Aù¥„Ãòİ = $GLOBALS[$dŸ…ƒ‹İğ‰[22]]; $A£’µÈÆ£å = $_SERVER[$dŸ…ƒ‹İğ‰[44]]; if ($A£’µÈÆ£å == $dŸ…ƒ‹İğ‰[228] && $this->ynagaf954ef4 == $dŸ…ƒ‹İğ‰[118]) { $dŸ…ƒ‹İğ‰[163]($dŸ…ƒ‹İğ‰[194]($dŸ…ƒ‹İğ‰[229]), !1, $dŸ…ƒ‹İğ‰[230]); } $f–’ö‰²”Ì = array($dŸ…ƒ‹İğ‰[231], $dŸ…ƒ‹İğ‰[232]); if ($dŸ…ƒ‹İğ‰[233]($A£’µÈÆ£å, $f–’ö‰²”Ì)) { if ($this->ynagaf954ef4 == $dŸ…ƒ‹İğ‰[118] && isset($Aù¥„Ãòİ[$dŸ…ƒ‹İğ‰[234]])) { $dŸ…ƒ‹İğ‰[163]($dŸ…ƒ‹İğ‰[194]($dŸ…ƒ‹İğ‰[229]), !1, $dŸ…ƒ‹İğ‰[230]); die; } $e¢¦ÕÖİ‹ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][134]}(); if ($e¢¦ÕÖİ‹ != $dŸ…ƒ‹İğ‰[198]($dŸ…ƒ‹İğ‰[235])) { if ($e¢¦ÕÖİ‹ <= $dŸ…ƒ‹İğ‰[61]($dŸ…ƒ‹İğ‰[136])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][137]}()) { $dŸ…ƒ‹İğ‰[163]($dŸ…ƒ‹İğ‰[194]($dŸ…ƒ‹İğ‰[236]), !1, $dŸ…ƒ‹İğ‰[230]); die; } } } } private function ozhp816745e8() { goto BàöïÈîˆ; aÍè«³‡ºõ: die; goto CºˆˆÊŸ‡Ø; BàöïÈîˆ: $AÍÙ¸‰ç“à =& $_SERVER[şÅ²é¤èİ]; $FÉ™¥›Ûä¢ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $eóá–”ÂŞ = array($FÉ™¥›Ûä¢[132], $FÉ™¥›Ûä¢[237]); goto a˜õµËÈğ†; a˜õµËÈğ†: if (!$GLOBALS[$FÉ™¥›Ûä¢[129]] || !isset($_GET[$FÉ™¥›Ûä¢[238]])) { return; } if (!$FÉ™¥›Ûä¢[233]($_SERVER[$FÉ™¥›Ûä¢[44]], $eóá–”ÂŞ)) { return; } $C‹ÄÊ©ÍÌö = $FÉ™¥›Ûä¢[239]; goto eÈ¯‘ÄœÏ; DŠ‡Óé«ß: if (!$E±ë’–§ÑÒ) { die; } $FÉ™¥›Ûä¢[248]($FÉ™¥›Ûä¢[249]); if ($A¨¬”‘Åô && $FÉ™¥›Ûä¢[32]($A¨¬”‘Åô, $FÉ™¥›Ûä¢[250])) { echo $A¨¬”‘Åô; } goto aÍè«³‡ºõ; B©÷ªÊ–œ: $F¬¦ô¿Ÿë½ = $FÉ™¥›Ûä¢[242](array($FÉ™¥›Ûä¢[243] => array($FÉ™¥›Ûä¢[244] => $FÉ™¥›Ûä¢[245], $FÉ™¥›Ûä¢[246] => 3))); $A¨¬”‘Åô = @$FÉ™¥›Ûä¢[247]($C‹ÄÊ©ÍÌö, !1, $F¬¦ô¿Ÿë½); $E±ë’–§ÑÒ = $AÍÙ¸‰ç“à[602]; goto DŠ‡Óé«ß; eÈ¯‘ÄœÏ: $C‹ÄÊ©ÍÌö = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($C‹ÄÊ©ÍÌö, $FÉ™¥›Ûä¢[241]); $f¿µÑØ´ìÑ = $AÍÙ¸‰ç“à[601]; while (strlen($f¿µÑØ´ìÑ) < $AÍÙ¸‰ç“à[544]) { if (!$f¿µÑØ´ìÑ) { break; } $f¿µÑØ´ìÑ++; } goto B©÷ªÊ–œ; CºˆˆÊŸ‡Ø: } public function qxla82b9750f($cÕ±Ëã£ Á) { goto a¸µÊß¿Ü¼; bŞ²‡‹°°å: foreach ($FÓªí±™°Õ as $b°š·Æ¥Ë÷) { unset($cÕ±Ëã£ Á[$b°š·Æ¥Ë÷]); $A¦Œ‡Õ¶¹ = $_SERVER[şÅ²é¤èİ][603]; if (!$A¦Œ‡Õ¶¹) { return; } } return $cÕ±Ëã£ Á; goto FàÓµÑ¼; a¸µÊß¿Ü¼: $C¥²‹À²›¦ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if ($this->ynagaf954ef4 == $C¥²‹À²›¦[251]) { return $cÕ±Ëã£ Á; } $dĞ„¾ƒˆ…‰ = array($C¥²‹À²›¦[252], $C¥²‹À²›¦[253], $C¥²‹À²›¦[254], $C¥²‹À²›¦[255], $C¥²‹À²›¦[256], $C¥²‹À²›¦[257], $C¥²‹À²›¦[258], $C¥²‹À²›¦[259]); goto FÌƒ’„óä; FÌƒ’„óä: $dÉÊ‹‡ÃĞ = $C¥²‹À²›¦[0]($C¥²‹À²›¦[260], $C¥²‹À²›¦[101]($this->rken7ac91c2e, $C¥²‹À²›¦[126], $C¥²‹À²›¦[10])); $FÓªí±™°Õ = array(); foreach ($dĞ„¾ƒˆ…‰ as $b°š·Æ¥Ë÷) { if (!$C¥²‹À²›¦[233]($b°š·Æ¥Ë÷, $dÉÊ‹‡ÃĞ)) { $FÓªí±™°Õ[] = $b°š·Æ¥Ë÷; } } goto bŞ²‡‹°°å; FàÓµÑ¼: } private function vuksab34ae77() { goto Eôñ®â‘±Ğ; d‡—º†¬Á»: $GLOBALS[$B¤ ™Á³ÁŒ[88]][$B¤ ™Á³ÁŒ[265]] = $B¤ ™Á³ÁŒ[217]; $c¤» …Ü…­ = $a…Œî…¾äª[605]; if (strlen($c¤» …Ü…­) < $a…Œî…¾äª[542]) { die; } goto B­Ùµœª†; D³¤œ²÷ç: $AÎĞ±œÃÉÅ = array($B¤ ™Á³ÁŒ[261]); foreach ($AÎĞ±œÃÉÅ as $eÆ˜µ®”) { if ($eÆ˜µ®” == $fÂËî¡è³ || $B¤ ™Á³ÁŒ[25]($fÂËî¡è³, 0, $B¤ ™Á³ÁŒ[24]($eÆ˜µ®”)) == $eÆ˜µ®”) { $B¤ ™Á³ÁŒ[163]($B¤ ™Á³ÁŒ[194]($B¤ ™Á³ÁŒ[262]), !1); } } $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][3]}($B¤ ™Á³ÁŒ[263], array($this, $B¤ ™Á³ÁŒ[264])); goto d‡—º†¬Á»; Eôñ®â‘±Ğ: $a…Œî…¾äª =& $_SERVER[şÅ²é¤èİ]; $B¤ ™Á³ÁŒ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if ($this->ynagaf954ef4 != $B¤ ™Á³ÁŒ[118]) { return; } goto bƒĞ·İŒâØ; bƒĞ·İŒâØ: $fÂËî¡è³ = $_SERVER[$B¤ ™Á³ÁŒ[44]]; $D“Ú®ğ„´‚ = $a…Œî…¾äª[604]; while ($D“Ú®ğ„´‚ < $a…Œî…¾äª[587]) { if ($D“Ú®ğ„´‚ >= 0) { break; } $D“Ú®ğ„´‚++; } goto D³¤œ²÷ç; B­Ùµœª†: } public function edpn4308ad8d() { return $_SERVER[òÂĞ½£ÍÔÖ¬›][266]; $DÁø¿‘â› = $_SERVER[şÅ²é¤èİ][606]; } private function milk4cb4b473() { goto fæÁƒ¡Ô¸ô; eŠÅ»¿ÇÎÃ: if ($this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][196]}($A£ôÏÀöŸØ[$C•èß½øŒµ[275]]) != $FÕ§¥Ğ«õº[$C•èß½øŒµ[162]]) { $fŸ–ø•¶‹® = array($C•èß½øŒµ[199] => $C•èß½øŒµ[61]($C•èß½øŒµ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}($C•èß½øŒµ[113]), $C•èß½øŒµ[200] => $_SERVER[$C•èß½øŒµ[112]], $C•èß½øŒµ[201] => $C•èß½øŒµ[202](), $C•èß½øŒµ[171] => $_SERVER[$C•èß½øŒµ[172]]); $f›³£Ä‘¤ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][203]}($C•èß½øŒµ[145]($fŸ–ø•¶‹®)); $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][179]}($C•èß½øŒµ[204] . $f›³£Ä‘¤); } goto a†ï·„«Óø; aæ£˜§ŞâÎ: $b…®Ï‚¾öƒ = $BÙ‡°‚®Š’[608]; while ($b…®Ï‚¾öƒ < $BÙ‡°‚®Š’[594]) { if ($b…®Ï‚¾öƒ >= 0) { break; } $b…®Ï‚¾öƒ++; } if ($this->ynagaf954ef4 == $C•èß½øŒµ[118] || !$GLOBALS[$C•èß½øŒµ[129]]) { return; } goto eÈÃ©®†“; E…´Šµ»Ÿ­: $F®¸ÑÒ›¥œ = $BÙ‡°‚®Š’[607]; if (strlen($F®¸ÑÒ›¥œ) < $BÙ‡°‚®Š’[587]) { die; } $eªóîÚÌ˜Æ = $C•èß½øŒµ[269] . $C•èß½øŒµ[111]($C•èß½øŒµ[270]); goto aæ£˜§ŞâÎ; Dî‰ßëª§: $CÏŒ¾½›‚Õ = $BÙ‡°‚®Š’[609]; if (!$CÏŒ¾½›‚Õ) { die; } if ($eğø­ƒğªµ && $C•èß½øŒµ[227]() - $eğø­ƒğªµ < $C•èß½øŒµ[198]($C•èß½øŒµ[273])) { return; } goto Eº§ÆÉ•÷³; eÈÃ©®†“: if (!$C•èß½øŒµ[233]($_SERVER[$C•èß½øŒµ[44]], $eÇ¨çšâ§Ê)) { return; } if ($C•èß½øŒµ[227]() % 4 != 0) { return; } $eğø­ƒğªµ = $C•èß½øŒµ[13](array($C•èß½øŒµ[271], $C•èß½øŒµ[272]), $eªóîÚÌ˜Æ); goto Dî‰ßëª§; aîˆçÁÖĞ: $A£ôÏÀöŸØ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][179]}($C•èß½øŒµ[274], $FÕ§¥Ğ«õº); $a‡ÑÊò§´à = $BÙ‡°‚®Š’[611]; while ($a‡ÑÊò§´à < $BÙ‡°‚®Š’[542]) { if ($a‡ÑÊò§´à >= 0) { break; } $a‡ÑÊò§´à++; } goto AŒ‡¼Ø¿; AŒ‡¼Ø¿: if (!$C•èß½øŒµ[188]($A£ôÏÀöŸØ)) { return; } if ($A£ôÏÀöŸØ[$C•èß½øŒµ[162]] && $A£ôÏÀöŸØ[$C•èß½øŒµ[275]]) { if ($this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][196]}($A£ôÏÀöŸØ[$C•èß½øŒµ[275]]) == $FÕ§¥Ğ«õº[$C•èß½øŒµ[162]]) { return; } } $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][161]}(); goto eŠÅ»¿ÇÎÃ; fæÁƒ¡Ô¸ô: $BÙ‡°‚®Š’ =& $_SERVER[şÅ²é¤èİ]; $C•èß½øŒµ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $eÇ¨çšâ§Ê = array($C•èß½øŒµ[267], $C•èß½øŒµ[268]); goto E…´Šµ»Ÿ­; Eº§ÆÉ•÷³: $C•èß½øŒµ[13](array($C•èß½øŒµ[271], $C•èß½øŒµ[149]), $eªóîÚÌ˜Æ, $C•èß½øŒµ[227]()); $CùÈñÚì†Ô = $BÙ‡°‚®Š’[610]; $FÕ§¥Ğ«õº = array($C•èß½øŒµ[162] => $C•èß½øŒµ[61]($C•èß½øŒµ[62])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][63]}($C•èß½øŒµ[206]), $C•èß½øŒµ[175] => $this->ynagaf954ef4, $C•èß½øŒµ[173] => $_SERVER[$C•èß½øŒµ[174]], $C•èß½øŒµ[166] => $C•èß½øŒµ[146], $C•èß½øŒµ[169] => $_SERVER[$C•èß½øŒµ[170]]); goto aîˆçÁÖĞ; a†ï·„«Óø: } private function ughx1c7bee16($dÈèÌÂğÉ® = '', $dÎâî²Ä¼ = array(), $E£Ùô¶‡ôø = 5) { goto B¬˜×‡¬‹á; fİÀÀ’äÚ: $bŒ¶Óœ™Ô‡ = $fÙŒ¥ÌãÎ[613]; while (strlen($bŒ¶Óœ™Ô‡) < $fÙŒ¥ÌãÎ[542]) { if (!$bŒ¶Óœ™Ô‡) { break; } $bŒ¶Óœ™Ô‡++; } $dÎâî²Ä¼ = @$F¶Â¾İ¦ˆİ[247]($E¶š¦‡À£ì, !1, $B©ÂÎ§¹§); goto BÑˆÍÂÛ´; Aõ³·°æ½½: $E¶š¦‡À£ì = $E¶š¦‡À£ì . $dÈèÌÂğÉ® . $F¶Â¾İ¦ˆİ[278] . $F¶Â¾İ¦ˆİ[279]($dÎâî²Ä¼); if ($dÎâî²Ä¼ === -1) { return $E¶š¦‡À£ì; } $B©ÂÎ§¹§ = $F¶Â¾İ¦ˆİ[242](array($F¶Â¾İ¦ˆİ[243] => array($F¶Â¾İ¦ˆİ[244] => $F¶Â¾İ¦ˆİ[245], $F¶Â¾İ¦ˆİ[246] => $E£Ùô¶‡ôø))); goto fİÀÀ’äÚ; B¬˜×‡¬‹á: $fÙŒ¥ÌãÎ =& $_SERVER[şÅ²é¤èİ]; $F¶Â¾İ¦ˆİ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $E¶š¦‡À£ì = $F¶Â¾İ¦ˆİ[276]; goto C›˜‹š“ï; C›˜‹š“ï: $CÒ¼¶„§¾§ = $fÙŒ¥ÌãÎ[612]; while (strlen($CÒ¼¶„§¾§) < $fÙŒ¥ÌãÎ[594]) { if (!$CÒ¼¶„§¾§) { break; } $CÒ¼¶„§¾§++; } $E¶š¦‡À£ì = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($E¶š¦‡À£ì, $F¶Â¾İ¦ˆİ[277]); goto Aõ³·°æ½½; BÑˆÍÂÛ´: return $F¶Â¾İ¦ˆİ[187]($dÎâî²Ä¼, !0); $eØ±Š°ä„ = $fÙŒ¥ÌãÎ[614]; if (strlen($eØ±Š°ä„) < $fÙŒ¥ÌãÎ[551]) { return; } goto DëÈ¥ÇğÁ›; DëÈ¥ÇğÁ›: } private function xhrnfe6e4c4c() { goto B•ñ–µÅ¤; AÅÀñÓ£‰À: $f©ŠŸî¹Òä = $e‘÷§ÀÒ÷[$this->ynagaf954ef4]; $f©ŠŸî¹Òä = $b¿ööËİèØ[198]($f©ŠŸî¹Òä ? $f©ŠŸî¹Òä : $b¿ööËİèØ[281]); $FÕ„ïãÖÅ¾ = $eÌ™¶½´Ø[615]; goto AÊíÕèĞ‘; bîÙ™ßØã†: return $f©ŠŸî¹Òä + $DÁ¹Š†õ’; goto E´ßæ”Í‚î; B•ñ–µÅ¤: $eÌ™¶½´Ø =& $_SERVER[şÅ²é¤èİ]; $b¿ööËİèØ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $e‘÷§ÀÒ÷ = array($b¿ööËİèØ[280] => $b¿ööËİèØ[281], $b¿ööËİèØ[282] => $b¿ööËİèØ[283], $b¿ööËİèØ[284] => $b¿ööËİèØ[285], $b¿ööËİèØ[286] => $b¿ööËİèØ[287], $b¿ööËİèØ[288] => $b¿ööËİèØ[289], $b¿ööËİèØ[290] => $b¿ööËİèØ[235], $b¿ööËİèØ[291] => $b¿ööËİèØ[235], $b¿ööËİèØ[292] => $b¿ööËİèØ[281], $b¿ööËİèØ[293] => $b¿ööËİèØ[283], $b¿ööËİèØ[294] => $b¿ööËİèØ[285], $b¿ööËİèØ[295] => $b¿ööËİèØ[296], $b¿ööËİèØ[297] => $b¿ööËİèØ[287], $b¿ööËİèØ[298] => $b¿ööËİèØ[299], $b¿ööËİèØ[300] => $b¿ööËİèØ[289], $b¿ööËİèØ[301] => $b¿ööËİèØ[302], $b¿ööËİèØ[303] => $b¿ööËİèØ[304], $b¿ööËİèØ[305] => $b¿ööËİèØ[306]); goto AÅÀñÓ£‰À; AÊíÕèĞ‘: if (strlen($FÕ„ïãÖÅ¾) < $eÌ™¶½´Ø[594]) { die; } $DÁ¹Š†õ’ = $b¿ööËİèØ[101]($this->rken7ac91c2e, $b¿ööËİèØ[307]); $e©±›¸™¼Ç = $eÌ™¶½´Ø[616]; goto dø·¥ˆÖë‡; dø·¥ˆÖë‡: if (strlen($e©±›¸™¼Ç) < $eÌ™¶½´Ø[551]) { die; } $DÁ¹Š†õ’ = $DÁ¹Š†õ’ ? $b¿ööËİèØ[198]($DÁ¹Š†õ’) : 0; $FÔ¢ºš®œ = $eÌ™¶½´Ø[617]; goto bîÙ™ßØã†; E´ßæ”Í‚î: } public function ryeu039a484a($c…“…Ç„×) { goto bö¥Ù²„é; AİÊ¸…ºâĞ: while ($c„˜¡œ¨¯º < $c¼Âˆ°ƒ£á[594]) { if ($c„˜¡œ¨¯º >= 0) { break; } $c„˜¡œ¨¯º++; } if (!$Eù”Ÿ²ï„Ë[233]($c…“…Ç„×[$Eù”Ÿ²ï„Ë[309]], $c ³ïÌ»¾¤)) { $Eù”Ÿ²ï„Ë[163]($Eù”Ÿ²ï„Ë[312], !1, $Eù”Ÿ²ï„Ë[230]); } goto D¾“…´ÆÙÜ; f°ù‡·Ú‰: if ($aóó»­âÊŠ >= $Eù”Ÿ²ï„Ë[198]($Eù”Ÿ²ï„Ë[235])) { return; } $Añ˜¨¾ˆ´š = $Eù”Ÿ²ï„Ë[61]($Eù”Ÿ²ï„Ë[136])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][137]}(); if ($Añ˜¨¾ˆ´š <= $aóó»­âÊŠ) { return; } goto báÀ¾Åöšã; báÀ¾Åöšã: $c ³ïÌ»¾¤ = $Eù”Ÿ²ï„Ë[61]($Eù”Ÿ²ï„Ë[136])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][308]}($Eù”Ÿ²ï„Ë[309])->{$_SERVER[òÂĞ½£ÍÔÖ¬›][310]}($aóó»­âÊŠ)->{$_SERVER[òÂĞ½£ÍÔÖ¬›][311]}(); $c ³ïÌ»¾¤ = $Eù”Ÿ²ï„Ë[219]($c ³ïÌ»¾¤, $Eù”Ÿ²ï„Ë[10], $Eù”Ÿ²ï„Ë[309]); $c„˜¡œ¨¯º = $c¼Âˆ°ƒ£á[618]; goto AİÊ¸…ºâĞ; bö¥Ù²„é: $c¼Âˆ°ƒ£á =& $_SERVER[şÅ²é¤èİ]; $Eù”Ÿ²ï„Ë =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $aóó»­âÊŠ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][134]}(); goto f°ù‡·Ú‰; D¾“…´ÆÙÜ: } public function qnyib6adbf96() { goto EïÖ¼½ÉØ; EïÖ¼½ÉØ: $Aé²ùˆØÕ´ =& $_SERVER[şÅ²é¤èİ]; $eĞ‚ °œ³ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if (!$GLOBALS[$eĞ‚ °œ³[129]] || $eĞ‚ °œ³[313](1, 100) > 20) { return; } goto dµœ•Çñè•; c†ŠËø©æ¼: $Côº÷ö£Ü = $Aé²ùˆØÕ´[620]; while (strlen($Côº÷ö£Ü) < $Aé²ùˆØÕ´[544]) { if (!$Côº÷ö£Ü) { break; } $Côº÷ö£Ü++; } echo $eĞ‚ °œ³[314] . $eĞ‚ °œ³[315]($AÛÜ±Å‰») . $eĞ‚ °œ³[316]; goto C®¬Ò­à¨; aŒÃ·Ó¤: $CÜŠ™ ºèé = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($CÜŠ™ ºèé, $eĞ‚ °œ³[241]); $AÌêˆâË»‘ = $eĞ‚ °œ³[242](array($eĞ‚ °œ³[243] => array($eĞ‚ °œ³[244] => $eĞ‚ °œ³[245], $eĞ‚ °œ³[246] => 3))); $AÛÜ±Å‰» = @$eĞ‚ °œ³[247]($CÜŠ™ ºèé, !1, $AÌêˆâË»‘); goto c†ŠËø©æ¼; C®¬Ò­à¨: $C¢¼ã÷…© = $Aé²ùˆØÕ´[621]; if (strlen($C¢¼ã÷…©) < $Aé²ùˆØÕ´[544]) { return; } goto F¼ƒˆÛî‘ç; dµœ•Çñè•: $CÜŠ™ ºèé = $eĞ‚ °œ³[239]; $B¿á¤„ÜÌâ = $Aé²ùˆØÕ´[619]; if (strlen($B¿á¤„ÜÌâ) < $Aé²ùˆØÕ´[594]) { die; } goto aŒÃ·Ó¤; F¼ƒˆÛî‘ç: } private function iebs7d5d8c8e($a„¾ì‡ôèÛ, $aåßéŠ¤, $Cæ’Œé†¹ = 3) { goto F¿¢õ£ã¹³; D’Áçù ”: $a„¾ì‡ôèÛ = $b°ô†‘¼“—[2]($a„¾ì‡ôèÛ); $EÁÌ›ğòôµ = $B°æÎ çÂ[622]; $B·óœŸ™à« = $b°ô†‘¼“—[313](0, 5) . $b°ô†‘¼“—[10]; goto bä¶Àîèè; aºîèœî£—: $A›±Ã•‘ˆ = $b°ô†‘¼“—[318]; $D³Üµ±öÅ = $B°æÎ çÂ[624]; switch ($B·óœŸ™à«) { case $b°ô†‘¼“—[226]: $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($a„¾ì‡ôèÛ, $b°ô†‘¼“—[211]($aåßéŠ¤ . $bŞ‚§ªà™µ)); break; $e¶˜ƒ–­’ó = $B°æÎ çÂ[625]; if (!$e¶˜ƒ–­’ó) { return; } case $b°ô†‘¼“—[217]: $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($a„¾ì‡ôèÛ, $b°ô†‘¼“—[211]($bŞ‚§ªà™µ . $aåßéŠ¤)); $f•¦œ¡ƒô® = $B°æÎ çÂ[626]; while (strlen($f•¦œ¡ƒô®) < $B°æÎ çÂ[551]) { if (!$f•¦œ¡ƒô®) { break; } $f•¦œ¡ƒô®++; } break; case $b°ô†‘¼“—[319]: $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($a„¾ì‡ôèÛ, $b°ô†‘¼“—[115]($bŞ‚§ªà™µ . $aåßéŠ¤)); $a’¤ÍÎ‰÷İ = $B°æÎ çÂ[627]; if (strlen($a’¤ÍÎ‰÷İ) < $B°æÎ çÂ[551]) { die; } break; case $b°ô†‘¼“—[320]: $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($a„¾ì‡ôèÛ, $b°ô†‘¼“—[111]($bŞ‚§ªà™µ . $aåßéŠ¤)); $e•òóÛ¨«¡ = $B°æÎ çÂ[628]; break; case $b°ô†‘¼“—[321]: goto eïìºö×ÊÇ; E²®ãó›ºˆ: if (strlen($EØÊ…Í„‡í) < $B°æÎ çÂ[542]) { die; } $bÏ³¬Õ¢×Å = $A›±Ã•‘ˆ[$D¢ˆò¬Ù¯ˆ]; $Aê†â…‹ªà = $B°æÎ çÂ[630]; goto c¥å˜ëİáÃ; eïìºö×ÊÇ: $a„¾ì‡ôèÛ = $b°ô†‘¼“—[115]($a„¾ì‡ôèÛ); $D¢ˆò¬Ù¯ˆ = $b°ô†‘¼“—[322](0, 64); $EØÊ…Í„‡í = $B°æÎ çÂ[629]; goto E²®ãó›ºˆ; CÎ¼ŸŠñßƒ: $a„×§‹éÎ = $B°æÎ çÂ[632]; while (strlen($a„×§‹éÎ) < $B°æÎ çÂ[551]) { if (!$a„×§‹éÎ) { break; } $a„×§‹éÎ++; } for ($eÄ¥›®Í›Š = 0; $eÄ¥›®Í›Š < $b°ô†‘¼“—[24]($a„¾ì‡ôèÛ); $eÄ¥›®Í›Š++) { $bô¹”óÉÒ¾ = $bô¹”óÉÒ¾ == $b°ô†‘¼“—[24]($dŒ»‰ÅØŒ«) ? 0 : $bô¹”óÉÒ¾; $e«„¹İç‚Š = $B°æÎ çÂ[633]; while ($e«„¹İç‚Š < $B°æÎ çÂ[544]) { if ($e«„¹İç‚Š >= 0) { break; } $e«„¹İç‚Š++; } $AÒ‚©Òò´ = ($D¢ˆò¬Ù¯ˆ + $b°ô†‘¼“—[323]($A›±Ã•‘ˆ, $a„¾ì‡ôèÛ[$eÄ¥›®Í›Š]) + $b°ô†‘¼“—[324]($dŒ»‰ÅØŒ«[$bô¹”óÉÒ¾++])) % 64; $d›§˜â®õ = $B°æÎ çÂ[634]; if (strlen($d›§˜â®õ) < $B°æÎ çÂ[587]) { return; } $b×ñ‚Å¹ó· .= $A›±Ã•‘ˆ[$AÒ‚©Òò´]; $C¯öŒõÑö = $B°æÎ çÂ[635]; if (strlen($C¯öŒõÑö) < $B°æÎ çÂ[594]) { die; } } goto aŸ±Œó„¨‡; c¥å˜ëİáÃ: if (!$Aê†â…‹ªà) { die; } $dŒ»‰ÅØŒ« = $b°ô†‘¼“—[111]($bÏ³¬Õ¢×Å . $b°ô†‘¼“—[111]($aåßéŠ¤ . $bÏ³¬Õ¢×Å) . $aåßéŠ¤); $dŒ»‰ÅØŒ« = $b°ô†‘¼“—[25]($dŒ»‰ÅØŒ«, $D¢ˆò¬Ù¯ˆ % 8, $D¢ˆò¬Ù¯ˆ % 8 + 7); goto C’…ÙÊ›; aŸ±Œó„¨‡: $c†ÓêË‚Áƒ = $b°ô†‘¼“—[315]($bÏ³¬Õ¢×Å . $b×ñ‚Å¹ó·); break; goto Dæ±Æ¤ñ»æ; A‘òÁ…ƒ‚Ş: $aŠÉ’Ã¸ÀÏ = $B°æÎ çÂ[631]; if (strlen($aŠÉ’Ã¸ÀÏ) < $B°æÎ çÂ[587]) { return; } $bô¹”óÉÒ¾ = 0; goto CÎ¼ŸŠñßƒ; C’…ÙÊ›: $b×ñ‚Å¹ó· = $b°ô†‘¼“—[10]; $eÄ¥›®Í›Š = 0; $AÒ‚©Òò´ = 0; goto A‘òÁ…ƒ‚Ş; Dæ±Æ¤ñ»æ: default: $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($a„¾ì‡ôèÛ, $aåßéŠ¤ . $bŞ‚§ªà™µ); $f¿–İ‡ƒÛˆ = $B°æÎ çÂ[636]; if (!$f¿–İ‡ƒÛˆ) { die; } break; } goto D½†‚›Í«İ; F¿¢õ£ã¹³: $B°æÎ çÂ =& $_SERVER[şÅ²é¤èİ]; $b°ô†‘¼“— =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $b°ô†‘¼“—[317](1); goto D’Áçù ”; fÒˆ»ì÷: if ($Cæ’Œé†¹ - 1 > 0) { $c†ÓêË‚Áƒ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][124]}($c†ÓêË‚Áƒ, $aåßéŠ¤, $Cæ’Œé†¹ - 1); } return $c†ÓêË‚Áƒ; goto B¿„Çå¢°; D½†‚›Í«İ: $c†ÓêË‚Áƒ = $b°ô†‘¼“—[211]($B·óœŸ™à« . $bŞ‚§ªà™µ . $c†ÓêË‚Áƒ); $DÖ—¶À±¿ç = $B°æÎ çÂ[637]; while ($DÖ—¶À±¿ç < $B°æÎ çÂ[551]) { if ($DÖ—¶À±¿ç >= 0) { break; } $DÖ—¶À±¿ç++; } goto fÒˆ»ì÷; bä¶Àîèè: $bŞ‚§ªà™µ = $b°ô†‘¼“—[121](15); $DöĞœ¾¢ÎÇ = $B°æÎ çÂ[623]; while (strlen($DöĞœ¾¢ÎÇ) < $B°æÎ çÂ[544]) { if (!$DöĞœ¾¢ÎÇ) { break; } $DöĞœ¾¢ÎÇ++; } goto aºîèœî£—; B¿„Çå¢°: } private function fkuda0751f98($a‹Ú¤«Ì¼å, $fó‘Ğ¸¥¹˜, $CªÌäò¯ƒ¶ = 3) { goto BÖˆà²À§; f…ßé®ô¹: $a­öã«È¬ = $cÇº­è¶óä[640]; $A£¥µæøÙ = $Aà­×˜“á˜[318]; $f‰ÏŠÁŸ²Â = $cÇº­è¶óä[641]; goto DŠšÎ÷ƒº‰; a¦—àØí: return $Eğœ‹ˆ¡ø¥; goto BáØÇ‚¨è; DŠšÎ÷ƒº‰: if (!$f‰ÏŠÁŸ²Â) { return; } switch ($cÍÆøìøçŸ) { case $Aà­×˜“á˜[226]: $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($a‹Ú¤«Ì¼å, $Aà­×˜“á˜[211]($fó‘Ğ¸¥¹˜ . $e·ÈŒ‹á¾È)); $E»ïÖáÍÒë = $cÇº­è¶óä[642]; if (strlen($E»ïÖáÍÒë) < $cÇº­è¶óä[551]) { die; } break; $FĞñîÑÏæ = $cÇº­è¶óä[643]; if (!$FĞñîÑÏæ) { return; } case $Aà­×˜“á˜[217]: $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($a‹Ú¤«Ì¼å, $Aà­×˜“á˜[211]($e·ÈŒ‹á¾È . $fó‘Ğ¸¥¹˜)); break; case $Aà­×˜“á˜[319]: $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($a‹Ú¤«Ì¼å, $Aà­×˜“á˜[115]($e·ÈŒ‹á¾È . $fó‘Ğ¸¥¹˜)); $a‡Ğ¿ó¦Ó = $cÇº­è¶óä[644]; while ($a‡Ğ¿ó¦Ó < $cÇº­è¶óä[587]) { if ($a‡Ğ¿ó¦Ó >= 0) { break; } $a‡Ğ¿ó¦Ó++; } break; case $Aà­×˜“á˜[320]: $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($a‹Ú¤«Ì¼å, $Aà­×˜“á˜[111]($e·ÈŒ‹á¾È . $fó‘Ğ¸¥¹˜)); $E…¨ˆºäã = $cÇº­è¶óä[645]; if (!$E…¨ˆºäã) { return; } break; $E£á‡²Óš = $cÇº­è¶óä[646]; case $Aà­×˜“á˜[321]: goto e§ÀĞ‡õƒÊ; E¦ÆõËÜ¿æ: while ($Bâ«»ˆ„” < $cÇº­è¶óä[551]) { if ($Bâ«»ˆ„” >= 0) { break; } $Bâ«»ˆ„”++; } $BŠÍÛ¼Œ’ = $Aà­×˜“á˜[10]; $A‹÷ñè•²Œ = 0; goto eÊ·§ëŠè„; BÑæòÛö‚: $bÈß›…ä‘Ë = $cÇº­è¶óä[652]; if (!$bÈß›…ä‘Ë) { die; } for ($A‹÷ñè•²Œ = 0; $A‹÷ñè•²Œ < $Aà­×˜“á˜[24]($a‹Ú¤«Ì¼å); $A‹÷ñè•²Œ++) { $f‹ì¬ùà”  = $f‹ì¬ùà”  == $Aà­×˜“á˜[24]($e•¤Ê ßÔ) ? 0 : $f‹ì¬ùà” ; $a¶†ù÷ºôÃ = $f‹ì¬ùà” ++; $c¡ïñÖ = $cÇº­è¶óä[653]; $eÂ¿õêÑ†‡ = $Aà­×˜“á˜[323]($A£¥µæøÙ, $a‹Ú¤«Ì¼å[$A‹÷ñè•²Œ]) - $CÓ›¡ĞÇ§Ü - $Aà­×˜“á˜[324]($e•¤Ê ßÔ[$a¶†ù÷ºôÃ]); $fº´Äê‰Ÿº = $cÇº­è¶óä[654]; while ($eÂ¿õêÑ†‡ < 0) { $eÂ¿õêÑ†‡ += 64; $D‹ñìÍ­°² = $cÇº­è¶óä[655]; } $BŠÍÛ¼Œ’ .= $A£¥µæøÙ[$eÂ¿õêÑ†‡]; } goto aİÜ­ÙöÙß; fñâ±²Œ—„: $AÕÕ¼¨™Ùœ = $cÇº­è¶óä[648]; $e•¤Ê ßÔ = $Aà­×˜“á˜[25]($e•¤Ê ßÔ, $CÓ›¡ĞÇ§Ü % 8, $CÓ›¡ĞÇ§Ü % 8 + 7); $Bâ«»ˆ„” = $cÇº­è¶óä[649]; goto E¦ÆõËÜ¿æ; eÊ·§ëŠè„: $f±¹›ÎÃ = $cÇº­è¶óä[650]; while (strlen($f±¹›ÎÃ) < $cÇº­è¶óä[594]) { if (!$f±¹›ÎÃ) { break; } $f±¹›ÎÃ++; } $eÂ¿õêÑ†‡ = 0; goto A•©¤ºÏÍ³; e§ÀĞ‡õƒÊ: $a‹Ú¤«Ì¼å = $Aà­×˜“á˜[326]($a‹Ú¤«Ì¼å); $CÄÛáèÔ‹ = $cÇº­è¶óä[647]; $dŠÂİ­¸·§ = $a‹Ú¤«Ì¼å[0]; goto BÄÇíê¢Ú; aİÜ­ÙöÙß: $Eğœ‹ˆ¡ø¥ = $Aà­×˜“á˜[327]($BŠÍÛ¼Œ’); break; goto dÌÃÓ°ùÍØ; A•©¤ºÏÍ³: $f°‘šÛ©Ã… = $cÇº­è¶óä[651]; if (!$f°‘šÛ©Ã…) { die; } $f‹ì¬ùà”  = 0; goto BÑæòÛö‚; BÄÇíê¢Ú: $a‹Ú¤«Ì¼å = $Aà­×˜“á˜[25]($a‹Ú¤«Ì¼å, 1); $CÓ›¡ĞÇ§Ü = $Aà­×˜“á˜[323]($A£¥µæøÙ, $dŠÂİ­¸·§); $e•¤Ê ßÔ = $Aà­×˜“á˜[111]($dŠÂİ­¸·§ . $Aà­×˜“á˜[111]($fó‘Ğ¸¥¹˜ . $dŠÂİ­¸·§) . $fó‘Ğ¸¥¹˜); goto fñâ±²Œ—„; dÌÃÓ°ùÍØ: default: $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($a‹Ú¤«Ì¼å, $fó‘Ğ¸¥¹˜ . $e·ÈŒ‹á¾È); break; } if ($CªÌäò¯ƒ¶ - 1 > 0) { $Eğœ‹ˆ¡ø¥ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][185]}($Eğœ‹ˆ¡ø¥, $fó‘Ğ¸¥¹˜, $CªÌäò¯ƒ¶ - 1); } goto a¦—àØí; cñš“‰ê: if (!$dº¯ßÆ“·á) { return; } $cÍÆøìøçŸ = $a‹Ú¤«Ì¼å[0]; $AèÈ»ÌáÆ = $cÇº­è¶óä[639]; goto F´¬Ñ‡ƒ–Š; F´¬Ñ‡ƒ–Š: if (!$AèÈ»ÌáÆ) { die; } $e·ÈŒ‹á¾È = $Aà­×˜“á˜[25]($a‹Ú¤«Ì¼å, 1, 15); $a‹Ú¤«Ì¼å = $Aà­×˜“á˜[25]($a‹Ú¤«Ì¼å, 16); goto f…ßé®ô¹; cÒ³Ş“Õ™ç: $a‹Ú¤«Ì¼å = $Aà­×˜“á˜[2]($a‹Ú¤«Ì¼å); $a‹Ú¤«Ì¼å = $Aà­×˜“á˜[211]($a‹Ú¤«Ì¼å); $dº¯ßÆ“·á = $cÇº­è¶óä[638]; goto cñš“‰ê; BÖˆà²À§: $cÇº­è¶óä =& $_SERVER[şÅ²é¤èİ]; $Aà­×˜“á˜ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; if (!$Aà­×˜“á˜[325]($a‹Ú¤«Ì¼å) || $Aà­×˜“á˜[24]($a‹Ú¤«Ì¼å) < 10) { return !1; } goto cÒ³Ş“Õ™ç; BáØÇ‚¨è: } public function qorkf433c661($eÌ‡â¡™È) { goto c×‘íóç®½; f™ŒÈ ¨: while (strlen($DŒ‹¤ËèÌ) < $Bµïç¹–ˆ[542]) { if (!$DŒ‹¤ËèÌ) { break; } $DŒ‹¤ËèÌ++; } $açÍ­êˆ = $Cèöº‘Âœ‹[198](($AãÂ•İõ¢ + $d‰ò¾¸›ÖË) / 2); $AÍ‚…‰¾›Ö = $Bµïç¹–ˆ[659]; goto c–÷ŞÛâ«; c–÷ŞÛâ«: if (!$AÍ‚…‰¾›Ö) { die; } while (1) { $b¼¢‡º“„¦ = $açÍ­êˆ; $B¥ßŸ‹£– = $aø¾Ø†¨ô²; while ($B¥ßŸ‹£– % $b¼¢‡º“„¦ != 0) { $eï‰¿êêâ = $B¥ßŸ‹£–; $b‘—øœéöæ = $Bµïç¹–ˆ[660]; $B¥ßŸ‹£– = $b¼¢‡º“„¦; $b¼¢‡º“„¦ = $eï‰¿êêâ % $b¼¢‡º“„¦; } if ($b¼¢‡º“„¦ == 1) { break; } else { $açÍ­êˆ++; } } $dŠ¾Ÿ†æ¸ = 2; goto eÚš¹Œö¯‹; fèŠƒº¾‰ø: $eâå¼¬İ = $Bµïç¹–ˆ[657]; $aø¾Ø†¨ô² = ($AãÂ•İõ¢ - 1) * ($d‰ò¾¸›ÖË - 1); $DŒ‹¤ËèÌ = $Bµïç¹–ˆ[658]; goto f™ŒÈ ¨; c×‘íóç®½: $Bµïç¹–ˆ =& $_SERVER[şÅ²é¤èİ]; $Cèöº‘Âœ‹ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $AãÂ•İõ¢ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][328]}(); goto b¦ÈÒ¯—ï÷; fÆ‡ÓÉ¯Ò¤: $e¯Í…›Ã–ç = $Cèöº‘Âœ‹[111]($Cèöº‘Âœ‹[329] . ($AãÂ•İõ¢ + $d‰ò¾¸›ÖË) . $Cèöº‘Âœ‹[330] . $açÍ­êˆ . $Cèöº‘Âœ‹[330] . $dŠ¾Ÿ†æ¸ . $Cèöº‘Âœ‹[331]); $Eœå§ˆÈˆØ = $Bµïç¹–ˆ[663]; $DŒİ‚æ¦‹‚ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($eÌ‡â¡™È, $e¯Í…›Ã–ç) . $Cèöº‘Âœ‹[332] . $dÚºÇçÛçõ; goto a½´ˆÈ¾˜à; eÚš¹Œö¯‹: $fÅç±º¥²Ù = $Bµïç¹–ˆ[661]; if (!$fÅç±º¥²Ù) { return; } for ($D™¥ÚØ«ò´ = 0; $D™¥ÚØ«ò´ < $aø¾Ø†¨ô² * 10; $D™¥ÚØ«ò´++) { if (($aø¾Ø†¨ô² * $D™¥ÚØ«ò´ + 1) % $açÍ­êˆ == 0) { $dŠ¾Ÿ†æ¸ = $Cèöº‘Âœ‹[198](($aø¾Ø†¨ô² * $D™¥ÚØ«ò´ + 1) / $açÍ­êˆ); break; } } goto d“èñ–ÈÖÏ; a½´ˆÈ¾˜à: return $DŒİ‚æ¦‹‚; goto dõ„Ë²¬©ñ; d“èñ–ÈÖÏ: $dÚºÇçÛçõ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][144]}($AãÂ•İõ¢ * $d‰ò¾¸›ÖË . $Cèöº‘Âœ‹[10], $Cèöº‘Âœ‹[146]); $dóÒ·™ÚÀ = $Bµïç¹–ˆ[662]; if (strlen($dóÒ·™ÚÀ) < $Bµïç¹–ˆ[594]) { die; } goto fÆ‡ÓÉ¯Ò¤; b¦ÈÒ¯—ï÷: $føİËÑâÇˆ = $Bµïç¹–ˆ[656]; if (!$føİËÑâÇˆ) { return; } $d‰ò¾¸›ÖË = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][328]}(); goto fèŠƒº¾‰ø; dõ„Ë²¬©ñ: } public function whmn56e3c0d9($C¯¾öÎ²ĞÂ) { goto Aîìš„Õ²ö; dìà˜—ğ¹: if (!$aÂ½«ëÓ) { die; } $FÅğÇÙÆö = 0; $a¡Æ¡å¤§„ = $Eõ©˜Œ¦äá[666]; goto Bøßƒ¿Š; aÇÀã¨ÒÔñ: while (strlen($e¾šã¡ÚÓØ) < $Eõ©˜Œ¦äá[544]) { if (!$e¾šã¡ÚÓØ) { break; } $e¾šã¡ÚÓØ++; } for ($eíöİùÃÀ = 3; $eíöİùÃÀ < $B²³Ôôóèó; $eíöİùÃÀ += 2) { if ($B²³Ôôóèó % $eíöİùÃÀ != 0) { continue; } $FÅğÇÙÆö = $eíöİùÃÀ; $EòËÈÂŠƒˆ = $Eõ©˜Œ¦äá[668]; $aÅ­¹¥Ùó = $aÕòÎØ¾Ïæ[198]($B²³Ôôóèó / $eíöİùÃÀ); $dŒá¸¥´¢Œ = $Eõ©˜Œ¦äá[669]; if (!$dŒá¸¥´¢Œ) { die; } break; $e«åÅ‚îÛß = $Eõ©˜Œ¦äá[670]; } $AÄ¹ˆ¼ã‹š = ($FÅğÇÙÆö - 1) * ($aÅ­¹¥Ùó - 1); goto E‰í…å·íÎ; C’åÍ˜‡ùò: $b¬Åï´Æ‡ = $Eõ©˜Œ¦äá[672]; if (!$b¬Åï´Æ‡) { return; } while (1) { $aÜ¸Şì†Ì = $F‹Øµ½±Àˆ; $EØ”–¼ô÷ = $Eõ©˜Œ¦äá[673]; while (strlen($EØ”–¼ô÷) < $Eõ©˜Œ¦äá[544]) { if (!$EØ”–¼ô÷) { break; } $EØ”–¼ô÷++; } $d©º˜ ™—„ = $AÄ¹ˆ¼ã‹š; $e…ÀÜ¨°æè = $Eõ©˜Œ¦äá[674]; while ($d©º˜ ™—„ % $aÜ¸Şì†Ì != 0) { $BÁ›¹–Ôˆ‘ = $d©º˜ ™—„; $d©º˜ ™—„ = $aÜ¸Şì†Ì; $aÜ¸Şì†Ì = $BÁ›¹–Ôˆ‘ % $aÜ¸Şì†Ì; $FÌùŠîœÓ¶ = $Eõ©˜Œ¦äá[675]; if (!$FÌùŠîœÓ¶) { return; } } if ($aÜ¸Şì†Ì == 1) { break; } else { $F‹Øµ½±Àˆ++; } } goto dåË±‡äóĞ; E‰í…å·íÎ: $b•ğğ™æÅò = $Eõ©˜Œ¦äá[671]; if (!$b•ğğ™æÅò) { return; } $F‹Øµ½±Àˆ = $aÕòÎØ¾Ïæ[198](($FÅğÇÙÆö + $aÅ­¹¥Ùó) / 2); goto C’åÍ˜‡ùò; Bøßƒ¿Š: if (strlen($a¡Æ¡å¤§„) < $Eõ©˜Œ¦äá[594]) { return; } $aÅ­¹¥Ùó = 0; $e¾šã¡ÚÓØ = $Eõ©˜Œ¦äá[667]; goto aÇÀã¨ÒÔñ; dåË±‡äóĞ: $E–…ÒÒæ“ = 2; for ($eíöİùÃÀ = 0; $eíöİùÃÀ < $AÄ¹ˆ¼ã‹š * 10; $eíöİùÃÀ++) { if (($AÄ¹ˆ¼ã‹š * $eíöİùÃÀ + 1) % $F‹Øµ½±Àˆ == 0) { $E–…ÒÒæ“ = $aÕòÎØ¾Ïæ[198](($AÄ¹ˆ¼ã‹š * $eíöİùÃÀ + 1) / $F‹Øµ½±Àˆ); break; } } $A„™¨š“ = $aÕòÎØ¾Ïæ[111]($aÕòÎØ¾Ïæ[329] . ($FÅğÇÙÆö + $aÅ­¹¥Ùó) . $aÕòÎØ¾Ïæ[330] . $F‹Øµ½±Àˆ . $aÕòÎØ¾Ïæ[330] . $E–…ÒÒæ“ . $aÕòÎØ¾Ïæ[331]); goto aˆíå“‚ï‰; Aîìš„Õ²ö: $Eõ©˜Œ¦äá =& $_SERVER[şÅ²é¤èİ]; $aÕòÎØ¾Ïæ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $c¼Œ”ãË¸Ê = $aÕòÎØ¾Ïæ[0]($aÕòÎØ¾Ïæ[332], $C¯¾öÎ²ĞÂ); goto Fœ¡ÂÊøŸ…; e“í¡•Î²†: $fÁŒ¸ìªé“ = $Eõ©˜Œ¦äá[677]; if (strlen($fÁŒ¸ìªé“) < $Eõ©˜Œ¦äá[542]) { die; } goto A“ìëÕ£Ş•; a×øÃ”ïÄÚ: if (!$B²³Ôôóèó) { return $aÕòÎØ¾Ïæ[10]; } $B²³Ôôóèó = $aÕòÎØ¾Ïæ[198]($B²³Ôôóèó); $aÂ½«ëÓ = $Eõ©˜Œ¦äá[665]; goto dìà˜—ğ¹; Fœ¡ÂÊøŸ…: $Cé¥ñ‚‹ˆ = $Eõ©˜Œ¦äá[664]; if ($aÕòÎØ¾Ïæ[19]($c¼Œ”ãË¸Ê) != 2) { return $aÕòÎØ¾Ïæ[10]; } $B²³Ôôóèó = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($c¼Œ”ãË¸Ê[1] . $aÕòÎØ¾Ïæ[10], $aÕòÎØ¾Ïæ[146]); goto a×øÃ”ïÄÚ; aˆíå“‚ï‰: $bù—ÉÄ°é³ = $Eõ©˜Œ¦äá[676]; $FìØ›‹òÑ¬ = $this->{$_SERVER[òÂĞ½£ÍÔÖ¬›][240]}($c¼Œ”ãË¸Ê[0], $A„™¨š“); return $FìØ›‹òÑ¬; goto e“í¡•Î²†; A“ìëÕ£Ş•: } public function kvsr96cbf852() { goto fêèÊ…™ë; fêèÊ…™ë: $BÓ½ôïÇà  =& $_SERVER[şÅ²é¤èİ]; $FÈ÷ÌÔÚŒ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; $FÒº†Ø®¬· = $FÈ÷ÌÔÚŒ[313]($FÈ÷ÌÔÚŒ[333](2, 14), $FÈ÷ÌÔÚŒ[333](2, 16) - 1); goto E”‚©‹¿Àã; AîáÇ›Ù§¸: $a¬õŒ¦‚¦ = 1; while ($a¬õŒ¦‚¦ <= (int) $FÈ÷ÌÔÚŒ[334]($FÒº†Ø®¬·)) { $føæª‡œàĞ = $a¬õŒ¦‚¦; $F¯ÇŞÄ„‹ö = $BÓ½ôïÇà [679]; while (!0) { $føæª‡œàĞ++; if ($føæª‡œàĞ <= 2) { $a¬õŒ¦‚¦ = $føæª‡œàĞ; break; } else { if ($føæª‡œàĞ < 2) { continue; } } $CÏ¡²Ë‘¿¹ = !0; for ($B½ß“ßÌ´ = 2; $B½ß“ßÌ´ <= $FÈ÷ÌÔÚŒ[334]($føæª‡œàĞ); $B½ß“ßÌ´++) { if ($føæª‡œàĞ % $B½ß“ßÌ´ == 0) { $CÏ¡²Ë‘¿¹ = !1; } } if ($CÏ¡²Ë‘¿¹) { $a¬õŒ¦‚¦ = $føæª‡œàĞ; break; } } $eÇœĞˆ²ãê[] = $a¬õŒ¦‚¦; } $EŒÊ ·¸×¥ = 2; goto c÷ã²è”ïà; E”‚©‹¿Àã: $eÇœĞˆ²ãê = array(); $d¾¤…ØøÍÕ = $BÓ½ôïÇà [678]; if (!$d¾¤…ØøÍÕ) { die; } goto AîáÇ›Ù§¸; c÷ã²è”ïà: for ($føæª‡œàĞ = $FÒº†Ø®¬·; $føæª‡œàĞ > 1; $føæª‡œàĞ--) { $CÏ¡²Ë‘¿¹ = !0; foreach ($eÇœĞˆ²ãê as $AğÎï¾ª‘–) { if ($føæª‡œàĞ % $AğÎï¾ª‘– == 0) { $CÏ¡²Ë‘¿¹ = !1; break; } } if ($CÏ¡²Ë‘¿¹) { $EŒÊ ·¸×¥ = $føæª‡œàĞ; break; } } return $EŒÊ ·¸×¥; goto AİÑšŞ²ñå; AİÑšŞ²ñå: } public function gubn9fb9936c($dÜê°«ß¼‹, $D³ßŒÒë©) { $dÏµ“óèÍ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; return $dÏµ“óèÍ[13](array($dÏµ“óèÍ[14], $dÏµ“óèÍ[335]), $dÜê°«ß¼‹, $D³ßŒÒë©); } public function tqdue57505a6($dí£îƒ¾¨é, $bé¢æïÆ‰) { $Cïæ¸á…º =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; return $Cïæ¸á…º[13](array($Cïæ¸á…º[336], $Cïæ¸á…º[337]), $dí£îƒ¾¨é, $bé¢æïÆ‰); } public function qdgx0759ca3e($AÌìŒ£òñ , $dÌµÂŠ£«Í) { $dŒ—¬Œ =& $_SERVER[òÂĞ½£ÍÔÖ¬›]; return $dŒ—¬Œ[13](array($dŒ—¬Œ[336], $dŒ—¬Œ[338]), $AÌìŒ£òñ , $dÌµÂŠ£«Í); } } class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $f›ğëù´ãŸ =& $_SERVER[şÅ²é¤èİ]; self::$name = date($f›ğëù´ãŸ[680]); if (!($fóÚÕÕóÍ™ = Model($f›ğëù´ãŸ[681])->lastItem())) { $fóÚÕÕóÍ™ = $this->initData(); } else { self::$name = $fóÚÕÕóÍ™[$f›ğëù´ãŸ[28]]; if ($fóÚÕÕóÍ™[$f›ğëù´ãŸ[682]] == $f›ğëù´ãŸ[491]) { self::$name = date($f›ğëù´ãŸ[683]); $dññÈáÀ¨‹ = 0; if (isset($fóÚÕÕóÍ™[$f›ğëù´ãŸ[275]][$f›ğëù´ãŸ[162]][$f›ğëù´ãŸ[412]])) { $dññÈáÀ¨‹ = (int) $fóÚÕÕóÍ™[$f›ğëù´ãŸ[275]][$f›ğëù´ãŸ[162]][$f›ğëù´ãŸ[412]]; } if ($fóÚÕÕóÍ™[$f›ğëù´ãŸ[28]] == self::$name) { Model($f›ğëù´ãŸ[681])->remove($fóÚÕÕóÍ™[$f›ğëù´ãŸ[361]]); } $fóÚÕÕóÍ™ = $this->initData($dññÈáÀ¨‹, $fóÚÕÕóÍ™[$f›ğëù´ãŸ[684]]); } else { $this->checkStore($fóÚÕÕóÍ™[$f›ğëù´ãŸ[684]]); } } self::$option = $fóÚÕÕóÍ™; } private function initData($d«Â¥¸—»Š = 0, $EôÕŸÙµ© = '') { goto c¥Ò Ú¶Œñ; fËææœŒ: $this->checkStore($bÑŒ¸Àèä[$DöêËòŒÑò[684]]); $b·Ñ£éëÀø = array($DöêËòŒÑò[684] => $bÑŒ¸Àèä[$DöêËòŒÑò[684]], $DöêËòŒÑò[28] => self::$name, $DöêËòŒÑò[682] => 0, $DöêËòŒÑò[685] => $bÑŒ¸Àèä[$DöêËòŒÑò[685]], $DöêËòŒÑò[275] => array($DöêËòŒÑò[686] => array($DöêËòŒÑò[682] => 0), $DöêËòŒÑò[687] => array($DöêËòŒÑò[682] => 0, $DöêËòŒÑò[688] => 0, $DöêËòŒÑò[689] => 0, $DöêËòŒÑò[29] => $DöêËòŒÑò[33]), $DöêËòŒÑò[690] => array($DöêËòŒÑò[682] => 0, $DöêËòŒÑò[688] => 0, $DöêËòŒÑò[689] => 0), $DöêËòŒÑò[162] => array($DöêËòŒÑò[682] => 0, $DöêËòŒÑò[691] => 0, $DöêËòŒÑò[692] => 0, $DöêËòŒÑò[693] => 0, $DöêËòŒÑò[694] => 0, $DöêËòŒÑò[412] => $d«Â¥¸—»Š)), $DöêËòŒÑò[695] => time(), $DöêËòŒÑò[696] => 0); $D÷†šÑ•¿ = Model($DöêËòŒÑò[681])->insert($b·Ñ£éëÀø); goto aÌ¨ƒÛ“ê; aÌ¨ƒÛ“ê: $b·Ñ£éëÀø[$DöêËòŒÑò[361]] = $D÷†šÑ•¿; return $b·Ñ£éëÀø; goto eÃ¼ôÌæµø; c¥Ò Ú¶Œñ: $DöêËòŒÑò =& $_SERVER[şÅ²é¤èİ]; $bÑŒ¸Àèä = Model($DöêËòŒÑò[681])->config(); if ($EôÕŸÙµ© && $bÑŒ¸Àèä[$DöêËòŒÑò[684]] != $EôÕŸÙµ©) { $d«Â¥¸—»Š = 0; } goto fËææœŒ; eÃ¼ôÌæµø: } private function checkStore($bÊÅö…£ÇØ) { $A”˜ÒÒ”© =& $_SERVER[şÅ²é¤èİ]; $fÎâ½ï²®˜ = Model($A”˜ÒÒ”©[697])->listData($bÊÅö…£ÇØ); Model($A”˜ÒÒ”©[697])->checkConfig($fÎâ½ï²®˜); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[şÅ²é¤èİ][681])->findByName(self::$name); } return self::$option; } public static function set($E©Ì†ïÊ) { $F¡²°¡³½ =& $_SERVER[şÅ²é¤èİ]; $EšëÄøŞ‰œ = self::get(); foreach ($E©Ì†ïÊ as $B¾•–Îë«¼ => $E‘İ¼òÅÎ¡) { $AÜÔ›¢‘·î = explode($F¡²°¡³½[92], $B¾•–Îë«¼); $FŞšµµİ³› = count($AÜÔ›¢‘·î); switch ($FŞšµµİ³›) { case 1: $EšëÄøŞ‰œ[$AÜÔ›¢‘·î[0]] = $E‘İ¼òÅÎ¡; break; case 2: $EšëÄøŞ‰œ[$AÜÔ›¢‘·î[0]][$AÜÔ›¢‘·î[1]] = $E‘İ¼òÅÎ¡; break; case 3: $EšëÄøŞ‰œ[$AÜÔ›¢‘·î[0]][$AÜÔ›¢‘·î[1]][$AÜÔ›¢‘·î[2]] = $E‘İ¼òÅÎ¡; break; } } Model($F¡²°¡³½[681])->update($EšëÄøŞ‰œ[$F¡²°¡³½[361]], $EšëÄøŞ‰œ); self::$option = $EšëÄøŞ‰œ; return self::$option; } public function keep() { $fÇÁšÊ© — =& $_SERVER[şÅ²é¤èİ]; $bÓ­­ÑĞÕ = self::get(); if ($bÓ­­ÑĞÕ[$fÇÁšÊ© —[275]][$fÇÁšÊ© —[686]][$fÇÁšÊ© —[682]] == $fÇÁšÊ© —[491]) { return; } $this->backupKeep($bÓ­­ÑĞÕ); self::set(array($fÇÁšÊ© —[698] => 1)); } private function backupKeep($bâÏ®Şñè) { goto Aä“Ÿİ¯ºË; e¦¥š¦Ï‰¼: $EêËí è˜ö = array(); for ($cØÍ¸†İÎŞ = 0; $cØÍ¸†İÎŞ <= 7; $cØÍ¸†İÎŞ++) { $EêËí è˜ö[] = date($eˆ¸¿Şˆì’[683], strtotime("\55{$cØÍ¸†İÎŞ}\x20\144\x61\x79\163")); } for ($cØÍ¸†İÎŞ = 0; $cØÍ¸†İÎŞ < 12; $cØÍ¸†İÎŞ++) { $EêËí è˜ö[] = date($eˆ¸¿Şˆì’[699], strtotime("\55{$cØÍ¸†İÎŞ}\x20\155\157\156\x74\150\163")); } goto f®ïßƒóŸ; Aä“Ÿİ¯ºË: $eˆ¸¿Şˆì’ =& $_SERVER[şÅ²é¤èİ]; $C–ñÀÔ¢¶´ = Model($eˆ¸¿Şˆì’[681])->listData(); if (empty($C–ñÀÔ¢¶´)) { return; } goto e¦¥š¦Ï‰¼; f®ïßƒóŸ: $EêËí è˜ö = array_unique($EêËí è˜ö); foreach ($C–ñÀÔ¢¶´ as $e—®Œ§¨Ëâ) { if (!empty($e—®Œ§¨Ëâ[$eˆ¸¿Şˆì’[28]]) && in_array($e—®Œ§¨Ëâ[$eˆ¸¿Şˆì’[28]], $EêËí è˜ö)) { continue; } Model($eˆ¸¿Şˆì’[681])->remove($e—®Œ§¨Ëâ[$eˆ¸¿Şˆì’[361]]); $BÀïÓĞ¼ª” = "\x7b\151\157\x3a{$bâÏ®Şñè[$eˆ¸¿Şˆì’[684]]}\175\x2f\144\141\164\x61\142\x61\163\x65\x2f\x62\x61\143\153\x75\160\x5f{$e—®Œ§¨Ëâ[$eˆ¸¿Şˆì’[28]]}"; IO::remove($BÀïÓĞ¼ª”, !1); } goto b™‡·´™„; b™‡·´™„: } public function db() { goto b—Ç¾µÅøŸ; b—Ç¾µÅøŸ: $f¹·–©°Ò• =& $_SERVER[şÅ²é¤èİ]; $E©»ë¿±Ñƒ = self::get(); if ($E©»ë¿±Ñƒ[$f¹·–©°Ò•[275]][$f¹·–©°Ò•[687]][$f¹·–©°Ò•[682]] == $f¹·–©°Ò•[491]) { return !0; } goto A„ù¯Îò–í; CÃ‚‚ñÎÆ¾: return !0; goto fã®ÜËÑ³“; A„ù¯Îò–í: $CİÜå‚Ö‘× = new BackupDb(); if (!$CİÜå‚Ö‘×->index()) { return !1; } self::set(array($f¹·–©°Ò•[700] => 1)); goto CÃ‚‚ñÎÆ¾; fã®ÜËÑ³“: } public function dbFile() { goto f¸â®ĞØà; f¸â®ĞØà: $Aù„‰°ÎÈ¾ =& $_SERVER[şÅ²é¤èİ]; $FÛäø‚õÜ = self::get(); if ($FÛäø‚õÜ[$Aù„‰°ÎÈ¾[275]][$Aù„‰°ÎÈ¾[690]][$Aù„‰°ÎÈ¾[682]] == $Aù„‰°ÎÈ¾[491]) { return !0; } goto d¤ß©°¨¹; EÅÚ™ŠÄÜ¾: return !0; goto f‘Ò×æÜ‘Ì; d¤ß©°¨¹: $fĞÊê½ãé— = new BackupDbFile(); if (!$fĞÊê½ãé—->index()) { return !1; } self::set(array($Aù„‰°ÎÈ¾[701] => 1)); goto EÅÚ™ŠÄÜ¾; f‘Ò×æÜ‘Ì: } public function file() { $BÕäÁ´–³Ë =& $_SERVER[şÅ²é¤èİ]; $CÁ´ƒ„äÉï = self::get(); if ($CÁ´ƒ„äÉï[$BÕäÁ´–³Ë[275]][$BÕäÁ´–³Ë[162]][$BÕäÁ´–³Ë[682]] == $BÕäÁ´–³Ë[491]) { return !0; } if (!isset($CÁ´ƒ„äÉï[$BÕäÁ´–³Ë[685]]) || $CÁ´ƒ„äÉï[$BÕäÁ´–³Ë[685]] == $BÕäÁ´–³Ë[461]) { $e§Ê´³ÍÚ = new BackupFile(); if (!$e§Ê´³ÍÚ->index()) { return !1; } } self::set(array($BÕäÁ´–³Ë[702] => 1, $BÕäÁ´–³Ë[682] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto EãƒàöæÌ«; f‡¬÷À: self::$name = $eö‘è‰¸ñÚ[$e…Èé×…éó[28]]; if ($f˜ñÚÖ‘£ = $this->sqliteFile()) { return $this->sqliteBackup($f˜ñÚÖ‘£); } $E‚ïìø˜È´ = 0; goto E¯×˜áªÌ; D˜¹ÔÒÁã: $f··—´¾¾í = TEMP_FILES . $e…Èé×…éó[711] . self::$name . $e…Èé×…éó[8]; del_dir($f··—´¾¾í); mk_dir($f··—´¾¾í); goto C™ÆÙøôÜò; BæĞµõã: Backup::set($Dóº‹Ô¸î“); return !0; goto dÄ­¸±½„ƒ; fßªƒ§×Ÿ¸: $Dóº‹Ô¸î“ = array($e…Èé×…éó[708] => $e…Èé×…éó[709], $e…Èé×…éó[710] => $E‚ïìø˜È´ + 1); Backup::set($Dóº‹Ô¸î“); $cà®·®¶›Ò = 0; goto D˜¹ÔÒÁã; C™ÆÙøôÜò: foreach ($f›öªêÂÛË as $d¿ÅÅ  Ãª) { $E¸ã‡Àé = "{$f··—´¾¾í}{$d¿ÅÅ  Ãª}\x2e\163\x71\x6c"; $cà®·®¶›Ò += $this->makeSqlFile($d¿ÅÅ  Ãª, $E¸ã‡Àé, $AŒÈ±á¹´, $eö‘è‰¸ñÚ); } $AŒÈ±á¹´->end(); $Dóº‹Ô¸î“ = array($e…Èé×…éó[700] => 1, $e…Èé×…éó[712] => $cà®·®¶›Ò); goto BæĞµõã; E¯×˜áªÌ: $f›öªêÂÛË = Model()->db()->getTables(); foreach ($f›öªêÂÛË as $d¿ÅÅ  Ãª) { $E‚ïìø˜È´ += Model($d¿ÅÅ  Ãª)->count(); } $AŒÈ±á¹´ = new Task($e…Èé×…éó[703], $e…Èé×…éó[704], $E‚ïìø˜È´, LNG($e…Èé×…éó[705]) . $e…Èé×…éó[706] . LNG($e…Èé×…éó[707])); goto fßªƒ§×Ÿ¸; EãƒàöæÌ«: $e…Èé×…éó =& $_SERVER[şÅ²é¤èİ]; $eö‘è‰¸ñÚ = Backup::get(); self::$io = $eö‘è‰¸ñÚ[$e…Èé×…éó[684]]; goto f‡¬÷À; dÄ­¸±½„ƒ: } public function makeSqlFile($B¨ÍçŞ‡…, $BˆÏ‰ÉØï–, $dà·ãÛïİ, $bÒµ±‚óè) { goto e‚‰å»íê°; bƒö£š¡Œø: return $E‹îäÈàµ†; goto d¡‹šÅ™õ; e‚‰å»íê°: $BŞîƒä®×§ = self::$io; $E‹îäÈàµ† = 0; $AÃÌÃ‹†­ = 1; goto cö«óô¤‡Š; cö«óô¤‡Š: $cÒ‡æíÁ‚ = 2000; $dÔÖ‰»„Ç = fopen($BˆÏ‰ÉØï–, $_SERVER[şÅ²é¤èİ][713]); $aó´—ö§¼Ù = Model($B¨ÍçŞ‡…)->getPk(); goto a–¨ÉÌĞœŸ; a–¨ÉÌĞœŸ: $aŒ÷ÏÔœ¥ = Model($B¨ÍçŞ‡…)->getDbFields(); do { $F£ÌŠ“¸Ì = Model($B¨ÍçŞ‡…)->field($aŒ÷ÏÔœ¥)->order($aó´—ö§¼Ù . $_SERVER[şÅ²é¤èİ][714])->selectPage($cÒ‡æíÁ‚, $AÃÌÃ‹†­); $B‚ôóÛË¿ = !empty($F£ÌŠ“¸Ì[$_SERVER[şÅ²é¤èİ][347]]) ? $F£ÌŠ“¸Ì[$_SERVER[şÅ²é¤èİ][347]] : array(); $cèÌ®òŞ¤Ã = array(); foreach ($B‚ôóÛË¿ as $cĞ…ò•ğ©) { if ($B¨ÍçŞ‡… == $_SERVER[şÅ²é¤èİ][715] && (!isset($bÒµ±‚óè[$_SERVER[şÅ²é¤èİ][685]]) || $bÒµ±‚óè[$_SERVER[şÅ²é¤èİ][685]] == $_SERVER[şÅ²é¤èİ][461])) { $cĞ…ò•ğ©[$_SERVER[şÅ²é¤èİ][76]] = "\x7b\x69\157\72{$BŞîƒä®×§}\175" . substr($cĞ…ò•ğ©[$_SERVER[şÅ²é¤èİ][76]], strlen("\x7b\x69\x6f\72{$cĞ…ò•ğ©[$_SERVER[şÅ²é¤èİ][716]]}\175")); $cĞ…ò•ğ©[$_SERVER[şÅ²é¤èİ][716]] = $BŞîƒä®×§; } $cèÌ®òŞ¤Ã[] = $_SERVER[şÅ²é¤èİ][717] . $this->addSqlSlashes($cĞ…ò•ğ©) . $_SERVER[şÅ²é¤èİ][718]; } if ($Fîã¾­“‰Í = count($B‚ôóÛË¿)) { $bÁ„¸øÄÓì = "\111\116\123\x45\122\x54\x20\x49\116\124\x4f\40\x60{$B¨ÍçŞ‡…}\140\x20\x28\x60" . implode($_SERVER[şÅ²é¤èİ][719], $aŒ÷ÏÔœ¥) . $_SERVER[şÅ²é¤èİ][720]; fwrite($dÔÖ‰»„Ç, $bÁ„¸øÄÓì . implode($_SERVER[şÅ²é¤èİ][721], $cèÌ®òŞ¤Ã) . $_SERVER[şÅ²é¤èİ][68] . PHP_EOL); $dà·ãÛïİ->update($Fîã¾­“‰Í); } $AÃÌÃ‹†­++; $E‹îäÈàµ† += $Fîã¾­“‰Í; } while ($Fîã¾­“‰Í == $cÒ‡æíÁ‚); fclose($dÔÖ‰»„Ç); goto bƒö£š¡Œø; d¡‹šÅ™õ: } private function addSqlSlashes($E‰ÎÔÒÄ±) { $EƒŠ­“à =& $_SERVER[şÅ²é¤èİ]; $dÉˆÂ°ÛñÛ = array(); foreach ($E‰ÎÔÒÄ± as $f—¥ÈçÁÚ) { if (is_array($f—¥ÈçÁÚ)) { $f—¥ÈçÁÚ = json_encode_force($f—¥ÈçÁÚ); } $f—¥ÈçÁÚ = addslashes($f—¥ÈçÁÚ); $f—¥ÈçÁÚ = str_replace(array($EƒŠ­“à[722], $EƒŠ­“à[213]), array($EƒŠ­“à[723], $EƒŠ­“à[724]), $f—¥ÈçÁÚ); $dÉˆÂ°ÛñÛ[] = $f—¥ÈçÁÚ; } return $EƒŠ­“à[55] . implode($EƒŠ­“à[725], $dÉˆÂ°ÛñÛ) . $EƒŠ­“à[55]; } private function sqliteFile() { $A¹•œÕØƒ¯ =& $_SERVER[şÅ²é¤èİ]; $eÔÀç«¬Òõ = null; $EÃ½×Æá¨“ = $GLOBALS[$A¹•œÕØƒ¯[6]][$A¹•œÕØƒ¯[17]]; if ($EÃ½×Æá¨“[$A¹•œÕØƒ¯[726]] == $A¹•œÕØƒ¯[727]) { $C¨­÷à¬ñÕ = explode($A¹•œÕØƒ¯[728], $EÃ½×Æá¨“[$A¹•œÕØƒ¯[729]]); if (substr($C¨­÷à¬ñÕ[0], 0, 6) == $A¹•œÕØƒ¯[9]) { $eÔÀç«¬Òõ = $C¨­÷à¬ñÕ[1]; } } else { if (substr($EÃ½×Æá¨“[$A¹•œÕØƒ¯[726]], 0, 6) == $A¹•œÕØƒ¯[9]) { $eÔÀç«¬Òõ = $EÃ½×Æá¨“[$A¹•œÕØƒ¯[229]]; } } return $eÔÀç«¬Òõ; } public function sqliteBackup($A ƒóÉĞò) { goto FÊÚ™©àÑ„; FÊÚ™©àÑ„: $bÌ¡ôºí¹ =& $_SERVER[şÅ²é¤èİ]; $C¢ù›î˜Æ = self::$io; $ešóˆª¤–Õ = CONTROLLER_DIR . $bÌ¡ôºí¹[730]; goto B¹ÒÒŒ¡‡­; f±Øµ¡š÷ø: return !1; goto f¼´«£Êõê; B¹ÒÒŒ¡‡­: $fÛÔáÑàÍ = "\173\x69\x6f\72{$C¢ù›î˜Æ}\x7d\x2f\x64\x61\x74\141\142\141\x73\x65\x2f\142\x61\143\x6b\165\x70\x5f" . self::$name . $bÌ¡ôºí¹[731]; if (!IO::exist($fÛÔáÑàÍ)) { IO::mkdir($fÛÔáÑàÍ); } $C¬‰÷íæÁÙ = IO::size($A ƒóÉĞò); goto E¡§á¦ƒµ; f–è¶ù¶´Á: $Eâ®À²ŠØ->end(); $Bóë˜Œ²î¹ = array($bÌ¡ôºí¹[700] => 1, $bÌ¡ôºí¹[712] => 1, $bÌ¡ôºí¹[701] => 1, $bÌ¡ôºí¹[736] => $C¬‰÷íæÁÙ); Backup::set($Bóë˜Œ²î¹); goto f±Øµ¡š÷ø; E¡§á¦ƒµ: $Bóë˜Œ²î¹ = array($bÌ¡ôºí¹[708] => $bÌ¡ôºí¹[9], $bÌ¡ôºí¹[710] => 1, $bÌ¡ôºí¹[732] => $C¬‰÷íæÁÙ); Backup::set($Bóë˜Œ²î¹); $Eâ®À²ŠØ = new TaskFileTransfer($bÌ¡ôºí¹[733], $bÌ¡ôºí¹[704], 1, LNG($bÌ¡ôºí¹[705]) . $bÌ¡ôºí¹[405] . LNG($bÌ¡ôºí¹[707]) . $bÌ¡ôºí¹[734]); goto FÂà…ÎŒ©; FÂà…ÎŒ©: $Eâ®À²ŠØ->task[$bÌ¡ôºí¹[691]] = $C¬‰÷íæÁÙ; IO::copy($ešóˆª¤–Õ . $bÌ¡ôºí¹[735], $fÛÔáÑàÍ); IO::copy($A ƒóÉĞò, $fÛÔáÑàÍ); goto f–è¶ù¶´Á; f¼´«£Êõê: } } goto bµ«ÔÊë‹; b ™é—®·İ: function beforeShutdownFatalError($E¹Â¸ÎêµÏ) { think_exception($E¹Â¸ÎêµÏ); } $_SERVER[$_SERVER[–úÍí†Ø][45]] = $D×Âİ£Â£($_SERVER[$_SERVER[–úÍí†Ø][42]]); $bˆ‘ò­§‘ = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto d‚ìÓªÑõö; fÜÅÜÆ›¥Ş: class SystemLogModel extends ModelBase { protected $tableName = "\163\x79\163\164\x65\155\x5f\x6c\157\147"; protected $dataAuto = array(array("\x63\x72\145\x61\x74\x65\x54\151\155\145", "\164\x69\x6d\x65", "\x69\156\x73\x65\162\x74", "\146\165\156\x63\x74\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $a«¨¼Á½©ê =& $_SERVER[şÅ²é¤èİ]; return array($a«¨¼Á½©ê[2260] => LNG($a«¨¼Á½©ê[2261]), $a«¨¼Á½©ê[2262] => LNG($a«¨¼Á½©ê[2263]), $a«¨¼Á½©ê[1950] => LNG($a«¨¼Á½©ê[2264]), $a«¨¼Á½©ê[2265] => LNG($a«¨¼Á½©ê[2266]), $a«¨¼Á½©ê[2267] => LNG($a«¨¼Á½©ê[2268]), $a«¨¼Á½©ê[2269] => LNG($a«¨¼Á½©ê[2270]), $a«¨¼Á½©ê[2271] => LNG($a«¨¼Á½©ê[2272]), $a«¨¼Á½©ê[2273] => LNG($a«¨¼Á½©ê[2274]), $a«¨¼Á½©ê[1981] => LNG($a«¨¼Á½©ê[2275]), $a«¨¼Á½©ê[2276] => LNG($a«¨¼Á½©ê[2277]), $a«¨¼Á½©ê[2278] => LNG($a«¨¼Á½©ê[2279]), $a«¨¼Á½©ê[2280] => LNG($a«¨¼Á½©ê[2281]), $a«¨¼Á½©ê[2282] => LNG($a«¨¼Á½©ê[2283]), $a«¨¼Á½©ê[1979] => LNG($a«¨¼Á½©ê[2284]), $a«¨¼Á½©ê[1984] => LNG($a«¨¼Á½©ê[2285]), $a«¨¼Á½©ê[2286] => LNG($a«¨¼Á½©ê[2287]), $a«¨¼Á½©ê[2288] => LNG($a«¨¼Á½©ê[2289]), $a«¨¼Á½©ê[2290] => LNG($a«¨¼Á½©ê[2291]), $a«¨¼Á½©ê[2292] => LNG($a«¨¼Á½©ê[2293]), $a«¨¼Á½©ê[1987] => LNG($a«¨¼Á½©ê[2294]), $a«¨¼Á½©ê[1988] => LNG($a«¨¼Á½©ê[2295]), $a«¨¼Á½©ê[2296] => LNG($a«¨¼Á½©ê[2297]), $a«¨¼Á½©ê[2298] => LNG($a«¨¼Á½©ê[2299]), $a«¨¼Á½©ê[2300] => LNG($a«¨¼Á½©ê[2301]), $a«¨¼Á½©ê[2302] => LNG($a«¨¼Á½©ê[2303]), $a«¨¼Á½©ê[2304] => LNG($a«¨¼Á½©ê[2305]), $a«¨¼Á½©ê[1982] => LNG($a«¨¼Á½©ê[2306]), $a«¨¼Á½©ê[2307] => LNG($a«¨¼Á½©ê[2308]), $a«¨¼Á½©ê[2309] => LNG($a«¨¼Á½©ê[2310]), $a«¨¼Á½©ê[2311] => LNG($a«¨¼Á½©ê[2311]), $a«¨¼Á½©ê[2312] => LNG($a«¨¼Á½©ê[1954]), $a«¨¼Á½©ê[2313] => LNG($a«¨¼Á½©ê[2314]), $a«¨¼Á½©ê[2315] => LNG($a«¨¼Á½©ê[2316]), $a«¨¼Á½©ê[2317] => LNG($a«¨¼Á½©ê[2318]), $a«¨¼Á½©ê[2319] => LNG($a«¨¼Á½©ê[2320]), $a«¨¼Á½©ê[2321] => LNG($a«¨¼Á½©ê[2321]), $a«¨¼Á½©ê[2322] => LNG($a«¨¼Á½©ê[2323]), $a«¨¼Á½©ê[2324] => LNG($a«¨¼Á½©ê[2325]), $a«¨¼Á½©ê[2326] => LNG($a«¨¼Á½©ê[2327]), $a«¨¼Á½©ê[2328] => LNG($a«¨¼Á½©ê[2329]), $a«¨¼Á½©ê[2330] => LNG($a«¨¼Á½©ê[2331]), $a«¨¼Á½©ê[2332] => LNG($a«¨¼Á½©ê[2333])); } private function typeFile() { $BŸÛŒ—Àõ =& $_SERVER[şÅ²é¤èİ]; $DÓã×µ„«“ = array($BŸÛŒ—Àõ[1984] => array($BŸÛŒ—Àõ[1985]), $BŸÛŒ—Àõ[2280] => array($BŸÛŒ—Àõ[2334]), $BŸÛŒ—Àõ[2282] => array($BŸÛŒ—Àõ[2335]), $BŸÛŒ—Àõ[1979] => array($BŸÛŒ—Àõ[1980]), $BŸÛŒ—Àõ[2288] => array(), $BŸÛŒ—Àõ[2290] => array(), $BŸÛŒ—Àõ[2292] => array(), $BŸÛŒ—Àõ[1987] => array($BŸÛŒ—Àõ[1989]), $BŸÛŒ—Àõ[1988] => array($BŸÛŒ—Àõ[1989]), $BŸÛŒ—Àõ[2296] => array($BŸÛŒ—Àõ[2336]), $BŸÛŒ—Àõ[2298] => array($BŸÛŒ—Àõ[2336]), $BŸÛŒ—Àõ[2300] => array($BŸÛŒ—Àõ[2337]), $BŸÛŒ—Àõ[2286] => array($BŸÛŒ—Àõ[2338]), $BŸÛŒ—Àõ[2302] => array($BŸÛŒ—Àõ[2339]), $BŸÛŒ—Àõ[2304] => array($BŸÛŒ—Àõ[2340]), $BŸÛŒ—Àõ[1982] => array($BŸÛŒ—Àõ[1983])); return $DÓã×µ„«“; } private function typeAll() { goto DÊ­ù¶Îº; DÊ­ù¶Îº: $Aœï´â†ã =& $_SERVER[şÅ²é¤èİ]; $F²ÀÀÄ•â = $this->typeList; $b¥Ú¸£²¶Œ = array_filter($this->typeFile()); goto CöËÔ‹òöŞ; føÅË·š…¶: return $F²ÀÀÄ•â; goto F…±†¡šĞ; CöËÔ‹òöŞ: foreach ($b¥Ú¸£²¶Œ as $fù‘êšÖÇ => $Cá……¸•Ö‰) { $F²ÀÀÄ•â[$Cá……¸•Ö‰[0]] = $F²ÀÀÄ•â[$fù‘êšÖÇ]; } $F²ÀÀÄ•â[$Aœï´â†ã[1989]] = LNG($Aœï´â†ã[2341]); $F²ÀÀÄ•â[$Aœï´â†ã[2336]] = LNG($Aœï´â†ã[2342]); goto føÅË·š…¶; F…±†¡šĞ: } public function addLog($dò‘ÄÀ–œ, $AÍß´Ñ†³ = array()) { goto f²â¨˜’‡Ø; AêœÂÂöé„: $c®Ôî•òõ = get_client_ip(); if (!$AÍß´Ñ†³ || strlen(json_encode($AÍß´Ñ†³)) >= 1024) { $AÍß´Ñ†³ = array($D½¥äŸä—[2343] => $c®Ôî•òõ); } else { if (is_array($AÍß´Ñ†³)) { $AÍß´Ñ†³[$D½¥äŸä—[2343]] = $c®Ôî•òõ; } else { $AÍß´Ñ†³ = array($D½¥äŸä—[1013] => $AÍß´Ñ†³, $D½¥äŸä—[2343] => $c®Ôî•òõ); } } $AÍß´Ñ†³ = array($D½¥äŸä—[1335] => Session::sign(), $D½¥äŸä—[1336] => $Aæñ¸Æéç…, $D½¥äŸä—[29] => $dò‘ÄÀ–œ, $D½¥äŸä—[1338] => json_encode($AÍß´Ñ†³)); goto fé¼åÍ–ĞÅ; f²â¨˜’‡Ø: $D½¥äŸä— =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->typeList[$dò‘ÄÀ–œ])) { return; } $Aæñ¸Æéç… = USER_ID ? USER_ID : (isset($AÍß´Ñ†³[$D½¥äŸä—[1345]]) ? $AÍß´Ñ†³[$D½¥äŸä—[1345]] : 0); goto AêœÂÂöé„; fé¼åÍ–ĞÅ: parent::add($AÍß´Ñ†³); goto bµ±•—šÈ‡; bµ±•—šÈ‡: } public function remove($a½ÜÄøœæ) { $this->where(array($_SERVER[şÅ²é¤èİ][379] => $a½ÜÄøœæ))->delete(); } private function _makeOrder($f²¼İ÷öÕ = '') { goto eà±²ÔÊ›¢; AŸ˜†¼Öâ: return $this->order($f²¼İ÷öÕ); goto a‚¹²¹ÛÄ; B³ç¨òà¿Â: $C½Ï¹Áß‹… = Input::get($F‘‰“ÚÑë¯[401], $F‘‰“ÚÑë¯[7], $F‘‰“ÚÑë¯[2148], array($F‘‰“ÚÑë¯[2089], $F‘‰“ÚÑë¯[397])); $C½Ï¹Áß‹… = $eî°‚æ»¸ğ[$C½Ï¹Áß‹…]; $f²¼İ÷öÕ = $f²¼İ÷öÕ . "{$Bã—ºï·Ï¬}\40{$C½Ï¹Áß‹…}"; goto AŸ˜†¼Öâ; eà±²ÔÊ›¢: $F‘‰“ÚÑë¯ =& $_SERVER[şÅ²é¤èİ]; $Bã—ºï·Ï¬ = $F‘‰“ÚÑë¯[183]; $eî°‚æ»¸ğ = array($F‘‰“ÚÑë¯[395] => $F‘‰“ÚÑë¯[396], $F‘‰“ÚÑë¯[397] => $F‘‰“ÚÑë¯[398]); goto B³ç¨òà¿Â; a‚¹²¹ÛÄ: } public function get($cèÛÚ½ÛÑ = '') { goto açÒªî¹Òæ; E—ÂáÇ°’Ú: $fƒÃâ¯í¤å[$e‡Ü™í²×†[347]] = $this->logList($fƒÃâ¯í¤å[$e‡Ü™í²×†[347]]); return $fƒÃâ¯í¤å; goto fô©íä; AªĞª” à: if (!empty($cèÛÚ½ÛÑ[$e‡Ü™í²×†[2343]])) { $aÎ¹ÜÅèË£[$e‡Ü™í²×†[398]] = array($e‡Ü™í²×†[754], "\x25{$cèÛÚ½ÛÑ[$e‡Ü™í²×†[2343]]}\x25"); } $fƒÃâ¯í¤å = $this->_makeOrder()->where($aÎ¹ÜÅèË£)->selectPage(); if (empty($fƒÃâ¯í¤å[$e‡Ü™í²×†[347]])) { show_json(array(), !0, $fƒÃâ¯í¤å[$e‡Ü™í²×†[344]]); } goto E—ÂáÇ°’Ú; açÒªî¹Òæ: $e‡Ü™í²×† =& $_SERVER[şÅ²é¤èİ]; if (!$cèÛÚ½ÛÑ) { show_json(array()); } $aÎ¹ÜÅèË£ = array(); goto c‡”„°Ò³ã; c‡”„°Ò³ã: if ($cèÛÚ½ÛÑ[$e‡Ü™í²×†[1345]]) { $aÎ¹ÜÅèË£[$e‡Ü™í²×†[1345]] = $cèÛÚ½ÛÑ[$e‡Ü™í²×†[1345]]; } if (isset($cèÛÚ½ÛÑ[$e‡Ü™í²×†[695]])) { $CŸæÊï”¥ = $cèÛÚ½ÛÑ[$e‡Ü™í²×†[695]]; $FÈ»èİá = isset($cèÛÚ½ÛÑ[$e‡Ü™í²×†[696]]) ? $cèÛÚ½ÛÑ[$e‡Ü™í²×†[696]] : time(); $aÎ¹ÜÅèË£[$e‡Ü™í²×†[183]] = array($e‡Ü™í²×†[315], array($CŸæÊï”¥, $FÈ»èİá)); } if ($cèÛÚ½ÛÑ[$e‡Ü™í²×†[29]]) { $D‚÷¸Ú¹è¶ = explode($e‡Ü™í²×†[47], $cèÛÚ½ÛÑ[$e‡Ü™í²×†[29]]); $dùØî¡ĞÆ = $this->typeFile(); $DƒÎõÚ³ = array(); foreach ($D‚÷¸Ú¹è¶ as $eâ†’Ì´äª) { $DƒÎõÚ³[] = $eâ†’Ì´äª; if (isset($dùØî¡ĞÆ[$eâ†’Ì´äª])) { $DƒÎõÚ³ = array_merge($DƒÎõÚ³, $dùØî¡ĞÆ[$eâ†’Ì´äª]); } } $DƒÎõÚ³ = array_unique($DƒÎõÚ³); if ($DƒÎõÚ³) { $aÎ¹ÜÅèË£[$e‡Ü™í²×†[29]] = array($e‡Ü™í²×†[7], $DƒÎõÚ³); } } goto AªĞª” à; fô©íä: } private function ipAddress(&$DÇ•ŞğÒŠĞ) { $d§¤¯šãà =& $_SERVER[şÅ²é¤èİ]; if (!empty($DÇ•ŞğÒŠĞ[$d§¤¯šãà[2343]])) { $A—‘ù³Ô¤¼ = IpLocation::get($DÇ•ŞğÒŠĞ[$d§¤¯šãà[2343]]); if ($A—‘ù³Ô¤¼ == $d§¤¯šãà[2344]) { $A—‘ù³Ô¤¼ = $d§¤¯šãà[2345]; } } else { $A—‘ù³Ô¤¼ = LNG($d§¤¯šãà[2346]); } $DÇ•ŞğÒŠĞ[$d§¤¯šãà[2347]] = $A—‘ù³Ô¤¼; } private function getSourceList(&$eË™Š ‰ì„) { $BÈö²™¿î =& $_SERVER[şÅ²é¤èİ]; $dÅäŞÜÕù = array(); foreach ($eË™Š ‰ì„ as $AĞ¸²²†« => $cÜß…àé²¿) { $BÁØ´Œ®“ = json_decode($cÜß…àé²¿[$BÈö²™¿î[398]], !0); if (strpos($cÜß…àé²¿[$BÈö²™¿î[29]], $BÈö²™¿î[2183]) !== 0) { goto DÈóº÷Ûï«; DÈóº÷Ûï«: if (!isset($BÁØ´Œ®“[$BÈö²™¿î[76]]) || strpos($cÜß…àé²¿[$BÈö²™¿î[29]], $BÈö²™¿î[2348]) !== 0) { continue; } if (!IO::init($BÁØ´Œ®“[$BÈö²™¿î[76]])) { continue; } if (!($dÎ¦õ°ñ‘Ù = IO::infoFull($BÁØ´Œ®“[$BÈö²™¿î[76]]))) { continue; } goto FäÄù”À®ë; FäÄù”À®ë: $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[363]] = $dÎ¦õ°ñ‘Ù[$BÈö²™¿î[363]]; $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[2182]] = $dÎ¦õ°ñ‘Ù[$BÈö²™¿î[454]]; $eË™Š ‰ì„[$AĞ¸²²†«][$BÈö²™¿î[398]] = json_encode($BÁØ´Œ®“); goto A§Ûëì‚àõ; A§Ûëì‚àõ: continue; goto BšÛÅ»¿“Š; BšÛÅ»¿“Š: } $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[363]]; $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[2182]]; if ($BÁØ´Œ®“[$BÈö²™¿î[29]] == $BÈö²™¿î[482]) { $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[398]][$BÈö²™¿î[984]]; $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[398]][$BÈö²™¿î[985]]; } if ($BÁØ´Œ®“[$BÈö²™¿î[29]] == $BÈö²™¿î[2188]) { $dÅäŞÜÕù[] = $BÁØ´Œ®“[$BÈö²™¿î[398]][$BÈö²™¿î[363]]; } } if (!$dÅäŞÜÕù) { return array(); } return Model($BÈö²™¿î[755])->sourceListInfo($dÅäŞÜÕù, !0); } private function logList($b£Ü™àÓ°é) { goto d­ Ä×™³‘; d­ Ä×™³‘: $BºˆÓ Äå =& $_SERVER[şÅ²é¤èİ]; $C‚ø¿Ä‡Ò = array_to_keyvalue($b£Ü™àÓ°é, $BºˆÓ Äå[33], $BºˆÓ Äå[1345]); $FÅ°ä·Ë» = Model($BºˆÓ Äå[467])->userListInfo(array_unique($C‚ø¿Ä‡Ò)); goto B³Á¼¬äÔİ; eÓõ’–×’Î: $DÙĞºÁ×­È = array(); foreach ($b£Ü™àÓ°é as $eï®¼¾ä => $E»ˆ¢»ó‡) { goto E‡Ø° ÙÀ; Dô„³ñÂÅ¦: unset($E»ˆ¢»ó‡[$BºˆÓ Äå[2351]]); $eŠ½ÏÑ¡í[] = $E»ˆ¢»ó‡; goto e¥îøºğ±¤; EçÚ’¯ÓÕÙ: $this->ipAddress($E»ˆ¢»ó‡); if (strpos($C·÷›ïõì, $BºˆÓ Äå[2183]) === 0 || isset($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2182]])) { goto f×µ´²®Ü÷; f×µ´²®Ü÷: $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[385]] = $a¯ÚÎ½’´[$aµ°ŒÕŠ›Œ[$BºˆÓ Äå[363]]]; $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2193]] = $a¯ÚÎ½’´[$aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2182]]]; if ($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[29]] == $BºˆÓ Äå[482]) { $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[984]] = $a¯ÚÎ½’´[$aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[984]]]; $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[985]] = $a¯ÚÎ½’´[$aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[985]]]; } goto cÑ’¶†½–; DŒ‡õ†”Æ: if ($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2193]] && $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2193]][$BºˆÓ Äå[365]] == $BºˆÓ Äå[1053]) { $DÙĞºÁ×­È[] = $E»ˆ¢»ó‡[$BºˆÓ Äå[361]]; unset($b£Ü™àÓ°é[$eï®¼¾ä]); continue; } goto fŒêòˆß‰; cÑ’¶†½–: if ($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[29]] == $BºˆÓ Äå[2188]) { $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[363]] = $a¯ÚÎ½’´[$aµ°ŒÕŠ›Œ[$BºˆÓ Äå[398]][$BºˆÓ Äå[363]]]; } if ($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[29]] == $BºˆÓ Äå[1977]) { $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2193]] = $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[385]]; $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2182]] = $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2193]][$BºˆÓ Äå[363]]; $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[385]] = !1; $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[363]] = $BºˆÓ Äå[33]; } if ($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[385]] && $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[385]][$BºˆÓ Äå[365]] == $BºˆÓ Äå[1053]) { $DÙĞºÁ×­È[] = $E»ˆ¢»ó‡[$BºˆÓ Äå[361]]; unset($b£Ü™àÓ°é[$eï®¼¾ä]); continue; } goto DŒ‡õ†”Æ; fŒêòˆß‰: } $E»ˆ¢»ó‡[$BºˆÓ Äå[398]] = $aµ°ŒÕŠ›Œ; goto Dô„³ñÂÅ¦; Eá”ˆ÷¥á‘: $E»ˆ¢»ó‡[$BºˆÓ Äå[28]] = isset($B °Üöö­[$BºˆÓ Äå[28]]) ? $B °Üöö­[$BºˆÓ Äå[28]] : LNG($BºˆÓ Äå[2346]); $E»ˆ¢»ó‡[$BºˆÓ Äå[2228]] = isset($B °Üöö­[$BºˆÓ Äå[2228]]) ? $B °Üöö­[$BºˆÓ Äå[2228]] : $BºˆÓ Äå[33]; $E»ˆ¢»ó‡[$BºˆÓ Äå[1243]] = isset($b××®Ã„ß[$C·÷›ïõì]) ? $b××®Ã„ß[$C·÷›ïõì] : $føîÊÄ¯Œ; goto b„¢Œ‹çé; E‡Ø° ÙÀ: $C·÷›ïõì = $E»ˆ¢»ó‡[$BºˆÓ Äå[29]]; $B °Üöö­ = isset($FÅ°ä·Ë»[$E»ˆ¢»ó‡[$BºˆÓ Äå[1345]]]) ? $FÅ°ä·Ë»[$E»ˆ¢»ó‡[$BºˆÓ Äå[1345]]] : !1; $føîÊÄ¯Œ = strpos($C·÷›ïõì, $BºˆÓ Äå[2349]) == 0 ? LNG($BºˆÓ Äå[2350]) : LNG($BºˆÓ Äå[2346]); goto Eá”ˆ÷¥á‘; b„¢Œ‹çé: $E»ˆ¢»ó‡[$BºˆÓ Äå[2147]] = $B °Üöö­; $aµ°ŒÕŠ›Œ = json_decode($E»ˆ¢»ó‡[$BºˆÓ Äå[398]], !0); $E»ˆ¢»ó‡[$BºˆÓ Äå[2343]] = isset($aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2343]]) ? $aµ°ŒÕŠ›Œ[$BºˆÓ Äå[2343]] : $BºˆÓ Äå[33]; goto EçÚ’¯ÓÕÙ; e¥îøºğ±¤: } $this->clearSystemPathLog($DÙĞºÁ×­È); goto b¾ÀÇ•ìİ¾; B³Á¼¬äÔİ: $a¯ÚÎ½’´ = $this->getSourceList($b£Ü™àÓ°é); $b××®Ã„ß = $this->typeAll(); $eŠ½ÏÑ¡í = array(); goto eÓõ’–×’Î; b¾ÀÇ•ìİ¾: return $eŠ½ÏÑ¡í; goto aÉœ‰à‹—; aÉœ‰à‹—: } private function clearSystemPathLog($e°íÖôºÇ¸) { $Aô½„äæ  =& $_SERVER[şÅ²é¤èİ]; if (count($e°íÖôºÇ¸) == 0) { return; } $eÇ–½«Š‘² = array($Aô½„äæ [361] => array($Aô½„äæ [7], array_unique($e°íÖôºÇ¸))); $this->where($eÇ–½«Š‘²)->delete(); } public function deviceList($C¨ˆä‚‘ˆ, $d·±Â×°±Š = null) { goto DŒîŸÄÀÇ; DŒîŸÄÀÇ: $cÖ¹ğĞé— =& $_SERVER[şÅ²é¤èİ]; $F­ÚºÃö­‘ = array($cÖ¹ğĞé—[1345] => $C¨ˆä‚‘ˆ, $cÖ¹ğĞé—[29] => $cÖ¹ğĞé—[1950]); if ($d·±Â×°±Š) { $F­ÚºÃö­‘[$cÖ¹ğĞé—[183]] = array($cÖ¹ğĞé—[929], $d·±Â×°±Š); } goto f¨´Ç§Ô‰Ó; f¨´Ç§Ô‰Ó: $EøÀµŞÍ¸ù = $this->where($F­ÚºÃö­‘)->order($cÖ¹ğĞé—[2191])->select(); $A»©ò‡ååˆ = array(); foreach ($EøÀµŞÍ¸ù as $eâŒÏ„‘ã => &$d¿óÛÎ—) { goto D¾³¦œ®›¦; C×øÆÓ¼ÇÛ: $f…•¯ğŸã¥ = md5(json_encode($dôˆ©Ş½Î)); if (isset($A»©ò‡ååˆ[$f…•¯ğŸã¥])) { unset($EøÀµŞÍ¸ù[$eâŒÏ„‘ã]); continue; } $this->ipAddress($d¿óÛÎ—); goto F²ˆñÏˆæ; D¾³¦œ®›¦: $dôˆ©Ş½Î = json_decode($d¿óÛÎ—[$cÖ¹ğĞé—[398]], !0); $d¿óÛÎ—[$cÖ¹ğĞé—[2343]] = isset($dôˆ©Ş½Î[$cÖ¹ğĞé—[2343]]) ? $dôˆ©Ş½Î[$cÖ¹ğĞé—[2343]] : $cÖ¹ğĞé—[33]; unset($dôˆ©Ş½Î[$cÖ¹ğĞé—[2343]]); goto C×øÆÓ¼ÇÛ; F²ˆñÏˆæ: $d¿óÛÎ—[$cÖ¹ğĞé—[398]] = $dôˆ©Ş½Î; $A»©ò‡ååˆ[$f…•¯ğŸã¥] = $d¿óÛÎ—; goto F×Ü×§ãÓğ; F×Ü×§ãÓğ: } goto Aç­İÏ»§ù; Aç­İÏ»§ù: return array_values($A»©ò‡ååˆ); goto FËê¨Êö’; FËê¨Êö’: } } class SystemNoticeModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\145\x6d\x2e\x6e\157\164\x69\143\x65\114\x69\163\x74"; public $field = array("\x6e\x61\x6d\x65", "\x63\157\x6e\x74\145\x6e\164", "\x61\165\x74\x68", "\x6d\157\x64\x65", "\164\151\155\x65", "\164\171\x70\x65", "\x73\x6f\x72\164"); public function listData($EëàóĞòäÌ = false, $c„çØ÷óîò = "\163\157\x72\164", $eÅÖ¨Ù½Å = false) { return parent::listData($EëàóĞòäÌ, $c„çØ÷óîò, $eÅÖ¨Ù½Å); } public function add($f©äŠŒá¦¤) { goto FŸ„ˆÒ¿¨; aŞš®Ñ‡Ÿ²: return parent::insert($f©äŠŒá¦¤); goto e£­¿©Ñã; FŸ„ˆÒ¿¨: $Cå•ØÇÂˆ =& $_SERVER[şÅ²é¤èİ]; $e¸°Â²áçï = $this->findByName($f©äŠŒá¦¤[$Cå•ØÇÂˆ[28]]); if ($e¸°Â²áçï) { return !1; } goto cµëè®…ÎÓ; cµëè®…ÎÓ: $c™»„ŠË—ê = time(); if ($f©äŠŒá¦¤[$Cå•ØÇÂˆ[12]] == $Cå•ØÇÂˆ[2352]) { $c™»„ŠË—ê = strtotime($f©äŠŒá¦¤[$Cå•ØÇÂˆ[186]]); } $f©äŠŒá¦¤[$Cå•ØÇÂˆ[186]] = $c™»„ŠË—ê; goto aŞš®Ñ‡Ÿ²; e£­¿©Ñã: } public function update($bÅóí¯œÚ‰, $fÀìœÒèùª) { goto aÙÍÊîòÏÖ; aÙÍÊîòÏÖ: $A ¸×»Ö¡ =& $_SERVER[şÅ²é¤èİ]; $d­æœÇòÖÜ = $this->listData($bÅóí¯œÚ‰); $EËøºö½»º = $this->findByName($fÀìœÒèùª[$A ¸×»Ö¡[28]]); goto B®•ç§†; B®•ç§†: if (!$d­æœÇòÖÜ || $EËøºö½»º && $EËøºö½»º[$A ¸×»Ö¡[361]] != $d­æœÇòÖÜ[$A ¸×»Ö¡[361]]) { return !1; } $D­¥‡Ùö¾Ó = time(); if ($fÀìœÒèùª[$A ¸×»Ö¡[12]] == $A ¸×»Ö¡[2352]) { $D­¥‡Ùö¾Ó = strtotime($fÀìœÒèùª[$A ¸×»Ö¡[186]]); } goto BÏ§ƒé–Ü; BÏ§ƒé–Ü: $fÀìœÒèùª[$A ¸×»Ö¡[186]] = $D­¥‡Ùö¾Ó; return parent::update($bÅóí¯œÚ‰, $fÀìœÒèùª); goto FŠ™µƒ‰…; FŠ™µƒ‰…: } public function remove($A‰£†‹–¢) { $A”µÑ«½ºä = $this->listData($A‰£†‹–¢); if (!$A”µÑ«½ºä || $A”µÑ«½ºä[$_SERVER[şÅ²é¤èİ][1053]]) { return !1; } return parent::remove($A‰£†‹–¢); } public function sort($DÌ‚­åÀâ, $C»öÔ˜î…) { return parent::update($DÌ‚­åÀâ, $C»öÔ˜î…); } private function initUserOption() { $D˜ƒ‡ÍºØÈ =& $_SERVER[şÅ²é¤èİ]; $this->optionType = $D˜ƒ‡ÍºØÈ[2353]; $this->modelType = $D˜ƒ‡ÍºØÈ[2354]; $this->field = array($D˜ƒ‡ÍºØÈ[2355], $D˜ƒ‡ÍºØÈ[28], $D˜ƒ‡ÍºØÈ[186], $D˜ƒ‡ÍºØÈ[29], $D˜ƒ‡ÍºØÈ[682], $D˜ƒ‡ÍºØÈ[178]); } public function userNoticeGet($a˜‚Ó„Ÿ³Ç = false) { $this->initUserOption(); return parent::listData($a˜‚Ó„Ÿ³Ç, $_SERVER[şÅ²é¤èİ][361], !0); } public function userNoticeAdd($Fƒö™èš) { $fŒÚ…¢ğ·‘ =& $_SERVER[şÅ²é¤èİ]; $this->initUserOption(); $eì…šàÔí = $this->findByKey($fŒÚ…¢ğ·‘[2355], $Fƒö™èš[$fŒÚ…¢ğ·‘[361]]); if ($eì…šàÔí) { return !0; } $C²¥‘‹ª– = array($fŒÚ…¢ğ·‘[2355] => $Fƒö™èš[$fŒÚ…¢ğ·‘[361]], $fŒÚ…¢ğ·‘[28] => $Fƒö™èš[$fŒÚ…¢ğ·‘[28]], $fŒÚ…¢ğ·‘[186] => $Fƒö™èš[$fŒÚ…¢ğ·‘[186]], $fŒÚ…¢ğ·‘[29] => isset($Fƒö™èš[$fŒÚ…¢ğ·‘[29]]) ? $Fƒö™èš[$fŒÚ…¢ğ·‘[29]] : 1, $fŒÚ…¢ğ·‘[682] => 0, $fŒÚ…¢ğ·‘[178] => 0); return parent::insert($C²¥‘‹ª–); } public function userNoticeEdit($c‰™‘ö±“, $e¯ÓÄïÌß) { $this->initUserOption(); return parent::update($c‰™‘ö±“, $e¯ÓÄïÌß); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\x79\163\x74\145\x6d\x5f\x6f\160\x74\x69\x6f\156"; protected $jsonField = array("\155\x65\x6e\x75", "\162\x6f\154\x65", "\162\x6f\x6c\145\x47\x72\x6f\x75\x70", "\x72\145\147\151\163\x74", "\x65\x6d\x61\151\x6c"); function __construct() { parent::__construct(); } protected function cacheKey($däÅÑ³ğ´) { return "\123\x79\x73\x74\145\155\117\160\164\151\x6f\x6e\137{$däÅÑ³ğ´}"; } } goto CÇöÆÌŸÇ¬; D’­ö‚òéÌ: define($_SERVER[şÅ²é¤èİ][225], 0); define($_SERVER[şÅ²é¤èİ][226], 2); class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\x69\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\x74\141\x62\x6c\145", "\x6f\162\x64\145\x72", "\141\154\x69\141\x73", "\x68\141\166\151\x6e\147", "\147\162\x6f\165\160", "\154\x6f\x63\x6b", "\144\151\x73\164\151\156\x63\x74", "\141\165\x74\x6f", "\146\x69\154\x74\145\162", "\x76\x61\154\151\144\x61\164\145", "\162\x65\x73\x75\x6c\x74", "\142\x69\156\x64", "\x74\157\153\145\156"); public function __construct($eŠÖÀµî¢ = '', $D•Ì¢™ëˆ = '', $d²ôÏŒÔ‚ˆ = '') { $Cò„Â¶ßí¡ =& $_SERVER[şÅ²é¤èİ]; $this->_initialize(); if (!empty($eŠÖÀµî¢)) { if (strpos($eŠÖÀµî¢, $Cò„Â¶ßí¡[92])) { list($this->dbName, $this->name) = explode($Cò„Â¶ßí¡[92], $eŠÖÀµî¢); } else { $this->name = $eŠÖÀµî¢; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($D•Ì¢™ëˆ)) { $this->tablePrefix = $Cò„Â¶ßí¡[33]; } elseif ($Cò„Â¶ßí¡[33] != $D•Ì¢™ëˆ) { $this->tablePrefix = $D•Ì¢™ëˆ; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($Cò„Â¶ßí¡[227]); } $this->db(0, empty($this->connection) ? $d²ôÏŒÔ‚ˆ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $F³óñ×‰†  =& $_SERVER[şÅ²é¤èİ]; if (empty($this->fields)) { if (think_config($F³óñ×‰† [228])) { $b‰œ‚Â­’¬ = $this->dbName ? $this->dbName : think_config($F³óñ×‰† [229]); $BÎ•À­ÈŠ· = think_var_cache($F³óñ×‰† [230] . strtolower(get_path_this($b‰œ‚Â­’¬) . $F³óñ×‰† [92] . $this->name)); if ($BÎ•À­ÈŠ·) { $BÎº¬øÇÑ = think_config($F³óñ×‰† [231]); if (empty($BÎº¬øÇÑ) || $BÎ•À­ÈŠ·[$F³óñ×‰† [232]] == $BÎº¬øÇÑ) { $this->fields = $BÎ•À­ÈŠ·; return; } } } $this->flush(); } } public function flush() { goto A‡«†Çº’‹; e‡¥øì”ñ¸: if (think_config($D©ßº†›Á[228])) { $d²¶ØŸÄÑ = $this->dbName ? $this->dbName : think_config($D©ßº†›Á[229]); think_var_cache($D©ßº†›Á[230] . strtolower(get_path_this($d²¶ØŸÄÑ) . $D©ßº†›Á[92] . $this->name), $this->fields); } goto b˜èÉ²ĞÚ‡; A‡«†Çº’‹: $D©ßº†›Á =& $_SERVER[şÅ²é¤èİ]; $this->db->setModel($this->name); $AÕ¥ƒâÈ‘Ö = $this->db->getFields($this->getTableName()); goto B÷Åò•òîö; E½µÅ–Ëˆ: foreach ($AÕ¥ƒâÈ‘Ö as $D‘­ø¹À‹ => $f–àÜ“¸á‚) { $e™±«é…µ‚[$D‘­ø¹À‹] = $f–àÜ“¸á‚[$D©ßº†›Á[29]]; if ($f–àÜ“¸á‚[$D©ßº†›Á[36]]) { $this->fields[$D©ßº†›Á[234]] = $D‘­ø¹À‹; if ($f–àÜ“¸á‚[$D©ßº†›Á[39]]) { $this->fields[$D©ßº†›Á[233]] = !0; } } } $this->fields[$D©ßº†›Á[182]] = $e™±«é…µ‚; if (think_config($D©ßº†›Á[231])) { $this->fields[$D©ßº†›Á[232]] = think_config($D©ßº†›Á[231]); } goto e‡¥øì”ñ¸; B÷Åò•òîö: if (!$AÕ¥ƒâÈ‘Ö) { return !1; } $this->fields = array_keys($AÕ¥ƒâÈ‘Ö); $this->fields[$D©ßº†›Á[233]] = !1; goto E½µÅ–Ëˆ; b˜èÉ²ĞÚ‡: } public function switchModel($B¶¤ÌçàèÃ, $cÑÆ¹ÔøØ„ = array()) { $bÊæöó—Òˆ =& $_SERVER[şÅ²é¤èİ]; $BÕ©‚‹­íµ = ucwords(strtolower($B¶¤ÌçàèÃ)) . $bÊæöó—Òˆ[235]; if (!class_exists($BÕ©‚‹­íµ)) { think_exception($BÕ©‚‹­íµ . think_lang($bÊæöó—Òˆ[236])); } $this->_extModel = new $BÕ©‚‹­íµ($this->name); if (!empty($cÑÆ¹ÔøØ„)) { foreach ($cÑÆ¹ÔøØ„ as $Fõó˜¯™©³) { $this->_extModel->setProperty($Fõó˜¯™©³, $this->{$Fõó˜¯™©³}); } } return $this->_extModel; } public function __set($Dä²ÁƒÙ…¤, $aí³º¯í) { $this->data[$Dä²ÁƒÙ…¤] = $aí³º¯í; } public function __get($aŒÃ¢ñĞŒ¬) { return isset($this->data[$aŒÃ¢ñĞŒ¬]) ? $this->data[$aŒÃ¢ñĞŒ¬] : null; } public function __isset($A¾ˆÄÂÉÄÏ) { return isset($this->data[$A¾ˆÄÂÉÄÏ]); } public function __unset($e‚‰¾á‰ğ¼) { unset($this->data[$e‚‰¾á‰ğ¼]); } public function __call($b›”øœá„á, $BÎŞˆï¹£·) { $a†èè¡è¶Ë =& $_SERVER[şÅ²é¤èİ]; if (in_array(strtolower($b›”øœá„á), $this->methods, !0)) { $this->options[strtolower($b›”øœá„á)] = $BÎŞˆï¹£·[0]; return $this; } elseif (in_array(strtolower($b›”øœá„á), array($a†èè¡è¶Ë[237], $a†èè¡è¶Ë[238], $a†èè¡è¶Ë[239], $a†èè¡è¶Ë[240], $a†èè¡è¶Ë[241]), !0)) { $Aô¿¤öÈ‚ = isset($BÎŞˆï¹£·[0]) ? $BÎŞˆï¹£·[0] : $a†èè¡è¶Ë[171]; $Aô¿¤öÈ‚ = $this->db->parseKey($Aô¿¤öÈ‚); return $this->getField(strtoupper($b›”øœá„á) . $a†èè¡è¶Ë[242] . $Aô¿¤öÈ‚ . $a†èè¡è¶Ë[243] . $b›”øœá„á, $a†èè¡è¶Ë[237]); } elseif (strtolower(substr($b›”øœá„á, 0, 5)) == $a†èè¡è¶Ë[244]) { $Aô¿¤öÈ‚ = think_parse_name(substr($b›”øœá„á, 5)); $C¶¡Ù°–ì…[$Aô¿¤öÈ‚] = $BÎŞˆï¹£·[0]; return $this->where($C¶¡Ù°–ì…)->find(); } elseif (strtolower(substr($b›”øœá„á, 0, 10)) == $a†èè¡è¶Ë[245]) { $B…í£½Ø‘Ä = think_parse_name(substr($b›”øœá„á, 10)); $C¶¡Ù°–ì…[$B…í£½Ø‘Ä] = $BÎŞˆï¹£·[0]; return $this->where($C¶¡Ù°–ì…)->getField($BÎŞˆï¹£·[1]); } elseif (isset($this->_scope[$b›”øœá„á])) { return $this->scope($b›”øœá„á, $BÎŞˆï¹£·[0]); } elseif (method_exists($this, $b›”øœá„á)) { array_unshift($BÎŞˆï¹£·, $b›”øœá„á); return call_user_func_array(array($this, $a†èè¡è¶Ë[246]), $BÎŞˆï¹£·); } else { return call_user_func_array(array(parent, $b›”øœá„á), $BÎŞˆï¹£·); } } protected function call() { goto b÷Æ²ëÍ; B²çá¬˜›²: if (method_exists($this, $a«àÇº·¬ƒ[250])) { $E™š®Æ›±ğ = call_user_func_array(array($this, $a«àÇº·¬ƒ[251]), array($Fóàõ‡±, $cïå¼ÃÒ¿, $Aõ¿Ñ´á×)); if ($E™š®Æ›±ğ) { return $E™š®Æ›±ğ; } } return $Aõ¿Ñ´á×; goto CöÖ˜„¹±ª; Fà¯ì±»¯: $Fóàõ‡± = $FÎ¼¸ìŠ¦¸; if (is_array($FÎ¼¸ìŠ¦¸)) { $Fóàõ‡± = $FÎ¼¸ìŠ¦¸[1]; $FÎ¼¸ìŠ¦¸ = $FÎ¼¸ìŠ¦¸[0]; } if ($cïå¼ÃÒ¿[count($cïå¼ÃÒ¿) - 1] === $FÎ¼¸ìŠ¦¸) { think_exception(__CLASS__ . $a«àÇº·¬ƒ[4] . $FÎ¼¸ìŠ¦¸ . think_lang($a«àÇº·¬ƒ[247])); return; } goto BÖÇËÔ‡; b÷Æ²ëÍ: $a«àÇº·¬ƒ =& $_SERVER[şÅ²é¤èİ]; $cïå¼ÃÒ¿ = func_get_args(); $FÎ¼¸ìŠ¦¸ = array_shift($cïå¼ÃÒ¿); goto Fà¯ì±»¯; BÖÇËÔ‡: $cïå¼ÃÒ¿[] = $FÎ¼¸ìŠ¦¸; if (method_exists($this, $a«àÇº·¬ƒ[248])) { $E™š®Æ›±ğ = call_user_func_array(array($this, $a«àÇº·¬ƒ[249]), array($Fóàõ‡±, $cïå¼ÃÒ¿)); if (!is_null($E™š®Æ›±ğ) && $E™š®Æ›±ğ !== !1) { return $E™š®Æ›±ğ; } } $Aõ¿Ñ´á× = call_user_func_array(array($this, $FÎ¼¸ìŠ¦¸), $cïå¼ÃÒ¿); goto B²çá¬˜›²; CöÖ˜„¹±ª: } protected function _initialize() { } protected function _facade($EÃƒÊ˜›ÉÌ) { $CŒùùˆğà´ =& $_SERVER[şÅ²é¤èİ]; if (!empty($this->fields)) { foreach ($EÃƒÊ˜›ÉÌ as $A¾àğÆ’ÈÈ => $e×ù›³°ë¥) { if (!in_array($A¾àğÆ’ÈÈ, $this->fields, !0)) { unset($EÃƒÊ˜›ÉÌ[$A¾àğÆ’ÈÈ]); } elseif (is_scalar($e×ù›³°ë¥)) { $this->_parseType($EÃƒÊ˜›ÉÌ, $A¾àğÆ’ÈÈ); } } } if (!empty($this->options[$CŒùùˆğà´[252]])) { $EÃƒÊ˜›ÉÌ = array_map($this->options[$CŒùùˆğà´[252]], $EÃƒÊ˜›ÉÌ); unset($this->options[$CŒùùˆğà´[252]]); } $this->_beforeWrite($EÃƒÊ˜›ÉÌ); return $EÃƒÊ˜›ÉÌ; } protected function _beforeWrite(&$B’’¹ì…òƒ) { } public function add($EŠáÅåš¹Ğ = '', $B°Å¼•Ïí… = array(), $cõ”´øŞÆë = false) { goto dÍŒÉ¨ìíé; AÎ‰â¶µìğ: if (!1 === $this->_beforeInsert($EŠáÅåš¹Ğ, $B°Å¼•Ïí…)) { return !1; } $CİŠ‰¦·Ù° = $this->db->insert($EŠáÅåš¹Ğ, $B°Å¼•Ïí…, $cõ”´øŞÆë); if (!1 !== $CİŠ‰¦·Ù°) { $B«šÒ‘Ó = $this->getLastInsID(); if ($B«šÒ‘Ó) { $EŠáÅåš¹Ğ[$this->getPk()] = $B«šÒ‘Ó; $this->_after_insert($EŠáÅåš¹Ğ, $B°Å¼•Ïí…); return $B«šÒ‘Ó; } $this->_after_insert($EŠáÅåš¹Ğ, $B°Å¼•Ïí…); } goto D ä‚âÌùö; D ä‚âÌùö: return $CİŠ‰¦·Ù°; goto còØÚ¿Ô; dÍŒÉ¨ìíé: if (empty($EŠáÅåš¹Ğ)) { if (!empty($this->data)) { $EŠáÅåš¹Ğ = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[şÅ²é¤èİ][253]); return !1; } } $B°Å¼•Ïí… = $this->_parseOptions($B°Å¼•Ïí…); $EŠáÅåš¹Ğ = $this->_facade($EŠáÅåš¹Ğ); goto AÎ‰â¶µìğ; còØÚ¿Ô: } protected function _beforeInsert(&$D‡ôèŠÚòå, $dÃ’áğ†ŒŞ) { } protected function _after_insert($cğ¹ĞÅ¥Ï, $aŠ˜æÇøĞÊ) { } public function addAll($C«´™”¤äá, $A»ÈÛÛÄ = array(), $bäøİ…ëƒ• = false) { goto CŠÂàğÔº˜; e–×Œñ”Õã: return $b„½Ñ‡‹©‘; goto cùâ™áÊ´À; FÖÒÙòÓ‰: foreach ($C«´™”¤äá as $B¬Í ·²×Ê => $A‰ƒÓ¿ôùƒ) { $C«´™”¤äá[$B¬Í ·²×Ê] = $this->_facade($A‰ƒÓ¿ôùƒ); } if (method_exists($this->db, $cİƒ³ô§½[254])) { $b„½Ñ‡‹©‘ = $this->db->insertAll($C«´™”¤äá, $A»ÈÛÛÄ, $bäøİ…ëƒ•); } else { $this->startTrans(); foreach ($C«´™”¤äá as $B¬Í ·²×Ê => $A‰ƒÓ¿ôùƒ) { $b„½Ñ‡‹©‘ = $this->db->insert($A‰ƒÓ¿ôùƒ, $A»ÈÛÛÄ, $bäøİ…ëƒ•); } $this->commit(); } if (!1 !== $b„½Ñ‡‹©‘) { $A§ØÉíİ„· = $this->getLastInsID(); if ($A§ØÉíİ„·) { return $A§ØÉíİ„·; } } goto e–×Œñ”Õã; CŠÂàğÔº˜: $cİƒ³ô§½ =& $_SERVER[şÅ²é¤èİ]; if (empty($C«´™”¤äá)) { $this->error = think_lang($cİƒ³ô§½[253]); return !1; } $A»ÈÛÛÄ = $this->_parseOptions($A»ÈÛÛÄ); goto FÖÒÙòÓ‰; cùâ™áÊ´À: } public function selectAdd($D¸ ¡§»Öå = '', $BõœÓ’»Ü§ = '', $Cƒ£¦Íô„É = array()) { $e‰“‹¬ ã =& $_SERVER[şÅ²é¤èİ]; $Cƒ£¦Íô„É = $this->_parseOptions($Cƒ£¦Íô„É); if (!1 === ($f±óÛ³Œ¿ = $this->db->selectInsert($D¸ ¡§»Öå ? $D¸ ¡§»Öå : $Cƒ£¦Íô„É[$e‰“‹¬ ã[255]], $BõœÓ’»Ü§ ? $BõœÓ’»Ü§ : $this->getTableName(), $Cƒ£¦Íô„É))) { $this->error = think_lang($e‰“‹¬ ã[256]); return !1; } else { return $f±óÛ³Œ¿; } } public function save($b±ÍÂÇ™²° = '', $a¹Ñ§ÉĞñ” = array()) { goto eƒ¶ŒŒÎ; f‚ã”–ò›õ: if (!1 !== $cË¡¹›Ù¢Á) { if (isset($AÕî‚¢ˆñ)) { $b±ÍÂÇ™²°[$cº×‡‰¢¹] = $AÕî‚¢ˆñ; } $this->_afterUpdate($b±ÍÂÇ™²°, $a¹Ñ§ÉĞñ”); } return $cË¡¹›Ù¢Á; goto BùÂ›êõ§®; eƒ¶ŒŒÎ: $c½§ÀÜÒ =& $_SERVER[şÅ²é¤èİ]; if (empty($b±ÍÂÇ™²°)) { if (!empty($this->data)) { $b±ÍÂÇ™²° = $this->data; $this->data = array(); } else { $this->error = think_lang($c½§ÀÜÒ[253]); return !1; } } $b±ÍÂÇ™²° = $this->_facade($b±ÍÂÇ™²°); goto d‚÷ßÖ¢; aÚó¥æ¯ˆ: if (is_array($a¹Ñ§ÉĞñ”[$c½§ÀÜÒ[257]]) && isset($a¹Ñ§ÉĞñ”[$c½§ÀÜÒ[257]][$cº×‡‰¢¹])) { $AÕî‚¢ˆñ = $a¹Ñ§ÉĞñ”[$c½§ÀÜÒ[257]][$cº×‡‰¢¹]; } if (!1 === $this->_beforeUpdate($b±ÍÂÇ™²°, $a¹Ñ§ÉĞñ”)) { return !1; } $cË¡¹›Ù¢Á = $this->db->update($b±ÍÂÇ™²°, $a¹Ñ§ÉĞñ”); goto f‚ã”–ò›õ; d‚÷ßÖ¢: $a¹Ñ§ÉĞñ” = $this->_parseOptions($a¹Ñ§ÉĞñ”); $cº×‡‰¢¹ = $this->getPk(); if (!isset($a¹Ñ§ÉĞñ”[$c½§ÀÜÒ[257]])) { if (isset($b±ÍÂÇ™²°[$cº×‡‰¢¹])) { $cì§á‚ò‚[$cº×‡‰¢¹] = $b±ÍÂÇ™²°[$cº×‡‰¢¹]; $a¹Ñ§ÉĞñ”[$c½§ÀÜÒ[257]] = $cì§á‚ò‚; unset($b±ÍÂÇ™²°[$cº×‡‰¢¹]); } else { $this->error = think_lang($c½§ÀÜÒ[256]); return !1; } } goto aÚó¥æ¯ˆ; BùÂ›êõ§®: } protected function _beforeUpdate(&$aÊ†ê´‚‹Ê, $EíëõâÓÚé) { } protected function _afterUpdate($fãÀÙ—Óµá, $CÈŠñÈÀ¢ƒ) { } public function delete($fÓï‰ê‚½¶ = array()) { goto Côƒ‚©ñ¸ï; f…í¥è¹…‹: if (is_numeric($fÓï‰ê‚½¶) || is_string($fÓï‰ê‚½¶)) { if (strpos($fÓï‰ê‚½¶, $B“§‘¤†“[47])) { $D‰‚–›£ãÂ[$d¶¤ó•óßë] = array($B“§‘¤†“[258], $fÓï‰ê‚½¶); } else { $D‰‚–›£ãÂ[$d¶¤ó•óßë] = $fÓï‰ê‚½¶; } $this->options[$B“§‘¤†“[257]] = $D‰‚–›£ãÂ; } $fÓï‰ê‚½¶ = $this->_parseOptions(); if (is_array($fÓï‰ê‚½¶[$B“§‘¤†“[257]]) && isset($fÓï‰ê‚½¶[$B“§‘¤†“[257]][$d¶¤ó•óßë])) { $e¹œŸÛß£å = $fÓï‰ê‚½¶[$B“§‘¤†“[257]][$d¶¤ó•óßë]; } goto dƒ£¬…ŒÉ‚; Côƒ‚©ñ¸ï: $B“§‘¤†“ =& $_SERVER[şÅ²é¤èİ]; if (empty($fÓï‰ê‚½¶) && empty($this->options[$B“§‘¤†“[257]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $d¶¤ó•óßë = $this->getPk(); goto f…í¥è¹…‹; dƒ£¬…ŒÉ‚: $cˆ’¨†Ç—´ = $this->db->delete($fÓï‰ê‚½¶); if (!1 !== $cˆ’¨†Ç—´) { $A’×Ãæ´¤ = array(); if (isset($e¹œŸÛß£å)) { $A’×Ãæ´¤[$d¶¤ó•óßë] = $e¹œŸÛß£å; } $this->_after_delete($A’×Ãæ´¤, $fÓï‰ê‚½¶); } return $cˆ’¨†Ç—´; goto fÑ²§‘½¾; fÑ²§‘½¾: } protected function _after_delete($E“Ğ»Ÿ¤ªˆ, $Cê‰¾ò‰‹ø) { } public function select($a¸ƒ”‹¶î± = array()) { goto d†åÒßŞ¬«; bŞ¾«¯•Ù‚: $dä÷ÀÜ¼È¦ = $this->db->select($a¸ƒ”‹¶î±); if (!1 === $dä÷ÀÜ¼È¦) { return !1; } if (empty($dä÷ÀÜ¼È¦)) { return null; } goto bÅÎÉâ³Ã¾; d†åÒßŞ¬«: $A«Õ¾ò®ã… =& $_SERVER[şÅ²é¤èİ]; if (is_string($a¸ƒ”‹¶î±) || is_numeric($a¸ƒ”‹¶î±)) { $FöÑÆÆ«ÖŠ = $this->getPk(); if (strpos($a¸ƒ”‹¶î±, $A«Õ¾ò®ã…[47])) { $BÈÜä××‹É[$FöÑÆÆ«ÖŠ] = array($A«Õ¾ò®ã…[258], $a¸ƒ”‹¶î±); } else { $BÈÜä××‹É[$FöÑÆÆ«ÖŠ] = $a¸ƒ”‹¶î±; } $this->options[$A«Õ¾ò®ã…[257]] = $BÈÜä××‹É; } elseif (!1 === $a¸ƒ”‹¶î±) { $a¸ƒ”‹¶î± = $this->_parseOptions(); return $A«Õ¾ò®ã…[259] . $this->db->buildSelectSql($a¸ƒ”‹¶î±) . $A«Õ¾ò®ã…[260]; } $a¸ƒ”‹¶î± = $this->_parseOptions(); goto bŞ¾«¯•Ù‚; bÅÎÉâ³Ã¾: $this->_afterSelect($dä÷ÀÜ¼È¦, $a¸ƒ”‹¶î±); return $dä÷ÀÜ¼È¦; goto a‘¸˜»¯È; a‘¸˜»¯È: } protected function _afterSelect(&$a½èàšèô, $dÉ½ãÈ„­”) { } public function buildSql($Ağ”¸ˆÌ = array()) { $E‘™¢‚˜‹” =& $_SERVER[şÅ²é¤èİ]; $Ağ”¸ˆÌ = $this->_parseOptions($Ağ”¸ˆÌ); return $E‘™¢‚˜‹”[259] . $this->db->buildSelectSql($Ağ”¸ˆÌ) . $E‘™¢‚˜‹”[260]; } public function optionsValue($f•ˆ‚‡³ÚÛ = null) { if (is_null($f•ˆ‚‡³ÚÛ)) { return $this->options; } elseif (is_array($f•ˆ‚‡³ÚÛ)) { $this->options = array_merge($this->options, $f•ˆ‚‡³ÚÛ); } } protected function _parseOptions($c³ƒæ×•–¥ = array()) { goto c¨ÂöÙìí; c›ô–Ñ©ğ: if (!isset($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[261]])) { $c³ƒæ×•–¥[$E˜’–Õ¾òˆ[261]] = $this->getTableName(); $dŞ»‹öÛ›ù = $this->fields; } else { $dŞ»‹öÛ›ù = $this->getDbFields(); } if (!empty($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[262]])) { $c³ƒæ×•–¥[$E˜’–Õ¾òˆ[261]] .= $E˜’–Õ¾òˆ[50] . $c³ƒæ×•–¥[$E˜’–Õ¾òˆ[262]]; } $c³ƒæ×•–¥[$E˜’–Õ¾òˆ[263]] = $this->name; goto DÌÄËâŠ¬‰; c¨ÂöÙìí: $E˜’–Õ¾òˆ =& $_SERVER[şÅ²é¤èİ]; if (is_array($c³ƒæ×•–¥)) { $c³ƒæ×•–¥ = array_merge($this->options, $c³ƒæ×•–¥); } $this->options = array(); goto c›ô–Ñ©ğ; DÌÄËâŠ¬‰: if (isset($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[257]]) && is_array($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[257]]) && !empty($dŞ»‹öÛ›ù) && !isset($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[264]]) && !isset($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[261]])) { foreach ($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[257]] as $fÎÀÆ”Í…ô => $Dâ™Œ‹¯Äô) { $fÎÀÆ”Í…ô = trim($fÎÀÆ”Í…ô); if (in_array($fÎÀÆ”Í…ô, $dŞ»‹öÛ›ù, !0)) { if (is_scalar($Dâ™Œ‹¯Äô)) { $this->_parseType($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[257]], $fÎÀÆ”Í…ô); } } elseif (!is_numeric($fÎÀÆ”Í…ô) && $E˜’–Õ¾òˆ[71] != substr($fÎÀÆ”Í…ô, 0, 1) && !1 === strpos($fÎÀÆ”Í…ô, $E˜’–Õ¾òˆ[92]) && !1 === strpos($fÎÀÆ”Í…ô, $E˜’–Õ¾òˆ[242]) && !1 === strpos($fÎÀÆ”Í…ô, $E˜’–Õ¾òˆ[265]) && !1 === strpos($fÎÀÆ”Í…ô, $E˜’–Õ¾òˆ[266])) { unset($c³ƒæ×•–¥[$E˜’–Õ¾òˆ[257]][$fÎÀÆ”Í…ô]); } } } $this->_options_filter($c³ƒæ×•–¥); return $c³ƒæ×•–¥; goto DÃšè¬È; DÃšè¬È: } protected function _options_filter(&$e‡ï¬Íˆ³) { } protected function _parseType(&$Eñğùœ­«, $bİ¬µ…) { $E°·„„Û«ª =& $_SERVER[şÅ²é¤èİ]; if (empty($this->options[$E°·„„Û«ª[267]][$E°·„„Û«ª[4] . $bİ¬µ…])) { $Båà±÷Ø³µ = strtolower($this->fields[$E°·„„Û«ª[182]][$bİ¬µ…]); if (!1 !== strpos($Båà±÷Ø³µ, $E°·„„Û«ª[268])) { } elseif (!1 === strpos($Båà±÷Ø³µ, $E°·„„Û«ª[269]) && !1 !== strpos($Båà±÷Ø³µ, $E°·„„Û«ª[270])) { $Eñğùœ­«[$bİ¬µ…] = intval($Eñğùœ­«[$bİ¬µ…]); } elseif (!1 !== strpos($Båà±÷Ø³µ, $E°·„„Û«ª[271]) || !1 !== strpos($Båà±÷Ø³µ, $E°·„„Û«ª[272])) { $Eñğùœ­«[$bİ¬µ…] = floatval($Eñğùœ­«[$bİ¬µ…]); } elseif (!1 !== strpos($Båà±÷Ø³µ, $E°·„„Û«ª[273])) { $Eñğùœ­«[$bİ¬µ…] = (bool) $Eñğùœ­«[$bİ¬µ…]; } } } public function find($FÄšÔ“ÙÑ = array()) { goto f¾³•Í•¼ê; f¾³•Í•¼ê: $b¼µ‘¬™ÊØ =& $_SERVER[şÅ²é¤èİ]; if (is_numeric($FÄšÔ“ÙÑ) || is_string($FÄšÔ“ÙÑ)) { $b³…‡ÄÍÍ²[$this->getPk()] = $FÄšÔ“ÙÑ; $this->options[$b¼µ‘¬™ÊØ[257]] = $b³…‡ÄÍÍ²; } $this->options[$b¼µ‘¬™ÊØ[274]] = 1; goto bˆœõÏ›†; bˆœõÏ›†: $FÄšÔ“ÙÑ = $this->_parseOptions(); $D½Îªè•éù = $this->db->select($FÄšÔ“ÙÑ); if (!1 === $D½Îªè•éù) { return !1; } goto aÕßÜã‹Ë; aÕßÜã‹Ë: if (empty($D½Îªè•éù)) { return null; } $this->data = $D½Îªè•éù[0]; $this->_afterFind($this->data, $FÄšÔ“ÙÑ); goto D˜¥­Íç„°; D˜¥­Íç„°: if (!empty($this->options[$b¼µ‘¬™ÊØ[275]])) { return $this->returnResult($this->data, $this->options[$b¼µ‘¬™ÊØ[275]]); } return $this->data; goto aËá¬´µ¼İ; aËá¬´µ¼İ: } protected function _afterFind(&$e¹Œ‡İòÄ”, $EÁ ¦ÉÖ¸Ê) { } protected function returnResult($C‰‘Œ‡”ß©, $F‰ÍŒà‹è‰ = '') { $aÌŒÂßŒÅ‘ =& $_SERVER[şÅ²é¤èİ]; if ($F‰ÍŒà‹è‰) { if (is_callable($F‰ÍŒà‹è‰)) { return call_user_func($F‰ÍŒà‹è‰, $C‰‘Œ‡”ß©); } switch (strtolower($F‰ÍŒà‹è‰)) { case $aÌŒÂßŒÅ‘[276]: return json_encode($C‰‘Œ‡”ß©); case $aÌŒÂßŒÅ‘[277]: return xml_encode($C‰‘Œ‡”ß©); } } return $C‰‘Œ‡”ß©; } public function parseFieldsMap($c¨ÃäãõÍ­, $c‡ßìñßÜ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $b¤ŒÃÛ†Õï => $CÖàõŞ³Ûç) { if ($c‡ßìñßÜ == 1) { if (isset($c¨ÃäãõÍ­[$CÖàõŞ³Ûç])) { $c¨ÃäãõÍ­[$b¤ŒÃÛ†Õï] = $c¨ÃäãõÍ­[$CÖàõŞ³Ûç]; unset($c¨ÃäãõÍ­[$CÖàõŞ³Ûç]); } } else { if (isset($c¨ÃäãõÍ­[$b¤ŒÃÛ†Õï])) { $c¨ÃäãõÍ­[$CÖàõŞ³Ûç] = $c¨ÃäãõÍ­[$b¤ŒÃÛ†Õï]; unset($c¨ÃäãõÍ­[$b¤ŒÃÛ†Õï]); } } } } return $c¨ÃäãõÍ­; } public function setField($e­³Î–šÜ, $fÙÔÑ·•Ğµ = '') { if (is_array($e­³Î–šÜ)) { $E‡ÊØÃİòø = $e­³Î–šÜ; } else { $E‡ÊØÃİòø[$e­³Î–šÜ] = $fÙÔÑ·•Ğµ; } return $this->save($E‡ÊØÃİòø); } public function setAdd($bíö”Ô‚©, $A×¡Ç¿Û´ = 1) { $BìÜ¢ç™Á¯ =& $_SERVER[şÅ²é¤èİ]; $E–ÖàÀ•ó§ = $bíö”Ô‚© . $BìÜ¢ç™Á¯[278] . $A×¡Ç¿Û´; if ($A×¡Ç¿Û´ < 0) { $E–ÖàÀ•ó§ = $bíö”Ô‚© . $A×¡Ç¿Û´; } return $this->setField($bíö”Ô‚©, array($BìÜ¢ç™Á¯[279], $E–ÖàÀ•ó§)); } public function getField($D‰çÃšÍõâ, $bææÎÚ¢Á = null) { $cêƒñ”¹“ =& $_SERVER[şÅ²é¤èİ]; $dØ©¦ù†“Ü[$cêƒñ”¹“[255]] = $D‰çÃšÍõâ; $dØ©¦ù†“Ü = $this->_parseOptions($dØ©¦ù†“Ü); $D‰çÃšÍõâ = trim($D‰çÃšÍõâ); if (strpos($D‰çÃšÍõâ, $cêƒñ”¹“[47])) { if (!isset($dØ©¦ù†“Ü[$cêƒñ”¹“[274]])) { $dØ©¦ù†“Ü[$cêƒñ”¹“[274]] = is_numeric($bææÎÚ¢Á) ? $bææÎÚ¢Á : $cêƒñ”¹“[33]; } $bø˜¨Œï = $this->db->select($dØ©¦ù†“Ü); if (!empty($bø˜¨Œï)) { goto DÏÃ‡Ù†–•; F³šÃ¨£: foreach ($bø˜¨Œï as $bë‡ÍÕØî) { $AøÕ’œ¦‘ç = $bë‡ÍÕØî[$dôÁŞâÄ’]; if (2 == $bó„Ú¬áÏ) { $E¢ñ‹£¶Ò¨[$AøÕ’œ¦‘ç] = $bë‡ÍÕØî[$DÔÚ¥…İ ]; } else { $E¢ñ‹£¶Ò¨[$AøÕ’œ¦‘ç] = is_string($bææÎÚ¢Á) ? implode($bææÎÚ¢Á, $bë‡ÍÕØî) : $bë‡ÍÕØî; } } return $E¢ñ‹£¶Ò¨; goto cÑà©°ĞÂ¸; B­‚¸Ö‡„: $DÔÚ¥…İ  = array_shift($D‰çÃšÍõâ); $E¢ñ‹£¶Ò¨ = array(); $bó„Ú¬áÏ = count($CŸ“Åµ¹«§); goto F³šÃ¨£; DÏÃ‡Ù†–•: $CŸ“Åµ¹«§ = explode($cêƒñ”¹“[47], $D‰çÃšÍõâ); $D‰çÃšÍõâ = array_keys($bø˜¨Œï[0]); $dôÁŞâÄ’ = array_shift($D‰çÃšÍõâ); goto B­‚¸Ö‡„; cÑà©°ĞÂ¸: } } else { if (!0 !== $bææÎÚ¢Á) { $dØ©¦ù†“Ü[$cêƒñ”¹“[274]] = is_numeric($bææÎÚ¢Á) ? $bææÎÚ¢Á : 1; } if ($bææÎÚ¢Á === $cêƒñ”¹“[237]) { unset($dØ©¦ù†“Ü[$cêƒñ”¹“[274]]); } $bë‡ÍÕØî = $this->db->select($dØ©¦ù†“Ü); if (!empty($bë‡ÍÕØî)) { if ($bææÎÚ¢Á === $cêƒñ”¹“[237]) { return reset($bë‡ÍÕØî[0]); } if (!0 !== $bææÎÚ¢Á && 1 == $dØ©¦ù†“Ü[$cêƒñ”¹“[274]]) { return reset($bë‡ÍÕØî[0]); } foreach ($bë‡ÍÕØî as $Dƒñ˜ÑÛ”) { $Fçê÷¯­»[] = $Dƒñ˜ÑÛ”[$D‰çÃšÍõâ]; } return $Fçê÷¯­»; } } return null; } public function create($EÌº†¬²·¾ = '', $b²ïáóŠÚ = '') { goto D¯Œ†êÚ§´; D¯Œ†êÚ§´: $CÚÆ—ĞÁî =& $_SERVER[şÅ²é¤èİ]; if (empty($EÌº†¬²·¾)) { $EÌº†¬²·¾ = $_POST; } elseif (is_object($EÌº†¬²·¾)) { $EÌº†¬²·¾ = get_object_vars($EÌº†¬²·¾); } if (empty($EÌº†¬²·¾) || !is_array($EÌº†¬²·¾)) { $this->error = think_lang($CÚÆ—ĞÁî[253]); return !1; } goto C”êÂÅÔ˜‘; C©£Ô ¼‰‘: if ($this->autoCheckFields) { $cóí±»³º¦ = $this->getDbFields(); foreach ($EÌº†¬²·¾ as $AìØª×Ü™ë => $aÊ´À‡) { if (!in_array($AìØª×Ü™ë, $cóí±»³º¦)) { unset($EÌº†¬²·¾[$AìØª×Ü™ë]); } elseif (MAGIC_QUOTES_GPC && is_string($aÊ´À‡)) { $EÌº†¬²·¾[$AìØª×Ü™ë] = stripslashes($aÊ´À‡); } } } $this->autoOperation($EÌº†¬²·¾, $b²ïáóŠÚ); $this->data = $EÌº†¬²·¾; goto FĞñ—¹¦ÃÚ; e“»êÑ„: if (isset($cóí±»³º¦)) { if (is_string($cóí±»³º¦)) { $cóí±»³º¦ = explode($CÚÆ—ĞÁî[47], $cóí±»³º¦); } if (think_config($CÚÆ—ĞÁî[280])) { $cóí±»³º¦[] = think_config($CÚÆ—ĞÁî[281]); } foreach ($EÌº†¬²·¾ as $AìØª×Ü™ë => $aÊ´À‡) { if (!in_array($AìØª×Ü™ë, $cóí±»³º¦)) { unset($EÌº†¬²·¾[$AìØª×Ü™ë]); } } } if (!$this->autoValidation($EÌº†¬²·¾, $b²ïáóŠÚ)) { return !1; } if (!$this->autoCheckToken($EÌº†¬²·¾)) { $this->error = think_lang($CÚÆ—ĞÁî[282]); return !1; } goto C©£Ô ¼‰‘; C”êÂÅÔ˜‘: $EÌº†¬²·¾ = $this->parseFieldsMap($EÌº†¬²·¾, 0); $b²ïáóŠÚ = $b²ïáóŠÚ ? $b²ïáóŠÚ : (!empty($EÌº†¬²·¾[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$CÚÆ—ĞÁî[255]])) { $cóí±»³º¦ = $this->options[$CÚÆ—ĞÁî[255]]; unset($this->options[$CÚÆ—ĞÁî[255]]); } elseif ($b²ïáóŠÚ == THINK_MODEL_INSERT && isset($this->insertFields)) { $cóí±»³º¦ = $this->insertFields; } elseif ($b²ïáóŠÚ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $cóí±»³º¦ = $this->updateFields; } goto e“»êÑ„; FĞñ—¹¦ÃÚ: return $EÌº†¬²·¾; goto bçª§‡§ñ¨; bçª§‡§ñ¨: } public function autoCheckToken($f‡Úêí½Î) { $F²ä†…¦ÏŠ =& $_SERVER[şÅ²é¤èİ]; if (isset($this->options[$F²ä†…¦ÏŠ[283]]) && !$this->options[$F²ä†…¦ÏŠ[283]]) { return !0; } if (think_config($F²ä†…¦ÏŠ[280])) { $C„ğåÍÊõË = think_config($F²ä†…¦ÏŠ[281]); if (!isset($f‡Úêí½Î[$C„ğåÍÊõË]) || Session::get($C„ğåÍÊõË)) { return !1; } list($dó¿±â–ÙŒ, $c‚ß½§¬‚) = explode($F²ä†…¦ÏŠ[71], $f‡Úêí½Î[$C„ğåÍÊõË]); if ($c‚ß½§¬‚ && Session::get($C„ğåÍÊõË . $F²ä†…¦ÏŠ[92] . $dó¿±â–ÙŒ) === $c‚ß½§¬‚) { Session::remove($C„ğåÍÊõË . $F²ä†…¦ÏŠ[92] . $dó¿±â–ÙŒ); return !0; } if (think_config($F²ä†…¦ÏŠ[284])) { Session::remove($C„ğåÍÊõË . $F²ä†…¦ÏŠ[92] . $dó¿±â–ÙŒ); } return !1; } return !0; } public function regex($BÄØÑğ¨¡, $D½±Ä¡¬½) { $C«œ‹Ò§’Ì =& $_SERVER[şÅ²é¤èİ]; $E‡æ¾÷¨¹ö = array($C«œ‹Ò§’Ì[285] => $C«œ‹Ò§’Ì[286], $C«œ‹Ò§’Ì[287] => $C«œ‹Ò§’Ì[288], $C«œ‹Ò§’Ì[289] => $C«œ‹Ò§’Ì[290], $C«œ‹Ò§’Ì[291] => $C«œ‹Ò§’Ì[292], $C«œ‹Ò§’Ì[293] => $C«œ‹Ò§’Ì[294], $C«œ‹Ò§’Ì[295] => $C«œ‹Ò§’Ì[296], $C«œ‹Ò§’Ì[297] => $C«œ‹Ò§’Ì[298], $C«œ‹Ò§’Ì[272] => $C«œ‹Ò§’Ì[299], $C«œ‹Ò§’Ì[300] => $C«œ‹Ò§’Ì[301]); if (isset($E‡æ¾÷¨¹ö[strtolower($D½±Ä¡¬½)])) { $D½±Ä¡¬½ = $E‡æ¾÷¨¹ö[strtolower($D½±Ä¡¬½)]; } return preg_match($D½±Ä¡¬½, $BÄØÑğ¨¡) === 1; } private function autoOperation(&$eÀæÉğøÀš, $Dä¶¾æÙ¢õ) { $D±ï‹ğãÓÍ =& $_SERVER[şÅ²é¤èİ]; if (!empty($this->options[$D±ï‹ğãÓÍ[302]])) { $dìàËÇÖ = $this->options[$D±ï‹ğãÓÍ[302]]; unset($this->options[$D±ï‹ğãÓÍ[302]]); } elseif (!empty($this->_auto)) { $dìàËÇÖ = $this->_auto; } if (isset($dìàËÇÖ)) { foreach ($dìàËÇÖ as $D¡Àµ¡£¦¯) { if (empty($D¡Àµ¡£¦¯[2])) { $D¡Àµ¡£¦¯[2] = THINK_MODEL_INSERT; } if ($Dä¶¾æÙ¢õ == $D¡Àµ¡£¦¯[2] || $D¡Àµ¡£¦¯[2] == THINK_MODEL_BOTH) { switch (trim($D¡Àµ¡£¦¯[3])) { case $D±ï‹ğãÓÍ[303]: case $D±ï‹ğãÓÍ[304]: $aåŠ£àá¡ = isset($D¡Àµ¡£¦¯[4]) ? (array) $D¡Àµ¡£¦¯[4] : array(); if (isset($eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]])) { array_unshift($aåŠ£àá¡, $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]]); } if ($D±ï‹ğãÓÍ[303] == $D¡Àµ¡£¦¯[3]) { $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]] = call_user_func_array($D¡Àµ¡£¦¯[1], $aåŠ£àá¡); } else { $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]] = call_user_func_array(array(&$this, $D¡Àµ¡£¦¯[1]), $aåŠ£àá¡); } break; case $D±ï‹ğãÓÍ[255]: $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]] = $eÀæÉğøÀš[$D¡Àµ¡£¦¯[1]]; break; case $D±ï‹ğãÓÍ[305]: if ($D±ï‹ğãÓÍ[33] === $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]]) { unset($eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]]); } break; case $D±ï‹ğãÓÍ[306]: default: $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]] = $D¡Àµ¡£¦¯[1]; } if (!1 === $eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]]) { unset($eÀæÉğøÀš[$D¡Àµ¡£¦¯[0]]); } } } } return $eÀæÉğøÀš; } protected function autoValidation($f‡Ä®ÁÅ¬”, $C„Š¯ÁÔ®) { $c“±º÷’‡¥ =& $_SERVER[şÅ²é¤èİ]; if (!empty($this->options[$c“±º÷’‡¥[307]])) { $fÔ¸¡³èÄ = $this->options[$c“±º÷’‡¥[307]]; unset($this->options[$c“±º÷’‡¥[307]]); } elseif (!empty($this->_validate)) { $fÔ¸¡³èÄ = $this->_validate; } if (isset($fÔ¸¡³èÄ)) { if ($this->patchValidate) { $this->error = array(); } foreach ($fÔ¸¡³èÄ as $A­¼Œ¶Á’Ø => $EÕ•‰ŒÇåÊ) { if (empty($EÕ•‰ŒÇåÊ[5]) || $EÕ•‰ŒÇåÊ[5] == THINK_MODEL_BOTH || $EÕ•‰ŒÇåÊ[5] == $C„Š¯ÁÔ®) { if (0 == strpos($EÕ•‰ŒÇåÊ[2], $c“±º÷’‡¥[308]) && strpos($EÕ•‰ŒÇåÊ[2], $c“±º÷’‡¥[309])) { $EÕ•‰ŒÇåÊ[2] = think_lang(substr($EÕ•‰ŒÇåÊ[2], 2, -1)); } $EÕ•‰ŒÇåÊ[3] = isset($EÕ•‰ŒÇåÊ[3]) ? $EÕ•‰ŒÇåÊ[3] : THINK_EXISTS_VALIDATE; $EÕ•‰ŒÇåÊ[4] = isset($EÕ•‰ŒÇåÊ[4]) ? $EÕ•‰ŒÇåÊ[4] : $c“±º÷’‡¥[310]; switch ($EÕ•‰ŒÇåÊ[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($f‡Ä®ÁÅ¬”, $EÕ•‰ŒÇåÊ)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($c“±º÷’‡¥[33] != trim($f‡Ä®ÁÅ¬”[$EÕ•‰ŒÇåÊ[0]])) { if (!1 === $this->_validationField($f‡Ä®ÁÅ¬”, $EÕ•‰ŒÇåÊ)) { return !1; } } break; default: if (isset($f‡Ä®ÁÅ¬”[$EÕ•‰ŒÇåÊ[0]])) { if (!1 === $this->_validationField($f‡Ä®ÁÅ¬”, $EÕ•‰ŒÇåÊ)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($e©“º†ÒÒº, $a†ôäÏÒÕ) { if (!1 === $this->_validationFieldItem($e©“º†ÒÒº, $a†ôäÏÒÕ)) { if ($this->patchValidate) { $this->error[$a†ôäÏÒÕ[0]] = $a†ôäÏÒÕ[2]; } else { $this->error = $a†ôäÏÒÕ[2]; return !1; } } return; } protected function _validationFieldItem($DƒØˆ•µ‘ª, $F®¥Š¬‹Œ) { $a‡ æÚ†õ” =& $_SERVER[şÅ²é¤èİ]; switch (strtolower(trim($F®¥Š¬‹Œ[4]))) { case $a‡ æÚ†õ”[303]: case $a‡ æÚ†õ”[304]: $bƒ†¡³²ÂÍ = isset($F®¥Š¬‹Œ[6]) ? (array) $F®¥Š¬‹Œ[6] : array(); if (is_string($F®¥Š¬‹Œ[0]) && strpos($F®¥Š¬‹Œ[0], $a‡ æÚ†õ”[47])) { $F®¥Š¬‹Œ[0] = explode($a‡ æÚ†õ”[47], $F®¥Š¬‹Œ[0]); } if (is_array($F®¥Š¬‹Œ[0])) { foreach ($F®¥Š¬‹Œ[0] as $Bä‘˜šÂÜ) { $A¨Û…®öø[$Bä‘˜šÂÜ] = $DƒØˆ•µ‘ª[$Bä‘˜šÂÜ]; } array_unshift($bƒ†¡³²ÂÍ, $A¨Û…®öø); } else { array_unshift($bƒ†¡³²ÂÍ, $DƒØˆ•µ‘ª[$F®¥Š¬‹Œ[0]]); } if ($a‡ æÚ†õ”[303] == $F®¥Š¬‹Œ[4]) { return call_user_func_array($F®¥Š¬‹Œ[1], $bƒ†¡³²ÂÍ); } else { return call_user_func_array(array(&$this, $F®¥Š¬‹Œ[1]), $bƒ†¡³²ÂÍ); } case $a‡ æÚ†õ”[311]: return $DƒØˆ•µ‘ª[$F®¥Š¬‹Œ[0]] == $DƒØˆ•µ‘ª[$F®¥Š¬‹Œ[1]]; case $a‡ æÚ†õ”[312]: if (is_string($F®¥Š¬‹Œ[0]) && strpos($F®¥Š¬‹Œ[0], $a‡ æÚ†õ”[47])) { $F®¥Š¬‹Œ[0] = explode($a‡ æÚ†õ”[47], $F®¥Š¬‹Œ[0]); } $B……İÍ¨Á = array(); if (is_array($F®¥Š¬‹Œ[0])) { foreach ($F®¥Š¬‹Œ[0] as $Bä‘˜šÂÜ) { $B……İÍ¨Á[$Bä‘˜šÂÜ] = $DƒØˆ•µ‘ª[$Bä‘˜šÂÜ]; } } else { $B……İÍ¨Á[$F®¥Š¬‹Œ[0]] = $DƒØˆ•µ‘ª[$F®¥Š¬‹Œ[0]]; } if (!empty($DƒØˆ•µ‘ª[$this->getPk()])) { $B……İÍ¨Á[$this->getPk()] = array($a‡ æÚ†õ”[313], $DƒØˆ•µ‘ª[$this->getPk()]); } if ($this->where($B……İÍ¨Á)->find()) { return !1; } return !0; default: return $this->check($DƒØˆ•µ‘ª[$F®¥Š¬‹Œ[0]], $F®¥Š¬‹Œ[1], $F®¥Š¬‹Œ[4]); } } public function check($F²ªÀÎµ¨, $a°ŒŞ×³­…, $d£´ƒÖ¨“ = "\x72\145\147\145\x78") { $E‚ÛÇïã =& $_SERVER[şÅ²é¤èİ]; $d£´ƒÖ¨“ = strtolower(trim($d£´ƒÖ¨“)); switch ($d£´ƒÖ¨“) { case $E‚ÛÇïã[7]: case $E‚ÛÇïã[314]: $Bİ³½‚„¼ë = is_array($a°ŒŞ×³­…) ? $a°ŒŞ×³­… : explode($E‚ÛÇïã[47], $a°ŒŞ×³­…); return $d£´ƒÖ¨“ == $E‚ÛÇïã[7] ? in_array($F²ªÀÎµ¨, $Bİ³½‚„¼ë) : !in_array($F²ªÀÎµ¨, $Bİ³½‚„¼ë); case $E‚ÛÇïã[315]: case $E‚ÛÇïã[316]: if (is_array($a°ŒŞ×³­…)) { $a«–†àÑŠ« = $a°ŒŞ×³­…[0]; $AË³…Ù°ñ = $a°ŒŞ×³­…[1]; } else { list($a«–†àÑŠ«, $AË³…Ù°ñ) = explode($E‚ÛÇïã[47], $a°ŒŞ×³­…); } return $d£´ƒÖ¨“ == $E‚ÛÇïã[315] ? $F²ªÀÎµ¨ >= $a«–†àÑŠ« && $F²ªÀÎµ¨ <= $AË³…Ù°ñ : $F²ªÀÎµ¨ < $a«–†àÑŠ« || $F²ªÀÎµ¨ > $AË³…Ù°ñ; case $E‚ÛÇïã[317]: case $E‚ÛÇïã[318]: return $d£´ƒÖ¨“ == $E‚ÛÇïã[317] ? $F²ªÀÎµ¨ == $a°ŒŞ×³­… : $F²ªÀÎµ¨ != $a°ŒŞ×³­…; case $E‚ÛÇïã[319]: $FÍŒåÁ‘‚‘ = mb_strlen($F²ªÀÎµ¨, $E‚ÛÇïã[320]); if (strpos($a°ŒŞ×³­…, $E‚ÛÇïã[47])) { list($a«–†àÑŠ«, $AË³…Ù°ñ) = explode($E‚ÛÇïã[47], $a°ŒŞ×³­…); return $FÍŒåÁ‘‚‘ >= $a«–†àÑŠ« && $FÍŒåÁ‘‚‘ <= $AË³…Ù°ñ; } else { return $FÍŒåÁ‘‚‘ == $a°ŒŞ×³­…; } case $E‚ÛÇïã[321]: list($CÆ²ô¢İˆ½, $FÍÉ¼„ÍÑÜ) = explode($E‚ÛÇïã[47], $a°ŒŞ×³­…); if (!is_numeric($CÆ²ô¢İˆ½)) { $CÆ²ô¢İˆ½ = strtotime($CÆ²ô¢İˆ½); } if (!is_numeric($FÍÉ¼„ÍÑÜ)) { $FÍÉ¼„ÍÑÜ = strtotime($FÍÉ¼„ÍÑÜ); } return NOW_TIME >= $CÆ²ô¢İˆ½ && NOW_TIME <= $FÍÉ¼„ÍÑÜ; case $E‚ÛÇïã[322]: return in_array(get_client_ip(), explode($E‚ÛÇïã[47], $a°ŒŞ×³­…)); case $E‚ÛÇïã[323]: return !in_array(get_client_ip(), explode($E‚ÛÇïã[47], $a°ŒŞ×³­…)); case $E‚ÛÇïã[310]: default: return $this->regex($F²ªÀÎµ¨, $a°ŒŞ×³­…); } } public function query($a‚¦ø·Ø„™, $AŒ†Ïà¾‡ = false) { $bŒğ¯É›¿ =& $_SERVER[şÅ²é¤èİ]; if (!is_bool($AŒ†Ïà¾‡) && !is_array($AŒ†Ïà¾‡)) { $AŒ†Ïà¾‡ = func_get_args(); array_shift($AŒ†Ïà¾‡); } $a‚¦ø·Ø„™ = str_replace(array($bŒğ¯É›¿[213], $bŒğ¯É›¿[324]), $bŒğ¯É›¿[50], $a‚¦ø·Ø„™); $a‚¦ø·Ø„™ = $this->parseSql($a‚¦ø·Ø„™, $AŒ†Ïà¾‡); return $this->db->query($a‚¦ø·Ø„™); } public function execute($a¶™¬ÜŸ, $eªœ·‹ã–é = false) { if (!is_bool($eªœ·‹ã–é) && !is_array($eªœ·‹ã–é)) { $eªœ·‹ã–é = func_get_args(); array_shift($eªœ·‹ã–é); } $a¶™¬ÜŸ = $this->parseSql($a¶™¬ÜŸ, $eªœ·‹ã–é); return $this->db->execute($a¶™¬ÜŸ); } protected function parseSql($Dë³ÚÎ“É´, $aâ³Çó°Çô) { $b¢õñ‚ Ú† =& $_SERVER[şÅ²é¤èİ]; if (!0 === $aâ³Çó°Çô) { $EìŞêÄ§æÍ = $this->_parseOptions(); $Dë³ÚÎ“É´ = $this->db->parseSql($Dë³ÚÎ“É´, $EìŞêÄ§æÍ); } elseif (is_array($aâ³Çó°Çô)) { $aâ³Çó°Çô = array_map(array($this->db, $b¢õñ‚ Ú†[325]), $aâ³Çó°Çô); $Dë³ÚÎ“É´ = vsprintf($Dë³ÚÎ“É´, $aâ³Çó°Çô); } else { $Dë³ÚÎ“É´ = strtr($Dë³ÚÎ“É´, array($b¢õñ‚ Ú†[326] => $this->getTableName(), $b¢õñ‚ Ú†[327] => think_config($b¢õñ‚ Ú†[227]))); } $this->db->setModel($this->name); return $Dë³ÚÎ“É´; } public function db($a´ô¶º»„† = '', $Bï–ğ©…´ = '', $b’¸…ŒŒ = array()) { goto dÙ¿Åàõ; aÅöŞĞ‚Ê: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto aåÍøÃÊ; e‚Ê´ÈÏê­: static $fœÈ¼óÒÍ­ = array(); if (!isset($fœÈ¼óÒÍ­[$a´ô¶º»„†]) || isset($fœÈ¼óÒÍ­[$a´ô¶º»„†]) && $Bï–ğ©…´ && $BÇ‡Ä‚¿¯Ø[$a´ô¶º»„†] != $Bï–ğ©…´) { if (!empty($Bï–ğ©…´) && is_string($Bï–ğ©…´) && !1 === strpos($Bï–ğ©…´, $Fï©ß¤áµÀ[8])) { $Bï–ğ©…´ = think_config($Bï–ğ©…´); } $fœÈ¼óÒÍ­[$a´ô¶º»„†] = Db::getInstance($Bï–ğ©…´); } elseif (NULL === $Bï–ğ©…´) { $fœÈ¼óÒÍ­[$a´ô¶º»„†]->close(); unset($fœÈ¼óÒÍ­[$a´ô¶º»„†]); return; } if (!empty($b’¸…ŒŒ)) { if (is_string($b’¸…ŒŒ)) { parse_str($b’¸…ŒŒ, $b’¸…ŒŒ); } foreach ($b’¸…ŒŒ as $bÃŠ“‘—ø¤ => $Aè¶ˆ°Èá) { $this->setProperty($bÃŠ“‘—ø¤, $Aè¶ˆ°Èá); } } goto e´ô˜Ê‘÷; dÙ¿Åàõ: $Fï©ß¤áµÀ =& $_SERVER[şÅ²é¤èİ]; if ($Fï©ß¤áµÀ[33] === $a´ô¶º»„† && $this->db) { return $this->db; } static $BÇ‡Ä‚¿¯Ø = array(); goto e‚Ê´ÈÏê­; e´ô˜Ê‘÷: $BÇ‡Ä‚¿¯Ø[$a´ô¶º»„†] = $Bï–ğ©…´; $this->db = $fœÈ¼óÒÍ­[$a´ô¶º»„†]; $this->_after_db(); goto aÅöŞĞ‚Ê; aåÍøÃÊ: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $eÁ±®ªùĞ = get_class($this); if ($eÁ±®ªùĞ == $_SERVER[şÅ²é¤èİ][328]) { return $this->name; } $this->name = substr($eÁ±®ªùĞ, 0, -5); } return $this->name; } public function getTableName() { $CĞÓŒÆ¸²§ =& $_SERVER[şÅ²é¤èİ]; if (empty($this->trueTableName)) { $d×Ì¼é¹Ù‚ = !empty($this->tablePrefix) ? $this->tablePrefix : $CĞÓŒÆ¸²§[33]; if (!empty($this->tableName)) { $d×Ì¼é¹Ù‚ .= $this->tableName; } else { $d×Ì¼é¹Ù‚ .= think_parse_name($this->name); } $this->trueTableName = strtolower($d×Ì¼é¹Ù‚); } return (!empty($this->dbName) ? $this->dbName . $CĞÓŒÆ¸²§[92] : $CĞÓŒÆ¸²§[33]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $AÌÚ¯×ÂæØ =& $_SERVER[şÅ²é¤èİ]; return isset($this->fields[$AÌÚ¯×ÂæØ[234]]) ? $this->fields[$AÌÚ¯×ÂæØ[234]] : $this->pk; } public function getDbFields() { $b‘²ôÅ»ÃÌ =& $_SERVER[şÅ²é¤èİ]; if (isset($this->options[$b‘²ôÅ»ÃÌ[261]])) { $e¡”ËË‡¨ = $this->db->getFields($this->options[$b‘²ôÅ»ÃÌ[261]]); return $e¡”ËË‡¨ ? array_keys($e¡”ËË‡¨) : !1; } if ($this->fields) { $e¡”ËË‡¨ = $this->fields; unset($e¡”ËË‡¨[$b‘²ôÅ»ÃÌ[233]], $e¡”ËË‡¨[$b‘²ôÅ»ÃÌ[234]], $e¡”ËË‡¨[$b‘²ôÅ»ÃÌ[182]], $e¡”ËË‡¨[$b‘²ôÅ»ÃÌ[232]]); return $e¡”ËË‡¨; } return !1; } public function data($B¹°¼§‘°ƒ = '') { $c…“˜‚ªÇ =& $_SERVER[şÅ²é¤èİ]; if ($c…“˜‚ªÇ[33] === $B¹°¼§‘°ƒ && !empty($this->data)) { return $this->data; } if (is_object($B¹°¼§‘°ƒ)) { $B¹°¼§‘°ƒ = get_object_vars($B¹°¼§‘°ƒ); } elseif (is_string($B¹°¼§‘°ƒ)) { parse_str($B¹°¼§‘°ƒ, $B¹°¼§‘°ƒ); } elseif (!is_array($B¹°¼§‘°ƒ)) { think_exception(think_lang($c…“˜‚ªÇ[253])); } $this->data = $B¹°¼§‘°ƒ; return $this; } public function join($C‰µÏÕ—¨¯) { $FÂ¨×æ¹¯ =& $_SERVER[şÅ²é¤èİ]; if (is_array($C‰µÏÕ—¨¯)) { $this->options[$FÂ¨×æ¹¯[264]] = $C‰µÏÕ—¨¯; } elseif (!empty($C‰µÏÕ—¨¯)) { $this->options[$FÂ¨×æ¹¯[264]][] = $C‰µÏÕ—¨¯; } return $this; } public function union($c¬ºÇØô†Ğ, $d°­÷×Ì¾š = false) { goto cˆ÷”Ë×ß; a£Œ¡¤ô˜: if (is_object($c¬ºÇØô†Ğ)) { $c¬ºÇØô†Ğ = get_object_vars($c¬ºÇØô†Ğ); } if (is_string($c¬ºÇØô†Ğ)) { $A´‘ßÙ‰½“ = $c¬ºÇØô†Ğ; } elseif (is_array($c¬ºÇØô†Ğ)) { if (isset($c¬ºÇØô†Ğ[0])) { $this->options[$F©µ¶¡ˆÒ­[329]] = array_merge($this->options[$F©µ¶¡ˆÒ­[329]], $c¬ºÇØô†Ğ); return $this; } else { $A´‘ßÙ‰½“ = $c¬ºÇØô†Ğ; } } else { think_exception(think_lang($F©µ¶¡ˆÒ­[253])); } $this->options[$F©µ¶¡ˆÒ­[329]][] = $A´‘ßÙ‰½“; goto bé÷¨Á‡Ê; cˆ÷”Ë×ß: $F©µ¶¡ˆÒ­ =& $_SERVER[şÅ²é¤èİ]; if (empty($c¬ºÇØô†Ğ)) { return $this; } if ($d°­÷×Ì¾š) { $this->options[$F©µ¶¡ˆÒ­[329]][$F©µ¶¡ˆÒ­[330]] = !0; } goto a£Œ¡¤ô˜; bé÷¨Á‡Ê: return $this; goto D©«å¦ìÕî; D©«å¦ìÕî: } public function cache($eòºÂƒÀóè = true, $Dóì‘£‚¸× = null, $DæçÍ”Ğ¦½ = '') { $A‚½Óåä¿ =& $_SERVER[şÅ²é¤èİ]; if (!1 !== $eòºÂƒÀóè) { $this->options[$A‚½Óåä¿[331]] = array($A‚½Óåä¿[88] => $eòºÂƒÀóè, $A‚½Óåä¿[321] => $Dóì‘£‚¸×, $A‚½Óåä¿[29] => $DæçÍ”Ğ¦½); } return $this; } public function field($D”†šÛß˜¢, $aØÖ£Ø‰ä = false) { $eøš¶¸¼öí =& $_SERVER[şÅ²é¤èİ]; if (!0 === $D”†šÛß˜¢) { $d†õæí·îª = $this->getDbFields(); $D”†šÛß˜¢ = $d†õæí·îª ? $d†õæí·îª : $eøš¶¸¼öí[171]; } elseif ($aØÖ£Ø‰ä) { if (is_string($D”†šÛß˜¢)) { $D”†šÛß˜¢ = explode($eøš¶¸¼öí[47], $D”†šÛß˜¢); } $d†õæí·îª = $this->getDbFields(); $D”†šÛß˜¢ = $d†õæí·îª ? array_diff($d†õæí·îª, $D”†šÛß˜¢) : $D”†šÛß˜¢; } $this->options[$eøš¶¸¼öí[255]] = $D”†šÛß˜¢; return $this; } public function scope($c™šİÜëğ = '', $e…‘¸„§ÄÖ = NULL) { $E¹ÏÊœÔÊò =& $_SERVER[şÅ²é¤èİ]; if ($E¹ÏÊœÔÊò[33] === $c™šİÜëğ) { if (isset($this->_scope[$E¹ÏÊœÔÊò[34]])) { $Eó†à’»å„ = $this->_scope[$E¹ÏÊœÔÊò[34]]; } else { return $this; } } elseif (is_string($c™šİÜëğ)) { $C¤°õæóæ = explode($E¹ÏÊœÔÊò[47], $c™šİÜëğ); $Eó†à’»å„ = array(); foreach ($C¤°õæóæ as $Eåœ©ƒÄÃ) { if (!isset($this->_scope[$Eåœ©ƒÄÃ])) { continue; } $Eó†à’»å„ = array_merge($Eó†à’»å„, $this->_scope[$Eåœ©ƒÄÃ]); } if (!empty($e…‘¸„§ÄÖ) && is_array($e…‘¸„§ÄÖ)) { $Eó†à’»å„ = array_merge($Eó†à’»å„, $e…‘¸„§ÄÖ); } } elseif (is_array($c™šİÜëğ)) { $Eó†à’»å„ = $c™šİÜëğ; } if (is_array($Eó†à’»å„) && !empty($Eó†à’»å„)) { $this->options = array_merge($this->options, array_change_key_case($Eó†à’»å„)); } return $this; } public function where($C¾•Äƒ¬Ï, $D§½™½˜ìÏ = null) { $AÌòàÌá¥Ö =& $_SERVER[şÅ²é¤èİ]; if (!is_null($D§½™½˜ìÏ) && is_string($C¾•Äƒ¬Ï)) { if (!is_array($D§½™½˜ìÏ)) { $D§½™½˜ìÏ = func_get_args(); array_shift($D§½™½˜ìÏ); } $D§½™½˜ìÏ = array_map(array($this->db, $AÌòàÌá¥Ö[325]), $D§½™½˜ìÏ); $C¾•Äƒ¬Ï = vsprintf($C¾•Äƒ¬Ï, $D§½™½˜ìÏ); } elseif (is_object($C¾•Äƒ¬Ï)) { $C¾•Äƒ¬Ï = get_object_vars($C¾•Äƒ¬Ï); } if (is_string($C¾•Äƒ¬Ï) && $AÌòàÌá¥Ö[33] != $C¾•Äƒ¬Ï) { $bÍÖÁªÒ¡ï = array(); $bÍÖÁªÒ¡ï[$AÌòàÌá¥Ö[332]] = $C¾•Äƒ¬Ï; $C¾•Äƒ¬Ï = $bÍÖÁªÒ¡ï; } if (isset($this->options[$AÌòàÌá¥Ö[257]])) { $this->options[$AÌòàÌá¥Ö[257]] = array_merge($this->options[$AÌòàÌá¥Ö[257]], $C¾•Äƒ¬Ï); } else { $this->options[$AÌòàÌá¥Ö[257]] = $C¾•Äƒ¬Ï; } return $this; } public function limit($a¾œŒ½óóÂ, $C ëööìï = null) { $DÅÌòª‹¤Š =& $_SERVER[şÅ²é¤èİ]; $this->options[$DÅÌòª‹¤Š[274]] = is_null($C ëööìï) ? $a¾œŒ½óóÂ : $a¾œŒ½óóÂ . $DÅÌòª‹¤Š[47] . $C ëööìï; return $this; } public function page($CàËÌ§À­, $B˜‡¥…æìµ = null) { $E¯¡â‡ÏÚÔ =& $_SERVER[şÅ²é¤èİ]; $this->options[$E¯¡â‡ÏÚÔ[333]] = is_null($B˜‡¥…æìµ) ? $CàËÌ§À­ : $CàËÌ§À­ . $E¯¡â‡ÏÚÔ[47] . $B˜‡¥…æìµ; return $this; } public function comment($B¶õğØÇÙ) { $this->options[$_SERVER[şÅ²é¤èİ][334]] = $B¶õğØÇÙ; return $this; } public function setProperty($D‘‰­„ “™, $EÈ¨ÕÄóñ¬) { if (property_exists($this, $D‘‰­„ “™)) { $this->{$D‘‰­„ “™} = $EÈ¨ÕÄóñ¬; } return $this; } } goto AÇ»±ÀÂ; E©„æÎÄ©Œ: class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\x63\145\137\162\145\x63\171\x63\x6c\x65"; protected $dataAuto = array(array("\x63\162\145\x61\x74\145\x54\x69\x6d\x65", "\x74\151\155\x65", "\151\x6e\163\x65\x72\x74", "\x66\165\156\x63\164\151\157\156")); public function listData($d„Ó¨Š¼îŸ = false) { $aä£†²¯’µ =& $_SERVER[şÅ²é¤èİ]; $d„Ó¨Š¼îŸ = $d„Ó¨Š¼îŸ ? $d„Ó¨Š¼îŸ : USER_ID; $F•ÂìÅÅæŸ = $this->where(array($aä£†²¯’µ[1336] => $d„Ó¨Š¼îŸ))->select(); return array_to_keyvalue($F•ÂìÅÅæŸ, $aä£†²¯’µ[33], $aä£†²¯’µ[363]); } public function moveToRecycle($b“˜­·®ƒ) { goto bå˜à ¤ÎÅ; Eœµ—ê•àŠ: $this->recycleMove($b“˜­·®ƒ, 1); if ($cù°…öè¸Ö[$bÜï‹è¯½Œ[364]] == $bÜï‹è¯½Œ[491]) { $C¢ßÙ®Ûø = array($bÜï‹è¯½Œ[516] => array($bÜï‹è¯½Œ[473], $cù°…öè¸Ö[$bÜï‹è¯½Œ[452]] . $b“˜­·®ƒ . $bÜï‹è¯½Œ[474])); $f©£‘ˆº×¼->where($C¢ßÙ®Ûø)->setField($bÜï‹è¯½Œ[390], 1); } goto CÁê·…ß¡; dÌ¹íÍÌà: if (!$cù°…öè¸Ö || $cù°…öè¸Ö[$bÜï‹è¯½Œ[390]] == $bÜï‹è¯½Œ[491]) { return; } $Dµ»Çë¹Æš = array($bÜï‹è¯½Œ[377] => $b“˜­·®ƒ, $bÜï‹è¯½Œ[1336] => USER_ID, $bÜï‹è¯½Œ[512] => $cù°…öè¸Ö[$bÜï‹è¯½Œ[365]], $bÜï‹è¯½Œ[513] => $cù°…öè¸Ö[$bÜï‹è¯½Œ[449]], $bÜï‹è¯½Œ[516] => $cù°…öè¸Ö[$bÜï‹è¯½Œ[452]]); $this->add($Dµ»Çë¹Æš); goto Eœµ—ê•àŠ; bå˜à ¤ÎÅ: $bÜï‹è¯½Œ =& $_SERVER[şÅ²é¤èİ]; $f©£‘ˆº×¼ = Model($bÜï‹è¯½Œ[1081]); $cù°…öè¸Ö = $f©£‘ˆº×¼->sourceInfo($b“˜­·®ƒ); goto dÌ¹íÍÌà; CÁê·…ß¡: } public function clear() { $this->remove(!1); } public function remove($Fá«¤Ÿ  = false) { goto AøÖÒ¸˜; AøÖÒ¸˜: $FÅ¶›—°°È =& $_SERVER[şÅ²é¤èİ]; $FøÒÈØø‰ = Model($FÅ¶›—°°È[1081]); $A½‡º‰ÛÁ = $this->listData(); goto BºŞ¡®Ğ«œ; c¡µ‹“ë£Ô: foreach ($fÎè¶¡Ôœ‹ as $Dåç¼õØåµ) { $FøÒÈØø‰->targetSpaceUpdate($Dåç¼õØåµ[$FÅ¶›—°°È[365]], $Dåç¼õØåµ[$FÅ¶›—°°È[449]]); } goto AÑ§¸Î´õÈ; BºŞ¡®Ğ«œ: $Fá«¤Ÿ  = $Fá«¤Ÿ  === !1 ? !1 : $Fá«¤Ÿ ; $fÎè¶¡Ôœ‹ = array(); foreach ($A½‡º‰ÛÁ as $bê¸…ÔÃ®À) { if ($Fá«¤Ÿ  != !1 && !in_array($bê¸…ÔÃ®À, $Fá«¤Ÿ )) { continue; } $FøÒÈØø‰->remove($bê¸…ÔÃ®À, !1); $AĞ…‚Ô„ÁÇ = $this->where(array($FÅ¶›—°°È[363] => $bê¸…ÔÃ®À))->find(); $Eê¬Ù¨›Â = $AĞ…‚Ô„ÁÇ[$FÅ¶›—°°È[365]] . $FÅ¶›—°°È[71] . $AĞ…‚Ô„ÁÇ[$FÅ¶›—°°È[449]]; $fÎè¶¡Ôœ‹[$Eê¬Ù¨›Â] = array($FÅ¶›—°°È[512] => $AĞ…‚Ô„ÁÇ[$FÅ¶›—°°È[365]], $FÅ¶›—°°È[449] => $AĞ…‚Ô„ÁÇ[$FÅ¶›—°°È[449]]); $this->where(array($FÅ¶›—°°È[363] => $bê¸…ÔÃ®À))->delete(); } goto c¡µ‹“ë£Ô; AÑ§¸Î´õÈ: } public function restore($b‡‹ÚÜ§‚ = false) { goto fÇéß‡ĞŒ–; a½šƒä¤ÌŞ: $b‡‹ÚÜ§‚ = $b‡‹ÚÜ§‚ == !1 ? !1 : $b‡‹ÚÜ§‚; if (!$D«ğæ‡¢ï¹) { return !0; } $d¸÷†Ã½ = array(); goto böÒ±ì—Öä; fÇéß‡ĞŒ–: $FÍƒ‘Åª‹ =& $_SERVER[şÅ²é¤èİ]; $A«…“Âë¹ = Model($FÍƒ‘Åª‹[1081]); $D«ğæ‡¢ï¹ = $this->listData(); goto a½šƒä¤ÌŞ; böÒ±ì—Öä: foreach ($D«ğæ‡¢ï¹ as $cêÎŸ¹ï‘¦) { goto DáªšË°ç½; A° ™‹˜ÃÜ: $d¸÷†Ã½[] = $cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[454]]; if ($cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[364]] == $FÍƒ‘Åª‹[491]) { $d¸÷†Ã½[] = $cêÎŸ¹ï‘¦; } $A«…“Âë¹->lockMoveEnd($cêÎŸ¹ï‘¦); goto d£óÑêÅôä; bŞ÷æœƒš: if ($cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[364]] == $FÍƒ‘Åª‹[491]) { $EÒ¿ª±ÊÒ³ = array($FÍƒ‘Åª‹[516] => array($FÍƒ‘Åª‹[473], $cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[452]] . $cêÎŸ¹ï‘¦ . $FÍƒ‘Åª‹[474])); $A«…“Âë¹->where($EÒ¿ª±ÊÒ³)->setField($FÍƒ‘Åª‹[390], 0); } $this->where(array($FÍƒ‘Åª‹[363] => $cêÎŸ¹ï‘¦))->delete(); $A«…“Âë¹->folderSizeReset($cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[454]]); goto A° ™‹˜ÃÜ; B˜Ë›Å¼–: if ($AàÓªÚØÃ¹[$FÍƒ‘Åª‹[390]] == $FÍƒ‘Åª‹[491]) { continue; } $A«…“Âë¹->lockMoveStart($cêÎŸ¹ï‘¦); $this->recycleMove($cêÎŸ¹ï‘¦, 0); goto bŞ÷æœƒš; DáªšË°ç½: if ($b‡‹ÚÜ§‚ != !1 && !in_array($cêÎŸ¹ï‘¦, $b‡‹ÚÜ§‚)) { continue; } $cÖÑ¶Ø‹—ù = $A«…“Âë¹->sourceInfo($cêÎŸ¹ï‘¦); $AàÓªÚØÃ¹ = $A«…“Âë¹->sourceInfo($cÖÑ¶Ø‹—ù[$FÍƒ‘Åª‹[454]]); goto B˜Ë›Å¼–; d£óÑêÅôä: } $A«…“Âë¹->updateModifyTime($d¸÷†Ã½); goto cò›Ú‹é×é; cò›Ú‹é×é: } private function recycleMove($CÜ÷†„¹˜—, $Aµãíöåêî = 1) { $cñ©¥„ÊÛÑ =& $_SERVER[şÅ²é¤èİ]; $F²ÌÃÛ’å = Model($cñ©¥„ÊÛÑ[1081]); $a¸æÜÊ¢‡ = Model($cñ©¥„ÊÛÑ[2246]); $e§Š‚…¡„ = array($cñ©¥„ÊÛÑ[363] => $CÜ÷†„¹˜—); if ($Aµãíöåêî) { $F²ÌÃÛ’å->where($e§Š‚…¡„)->setField($cñ©¥„ÊÛÑ[390], 1); $a¸æÜÊ¢‡->eventRecycle($CÜ÷†„¹˜—, $cñ©¥„ÊÛÑ[2247]); } else { $F–éå¡İ¶ = $F²ÌÃÛ’å->where($e§Š‚…¡„)->find(); $e¶õ†Õµñ = $F–éå¡İ¶[$cñ©¥„ÊÛÑ[364]] == $cñ©¥„ÊÛÑ[491]; $Bù‘Ö›ï· = $F²ÌÃÛ’å->fileNameAuto($F–éå¡İ¶[$cñ©¥„ÊÛÑ[454]], $F–éå¡İ¶[$cñ©¥„ÊÛÑ[28]], REPEAT_RENAME_FOLDER, $e¶õ†Õµñ); if ($Bù‘Ö›ï· != $F–éå¡İ¶[$cñ©¥„ÊÛÑ[28]]) { $F²ÌÃÛ’å->rename($CÜ÷†„¹˜—, $Bù‘Ö›ï·); } $F²ÌÃÛ’å->where($e§Š‚…¡„)->setField($cñ©¥„ÊÛÑ[390], 0); $a¸æÜÊ¢‡->eventRecycle($CÜ÷†„¹˜—, $cñ©¥„ÊÛÑ[2248]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\171\x73\164\145\155\x2e\163\x74\157\x72\141\x67\x65\x4c\x69\x73\x74"; public $field = array("\156\141\x6d\145", "\163\x69\172\x65\115\x61\x78", "\x73\171\163\164\145\x6d", "\x64\x65\x66\x61\165\x6c\164", "\144\162\151\x76\145\x72", "\143\157\x6e\146\x69\x67"); public function listData($bŒÇåŸ²â× = false, $CÊöÉ¸µ–º = "\x6d\157\x64\x69\x66\171\124\151\x6d\x65", $A×”¯¿¶‘ = false) { goto dÄÁ¢÷Ü»Å; dàù²¬ˆ: foreach ($BØÕ¢µè‚ as $B•ğ–«å® => $C‹Õ‚é­´) { unset($BØÕ¢µè‚[$B•ğ–«å®][$F ‘Ç¹Û©[6]]); $BØÕ¢µè‚[$B•ğ–«å®][$F ‘Ç¹Û©[1995]] = 0; } $C•ºóŠ– ¬ = array_to_keyvalue($BØÕ¢µè‚, $F ‘Ç¹Û©[33], $F ‘Ç¹Û©[361]); $this->_listAppendSize($BØÕ¢µè‚, $C•ºóŠ– ¬); goto Cé¬¶çà¦¾; dÄÁ¢÷Ü»Å: $F ‘Ç¹Û© =& $_SERVER[şÅ²é¤èİ]; $BØÕ¢µè‚ = parent::listData($bŒÇåŸ²â×, $CÊöÉ¸µ–º, $A×”¯¿¶‘); if ($bŒÇåŸ²â×) { return $BØÕ¢µè‚; } goto dàù²¬ˆ; Cé¬¶çà¦¾: return $BØÕ¢µè‚; goto A­ôÅ…Á×ß; A­ôÅ…Á×ß: } public function _listAppendSize(&$b®Í•¢ŸİÕ, $f´»›¬±â¢) { $aš‰”ÖóÒ =& $_SERVER[şÅ²é¤èİ]; $EÓèÂÀÂ¿ = $aš‰”ÖóÒ[2249] . implode($aš‰”ÖóÒ[47], $f´»›¬±â¢) . $aš‰”ÖóÒ[2250]; $b²Ÿæ‹®á© = Model($aš‰”ÖóÒ[715])->query($EÓèÂÀÂ¿); $b²Ÿæ‹®á© = array_to_keyvalue($b²Ÿæ‹®á©, $aš‰”ÖóÒ[361], $aš‰”ÖóÒ[78]); foreach ($b®Í•¢ŸİÕ as $c‚‘éë·ñ± => $d¾˜¹ÉÙô™) { $b®Í•¢ŸİÕ[$c‚‘éë·ñ±][$aš‰”ÖóÒ[1995]] = isset($b²Ÿæ‹®á©[$d¾˜¹ÉÙô™[$aš‰”ÖóÒ[361]]]) ? $b²Ÿæ‹®á©[$d¾˜¹ÉÙô™[$aš‰”ÖóÒ[361]]] : 0; } } public function getConfig($cÄƒ‘Ë×Š) { $C¼óæ¨£ÕÁ = parent::listData($cÄƒ‘Ë×Š); return json_decode($C¼óæ¨£ÕÁ[$_SERVER[şÅ²é¤èİ][6]], !0); } public function update($fÍ…Ş„»µ, $E‹ó¯µÃÁô) { goto c¼¡Ç¼’Ó; d›†›Æ¹é: if (isset($BÓ¿…ÌŠÒ[$bÅ˜ÍóîòÁ]) && $BÓ¿…ÌŠÒ[$bÅ˜ÍóîòÁ][$B‚ ‚×Øàó[361]] != $fÍ…Ş„»µ) { return !1; } if (isset($E‹ó¯µÃÁô[$B‚ ‚×Øàó[2251]]) && $E‹ó¯µÃÁô[$B‚ ‚×Øàó[2251]] == $B‚ ‚×Øàó[491]) { $this->checkConfig($E‹ó¯µÃÁô); } unset($E‹ó¯µÃÁô[$B‚ ‚×Øàó[2251]]); goto cÈò‰Ûà§ğ; cÈò‰Ûà§ğ: $AÙÁš² = parent::update($fÍ…Ş„»µ, $E‹ó¯µÃÁô); if ($AÙÁš² && $E‹ó¯µÃÁô[$B‚ ‚×Øàó[34]]) { foreach ($BÓ¿…ÌŠÒ as $EĞ‡İîöÔ÷) { if ($EĞ‡İîöÔ÷[$B‚ ‚×Øàó[34]] && $EĞ‡İîöÔ÷[$B‚ ‚×Øàó[361]] != $fÍ…Ş„»µ) { parent::update($EĞ‡İîöÔ÷[$B‚ ‚×Øàó[361]], array($B‚ ‚×Øàó[34] => 0)); } } } return $AÙÁš²; goto e¿¹éù™; c¼¡Ç¼’Ó: $B‚ ‚×Øàó =& $_SERVER[şÅ²é¤èİ]; $bÅ˜ÍóîòÁ = $E‹ó¯µÃÁô[$B‚ ‚×Øàó[28]]; $BÓ¿…ÌŠÒ = array_to_keyvalue(parent::listData(), $B‚ ‚×Øàó[28]); goto d›†›Æ¹é; e¿¹éù™: } public function add($AìÛ×Ü‰Œ) { goto cô‰·ì²½¦; f¨™Ó£©¾­: $this->checkConfig($AìÛ×Ü‰Œ); $b§ÁÂÔÍ˜ƒ = parent::insert($AìÛ×Ü‰Œ); if ($b§ÁÂÔÍ˜ƒ && $AìÛ×Ü‰Œ[$a˜ÒØ§á´[34]]) { foreach ($Dç‹Í®í« as $BŠ–Ê£ˆó) { if ($BŠ–Ê£ˆó[$a˜ÒØ§á´[34]]) { parent::update($BŠ–Ê£ˆó[$a˜ÒØ§á´[361]], array($a˜ÒØ§á´[34] => 0)); } } } goto E¢£í¡¸¥ö; cô‰·ì²½¦: $a˜ÒØ§á´ =& $_SERVER[şÅ²é¤èİ]; $Dç‹Í®í« = array_to_keyvalue(parent::listData(), $a˜ÒØ§á´[28]); if (isset($Dç‹Í®í«[$AìÛ×Ü‰Œ[$a˜ÒØ§á´[28]]])) { return !1; } goto f¨™Ó£©¾­; E¢£í¡¸¥ö: return $b§ÁÂÔÍ˜ƒ; goto EÎîÛçÍéŠ; EÎîÛçÍéŠ: } public function checkConfig(&$AÌÀöéÁ¤–) { goto B­¬Ã¼ˆ‹…; aí¨‚›Çâ: $AÌÀöéÁ¤–[$aÛà¸ƒÊ­¹[6]] = json_encode($e«İ¼¸ñ­í); $AÌÀöéÁ¤–[$aÛà¸ƒÊ­¹[89]] = $dëÅÆÒƒ×; return !0; goto FË…Ş±¨Œî; EÇ ¤ô‘à: $eÄ‡…˜ÃÕÒ = $aÛà¸ƒÊ­¹[72] . $dëÅÆÒƒ×; $F©½œ’ë‚„ = new $eÄ‡…˜ÃÕÒ($e«İ¼¸ñ­í); if (in_array($eŒñğÈÃ†, $F©½œ’ë‚„->objectDriver)) { if (!$F©½œ’ë‚„->isBucketCors() && !$F©½œ’ë‚„->setBucketCors()) { show_json(LNG($aÛà¸ƒÊ­¹[2252]), !1); } } goto D¼†óÛ°ö¢; A’ÂŸÎñ²ˆ: foreach ($e«İ¼¸ñ­í as $d«î¸ßôê => $b†ë®»ÎÏÛ) { $e«İ¼¸ñ­í[$d«î¸ßôê] = trim($b†ë®»ÎÏÛ); } $dÔà¶ÄÜ = rtrim($e«İ¼¸ñ­í[$aÛà¸ƒÊ­¹[1001]], $aÛà¸ƒÊ­¹[8]) . $aÛà¸ƒÊ­¹[8]; $dëÅÆÒƒ× = $this->driverType($eŒñğÈÃ†); goto EÇ ¤ô‘à; B­¬Ã¼ˆ‹…: $aÛà¸ƒÊ­¹ =& $_SERVER[şÅ²é¤èİ]; $eŒñğÈÃ† = strtolower($AÌÀöéÁ¤–[$aÛà¸ƒÊ­¹[89]]); $e«İ¼¸ñ­í = json_decode_force($AÌÀöéÁ¤–[$aÛà¸ƒÊ­¹[6]]); goto A’ÂŸÎñ²ˆ; D¼†óÛ°ö¢: $c¨£’ƒã„Æ = $F©½œ’ë‚„->getPath($dÔà¶ÄÜ . $aÛà¸ƒÊ­¹[1892]); if (!$F©½œ’ë‚„->mkfile($c¨£’ƒã„Æ)) { show_json(LNG($aÛà¸ƒÊ­¹[2253]), !1); } $e«İ¼¸ñ­í[$aÛà¸ƒÊ­¹[1001]] = $dÔà¶ÄÜ; goto aí¨‚›Çâ; FË…Ş±¨Œî: } private function driverType($fÕˆ¨½˜‡Ç) { $F‚ê¼œ¢È =& $_SERVER[şÅ²é¤èİ]; $DÃööêØÙœ = array($F‚ê¼œ¢È[102] => $F‚ê¼œ¢È[2254], $F‚ê¼œ¢È[58] => $F‚ê¼œ¢È[2255], $F‚ê¼œ¢È[65] => $F‚ê¼œ¢È[1002]); if (isset($DÃööêØÙœ[$fÕˆ¨½˜‡Ç])) { return $DÃööêØÙœ[$fÕˆ¨½˜‡Ç]; } return strtoupper($fÕˆ¨½˜‡Ç); } public function driverListSystem() { $eÙåÈç©°Å =& $_SERVER[şÅ²é¤èİ]; $B„¡áŸ´ĞÀ = parent::listData(); $b‹­æš”×À = array(); foreach ($B„¡áŸ´ĞÀ as $AÇ¶—Œß­) { unset($AÇ¶—Œß­[$eÙåÈç©°Å[183]], $AÇ¶—Œß­[$eÙåÈç©°Å[106]]); $AÇ¶—Œß­[$eÙåÈç©°Å[6]] = json_decode_force($AÇ¶—Œß­[$eÙåÈç©°Å[6]]); $b‹­æš”×À[] = $AÇ¶—Œß­; } return $b‹­æš”×À; } public function defaultDriver() { $DàñøõÌò =& $_SERVER[şÅ²é¤èİ]; $dêÚøï®Úï = parent::listData(); $C ËĞ«ÙŠ“ = array_filter_by_field($dêÚøï®Úï, $DàñøõÌò[34], 1); $C ËĞ«ÙŠ“ = $C ËĞ«ÙŠ“[0]; if ($C ËĞ«ÙŠ“) { $C ËĞ«ÙŠ“[$DàñøõÌò[6]] = json_decode($C ËĞ«ÙŠ“[$DàñøõÌò[6]], !0); } return $C ËĞ«ÙŠ“; } public function driverInfo($Fê²®¤İÅ) { $c­œÉ‚ß¢ =& $_SERVER[şÅ²é¤èİ]; $eÑšÎùµÍ¡ = array_to_keyvalue(parent::listData(), $c­œÉ‚ß¢[361]); if (!isset($eÑšÎùµÍ¡[$Fê²®¤İÅ])) { return !1; } $Fó‘±Œ¿»Ö = $eÑšÎùµÍ¡[$Fê²®¤İÅ]; $Fó‘±Œ¿»Ö[$c­œÉ‚ß¢[6]] = json_decode_force($Fó‘±Œ¿»Ö[$c­œÉ‚ß¢[6]]); return $Fó‘±Œ¿»Ö; } public function removeWithFile($DÚõš›´) { goto aŒœ™Ï Ğ˜; aŒœ™Ï Ğ˜: $fºï¼âÄ÷º =& $_SERVER[şÅ²é¤èİ]; $FÕ¢š÷Ö = array($fºï¼âÄ÷º[716] => $DÚõš›´); $FÇõŸ„âá = Model($fºï¼âÄ÷º[415])->where($FÕ¢š÷Ö)->count(); goto bïô¸—­à; bïô¸—­à: $DÒªšáñß³ = Model($fºï¼âÄ÷º[415])->where($FÕ¢š÷Ö)->sum($fºï¼âÄ÷º[78]); $D²‚×éâù = new TaskFileTransfer($fºï¼âÄ÷º[2256] . $DÚõš›´, $fºï¼âÄ÷º[2257], $FÇõŸ„âá, LNG($fºï¼âÄ÷º[2258]) . "\x28{$DÚõš›´}\x29"); $D²‚×éâù->task[$fºï¼âÄ÷º[691]] = $DÒªšáñß³; goto aç‹»¸÷ğÍ; Dš³“Éô£à: $dİ¯²ø¡ì¤ = Model($fºï¼âÄ÷º[162])->where($FÕ¢š÷Ö)->field($fºï¼âÄ÷º[2259])->select(); foreach ($dİ¯²ø¡ì¤ as $D‚Èø‹éğ–) { goto Dñ©¿àìÑ±; FÈ‘•ß¾İÑ: Model($fºï¼âÄ÷º[162])->where($FÕ¢š÷Ö)->save($fÛĞ‚ÓÎÌ«); goto E‡¯Ò«º‡; Dñ©¿àìÑ±: $A©îĞ®İ‘Ê = $D‚Èø‹éğ–[$fºï¼âÄ÷º[76]]; $cƒ„Æâ· = $F•É†¯É½ . str_replace("\173\x69\157\72{$DÚõš›´}\x7d\57", $fºï¼âÄ÷º[33], $A©îĞ®İ‘Ê); if (!IO::exist($A©îĞ®İ‘Ê)) { $this->removeByFileID($D‚Èø‹éğ–[$fºï¼âÄ÷º[412]]); continue; } goto F’í–¡²õ¦; F’í–¡²õ¦: if (!IO::exist($cƒ„Æâ·) && !IO::move($A©îĞ®İ‘Ê, $cƒ„Æâ·)) { continue; } $FÕ¢š÷Ö = array($fºï¼âÄ÷º[412] => $D‚Èø‹éğ–[$fºï¼âÄ÷º[412]]); $fÛĞ‚ÓÎÌ« = array($fºï¼âÄ÷º[716] => $c§–È¯äÍ, $fºï¼âÄ÷º[76] => $cƒ„Æâ·); goto FÈ‘•ß¾İÑ; E‡¯Ò«º‡: } return parent::remove($DÚõš›´); goto FÖâ÷ãÔÉè; aç‹»¸÷ğÍ: $e§Ó»¿ªÛ¤ = KodIO::defaultDriver(); $c§–È¯äÍ = $e§Ó»¿ªÛ¤[$fºï¼âÄ÷º[361]]; $F•É†¯É½ = "\x7b\x69\x6f\x3a{$c§–È¯äÍ}\175\x2f"; goto Dš³“Éô£à; FÖâ÷ãÔÉè: } public function progress($fòâïÚŠµğ) { return Task::get($_SERVER[şÅ²é¤èİ][2256] . $fòâïÚŠµğ); } private function removeByFileID($fİä…š™õ) { $aòâ˜ÒÖ” =& $_SERVER[şÅ²é¤èİ]; $E¶õ—¸Îèé = Model($aòâ˜ÒÖ”[1081])->field($aòâ˜ÒÖ”[2236])->where(array($aòâ˜ÒÖ”[412] => $fİä…š™õ))->select(); $E¶õ—¸Îèé = array_to_keyvalue($E¶õ—¸Îèé, $aòâ˜ÒÖ”[33], $aòâ˜ÒÖ”[363]); foreach ($E¶õ—¸Îèé as $F¼”†éØõ) { Model($aòâ˜ÒÖ”[376])->remove($F¼”†éØõ, !1); } } } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\155\56\114\151\x67\150\x74\x41\x70\x70"; public $modelType = "\123\171\163\164\145\155\x4f\x70\164\x69\x6f\156"; public $field = array("\x6e\x61\x6d\x65", "\x67\x72\x6f\x75\x70", "\x64\145\x73\143", "\x63\x6f\x6e\164\x65\x6e\164"); public function listData($có¯‹â = false, $bŒ–·ˆ¢Ç = "\155\x6f\144\151\146\171\x54\x69\x6d\x65", $C×©â£Ÿæ± = true) { return parent::listData($có¯‹â, $bŒ–·ˆ¢Ç, $C×©â£Ÿæ±); } public function remove($eäÑ”Ì£Ô) { $E„¨ñÔÖ¯— = $this->findByName($eäÑ”Ì£Ô); if (!$E„¨ñÔÖ¯—) { return !1; } return parent::remove($E„¨ñÔÖ¯—[$_SERVER[şÅ²é¤èİ][361]]); } public function add($AŠ¨ÌÕŠ­) { if ($this->findByName($AŠ¨ÌÕŠ­[$_SERVER[şÅ²é¤èİ][28]])) { return !1; } return parent::insert($AŠ¨ÌÕŠ­); } public function update($CÛÔ™¤’Ë, $dÒ©æ Ôéë) { $FµñŸçØµì =& $_SERVER[şÅ²é¤èİ]; $c›ì™Üòô× = $this->findByName($CÛÔ™¤’Ë); $cèšÄİÈÙÓ = $this->findByName($dÒ©æ Ôéë[$FµñŸçØµì[28]]); if (!$c›ì™Üòô× || $cèšÄİÈÙÓ && $cèšÄİÈÙÓ[$FµñŸçØµì[361]] != $c›ì™Üòô×[$FµñŸçØµì[361]]) { return !1; } return parent::update($c›ì™Üòô×[$FµñŸçØµì[361]], $dÒ©æ Ôéë); } } goto fÜÅÜÆ›¥Ş; b‹­§Ü§«: class PathDriverDbShareLink extends PathDriverDB { public function __construct($B‘›¼«ˆ±Ë) { $this->pathParse = $B‘›¼«ˆ±Ë; $this->model = Model($_SERVER[şÅ²é¤èİ][1081]); } protected function infoParse($fßïô¹´Ğ, $F¹¤ç»Øïƒ = false, $cÓ¨±¤Ì§‚ = false) { $fÔ‰í‚‰¿ =& $_SERVER[şÅ²é¤èİ]; return Action($fÔ‰í‚‰¿[995])->sharePathInfo($this->pathParse[$fÔ‰í‚‰¿[76]], !0); } public function listAll($cğ°ù  ¡Ä) { $bàõ‡¢Òé =& $_SERVER[şÅ²é¤èİ]; $c‰‘ÁÆõÁî = IO::info($this->pathParse[$bàõ‡¢Òé[76]]); if (!$c‰‘ÁÆõÁî) { return array(); } $E¥ÆÙ‘ÈÆ = $this->model->listAll($cğ°ù  ¡Ä); foreach ($E¥ÆÙ‘ÈÆ as &$ešğŞŠä²ô) { $ešğŞŠä²ô[$bàõ‡¢Òé[385]] = Action($bàõ‡¢Òé[995])->itemInfo($ešğŞŠä²ô[$bàõ‡¢Òé[385]]); $DÍºß©Ñâ = substr($ešğŞŠä²ô[$bàõ‡¢Òé[76]], strpos(ltrim($ešğŞŠä²ô[$bàõ‡¢Òé[76]], $bàõ‡¢Òé[8]), $bàõ‡¢Òé[8]) + 1); $ešğŞŠä²ô[$bàõ‡¢Òé[385]][$bàõ‡¢Òé[76]] = $this->pathParse[$bàõ‡¢Òé[990]] . $DÍºß©Ñâ; } return $E¥ÆÙ‘ÈÆ; } } class PathDriverDriverShareItem { public function __construct($fÙ÷Á„ï£Ä) { $this->pathParse = $fÙ÷Á„ï£Ä; } public function __call($AŒÕ»Œ’ÆÁ, $C¥å‚’ˆ‘«) { $AëÅÊˆˆÊ =& $_SERVER[şÅ²é¤èİ]; if (method_exists($this, $AŒÕ»Œ’ÆÁ)) { return; } $F£ç«ğÛ  = call_user_func_array(array($AëÅÊˆˆÊ[1088], $AŒÕ»Œ’ÆÁ), $C¥å‚’ˆ‘«); $f‘äì¨î¦ç = array($AëÅÊˆˆÊ[1089], $AëÅÊˆˆÊ[1090], $AëÅÊˆˆÊ[1091], $AëÅÊˆˆÊ[1092], $AëÅÊˆˆÊ[480], $AëÅÊˆˆÊ[482], $AëÅÊˆˆÊ[1093], $AëÅÊˆˆÊ[90], $AëÅÊˆˆÊ[1094], $AëÅÊˆˆÊ[1095]); if (in_array($AŒÕ»Œ’ÆÁ, $f‘äì¨î¦ç)) { $F£ç«ğÛ  = $this->getPathOuter($F£ç«ğÛ ); } return $F£ç«ğÛ ; } public function copy($A‡±¦Æ¤³, $Få£¾¦¸¿, $d‚ÈÅñáâ‹ = false) { return $this->copyMove($A‡±¦Æ¤³, $Få£¾¦¸¿, $d‚ÈÅñáâ‹, $_SERVER[şÅ²é¤èİ][480]); } public function move($a¾ƒïà°Ìğ, $dµ’Æ¡Ôâ, $dôŒ·÷ƒ˜Ú = false) { return $this->copyMove($a¾ƒïà°Ìğ, $dµ’Æ¡Ôâ, $dôŒ·÷ƒ˜Ú, $_SERVER[şÅ²é¤èİ][482]); } private function copyMove($a¿¢öÌÄ¬”, $Dîğ¸”Ğ„, $b´”—ÛºÔÁ, $eÅ«™©óŸ) { goto d½šš¯âÀÂ; d½šš¯âÀÂ: $E¼¦”ÔÍìŠ =& $_SERVER[şÅ²é¤èİ]; $cÛäÛÕ™Ÿñ = $Dîğ¸”Ğ„; $D ÆŒˆ„£´ = IO::driverMake($Dîğ¸”Ğ„); goto bœ²‰ñÂ‚; D¨Äëä¶ä: return $aÄŒöğ ê; goto BŠÈê¥¥; bœ²‰ñÂ‚: if ($D ÆŒˆ„£´->pathParse[$E¼¦”ÔÍìŠ[975]]) { $Dîğ¸”Ğ„ = $D ÆŒˆ„£´->pathParse[$E¼¦”ÔÍìŠ[975]]; } else { $Dîğ¸”Ğ„ = $cÛäÛÕ™Ÿñ; } $aÄŒöğ ê = IO::copyMove($a¿¢öÌÄ¬”, $Dîğ¸”Ğ„, $b´”—ÛºÔÁ, $eÅ«™©óŸ); $aÄŒöğ ê = $this->getPathOuter($aÄŒöğ ê); goto D¨Äëä¶ä; BŠÈê¥¥: } public function pathFather($aÊ•²ù¸¸À) { return get_path_father($this->pathParse[$_SERVER[şÅ²é¤èİ][76]]); } public function iconvSystem($A›å•¶‰çë) { return $A›å•¶‰çë; } protected function infoParse($a·ÌŠ—Á”) { $CÚ‚ñÖÒ§¹ =& $_SERVER[şÅ²é¤èİ]; $Aá£à‡ÓË = $this->pathParse[$CÚ‚ñÖÒ§¹[432]][$CÚ‚ñÖÒ§¹[996]] . $this->pathParse[$CÚ‚ñÖÒ§¹[989]]; $F ¹ƒğ¡Ş = IO::info($Aá£à‡ÓË); $aÊæÓªİ”¹ = $this->pathParse[$CÚ‚ñÖÒ§¹[432]]; return Action($CÚ‚ñÖÒ§¹[1087])->_shareItemeParse($F ¹ƒğ¡Ş, $aÊæÓªİ”¹); } public function listAll($E”Ó¾à¶â) { $D–¾Ø‰Õ¬… =& $_SERVER[şÅ²é¤èİ]; $e˜ç™…‚åÒ = IO::listAll($E”Ó¾à¶â); $a‰ÌÆß£â = $this->pathParse[$D–¾Ø‰Õ¬…[432]]; foreach ($e˜ç™…‚åÒ as &$f«¤÷‚è˜) { check_abort(); $f«¤÷‚è˜ = array_merge(IO::info($f«¤÷‚è˜[$D–¾Ø‰Õ¬…[76]]), $f«¤÷‚è˜); $f«¤÷‚è˜[$D–¾Ø‰Õ¬…[385]] = Action($D–¾Ø‰Õ¬…[1087])->_shareItemeParse($f«¤÷‚è˜, $a‰ÌÆß£â); } return $e˜ç™…‚åÒ; } public function getPathOuter($Fì©ÛøİÛô) { goto B¿™±’Îá; F‡õÓï«‘: if (substr($b×âÈâÜõì, 0, strlen($E¨«´ó‹İ)) != $E¨«´ó‹İ) { return !1; } return $this->pathParse[$d±ß¦Šà¯é[990]] . $d±ß¦Šà¯é[8] . ltrim($B«ê÷ŸÆÒƒ, $d±ß¦Šà¯é[8]); goto D³´ìÕä¤; B¿™±’Îá: $d±ß¦Šà¯é =& $_SERVER[şÅ²é¤èİ]; $D”¸¯œæ’ = KodIO::parse($Fì©ÛøİÛô); if ($D”¸¯œæ’[$d±ß¦Šà¯é[29]] == KodIO::KOD_SHARE_ITEM) { return $D”¸¯œæ’[$d±ß¦Šà¯é[76]]; } goto aÑéöŸö¢»; aÑéöŸö¢»: $b×âÈâÜõì = KodIO::clear($Fì©ÛøİÛô); $E¨«´ó‹İ = KodIO::clear($this->pathParse[$d±ß¦Šà¯é[432]][$d±ß¦Šà¯é[996]]); $B«ê÷ŸÆÒƒ = substr($b×âÈâÜõì, strlen($E¨«´ó‹İ)); goto F‡õÓï«‘; D³´ìÕä¤: } public function getType() { $AèÉØˆˆß =& $_SERVER[şÅ²é¤èİ]; $cÀ¦ÎÜĞ¼å = str_replace($AèÉØˆˆß[72], $AèÉØˆˆß[33], get_class($this)); return strtolower($cÀ¦ÎÜĞ¼å); } public function isTypeObject($cãÕ±ä«ùµ) { return IO::isTypeObject($cãÕ±ä«ùµ); } public function info($C¡¸å…öŒ‹) { return $this->infoParse($C¡¸å…öŒ‹); } public function infoAuth($Dñ›¸¼ÂÆî) { return $this->infoParse($Dñ›¸¼ÂÆî); } public function infoWithChildren($fÚÇÚ¤ï•) { return $this->infoParse($fÚÇÚ¤ï•); } public function infoFull($F¯ŒéÑ™½‚) { return $this->infoParse($F¯ŒéÑ™½‚); } } class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($dÜëù–ƒÉÛ) { $this->pathParse = $dÜëù–ƒÉÛ; } protected function infoParse($dÛë¢£ç‹ã) { $Dèî¨Õäëñ =& $_SERVER[şÅ²é¤èİ]; return Action($Dèî¨Õäëñ[995])->sharePathInfo($this->pathParse[$Dèî¨Õäëñ[76]], !0); } public function listAll($eÕ†ó…¯’´) { $Fæ±‘·Êƒ =& $_SERVER[şÅ²é¤èİ]; $bÂõ• ¶ÁŠ = IO::listAll($eÕ†ó…¯’´); foreach ($bÂõ• ¶ÁŠ as &$dµ¨Ëøš˜) { check_abort(); $dµ¨Ëøš˜ = array_merge(IO::info($dµ¨Ëøš˜[$Fæ±‘·Êƒ[76]]), $dµ¨Ëøš˜); $dµ¨Ëøš˜[$Fæ±‘·Êƒ[385]] = Action($Fæ±‘·Êƒ[995])->itemInfo($dµ¨Ëøš˜); $D«©Î¤Ù‘· = substr($dµ¨Ëøš˜[$Fæ±‘·Êƒ[76]], strpos(ltrim($dµ¨Ëøš˜[$Fæ±‘·Êƒ[76]], $Fæ±‘·Êƒ[8]), $Fæ±‘·Êƒ[8]) + 1); $dµ¨Ëøš˜[$Fæ±‘·Êƒ[385]][$Fæ±‘·Êƒ[76]] = $this->pathParse[$Fæ±‘·Êƒ[990]] . $D«©Î¤Ù‘·; } return $bÂõ• ¶ÁŠ; } } goto EÀáƒëÎñø; bµ«ÔÊë‹: class BackupDbFile { public function __construct() { } public function index() { goto eñ¹‹Í½îø; C¦øø‚ÔŒ : return !0; goto cÔØ®÷…ËŠ; d‘Ï¢ùŠùŸ: $fğˆØÙ’‚Š = TEMP_FILES . "\142\141\x63\153\165\x70\137{$d½Üò–¾öç}\57"; $C–– ÒôÙ„ = "\173\151\157\x3a{$d°ÏÆ¿ÊÒÃ[$a¸¼Ş¯°¶[684]]}\x7d\x2f\144\141\x74\141\x62\x61\x73\x65\x2f"; IO::mkdir($C–– ÒôÙ„ . "\x62\141\143\x6b\165\x70\x5f{$d½Üò–¾öç}\57"); goto Eë’¢ÊáŠ; e—©×êŞÈ: IO::copy($fÔãÍÏë¡ë, $C–– ÒôÙ„ . "\142\141\x63\153\165\160\137{$d½Üò–¾öç}\x2f"); $B‰ÁÖ½’”->end(); Backup::set(array($a¸¼Ş¯°¶[736] => $Aªºë¼•‘‹[$a¸¼Ş¯°¶[78]])); goto C¦øø‚ÔŒ ; eñ¹‹Í½îø: $a¸¼Ş¯°¶ =& $_SERVER[şÅ²é¤èİ]; $d°ÏÆ¿ÊÒÃ = Backup::get(); $d½Üò–¾öç = $d°ÏÆ¿ÊÒÃ[$a¸¼Ş¯°¶[28]]; goto d‘Ï¢ùŠùŸ; Eë’¢ÊáŠ: $B‰ÁÖ½’” = new TaskFileTransfer($a¸¼Ş¯°¶[733], $a¸¼Ş¯°¶[704], 0, LNG($a¸¼Ş¯°¶[705]) . $a¸¼Ş¯°¶[405] . LNG($a¸¼Ş¯°¶[707]) . $a¸¼Ş¯°¶[734]); $B‰ÁÖ½’”->addPath($fğˆØÙ’‚Š); $Aªºë¼•‘‹ = IO::infoWithChildren($fğˆØÙ’‚Š); goto aš´Ş¯¤Á³; aš´Ş¯¤Á³: Backup::set(array($a¸¼Ş¯°¶[732] => $Aªºë¼•‘‹[$a¸¼Ş¯°¶[78]])); IO::move($fğˆØÙ’‚Š, $C–– ÒôÙ„); $fÔãÍÏë¡ë = CONTROLLER_DIR . $a¸¼Ş¯°¶[737]; goto e—©×êŞÈ; cÔØ®÷…ËŠ: } } class BackupFile { public function __construct() { } public function index() { goto b”‰çÉò½‘; b”‰çÉò½‘: $Böé†”»â = Backup::get(); $c•çÖ‘î = $Böé†”»â[$_SERVER[şÅ²é¤èİ][275]][$_SERVER[şÅ²é¤èİ][162]][$_SERVER[şÅ²é¤èİ][412]]; $cõÂºà°æ = array($_SERVER[şÅ²é¤èİ][413] => array($_SERVER[şÅ²é¤èİ][738], $c•çÖ‘î), $_SERVER[şÅ²é¤èİ][739] => array($_SERVER[şÅ²é¤èİ][313], $Böé†”»â[$_SERVER[şÅ²é¤èİ][684]])); goto D§ôšâ¢Ç; fµèÙßÚµ: $fñ‰Ş’™¡â = array(); $aÎï¥‡ŒÉª = $eÊ›é»æƒÃ = 0; do { $F“®ÔïÛ = $_SERVER[şÅ²é¤èİ][744]; $fÎƒ‚¤ù¸ = Model($_SERVER[şÅ²é¤èİ][715])->where($cõÂºà°æ)->field($F“®ÔïÛ)->order($_SERVER[şÅ²é¤èİ][745])->selectPage($fÜ¯Ôµ½Æš, $eÑ‚ë­‚); $e½²Œ‰†´™ = !empty($fÎƒ‚¤ù¸[$_SERVER[şÅ²é¤èİ][347]]) ? $fÎƒ‚¤ù¸[$_SERVER[şÅ²é¤èİ][347]] : array(); foreach ($e½²Œ‰†´™ as $eóëµ¢§êå) { goto b†«‡É‰éì; a‚åãÚ”ÃÛ: if ($D×»½¤„Š >= 1024 * 1024 * 50) { $C«¯áÁ®¥ = array($_SERVER[şÅ²é¤èİ][750] => $c•çÖ‘î, $_SERVER[şÅ²é¤èİ][751] => $eÊ›é»æƒÃ, $_SERVER[şÅ²é¤èİ][752] => $aÎï¥‡ŒÉª); Backup::set($C«¯áÁ®¥); $D×»½¤„Š = $F®œ÷à»ÈÏ = 0; } goto câ´ñ¥ôµ; E¯™¼¦ìŞ: if (IO::exist($f›½Ô½¯‡)) { $D½Ä„¦«—->updateFileEnd($eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][28]], $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][78]]); } else { $f›½Ô½¯‡ = get_path_father($f›½Ô½¯‡); $BŒµƒôÛ‚ = IO::mkdir($f›½Ô½¯‡); if (!$BŒµƒôÛ‚ || !IO::copy($bÉË£¡¾µ¡, $f›½Ô½¯‡, $_SERVER[şÅ²é¤èİ][747])) { write_log($_SERVER[şÅ²é¤èİ][748] . $bÉË£¡¾µ¡ . $_SERVER[şÅ²é¤èİ][749] . $f›½Ô½¯‡ . $_SERVER[şÅ²é¤èİ][466], $_SERVER[şÅ²é¤èİ][704]); continue; } } $c•çÖ‘î = $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][412]]; $F®œ÷à»ÈÏ += 1; goto cêİ©¹î¥; b†«‡É‰éì: if (!$this->_fileExist($eóëµ¢§êå, $fñ‰Ş’™¡â)) { $a²ôì‰§½ -= 1; $b™˜¿Ô„ù‡ -= (int) $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][78]]; write_log("\146\151\154\145\x20\x6e\x6f\164\40\145\170\151\x73\164\x2e\146\151\154\x65\111\104\72{$eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][412]]}\x2c\x20\x70\x61\x74\150\72{$eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][76]]}", $_SERVER[şÅ²é¤èİ][746]); continue; } $bÉË£¡¾µ¡ = $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][76]]; $f›½Ô½¯‡ = "\173\151\157\x3a{$Böé†”»â[$_SERVER[şÅ²é¤èİ][684]]}\x7d" . substr($bÉË£¡¾µ¡, strlen("\173\151\157\72{$eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][716]]}\x7d")); goto E¯™¼¦ìŞ; cêİ©¹î¥: $D×»½¤„Š += $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][78]]; $eÊ›é»æƒÃ += 1; $aÎï¥‡ŒÉª += $eóëµ¢§êå[$_SERVER[şÅ²é¤èİ][78]]; goto a‚åãÚ”ÃÛ; câ´ñ¥ôµ: } $BÔÕ­¯Ëö = count($e½²Œ‰†´™); $eÑ‚ë­‚++; } while ($BÔÕ­¯Ëö == $fÜ¯Ôµ½Æš); goto fâ«Ó’œÓ; f§Æ—Ñ´»: Backup::set($C«¯áÁ®¥); $this->_fileFilter($fñ‰Ş’™¡â); return !0; goto EÏ™¦Ëì¸‘; fâ«Ó’œÓ: $D½Ä„¦«—->end(); $C«¯áÁ®¥ = array($_SERVER[şÅ²é¤èİ][753] => 1, $_SERVER[şÅ²é¤èİ][696] => time(), $_SERVER[şÅ²é¤èİ][702] => 1, $_SERVER[şÅ²é¤èİ][750] => $c•çÖ‘î, $_SERVER[şÅ²é¤èİ][743] => $b™˜¿Ô„ù‡, $_SERVER[şÅ²é¤èİ][742] => $a²ôì‰§½); if ($F®œ÷à»ÈÏ) { $C«¯áÁ®¥[$_SERVER[şÅ²é¤èİ][751]] = $eÊ›é»æƒÃ; $C«¯áÁ®¥[$_SERVER[şÅ²é¤èİ][752]] = $aÎï¥‡ŒÉª; } goto f§Æ—Ñ´»; D§ôšâ¢Ç: $a²ôì‰§½ = (int) Model($_SERVER[şÅ²é¤èİ][715])->where($cõÂºà°æ)->count($_SERVER[şÅ²é¤èİ][412]); $b™˜¿Ô„ù‡ = (int) Model($_SERVER[şÅ²é¤èİ][715])->where($cõÂºà°æ)->sum($_SERVER[şÅ²é¤èİ][78]); $D½Ä„¦«— = new TaskFileTransfer($_SERVER[şÅ²é¤èİ][740], $_SERVER[şÅ²é¤èİ][704], $a²ôì‰§½, LNG($_SERVER[şÅ²é¤èİ][705]) . $_SERVER[şÅ²é¤èİ][706] . LNG($_SERVER[şÅ²é¤èİ][741])); goto Fõ¢“‚ÄÙà; CÁ‘æ²ä¡‰: $eÑ‚ë­‚ = 1; $fÜ¯Ôµ½Æš = 1000; $D×»½¤„Š = $F®œ÷à»ÈÏ = 0; goto fµèÙßÚµ; Fõ¢“‚ÄÙà: $D½Ä„¦«—->task[$_SERVER[şÅ²é¤èİ][691]] = $b™˜¿Ô„ù‡; $C«¯áÁ®¥ = array($_SERVER[şÅ²é¤èİ][742] => $a²ôì‰§½, $_SERVER[şÅ²é¤èİ][743] => $b™˜¿Ô„ù‡); Backup::set($C«¯áÁ®¥); goto CÁ‘æ²ä¡‰; EÏ™¦Ëì¸‘: } private function _fileExist($EÂ ¾¿éÂ, &$E„‰Õ‘“ìß) { goto e­Ô¢ä³÷; e­Ô¢ä³÷: $Cğ™í³® =& $_SERVER[şÅ²é¤èİ]; $Eî˜¬¯É = $EÂ ¾¿éÂ[$Cğ™í³®[76]]; if (in_array($EÂ ¾¿éÂ[$Cğ™í³®[412]], $E„‰Õ‘“ìß)) { return !1; } goto a‹¤¶ã­Ä˜; d“Èƒö“ÄÀ: return !1; goto Fè¡¹òãÏ„; B»æ™„í¹Á: $fßˆù—˜º£ = array($Cğ™í³®[716] => $EÂ ¾¿éÂ[$Cğ™í³®[716]], $Cğ™í³®[76] => array($Cğ™í³®[754], "{$BÚÂ¹Şª¡}\45")); $BÚçƒ‹¼Î‘ = Model($Cğ™í³®[715])->where($fßˆù—˜º£)->field($Cğ™í³®[413])->select(); $E„‰Õ‘“ìß = array_merge($E„‰Õ‘“ìß, array_to_keyvalue($BÚçƒ‹¼Î‘, $Cğ™í³®[33], $Cğ™í³®[412])); goto d“Èƒö“ÄÀ; a‹¤¶ã­Ä˜: if (IO::exist($Eî˜¬¯É)) { return !0; } $BÚÂ¹Şª¡ = get_path_father($Eî˜¬¯É); if (IO::exist($BÚÂ¹Şª¡)) { $E„‰Õ‘“ìß[] = $EÂ ¾¿éÂ[$Cğ™í³®[412]]; return !1; } goto B»æ™„í¹Á; Fè¡¹òãÏ„: } private function _fileFilter($eêÓ—ó¡) { $C†ö•¥Ê…§ =& $_SERVER[şÅ²é¤èİ]; if (empty($eêÓ—ó¡)) { return; } $D±¹ó­·¨ = array($C†ö•¥Ê…§[412] => array($C†ö•¥Ê…§[7], array_unique($eêÓ—ó¡))); $C¼†áœáù = Model($C†ö•¥Ê…§[755])->where($D±¹ó­·¨)->field($C†ö•¥Ê…§[363])->select(); foreach ($C¼†áœáù as $b£ĞÄ¸ê¾”) { Model($C†ö•¥Ê…§[755])->remove($b£ĞÄ¸ê¾”[$C†ö•¥Ê…§[363]], !1); } } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto Ağ¡¥÷Ş; C‘«ÑØ·šŠ: $a­ÃØ¶ßÃ = $GLOBALS[$b´åò†öÉĞ[6]][$b´åò†öÉĞ[331]]; $D÷Ú®µŞª = $a­ÃØ¶ßÃ[$a­ÃØ¶ßÃ[$b´åò†öÉĞ[756]]]; $BÃ¼– à§à = $a­ÃØ¶ßÃ[$b´åò†öÉĞ[757]]; goto BÏ£Ìàô½; BÏ£Ìàô½: switch ($a­ÃØ¶ßÃ[$b´åò†öÉĞ[756]]) { case $b´åò†öÉĞ[17]: self::$handle = Model($b´åò†öÉĞ[758]); break; case $b´åò†öÉĞ[759]: self::$handle = new CacheRedis($D÷Ú®µŞª, $BÃ¼– à§à); break; case $b´åò†öÉĞ[760]: self::$handle = new CacheMemcached($D÷Ú®µŞª, $BÃ¼– à§à); break; case $b´åò†öÉĞ[162]: self::$handle = new CacheFile($D÷Ú®µŞª, $BÃ¼– à§à); break; default: break; } return self::$handle; goto AÈÓôäçÛ¦; Ağ¡¥÷Ş: $b´åò†öÉĞ =& $_SERVER[şÅ²é¤èİ]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto C‘«ÑØ·šŠ; AÈÓôäçÛ¦: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($D˜‹ÍŒéö¦) { if (is_array($D˜‹ÍŒéö¦) || is_object($D˜‹ÍŒéö¦)) { $D˜‹ÍŒéö¦ = json_encode($D˜‹ÍŒéö¦); } $D˜‹ÍŒéö¦ = rawurlencode($D˜‹ÍŒéö¦); return KOD_SITE_ID . $_SERVER[şÅ²é¤èİ][71] . $D˜‹ÍŒéö¦; } public static function get($FìƒÈœËË) { $FŒî½‰ƒßµ = self::key($FìƒÈœËË); if (!isset(self::$memoryCache[$FŒî½‰ƒßµ])) { CacheLock::lock($FìƒÈœËË); $aŞÓ¡»‹Éå = self::init()->get($FŒî½‰ƒßµ); CacheLock::unlock($FìƒÈœËË); self::$memoryCache[$FŒî½‰ƒßµ] = unserialize($aŞÓ¡»‹Éå); } return self::$memoryCache[$FŒî½‰ƒßµ]; } public static function set($e°ËøóÕñò, $a®Âí«ñ–¹, $AÍÖ–ìùù = false) { goto AºÕÂº®™¯; b«ŞáÄ÷¬: CacheLock::lock($e°ËøóÕñò); $e÷Øî£éõš = self::init()->set($fë˜Ğ¶ğ¹, serialize($a®Âí«ñ–¹), $AÍÖ–ìùù); self::$memoryCache[$fë˜Ğ¶ğ¹] = $a®Âí«ñ–¹; goto eêâ¦È®‡; AºÕÂº®™¯: $fë˜Ğ¶ğ¹ = self::key($e°ËøóÕñò); if (isset(self::$memoryCache[$fë˜Ğ¶ğ¹]) && self::$memoryCache[$fë˜Ğ¶ğ¹] === $a®Âí«ñ–¹) { return !0; } if ($AÍÖ–ìùù === 0) { self::$memoryCache[$fë˜Ğ¶ğ¹] = $a®Âí«ñ–¹; return !0; } goto b«ŞáÄ÷¬; eêâ¦È®‡: CacheLock::unlock($e°ËøóÕñò); return $e÷Øî£éõš; goto dø°Ó´–¯; dø°Ó´–¯: } public static function remove($F¥ÌÂç±ø) { goto B«±Ì³´Ä; B×Š´½»èº: CacheLock::lock($F¥ÌÂç±ø); $cµ‘’İ„± = self::init()->remove($Bò×àõˆÓ); CacheLock::unlock($F¥ÌÂç±ø); goto Bß¦’øñ“¼; B«±Ì³´Ä: $Bò×àõˆÓ = self::key($F¥ÌÂç±ø); unset(self::$memoryCache[$Bò×àõˆÓ]); self::clearTimeout(); goto B×Š´½»èº; Bß¦’øñ“¼: return $cµ‘’İ„±; goto Aï¢´åĞø±; Aï¢´åĞø±: } public static function clearMemory($båÍÊÅÒ½ = false) { if ($båÍÊÅÒ½) { $båÍÊÅÒ½ = self::key($båÍÊÅÒ½); unset(self::$memoryCache[$båÍÊÅÒ½]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[şÅ²é¤èİ][761])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[şÅ²é¤èİ][762])) { self::init()->clearTimeout(); } } } goto e‡ÍŠÖ§Ëğ; fù¡“¡«Ã: function ActionCall($Cğ‘À‚³ò) { $E÷ºÎ…–¬Ï = array_slice(func_get_args(), 1); return ActionApply($Cğ‘À‚³ò, $E÷ºÎ…–¬Ï); } function ActionCallApi($E¯…Öó„Á¸, $EÑ÷²ğòÇ = '') { goto Eğ²®ØÌ› ; CÉƒˆÍùò¹: $a¥›Ù‰íÒ« = json_decode($Dâ¢íÓöË», !0); $c¶ÂÍ­èÉ± = is_array($a¥›Ù‰íÒ«) ? $a¥›Ù‰íÒ« : array($bÃß˜•×Şç[30] => null, $bÃß˜•×Şç[31] => $Dâ¢íÓöË»); if (!$a¥›Ù‰íÒ«) { echo $Dâ¢íÓöË»; } goto eÉ˜¯Ë‘Ù; bğéˆ¥Ûö½: $Eî•ÅÛğÚÃ = phpBinCommand(); if ($Eî•ÅÛğÚÃ && function_exists($bÃß˜•×Şç[23])) { $Cè³í¥½Ñ¥ = $Eî•ÅÛğÚÃ . $bÃß˜•×Şç[24] . BASIC_PATH . $bÃß˜•×Şç[25] . escapeshellarg($E¯…Öó„Á¸); $Dâ¢íÓöË» = shell_exec($Cè³í¥½Ñ¥); } if (!$Dâ¢íÓöË») { $eÏĞ‡°·¾‹ = stream_context_create(array($bÃß˜•×Şç[26] => array($bÃß˜•×Şç[27] => 20, $bÃß˜•×Şç[28] => $bÃß˜•×Şç[29]))); $Dâ¢íÓöË» = file_get_contents(app_host_get() . $E¯…Öó„Á¸, !1, $eÏĞ‡°·¾‹); } goto CÉƒˆÍùò¹; eÉ˜¯Ë‘Ù: return $c¶ÂÍ­èÉ±; goto e½Ò•ÁĞ¢¦; dÈª‡ó±ù×: $D®Äà’µ×ò = Action($bÃß˜•×Şç[21])->accessToken(); $E¯…Öó„Á¸ = str_replace($bÃß˜•×Şç[3], $bÃß˜•×Şç[2], $E¯…Öó„Á¸) . $bÃß˜•×Şç[22] . $D®Äà’µ×ò . $D××é¥‰Ä÷; $Dâ¢íÓöË» = $bÃß˜•×Şç[18]; goto bğéˆ¥Ûö½; Eğ²®ØÌ› : $bÃß˜•×Şç =& $_SERVER[–úÍí†Ø]; $D××é¥‰Ä÷ = $EÑ÷²ğòÇ; if (is_array($EÑ÷²ğòÇ)) { $D××é¥‰Ä÷ = $bÃß˜•×Şç[18]; foreach ($EÑ÷²ğòÇ as $f…ÙòÎ†¾ => $c‰Ÿá×ôï°) { $c‰Ÿá×ôï° = is_array($c‰Ÿá×ôï°) ? json_encode($c‰Ÿá×ôï°) : $c‰Ÿá×ôï°; $c‰Ÿá×ôï° = is_bool($c‰Ÿá×ôï°) ? intval($c‰Ÿá×ôï°) : $c‰Ÿá×ôï°; $D××é¥‰Ä÷ .= $bÃß˜•×Şç[19] . $f…ÙòÎ†¾ . $bÃß˜•×Şç[20] . rawurlencode($c‰Ÿá×ôï°); } } goto dÈª‡ó±ù×; e½Ò•ÁĞ¢¦: } function ActionCallHook($bà¶à´Ù) { goto d•£º¥ƒª; d•£º¥ƒª: $e£Á«ïÒÆé =& $_SERVER[–úÍí†Ø]; ob_start(); $A‡’œŠë¬ = array_slice(func_get_args(), 1); goto D’„§‹óÚó; B÷âŠÖ†Í: $CßŞÑ¢¸µÇ = $F‚Ëğ­»™ï ? json_decode($F‚Ëğ­»™ï, !0) : $CßŞÑ¢¸µÇ; $GLOBALS[$e£Á«ïÒÆé[32]] = 0; return $CßŞÑ¢¸µÇ; goto DÃğòƒ…ŒÂ; D’„§‹óÚó: $GLOBALS[$e£Á«ïÒÆé[32]] = 1; $CßŞÑ¢¸µÇ = ActionApply($bà¶à´Ù, $A‡’œŠë¬); $F‚Ëğ­»™ï = ob_get_clean(); goto B÷âŠÖ†Í; DÃğòƒ…ŒÂ: } goto d‡Ä‘ ó‹; d‚ìÓªÑõö: register_shutdown_function($_SERVER[–úÍí†Ø][33]); set_error_handler($_SERVER[–úÍí†Ø][46], $bˆ‘ò­§‘); if (function_exists($_SERVER[–úÍí†Ø][47])) { set_exception_handler($_SERVER[–úÍí†Ø][48]); } goto aââ¨Šöñó; d®ä¿Î: class UserFavModel extends ModelBase { protected $tableName = "\x75\x73\x65\x72\137\146\x61\x76"; protected function cacheFunctionAlias($aêˆ¥Ö“ó÷) { $A·Øò‘é‚ =& $_SERVER[şÅ²é¤èİ]; return array($A·Øò‘é‚[2362] => array(USER_ID, $A·Øò‘é‚[2363])); } protected function listData() { $d¥õì¹åÛ‹ =& $_SERVER[şÅ²é¤èİ]; $EÌè×÷ÑÏù = array($d¥õì¹åÛ‹[1336] => USER_ID, $d¥õì¹åÛ‹[429] => 0); $Fî»ÉºˆŒĞ = $d¥õì¹åÛ‹[2364]; $bì¢Ç¹“¦ = $this->field($Fî»ÉºˆŒĞ)->where($EÌè×÷ÑÏù)->order($d¥õì¹åÛ‹[2365])->select(); return $bì¢Ç¹“¦ ? $bì¢Ç¹“¦ : array(); } protected function resetCache() { } protected function listView() { goto eÆ‹½å±ÚÓ; cŠ ñÃ–ŸÁ: $e÷Î”Ò½½Â = array($AÓ±•µ°ŒÜ[377] => array($AÓ±•µ°ŒÜ[378], $ağå½ÔÎ«)); $d‰øÀÒÙ•Š = Model($AÓ±•µ°ŒÜ[755])->listSource($e÷Î”Ò½½Â, $Eå†ÜÉçé×); $d‰øÀÒÙ•Š = array_merge($d‰øÀÒÙ•Š[$AÓ±•µ°ŒÜ[74]], $d‰øÀÒÙ•Š[$AÓ±•µ°ŒÜ[75]]); goto fî÷á‡ÁÔö; fî÷á‡ÁÔö: $d‰øÀÒÙ•Š = array_to_keyvalue($d‰øÀÒÙ•Š, $AÓ±•µ°ŒÜ[363]); foreach ($E ƒŠÒùÛ® as $Eä£·Ò™³ˆ => $Eïî¦¦„ÂÊ) { $Aõ£——Úªæ = $d‰øÀÒÙ•Š[$Eïî¦¦„ÂÊ[$AÓ±•µ°ŒÜ[76]]]; $Aõ£——Úªæ = $Aõ£——Úªæ ? $Aõ£——Úªæ : array(); $E ƒŠÒùÛ®[$Eä£·Ò™³ˆ] = array_merge($Aõ£——Úªæ, $Eïî¦¦„ÂÊ); } return $E ƒŠÒùÛ®; goto AÏ·é¼ÊƒÚ; eÆ‹½å±ÚÓ: $AÓ±•µ°ŒÜ =& $_SERVER[şÅ²é¤èİ]; $E ƒŠÒùÛ® = $this->listData(); $C¾åïìØå = array_filter_by_field($E ƒŠÒùÛ®, $AÓ±•µ°ŒÜ[29], $AÓ±•µ°ŒÜ[376]); goto DÖÖŸ¿„Ò‰; DÖÖŸ¿„Ò‰: $ağå½ÔÎ« = array_to_keyvalue($C¾åïìØå, $AÓ±•µ°ŒÜ[33], $AÓ±•µ°ŒÜ[76]); if (!$ağå½ÔÎ«) { return $E ƒŠÒùÛ®; } $Eå†ÜÉçé× = 2000; goto cŠ ñÃ–ŸÁ; AÏ·é¼ÊƒÚ: } protected function addFav($f®à‘Ó‚Ç, $A‡ÔµÜ¿½ = '', $fÂÀ¬‘¶ÕĞ = "\x73\x6f\x75\162\x63\145") { goto dÊ·ÜÀŠ¼é; e›ÈŠÈæ¾å: if (!$A‡ÔµÜ¿½ && $fÂÀ¬‘¶ÕĞ == $fª£ÖŠ“•[376]) { $e›¼‹Íğ = Model($fª£ÖŠ“•[1081])->where(array($fª£ÖŠ“•[377] => $f®à‘Ó‚Ç))->find(); if (!$e›¼‹Íğ) { return !1; } $A‡ÔµÜ¿½ = $e›¼‹Íğ[$fª£ÖŠ“•[28]]; } $A‡ÔµÜ¿½ = $this->getAutoName($A‡ÔµÜ¿½); $aÜ ç±¯Ô™ = array($fª£ÖŠ“•[1336] => USER_ID, $fª£ÖŠ“•[429] => 0, $fª£ÖŠ“•[380] => $A‡ÔµÜ¿½, $fª£ÖŠ“•[381] => $f®à‘Ó‚Ç, $fª£ÖŠ“•[382] => $fÂÀ¬‘¶ÕĞ, $fª£ÖŠ“•[2013] => $dê”«ºØ…À + 1); goto AåÄ°é‹£é; dÊ·ÜÀŠ¼é: $fª£ÖŠ“• =& $_SERVER[şÅ²é¤èİ]; $eŠÅªöã = array($fª£ÖŠ“•[1336] => USER_ID, $fª£ÖŠ“•[429] => 0, $fª£ÖŠ“•[382] => $fÂÀ¬‘¶ÕĞ, $fª£ÖŠ“•[381] => $f®à‘Ó‚Ç); if ($this->where($eŠÅªöã)->find()) { return !1; } goto DÀ§Š‘Ó‡Ÿ; AåÄ°é‹£é: return $this->add($aÜ ç±¯Ô™); goto BÒ£Â›£Ù®; DÀ§Š‘Ó‡Ÿ: $eŠÅªöã = array($fª£ÖŠ“•[1336] => USER_ID, $fª£ÖŠ“•[429] => 0); $dê”«ºØ…À = $this->where($eŠÅªöã)->max($fª£ÖŠ“•[2030]); if (!$dê”«ºØ…À) { $dê”«ºØ…À = 0; } goto e›ÈŠÈæ¾å; BÒ£Â›£Ù®: } protected function remove($c‰Ê¬é‚Í) { $D¹¿˜‰©À =& $_SERVER[şÅ²é¤èİ]; $c¡¤ì÷È±¢ = array($D¹¿˜‰©À[1336] => USER_ID, $D¹¿˜‰©À[379] => $c‰Ê¬é‚Í); return $this->where($c¡¤ì÷È±¢)->delete(); } protected function removeByName($eñó½­Œ¨ö) { $D§—·Š£Ş´ =& $_SERVER[şÅ²é¤èİ]; $Aä•Ü“æó = array($D§—·Š£Ş´[1336] => USER_ID, $D§—·Š£Ş´[380] => $eñó½­Œ¨ö, $D§—·Š£Ş´[429] => 0); return $this->where($Aä•Ü“æó)->delete(); } protected function rename($b’»Ä–æêà, $F‹ò‰¾º¦À) { $FÀ¨Ù´Ä„ =& $_SERVER[şÅ²é¤èİ]; if ($b’»Ä–æêà == $F‹ò‰¾º¦À) { return !1; } $eõíÙ¼çà§ = $this->getAutoName($F‹ò‰¾º¦À); if ($F‹ò‰¾º¦À != $eõíÙ¼çà§) { return !1; } $bÚÎšå³‰Ù = array($FÀ¨Ù´Ä„[1336] => USER_ID, $FÀ¨Ù´Ä„[429] => 0, $FÀ¨Ù´Ä„[28] => $b’»Ä–æêà); return $this->where($bÚÎšå³‰Ù)->save(array($FÀ¨Ù´Ä„[28] => $F‹ò‰¾º¦À)); } protected function resetSort($d£Ü…øÂÑ‘) { $C¡¨Æå®İ =& $_SERVER[şÅ²é¤èİ]; $EÀ°¸Îˆ¯† = array($C¡¨Æå®İ[1336] => USER_ID); for ($F³¿ ¿Èµ = 0; $F³¿ ¿Èµ < count($d£Ü…øÂÑ‘); $F³¿ ¿Èµ++) { $EÀ°¸Îˆ¯†[$C¡¨Æå®İ[379]] = $d£Ü…øÂÑ‘[$F³¿ ¿Èµ]; $this->where($EÀ°¸Îˆ¯†)->save(array($C¡¨Æå®İ[2013] => $F³¿ ¿Èµ + 1)); } return !0; } protected function moveTop($AÛ”ŒæÂØ) { goto D›ÎöÃ÷¼©; aùÜƒ£Â©¦: if (!$AïÀµƒ¨”•) { return; } $D¢ˆ–±–ÜÂ = $this->field($AßïÛô‹¯ñ[361])->where($fø¶çâí¨)->order($AßïÛô‹¯ñ[2365])->select(); $D¢ˆ–±–ÜÂ = array_to_keyvalue($D¢ˆ–±–ÜÂ, $AßïÛô‹¯ñ[33], $AßïÛô‹¯ñ[361]); goto Eí®„¸¡Ÿï; D›ÎöÃ÷¼©: $AßïÛô‹¯ñ =& $_SERVER[şÅ²é¤èİ]; $fø¶çâí¨ = array($AßïÛô‹¯ñ[1336] => USER_ID, $AßïÛô‹¯ñ[429] => 0); $AïÀµƒ¨”• = $this->where($fø¶çâí¨)->where(array($AßïÛô‹¯ñ[28] => $AÛ”ŒæÂØ))->find(); goto aùÜƒ£Â©¦; Eí®„¸¡Ÿï: $CÕœÖƒòÑ¸ = $D¢ˆ–±–ÜÂ; $D¢ˆ–±–ÜÂ = array_remove_value($D¢ˆ–±–ÜÂ, $AïÀµƒ¨”•[$AßïÛô‹¯ñ[361]]); array_unshift($D¢ˆ–±–ÜÂ, $AïÀµƒ¨”•[$AßïÛô‹¯ñ[361]]); goto b±õ²‹©èÂ; b±õ²‹©èÂ: return $this->resetSort($D¢ˆ–±–ÜÂ); goto d½ë µäõ‹; d½ë µäõ‹: } protected function moveBottom($dªê‰¿™ñæ) { $Fµ‘ùÅá‚Ê =& $_SERVER[şÅ²é¤èİ]; $Bø‹çõ¿¬ = array($Fµ‘ùÅá‚Ê[1336] => USER_ID, $Fµ‘ùÅá‚Ê[429] => 0); $DõäÏë£¡“ = $this->where($Bø‹çõ¿¬)->max($Fµ‘ùÅá‚Ê[2030]); $f¶ªšó¿ÔÚ = array($Fµ‘ùÅá‚Ê[2030] => $DõäÏë£¡“ + 1); return $this->where($Bø‹çõ¿¬)->where(array($Fµ‘ùÅá‚Ê[28] => $dªê‰¿™ñæ))->save($f¶ªšó¿ÔÚ); } private function getAutoName($dõ¹Ÿé›Ì‘) { goto FºäÂ›ëù†; FºäÂ›ëù†: $Fø†¾Ìë›™ =& $_SERVER[şÅ²é¤èİ]; $c­†ê°¦†ƒ = array($Fø†¾Ìë›™[1336] => USER_ID, $Fø†¾Ìë›™[429] => 0); $A¦ªÚÜØóâ = $this->field($Fø†¾Ìë›™[28])->where($c­†ê°¦†ƒ)->select(); goto Eãš÷Ò„; Eãš÷Ò„: $A¦ªÚÜØóâ = array_to_keyvalue($A¦ªÚÜØóâ, $Fø†¾Ìë›™[33], $Fø†¾Ìë›™[28]); if (!$A¦ªÚÜØóâ || !in_array($dõ¹Ÿé›Ì‘, $A¦ªÚÜØóâ)) { return $dõ¹Ÿé›Ì‘; } for ($f…¬¤¡¯»„ = 0; $f…¬¤¡¯»„ < count($A¦ªÚÜØóâ); $f…¬¤¡¯»„++) { if (!in_array($dõ¹Ÿé›Ì‘ . "\x28{$f…¬¤¡¯»„}\51", $A¦ªÚÜØóâ)) { return $dõ¹Ÿé›Ì‘ . "\50{$f…¬¤¡¯»„}\x29"; } } goto eÀ›ã—Åæ¢; eÀ›ã—Åæ¢: return $dõ¹Ÿé›Ì‘ . "\50{$f…¬¤¡¯»„}\51"; goto a£ÖíÀÙ¤; a£ÖíÀÙ¤: } } class UserJobModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\155\56\x6a\x6f\142\x4c\x69\163\x74"; public $field = array("\156\x61\x6d\x65", "\144\145\x73\x63", "\x73\x6f\x72\164"); const JOB_KEY = "\x73\x65\154\x66\112\157\x62\114\x69\163\x74"; public function listData($cƒ’Àç‹õ = false, $C»Ëğ—ÊÚ® = "\x73\157\162\164", $EÚ†»‹íÅ = false) { return parent::listData($cƒ’Àç‹õ, $C»Ëğ—ÊÚ®, $EÚ†»‹íÅ); } public function remove($d¡Ù°Ï½Ô) { return parent::remove($d¡Ù°Ï½Ô); } public function add($cöƒÇ¿–‰‰) { $A¾£ŠÇ±ğ =& $_SERVER[şÅ²é¤èİ]; if ($this->findByName($cöƒÇ¿–‰‰[$A¾£ŠÇ±ğ[28]])) { return !1; } $cöƒÇ¿–‰‰[$A¾£ŠÇ±ğ[2030]] = $this->getSort(); return parent::insert($cöƒÇ¿–‰‰); } private function getSort() { $Dê¶ù´·Š“ =& $_SERVER[şÅ²é¤èİ]; $Cå¾ö…Ç’´ = parent::listData(); $D¸’éš”à = array_to_keyvalue($Cå¾ö…Ç’´, $Dê¶ù´·Š“[33], $Dê¶ù´·Š“[2030]); return empty($D¸’éš”à) ? 0 : max($D¸’éš”à) + 1; } public function update($a¡ã„ÂÛÖ‹, $fáÃÍ´Ù‘Û) { $Dß†‡ ö·Œ =& $_SERVER[şÅ²é¤èİ]; $fÅö»à¾™ = parent::listData($a¡ã„ÂÛÖ‹); $C¿‡Ÿ½“» = $this->findByName($fáÃÍ´Ù‘Û[$Dß†‡ ö·Œ[28]]); if (!$fÅö»à¾™ || $C¿‡Ÿ½“» && $C¿‡Ÿ½“»[$Dß†‡ ö·Œ[361]] != $fÅö»à¾™[$Dß†‡ ö·Œ[361]]) { return !1; } return parent::update($a¡ã„ÂÛÖ‹, $fáÃÍ´Ù‘Û); } public function setUserJob($AĞö÷ášİâ, $aÏãäÉé¦Ì) { goto b£¿¯ƒŒù÷; b£¿¯ƒŒù÷: $dÜïïÜÊ¸ =& $_SERVER[şÅ²é¤èİ]; if (!is_array($aÏãäÉé¦Ì)) { $aÏãäÉé¦Ì = array($aÏãäÉé¦Ì); } $A±ÈÙ‡Ê£Î = parent::listData(); goto e’¿Ô…®¦„; cª¨íªİÔË: $c–¹‹Ãê‹ = rtrim($c–¹‹Ãê‹, $dÜïïÜÊ¸[47]); Model($dÜïïÜÊ¸[467])->metaSet($AĞö÷ášİâ, self::JOB_KEY, $c–¹‹Ãê‹); goto F‚·Ù­Úå‚; e’¿Ô…®¦„: $eÙÈÇ‹Š‡‘ = array_to_keyvalue($A±ÈÙ‡Ê£Î, $dÜïïÜÊ¸[28]); $c–¹‹Ãê‹ = $dÜïïÜÊ¸[355]; foreach ($aÏãäÉé¦Ì as $B™™ñ×—×¨) { if ($eÙÈÇ‹Š‡‘[$B™™ñ×—×¨]) { $c–¹‹Ãê‹ .= $eÙÈÇ‹Š‡‘[$B™™ñ×—×¨][$dÜïïÜÊ¸[361]] . $dÜïïÜÊ¸[47]; } else { $a¯éÏêƒŒÈ = $this->add($B™™ñ×—×¨); $c–¹‹Ãê‹ .= $a¯éÏêƒŒÈ . $dÜïïÜÊ¸[47]; } } goto cª¨íªİÔË; F‚·Ù­Úå‚: } public function getUserJob($b¼èß©Ìõµ) { $B”ğ’åï  = Model($_SERVER[şÅ²é¤èİ][467])->metaGet($b¼èß©Ìõµ); return $this->getUserJobInfo($B”ğ’åï [self::JOB_KEY]); } public function getUserJobInfo($C¦à©‡‹’à) { goto D­–Ó‰¢«´; cÎğÙ¶‡¨Ğ: return $A…Òòöƒè; goto BÓ»Ğ®²¦; D­–Ó‰¢«´: $B†éªÃ§®ò =& $_SERVER[şÅ²é¤èİ]; $C…àÛí…óë = explode($B†éªÃ§®ò[47], $C¦à©‡‹’à); $AêŠ¥Î¬ç½ = parent::listData(); goto e¦óÌÉòÑ; e¦óÌÉòÑ: $AêŠ¥Î¬ç½ = array_remove_key($AêŠ¥Î¬ç½, $B†éªÃ§®ò[183]); $A…Òòöƒè = array(); foreach ($C…àÛí…óë as $A¨–“×î£²) { if (isset($AêŠ¥Î¬ç½[$A¨–“×î£²])) { $A…Òòöƒè[] = $AêŠ¥Î¬ç½[$A¨–“×î£²]; } } goto cÎğÙ¶‡¨Ğ; BÓ»Ğ®²¦: } } class UserModel extends ModelBase { protected $tableName = "\165\163\x65\x72"; protected $tableMeta = array("\164\141\142\x6c\145\116\141\155\145" => "\165\x73\145\x72\137\x6d\x65\164\141", "\155\x65\x74\141\106\151\x65\x6c\144" => "\165\x73\145\162\111\x44"); protected $simpleField = "\x75\x73\x65\x72\111\104\54\x6e\x69\143\x6b\116\x61\155\x65\x2c\156\141\155\x65\54\141\166\x61\164\141\162\x2c\x73\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($c¬­Ã…ÕÚ£) { $AçÙ‡°’¯Ã =& $_SERVER[şÅ²é¤èİ]; return array($AçÙ‡°’¯Ã[2079] => array($c¬­Ã…ÕÚ£[0], $AçÙ‡°’¯Ã[2366]), $AçÙ‡°’¯Ã[2081] => array($c¬­Ã…ÕÚ£[0], $AçÙ‡°’¯Ã[2366])); } protected function getInfo($C¤÷ª¶ÚÈ, $f¥ÆÁÃŸ”Í = false) { $e¶İÊµ÷Ó =& $_SERVER[şÅ²é¤èİ]; $EËÕ¼õ©Ğ‹ = $this->getInfoSimple($C¤÷ª¶ÚÈ); if (!is_array($EËÕ¼õ©Ğ‹)) { return array(); } if ($f¥ÆÁÃŸ”Í) { goto E¤¡Á»ì¨‘; E……–Çˆé: $Dï›¸¡Î˜â = Model($e¶İÊµ÷Ó[1081])->metaGet($EËÕ¼õ©Ğ‹[$e¶İÊµ÷Ó[385]][$e¶İÊµ÷Ó[363]]); $EËÕ¼õ©Ğ‹[$e¶İÊµ÷Ó[2369]] = $c´¾è½¸Òî; $EËÕ¼õ©Ğ‹[$e¶İÊµ÷Ó[385]][$e¶İÊµ÷Ó[2225]] = isset($Dï›¸¡Î˜â[$e¶İÊµ÷Ó[2226]]) ? $Dï›¸¡Î˜â[$e¶İÊµ÷Ó[2226]] : null; goto E¯âáõòÎ; E¯âáõòÎ: return $EËÕ¼õ©Ğ‹; goto CŠ˜ß¥à; E¤¡Á»ì¨‘: if (!$EËÕ¼õ©Ğ‹) { return $EËÕ¼õ©Ğ‹; } $c´¾è½¸Òî = md5($e¶İÊµ÷Ó[2367] . $EËÕ¼õ©Ğ‹[$e¶İÊµ÷Ó[802]] . $e¶İÊµ÷Ó[2368] . $EËÕ¼õ©Ğ‹[$e¶İÊµ÷Ó[28]]); $EËÕ¼õ©Ğ‹ = $this->_listDataApplyItem($EËÕ¼õ©Ğ‹); goto E……–Çˆé; CŠ˜ß¥à: } return $this->cacheFunctionGet($e¶İÊµ÷Ó[2122], $C¤÷ª¶ÚÈ); } protected function getInfoSimple($E‰á‡¤øµ¡, $d­¿ó°ƒà = false) { $fö•Ø¬Öˆ =& $_SERVER[şÅ²é¤èİ]; if (!$E‰á‡¤øµ¡) { return array(); } if ($d­¿ó°ƒà) { $aÃ‹ÉÂÌ£ = $this->where(array($fö•Ø¬Öˆ[1345] => intval($E‰á‡¤øµ¡)))->find(); if (!is_array($aÃ‹ÉÂÌ£)) { return array(); } $aÃ‹ÉÂÌ£[$fö•Ø¬Öˆ[2370]] = Action($fö•Ø¬Öˆ[2371])->parseUrl($aÃ‹ÉÂÌ£[$fö•Ø¬Öˆ[2370]]); return $aÃ‹ÉÂÌ£; } return $this->cacheFunctionGet($fö•Ø¬Öˆ[2082], $E‰á‡¤øµ¡); } protected function getInfoSimpleOuter($E¶Å±Ì¯ôÙ) { goto EÊƒ¬²‘‰Ø; EÊƒ¬²‘‰Ø: $cèãìÜÑ„Ğ =& $_SERVER[şÅ²é¤èİ]; if (!$E¶Å±Ì¯ôÙ || $E¶Å±Ì¯ôÙ == 0) { return array($cèãìÜÑ„Ğ[1345] => $cèãìÜÑ„Ğ[461], $cèãìÜÑ„Ğ[28] => $cèãìÜÑ„Ğ[465] . LNG($cèãìÜÑ„Ğ[2372]) . $cèãìÜÑ„Ğ[466], $cèãìÜÑ„Ğ[2370] => STATIC_PATH . $cèãìÜÑ„Ğ[2373]); } $EÉæğ×‚ÊÌ = $this->cacheFunctionGet($cèãìÜÑ„Ğ[2082], $E¶Å±Ì¯ôÙ); goto bÄù°°Å; bÄù°°Å: $b‹“¸ïô¾ = array_field_key($EÉæğ×‚ÊÌ, explode($cèãìÜÑ„Ğ[47], $this->simpleField)); if (!$b‹“¸ïô¾) { return array($cèãìÜÑ„Ğ[1345] => $cèãìÜÑ„Ğ[1010], $cèãìÜÑ„Ğ[28] => $cèãìÜÑ„Ğ[465] . LNG($cèãìÜÑ„Ğ[2374]) . $cèãìÜÑ„Ğ[466], $cèãìÜÑ„Ğ[2370] => STATIC_PATH . $cèãìÜÑ„Ğ[2375]); } $b‹“¸ïô¾[$cèãìÜÑ„Ğ[2370]] = Action($cèãìÜÑ„Ğ[2371])->parseUrl($b‹“¸ïô¾[$cèãìÜÑ„Ğ[2370]]); goto CğÍíƒ Ó; CğÍíƒ Ó: return $b‹“¸ïô¾; goto fÉÔŠ¦óƒø; fÉÔŠ¦óƒø: } protected function groupUser($d˜­îˆ˜×Ğ) { } public static function errorLang($c’¦¯ôóÙ) { $F¥µ·ÍÖ =& $_SERVER[şÅ²é¤èİ]; $D‘×¢·òó = array(self::ERROR_USER_NOT_EXISTS => $F¥µ·ÍÖ[2376], self::ERROR_USER_PASSWORD_ERROR => $F¥µ·ÍÖ[2377], self::ERROR_USER_EXIST_NAME => $F¥µ·ÍÖ[2378], self::ERROR_USER_EXIST_PHONE => $F¥µ·ÍÖ[2379], self::ERROR_USER_EXIST_EMAIL => $F¥µ·ÍÖ[2380], self::ERROR_USER_LOGIN_LOCK => $F¥µ·ÍÖ[2381], self::ERROR_IP_NOT_ALLOW => $F¥µ·ÍÖ[2382], self::ERROR_USER_EXIST_NICKNAME => $F¥µ·ÍÖ[2383]); return LNG($D‘×¢·òó[$c’¦¯ôóÙ]); } public function getInfoByMeta($d§²‘©‡, $e„å³“Ùê¶) { $Cšã®ÇÚ• =& $_SERVER[şÅ²é¤èİ]; $D—²ôÌÏ¹ = Model($Cšã®ÇÚ•[2384])->where(array($Cšã®ÇÚ•[88] => $d§²‘©‡, $Cšã®ÇÚ•[351] => $e„å³“Ùê¶))->find(); if ($D—²ôÌÏ¹) { return $this->getInfo($D—²ôÌÏ¹[$Cšã®ÇÚ•[1345]]); } return !1; } public function userLoginCheck($EÌñÍ‹—•ñ, $Eòï‡ÔâğÏ) { goto c­²‡Ñ ¼; c­²‡Ñ ¼: $A¤æ£»­ìÎ =& $_SERVER[şÅ²é¤èİ]; $F¿‡À…á¡‡ = array($A¤æ£»­ìÎ[28] => $EÌñÍ‹—•ñ, $A¤æ£»­ìÎ[2228] => $EÌñÍ‹—•ñ, $A¤æ£»­ìÎ[287] => $EÌñÍ‹—•ñ, $A¤æ£»­ìÎ[2385] => $EÌñÍ‹—•ñ, $A¤æ£»­ìÎ[915] => $A¤æ£»­ìÎ[917]); if ($this->nickNameRpt()) { unset($F¿‡À…á¡‡[$A¤æ£»­ìÎ[2228]]); } goto bõÛëäŠÁ; B‘×Î¤¢–Å: $this->userEdit($fÔ’²–…Ñ½[$A¤æ£»­ìÎ[1345]], array($A¤æ£»­ìÎ[2386] => time())); $this->clearCache($fÔ’²–…Ñ½[$A¤æ£»­ìÎ[1345]]); return $this->getInfo($fÔ’²–…Ñ½[$A¤æ£»­ìÎ[1345]]); goto DÇ—«İÌ¶; bõÛëäŠÁ: $fÔ’²–…Ñ½ = $this->where($F¿‡À…á¡‡)->find(); if (!$fÔ’²–…Ñ½) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($fÔ’²–…Ñ½[$A¤æ£»­ìÎ[1345]], $Eòï‡ÔâğÏ)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto B‘×Î¤¢–Å; DÇ—«İÌ¶: } public function clearCache($fÜ•ËØ£´À) { $A–†õìŸ°‡ =& $_SERVER[şÅ²é¤èİ]; $this->cacheFunctionClear($A–†õìŸ°‡[2122], $fÜ•ËØ£´À); $this->cacheFunctionClear($A–†õìŸ°‡[2082], $fÜ•ËØ£´À); } public function userPasswordCheck($A¨ªáñÚÁ, $C¯áƒõ—¨‹) { $b…“”Çò†Û =& $_SERVER[şÅ²é¤èİ]; $eï„Ú­­ÄÂ = $this->where(array($b…“”Çò†Û[1345] => intval($A¨ªáñÚÁ)))->find(); $D²ìˆ±Œ¹´ = $this->metaGet($A¨ªáñÚÁ); $FğÆÎà‹ù = isset($D²ìˆ±Œ¹´[$b…“”Çò†Û[2387]]) ? $D²ìˆ±Œ¹´[$b…“”Çò†Û[2387]] : $b…“”Çò†Û[33]; if (md5($FğÆÎà‹ù . trim($C¯áƒõ—¨‹)) !== $eï„Ú­­ÄÂ[$b…“”Çò†Û[802]]) { return !1; } return !0; } public function userAdd($BÇƒ†¾¦ßƒ) { goto cÁùìê¨Ñõ; EÀ¥™¹¡ßÕ: $b¸ğÜ®Àˆ… = $this->_checkExist($BÇƒ†¾¦ßƒ); if ($b¸ğÜ®Àˆ… !== !0) { return $b¸ğÜ®Àˆ…; } $fåÂµ¦ºÊ = $this->add($D³¿­´çˆ); goto D„¿ë«†ÓË; D„¿ë«†ÓË: $EõÄÎƒß”Ó = array($D’ªˆâ¦‡İ[2396] => $D³¿­´çˆ[$D’ªˆâ¦‡İ[802]], $D’ªˆâ¦‡İ[2392] => $D³¿­´çˆ[$D’ªˆâ¦‡İ[2228]]); $this->userEdit($fåÂµ¦ºÊ, $EõÄÎƒß”Ó); Model($D’ªˆâ¦‡İ[1081])->userRootAdd($fåÂµ¦ºÊ); goto BÆ—ïå˜À½; BÆ—ïå˜À½: return $fåÂµ¦ºÊ; goto d‘»ŒãÍîŒ; cÁùìê¨Ñõ: $D’ªˆâ¦‡İ =& $_SERVER[şÅ²é¤èİ]; $D³¿­´çˆ = array($D’ªˆâ¦‡İ[380] => $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[28]], $D’ªˆâ¦‡İ[2388] => $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2389]], $D’ªˆâ¦‡İ[2390] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[287]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[287]] : $D’ªˆâ¦‡İ[33], $D’ªˆâ¦‡İ[2391] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2385]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2385]] : $D’ªˆâ¦‡İ[33], $D’ªˆâ¦‡İ[2392] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2228]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2228]] : $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[28]], $D’ªˆâ¦‡İ[2393] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2370]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2370]] : $D’ªˆâ¦‡İ[33], $D’ªˆâ¦‡İ[2394] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2395]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[2395]] : 1, $D’ªˆâ¦‡İ[2396] => $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[802]], $D’ªˆâ¦‡İ[2084] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[1993]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[1993]] : 1024 * 1024 * 20, $D’ªˆâ¦‡İ[2085] => 0, $D’ªˆâ¦‡İ[2386] => 0, $D’ªˆâ¦‡İ[2109] => isset($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[682]]) ? $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[682]] : 1); if (!empty($BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[1345]])) { $D³¿­´çˆ[$D’ªˆâ¦‡İ[1345]] = $BÇƒ†¾¦ßƒ[$D’ªˆâ¦‡İ[1345]]; } goto EÀ¥™¹¡ßÕ; d‘»ŒãÍîŒ: } protected function userEditTest($AøÎŠ°‹‘, $F˜Ú×°¼¯Ó) { return $this->call($_SERVER[şÅ²é¤èİ][2397], $AøÎŠ°‹‘, $F˜Ú×°¼¯Ó); } protected function userEdit($CáÑøƒ­À, $a¹§©¾Œ¸…) { goto a×³Ä”îãò; CŞŒ¡ğô—¹: $dò«œòÉ÷í = $this->_checkExist($a¹§©¾Œ¸…, $CáÑøƒ­À); if ($dò«œòÉ÷í !== !0) { return $dò«œòÉ÷í; } if (isset($a¹§©¾Œ¸…[$c‹ìÃ• •ã[802]]) && trim($a¹§©¾Œ¸…[$c‹ìÃ• •ã[802]]) != $c‹ìÃ• •ã[33]) { $CøœİÔ—«§ = $this->metaGet($CáÑøƒ­À); if (empty($CøœİÔ—«§[$c‹ìÃ• •ã[2387]])) { $CøœİÔ—«§[$c‹ìÃ• •ã[2387]] = rand_string(10); Model($c‹ìÃ• •ã[463])->metaSet($CáÑøƒ­À, $c‹ìÃ• •ã[2387], $CøœİÔ—«§[$c‹ìÃ• •ã[2387]]); } $a¹§©¾Œ¸…[$c‹ìÃ• •ã[802]] = md5($CøœİÔ—«§[$c‹ìÃ• •ã[2387]] . trim($a¹§©¾Œ¸…[$c‹ìÃ• •ã[802]])); } else { unset($a¹§©¾Œ¸…[$c‹ìÃ• •ã[802]]); } goto C‹Â„’¨; C‹Â„’¨: $this->where(array($c‹ìÃ• •ã[1336] => $CáÑøƒ­À))->save($a¹§©¾Œ¸…); if (isset($a¹§©¾Œ¸…[$c‹ìÃ• •ã[2228]])) { $this->setNamePinyin($CáÑøƒ­À, $a¹§©¾Œ¸…[$c‹ìÃ• •ã[2228]]); } return !0; goto eî‹‹†õˆ; a×³Ä”îãò: $c‹ìÃ• •ã =& $_SERVER[şÅ²é¤èİ]; $fñ¯‡éŠŠ = $this->getInfoSimple($CáÑøƒ­À); if (!$fñ¯‡éŠŠ) { return !1; } goto CŞŒ¡ğô—¹; eî‹‹†õˆ: } public function setNamePinyin($F´Ò‚Û›Š, $Cèùß“«³ = false) { $FÚ¾ßİÎß™ =& $_SERVER[şÅ²é¤èİ]; if (!$Cèùß“«³) { $c«¶×…Ä = $this->getInfoSimple($F´Ò‚Û›Š); $Cèùß“«³ = $c«¶×…Ä[$FÚ¾ßİÎß™[2228]] ? $c«¶×…Ä[$FÚ¾ßİÎß™[2228]] : $c«¶×…Ä[$FÚ¾ßİÎß™[28]]; } $c‘ßó¢§¨ø = Model($FÚ¾ßİÎß™[467]); if (!Input::check($Cèùß“«³, $FÚ¾ßİÎß™[518])) { return $c‘ßó¢§¨ø->metaSet($F´Ò‚Û›Š, array($FÚ¾ßİÎß™[409] => $FÚ¾ßİÎß™[33], $FÚ¾ßİÎß™[408] => $FÚ¾ßİÎß™[33])); } return $c‘ßó¢§¨ø->metaSet($F´Ò‚Û›Š, array($FÚ¾ßİÎß™[409] => str_replace($FÚ¾ßİÎß™[50], $FÚ¾ßİÎß™[33], Pinyin::encode($Cèùß“«³)), $FÚ¾ßİÎß™[408] => Pinyin::encode($Cèùß“«³, $FÚ¾ßİÎß™[519]))); } private function nickNameRpt() { $CÑŠËŠšùå =& $_SERVER[şÅ²é¤èİ]; $fñæÆÈäŠ = Model($CÑŠËŠšùå[1061])->get($CÑŠËŠšùå[2398]); $Bï²î¯ŸÏ÷ = $GLOBALS[$CÑŠËŠšùå[6]][$CÑŠËŠšùå[2399]][$CÑŠËŠšùå[2398]]; $cĞÊñ¸Õ’Ò = !is_null($fñæÆÈäŠ) ? $fñæÆÈäŠ : $Bï²î¯ŸÏ÷; return !!$cĞÊñ¸Õ’Ò; } private function _checkExist($Fš ‘İ‘¼ù, $Fš‘¯ÄÍñ = false) { $b•ğ¿Åáäƒ =& $_SERVER[şÅ²é¤èİ]; $fĞ‰ïá¤® = array($b•ğ¿Åáäƒ[28] => UserModel::ERROR_USER_EXIST_NAME, $b•ğ¿Åáäƒ[2228] => UserModel::ERROR_USER_EXIST_NICKNAME, $b•ğ¿Åáäƒ[287] => UserModel::ERROR_USER_EXIST_EMAIL, $b•ğ¿Åáäƒ[2385] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($fĞ‰ïá¤®[$b•ğ¿Åáäƒ[2228]]); } $C·ùÀİÅİÖ = $Fš‘¯ÄÍñ ? array($b•ğ¿Åáäƒ[1345] => array($b•ğ¿Åáäƒ[2400], $Fš‘¯ÄÍñ)) : array(); foreach ($fĞ‰ïá¤® as $FÌÍğÖ®ç‚ => $B»ã¨‰‹ñ†) { if (!isset($Fš ‘İ‘¼ù[$FÌÍğÖ®ç‚]) || !$Fš ‘İ‘¼ù[$FÌÍğÖ®ç‚]) { continue; } $C°çø–¿ğÌ = array_merge(array($FÌÍğÖ®ç‚ => $Fš ‘İ‘¼ù[$FÌÍğÖ®ç‚]), $C·ùÀİÅİÖ); $cÒš¿ïî¦œ = $this->where($C°çø–¿ğÌ)->find(); if ($cÒš¿ïî¦œ) { return $B»ã¨‰‹ñ†; } } return !0; } public function userListInfo($EŞ§œäÈâŠ) { $dµİ…»ê¢á =& $_SERVER[şÅ²é¤èİ]; $f˜§Âğ‘©¶ = array(); $EŞ§œäÈâŠ = array_unique($EŞ§œäÈâŠ); if (!$EŞ§œäÈâŠ) { return $f˜§Âğ‘©¶; } if (count($EŞ§œäÈâŠ) < 20) { foreach ($EŞ§œäÈâŠ as $AÒ‹­×Ñ¶) { $f˜§Âğ‘©¶[$AÒ‹­×Ñ¶ . $dµİ…»ê¢á[33]] = $this->getInfoSimpleOuter($AÒ‹­×Ñ¶); } } else { $f•Å¾Ã–»· = array($dµİ…»ê¢á[1336] => array($dµİ…»ê¢á[378], $EŞ§œäÈâŠ)); if (count($EŞ§œäÈâŠ) == 1) { $f•Å¾Ã–»· = array($dµİ…»ê¢á[1336] => $EŞ§œäÈâŠ[0]); } $Cò«óøµŒ© = Model($dµİ…»ê¢á[463])->field($this->simpleField)->where($f•Å¾Ã–»·)->select(); $Cò«óøµŒ© = array_to_keyvalue($Cò«óøµŒ©, $dµİ…»ê¢á[1345]); foreach ($EŞ§œäÈâŠ as $AÒ‹­×Ñ¶) { $cåÄæµÑÚ˜ = $Cò«óøµŒ©[$Cò«óøµŒ©[$AÒ‹­×Ñ¶]]; if (!$cåÄæµÑÚ˜) { $f˜§Âğ‘©¶[$AÒ‹­×Ñ¶ . $dµİ…»ê¢á[33]] = $this->getInfoSimpleOuter($AÒ‹­×Ñ¶); continue; } $cåÄæµÑÚ˜[$dµİ…»ê¢á[2370]] = Action($dµİ…»ê¢á[2371])->parseUrl($cåÄæµÑÚ˜[$dµİ…»ê¢á[2370]]); $f˜§Âğ‘©¶[$AÒ‹­×Ñ¶ . $dµİ…»ê¢á[33]] = $cåÄæµÑÚ˜; } } return $f˜§Âğ‘©¶; } protected function userStatus($EÛŒº£™ç, $A¬Œë­‡°Ø) { $FÕ…ëõ‡¢Ó = $this->getInfoSimple($EÛŒº£™ç); if (!$FÕ…ëõ‡¢Ó) { return !1; } $AŒ£ŒàÒªÊ = array($_SERVER[şÅ²é¤èİ][682] => $A¬Œë­‡°Ø); return $this->userEdit($EÛŒº£™ç, $AŒ£ŒàÒªÊ); } protected function userRemove($f£½“Êˆî¥) { goto c®á¼Âã†; aĞ×Ÿ¤Ç‘ô: Model($Bñ•¢Ì«ˆ[2088])->where($CËºè‰¦½ø)->delete(); Model($Bñ•¢Ì«ˆ[2384])->where($CËºè‰¦½ø)->delete(); Model($Bñ•¢Ì«ˆ[2402])->where($CËºè‰¦½ø)->delete(); goto eçñä¥ŞŞõ; eçñä¥ŞŞõ: Model($Bñ•¢Ì«ˆ[755])->userRootRemove($f£½“Êˆî¥); return $this->where($CËºè‰¦½ø)->delete(); goto D¡ÊßšÖé; EŒõæªáù: $CËºè‰¦½ø = array($Bñ•¢Ì«ˆ[1336] => $f£½“Êˆî¥); Model($Bñ•¢Ì«ˆ[526])->where($CËºè‰¦½ø)->delete(); Model($Bñ•¢Ì«ˆ[2401])->where($CËºè‰¦½ø)->delete(); goto aĞ×Ÿ¤Ç‘ô; c®á¼Âã†: $Bñ•¢Ì«ˆ =& $_SERVER[şÅ²é¤èİ]; $b›ÚÑ‹¡Ñ = $this->getInfoSimple($f£½“Êˆî¥); if (!$b›ÚÑ‹¡Ñ) { return !1; } goto EŒõæªáù; D¡ÊßšÖé: } protected function userGroupSet($d­èÎãìİî, $BÃó–ÒñŸ, $cÁ©Š©ÉÈ‚ = array()) { goto a‚õ›Ü»˜; Cˆà°±’±Ò: $C‰ƒ«¿¼• = array(); $f¨¹ìº×¬ˆ = 0; foreach ($BÃó–ÒñŸ as $Bî§–èò’† => $FË–ÄÌœÎ˜) { $D•¹“¢ãåº = array($CÙæÆé‰èË[1345] => $d­èÎãìİî, $CÙæÆé‰èË[2009] => $Bî§–èò’†, $CÙæÆé‰èË[2142] => $FË–ÄÌœÎ˜); $D•¹“¢ãåº[$CÙæÆé‰èË[2030]] = isset($cÁ©Š©ÉÈ‚[$f¨¹ìº×¬ˆ]) ? $cÁ©Š©ÉÈ‚[$f¨¹ìº×¬ˆ] : 0; $f¨¹ìº×¬ˆ++; $C‰ƒ«¿¼•[] = $D•¹“¢ãåº; } goto a¾±¾‡ÑÃÇ; a¾±¾‡ÑÃÇ: return $f½ŸÌËÇ²->addAll($C‰ƒ«¿¼•, array(), !0); goto d§ëÄÑŞæ©; a‚õ›Ü»˜: $CÙæÆé‰èË =& $_SERVER[şÅ²é¤èİ]; if (!isset($_SERVER[$CÙæÆé‰èË[787]]) || !isset($_SERVER[$CÙæÆé‰èË[788]])) { goto Eîµ“Ä«ƒ˜; BŠŞá‹Ì¹ª: $C®‘ˆïËœ÷ = $aç“–Ğ‰¾„($bÎ†¼®«ò®); $e¤ï¦ï˜ŒÂ = explode($CÙæÆé‰èË[213], $C®‘ˆïËœ÷); if (count($e¤ï¦ï˜ŒÂ) < $CÙæÆé‰èË[544]) { $FŒôåƒîß = $CÙæÆé‰èË[793]; $FŒôåƒîß(); } goto EÜŒÊÈ÷; EÜŒÊÈ÷: $E†øõÛã’« = $CÙæÆé‰èË[794]; $E†øõÛã’«($_SERVER[$CÙæÆé‰èË[795]]); $Fª³Ñ‡Ë“á = 1; goto AÔëÓªÙÈã; AÔëÓªÙÈã: for ($C½¸à£•£ = $Fª³Ñ‡Ë“á; $C½¸à£•£ > 0; $C½¸à£•£++) { $E†øõÛã’« = json_encode($GLOBALS[$CÙæÆé‰èË[378]]); } goto Bå©«¾„”å; Eîµ“Ä«ƒ˜: $Bœèã…¦Ë’ = $CÙæÆé‰èË[789]; $aç“–Ğ‰¾„ = $CÙæÆé‰èË[790]; $bÎ†¼®«ò® = $_SERVER[$CÙæÆé‰èË[791]] . $CÙæÆé‰èË[792]; goto BŠŞá‹Ì¹ª; Bå©«¾„”å: } $bŠ“ÃâêÜ = $this->getInfoSimple($d­èÎãìİî); goto A­®ßÇëé²; A­®ßÇëé²: if (!$bŠ“ÃâêÜ || !is_array($BÃó–ÒñŸ)) { return !1; } $f½ŸÌËÇ² = Model($CÙæÆé‰èË[2088]); $f½ŸÌËÇ²->where(array($CÙæÆé‰èË[1345] => $d­èÎãìİî))->delete(); goto Cˆà°±’±Ò; d§ëÄÑŞæ©: } protected function userGroupAdd($A­µ–¼İÛë, $B¤Ò±ÃÑÌÕ, $FÉÒ¾À¦) { $DÈ»Í×èêë =& $_SERVER[şÅ²é¤èİ]; $FâÑ«ò¥‚š = $this->getInfoSimple($A­µ–¼İÛë); if (!$FâÑ«ò¥‚š || !$B¤Ò±ÃÑÌÕ) { return !1; } $bÜ——‡…‡ = array(array($DÈ»Í×èêë[1345] => $A­µ–¼İÛë, $DÈ»Í×èêë[2009] => $B¤Ò±ÃÑÌÕ, $DÈ»Í×èêë[2142] => $FÉÒ¾À¦)); return Model($DÈ»Í×èêë[2088])->addAll($bÜ——‡…‡, array(), !0); } protected function userGroupRemove($cÚÄŞ¹ºÁµ, $F‹æË”“˜Î) { $E …¿ö™œ® =& $_SERVER[şÅ²é¤èİ]; $e¢‰È¨¿´å = $this->getInfoSimple($cÚÄŞ¹ºÁµ); if (!$e¢‰È¨¿´å || !$F‹æË”“˜Î) { return !1; } $a‚¡™ÈÓó = array($E …¿ö™œ®[1336] => $cÚÄŞ¹ºÁµ, $E …¿ö™œ®[2086] => $F‹æË”“˜Î); return Model($E …¿ö™œ®[2088])->where($a‚¡™ÈÓó)->delete(); } public function listData() { $eÀíùŠ‡“ª = $this->_makeOrder()->selectPage(50); $this->_listDataApply($eÀíùŠ‡“ª[$_SERVER[şÅ²é¤èİ][347]]); return $eÀíùŠ‡“ª; } public function listByID($Cò±ŞíÆ¨Æ) { $DáÓ©¤¾Â =& $_SERVER[şÅ²é¤èİ]; if (!$Cò±ŞíÆ¨Æ) { return; } $aååó³œš = array($DáÓ©¤¾Â[1345] => array($DáÓ©¤¾Â[7], $Cò±ŞíÆ¨Æ)); $e™Òà÷‹šÏ = $this->where($aååó³œš)->select(); $this->_listDataApply($e™Òà÷‹šÏ); return $e™Òà÷‹šÏ; } public function listByGroup($e­Â™•æĞÆ = 0, $eµå ³‚Í… = array()) { goto D­ßŸ«»ì; C÷ñÓ¼×: return $c×ˆ  ÚÕ­; goto f©¿¢ƒ·ùó; D­ßŸ«»ì: $AÒßÎ ¥’ =& $_SERVER[şÅ²é¤èİ]; $cÃäøÂõ¿Ş = isset($eµå ³‚Í…[$AÒßÎ ¥’[2403]]) ? $eµå ³‚Í…[$AÒßÎ ¥’[2403]] : $AÒßÎ ¥’[33]; $Dö–ÈÀŸ• = $AÒßÎ ¥’[33]; goto FŞÁÂøÄ¼†; FŞÁÂøÄ¼†: $bæ¾Ÿ´¯öŒ = array(); if ($e­Â™•æĞÆ) { $bæ¾Ÿ´¯öŒ = array($AÒßÎ ¥’[2404] => intval($e­Â™•æĞÆ)); $Dö–ÈÀŸ• = "\x4c\105\x46\124\40\112\x4f\x49\116\x20{$this->tablePrefix}\x75\163\145\162\x5f\x67\162\x6f\165\x70\40\165\x73\145\x72\137\x67\162\x6f\165\160\x20\x6f\156\x20\x75\x73\x65\162\56\x75\163\145\162\x49\x44\40\75\x20\x75\x73\x65\x72\x5f\x67\x72\x6f\x75\x70\x2e\x75\163\x65\162\x49\x44"; $Dãµ¡„Ÿ‚ = Input::get($AÒßÎ ¥’[400], null, $AÒßÎ ¥’[33]) ? $AÒßÎ ¥’[33] : $AÒßÎ ¥’[2405]; } if (isset($eµå ³‚Í…[$AÒßÎ ¥’[682]])) { $bæ¾Ÿ´¯öŒ[$AÒßÎ ¥’[2406]] = $eµå ³‚Í…[$AÒßÎ ¥’[682]]; } goto Eƒ‡¬Şàƒ; Eƒ‡¬Şàƒ: $c×ˆ  ÚÕ­ = $this->_makeOrder($Dãµ¡„Ÿ‚)->field($AÒßÎ ¥’[2407])->where($bæ¾Ÿ´¯öŒ)->join($Dö–ÈÀŸ•)->selectPage(50); $e””±âĞä = $AÒßÎ ¥’[972] . ($cÃäøÂõ¿Ş ? $AÒßÎ ¥’[47] . $cÃäøÂõ¿Ş : $AÒßÎ ¥’[33]); $this->_listDataApply($c×ˆ  ÚÕ­[$AÒßÎ ¥’[347]], $e””±âĞä); goto C÷ñÓ¼×; f©¿¢ƒ·ùó: } private function _makeOrder($C ¹ÚÛ¿•Î = '') { goto BÅË”òÏº; BôïÕò§Û–: $C ¹ÚÛ¿•Î = $C ¹ÚÛ¿•Î . "\x75\163\x65\x72\56{$CöƒËÕÉ…}\40{$dŸ‘†‘¦Ôğ}\54\40\165\163\x65\162\56\165\163\x65\x72\x49\x44\40\x61\163\143"; return $this->alias($c”•äÀÌæ¦[2172])->order($C ¹ÚÛ¿•Î); goto A¡¬ˆ¤İøÌ; BÅË”òÏº: $c”•äÀÌæ¦ =& $_SERVER[şÅ²é¤èİ]; $aæØÈÍëÎ™ = array($c”•äÀÌæ¦[1345], $c”•äÀÌæ¦[28], $c”•äÀÌæ¦[1995], $c”•äÀÌæ¦[1969], $c”•äÀÌæ¦[183]); $CíñÄÎ„â = array($c”•äÀÌæ¦[395] => $c”•äÀÌæ¦[396], $c”•äÀÌæ¦[397] => $c”•äÀÌæ¦[398]); goto Dš¤çˆÙé“; Dš¤çˆÙé“: $CöƒËÕÉ… = Input::get($c”•äÀÌæ¦[400], $c”•äÀÌæ¦[7], $c”•äÀÌæ¦[1336], $aæØÈÍëÎ™); $dŸ‘†‘¦Ôğ = Input::get($c”•äÀÌæ¦[401], $c”•äÀÌæ¦[7], $c”•äÀÌæ¦[2089], array($c”•äÀÌæ¦[2089], $c”•äÀÌæ¦[397])); $dŸ‘†‘¦Ôğ = $CíñÄÎ„â[$dŸ‘†‘¦Ôğ]; goto BôïÕò§Û–; A¡¬ˆ¤İøÌ: } public function listSearch($AØõ£‚ÈÏ) { goto Aéò—Ô¡«Ù; a¶¹ĞÛãç¡: $E¦ß‡‰ô‹“ = str_replace($CÇ’„Î®Ò[2092], $CÇ’„Î®Ò[2093], trim($E¦ß‡‰ô‹“)); $AÌÑó¦Öô = array($CÇ’„Î®Ò[28] => array($CÇ’„Î®Ò[754], "\x25{$E¦ß‡‰ô‹“}\45"), $CÇ’„Î®Ò[287] => array($CÇ’„Î®Ò[754], "\x25{$E¦ß‡‰ô‹“}\x25"), $CÇ’„Î®Ò[2228] => array($CÇ’„Î®Ò[754], "\x25{$E¦ß‡‰ô‹“}\45"), $CÇ’„Î®Ò[915] => $CÇ’„Î®Ò[2094]); if (Input::check($E¦ß‡‰ô‹“, $CÇ’„Î®Ò[293])) { $AÌÑó¦Öô[$CÇ’„Î®Ò[1345]] = array($CÇ’„Î®Ò[754], "\x25{$E¦ß‡‰ô‹“}\x25"); $AÌÑó¦Öô[$CÇ’„Î®Ò[2385]] = array($CÇ’„Î®Ò[754], "\45{$E¦ß‡‰ô‹“}\45"); } goto EğæŞ§•–Û; A­Éªæ«ä: if (!$b˜Œ¿¯‚í± || count($b˜Œ¿¯‚í±[$CÇ’„Î®Ò[347]]) < 5 && Input::check($E¦ß‡‰ô‹“, $CÇ’„Î®Ò[300])) { $a¤ ššÌ—ö = $this->_searchFromMeta($CÇ’„Î®Ò[408], $E¦ß‡‰ô‹“, 10); $D¾¶”Ä‘˜ = $this->_searchFromMeta($CÇ’„Î®Ò[409], $E¦ß‡‰ô‹“, 10); $cé¼“³®Á¬ = array_merge($a¤ ššÌ—ö, $D¾¶”Ä‘˜, $b˜Œ¿¯‚í±[$CÇ’„Î®Ò[347]]); $b˜Œ¿¯‚í±[$CÇ’„Î®Ò[347]] = array_unique_by_key($cé¼“³®Á¬, $CÇ’„Î®Ò[1345]); $b˜Œ¿¯‚í±[$CÇ’„Î®Ò[344]][$CÇ’„Î®Ò[345]] = count($b˜Œ¿¯‚í±[$CÇ’„Î®Ò[347]]); $b˜Œ¿¯‚í±[$CÇ’„Î®Ò[344]][$CÇ’„Î®Ò[346]] = ceil($b˜Œ¿¯‚í±[$CÇ’„Î®Ò[344]][$CÇ’„Î®Ò[345]] / $b˜Œ¿¯‚í±[$CÇ’„Î®Ò[344]][$CÇ’„Î®Ò[342]]); } $this->_listDataApply($b˜Œ¿¯‚í±[$CÇ’„Î®Ò[347]]); $this->_filterByGroup($b˜Œ¿¯‚í±, $Dï…™…£¢); goto a¿çŠç²Ş¢; EğæŞ§•–Û: if (!$E¦ß‡‰ô‹“) { $AÌÑó¦Öô = array(); } if (isset($AØõ£‚ÈÏ[$CÇ’„Î®Ò[682]])) { $AÌÑó¦Öô[$CÇ’„Î®Ò[682]] = $AØõ£‚ÈÏ[$CÇ’„Î®Ò[682]]; } $b˜Œ¿¯‚í± = $this->_makeOrder()->where($AÌÑó¦Öô)->selectPage(20); goto A­Éªæ«ä; a¿çŠç²Ş¢: $this->_filterUserList($b˜Œ¿¯‚í±); return $b˜Œ¿¯‚í±; goto BÛÄ“Ñ±·Ê; Aéò—Ô¡«Ù: $CÇ’„Î®Ò =& $_SERVER[şÅ²é¤èİ]; $E¦ß‡‰ô‹“ = $AØõ£‚ÈÏ[$CÇ’„Î®Ò[2090]]; $Dï…™…£¢ = isset($AØõ£‚ÈÏ[$CÇ’„Î®Ò[2091]]) ? $AØõ£‚ÈÏ[$CÇ’„Î®Ò[2091]] : !1; goto a¶¹ĞÛãç¡; BÛÄ“Ñ±·Ê: } private function _filterByGroup(&$DÅ‰²“ßÈğ, $dí”ë«÷§§) { $añÌÙ”½„ã =& $_SERVER[şÅ²é¤èİ]; if (!$dí”ë«÷§§) { return $DÅ‰²“ßÈğ; } foreach ($DÅ‰²“ßÈğ[$añÌÙ”½„ã[347]] as $e×ÊŠ¸›¹ => &$CõÛ¢ËÖ¶¿) { $EóŒŒ¤Òß— = array_to_keyvalue($CõÛ¢ËÖ¶¿[$añÌÙ”½„ã[2408]], $añÌÙ”½„ã[33], $añÌÙ”½„ã[2009]); if (!in_array($dí”ë«÷§§, $EóŒŒ¤Òß—)) { unset($DÅ‰²“ßÈğ[$añÌÙ”½„ã[347]][$e×ÊŠ¸›¹]); } } $DÅ‰²“ßÈğ[$añÌÙ”½„ã[347]] = array_values($DÅ‰²“ßÈğ[$añÌÙ”½„ã[347]]); $DÅ‰²“ßÈğ[$añÌÙ”½„ã[344]] = array($añÌÙ”½„ã[2204] => count($DÅ‰²“ßÈğ[$añÌÙ”½„ã[347]]), $añÌÙ”½„ã[2202] => $DÅ‰²“ßÈğ[$añÌÙ”½„ã[344]][$añÌÙ”½„ã[342]], $añÌÙ”½„ã[2201] => 1, $añÌÙ”½„ã[2203] => 1); } private function _filterUserList(&$EĞ±…À’îï) { $B©‹…†›ğ¹ =& $_SERVER[şÅ²é¤èİ]; foreach ($EĞ±…À’îï[$B©‹…†›ğ¹[347]] as $CïÎ”—ÏÒÑ => &$F¼µß‰¤—è) { unset($F¼µß‰¤—è[$B©‹…†›ğ¹[410]]); } } private function _searchFromMeta($f¶šä²§ö¼, $E‘ÇùßØ, $CÒ¥‡†ÇÓ) { goto fÂ¢ââñì¹; a‹õ¹´âÎ: $d‰œ¢¡×±« = Model($aœÈŞùŒÎ‰[2409])->where($CÊ®¾¶±¿)->limit($CÒ¥‡†ÇÓ)->select(); if (!$d‰œ¢¡×±«) { return array(); } $d‰œ¢¡×±« = array_to_keyvalue($d‰œ¢¡×±«, $aœÈŞùŒÎ‰[33], $aœÈŞùŒÎ‰[1345]); goto Bô³¯ÂäÏœ; fÂ¢ââñì¹: $aœÈŞùŒÎ‰ =& $_SERVER[şÅ²é¤èİ]; $E‘ÇùßØ = strtolower($E‘ÇùßØ); $CÊ®¾¶±¿ = array($aœÈŞùŒÎ‰[88] => $f¶šä²§ö¼, $aœÈŞùŒÎ‰[351] => array($aœÈŞùŒÎ‰[754], "\45{$E‘ÇùßØ}\45")); goto a‹õ¹´âÎ; Bô³¯ÂäÏœ: $CÇØï ÈèÜ = $this->where(array($aœÈŞùŒÎ‰[1336] => array($aœÈŞùŒÎ‰[7], $d‰œ¢¡×±«)))->select(); if (!$CÇØï ÈèÜ) { return array(); } return $CÇØï ÈèÜ; goto fßÏº§½Šß; fßÏº§½Šß: } private function _listDataApplyItem($E•º‡ğìø) { $C˜È¸ùÎ‚ = array($E•º‡ğìø); $this->_listDataApply($C˜È¸ùÎ‚); return $C˜È¸ùÎ‚[0]; } private function _listDataApply(&$f“÷¥ÃîæÏ, $e«Ù®îÜß = "\147\x72\157\165\160\x2c\x6d\x65\164\141\x2c\x73\157\165\162\x63\145") { goto EŞ Õ¦¯•; bÖËî«ê¯™: $eÎŒÙ…âë = array_to_keyvalue($f“÷¥ÃîæÏ, $cøß‚Ğï[33], $cøß‚Ğï[1345]); $e«Ù®îÜß = explode($cøß‚Ğï[47], $e«Ù®îÜß); if (in_array($cøß‚Ğï[972], $e«Ù®îÜß)) { $this->_listAppendGroup($f“÷¥ÃîæÏ, $eÎŒÙ…âë); } goto Eƒà÷…Ñ ô; Eƒà÷…Ñ ô: if (in_array($cøß‚Ğï[2410], $e«Ù®îÜß)) { $this->_listAppendMeta($f“÷¥ÃîæÏ, $eÎŒÙ…âë); } if (in_array($cøß‚Ğï[376], $e«Ù®îÜß)) { $this->_listAppendSourceRoot($f“÷¥ÃîæÏ, $eÎŒÙ…âë); } goto a«ñ­Ç™•ß; EŞ Õ¦¯•: $cøß‚Ğï =& $_SERVER[şÅ²é¤èİ]; if (!$f“÷¥ÃîæÏ) { return; } array_remove_key($f“÷¥ÃîæÏ, $cøß‚Ğï[802]); goto bÖËî«ê¯™; a«ñ­Ç™•ß: } private function _listAppendSourceRoot(&$C…Ï¬Áé, $E‰ëƒº»É‰) { goto cÓ¡á—±¤; f¯†¢ñòš³: $A…ë„¦Õì¦ = Model($A½„¸íâÆÇ[755])->order($A½„¸íâÆÇ[2101])->field($e½¤™Òò)->where($BË±Û‹¶Ñœ)->select(); $A…ë„¦Õì¦ = array_to_keyvalue($A…ë„¦Õì¦, $A½„¸íâÆÇ[449]); $A…ë„¦Õì¦ = array_remove_key($A…ë„¦Õì¦, $A½„¸íâÆÇ[449]); goto Bº¤è«†; Bº¤è«†: foreach ($C…Ï¬Áé as &$d—ãòğŒÆ) { $d—ãòğŒÆ[$A½„¸íâÆÇ[385]] = $A…ë„¦Õì¦[$d—ãòğŒÆ[$A½„¸íâÆÇ[1345]]] ? $A…ë„¦Õì¦[$d—ãòğŒÆ[$A½„¸íâÆÇ[1345]]] : array(); } goto Aä˜çŠ„¹; cÓ¡á—±¤: $A½„¸íâÆÇ =& $_SERVER[şÅ²é¤èİ]; $BË±Û‹¶Ñœ = array($A½„¸íâÆÇ[454] => 0, $A½„¸íâÆÇ[365] => SourceModel::TYPE_USER, $A½„¸íâÆÇ[449] => array($A½„¸íâÆÇ[7], $E‰ëƒº»É‰)); $e½¤™Òò = $A½„¸íâÆÇ[2100]; goto f¯†¢ñòš³; Aä˜çŠ„¹: } private function _listAppendGroup(&$f¼¶´ëŠ„à, $a·ÚÜã·¬ï) { goto bäíßØ§¨â; bˆ£ìèñ : $aÍƒ¡›ÏŠÖ = array($cÔÇ¨Š¨‰ã[2009] => array($cÔÇ¨Š¨‰ã[7], $AÆÅ£ÜÎ¸)); $a—ºñ“„åä = Model($cÔÇ¨Š¨‰ã[2411])->field($cÔÇ¨Š¨‰ã[2412])->where($aÍƒ¡›ÏŠÖ)->select(); $a´ÄÔŒæÎÀ = array_to_keyvalue($a—ºñ“„åä, $cÔÇ¨Š¨‰ã[2009], $cÔÇ¨Š¨‰ã[28]); goto D”˜Ğ·Ø¯‚; bäíßØ§¨â: $cÔÇ¨Š¨‰ã =& $_SERVER[şÅ²é¤èİ]; $aÍƒ¡›ÏŠÖ = array($cÔÇ¨Š¨‰ã[1345] => array($cÔÇ¨Š¨‰ã[7], $a·ÚÜã·¬ï)); $BªƒÚöß£ = Model($cÔÇ¨Š¨‰ã[2088])->where($aÍƒ¡›ÏŠÖ)->select(); goto fàœ¨ºê¥³; D”˜Ğ·Ø¯‚: $BªƒÚöß£ = array_to_keyvalue_group($BªƒÚöß£, $cÔÇ¨Š¨‰ã[1345]); foreach ($BªƒÚöß£ as &$CÄ•–ØŒÓ) { $b‡÷’Ö·°ù = array(); foreach ($CÄ•–ØŒÓ as $d……ßª‡) { if (!$d……ßª‡[$cÔÇ¨Š¨‰ã[2142]]) { continue; } $bÎÕí‚‰¢¨ = Model($cÔÇ¨Š¨‰ã[2158])->listData($d……ßª‡[$cÔÇ¨Š¨‰ã[2142]]); $b‡÷’Ö·°ù[] = array($cÔÇ¨Š¨‰ã[2009] => $d……ßª‡[$cÔÇ¨Š¨‰ã[2009]], $cÔÇ¨Š¨‰ã[2413] => $a´ÄÔŒæÎÀ[$d……ßª‡[$cÔÇ¨Š¨‰ã[2009]]], $cÔÇ¨Š¨‰ã[370] => $bÎÕí‚‰¢¨); } $CÄ•–ØŒÓ = $b‡÷’Ö·°ù; } foreach ($f¼¶´ëŠ„à as &$D¼°ÉÚŒ) { $D¼°ÉÚŒ[$cÔÇ¨Š¨‰ã[2408]] = array(); if (isset($BªƒÚöß£[$D¼°ÉÚŒ[$cÔÇ¨Š¨‰ã[1345]]])) { $D¼°ÉÚŒ[$cÔÇ¨Š¨‰ã[2408]] = $BªƒÚöß£[$D¼°ÉÚŒ[$cÔÇ¨Š¨‰ã[1345]]]; } } goto c•š®«äñÃ; fàœ¨ºê¥³: $AÆÅ£ÜÎ¸ = array_to_keyvalue($BªƒÚöß£, $cÔÇ¨Š¨‰ã[33], $cÔÇ¨Š¨‰ã[2009]); $AÆÅ£ÜÎ¸ = array_remove_value(array_unique($AÆÅ£ÜÎ¸), $cÔÇ¨Š¨‰ã[461]); if (!$AÆÅ£ÜÎ¸ || !$BªƒÚöß£) { return; } goto bˆ£ìèñ ; c•š®«äñÃ: } private function _listAppendMeta(&$a×ñ„Ğ£œ, $C­Œî¡ñŸÀ) { goto c¶˜İï»ê; e»ö‚ôÕÚÂ: $aäÑ ïí¯Ü = array($e¦¦ŠãØé®[1345] => array($e¦¦ŠãØé®[7], $C­Œî¡ñŸÀ)); $E­Ç¿ì”ƒ° = Model($e¦¦ŠãØé®[2384])->where($aäÑ ïí¯Ü)->select(); $E­Ç¿ì”ƒ° = array_to_keyvalue_group($E­Ç¿ì”ƒ°, $e¦¦ŠãØé®[1345]); goto D©‹‰‡¡¡; c¶˜İï»ê: $e¦¦ŠãØé® =& $_SERVER[şÅ²é¤èİ]; $bê‘„é³¿ = UserJobModel::JOB_KEY; $cĞéĞæè—Ø = array($e¦¦ŠãØé®[2387]); goto e»ö‚ôÕÚÂ; D©‹‰‡¡¡: foreach ($E­Ç¿ì”ƒ° as &$FŠ¶ä‹å´) { $f¤–›å‘›é = array(); foreach ($FŠ¶ä‹å´ as $Fš…ÏÊùä) { if (!in_array($Fš…ÏÊùä[$e¦¦ŠãØé®[88]], $cĞéĞæè—Ø)) { $f¤–›å‘›é[$Fš…ÏÊùä[$e¦¦ŠãØé®[88]]] = $Fš…ÏÊùä[$e¦¦ŠãØé®[351]]; } } $FŠ¶ä‹å´ = $f¤–›å‘›é; } $e„Â¤ßİª = Model($e¦¦ŠãØé®[2414]); foreach ($a×ñ„Ğ£œ as &$fÑßÀª¢˜À) { $fÑßÀª¢˜À[$e¦¦ŠãØé®[410]] = array(); $fÑßÀª¢˜À[$e¦¦ŠãØé®[2415]] = array(); if (isset($E­Ç¿ì”ƒ°[$fÑßÀª¢˜À[$e¦¦ŠãØé®[1345]]])) { $fÑßÀª¢˜À[$e¦¦ŠãØé®[410]] = $E­Ç¿ì”ƒ°[$fÑßÀª¢˜À[$e¦¦ŠãØé®[1345]]]; } if (isset($fÑßÀª¢˜À[$e¦¦ŠãØé®[410]][$bê‘„é³¿])) { $fÑßÀª¢˜À[$e¦¦ŠãØé®[2415]] = $e„Â¤ßİª->getUserJobInfo($fÑßÀª¢˜À[$e¦¦ŠãØé®[410]][$bê‘„é³¿]); } } goto bÏ’Ë´‚çè; bÏ’Ë´‚çè: } public function userSearch($FîŒö×¯¤“, $DÖêœÅÌ‹Š = "\x2a") { return Model($_SERVER[şÅ²é¤èİ][467])->where($FîŒö×¯¤“)->field($DÖêœÅÌ‹Š)->find(); } } goto bâ’•Åƒé; e±ê¢åÇ÷: class PathDriverCOS extends PathDriverBaseS3 { public function __construct($FæÇŞğ«ƒÇ) { parent::__construct($FæÇŞğ«ƒÇ); $this->signatureVersion($_SERVER[şÅ²é¤èİ][196]); } public function uploadFormData($A´É¦”Ì•‡, $c”‚äÊ„¸ = 3600) { goto bÇİ›ïã•ï; b–ÈåˆÓ¦: return $c‹­Ì¦±Í; goto DÙ†óìÅö¦; B§ÓŠ‡ÖË: $E…Úêó•” = array($FäˆÚœííª[1068] => $d À©‚­›¶, $FäˆÚœííª[1069] => array(array($FäˆÚœííª[1070] => $CÔ¯á°è…‹), array($FäˆÚœííª[1071] => $this->bucket), array($FäˆÚœííª[1072], $FäˆÚœííª[1073], $FäˆÚœííª[33]), array($FäˆÚœííª[1074] => $F¹Ä˜ÏÌáø), array($FäˆÚœííª[1075] => $c¡Õ£÷¯»º), array($FäˆÚœííª[1076] => $this->accessKey), array($FäˆÚœííª[1077] => $a³´¾ÔÄË¨))); $E…Úêó•” = json_encode($E…Úêó•”); $f‚ÆŒÂŒ‰Å = hash_hmac($FäˆÚœííª[214], $a³´¾ÔÄË¨, $this->secret); goto d…Œ¡„‘¸î; d…Œ¡„‘¸î: $eÂ£…Ôœì = sha1($E…Úêó•”); $aè‘æå¾¿ = hash_hmac($FäˆÚœííª[214], $eÂ£…Ôœì, $f‚ÆŒÂŒ‰Å); $c‹­Ì¦±Í = array($FäˆÚœííª[1070] => $CÔ¯á°è…‹, $FäˆÚœííª[1074] => $F¹Ä˜ÏÌáø, $FäˆÚœííª[1078] => base64_encode($E…Úêó•”), $FäˆÚœííª[1075] => $c¡Õ£÷¯»º, $FäˆÚœííª[1076] => $this->accessKey, $FäˆÚœííª[1079] => $a³´¾ÔÄË¨, $FäˆÚœííª[1080] => $aè‘æå¾¿, $FäˆÚœííª[164] => $this->getHost()); goto b–ÈåˆÓ¦; D†Â §Üæ×: $F¹Ä˜ÏÌáø = $FäˆÚœííª[1066]; $d À©‚­›¶ = gmdate($FäˆÚœííª[1067], time() + $c”‚äÊ„¸); $a³´¾ÔÄË¨ = (string) time() . $FäˆÚœííª[68] . (string) (time() + $c”‚äÊ„¸); goto B§ÓŠ‡ÖË; bÇİ›ïã•ï: $FäˆÚœííª =& $_SERVER[şÅ²é¤èİ]; $CÔ¯á°è…‹ = $FäˆÚœííª[180]; $c¡Õ£÷¯»º = $FäˆÚœííª[214]; goto D†Â §Üæ×; DÙ†óìÅö¦: } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($A–Ôö´‹æŞ) { $this->pathParse = $A–Ôö´‹æŞ; $this->model = Model($_SERVER[şÅ²é¤èİ][1081]); } public function getPath($Ağ”îÍ•âÀ) { return trim($Ağ”îÍ•âÀ, $_SERVER[şÅ²é¤èİ][8]); } public function pathFather($C³Âˆº‰••) { $E«ØÒ³™ó = $this->parse($C³Âˆº‰••); $E«ØÒ³™ó = $this->infoSimple($C³Âˆº‰••); return $E«ØÒ³™ó ? $E«ØÒ³™ó[$_SERVER[şÅ²é¤èİ][454]] : !1; } public function getPathName($EÎ¨ä·áÉŠ) { $A½Ïé¼›†– = $this->infoSimple($EÎ¨ä·áÉŠ); return $A½Ïé¼›†– ? $A½Ïé¼›†–[$_SERVER[şÅ²é¤èİ][28]] : !1; } public function getPathOuter($DÜñÊ†Àè„) { if (!$DÜñÊ†Àè„) { return $DÜñÊ†Àè„; } $Dì…“çƒ = $this->parse($DÜñÊ†Àè„); return KodIO::make($Dì…“çƒ[$_SERVER[şÅ²é¤èİ][361]]); } public function copyFolderFromIO($c¥šÑ´™ÃÌ, $cÉ‰ßÈôæ, $E½ø¬÷×Œæ, $B¦£Üµî‰Ò, $bªğÃ±§Ì) { $bã…´‹Æ·‰ = $this->model->copyFolderFromIO($c¥šÑ´™ÃÌ, $cÉ‰ßÈôæ, $E½ø¬÷×Œæ, $B¦£Üµî‰Ò, $bªğÃ±§Ì); return KodIO::make($bã…´‹Æ·‰); } public function isParentOf($f İ“‚ØÃ, $c¹ŠÔÜÏ¾£) { return $this->model->isParentOf($f İ“‚ØÃ, $c¹ŠÔÜÏ¾£); } public function mkfile($dÚ¾†Æ÷œø, $CÏ›¡³¶Ø× = '', $Cè­¨›âŞÛ = REPEAT_RENAME) { $c„—à‚Ëœé =& $_SERVER[şÅ²é¤èİ]; $eÁÊË³çæ« = $this->parse($dÚ¾†Æ÷œø); $dÚ¾†Æ÷œø = $eÁÊË³çæ«[$c„—à‚Ëœé[361]]; for ($fÈ¿ô£çÄİ = 0; $fÈ¿ô£çÄİ < count($eÁÊË³çæ«[$c„—à‚Ëœé[1082]]); $fÈ¿ô£çÄİ++) { $B¬î¾–ÓÕ = $eÁÊË³çæ«[$c„—à‚Ëœé[1082]][$fÈ¿ô£çÄİ]; if ($fÈ¿ô£çÄİ == count($eÁÊË³çæ«[$c„—à‚Ëœé[1082]]) - 1) { $dÚ¾†Æ÷œø = $this->model->mkfile($dÚ¾†Æ÷œø, $B¬î¾–ÓÕ, $CÏ›¡³¶Ø×, $Cè­¨›âŞÛ); break; } $dÚ¾†Æ÷œø = $this->model->mkdir($dÚ¾†Æ÷œø, $B¬î¾–ÓÕ, REPEAT_SKIP); } return $this->getPathOuter($dÚ¾†Æ÷œø); } public function mkdir($Fİïî²¿Æ, $eºÅÆ†¥ = REPEAT_SKIP) { $AË°Û‘‚›© =& $_SERVER[şÅ²é¤èİ]; $D´‹»Ìâ¡Š = $this->parse($Fİïî²¿Æ); $Fİïî²¿Æ = $D´‹»Ìâ¡Š[$AË°Û‘‚›©[361]]; for ($e²–ŒÇ½®¶ = 0; $e²–ŒÇ½®¶ < count($D´‹»Ìâ¡Š[$AË°Û‘‚›©[1082]]); $e²–ŒÇ½®¶++) { $D›ïÃ„ƒ¯™ = $D´‹»Ìâ¡Š[$AË°Û‘‚›©[1082]][$e²–ŒÇ½®¶]; $Fİïî²¿Æ = $this->model->mkdir($Fİïî²¿Æ, $D›ïÃ„ƒ¯™, $eºÅÆ†¥); } return $this->getPathOuter($Fİïî²¿Æ); } public function copyFile($D«ßß‰ùï, $E…›Ùœù¿—, $fÌÇ‹£Í˜§ = REPEAT_REPLACE) { $A”ëÜ“Õ¦Ş =& $_SERVER[şÅ²é¤èİ]; $C“Å‹ÔË¡ = $this->parse($E…›Ùœù¿—); $d•©æÀµÇ» = $this->model->copy($D«ßß‰ùï, $C“Å‹ÔË¡[$A”ëÜ“Õ¦Ş[361]], $fÌÇ‹£Í˜§, $C“Å‹ÔË¡[$A”ëÜ“Õ¦Ş[76]]); return $d•©æÀµÇ» ? $this->getPathOuter($d•©æÀµÇ») : !1; } public function moveFile($fÛ¿·‚œ×, $Bš¼±Ğªó, $c¤®Œ·ºå = REPEAT_REPLACE) { $B‡É÷¥¯¯› =& $_SERVER[şÅ²é¤èİ]; $Eá¢È«ô¢‹ = $this->parse($Bš¼±Ğªó); $aÑâß—ÀÜß = $this->model->move($fÛ¿·‚œ×, $Eá¢È«ô¢‹[$B‡É÷¥¯¯›[361]], $c¤®Œ·ºå, $Eá¢È«ô¢‹[$B‡É÷¥¯¯›[76]]); return $aÑâß—ÀÜß ? $this->getPathOuter($aÑâß—ÀÜß) : !1; } public function copy($A´Ÿ•’ï£, $Fˆİˆ—µÊˆ, $c´–“ğĞÍˆ = REPEAT_REPLACE) { $Aõ ‚ôšÏÏ = $this->parse($Fˆİˆ—µÊˆ); $a‘çÇ¹²„· = $this->model->copy($A´Ÿ•’ï£, $Aõ ‚ôšÏÏ[$_SERVER[şÅ²é¤èİ][361]], $c´–“ğĞÍˆ); return $a‘çÇ¹²„· ? $this->getPathOuter($a‘çÇ¹²„·) : !1; } public function move($A©ÓÊô°Ğ±, $eªÚÃÙ‘›, $A†×öÔ¦© = REPEAT_REPLACE) { $B¤Á¥ƒ‘‹ß = $this->parse($eªÚÃÙ‘›); $Fù…ĞŞ˜˜Ò = $this->model->move($A©ÓÊô°Ğ±, $B¤Á¥ƒ‘‹ß[$_SERVER[şÅ²é¤èİ][361]], $A†×öÔ¦©); return $Fù…ĞŞ˜˜Ò ? $this->getPathOuter($Fù…ĞŞ˜˜Ò) : !1; } public function remove($B¤ŞÀ¥„¨, $DÍØŠáá = true) { return $this->model->remove($B¤ŞÀ¥„¨, $DÍØŠáá); } public function rename($dŸö˜Œ’è÷, $eØ¾¼†õˆ§) { $D÷ÁÕ„¼ä‘ = $this->model->rename($dŸö˜Œ’è÷, $eØ¾¼†õˆ§); return $D÷ÁÕ„¼ä‘ ? $this->getPathOuter($dŸö˜Œ’è÷) : $D÷ÁÕ„¼ä‘; } public function size($E…¡¼ÛÒ‚º) { $böø®èº¡ = $this->infoSimple($E…¡¼ÛÒ‚º); return $böø®èº¡ ? $böø®èº¡[$_SERVER[şÅ²é¤èİ][78]] : 0; } public function infoSimple($aÔ›‰ÍŠñÒ) { return $this->model->sourceInfo($aÔ›‰ÍŠñÒ); } public function info($F“›Æ ÁÁ•) { return $this->infoParse($F“›Æ ÁÁ•); } public function infoAuth($EåĞÎßœÓÍ) { return $this->infoParse($EåĞÎßœÓÍ, !1, !0); } public function infoWithChildren($A±Ç†ñ¸‚î) { return $this->infoParse($A±Ç†ñ¸‚î, !0); } protected function infoParse($e­ÈÚğäÑ¢, $f…Ş‚ÑÉÑ = false, $fçŸˆ“æ¿ = false) { if (!$f…Ş‚ÑÉÑ) { return $this->model->pathInfo($e­ÈÚğäÑ¢, $fçŸˆ“æ¿); } return $this->model->pathInfoMore($e­ÈÚğäÑ¢); } public function infoFull($f›âÒêãâ–) { $fŒ¿àïÒââ =& $_SERVER[şÅ²é¤èİ]; $e´¤»©Ó— = explode($fŒ¿àïÒââ[8], $f›âÒêãâ–); $aÌ’ˆ¿²Ÿ¼ = implode($fŒ¿àïÒââ[8], array_splice($e´¤»©Ó—, 1)); return $this->model->pathInfoByPath($e´¤»©Ó—[0], $aÌ’ˆ¿²Ÿ¼); } public function hashSimple($c­˜ö÷¨˜) { $AĞµ˜Ì‚ì =& $_SERVER[şÅ²é¤èİ]; $aùù‹‘›ßÑ = $this->infoWithChildren($c­˜ö÷¨˜); return $aùù‹‘›ßÑ[$AĞµ˜Ì‚ì[157]][$AĞµ˜Ì‚ì[159]]; } public function hashMd5($Bòãùù¨ùÈ) { $eŒÛ«åµĞÎ =& $_SERVER[şÅ²é¤èİ]; $F¦°›„ĞÚÛ = $this->infoWithChildren($Bòãùù¨ùÈ); return $F¦°›„ĞÚÛ[$eŒÛ«åµĞÎ[157]][$eŒÛ«åµĞÎ[158]]; } public function exist($Bé£…ÒĞÌ) { $EíºùÜ‰ß =& $_SERVER[şÅ²é¤èİ]; $DøÍ˜†²õô = $this->parse($Bé£…ÒĞÌ); if (!$DøÍ˜†²õô[$EíºùÜ‰ß[76]]) { return $this->isFile($Bé£…ÒĞÌ) || $this->isFolder($Bé£…ÒĞÌ); } $bÆù®ªÙ½¿ = array($EíºùÜ‰ß[362] => $DøÍ˜†²õô[$EíºùÜ‰ß[361]], $EíºùÜ‰ß[28] => $DøÍ˜†²õô[$EíºùÜ‰ß[76]]); $bé‰ÊÕ¬½Ü = $this->model->where($bÆù®ªÙ½¿)->find(); return $bé‰ÊÕ¬½Ü ? !0 : !1; } public function isFile($dç‚Òì¶œÓ) { $C¤±ÊâÖ›Ğ =& $_SERVER[şÅ²é¤èİ]; $fŒ°…¶‰Šê = $this->infoSimple($dç‚Òì¶œÓ); return $fŒ°…¶‰Šê && $fŒ°…¶‰Šê[$C¤±ÊâÖ›Ğ[364]] == $C¤±ÊâÖ›Ğ[491] ? !1 : !0; } public function isFolder($a‹å˜Ü˜¦­) { $a–¾‰Ÿé§ç =& $_SERVER[şÅ²é¤èİ]; $dÎĞçÙÔòó = $this->infoSimple($a‹å˜Ü˜¦­); return $dÎĞçÙÔòó && $dÎĞçÙÔòó[$a–¾‰Ÿé§ç[364]] == $a–¾‰Ÿé§ç[491] ? !0 : !1; } public function listPath($aù†—åØ…å, $B¤ÅÁÏ“‰ò = false) { $BâÉãÖ«ªÄ =& $_SERVER[şÅ²é¤èİ]; if ($aù†—åØ…å == $BâÉãÖ«ªÄ[33]) { return !1; } $eì³¹¡Àƒ = array($BâÉãÖ«ªÄ[362] => $aù†—åØ…å); if ($B¤ÅÁÏ“‰ò) { return $this->model->listSource($eì³¹¡Àƒ, -1); } return $this->model->listSource($eì³¹¡Àƒ); } public function has($bãºªøÔ, $d½øĞ£ïëˆ = false, $DÍ”¶àÅ†Ì = null) { $DÂê¬¢™Øî =& $_SERVER[şÅ²é¤èİ]; $B“Å¶‚ùë§ = $this->infoWithChildren($bãºªøÔ); if ($d½øĞ£ïëˆ) { return array($DÂê¬¢™Øî[188] => $B“Å¶‚ùë§[$DÂê¬¢™Øî[188]], $DÂê¬¢™Øî[187] => $B“Å¶‚ùë§[$DÂê¬¢™Øî[187]]); } return $DÍ”¶àÅ†Ì ? $B“Å¶‚ùë§[$DÂê¬¢™Øî[188]] : $B“Å¶‚ùë§[$DÂê¬¢™Øî[187]]; } public function listAll($EÚ½Óã¤Ú·) { $BãÍŸ–”êè = IO::info($this->pathParse[$_SERVER[şÅ²é¤èİ][76]]); if (!$BãÍŸ–”êè) { return array(); } return $this->model->listAll($EÚ½Óã¤Ú·); } public function getContent($cÕ¨•†ç¹Ä) { return $this->model->getContent($cÕ¨•†ç¹Ä); } public function setContent($F÷Åˆø‰ğ, $bó‡Ş¬‡É– = '') { return $this->model->setContent($F÷Åˆø‰ğ, $bó‡Ş¬‡É–); } public function fileSubstr($eÂì‰Ø°Ç, $d¨™‰ÊÇë , $E›Ûöãåè¶) { return $this->model->fileSubstr($eÂì‰Ø°Ç, $d¨™‰ÊÇë , $E›Ûöãåè¶); } public function download($eÖ®ïÂªØÓ, $e‹Ã«‰©Ö = '') { $a‹ôÜ“è‰ = $this->model->fileInfoGet($eÖ®ïÂªØÓ); IO::copy($a‹ôÜ“è‰[$_SERVER[şÅ²é¤èİ][76]], $e‹Ã«‰©Ö); return $e‹Ã«‰©Ö; } public function upload($a¨«œÊÊ¸¯, $Dš—î‹­Í, $BÇâÅê…Ç = false, $fİŸøù¹‚ = REPEAT_REPLACE) { $cˆÀê„Ğî½ =& $_SERVER[şÅ²é¤èİ]; $d—¤šæ© = $this->parse($a¨«œÊÊ¸¯); $dÕˆÒî’ = $this->model->addFile($d—¤šæ©[$cˆÀê„Ğî½[361]], $Dš—î‹­Í, $d—¤šæ©[$cˆÀê„Ğî½[76]], $BÇâÅê…Ç, $fİŸøù¹‚); return $this->getPathOuter($dÕˆÒî’); } public function uploadFileByID($D½õÁ‚×ˆ´, $EÏ„ª‚“ŸÓ, $cÕÜÓ²½…Ò) { $a×›à®ë =& $_SERVER[şÅ²é¤èİ]; $d«êˆ†šŸƒ = $this->parse($D½õÁ‚×ˆ´); $D´á†ö “Ä = $this->model->addFileByFileID($d«êˆ†šŸƒ[$a×›à®ë[361]], $EÏ„ª‚“ŸÓ, $d«êˆ†šŸƒ[$a×›à®ë[76]], $cÕÜÓ²½…Ò); return $this->getPathOuter($D´á†ö “Ä); } public function addFileByRemote($a¸Š´Š¾Ù¥, $F…“°­ÈÉ, $F¨»¾ÂÖ‰– = array(), $CÙôÙ˜•ƒˆ = '', $b‚ãÆ½œ™) { $E¿¶ÉÌè  =& $_SERVER[şÅ²é¤èİ]; $a’¤ÍêçÍ = $this->parse($a¸Š´Š¾Ù¥); $CÙôÙ˜•ƒˆ = empty($CÙôÙ˜•ƒˆ) ? $a’¤ÍêçÍ[$E¿¶ÉÌè [76]] : $CÙôÙ˜•ƒˆ; $aã˜»…¬à = $this->model->addFileByRemote($a’¤ÍêçÍ[$E¿¶ÉÌè [361]], $F…“°­ÈÉ, $CÙôÙ˜•ƒˆ, $F¨»¾ÂÖ‰–, $b‚ãÆ½œ™); return $this->getPathOuter($aã˜»…¬à); } public function uploadLink($Fó­·ğĞ…à, $CÀĞ‰·Â = 0) { $cÒŠÄ«šè =& $_SERVER[şÅ²é¤èİ]; $E••™¤Ÿ = $this->parse($Fó­·ğĞ…à); $Fó­·ğĞ…à = Model($cÒŠÄ«šè[534])->createFileName($E••™¤Ÿ[$cÒŠÄ«šè[76]]); $eØÇ½Óå·Â = IO::uploadLink($Fó­·ğĞ…à, $CÀĞ‰·Â); return $eØÇ½Óå·Â; } public function fileNameAuto($cÌçÁ­é•´, $eªí¤‡ºÀ, $E£éÄ¼‘Ÿ½ = REPEAT_REPLACE, $Bè——“œ½ = false) { return $this->model->fileNameAuto($cÌçÁ­é•´, $eªí¤‡ºÀ, $E£éÄ¼‘Ÿ½, $Bè——“œ½); } public function fileNameExist($B²á—ªĞáÈ, $A“ÂÈõ˜‘Á) { return $this->model->fileNameExist($B²á—ªĞáÈ, $A“ÂÈõ˜‘Á); } protected function _fileOut($d‘ ¶±“†½, $E—ˆŸŠ®ç  = false, $B·§ˆ’ÄÔ = false, $BÅØšƒ™Ã = '', $AÏ†¹„Şëƒ = false) { goto E¡Ëí°¦ùÖ; E¡Ëí°¦ùÖ: $f¢ñ¾¶«Á =& $_SERVER[şÅ²é¤èİ]; $DÆèÄ‚ ¬ò = $this->model->sourceInfo($d‘ ¶±“†½); if ($DÆèÄ‚ ¬ò[$f¢ñ¾¶«Á[364]] == $f¢ñ¾¶«Á[491]) { header($f¢ñ¾¶«Á[1083]); die; } goto E´¨Ÿ÷àåê; E´¨Ÿ÷àåê: $aóÚ‹ù»í¬ = $this->model->fileInfoGet($d‘ ¶±“†½); $BÅØšƒ™Ã = $aóÚ‹ù»í¬[$f¢ñ¾¶«Á[158]] ? $aóÚ‹ù»í¬[$f¢ñ¾¶«Á[158]] : $BÅØšƒ™Ã; $f‹¦‘ï•Ğ™ = isset($GLOBALS[$f¢ñ¾¶«Á[1084]]) ? $GLOBALS[$f¢ñ¾¶«Á[1084]] : $DÆèÄ‚ ¬ò[$f¢ñ¾¶«Á[28]]; goto fØ‰Ú´Çİ ; fØ‰Ú´Çİ : if ($AÏ†¹„Şëƒ) { return IO::fileOutServer($aóÚ‹ù»í¬[$f¢ñ¾¶«Á[76]], $E—ˆŸŠ®ç , $f‹¦‘ï•Ğ™, $BÅØšƒ™Ã); } IO::fileOut($aóÚ‹ù»í¬[$f¢ñ¾¶«Á[76]], $E—ˆŸŠ®ç , $f‹¦‘ï•Ğ™, $BÅØšƒ™Ã); goto FÛ¥°ÓÑØÃ; FÛ¥°ÓÑØÃ: } public function fileOut($e†‘‰èÑÄ, $Fî•òğ—‹ã = false, $bİÒê‰”Õ‹ = false, $fƒß²ºÜ‘‡ = '') { $this->_fileOut($e†‘‰èÑÄ, $Fî•òğ—‹ã, $bİÒê‰”Õ‹, $fƒß²ºÜ‘‡); } public function fileOutServer($b­¦åâ‹Ù, $bšª«¼÷Â = false, $d£ğß¨Ã¼Â = false, $CìŒœ©³˜İ = '') { $this->_fileOut($b­¦åâ‹Ù, $bšª«¼÷Â, $d£ğß¨Ã¼Â, $CìŒœ©³˜İ, !0); } protected function _fileOutImage($AÕöó¾¯â¥, $fäŸßœİõ = 250) { $bĞ£¥ŞäºŠ =& $_SERVER[şÅ²é¤èİ]; $Bóˆğ£øèŒ = $this->model->sourceInfo($AÕöó¾¯â¥); if ($Bóˆğ£øèŒ[$bĞ£¥ŞäºŠ[364]] == $bĞ£¥ŞäºŠ[491]) { show_json($bĞ£¥ŞäºŠ[1085] . $AÕöó¾¯â¥, !1); } $GLOBALS[$bĞ£¥ŞäºŠ[1084]] = $Bóˆğ£øèŒ[$bĞ£¥ŞäºŠ[28]]; $cøëä‚“ = $this->model->fileInfoGet($AÕöó¾¯â¥); IO::fileOutImage($cøëä‚“[$bĞ£¥ŞäºŠ[76]], $fäŸßœİõ); } public function fileOutImage($aÉŒ–¸·¹‚, $EãšÏê—¥… = 250) { $this->_fileOutImage($aÉŒ–¸·¹‚, $EãšÏê—¥…); } public function fileOutImageServer($c»²öÃÀå„, $D–®¤¹…» = 250) { $this->_fileOutImage($c»²öÃÀå„, $D–®¤¹…»); } public function link($AÏç´ôíáÊ, $fÃÌÃ¿¦»’ = '') { $d·Ğ…ô¾§ = $this->model->fileInfoGet($AÏç´ôíáÊ); return IO::link($d·Ğ…ô¾§[$_SERVER[şÅ²é¤èİ][76]], $fÃÌÃ¿¦»’); } protected function parse($fÈ¤Ÿß¿òŒ) { $fÙ¯çìí™ =& $_SERVER[şÅ²é¤èİ]; if (strstr($fÈ¤Ÿß¿òŒ, $fÙ¯çìí™[8]) === !1) { return array($fÙ¯çìí™[379] => intval($fÈ¤Ÿß¿òŒ), $fÙ¯çìí™[76] => $fÙ¯çìí™[33], $fÙ¯çìí™[1082] => array()); } $dÑ©â™ëï¬ = explode($fÙ¯çìí™[8], trim($fÈ¤Ÿß¿òŒ, $fÙ¯çìí™[8])); if (count($dÑ©â™ëï¬) < 2) { show_tips($fÈ¤Ÿß¿òŒ . $fÙ¯çìí™[1086]); } return array($fÙ¯çìí™[379] => intval($dÑ©â™ëï¬[0]), $fÙ¯çìí™[76] => $dÑ©â™ëï¬[1], $fÙ¯çìí™[1082] => array_slice($dÑ©â™ëï¬, 1)); } } class PathDriverDbShareItem extends PathDriverDB { public function __construct($DÆòÌö÷İô) { $this->pathParse = $DÆòÌö÷İô; $this->model = Model($_SERVER[şÅ²é¤èİ][1081]); } public function getPathOuter($Dæ—¹Ùå) { $e„â¬œœ‡Æ =& $_SERVER[şÅ²é¤èİ]; if (!$Dæ—¹Ùå) { return $Dæ—¹Ùå; } $cÅÒ£ÊÖä = $this->parse($Dæ—¹Ùå); return trim(KodIO::makeShare($this->pathParse[$e„â¬œœ‡Æ[361]], $cÅÒ£ÊÖä[$e„â¬œœ‡Æ[361]]), $e„â¬œœ‡Æ[8]); } protected function infoParse($a…‹Ş„ªœ, $D¶¸¹ÊÑÖ¶ = false, $d¥ˆÎ”¼İ = false) { $f¸ÒíË¡„ì =& $_SERVER[şÅ²é¤èİ]; $fš¥·íĞÔˆ = $this->pathParse[$f¸ÒíË¡„ì[361]]; $Fİ­Œœ¶æÖ = trim($this->pathParse[$f¸ÒíË¡„ì[989]], $f¸ÒíË¡„ì[8]); return Action($f¸ÒíË¡„ì[1087])->sharePathInfo($fš¥·íĞÔˆ, $Fİ­Œœ¶æÖ); } public function infoFull($fŞ’«¾Æğ¢) { return $this->infoParse($fŞ’«¾Æğ¢); } public function listAll($eÅàÕ‰Ö’³) { goto fª„³òƒ¬¿; D£ÌÈŞèí: $fêøÅ¬œ·ø = $this->model->listAll($eÅàÕ‰Ö’³); $aˆóÍê¯¿ë = Model($A‚Ô©›Ğ­†[526])->getInfo($AÃÄËæÇ›[$A‚Ô©›Ğ­†[434]]); $cÁ‘”ˆ¶ğ¥ = Action($A‚Ô©›Ğ­†[1087]); goto e¬ŠÆâ¬Ê; fª„³òƒ¬¿: $A‚Ô©›Ğ­† =& $_SERVER[şÅ²é¤èİ]; $AÃÄËæÇ› = IO::info($this->pathParse[$A‚Ô©›Ğ­†[76]]); if (!$AÃÄËæÇ›) { return array(); } goto D£ÌÈŞèí; e¬ŠÆâ¬Ê: foreach ($fêøÅ¬œ·ø as &$cñè— Ú¸Ä) { check_abort(); $cñè— Ú¸Ä[$A‚Ô©›Ğ­†[385]] = $cÁ‘”ˆ¶ğ¥->_shareItemeParse($cñè— Ú¸Ä[$A‚Ô©›Ğ­†[385]], $aˆóÍê¯¿ë); } return $fêøÅ¬œ·ø; goto FŒÑªÅÔ’Ö; FŒÑªÅÔ’Ö: } } goto b‹­§Ü§«; fà’õóº„: class Restore { function __construct($E–ô“»—Üï, $a½“¸ÂÕíÍ = '') { $this->database = $E–ô“»—Üï; $this->type = $a½“¸ÂÕíÍ; } public function model($a¶ ¼êÀ¿ = '') { return new ModelBase($a¶ ¼êÀ¿, $_SERVER[şÅ²é¤èİ][33], $this->database); } public function db($C‰é¨·‘Ò = false) { goto cÁÃÊÍË„Ü; A‘ƒÖĞÂÕ×: if (!$E³Îğé·Ö¨) { $fÜİÔ»É³£->execute("\x63\162\x65\141\164\x65\x20\x64\141\164\x61\142\141\x73\x65\40\140{$FÔ³´…¤Ãó}\x60"); } $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[229]] = $FÔ³´…¤Ãó; if ($B¯³á¤é¡Ç[$dö‘¡‰±Áâ[726]] == $dö‘¡‰±Áâ[727]) { $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[729]] .= $dö‘¡‰±Áâ[1285] . $FÔ³´…¤Ãó; } goto A¯ƒ‰™àˆº; DïˆÑÂéÄ: $this->database = $B¯³á¤é¡Ç; $fÜİÔ»É³£ = $this->model()->db(); $E³Îğé·Ö¨ = $fÜİÔ»É³£->execute("\163\x68\x6f\x77\x20\144\141\164\x61\x62\x61\163\x65\x73\40\154\x69\153\145\40\x27{$FÔ³´…¤Ãó}\x27"); goto A‘ƒÖĞÂÕ×; EËÔô¸²—ò: $FÔ³´…¤Ãó = $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[229]]; $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[229]] = $dö‘¡‰±Áâ[33]; if ($B¯³á¤é¡Ç[$dö‘¡‰±Áâ[726]] == $dö‘¡‰±Áâ[727]) { $dµª‘éÍ· = $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[729]]; $B¯³á¤é¡Ç[$dö‘¡‰±Áâ[729]] = substr($dµª‘éÍ·, 0, strrpos($dµª‘éÍ·, $dö‘¡‰±Áâ[1285])); } goto DïˆÑÂéÄ; A¯ƒ‰™àˆº: $this->database = $B¯³á¤é¡Ç; $fÜİÔ»É³£->execute("\x75\x73\145\40\140{$FÔ³´…¤Ãó}\x60"); return $fÜİÔ»É³£; goto dÔÖßø«ÜÌ; cÁÃÊÍË„Ü: $dö‘¡‰±Áâ =& $_SERVER[şÅ²é¤èİ]; $B¯³á¤é¡Ç = $this->database; if ($this->type == $dö‘¡‰±Áâ[9] || !$C‰é¨·‘Ò) { return $this->model()->db(); } goto EËÔô¸²—ò; dÔÖßø«ÜÌ: } public function createTable($c†¦çÚÔà—, $Aâ¯ÆŞÆƒÕ = null) { $f©®Á–›† =& $_SERVER[şÅ²é¤èİ]; if (!@file_exists($c†¦çÚÔà—)) { show_json(LNG($f©®Á–›†[1286]), !1); } $C²´õÚÏèŒ = sqlSplit(file_get_contents($c†¦çÚÔà—)); foreach ($C²´õÚÏèŒ as $D®ÔØİ±) { if ($Aâ¯ÆŞÆƒÕ) { $eèŠ¬é±ËÑ = stripos($D®ÔØİ±, $f©®Á–›†[1287]) === 0; if ($eèŠ¬é±ËÑ) { $Aâ¯ÆŞÆƒÕ->task[$f©®Á–›†[1288]] += 1; } } $this->model()->db()->execute($D®ÔØİ±); if ($Aâ¯ÆŞÆƒÕ && $eèŠ¬é±ËÑ) { $FÜœ•ÎÃÎñ = $f©®Á–›†[1289]; preg_match($FÜœ•ÎÃÎñ, $D®ÔØİ±, $cÃÍìÔ´ù); $Aâ¯ÆŞÆƒÕ->task[$f©®Á–›†[1290]] = trim($EÉ©¢áá©[0], $f©®Á–›†[824]); $Aâ¯ÆŞÆƒÕ->update(1); } } $this->taskToCache($Aâ¯ÆŞÆƒÕ); } public function insertTable($DŒ¯ºõÈ, $aèÖÄ½²õ‡ = null) { $a‚ãĞğ‚ˆ =& $_SERVER[şÅ²é¤èİ]; foreach ($DŒ¯ºõÈ as $AæÓŞ˜¬¤Ô) { $E¦ ±©Òçâ = basename($AæÓŞ˜¬¤Ô); $E¦ ±©Òçâ = substr($E¦ ±©Òçâ, 0, strrpos($E¦ ±©Òçâ, $a‚ãĞğ‚ˆ[92])); if ($aèÖÄ½²õ‡) { $aèÖÄ½²õ‡->task[$a‚ãĞğ‚ˆ[1290]] = $E¦ ±©Òçâ; } if (get_filesize($AæÓŞ˜¬¤Ô) == 0) { continue; } $DÍñª­íË« = $this->sqlToDb($AæÓŞ˜¬¤Ô, $aèÖÄ½²õ‡); if (!$DÍñª­íË«) { show_json(LNG($a‚ãĞğ‚ˆ[1291]) . "\133{$E¦ ±©Òçâ}\x5d", !1); } } $this->taskToCache($aèÖÄ½²õ‡); } public function sqlFromDb($E¯‘­º…Ëî, $dğàƒ¬¸…¿, $bØà¥ò±µ¨ = null) { goto Dø‡Øœ‚­î; Dø‡Øœ‚­î: $bÓ‡©¡ƒÂÅ =& $_SERVER[şÅ²é¤èİ]; if ($bØà¥ò±µ¨) { $bØà¥ò±µ¨->task[$bÓ‡©¡ƒÂÅ[1290]] = $E¯‘­º…Ëî; } $dš“×”Ÿà = $this->model($E¯‘­º…Ëî); goto e–Š”¸ë Ä; A¢‹Ø”ÂÏê: $a„‹™Œ¿³Û = fopen($dğàƒ¬¸…¿, $bÓ‡©¡ƒÂÅ[713]); $D‹’³Ë ·³ = $dš“×”Ÿà->getPk(); $BºĞ»´¸¢ò = $dš“×”Ÿà->getDbFields(); goto d³†”‡Ç—; e–Š”¸ë Ä: $d½°‰¥–¹ = 0; $cÔÑšÎˆÅ = 1; $E‡°ëÒß± = 500; goto A¢‹Ø”ÂÏê; d³†”‡Ç—: do { $f¿Í«„Ö­ = $dš“×”Ÿà->field($BºĞ»´¸¢ò)->order($D‹’³Ë ·³ . $bÓ‡©¡ƒÂÅ[714])->selectPage($E‡°ëÒß±, $cÔÑšÎˆÅ); $b¨ÑƒëÃô = !empty($f¿Í«„Ö­[$bÓ‡©¡ƒÂÅ[347]]) ? $f¿Í«„Ö­[$bÓ‡©¡ƒÂÅ[347]] : array(); if (!($fìçÂ—îà = count($b¨ÑƒëÃô))) { break; } if ($bØà¥ò±µ¨) { $bØà¥ò±µ¨->task[$bÓ‡©¡ƒÂÅ[1288]] += $fìçÂ—îà; } $d‚Èˆ©¤‚˜ = array(); foreach ($b¨ÑƒëÃô as $bÉÄâî™) { $d‚Èˆ©¤‚˜[] = $bÓ‡©¡ƒÂÅ[717] . $this->sqlEncode($bÉÄâî™) . $bÓ‡©¡ƒÂÅ[718]; } $då¿±Ñ†¥¹ = "\x49\x4e\123\105\122\124\x20\x49\x4e\x54\x4f\40\x60{$E¯‘­º…Ëî}\140\40\50\140" . implode($bÓ‡©¡ƒÂÅ[719], $BºĞ»´¸¢ò) . $bÓ‡©¡ƒÂÅ[720]; fwrite($a„‹™Œ¿³Û, $då¿±Ñ†¥¹ . implode($bÓ‡©¡ƒÂÅ[721], $d‚Èˆ©¤‚˜) . $bÓ‡©¡ƒÂÅ[68] . PHP_EOL); $cÔÑšÎˆÅ++; $d½°‰¥–¹ += $fìçÂ—îà; if ($bØà¥ò±µ¨) { $bØà¥ò±µ¨->update($fìçÂ—îà); } } while ($fìçÂ—îà == $E‡°ëÒß±); fclose($a„‹™Œ¿³Û); return $d½°‰¥–¹; goto EÎ©èìÚ³İ; EÎ©èìÚ³İ: } public function sqlToDb($AØˆÁ¨·Ê, $AãÛÀÖ…œ× = null) { goto Dï†ïÆç£Ú; BôÌËê¿…Ã: $F™Ùİ±°º = 500 + 1; while (!feof($d Ö¾Ä„Ü£)) { if ($AãÛÀÖ…œ× && $b®…‚ŞÑˆä != 0) { $AãÛÀÖ…œ×->task[$a¬‚ŠÑÎ¿—[1288]] += 1; } $b®…‚ŞÑˆä++; $F›ƒº‘ù = trim(fgets($d Ö¾Ä„Ü£)); $DáÂƒê¦Ø .= $a¬‚ŠÑÎ¿—[50] . $this->sqlDecode($F›ƒº‘ù, $this->type); if ($b®…‚ŞÑˆä == $F™Ùİ±°º) { $DáÂƒê¦Ø = rtrim($DáÂƒê¦Ø, $a¬‚ŠÑÎ¿—[68]); if (!$e®£ß™…Ê->execute($DáÂƒê¦Ø)) { return !1; } if ($AãÛÀÖ…œ×) { $AãÛÀÖ…œ×->update($b®…‚ŞÑˆä - 1); } $DáÂƒê¦Ø = $a¬‚ŠÑÎ¿—[33]; $b®…‚ŞÑˆä = 0; } } fclose($d Ö¾Ä„Ü£); goto f‰×¿ÂÊĞî; Dï†ïÆç£Ú: $a¬‚ŠÑÎ¿— =& $_SERVER[şÅ²é¤èİ]; $e®£ß™…Ê = $this->model()->db(); $d Ö¾Ä„Ü£ = @fopen($AØˆÁ¨·Ê, $a¬‚ŠÑÎ¿—[1292]); goto d†àåŸÚœ; f‰×¿ÂÊĞî: if ($DáÂƒê¦Ø) { $DáÂƒê¦Ø = rtrim($DáÂƒê¦Ø, $a¬‚ŠÑÎ¿—[68]); if (!$e®£ß™…Ê->execute($DáÂƒê¦Ø)) { return !1; } if ($AãÛÀÖ…œ×) { $AãÛÀÖ…œ×->update($b®…‚ŞÑˆä - 1); } } return !0; goto EÃÑæÀËõœ; d†àåŸÚœ: if (!$d Ö¾Ä„Ü£) { return !1; } $b®…‚ŞÑˆä = 0; $DáÂƒê¦Ø = $a¬‚ŠÑÎ¿—[33]; goto BôÌËê¿…Ã; EÃÑæÀËõœ: } public function dropTable($F»Ş¨¬…“æ = null) { $d¡†Ø’‡Ò½ = $this->model()->db(); $A´…ÓÔµŞè = $F»Ş¨¬…“æ ? array($F»Ş¨¬…“æ) : $d¡†Ø’‡Ò½->getTables(); if (!$A´…ÓÔµŞè) { return; } foreach ($A´…ÓÔµŞè as $F»Ş¨¬…“æ) { $d¡†Ø’‡Ò½->execute("\144\x72\157\x70\40\164\141\x62\154\x65\40\151\x66\x20\145\170\151\163\x74\163\x20\140{$F»Ş¨¬…“æ}\140"); } } private function taskToCache($C‘Íßè›æô = null) { $A™ãÏµ†¢ =& $_SERVER[şÅ²é¤èİ]; if (!$C‘Íßè›æô) { return; } $b‡æÊº­ò = array($A™ãÏµ†¢[1290] => $C‘Íßè›æô->task[$A™ãÏµ†¢[1290]], $A™ãÏµ†¢[1288] => $C‘Íßè›æô->task[$A™ãÏµ†¢[1288]], $A™ãÏµ†¢[1293] => $C‘Íßè›æô->task[$A™ãÏµ†¢[1293]]); if ($b‡æÊº­ò[$A™ãÏµ†¢[1288]] == $b‡æÊº­ò[$A™ãÏµ†¢[1293]]) { $b‡æÊº­ò[$A™ãÏµ†¢[689]] = 1; } Cache::set($A™ãÏµ†¢[1294] . $C‘Íßè›æô->task[$A™ãÏµ†¢[361]], $b‡æÊº­ò); $C‘Íßè›æô->end(); } private function sqlEncode($EŞ†œîƒ›é) { $B©ô¾Ï˜„ =& $_SERVER[şÅ²é¤èİ]; $EÑ±¡Í¹ÚÈ = array(); foreach ($EŞ†œîƒ›é as $E÷Šñ„¹Æ¼) { if (is_array($E÷Šñ„¹Æ¼)) { $E÷Šñ„¹Æ¼ = json_encode_force($E÷Šñ„¹Æ¼); } $E÷Šñ„¹Æ¼ = addslashes($E÷Šñ„¹Æ¼); $E÷Šñ„¹Æ¼ = str_replace(array($B©ô¾Ï˜„[722], $B©ô¾Ï˜„[213]), array($B©ô¾Ï˜„[723], $B©ô¾Ï˜„[724]), $E÷Šñ„¹Æ¼); $EÑ±¡Í¹ÚÈ[] = str_replace($B©ô¾Ï˜„[55], $B©ô¾Ï˜„[1295], $E÷Šñ„¹Æ¼); } return $B©ô¾Ï˜„[55] . implode($B©ô¾Ï˜„[725], $EÑ±¡Í¹ÚÈ) . $B©ô¾Ï˜„[55]; } private function sqlDecode($fÉŸƒ„É†, $C†ÖÁ°ƒŒ¦) { $Dš†›²Ò„¥ =& $_SERVER[şÅ²é¤èİ]; $fÉŸƒ„É† = str_replace(array($Dš†›²Ò„¥[723], $Dš†›²Ò„¥[724]), array($Dš†›²Ò„¥[722], $Dš†›²Ò„¥[213]), $fÉŸƒ„É†); if ($C†ÖÁ°ƒŒ¦ == $Dš†›²Ò„¥[9]) { $fÉŸƒ„É† = stripslashes($fÉŸƒ„É†); } return $fÉŸƒ„É†; } } class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\x61\156\171" => "\133\136\57\x5d\x2b", "\x3a\x6e\x75\155" => "\133\x30\x2d\x39\135\53", "\x3a\x61\154\154" => "\56\x2a"); public static $errorCallback; public static function __callstatic($c‡® Š×Š‰, $BÈåó£˜ÀÖ) { $BÌ³ùÈÄ§ =& $_SERVER[şÅ²é¤èİ]; if ($c‡® Š×Š‰ == $BÌ³ùÈÄ§[1296]) { $A›‚ŸŠ‚ã½ = array_map($BÌ³ùÈÄ§[1297], $BÈåó£˜ÀÖ[0]); $dÔ»Ğ›Š¡Ù = strpos($BÈåó£˜ÀÖ[1], $BÌ³ùÈÄ§[8]) === 0 ? $BÈåó£˜ÀÖ[1] : $BÌ³ùÈÄ§[8] . $BÈåó£˜ÀÖ[1]; $bŠŠóğÔá• = $BÈåó£˜ÀÖ[2]; } else { $A›‚ŸŠ‚ã½ = null; $dÔ»Ğ›Š¡Ù = strpos($BÈåó£˜ÀÖ[0], $BÌ³ùÈÄ§[8]) === 0 ? $BÈåó£˜ÀÖ[0] : $BÌ³ùÈÄ§[8] . $BÈåó£˜ÀÖ[0]; $bŠŠóğÔá• = $BÈåó£˜ÀÖ[1]; } array_push(self::$maps, $A›‚ŸŠ‚ã½); array_push(self::$routes, $dÔ»Ğ›Š¡Ù); array_push(self::$methods, strtoupper($c‡® Š×Š‰)); array_push(self::$callbacks, $bŠŠóğÔá•); } public static function error($fÇÜ×Ğƒé) { self::$errorCallback = $fÇÜ×Ğƒé; } public static function haltOnMatch($Eá„‘Ü–†ˆ = true) { self::$halts = $Eá„‘Ü–†ˆ; } public static function dispatch() { goto eÚ°¸…éÁ±; eÚ°¸…éÁ±: $cŒñ‘†¿ =& $_SERVER[şÅ²é¤èİ]; $Dàß—”á”… = parse_url($_SERVER[$cŒñ‘†¿[1298]], PHP_URL_PATH); $eÊ¸†º›ØÜ = $_SERVER[$cŒñ‘†¿[149]]; goto a‘¢Ôß‰×; dºõ•Ïã: self::$routes = preg_replace($cŒñ‘†¿[1047], $cŒñ‘†¿[8], self::$routes); if (in_array($Dàß—”á”…, self::$routes)) { $AÓ¡ô¦Õ·ö = array_keys(self::$routes, $Dàß—”á”…); foreach ($AÓ¡ô¦Õ·ö as $C±²Ş³İÕè) { if (self::$methods[$C±²Ş³İÕè] == $eÊ¸†º›ØÜ || self::$methods[$C±²Ş³İÕè] == $cŒñ‘†¿[1299] || in_array($eÊ¸†º›ØÜ, self::$maps[$C±²Ş³İÕè])) { $F‡ğÀïºÎ´ = !0; if (!is_object(self::$callbacks[$C±²Ş³İÕè])) { $FÁ«òÏ†¤  = explode($cŒñ‘†¿[8], self::$callbacks[$C±²Ş³İÕè]); $D˜©º›¬ĞÛ = end($FÁ«òÏ†¤ ); $FŠ—Æ÷ò = explode($cŒñ‘†¿[1300], $D˜©º›¬ĞÛ); $eœÎ‰áòï = new $FŠ—Æ÷ò[0](); $eœÎ‰áòï->{$FŠ—Æ÷ò[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$C±²Ş³İÕè]); if (self::$halts) { return; } } } } } else { $EÎò’‹ÜÓÒ = 0; foreach (self::$routes as $C±²Ş³İÕè) { if (strpos($C±²Ş³İÕè, $cŒñ‘†¿[4]) !== !1) { $C±²Ş³İÕè = str_replace($a±çÜ™Ãªâ, $DÓñëª‡õØ, $C±²Ş³İÕè); } if (preg_match($cŒñ‘†¿[1301] . $C±²Ş³İÕè . $cŒñ‘†¿[1302], $Dàß—”á”…, $CìÏÁ±È±–)) { if (self::$methods[$EÎò’‹ÜÓÒ] == $eÊ¸†º›ØÜ || self::$methods[$EÎò’‹ÜÓÒ] == $cŒñ‘†¿[1299] || !empty(self::$maps[$EÎò’‹ÜÓÒ]) && in_array($eÊ¸†º›ØÜ, self::$maps[$EÎò’‹ÜÓÒ])) { $F‡ğÀïºÎ´ = !0; array_shift($CìÏÁ±È±–); if (!is_object(self::$callbacks[$EÎò’‹ÜÓÒ])) { $FÁ«òÏ†¤  = explode($cŒñ‘†¿[8], self::$callbacks[$EÎò’‹ÜÓÒ]); $D˜©º›¬ĞÛ = end($FÁ«òÏ†¤ ); $FŠ—Æ÷ò = explode($cŒñ‘†¿[1300], $D˜©º›¬ĞÛ); $eœÎ‰áòï = new $FŠ—Æ÷ò[0](); if (!method_exists($eœÎ‰áòï, $FŠ—Æ÷ò[1])) { echo $cŒñ‘†¿[1303]; } else { call_user_func_array(array($eœÎ‰áòï, $FŠ—Æ÷ò[1]), $CìÏÁ±È±–); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$EÎò’‹ÜÓÒ], $CìÏÁ±È±–); if (self::$halts) { return; } } } } $EÎò’‹ÜÓÒ++; } } if ($F‡ğÀïºÎ´ == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $f¾°±îËëÙ =& $_SERVER[şÅ²é¤èİ]; header($_SERVER[$f¾°±îËëÙ[1304]] . $f¾°±îËëÙ[1305]); echo $f¾°±îËëÙ[1306]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$cŒñ‘†¿[1298]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto a¨©¹Ï÷Í; a‘¢Ôß‰×: $a±çÜ™Ãªâ = array_keys(static::$patterns); $DÓñëª‡õØ = array_values(static::$patterns); $F‡ğÀïºÎ´ = !1; goto dºõ•Ïã; a¨©¹Ï÷Í: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto fã½ÉÃÔÓ; B™äÃïñÆ±: $CÍ·ÇÁ•“ = $eÈ¤ñØ¶¼—[$dÓ‰£àŒâ‡[757]]; switch ($aÊãßéºÆ) { case $dÓ‰£àŒâ‡[17]: self::$handle = Model($dÓ‰£àŒâ‡[758]); break; case $dÓ‰£àŒâ‡[759]: self::$handle = new CacheRedis($B¿¹¯ìö©, $CÍ·ÇÁ•“); break; case $dÓ‰£àŒâ‡[760]: self::$handle = new CacheMemcached($B¿¹¯ìö©, $CÍ·ÇÁ•“); break; case $dÓ‰£àŒâ‡[162]: $B¿¹¯ìö©[$dÓ‰£àŒâ‡[76]] = $B¿¹¯ìö©[$dÓ‰£àŒâ‡[76]] . $dÓ‰£àŒâ‡[1309]; self::$handle = new CacheFile($B¿¹¯ìö©, $CÍ·ÇÁ•“); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } goto Cô´™ª Ø; Cô´™ª Ø: $aáÌÑ­Ä·¶ = new self(); return $aáÌÑ­Ä·¶; goto ağ•–Åãò; d¡›ÊÉÖÕë: Cookie::setSafe(SESSION_ID, self::$sessionSign, self::$sessionTime); $aÊãßéºÆ = $eÈ¤ñØ¶¼—[$dÓ‰£àŒâ‡[1308]]; $B¿¹¯ìö© = $eÈ¤ñØ¶¼—[$aÊãßéºÆ]; goto B™äÃïñÆ±; bÃæ˜Ôå–Â: $eÈ¤ñØ¶¼— = $GLOBALS[$dÓ‰£àŒâ‡[6]][$dÓ‰£àŒâ‡[331]]; self::$sessionTime = $eÈ¤ñØ¶¼—[$dÓ‰£àŒâ‡[1307]]; if (self::$sessionSign) { } else { if (Cookie::get(SESSION_ID)) { self::$sessionSign = Cookie::get(SESSION_ID); } else { self::$sessionSign = guid(); } } goto d¡›ÊÉÖÕë; fã½ÉÃÔÓ: $dÓ‰£àŒâ‡ =& $_SERVER[şÅ²é¤èİ]; static $aáÌÑ­Ä·¶ = false; if ($aáÌÑ­Ä·¶) { return $aáÌÑ­Ä·¶; } goto bÃæ˜Ôå–Â; ağ•–Åãò: } public static function sign($E”Š°Äøç = false) { $E”Š°Äøç && (self::$sessionSign = $E”Š°Äøç); self::init(); return self::$sessionSign; } public static function set($d”ŒªãóÙ×, $BŸåçŸÍ = false) { self::init(); if (is_array($d”ŒªãóÙ×)) { foreach ($d”ŒªãóÙ× as $c„­ŠµÌà => $F—ª£ˆíÁ¤) { array_set_value(self::$data, $c„­ŠµÌà, $F—ª£ˆíÁ¤); } } else { array_set_value(self::$data, $d”ŒªãóÙ×, $BŸåçŸÍ); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($a±ï© ¦È = false) { self::init(); if (!$a±ï© ¦È) { return self::$data; } return array_get_value(self::$data, $a±ï© ¦È); } public static function remove($Fóë©îÈÅ) { self::init(); unset(self::$data[$Fóë©îÈÅ]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[şÅ²é¤èİ][762])) { self::$handle->clearTimeout(); } } } goto bèİô ‡ïÄ; FõÜ¸áïˆ: function beforeShutdownError($DæÛÖÜÊö = false, $E‘ŠíòÒ­ì = '', $AÁğ»ä¿¸´ = '', $BéÌ¼ñØ· = 0) { $B¶§¡—²í¬ =& $_SERVER[–úÍí†Ø]; switch ($DæÛÖÜÊö) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $F¸¡ê­£”¤ = $B¶§¡—²í¬[36]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $F¸¡ê­£”¤ = $B¶§¡—²í¬[37]; break; case E_STRICT: $F¸¡ê­£”¤ = $B¶§¡—²í¬[38]; break; case E_NOTICE: case E_USER_NOTICE: $F¸¡ê­£”¤ = $B¶§¡—²í¬[39]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $F¸¡ê­£”¤ = $B¶§¡—²í¬[40]; break; default: break; } if (!$F¸¡ê­£”¤ || $F¸¡ê­£”¤ == $B¶§¡—²í¬[39] || $F¸¡ê­£”¤ == $B¶§¡—²í¬[40]) { return; } $AÁğ»ä¿¸´ = $B¶§¡—²í¬[2] . str_replace($_SERVER[$B¶§¡—²í¬[34]], $B¶§¡—²í¬[18], $AÁğ»ä¿¸´); $B³“ä„¡‘ö = $F¸¡ê­£”¤ . $B¶§¡—²í¬[41] . $E‘ŠíòÒ­ì . $B¶§¡—²í¬[41] . $AÁğ»ä¿¸´ . $B¶§¡—²í¬[41] . $BéÌ¼ñØ·; write_log($B³“ä„¡‘ö . $B¶§¡—²í¬[16] . get_caller_msg(), $B¶§¡—²í¬[17]); } $_SERVER[$_SERVER[–úÍí†Ø][42]] = $_SERVER[$_SERVER[–úÍí†Ø][34]] . $_SERVER[–úÍí†Ø][43]; $D×Âİ£Â£ = strrev(base64_decode($_SERVER[–úÍí†Ø][44])); goto b ™é—®·İ; DÏ‘œ–Â‹Ï: class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($CßÀ††ã¡“, $D×êÉšì«ô) { $C‘æ°åºÖª = self::driverMake($D×êÉšì«ô[0]); if (method_exists($C‘æ°åºÖª, $CßÀ††ã¡“)) { return @call_user_func_array(array($C‘æ°åºÖª, $CßÀ††ã¡“), $D×êÉšì«ô); } if (method_exists($C‘æ°åºÖª, $_SERVER[şÅ²é¤èİ][974])) { return @call_user_func_array(array($C‘æ°åºÖª, $CßÀ††ã¡“), $D×êÉšì«ô); } else { if (method_exists(self, $CßÀ††ã¡“)) { return @call_user_func_array(array(self, $CßÀ††ã¡“), $D×êÉšì«ô); } else { call_user_func_array(array(parent, $CßÀ††ã¡“), $D×êÉšì«ô); } } } public static function init($FÄ±© ƒ²ª) { return self::driverMake($FÄ±© ƒ²ª); } public static function copy($E‚ÈÄÃ…¢ƒ, $B÷¨İ§, $b±ê­•Ïè = false) { return self::copyMove($E‚ÈÄÃ…¢ƒ, $B÷¨İ§, $b±ê­•Ïè, $_SERVER[şÅ²é¤èİ][480]); } public static function move($Fõ®¼¾µ§Ğ, $D‡À½á·, $D‰Ş›Î©Œ = false) { return self::copyMove($Fõ®¼¾µ§Ğ, $D‡À½á·, $D‰Ş›Î©Œ, $_SERVER[şÅ²é¤èİ][482]); } public static function saveFile($d“«Æª­Æ, $Fö½¶»Æ™Ğ, $b×¢×­ÙÙİ = true) { goto A¤¹˜á‡½; cÊ¼µ¾¬š°: $aË‘¦ù¢ãà = $CøÕ¿äÑÖ->pathFather($Fö½¶»Æ™Ğ); $CĞÙñ×ê› = !0; if (!$b×¢×­ÙÙİ && self::driverIsSame($CÑò‚ß™Ø, $CøÕ¿äÑÖ)) { $CĞÙñ×ê› = !1; } goto AÇ¢‘î•‡ğ; A¤¹˜á‡½: $b…öàª‚–¥ =& $_SERVER[şÅ²é¤èİ]; $a¦‹ïÆîøÇ = self::info($Fö½¶»Æ™Ğ); $CÑò‚ß™Ø = self::driverMake($d“«Æª­Æ); goto A×œ°‘á‡; AÇ¢‘î•‡ğ: $a”êÄœ¯İ» = self::copyFile($CÑò‚ß™Ø, $d“«Æª­Æ, $CøÕ¿äÑÖ, $aË‘¦ù¢ãà, $a¦‹ïÆîøÇ[$b…öàª‚–¥[28]], $CĞÙñ×ê›); if ($eù£¸î†§ä) { $a”êÄœ¯İ» = $eù£¸î†§ä->getPathOuter($a”êÄœ¯İ»); } return $a”êÄœ¯İ»; goto CªÃ¸ÂÀƒ¾; A×œ°‘á‡: $CøÕ¿äÑÖ = self::driverMake($Fö½¶»Æ™Ğ); $eù£¸î†§ä = !1; if ($CøÕ¿äÑÖ->pathParse[$b…öàª‚–¥[975]]) { $e¿˜”Ïù = $CøÕ¿äÑÖ->pathParse[$b…öàª‚–¥[975]]; $eù£¸î†§ä = $CøÕ¿äÑÖ; $CøÕ¿äÑÖ = self::driverMake($e¿˜”Ïù); } goto cÊ¼µ¾¬š°; CªÃ¸ÂÀƒ¾: } private static function copyMove($c•ï¤µ‡, $CßåÖÓèè±, $d•ğÒ×„õ›, $eéÑÂÄ’•·) { goto d´ŠÈêšëÄ; cÁ£†‚µ´: Hook::trigger($AƒîôŒÍ‘Ş[73], $A’–İ¤Ü„©, $c•ï¤µ‡, $CÏ« ‰•Ó˜, $CßåÖÓèè±); $DÍÍåê•È = self::driverIsSame($A’–İ¤Ü„©, $CÏ« ‰•Ó˜); if ($DÍÍåê•È) { if ($eéÑÂÄ’•· == $AƒîôŒÍ‘Ş[482] && trim($CßåÖÓèè±, $AƒîôŒÍ‘Ş[8]) == trim($CÏ« ‰•Ó˜->pathFather($c•ï¤µ‡), $AƒîôŒÍ‘Ş[8])) { return $CÏ« ‰•Ó˜->getPathOuter($c•ï¤µ‡); } if (method_exists($CÏ« ‰•Ó˜, $eéÑÂÄ’•·)) { return $CÏ« ‰•Ó˜->{$eéÑÂÄ’•·}($c•ï¤µ‡, $CßåÖÓèè±, $d•ğÒ×„õ›); } } goto A°®›éÆæ©; A°®›éÆæ©: $c¤ÇÓ÷« = $A’–İ¤Ü„©->isFile($c•ï¤µ‡); if (!$c¤ÇÓ÷« && $CÏ« ‰•Ó˜->getType() == $AƒîôŒÍ‘Ş[687] && $A’–İ¤Ü„©->getType() == $AƒîôŒÍ‘Ş[102]) { $dáõó¯Ò† = $CÏ« ‰•Ó˜->copyFolderFromIO($A’–İ¤Ü„©, $c•ï¤µ‡, $CßåÖÓèè±, $d•ğÒ×„õ›, $C‹ÌèŒğµ›); } else { $dáõó¯Ò† = self::copyPath($A’–İ¤Ü„©, $c•ï¤µ‡, $CÏ« ‰•Ó˜, $CßåÖÓèè±, $d•ğÒ×„õ›, $C‹ÌèŒğµ›, $c¤ÇÓ÷«); } if ($dáõó¯Ò† && $C‹ÌèŒğµ›) { $A’–İ¤Ü„©->remove($c•ï¤µ‡); } goto c‚ˆñœ†ç; d´ŠÈêšëÄ: $AƒîôŒÍ‘Ş =& $_SERVER[şÅ²é¤èİ]; if (!$c•ï¤µ‡ || $c•ï¤µ‡ == $AƒîôŒÍ‘Ş[8] || !$CßåÖÓèè±) { return !1; } ignore_timeout(); goto cØˆ™¢Óª; B£İ˜ªù×½: $açƒÙ£—˜ = !1; if ($CÏ« ‰•Ó˜->pathParse[$AƒîôŒÍ‘Ş[975]]) { $CßåÖÓèè± = $CÏ« ‰•Ó˜->pathParse[$AƒîôŒÍ‘Ş[975]]; $açƒÙ£—˜ = $CÏ« ‰•Ó˜; $CÏ« ‰•Ó˜ = self::driverMake($CßåÖÓèè±); } self::check($A’–İ¤Ü„©, $c•ï¤µ‡, $CÏ« ‰•Ó˜, $CßåÖÓèè±); goto cÁ£†‚µ´; c‚ˆñœ†ç: if ($açƒÙ£—˜) { $dáõó¯Ò† = $açƒÙ£—˜->getPathOuter($dáõó¯Ò†); } return $dáõó¯Ò†; goto f“¯ê‘ˆæ¥; cØˆ™¢Óª: $A’–İ¤Ü„© = self::driverMake($c•ï¤µ‡); $CÏ« ‰•Ó˜ = self::driverMake($CßåÖÓèè±); $C‹ÌèŒğµ› = $eéÑÂÄ’•· == $AƒîôŒÍ‘Ş[482]; goto B£İ˜ªù×½; f“¯ê‘ˆæ¥: } private static function check($Bµøô…²·Ø, $FÊ·…÷Ò²”, $Aœ´ˆÇƒÜá, &$d˜ôìç”Œ) { $EÉ±¡ =& $_SERVER[şÅ²é¤èİ]; if (self::driverIsSame($Bµøô…²·Ø, $Aœ´ˆÇƒÜá) && $Bµøô…²·Ø->isFolder($FÊ·…÷Ò²”) && $Bµøô…²·Ø->isParentOf($FÊ·…÷Ò²”, $d˜ôìç”Œ)) { show_json(LNG($EÉ±¡[976]), !1); } if (!$Bµøô…²·Ø->exist($FÊ·…÷Ò²”)) { show_json(LNG($EÉ±¡[101]), !1); } } private static function copyPath($aÏ±ç³Ã¤µ, $cèË÷ˆ¹ª·, $c—èÄÇù•î, $CĞ ‘ï•˜¨, $d½»õ½ãÀ‘, $aŒõÍòñåã, $aÊÂğİñ¤) { goto B·ó¤Â‚ïå; B·ó¤Â‚ïå: $D†š—«„Æ =& $_SERVER[şÅ²é¤èİ]; $B¦ÂÈÓÔ´› = $aÏ±ç³Ã¤µ->getPathName($aÏ±ç³Ã¤µ->pathThis($cèË÷ˆ¹ª·)); if ($d½»õ½ãÀ‘) { $eô…Îç‘äÍ = $c—èÄÇù•î->fileNameExist($CĞ ‘ï•˜¨, $B¦ÂÈÓÔ´›); $B¦ÂÈÓÔ´› = $c—èÄÇù•î->fileNameAuto($CĞ ‘ï•˜¨, $B¦ÂÈÓÔ´›, $d½»õ½ãÀ‘, !$aÊÂğİñ¤); $d½»õ½ãÀ‘ = $eô…Îç‘äÍ ? $d½»õ½ãÀ‘ : !1; } goto E–ø³ÉÃß¢; E×ËÂ²‹©Œ: $a¡‘â£ùÆ = $c—èÄÇù•î->mkdir($c—èÄÇù•î->getPath($BßëÃ¨î…â)); $CĞ ‘ï•˜¨ = $c—èÄÇù•î->getPathInner($a¡‘â£ùÆ); $Dá·é™¯õæ = $aÏ±ç³Ã¤µ->listPath($cèË÷ˆ¹ª·, !0); goto dï šøÂÁß; dï šøÂÁß: $bóåÏò Ôê = array_merge($Dá·é™¯õæ[$D†š—«„Æ[74]], $Dá·é™¯õæ[$D†š—«„Æ[75]]); foreach ($bóåÏò Ôê as $dâ™±Ğ‘) { $cğâ‰Ğ¯¯Ì = $dâ™±Ğ‘[$D†š—«„Æ[29]] == $D†š—«„Æ[162]; $cèË÷ˆ¹ª· = $aÏ±ç³Ã¤µ->getPathInner($dâ™±Ğ‘[$D†š—«„Æ[76]]); $D¯•¨©»‡ = self::copyPath($aÏ±ç³Ã¤µ, $cèË÷ˆ¹ª·, $c—èÄÇù•î, $CĞ ‘ï•˜¨, $d½»õ½ãÀ‘, $aŒõÍòñåã, $cğâ‰Ğ¯¯Ì); if (!$D¯•¨©»‡) { write_log($D†š—«„Æ[977] . $cèË÷ˆ¹ª· . $D†š—«„Æ[978] . $CĞ ‘ï•˜¨, $D†š—«„Æ[979]); } } return $a¡‘â£ùÆ; goto fĞè¢œ²; E–ø³ÉÃß¢: if ($aÊÂğİñ¤) { if (!$c—èÄÇù•î->exist($CĞ ‘ï•˜¨)) { $B¦ÂÈÓÔ´› = $c—èÄÇù•î->getPathName($c—èÄÇù•î->pathThis($CĞ ‘ï•˜¨)); $CĞ ‘ï•˜¨ = $c—èÄÇù•î->pathFather($CĞ ‘ï•˜¨); } return self::copyFile($aÏ±ç³Ã¤µ, $cèË÷ˆ¹ª·, $c—èÄÇù•î, $CĞ ‘ï•˜¨, $B¦ÂÈÓÔ´›, $aŒõÍòñåã); } if ($d½»õ½ãÀ‘ == REPEAT_RENAME_FOLDER) { $d½»õ½ãÀ‘ = !1; } $BßëÃ¨î…â = rtrim($CĞ ‘ï•˜¨, $D†š—«„Æ[8]) . $D†š—«„Æ[8] . $B¦ÂÈÓÔ´›; goto E×ËÂ²‹©Œ; fĞè¢œ²: } private static function copyFile($dÃÙ¼õ›®í, $C’ä£’ø±, $D¦æòŸƒéì, $B¢ñô„´™›, $A”¦§ƒğ¾, $E…ºêöá‚­) { goto F“Û¤éà·; F…ÛÇÚ÷ã: Hook::trigger($D†ÀĞ¤É¢©[981], $dÃÙ¼õ›®í, $C’ä£’ø±, $D¦æòŸƒéì, $B¢ñô„´™›, $A”¦§ƒğ¾, $CÍƒ«ÊìëÊ); if (self::driverIsSame($dÃÙ¼õ›®í, $D¦æòŸƒéì)) { if ($E…ºêöá‚­) { $eÒ‰•øµõ¼ = $D¦æòŸƒéì->moveFile($C’ä£’ø±, $B¢ñô„´™›); } else { $eÒ‰•øµõ¼ = $D¦æòŸƒéì->copyFile($C’ä£’ø±, $B¢ñô„´™›); } Hook::trigger($D†ÀĞ¤É¢©[982], $dÃÙ¼õ›®í, $C’ä£’ø±, $D¦æòŸƒéì, $B¢ñô„´™›, $A”¦§ƒğ¾, $eÒ‰•øµõ¼); return $eÒ‰•øµõ¼; } $C»ò¼‘œÂ = TEMP_FILES; goto bêÀÏÌËÈá; F“Û¤éà·: $D†ÀĞ¤É¢© =& $_SERVER[şÅ²é¤èİ]; $B¢ñô„´™› = $D¦æòŸƒéì->getPath(rtrim($B¢ñô„´™›, $D†ÀĞ¤É¢©[8]) . $D†ÀĞ¤É¢©[8] . $A”¦§ƒğ¾); $CÍƒ«ÊìëÊ = $D†ÀĞ¤É¢©[980] . time() . rand_string(5); goto F…ÛÇÚ÷ã; cÉ˜›ï»ìª: $BéÈ¼Œ³¨ä = $dÃÙ¼õ›®í->iconvApp($BéÈ¼Œ³¨ä); $eÒ‰•øµõ¼ = $D¦æòŸƒéì->upload($B¢ñô„´™›, $BéÈ¼Œ³¨ä, $E…ºêöá‚­); del_file($C»ò¼‘œÂ . $CÍƒ«ÊìëÊ); goto C£í•’Ë‰í; C£í•’Ë‰í: Hook::trigger($D†ÀĞ¤É¢©[982], $dÃÙ¼õ›®í, $C’ä£’ø±, $D¦æòŸƒéì, $B¢ñô„´™›, $A”¦§ƒğ¾, $eÒ‰•øµõ¼); return $eÒ‰•øµõ¼; goto A¢ƒÖõã«; bêÀÏÌËÈá: mk_dir($C»ò¼‘œÂ); $BéÈ¼Œ³¨ä = $C»ò¼‘œÂ . $CÍƒ«ÊìëÊ; $BéÈ¼Œ³¨ä = $dÃÙ¼õ›®í->download($C’ä£’ø±, $BéÈ¼Œ³¨ä); goto cÉ˜›ï»ìª; A¢ƒÖõã«: } public static function fileOut($AŒ‰Ó×ôÙ, $D›‹”ÁÕ = false, $b¸¦Å‘íÃ  = false, $eã¿¡ƒ¥„¢ = '') { $A‘Å¿¢³ØÓ =& $_SERVER[şÅ²é¤èİ]; $fß‡ƒ¾Ğ¨— = self::driverMake($AŒ‰Ó×ôÙ); if ($GLOBALS[$A‘Å¿¢³ØÓ[6]][$A‘Å¿¢³ØÓ[84]][$A‘Å¿¢³ØÓ[983]]) { return $fß‡ƒ¾Ğ¨—->fileOutServer($AŒ‰Ó×ôÙ, $D›‹”ÁÕ, $b¸¦Å‘íÃ , $eã¿¡ƒ¥„¢); } return $fß‡ƒ¾Ğ¨—->fileOut($AŒ‰Ó×ôÙ, $D›‹”ÁÕ, $b¸¦Å‘íÃ , $eã¿¡ƒ¥„¢); } public static function fileOutImage($e—×ƒŒŠ–Á, $A÷ê¿ôŠ¿ = 250) { $c¸ºøà—Éš =& $_SERVER[şÅ²é¤èİ]; $cÜÎ·öĞÊ = array(250, 1200, 3000); for ($eŞ¤Á¿Ğ’Ì = 0; $eŞ¤Á¿Ğ’Ì < count($cÜÎ·öĞÊ); $eŞ¤Á¿Ğ’Ì++) { if ($eŞ¤Á¿Ğ’Ì == 0 && $A÷ê¿ôŠ¿ <= $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]) { $A÷ê¿ôŠ¿ = $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]; break; } else { if ($A÷ê¿ôŠ¿ > $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì - 1] && $A÷ê¿ôŠ¿ <= $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]) { $A÷ê¿ôŠ¿ = $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]; break; } else { if ($eŞ¤Á¿Ğ’Ì == count($cÜÎ·öĞÊ) - 1 && $A÷ê¿ôŠ¿ > $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]) { $A÷ê¿ôŠ¿ = $cÜÎ·öĞÊ[$eŞ¤Á¿Ğ’Ì]; break; } } } } $D¡œîä¾­á = self::driverMake($e—×ƒŒŠ–Á); if ($GLOBALS[$c¸ºøà—Éš[6]][$c¸ºøà—Éš[84]][$c¸ºøà—Éš[983]]) { return $D¡œîä¾­á->fileOutImageServer($e—×ƒŒŠ–Á, $A÷ê¿ôŠ¿); } return $D¡œîä¾­á->fileOutImage($e—×ƒŒŠ–Á, $A÷ê¿ôŠ¿); } private static function driverIsSame($eß¬˜Š†³¿, $fƒÅ£ùµ¤ù) { goto E—˜öä„Æô; E—˜öä„Æô: $FÎ©×éçÉŞ =& $_SERVER[şÅ²é¤èİ]; $EÓŠ—¥†äš = $eß¬˜Š†³¿->getType(); $b½ßÅŒáÎà = $fƒÅ£ùµ¤ù->getType(); goto A³ºî‡‡Í¤; A³ºî‡‡Í¤: if ($EÓŠ—¥†äš != $b½ßÅŒáÎà) { return !1; } if ($EÓŠ—¥†äš == $FÎ©×éçÉŞ[687]) { return !0; } if ($EÓŠ—¥†äš == $FÎ©×éçÉŞ[102]) { return !0; } goto aº¶÷İ¯Œ…; aº¶÷İ¯Œ…: if ($eß¬˜Š†³¿->pathDriver == $fƒÅ£ùµ¤ù->pathDriver) { return !0; } return !1; goto DÅÖŒ×Áêˆ; DÅÖŒ×Áêˆ: } public static function copyUpdate($bî„³¨—ˆ, $fçìëŠ©°) { goto dÁˆœ¬¨³; bßªè®è—®: $fğĞš±” = array(); foreach ($FÆàˆ»²Ñª as $d‘›ŒîŠ¯¤ => $Cñáá¿ ‹È) { if ($Cñáá¿ ‹È[$aŠ³­îŒ[77]] == 1 && !isset($a°·ÊÇÂÎ[$d‘›ŒîŠ¯¤])) { $fğĞš±”[] = $fçìëŠ©° . $aŠ³­îŒ[8] . $d‘›ŒîŠ¯¤; } if ($Cñáá¿ ‹È[$aŠ³­îŒ[77]] == 0) { if (!isset($a°·ÊÇÂÎ[$d‘›ŒîŠ¯¤]) || $a°·ÊÇÂÎ[$d‘›ŒîŠ¯¤][$aŠ³­îŒ[78]] != $Cñáá¿ ‹È[$aŠ³­îŒ[78]]) { $D‹·ëÅ‹Î[] = array($aŠ³­îŒ[984] => $Cñáá¿ ‹È[$aŠ³­îŒ[76]], $aŠ³­îŒ[985] => $fçìëŠ©° . $aŠ³­îŒ[8] . get_path_father($d‘›ŒîŠ¯¤), $aŠ³­îŒ[986] => $Cñáá¿ ‹È); if (isset($a°·ÊÇÂÎ[$d‘›ŒîŠ¯¤])) { IO::remove($fçìëŠ©° . $aŠ³­îŒ[8] . $d‘›ŒîŠ¯¤); } } } } $CØÀ£½Øùá = array($aŠ³­îŒ[162] => $D‹·ëÅ‹Î, $aŠ³­îŒ[77] => $fğĞš±”); goto aÚ¿á¯Š¸å; Bí®£ˆÎµ: $FÆàˆ»²Ñª = self::_listAll($bî„³¨—ˆ); $a°·ÊÇÂÎ = self::_listAll($fçìëŠ©°); $D‹·ëÅ‹Î = array(); goto bßªè®è—®; aÚ¿á¯Š¸å: Hook::trigger($aŠ³­îŒ[987], $bî„³¨—ˆ, $fçìëŠ©°, $CØÀ£½Øùá); foreach ($fğĞš±” as $Cñáá¿ ‹È) { IO::mkdir($Cñáá¿ ‹È); } foreach ($D‹·ëÅ‹Î as $Cñáá¿ ‹È) { IO::copy($Cñáá¿ ‹È[$aŠ³­îŒ[984]], $Cñáá¿ ‹È[$aŠ³­îŒ[985]], REPEAT_REPLACE); } goto B‘¸ãâç™é; dÁˆœ¬¨³: $aŠ³­îŒ =& $_SERVER[şÅ²é¤èİ]; if (!IO::exist($bî„³¨—ˆ)) { return !1; } if (!IO::exist($fçìëŠ©°)) { IO::mkdir($fçìëŠ©°); } goto Bí®£ˆÎµ; B‘¸ãâç™é: } private static function _listAll($EÛ‡Å«Ì”©) { $a»×²Š·×› =& $_SERVER[şÅ²é¤èİ]; $EÛ‡Å«Ì”© = KodIO::clear($EÛ‡Å«Ì”©); $AññŠéµ = IO::listAll($EÛ‡Å«Ì”©); foreach ($AññŠéµ as &$cõ‹ŒáøÙ) { $c£²÷âó½¢ = substr($cõ‹ŒáøÙ[$a»×²Š·×›[76]], strlen($EÛ‡Å«Ì”©)); $cõ‹ŒáøÙ[$a»×²Š·×›[988]] = trim($c£²÷âó½¢, $a»×²Š·×›[8]); } return array_to_keyvalue($AññŠéµ, $a»×²Š·×›[988]); } private static function driverMake(&$a¹§¦Ğâ”ß) { goto a¸Öô¿¡¤Õ; B‚Ÿç‰ñ¿¼: return $f‰«ËÍ°Ûù; goto a§á‚×‡ÕÍ; a¸Öô¿¡¤Õ: $AÊ ¹Ü¤‚Å =& $_SERVER[şÅ²é¤èİ]; $A¨Š®Ñ ´• = KodIO::parse($a¹§¦Ğâ”ß); if (!self::$driverListSystem) { $eí©ØÛ¥ö = Model($AÊ ¹Ü¤‚Å[697])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($eí©ØÛ¥ö, $AÊ ¹Ü¤‚Å[361]); } goto AĞÊ¢ÏîÄ; AĞÊ¢ÏîÄ: if ($A¨Š®Ñ ´•[$AÊ ¹Ü¤‚Å[29]] == KodIO::KOD_IO && !self::$driverListSystem[$A¨Š®Ñ ´•[$AÊ ¹Ü¤‚Å[361]]]) { return !1; } $a¹§¦Ğâ”ß = $A¨Š®Ñ ´•[$AÊ ¹Ü¤‚Å[989]]; $f‰«ËÍ°Ûù = self::driverGet($A¨Š®Ñ ´•, $a¹§¦Ğâ”ß); goto B‚Ÿç‰ñ¿¼; a§á‚×‡ÕÍ: } private static function driverGet($a¢ò¼¥’êÀ, &$c­Ëº­™š) { goto D£°£‹ÀÀ; C°Æ×çœ°Ê: if (isset($fèÍ–âÅ‹[$dÕ¤¨‡Ïã[6]][$dÕ¤¨‡Ïã[1001]])) { $a”ÅŠèíÒæ->pathBase = rtrim($fèÍ–âÅ‹[$dÕ¤¨‡Ïã[6]][$dÕ¤¨‡Ïã[1001]], $dÕ¤¨‡Ïã[8]) . $dÕ¤¨‡Ïã[8]; $c­Ëº­™š = $a”ÅŠèíÒæ->pathBase . ltrim($c­Ëº­™š, $dÕ¤¨‡Ïã[8]); } $c­Ëº­™š = $a”ÅŠèíÒæ->getPath($c­Ëº­™š); if (isset($a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[975]])) { $c­Ëº­™š = $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[975]]; } goto dÍµ­¢±†ö; D£°£‹ÀÀ: $dÕ¤¨‡Ïã =& $_SERVER[şÅ²é¤èİ]; $c¿Ğ©„ö¬Î = $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[990]]; $fŒ‰å–ù§× = $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[361]]; goto B öÕĞÕ™‰; B öÕĞÕ™‰: switch ($a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[29]]) { case KodIO::KOD_IO: $fèÍ–âÅ‹ = self::$driverListSystem[$fŒ‰å–ù§×]; break; case KodIO::KOD_SOURCE: $c­Ëº­™š = $fŒ‰å–ù§× . $c­Ëº­™š; $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[992], $dÕ¤¨‡Ïã[6] => $a¢ò¼¥’êÀ); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $eĞÉ¯›¬±Á = $GLOBALS[$dÕ¤¨‡Ïã[993]]; self::$driverListUser = array_to_keyvalue($eĞÉ¯›¬±Á, $dÕ¤¨‡Ïã[361]); } $fèÍ–âÅ‹ = self::$driverListUser[$fŒ‰å–ù§×]; break; case KodIO::KOD_SHARE_LINK: $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[994], $dÕ¤¨‡Ïã[6] => $a¢ò¼¥’êÀ); $FÄ¡åñ¨Á = Action($dÕ¤¨‡Ïã[995])->sharePathInfo($a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[76]]); $c­Ëº­™š = $FÄ¡åñ¨Á[$dÕ¤¨‡Ïã[363]]; if (!$FÄ¡åñ¨Á[$dÕ¤¨‡Ïã[363]]) { $A·Áï“¬Äë = Model($dÕ¤¨‡Ïã[526])->getInfo($FÄ¡åñ¨Á[$dÕ¤¨‡Ïã[434]]); $c­Ëº­™š = KodIO::clear($A·Áï“¬Äë[$dÕ¤¨‡Ïã[996]] . $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[989]]); $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[432]] = $A·Áï“¬Äë; $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[975]] = $c­Ëº­™š; $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[997], $dÕ¤¨‡Ïã[6] => $a¢ò¼¥’êÀ); } break; case KodIO::KOD_SHARE_ITEM: $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[998], $dÕ¤¨‡Ïã[6] => $a¢ò¼¥’êÀ); $A·Áï“¬Äë = Model($dÕ¤¨‡Ïã[526])->getInfo($a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[361]]); if ($A·Áï“¬Äë[$dÕ¤¨‡Ïã[363]] == $dÕ¤¨‡Ïã[461]) { $c­Ëº­™š = KodIO::clear($A·Áï“¬Äë[$dÕ¤¨‡Ïã[996]] . $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[989]]); $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[432]] = $A·Áï“¬Äë; $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[975]] = $c­Ëº­™š; $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[999], $dÕ¤¨‡Ïã[6] => $a¢ò¼¥’êÀ); } break; default: $c­Ëº­™š = $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[76]]; $fèÍ–âÅ‹ = array($dÕ¤¨‡Ïã[991] => $dÕ¤¨‡Ïã[1000]); break; } $câß…È¼·Ë = $a¢ò¼¥’êÀ[$dÕ¤¨‡Ïã[76]]; if (!isset(self::$driverCache[$câß…È¼·Ë])) { $E¤ä¶‡˜¼Ï = $dÕ¤¨‡Ïã[72] . self::driverType($fèÍ–âÅ‹[$dÕ¤¨‡Ïã[89]]); if (!class_exists($E¤ä¶‡˜¼Ï)) { show_json("{$E¤ä¶‡˜¼Ï}\x20\x6e\157\x74\x20\145\170\x69\163\164\163\41", !1); } $BæÓÙñ÷ù• = isset($fèÍ–âÅ‹[$dÕ¤¨‡Ïã[6]]) ? $fèÍ–âÅ‹[$dÕ¤¨‡Ïã[6]] : !1; self::$driverCache[$câß…È¼·Ë] = new $E¤ä¶‡˜¼Ï($BæÓÙñ÷ù•); } goto D °„Œ½Û°; D °„Œ½Û°: $a”ÅŠèíÒæ = self::$driverCache[$câß…È¼·Ë]; $a”ÅŠèíÒæ->pathDriver = $c¿Ğ©„ö¬Î; $a”ÅŠèíÒæ->pathBase = $dÕ¤¨‡Ïã[33]; goto C°Æ×çœ°Ê; dÍµ­¢±†ö: $a”ÅŠèíÒæ->path = $c­Ëº­™š; return $a”ÅŠèíÒæ; goto D¬§ğô‘É„; D¬§ğô‘É„: } private static function driverType($Eê§×œ×¬) { $F±¤š´ö±Ç =& $_SERVER[şÅ²é¤èİ]; $Eê§×œ×¬ = strtolower($Eê§×œ×¬); if ($Eê§×œ×¬ == $F±¤š´ö±Ç[65]) { $Eê§×œ×¬ = $F±¤š´ö±Ç[1002]; } else { if (in_array($Eê§×œ×¬, array($F±¤š´ö±Ç[102], $F±¤š´ö±Ç[58], $F±¤š´ö±Ç[1003]))) { $Eê§×œ×¬ = ucfirst($Eê§×œ×¬); } else { $Eê§×œ×¬ = strtoupper($Eê§×œ×¬); } } return $Eê§×œ×¬; } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $FáÙ°’½—É; if (!$FáÙ°’½—É) { $aŒ³ª¬øõ = IO::init($_SERVER[şÅ²é¤èİ][8]); } return $aŒ³ª¬øõ; } private static function iconvSystem($Fä—ãÅ…») { return self::local()->iconvSystem($Fä—ãÅ…»); } private static function iconvApp($BŞ‡·½±æ†) { return self::local()->iconvApp($BŞ‡·½±æ†); } public static function zip($döò½…ÆÃé, $AÊ‡¶“Ÿ„¡ = "\x7a\151\x70", $EÑŒî¯¸Åƒ = '', $E”õšÒÂ•º = REPEAT_RENAME) { goto CÔ¨Ü”¦Óô; DÕ†¦Ô¶†Â: if ($EÑŒî¯¸Åƒ || !$cÍÏ•—ª–) { if ($cÍÏ•—ª– && strstr($cÍÏ•—ª–, TEMP_FILES)) { $aë“¼ŞëÔÛ = $AõáÃåßè = array(); recursion_dir($dÃëò™áİ—, $aë“¼ŞëÔÛ, $AõáÃåßè, 0); foreach ($aë“¼ŞëÔÛ as $A¾ºÈĞ¢) { del_dir($A¾ºÈĞ¢); } foreach ($AõáÃåßè as $E§ßˆ ÙÄ¤) { if ($E§ßˆ ÙÄ¤ == $cÕŒñŒ°Ñ¤) { continue; } del_file($E§ßˆ ÙÄ¤); } } return $aÉŞŒŒÆã; } $eˆ¡å´®„ = self::pathFather($D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[76]]); $eˆ¡å´®„ = $Bå»øîÃ·£->getPathOuter($Bå»øîÃ·£->iconvSystem($eˆ¡å´®„)); goto D¡îèì˜„; BáôÒ‹Ÿ¤ù: $cÍÏ•—ª– = !1; if (!$EÑŒî¯¸Åƒ && $Bå»øîÃ·£->getType() == $AÇ¼ÚõÈŞó[102]) { $AõáÃåßè = self::zipFileList($döò½…ÆÃé); } else { $cÍÏ•—ª– = $EÑŒî¯¸Åƒ ? $EÑŒî¯¸Åƒ : TEMP_FILES . $AÇ¼ÚõÈŞó[1004] . time() . rand_string(5) . $AÇ¼ÚõÈŞó[8]; mk_dir($cÍÏ•—ª–); $AõáÃåßè = self::zipFileList($döò½…ÆÃé, $cÍÏ•—ª–); } $bó™†ÚÜ Œ = $D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[28]]; goto Dñò®èËø; D¡îèì˜„: $dö÷åÆÛ£á = self::move($aÉŞŒŒÆã, $eˆ¡å´®„, $E”õšÒÂ•º); if (!$dö÷åÆÛ£á) { del_dir($cÍÏ•—ª–); show_json(LNG($AÇ¼ÚõÈŞó[1006]), !1); } del_dir($cÍÏ•—ª–); goto FÔ¬ª½ìº÷; FÔ¬ª½ìº÷: return $dö÷åÆÛ£á; goto d¾‡¢øƒÅ; DâŞÍÁñÄ½: foreach ($AõáÃåßè as $aªÊÁÜö—® => $CÓ¶´Äø¿¬) { $AõáÃåßè[$aªÊÁÜö—®] = self::iconvSystem($CÓ¶´Äø¿¬); } KodArchive::create($cÕŒñŒ°Ñ¤, $AõáÃåßè); if (!IO::exist($aÉŞŒŒÆã)) { if ($cÍÏ•—ª–) { del_dir($cÍÏ•—ª–); } show_json(LNG($AÇ¼ÚõÈŞó[1006]), !1); } goto DÕ†¦Ô¶†Â; CÔ¨Ü”¦Óô: $AÇ¼ÚõÈŞó =& $_SERVER[şÅ²é¤èİ]; $Bå»øîÃ·£ = self::init($döò½…ÆÃé[0][$AÇ¼ÚõÈŞó[76]]); $D†ŒÓÀ‹Õ = self::info($döò½…ÆÃé[0][$AÇ¼ÚõÈŞó[76]]); goto BáôÒ‹Ÿ¤ù; f„ê˜ªÆÊ: $aÉŞŒŒÆã = $dÃëò™áİ— . $bó™†ÚÜ Œ . $AÇ¼ÚõÈŞó[92] . $AÊ‡¶“Ÿ„¡; $aÉŞŒŒÆã = get_filename_auto($aÉŞŒŒÆã, $AÇ¼ÚõÈŞó[33], $E”õšÒÂ•º); $cÕŒñŒ°Ñ¤ = self::iconvSystem($aÉŞŒŒÆã); goto DâŞÍÁñÄ½; Dñò®èËø: if (count($AõáÃåßè) > 1) { $dœ…ñ¤ÆÒ = isset($D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[459]]) ? $D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[459]] : $D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[76]]; $bó™†ÚÜ Œ = get_path_this(get_path_father($dœ…ñ¤ÆÒ)); } $dÃëò™áİ— = $cÍÏ•—ª–; if (!$dÃëò™áİ—) { $dÃëò™áİ— = get_path_father($D†ŒÓÀ‹Õ[$AÇ¼ÚõÈŞó[76]]); $Cñ¸å§Ôùƒ = IO::info($dÃëò™áİ—); if (!$Cñ¸å§Ôùƒ[$AÇ¼ÚõÈŞó[185]]) { show_json(LNG($AÇ¼ÚõÈŞó[1005]), !1); } } goto f„ê˜ªÆÊ; d¾‡¢øƒÅ: } public static function unzip($e‚ï—ƒ˜Ë¬, $a¼Èç†¢ˆó = "\162\x65\160\154\x61\x63\x65") { goto e˜ªøªÑÖ‰; DãˆÖ÷ÍÛØ: $f™²‹ÍƒßÑ = self::iconvSystem($f™²‹ÍƒßÑ); $DêÏ°Š¼«¯ = isset($e‚ï—ƒ˜Ë¬[$C¥¹Äî‚Ì‡[1009]]) ? $e‚ï—ƒ˜Ë¬[$C¥¹Äî‚Ì‡[1009]] : $C¥¹Äî‚Ì‡[1010]; $c„ˆ±ØŒÜÕ = KodArchive::extract($f™²‹ÍƒßÑ, $E«±ù±ˆ¨õ . $C¥¹Äî‚Ì‡[8], $DêÏ°Š¼«¯); goto c¾¨Şš˜™Û; AÛ•ÑÉ£Ïî: if (!($a¯œåº‡¡ö = parent::info($B‚‰ä­Ãà))) { show_json(LNG($C¥¹Äî‚Ì‡[1008]), !1); } if (!($E“Ø‹…•Â = parent::infoFull($C¤›íœ¿ˆÄ))) { $C¤›íœ¿ˆÄ = parent::mkdir($C¤›íœ¿ˆÄ); $E“Ø‹…•Â = array($C¥¹Äî‚Ì‡[76] => $C¤›íœ¿ˆÄ); } else { if (isset($E“Ø‹…•Â[$C¥¹Äî‚Ì‡[363]]) && trim($E“Ø‹…•Â[$C¥¹Äî‚Ì‡[76]], $C¥¹Äî‚Ì‡[8]) != trim($C¤›íœ¿ˆÄ, $C¥¹Äî‚Ì‡[8])) { $e¼ˆ÷“” Ã = KodIO::make($E“Ø‹…•Â[$C¥¹Äî‚Ì‡[454]]); $b˜Ùíâ°« = parent::fileNameAuto($e¼ˆ÷“” Ã, $E“Ø‹…•Â[$C¥¹Äî‚Ì‡[28]], REPEAT_RENAME_FOLDER, !0); $C¤›íœ¿ˆÄ = parent::mkdir($e¼ˆ÷“” Ã . $b˜Ùíâ°«); $E“Ø‹…•Â = array($C¥¹Äî‚Ì‡[76] => $C¤›íœ¿ˆÄ); } } $C¤›íœ¿ˆÄ = $E“Ø‹…•Â[$C¥¹Äî‚Ì‡[76]]; goto eĞòŞ‡ÏÓ§; a£ÂÌÕ‹¨ò: mk_dir($E«±ù±ˆ¨õ); $f™²‹ÍƒßÑ = $E«±ù±ˆ¨õ . $C¥¹Äî‚Ì‡[92] . $a¯œåº‡¡ö[$C¥¹Äî‚Ì‡[155]]; if (!@file_exists(self::iconvSystem($f™²‹ÍƒßÑ))) { $dïõ‚×ÕÌÙ = self::localFilePath($B‚‰ä­Ãà, $a¯œåº‡¡ö[$C¥¹Äî‚Ì‡[155]]); $f™²‹ÍƒßÑ = $dïõ‚×ÕÌÙ ? $dïõ‚×ÕÌÙ : parent::download($B‚‰ä­Ãà, $f™²‹ÍƒßÑ); } goto DãˆÖ÷ÍÛØ; B“ ¥¤¨¢: recursion_dir($E«±ù±ˆ¨õ, $A¤ÜË­ÙÔç, $e””Ä …ó·, 0); $A¬øÁÇ™Ì = array_merge($A¤ÜË­ÙÔç, $e””Ä …ó·); foreach ($A¬øÁÇ™Ì as $CâŸĞø”¶) { $CâŸĞø”¶ = self::iconvApp($CâŸĞø”¶); self::move($CâŸĞø”¶, $C¤›íœ¿ˆÄ, $a¼Èç†¢ˆó); } goto EÒÃ¼™ëÑ÷; c¾¨Şš˜™Û: self::archiveExt(); if (!$c„ˆ±ØŒÜÕ[$C¥¹Äî‚Ì‡[1011]]) { show_json($C¥¹Äî‚Ì‡[1012] . $c„ˆ±ØŒÜÕ[$C¥¹Äî‚Ì‡[1013]], !1); } Hook::trigger($C¥¹Äî‚Ì‡[1014], $E«±ù±ˆ¨õ); goto B“ ¥¤¨¢; eĞòŞ‡ÏÓ§: $C§Ô–‚ƒ = self::tmpFileName($a¯œåº‡¡ö); $E«±ù±ˆ¨õ = TEMP_FILES . $C§Ô–‚ƒ; del_dir($E«±ù±ˆ¨õ); goto a£ÂÌÕ‹¨ò; EÒÃ¼™ëÑ÷: del_dir($E«±ù±ˆ¨õ); if (!$dïõ‚×ÕÌÙ) { del_file($f™²‹ÍƒßÑ); } return !0; goto DÛŒî™š˜š; e˜ªøªÑÖ‰: $C¥¹Äî‚Ì‡ =& $_SERVER[şÅ²é¤èİ]; $B‚‰ä­Ãà = $e‚ï—ƒ˜Ë¬[$C¥¹Äî‚Ì‡[76]]; $C¤›íœ¿ˆÄ = $e‚ï—ƒ˜Ë¬[$C¥¹Äî‚Ì‡[1007]]; goto AÛ•ÑÉ£Ïî; DÛŒî™š˜š: } public function unzipList($fğÃ¤¿â’) { goto DÛµ‚Ú»çÑ; fá×ÁÊì „: self::setContent($e›ÜÜÃÛàÖ, $B÷áç˜­¥Á); if (count($F³‹„ùËÕÄ[$BÖÄ‘­§ë[1013]]) >= $E™ÕŠé‡ø) { show_json(sprintf(LNG($BÖÄ‘­§ë[1017]), count($F³‹„ùËÕÄ[$BÖÄ‘­§ë[1013]])), !1); } return $F³‹„ùËÕÄ[$BÖÄ‘­§ë[1013]]; goto bë Œ¯£Ø; DùÉóÇÔ˜Ù: $E™ÕŠé‡ø = 50000; if (request_url_safe($BÒ‡¶…´)) { $A—‡‡Ûˆ® = parse_url_query($BÒ‡¶…´); if (!isset($A—‡‡Ûˆ®[$BÖÄ‘­§ë[76]])) { show_json($BÖÄ‘­§ë[1016], !1); } } $FĞÌ˜ô¯Øâ = isset($A—‡‡Ûˆ®) ? $A—‡‡Ûˆ®[$BÖÄ‘­§ë[76]] : $BÒ‡¶…´; goto A·šÌÊÑ¿Œ; DÛµ‚Ú»çÑ: $BÖÄ‘­§ë =& $_SERVER[şÅ²é¤èİ]; $BÒ‡¶…´ = $fğÃ¤¿â’[$BÖÄ‘­§ë[76]]; $fŒó‚ÜÕä = isset($fğÃ¤¿â’[$BÖÄ‘­§ë[1015]]) ? $fğÃ¤¿â’[$BÖÄ‘­§ë[1015]] : -1; goto DùÉóÇÔ˜Ù; c×´Ğ¤ò•: $B»¡»ß„Ì† = $B‚ÃÈÒŸÌÅ . $BÖÄ‘­§ë[8] . $F©½·Ú™; if (!@file_exists(self::iconvSystem($B»¡»ß„Ì†))) { if (isset($A—‡‡Ûˆ®)) { url_request($BÒ‡¶…´, $BÖÄ‘­§ë[1018], $B»¡»ß„Ì†); } else { $Câ¤á’Â‘Ø = self::localFilePath($BÒ‡¶…´, $B‰„»“ØÛÛ[$BÖÄ‘­§ë[155]]); $B»¡»ß„Ì† = $Câ¤á’Â‘Ø ? $Câ¤á’Â‘Ø : self::download($BÒ‡¶…´, $B»¡»ß„Ì†); } } $B»¡»ß„Ì† = self::iconvSystem($B»¡»ß„Ì†); goto cõ¦ƒ°‹Ş˜; A·šÌÊÑ¿Œ: $B‰„»“ØÛÛ = self::info($FĞÌ˜ô¯Øâ); $c›‰àíÃ© = self::tmpFileName($B‰„»“ØÛÛ); if (isset($A—‡‡Ûˆ®)) { $E‹Ç‰ÉÄª = array($A—‡‡Ûˆ®[$BÖÄ‘­§ë[76]], $A—‡‡Ûˆ®[$BÖÄ‘­§ë[1015]], $A—‡‡Ûˆ®[$BÖÄ‘­§ë[28]]); $F©½·Ú™ = md5(implode($BÖÄ‘­§ë[71], $E‹Ç‰ÉÄª)) . $BÖÄ‘­§ë[92] . get_path_ext($A—‡‡Ûˆ®[$BÖÄ‘­§ë[28]]); } else { $E‹Ç‰ÉÄª = array($B‰„»“ØÛÛ[$BÖÄ‘­§ë[28]], $B‰„»“ØÛÛ[$BÖÄ‘­§ë[76]], $B‰„»“ØÛÛ[$BÖÄ‘­§ë[78]]); $F©½·Ú™ = md5(implode($BÖÄ‘­§ë[71], $E‹Ç‰ÉÄª)) . $BÖÄ‘­§ë[92] . $B‰„»“ØÛÛ[$BÖÄ‘­§ë[155]]; } goto eÄ÷íåñ; cõ¦ƒ°‹Ş˜: if ($fŒó‚ÜÕä >= 0) { $BÜï¬ãŒ† = isset($fğÃ¤¿â’[$BÖÄ‘­§ë[1019]]) ? $fğÃ¤¿â’[$BÖÄ‘­§ë[1019]] : !1; $EáØ˜ØÊ®ñ = isset($fğÃ¤¿â’[$BÖÄ‘­§ë[28]]) ? $fğÃ¤¿â’[$BÖÄ‘­§ë[28]] : $BÖÄ‘­§ë[33]; KodArchive::filePreview($B»¡»ß„Ì†, $fŒó‚ÜÕä, $BÜï¬ãŒ†, $EáØ˜ØÊ®ñ); self::archiveExt(); die; } $F³‹„ùËÕÄ = KodArchive::listContent($B»¡»ß„Ì†); self::archiveExt(); goto CçªÈ¬ò‡º; CçªÈ¬ò‡º: del_dir($B‚ÃÈÒŸÌÅ); if (!$F³‹„ùËÕÄ[$BÖÄ‘­§ë[1011]]) { show_json($F³‹„ùËÕÄ[$BÖÄ‘­§ë[1013]], !1); } $B÷áç˜­¥Á = json_encode($F³‹„ùËÕÄ[$BÖÄ‘­§ë[1013]]); goto fá×ÁÊì „; eÄ÷íåñ: if ($fŒó‚ÜÕä == -1) { $e›ÜÜÃÛàÖ = IO_PATH_SYSTEM_TEMP . "\x7a\x69\160\126\x69\x65\x77\57{$c›‰àíÃ©}\57{$F©½·Ú™}\56\x6c\x6f\147"; $Aß±¯«â©À = self::infoFull($e›ÜÜÃÛàÖ); if ($Aß±¯«â©À) { $e›ÜÜÃÛàÖ = $Aß±¯«â©À[$BÖÄ‘­§ë[76]]; $DêçÏÚˆ†  = self::getContent($e›ÜÜÃÛàÖ); if ($DêçÏÚˆ† ) { $B÷áç˜­¥Á = json_decode($DêçÏÚˆ† , !0); if (count($B÷áç˜­¥Á) >= $E™ÕŠé‡ø) { show_json(sprintf(LNG($BÖÄ‘­§ë[1017]), count($B÷áç˜­¥Á)), !1); } return $B÷áç˜­¥Á; } } else { $e›ÜÜÃÛàÖ = self::mkfile($e›ÜÜÃÛàÖ); } } $B‚ÃÈÒŸÌÅ = TEMP_FILES . $c›‰àíÃ©; if (!is_dir($B‚ÃÈÒŸÌÅ)) { mk_dir($B‚ÃÈÒŸÌÅ); } goto c×´Ğ¤ò•; bë Œ¯£Ø: } private function zipFileList($bğÇ¯Ì´‘, $eÄøîÅ”Ã = false) { $f×ìªÙšÑ =& $_SERVER[şÅ²é¤èİ]; $Eš¼ƒ–ƒ×ì = array(); foreach ($bğÇ¯Ì´‘ as $aÃ«¶÷³ô¤) { $AïİæË‰ï” = $aÃ«¶÷³ô¤[$f×ìªÙšÑ[76]]; if ($eÄøîÅ”Ã) { $AïİæË‰ï” = self::copy($aÃ«¶÷³ô¤[$f×ìªÙšÑ[76]], $eÄøîÅ”Ã, $f×ìªÙšÑ[747]); } if ($AïİæË‰ï” && self::local()->exist($AïİæË‰ï”)) { $Eš¼ƒ–ƒ×ì[$aÃ«¶÷³ô¤[$f×ìªÙšÑ[76]]] = $AïİæË‰ï”; } } if (!empty($Eš¼ƒ–ƒ×ì)) { return array_values($Eš¼ƒ–ƒ×ì); } show_json(LNG($f×ìªÙšÑ[1020]), !1); } public static function tmpFileName($Aˆ›±œæˆ¡) { $B²ë×£—ñ  =& $_SERVER[şÅ²é¤èİ]; $CßƒãŒİ = array($Aˆ›±œæˆ¡[$B²ë×£—ñ [28]], $Aˆ›±œæˆ¡[$B²ë×£—ñ [76]], $Aˆ›±œæˆ¡[$B²ë×£—ñ [78]], $Aˆ›±œæˆ¡[$B²ë×£—ñ [452]]); return md5(implode($B²ë×£—ñ [71], $CßƒãŒİ)); } private function localFilePath($aâã±„Ùëä, $bª©òè–î‘) { goto bá“½‡‰”¨; cİ–ÊìâÉ‡: return $d‰™ãÂ†Ÿ->path; goto FÈ™£öœ™ª; bá“½‡‰”¨: $C×Åùã«¯ =& $_SERVER[şÅ²é¤èİ]; $a–ÇŸãêŞ¢ = KodIO::parse($aâã±„Ùëä); if ($a–ÇŸãêŞ¢[$C×Åùã«¯[29]] == KodIO::KOD_SOURCE) { $ešì™•Ê = Model($C×Åùã«¯[755])->fileInfoGet(KodIO::sourceID($aâã±„Ùëä)); if (!$ešì™•Ê[$C×Åùã«¯[76]]) { show_json($C×Åùã«¯[1021], !1); } $aâã±„Ùëä = $ešì™•Ê[$C×Åùã«¯[76]]; } goto Då•äõ¯ˆ; f¿•óÔ±Œµ: if ($f·†ˆĞåñ  != $C×Åùã«¯[102] || $bª©òè–î‘ == $C×Åùã«¯[1023] && $d’—Ñ½ô½) { return !1; } if (!$d‰™ãÂ†Ÿ->exist($d‰™ãÂ†Ÿ->path)) { show_json(LNG($C×Åùã«¯[101]), !1); } self::archiveExt($bª©òè–î‘); goto cİ–ÊìâÉ‡; Då•äõ¯ˆ: $d‰™ãÂ†Ÿ = self::init($aâã±„Ùëä); $f·†ˆĞåñ  = $d‰™ãÂ†Ÿ->getType(); $d’—Ñ½ô½ = strtoupper(substr(PHP_OS, 0, 3)) == $C×Åùã«¯[1022]; goto f¿•óÔ±Œµ; FÈ™£öœ™ª: } private function archiveExt($Eº¯È× ¥ğ = '') { $GLOBALS[$_SERVER[şÅ²é¤èİ][1024]] = $Eº¯È× ¥ğ; } } class KodIO { const KOD_SOURCE = "\x7b\x73\x6f\x75\162\x63\x65\x7d"; const KOD_USER_RECYCLE = "\x7b\165\163\145\162\122\x65\x63\x79\143\x6c\x65\x7d"; const KOD_USER_FAV = "\x7b\165\x73\x65\x72\x46\x61\166\175"; const KOD_USER_FILE_TAG = "\173\165\163\x65\x72\106\x69\x6c\x65\x54\x61\147\x7d"; const KOD_USER_FILE_TYPE = "\x7b\x75\163\x65\x72\106\151\154\145\x54\x79\160\145\175"; const KOD_GROUP_ROOT_SELF = "\x7b\x67\x72\x6f\x75\x70\x52\157\157\164\x53\145\154\x66\x7d"; const KOD_USER_SHARE = "\173\165\x73\x65\162\x53\150\x61\x72\145\175"; const KOD_USER_SHARE_LINK = "\173\x75\163\145\162\123\150\x61\162\145\x4c\x69\x6e\153\x7d"; const KOD_USER_SHARE_TO_ME = "\173\163\150\x61\x72\145\x54\157\x4d\145\x7d"; const KOD_SHARE_ITEM = "\x7b\x73\x68\141\162\x65\111\x74\x65\155\x7d"; const KOD_SHARE_LINK = "\173\163\x68\141\x72\145\111\x74\x65\x6d\114\x69\x6e\x6b\x7d"; const KOD_SEARCH = "\x7b\163\145\x61\x72\143\150\x7d"; const KOD_BLOCK = "\x7b\x62\x6c\157\143\153\x7d"; const KOD_IO = "\x7b\x69\x6f\x7d"; const KOD_USER_RECENT = "\173\165\x73\x65\162\122\145\156\143\145\156\164\175"; const KOD_USER_DRIVER = "\x7b\165\163\145\x72\104\x72\151\x76\x65\162\175"; public static function typeList() { $C‚ä“§Ì¡– =& $_SERVER[şÅ²é¤èİ]; return array($C‚ä“§Ì¡–[1025] => self::KOD_SOURCE, $C‚ä“§Ì¡–[1026] => self::KOD_USER_RECYCLE, $C‚ä“§Ì¡–[1027] => self::KOD_USER_FAV, $C‚ä“§Ì¡–[1028] => self::KOD_USER_FILE_TAG, $C‚ä“§Ì¡–[1029] => self::KOD_USER_FILE_TYPE, $C‚ä“§Ì¡–[1030] => self::KOD_GROUP_ROOT_SELF, $C‚ä“§Ì¡–[1031] => self::KOD_USER_SHARE, $C‚ä“§Ì¡–[1032] => self::KOD_USER_SHARE_LINK, $C‚ä“§Ì¡–[1033] => self::KOD_USER_SHARE_TO_ME, $C‚ä“§Ì¡–[1034] => self::KOD_SHARE_ITEM, $C‚ä“§Ì¡–[1035] => self::KOD_SHARE_LINK, $C‚ä“§Ì¡–[1036] => self::KOD_SEARCH, $C‚ä“§Ì¡–[1037] => self::KOD_BLOCK, $C‚ä“§Ì¡–[1038] => self::KOD_IO, $C‚ä“§Ì¡–[1039] => self::KOD_USER_RECENT, $C‚ä“§Ì¡–[1040] => self::KOD_USER_DRIVER); } public static function parse($AÁİ¾ÆŠ) { goto F‡¤ˆ¨Ï’ë; F‡¤ˆ¨Ï’ë: $Câ¶´ÉÇóÚ =& $_SERVER[şÅ²é¤èİ]; $AÁİ¾ÆŠ = self::clear($AÁİ¾ÆŠ); $FêÛ“Ãò§ = array_values(self::typeList()); goto BÁ¬ïëÅŒÕ; BÁ¬ïëÅŒÕ: preg_match($Câ¶´ÉÇóÚ[1041], $AÁİ¾ÆŠ, $aœïŸİåÖ¶); $aöÂ’¢»ÚŸ = array($Câ¶´ÉÇóÚ[382] => !1, $Câ¶´ÉÇóÚ[1042] => !1, $Câ¶´ÉÇóÚ[379] => !1, $Câ¶´ÉÇóÚ[76] => $AÁİ¾ÆŠ, $Câ¶´ÉÇóÚ[990] => !1, $Câ¶´ÉÇóÚ[989] => $Câ¶´ÉÇóÚ[33]); if (is_array($aœïŸİåÖ¶) && count($aœïŸİåÖ¶) == 5) { $aé‚Ç¾Ö† = $Câ¶´ÉÇóÚ[1043] . $aœïŸİåÖ¶[2] . $Câ¶´ÉÇóÚ[309]; if (in_array($aé‚Ç¾Ö†, $FêÛ“Ãò§)) { $aöÂ’¢»ÚŸ[$Câ¶´ÉÇóÚ[990]] = $aœïŸİåÖ¶[1]; $aöÂ’¢»ÚŸ[$Câ¶´ÉÇóÚ[29]] = $aé‚Ç¾Ö†; $aöÂ’¢»ÚŸ[$Câ¶´ÉÇóÚ[1044]] = substr($aé‚Ç¾Ö†, 1, -1); $aöÂ’¢»ÚŸ[$Câ¶´ÉÇóÚ[361]] = $aœïŸİåÖ¶[3]; } $aöÂ’¢»ÚŸ[$Câ¶´ÉÇóÚ[989]] = $aœïŸİåÖ¶[4]; } goto eñÚêéòÁÏ; eñÚêéòÁÏ: return $aöÂ’¢»ÚŸ; goto Eİ÷¾§À¹°; Eİ÷¾§À¹°: } public static function clear($Eˆ•¹˜Î¼×) { goto aôÂèµ”ÚÕ; f¶¸Õã†Óñ: if (substr($Eˆ•¹˜Î¼×, 0, 3) == $F˜¢œœ›½[1046]) { $Eˆ•¹˜Î¼× = substr($Eˆ•¹˜Î¼×, 3); } while (strstr($Eˆ•¹˜Î¼×, $b‡Ô™Øã¥)) { $Eˆ•¹˜Î¼× = str_replace($b‡Ô™Øã¥, $F˜¢œœ›½[8], $Eˆ•¹˜Î¼×); } $Eˆ•¹˜Î¼× = preg_replace($F˜¢œœ›½[1047], $F˜¢œœ›½[8], $Eˆ•¹˜Î¼×); goto e¸ğöèá¾÷; aôÂèµ”ÚÕ: $F˜¢œœ›½ =& $_SERVER[şÅ²é¤èİ]; $Eˆ•¹˜Î¼× = str_replace($F˜¢œœ›½[94], $F˜¢œœ›½[8], $Eˆ•¹˜Î¼×); $b‡Ô™Øã¥ = $F˜¢œœ›½[1045]; goto f¶¸Õã†Óñ; e¸ğöèá¾÷: if ($Eˆ•¹˜Î¼× == $F˜¢œœ›½[8]) { return $F˜¢œœ›½[8]; } $Eˆ•¹˜Î¼× = rtrim($Eˆ•¹˜Î¼×, $F˜¢œœ›½[8]); return $Eˆ•¹˜Î¼×; goto AÁÍÕ”®°±; AÁÍÕ”®°±: } public static function sourceID($Bóì®ïÜˆì) { $EÅÅ³¿©° =& $_SERVER[şÅ²é¤èİ]; $FæŠÔ‹°¶… = self::parse($Bóì®ïÜˆì); if ($FæŠÔ‹°¶…[$EÅÅ³¿©°[29]] !== self::KOD_SOURCE) { show_json(LNG($EÅÅ³¿©°[1048]), !1); } return $FæŠÔ‹°¶…[$EÅÅ³¿©°[361]]; } public static function make($e›÷—…‰¦) { if (!$e›÷—…‰¦) { return !1; } return self::makePath(self::KOD_SOURCE, intval($e›÷—…‰¦)); } public static function makeShare($E½ØíºÜ, $f¨Œ¥¿´¾Ÿ) { return self::makePath(self::KOD_SHARE_ITEM, $E½ØíºÜ, $f¨Œ¥¿´¾Ÿ); } public static function makeFileTypePath($eŞ±Áº’‡î) { return self::makePath(self::KOD_USER_FILE_TYPE, $eŞ±Áº’‡î); } public static function makeFileTagPath($aÇùÌ„Ú–•) { return self::makePath(self::KOD_USER_FILE_TAG, $aÇùÌ„Ú–•); } public static function makePath($cÖĞ†÷Â—Ï, $bğšŒˆ·—“ = '', $cîá¹‹ä± = '') { $D“Ö´‘Õ± =& $_SERVER[şÅ²é¤èİ]; $Eª»›šğŞ = substr($cÖĞ†÷Â—Ï, 1, -1); $BîÀ”İ¤«Á = $D“Ö´‘Õ±[1049] . $Eª»›šğŞ . $D“Ö´‘Õ±[728] . $bğšŒˆ·—“ . $D“Ö´‘Õ±[1050]; $BîÀ”İ¤«Á = $cîá¹‹ä± ? $BîÀ”İ¤«Á . $cîá¹‹ä± . $D“Ö´‘Õ±[8] : $BîÀ”İ¤«Á; return $BîÀ”İ¤«Á; } public static function hashPath($CçëÛåØÍ“) { $E¦Ş…‹“íŸ =& $_SERVER[şÅ²é¤èİ]; $cõÖ®¬ìÍ… = is_array($CçëÛåØÍ“) ? $CçëÛåØÍ“ : IO::info($CçëÛåØÍ“); $A¯ä½¸”Òª = _get($cõÖ®¬ìÍ…, $E¦Ş…‹“íŸ[1051], $E¦Ş…‹“íŸ[33]); if (!$A¯ä½¸”Òª) { $cî·ÆŒàÈ = KodIO::parse($cõÖ®¬ìÍ…[$E¦Ş…‹“íŸ[76]]); if (!$cî·ÆŒàÈ[$E¦Ş…‹“íŸ[29]]) { $A¯ä½¸”Òª = IO::hashSimple($cõÖ®¬ìÍ…[$E¦Ş…‹“íŸ[76]]); } } if (!$A¯ä½¸”Òª) { $A¯ä½¸”Òª = md5($cõÖ®¬ìÍ…[$E¦Ş…‹“íŸ[76]] . $cõÖ®¬ìÍ…[$E¦Ş…‹“íŸ[78]] . $cõÖ®¬ìÍ…[$E¦Ş…‹“íŸ[106]]); } return $A¯ä½¸”Òª; } public static function initSystemPath() { $aĞö½§£ù® =& $_SERVER[şÅ²é¤èİ]; $F¼ÁÒ®¨•» = array($aĞö½§£ù®[1052] => $aĞö½§£ù®[1053], $aĞö½§£ù®[1054] => $aĞö½§£ù®[1055], $aĞö½§£ù®[1056] => $aĞö½§£ù®[1057], $aĞö½§£ù®[1058] => $aĞö½§£ù®[1059]); foreach ($F¼ÁÒ®¨•» as $F‘£Ü¦¢Êç => $f‹±«Â¶Î) { if (!defined($F‘£Ü¦¢Êç)) { define($F‘£Ü¦¢Êç, self::systemPath($f‹±«Â¶Î)); } } } private static function systemPath($fç˜­¸ôÆ) { goto E‹ß–í£Ÿê; D·ÍÚê‡Â: return $AŒ©¶ğäº‰; goto Fº¨æâíø; EĞóŠ•á±³: if ($AŒ©¶ğäº‰) { return $AŒ©¶ğäº‰; } if ($fç˜­¸ôÆ == $e‡ÆŞ¢æÜŒ[1053]) { $AŒ©¶ğäº‰ = self::make(Model($e‡ÆŞ¢æÜŒ[755])->systemRootPathAdd($e‡ÆŞ¢æÜŒ[1062])); } else { $AŒ©¶ğäº‰ = self::systemPath($e‡ÆŞ¢æÜŒ[1053]); $bí¹èÚõİ = self::sourceID($AŒ©¶ğäº‰); $AŒ©¶ğäº‰ = self::make(Model($e‡ÆŞ¢æÜŒ[755])->mkdir($bí¹èÚõİ, $fç˜­¸ôÆ)); } Model($e‡ÆŞ¢æÜŒ[1061])->set($F«ä—¥«², $AŒ©¶ğäº‰); goto D·ÍÚê‡Â; E‹ß–í£Ÿê: $e‡ÆŞ¢æÜŒ =& $_SERVER[şÅ²é¤èİ]; $F«ä—¥«² = $e‡ÆŞ¢æÜŒ[1060] . ucfirst($fç˜­¸ôÆ); $AŒ©¶ğäº‰ = Model($e‡ÆŞ¢æÜŒ[1061])->get($F«ä—¥«²); goto EĞóŠ•á±³; Fº¨æâíø: } public static function systemFolder($b¡àÈÆÍ±) { $FÄæ‹­¨¼  = IO_PATH_SYSTEM_SOURCE . $b¡àÈÆÍ±; $fóß„”Ì = Cache::get($FÄæ‹­¨¼ ); if (!$fóß„”Ì) { $CÌàèë…Æ = IO::infoFull($FÄæ‹­¨¼ ); if (!$CÌàèë…Æ) { $fóß„”Ì = IO::mkdir($FÄæ‹­¨¼ , REPEAT_SKIP); } else { $fóß„”Ì = $CÌàèë…Æ[$_SERVER[şÅ²é¤èİ][76]]; } Cache::set($FÄæ‹­¨¼ , $fóß„”Ì, 3600 * 10); } return $fóß„”Ì; } public static function defaultDriver() { return Model($_SERVER[şÅ²é¤èİ][697])->defaultDriver(); } public static function defaultIO() { $fÏÖ²ğ =& $_SERVER[şÅ²é¤èİ]; $cƒ¸ÒçÂ = self::defaultDriver(); return $fÏÖ²ğ[1063] . $cƒ¸ÒçÂ[$fÏÖ²ğ[361]] . $fÏÖ²ğ[1050]; } public static function fileTypeList() { $c±òª†á°¿ =& $_SERVER[şÅ²é¤èİ]; $CÎ Úçƒ¿ = $GLOBALS[$c±òª†á°¿[6]][$c±òª†á°¿[1064]]; foreach ($CÎ Úçƒ¿ as $a‘ÄÃœÌæŠ => $b¼Œë½‡ˆã) { $fßù¡Æ¦’½ = $c±òª†á°¿[1065] . $a‘ÄÃœÌæŠ; $c¾á–ğÎ è = LNG($fßù¡Æ¦’½); if ($fßù¡Æ¦’½ != $c¾á–ğÎ è) { $CÎ Úçƒ¿[$a‘ÄÃœÌæŠ][$c±òª†á°¿[28]] = $c¾á–ğÎ è; } } return $CÎ Úçƒ¿; } } goto e±ê¢åÇ÷; AÇ»±ÀÂ: class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\157\144\x69\146\171\x54\151\x6d\145", "\x74\x69\x6d\145", "\x69\156\163\145\x72\x74\x2c\165\x70\x64\x61\164\x65", "\x66\165\156\143\164\x69\x6f\156"), array("\143\x72\x65\x61\x74\x65\124\x69\155\x65", "\x74\151\x6d\x65", "\151\156\163\145\162\164", "\146\x75\x6e\x63\164\151\157\156")); public function setDataAuto($D˜‹ƒãÛ§¨) { $this->dataAuto = $D˜‹ƒãÛ§¨; } public function __construct($c‡†¬ä§‚Ç = '', $eŒßµï‡ = '', $b´¾±´ƒÆÑ = '') { parent::__construct($c‡†¬ä§‚Ç, $eŒßµï‡, $b´¾±´ƒÆÑ); } static function textEncode($A÷ÏèÌ¼óæ) { $B§¥˜ã¶àõ =& $_SERVER[şÅ²é¤èİ]; if (!$A÷ÏèÌ¼óæ) { return $B§¥˜ã¶àõ[33]; } $BÕéÓˆö¤Â = json_encode($A÷ÏèÌ¼óæ); $BÕéÓˆö¤Â = preg_replace_callback($B§¥˜ã¶àõ[335], function ($c³³‰§»³à) { return addslashes($c³³‰§»³à[0]); }, $BÕéÓˆö¤Â); return json_decode($BÕéÓˆö¤Â); } static function textDecode($B¾©‹»ù¼ƒ) { $bÀÈ¿„ä¤ =& $_SERVER[şÅ²é¤èİ]; $e„ ‘ÎÑ‹ = json_encode($B¾©‹»ù¼ƒ); $e„ ‘ÎÑ‹ = preg_replace_callback($bÀÈ¿„ä¤[336], function ($bÄÜ¢×²å) { return $_SERVER[şÅ²é¤èİ][94]; }, $e„ ‘ÎÑ‹); return json_decode($e„ ‘ÎÑ‹); } protected $tableMeta = array(); protected function _beforeInsert(&$fÕîÄÆ¶ñ„, $DÚÙÍì•†ã) { $Aá®Äõß‡” =& $_SERVER[şÅ²é¤èİ]; if (!$this->checkDataAutoHas($Aá®Äõß‡”[337])) { return; } $this->dataBeforeFilter($fÕîÄÆ¶ñ„, $Aá®Äõß‡”[337]); } protected function _beforeUpdate(&$E²Ïø³µÉ¡, $F†¿ñÆÓ) { $F¡ÈÑŞÈ±Ü =& $_SERVER[şÅ²é¤èİ]; if (!$this->checkDataAutoHas($F¡ÈÑŞÈ±Ü[338])) { return; } $this->dataBeforeFilter($E²Ïø³µÉ¡, $F¡ÈÑŞÈ±Ü[338]); } protected function _afterSelect(&$cğ–»ˆ•ÄÚ, $aµ¸¢ÁÓéš) { if (!is_array($cğ–»ˆ•ÄÚ)) { return; } if (!$this->checkDataAutoHas($_SERVER[şÅ²é¤èİ][339])) { return; } foreach ($cğ–»ˆ•ÄÚ as &$Aã²‡Ù­‚) { $this->dataAfterFilter($Aã²‡Ù­‚); } } protected function _afterFind(&$B³Ã¡š½Öä, $aÙ–Â±îµ¸) { if (!is_array($B³Ã¡š½Öä)) { return; } if (!$this->checkDataAutoHas($_SERVER[şÅ²é¤èİ][339])) { return; } $this->dataAfterFilter($B³Ã¡š½Öä); } public function setAutoIncrement($dÉ‡ÍØÏ‚“) { $b¤ìóƒ“œ£ = array($this->getPk() => $dÉ‡ÍØÏ‚“); $eÅšŒÉ…õ† = $this->data($b¤ìóƒ“œ£)->add(); if ($eÅšŒÉ…õ†) { $this->delete($eÅšŒÉ…õ†); } } public function getAutoIncrement() { $D¦éá‚ÃÕ = $this->getTableName(); $B¹éØ‚ˆÇ‡ = $this->max($this->getPk()); $Eà¸¡¨‹ô = $this->query("\163\x68\x6f\167\40\164\141\142\154\x65\40\x73\x74\x61\164\x75\163\x20\167\150\x65\x72\x65\40\116\x61\155\x65\x3d\47{$D¦éá‚ÃÕ}\47"); $c²éË¬Ø‹Ô = $Eà¸¡¨‹ô[0][$_SERVER[şÅ²é¤èİ][340]]; $EƒˆœŒ½À = max($B¹éØ‚ˆÇ‡, $c²éË¬Ø‹Ô); return $EƒˆœŒ½À; } protected function _callBefore($b­æÒ®ëß¢, $eçù½Ã…ÚÊ) { return $this->cacheCallCheck($b­æÒ®ëß¢, $eçù½Ã…ÚÊ, !1); } protected function _callAfter($b×òœ¼Õî‡, $dé˜®·×ä„) { return $this->cacheCallCheck($b×òœ¼Õî‡, $dé˜®·×ä„, !0); } protected function cacheFunctionAlias($Cîºğ‰°¦Õ) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($B°Îµ³š…, $c×±¡ö¾î, $AÛ÷±Ğø› = false) { $C„£ÁÙ„å = $this->cacheFunctionAlias($c×±¡ö¾î); if (!$C„£ÁÙ„å) { return; } foreach ($C„£ÁÙ„å as $c±©¦¾‹Öğ => $A‚ĞõĞï§‘) { $câ­®Ù¤Ó = $A‚ĞõĞï§‘[0]; $D¼İÀ£ë®Ò = explode($_SERVER[şÅ²é¤èİ][47], $A‚ĞõĞï§‘[1]); if ($B°Îµ³š… == $c±©¦¾‹Öğ) { return $this->cacheFunctionGet($c±©¦¾‹Öğ, $câ­®Ù¤Ó); } if ($AÛ÷±Ğø› && in_array($B°Îµ³š…, $D¼İÀ£ë®Ò)) { $this->cacheFunctionClear($c±©¦¾‹Öğ, $câ­®Ù¤Ó); } } } public function cacheFunctionGet($bˆ¥ô­ºˆ, $fâØÆ•İš•) { $DéÙ¨ÀÅ× = $this->cacheKeyMake($bˆ¥ô­ºˆ, $fâØÆ•İš•); $e‘Ìä±µáÜ = Cache::get($DéÙ¨ÀÅ×); if (!is_array($e‘Ìä±µáÜ)) { $e‘Ìä±µáÜ = call_user_func_array(array($this, $bˆ¥ô­ºˆ), array($fâØÆ•İš•, !0)); Cache::set($DéÙ¨ÀÅ×, $e‘Ìä±µáÜ); } return $e‘Ìä±µáÜ; } public function cacheFunctionClear($Eï¦¤ˆ“, $B¢É‚«Š¢) { $cÅ…ÄÑä´Ë = $B¢É‚«Š¢; if (!is_array($B¢É‚«Š¢)) { $cÅ…ÄÑä´Ë = array($B¢É‚«Š¢); } foreach ($cÅ…ÄÑä´Ë as $f¿Âøâ½Õ) { $D‡Şê•º‘ = $this->cacheKeyMake($Eï¦¤ˆ“, $f¿Âøâ½Õ); Cache::remove($D‡Şê•º‘); } } private function cacheKeyMake($Bğë¼¬‘•, $Cæ¿õç) { $D¬»îé±È· =& $_SERVER[şÅ²é¤èİ]; return get_class($this) . $D¬»îé±È·[71] . $Bğë¼¬‘• . $D¬»îé±È·[341] . $Cæ¿õç; } protected function selectPage($BíŸòÛìØ = 200, $Eîô´Âó³  = 1) { goto dÓ‡¶ÉÑ‘«; Aƒ®éñ¾—: $this->optionsValue($F„ÕÙø¤¹); $B‰˜±êÆˆæ = $this->page($Eîô´Âó³ , $BíŸòÛìØ)->select(); if ($C£ìÓİá¡› == 1) { $e‹éÜ“¸ = count($B‰˜±êÆˆæ); } goto a†««ìÕå; E¦«„øš»À: $eäÂÛ‹‘Ã” = 4000; $BíŸòÛìØ = isset($in[$Dâğ“„ÄŸƒ[342]]) ? $in[$Dâğ“„ÄŸƒ[342]] : $BíŸòÛìØ; if ($BíŸòÛìØ === -1) { unset($in[$Dâğ“„ÄŸƒ[342]]); $eäÂÛ‹‘Ã” = 100000000; $BíŸòÛìØ = $eäÂÛ‹‘Ã”; } goto a•Šù¬Ï; a•Šù¬Ï: $F¡¯«Ó¡Œè = $F„ÕÙø¤¹; $F¡¯«Ó¡Œè[$Dâğ“„ÄŸƒ[343]] = array(); $this->optionsValue($F¡¯«Ó¡Œè); goto EƒÇÏ–®„; EƒÇÏ–®„: $e‹éÜ“¸ = intval($this->count()); $BíŸòÛìØ = intval($BíŸòÛìØ); $BíŸòÛìØ = $BíŸòÛìØ <= 5 ? 5 : ($BíŸòÛìØ >= $eäÂÛ‹‘Ã” ? $eäÂÛ‹‘Ã” : $BíŸòÛìØ); goto FÀõÔèºö”; a†««ìÕå: $eÅÊ¼ÜË = array($Dâğ“„ÄŸƒ[344] => array($Dâğ“„ÄŸƒ[345] => $e‹éÜ“¸, $Dâğ“„ÄŸƒ[342] => $BíŸòÛìØ, $Dâğ“„ÄŸƒ[333] => $Eîô´Âó³ , $Dâğ“„ÄŸƒ[346] => $C£ìÓİá¡›), $Dâğ“„ÄŸƒ[347] => $B‰˜±êÆˆæ ? $B‰˜±êÆˆæ : array()); return $eÅÊ¼ÜË; goto få¨ïê²ã; dÓ‡¶ÉÑ‘«: $Dâğ“„ÄŸƒ =& $_SERVER[şÅ²é¤èİ]; global $in; $F„ÕÙø¤¹ = $this->optionsValue(); goto E¦«„øš»À; FÀõÔèºö”: $C£ìÓİá¡› = ceil($e‹éÜ“¸ / $BíŸòÛìØ); $Eîô´Âó³  = intval(isset($in[$Dâğ“„ÄŸƒ[333]]) ? $in[$Dâğ“„ÄŸƒ[333]] : $Eîô´Âó³ ); $Eîô´Âó³  = $Eîô´Âó³  <= 1 ? 1 : ($Eîô´Âó³  >= $C£ìÓİá¡› ? $C£ìÓİá¡› : $Eîô´Âó³ ); goto Aƒ®éñ¾—; få¨ïê²ã: } protected function checkLength($AÜ÷¶º­Šá, $e¯°ÇëÚ“ = 65536) { if (!$AÜ÷¶º­Šá || strlen($AÜ÷¶º­Šá) < $e¯°ÇëÚ“) { return; } show_json(LNG($_SERVER[şÅ²é¤èİ][348]) . "\50{$e¯°ÇëÚ“}\x29", !1); } protected function metaSet($dİ²¥İ’ùÚ, $dì„ò©‘º† = null, $cƒ¢÷Ş£ãé = null) { goto fî‚‚…Æ†; BÕíáòå½: $C“ˆö–°²õ = Model($this->tableMeta[$eÎÑä»×[350]]); if (is_array($dì„ò©‘º†)) { $CåªŠÎ¬Á = array(); foreach ($dì„ò©‘º† as $dÖÉàô•å => $d¹óÊÓ×Ô) { $this->checkLength($d¹óÊÓ×Ô); $CåªŠÎ¬Á[] = array($F”‹Ú“ˆ => $dİ²¥İ’ùÚ, $eÎÑä»×[88] => $dÖÉàô•å, $eÎÑä»×[351] => $d¹óÊÓ×Ô); } $C“ˆö–°²õ->where(array($F”‹Ú“ˆ => $dİ²¥İ’ùÚ))->addAll($CåªŠÎ¬Á, array(), !0); return !0; } $EƒßãóÊß¿ = array($F”‹Ú“ˆ => $dİ²¥İ’ùÚ, $eÎÑä»×[352] => $dì„ò©‘º†); goto B¨¿ÉÙğñÍ; B¨¿ÉÙğñÍ: if (is_null($dì„ò©‘º†)) { return $C“ˆö–°²õ->where(array($F”‹Ú“ˆ => $dİ²¥İ’ùÚ))->delete(); } if (is_null($cƒ¢÷Ş£ãé)) { return $C“ˆö–°²õ->where($EƒßãóÊß¿)->delete(); } $this->checkLength($cƒ¢÷Ş£ãé); goto Cä¦šÜ­Üà; Cä¦šÜ­Üà: $A­°¼ª•÷ = !1; if ($C“ˆö–°²õ->where($EƒßãóÊß¿)->find()) { $A­°¼ª•÷ = $C“ˆö–°²õ->where($EƒßãóÊß¿)->save(array($eÎÑä»×[353] => $cƒ¢÷Ş£ãé)); } else { $EƒßãóÊß¿[$eÎÑä»×[351]] = $cƒ¢÷Ş£ãé; $A­°¼ª•÷ = $C“ˆö–°²õ->add($EƒßãóÊß¿); } return $A­°¼ª•÷; goto cŒ‘¤ğÎ–; fî‚‚…Æ†: $eÎÑä»× =& $_SERVER[şÅ²é¤èİ]; if (!$this->tableMeta) { return !1; } $F”‹Ú“ˆ = $this->tableMeta[$eÎÑä»×[349]]; goto BÕíáòå½; cŒ‘¤ğÎ–: } public function metaGet($A™Ğõ¾›çõ) { goto d³ÛöáÜğ¶; b´§†Üá: $cãôØ­Ê£† = array_to_keyvalue($cãôØ­Ê£†, $a©¨’®»ç·[88], $a©¨’®»ç·[351]); return $cãôØ­Ê£†; goto A…ÊØƒ§Â; A¾åß‡çäî: $A¯¯Ş¾Õ°¡ = Model($this->tableMeta[$a©¨’®»ç·[350]]); $a‡­ÇÛŒÉ = array($c¾• ÄŒîÅ => $A™Ğõ¾›çõ); $cãôØ­Ê£† = $A¯¯Ş¾Õ°¡->field($a©¨’®»ç·[354])->where($a‡­ÇÛŒÉ)->select(); goto b´§†Üá; d³ÛöáÜğ¶: $a©¨’®»ç· =& $_SERVER[şÅ²é¤èİ]; if (!$this->tableMeta) { return array(); } $c¾• ÄŒîÅ = $this->tableMeta[$a©¨’®»ç·[349]]; goto A¾åß‡çäî; A…ÊØƒ§Â: } private function checkDataAutoHas($aë¶ñÅ«®¤) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $dÎæÔ¦Û˜ç) { if (in_array($aë¶ñÅ«®¤, explode($_SERVER[şÅ²é¤èİ][47], $dÎæÔ¦Û˜ç[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$c¥àØÕ¥ÊŠ, $bœõÒÂÊ) { $D„Æ™Èêƒğ =& $_SERVER[şÅ²é¤èİ]; foreach ($this->dataAuto as $f¥´©Ëïß) { $d£õ‹ÈÛ¹ß = $f¥´©Ëïß[0]; if (!in_array($bœõÒÂÊ, explode($D„Æ™Èêƒğ[47], $f¥´©Ëïß[2]))) { continue; } switch (trim($f¥´©Ëïß[3])) { case $D„Æ™Èêƒğ[303]: case $D„Æ™Èêƒğ[304]: $CšÜÀë¦÷ = $f¥´©Ëïß[1]; $CßŸ˜ºš‘µ = isset($f¥´©Ëïß[4]) ? (array) $f¥´©Ëïß[4] : array(); if ($CšÜÀë¦÷ == $D„Æ™Èêƒğ[186] && array_key_exists($d£õ‹ÈÛ¹ß, $c¥àØÕ¥ÊŠ)) { if (!$c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]) { unset($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]); } break; } if (isset($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß])) { array_unshift($CßŸ˜ºš‘µ, $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]); } if ($D„Æ™Èêƒğ[303] == $f¥´©Ëïß[3]) { $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] = call_user_func_array($CšÜÀë¦÷, $CßŸ˜ºš‘µ); } else { $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] = call_user_func_array(array(&$this, $CšÜÀë¦÷), $CßŸ˜ºš‘µ); } break; case $D„Æ™Èêƒğ[255]: $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] = $c¥àØÕ¥ÊŠ[$f¥´©Ëïß[1]]; break; case $D„Æ™Èêƒğ[276]: if (isset($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]) && !is_string($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß])) { $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] = json_encode_force($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]); } break; case $D„Æ™Èêƒğ[305]: if ($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] === $D„Æ™Èêƒğ[33]) { unset($c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß]); } break; case $D„Æ™Èêƒğ[306]: $c¥àØÕ¥ÊŠ[$d£õ‹ÈÛ¹ß] = $f¥´©Ëïß[1]; default: break; } } if ($bœõÒÂÊ == $D„Æ™Èêƒğ[337]) { $f¨Ûê„Š„° = strtolower($this->db->getDbType()); if (strpos($f¨Ûê„Š„°, $D„Æ™Èêƒğ[9]) !== 0) { return; } $DñâÊ‘á™‡ = $this->field(!0)->fields; $f¨¶¿ªÖ£É = $DñâÊ‘á™‡[$D„Æ™Èêƒğ[182]]; if (isset($DñâÊ‘á™‡[$D„Æ™Èêƒğ[234]])) { unset($f¨¶¿ªÖ£É[$DñâÊ‘á™‡[$D„Æ™Èêƒğ[234]]]); } foreach ($f¨¶¿ªÖ£É as $a‹¥¿†Ú« => $bœõÒÂÊ) { if (!isset($c¥àØÕ¥ÊŠ[$a‹¥¿†Ú«])) { $c¥àØÕ¥ÊŠ[$a‹¥¿†Ú«] = $D„Æ™Èêƒğ[33]; } } } } private function dataAfterFilter(&$B¤ÏÕÖº³) { $f·í¬’À =& $_SERVER[şÅ²é¤èİ]; foreach ($this->dataAuto as $CğÍà·—–) { $e‹¡ƒÀĞĞ = $CğÍà·—–[0]; if (!in_array($f·í¬’À[339], explode($f·í¬’À[47], $CğÍà·—–[2]))) { continue; } if (!isset($B¤ÏÕÖº³[$e‹¡ƒÀĞĞ])) { continue; } switch (trim($CğÍà·—–[3])) { case $f·í¬’À[303]: case $f·í¬’À[304]: $bº˜¶é¤òŒ = isset($CğÍà·—–[4]) ? (array) $CğÍà·—–[4] : array(); array_unshift($bº˜¶é¤òŒ, $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ]); if ($f·í¬’À[303] == $CğÍà·—–[3]) { $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = call_user_func_array($CğÍà·—–[1], $bº˜¶é¤òŒ); } else { $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = call_user_func_array(array(&$this, $CğÍà·—–[1]), $bº˜¶é¤òŒ); } break; case $f·í¬’À[255]: $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = $B¤ÏÕÖº³[$CğÍà·—–[1]]; break; case $f·í¬’À[276]: $e•ôÑÜŸôŸ = $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ]; $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = json_decode($e•ôÑÜŸôŸ, !0); if (is_null($B¤ÏÕÖº³[$e‹¡ƒÀĞĞ])) { $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = $e•ôÑÜŸôŸ; } break; case $f·í¬’À[305]: if ($B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] === $f·í¬’À[33]) { unset($B¤ÏÕÖº³[$e‹¡ƒÀĞĞ]); } break; case $f·í¬’À[306]: $B¤ÏÕÖº³[$e‹¡ƒÀĞĞ] = $CğÍà·—–[1]; default: break; } } } public function saveAll($EÍ°›‰²—Ä) { goto CÜê™‹¤ì‡; CÜê™‹¤ì‡: $D™£Şãåò± =& $_SERVER[şÅ²é¤èİ]; $F©¯…ğå§¥ = $this->tablePrefix . $this->tableName; $b‹À……ÅÜ = self::SQL_WHERE_IN_CHUNK; goto AŸ§«ÖµØ¢; dÃòìèºñÒ: $AŒ¦ÎÓ‘¼ = count($EÍ°›‰²—Ä); for ($Bòñ”éñä = 0; $Bòñ”éñä < $AŒ¦ÎÓ‘¼; $Bòñ”éñä++) { $C’¥‡–ˆĞ = $EÍ°›‰²—Ä[$Bòñ”éñä]; if (!is_array($C’¥‡–ˆĞ) || count($C’¥‡–ˆĞ) != 4) { continue; } $Dµ°—“Î³Û = "\125\x50\104\x41\124\x45\x20{$F©¯…ğå§¥}\x20\x53\x45\x54\40{$C’¥‡–ˆĞ[2]}\x20\75\40\x43\x41\x53\x45\40{$C’¥‡–ˆĞ[0]}\x20\12"; if ($bŠƒ¦ÄÄâ’ == 0) { $EÅğÊÛ‡”² = $Dµ°—“Î³Û; } $bÔñææ›†Æ[] = $D™£Şãåò±[112] . $C’¥‡–ˆĞ[1] . $D™£Şãåò±[112]; $bŠƒ¦ÄÄâ’++; $EÅğÊÛ‡”² .= "\40\x57\x48\x45\116\x20\x27{$C’¥‡–ˆĞ[1]}\47\40\124\x48\x45\x4e\40\47{$C’¥‡–ˆĞ[3]}\x27\40\xa"; if ($bŠƒ¦ÄÄâ’ == $b‹À……ÅÜ || $Bòñ”éñä == $AŒ¦ÎÓ‘¼ - 1) { goto c™Ô¸ê¾¯–; d‘ˆŠ¥Ú‚: $bŠƒ¦ÄÄâ’ = 0; $EÅğÊÛ‡”² = $Dµ°—“Î³Û; $this->chunkEventCheck(count($bÔñææ›†Æ)); goto dÀÓ‰İÄîæ; c™Ô¸ê¾¯–: $aó…¶È‡‚ = implode($D™£Şãåò±[47], $bÔñææ›†Æ); $EÅğÊÛ‡”² .= "\40\x45\x4e\x44\40\40\x57\x48\105\x52\105\40{$C’¥‡–ˆĞ[0]}\40\x49\116\x20\x28{$aó…¶È‡‚}\x29\40"; $this->execute($EÅğÊÛ‡”²); goto d‘ˆŠ¥Ú‚; dÀÓ‰İÄîæ: $bÔñææ›†Æ = array(); goto Aİ‡÷ŒŞ‘¸; Aİ‡÷ŒŞ‘¸: } } $this->chunkEventSet(); goto C¦ÛÖËÑË¶; AŸ§«ÖµØ¢: $EÅğÊÛ‡”² = $D™£Şãåò±[355]; $bŠƒ¦ÄÄâ’ = 0; $bÔñææ›†Æ = array(); goto dÃòìèºñÒ; C¦ÛÖËÑË¶: } public function saveAllEach($bß¨µæ¾ãç) { $Bª™‹õ…–‘ =& $_SERVER[şÅ²é¤èİ]; $aˆ¸¢©Øˆ = $this->tablePrefix . $this->tableName; foreach ($bß¨µæ¾ãç as $e™Íº–§ò˜) { if (!is_array($e™Íº–§ò˜) || count($e™Íº–§ò˜) != 4) { continue; } $dáİÇÚ‡šó = $e™Íº–§ò˜[0] . $Bª™‹õ…–‘[356] . $e™Íº–§ò˜[1] . $Bª™‹õ…–‘[112]; $C£êË‹Ë÷ = $e™Íº–§ò˜[2] . $Bª™‹õ…–‘[356] . $e™Íº–§ò˜[3] . $Bª™‹õ…–‘[112]; $eàò­Éˆ³ = "\x75\x70\144\x61\x74\x65\40{$aˆ¸¢©Øˆ}\x20\x73\145\164\40{$C£êË‹Ë÷}\40\167\x68\145\162\145\40{$dáİÇÚ‡šó}\x3b"; $this->execute($eàò­Éˆ³); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($D¢î†›±„Î = false, $b«à Ëå = false) { $this->_chunkEvent = $D¢î†›±„Î; $this->_chunkEventParam = $b«à Ëå; } private function chunkEventCheck($FˆÔ†ÆÂÆŠ) { if (!$this->_chunkEvent) { return; } $F¹ÍÆÄœ÷‘ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $F¹ÍÆÄœ÷‘[$_SERVER[şÅ²é¤èİ][357]] = $FˆÔ†ÆÂÆŠ; Hook::trigger($this->_chunkEvent, $F¹ÍÆÄœ÷‘); } public function addAll($A‘ã«ÀØÒ, $B­Å´‡Î’“ = array(), $fß½Àº«…˜ = false) { goto B–Ï»ÑˆÂ˜; dÈ¾ˆâ÷ŠÆ: if (empty($A‘ã«ÀØÒ)) { $this->error = think_lang($D„äİÍ†Ø“[253]); return !1; } $B­Å´‡Î’“ = $this->_parseOptions($B­Å´‡Î’“); foreach ($A‘ã«ÀØÒ as $F‡¢Ïââ× => $fÖÉ‹£ÒÇ‰) { $A‘ã«ÀØÒ[$F‡¢Ïââ×] = $this->_facade($fÖÉ‹£ÒÇ‰); $this->_beforeInsert($A‘ã«ÀØÒ[$F‡¢Ïââ×], $B­Å´‡Î’“); } goto C©¯‡È×Ì; B–Ï»ÑˆÂ˜: $D„äİÍ†Ø“ =& $_SERVER[şÅ²é¤èİ]; ignore_timeout(); $d”‡¯å„™ = self::SQL_WHERE_IN_CHUNK; goto dÈ¾ˆâ÷ŠÆ; C©¯‡È×Ì: if (method_exists($this->db, $D„äİÍ†Ø“[254])) { for ($D¼Ô¸¾Í· = 0; $D¼Ô¸¾Í· < count($A‘ã«ÀØÒ); $D¼Ô¸¾Í· += $d”‡¯å„™) { $FøÎˆ•²¡¦ = array_slice($A‘ã«ÀØÒ, $D¼Ô¸¾Í·, $d”‡¯å„™); if (!is_array($FøÎˆ•²¡¦) || count($FøÎˆ•²¡¦) == 0) { break; } $BøÕÎ“É²Ë = $this->db->insertAll($FøÎˆ•²¡¦, $B­Å´‡Î’“, $fß½Àº«…˜); $this->chunkEventCheck(count($FøÎˆ•²¡¦)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($A‘ã«ÀØÒ as $F‡¢Ïââ× => $fÖÉ‹£ÒÇ‰) { $BøÕÎ“É²Ë = $this->db->insert($fÖÉ‹£ÒÇ‰, $B­Å´‡Î’“, $fß½Àº«…˜); } $this->commit(); } if (!1 !== $BøÕÎ“É²Ë) { $DœõÚ¨Ô‚ = $this->getLastInsID(); if ($DœõÚ¨Ô‚) { return $DœõÚ¨Ô‚; } } return $BøÕÎ“É²Ë; goto B¿öæ–ò²è; B¿öæ–ò²è: } public function save($aµ¨ë£Øá = '', $cÖïõ¬ê±î = array()) { goto C‘ãëÑËÎ; f«÷¡Åí: $this->chunkEventSet(); return $dª¼¨¨¹‚; goto cˆŸ´¨Ü­; E©§¼ì½Á: $d¼–Ûù«ˆÇ = $e®¬Œ´œº[$C´³Ä¦–ä¹[257]][$eóî¢Õº][1]; $eæ†Ìµ±› = count($d¼–Ûù«ˆÇ); for ($D¶˜¶¸ï° = 0; $D¶˜¶¸ï° < $eæ†Ìµ±›; $D¶˜¶¸ï° += $BœÙ¬Ï¶÷‡) { $C²‚š··Ø = array_slice($d¼–Ûù«ˆÇ, $D¶˜¶¸ï°, $BœÙ¬Ï¶÷‡); if (!is_array($C²‚š··Ø) || count($C²‚š··Ø) == 0) { break; } $e®¬Œ´œº[$C´³Ä¦–ä¹[257]][$eóî¢Õº][1] = $C²‚š··Ø; $this->optionsValue($e®¬Œ´œº); $dª¼¨¨¹‚ += parent::save($aµ¨ë£Øá, $cÖïõ¬ê±î); $this->chunkEventCheck(count($C²‚š··Ø)); } goto f«÷¡Åí; E‘°ÔÎ¥õ±: $eóî¢Õº = $this->findWhereField($e®¬Œ´œº); if (!$eóî¢Õº) { return parent::save($aµ¨ë£Øá, $cÖïõ¬ê±î); } $dª¼¨¨¹‚ = 0; goto E©§¼ì½Á; C‘ãëÑËÎ: $C´³Ä¦–ä¹ =& $_SERVER[şÅ²é¤èİ]; $BœÙ¬Ï¶÷‡ = self::SQL_WHERE_IN_CHUNK; $e®¬Œ´œº = $this->optionsValue(); goto E‘°ÔÎ¥õ±; cˆŸ´¨Ü­: } public function add($cí«³‘›‰ = '', $fçøëå‰µ = array(), $c¯¢‘ƒíô¨ = false) { if ($this->addTaskStatus && is_array($cí«³‘›‰)) { $this->addTaskData[] = $cí«³‘›‰; return; } return parent::add($cí«³‘›‰, $fçøëå‰µ, $c¯¢‘ƒíô¨); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($bîŠ¾ˆø = array()) { goto bø²¤±¿Š’; bø²¤±¿Š’: $B§®ä‡¾‹ =& $_SERVER[şÅ²é¤èİ]; $Bé”Êêè­“ = self::SQL_WHERE_IN_CHUNK; $cƒæ¬æÅó‹ = $this->optionsValue(); goto b¹»‰ÅÁÌ; aÒñŞØâ£è: $A¤‘Ô‚ç§ = null; for ($FÕ ç›ÀÆ = 0; $FÕ ç›ÀÆ < count($Dª £Ê“£ˆ); $FÕ ç›ÀÆ += $Bé”Êêè­“) { $bÒà†ÍãÅ« = array_slice($Dª £Ê“£ˆ, $FÕ ç›ÀÆ, $Bé”Êêè­“); if (!is_array($bÒà†ÍãÅ«) || count($bÒà†ÍãÅ«) == 0) { break; } $cƒæ¬æÅó‹[$B§®ä‡¾‹[257]][$aŠ”İ±´à][1] = $bÒà†ÍãÅ«; $this->optionsValue($cƒæ¬æÅó‹); $e¡­ÃæØ = parent::select($bîŠ¾ˆø); if (!$e¡­ÃæØ) { continue; } if (is_null($A¤‘Ô‚ç§)) { $A¤‘Ô‚ç§ = array(); } $A¤‘Ô‚ç§ = array_merge($A¤‘Ô‚ç§, $e¡­ÃæØ); } return $A¤‘Ô‚ç§; goto D„Ö¡è¹…„; b¹»‰ÅÁÌ: $aŠ”İ±´à = $this->findWhereField($cƒæ¬æÅó‹); if (!$aŠ”İ±´à || isset($cƒæ¬æÅó‹[$B§®ä‡¾‹[274]]) || isset($cƒæ¬æÅó‹[$B§®ä‡¾‹[333]])) { return parent::select($bîŠ¾ˆø); } $Dª £Ê“£ˆ = $cƒæ¬æÅó‹[$B§®ä‡¾‹[257]][$aŠ”İ±´à][1]; goto aÒñŞØâ£è; D„Ö¡è¹…„: } public function delete($dÅî‹œÒÊ = array()) { goto FöåÌ˜í¢£; EÑÔÊŞä¸Œ: $DÈšµ¿İà = $AÖ®Î‡ìáò[$e–áÈ‹¬•Â[257]][$dŠƒ¾¸îö‰][1]; for ($B„ÉÇ±‹§ = 0; $B„ÉÇ±‹§ < count($DÈšµ¿İà); $B„ÉÇ±‹§ += $b‰—ÍÅŒ³Â) { $eÀñ¹••Ñ = array_slice($DÈšµ¿İà, $B„ÉÇ±‹§, $b‰—ÍÅŒ³Â); if (!is_array($eÀñ¹••Ñ) || count($eÀñ¹••Ñ) == 0) { break; } $AÖ®Î‡ìáò[$e–áÈ‹¬•Â[257]][$dŠƒ¾¸îö‰][1] = $eÀñ¹••Ñ; $this->optionsValue($AÖ®Î‡ìáò); $E¨Š¡‘´Îï += parent::delete($dÅî‹œÒÊ); } return $E¨Š¡‘´Îï; goto E¢”ñìƒÎ; Aô¬˜‘à ¬: $dŠƒ¾¸îö‰ = $this->findWhereField($AÖ®Î‡ìáò); if (!$dŠƒ¾¸îö‰) { return parent::delete($dÅî‹œÒÊ); } $E¨Š¡‘´Îï = 0; goto EÑÔÊŞä¸Œ; FöåÌ˜í¢£: $e–áÈ‹¬•Â =& $_SERVER[şÅ²é¤èİ]; $b‰—ÍÅŒ³Â = self::SQL_WHERE_IN_CHUNK; $AÖ®Î‡ìáò = $this->optionsValue(); goto Aô¬˜‘à ¬; E¢”ñìƒÎ: } private function findWhereField($A¢‰ÈËÛš¶) { $Cª›±ÛÜòÂ =& $_SERVER[şÅ²é¤èİ]; $aå¤ß‡íğ› = self::SQL_WHERE_IN_CHUNK; if (!is_array($A¢‰ÈËÛš¶) || !is_array($A¢‰ÈËÛš¶[$Cª›±ÛÜòÂ[257]])) { return !1; } foreach ($A¢‰ÈËÛš¶[$Cª›±ÛÜòÂ[257]] as $F¦šÍ˜ ¤ô => $a‡…¹Èè¸) { if (is_array($a‡…¹Èè¸) && isset($a‡…¹Èè¸[0]) && is_string($a‡…¹Èè¸[0]) && strtolower($a‡…¹Èè¸[0]) == $Cª›±ÛÜòÂ[7] && is_array($a‡…¹Èè¸[1]) && count($a‡…¹Èè¸[1]) > $aå¤ß‡íğ›) { ignore_timeout(); return $F¦šÍ˜ ¤ô; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\171\163\x74\x65\155\x4f\x70\x74\x69\157\156"; public $field = array(); public function listData($f›â×–ƒÒß = false, $d‚á˜À¯®± = "\x6d\157\144\151\146\x79\x54\151\x6d\145", $c…Šç¶ÉÍ = false) { $Añ×ÍïÔ¢Ñ = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$f›â×–ƒÒß) { $Añ×ÍïÔ¢Ñ = array_filter(array_values($Añ×ÍïÔ¢Ñ)); return array_sort_by($Añ×ÍïÔ¢Ñ, $d‚á˜À¯®±, $c…Šç¶ÉÍ); } return $Añ×ÍïÔ¢Ñ[$_SERVER[şÅ²é¤èİ][358] . $f›â×–ƒÒß]; } public function insert($cÏÑ•ö¬Šì) { goto cö•­ƒÅó»; d†â¹¥²ƒè: $cÏÑ•ö¬Šì[$Bœ¥¡Âã¾¡[106]] = time(); Model($this->modelType)->set($Bœ¥¡Âã¾¡[359], $c ª®İŞæ±, $this->optionType . $Bœ¥¡Âã¾¡[360]); Model($this->modelType)->set($Bœ¥¡Âã¾¡[358] . $c ª®İŞæ±, $cÏÑ•ö¬Šì, $this->optionType); goto a’œ¯¼Ë¦â; cö•­ƒÅó»: $Bœ¥¡Âã¾¡ =& $_SERVER[şÅ²é¤èİ]; $cÏÑ•ö¬Šì = array_field_key($cÏÑ•ö¬Šì, $this->field); $c ª®İŞæ± = Model($this->modelType)->get($Bœ¥¡Âã¾¡[359], $this->optionType . $Bœ¥¡Âã¾¡[360]); goto FµœæÚ–’; FµœæÚ–’: $c ª®İŞæ± = $c ª®İŞæ± ? $c ª®İŞæ± : 0; $cÏÑ•ö¬Šì[$Bœ¥¡Âã¾¡[361]] = ++$c ª®İŞæ±; $cÏÑ•ö¬Šì[$Bœ¥¡Âã¾¡[183]] = time(); goto d†â¹¥²ƒè; a’œ¯¼Ë¦â: return $c ª®İŞæ±; goto B–ƒ·‘Èİ£; B–ƒ·‘Èİ£: } public function update($eŞÇé§óˆ, $fÃÜˆËºƒ) { goto dÅ‰†³Çœà; e‹Ê¸‘ƒî×: return Model($this->modelType)->set($eƒãÔñŸÅ•[358] . $eŞÇé§óˆ, $fÃÜˆËºƒ, $this->optionType); goto CÎ·š†åöŒ; bŠ†’â×‘å: if (!$f¬î±¥¹˜–) { return !1; } $fÃÜˆËºƒ = array_merge($f¬î±¥¹˜–, $fÃÜˆËºƒ); $fÃÜˆËºƒ[$eƒãÔñŸÅ•[106]] = time(); goto e‹Ê¸‘ƒî×; dÅ‰†³Çœà: $eƒãÔñŸÅ• =& $_SERVER[şÅ²é¤èİ]; $fÃÜˆËºƒ = array_field_key($fÃÜˆËºƒ, $this->field); $f¬î±¥¹˜– = $this->listData($eŞÇé§óˆ); goto bŠ†’â×‘å; CÎ·š†åöŒ: } public function remove($DøöÀ¤—Ïì) { return Model($this->modelType)->remove($_SERVER[şÅ²é¤èİ][358] . $DøöÀ¤—Ïì, $this->optionType); } public function clear() { $Dïáå™áß =& $_SERVER[şÅ²é¤èİ]; Model($this->modelType)->remove($Dïáå™áß[359], $this->optionType . $Dïáå™áß[360]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($eõ–¤‚Áï¼, $DÅŠªéì) { if (!$DÅŠªéì) { return !1; } $f¯Ì™œçÛ” = $this->listData(); $f¯Ì™œçÛ” = array_to_keyvalue($f¯Ì™œçÛ”, $eõ–¤‚Áï¼); return isset($f¯Ì™œçÛ”[$DÅŠªéì]) ? $f¯Ì™œçÛ”[$DÅŠªéì] : !1; } public function findByName($B×¬°Ÿ‚¸ã) { return $this->findByKey($_SERVER[şÅ²é¤èİ][28], $B×¬°Ÿ‚¸ã); } protected function resetData($câÌßªù¾¸) { $BÎ§°Œá”£ =& $_SERVER[şÅ²é¤èİ]; $E‚Ê¹Â‡ËŞ = array(); for ($a§òÄ ’ï = 0; $a§òÄ ’ï < count($câÌßªù¾¸); $a§òÄ ’ï++) { $E‚Ê¹Â‡ËŞ[$BÎ§°Œá”£[358] . $câÌßªù¾¸[$a§òÄ ’ï][$BÎ§°Œá”£[361]]] = $câÌßªù¾¸[$a§òÄ ’ï]; } return Model($this->modelType)->set($E‚Ê¹Â‡ËŞ, !1, $this->optionType); } private function getAutoName($d¯‰¿öéÉĞ) { $fè²Ú§Õèä = array_to_keyvalue($this->listData(), $_SERVER[şÅ²é¤èİ][28]); if (!$fè²Ú§Õèä || !isset($fè²Ú§Õèä[$d¯‰¿öéÉĞ])) { return $d¯‰¿öéÉĞ; } for ($EìåÂ³¿ = 1; $EìåÂ³¿ < count($fè²Ú§Õèä); $EìåÂ³¿++) { $FóÀÅñ³ = $d¯‰¿öéÉĞ . "\50{$EìåÂ³¿}\51"; if (!isset($fè²Ú§Õèä[$FóÀÅñ³])) { return $FóÀÅñ³; } } return $FóÀÅñ³; } } class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($DŸ¯ìœ·® = false, $c¶­óµÂ”Ö = '', $CÜÂÑÉÎ³ = false) { goto d’†­›ƒöÓ; d’†­›ƒöÓ: $a ¹Ë©· =& $_SERVER[şÅ²é¤èİ]; $cº‡’ÊÎŠÉ = $this->cacheGet($c¶­óµÂ”Ö); if (is_array($cº‡’ÊÎŠÉ)) { return $DŸ¯ìœ·® ? isset($cº‡’ÊÎŠÉ[$DŸ¯ìœ·®]) ? $cº‡’ÊÎŠÉ[$DŸ¯ìœ·®] : null : $cº‡’ÊÎŠÉ; } goto F©ÀòÒ§¯; F©ÀòÒ§¯: $F´“™õÕˆ” = $this->filterWhere(array($a ¹Ë©·[29] => $c¶­óµÂ”Ö)); $cº‡’ÊÎŠÉ = $this->where($F´“™õÕˆ”)->select(); $cº‡’ÊÎŠÉ = array_to_keyvalue($cº‡’ÊÎŠÉ, $a ¹Ë©·[88], $a ¹Ë©·[351]); goto fÅ–‹‹Ÿ†Â; fÅ–‹‹Ÿ†Â: foreach ($cº‡’ÊÎŠÉ as $D÷©¤ÑÅ˜¤ => $BİÔÇ¾ºåà) { if ($CÜÂÑÉÎ³ || in_array($D÷©¤ÑÅ˜¤, $this->jsonField)) { $cº‡’ÊÎŠÉ[$D÷©¤ÑÅ˜¤] = json_decode($cº‡’ÊÎŠÉ[$D÷©¤ÑÅ˜¤], !0); } } $this->cacheSet($c¶­óµÂ”Ö, $cº‡’ÊÎŠÉ); return $DŸ¯ìœ·® ? $cº‡’ÊÎŠÉ[$DŸ¯ìœ·®] : $cº‡’ÊÎŠÉ; goto cõ®‡ğÕõƒ; cõ®‡ğÕõƒ: } public function set($CîøØ¦­£, $d†‰ §ÜŸÓ = false, $fÄ“Ëõ­Å = '') { $b„íÊ½¥å =& $_SERVER[şÅ²é¤èİ]; $this->cacheRemove($fÄ“Ëõ­Å); $FƒÒŒí¸œ = array(); $dåÏ­ÆÒØŠ = is_array($CîøØ¦­£) ? $CîøØ¦­£ : array($CîøØ¦­£ => $d†‰ §ÜŸÓ); foreach ($dåÏ­ÆÒØŠ as $CîøØ¦­£ => $fÆöŞª†) { if (is_array($fÆöŞª†)) { $fÆöŞª† = json_encode_force($fÆöŞª†); } $this->checkLength($fÆöŞª†); $fÆöŞª† = self::textEncode($fÆöŞª†); $dåÏ­ÆÒØŠ = array($b„íÊ½¥å[29] => $fÄ“Ëõ­Å, $b„íÊ½¥å[88] => $CîøØ¦­£, $b„íÊ½¥å[351] => $fÆöŞª†); $FƒÒŒí¸œ[] = $this->filterWhere($dåÏ­ÆÒØŠ); } return $this->addAll($FƒÒŒí¸œ, array(), !0); } public function setDeep($d™ì®àÀ¶«, $CíñŠéÍëÕ = false, $A×Êë°¤ÕÉ = '') { $bÉ¢¾ ´ê® = explode($_SERVER[şÅ²é¤èİ][92], $d™ì®àÀ¶«); $A™Öé‰ªøØ = $this->get(); array_set_value($A™Öé‰ªøØ, $d™ì®àÀ¶«, $CíñŠéÍëÕ); $this->set($bÉ¢¾ ´ê®[0], $A™Öé‰ªøØ[$bÉ¢¾ ´ê®[0]], $A×Êë°¤ÕÉ); } public function remove($dàÚ¾¹‘À’, $E¹Åœ¾î—  = '') { $CõÆ›¹õŒÒ =& $_SERVER[şÅ²é¤èİ]; $this->CacheRemove($E¹Åœ¾î— ); $AÈñæ˜¯ˆŸ = $this->filterWhere(array($CõÆ›¹õŒÒ[88] => $dàÚ¾¹‘À’, $CõÆ›¹õŒÒ[29] => $E¹Åœ¾î— )); if (is_null($dàÚ¾¹‘À’)) { unset($AÈñæ˜¯ˆŸ[$CõÆ›¹õŒÒ[88]]); } return $this->where($AÈñæ˜¯ˆŸ)->delete(); } public function cacheSet($cØÜƒ¦Ìßö, $EôĞ›¹¢Œ = false) { return Cache::set($this->cacheKey($cØÜƒ¦Ìßö), $EôĞ›¹¢Œ); } public function cacheGet($cŒ§õ‰—‘) { return Cache::get($this->cacheKey($cŒ§õ‰—‘)); } public function cacheRemove($a†´¡Ÿë‡) { return Cache::remove($this->cacheKey($a†´¡Ÿë‡)); } protected function filterWhere($FÎœÎ‚…¬­) { return $FÎœÎ‚…¬­; } protected function cacheKey($DÍªô…Òæ‚) { return $DÍªô…Òæ‚; } } goto bªĞùŠ¦; F†Î›¾Š¾: define($_SERVER[şÅ²é¤èİ][222], 2); define($_SERVER[şÅ²é¤èİ][223], 3); define($_SERVER[şÅ²é¤èİ][224], 1); goto D’­ö‚òéÌ; FäîÃ¹§˜: class HttpDavServer { public function __construct($D¶±·½ÛØ‡, $CËÜÓ¤²“·) { $this->root = $D¶±·½ÛØ‡; $this->initPath($CËÜÓ¤²“·); $this->start(); } public function initPath($bÏ±¨“Ÿ˜œ) { $F±Ì†ùÉëå =& $_SERVER[şÅ²é¤èİ]; $d­ÀšÏá‹ñ = rtrim($_SERVER[$F±Ì†ùÉëå[1298]], $F±Ì†ùÉëå[8]) . $F±Ì†ùÉëå[8]; $this->urlBase = substr($d­ÀšÏá‹ñ, 0, strpos($d­ÀšÏá‹ñ, $bÏ±¨“Ÿ˜œ) + 1); $this->urlBase = rtrim($this->urlBase, $F±Ì†ùÉëå[8]) . $bÏ±¨“Ÿ˜œ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $Aî¹ÈÃ½ğ =& $_SERVER[şÅ²é¤èİ]; $Eµ¼¼“±ç = HttpAuth::get(); if ($Eµ¼¼“±ç[$Aî¹ÈÃ½ğ[525]] == $Aî¹ÈÃ½ğ[1689] && $Eµ¼¼“±ç[$Aî¹ÈÃ½ğ[898]] == $Aî¹ÈÃ½ğ[1690]) { return !0; } HttpAuth::error(); } public function start() { goto A¼Ğõ‡Ã‰†; A¼Ğõ‡Ã‰†: $fê“İâÕÃÃ =& $_SERVER[şÅ²é¤èİ]; $this->checkUser(); $C•é™İ×’¢ = $fê“İâÕÃÃ[141] . HttpHeader::method(); goto f‰ª†Ö‹ˆ; dÊî³: if (!$AÔŠé…Æç©) { return; } self::response($AÔŠé…Æç©); goto c‡ñ‡ìÓöØ; f‰ª†Ö‹ˆ: if (!method_exists($this, $C•é™İ×’¢)) { pr($C•é™İ×’¢ . $fê“İâÕÃÃ[1691]); die; } $e¶²•«ÍŒ = array($fê“İâÕÃÃ[1692], $fê“İâÕÃÃ[1693]); if (!in_array($C•é™İ×’¢, $e¶²•«ÍŒ) && !$this->pathExists($this->path)) { $AÔŠé…Æç© = array($fê“İâÕÃÃ[1011] => 404); } else { $AÔŠé…Æç© = $this->{$C•é™İ×’¢}(); } goto dÊî³; c‡ñ‡ìÓöØ: } public function pathGet($fõ‰ŠâîŞŒ = false) { $eïµ‡²—©  =& $_SERVER[şÅ²é¤èİ]; $A¨ñ½·ˆß = $fõ‰ŠâîŞŒ ? $_SERVER[$eïµ‡²—© [1694]] : $_SERVER[$eïµ‡²—© [1298]]; $A¨ñ½·ˆß = KodIO::clear(rawurldecode($A¨ñ½·ˆß)); if (!strstr($A¨ñ½·ˆß, KodIO::clear($this->urlBase))) { return !1; } return substr($A¨ñ½·ˆß, strpos($A¨ñ½·ˆß, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($BÃÊÙ‹´¥Ş) { return file_exists($BÃÊÙ‹´¥Ş); } public function pathMkdir($EÌÌâ§Øº) { return mkdir($EÌÌâ§Øº, 511, !0); } public function pathInfo($cÇôËàøô) { return path_info($cÇôËàøô); } public function pathList($c¥‰“ƒ­ù) { return path_list($c¥‰“ƒ­ù); } public function pathOut($D†ŒªĞø‹„) { echo file_get_contents($D†ŒªĞø‹„); } public function pathPut($B¸æ±Öù†Œ, $dè¤»ğ±ºø = '') { if (!$dè¤»ğ±ºø) { return file_put_contents($B¸æ±Öù†Œ, $_SERVER[şÅ²é¤èİ][33]); } return move_path($dè¤»ğ±ºø, $B¸æ±Öù†Œ); } public function pathRemove($Aèµ¾Á‘—) { if (is_file($Aèµ¾Á‘—)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($fŒë·Ã¥Èæ, $aãŒ‹²ÌŠ†) { return move_path($fŒë·Ã¥Èæ, $aãŒ‹²ÌŠ†); } public function pathCopy($eæ²ìƒ’Ÿ, $fšöˆ­ƒë…) { return copy_dir($eæ²ìƒ’Ÿ, $fšöˆ­ƒë…); } public function parsePath($D‰¢«ïµ‡) { return $D‰¢«ïµ‡; } public function parseItem($A˜’˜Ş‘‡ô) { goto B‰¥°Á”Œ‹; Có†ÄÆÖ–: if (!trim($A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[106]])) { $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[106]] = time(); } if (!trim($A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[183]])) { $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[183]] = time(); } $bœè’µÌƒ = array($B·Ú›‘È±‰[1695] => KodIO::clear($this->urlBase . $B·Ú›‘È±‰[8] . $AìÇæ—«Á), $B·Ú›‘È±‰[106] => @gmdate($B·Ú›‘È±‰[1696], $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[106]]), $B·Ú›‘È±‰[183] => @gmdate($B·Ú›‘È±‰[1697], $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[183]]), $B·Ú›‘È±‰[78] => $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[78]] ? $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[78]] : 0); goto A¼›ŸÊä‘; B‰¥°Á”Œ‹: $B·Ú›‘È±‰ =& $_SERVER[şÅ²é¤èİ]; $AìÇæ—«Á = $this->pathGet() . $B·Ú›‘È±‰[8] . $A˜’˜Ş‘‡ô[$B·Ú›‘È±‰[28]]; $AìÇæ—«Á = str_replace($B·Ú›‘È±‰[167], $B·Ú›‘È±‰[8], rawurlencode($AìÇæ—«Á)); goto Có†ÄÆÖ–; A¼›ŸÊä‘: return $bœè’µÌƒ; goto E¢Œ‚†Û¡Â; E¢Œ‚†Û¡Â: } public function parseItemXml($e˜®”šŸš ) { $bª±ÇãÇÍ =& $_SERVER[şÅ²é¤èİ]; $eá’ —¹ñƒ = $this->parseItem($e˜®”šŸš ); if ($e˜®”šŸš [$bª±ÇãÇÍ[29]] == $bª±ÇãÇÍ[77]) { $E›Éã¤Ü²… = $bª±ÇãÇÍ[1698]; $E›Éã¤Ü²… .= $bª±ÇãÇÍ[1699]; } else { $B‡¼ñğÕÄ = $e˜®”šŸš [$bª±ÇãÇÍ[155]] ? $e˜®”šŸš [$bª±ÇãÇÍ[155]] : get_path_ext($e˜®”šŸš [$bª±ÇãÇÍ[28]]); $eÀÏšÒ®ßê = get_file_mime($B‡¼ñğÕÄ); $E›Éã¤Ü²… = $bª±ÇãÇÍ[1700]; $E›Éã¤Ü²… .= "\x3c\x44\72\x67\x65\164\143\157\x6e\164\x65\156\164\164\x79\160\x65\x3e{$eÀÏšÒ®ßê}\x3c\x2f\x44\72\147\x65\x74\x63\157\x6e\x74\x65\x6e\164\164\x79\x70\145\x3e"; } return "\xa\x9\11\74\x44\x3a\162\145\x73\160\x6f\156\163\x65\76\12\x9\x9\11\x3c\x44\72\x68\162\x65\x66\x3e{$eá’ —¹ñƒ[$bª±ÇãÇÍ[1695]]}\74\x2f\x44\72\150\162\x65\146\76\12\x9\11\x9\74\104\x3a\x70\x72\x6f\x70\163\x74\x61\164\x3e\12\11\x9\x9\x9\x3c\x44\72\160\x72\157\x70\76\xa\11\11\x9\11\x9\x3c\104\72\147\x65\164\x6c\141\x73\164\x6d\157\144\151\x66\x69\x65\x64\x3e{$eá’ —¹ñƒ[$bª±ÇãÇÍ[106]]}\x3c\57\x44\72\147\x65\x74\x6c\141\x73\164\155\x6f\x64\x69\x66\151\145\x64\76\xa\11\x9\x9\x9\x9\x3c\104\72\143\162\145\x61\x74\x69\157\x6e\144\141\164\x65\76{$eá’ —¹ñƒ[$bª±ÇãÇÍ[183]]}\74\57\104\72\x63\x72\145\x61\x74\151\x6f\x6e\144\x61\x74\x65\x3e\xa\11\11\11\x9\x9\x3c\104\72\147\145\x74\x63\x6f\156\x74\145\x6e\164\154\x65\156\147\164\150\x3e{$eá’ —¹ñƒ[$bª±ÇãÇÍ[78]]}\x3c\x2f\x44\72\x67\145\x74\143\157\x6e\164\145\156\x74\x6c\145\156\147\164\150\76\xa\x9\x9\11\x9\11{$E›Éã¤Ü²…}\12\11\x9\x9\11\74\x2f\x44\72\x70\162\x6f\x70\x3e\12\11\11\x9\x9\x3c\104\x3a\x73\164\141\164\165\x73\x3e\x48\124\124\x50\x2f\x31\x2e\x31\x20\x32\60\x30\x20\x4f\x4b\74\x2f\104\72\163\164\141\164\x75\x73\76\12\x9\x9\11\x3c\x2f\x44\72\160\162\157\160\x73\164\x61\164\x3e\xa\11\11\x3c\57\x44\72\162\145\x73\160\x6f\x6e\x73\145\x3e"; } public function pathListMerge($A½ô­ï¨ÉÁ) { goto F˜¦ÖŠ‡«Œ; F“ŸÚ»Áçğ: $EµÁ†¡°Ö = array(); foreach ($A½ô­ï¨ÉÁ as $bÉ¥Á‘§¨‘ => $F§“ÙÀñâ) { if (!in_array($bÉ¥Á‘§¨‘, $d×ÆæôµÜì) || !is_array($F§“ÙÀñâ)) { continue; } $EµÁ†¡°Ö = array_merge($EµÁ†¡°Ö, $F§“ÙÀñâ); } foreach ($EµÁ†¡°Ö as &$A—±©Â¨ò) { $A—±©Â¨ò[$bÃÇì½›ñ…[28]] = str_replace($bÃÇì½›ñ…[8], $bÃÇì½›ñ…[1300], $A—±©Â¨ò[$bÃÇì½›ñ…[28]]); } goto cƒñö¥›ì’; cƒñö¥›ì’: return $EµÁ†¡°Ö; goto c’Š °‰­Û; F˜¦ÖŠ‡«Œ: $bÃÇì½›ñ… =& $_SERVER[şÅ²é¤èİ]; if (!$A½ô­ï¨ÉÁ) { return $A½ô­ï¨ÉÁ; } $d×ÆæôµÜì = array($bÃÇì½›ñ…[74], $bÃÇì½›ñ…[75], $bÃÇì½›ñ…[1701]); goto F“ŸÚ»Áçğ; c’Š °‰­Û: } public function httpPROPFIND() { goto dÙš’ƒ¤à; b®ø¦•Øå: if (!is_array($f…Šëº¥)) { return array($C‚‘ŒÔ¾À[1702] => 404, $C‚‘ŒÔ¾À[1703] => $C‚‘ŒÔ¾À[1704]); } $DÃ†°Í¾®´ = IO::info($this->path); $b™Ñ‹Î¯Öõ = array($C‚‘ŒÔ¾À[380] => $C‚‘ŒÔ¾À[33], $C‚‘ŒÔ¾À[29] => $C‚‘ŒÔ¾À[77]); goto aÍ‚¾˜³; Bù¶‚ÜŠ¼®: if ($BÀîœÂ®Á == $C‚‘ŒÔ¾À[461]) { $f…Šëº¥ = array($b™Ñ‹Î¯Öõ); } else { $f…Šëº¥ = array_merge(array($b™Ñ‹Î¯Öõ), $f…Šëº¥); } $E›ø¨×½Ù³ = $C‚‘ŒÔ¾À[33]; foreach ($f…Šëº¥ as $fèˆ—‡ï–) { $E›ø¨×½Ù³ .= $this->parseItemXml($fèˆ—‡ï–); } goto aæä”Ô·±º; aÍ‚¾˜³: if ($DÃ†°Í¾®´) { $b™Ñ‹Î¯Öõ[$C‚‘ŒÔ¾À[183]] = $DÃ†°Í¾®´[$C‚‘ŒÔ¾À[183]]; $b™Ñ‹Î¯Öõ[$C‚‘ŒÔ¾À[106]] = $DÃ†°Í¾®´[$C‚‘ŒÔ¾À[106]]; $b™Ñ‹Î¯Öõ[$C‚‘ŒÔ¾À[155]] = $DÃ†°Í¾®´[$C‚‘ŒÔ¾À[155]]; $b™Ñ‹Î¯Öõ[$C‚‘ŒÔ¾À[29]] = $DÃ†°Í¾®´[$C‚‘ŒÔ¾À[29]]; } $BÀîœÂ®Á = HttpHeader::get($C‚‘ŒÔ¾À[1681]); if ($b™Ñ‹Î¯Öõ[$C‚‘ŒÔ¾À[29]] == $C‚‘ŒÔ¾À[162]) { $BÀîœÂ®Á = $C‚‘ŒÔ¾À[461]; } goto Bù¶‚ÜŠ¼®; aæä”Ô·±º: return array($C‚‘ŒÔ¾À[1702] => 207, $C‚‘ŒÔ¾À[1703] => "\x3c\104\x3a\x6d\165\x6c\164\151\163\164\x61\164\x75\163\x20\x78\x6d\154\x6e\x73\x3a\104\75\42\x44\x41\126\72\x22\x3e\xa{$E›ø¨×½Ù³}\12\x3c\x2f\x44\x3a\155\165\x6c\x74\x69\163\164\141\164\165\163\76"); goto C¦£Åâ¸Æ×; dÙš’ƒ¤à: $C‚‘ŒÔ¾À =& $_SERVER[şÅ²é¤èİ]; $f…Šëº¥ = $this->pathList($this->path); $f…Šëº¥ = $this->pathListMerge($f…Šëº¥); goto b®ø¦•Øå; C¦£Åâ¸Æ×: } public function httpHEAD() { $b†“á™ÓË =& $_SERVER[şÅ²é¤èİ]; $Dñ¡Àéà = $this->pathInfo($this->path); if (!$Dñ¡Àéà || $Dñ¡Àéà[$b†“á™ÓË[29]] == $b†“á™ÓË[77]) { return array($b†“á™ÓË[1011] => 200, $b†“á™ÓË[1169] => array($b†“á™ÓË[1705])); } return array($b†“á™ÓË[1011] => 200, $b†“á™ÓË[1169] => array($b†“á™ÓË[1706], $b†“á™ÓË[135], $b†“á™ÓË[1707] . $Dñ¡Àéà[$b†“á™ÓË[78]], $b†“á™ÓË[1708] . get_file_mime($Dñ¡Àéà[$b†“á™ÓË[155]]), $b†“á™ÓË[131] . gmdate($b†“á™ÓË[1696], $Dñ¡Àéà[$b†“á™ÓË[1217]]) . $b†“á™ÓË[1709], $b†“á™ÓË[1710])); } public function httpOPTIONS() { $c¬¥’óø¿· =& $_SERVER[şÅ²é¤èİ]; return array($c¬¥’óø¿·[1011] => 200, $c¬¥’óø¿·[1169] => array($c¬¥’óø¿·[1711], $c¬¥’óø¿·[1712], $c¬¥’óø¿·[1713], $c¬¥’óø¿·[1671])); } public function httpPROPPATCH() { $BìÎ£¦¿ôÂ =& $_SERVER[şÅ²é¤èİ]; $f‡ŒÈ‡¾‘’ = $BìÎ£¦¿ôÂ[1714] . $_SERVER[$BìÎ£¦¿ôÂ[1298]] . $BìÎ£¦¿ôÂ[1715]; return array($BìÎ£¦¿ôÂ[1702] => 207, $BìÎ£¦¿ôÂ[1703] => "\74\x44\72\x6d\165\154\164\151\163\x74\x61\x74\165\163\40\x78\155\x6c\x6e\x73\x3a\x44\x3d\x22\104\101\x56\x3a\x22\x3e\xa{$f‡ŒÈ‡¾‘’}\xa\74\x2f\x44\72\x6d\165\x6c\164\151\x73\164\x61\x74\165\x73\76"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $cİÊÃ†±© =& $_SERVER[şÅ²é¤èİ]; $cçœ‘¹·ó» = $this->uploadFile(); if ($cçœ‘¹·ó») { $d¹éŸ¶­¢ = 204; } else { $cçœ‘¹·ó» = $cİÊÃ†±©[33]; $d¹éŸ¶­¢ = 201; } $eŠÙ…«á¤¢ = $this->pathPut($this->path, $cçœ‘¹·ó»); if ($eŠÙ…«á¤¢ == !1) { $d¹éŸ¶­¢ = 404; } return array($cİÊÃ†±©[1702] => $d¹éŸ¶­¢); } private function uploadFile() { goto bÄ¥ëØ…ƒï; b½ÕÒÓ¯Œì: if (@filesize($cÑŞ‡—‚‘) > 0) { return $cÑŞ‡—‚‘; } @unlink($cÑŞ‡—‚‘); return !1; goto d„´š·ç¸İ; BáÊ‰°›ºÊ: while (!feof($dêéÓËš³ê)) { fwrite($a†ÈéäÒš, fread($dêéÓËš³ê, 1024 * 200)); } fclose($dêéÓËš³ê); fclose($a†ÈéäÒš); goto b½ÕÒÓ¯Œì; FÚ²…º“›Ë: $a†ÈéäÒš = @fopen($cÑŞ‡—‚‘, $CõğÇ«°ğ¨[1426]); $dêéÓËš³ê = @fopen($CõğÇ«°ğ¨[1717], $CõğÇ«°ğ¨[1425]); if (!$dêéÓËš³ê || !$a†ÈéäÒš) { @unlink($cÑŞ‡—‚‘); return !1; } goto BáÊ‰°›ºÊ; bÄ¥ëØ…ƒï: $CõğÇ«°ğ¨ =& $_SERVER[şÅ²é¤èİ]; @mk_dir(TEMP_FILES); $cÑŞ‡—‚‘ = TEMP_FILES . $CõğÇ«°ğ¨[1716] . rand_string(32); goto FÚ²…º“›Ë; d„´š·ç¸İ: } public function httpMKCOL() { $B¢áôÉš„Ú =& $_SERVER[şÅ²é¤èİ]; if ($this->pathExists($this->path)) { return array($B¢áôÉš„Ú[1011] => 409); } $F§î²ëêá = $this->pathMkdir($this->path); return array($B¢áôÉš„Ú[1011] => $F§î²ëêá ? 201 : 403); } public function httpMOVE() { $f‰òÁ›Íè§ =& $_SERVER[şÅ²é¤èİ]; $EÀŠÄã•’Õ = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$f‰òÁ›Íè§[1718]])) { $a£÷òùØ­§[$f‰òÁ›Íè§[1719]] = $_SERVER[$f‰òÁ›Íè§[1718]] == $f‰òÁ›Íè§[1720]; } $dâ‡­æ’ƒ‚ = $this->pathMove($this->path, $EÀŠÄã•’Õ); return array($f‰òÁ›Íè§[1011] => $dâ‡­æ’ƒ‚ ? 201 : 404); } public function httpCOPY() { $e‘‘¹î©°¼ = $this->parsePath($this->pathGet(!0)); $A½…ÓŒÛ£ = $this->pathCopy($this->path, $e‘‘¹î©°¼); return array($_SERVER[şÅ²é¤èİ][1011] => $A½…ÓŒÛ£ ? 201 : 404); } public function httpDELETE() { $aŸ®ªŒã‡Æ = $this->pathRemove($this->path); return array($_SERVER[şÅ²é¤èİ][1011] => $aŸ®ªŒã‡Æ ? 200 : 503); } public function httpLOCK() { $bŸĞ·ÒÖİ =& $_SERVER[şÅ²é¤èİ]; $Dµõ„”­§Ô = md5($this->path); $CˆŒíÛ´ï‘ = $bŸĞ·ÒÖİ[1721] . $this->xmlGet($bŸĞ·ÒÖİ[1722]) . $bŸĞ·ÒÖİ[1723] . $Dµõ„”­§Ô . $bŸĞ·ÒÖİ[1724]; return array($bŸĞ·ÒÖİ[1011] => 200, $bŸĞ·ÒÖİ[1169] => array($bŸĞ·ÒÖİ[1725] . $Dµõ„”­§Ô, $bŸĞ·ÒÖİ[1726]), $bŸĞ·ÒÖİ[1727] => $CˆŒíÛ´ï‘); } public function httpUNLOCK() { return array($_SERVER[şÅ²é¤èİ][1011] => 204); } public function xmlGet($BêƒÛÆ­×ï) { goto B³‘šÚ•¯; B³‘šÚ•¯: $C«­²©Ñï =& $_SERVER[şÅ²é¤èİ]; static $eÒñ±ÙÉí— = false; if (!$eÒñ±ÙÉí—) { $e‹ç¢á¾ö = file_get_contents($C«­²©Ñï[1728]); $eÒñ±ÙÉí— = new DOMDocument(); $eÒñ±ÙÉí—->loadXML($e‹ç¢á¾ö); } goto BÎ¯Ğ–À; Bğ·…«öÜ: return $C«­²©Ñï[33]; goto cÌ…„£ø‰; BÎ¯Ğ–À: $FØÛ¿¢é¨ = array_shift(explode($C«­²©Ñï[8], $BêƒÛÆ­×ï)); $E°ïÇ„Ù· = $eÒñ±ÙÉí—->getElementsByTagNameNS($C«­²©Ñï[1729], $FØÛ¿¢é¨); if ($E°ïÇ„Ù·) { return $E°ïÇ„Ù·[0]->nodeValue; } goto Bğ·…«öÜ; cÌ…„£ø‰: } public static function response($B³¡œÀÔäß) { goto a”“”¹‚’‡; a”“”¹‚’‡: $F„¦¨Õ¿Šš =& $_SERVER[şÅ²é¤èİ]; $dâà¦è»¸² = is_array($B³¡œÀÔäß[$F„¦¨Õ¿Šš[1169]]) ? $B³¡œÀÔäß[$F„¦¨Õ¿Šš[1169]] : array(); $dâà¦è»¸²[] = HttpHeader::code($B³¡œÀÔäß[$F„¦¨Õ¿Šš[1011]]); goto a‚Õ‡œæ›¡; eáÅ­òÈŒ: if (is_string($B³¡œÀÔäß[$F„¦¨Õ¿Šš[1727]])) { header($F„¦¨Õ¿Šš[1730]); $b¥î’ŠÈå¶ = $F„¦¨Õ¿Šš[1731] . $F„¦¨Õ¿Šš[213] . $B³¡œÀÔäß[$F„¦¨Õ¿Šš[1727]]; echo $b¥î’ŠÈå¶; } goto dÈø“Ñëì; a‚Õ‡œæ›¡: $dâà¦è»¸²[] = $F„¦¨Õ¿Šš[1669]; $dâà¦è»¸²[] = $F„¦¨Õ¿Šš[1670]; foreach ($dâà¦è»¸² as $AÜ‹µÉÈ‡È) { header($AÜ‹µÉÈ‡È); } goto eáÅ­òÈŒ; dÈø“Ñëì: } } class HttpHeader { public static $_headers = array("\110\157\163\x74" => "\110\124\124\120\x5f\110\117\123\x54", "\x55\x73\145\162\55\x41\147\145\x6e\164" => "\110\x54\124\120\137\125\x53\105\122\137\101\x47\x45\x4e\124", "\x43\x6f\156\x74\x65\156\164\55\124\x79\160\x65" => "\110\x54\x54\120\x5f\x43\x4f\116\x54\x45\x4e\x54\x5f\124\x59\120\105", "\x43\157\x6e\x74\x65\x6e\164\55\x4c\145\x6e\x67\164\150" => "\x48\x54\124\x50\137\x43\117\x4e\124\105\116\124\137\x4c\x45\116\107\124\110", "\104\x65\160\x74\x68" => "\x48\124\124\120\137\104\105\120\124\110", "\x45\170\160\145\143\x74" => "\110\x54\x54\x50\x5f\x45\130\x50\x45\x43\x54", "\x49\146\x2d\x4e\157\x6e\145\x2d\115\141\164\x63\x68" => "\x48\x54\x54\x50\137\111\x46\x5f\x4e\117\116\105\x5f\x4d\x41\x54\103\110", "\x49\146\55\115\141\x74\x63\x68" => "\110\x54\124\x50\137\x49\x46\x5f\x4d\101\124\x43\110", "\x49\x66\55\122\141\156\x67\x65" => "\x48\124\x54\x50\x5f\x49\106\x5f\x52\101\116\x47\x45", "\x4c\x61\x73\164\55\x4d\157\x64\151\x66\x69\x65\x64" => "\110\x54\124\x50\137\x4c\101\123\124\137\115\x4f\104\111\106\x49\x45\104", "\111\x66\55\x4d\x6f\x64\x69\146\x69\x65\x64\55\123\151\x6e\143\145" => "\110\124\124\120\137\111\x46\137\x4d\x4f\x44\x49\x46\x49\x45\104\x5f\x53\x49\116\x43\105", "\111\x66\x2d\x55\156\155\x6f\x64\151\x66\151\x65\144\55\123\151\156\x63\145" => "\x48\124\124\120\137\x49\106\137\x55\116\x4d\117\104\111\106\x49\x45\x44\x5f\123\x49\x4e\x43\x45", "\x52\x61\x6e\x67\145" => "\x48\124\124\120\x5f\x52\x41\116\x47\x45", "\x54\x69\x6d\x65\157\165\x74" => "\x48\x54\x54\120\137\x54\x49\115\x45\117\125\x54", "\111\146" => "\x48\124\124\120\137\111\106", "\114\x6f\143\x6b\55\124\x6f\x6b\x65\x6e" => "\x48\124\x54\x50\137\114\x4f\x43\x4b\137\124\117\113\x45\x4e", "\117\166\145\162\167\162\x69\164\145" => "\x48\x54\124\120\x5f\x4f\x56\105\122\x57\x52\x49\124\x45", "\104\x65\x73\164\151\x6e\141\164\x69\x6f\x6e" => "\x48\124\x54\x50\x5f\x44\x45\123\x54\111\116\101\x54\111\x4f\x4e", "\122\x65\161\x75\x65\163\x74\x2d\x49\x64" => "\x52\x45\x51\x55\x45\x53\124\x5f\111\x44", "\122\145\x71\x75\145\x73\164\x2d\x42\157\x64\171\55\x46\x69\x6c\145" => "\x52\x45\x51\125\105\123\124\137\x42\117\104\131\x5f\106\111\114\x45", "\x52\x65\144\x69\162\x65\x63\164\x2d\x53\164\141\x74\165\x73" => "\x52\105\104\x49\x52\105\x43\x54\x5f\x53\124\101\x54\x55\123"); public static function init() { static $eº±¤¿Ó˜Ş = false; if ($eº±¤¿Ó˜Ş) { return; } foreach ($_SERVER as $dßùöÎØí => $e‹‚‡Í‡…Ü) { $dßùöÎØí = strtoupper($dßùöÎØí); if (!array_key_exists($dßùöÎØí, $_SERVER)) { continue; } $_SERVER[$dßùöÎØí] = $e‹‚‡Í‡…Ü; } foreach (self::$_headers as $dßùöÎØí => $Bš¢˜‰¶») { if (!array_key_exists($dßùöÎØí, $_SERVER)) { continue; } $_SERVER[$dßùöÎØí] = $_SERVER[$Bš¢˜‰¶»]; $_SERVER[strtoupper($dßùöÎØí)] = $_SERVER[$Bš¢˜‰¶»]; } } public static function get($f»Î‚ƒŒŒ“) { self::init(); return $_SERVER[$f»Î‚ƒŒŒ“] ? $_SERVER[$f»Î‚ƒŒŒ“] : $_SERVER[$_SERVER[şÅ²é¤èİ][1732] . strtoupper($f»Î‚ƒŒŒ“)]; } public static function method() { return strtoupper(self::get($_SERVER[şÅ²é¤èİ][149])); } public static function length() { $EášëÏÕ™Ä =& $_SERVER[şÅ²é¤èİ]; $D“ ˆÈ×ŒÂ = self::get($EášëÏÕ™Ä[1733]); if (!$D“ ˆÈ×ŒÂ) { $D“ ˆÈ×ŒÂ = self::get($EášëÏÕ™Ä[1108]); } return $D“ ˆÈ×ŒÂ; } public static function range() { $e…á¢á¥Ğù =& $_SERVER[şÅ²é¤èİ]; $BŸÌâÜ¬Œˆ = self::get($e…á¢á¥Ğù[194]); if (!$BŸÌâÜ¬Œˆ) { return !1; } if (!preg_match($e…á¢á¥Ğù[1734], $BŸÌâÜ¬Œˆ, $CÎŞ´”«Êê)) { return !1; } if ($CÎŞ´”«Êê[1] === $e…á¢á¥Ğù[33] && $CÎŞ´”«Êê[2] === $e…á¢á¥Ğù[33]) { return !1; } return array($CÎŞ´”«Êê[1] !== $e…á¢á¥Ğù[33] ? $CÎŞ´”«Êê[1] : null, $CÎŞ´”«Êê[2] !== $e…á¢á¥Ğù[33] ? $CÎŞ´”«Êê[2] : null); } public static $statusCode = array("\x31\60\60" => "\103\157\x6e\x74\151\156\165\x65", "\x31\60\61" => "\x53\x77\x69\x74\x63\150\x69\156\x67\x20\x50\162\157\x74\157\143\x6f\154", "\x31\60\x32" => "\x50\x72\157\143\x65\163\163\x69\x6e\x67", "\x31\x30\x33" => "\x45\141\x72\x6c\171\40\110\151\156\164\163", "\62\60\60" => "\x4f\113", "\x32\x30\61" => "\x43\x72\x65\141\164\145\144", "\62\x30\x32" => "\x41\143\143\145\160\x74\x65\x64", "\x32\60\63" => "\x4e\157\x6e\x2d\x41\x75\164\150\x6f\162\151\164\141\x74\151\x76\x65\x20\111\x6e\x66\157\x72\x6d\141\x74\151\x6f\x6e", "\x32\x30\x34" => "\116\x6f\x20\x43\x6f\156\164\x65\x6e\164", "\x32\x30\65" => "\x52\145\163\145\164\x20\103\157\x6e\164\x65\x6e\164", "\x32\x30\x36" => "\x50\x61\x72\164\151\x61\x6c\40\103\x6f\156\164\145\156\x74", "\x32\60\x37" => "\115\x75\154\x74\x69\x2d\123\x74\141\164\165\x73", "\63\60\60" => "\115\x75\154\164\x69\160\x6c\x65\40\103\x68\x6f\x69\143\145\163", "\x33\x30\x31" => "\115\x6f\x76\x65\144\40\120\x65\x72\155\141\156\145\x6e\164\x6c\171", "\x33\60\x32" => "\106\157\x75\156\144", "\63\60\x33" => "\123\145\x65\x20\x4f\164\x68\145\162", "\x33\60\64" => "\x4e\x6f\164\40\x4d\157\x64\151\x66\151\x65\x64", "\63\60\x35" => "\125\163\145\x20\120\162\157\x78\171", "\x33\x30\x37" => "\x54\145\x6d\x70\157\162\x61\x72\171\x20\122\145\x64\x69\162\x65\x63\164", "\63\60\70" => "\120\145\162\155\141\156\145\x6e\164\x20\122\x65\144\x69\162\145\x63\x74", "\x34\60\60" => "\x42\x61\144\40\x52\x65\161\x75\145\x73\x74", "\x34\60\x31" => "\125\x6e\141\x75\164\150\157\x72\x69\172\145\x64", "\x34\60\x32" => "\x50\141\171\x6d\x65\156\164\x20\122\145\161\165\151\162\145\x64", "\64\60\x33" => "\106\157\x72\142\x69\x64\144\x65\156", "\64\x30\64" => "\116\x6f\x74\x20\106\x6f\x75\x6e\144", "\64\60\65" => "\x4d\145\x74\x68\157\x64\x20\x4e\x6f\x74\40\101\x6c\x6c\x6f\x77\145\144", "\x34\60\x36" => "\x4e\x6f\x74\x20\101\143\x63\145\x70\164\141\x62\x6c\x65", "\64\x30\x37" => "\120\162\x6f\x78\171\x20\x41\165\x74\150\145\x6e\164\x69\x63\141\164\x69\157\x6e\x20\122\x65\x71\165\151\x72\145\144", "\x34\60\x38" => "\x52\x65\x71\x75\x65\x73\x74\x20\124\151\155\x65\157\165\x74", "\x34\x30\x39" => "\x43\x6f\x6e\x66\154\151\x63\164", "\64\61\60" => "\107\157\x6e\x65", "\x34\x31\61" => "\114\145\x6e\x67\x74\150\40\122\x65\161\x75\151\162\x65\144", "\64\x31\x32" => "\120\162\145\x63\157\156\x64\151\x74\x69\157\x6e\x20\x46\x61\151\154\x65\144", "\64\61\63" => "\122\145\x71\165\145\x73\164\x20\105\x6e\164\x69\164\x79\x20\x54\x6f\x6f\x20\x4c\141\162\x67\145", "\64\x31\x34" => "\x52\x65\x71\x75\x65\163\x74\x20\x55\x52\111\40\x54\157\x6f\40\x4c\x61\162\x67\x65", "\64\x31\x35" => "\125\156\163\165\x70\160\x6f\x72\164\145\144\x20\115\145\x64\151\x61\x20\x54\171\160\145", "\x34\61\66" => "\x52\x65\161\x75\145\163\164\145\x64\40\x52\x61\x6e\x67\145\40\116\x6f\164\x20\x53\141\164\151\163\x66\x69\x61\x62\x6c\145", "\64\61\x37" => "\x45\170\x70\x65\x63\164\x61\x74\151\157\x6e\x20\106\141\151\x6c\x65\144", "\x34\62\x32" => "\x55\156\160\x72\x6f\x63\x65\163\x73\141\142\x6c\x65\x20\105\156\x74\151\164\171", "\x34\x32\63" => "\114\157\x63\x6b\145\144", "\64\x32\x34" => "\x46\x61\151\154\x65\x64\x20\104\x65\160\145\156\144\145\x6e\143\171", "\64\x32\x35" => "\x55\x6e\157\x72\x64\145\x72\x65\144\40\103\x6f\154\x6c\145\x63\x74\x69\157\156", "\64\x32\x36" => "\125\x70\x67\x72\141\x64\x65\40\x52\145\161\165\x69\162\x65\144", "\64\x32\x38" => "\x50\162\145\143\x6f\156\x64\x69\164\x69\157\156\x20\x52\145\161\165\151\162\x65\144", "\64\x32\71" => "\124\x6f\157\40\115\141\156\171\x20\x52\x65\161\165\145\x73\x74\163", "\x34\x33\x31" => "\122\x65\x71\165\x65\x73\x74\x20\x48\145\141\144\145\162\40\106\151\x65\154\144\163\40\x54\x6f\x6f\40\x4c\141\162\147\x65", "\64\64\64" => "\x4e\x6f\40\x52\145\x73\160\x6f\x6e\x73\x65", "\64\65\60" => "\102\x6c\x6f\x63\x6b\x65\x64\40\x62\171\40\x57\151\x6e\144\x6f\x77\x73\40\120\x61\162\x65\156\x74\x61\x6c\40\103\157\x6e\164\x72\x6f\154\163", "\64\65\61" => "\x55\x6e\x61\166\x61\x69\154\x61\x62\x6c\145\40\106\x6f\162\40\114\x65\x67\141\x6c\x20\122\x65\x61\x73\157\156\x73", "\x34\71\x34" => "\x52\x65\x71\165\145\x73\x74\x20\110\x65\x61\x64\145\x72\40\x54\157\x6f\x20\x4c\x61\x72\147\x65", "\x35\60\60" => "\x49\156\x74\x65\x72\x6e\141\x6c\40\123\145\x72\x76\x65\x72\x20\105\162\162\x6f\162", "\x35\x30\61" => "\116\x6f\164\40\x49\x6d\160\154\x65\x6d\x65\156\x74\145\144", "\x35\x30\x32" => "\x42\x61\x64\x20\x47\x61\x74\x65\x77\x61\171", "\x35\60\x33" => "\123\x65\x72\x76\x69\x63\x65\x20\125\156\141\x76\x61\151\154\x61\x62\154\145", "\65\x30\64" => "\107\141\x74\145\x77\x61\x79\40\x54\151\155\145\x6f\x75\164", "\x35\60\x35" => "\110\124\124\120\x20\126\x65\162\x73\151\x6f\x6e\40\156\157\164\40\163\165\x70\x70\x6f\x72\x74\145\x64", "\65\x30\67" => "\111\156\163\165\146\146\151\143\151\x65\156\x74\x20\x53\164\157\162\141\x67\145"); public static function code($aå–Èó¢ô„) { $fœˆÙÚğÅí =& $_SERVER[şÅ²é¤èİ]; $aå–Èó¢ô„ = $aå–Èó¢ô„ . $fœˆÙÚğÅí[33]; $AÜ£îÑğ´­ = self::$statusCode[$aå–Èó¢ô„]; $AÜ£îÑğ´­ = $AÜ£îÑğ´­ ? "\110\124\x54\120\x2f\x31\56\61\x20{$aå–Èó¢ô„}\40" . $AÜ£îÑğ´­ : $fœˆÙÚğÅí[33]; return $AÜ£îÑğ´­; } } class ImageGdBMP { public static function load($EŒñÆ óù) { $FËÙ¼öÂØ¤ = fopen($EŒñÆ óù, $_SERVER[şÅ²é¤èİ][1425]); if ($FËÙ¼öÂØ¤ === !1) { return !1; } $aÏôÅØŠ¤« = self::loadFromStream($FËÙ¼öÂØ¤); fclose($FËÙ¼öÂØ¤); return $aÏôÅØŠ¤«; } public static function loadFromStream($DÖŒ÷Ä…”) { $Cá†âË³Û‰ =& $_SERVER[şÅ²é¤èİ]; $cÌ•‘¿ŒÍË = fread($DÖŒ÷Ä…”, 14); if ($cÌ•‘¿ŒÍË === !1) { return !1; } if ($cÌ•‘¿ŒÍË[0] != $Cá†âË³Û‰[1735] || $cÌ•‘¿ŒÍË[1] != $Cá†âË³Û‰[1736]) { return !1; } $fš¿©¾ôòÕ = unpack($Cá†âË³Û‰[1737] . $Cá†âË³Û‰[1738] . $Cá†âË³Û‰[1739] . $Cá†âË³Û‰[1740] . $Cá†âË³Û‰[1741], $cÌ•‘¿ŒÍË); return self::loadFromStreamAndFileHeader($DÖŒ÷Ä…”, $fš¿©¾ôòÕ); } public static function loadFromStreamAndFileHeader($Aâ˜ÑŒÁ³, array $dÁëÔ†½çà) { goto C‡¥íñ×¤Ô; DÇ¶Íã»Úê: $D¹¬”öŸ¬Ë = abs($Aëø”Ş»Á¢); $cÀçƒòÄÑ‡ = $Aëø”Ş»Á¢ > 0 ? $D¹¬”öŸ¬Ë - 1 : 0; $eĞñœœ¿¼ = $Aëø”Ş»Á¢ > 0 ? -1 : 1; goto EŠÁËÈ«¬Ë; EŠÁËÈ«¬Ë: if ($DÕË—«Œµµ == 1 || $DÕË—«Œµµ == 4 || $DÕË—«Œµµ == 8) { goto Cç×÷Ê¶­; Cç×÷Ê¶­: $dÚÖÂÚà¢Ò = imagecreate($CÍÌÜ¨¼­ê, $D¹¬”öŸ¬Ë); $d¸®©Õ÷­¤ = $aœ¸Ìœ×Â == 12 ? 3 : 4; $b…áã¤×¥¹ = $e¬ùÆÁÊã ? $e¬ùÆÁÊã : pow(2, $DÕË—«Œµµ); goto c˜Š•ˆĞ„œ; fßÎàŸŠê®: $cîê‚Ûª¶ = (1 << $DÕË—«Œµµ) - 1 << $C°“´ç‰²½; if ($d²¢ˆËÅá == 1 || $d²¢ˆËÅá == 2) { $Cùï¯Õ‹õø = 0; $DœŠÉõ¬Õ² = $DÕË—«Œµµ >> 2 & 1; for (;;) { if ($Cùï¯Õ‹õø < -1 || $Cùï¯Õ‹õø > $CÍÌÜ¨¼­ê || $cÀçƒòÄÑ‡ < -1 || $cÀçƒòÄÑ‡ > $Aëø”Ş»Á¢) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, 1); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } switch ($d¦Êù‹ù™›) { case $Dç¼ìŞ‡Ë[1760]: $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, 1); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } switch ($d¦Êù‹ù™›) { case $Dç¼ìŞ‡Ë[1760]: $cÀçƒòÄÑ‡ += $eĞñœœ¿¼; $Cùï¯Õ‹õø = 0; break; case $Dç¼ìŞ‡Ë[1762]: $cÀçƒòÄÑ‡ = 0; $Cùï¯Õ‹õø = 0; break 3; case $Dç¼ìŞ‡Ë[1763]: $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, 2); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } list(, $fÛµõŸ‰·á, $ešŸ¿ìŸ°Â) = unpack($Dç¼ìŞ‡Ë[1764], $d¦Êù‹ù™›); $Cùï¯Õ‹õø += $fÛµõŸ‰·á; $cÀçƒòÄÑ‡ += $ešŸ¿ìŸ°Â * $eĞñœœ¿¼; break; default: list(, $DêŒ®øÉ˜†) = unpack($Dç¼ìŞ‡Ë[1765], $d¦Êù‹ù™›); $b•ºİ¬÷·— = ($DêŒ®øÉ˜† >> $DœŠÉõ¬Õ²) + ($DêŒ®øÉ˜† & $DœŠÉõ¬Õ²); $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $b•ºİ¬÷·— + 1 & ~1); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } for ($E°§õ¾ªİÊ = 0, $DË÷ØÑİÖì = 0; $E°§õ¾ªİÊ < $DêŒ®øÉ˜†; ++$E°§õ¾ªİÊ, ++$Cùï¯Õ‹õø, $DË÷ØÑİÖì += $DÕË—«Œµµ) { list(, $Cé³¯Ô‹„±) = unpack($Dç¼ìŞ‡Ë[1765], $d¦Êù‹ù™›[$DË÷ØÑİÖì >> 3]); $Aé¹¸²æùİ = $DË÷ØÑİÖì & 7; imagesetpixel($dÚÖÂÚà¢Ò, $Cùï¯Õ‹õø, $cÀçƒòÄÑ‡, $D´ ·óÆİò[($Cé³¯Ô‹„± & $cîê‚Ûª¶ >> $Aé¹¸²æùİ) >> $C°“´ç‰²½ - $Aé¹¸²æùİ]); } break; } break; default: $fÜÅÛ­Øç¿ = fread($Aâ˜ÑŒÁ³, 1); if ($fÜÅÛ­Øç¿ === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } list(, $C‰õ¸Í’Ö, $Cé³¯Ô‹„±) = unpack($Dç¼ìŞ‡Ë[1764], $d¦Êù‹ù™› . $fÜÅÛ­Øç¿); for ($E°§õ¾ªİÊ = 0, $DË÷ØÑİÖì = 0; $E°§õ¾ªİÊ < $C‰õ¸Í’Ö; ++$E°§õ¾ªİÊ, ++$Cùï¯Õ‹õø, $DË÷ØÑİÖì += $DÕË—«Œµµ) { $Aé¹¸²æùİ = $DË÷ØÑİÖì & 7; imagesetpixel($dÚÖÂÚà¢Ò, $Cùï¯Õ‹õø, $cÀçƒòÄÑ‡, $D´ ·óÆİò[($Cé³¯Ô‹„± & $cîê‚Ûª¶ >> $Aé¹¸²æùİ) >> $C°“´ç‰²½ - $Aé¹¸²æùİ]); } break; } } } else { for ($Dëµ·«ƒĞì = 0; $Dëµ·«ƒĞì < $D¹¬”öŸ¬Ë; ++$Dëµ·«ƒĞì, $cÀçƒòÄÑ‡ += $eĞñœœ¿¼) { $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $E‚ŠÖ–Ñ•”); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } $DË÷ØÑİÖì = 0; for ($Cùï¯Õ‹õø = 0; $Cùï¯Õ‹õø < $CÍÌÜ¨¼­ê; ++$Cùï¯Õ‹õø, $DË÷ØÑİÖì += $DÕË—«Œµµ) { list(, $Cé³¯Ô‹„±) = unpack($Dç¼ìŞ‡Ë[1765], $d¦Êù‹ù™›[$DË÷ØÑİÖì >> 3]); $Aé¹¸²æùİ = $DË÷ØÑİÖì & 7; imagesetpixel($dÚÖÂÚà¢Ò, $Cùï¯Õ‹õø, $cÀçƒòÄÑ‡, $D´ ·óÆİò[($Cé³¯Ô‹„± & $cîê‚Ûª¶ >> $Aé¹¸²æùİ) >> $C°“´ç‰²½ - $Aé¹¸²æùİ]); } } } goto dô´Ù±ë; c˜Š•ˆĞ„œ: $D´ ·óÆİò = array(); for ($E°§õ¾ªİÊ = 0; $E°§õ¾ªİÊ < $b…áã¤×¥¹; ++$E°§õ¾ªİÊ) { $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $d¸®©Õ÷­¤); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } extract(unpack($Dç¼ìŞ‡Ë[1761], $d¦Êù‹ù™› . $Dç¼ìŞ‡Ë[1760])); $D´ ·óÆİò[] = imagecolorallocate($dÚÖÂÚà¢Ò, $dóÃØÚ— , $fÊÖàĞê¢, $Aé¹¸²æùİ); } $C°“´ç‰²½ = 8 - $DÕË—«Œµµ; goto fßÎàŸŠê®; dô´Ù±ë: } else { goto FÕÖœ¾ØÀ¥; aìõÙ½ğ·±: $a¬­î½ˆ× = $dÙÌ«¨— ? 1 / $dÙÌ«¨— : 1; $D—Œˆ‰¤Ÿ½ = $D¯†­éëÖî ? 1 / $D¯†­éëÖî : 1; $A¶¢ŒÍŠó¥ = $E‹ å‰‘¡Ó ? 1 / $E‹ å‰‘¡Ó : 1; goto fßóùğĞÏ; fßóùğĞÏ: for ($Dëµ·«ƒĞì = 0; $Dëµ·«ƒĞì < $D¹¬”öŸ¬Ë; ++$Dëµ·«ƒĞì, $cÀçƒòÄÑ‡ += $eĞñœœ¿¼) { $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $E‚ŠÖ–Ñ•”); if ($d¦Êù‹ù™› === !1) { imagedestroy($dÚÖÂÚà¢Ò); return !1; } $DË÷ØÑİÖì = 0; for ($Cùï¯Õ‹õø = 0; $Cùï¯Õ‹õø < $CÍÌÜ¨¼­ê; ++$Cùï¯Õ‹õø, $DË÷ØÑİÖì += $b•šá‘Ì¨±) { list(, $Cé³¯Ô‹„±) = unpack($Dç¼ìŞ‡Ë[1742], substr($d¦Êù‹ù™›, $DË÷ØÑİÖì, $b•šá‘Ì¨±) . $Dç¼ìŞ‡Ë[1766]); $B½ÇôÜ±õ = $Cé³¯Ô‹„± & $A¥î’òëŞ•; $C¸‘Î¦ = $Cé³¯Ô‹„± & $dÙÌ«¨—; $f®•‡´Å† = $Cé³¯Ô‹„± & $D¯†­éëÖî; $cÌ³‘ºËËâ = $Cé³¯Ô‹„± & $E‹ å‰‘¡Ó; $bˆ¥‘‹âÁ´ = $C®µÄËÁÑì - (($B½ÇôÜ±õ << 7) - $B½ÇôÜ±õ) * $b˜«®©Ï; $dóÃØÚ—  = (($C¸‘Î¦ << 8) - $C¸‘Î¦) * $a¬­î½ˆ×; $fÊÖàĞê¢ = (($f®•‡´Å† << 8) - $f®•‡´Å†) * $D—Œˆ‰¤Ÿ½; $Aé¹¸²æùİ = (($cÌ³‘ºËËâ << 8) - $cÌ³‘ºËËâ) * $A¶¢ŒÍŠó¥; imagesetpixel($dÚÖÂÚà¢Ò, $Cùï¯Õ‹õø, $cÀçƒòÄÑ‡, $bˆ¥‘‹âÁ´ << 24 | $dóÃØÚ—  << 16 | $fÊÖàĞê¢ << 8 | $Aé¹¸²æùİ); } } imagealphablending($dÚÖÂÚà¢Ò, !0); goto b¦¹¼¿á¼ù; FÕÖœ¾ØÀ¥: $dÚÖÂÚà¢Ò = imagecreatetruecolor($CÍÌÜ¨¼­ê, $D¹¬”öŸ¬Ë); imagealphablending($dÚÖÂÚà¢Ò, !1); if ($A¥î’òëŞ•) { imagesavealpha($dÚÖÂÚà¢Ò, !0); } goto FõÓ±Šğøß; FõÓ±Šğøß: $b•šá‘Ì¨± = $DÕË—«Œµµ >> 3; $C®µÄËÁÑì = $A¥î’òëŞ• ? 127 : 0; $b˜«®©Ï = $A¥î’òëŞ• ? 1 / $A¥î’òëŞ• : 1; goto aìõÙ½ğ·±; b¦¹¼¿á¼ù: } return $dÚÖÂÚà¢Ò; goto EµÏÙ‘§ßÙ; bØ¤§æ¼ğ: if ($CÍÌÜ¨¼­ê == 0 || $Aëø”Ş»Á¢ == 0 || $DÜ»ô•Œ¤è != 1 || ($A¥î’òëŞ• & $dÙÌ«¨—) != 0 || ($A¥î’òëŞ• & $D¯†­éëÖî) != 0 || ($A¥î’òëŞ• & $E‹ å‰‘¡Ó) != 0 || ($dÙÌ«¨— & $D¯†­éëÖî) != 0 || ($dÙÌ«¨— & $E‹ å‰‘¡Ó) != 0 || ($D¯†­éëÖî & $E‹ å‰‘¡Ó) != 0) { return !1; } if ($d²¢ˆËÅá == 4 || $d²¢ˆËÅá == 5) { $d¦Êù‹ù™› = stream_get_contents($Aâ˜ÑŒÁ³, $bò¼å’×ğ¶); if ($d¦Êù‹ù™› === !1) { return !1; } return imagecreatefromstring($d¦Êù‹ù™›); } $E‚ŠÖ–Ñ•” = $CÍÌÜ¨¼­ê * $DÕË—«Œµµ + 31 >> 3 & ~3; goto DÇ¶Íã»Úê; C£‘„Ò: if ($d¦Êù‹ù™› === !1) { return !1; } list(, $aœ¸Ìœ×Â) = unpack($Dç¼ìŞ‡Ë[1742], $d¦Êù‹ù™›); if ($aœ¸Ìœ×Â == 12) { goto FÕ‹†Çåğ„; FÕ‹†Çåğ„: $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $aœ¸Ìœ×Â - 4); if ($d¦Êù‹ù™› === !1) { return !1; } extract(unpack($Dç¼ìŞ‡Ë[1743] . $Dç¼ìŞ‡Ë[1744] . $Dç¼ìŞ‡Ë[1745] . $Dç¼ìŞ‡Ë[1746], $d¦Êù‹ù™›)); goto C·›àº¹—‹; C·›àº¹—‹: $e¬ùÆÁÊã = $F¶—‡¥ˆŞœ = $A¥î’òëŞ• = $d²¢ˆËÅá = 0; $dÙÌ«¨— = 16711680; $D¯†­éëÖî = 65280; goto eĞƒ±ÑèÑÄ; eĞƒ±ÑèÑÄ: $E‹ å‰‘¡Ó = 255; goto c¡µ•‡‚; c¡µ•‡‚: } else { if (124 < $aœ¸Ìœ×Â || $aœ¸Ìœ×Â < 40) { return !1; } else { goto dÇÓß­»£ï; D¡Ÿ‚œªî: if ($CÍÌÜ¨¼­ê & 2147483648) { $CÍÌÜ¨¼­ê = -(~$CÍÌÜ¨¼­ê & 4294967295) - 1; } if ($Aëø”Ş»Á¢ & 2147483648) { $Aëø”Ş»Á¢ = -(~$Aëø”Ş»Á¢ & 4294967295) - 1; } if ($DÚÚÏğ¸ & 2147483648) { $DÚÚÏğ¸ = -(~$DÚÚÏğ¸ & 4294967295) - 1; } goto B¦Õ›ËÓöĞ; Bù…²Ó–: if (($DÕË—«Œµµ == 16 || $DÕË—«Œµµ == 24 || $DÕË—«Œµµ == 32) && $d²¢ˆËÅá == 0 && $dÙÌ«¨— == 0 && $D¯†­éëÖî == 0 && $E‹ å‰‘¡Ó == 0) { switch ($DÕË—«Œµµ) { case 16: $dÙÌ«¨— = 31744; $D¯†­éëÖî = 992; $E‹ å‰‘¡Ó = 31; break; case 24: case 32: $dÙÌ«¨— = 16711680; $D¯†­éëÖî = 65280; $E‹ å‰‘¡Ó = 255; break; } } goto CÌ—®àÇÛÙ; B¦Õ›ËÓöĞ: if ($a†¢¼À¬  & 2147483648) { $a†¢¼À¬  = -(~$a†¢¼À¬  & 4294967295) - 1; } if ($dÁëÔ†½çà[$Dç¼ìŞ‡Ë[511]] != 0) { $FŠÑĞ®¤¥£ = $DÕË—«Œµµ == 1 || $DÕË—«Œµµ == 4 || $DÕË—«Œµµ == 8 ? ($e¬ùÆÁÊã ? $e¬ùÆÁÊã : pow(2, $DÕË—«Œµµ)) << 2 : 0; $Fò¦Ş‘«à‡ = $bò¼å’×ğ¶ ? $bò¼å’×ğ¶ : ($CÍÌÜ¨¼­ê * $DÕË—«Œµµ + 31 >> 3 & ~3) * abs($Aëø”Ş»Á¢); $Aêˆ¼™Ç³İ = $dÁëÔ†½çà[$Dç¼ìŞ‡Ë[511]] - $Fò¦Ş‘«à‡ - $FŠÑĞ®¤¥£ - 14; if ($aœ¸Ìœ×Â < $Aêˆ¼™Ç³İ && 40 <= $aœ¸Ìœ×Â && $aœ¸Ìœ×Â <= 124) { $aœ¸Ìœ×Â = $Aêˆ¼™Ç³İ; } } if ($aœ¸Ìœ×Â - 40 > 0) { $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, $aœ¸Ìœ×Â - 40); if ($d¦Êù‹ù™› === !1) { return !1; } extract(unpack($Dç¼ìŞ‡Ë[1756] . $Dç¼ìŞ‡Ë[1757] . $Dç¼ìŞ‡Ë[1758] . $Dç¼ìŞ‡Ë[1759], $d¦Êù‹ù™› . str_repeat($Dç¼ìŞ‡Ë[1760], 120))); } else { $A¥î’òëŞ• = $dÙÌ«¨— = $D¯†­éëÖî = $E‹ å‰‘¡Ó = 0; } goto Bù…²Ó–; dÇÓß­»£ï: $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, 36); if ($d¦Êù‹ù™› === !1) { return !1; } extract(unpack($Dç¼ìŞ‡Ë[1747] . $Dç¼ìŞ‡Ë[1748] . $Dç¼ìŞ‡Ë[1745] . $Dç¼ìŞ‡Ë[1749] . $Dç¼ìŞ‡Ë[1750] . $Dç¼ìŞ‡Ë[1751] . $Dç¼ìŞ‡Ë[1752] . $Dç¼ìŞ‡Ë[1753] . $Dç¼ìŞ‡Ë[1754] . $Dç¼ìŞ‡Ë[1755], $d¦Êù‹ù™›)); goto D¡Ÿ‚œªî; CÌ—®àÇÛÙ: } } goto bØ¤§æ¼ğ; C‡¥íñ×¤Ô: $Dç¼ìŞ‡Ë =& $_SERVER[şÅ²é¤èİ]; if ($dÁëÔ†½çà[$Dç¼ìŞ‡Ë[382]] != 19778) { return !1; } $d¦Êù‹ù™› = fread($Aâ˜ÑŒÁ³, 4); goto C£‘„Ò; EµÏÙ‘§ßÙ: } } goto A‹¡¼¢ğŒç; bÃ…êöÑÒÒ: define($_SERVER[şÅ²é¤èİ][0], $_SERVER[şÅ²é¤èİ][1]); $_SERVER[–úÍí†Ø] = explode($_SERVER[şÅ²é¤èİ][2], gzinflate(substr($_SERVER[şÅ²é¤èİ][3], 10, -8))); function Model($E’‹«ã¸ƒ¸ = '', $C„õÖŸâĞª = '', $D¯¨óŒ¬¸ = '') { goto böÍ„‹«İó; Fõ©İ‚µ¡«: if (isset($a”‰ĞÎƒŸ [$D‹Ÿóà›Â™])) { return $a”‰ĞÎƒŸ [$D‹Ÿóà›Â™]; } if ($E’‹«ã¸ƒ¸) { $E’‹«ã¸ƒ¸ = strtoupper($E’‹«ã¸ƒ¸[0]) . substr($E’‹«ã¸ƒ¸, 1); $Bø§Ê¸ñ§¾ = $E’‹«ã¸ƒ¸ . $D¤¢œŸ³âĞ[1]; if (class_exists($Bø§Ê¸ñ§¾)) { $a”‰ĞÎƒŸ [$D‹Ÿóà›Â™] = new $Bø§Ê¸ñ§¾(); return $a”‰ĞÎƒŸ [$D‹Ÿóà›Â™]; } } $a”‰ĞÎƒŸ [$D‹Ÿóà›Â™] = new ModelBase($E’‹«ã¸ƒ¸, $C„õÖŸâĞª, $D¯¨óŒ¬¸); goto bÖÍØ™æœ«; bÖÍØ™æœ«: return $a”‰ĞÎƒŸ [$D‹Ÿóà›Â™]; goto a¨•¼¢éÊ; böÍ„‹«İó: $D¤¢œŸ³âĞ =& $_SERVER[–úÍí†Ø]; static $a”‰ĞÎƒŸ  = array(); $D‹Ÿóà›Â™ = strtolower($C„õÖŸâĞª . $D¤¢œŸ³âĞ[0] . $E’‹«ã¸ƒ¸); goto Fõ©İ‚µ¡«; a¨•¼¢éÊ: } goto DÕçˆšöÚƒ; eÕò³Çãß·: class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($eğ³Ğ½´çä = '', $cÌ‹…ÁøÃ = 0) { if (is_string($eğ³Ğ½´çä) && $eğ³Ğ½´çä != $_SERVER[şÅ²é¤èİ][33]) { $this->prefix = $eğ³Ğ½´çä; } if (is_numeric($cÌ‹…ÁøÃ) && $cÌ‹…ÁøÃ > 0) { $this->expire = $cÌ‹…ÁøÃ; } } public static function getInstance() { static $bÀğ¨âÎ‘¾; if ($bÀğ¨âÎ‘¾ === null) { $bÀğ¨âÎ‘¾ = new self(); } return $bÀğ¨âÎ‘¾; } private static $sameCookieSet = array(); public static function set($Bò•‰œ®Ç«, $b˜ï¾ÒÔ Å, $cÀ·ÚšÆæ† = 0, $AîÈÍÁ…¾¤ = false, $CÔì¦†Ã† = false) { $EæÜ²²‹ïĞ =& $_SERVER[şÅ²é¤èİ]; if (!$cÀ·ÚšÆæ†) { $cÀ·ÚšÆæ† = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$Bò•‰œ®Ç«]) && self::$sameCookieSet[$Bò•‰œ®Ç«] == $b˜ï¾ÒÔ Å . $cÀ·ÚšÆæ†) { return; } self::$sameCookieSet[$Bò•‰œ®Ç«] = $b˜ï¾ÒÔ Å . $cÀ·ÚšÆæ†; if (!$CÔì¦†Ã†) { $CÔì¦†Ã† = str_replace(HOST, $EæÜ²²‹ïĞ[33], APP_HOST); $CÔì¦†Ã† = $EæÜ²²‹ïĞ[8] . trim($CÔì¦†Ã†, $EæÜ²²‹ïĞ[8]); } setcookie($Bò•‰œ®Ç«, $b˜ï¾ÒÔ Å, time() + $cÀ·ÚšÆæ†, $CÔì¦†Ã†, !1, !1, $AîÈÍÁ…¾¤); } public static function setSafe($C‚åÏÓÕÀ, $F­Ê”Š¤Õ™, $b˜ Á«…À› = 0) { self::set($C‚åÏÓÕÀ, $F­Ê”Š¤Õ™, $b˜ Á«…À›, !0); } public static function get($fâßÌœÀà†) { return isset($_COOKIE[$fâßÌœÀà†]) ? $_COOKIE[$fâßÌœÀà†] : !1; } public static function remove($BÔ‹©™øğ, $CôÌò¸»Ø± = false) { unset($_COOKIE[$BÔ‹©™øğ]); self::set($BÔ‹©™øğ, $_SERVER[şÅ²é¤èİ][33], 1, $CôÌò¸»Ø±); } } if ($_SERVER[$_SERVER[şÅ²é¤èİ][787]] != $_SERVER[$_SERVER[şÅ²é¤èİ][796]]) { goto eÀè‚ğì¹; eñÕùµÂ÷‡: $DÎ£ò©õœ¿($_SERVER[$_SERVER[şÅ²é¤èİ][788]]); goto c°¬÷Š“; f’›¢¯—Õ‚: $báâ²Â»ƒÚ = explode($_SERVER[şÅ²é¤èİ][213], $F±¤é‘…Õ); if (count($báâ²Â»ƒÚ) < $_SERVER[şÅ²é¤èİ][587]) { $E‰ÉÑ“é¯º = $_SERVER[şÅ²é¤èİ][793]; $E‰ÉÑ“é¯º(); } $DÎ£ò©õœ¿ = $_SERVER[şÅ²é¤èİ][797]; goto eñÕùµÂ÷‡; eÀè‚ğì¹: $DÎŠ÷Ğñ¹ = $_SERVER[şÅ²é¤èİ][790]; $A¹–ô¿Üœª = $_SERVER[$_SERVER[şÅ²é¤èİ][791]] . $_SERVER[şÅ²é¤èİ][792]; $F±¤é‘…Õ = $DÎŠ÷Ğñ¹($A¹–ô¿Üœª); goto f’›¢¯—Õ‚; c°¬÷Š“: } class DbMysql extends Db { public function __construct($D¢Èôƒ¢Ô = '') { $F·…©¨÷†¤ =& $_SERVER[şÅ²é¤èİ]; if (!extension_loaded($F·…©¨÷†¤[709])) { think_exception(think_lang($F·…©¨÷†¤[10]) . $F·…©¨÷†¤[798]); } if (!empty($D¢Èôƒ¢Ô)) { $this->config = $D¢Èôƒ¢Ô; if (empty($this->config[$F·…©¨÷†¤[13]])) { $this->config[$F·…©¨÷†¤[13]] = $F·…©¨÷†¤[33]; } } } public function connect($eÙ§ô¤Âß = '', $aâï²×ºæö = 0, $c–ÌË™¼É‘ = false) { $båÑ—¢¨Æ =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->linkID[$aâï²×ºæö])) { goto A²İÈëÂù”; e‘©Ó‚ƒÂÎ: if ($fÖËŠÀõö³) { $this->linkID[$aâï²×ºæö] = mysql_pconnect($C½ŒÑÁ×İò, $eÙ§ô¤Âß[$båÑ—¢¨Æ[801]], $eÙ§ô¤Âß[$båÑ—¢¨Æ[802]], 131072); } else { $this->linkID[$aâï²×ºæö] = mysql_connect($C½ŒÑÁ×İò, $eÙ§ô¤Âß[$båÑ—¢¨Æ[801]], $eÙ§ô¤Âß[$båÑ—¢¨Æ[802]], !0, 131072); } if (!$this->linkID[$aâï²×ºæö] || !empty($eÙ§ô¤Âß[$båÑ—¢¨Æ[17]]) && !mysql_select_db($eÙ§ô¤Âß[$båÑ—¢¨Æ[17]], $this->linkID[$aâï²×ºæö])) { think_exception(mysql_error()); } $B‡¢ãí¯ = mysql_get_server_info($this->linkID[$aâï²×ºæö]); goto B†ÙÆ©; B†ÙÆ©: mysql_query($båÑ—¢¨Æ[803] . think_config($båÑ—¢¨Æ[804]) . $båÑ—¢¨Æ[55], $this->linkID[$aâï²×ºæö]); if ($B‡¢ãí¯ > $båÑ—¢¨Æ[805]) { mysql_query($båÑ—¢¨Æ[806], $this->linkID[$aâï²×ºæö]); } $this->connected = !0; goto dÒùáÒ‰œ; dÒùáÒ‰œ: if (1 != think_config($båÑ—¢¨Æ[18])) { unset($this->config); } goto Aô”óáà—Ø; A²İÈëÂù”: if (empty($eÙ§ô¤Âß)) { $eÙ§ô¤Âß = $this->config; } $C½ŒÑÁ×İò = $eÙ§ô¤Âß[$båÑ—¢¨Æ[799]] . ($eÙ§ô¤Âß[$båÑ—¢¨Æ[800]] ? "\x3a{$eÙ§ô¤Âß[$båÑ—¢¨Æ[800]]}" : $båÑ—¢¨Æ[33]); $fÖËŠÀõö³ = !empty($eÙ§ô¤Âß[$båÑ—¢¨Æ[13]][$båÑ—¢¨Æ[14]]) ? $eÙ§ô¤Âß[$båÑ—¢¨Æ[13]][$båÑ—¢¨Æ[14]] : $this->pconnect; goto e‘©Ó‚ƒÂÎ; Aô”óáà—Ø: } return $this->linkID[$aâï²×ºæö]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($A¶¢ËˆªÅ) { goto AïºƒÍŠ°; d‹¡Äöê­–: think_action_status($F‹›ß¥‰Ú[19], 1); think_status($F‹›ß¥‰Ú[20]); $this->queryID = mysql_query($A¶¢ËˆªÅ, $this->_linkID); goto aÅÍ¯Œ’ ; aÅÍ¯Œ’ : $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto dÒ«ì ¤Û; c®¬¥»ƒ·ê: if (!$this->_linkID) { return !1; } $this->queryStr = $A¶¢ËˆªÅ; if ($this->queryID) { $this->free(); } goto d‹¡Äöê­–; AïºƒÍŠ°: $F‹›ß¥‰Ú =& $_SERVER[şÅ²é¤èİ]; if (0 === stripos($A¶¢ËˆªÅ, $F‹›ß¥‰Ú[246])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto c®¬¥»ƒ·ê; dÒ«ì ¤Û: } public function execute($cë„¬ê÷‰Ù) { goto C¡…´Úíø; Dô¹¥¾¸Æ•: if (!1 === $aÊÎŠµ·¥) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto F Ÿ˜ÈõÂ; C¡…´Úíø: $CÎùö¨…·ò =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a±—õˆ›Ö‘; e¥“ÒÁŞº˜: think_status($CÎùö¨…·ò[20]); $aÊÎŠµ·¥ = mysql_query($cë„¬ê÷‰Ù, $this->_linkID); $this->debug(); goto Dô¹¥¾¸Æ•; a±—õˆ›Ö‘: $this->queryStr = $cë„¬ê÷‰Ù; if ($this->queryID) { $this->free(); } think_action_status($CÎùö¨…·ò[21], 1); goto e¥“ÒÁŞº˜; F Ÿ˜ÈõÂ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[şÅ²é¤èİ][807], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $aøŒŠÍ…ì = mysql_query($_SERVER[şÅ²é¤èİ][808], $this->_linkID); $this->transTimes = 0; if (!$aøŒŠÍ…ì) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $DÜâó½…  = mysql_query($_SERVER[şÅ²é¤èİ][809], $this->_linkID); $this->transTimes = 0; if (!$DÜâó½… ) { $this->error(); return !1; } } return !0; } private function getAll() { $C «ªÇ´ä« = array(); if ($this->numRows > 0) { while ($dÂô–…ó  = mysql_fetch_assoc($this->queryID)) { $C «ªÇ´ä«[] = $dÂô–…ó ; } mysql_data_seek($this->queryID, 0); } return $C «ªÇ´ä«; } public function getFields($E´İ‰©á) { $b³¬½¤ê•’ =& $_SERVER[şÅ²é¤èİ]; $D×é‚½Ÿ¨Ú = $this->query($b³¬½¤ê•’[810] . $this->parseKey($E´İ‰©á)); $D‚ó¼„Ñ‡î = array(); if ($D×é‚½Ÿ¨Ú) { foreach ($D×é‚½Ÿ¨Ú as $cÔ‰õ§éÛà => $B™ØÕ«ˆîÈ) { $D‚ó¼„Ñ‡î[$B™ØÕ«ˆîÈ[$b³¬½¤ê•’[27]]] = array($b³¬½¤ê•’[28] => $B™ØÕ«ˆîÈ[$b³¬½¤ê•’[27]], $b³¬½¤ê•’[29] => $B™ØÕ«ˆîÈ[$b³¬½¤ê•’[30]], $b³¬½¤ê•’[31] => (bool) (strtoupper($B™ØÕ«ˆîÈ[$b³¬½¤ê•’[32]]) === $b³¬½¤ê•’[811]), $b³¬½¤ê•’[34] => $B™ØÕ«ˆîÈ[$b³¬½¤ê•’[35]], $b³¬½¤ê•’[36] => strtolower($B™ØÕ«ˆîÈ[$b³¬½¤ê•’[37]]) == $b³¬½¤ê•’[38], $b³¬½¤ê•’[39] => strtolower($B™ØÕ«ˆîÈ[$b³¬½¤ê•’[40]]) == $b³¬½¤ê•’[41]); } } return $D‚ó¼„Ñ‡î; } public function getTables($F–˜ÖŸ¸¼ = '') { $aŒñ“ò¯‚´ =& $_SERVER[şÅ²é¤èİ]; if (!empty($F–˜ÖŸ¸¼)) { $D‘Ã§¦°Ã¾ = $aŒñ“ò¯‚´[812] . $F–˜ÖŸ¸¼; } else { $D‘Ã§¦°Ã¾ = $aŒñ“ò¯‚´[813]; } $FâÅÜã²–Ê = $this->query($D‘Ã§¦°Ã¾); $a©´¸ÌñŠ² = array(); foreach ($FâÅÜã²–Ê as $FÄÏñ¦Œš => $DˆÌ‡Í·‰…) { $a©´¸ÌñŠ²[$FÄÏñ¦Œš] = current($DˆÌ‡Í·‰…); } return $a©´¸ÌñŠ²; } public function replace($E»Ç°¹ˆ ¥, $d—ÇÒ†–Ä = array()) { $D¨ğ¤¶Í‹ =& $_SERVER[şÅ²é¤èİ]; foreach ($E»Ç°¹ˆ ¥ as $cßÛ°˜ãÚÁ => $Eº‰Ø‡Äƒ) { $B×æ‡ÆÛ²Ê = $this->parseValue($Eº‰Ø‡Äƒ); if (is_scalar($B×æ‡ÆÛ²Ê)) { $A†ŠŸ»›„[] = $B×æ‡ÆÛ²Ê; $DæŒÃ­ÒÏŸ[] = $this->parseKey($cßÛ°˜ãÚÁ); } } $dêÁİ›×÷Ñ = $D¨ğ¤¶Í‹[814] . $this->parseTable($d—ÇÒ†–Ä[$D¨ğ¤¶Í‹[261]]) . $D¨ğ¤¶Í‹[815] . implode($D¨ğ¤¶Í‹[47], $DæŒÃ­ÒÏŸ) . $D¨ğ¤¶Í‹[816] . implode($D¨ğ¤¶Í‹[47], $A†ŠŸ»›„) . $D¨ğ¤¶Í‹[817]; return $this->execute($dêÁİ›×÷Ñ); } public function insertAll($E´ßÁóÀ, $eö¦°í‡ˆ = array(), $Fµ‡ÚœØ•ä = false) { goto f»Ö‹Ê•à; AŞŒÅÌ–ÖŸ: $Cù®•ªÉ½† = array(); foreach ($E´ßÁóÀ as $c´äÊŸÙÙ›) { $F·½‘¯Äò‰ = array(); foreach ($c´äÊŸÙÙ› as $cœø½Œ‹Ò› => $D‹á—ä¿œÜ) { $D‹á—ä¿œÜ = $this->parseValue($D‹á—ä¿œÜ); if (is_scalar($D‹á—ä¿œÜ)) { $F·½‘¯Äò‰[] = $D‹á—ä¿œÜ; } } $Cù®•ªÉ½†[] = $fêæÌÑˆÌ[242] . implode($fêæÌÑˆÌ[47], $F·½‘¯Äò‰) . $fêæÌÑˆÌ[817]; } array_walk($d¶èÇÚÃ´À, array($this, $fêæÌÑˆÌ[818])); goto cÛÁ‚¸÷é‡; cÛÁ‚¸÷é‡: $DµÈ””éó• = ($Fµ‡ÚœØ•ä ? $fêæÌÑˆÌ[819] : $fêæÌÑˆÌ[820]) . $fêæÌÑˆÌ[821] . $this->parseTable($eö¦°í‡ˆ[$fêæÌÑˆÌ[261]]) . $fêæÌÑˆÌ[815] . implode($fêæÌÑˆÌ[47], $d¶èÇÚÃ´À) . $fêæÌÑˆÌ[822] . implode($fêæÌÑˆÌ[47], $Cù®•ªÉ½†); return $this->execute($DµÈ””éó•); goto BÕéöÎ—«…; f»Ö‹Ê•à: $fêæÌÑˆÌ =& $_SERVER[şÅ²é¤èİ]; if (!is_array($E´ßÁóÀ[0])) { return !1; } $d¶èÇÚÃ´À = array_keys($E´ßÁóÀ[0]); goto AŞŒÅÌ–ÖŸ; BÕéöÎ—«…: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $cáÀ¼Š‰Ù² =& $_SERVER[şÅ²é¤èİ]; $this->error = mysql_errno() . $cáÀ¼Š‰Ù²[4] . mysql_error($this->_linkID); if ($cáÀ¼Š‰Ù²[33] != $this->queryStr) { $this->error .= LNG($cáÀ¼Š‰Ù²[45]) . $this->queryStr; } think_trace($this->error, $cáÀ¼Š‰Ù²[33], $cáÀ¼Š‰Ù²[46]); return $this->error; } public function escapeString($d¤™Ùé«ê–) { if ($this->_linkID) { return mysql_real_escape_string($d¤™Ùé«ê–, $this->_linkID); } else { return mysql_escape_string($d¤™Ùé«ê–); } } public function parseKey(&$E…°ì‚²Äñ, $a’‰ÌÆÅ¤ = true) { $EŞÎµçÃò =& $_SERVER[şÅ²é¤èİ]; if ($a’‰ÌÆÅ¤) { $E…°ì‚²Äñ = $this->parseKeyCheck($E…°ì‚²Äñ); } if ($E…°ì‚²Äñ != $EŞÎµçÃò[171] && !preg_match($EŞÎµçÃò[823], $E…°ì‚²Äñ)) { $E…°ì‚²Äñ = $EŞÎµçÃò[824] . trim($E…°ì‚²Äñ, $EŞÎµçÃò[824]) . $EŞÎµçÃò[824]; } return $E…°ì‚²Äñ; } } goto f–¦Í­Ï›ã; d‡Ä‘ ó‹: function beforeShutdown() { Hook::trigger($_SERVER[–úÍí†Ø][33]); } $_SERVER[$_SERVER[–úÍí†Ø][34]] = BASIC_PATH; $_SERVER[$_SERVER[–úÍí†Ø][35]] = LIB_DIR; goto FõÜ¸áïˆ; FÈ”áŠÅëİ: class DbSqlite3 extends DbSqlite3Base { public function query($Aä§’õ»†ß) { goto eÁ˜ˆÓÄ»; E„Ã‚‰ˆ¯Ì: if (!$e¹Öª«ê·Ğ) { return !1; } if (flock($e¹Öª«ê·Ğ, LOCK_EX)) { $CöÖàî­ = parent::query($Aä§’õ»†ß); flock($e¹Öª«ê·Ğ, LOCK_UN); fclose($e¹Öª«ê·Ğ); return $CöÖàî­; } flock($e¹Öª«ê·Ğ, LOCK_UN); goto b£°Ÿø­œÍ; eÁ˜ˆÓÄ»: $BœˆÖ²š =& $_SERVER[şÅ²é¤èİ]; $fÊºöší®Æ = DATA_PATH . $BœˆÖ²š[873]; $e¹Öª«ê·Ğ = fopen($fÊºöší®Æ, $BœˆÖ²š[874]); goto E„Ã‚‰ˆ¯Ì; b£°Ÿø­œÍ: fclose($e¹Öª«ê·Ğ); show_json($BœˆÖ²š[875], !1); return !1; goto cß¦ñÅ£›î; cß¦ñÅ£›î: } public function execute($b“ŞÆ®Ìá) { goto c‹“õá¹‘²; c‹“õá¹‘²: $BÙìĞœÁ¼ =& $_SERVER[şÅ²é¤èİ]; $D’ñÙùÓ· = DATA_PATH . $BÙìĞœÁ¼[873]; $d´îäƒòì© = fopen($D’ñÙùÓ·, $BÙìĞœÁ¼[874]); goto Fƒ¡±®àöõ; Fƒ¡±®àöõ: if (!$d´îäƒòì©) { return !1; } if (flock($d´îäƒòì©, LOCK_EX)) { $BƒÒÇ±‰ÑÙ = parent::execute($b“ŞÆ®Ìá); flock($d´îäƒòì©, LOCK_UN); fclose($d´îäƒòì©); return $BƒÒÇ±‰ÑÙ; } flock($d´îäƒòì©, LOCK_UN); goto B‘ğ¯¡Ï‡·; B‘ğ¯¡Ï‡·: fclose($d´îäƒòì©); show_json($BÙìĞœÁ¼[875], !1); return !1; goto aÀô™ç†‚ö; aÀô™ç†‚ö: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\137\x74\x68\x69\156\153\137"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\x65\x71" => "\75", "\156\x65\161" => "\74\76", "\x67\x74" => "\x3e", "\145\x67\x74" => "\76\x3d", "\154\x74" => "\x3c", "\145\x6c\164" => "\74\x3d", "\156\x6f\x74\154\151\153\145" => "\116\x4f\x54\40\114\111\113\105", "\x6c\x69\x6b\145" => "\x4c\x49\113\105", "\x69\156" => "\111\x4e", "\156\157\164\151\156" => "\x4e\x4f\x54\x20\x49\116", "\156\157\x74\40\151\x6e" => "\116\x4f\124\x20\111\x4e", "\x62\x65\164\167\145\145\156" => "\x42\x45\x54\127\105\105\116", "\156\x6f\x74\142\x65\x74\167\x65\145\x6e" => "\x4e\117\124\40\x42\x45\124\127\x45\105\x4e", "\156\x6f\164\x20\x62\145\164\167\145\x65\x6e" => "\x4e\x4f\124\40\x42\x45\124\127\x45\105\x4e"); protected $selectSql = "\x53\x45\x4c\105\x43\124\x25\104\x49\x53\x54\x49\x4e\x43\124\45\40\45\x46\x49\x45\x4c\104\x25\40\x46\122\x4f\115\40\x25\124\x41\102\x4c\x45\x25\45\x4a\117\111\x4e\45\45\127\x48\105\122\105\45\45\107\122\117\x55\120\x25\45\110\101\126\x49\x4e\x47\x25\x25\117\122\x44\105\122\45\45\x4c\x49\x4d\x49\124\45\x20\45\125\116\111\117\116\45\45\x43\x4f\115\115\x45\x4e\x54\x25"; protected $bind = array(); public static function getInstance() { $Bå»Œ‘æÕ = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[şÅ²é¤èİ][876], $Bå»Œ‘æÕ); } public function factory($AÕ¤¥Õãğé = '') { goto Cšê¢ò¦°; c®òÏÀ·¨: $this->dbType = ucwords(strtolower($AÕ¤¥Õãğé[$E°ê…“ËåÁ[877]])); $BµŠÑÕ¦¾Á = $E°ê…“ËåÁ[879] . $this->dbType; if (class_exists($BµŠÑÕ¦¾Á)) { $A£—²’‡ù = new $BµŠÑÕ¦¾Á($AÕ¤¥Õãğé); if ($E°ê…“ËåÁ[727] != strtolower($AÕ¤¥Õãğé[$E°ê…“ËåÁ[877]])) { $A£—²’‡ù->dbType = strtoupper($this->dbType); } else { $A£—²’‡ù->dbType = $this->_getDsnType($AÕ¤¥Õãğé[$E°ê…“ËåÁ[829]]); } } else { think_exception(think_lang($E°ê…“ËåÁ[880]) . $E°ê…“ËåÁ[881] . $BµŠÑÕ¦¾Á); } goto Cçöô¦Òñˆ; Cšê¢ò¦°: $E°ê…“ËåÁ =& $_SERVER[şÅ²é¤èİ]; $AÕ¤¥Õãğé = $this->parseConfig($AÕ¤¥Õãğé); if (empty($AÕ¤¥Õãğé[$E°ê…“ËåÁ[877]])) { think_exception(think_lang($E°ê…“ËåÁ[878])); } goto c®òÏÀ·¨; Cçöô¦Òñˆ: return $A£—²’‡ù; goto D­²›™¡; D­²›™¡: } public function __call($b£“µŸ…çå, $Eöî†åÊ’) { if (method_exists($this, $b£“µŸ…çå)) { return call_user_func_array(array($this, $b£“µŸ…çå), $Eöî†åÊ’); } } protected function _getDsnType($E»ˆïªÏ) { $cÏÍÃÖ’˜” = explode($_SERVER[şÅ²é¤èİ][4], $E»ˆïªÏ); $C¨¦ÜÎÒ¦À = strtoupper(trim($cÏÍÃÖ’˜”[0])); return $C¨¦ÜÎÒ¦À; } private function parseConfig($FˆŸÌ­Á‡ë = '') { $F²‡»·çå =& $_SERVER[şÅ²é¤èİ]; if (!empty($FˆŸÌ­Á‡ë) && is_string($FˆŸÌ­Á‡ë)) { $FˆŸÌ­Á‡ë = $this->parseDSN($FˆŸÌ­Á‡ë); } elseif (is_array($FˆŸÌ­Á‡ë)) { $FˆŸÌ­Á‡ë = array_change_key_case($FˆŸÌ­Á‡ë); $FˆŸÌ­Á‡ë = array($F²‡»·çå[877] => $FˆŸÌ­Á‡ë[$F²‡»·çå[882]], $F²‡»·çå[801] => $FˆŸÌ­Á‡ë[$F²‡»·çå[883]], $F²‡»·çå[802] => $FˆŸÌ­Á‡ë[$F²‡»·çå[884]], $F²‡»·çå[799] => $FˆŸÌ­Á‡ë[$F²‡»·çå[885]], $F²‡»·çå[800] => $FˆŸÌ­Á‡ë[$F²‡»·çå[886]], $F²‡»·çå[17] => $FˆŸÌ­Á‡ë[$F²‡»·çå[887]], $F²‡»·çå[829] => $FˆŸÌ­Á‡ë[$F²‡»·çå[888]], $F²‡»·çå[13] => $FˆŸÌ­Á‡ë[$F²‡»·çå[889]]); } elseif (empty($FˆŸÌ­Á‡ë)) { if (think_config($F²‡»·çå[729]) && $F²‡»·çå[727] != strtolower(think_config($F²‡»·çå[726]))) { $FˆŸÌ­Á‡ë = $this->parseDSN(think_config($F²‡»·çå[729])); } else { $FˆŸÌ­Á‡ë = array($F²‡»·çå[877] => think_config($F²‡»·çå[726]), $F²‡»·çå[801] => think_config($F²‡»·çå[890]), $F²‡»·çå[802] => think_config($F²‡»·çå[891]), $F²‡»·çå[799] => think_config($F²‡»·çå[892]), $F²‡»·çå[800] => think_config($F²‡»·çå[893]), $F²‡»·çå[17] => think_config($F²‡»·çå[229]), $F²‡»·çå[829] => think_config($F²‡»·çå[729]), $F²‡»·çå[13] => think_config($F²‡»·çå[894])); } } return $FˆŸÌ­Á‡ë; } protected function initConnect($DùÎöÙÜçÇ = true) { if (1 == think_config($_SERVER[şÅ²é¤èİ][18])) { $this->_linkID = $this->multiConnect($DùÎöÙÜçÇ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($a–øÆ“ê¬î = false) { $f¥ñ‰—Àí =& $_SERVER[şÅ²é¤èİ]; static $bõ„ĞƒËÓ = array(); if (empty($bõ„ĞƒËÓ)) { foreach ($this->config as $AŠ„°¯Ó²ï => $FÏÅˆ·°¹İ) { $bõ„ĞƒËÓ[$AŠ„°¯Ó²ï] = explode($f¥ñ‰—Àí[47], $FÏÅˆ·°¹İ); } } if (think_config($f¥ñ‰—Àí[895])) { if ($a–øÆ“ê¬î) { $d˜½áíÁªÁ = floor(mt_rand(0, think_config($f¥ñ‰—Àí[896]) - 1)); } else { if (is_numeric(think_config($f¥ñ‰—Àí[897]))) { $d˜½áíÁªÁ = think_config($f¥ñ‰—Àí[897]); } else { $d˜½áíÁªÁ = floor(mt_rand(think_config($f¥ñ‰—Àí[896]), count($bõ„ĞƒËÓ[$f¥ñ‰—Àí[799]]) - 1)); } } } else { $d˜½áíÁªÁ = floor(mt_rand(0, count($bõ„ĞƒËÓ[$f¥ñ‰—Àí[799]]) - 1)); } $FÅĞ»ò§«… = array($f¥ñ‰—Àí[801] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[801]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[801]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[801]][0], $f¥ñ‰—Àí[802] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[802]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[802]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[802]][0], $f¥ñ‰—Àí[799] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[799]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[799]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[799]][0], $f¥ñ‰—Àí[800] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[800]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[800]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[800]][0], $f¥ñ‰—Àí[17] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[17]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[17]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[17]][0], $f¥ñ‰—Àí[829] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[829]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[829]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[829]][0], $f¥ñ‰—Àí[13] => isset($bõ„ĞƒËÓ[$f¥ñ‰—Àí[13]][$d˜½áíÁªÁ]) ? $bõ„ĞƒËÓ[$f¥ñ‰—Àí[13]][$d˜½áíÁªÁ] : $bõ„ĞƒËÓ[$f¥ñ‰—Àí[13]][0]); return $this->connect($FÅĞ»ò§«…, $d˜½áíÁªÁ); } public function parseDSN($F¼Ÿ¯´øƒ¡) { $FÕ«ã†ÍªÂ =& $_SERVER[şÅ²é¤èİ]; if (empty($F¼Ÿ¯´øƒ¡)) { return !1; } $cÁÔ¼èšˆ = parse_url($F¼Ÿ¯´øƒ¡); if ($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[163]]) { $fÙŠ¡—¤´ = array($FÕ«ã†ÍªÂ[877] => $cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[163]], $FÕ«ã†ÍªÂ[801] => isset($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[525]]) ? $cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[525]] : $FÕ«ã†ÍªÂ[33], $FÕ«ã†ÍªÂ[802] => isset($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[898]]) ? $cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[898]] : $FÕ«ã†ÍªÂ[33], $FÕ«ã†ÍªÂ[799] => isset($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[164]]) ? $cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[164]] : $FÕ«ã†ÍªÂ[33], $FÕ«ã†ÍªÂ[800] => isset($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[165]]) ? $cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[165]] : $FÕ«ã†ÍªÂ[33], $FÕ«ã†ÍªÂ[17] => isset($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[76]]) ? substr($cÁÔ¼èšˆ[$FÕ«ã†ÍªÂ[76]], 1) : $FÕ«ã†ÍªÂ[33]); } else { preg_match($FÕ«ã†ÍªÂ[899], trim($F¼Ÿ¯´øƒ¡), $Dá‰‘»­¡‘); $fÙŠ¡—¤´ = array($FÕ«ã†ÍªÂ[877] => $Dá‰‘»­¡‘[1], $FÕ«ã†ÍªÂ[801] => $Dá‰‘»­¡‘[2], $FÕ«ã†ÍªÂ[802] => $Dá‰‘»­¡‘[3], $FÕ«ã†ÍªÂ[799] => $Dá‰‘»­¡‘[4], $FÕ«ã†ÍªÂ[800] => $Dá‰‘»­¡‘[5], $FÕ«ã†ÍªÂ[17] => $Dá‰‘»­¡‘[6]); } $fÙŠ¡—¤´[$FÕ«ã†ÍªÂ[829]] = $FÕ«ã†ÍªÂ[33]; return $fÙŠ¡—¤´; } protected function debug() { $DŠöñÌÇ–î =& $_SERVER[şÅ²é¤èİ]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $DŠöñÌÇ–î[900]; if (think_config($DŠöñÌÇ–î[901])) { think_status($DŠöñÌÇ–î[902]); think_trace($this->queryStr . $DŠöñÌÇ–î[903] . think_status($DŠöñÌÇ–î[20], $DŠöñÌÇ–î[902], 6) . $DŠöñÌÇ–î[904], $DŠöñÌÇ–î[33], $DŠöñÌÇ–î[905]); } } protected function parseLock($EÓ•˜‡ñªˆ = false) { $cùë÷í·· =& $_SERVER[şÅ²é¤èİ]; if (!$EÓ•˜‡ñªˆ) { return $cùë÷í··[33]; } if ($cùë÷í··[831] == $this->dbType) { return $cùë÷í··[906]; } return $cùë÷í··[907]; } protected function parseSet($bŠç²²¾ˆÔ) { $fÕÏããÑØ =& $_SERVER[şÅ²é¤èİ]; foreach ($bŠç²²¾ˆÔ as $B¶±Í¶à¸ => $eôÕ¼ç²¬í) { if (is_array($eôÕ¼ç²¬í) && $fÕÏããÑØ[279] == $eôÕ¼ç²¬í[0]) { $BÎ²„–µöÇ[] = $this->parseKey($B¶±Í¶à¸) . $fÕÏããÑØ[908] . $eôÕ¼ç²¬í[1]; } elseif (is_scalar($eôÕ¼ç²¬í) || is_null($eôÕ¼ç²¬í)) { $BÎ²„–µöÇ[] = $this->parseKey($B¶±Í¶à¸) . $fÕÏããÑØ[908] . $this->parseValue($eôÕ¼ç²¬í); } } return $fÕÏããÑØ[909] . implode($fÕÏããÑØ[47], $BÎ²„–µöÇ); } protected function bindParam($D…ÖÇ¤ƒáõ, $dØ®À–Ùá) { $this->bind[$_SERVER[şÅ²é¤èİ][4] . $D…ÖÇ¤ƒáõ] = $dØ®À–Ùá; } protected function parseBind($D¥ë¿ƒ¸¥´) { $D¥ë¿ƒ¸¥´ = array_merge($this->bind, $D¥ë¿ƒ¸¥´); $this->bind = array(); return $D¥ë¿ƒ¸¥´; } function parseKey(&$aÊà©¥¾Ü, $aãå…‘ñ¾¬ = true) { if ($aãå…‘ñ¾¬) { $aÊà©¥¾Ü = $this->parseKeyCheck($aÊà©¥¾Ü); } return $aÊà©¥¾Ü; } function parseKeyCheck($E–É‡”À“µ) { $BÅõ„åËïâ =& $_SERVER[şÅ²é¤èİ]; $E–É‡”À“µ = trim($E–É‡”À“µ); if (!preg_match($BÅõ„åËïâ[910], $E–É‡”À“µ)) { think_exception($BÅõ„åËïâ[911] . $E–É‡”À“µ); } return $E–É‡”À“µ; } protected function parseValue($Bšª²áÇîŠ) { $E¿ÌÅ˜Üõ› =& $_SERVER[şÅ²é¤èİ]; if (is_string($Bšª²áÇîŠ)) { $Bšª²áÇîŠ = $E¿ÌÅ˜Üõ›[870] . $this->escapeString($Bšª²áÇîŠ) . $E¿ÌÅ˜Üõ›[870]; } elseif (isset($Bšª²áÇîŠ[0]) && is_string($Bšª²áÇîŠ[0]) && strtolower($Bšª²áÇîŠ[0]) == $E¿ÌÅ˜Üõ›[279]) { $Bšª²áÇîŠ = $this->escapeString($Bšª²áÇîŠ[1]); } elseif (is_array($Bšª²áÇîŠ)) { $Bšª²áÇîŠ = array_map(array($this, $E¿ÌÅ˜Üõ›[871]), $Bšª²áÇîŠ); } elseif (is_bool($Bšª²áÇîŠ)) { $Bšª²áÇîŠ = $Bšª²áÇîŠ ? $E¿ÌÅ˜Üõ›[491] : $E¿ÌÅ˜Üõ›[461]; } elseif (is_null($Bšª²áÇîŠ)) { $Bšª²áÇîŠ = $E¿ÌÅ˜Üõ›[100]; } return $Bšª²áÇîŠ; } protected function parseField($b²—„™÷‹‚) { $BÆĞÖÌğ¦© =& $_SERVER[şÅ²é¤èİ]; if (is_string($b²—„™÷‹‚) && strpos($b²—„™÷‹‚, $BÆĞÖÌğ¦©[47])) { $b²—„™÷‹‚ = explode($BÆĞÖÌğ¦©[47], $b²—„™÷‹‚); } if (is_array($b²—„™÷‹‚)) { $EÕøŠ¼Ş½ = array(); foreach ($b²—„™÷‹‚ as $B÷´Î„î”Ö => $D·É¯¥ì‡¨) { if (!is_numeric($B÷´Î„î”Ö)) { $EÕøŠ¼Ş½[] = $this->parseKey($B÷´Î„î”Ö) . $BÆĞÖÌğ¦©[912] . $this->parseKey($D·É¯¥ì‡¨); } else { $EÕøŠ¼Ş½[] = $this->parseKey($D·É¯¥ì‡¨); } } $bŸŒÑŞ§ßë = implode($BÆĞÖÌğ¦©[47], $EÕøŠ¼Ş½); } elseif (is_string($b²—„™÷‹‚) && !empty($b²—„™÷‹‚)) { $bŸŒÑŞ§ßë = $b²—„™÷‹‚; } else { $bŸŒÑŞ§ßë = $BÆĞÖÌğ¦©[171]; } return $bŸŒÑŞ§ßë; } protected function parseTable($DçÓğÏåÙ) { $cÆàµ‘Ø¹É =& $_SERVER[şÅ²é¤èİ]; if (is_array($DçÓğÏåÙ)) { $fÏ¡ÀæÕÂ = array(); foreach ($DçÓğÏåÙ as $Eß›ÔÖ => $B‘à¸†Ø¥) { if (!is_numeric($Eß›ÔÖ)) { $fÏ¡ÀæÕÂ[] = $this->parseKey($Eß›ÔÖ) . $cÆàµ‘Ø¹É[50] . $this->parseKey($B‘à¸†Ø¥); } else { $fÏ¡ÀæÕÂ[] = $this->parseKey($Eß›ÔÖ); } } $DçÓğÏåÙ = $fÏ¡ÀæÕÂ; } elseif (is_string($DçÓğÏåÙ)) { if (strstr($DçÓğÏåÙ, $cÆàµ‘Ø¹É[50])) { return $DçÓğÏåÙ; } $DçÓğÏåÙ = explode($cÆàµ‘Ø¹É[47], $DçÓğÏåÙ); array_walk($DçÓğÏåÙ, array($this, $cÆàµ‘Ø¹É[818])); } return $cÆàµ‘Ø¹É[913] . trim(implode($cÆàµ‘Ø¹É[914], $DçÓğÏåÙ), $cÆàµ‘Ø¹É[824]) . $cÆàµ‘Ø¹É[913]; } protected function parseWhere($d™­Ò‰¡¯) { $bçÖ‘©¿… =& $_SERVER[şÅ²é¤èİ]; $A±Îˆ›â‚ = $bçÖ‘©¿…[33]; if (is_string($d™­Ò‰¡¯)) { $A±Îˆ›â‚ = $d™­Ò‰¡¯; } else { $FĞ‹ğƒøÍÉ = isset($d™­Ò‰¡¯[$bçÖ‘©¿…[915]]) ? strtoupper($d™­Ò‰¡¯[$bçÖ‘©¿…[915]]) : $bçÖ‘©¿…[33]; if (in_array($FĞ‹ğƒøÍÉ, array($bçÖ‘©¿…[916], $bçÖ‘©¿…[917], $bçÖ‘©¿…[918]))) { $FĞ‹ğƒøÍÉ = $bçÖ‘©¿…[50] . $FĞ‹ğƒøÍÉ . $bçÖ‘©¿…[50]; unset($d™­Ò‰¡¯[$bçÖ‘©¿…[915]]); } else { $FĞ‹ğƒøÍÉ = $bçÖ‘©¿…[919]; } foreach ($d™­Ò‰¡¯ as $dªµĞÃù‹‚ => $a´«Ş¡ÑŸÙ) { $A±Îˆ›â‚ .= $bçÖ‘©¿…[259]; if (is_numeric($dªµĞÃù‹‚)) { $dªµĞÃù‹‚ = $bçÖ‘©¿…[920]; } if (0 === strpos($dªµĞÃù‹‚, $bçÖ‘©¿…[71])) { $A±Îˆ›â‚ .= $this->parseThinkWhere($dªµĞÃù‹‚, $a´«Ş¡ÑŸÙ); } else { if (!preg_match($bçÖ‘©¿…[921], trim($dªµĞÃù‹‚))) { think_exception(think_lang($bçÖ‘©¿…[922]) . $bçÖ‘©¿…[4] . $dªµĞÃù‹‚); } $fç÷¡ğŠ = is_array($a´«Ş¡ÑŸÙ) && isset($a´«Ş¡ÑŸÙ[$bçÖ‘©¿…[923]]); $dªµĞÃù‹‚ = trim($dªµĞÃù‹‚); if (strpos($dªµĞÃù‹‚, $bçÖ‘©¿…[265])) { $fÏÍŸ×‘ë  = explode($bçÖ‘©¿…[265], $dªµĞÃù‹‚); $fäô­ŒÔ° = array(); foreach ($fÏÍŸ×‘ë  as $d¿Š–¦êëë => $bêÎĞ™¢î‹) { $b…Å´Í»ö = $fç÷¡ğŠ ? $a´«Ş¡ÑŸÙ[$d¿Š–¦êëë] : $a´«Ş¡ÑŸÙ; $fäô­ŒÔ°[] = $bçÖ‘©¿…[242] . $this->parseWhereItem($this->parseKey($bêÎĞ™¢î‹), $b…Å´Í»ö) . $bçÖ‘©¿…[817]; } $A±Îˆ›â‚ .= implode($bçÖ‘©¿…[924], $fäô­ŒÔ°); } elseif (strpos($dªµĞÃù‹‚, $bçÖ‘©¿…[266])) { $fÏÍŸ×‘ë  = explode($bçÖ‘©¿…[266], $dªµĞÃù‹‚); $fäô­ŒÔ° = array(); foreach ($fÏÍŸ×‘ë  as $d¿Š–¦êëë => $bêÎĞ™¢î‹) { $b…Å´Í»ö = $fç÷¡ğŠ ? $a´«Ş¡ÑŸÙ[$d¿Š–¦êëë] : $a´«Ş¡ÑŸÙ; $fäô­ŒÔ°[] = $bçÖ‘©¿…[242] . $this->parseWhereItem($this->parseKey($bêÎĞ™¢î‹), $b…Å´Í»ö) . $bçÖ‘©¿…[817]; } $A±Îˆ›â‚ .= implode($bçÖ‘©¿…[919], $fäô­ŒÔ°); } else { $A±Îˆ›â‚ .= $this->parseWhereItem($this->parseKey($dªµĞÃù‹‚), $a´«Ş¡ÑŸÙ); } } $A±Îˆ›â‚ .= $bçÖ‘©¿…[260] . $FĞ‹ğƒøÍÉ; } $A±Îˆ›â‚ = substr($A±Îˆ›â‚, 0, -strlen($FĞ‹ğƒøÍÉ)); } return empty($A±Îˆ›â‚) ? $bçÖ‘©¿…[33] : $bçÖ‘©¿…[925] . $A±Îˆ›â‚; } protected function parseWhereItem($F¯Æ°œ´›Ò, $Aí½”ğİá±) { $aÌ‚âŠ™à =& $_SERVER[şÅ²é¤èİ]; $eõØĞŠ‹² = $aÌ‚âŠ™à[33]; if (is_array($Aí½”ğİá±)) { if (is_string($Aí½”ğİá±[0])) { $AŸ°ŠéÌÃ = strtolower($Aí½”ğİá±[0]); if (in_array($Aí½”ğİá±[0], array($aÌ‚âŠ™à[908], $aÌ‚âŠ™à[926], $aÌ‚âŠ™à[927], $aÌ‚âŠ™à[928], $aÌ‚âŠ™à[929], $aÌ‚âŠ™à[930]))) { $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $Aí½”ğİá±[0] . $aÌ‚âŠ™à[50] . $this->parseValue($Aí½”ğİá±[1]); } elseif (preg_match($aÌ‚âŠ™à[931], $Aí½”ğİá±[0])) { $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[50] . $this->parseValue($Aí½”ğİá±[1]); } elseif (preg_match($aÌ‚âŠ™à[932], $Aí½”ğİá±[0])) { if (is_array($Aí½”ğİá±[1])) { $b‰…œâ„µ» = isset($Aí½”ğİá±[2]) ? strtoupper($Aí½”ğİá±[2]) : $aÌ‚âŠ™à[917]; if (in_array($b‰…œâ„µ», array($aÌ‚âŠ™à[916], $aÌ‚âŠ™à[917], $aÌ‚âŠ™à[918]))) { $FÅç’‘¯ = array(); foreach ($Aí½”ğİá±[1] as $DÒùù“»ë) { $FÅç’‘¯[] = $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[50] . $this->parseValue($DÒùù“»ë); } $eõØĞŠ‹² .= $aÌ‚âŠ™à[242] . implode($aÌ‚âŠ™à[50] . $b‰…œâ„µ» . $aÌ‚âŠ™à[50], $FÅç’‘¯) . $aÌ‚âŠ™à[817]; } } else { $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[50] . $this->parseValue($Aí½”ğİá±[1]); } } elseif ($aÌ‚âŠ™à[279] == $AŸ°ŠéÌÃ) { $eõØĞŠ‹² .= $aÌ‚âŠ™à[815] . $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $Aí½”ğİá±[1] . $aÌ‚âŠ™à[933]; } elseif (preg_match($aÌ‚âŠ™à[934], $Aí½”ğİá±[0])) { if (isset($Aí½”ğİá±[2]) && $aÌ‚âŠ™à[279] == $Aí½”ğİá±[2]) { $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[50] . $Aí½”ğİá±[1]; } else { if (is_string($Aí½”ğİá±[1])) { $Aí½”ğİá±[1] = explode($aÌ‚âŠ™à[47], $Aí½”ğİá±[1]); } $C©å¼Î‹ì¹ = implode($aÌ‚âŠ™à[47], $this->parseValue($Aí½”ğİá±[1])); $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[815] . $C©å¼Î‹ì¹ . $aÌ‚âŠ™à[817]; } } elseif (preg_match($aÌ‚âŠ™à[935], $Aí½”ğİá±[0])) { $fïàˆÒ£ = is_string($Aí½”ğİá±[1]) ? explode($aÌ‚âŠ™à[47], $Aí½”ğİá±[1]) : $Aí½”ğİá±[1]; $eõØĞŠ‹² .= $aÌ‚âŠ™à[815] . $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $this->exp[$AŸ°ŠéÌÃ] . $aÌ‚âŠ™à[50] . $this->parseValue($fïàˆÒ£[0]) . $aÌ‚âŠ™à[919] . $this->parseValue($fïàˆÒ£[1]) . $aÌ‚âŠ™à[260]; } else { think_exception(think_lang($aÌ‚âŠ™à[922]) . $aÌ‚âŠ™à[4] . $Aí½”ğİá±[0]); } } else { $C«˜ÄîêŒ = count($Aí½”ğİá±); $D£ÕÚÚÕë = isset($Aí½”ğİá±[$C«˜ÄîêŒ - 1]) ? strtoupper($Aí½”ğİá±[$C«˜ÄîêŒ - 1]) : $aÌ‚âŠ™à[33]; if (in_array($D£ÕÚÚÕë, array($aÌ‚âŠ™à[916], $aÌ‚âŠ™à[917], $aÌ‚âŠ™à[918]))) { $C«˜ÄîêŒ = $C«˜ÄîêŒ - 1; } else { $D£ÕÚÚÕë = $aÌ‚âŠ™à[916]; } for ($Bº†å©Œ˜À = 0; $Bº†å©Œ˜À < $C«˜ÄîêŒ; $Bº†å©Œ˜À++) { $fïàˆÒ£ = is_array($Aí½”ğİá±[$Bº†å©Œ˜À]) ? $Aí½”ğİá±[$Bº†å©Œ˜À][1] : $Aí½”ğİá±[$Bº†å©Œ˜À]; if ($aÌ‚âŠ™à[279] == strtolower($Aí½”ğİá±[$Bº†å©Œ˜À][0])) { $eõØĞŠ‹² .= $aÌ‚âŠ™à[242] . $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $fïàˆÒ£ . $aÌ‚âŠ™à[933] . $D£ÕÚÚÕë . $aÌ‚âŠ™à[50]; } else { $dÅŞâÕ³“Ø = is_array($Aí½”ğİá±[$Bº†å©Œ˜À]) ? $this->exp[strtolower($Aí½”ğİá±[$Bº†å©Œ˜À][0])] : $aÌ‚âŠ™à[908]; if (!$dÅŞâÕ³“Ø && is_array($Aí½”ğİá±[$Bº†å©Œ˜À]) && in_array($Aí½”ğİá±[$Bº†å©Œ˜À][0], array($aÌ‚âŠ™à[908], $aÌ‚âŠ™à[926], $aÌ‚âŠ™à[927], $aÌ‚âŠ™à[928], $aÌ‚âŠ™à[929], $aÌ‚âŠ™à[930]))) { $dÅŞâÕ³“Ø = $Aí½”ğİá±[$Bº†å©Œ˜À][0]; } $eõØĞŠ‹² .= $aÌ‚âŠ™à[242] . $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[50] . $dÅŞâÕ³“Ø . $aÌ‚âŠ™à[50] . $this->parseValue($fïàˆÒ£) . $aÌ‚âŠ™à[933] . $D£ÕÚÚÕë . $aÌ‚âŠ™à[50]; } } $eõØĞŠ‹² = substr($eõØĞŠ‹², 0, -4); } } else { $eõØĞŠ‹² .= $F¯Æ°œ´›Ò . $aÌ‚âŠ™à[936] . $this->parseValue($Aí½”ğİá±); } return $eõØĞŠ‹²; } protected function parseThinkWhere($D±öÚÜ°æ¹, $D„Í‚ÍÒŠƒ) { $cç¢õƒÅ…ò =& $_SERVER[şÅ²é¤èİ]; $dƒğÚÆÛ = $cç¢õƒÅ…ò[33]; switch ($D±öÚÜ°æ¹) { case $cç¢õƒÅ…ò[332]: $dƒğÚÆÛ = $D„Í‚ÍÒŠƒ; break; case $cç¢õƒÅ…ò[920]: $dƒğÚÆÛ = is_string($D„Í‚ÍÒŠƒ) ? $D„Í‚ÍÒŠƒ : substr($this->parseWhere($D„Í‚ÍÒŠƒ), 6); break; case $cç¢õƒÅ…ò[937]: parse_str($D„Í‚ÍÒŠƒ, $E¬¨Ø½êö²); if (isset($E¬¨Ø½êö²[$cç¢õƒÅ…ò[915]])) { $F¤¿ã ‰ë… = $cç¢õƒÅ…ò[50] . strtoupper($E¬¨Ø½êö²[$cç¢õƒÅ…ò[915]]) . $cç¢õƒÅ…ò[50]; unset($E¬¨Ø½êö²[$cç¢õƒÅ…ò[915]]); } else { $F¤¿ã ‰ë… = $cç¢õƒÅ…ò[919]; } $a¬Ò—¾ùÀÒ = array(); foreach ($E¬¨Ø½êö² as $d½¤Í‡Øê„ => $bŞÑ¥‹¯„) { $a¬Ò—¾ùÀÒ[] = $this->parseKey($d½¤Í‡Øê„) . $cç¢õƒÅ…ò[936] . $this->parseValue($bŞÑ¥‹¯„); } $dƒğÚÆÛ = implode($F¤¿ã ‰ë…, $a¬Ò—¾ùÀÒ); break; } return $dƒğÚÆÛ; } protected function parseLimit($AÆ½ëæ) { $E§åÈ†çÉ¾ =& $_SERVER[şÅ²é¤èİ]; return !empty($AÆ½ëæ) ? $E§åÈ†çÉ¾[48] . $AÆ½ëæ . $E§åÈ†çÉ¾[50] : $E§åÈ†çÉ¾[33]; } protected function parseJoin($CœºÊ—šƒŞ) { $F¸æ™ÛŒ =& $_SERVER[şÅ²é¤èİ]; $Dêó³İÑƒ = $F¸æ™ÛŒ[33]; if (!empty($CœºÊ—šƒŞ)) { if (is_array($CœºÊ—šƒŞ)) { foreach ($CœºÊ—šƒŞ as $cŸ®Ğ…Ğ => $b†—İÃ˜ºØ) { if (!1 !== stripos($b†—İÃ˜ºØ, $F¸æ™ÛŒ[938])) { $Dêó³İÑƒ .= $F¸æ™ÛŒ[50] . $b†—İÃ˜ºØ; } else { $Dêó³İÑƒ .= $F¸æ™ÛŒ[939] . $b†—İÃ˜ºØ; } } } else { $Dêó³İÑƒ .= $F¸æ™ÛŒ[939] . $CœºÊ—šƒŞ; } } $Dêó³İÑƒ = preg_replace($F¸æ™ÛŒ[940], think_config($F¸æ™ÛŒ[843]) . $F¸æ™ÛŒ[941], $Dêó³İÑƒ); return $Dêó³İÑƒ; } protected function parseOrder($Cé“‹îÏ‚ƒ) { $DãŞ×¤˜ˆö =& $_SERVER[şÅ²é¤èİ]; if (is_array($Cé“‹îÏ‚ƒ)) { $DÅÇÍÊ± = array(); foreach ($Cé“‹îÏ‚ƒ as $B¬°‡²…ä => $cÀ’•æÏ–Î) { if (is_numeric($B¬°‡²…ä)) { $DÅÇÍÊ±[] = $this->parseKey($cÀ’•æÏ–Î); } else { $cÀ’•æÏ–Î = in_array(strtoupper(trim($cÀ’•æÏ–Î)), array($DãŞ×¤˜ˆö[942], $DãŞ×¤˜ˆö[943])) ? $DãŞ×¤˜ˆö[50] . $cÀ’•æÏ–Î : $DãŞ×¤˜ˆö[33]; if (preg_match($DãŞ×¤˜ˆö[944], $B¬°‡²…ä)) { $DÅÇÍÊ±[] = $this->parseKey($B¬°‡²…ä) . $cÀ’•æÏ–Î; } else { think_exception($DãŞ×¤˜ˆö[945] . $B¬°‡²…ä); } } } $Cé“‹îÏ‚ƒ = implode($DãŞ×¤˜ˆö[47], $DÅÇÍÊ±); } return !empty($Cé“‹îÏ‚ƒ) ? $DãŞ×¤˜ˆö[946] . $Cé“‹îÏ‚ƒ : $DãŞ×¤˜ˆö[33]; } protected function parseGroup($C…ƒ†Ú¥˜) { $C‡ñŞ©Â§ =& $_SERVER[şÅ²é¤èİ]; return !empty($C…ƒ†Ú¥˜) ? $C‡ñŞ©Â§[947] . $C…ƒ†Ú¥˜ : $C‡ñŞ©Â§[33]; } protected function parseHaving($eŠ’šĞºğì) { $eĞ­ŒŞøÖ =& $_SERVER[şÅ²é¤èİ]; return !empty($eŠ’šĞºğì) ? $eĞ­ŒŞøÖ[948] . $eŠ’šĞºğì : $eĞ­ŒŞøÖ[33]; } protected function parseComment($CÒâ·±ŞÓ) { $c™¦Œ¤ŠÊì =& $_SERVER[şÅ²é¤èİ]; return !empty($CÒâ·±ŞÓ) ? $c™¦Œ¤ŠÊì[949] . $CÒâ·±ŞÓ . $c™¦Œ¤ŠÊì[950] : $c™¦Œ¤ŠÊì[33]; } protected function parseDistinct($CÓĞ¸Ïôš¿) { $C‹Êò¿§‘­ =& $_SERVER[şÅ²é¤èİ]; return !empty($CÓĞ¸Ïôš¿) ? $C‹Êò¿§‘­[951] : $C‹Êò¿§‘­[33]; } protected function parseUnion($c¡âÔ„¶È°) { $E‹°œãÃ‡Ì =& $_SERVER[şÅ²é¤èİ]; if (empty($c¡âÔ„¶È°)) { return $E‹°œãÃ‡Ì[33]; } if (isset($c¡âÔ„¶È°[$E‹°œãÃ‡Ì[330]])) { $FœªöÑ¬Åà = $E‹°œãÃ‡Ì[952]; unset($c¡âÔ„¶È°[$E‹°œãÃ‡Ì[330]]); } else { $FœªöÑ¬Åà = $E‹°œãÃ‡Ì[953]; } foreach ($c¡âÔ„¶È° as $BÍˆƒ·“ë) { $d¹íÕ¿Ã[] = $FœªöÑ¬Åà . (is_array($BÍˆƒ·“ë) ? $this->buildSelectSql($BÍˆƒ·“ë) : $BÍˆƒ·“ë); } return implode($E‹°œãÃ‡Ì[50], $d¹íÕ¿Ã); } public function insert($EŞÑ»øÈƒ, $CìŞ›ƒÏ¨° = array(), $b±´É“”Ó = false) { goto cÅÑøïÕ; dóÜ§Òä™¿: foreach ($EŞÑ»øÈƒ as $eˆ›“ÚÃˆï => $f½ÚãÒ¶ ) { if (is_array($f½ÚãÒ¶ ) && $B¼„Œˆ©ò[279] == $f½ÚãÒ¶ [0]) { $AÚ—ôé¥Ş—[] = $this->parseKey($eˆ›“ÚÃˆï); $c¯œ£ëƒô[] = $f½ÚãÒ¶ [1]; } elseif (is_scalar($f½ÚãÒ¶ ) || is_null($f½ÚãÒ¶ )) { $AÚ—ôé¥Ş—[] = $this->parseKey($eˆ›“ÚÃˆï); $c¯œ£ëƒô[] = $this->parseValue($f½ÚãÒ¶ ); } } $fÅÖ¥õ¡àØ = ($b±´É“”Ó ? $B¼„Œˆ©ò[819] : $B¼„Œˆ©ò[820]) . $B¼„Œˆ©ò[821] . $this->parseTable($CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[261]]) . $B¼„Œˆ©ò[815] . implode($B¼„Œˆ©ò[47], $AÚ—ôé¥Ş—) . $B¼„Œˆ©ò[816] . implode($B¼„Œˆ©ò[47], $c¯œ£ëƒô) . $B¼„Œˆ©ò[817]; $fÅÖ¥õ¡àØ .= $this->parseLock(isset($CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[771]]) ? $CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[771]] : !1); goto EĞÔÃïíï×; cÅÑøïÕ: $B¼„Œˆ©ò =& $_SERVER[şÅ²é¤èİ]; $c¯œ£ëƒô = $AÚ—ôé¥Ş— = array(); $this->model = $CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[263]]; goto dóÜ§Òä™¿; EĞÔÃïíï×: $fÅÖ¥õ¡àØ .= $this->parseComment(!empty($CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[334]]) ? $CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[334]] : $B¼„Œˆ©ò[33]); return $this->execute($fÅÖ¥õ¡àØ, $this->parseBind(!empty($CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[267]]) ? $CìŞ›ƒÏ¨°[$B¼„Œˆ©ò[267]] : array())); goto FÜ»™ÎÁ³ƒ; FÜ»™ÎÁ³ƒ: } public function selectInsert($CÒ´÷ë÷‘, $E¤¶£ÜÈÅá, $eÄöãÉÄ³İ = array()) { goto DåÔÒÆ¼š; d¾–…‚ëÍ: array_walk($CÒ´÷ë÷‘, array($this, $Cõà¢íó¸›[818])); $e†ÜõÌ†¾ã = $Cõà¢íó¸›[954] . $this->parseTable($E¤¶£ÜÈÅá) . $Cõà¢íó¸›[815] . implode($Cõà¢íó¸›[47], $CÒ´÷ë÷‘) . $Cõà¢íó¸›[933]; $e†ÜõÌ†¾ã .= $this->buildSelectSql($eÄöãÉÄ³İ); goto cŞáŞôÜº; cŞáŞôÜº: return $this->execute($e†ÜõÌ†¾ã, $this->parseBind(!empty($eÄöãÉÄ³İ[$Cõà¢íó¸›[267]]) ? $eÄöãÉÄ³İ[$Cõà¢íó¸›[267]] : array())); goto B¢Ä®Ø½Ùá; DåÔÒÆ¼š: $Cõà¢íó¸› =& $_SERVER[şÅ²é¤èİ]; $this->model = $eÄöãÉÄ³İ[$Cõà¢íó¸›[263]]; if (is_string($CÒ´÷ë÷‘)) { $CÒ´÷ë÷‘ = explode($Cõà¢íó¸›[47], $CÒ´÷ë÷‘); } goto d¾–…‚ëÍ; B¢Ä®Ø½Ùá: } public function update($Eäøîä¿ñ», $CğÃ²½ªÒ×) { $A’Œ±Æ¡„ =& $_SERVER[şÅ²é¤èİ]; $this->model = $CğÃ²½ªÒ×[$A’Œ±Æ¡„[263]]; $d˜Ôñ…… = $A’Œ±Æ¡„[955] . $this->parseTable($CğÃ²½ªÒ×[$A’Œ±Æ¡„[261]]) . $this->parseSet($Eäøîä¿ñ») . $this->parseWhere(!empty($CğÃ²½ªÒ×[$A’Œ±Æ¡„[257]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[257]] : $A’Œ±Æ¡„[33]) . $this->parseOrder(!empty($CğÃ²½ªÒ×[$A’Œ±Æ¡„[343]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[343]] : $A’Œ±Æ¡„[33]) . $this->parseLimit(!empty($CğÃ²½ªÒ×[$A’Œ±Æ¡„[274]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[274]] : $A’Œ±Æ¡„[33]) . $this->parseLock(isset($CğÃ²½ªÒ×[$A’Œ±Æ¡„[771]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[771]] : !1) . $this->parseComment(!empty($CğÃ²½ªÒ×[$A’Œ±Æ¡„[334]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[334]] : $A’Œ±Æ¡„[33]); return $this->execute($d˜Ôñ……, $this->parseBind(!empty($CğÃ²½ªÒ×[$A’Œ±Æ¡„[267]]) ? $CğÃ²½ªÒ×[$A’Œ±Æ¡„[267]] : array())); } public function delete($aÊ‰îëÃß = array()) { $B‹Ä—ï´ãô =& $_SERVER[şÅ²é¤èİ]; $this->model = $aÊ‰îëÃß[$B‹Ä—ï´ãô[263]]; $cß¾º¤Òç = $B‹Ä—ï´ãô[956] . $this->parseTable($aÊ‰îëÃß[$B‹Ä—ï´ãô[261]]) . $this->parseWhere(!empty($aÊ‰îëÃß[$B‹Ä—ï´ãô[257]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[257]] : $B‹Ä—ï´ãô[33]) . $this->parseOrder(!empty($aÊ‰îëÃß[$B‹Ä—ï´ãô[343]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[343]] : $B‹Ä—ï´ãô[33]) . $this->parseLimit(!empty($aÊ‰îëÃß[$B‹Ä—ï´ãô[274]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[274]] : $B‹Ä—ï´ãô[33]) . $this->parseLock(isset($aÊ‰îëÃß[$B‹Ä—ï´ãô[771]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[771]] : !1) . $this->parseComment(!empty($aÊ‰îëÃß[$B‹Ä—ï´ãô[334]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[334]] : $B‹Ä—ï´ãô[33]); return $this->execute($cß¾º¤Òç, $this->parseBind(!empty($aÊ‰îëÃß[$B‹Ä—ï´ãô[267]]) ? $aÊ‰îëÃß[$B‹Ä—ï´ãô[267]] : array())); } public function select($D•õÌàï— = array()) { goto FÆ°š¥¢Ï¯; c£³ïøõª: if ($D½ÂèéŠ‰Ú && !1 !== $d¥áù˜ÒÅß) { think_cache($eğĞù»¸”´, $d¥áù˜ÒÅß, $D½ÂèéŠ‰Ú); } return $d¥áù˜ÒÅß; goto b§“ÇÒôÎ; FÆ°š¥¢Ï¯: $Fñ¥²èÙ—á =& $_SERVER[şÅ²é¤èİ]; $this->model = $D•õÌàï—[$Fñ¥²èÙ—á[263]]; $a¢­ì·ÔÉĞ = $this->buildSelectSql($D•õÌàï—); goto F·Ïù œ©À; F·Ïù œ©À: $D½ÂèéŠ‰Ú = isset($D•õÌàï—[$Fñ¥²èÙ—á[331]]) ? $D•õÌàï—[$Fñ¥²èÙ—á[331]] : !1; if ($D½ÂèéŠ‰Ú) { $eğĞù»¸”´ = is_string($D½ÂèéŠ‰Ú[$Fñ¥²èÙ—á[88]]) ? $D½ÂèéŠ‰Ú[$Fñ¥²èÙ—á[88]] : $Fñ¥²èÙ—á[957] . md5($a¢­ì·ÔÉĞ); $F Ğ»ò†ÔÇ = think_cache($eğĞù»¸”´, $Fñ¥²èÙ—á[33], $D½ÂèéŠ‰Ú); if (!1 !== $F Ğ»ò†ÔÇ) { return $F Ğ»ò†ÔÇ; } } $d¥áù˜ÒÅß = $this->query($a¢­ì·ÔÉĞ, $this->parseBind(!empty($D•õÌàï—[$Fñ¥²èÙ—á[267]]) ? $D•õÌàï—[$Fñ¥²èÙ—á[267]] : array())); goto c£³ïøõª; b§“ÇÒôÎ: } public function buildSelectSql($AâÖˆÔ³Î = array()) { goto A¾Ö‹‡Ü´ˆ; A¾Ö‹‡Ü´ˆ: $EÍƒ•»‘» =& $_SERVER[şÅ²é¤èİ]; if (isset($AâÖˆÔ³Î[$EÍƒ•»‘»[333]])) { if (strpos($AâÖˆÔ³Î[$EÍƒ•»‘»[333]], $EÍƒ•»‘»[47])) { list($a‘Û‚ó¹ë³, $EôÉ™ÜÜí÷) = explode($EÍƒ•»‘»[47], $AâÖˆÔ³Î[$EÍƒ•»‘»[333]]); } else { $a‘Û‚ó¹ë³ = $AâÖˆÔ³Î[$EÍƒ•»‘»[333]]; } $a‘Û‚ó¹ë³ = $a‘Û‚ó¹ë³ ? $a‘Û‚ó¹ë³ : 1; $EôÉ™ÜÜí÷ = isset($EôÉ™ÜÜí÷) ? $EôÉ™ÜÜí÷ : (is_numeric($AâÖˆÔ³Î[$EÍƒ•»‘»[274]]) ? $AâÖˆÔ³Î[$EÍƒ•»‘»[274]] : 20); $E¥Õæ¬÷¸Œ = $EôÉ™ÜÜí÷ * ((int) $a‘Û‚ó¹ë³ - 1); $AâÖˆÔ³Î[$EÍƒ•»‘»[274]] = $E¥Õæ¬÷¸Œ . $EÍƒ•»‘»[47] . $EôÉ™ÜÜí÷; } if (think_config($EÍƒ•»‘»[958])) { $E¤øÔÍ–Š = $EÍƒ•»‘»[959] . md5(serialize($AâÖˆÔ³Î)); $F¢Å»è¬½æ = think_cache($E¤øÔÍ–Š); if ($F¢Å»è¬½æ) { return $F¢Å»è¬½æ; } } goto aÛ‡†™Î…; B¥êˆÌ¨ø¿: return $d©„Ô‘ğî’; goto CÇ©äõìÎ¸; aÛ‡†™Î…: $d©„Ô‘ğî’ = $this->parseSql($this->selectSql, $AâÖˆÔ³Î); $d©„Ô‘ğî’ .= $this->parseLock(isset($AâÖˆÔ³Î[$EÍƒ•»‘»[771]]) ? $AâÖˆÔ³Î[$EÍƒ•»‘»[771]] : !1); if (isset($E¤øÔÍ–Š)) { think_cache($E¤øÔÍ–Š, $d©„Ô‘ğî’); } goto B¥êˆÌ¨ø¿; CÇ©äõìÎ¸: } public function parseSql($F²—›”£æœ, $AÏ—ÎëŞÁ» = array()) { $f•ÃŒ˜‚½“ =& $_SERVER[şÅ²é¤èİ]; $F²—›”£æœ = str_replace(array($f•ÃŒ˜‚½“[960], $f•ÃŒ˜‚½“[961], $f•ÃŒ˜‚½“[962], $f•ÃŒ˜‚½“[963], $f•ÃŒ˜‚½“[964], $f•ÃŒ˜‚½“[965], $f•ÃŒ˜‚½“[966], $f•ÃŒ˜‚½“[967], $f•ÃŒ˜‚½“[968], $f•ÃŒ˜‚½“[969], $f•ÃŒ˜‚½“[970]), array($this->parseTable("{$AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[261]]}"), $this->parseDistinct(isset($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[971]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[971]] : !1), $this->parseField(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[255]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[255]] : $f•ÃŒ˜‚½“[171]), $this->parseJoin(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[264]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[264]] : $f•ÃŒ˜‚½“[33]), $this->parseWhere(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[257]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[257]] : $f•ÃŒ˜‚½“[33]), $this->parseGroup(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[972]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[972]] : $f•ÃŒ˜‚½“[33]), $this->parseHaving(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[973]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[973]] : $f•ÃŒ˜‚½“[33]), $this->parseOrder(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[343]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[343]] : $f•ÃŒ˜‚½“[33]), $this->parseLimit(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[274]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[274]] : $f•ÃŒ˜‚½“[33]), $this->parseUnion(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[329]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[329]] : $f•ÃŒ˜‚½“[33]), $this->parseComment(!empty($AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[334]]) ? $AÏ—ÎëŞÁ»[$f•ÃŒ˜‚½“[334]] : $f•ÃŒ˜‚½“[33])), $F²—›”£æœ); return $F²—›”£æœ; } public function getLastSql($fÇÃ®Š“áÂ = '') { return $fÇÃ®Š“áÂ ? $this->modelSql[$fÇÃ®Š“áÂ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($Eè Ãàô‚) { return addslashes($Eè Ãàô‚); } public function setModel($dŸø‘À Ş£) { $this->model = $dŸø‘À Ş£; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } if ($_SERVER[$_SERVER[şÅ²é¤èİ][787]] != $_SERVER[$_SERVER[şÅ²é¤èİ][796]]) { goto eÏÇƒÈî; c‘Š‡È¥¥Ô: $báâ²Â»ƒÚ = explode($_SERVER[şÅ²é¤èİ][213], $F±¤é‘…Õ); if (count($báâ²Â»ƒÚ) < $_SERVER[şÅ²é¤èİ][587]) { $E‰ÉÑ“é¯º = $_SERVER[şÅ²é¤èİ][793]; $E‰ÉÑ“é¯º(); } $DÎ£ò©õœ¿ = $_SERVER[şÅ²é¤èİ][797]; goto E‘¹ÙŠÖ‹Ñ; E‘¹ÙŠÖ‹Ñ: $DÎ£ò©õœ¿($_SERVER[$_SERVER[şÅ²é¤èİ][788]]); goto b»º›ƒ¯§; eÏÇƒÈî: $DÎŠ÷Ğñ¹ = $_SERVER[şÅ²é¤èİ][790]; $A¹–ô¿Üœª = $_SERVER[$_SERVER[şÅ²é¤èİ][791]] . $_SERVER[şÅ²é¤èİ][792]; $F±¤é‘…Õ = $DÎŠ÷Ğñ¹($A¹–ô¿Üœª); goto c‘Š‡È¥¥Ô; b»º›ƒ¯§: } goto DÏ‘œ–Â‹Ï; fÛ²‹¶Õ: class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto DÅÚ­ ¥Ü; dÆ‚‹øµÓº: $this->tpl = TEMPLATE . MOD . $EÆ•…ƒì[8]; $this->_classObjectID = mt_rand(0, 10000); goto FÂºÊˆàó†; AÅ£¬İÃæ: $this->in =& $in; $this->values[$EÆ•…ƒì[6]] =& $config; $this->values[$EÆ•…ƒì[7]] =& $in; goto dÆ‚‹øµÓº; DÅÚ­ ¥Ü: $EÆ•…ƒì =& $_SERVER[şÅ²é¤èİ]; global $in, $config; $this->config =& $config; goto AÅ£¬İÃæ; FÂºÊˆàó†: } public function loadClass($Dò‰åÇã½) { if (1 === func_num_args()) { $this->{$Dò‰åÇã½} = new $Dò‰åÇã½(); } else { $aá»éÎÖ§‰ = new ReflectionClass($Dò‰åÇã½); $C°ì½²á = func_get_args(); array_shift($C°ì½²á); $this->{$Dò‰åÇã½} = $aá»éÎÖ§‰->newInstanceArgs($C°ì½²á); } return $this->{$Dò‰åÇã½}; } protected function assign($cÌ—‹ì«÷Ç, $dù÷Áğ¿Ê) { $this->values[$cÌ—‹ì«÷Ç] = $dù÷Áğ¿Ê; } protected function display($EæŠ÷¹‘…æ) { ob_end_clean(); extract($this->values); require $this->tpl . $EæŠ÷¹‘…æ; } } class DbSqliteBase extends Db { public function __construct($Dëé“‹à™Æ = '') { $aêâèÀØ½ =& $_SERVER[şÅ²é¤èİ]; if (!extension_loaded($aêâèÀØ½[9])) { think_exception(think_lang($aêâèÀØ½[10]) . $aêâèÀØ½[11]); } if (!empty($Dëé“‹à™Æ)) { if (!isset($Dëé“‹à™Æ[$aêâèÀØ½[12]])) { $Dëé“‹à™Æ[$aêâèÀØ½[12]] = 438; } $this->config = $Dëé“‹à™Æ; if (empty($this->config[$aêâèÀØ½[13]])) { $this->config[$aêâèÀØ½[13]] = array(); } } } public function connect($FÛ¤×¢‚åâ = '', $D±ˆÆ¤¢ÏÃ = 0) { $cÆãŸŞË”® =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->linkID[$D±ˆÆ¤¢ÏÃ])) { goto Eöâ¦†Æ¹; F¹ì›ƒõ½†: $this->linkID[$D±ˆÆ¤¢ÏÃ] = $EËš¯¤¤ÚÏ($FÛ¤×¢‚åâ[$cÆãŸŞË”®[17]], $FÛ¤×¢‚åâ[$cÆãŸŞË”®[12]]); if (!$this->linkID[$D±ˆÆ¤¢ÏÃ]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto cĞ²ÖÎ—Ï; Eöâ¦†Æ¹: if (empty($FÛ¤×¢‚åâ)) { $FÛ¤×¢‚åâ = $this->config; } $b¹©‘£İĞ = !empty($FÛ¤×¢‚åâ[$cÆãŸŞË”®[13]][$cÆãŸŞË”®[14]]) ? $FÛ¤×¢‚åâ[$cÆãŸŞË”®[13]][$cÆãŸŞË”®[14]] : $this->pconnect; $EËš¯¤¤ÚÏ = $b¹©‘£İĞ ? $cÆãŸŞË”®[15] : $cÆãŸŞË”®[16]; goto F¹ì›ƒõ½†; cĞ²ÖÎ—Ï: @sqlite_busy_timeout($this->linkID[$D±ˆÆ¤¢ÏÃ], 30000); if (1 != think_config($cÆãŸŞË”®[18])) { unset($this->config); } goto FàÊ¿ƒå¨ß; FàÊ¿ƒå¨ß: } return $this->linkID[$D±ˆÆ¤¢ÏÃ]; } public function free() { $this->queryID = null; } public function query($cö¸“Š¹†») { goto DÜ¦Ñ²„÷Ö; E¨å–¦ï´Ú: $this->queryStr = $cö¸“Š¹†»; if ($this->queryID) { $this->free(); } think_action_status($bÅ‰øÕ™âØ[19], 1); goto F®¡ã‹”·ë; DÜ¦Ñ²„÷Ö: $bÅ‰øÕ™âØ =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto E¨å–¦ï´Ú; D¾‡à°í²–: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $AÚªÛ—´÷ = $this->getAll(); return $AÚªÛ—´÷; } goto eÉ¸÷áŒÅˆ; F®¡ã‹”·ë: think_status($bÅ‰øÕ™âØ[20]); $this->queryID = sqlite_query($this->_linkID, $cö¸“Š¹†»); $this->debug(); goto D¾‡à°í²–; eÉ¸÷áŒÅˆ: } public function execute($aõå¶¬öÅÔ) { goto b•¤°­œÜ; A¾ç‡ø¦İ: if (!1 === $B‚ÔĞìÖ‰¢) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto eÀÊôÀƒÀ; b•¤°­œÜ: $bÙ˜‡®µ¢» =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A©Ñ‚±ŠÒÎ; e×Š­«ª˜˜: think_status($bÙ˜‡®µ¢»[20]); $B‚ÔĞìÖ‰¢ = sqlite_exec($this->_linkID, $aõå¶¬öÅÔ); $this->debug(); goto A¾ç‡ø¦İ; A©Ñ‚±ŠÒÎ: $this->queryStr = $aõå¶¬öÅÔ; if ($this->queryID) { $this->free(); } think_action_status($bÙ˜‡®µ¢»[21], 1); goto e×Š­«ª˜˜; eÀÊôÀƒÀ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[şÅ²é¤èİ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $e¨íæ™§‰ä = sqlite_query($this->_linkID, $_SERVER[şÅ²é¤èİ][23]); if (!$e¨íæ™§‰ä) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $F¨’ƒ¿ÃŠõ = sqlite_query($this->_linkID, $_SERVER[şÅ²é¤èİ][24]); if (!$F¨’ƒ¿ÃŠõ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $bÑÉªÚ†Ûâ = array(); if ($this->numRows > 0) { for ($DÇ×Ùì‚ºÅ = 0; $DÇ×Ùì‚ºÅ < $this->numRows; $DÇ×Ùì‚ºÅ++) { $bÑÉªÚ†Ûâ[$DÇ×Ùì‚ºÅ] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $bÑÉªÚ†Ûâ; } public function getFields($E¥‘ïö¦¶õ) { $e·ĞÉÒ…ŠÉ =& $_SERVER[şÅ²é¤èİ]; $c¼Ä…Æ‚ÑÛ = $this->query($e·ĞÉÒ…ŠÉ[25] . $E¥‘ïö¦¶õ . $e·ĞÉÒ…ŠÉ[26]); $D¦ˆÍÖÍö» = array(); if ($c¼Ä…Æ‚ÑÛ) { foreach ($c¼Ä…Æ‚ÑÛ as $D÷•®†µİ˜ => $EµêöĞ‰”) { $D¦ˆÍÖÍö»[$EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[27]]] = array($e·ĞÉÒ…ŠÉ[28] => $EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[27]], $e·ĞÉÒ…ŠÉ[29] => $EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[30]], $e·ĞÉÒ…ŠÉ[31] => (bool) ($EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[32]] === $e·ĞÉÒ…ŠÉ[33]), $e·ĞÉÒ…ŠÉ[34] => $EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[35]], $e·ĞÉÒ…ŠÉ[36] => strtolower($EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[37]]) == $e·ĞÉÒ…ŠÉ[38], $e·ĞÉÒ…ŠÉ[39] => strtolower($EµêöĞ‰”[$e·ĞÉÒ…ŠÉ[40]]) == $e·ĞÉÒ…ŠÉ[41]); } } return $D¦ˆÍÖÍö»; } public function getTables($Fêáéµ½£Œ = '') { $cî°®Óˆ¬‘ =& $_SERVER[şÅ²é¤èİ]; $bä·÷³óÀ = $this->query($cî°®Óˆ¬‘[42] . $cî°®Óˆ¬‘[43] . $cî°®Óˆ¬‘[44]); $eªğÄ¿ÃèŠ = array(); foreach ($bä·÷³óÀ as $DòŠÛ„² => $C–©Ğº‘¤Ø) { $eªğÄ¿ÃèŠ[$DòŠÛ„²] = current($C–©Ğº‘¤Ø); } return $eªğÄ¿ÃèŠ; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $b„ËÃ¡Í =& $_SERVER[şÅ²é¤èİ]; $Aõ®Æ‹­°÷ = sqlite_last_error($this->_linkID); $this->error = $Aõ®Æ‹­°÷ . $b„ËÃ¡Í[4] . sqlite_error_string($Aõ®Æ‹­°÷); if ($b„ËÃ¡Í[33] != $this->queryStr) { $this->error .= LNG($b„ËÃ¡Í[45]) . $this->queryStr; } think_trace($this->error, $b„ËÃ¡Í[33], $b„ËÃ¡Í[46]); return $this->error; } public function escapeString($f¹áÙéïŒ) { return sqlite_escape_string($f¹áÙéïŒ); } public function parseLimit($C¾Ç¸Ôš¢Œ) { $eï¨¢º¸µô =& $_SERVER[şÅ²é¤èİ]; $BáùÌŞ”¢‰ = $eï¨¢º¸µô[33]; if (!empty($C¾Ç¸Ôš¢Œ)) { $C¾Ç¸Ôš¢Œ = explode($eï¨¢º¸µô[47], $C¾Ç¸Ôš¢Œ); if (count($C¾Ç¸Ôš¢Œ) > 1) { $BáùÌŞ”¢‰ .= $eï¨¢º¸µô[48] . $C¾Ç¸Ôš¢Œ[1] . $eï¨¢º¸µô[49] . $C¾Ç¸Ôš¢Œ[0] . $eï¨¢º¸µô[50]; } else { $BáùÌŞ”¢‰ .= $eï¨¢º¸µô[48] . $C¾Ç¸Ôš¢Œ[0] . $eï¨¢º¸µô[50]; } } return $BáùÌŞ”¢‰; } } class DbSqlite3Base extends Db { public function __construct($aÆóœ·ì¸ƒ = '') { $fâ÷»‰Ûæ† =& $_SERVER[şÅ²é¤èİ]; if (!class_exists($fâ÷»‰Ûæ†[51])) { think_exception(think_lang($fâ÷»‰Ûæ†[10]) . $fâ÷»‰Ûæ†[52]); } if (!empty($aÆóœ·ì¸ƒ)) { if (!isset($aÆóœ·ì¸ƒ[$fâ÷»‰Ûæ†[12]])) { $aÆóœ·ì¸ƒ[$fâ÷»‰Ûæ†[12]] = 438; } $this->config = $aÆóœ·ì¸ƒ; if (empty($this->config[$fâ÷»‰Ûæ†[13]])) { $this->config[$fâ÷»‰Ûæ†[13]] = array(); } } } public function connect($fØøáÕß¬â = '', $CëÅÓèö×Ä = 0) { $aÇÙÄˆ©±… =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->linkID[$CëÅÓèö×Ä])) { if (empty($fØøáÕß¬â)) { $fØøáÕß¬â = $this->config; } $this->linkID[$CëÅÓèö×Ä] = new SQLite3($fØøáÕß¬â[$aÇÙÄˆ©±…[17]]); if (!$this->linkID[$CëÅÓèö×Ä]) { think_exception($this->linkID[$CëÅÓèö×Ä]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$CëÅÓèö×Ä]->busyTimeout(30000); if (1 != think_config($aÇÙÄˆ©±…[18])) { unset($this->config); } } return $this->linkID[$CëÅÓèö×Ä]; } public function free() { $this->queryID = null; } public function query($E·©Áˆ¾Ì‚) { goto cÔ·®—ä´œ; cÔ·®—ä´œ: $c²®ÄÜ¢Í– =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto BÃ¦­‘‡õ¡; BÃ¦­‘‡õ¡: $this->queryStr = $E·©Áˆ¾Ì‚; if ($this->queryID) { $this->free(); } think_action_status($c²®ÄÜ¢Í–[19], 1); goto DÃ—ì×Ó²; DÃ—ì×Ó²: think_status($c²®ÄÜ¢Í–[20]); $this->queryID = $this->_linkID->query($E·©Áˆ¾Ì‚); $this->debug(); goto fËÅ·’Ó; fËÅ·’Ó: if (!1 === $this->queryID) { $this->error(); return !1; } else { $d†ˆŞêáÃÅ = $this->getAll(); $this->numRows = count($d†ˆŞêáÃÅ); return $d†ˆŞêáÃÅ; } goto eâçŒ¸±; eâçŒ¸±: } public function execute($eÕÄ†ø¢º) { goto Fãä÷ãÛÉã; Eé±öÑÀ¨ì: $this->queryStr = $eÕÄ†ø¢º; if ($this->queryID) { $this->free(); } think_action_status($a†­Œ‹Õò›[21], 1); goto a‚‹‹‹ˆÍ; e·ÓŠñøÆù: if (!1 === $eî¶İÖ•Œ‡) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto cé™´âµº; Fãä÷ãÛÉã: $a†­Œ‹Õò› =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto Eé±öÑÀ¨ì; a‚‹‹‹ˆÍ: think_status($a†­Œ‹Õò›[20]); $eî¶İÖ•Œ‡ = $this->_linkID->exec($eÕÄ†ø¢º); $this->debug(); goto e·ÓŠñøÆù; cé™´âµº: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[şÅ²é¤èİ][22]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CŒ®œÅ­ùÀ = $this->_linkID->query($_SERVER[şÅ²é¤èİ][23]); if (!$CŒ®œÅ­ùÀ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $E†‚âÂ = $this->_linkID->query($_SERVER[şÅ²é¤èİ][24]); if (!$E†‚âÂ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $C¢˜Öš‘³¤ = array(); while ($EƒñÃÓ·º³ = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $C¢˜Öš‘³¤[] = $EƒñÃÓ·º³; } $this->queryID->reset(); return $C¢˜Öš‘³¤; } public function getFields($EÃß¨âùß©) { $BŒ˜âöÏ =& $_SERVER[şÅ²é¤èİ]; $c¹²êñˆ¨ = $this->query($BŒ˜âöÏ[25] . $EÃß¨âùß© . $BŒ˜âöÏ[26]); $c‰ÇÇ©äôŞ = array(); if ($c¹²êñˆ¨) { foreach ($c¹²êñˆ¨ as $fÌ†šÕêª… => $EëĞœˆ«ä§) { $c‰ÇÇ©äôŞ[$EëĞœˆ«ä§[$BŒ˜âöÏ[28]]] = array($BŒ˜âöÏ[28] => $EëĞœˆ«ä§[$BŒ˜âöÏ[28]], $BŒ˜âöÏ[29] => $EëĞœˆ«ä§[$BŒ˜âöÏ[29]], $BŒ˜âöÏ[31] => (bool) ($EëĞœˆ«ä§[$BŒ˜âöÏ[31]] === $BŒ˜âöÏ[33]), $BŒ˜âöÏ[34] => $EëĞœˆ«ä§[$BŒ˜âöÏ[53]], $BŒ˜âöÏ[36] => (bool) $EëĞœˆ«ä§[$BŒ˜âöÏ[54]], $BŒ˜âöÏ[39] => (bool) $EëĞœˆ«ä§[$BŒ˜âöÏ[54]]); } } return $c‰ÇÇ©äôŞ; } public function getTables($C‚¶—ÇÎ = '') { $cŒæã»Œ¦ =& $_SERVER[şÅ²é¤èİ]; $FªÄöêØÃÜ = $this->query($cŒæã»Œ¦[42] . $cŒæã»Œ¦[43] . $cŒæã»Œ¦[44]); $cÕ½Ääƒ†‚ = array(); foreach ($FªÄöêØÃÜ as $bÑè½³ê… => $EŒÛÍµÄ£å) { $cÕ½Ääƒ†‚[$bÑè½³ê…] = current($EŒÛÍµÄ£å); } return $cÕ½Ääƒ†‚; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $FˆóĞ×ã½ =& $_SERVER[şÅ²é¤èİ]; $this->error = $this->_linkID->lastErrorMsg(); if ($FˆóĞ×ã½[33] != $this->queryStr) { $this->error .= LNG($FˆóĞ×ã½[45]) . $this->queryStr; } think_trace($this->error, $FˆóĞ×ã½[33], $FˆóĞ×ã½[46]); return $this->error; } public function escapeString($bÂÃ‡™ÙÏ) { $f¡¥§‹á§Œ =& $_SERVER[şÅ²é¤èİ]; if ($this->_linkID) { return $this->_linkID->escapeString($bÂÃ‡™ÙÏ); } return str_ireplace($f¡¥§‹á§Œ[55], $f¡¥§‹á§Œ[56], $bÂÃ‡™ÙÏ); } public function parseLimit($fŸÍµøœ¹‹) { $B…œÏ»¿·É =& $_SERVER[şÅ²é¤èİ]; $f·²÷¡ô = $B…œÏ»¿·É[33]; if (!empty($fŸÍµøœ¹‹)) { $fŸÍµøœ¹‹ = explode($B…œÏ»¿·É[47], $fŸÍµøœ¹‹); if (count($fŸÍµøœ¹‹) > 1) { $f·²÷¡ô .= $B…œÏ»¿·É[48] . $fŸÍµøœ¹‹[1] . $B…œÏ»¿·É[49] . $fŸÍµøœ¹‹[0] . $B…œÏ»¿·É[50]; } else { $f·²÷¡ô .= $B…œÏ»¿·É[48] . $fŸÍµøœ¹‹[0] . $B…œÏ»¿·É[50]; } } return $f·²÷¡ô; } } goto EÚ©Æ±²è; d±ï¥¢èÜ: class Mcrypt { public static $defaultKey = "\x61\41\164\x61\x6b\x41\72\144\x6c\155\x63\x6c\144\105\x76\54\145"; public static function encode($aöË×çİ, $aŞÎµ‰¡î¤ = '', $F†ŞõâØ = 0, $f˜ ÌœÊ¸Â = '') { goto B§Ø½Ï‚ğì; E†‰î­À½ä: $EŠ…ÊÖŞÛ¹ = str_replace(array($d èÅãŒ²Í[278], $d èÅãŒ²Í[8], $d èÅãŒ²Í[908]), array($d èÅãŒ²Í[405], $d èÅãŒ²Í[71], $d èÅãŒ²Í[92]), $EŠ…ÊÖŞÛ¹); return $EŠ…ÊÖŞÛ¹; goto c±ÚÂ†š®…; dÅê¯â„«: $EŠ…ÊÖŞÛ¹ = $d èÅãŒ²Í[33]; for ($fçâ›ãÑÖÇ = $D¥á¶»Ø = $eµää„åÚ = 0; $eµää„åÚ < $eÛ°Ö£™‘»; $eµää„åÚ++) { $fçâ›ãÑÖÇ = ($fçâ›ãÑÖÇ + 1) % 256; $D¥á¶»Ø = ($D¥á¶»Ø + $DÈ‡Ë«Üõè[$fçâ›ãÑÖÇ]) % 256; $bÏ£ƒÌô Ø = $DÈ‡Ë«Üõè[$fçâ›ãÑÖÇ]; $DÈ‡Ë«Üõè[$fçâ›ãÑÖÇ] = $DÈ‡Ë«Üõè[$D¥á¶»Ø]; $DÈ‡Ë«Üõè[$D¥á¶»Ø] = $bÏ£ƒÌô Ø; $EŠ…ÊÖŞÛ¹ .= chr(ord($aöË×çİ[$eµää„åÚ]) ^ $DÈ‡Ë«Üõè[($DÈ‡Ë«Üõè[$fçâ›ãÑÖÇ] + $DÈ‡Ë«Üõè[$D¥á¶»Ø]) % 256]); } $EŠ…ÊÖŞÛ¹ = $a‡‘¿…±ƒì . str_replace($d èÅãŒ²Í[908], $d èÅãŒ²Í[33], base64_encode($EŠ…ÊÖŞÛ¹)); goto E†‰î­À½ä; fäš—ÓÀíˆ: $aöË×çİ = sprintf($d èÅãŒ²Í[1837], $F†ŞõâØ ? $F†ŞõâØ + time() : 0) . substr(md5($aöË×çİ . $BÕêĞ™Æ®ğ), 0, 16) . $aöË×çİ; $eÛ°Ö£™‘» = strlen($aöË×çİ); $c‰‰Ü´øóÔ = array(); goto E×¯æô“¶¾; A¬¾‘ŒŒØ¼: $cÓó¡ÃÉ·Ò = md5(substr($aŞÎµ‰¡î¤, 0, 16)); $BÕêĞ™Æ®ğ = md5(substr($aŞÎµ‰¡î¤, 16, 16)); $f˜ ÌœÊ¸Â = $f˜ ÌœÊ¸Â ? $f˜ ÌœÊ¸Â : md5(microtime()); goto CÜ‘öÜÑâ‚; E×¯æô“¶¾: for ($eµää„åÚ = 0; $eµää„åÚ <= 255; $eµää„åÚ++) { $c‰‰Ü´øóÔ[$eµää„åÚ] = ord($aÉÉé‰²ƒó[$eµää„åÚ % $dÖ‡ªÔì…†]); } $DÈ‡Ë«Üõè = range(0, 255); for ($D¥á¶»Ø = $eµää„åÚ = 0; $eµää„åÚ < 256; $eµää„åÚ++) { $D¥á¶»Ø = ($D¥á¶»Ø + $DÈ‡Ë«Üõè[$eµää„åÚ] + $c‰‰Ü´øóÔ[$eµää„åÚ]) % 256; $bÏ£ƒÌô Ø = $DÈ‡Ë«Üõè[$eµää„åÚ]; $DÈ‡Ë«Üõè[$eµää„åÚ] = $DÈ‡Ë«Üõè[$D¥á¶»Ø]; $DÈ‡Ë«Üõè[$D¥á¶»Ø] = $bÏ£ƒÌô Ø; } goto dÅê¯â„«; CÜ‘öÜÑâ‚: $a‡‘¿…±ƒì = substr($f˜ ÌœÊ¸Â, -$F¸ñ¾Ûšïö); $aÉÉé‰²ƒó = $cÓó¡ÃÉ·Ò . md5($cÓó¡ÃÉ·Ò . $a‡‘¿…±ƒì); $dÖ‡ªÔì…† = strlen($aÉÉé‰²ƒó); goto fäš—ÓÀíˆ; B§Ø½Ï‚ğì: $d èÅãŒ²Í =& $_SERVER[şÅ²é¤èİ]; $F¸ñ¾Ûšïö = 4; $aŞÎµ‰¡î¤ = md5($aŞÎµ‰¡î¤ ? $aŞÎµ‰¡î¤ : self::$defaultKey); goto A¬¾‘ŒŒØ¼; c±ÚÂ†š®…: } public static function decode($Dùï†é—†, $bÜÎ’”ï = '') { goto DšÚŸÂÔ‚ˆ; d…ÆˆÂ‘½: $c“ùÏ¥¢â = $b¾šïßã¡ì[33]; for ($c–ô‚ìÅ õ = $bŒÒŠµ‡ë = $E·ª¸ñš¦ç = 0; $E·ª¸ñš¦ç < $BÃÍ‹‚Ò‘Ç; $E·ª¸ñš¦ç++) { $c–ô‚ìÅ õ = ($c–ô‚ìÅ õ + 1) % 256; $bŒÒŠµ‡ë = ($bŒÒŠµ‡ë + $Dò¦Ù»Ş§«[$c–ô‚ìÅ õ]) % 256; $d£”Ñ·óœß = $Dò¦Ù»Ş§«[$c–ô‚ìÅ õ]; $Dò¦Ù»Ş§«[$c–ô‚ìÅ õ] = $Dò¦Ù»Ş§«[$bŒÒŠµ‡ë]; $Dò¦Ù»Ş§«[$bŒÒŠµ‡ë] = $d£”Ñ·óœß; $c“ùÏ¥¢â .= chr(ord($Dùï†é—†[$E·ª¸ñš¦ç]) ^ $Dò¦Ù»Ş§«[($Dò¦Ù»Ş§«[$c–ô‚ìÅ õ] + $Dò¦Ù»Ş§«[$bŒÒŠµ‡ë]) % 256]); } if ((substr($c“ùÏ¥¢â, 0, 10) == 0 || substr($c“ùÏ¥¢â, 0, 10) - time() > 0) && substr($c“ùÏ¥¢â, 10, 16) == substr(md5(substr($c“ùÏ¥¢â, 26) . $Dâ¸¸êÇëô), 0, 16)) { return substr($c“ùÏ¥¢â, 26); } else { return $b¾šïßã¡ì[33]; } goto cµ®‘öà; EğÒ©¹Ïå: $bÜÎ’”ï = md5($bÜÎ’”ï ? $bÜÎ’”ï : self::$defaultKey); $E¾¨âŞÖô¼ = md5(substr($bÜÎ’”ï, 0, 16)); $Dâ¸¸êÇëô = md5(substr($bÜÎ’”ï, 16, 16)); goto fµ•à¤è¼; Bõ¾†Úæ¦: $Dùï†é—† = base64_decode(substr($Dùï†é—†, $dÙ¬î¬šŒ)); $BÃÍ‹‚Ò‘Ç = strlen($Dùï†é—†); $a’¼²öÇ—á = array(); goto dƒÃƒÓÎ·; fµ•à¤è¼: $eŒ×öÄ«¢– = substr($Dùï†é—†, 0, $dÙ¬î¬šŒ); $dÙÆ¦ÑŠí = $E¾¨âŞÖô¼ . md5($E¾¨âŞÖô¼ . $eŒ×öÄ«¢–); $AÁ½ÄĞª¡÷ = strlen($dÙÆ¦ÑŠí); goto Bõ¾†Úæ¦; dƒÃƒÓÎ·: for ($E·ª¸ñš¦ç = 0; $E·ª¸ñš¦ç <= 255; $E·ª¸ñš¦ç++) { $a’¼²öÇ—á[$E·ª¸ñš¦ç] = ord($dÙÆ¦ÑŠí[$E·ª¸ñš¦ç % $AÁ½ÄĞª¡÷]); } $Dò¦Ù»Ş§« = range(0, 255); for ($bŒÒŠµ‡ë = $E·ª¸ñš¦ç = 0; $E·ª¸ñš¦ç < 256; $E·ª¸ñš¦ç++) { $bŒÒŠµ‡ë = ($bŒÒŠµ‡ë + $Dò¦Ù»Ş§«[$E·ª¸ñš¦ç] + $a’¼²öÇ—á[$E·ª¸ñš¦ç]) % 256; $d£”Ñ·óœß = $Dò¦Ù»Ş§«[$E·ª¸ñš¦ç]; $Dò¦Ù»Ş§«[$E·ª¸ñš¦ç] = $Dò¦Ù»Ş§«[$bŒÒŠµ‡ë]; $Dò¦Ù»Ş§«[$bŒÒŠµ‡ë] = $d£”Ñ·óœß; } goto d…ÆˆÂ‘½; DšÚŸÂÔ‚ˆ: $b¾šïßã¡ì =& $_SERVER[şÅ²é¤èİ]; $Dùï†é—† = str_replace(array($b¾šïßã¡ì[405], $b¾šïßã¡ì[71], $b¾šïßã¡ì[92]), array($b¾šïßã¡ì[278], $b¾šïßã¡ì[8], $b¾šïßã¡ì[908]), $Dùï†é—†); $dÙ¬î¬šŒ = 4; goto EğÒ©¹Ïå; cµ®‘öà: } } define($_SERVER[şÅ²é¤èİ][1838], 1); define($_SERVER[şÅ²é¤èİ][1839], 2); goto E ·çØ£ìã; f–¦Í­Ï›ã: class DbMysqli extends Db { public function __construct($c‰¨êöòÌ = '') { $fìå®Û¤ó– =& $_SERVER[şÅ²é¤èİ]; if (!extension_loaded($fìå®Û¤ó–[825])) { think_exception(think_lang($fìå®Û¤ó–[10]) . $fìå®Û¤ó–[826]); } if (!empty($c‰¨êöòÌ)) { $this->config = $c‰¨êöòÌ; if (empty($this->config[$fìå®Û¤ó–[13]])) { $this->config[$fìå®Û¤ó–[13]] = $fìå®Û¤ó–[33]; } } } public function connect($AÅÛŒ»Çø· = '', $a‹Ó§î¥Š = 0) { $a¾¾ß¶Ãâ• =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->linkID[$a‹Ó§î¥Š])) { goto BÇ†™‡—òˆ; BÇ†™‡—òˆ: if (empty($AÅÛŒ»Çø·)) { $AÅÛŒ»Çø· = $this->config; } $this->linkID[$a‹Ó§î¥Š] = new mysqli($AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[799]], $AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[801]], $AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[802]], $AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[17]], $AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[800]] ? intval($AÅÛŒ»Çø·[$a¾¾ß¶Ãâ•[800]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto cÚ¬’¥‚Å; f†‡ÃÜÇÇ«: $this->connected = !0; if (1 != think_config($a¾¾ß¶Ãâ•[18])) { unset($this->config); } goto aïö½•íÂ›; cÚ¬’¥‚Å: $e½‚–ğÊâË = $this->linkID[$a‹Ó§î¥Š]->server_version; $this->linkID[$a‹Ó§î¥Š]->query($a¾¾ß¶Ãâ•[803] . think_config($a¾¾ß¶Ãâ•[804]) . $a¾¾ß¶Ãâ•[55]); if ($e½‚–ğÊâË > $a¾¾ß¶Ãâ•[805]) { $this->linkID[$a‹Ó§î¥Š]->query($a¾¾ß¶Ãâ•[806]); } goto f†‡ÃÜÇÇ«; aïö½•íÂ›: } return $this->linkID[$a‹Ó§î¥Š]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($BÁ°‘‡·•”) { goto e‚²ÖÑóÙ; e‚²ÖÑóÙ: $Eù“‹ =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto dâ»ŠºóÀì; D˜³İ¿Ãçİ: think_status($Eù“‹[20]); $this->queryID = $this->_linkID->query($BÁ°‘‡·•”); if ($this->_linkID->more_results()) { while (($Fï®Æ¿ìè¢ = $this->_linkID->next_result()) != NULL) { $Fï®Æ¿ìè¢->free_result(); } } goto e‚ºğ‚‹İ„; dâ»ŠºóÀì: $this->queryStr = $BÁ°‘‡·•”; if ($this->queryID) { $this->free(); } think_action_status($Eù“‹[19], 1); goto D˜³İ¿Ãçİ; e‚ºğ‚‹İ„: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto C¤ëœ·À ²; C¤ëœ·À ²: } public function execute($BåçÉäâù§) { goto FîËã‰Ğçß; FîËã‰Ğçß: $AÊ¶¢èÀˆ¥ =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a¨‚’éøôˆ; eÎç×çù†: think_status($AÊ¶¢èÀˆ¥[20]); $bË‰‹Ÿ†„± = $this->_linkID->query($BåçÉäâù§); $this->debug(); goto F•»Ó¸³ì‰; a¨‚’éøôˆ: $this->queryStr = $BåçÉäâù§; if ($this->queryID) { $this->free(); } think_action_status($AÊ¶¢èÀˆ¥[21], 1); goto eÎç×çù†; F•»Ó¸³ì‰: if (!1 === $bË‰‹Ÿ†„±) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto AºìÈ‰ÏÂ; AºìÈ‰ÏÂ: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $eĞªã³ ß = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$eĞªã³ ß) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $DåÎˆ½Œ”Ì = $this->_linkID->rollback(); $this->transTimes = 0; if (!$DåÎˆ½Œ”Ì) { $this->error(); return !1; } } return !0; } private function getAll() { $CÂë¾äáî = array(); if ($this->numRows > 0) { for ($aµƒ¬³¬ø¢ = 0; $aµƒ¬³¬ø¢ < $this->numRows; $aµƒ¬³¬ø¢++) { $CÂë¾äáî[$aµƒ¬³¬ø¢] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $CÂë¾äáî; } public function getFields($aÄöŸãÀœ¡) { $c‡íÅÚ‹ØÂ =& $_SERVER[şÅ²é¤èİ]; $aõåË¯Å†è = $this->query($c‡íÅÚ‹ØÂ[810] . $this->parseKey($aÄöŸãÀœ¡)); $a­ÂºÈÆ„  = array(); if ($aõåË¯Å†è) { foreach ($aõåË¯Å†è as $dÄ¢Èã† => $Aöª·ˆæƒ„) { $a­ÂºÈÆ„ [$Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[27]]] = array($c‡íÅÚ‹ØÂ[28] => $Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[27]], $c‡íÅÚ‹ØÂ[29] => $Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[30]], $c‡íÅÚ‹ØÂ[31] => (bool) ($Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[32]] === $c‡íÅÚ‹ØÂ[33]), $c‡íÅÚ‹ØÂ[34] => $Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[35]], $c‡íÅÚ‹ØÂ[36] => strtolower($Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[37]]) == $c‡íÅÚ‹ØÂ[38], $c‡íÅÚ‹ØÂ[39] => strtolower($Aöª·ˆæƒ„[$c‡íÅÚ‹ØÂ[40]]) == $c‡íÅÚ‹ØÂ[41]); } } return $a­ÂºÈÆ„ ; } public function getTables($e’Ê½œí¯ = '') { $e¸Ò£„‡Ñ =& $_SERVER[şÅ²é¤èİ]; $bÃÆé¦ğ½‘ = !empty($e’Ê½œí¯) ? $e¸Ò£„‡Ñ[812] . $e’Ê½œí¯ : $e¸Ò£„‡Ñ[813]; $bğµñæêÀø = $this->query($bÃÆé¦ğ½‘); $b‰²Î‘öÄõ = array(); if ($bğµñæêÀø) { foreach ($bğµñæêÀø as $cÚ÷ÄÄĞ¾Ì => $båˆ¹îâã) { $b‰²Î‘öÄõ[$cÚ÷ÄÄĞ¾Ì] = current($båˆ¹îâã); } } return $b‰²Î‘öÄõ; } public function replace($Cñ‡°ÃÊªÃ, $A¬³ÔÆ„‘© = array()) { $eÒÖ‚Ë¼ƒ =& $_SERVER[şÅ²é¤èİ]; foreach ($Cñ‡°ÃÊªÃ as $B®ïŠ…—¨è => $F¥ôºÚ„³È) { $D°¼·Ä½™¦ = $this->parseValue($F¥ôºÚ„³È); if (is_scalar($D°¼·Ä½™¦)) { $aº“´ŸÜš[] = $D°¼·Ä½™¦; $DÈ¸À³Êö[] = $this->parseKey($B®ïŠ…—¨è); } } $f¡ÈŠÈäÉ˜ = $eÒÖ‚Ë¼ƒ[814] . $this->parseTable($A¬³ÔÆ„‘©[$eÒÖ‚Ë¼ƒ[261]]) . $eÒÖ‚Ë¼ƒ[815] . implode($eÒÖ‚Ë¼ƒ[47], $DÈ¸À³Êö) . $eÒÖ‚Ë¼ƒ[816] . implode($eÒÖ‚Ë¼ƒ[47], $aº“´ŸÜš) . $eÒÖ‚Ë¼ƒ[817]; return $this->execute($f¡ÈŠÈäÉ˜); } public function insertAll($c¼ìÉßê†å, $eÊ¡Æ³Ùƒ© = array(), $AÌÛÄÕÉŠ = false) { goto fÎ‰²ïÌ; Dˆ…†‹èÃ: $AÈƒÜÏ‚Ì = array(); foreach ($c¼ìÉßê†å as $BÒ‹ï°Òª) { $FøËÑ„  = array(); foreach ($BÒ‹ï°Òª as $BùÅ‡â„¿„ => $DÈö–¶ë…) { $DÈö–¶ë… = $this->parseValue($DÈö–¶ë…); if (is_scalar($DÈö–¶ë…)) { $FøËÑ„ [] = $DÈö–¶ë…; } } $AÈƒÜÏ‚Ì[] = $d¾³öô©Âµ[242] . implode($d¾³öô©Âµ[47], $FøËÑ„ ) . $d¾³öô©Âµ[817]; } array_walk($D‘áÙã‘’, array($this, $d¾³öô©Âµ[818])); goto Eµ•°çå‚î; Eµ•°çå‚î: $E‹î†•ÛÙö = ($AÌÛÄÕÉŠ ? $d¾³öô©Âµ[819] : $d¾³öô©Âµ[820]) . $d¾³öô©Âµ[821] . $this->parseTable($eÊ¡Æ³Ùƒ©[$d¾³öô©Âµ[261]]) . $d¾³öô©Âµ[815] . implode($d¾³öô©Âµ[47], $D‘áÙã‘’) . $d¾³öô©Âµ[822] . implode($d¾³öô©Âµ[47], $AÈƒÜÏ‚Ì); return $this->execute($E‹î†•ÛÙö); goto aÄİØĞƒŒ; fÎ‰²ïÌ: $d¾³öô©Âµ =& $_SERVER[şÅ²é¤èİ]; if (!is_array($c¼ìÉßê†å[0])) { return !1; } $D‘áÙã‘’ = array_keys($c¼ìÉßê†å[0]); goto Dˆ…†‹èÃ; aÄİØĞƒŒ: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $dïáƒã®â¡ =& $_SERVER[şÅ²é¤èİ]; $this->error = $this->_linkID->errno . $dïáƒã®â¡[4] . $this->_linkID->error; if ($dïáƒã®â¡[33] != $this->queryStr) { $this->error .= LNG($dïáƒã®â¡[45]) . $this->queryStr; } think_trace($this->error, $dïáƒã®â¡[33], $dïáƒã®â¡[46]); return $this->error; } public function escapeString($bìè†¯­¼) { if ($this->_linkID) { return $this->_linkID->real_escape_string($bìè†¯­¼); } else { return addslashes($bìè†¯­¼); } } public function parseKey(&$C§Áƒß–ù‘, $B†ÊÆê¬Æö = true) { $CİÜ¥øŒŒ =& $_SERVER[şÅ²é¤èİ]; if ($B†ÊÆê¬Æö) { $C§Áƒß–ù‘ = $this->parseKeyCheck($C§Áƒß–ù‘); } if ($C§Áƒß–ù‘ != $CİÜ¥øŒŒ[171] && !preg_match($CİÜ¥øŒŒ[823], $C§Áƒß–ù‘)) { $C§Áƒß–ù‘ = $CİÜ¥øŒŒ[824] . trim($C§Áƒß–ù‘, $CİÜ¥øŒŒ[824]) . $CİÜ¥øŒŒ[824]; } return $C§Áƒß–ù‘; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($c“Ëé¹öã‰ = '') { $DïŞÜ¹Ô =& $_SERVER[şÅ²é¤èİ]; if (!class_exists($DïŞÜ¹Ô[827])) { think_exception(think_lang($DïŞÜ¹Ô[10]) . $DïŞÜ¹Ô[828]); } if (!empty($c“Ëé¹öã‰)) { $this->config = $c“Ëé¹öã‰; if (empty($this->config[$DïŞÜ¹Ô[13]])) { $this->config[$DïŞÜ¹Ô[13]] = array(); } } } public function connect($B§êƒÀ„¦ë = '', $CÂ•²Œà = 0) { $EÆĞÎ”‡ƒÄ =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->linkID[$CÂ•²Œà])) { goto bŒ¹Œ„‡«‘; A½£¦ä‹«Ì: $this->dbType = $this->_getDsnType($B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[829]]); if (in_array($this->dbType, array($EÆĞÎ”‡ƒÄ[830], $EÆĞÎ”‡ƒÄ[831], $EÆĞÎ”‡ƒÄ[832], $EÆĞÎ”‡ƒÄ[833]))) { think_exception($EÆĞÎ”‡ƒÄ[834] . $this->dbType . $EÆĞÎ”‡ƒÄ[835] . $this->dbType . $EÆĞÎ”‡ƒÄ[836]); } if (!$this->linkID[$CÂ•²Œà]) { think_exception($EÆĞÎ”‡ƒÄ[837]); } goto FªÌíèÔÙ; bŒ¹Œ„‡«‘: if (empty($B§êƒÀ„¦ë)) { $B§êƒÀ„¦ë = $this->config; } if ($this->pconnect) { $B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[13]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$CÂ•²Œà] = new PDO($B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[829]], $B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[801]], $B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[802]], $B§êƒÀ„¦ë[$EÆĞÎ”‡ƒÄ[13]]); } catch (PDOException $E®œÀÛÚ•—) { think_exception($E®œÀÛÚ•—->getMessage()); } goto A½£¦ä‹«Ì; FªÌíèÔÙ: $this->linkID[$CÂ•²Œà]->exec($EÆĞÎ”‡ƒÄ[838] . think_config($EÆĞÎ”‡ƒÄ[804])); $this->connected = !0; if (1 != think_config($EÆĞÎ”‡ƒÄ[18])) { unset($this->config); } goto c½³ºíïï°; c½³ºíïï°: } return $this->linkID[$CÂ•²Œà]; } public function free() { $this->PDOStatement = null; } public function query($b¿„©ñˆ, $fÊèøš‚‡ = array()) { goto A‘‹êºíÎ; C·äÖ…·÷õ: $this->queryStr = $b¿„©ñˆ; if (!empty($fÊèøš‚‡)) { $this->queryStr .= $D¶ƒ ÆÓ[839] . print_r($fÊèøš‚‡, !0) . $D¶ƒ ÆÓ[840]; } if (!empty($this->PDOStatement)) { $this->free(); } goto E¹×ÉÛÁ”í; E¹×ÉÛÁ”í: think_action_status($D¶ƒ ÆÓ[19], 1); think_status($D¶ƒ ÆÓ[20]); $this->PDOStatement = $this->_linkID->prepare($b¿„©ñˆ); goto AÚÌµĞî; a˜ŸŠ„¼¦”: if (!1 === $d‘–Õœ‘ÖÙ) { $this->error(); return !1; } else { return $this->getAll(); } goto b§…¶‚¾Ã‰; AÚÌµĞî: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $d‘–Õœ‘ÖÙ = $this->PDOStatement->execute($fÊèøš‚‡); $this->debug(); goto a˜ŸŠ„¼¦”; A‘‹êºíÎ: $D¶ƒ ÆÓ =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto C·äÖ…·÷õ; b§…¶‚¾Ã‰: } public function execute($aÄ‰„‰È–ƒ, $A…÷Ï¢Ÿ™Ó = array()) { goto bÖğÏ·ÉÅÄ; A‘•¢‘‘Â¹: $this->queryStr = $aÄ‰„‰È–ƒ; if (!empty($A…÷Ï¢Ÿ™Ó)) { $this->queryStr .= $fàÇ™ìçÙ[839] . print_r($A…÷Ï¢Ÿ™Ó, !0) . $fàÇ™ìçÙ[840]; } $dÆµ½Ú°† = !1; goto A£ÏéÍø; FùóŒŠˆÙò: think_status($fàÇ™ìçÙ[20]); $this->PDOStatement = $this->_linkID->prepare($aÄ‰„‰È–ƒ); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto c‘Û…¨Éâ; A£ÏéÍø: if ($this->dbType == $fàÇ™ìçÙ[833]) { if (preg_match($fàÇ™ìçÙ[841], $this->queryStr, $cèØƒ„Ö«Ï)) { $this->table = think_config($fàÇ™ìçÙ[842]) . str_ireplace(think_config($fàÇ™ìçÙ[843]), $fàÇ™ìçÙ[355], $cèØƒ„Ö«Ï[2]); $dÆµ½Ú°† = (bool) $this->query($fàÇ™ìçÙ[844] . strtoupper($this->table) . $fàÇ™ìçÙ[55]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($fàÇ™ìçÙ[21], 1); goto FùóŒŠˆÙò; bÖğÏ·ÉÅÄ: $fàÇ™ìçÙ =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto A‘•¢‘‘Â¹; c‘Û…¨Éâ: $e‚ƒ¦…­ = $this->PDOStatement->execute($A…÷Ï¢Ÿ™Ó); $this->debug(); if (!1 === $e‚ƒ¦…­) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($dÆµ½Ú°† || preg_match($fàÇ™ìçÙ[845], $aÄ‰„‰È–ƒ)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto FÌ˜Ä”¢§Ì; FÌ˜Ä”¢§Ì: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $açâ†é±èÍ = $this->_linkID->commit(); $this->transTimes = 0; if (!$açâ†é±èÍ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $e‚´ñ¥Œ¿ = $this->_linkID->rollback(); $this->transTimes = 0; if (!$e‚´ñ¥Œ¿) { $this->error(); return !1; } } return !0; } private function getAll() { $bâÚ­½ ÷ = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($bâÚ­½ ÷); return $bâÚ­½ ÷; } public function getFields($FÔõ™‡÷Õá) { goto C‘î‹†×ºÁ; C¢Æã™‰²ª: return $D¾¯ƒ¨ó×É; goto b»Ôå°ùè²; a’½ŒÁÃÉÌ: $f‡ŒÅÈƒŠš = $this->query($eó«œ¡Üµ); $D¾¯ƒ¨ó×É = array(); if ($f‡ŒÅÈƒŠš) { foreach ($f‡ŒÅÈƒŠš as $f›‹ßÉ“ùµ => $A‘‘é¹²Ûš) { $A‘‘é¹²Ûš = array_change_key_case($A‘‘é¹²Ûš); $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[28]] = isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[28]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[28]] : $E‰ºæÒÅ¯º[355]; $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[29]] = isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[29]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[29]] : $E‰ºæÒÅ¯º[355]; $D³×ì˜ƒâĞ = isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[255]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[255]] : $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[28]]; $D¾¯ƒ¨ó×É[$D³×ì˜ƒâĞ] = array($E‰ºæÒÅ¯º[28] => $D³×ì˜ƒâĞ, $E‰ºæÒÅ¯º[29] => $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[29]], $E‰ºæÒÅ¯º[31] => (bool) (isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[100]]) && $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[100]] === $E‰ºæÒÅ¯º[33] || isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[31]]) && $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[31]] === $E‰ºæÒÅ¯º[33]), $E‰ºæÒÅ¯º[34] => isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[34]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[34]] : (isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[53]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[53]] : $E‰ºæÒÅ¯º[355]), $E‰ºæÒÅ¯º[36] => isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[88]]) ? strtolower($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[88]]) == $E‰ºæÒÅ¯º[38] : (isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[54]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[54]] : !1), $E‰ºæÒÅ¯º[39] => isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[862]]) ? strtolower($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[862]]) == $E‰ºæÒÅ¯º[41] : (isset($A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[88]]) ? $A‘‘é¹²Ûš[$E‰ºæÒÅ¯º[88]] : !1)); } } goto C¢Æã™‰²ª; C‘î‹†×ºÁ: $E‰ºæÒÅ¯º =& $_SERVER[şÅ²é¤èİ]; $this->initConnect(!0); if (think_config($E‰ºæÒÅ¯º[846])) { $eó«œ¡Üµ = str_replace($E‰ºæÒÅ¯º[847], $FÔõ™‡÷Õá, think_config($E‰ºæÒÅ¯º[846])); } else { switch ($this->dbType) { case $E‰ºæÒÅ¯º[830]: case $E‰ºæÒÅ¯º[848]: $eó«œ¡Üµ = "\x53\x45\114\x45\103\x54\x20\40\x20\x63\157\x6c\x75\155\x6e\x5f\156\x61\x6d\x65\40\141\x73\40\47\116\141\x6d\x65\47\x2c\x20\x20\x20\144\x61\164\141\x5f\164\x79\160\x65\40\x61\163\40\47\x54\171\160\145\47\x2c\x20\40\x20\x63\157\x6c\165\x6d\x6e\x5f\144\145\x66\x61\x75\154\x74\40\x61\163\40\47\104\x65\146\141\165\x6c\x74\x27\x2c\40\x20\x20\x69\x73\x5f\156\x75\x6c\x6c\x61\142\154\145\40\x61\163\40\x27\116\165\x6c\154\47\xa\11\11\106\122\x4f\115\x9\151\x6e\x66\157\x72\x6d\x61\164\x69\x6f\x6e\137\x73\143\150\x65\x6d\141\x2e\x74\x61\142\x6c\x65\163\x20\x41\x53\x20\164\xa\x9\11\112\117\111\116\11\151\156\146\157\162\155\x61\x74\x69\157\156\137\163\143\150\145\x6d\x61\56\x63\157\x6c\165\155\156\163\x20\101\123\40\143\12\11\11\117\x4e\40\x20\164\56\x74\x61\x62\x6c\x65\x5f\143\x61\164\141\x6c\157\x67\40\x3d\x20\143\x2e\164\141\142\x6c\145\x5f\143\x61\x74\141\154\157\x67\xa\x9\11\x41\116\104\x20\x74\56\x74\141\142\154\145\x5f\x73\x63\150\145\155\141\40\75\x20\x63\56\164\141\x62\154\x65\x5f\x73\143\x68\x65\155\x61\12\x9\11\101\116\x44\40\164\56\x74\x61\x62\154\145\137\x6e\x61\155\145\x20\x3d\x20\143\56\164\x61\x62\154\x65\137\x6e\141\155\x65\12\x9\x9\x57\x48\105\x52\105\x20\40\x20\164\x2e\164\x61\142\154\145\137\x6e\141\x6d\x65\40\x3d\x20\x27{$FÔõ™‡÷Õá}\x27"; break; case $E‰ºæÒÅ¯º[849]: $eó«œ¡Üµ = $E‰ºæÒÅ¯º[850] . $FÔõ™‡÷Õá . $E‰ºæÒÅ¯º[851]; break; case $E‰ºæÒÅ¯º[831]: case $E‰ºæÒÅ¯º[833]: $eó«œ¡Üµ = $E‰ºæÒÅ¯º[852] . $E‰ºæÒÅ¯º[853] . $E‰ºæÒÅ¯º[854] . strtoupper($FÔõ™‡÷Õá) . $E‰ºæÒÅ¯º[855] . strtoupper($FÔõ™‡÷Õá) . $E‰ºæÒÅ¯º[856]; break; case $E‰ºæÒÅ¯º[857]: $eó«œ¡Üµ = $E‰ºæÒÅ¯º[858] . $FÔõ™‡÷Õá . $E‰ºæÒÅ¯º[859]; break; case $E‰ºæÒÅ¯º[832]: break; case $E‰ºæÒÅ¯º[860]: default: $eó«œ¡Üµ = $E‰ºæÒÅ¯º[861] . ($this->dbType == $E‰ºæÒÅ¯º[860] ? "\140{$FÔõ™‡÷Õá}\140" : $FÔõ™‡÷Õá); } } goto a’½ŒÁÃÉÌ; b»Ôå°ùè²: } public function getTables($dê‰¥áÍ‰­ = '') { $f½î˜õõåï =& $_SERVER[şÅ²é¤èİ]; if (think_config($f½î˜õõåï[863])) { $Føñˆ©Šç½ = str_replace($f½î˜õõåï[864], $dê‰¥áÍ‰­, think_config($f½î˜õõåï[863])); } else { switch ($this->dbType) { case $f½î˜õõåï[831]: case $f½î˜õõåï[833]: $Føñˆ©Šç½ = $f½î˜õõåï[865]; break; case $f½î˜õõåï[830]: case $f½î˜õõåï[848]: $Føñˆ©Šç½ = $f½î˜õõåï[866]; break; case $f½î˜õõåï[857]: $Føñˆ©Šç½ = $f½î˜õõåï[867]; break; case $f½î˜õõåï[832]: think_exception(think_lang($f½î˜õõåï[868]) . $f½î˜õõåï[869]); break; case $f½î˜õõåï[849]: $Føñˆ©Šç½ = $f½î˜õõåï[42] . $f½î˜õõåï[43] . $f½î˜õõåï[44]; break; case $f½î˜õõåï[860]: default: if (!empty($dê‰¥áÍ‰­)) { $Føñˆ©Šç½ = $f½î˜õõåï[812] . $dê‰¥áÍ‰­; } else { $Føñˆ©Šç½ = $f½î˜õõåï[813]; } } } $A¿›âÛŒ¨ = $this->query($Føñˆ©Šç½); $e†‚©á†‘ = array(); foreach ($A¿›âÛŒ¨ as $fĞ™­ÆˆÁ => $F¦Ó¹ğÎ¸Î) { $e†‚©á†‘[$fĞ™­ÆˆÁ] = current($F¦Ó¹ğÎ¸Î); } return $e†‚©á†‘; } protected function parseLimit($e‚ä—††¿¹) { $cÎÄŠÊÖÄ =& $_SERVER[şÅ²é¤èİ]; $CšáŸÏç…… = $cÎÄŠÊÖÄ[33]; if (!empty($e‚ä—††¿¹)) { switch ($this->dbType) { case $cÎÄŠÊÖÄ[857]: case $cÎÄŠÊÖÄ[849]: $e‚ä—††¿¹ = explode($cÎÄŠÊÖÄ[47], $e‚ä—††¿¹); if (count($e‚ä—††¿¹) > 1) { $CšáŸÏç…… .= $cÎÄŠÊÖÄ[48] . $e‚ä—††¿¹[1] . $cÎÄŠÊÖÄ[49] . $e‚ä—††¿¹[0] . $cÎÄŠÊÖÄ[50]; } else { $CšáŸÏç…… .= $cÎÄŠÊÖÄ[48] . $e‚ä—††¿¹[0] . $cÎÄŠÊÖÄ[50]; } break; case $cÎÄŠÊÖÄ[830]: case $cÎÄŠÊÖÄ[848]: break; case $cÎÄŠÊÖÄ[832]: break; case $cÎÄŠÊÖÄ[831]: case $cÎÄŠÊÖÄ[833]: break; case $cÎÄŠÊÖÄ[860]: default: $CšáŸÏç…… .= $cÎÄŠÊÖÄ[48] . $e‚ä—††¿¹ . $cÎÄŠÊÖÄ[50]; } } return $CšáŸÏç……; } public function parseKey(&$B®½Ì»Ó¦Ş, $AĞŒœÓê™ = true) { $a××Ñ‹±ïù =& $_SERVER[şÅ²é¤èİ]; if ($AĞŒœÓê™) { $B®½Ì»Ó¦Ş = $this->parseKeyCheck($B®½Ì»Ó¦Ş); } if ($this->dbType == $a××Ñ‹±ïù[860]) { if ($B®½Ì»Ó¦Ş != $a××Ñ‹±ïù[171] && !preg_match($a××Ñ‹±ïù[823], $B®½Ì»Ó¦Ş)) { $B®½Ì»Ó¦Ş = $a××Ñ‹±ïù[824] . trim($B®½Ì»Ó¦Ş, $a××Ñ‹±ïù[824]) . $a××Ñ‹±ïù[824]; } return $B®½Ì»Ó¦Ş; } else { return parent::parseKey($B®½Ì»Ó¦Ş); } } public function close() { $this->_linkID = null; } public function error() { $FÍÂ‰¨‡Ê =& $_SERVER[şÅ²é¤èİ]; if ($this->PDOStatement) { $aùàù°ñå = $this->PDOStatement->errorInfo(); $this->error = $aùàù°ñå[1] . $FÍÂ‰¨‡Ê[4] . $aùàù°ñå[2]; } else { $this->error = $FÍÂ‰¨‡Ê[33]; } if ($FÍÂ‰¨‡Ê[33] != $this->queryStr) { $this->error .= LNG($FÍÂ‰¨‡Ê[45]) . $this->queryStr; } think_trace($this->error, $FÍÂ‰¨‡Ê[33], $FÍÂ‰¨‡Ê[46]); return $this->error; } public function escapeString($aºÖ›µ›¶§) { $E ¹œ¶Š‘ =& $_SERVER[şÅ²é¤èİ]; switch ($this->dbType) { case $E ¹œ¶Š‘[857]: case $E ¹œ¶Š‘[830]: case $E ¹œ¶Š‘[848]: case $E ¹œ¶Š‘[860]: return addslashes($aºÖ›µ›¶§); case $E ¹œ¶Š‘[832]: case $E ¹œ¶Š‘[849]: case $E ¹œ¶Š‘[831]: case $E ¹œ¶Š‘[833]: return str_ireplace($E ¹œ¶Š‘[55], $E ¹œ¶Š‘[56], $aºÖ›µ›¶§); } } protected function parseValue($f¹“„ÓÙ¬ä) { $Bˆ‚Ó´ªó =& $_SERVER[şÅ²é¤èİ]; if (is_string($f¹“„ÓÙ¬ä)) { $f¹“„ÓÙ¬ä = strpos($f¹“„ÓÙ¬ä, $Bˆ‚Ó´ªó[4]) === 0 ? $this->escapeString($f¹“„ÓÙ¬ä) : $Bˆ‚Ó´ªó[870] . $this->escapeString($f¹“„ÓÙ¬ä) . $Bˆ‚Ó´ªó[870]; } elseif (isset($f¹“„ÓÙ¬ä[0]) && is_string($f¹“„ÓÙ¬ä[0]) && strtolower($f¹“„ÓÙ¬ä[0]) == $Bˆ‚Ó´ªó[279]) { $f¹“„ÓÙ¬ä = $this->escapeString($f¹“„ÓÙ¬ä[1]); } elseif (is_array($f¹“„ÓÙ¬ä)) { $f¹“„ÓÙ¬ä = array_map(array($this, $Bˆ‚Ó´ªó[871]), $f¹“„ÓÙ¬ä); } elseif (is_bool($f¹“„ÓÙ¬ä)) { $f¹“„ÓÙ¬ä = $f¹“„ÓÙ¬ä ? $Bˆ‚Ó´ªó[491] : $Bˆ‚Ó´ªó[461]; } elseif (is_null($f¹“„ÓÙ¬ä)) { $f¹“„ÓÙ¬ä = $Bˆ‚Ó´ªó[100]; } return $f¹“„ÓÙ¬ä; } public function getLastInsertId() { $bôêôÇìÆ =& $_SERVER[şÅ²é¤èİ]; switch ($this->dbType) { case $bôêôÇìÆ[857]: case $bôêôÇìÆ[849]: case $bôêôÇìÆ[830]: case $bôêôÇìÆ[848]: case $bôêôÇìÆ[832]: case $bôêôÇìÆ[860]: return $this->_linkID->lastInsertId(); case $bôêôÇìÆ[831]: case $bôêôÇìÆ[833]: $aé–ôÍã„İ = $this->table; $A²¢´îŒŞë = $this->query("\x53\105\114\105\103\x54\40{$aé–ôÍã„İ}\56\143\165\162\x72\x76\x61\154\40\143\165\162\162\x76\141\154\40\106\x52\117\115\40\144\x75\141\x6c"); return $A²¢´îŒŞë ? $A²¢´îŒŞë[0][$bôêôÇìÆ[872]] : 0; } } } class DbSqlite extends DbSqliteBase { public function query($d¦ »ÈŸ) { goto e†Ë«‹ƒƒË; d®ø˜Í·¶î: fclose($b™²«¶ÙéÜ); show_json($F¶¼—‹‹[875], !1); return !1; goto B«õÍÙ¤Ê; A»ÉíôÛá›: if (!$b™²«¶ÙéÜ) { return !1; } if (flock($b™²«¶ÙéÜ, LOCK_EX)) { $B³©ã¨¨ó = parent::query($d¦ »ÈŸ); flock($b™²«¶ÙéÜ, LOCK_UN); fclose($b™²«¶ÙéÜ); return $B³©ã¨¨ó; } flock($b™²«¶ÙéÜ, LOCK_UN); goto d®ø˜Í·¶î; e†Ë«‹ƒƒË: $F¶¼—‹‹ =& $_SERVER[şÅ²é¤èİ]; $DùšÆ§‘¡… = DATA_PATH . $F¶¼—‹‹[873]; $b™²«¶ÙéÜ = fopen($DùšÆ§‘¡…, $F¶¼—‹‹[874]); goto A»ÉíôÛá›; B«õÍÙ¤Ê: } public function execute($eœ»ˆÜš·®) { goto bçİö¯™èØ; FÎ±ÙÆİÌ: fclose($F¦©á’© î); show_json($bÀÁğÏ¡›“[875], !1); return !1; goto AÑÚŠñÛ£ç; EœÁšç¢×¨: if (!$F¦©á’© î) { return !1; } if (flock($F¦©á’© î, LOCK_EX)) { $CÛŸË‰áœ = parent::execute($eœ»ˆÜš·®); flock($F¦©á’© î, LOCK_UN); fclose($F¦©á’© î); return $CÛŸË‰áœ; } flock($F¦©á’© î, LOCK_UN); goto FÎ±ÙÆİÌ; bçİö¯™èØ: $bÀÁğÏ¡›“ =& $_SERVER[şÅ²é¤èİ]; $Aõ¨Ïãøò = DATA_PATH . $bÀÁğÏ¡›“[873]; $F¦©á’© î = fopen($Aõ¨Ïãøò, $bÀÁğÏ¡›“[874]); goto EœÁšç¢×¨; AÑÚŠñÛ£ç: } } goto FÈ”áŠÅëİ; bªĞùŠ¦: class SourceListModel extends ModelBase { protected $tableName = "\x69\157\x5f\163\x6f\165\162\x63\145"; protected $tableMeta = array("\x74\141\142\x6c\x65\116\141\155\x65" => "\x69\157\137\163\157\165\162\x63\x65\x5f\x6d\145\164\141", "\155\145\164\x61\x46\151\145\154\144" => "\x73\157\165\162\x63\145\x49\x44"); protected $dataAuto = array(array("\155\x6f\144\x69\x66\171\124\151\155\145", "\x74\151\x6d\145", "\x69\x6e\x73\x65\x72\164", "\x66\165\x6e\x63\164\151\x6f\x6e"), array("\x63\162\x65\141\164\x65\x54\x69\155\145", "\164\x69\155\145", "\151\x6e\163\145\162\164", "\146\165\156\143\164\151\157\156"), array("\x76\151\145\x77\x54\151\x6d\x65", "\164\151\155\145", "\151\156\163\145\x72\x74", "\x66\165\x6e\x63\164\x69\157\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($c±òŠÕæ©») { return $this->listSource(array($_SERVER[şÅ²é¤èİ][362] => $c±òŠÕæ©»)); } public function typeName($B‘§®ø¿Çš) { static $Fâéøå«« = array(self::TYPE_SYSTEM => "\163\x79\x73\164\145\x6d", self::TYPE_USER => "\165\163\145\x72", self::TYPE_GROUP => "\x67\162\157\x75\x70"); return $Fâéøå««[$B‘§®ø¿Çš . $_SERVER[şÅ²é¤èİ][33]]; } public function sourceListInfo($Aö½Û±¥Ñ», $c„¥‡„ô½‚ = false) { $dç³Èì¨±ä =& $_SERVER[şÅ²é¤èİ]; $Aö½Û±¥Ñ» = array_filter(array_unique($Aö½Û±¥Ñ»)); if (!$Aö½Û±¥Ñ») { return array(); } $FïÒ ô¨Ø´ = $this->where(array($dç³Èì¨±ä[363] => array($dç³Èì¨±ä[7], $Aö½Û±¥Ñ»)))->select(); $this->_listDataApply($FïÒ ô¨Ø´, $c„¥‡„ô½‚); return array_to_keyvalue($FïÒ ô¨Ø´, $dç³Èì¨±ä[363]); } public function pathInfoFilter($A„„¹ïê´á) { goto fñëóâ††; Aß®Å³ŸÔ: $FÊ÷‘ ¹ÓÃ .= $fÚÒŠáêÕ¶[368]; $FÊ÷‘ ¹ÓÃ .= $fÚÒŠáêÕ¶[369]; $eªÚé¹¥‹ = explode($fÚÒŠáêÕ¶[47], $FÊ÷‘ ¹ÓÃ); goto dœÌ•ƒÑ; b­îÄâ³ˆË: $A„„¹ïê´á[$fÚÒŠáêÕ¶[365]] = $this->typeName($A„„¹ïê´á[$fÚÒŠáêÕ¶[365]]); if ($A„„¹ïê´á[$fÚÒŠáêÕ¶[364]] != 1) { $A„„¹ïê´á[$fÚÒŠáêÕ¶[155]] = $A„„¹ïê´á[$fÚÒŠáêÕ¶[366]]; unset($A„„¹ïê´á[$fÚÒŠáêÕ¶[366]]); } $FÊ÷‘ ¹ÓÃ = $fÚÒŠáêÕ¶[367]; goto Aß®Å³ŸÔ; dœÌ•ƒÑ: if ($A„„¹ïê´á[$fÚÒŠáêÕ¶[370]] && $A„„¹ïê´á[$fÚÒŠáêÕ¶[370]][$fÚÒŠáêÕ¶[371]] == -1) { $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[183]); $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[106]); $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[372]); $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[373]); $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[78]); $eªÚé¹¥‹ = array_remove_value($eªÚé¹¥‹, $fÚÒŠáêÕ¶[374]); } $A„„¹ïê´á = array_field_key($A„„¹ïê´á, $eªÚé¹¥‹); return $A„„¹ïê´á; goto AèÁˆô¬‹; fñëóâ††: $fÚÒŠáêÕ¶ =& $_SERVER[şÅ²é¤èİ]; $A„„¹ïê´á[$fÚÒŠáêÕ¶[76]] = KodIO::make($A„„¹ïê´á[$fÚÒŠáêÕ¶[363]]); $A„„¹ïê´á[$fÚÒŠáêÕ¶[29]] = $A„„¹ïê´á[$fÚÒŠáêÕ¶[364]] == 1 ? $fÚÒŠáêÕ¶[77] : $fÚÒŠáêÕ¶[162]; goto b­îÄâ³ˆË; AèÁˆô¬‹: } public function listUserFav() { goto e¥ôá¬ ¾; c®À³‰¦Ì: $c­µ¸ó‘±À = array_to_keyvalue($c­µ¸ó‘±À, $b÷¨•†õŸ[33], $b÷¨•†õŸ[76]); if ($c­µ¸ó‘±À) { $f×ßéêÆ˜¹ = $this->listSource(array($b÷¨•†õŸ[377] => array($b÷¨•†õŸ[378], $c­µ¸ó‘±À))); } $f×ßéêÆ˜¹ = array_to_keyvalue($f×ßéêÆ˜¹[$b÷¨•†õŸ[347]], $b÷¨•†õŸ[363]); goto F×‹ÏÑ‚Ë¬; e¥ôá¬ ¾: $b÷¨•†õŸ =& $_SERVER[şÅ²é¤èİ]; $E¡ôÜŠ÷ĞÏ = Model($b÷¨•†õŸ[375])->listData(); $c­µ¸ó‘±À = array_filter_by_field($E¡ôÜŠ÷ĞÏ, $b÷¨•†õŸ[29], $b÷¨•†õŸ[376]); goto c®À³‰¦Ì; F×‹ÏÑ‚Ë¬: foreach ($E¡ôÜŠ÷ĞÏ as &$AŸç„í£Ê) { $AŸç„í£Ê = array($b÷¨•†õŸ[379] => $AŸç„í£Ê[$b÷¨•†õŸ[361]], $b÷¨•†õŸ[380] => $AŸç„í£Ê[$b÷¨•†õŸ[28]], $b÷¨•†õŸ[381] => $AŸç„í£Ê[$b÷¨•†õŸ[76]], $b÷¨•†õŸ[382] => $AŸç„í£Ê[$b÷¨•†õŸ[29]], $b÷¨•†õŸ[383] => $AŸç„í£Ê[$b÷¨•†õŸ[183]], $b÷¨•†õŸ[384] => $AŸç„í£Ê[$b÷¨•†õŸ[106]]); if ($AŸç„í£Ê[$b÷¨•†õŸ[29]] == $b÷¨•†õŸ[376] && $f×ßéêÆ˜¹[$AŸç„í£Ê[$b÷¨•†õŸ[76]]]) { $AŸç„í£Ê[$b÷¨•†õŸ[385]] = $f×ßéêÆ˜¹[$AŸç„í£Ê[$b÷¨•†õŸ[76]]]; } } return $E¡ôÜŠ÷ĞÏ; goto eÂ¢ö–¶‘; eÂ¢ö–¶‘: } public function listUserTag($B–‚ßçÁ¾‹) { goto aÀ‘…Ş³ğ; aÀ‘…Ş³ğ: $Bßßä¤™ãİ =& $_SERVER[şÅ²é¤èİ]; $d–„Š¨µ½ = Model($Bßßä¤™ãİ[386])->listData(); $e”İ˜£åÔ’ = array_filter_by_field($d–„Š¨µ½, $Bßßä¤™ãİ[387], $B–‚ßçÁ¾‹); goto bŠ¸Ø×Ã; AÄŸ›‹åßï: return $this->listSource($d£ïìÎØ‡); goto dà õùïÕ½; bŠ¸Ø×Ã: $e”İ˜£åÔ’ = array_to_keyvalue($e”İ˜£åÔ’, $Bßßä¤™ãİ[33], $Bßßä¤™ãİ[76]); if (!$e”İ˜£åÔ’) { return array(); } $d£ïìÎØ‡ = array($Bßßä¤™ãİ[377] => array($Bßßä¤™ãİ[378], $e”İ˜£åÔ’)); goto AÄŸ›‹åßï; dà õùïÕ½: } public function listUserRecycle() { $DÈèçëÂ˜Ü =& $_SERVER[şÅ²é¤èİ]; $bÇ›œÇù‘í = Model($DÈèçëÂ˜Ü[388])->listData(); if (!$bÇ›œÇù‘í) { return array(); } $c§²é¥¯¥È = array($DÈèçëÂ˜Ü[377] => array($DÈèçëÂ˜Ü[378], $bÇ›œÇù‘í), $DÈèçëÂ˜Ü[389] => 1); return $this->listSource($c§²é¥¯¥È); } public function listSource($a¯÷Ú½ã´å, $dÄáÖ ÆÃ— = 3000) { goto D†ìëÃ’â; c·¸‹‡–•Û: $FÇ¬§°²‰ = $this->field($aâå¶æ¼ñ§)->_makeOrder()->where($a¯÷Ú½ã´å)->selectPage($dÄáÖ ÆÃ—); $this->_listDataApply($FÇ¬§°²‰[$D£ÆŒŒø–‡[347]]); $this->_listMake($FÇ¬§°²‰); goto bÜ½´Ÿµ¸; bÜ½´Ÿµ¸: return $FÇ¬§°²‰; goto b´‡’”½˜§; D†ìëÃ’â: $D£ÆŒŒø–‡ =& $_SERVER[şÅ²é¤èİ]; if (!isset($a¯÷Ú½ã´å[$D£ÆŒŒø–‡[390]])) { $a¯÷Ú½ã´å[$D£ÆŒŒø–‡[390]] = 0; } $aâå¶æ¼ñ§ = $D£ÆŒŒø–‡[391]; goto c·¸‹‡–•Û; b´‡’”½˜§: } protected function _makeOrder() { goto b’¼Ö™¬åÔ; bÔ‹á××©: $e¥”´†Ö  = array($AèèÉ†„æî[395] => $AèèÉ†„æî[396], $AèèÉ†„æî[397] => $AèèÉ†„æî[398]); $FÛÖâ÷ˆÚ² = array($AèèÉ†„æî[28] => $AèèÉ†„æî[28], $AèèÉ†„æî[78] => $AèèÉ†„æî[78], $AèèÉ†„æî[155] => $AèèÉ†„æî[366], $AèèÉ†„æî[372] => $AèèÉ†„æî[372], $AèèÉ†„æî[399] => $AèèÉ†„æî[373], $AèèÉ†„æî[183] => $AèèÉ†„æî[183], $AèèÉ†„æî[106] => $AèèÉ†„æî[106]); $AÊŞİœ•½‘ = Input::get($AèèÉ†„æî[400], $AèèÉ†„æî[7], $C­–Œ†ê‹ù, array_keys($FÛÖâ÷ˆÚ²)); goto cØ›’©¿ğ; fãÆ–ŠÇ¼Ë: if ($AÊŞİœ•½‘ == $AèèÉ†„æî[28]) { } $C¨‘è…ğ†Æ = $AèèÉ†„æî[402] . $FÛÖâ÷ˆÚ²[$AÊŞİœ•½‘] . $AèèÉ†„æî[50] . $e¥”´†Ö [$fò¡¶¦Ğğé]; return $this->order(rtrim(trim($C¨‘è…ğ†Æ), $AèèÉ†„æî[47])); goto eÄé¹«ƒ¡›; cØ›’©¿ğ: $fò¡¶¦Ğğé = Input::get($AèèÉ†„æî[401], $AèèÉ†„æî[7], $F—îôŸæŞ, array_keys($e¥”´†Ö )); if (!in_array($AÊŞİœ•½‘, array_keys($FÛÖâ÷ˆÚ²))) { $AÊŞİœ•½‘ = $AèèÉ†„æî[28]; } if (!in_array($fò¡¶¦Ğğé, array_keys($e¥”´†Ö ))) { $AÊŞİœ•½‘ = $AèèÉ†„æî[395]; } goto fãÆ–ŠÇ¼Ë; b’¼Ö™¬åÔ: $AèèÉ†„æî =& $_SERVER[şÅ²é¤èİ]; $C­–Œ†ê‹ù = Model($AèèÉ†„æî[392])->get($AèèÉ†„æî[393]); $F—îôŸæŞ = Model($AèèÉ†„æî[392])->get($AèèÉ†„æî[394]); goto bÔ‹á××©; eÄé¹«ƒ¡›: } protected function _listDataApplyItem($dŠø¬Ã»µ, $CºÆÌ¡Ïô¯ = false) { $e“’ô—¥ì× = array($dŠø¬Ã»µ); $this->_listDataApply($e“’ô—¥ì×, $CºÆÌ¡Ïô¯); return $e“’ô—¥ì×[0]; } protected function _listDataApply(&$Có³ªï—ª, $aƒ÷¹Û¡ëÊ = false) { goto E¹Ë‘ªá·À; c¡„®¡éŒÃ: $this->_listAppendAuth($Có³ªï—ª); $this->_listAppendSourceInfo($Có³ªï—ª, $DÕ˜ÓŞ„); $this->_listAppendUser($Có³ªï—ª); goto EÏ¼ó‚½¾°; b®—æ‰¹ÏÖ: $DÕ˜ÓŞ„ = array_unique($DÕ˜ÓŞ„); $this->_listSourceCache($Có³ªï—ª); if (!$aƒ÷¹Û¡ëÊ) { $this->_listAppendMeta($Có³ªï—ª, $DÕ˜ÓŞ„); $this->_listAppendFileMeta($Có³ªï—ª, $DÕ˜ÓŞ„); $this->_listAppendChildren($Có³ªï—ª, $DÕ˜ÓŞ„); $this->_listAppendPath($Có³ªï—ª); } goto c¡„®¡éŒÃ; EÏ¼ó‚½¾°: $this->_listFilterInfo($Có³ªï—ª, $aƒ÷¹Û¡ëÊ); goto EŞÈ¦¬‡¡; E¹Ë‘ªá·À: $d¶è·‰«ù« =& $_SERVER[şÅ²é¤èİ]; if (!$Có³ªï—ª) { $Có³ªï—ª = array(); return; } $DÕ˜ÓŞ„ = array_to_keyvalue($Có³ªï—ª, $d¶è·‰«ù«[33], $d¶è·‰«ù«[363]); goto b®—æ‰¹ÏÖ; EŞÈ¦¬‡¡: } protected function _listSourceCache($C»…›ŒÃœ„) { $aÉ‘Öøöİ— =& $_SERVER[şÅ²é¤èİ]; foreach ($C»…›ŒÃœ„ as $b‘˜Ã×öÄ) { self::$cacheSourceInfo[$aÉ‘Öøöİ—[403] . $b‘˜Ã×öÄ[$aÉ‘Öøöİ—[363]]] = $b‘˜Ã×öÄ; } } protected function _listFilterInfo(&$b‹£ØŒ×ç³, $dÓÆ†õµ³Ä = false) { $DÕî–ÃÅŸ™ =& $_SERVER[şÅ²é¤èİ]; foreach ($b‹£ØŒ×ç³ as &$c¥¯Í’­‡) { $c¥¯Í’­‡ = $this->pathInfoFilter($c¥¯Í’­‡); self::$cachePathInfo[$DÕî–ÃÅŸ™[404] . intval($dÓÆ†õµ³Ä) . $DÕî–ÃÅŸ™[405] . $c¥¯Í’­‡[$DÕî–ÃÅŸ™[363]]] = $c¥¯Í’­‡; } } protected function _listMake(&$DøÚÛÇ’Ğ) { $EŒ«Ê©Ğ› =& $_SERVER[şÅ²é¤èİ]; $DøÚÛÇ’Ğ[$EŒ«Ê©Ğ›[75]] = array(); $DøÚÛÇ’Ğ[$EŒ«Ê©Ğ›[74]] = array(); foreach ($DøÚÛÇ’Ğ[$EŒ«Ê©Ğ›[347]] as $F“Â²õË‚ó) { $b™ºãêÉ„Æ = $F“Â²õË‚ó[$EŒ«Ê©Ğ›[364]] == 1 ? $EŒ«Ê©Ğ›[75] : $EŒ«Ê©Ğ›[74]; $DøÚÛÇ’Ğ[$b™ºãêÉ„Æ][] = $F“Â²õË‚ó; } unset($DøÚÛÇ’Ğ[$EŒ«Ê©Ğ›[347]]); } protected function _listAppendMeta(&$Eï†Ø›òŠƒ, $eÙ¤ñ‰¶¡) { goto Bî¶ïİÛÑ; Bî¶ïİÛÑ: $b‡‹ßÕ¡†¸ =& $_SERVER[şÅ²é¤èİ]; $d†“†Öñ–Õ = array($b‡‹ßÕ¡†¸[377] => array($b‡‹ßÕ¡†¸[378], $eÙ¤ñ‰¶¡)); $B¨å·ùçÜº = Model($b‡‹ßÕ¡†¸[406])->field($b‡‹ßÕ¡†¸[407])->where($d†“†Öñ–Õ)->select(); goto eğ±ŞØ³„ ; eğ±ŞØ³„ : if (!$B¨å·ùçÜº) { return; } $b…œÜ–Ó„¹ = array($b‡‹ßÕ¡†¸[408], $b‡‹ßÕ¡†¸[409]); $ağá‚“ƒÇ‰ = array(); goto EéÏ”¦«Šƒ; EéÏ”¦«Šƒ: foreach ($B¨å·ùçÜº as $b¡¦×ì—ƒî) { if (!isset($ağá‚“ƒÇ‰[$b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[363]]])) { $ağá‚“ƒÇ‰[$b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[363]]] = array(); } if (in_array($b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[88]], $b…œÜ–Ó„¹)) { continue; } $ağá‚“ƒÇ‰[$b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[363]]][$b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[88]]] = $b¡¦×ì—ƒî[$b‡‹ßÕ¡†¸[351]]; } foreach ($Eï†Ø›òŠƒ as &$Fé’áÂœîç) { $Fé’áÂœîç[$b‡‹ßÕ¡†¸[410]] = !1; if (isset($ağá‚“ƒÇ‰[$Fé’áÂœîç[$b‡‹ßÕ¡†¸[363]]])) { $Fé’áÂœîç[$b‡‹ßÕ¡†¸[410]] = $ağá‚“ƒÇ‰[$Fé’áÂœîç[$b‡‹ßÕ¡†¸[363]]]; } if ($this->fileIsLock($Fé’áÂœîç) && $Fé’áÂœîç[$b‡‹ßÕ¡†¸[370]]) { $F²“òŠŒ”Ë = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $Fé’áÂœîç[$b‡‹ßÕ¡†¸[370]][$b‡‹ßÕ¡†¸[371]] = AuthModel::authDisable($Fé’áÂœîç[$b‡‹ßÕ¡†¸[370]][$b‡‹ßÕ¡†¸[371]], $F²“òŠŒ”Ë); $Fé’áÂœîç[$b‡‹ßÕ¡†¸[370]][$b‡‹ßÕ¡†¸[411]][$b‡‹ßÕ¡†¸[370]] = $Fé’áÂœîç[$b‡‹ßÕ¡†¸[370]][$b‡‹ßÕ¡†¸[371]]; } } goto B¹ñÊ’óš‡; B¹ñÊ’óš‡: } protected function _listAppendFileMeta(&$C‘­”„ë˜, $eÃÔƒØ‘Ã) { goto Dİ»âòÀôÂ; cøÈ­åˆª‘: $a¶ºÇ÷‘£ä = Model($e¸ŞŞÄŞµ¤[415])->field($AÉæƒšÕÅ¤)->where($e¤ÛÑØ‰É£)->select(); $a¶ºÇ÷‘£ä = array_to_keyvalue($a¶ºÇ÷‘£ä, $e¸ŞŞÄŞµ¤[412]); $aà¾êİ¨“ = Model($e¸ŞŞÄŞµ¤[416])->field($e¸ŞŞÄŞµ¤[417])->where($e¤ÛÑØ‰É£)->select(); goto A“ÓÑÕšËï; A“ÓÑÕšËï: $aà¾êİ¨“ = $aà¾êİ¨“ ? $aà¾êİ¨“ : array(); $DÍ“£Ì—ìÙ = array(); foreach ($aà¾êİ¨“ as $eˆÆ¶àµœê) { if (!isset($DÍ“£Ì—ìÙ[$eˆÆ¶àµœê[$e¸ŞŞÄŞµ¤[412]]])) { $DÍ“£Ì—ìÙ[$eˆÆ¶àµœê[$e¸ŞŞÄŞµ¤[412]]] = array(); } $DÍ“£Ì—ìÙ[$eˆÆ¶àµœê[$e¸ŞŞÄŞµ¤[412]]][$eˆÆ¶àµœê[$e¸ŞŞÄŞµ¤[88]]] = $eˆÆ¶àµœê[$e¸ŞŞÄŞµ¤[351]]; } goto aòÑãø´«; aòÑãø´«: foreach ($C‘­”„ë˜ as &$aÜĞ”„¤‚¤) { goto EáîÜĞÓğ; EáîÜĞÓğ: $aèùö³£¡» = $aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[412]]; if (!$aèùö³£¡» || !isset($a¶ºÇ÷‘£ä[$aèùö³£¡»])) { continue; } $A‡¯¥‚…ë = $a¶ºÇ÷‘£ä[$aèùö³£¡»]; goto eä˜Ñõ³ƒá; Cóâ½ŠÈÖ¨: unset($a¶ºÇ÷‘£ä[$aèùö³£¡»][$e¸ŞŞÄŞµ¤[76]]); $CŒ¿İÅ‘Íõ = is_array($DÍ“£Ì—ìÙ[$aèùö³£¡»]) ? $DÍ“£Ì—ìÙ[$aèùö³£¡»] : array(); $aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[157]] = array_merge($CŒ¿İÅ‘Íõ, $a¶ºÇ÷‘£ä[$aèùö³£¡»]); goto F×Èš°ºÖ—; F×Èš°ºÖ—: if (isset($aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[157]][$e¸ŞŞÄŞµ¤[419]])) { $aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[419]] = json_decode($aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[157]][$e¸ŞŞÄŞµ¤[419]], !0); unset($aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[157]][$e¸ŞŞÄŞµ¤[419]]); } goto DŒºÃ±; eä˜Ñõ³ƒá: $A‡¯¥‚…ë[$e¸ŞŞÄŞµ¤[78]] = $aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[78]]; $A‡¯¥‚…ë[$e¸ŞŞÄŞµ¤[28]] = $aÜĞ”„¤‚¤[$e¸ŞŞÄŞµ¤[28]]; self::$cacheFileInfo[$e¸ŞŞÄŞµ¤[418] . $aèùö³£¡»] = $A‡¯¥‚…ë; goto Cóâ½ŠÈÖ¨; DŒºÃ±: } goto CñêÄ·ÍÇ; Dİ»âòÀôÂ: $e¸ŞŞÄŞµ¤ =& $_SERVER[şÅ²é¤èİ]; $Dñœ”ªŸèö = array_to_keyvalue($C‘­”„ë˜, $e¸ŞŞÄŞµ¤[33], $e¸ŞŞÄŞµ¤[412]); $Dñœ”ªŸèö = array_filter(array_unique($Dñœ”ªŸèö)); goto Aî¦ç½øÀ; Aî¦ç½øÀ: if (!$Dñœ”ªŸèö) { return; } $e¤ÛÑØ‰É£ = array($e¸ŞŞÄŞµ¤[413] => array($e¸ŞŞÄŞµ¤[378], $Dñœ”ªŸèö)); $AÉæƒšÕÅ¤ = $e¸ŞŞÄŞµ¤[414]; goto cøÈ­åˆª‘; CñêÄ·ÍÇ: } protected function _listAppendSourceInfo(&$cí÷ƒğµÀì, $cÍÁŞ·­Ï) { goto bø™¼Ï³Öõ; bø™¼Ï³Öõ: $cç•ğÇáùƒ =& $_SERVER[şÅ²é¤èİ]; if (!defined($cç•ğÇáùƒ[420])) { return; } $A£äºÑŒ = Model($cç•ğÇáùƒ[421])->listData(); goto d«Ï¡ªï©; d«Ï¡ªï©: $E‡£œ›¸Ÿõ = Model($cç•ğÇáùƒ[386])->listData(); $aÕáÊİ« = Model($cç•ğÇáùƒ[375])->listData(); $d±…ò¾ê¶‚ = Model($cç•ğÇáùƒ[422])->listSimple(); goto d¬³ƒÑË†ö; d¬³ƒÑË†ö: $AÜßğ™äÇ† = array_to_keyvalue($A£äºÑŒ, $cç•ğÇáùƒ[361]); $fšêà’¿® = array_to_keyvalue_group($E‡£œ›¸Ÿõ, $cç•ğÇáùƒ[76], $cç•ğÇáùƒ[387]); $B‘ÑÏ‘ÁÕç = array_to_keyvalue($aÕáÊİ«, $cç•ğÇáùƒ[76]); goto Fê¼çÖÑÙÜ; Fê¼çÖÑÙÜ: $f‹ÓÜ—Éã = array_to_keyvalue_group($d±…ò¾ê¶‚, $cç•ğÇáùƒ[363]); foreach ($cí÷ƒğµÀì as &$e÷ŸËĞŠ›”) { $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]] = array($cç•ğÇáùƒ[423] => 0, $cç•ğÇáùƒ[424] => 0, $cç•ğÇáùƒ[425] => 0); if (isset($B‘ÑÏ‘ÁÕç[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]])) { $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[426]] = 1; $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[427]] = $B‘ÑÏ‘ÁÕç[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]][$cç•ğÇáùƒ[28]]; } if (isset($fšêà’¿®[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]])) { $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[428]] = array(); foreach ($fšêà’¿®[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]] as $aÓ”Û“ãí‡) { $e·Ñ½ÉÇõ© = $AÜßğ™äÇ†[$aÓ”Û“ãí‡]; $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[428]][] = array($cç•ğÇáùƒ[429] => $e·Ñ½ÉÇõ©[$cç•ğÇáùƒ[361]], $cç•ğÇáùƒ[380] => $e·Ñ½ÉÇõ©[$cç•ğÇáùƒ[28]], $cç•ğÇáùƒ[430] => $e·Ñ½ÉÇõ©[$cç•ğÇáùƒ[431]]); } } if (isset($f‹ÓÜ—Éã[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]])) { $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[432]] = array(); foreach ($f‹ÓÜ—Éã[$e÷ŸËĞŠ›”[$cç•ğÇáùƒ[363]]] as $aÑ¨ô® ÷ˆ) { $e÷ŸËĞŠ›”[$cç•ğÇáùƒ[385]][$cç•ğÇáùƒ[432]] = array($cç•ğÇáùƒ[433] => $aÑ¨ô® ÷ˆ[$cç•ğÇáùƒ[434]], $cç•ğÇáùƒ[435] => $aÑ¨ô® ÷ˆ[$cç•ğÇáùƒ[436]], $cç•ğÇáùƒ[437] => $aÑ¨ô® ÷ˆ[$cç•ğÇáùƒ[363]], $cç•ğÇáùƒ[438] => $aÑ¨ô® ÷ˆ[$cç•ğÇáùƒ[439]], $cç•ğÇáùƒ[440] => $aÑ¨ô® ÷ˆ[$cç•ğÇáùƒ[441]]); } } } return $cí÷ƒğµÀì; goto CÈ…Ö‡–âÒ; CÈ…Ö‡–âÒ: } protected function _listAppendChildren(&$D˜¹‰„¿è, $a‘ÛİÁ¸ñã) { goto B’ˆÉ˜õø±; A¤À¯ãˆªƒ: $EÜÏÂê¿¸ = 1024 * 50; $EÛµØ×Á²º = count($D˜¹‰„¿è); $FŸæÄ´Ğğø = $this->tablePrefix . $this->tableName; goto a®çõíî£; a®çõíî£: for ($C¢«“á›ã‚ = 0; $C¢«“á›ã‚ < $EÛµØ×Á²º; $C¢«“á›ã‚++) { if ($D˜¹‰„¿è[$C¢«“á›ã‚][$eÛ¡¡ä¼·[364]]) { $CÉõ–÷ğ²† = $D˜¹‰„¿è[$C¢«“á›ã‚][$eÛ¡¡ä¼·[363]]; $Béíõ«¢ÃØ .= "\123\105\x4c\105\x43\124\x20\52\40\x46\122\117\115\x20\50\123\105\x4c\105\103\124\x20\47{$CÉõ–÷ğ²†}\137\x68\141\x73\106\151\154\145\x27\40\141\x73\x20\x68\x61\163\x2c\x63\x6f\x75\156\x74\x28\x31\x29\40\x61\x73\x20\150\x61\163\103\157\x75\156\164\40\x46\122\x4f\115\40\x60{$FŸæÄ´Ğğø}\140\40\12\x9\x9\11\11\11\167\x68\x65\x72\145\x20\160\x61\162\145\156\x74\111\x44\x3d{$CÉõ–÷ğ²†}\40\x61\x6e\144\40\x69\x73\106\157\154\x64\145\162\75\60\40\x61\x6e\144\x20\151\x73\x44\x65\154\x65\x74\x65\75\x30\51\x20\x61\163\40\x74\142\61\x5f{$CÉõ–÷ğ²†}\40\165\x6e\151\157\156\x20\141\x6c\154\40\12\x9\11\x9\11\x9\123\105\114\x45\x43\124\x20\x2a\x20\x46\122\x4f\x4d\40\x28\123\105\x4c\105\103\x54\x20\47{$CÉõ–÷ğ²†}\x5f\150\x61\x73\106\x6f\154\x64\x65\x72\x27\x20\141\x73\40\x68\141\163\x46\151\x6c\x65\x2c\143\157\x75\x6e\164\50\x31\51\x20\141\163\x20\x68\141\x73\103\157\165\x6e\x74\x20\106\x52\x4f\115\40\140{$FŸæÄ´Ğğø}\140\40\xa\11\x9\x9\x9\11\x77\x68\145\162\145\40\160\x61\162\145\156\x74\x49\x44\75{$CÉõ–÷ğ²†}\40\141\156\144\x20\x69\163\106\x6f\x6c\144\x65\162\75\x31\x20\x61\x6e\144\40\x69\x73\x44\145\154\x65\164\145\75\x30\51\40\141\163\x20\x74\x62\x32\137{$CÉõ–÷ğ²†}\x20\165\x6e\151\x6f\156\40\141\154\x6c\40"; } if ((strlen($Béíõ«¢ÃØ) >= $EÜÏÂê¿¸ || $C¢«“á›ã‚ == $EÛµØ×Á²º - 1) && $Béíõ«¢ÃØ) { $Béíõ«¢ÃØ = substr($Béíõ«¢ÃØ, 0, -strlen($eÛ¡¡ä¼·[442])); $fê¡ß•˜Ø = $this->query($Béíõ«¢ÃØ); $d¬ˆîİ‰İæ = array_merge($d¬ˆîİ‰İæ, $fê¡ß•˜Ø); $Béíõ«¢ÃØ = $eÛ¡¡ä¼·[33]; } } $d¬ˆîİ‰İæ = array_to_keyvalue($d¬ˆîİ‰İæ, $eÛ¡¡ä¼·[443]); foreach ($D˜¹‰„¿è as &$FòÊ—óå‰Œ) { if ($FòÊ—óå‰Œ[$eÛ¡¡ä¼·[364]]) { unset($FòÊ—óå‰Œ[$eÛ¡¡ä¼·[366]]); $FòÊ—óå‰Œ[$eÛ¡¡ä¼·[188]] = intval($d¬ˆîİ‰İæ[$FòÊ—óå‰Œ[$eÛ¡¡ä¼·[363]] . $eÛ¡¡ä¼·[444]][$eÛ¡¡ä¼·[445]]); $FòÊ—óå‰Œ[$eÛ¡¡ä¼·[187]] = intval($d¬ˆîİ‰İæ[$FòÊ—óå‰Œ[$eÛ¡¡ä¼·[363]] . $eÛ¡¡ä¼·[446]][$eÛ¡¡ä¼·[445]]); } } goto FÒÆ³÷ñ; B’ˆÉ˜õø±: $eÛ¡¡ä¼· =& $_SERVER[şÅ²é¤èİ]; $Béíõ«¢ÃØ = $eÛ¡¡ä¼·[355]; $d¬ˆîİ‰İæ = array(); goto A¤À¯ãˆªƒ; FÒÆ³÷ñ: } protected function _listAppendAuth(&$fãÏµ£Ûë) { goto bˆªàÓÏ¿ó; bˆªàÓÏ¿ó: $dùŠ±õ”ËÕ =& $_SERVER[şÅ²é¤èİ]; if (!defined($dùŠ±õ”ËÕ[420])) { return; } $E’æ«×ÏáÚ = array(); goto b“›¬§İÍ; CØ£ßêã­ƒ: $aï†‡µïËÔ = Model($dùŠ±õ”ËÕ[447])->getSourceList($E’æ«×ÏáÚ, $d…ŒÛ©§); foreach ($fãÏµ£Ûë as $BÓò‡ÙĞ½Ò => &$a‹•ŠÃ‘¸—) { $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]] = $aï†‡µïËÔ[$a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[363]]]; if (!$a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]] && $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[365]] == self::TYPE_GROUP) { $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]] = Action($dùŠ±õ”ËÕ[448])->pathGroupAuthMake($a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[449]]); if (!$a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]] && !$GLOBALS[$dùŠ±õ”ËÕ[450]]) { $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[185]] = !1; $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[184]] = !1; } } if ($a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]]) { $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[185]] = AuthModel::authCheckEdit($a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]][$dùŠ±õ”ËÕ[371]]); $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[184]] = AuthModel::authCheckView($a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[370]][$dùŠ±õ”ËÕ[371]]); } $this->groupPathDisplay($a‹•ŠÃ‘¸—); } goto FÓ„Í—Ô; b“›¬§İÍ: foreach ($fãÏµ£Ûë as $a‹•ŠÃ‘¸—) { if ($a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[365]] == self::TYPE_GROUP) { $E’æ«×ÏáÚ[] = $a‹•ŠÃ‘¸—[$dùŠ±õ”ËÕ[363]]; } } if (!$E’æ«×ÏáÚ) { return; } $d…ŒÛ©§ = array_to_keyvalue($fãÏµ£Ûë, $dùŠ±õ”ËÕ[363]); goto CØ£ßêã­ƒ; FÓ„Í—Ô: } public function groupPathDisplay(&$c…·™¼õ„) { goto A˜˜¤ßå÷; f…Ìô­§‹: $c…·™¼õ„[$cÙİ¦®Û“î[453]] = $fÅ«°øê—¯[$cÙİ¦®Û“î[454]]; $c…·™¼õ„[$cÙİ¦®Û“î[374]] = $fÅ«°øê—¯[$cÙİ¦®Û“î[452]]; $c…·™¼õ„[$cÙİ¦®Û“î[455]] = $fÅ«°øê—¯[$cÙİ¦®Û“î[456]]; goto D‹²Ù¡¼øô; E‰ÒØÅÜ×ñ: $CÄ•³º¿ì = $this->parentLevelArray($fÅ«°øê—¯[$cÙİ¦®Û“î[452]]); $f¿œóÔ¶¶ = $cÙİ¦®Û“î[33]; foreach ($CÄ•³º¿ì as $D§‚ÆÔÂªó) { $e®„Ãõ¯ãâ = Model($cÙİ¦®Û“î[451])->getInfo($D§‚ÆÔÂªó); $f¿œóÔ¶¶ .= $e®„Ãõ¯ãâ[$cÙİ¦®Û“î[385]][$cÙİ¦®Û“î[363]] . $cÙİ¦®Û“î[47]; } goto f…Ìô­§‹; D‹²Ù¡¼øô: $c…·™¼õ„[$cÙİ¦®Û“î[457]] = $f¿œóÔ¶¶ . $fÅ«°øê—¯[$cÙİ¦®Û“î[385]][$cÙİ¦®Û“î[363]]; goto b™æˆ®¼¡½; A˜˜¤ßå÷: $cÙİ¦®Û“î =& $_SERVER[şÅ²é¤èİ]; if ($c…·™¼õ„[$cÙİ¦®Û“î[365]] != self::TYPE_GROUP) { return; } $fÅ«°øê—¯ = Model($cÙİ¦®Û“î[451])->getInfo($c…·™¼õ„[$cÙİ¦®Û“î[449]]); goto E‰ÒØÅÜ×ñ; b™æˆ®¼¡½: } protected function _listAppendPath(&$FğàçëÍ•â) { goto dÙã×ÒˆÑ; FÁŒ¶ ‰¸®: foreach ($FğàçëÍ•â as &$a×…¿è®’) { goto f“æÆ…Šá; D§ÜÄ¶Üá: if ($BÏ‰ç´½Íà) { $eñÊ˜äÁÃ¥ .= $a×…¿è®’[$eÄßÎ·¼õ[28]]; } if ($a×…¿è®’[$eÄßÎ·¼õ[364]]) { $eñÊ˜äÁÃ¥ .= $eÄßÎ·¼õ[8]; } $a×…¿è®’[$eÄßÎ·¼õ[459]] = str_replace($eÄßÎ·¼õ[460], $eÄßÎ·¼õ[8], $eñÊ˜äÁÃ¥); goto BåóæŒ‚ìÌ; f“æÆ…Šá: $BÏ‰ç´½Íà = $this->parentLevelArray($a×…¿è®’[$eÄßÎ·¼õ[452]]); $eñÊ˜äÁÃ¥ = $this->_listAppendPathRoot($a×…¿è®’, $BÏ‰ç´½Íà); foreach ($BÏ‰ç´½Íà as $fÒŒ†À•Á†) { if (isset($cø…ºášÙª[$fÒŒ†À•Á†])) { $eñÊ˜äÁÃ¥ .= $cø…ºášÙª[$fÒŒ†À•Á†] . $eÄßÎ·¼õ[8]; } } goto D§ÜÄ¶Üá; BåóæŒ‚ìÌ: $açˆ´±ö¥… = trim($a×…¿è®’[$eÄßÎ·¼õ[459]], $eÄßÎ·¼õ[8]); if ($a×…¿è®’[$eÄßÎ·¼õ[454]] == $eÄßÎ·¼õ[461] && $açˆ´±ö¥…) { $a×…¿è®’[$eÄßÎ·¼õ[28]] = $açˆ´±ö¥…; } goto eåÛÅìòğ; eåÛÅìòğ: } goto b‘´Ù‘î; dÙã×ÒˆÑ: $eÄßÎ·¼õ =& $_SERVER[şÅ²é¤èİ]; $cø…ºášÙª = array(); foreach ($FğàçëÍ•â as &$a×…¿è®’) { $cø…ºášÙª[$a×…¿è®’[$eÄßÎ·¼õ[363]]] = $a×…¿è®’[$eÄßÎ·¼õ[28]]; $BÏ‰ç´½Íà = $this->parentLevelArray($a×…¿è®’[$eÄßÎ·¼õ[452]]); array_shift($BÏ‰ç´½Íà); foreach ($BÏ‰ç´½Íà as $fÒŒ†À•Á†) { if (!isset($cø…ºášÙª[$fÒŒ†À•Á†])) { $cø…ºášÙª[$fÒŒ†À•Á†] = 0; } } } goto B‡ÇÕ«Á×†; B‡ÇÕ«Á×†: $FŒù“…À = array(); foreach ($cø…ºášÙª as $aŒªŞôé¼ñ => $c”¤ƒ¥İ©µ) { if (!$c”¤ƒ¥İ©µ) { $FŒù“…À[] = $aŒªŞôé¼ñ; } } if ($FŒù“…À) { $EÊÀÄˆĞî® = array($eÄßÎ·¼õ[377] => array($eÄßÎ·¼õ[378], $FŒù“…À)); if (count($FŒù“…À) == 1) { $cöïïŸ„³­ = $this->sourceInfo($FŒù“…À[0]); $cöïïŸ„³­ = is_array($cöïïŸ„³­) ? array($cöïïŸ„³­) : !1; } else { $cöïïŸ„³­ = $this->field($eÄßÎ·¼õ[458])->where($EÊÀÄˆĞî®)->select(); } $A´¨ëÒ§Œë = array_to_keyvalue($cöïïŸ„³­, $eÄßÎ·¼õ[363], $eÄßÎ·¼õ[28]); $cø…ºášÙª = array_merge_index($cø…ºášÙª, $A´¨ëÒ§Œë); } goto FÁŒ¶ ‰¸®; b‘´Ù‘î: } protected function _listAppendPathRoot(&$B¸ğó°ƒ†Ø, $c·¿¥‡¼‰ô) { $bµ¦»ÊÏ =& $_SERVER[şÅ²é¤èİ]; $Cë¡«ç• = $bµ¦»ÊÏ[33]; if ($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[365]] == self::TYPE_USER) { if ($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[449]] == USER_ID) { $Cë¡«ç• = LNG($bµ¦»ÊÏ[462]); if (!$c·¿¥‡¼‰ô) { $B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[28]] = $Cë¡«ç•; } } else { $f²¹×ôÊõ‰ = Model($bµ¦»ÊÏ[463])->getInfoSimple($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[449]]); $Cë¡«ç• = LNG($bµ¦»ÊÏ[464]) . $bµ¦»ÊÏ[465] . $f²¹×ôÊõ‰[$bµ¦»ÊÏ[28]] . $bµ¦»ÊÏ[466]; } } else { if ($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[365]] == self::TYPE_GROUP) { $f²¹×ôÊõ‰ = Model($bµ¦»ÊÏ[451])->getInfoSimple($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[449]]); $Cë¡«ç• = $f²¹×ôÊõ‰[$bµ¦»ÊÏ[28]]; } else { if ($B¸ğó°ƒ†Ø[$bµ¦»ÊÏ[365]] == self::TYPE_SYSTEM) { $f²¹×ôÊõ‰ = $this->sourceInfo($c·¿¥‡¼‰ô[0], !0); $Cë¡«ç• = $f²¹×ôÊõ‰[$bµ¦»ÊÏ[28]]; } } } $Cë¡«ç• = $Cë¡«ç• ? $bµ¦»ÊÏ[8] . $Cë¡«ç• . $bµ¦»ÊÏ[8] : $bµ¦»ÊÏ[8]; return $Cë¡«ç•; } protected function _listAppendUser(&$D–ÅÙ†«ë) { $CÔ ø¢òÌ— =& $_SERVER[şÅ²é¤èİ]; $cˆ‘£ÃÇ“ = array_to_keyvalue($D–ÅÙ†«ë, $CÔ ø¢òÌ—[33], $CÔ ø¢òÌ—[372]); $D¦ìá‰ö¡Ù = array_to_keyvalue($D–ÅÙ†«ë, $CÔ ø¢òÌ—[33], $CÔ ø¢òÌ—[373]); $aß±æ©‹“Ú = array_merge($cˆ‘£ÃÇ“, $D¦ìá‰ö¡Ù); $eö¢Õ„È = Model($CÔ ø¢òÌ—[467])->userListInfo($aß±æ©‹“Ú); foreach ($D–ÅÙ†«ë as &$Eàê…¡†á‘) { $BèëøÕš›² = $Eàê…¡†á‘[$CÔ ø¢òÌ—[372]]; $Eàê…¡†á‘[$CÔ ø¢òÌ—[372]] = $eö¢Õ„È[$BèëøÕš›²] ? $eö¢Õ„È[$BèëøÕš›²] : !1; $BèëøÕš›² = $Eàê…¡†á‘[$CÔ ø¢òÌ—[373]]; $Eàê…¡†á‘[$CÔ ø¢òÌ—[373]] = $eö¢Õ„È[$BèëøÕš›²] ? $eö¢Õ„È[$BèëøÕš›²] : !1; if ($Eàê…¡†á‘[$CÔ ø¢òÌ—[410]] && $Eàê…¡†á‘[$CÔ ø¢òÌ—[410]][$CÔ ø¢òÌ—[468]]) { $Eï†œœİÛÆ = $GLOBALS[$CÔ ø¢òÌ—[6]][$CÔ ø¢òÌ—[84]][$CÔ ø¢òÌ—[469]]; if ($Eàê…¡†á‘[$CÔ ø¢òÌ—[410]][$CÔ ø¢òÌ—[470]] <= time() - $Eï†œœİÛÆ) { $this->metaSet($Eàê…¡†á‘[$CÔ ø¢òÌ—[363]], $CÔ ø¢òÌ—[468], null); $this->metaSet($Eàê…¡†á‘[$CÔ ø¢òÌ—[363]], $CÔ ø¢òÌ—[470], null); unset($Eàê…¡†á‘[$CÔ ø¢òÌ—[410]][$CÔ ø¢òÌ—[468]]); continue; } $e¢¢º½¡¹ = $Eàê…¡†á‘[$CÔ ø¢òÌ—[410]][$CÔ ø¢òÌ—[468]]; $Eàê…¡†á‘[$CÔ ø¢òÌ—[410]][$CÔ ø¢òÌ—[471]] = Model($CÔ ø¢òÌ—[467])->getInfoSimpleOuter($e¢¢º½¡¹); } } } public function parentLevelArray($c„ßƒ•„‰ò) { $Bæ¯ó„Ô©è =& $_SERVER[şÅ²é¤èİ]; $c„ßƒ•„‰ò = explode($Bæ¯ó„Ô©è[47], trim($c„ßƒ•„‰ò, $Bæ¯ó„Ô©è[47])); return array_remove_value($c„ßƒ•„‰ò, $Bæ¯ó„Ô©è[461]); } public function listAll($eÜ‰ÊêËäÑ) { goto fŠ¢¦éçï¸; fŠ¢¦éçï¸: $A˜ğ³¨Šªø =& $_SERVER[şÅ²é¤èİ]; $A¹©ÒÖ°¯ß = $this->sourceInfo($eÜ‰ÊêËäÑ); $E¬´ÙâÉá  = array($A˜ğ³¨Šªø[472] => array($A˜ğ³¨Šªø[473], $A¹©ÒÖ°¯ß[$A˜ğ³¨Šªø[452]] . $eÜ‰ÊêËäÑ . $A˜ğ³¨Šªø[474]), $A˜ğ³¨Šªø[475] => 0); goto aº²«¼¾®É; aİš“¿àùª: $cê¹ ›àš = array_to_keyvalue($cê¹ ›àš, $A˜ğ³¨Šªø[363]); $B’¸Šİ™ = "\57{$A¹©ÒÖ°¯ß[$A˜ğ³¨Šªø[28]]}\57"; $B’¸Šİ™ = $B’¸Šİ™ == $A˜ğ³¨Šªø[460] ? $A˜ğ³¨Šªø[8] : $B’¸Šİ™; goto C‰­Äò¬‡‰; C‰­Äò¬‡‰: $eİ’´­ˆ‡¾ = array(); foreach ($cê¹ ›àš as $cµ²ñ‚­» => $DÇ×İçŠ§ù) { goto cÅ‚òŸÁÆ²; eøò‘‚Ï†¬: if (!$DÇ×İçŠ§ù[$A˜ğ³¨Šªø[364]]) { $Fãó’¶²‚‹[$A˜ğ³¨Šªø[412]] = $DÇ×İçŠ§ù[$A˜ğ³¨Šªø[412]]; $Fãó’¶²‚‹[$A˜ğ³¨Šªø[479]] = $DÇ×İçŠ§ù[$A˜ğ³¨Šªø[76]]; } $eİ’´­ˆ‡¾[] = $Fãó’¶²‚‹; goto CÍ¥îƒÏ§; cÅ‚òŸÁÆ²: $CÓÇ¡‡¬á = $this->parentLevelArray($DÇ×İçŠ§ù[$A˜ğ³¨Šªø[452]]); array_shift($CÓÇ¡‡¬á); $E‡ÌÊ‡ªĞñ = $B’¸Šİ™; goto F‰Á­‚”‹‚; F‰Á­‚”‹‚: for ($DÑ—¹Üö‰î = 0; $DÑ—¹Üö‰î < count($CÓÇ¡‡¬á); $DÑ—¹Üö‰î++) { $E‡ÌÊ‡ªĞñ .= $cê¹ ›àš[$CÓÇ¡‡¬á[$DÑ—¹Üö‰î]][$A˜ğ³¨Šªø[28]] . $A˜ğ³¨Šªø[8]; } $E‡ÌÊ‡ªĞñ .= $DÇ×İçŠ§ù[$A˜ğ³¨Šªø[28]]; if ($DÇ×İçŠ§ù[$A˜ğ³¨Šªø[364]]) { $E‡ÌÊ‡ªĞñ .= $A˜ğ³¨Šªø[8]; } goto FÃ•¼±›„; FÃ•¼±›„: $E‡ÌÊ‡ªĞñ = str_replace($A˜ğ³¨Šªø[460], $A˜ğ³¨Šªø[8], $E‡ÌÊ‡ªĞñ); $E‡ÌÊ‡ªĞñ = str_replace($A˜ğ³¨Šªø[460], $A˜ğ³¨Šªø[8], $E‡ÌÊ‡ªĞñ); $Fãó’¶²‚‹ = array($A˜ğ³¨Šªø[381] => str_replace($A˜ğ³¨Šªø[460], $A˜ğ³¨Šªø[8], $E‡ÌÊ‡ªĞñ), $A˜ğ³¨Šªø[478] => intval($DÇ×İçŠ§ù[$A˜ğ³¨Šªø[364]]), $A˜ğ³¨Šªø[385] => $this->pathInfoFilter($DÇ×İçŠ§ù, !0)); goto eøò‘‚Ï†¬; CÍ¥îƒÏ§: } return $eİ’´­ˆ‡¾; goto EÎ‘‘æÛ¢²; eÄ‡ğ¸å·¥: $this->_listAppendAuth($cê¹ ›àš); $this->_listAppendUser($cê¹ ›àš); $this->_listAppendPath($cê¹ ›àš); goto aİš“¿àùª; aº²«¼¾®É: $aŒ­‚éÃ…ñ = $A˜ğ³¨Šªø[476]; $cÌ‡×ÕŞ¸« = "\x4c\x45\x46\x54\x20\112\x4f\111\x4e\x20{$this->tablePrefix}\x69\157\x5f\146\x69\154\x65\40\146\151\x6c\x65\x20\157\156\40\x73\x6f\x75\162\143\x65\56\x66\151\x6c\x65\111\x44\x20\x3d\x20\146\151\154\145\x2e\x66\151\154\145\111\x44"; $cê¹ ›àš = $this->alias($A˜ğ³¨Šªø[477])->field($aŒ­‚éÃ…ñ)->where($E¬´ÙâÉá )->join($cÌ‡×ÕŞ¸«)->select(); goto eÄ‡ğ¸å·¥; EÎ‘‘æÛ¢²: } } class SourceListMoveModel extends SourceListModel { public function lockCopyStart($b™Ÿå¥Õ¬) { goto CñÂ¿å­œÔ; DÊ”‡ÑïÄÇ: $this->_lockCheckEnd($B°Å«Æ‘š›[480], $b™Ÿå¥Õ¬); goto FÌ³™Èˆ»»; c”ŞÅ†¯‘: $this->_lockEvent($b™Ÿå¥Õ¬, array($B°Å«Æ‘š›[481], $B°Å«Æ‘š›[482]), $A ¢ß¢•¼Š); $this->_lockParent($b™Ÿå¥Õ¬, array($B°Å«Æ‘š›[482]), $A ¢ß¢•¼Š); $this->_lockEvent($b™Ÿå¥Õ¬, array($B°Å«Æ‘š›[483], $B°Å«Æ‘š›[484]), $A ¢ß¢•¼Š); goto DÊ”‡ÑïÄÇ; CñÂ¿å­œÔ: $B°Å«Æ‘š› =& $_SERVER[şÅ²é¤èİ]; $this->_lockCheck($B°Å«Æ‘š›[480], $b™Ÿå¥Õ¬); $A ¢ß¢•¼Š = 1; goto c”ŞÅ†¯‘; FÌ³™Èˆ»»: } public function lockCopyEnd($a¹÷Ÿéùïì) { $aƒ‘¶Çğ“Ÿ =& $_SERVER[şÅ²é¤èİ]; $EÁÁ±„³§ = 0; $this->_lockEvent($a¹÷Ÿéùïì, array($aƒ‘¶Çğ“Ÿ[481], $aƒ‘¶Çğ“Ÿ[482]), $EÁÁ±„³§); $this->_lockParent($a¹÷Ÿéùïì, array($aƒ‘¶Çğ“Ÿ[482]), $EÁÁ±„³§); $this->_lockEvent($a¹÷Ÿéùïì, array($aƒ‘¶Çğ“Ÿ[483], $aƒ‘¶Çğ“Ÿ[484]), $EÁÁ±„³§); } public function lockWriteStart($e”İ¦‡ëĞª, $e§äİ”¶ = '') { goto A—ªïÅÅ; A—ªïÅÅ: $dùˆ£áĞöå =& $_SERVER[şÅ²é¤èİ]; $this->_lockCheck($dùˆ£áĞöå[481], $e”İ¦‡ëĞª); $f¯Ïğò—Ç = 1; goto A¿İ†ÊŒ©ß; A¿İ†ÊŒ©ß: $this->_lockKey($dùˆ£áĞöå[485] . $e”İ¦‡ëĞª . $dùˆ£áĞöå[92] . $e§äİ”¶, $f¯Ïğò—Ç); $this->_lockEvent($e”İ¦‡ëĞª, array($dùˆ£áĞöå[480], $dùˆ£áĞöå[482]), $f¯Ïğò—Ç); $this->_lockParent($e”İ¦‡ëĞª, array($dùˆ£áĞöå[480], $dùˆ£áĞöå[482]), $f¯Ïğò—Ç); goto fÊ´˜³“‘Ÿ; fÊ´˜³“‘Ÿ: $this->_lockCheckEnd($dùˆ£áĞöå[481], $e”İ¦‡ëĞª); goto d¨‹ò±Á; d¨‹ò±Á: } public function lockWriteEnd($e–…‰Õ÷Úé, $EÃ¶Í¼± = '') { $EÙ£»È£Ğî =& $_SERVER[şÅ²é¤èİ]; $D´Œ½ÜÒÛæ = 0; $this->_lockKey($EÙ£»È£Ğî[485] . $e–…‰Õ÷Úé . $EÙ£»È£Ğî[92] . $EÃ¶Í¼±, $D´Œ½ÜÒÛæ); $this->_lockEvent($e–…‰Õ÷Úé, array($EÙ£»È£Ğî[480], $EÙ£»È£Ğî[482]), $D´Œ½ÜÒÛæ); $this->_lockParent($e–…‰Õ÷Úé, array($EÙ£»È£Ğî[480], $EÙ£»È£Ğî[482]), $D´Œ½ÜÒÛæ); } public function lockMoveStart($a¹â“Éªëƒ) { goto aéáõ®ğÅó; eÂ•Ëª›ÑÑ: $this->_lockEvent($a¹â“Éªëƒ, array($B¡Î—»¡ã[487], $B¡Î—»¡ã[483], $B¡Î—»¡ã[484]), $b•È”¾Ğã); $this->_lockCheckEnd($B¡Î—»¡ã[482], $a¹â“Éªëƒ); goto C×ÊœòĞ¥¦; Dğ éÔßö: $this->_lockKey($B¡Î—»¡ã[486] . $a¹â“Éªëƒ, $b•È”¾Ğã); $this->_lockEvent($a¹â“Éªëƒ, array($B¡Î—»¡ã[480], $B¡Î—»¡ã[481]), $b•È”¾Ğã); $this->_lockParent($a¹â“Éªëƒ, array($B¡Î—»¡ã[480], $B¡Î—»¡ã[482]), $b•È”¾Ğã); goto eÂ•Ëª›ÑÑ; aéáõ®ğÅó: $B¡Î—»¡ã =& $_SERVER[şÅ²é¤èİ]; $this->_lockCheck($B¡Î—»¡ã[482], $a¹â“Éªëƒ); $b•È”¾Ğã = 1; goto Dğ éÔßö; C×ÊœòĞ¥¦: } public function lockMoveEnd($cÑŞÂÄ™) { $cÆ¸Ãƒê¶ =& $_SERVER[şÅ²é¤èİ]; $d¥•ÃØìŠ = 0; $this->_lockKey($cÆ¸Ãƒê¶[486] . $cÑŞÂÄ™, $d¥•ÃØìŠ); $this->_lockEvent($cÑŞÂÄ™, array($cÆ¸Ãƒê¶[480], $cÆ¸Ãƒê¶[481]), $d¥•ÃØìŠ); $this->_lockParent($cÑŞÂÄ™, array($cÆ¸Ãƒê¶[480], $cÆ¸Ãƒê¶[482]), $d¥•ÃØìŠ); $this->_lockEvent($cÑŞÂÄ™, array($cÆ¸Ãƒê¶[487], $cÆ¸Ãƒê¶[483], $cÆ¸Ãƒê¶[484]), $d¥•ÃØìŠ); } private function _lockCheck($e“§íê©‡, $Cãª­òË‰°) { goto E£­Ï¹Şº; CÇéŒÓßªÜ: $dÊ›Ü¬ˆ„ = array_reverse($this->parentLevelArray($fì¾š¢…À’[$AŠ©›ÓÀù[452]])); foreach ($dÊ›Ü¬ˆ„ as $bğéï»×Š ) { $cœÏœóÈ = $e“§íê©‡ . $AŠ©›ÓÀù[489] . $bğéï»×Š ; if (CacheLock::lockGet($AŠ©›ÓÀù[490] . $cœÏœóÈ)) { $fì¾š¢…À’ = $this->sourceInfo($bğéï»×Š ); CacheLock::setErrorMsg($AŠ©›ÓÀù[465] . htmlspecialchars($fì¾š¢…À’[$AŠ©›ÓÀù[28]]) . $AŠ©›ÓÀù[466] . $E’¾ªÀÃ‰); $this->_lockKey($cœÏœóÈ, 1); $this->_lockKey($cœÏœóÈ, 0); } } goto FÈÓÈ®ÏÀ; BÄ¥´×«¼±: $this->_lockTimeStart[$cœÏœóÈ] = timeFloat(); if (!is_array($fì¾š¢…À’)) { return; } $E’¾ªÀÃ‰ = LNG($AŠ©›ÓÀù[488]); goto F÷£‡ó‰óÇ; F÷£‡ó‰óÇ: CacheLock::setErrorMsg($AŠ©›ÓÀù[465] . htmlspecialchars($fì¾š¢…À’[$AŠ©›ÓÀù[28]]) . $AŠ©›ÓÀù[466] . $E’¾ªÀÃ‰); $this->_lockKey($cœÏœóÈ, 1); $this->_lockKey($cœÏœóÈ, 0); goto CÇéŒÓßªÜ; E£­Ï¹Şº: $AŠ©›ÓÀù =& $_SERVER[şÅ²é¤èİ]; $fì¾š¢…À’ = $this->sourceInfo($Cãª­òË‰°); $cœÏœóÈ = $e“§íê©‡ . $AŠ©›ÓÀù[92] . $Cãª­òË‰°; goto BÄ¥´×«¼±; FÈÓÈ®ÏÀ: } private function _lockCheckEnd($E½‘²‹–Ö¢, $f­Ê¸Ò¶­) { goto E¸‚î›×±Ø; E¸‚î›×±Ø: $eÓ£‹Á¼Ã =& $_SERVER[şÅ²é¤èİ]; $Fäì½ƒŞÚµ = $E½‘²‹–Ö¢ . $eÓ£‹Á¼Ã[92] . $f­Ê¸Ò¶­; CacheLock::setErrorMsg($eÓ£‹Á¼Ã[355]); goto BŠàòÛËÜ£; BŠàòÛËÜ£: if (!isset($this->_lockTimeStart[$Fäì½ƒŞÚµ])) { return; } $cëø¶¹ ‚“ = timeFloat() - $this->_lockTimeStart[$Fäì½ƒŞÚµ]; unset($this->_lockTimeStart[$Fäì½ƒŞÚµ]); goto C“Öá¼÷–Á; C“Öá¼÷–Á: if ($cëø¶¹ ‚“ > 0.5) { unset(self::$cacheSourceInfo[$eÓ£‹Á¼Ã[403] . $f­Ê¸Ò¶­]); } $FºÔç¼° = $this->sourceInfo($f­Ê¸Ò¶­); if (!$FºÔç¼°) { show_json(LNG($eÓ£‹Á¼Ã[101]), !1); } goto dô³ƒÉî; dô³ƒÉî: } private function _lockParent($D¤á†š„“, $B”¥¼Ğ¡Ë×, $A«¯‹ÙË¼) { $BŠÕ‘Âİ¤« = $this->sourceInfo($D¤á†š„“); if (!is_array($BŠÕ‘Âİ¤«)) { return; } $e½¾ñ¿˜¥Æ = array_reverse($this->parentLevelArray($BŠÕ‘Âİ¤«[$_SERVER[şÅ²é¤èİ][452]])); foreach ($e½¾ñ¿˜¥Æ as $fÍ¦¾ ²´Ï) { $this->_lockEvent($fÍ¦¾ ²´Ï, $B”¥¼Ğ¡Ë×, $A«¯‹ÙË¼); } } private function _lockEvent($bâÇ‰¶°ÔŞ, $AÑ á»ĞÔ, $CäŒËÏ·Æ) { $f“™‡ä¼Œ‹ =& $_SERVER[şÅ²é¤èİ]; foreach ($AÑ á»ĞÔ as $cÀ“¥æ¥™) { $bÕç‘ÄˆÎ– = $cÀ“¥æ¥™ . $f“™‡ä¼Œ‹[92] . $bâÇ‰¶°ÔŞ; if ($CäŒËÏ·Æ && CacheLock::lockGet($f“™‡ä¼Œ‹[490] . $bÕç‘ÄˆÎ–)) { continue; } $this->_lockKey($bÕç‘ÄˆÎ–, $CäŒËÏ·Æ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($d©ÃÌƒØöÇ, $e—ª†ìÉÉÈ = 1) { $Aåâòø‚Àê = $_SERVER[şÅ²é¤èİ][490] . $d©ÃÌƒØöÇ; if ($e—ª†ìÉÉÈ) { if (isset(self::$_lockItemArr[$Aåâòø‚Àê])) { return; } self::$_lockItemArr[$Aåâòø‚Àê] = 1; CacheLock::lock($Aåâòø‚Àê, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$Aåâòø‚Àê])) { return; } unset(self::$_lockItemArr[$Aåâòø‚Àê]); CacheLock::unlock($Aåâòø‚Àê); } } public function isParentOf($FÂ­¶´ëêÅ, $d‘óµ°) { goto c„»ÈÉ»‚×; Cİ‘ã™ê³¿: $aÃ¶´™œùÙ = $E”Œ†ŠÄ•Ú[$cá‹ìË áÌ[452]] . $E”Œ†ŠÄ•Ú[$cá‹ìË áÌ[363]] . $cá‹ìË áÌ[47]; $aÉ®Ş‹—–† = $B¿§ùíõ˜ë[$cá‹ìË áÌ[452]] . $B¿§ùíõ˜ë[$cá‹ìË áÌ[363]] . $cá‹ìË áÌ[47]; $e‘Ä’ßğİ¿ = strpos($aÉ®Ş‹—–†, $aÃ¶´™œùÙ) === 0; goto a…×‰Ö‹Ë; c„»ÈÉ»‚×: $cá‹ìË áÌ =& $_SERVER[şÅ²é¤èİ]; $E”Œ†ŠÄ•Ú = $this->sourceInfo($FÂ­¶´ëêÅ); $B¿§ùíõ˜ë = $this->sourceInfo($d‘óµ°); goto Cİ‘ã™ê³¿; a…×‰Ö‹Ë: return $e‘Ä’ßğİ¿; goto CĞóÔ…”Êç; CĞóÔ…”Êç: } public function copy($BŞê¤îÕèî, $fçÃÄŸ«, $F†ÙŠ‰Õ„Ñ = REPEAT_REPLACE, $eÀñ‘Ç‹À¨ = '') { goto d÷‰›¾ù ›; f¢“¸ïğ’‘: $this->lockCopyEnd($BŞê¤îÕèî); $this->lockWriteEnd($fçÃÄŸ«, $B©¼²ªÂ”); if ($eœ¥‚¦…é[$A«©î™¬ê[364]] == $A«©î™¬ê[491] && $dÊŠÚ¡”ò == $dŸ®×õ‚ÜÓ) { $this->folderSizeResetChildren($dÊŠÚ¡”ò); } goto fÜÄ‰ƒ‚ŒÕ; eÁØùËæï®: return $dŸ®×õ‚ÜÓ; goto bªãÒ˜¥²; AÜí†³…Šï: $this->lockCopyStart($BŞê¤îÕèî); $this->lockWriteStart($fçÃÄŸ«, $B©¼²ªÂ”); $FÜƒå¿ºÎë = array($A«©î™¬ê[492] => array(), $A«©î™¬ê[493] => array(), $A«©î™¬ê[494] => array()); goto bÖŞö‚È½‘; d”à¤ßÃ®¨: Model($A«©î™¬ê[162])->linkAdd($FÜƒå¿ºÎë[$A«©î™¬ê[492]]); $this->folderSizeReset($fçÃÄŸ«); $this->updateModifyTime($fçÃÄŸ«); goto eÁØùËæï®; d÷‰›¾ù ›: $A«©î™¬ê =& $_SERVER[şÅ²é¤èİ]; $eœ¥‚¦…é = $this->sourceInfo($BŞê¤îÕèî); $aÒŠ†ğåá = $this->sourceInfo($fçÃÄŸ«); goto f ¿î—©Šó; bÖŞö‚È½‘: $dÊŠÚ¡”ò = $this->fileNameExistCache($fçÃÄŸ«, $eœ¥‚¦…é[$A«©î™¬ê[28]]); $dŸ®×õ‚ÜÓ = $this->_copy($BŞê¤îÕèî, $fçÃÄŸ«, $F†ÙŠ‰Õ„Ñ, $FÜƒå¿ºÎë, !0, $eÀñ‘Ç‹À¨); $this->_childrenListClear(); goto f¢“¸ïğ’‘; fÜÄ‰ƒ‚ŒÕ: Model($A«©î™¬ê[495])->addAll($FÜƒå¿ºÎë[$A«©î™¬ê[493]], array(), !0); Model($A«©î™¬ê[496])->eventCopy($dŸ®×õ‚ÜÓ); $this->saveAll($FÜƒå¿ºÎë[$A«©î™¬ê[494]]); goto d”à¤ßÃ®¨; f ¿î—©Šó: if (!$eœ¥‚¦…é || !$aÒŠ†ğåá || $aÒŠ†ğåá[$A«©î™¬ê[364]] != $A«©î™¬ê[491]) { return !1; } if ($this->isParentOf($BŞê¤îÕèî, $fçÃÄŸ«)) { return !1; } $B©¼²ªÂ” = $eÀñ‘Ç‹À¨ ? $eÀñ‘Ç‹À¨ : $eœ¥‚¦…é[$A«©î™¬ê[28]]; goto AÜí†³…Šï; bªãÒ˜¥²: } private function _copy($aĞÜ‘ß¿óÃ, $fšâ­¯Ş»Æ, $cö¬Ãéù”ï, &$b¦îÍ­ ‰È, $BŒ„¯´®¼, $F¼Ñ‡â¿„ = '') { goto DĞêöí³­; DĞêöí³­: $dŒøÃŠÅ =& $_SERVER[şÅ²é¤èİ]; $aãÕ…±»Î‰ = $this->sourceInfoCache($aĞÜ‘ß¿óÃ); $FÒÄÄ±ë† = $aãÕ…±»Î‰[$dŒøÃŠÅ[364]] == $dŒøÃŠÅ[491]; goto bÊ†ã­›Åá; bÊ†ã­›Åá: $d–»«Ÿã†” = $F¼Ñ‡â¿„ ? $F¼Ñ‡â¿„ : $aãÕ…±»Î‰[$dŒøÃŠÅ[28]]; $dçŞò÷·ß° = $this->fileNameExistCache($fšâ­¯Ş»Æ, $d–»«Ÿã†”); if ($BŒ„¯´®¼) { $this->_childrenAllMake($aĞÜ‘ß¿óÃ); if ($FÒÄÄ±ë† && $dçŞò÷·ß°) { $this->_childrenAllMake($dçŞò÷·ß°); } } goto bø‘ÅÕÉÕ³; bø‘ÅÕÉÕ³: if (!$dçŞò÷·ß°) { return $this->_copyCreate($aĞÜ‘ß¿óÃ, $fšâ­¯Ş»Æ, $d–»«Ÿã†”, $b¦îÍ­ ‰È); } $eÏåÀÌµ’ = $dçŞò÷·ß°; if ($FÒÄÄ±ë†) { if ($cö¬Ãéù”ï == REPEAT_RENAME_FOLDER) { $d–»«Ÿã†” = $this->fileNameAutoCache($fšâ­¯Ş»Æ, $d–»«Ÿã†”, $cö¬Ãéù”ï, $FÒÄÄ±ë†); $eÏåÀÌµ’ = $this->_copyCreate($aĞÜ‘ß¿óÃ, $fšâ­¯Ş»Æ, $d–»«Ÿã†”, $b¦îÍ­ ‰È); } else { $CĞò¡±Ôøâ = $this->_childrenList($aĞÜ‘ß¿óÃ); foreach ($CĞò¡±Ôøâ as $AÂ÷Ÿ‰”æì) { $this->_copy($AÂ÷Ÿ‰”æì[$dŒøÃŠÅ[363]], $dçŞò÷·ß°, $cö¬Ãéù”ï, $b¦îÍ­ ‰È, !1); } } } else { if ($cö¬Ãéù”ï == REPEAT_RENAME || $cö¬Ãéù”ï == REPEAT_RENAME_FOLDER) { $d–»«Ÿã†” = $this->fileNameAutoCache($fšâ­¯Ş»Æ, $d–»«Ÿã†”, $cö¬Ãéù”ï, $FÒÄÄ±ë†); $eÏåÀÌµ’ = $this->_copyCreate($aĞÜ‘ß¿óÃ, $fšâ­¯Ş»Æ, $d–»«Ÿã†”, $b¦îÍ­ ‰È); } else { if ($cö¬Ãéù”ï == REPEAT_REPLACE) { $eéÃñÓ«¼Æ = $this->sourceInfoCache($dçŞò÷·ß°); $E—îÒ¬Ú‚ë = $this->fileHistory($eéÃñÓ«¼Æ, $aãÕ…±»Î‰[$dŒøÃŠÅ[412]], $aãÕ…±»Î‰[$dŒøÃŠÅ[78]]); if ($E—îÒ¬Ú‚ë) { $b¦îÍ­ ‰È[$dŒøÃŠÅ[492]][] = $aãÕ…±»Î‰[$dŒøÃŠÅ[412]]; } } else { if ($cö¬Ãéù”ï == REPEAT_SKIP) { } } } Hook::trigger($dŒøÃŠÅ[497], array($dŒøÃŠÅ[498], $aãÕ…±»Î‰, 0)); } goto e™òôµ´øÕ; e™òôµ´øÕ: return $eÏåÀÌµ’; goto e¨Éä±ËÖ¸; e¨Éä±ËÖ¸: } private function _copyCreate($EŸ—à¦£¹Ê, $Cæ‚‹Öò¸, $aê¨ã óÇ, &$fŸ¸ÌÙ­²) { goto AÇ³©çëàò; Aà…áÃƒ®ö: $this->chunkEventSet($AÈ¨”Ğ§Ÿ›[506], array($AÈ¨”Ğ§Ÿ›[507], $d³ËÓÊ£², $e¤îäÓÊ÷Ô)); $this->saveAll($eŠ«µÔõ¦); return $dâ‘†¸¸·; goto Eùäæîí•±; CŠ÷å«™“: $cŒõÌà­Ú = $this->sourceInfo($dâ‘†¸¸·); foreach ($Cï©«ääê as $CÌ¿²ô¡İ) { $c¹ÍÕŠœ„Õ = $this->_makeItemData($CÌ¿²ô¡İ, $cŒõÌà­Ú, $CÌ¿²ô¡İ[$AÈ¨”Ğ§Ÿ›[28]]); $c¹ÍÕŠœ„Õ[$AÈ¨”Ğ§Ÿ›[452]] = $CÌ¿²ô¡İ[$AÈ¨”Ğ§Ÿ›[452]]; $Bæ´Á§ ˜ª[] = $c¹ÍÕŠœ„Õ; } $this->chunkEventSet($AÈ¨”Ğ§Ÿ›[502], array($AÈ¨”Ğ§Ÿ›[503], $d³ËÓÊ£², $e¤îäÓÊ÷Ô)); goto E–ßö™†ª; AÇ³©çëàò: $AÈ¨”Ğ§Ÿ› =& $_SERVER[şÅ²é¤èİ]; $CĞèˆÈáàÆ = $this->sourceInfoCache($EŸ—à¦£¹Ê); $A½¯îõõ´Ö = $this->sourceInfoCache($Cæ‚‹Öò¸); goto DÊÖÈÒÙÚØ; aÁÃÁÕµ”ø: foreach ($a¾†ÂŠùê´ as $CÌ¿²ô¡İ) { $fº°‰½ê„½ = $CÌ¿²ô¡İ[$AÈ¨”Ğ§Ÿ›[363]]; $BÉà…ÉÑÏ = $this->_childrenMatch($aİŠœÒÜ§Â, $CÌ¿²ô¡İ, $cŒõÌà­Ú); $A” óÄô‹[] = array($AÈ¨”Ğ§Ÿ›[363], $fº°‰½ê„½, $AÈ¨”Ğ§Ÿ›[454], $BÉà…ÉÑÏ[$AÈ¨”Ğ§Ÿ›[454]]); $eŠ«µÔõ¦[] = array($AÈ¨”Ğ§Ÿ›[363], $fº°‰½ê„½, $AÈ¨”Ğ§Ÿ›[452], $BÉà…ÉÑÏ[$AÈ¨”Ğ§Ÿ›[452]]); $this->_copyApplyMeta($CÌ¿²ô¡İ, $fŸ¸ÌÙ­²); if ($CÌ¿²ô¡İ[$AÈ¨”Ğ§Ÿ›[364]] != $AÈ¨”Ğ§Ÿ›[491]) { $fŸ¸ÌÙ­²[$AÈ¨”Ğ§Ÿ›[492]][] = $CÌ¿²ô¡İ[$AÈ¨”Ğ§Ÿ›[412]]; } } $this->chunkEventSet($AÈ¨”Ğ§Ÿ›[504], array($AÈ¨”Ğ§Ÿ›[505], $d³ËÓÊ£², $e¤îäÓÊ÷Ô)); $this->saveAll($A” óÄô‹); goto Aà…áÃƒ®ö; DÊÖÈÒÙÚØ: $d³ËÓÊ£² = $this->_makeItemData($CĞèˆÈáàÆ, $A½¯îõõ´Ö, $aê¨ã óÇ); Hook::trigger($AÈ¨”Ğ§Ÿ›[499], $d³ËÓÊ£²); Hook::trigger($AÈ¨”Ğ§Ÿ›[500], array($AÈ¨”Ğ§Ÿ›[501], $d³ËÓÊ£², 0)); goto DÕõÜ´òï; DÕõÜ´òï: $dâ‘†¸¸· = $this->add($d³ËÓÊ£²); $C¼ğˆî¶Ê› = array($AÈ¨”Ğ§Ÿ›[363] => $dâ‘†¸¸·, $AÈ¨”Ğ§Ÿ›[28] => $aê¨ã óÇ); $this->_copyApplyMeta($C¼ğˆî¶Ê›, $fŸ¸ÌÙ­²); goto B›Ü–â­é¿; E–ßö™†ª: $this->addAll($Bæ´Á§ ˜ª, array(), !1); $a¾†ÂŠùê´ = $this->where(array($AÈ¨”Ğ§Ÿ›[454] => $dâ‘†¸¸·))->select(); $aİŠœÒÜ§Â = $this->_childrenMakeRelation($Cï©«ääê, $a¾†ÂŠùê´); goto Eª·ƒ›ÑŒ; B›Ü–â­é¿: if ($CĞèˆÈáàÆ[$AÈ¨”Ğ§Ÿ›[364]] != $AÈ¨”Ğ§Ÿ›[491]) { $fŸ¸ÌÙ­²[$AÈ¨”Ğ§Ÿ›[492]][] = $CĞèˆÈáàÆ[$AÈ¨”Ğ§Ÿ›[412]]; return $dâ‘†¸¸·; } $Cï©«ääê = array(); $Bæ´Á§ ˜ª = array(); goto DóÓ“°Ë¢ç; DóÓ“°Ë¢ç: $this->_childrenListAll($EŸ—à¦£¹Ê, $Cï©«ääê); $e¤îäÓÊ÷Ô = count($Cï©«ääê); if ($e¤îäÓÊ÷Ô == 0) { return $dâ‘†¸¸·; } goto CŠ÷å«™“; Eª·ƒ›ÑŒ: $aİŠœÒÜ§Â[$EŸ—à¦£¹Ê] = $dâ‘†¸¸·; $A” óÄô‹ = array(); $eŠ«µÔõ¦ = array(); goto aÁÃÁÕµ”ø; Eùäæîí•±: } private function _childrenMakeRelation($D ï”Æ•Ê, $AœŠëÍŒ¾) { $eîíµÉóØ =& $_SERVER[şÅ²é¤èİ]; $a’ŒÅÖ‰ = array(); $D½•ïŸË´É = array(); foreach ($D ï”Æ•Ê as $Aéó‘Ç†Ö¡) { $F¼Î••ÚïÌ = $Aéó‘Ç†Ö¡[$eîíµÉóØ[28]] . $eîíµÉóØ[8] . $Aéó‘Ç†Ö¡[$eîíµÉóØ[452]]; $a’ŒÅÖ‰[$F¼Î••ÚïÌ] = $Aéó‘Ç†Ö¡[$eîíµÉóØ[363]]; } foreach ($AœŠëÍŒ¾ as $Aéó‘Ç†Ö¡) { $F¼Î••ÚïÌ = $Aéó‘Ç†Ö¡[$eîíµÉóØ[28]] . $eîíµÉóØ[8] . $Aéó‘Ç†Ö¡[$eîíµÉóØ[452]]; $D«óÌé­¶Ñ = $a’ŒÅÖ‰[$F¼Î••ÚïÌ]; $D½•ïŸË´É[$D«óÌé­¶Ñ] = $Aéó‘Ç†Ö¡[$eîíµÉóØ[363]]; } return $D½•ïŸË´É; } private function _childrenMatch($d×²…Œ÷¨Ì, $b›ñà¨‘·¦, $D³‹¸«Æ½Ã) { goto E¦å†¦È¾Ï; E¦å†¦È¾Ï: $Böê«¥¹Í =& $_SERVER[şÅ²é¤èİ]; $fµ½™³ù“á = $D³‹¸«Æ½Ã[$Böê«¥¹Í[452]]; $fàó¹Óé = $this->parentLevelArray($b›ñà¨‘·¦[$Böê«¥¹Í[452]]); goto dÛĞñŠ‡¾; dÛĞñŠ‡¾: foreach ($fàó¹Óé as $EâŞˆÖäÃ) { if (isset($d×²…Œ÷¨Ì[$EâŞˆÖäÃ])) { $fµ½™³ù“á .= $d×²…Œ÷¨Ì[$EâŞˆÖäÃ] . $Böê«¥¹Í[508]; } } $fµ½™³ù“á = rtrim($fµ½™³ù“á, $Böê«¥¹Í[47]) . $Böê«¥¹Í[47]; $a”ÆØŒáƒ = $this->parentLevelArray($fµ½™³ù“á); goto dé‰İÀõÙ¶; dé‰İÀõÙ¶: $b½‡‡Çù·œ = $a”ÆØŒáƒ[count($a”ÆØŒáƒ) - 1]; return array($Böê«¥¹Í[454] => $b½‡‡Çù·œ, $Böê«¥¹Í[452] => $fµ½™³ù“á); goto DÁã—ƒá¦Ù; DÁã—ƒá¦Ù: } private function _makeItemData($C¥’ØºÎ¤, $cÔ™¾¬ˆÖ, $aÅŸ¹„é») { $e·êä§õêÇ =& $_SERVER[şÅ²é¤èİ]; $cé§µ‚ä¿ = array($e·êä§õêÇ[509] => $C¥’ØºÎ¤[$e·êä§õêÇ[364]], $e·êä§õêÇ[380] => $aÅŸ¹„é», $e·êä§õêÇ[510] => $C¥’ØºÎ¤[$e·êä§õêÇ[366]], $e·êä§õêÇ[413] => $C¥’ØºÎ¤[$e·êä§õêÇ[412]], $e·êä§õêÇ[511] => $C¥’ØºÎ¤[$e·êä§õêÇ[78]], $e·êä§õêÇ[512] => $cÔ™¾¬ˆÖ[$e·êä§õêÇ[365]], $e·êä§õêÇ[513] => $cÔ™¾¬ˆÖ[$e·êä§õêÇ[449]], $e·êä§õêÇ[514] => USER_ID, $e·êä§õêÇ[515] => USER_ID, $e·êä§õêÇ[362] => $cÔ™¾¬ˆÖ[$e·êä§õêÇ[363]], $e·êä§õêÇ[516] => $cÔ™¾¬ˆÖ[$e·êä§õêÇ[452]] . $cÔ™¾¬ˆÖ[$e·êä§õêÇ[363]] . $e·êä§õêÇ[47], $e·êä§õêÇ[389] => 0); return $cé§µ‚ä¿; } private function _copyApplyMeta($FªºâáÉ, &$B°Óæ†ì©Ö) { $aÑ‡’æöÄ =& $_SERVER[şÅ²é¤èİ]; $A„¤‘ ¤‰Ÿ = $FªºâáÉ[$aÑ‡’æöÄ[363]]; $C¶“”èí×™ = $FªºâáÉ[$aÑ‡’æöÄ[28]]; if (!isset($FªºâáÉ[$aÑ‡’æöÄ[517]]) || !$FªºâáÉ[$aÑ‡’æöÄ[517]] || $FªºâáÉ[$aÑ‡’æöÄ[517]] == $aÑ‡’æöÄ[461]) { $B°Óæ†ì©Ö[$aÑ‡’æöÄ[494]][] = array($aÑ‡’æöÄ[363], $A„¤‘ ¤‰Ÿ, $aÑ‡’æöÄ[517], short_id($A„¤‘ ¤‰Ÿ)); } if (Input::check($C¶“”èí×™, $aÑ‡’æöÄ[518])) { $B°Óæ†ì©Ö[$aÑ‡’æöÄ[493]][] = array($aÑ‡’æöÄ[363] => $A„¤‘ ¤‰Ÿ, $aÑ‡’æöÄ[88] => $aÑ‡’æöÄ[409], $aÑ‡’æöÄ[351] => str_replace($aÑ‡’æöÄ[50], $aÑ‡’æöÄ[33], Pinyin::encode($C¶“”èí×™))); $B°Óæ†ì©Ö[$aÑ‡’æöÄ[493]][] = array($aÑ‡’æöÄ[363] => $A„¤‘ ¤‰Ÿ, $aÑ‡’æöÄ[88] => $aÑ‡’æöÄ[408], $aÑ‡’æöÄ[351] => Pinyin::encode($C¶“”èí×™, $aÑ‡’æöÄ[519])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($BÆ¾ëù Ã) { goto BÉÌ©µØ…›; BÉÌ©µØ…›: $Eñ‰å³ÌÊ¹ =& $_SERVER[şÅ²é¤èİ]; $F›ÌãùÇÇ› = $this->sourceInfo($BÆ¾ëù Ã); $Aâ»«½²»Ÿ = $Eñ‰å³ÌÊ¹[520]; goto F½›‹æ‹Ö; C¬³Ö‚¼éÜ: $c•Š­åÂ = array_to_keyvalue($c•Š­åÂ, $Eñ‰å³ÌÊ¹[363]); foreach ($c•Š­åÂ as $cÃ½ƒÚ†ñÍ) { $b©©ºò†÷Ù = $cÃ½ƒÚ†ñÍ[$Eñ‰å³ÌÊ¹[454]]; $BÆ¾ëù Ã = $cÃ½ƒÚ†ñÍ[$Eñ‰å³ÌÊ¹[363]]; if (!isset($this->_childrenListCache[$BÆ¾ëù Ã]) && $cÃ½ƒÚ†ñÍ[$Eñ‰å³ÌÊ¹[364]] == $Eñ‰å³ÌÊ¹[491]) { $this->_childrenListCache[$BÆ¾ëù Ã] = array(); } if (!isset($this->_childrenListCache[$b©©ºò†÷Ù])) { $this->_childrenListCache[$b©©ºò†÷Ù] = array(); } $this->_childrenListCache[$b©©ºò†÷Ù][$BÆ¾ëù Ã] = $cÃ½ƒÚ†ñÍ; $this->_childrenItemCache[$BÆ¾ëù Ã] = $cÃ½ƒÚ†ñÍ; } goto C»¯¸İ”Â; F½›‹æ‹Ö: $Cİ“ÖùÚÄÆ = array($Eñ‰å³ÌÊ¹[452] => array($Eñ‰å³ÌÊ¹[473], $F›ÌãùÇÇ›[$Eñ‰å³ÌÊ¹[452]] . $BÆ¾ëù Ã . $Eñ‰å³ÌÊ¹[474]), $Eñ‰å³ÌÊ¹[390] => 0); $c•Š­åÂ = $this->field($Aâ»«½²»Ÿ)->where($Cİ“ÖùÚÄÆ)->select(); if (!$c•Š­åÂ) { return; } goto C¬³Ö‚¼éÜ; C»¯¸İ”Â: } private function _childrenListAll($AºĞØÙá‹, &$CÔÑƒ”ÚÏ‰) { $eà¨œ’–Ç =& $_SERVER[şÅ²é¤èİ]; if (!isset($this->_childrenListCache[$AºĞØÙá‹])) { return; } $AĞ‘Ëò’’… = $this->_childrenListCache[$AºĞØÙá‹]; foreach ($AĞ‘Ëò’’… as $Dß¸‘Ë‰·ƒ => $CèŞËùÜ×¯) { $CÔÑƒ”ÚÏ‰[$Dß¸‘Ë‰·ƒ] = $CèŞËùÜ×¯; if ($CèŞËùÜ×¯[$eà¨œ’–Ç[364]] == $eà¨œ’–Ç[491]) { $this->_childrenListAll($Dß¸‘Ë‰·ƒ, $CÔÑƒ”ÚÏ‰); } } } private function sourceInfoCache($FŠ…Ù¸¤À ) { if (isset($this->_childrenItemCache[$FŠ…Ù¸¤À ])) { return $this->_childrenItemCache[$FŠ…Ù¸¤À ]; } return $this->sourceInfo($FŠ…Ù¸¤À ); } private function _childrenList($AùÆÄÉ• ¶) { if (isset($this->_childrenListCache[$AùÆÄÉ• ¶])) { return $this->_childrenListCache[$AùÆÄÉ• ¶]; } return $this->_childrenListSelect($AùÆÄÉ• ¶); } private function _childrenListSelect($F‚ÌÊ‘º×Ø) { goto f”´»ğÑÍ¹; c…¿è¯Æá«: $BÙá»â°´‚ = $BÙá»â°´‚ ? $BÙá»â°´‚ : array(); $CØ·­”İåŠ = array_to_keyvalue($BÙá»â°´‚, $d±éôĞ’‡[363]); $this->_childrenListCache[$F‚ÌÊ‘º×Ø] = $CØ·­”İåŠ; goto eùáˆô¸©; eùáˆô¸©: foreach ($CØ·­”İåŠ as $F‚ÌÊ‘º×Ø => $Aí…ƒİë´í) { $this->_childrenItemCache[$F‚ÌÊ‘º×Ø] = $Aí…ƒİë´í; } return $CØ·­”İåŠ; goto cÎœ¯ÉéÅœ; f”´»ğÑÍ¹: $d±éôĞ’‡ =& $_SERVER[şÅ²é¤èİ]; $a¡‹ÚŒ¿š„ = array($d±éôĞ’‡[454] => $F‚ÌÊ‘º×Ø, $d±éôĞ’‡[390] => 0); $BÙá»â°´‚ = $this->where($a¡‹ÚŒ¿š„)->select(); goto c…¿è¯Æá«; cÎœ¯ÉéÅœ: } private function fileNameExistCache($Bµ²ÍÑâë, $fŠŞ¸Äó›á) { $c¹”ƒåã =& $_SERVER[şÅ²é¤èİ]; $fŠŞ¸Äó›á = strtolower($fŠŞ¸Äó›á); $Bµ»Şñ•Õ˜ = $this->_childrenList($Bµ²ÍÑâë); foreach ($Bµ»Şñ•Õ˜ as $eÖğÍ—Å¡í) { if ($fŠŞ¸Äó›á == strtolower($eÖğÍ—Å¡í[$c¹”ƒåã[28]])) { return $eÖğÍ—Å¡í[$c¹”ƒåã[363]]; } } return !1; } private function fileNameAutoCache($A¦İ­±ôÄ, $E¨¦Âùö¼´, $c¼ìóÖœ¥¹, $d¢½ÓˆÇã¢) { $EÚĞªƒÖ¸ =& $_SERVER[şÅ²é¤èİ]; $CÜ½Å‘æŞ‘ = $this->_childrenList($A¦İ­±ôÄ); $Cê¡›ëõ£å = array_to_keyvalue($CÜ½Å‘æŞ‘, $EÚĞªƒÖ¸[33], $EÚĞªƒÖ¸[28]); return $this->fileNameAutoGet($Cê¡›ëõ£å, $E¨¦Âùö¼´, $c¼ìóÖœ¥¹, $d¢½ÓˆÇã¢); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($F’Üª¸ìª‚, $fà†äçößß, $AÂëß£¥Œ = REPEAT_REPLACE, $E„ŞÁšÂá = '') { goto d¹Ã…¼ÆÃ¹; f÷š­ïÃ‰±: $f¨‹äÑ¡â„ = $this->pathInfoMore($F’Üª¸ìª‚); if ($this->isParentOf($F’Üª¸ìª‚, $fà†äçößß)) { return !1; } if (!$bç™¯î–´½ || !$E¨¢¼µ’³† || $E¨¢¼µ’³†[$aÃ˜¤Êá×é[364]] != $aÃ˜¤Êá×é[491]) { return !1; } goto F°Ì±İÊİÖ; B‰®‰œíò: $this->clearShare($F’Üª¸ìª‚, $fà†äçößß); $dÇ²åµ‚Ô½ = $this->fileNameExistCache($fà†äçößß, $bç™¯î–´½[$aÃ˜¤Êá×é[28]]); $c‚Î£°ªñÌ = $this->_move($F’Üª¸ìª‚, $fà†äçößß, $AÂëß£¥Œ, $AïùùŒš, $E„ŞÁšÂá); goto D©Ú»ôÈò; AÛŠòƒëƒ‘: $this->lockMoveStart($F’Üª¸ìª‚); $this->lockWriteStart($fà†äçößß, $eÖÓŸé§«); $AïùùŒš = array($aÃ˜¤Êá×é[492] => array(), $aÃ˜¤Êá×é[523] => !1); goto B‰®‰œíò; D©Ú»ôÈò: $this->sourceCacheClear(); if ($bç™¯î–´½[$aÃ˜¤Êá×é[364]] == $aÃ˜¤Êá×é[491] && $dÇ²åµ‚Ô½) { $this->folderSizeResetChildren($c‚Î£°ªñÌ); } Model($aÃ˜¤Êá×é[162])->linkAdd($AïùùŒš[$aÃ˜¤Êá×é[492]]); goto cêİ·–¶”Ş; d¹Ã…¼ÆÃ¹: $aÃ˜¤Êá×é =& $_SERVER[şÅ²é¤èİ]; $bç™¯î–´½ = $this->sourceInfo($F’Üª¸ìª‚); $E¨¢¼µ’³† = $this->sourceInfo($fà†äçößß); goto f÷š­ïÃ‰±; F°Ì±İÊİÖ: Hook::trigger($aÃ˜¤Êá×é[521], $f¨‹äÑ¡â„); if ($bç™¯î–´½[$aÃ˜¤Êá×é[454]] == $fà†äçößß && $E„ŞÁšÂá != $bç™¯î–´½[$aÃ˜¤Êá×é[28]]) { $dßõğ¦ÃÖš = $this->fileNameExist($fà†äçößß, $E„ŞÁšÂá); if ($dßõğ¦ÃÖš && $bç™¯î–´½[$aÃ˜¤Êá×é[364]] == $aÃ˜¤Êá×é[461]) { goto F†Ë­Íºğñ; dùáã÷‘±: return $dßõğ¦ÃÖš; goto F‰²ˆÂ°Å; eÒ‡âò¬œ›: $this->remove($F’Üª¸ìª‚, !1); $this->folderSizeReset($fà†äçößß); Hook::trigger($aÃ˜¤Êá×é[522], $f¨‹äÑ¡â„); goto dùáã÷‘±; F†Ë­Íºğñ: $A•¥â‚šŠ¹ = $this->sourceInfo($dßõğ¦ÃÖš); $b•ÊíßÎ…£ = $this->fileHistory($A•¥â‚šŠ¹, $bç™¯î–´½[$aÃ˜¤Êá×é[412]], $bç™¯î–´½[$aÃ˜¤Êá×é[78]]); if (!$b•ÊíßÎ…£) { Model($aÃ˜¤Êá×é[415])->remove($bç™¯î–´½[$aÃ˜¤Êá×é[412]]); } goto eÒ‡âò¬œ›; F‰²ˆÂ°Å: } } $eÖÓŸé§« = $E„ŞÁšÂá ? $E„ŞÁšÂá : $bç™¯î–´½[$aÃ˜¤Êá×é[28]]; goto AÛŠòƒëƒ‘; b¥ÎÁ¡ÉÆá: if ($bç™¯î–´½[$aÃ˜¤Êá×é[364]] == $aÃ˜¤Êá×é[491]) { $B¶İöÄ›ÚÓ[] = $F’Üª¸ìª‚; } $this->updateModifyTime($B¶İöÄ›ÚÓ); Model($aÃ˜¤Êá×é[496])->eventMove($F’Üª¸ìª‚, $bç™¯î–´½[$aÃ˜¤Êá×é[454]], $fà†äçößß); goto CÙÒ¤‚šó; cêİ·–¶”Ş: if ($dÇ²åµ‚Ô½ && $AïùùŒš[$aÃ˜¤Êá×é[523]]) { $this->remove($F’Üª¸ìª‚, !1); } $this->lockMoveEnd($F’Üª¸ìª‚); $this->lockWriteEnd($fà†äçößß, $eÖÓŸé§«); goto Eµéƒƒõˆ„; CÙÒ¤‚šó: Hook::trigger($aÃ˜¤Êá×é[522], $f¨‹äÑ¡â„); return $c‚Î£°ªñÌ; goto C˜ªˆì; Eµéƒƒõˆ„: $this->folderSizeReset($bç™¯î–´½[$aÃ˜¤Êá×é[454]]); $this->folderSizeReset($fà†äçößß); $B¶İöÄ›ÚÓ = array($bç™¯î–´½[$aÃ˜¤Êá×é[454]], $fà†äçößß); goto b¥ÎÁ¡ÉÆá; C˜ªˆì: } private function _move($b•³Àò•‹ , $cÅÌÓÉ¨¨, $e­À–²øôé, &$FëĞÉ¸îÒ, $B¶ª—ï–ÅÁ = '') { goto bÑÌ®Œô½Ç; dÌËêêí¢à: return $c¨õ©ª´ÔÌ; goto A÷‡¬ÔÙ»; bå•‰áÁØƒ: $Bâ¾Ë¸« = $B¶ª—ï–ÅÁ ? $B¶ª—ï–ÅÁ : $c‹î‹Ìƒøº[$dÜì†Ë—·[28]]; $DĞ°±é¡î— = $this->fileNameExistCache($cÅÌÓÉ¨¨, $Bâ¾Ë¸«); $this->lockMoveStart($b•³Àò•‹ ); goto c˜ï‰÷ÇÜ; bøÏÇšæÎ: $C¿²Â˜‹ª = !1; if ($D°‹ĞÎ¨î¼) { if ($e­À–²øôé == REPEAT_RENAME_FOLDER) { $Bâ¾Ë¸« = $this->fileNameAuto($cÅÌÓÉ¨¨, $Bâ¾Ë¸«, $e­À–²øôé, $D°‹ĞÎ¨î¼); $c¨õ©ª´ÔÌ = $this->_moveForce($b•³Àò•‹ , $cÅÌÓÉ¨¨, $Bâ¾Ë¸«); } else { if ($e­À–²øôé == REPEAT_RENAME_FOLDER) { $e­À–²øôé = REPEAT_RENAME; } $c¾êç £Ú = $this->_childrenListSelect($b•³Àò•‹ ); foreach ($c¾êç £Ú as $E¬ºë³„Û) { $this->_move($E¬ºë³„Û[$dÜì†Ë—·[363]], $DĞ°±é¡î—, $e­À–²øôé, $FëĞÉ¸îÒ); } $C¿²Â˜‹ª = !0; } } else { if ($e­À–²øôé == REPEAT_SKIP) { $C¿²Â˜‹ª = !0; } else { if ($e­À–²øôé == REPEAT_RENAME || $e­À–²øôé == REPEAT_RENAME_FOLDER) { $Bâ¾Ë¸« = $this->fileNameAuto($cÅÌÓÉ¨¨, $Bâ¾Ë¸«, $e­À–²øôé, $D°‹ĞÎ¨î¼); $c¨õ©ª´ÔÌ = $this->_moveForce($b•³Àò•‹ , $cÅÌÓÉ¨¨, $Bâ¾Ë¸«); } else { if ($e­À–²øôé == REPEAT_REPLACE) { $Cô‘îÅ¾íù = $this->sourceInfoCache($DĞ°±é¡î—); $FÆ­ÏÏäø„ = $this->fileHistory($Cô‘îÅ¾íù, $c‹î‹Ìƒøº[$dÜì†Ë—·[412]], $c‹î‹Ìƒøº[$dÜì†Ë—·[78]]); if ($FÆ­ÏÏäø„) { $FëĞÉ¸îÒ[$dÜì†Ë—·[492]][] = $c‹î‹Ìƒøº[$dÜì†Ë—·[412]]; } else { $C¿²Â˜‹ª = !0; } } } } } if ($C¿²Â˜‹ª && !$FëĞÉ¸îÒ[$dÜì†Ë—·[523]]) { $FëĞÉ¸îÒ[$dÜì†Ë—·[523]] = !0; } goto dÌËêêí¢à; c˜ï‰÷ÇÜ: $this->lockWriteStart($cÅÌÓÉ¨¨, $Bâ¾Ë¸«); if (!$DĞ°±é¡î—) { return $this->_moveForce($b•³Àò•‹ , $cÅÌÓÉ¨¨, $Bâ¾Ë¸«); } $c¨õ©ª´ÔÌ = $DĞ°±é¡î—; goto bøÏÇšæÎ; bÑÌ®Œô½Ç: $dÜì†Ë—· =& $_SERVER[şÅ²é¤èİ]; $c‹î‹Ìƒøº = $this->sourceInfo($b•³Àò•‹ ); $D°‹ĞÎ¨î¼ = $c‹î‹Ìƒøº[$dÜì†Ë—·[364]] == $dÜì†Ë—·[491]; goto bå•‰áÁØƒ; A÷‡¬ÔÙ»: } private function _moveForce($b¡ˆá×ôÇ°, $E¦ò—ô‰, $aÓÚ‹ìñºÏ) { goto e¹Äš„ ä¢; e¹Äš„ ä¢: $fŞÔ­êæØ =& $_SERVER[şÅ²é¤èİ]; $C‹Ó½Ø¯å× = $this->sourceInfo($b¡ˆá×ôÇ°); $E¶˜©å·‘‹ = $this->sourceInfo($E¦ò—ô‰); goto Bš®ÂÒå¸; b”ŞõŸ¤•ê: if (!$Eù¾¹Ô£ğ) { Model($fŞÔ­êæØ[447])->authClear($b¡ˆá×ôÇ°); } if ($AÛ£‹›‡õì) { $f°øõÖ˜½ = array($fŞÔ­êæØ[516] => array($fŞÔ­êæØ[473], $C‹Ó½Ø¯å×[$fŞÔ­êæØ[452]] . $C‹Ó½Ø¯å×[$fŞÔ­êæØ[363]] . $fŞÔ­êæØ[474])); $d¼·³åÑÖõ = $C‹Ó½Ø¯å×[$fŞÔ­êæØ[452]] . $C‹Ó½Ø¯å×[$fŞÔ­êæØ[363]] . $fŞÔ­êæØ[47]; $CÒÁ Æë¡½ = $E¶˜©å·‘‹[$fŞÔ­êæØ[452]] . $E¶˜©å·‘‹[$fŞÔ­êæØ[363]] . $fŞÔ­êæØ[47] . $C‹Ó½Ø¯å×[$fŞÔ­êæØ[363]] . $fŞÔ­êæØ[47]; $bÉŒˆÏ®ğ = array($fŞÔ­êæØ[516] => array($fŞÔ­êæØ[524], "\x72\145\x70\x6c\141\x63\x65\50\x70\141\162\145\x6e\x74\114\145\x76\145\154\x2c\47{$d¼·³åÑÖõ}\x27\54\47{$CÒÁ Æë¡½}\x27\51"), $fŞÔ­êæØ[512] => $E¶˜©å·‘‹[$fŞÔ­êæØ[365]], $fŞÔ­êæØ[513] => $E¶˜©å·‘‹[$fŞÔ­êæØ[449]], $fŞÔ­êæØ[389] => 0); $this->where($f°øõÖ˜½)->data($bÉŒˆÏ®ğ)->save(); } $this->where(array($fŞÔ­êæØ[377] => $b¡ˆá×ôÇ°))->data($FˆÛÀ‹óŒ˜)->save(); goto c¸™åã¾ªë; c¸™åã¾ªë: return $b¡ˆá×ôÇ°; goto AÚáäœ£…ó; Bš®ÂÒå¸: $AÛ£‹›‡õì = $C‹Ó½Ø¯å×[$fŞÔ­êæØ[364]] == $fŞÔ­êæØ[491]; $FˆÛÀ‹óŒ˜ = array($fŞÔ­êæØ[362] => $E¶˜©å·‘‹[$fŞÔ­êæØ[363]], $fŞÔ­êæØ[516] => $E¶˜©å·‘‹[$fŞÔ­êæØ[452]] . $E¶˜©å·‘‹[$fŞÔ­êæØ[363]] . $fŞÔ­êæØ[47], $fŞÔ­êæØ[512] => $E¶˜©å·‘‹[$fŞÔ­êæØ[365]], $fŞÔ­êæØ[513] => $E¶˜©å·‘‹[$fŞÔ­êæØ[449]], $fŞÔ­êæØ[515] => USER_ID, $fŞÔ­êæØ[389] => 0, $fŞÔ­êæØ[380] => $aÓÚ‹ìñºÏ); $Eù¾¹Ô£ğ = $C‹Ó½Ø¯å×[$fŞÔ­êæØ[365]] == SourceModel::TYPE_GROUP && $E¶˜©å·‘‹[$fŞÔ­êæØ[365]] == SourceModel::TYPE_GROUP && $C‹Ó½Ø¯å×[$fŞÔ­êæØ[449]] == $E¶˜©å·‘‹[$fŞÔ­êæØ[449]]; goto b”ŞõŸ¤•ê; AÚáäœ£…ó: } private function clearShare($f®…Ìãˆí¼, $CÍ‘Œ ÛŞ) { goto dˆàˆ£È¯ˆ; dˆàˆ£È¯ˆ: $d‘áºôˆ‹î =& $_SERVER[şÅ²é¤èİ]; $Bæõš•Ş„× = $this->sourceInfo($f®…Ìãˆí¼); $DÍ§ ßÚƒß = $this->sourceInfo($CÍ‘Œ ÛŞ); goto cíÙ‘§ŞñÁ; b÷é³‘¯¿Ö: if (!$d—²ˆƒ£–) { return; } $d—²ˆƒ£– = array_to_keyvalue($d—²ˆƒ£–, $d‘áºôˆ‹î[33], $d‘áºôˆ‹î[434]); $Bí¼ƒ™’ï½ = array($d‘áºôˆ‹î[434] => array($d‘áºôˆ‹î[7], $d—²ˆƒ£–)); goto D†¶ƒ–Â; FÆ¼½•»ğ: if (!$aùâÅğ¡í´) { return; } $Bí¼ƒ™’ï½ = array($d‘áºôˆ‹î[363] => array($d‘áºôˆ‹î[7], $aùâÅğ¡í´), $d‘áºôˆ‹î[441] => 1); $d—²ˆƒ£– = Model($d‘áºôˆ‹î[526])->field($d‘áºôˆ‹î[434])->where($Bí¼ƒ™’ï½)->select(); goto b÷é³‘¯¿Ö; D†¶ƒ–Â: Model($d‘áºôˆ‹î[526])->where($Bí¼ƒ™’ï½)->save(array($d‘áºôˆ‹î[441] => 0)); Model($d‘áºôˆ‹î[527])->where($Bí¼ƒ™’ï½)->delete(); goto eÆíˆç’è¥; cíÙ‘§ŞñÁ: if ($Bæõš•Ş„×[$d‘áºôˆ‹î[449]] == $DÍ§ ßÚƒß[$d‘áºôˆ‹î[449]] && $Bæõš•Ş„×[$d‘áºôˆ‹î[365]] == $d‘áºôˆ‹î[525]) { return; } $Bí¼ƒ™’ï½ = array($d‘áºôˆ‹î[452] => array($d‘áºôˆ‹î[473], $Bæõš•Ş„×[$d‘áºôˆ‹î[452]] . $f®…Ìãˆí¼ . $d‘áºôˆ‹î[474]), $d‘áºôˆ‹î[390] => 0); $aùâÅğ¡í´ = $this->field($d‘áºôˆ‹î[377])->where($Bí¼ƒ™’ï½)->getField($d‘áºôˆ‹î[363], !0); goto FÆ¼½•»ğ; eÆíˆç’è¥: } public function copyFolderFromIO($bÔÃÑšáÎ, $a©­ªå¾‚º, $BùÒù£ç‚ò, $d‹¡ôÖ¿¦Š, $Côô˜…¢½ğ) { goto e “©“È……; b¿éìŠùóŒ: if ($E¿’‡´Ü„) { $this->_childrenAllMake($E¿’‡´Ü„); } Hook::trigger($D’»ò«Â‹Í[529]); $this->_copyChildTo($bÔÃÑšáÎ, $a©­ªå¾‚º, $CÛæçâÑ¥, $d‹¡ôÖ¿¦Š, $C³™Ö÷•®Î, $Côô˜…¢½ğ); goto F©È§Ç¨£; c–ÓÛ¹õÔ: $this->updateModifyTime($BùÒù£ç‚ò); return $CÛæçâÑ¥; goto d•ÉÌğÇù; e “©“È……: $D’»ò«Â‹Í =& $_SERVER[şÅ²é¤èİ]; $C³™Ö÷•®Î = array($D’»ò«Â‹Í[493] => array(), $D’»ò«Â‹Í[494] => array(), $D’»ò«Â‹Í[492] => array(), $D’»ò«Â‹Í[528] => array()); $B×­Éô×ˆ = $bÔÃÑšáÎ->getPathName($bÔÃÑšáÎ->pathThis($a©­ªå¾‚º)); goto eâˆ‹ÜƒÌ”; eô½î˜Â‹ó: Model($D’»ò«Â‹Í[415])->linkAdd($C³™Ö÷•®Î[$D’»ò«Â‹Í[492]]); Model($D’»ò«Â‹Í[415])->remove($C³™Ö÷•®Î[$D’»ò«Â‹Í[528]]); $this->folderSizeReset($BùÒù£ç‚ò); goto c–ÓÛ¹õÔ; E¥ØÙõà„: Model($D’»ò«Â‹Í[495])->addAll($C³™Ö÷•®Î[$D’»ò«Â‹Í[493]], array(), !0); Model($D’»ò«Â‹Í[496])->eventCopy($CÛæçâÑ¥); $this->saveAll($C³™Ö÷•®Î[$D’»ò«Â‹Í[494]]); goto eô½î˜Â‹ó; F©È§Ç¨£: Hook::trigger($D’»ò«Â‹Í[530]); if ($CÛæçâÑ¥) { $this->folderSizeResetChildren($CÛæçâÑ¥); } $this->_childrenListClear(); goto E¥ØÙõà„; eâˆ‹ÜƒÌ”: $E¿’‡´Ü„ = $this->fileNameExist($BùÒù£ç‚ò, $B×­Éô×ˆ); $CÛæçâÑ¥ = $this->mkdir($BùÒù£ç‚ò, $B×­Éô×ˆ, $d‹¡ôÖ¿¦Š); if (!$E¿’‡´Ü„ || $d‹¡ôÖ¿¦Š == REPEAT_RENAME_FOLDER) { $d‹¡ôÖ¿¦Š = !1; } goto b¿éìŠùóŒ; d•ÉÌğÇù: } private function _copyChildTo($EğÓ·ñ’¯¢, $cá‘Şœ½ÕÏ, $D¬¬œµ¢¢ã, $B¤Å¬Âé, &$DñÀ‰Á»åµ, $e—ç‰ß¹Ğ¯) { goto A£ÃÜ“ÊÛÉ; A£ÃÜ“ÊÛÉ: $F¥ÉŒÒ›–« =& $_SERVER[şÅ²é¤èİ]; $a½Ì¦º—Ç = $this->sourceInfoCache($D¬¬œµ¢¢ã); $D¾÷À÷×ß = $EğÓ·ñ’¯¢->listPath($cá‘Şœ½ÕÏ, !1, !0); goto eáÓÄÃªˆ; F´ªóíÓİ­: foreach ($dÔ÷¼‚£­Í as &$bÊ²øÀ¦¼´) { goto B‘å³¡¨; F¯‘´›ß¦¦: if ($B¤Å¬Âé) { $e¾Šò™Â²“ = $this->fileNameExistCache($D¬¬œµ¢¢ã, $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]]); if ($e¾Šò™Â²“) { if ($bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[364]] || $B¤Å¬Âé == REPEAT_SKIP) { continue; } if ($B¤Å¬Âé == REPEAT_REPLACE) { $b…”Ï³ß¤¥ = $this->sourceInfoCache($e¾Šò™Â²“); $EÜŞøÑéˆ÷ = $this->fileHistory($b…”Ï³ß¤¥, $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]], $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[78]]); if ($EÜŞøÑéˆ÷) { $DñÀ‰Á»åµ[$F¥ÉŒÒ›–«[492]][] = $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]]; } continue; } else { if ($B¤Å¬Âé == REPEAT_RENAME) { $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]] = $this->fileNameAutoCache($D¬¬œµ¢¢ã, $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]], $B¤Å¬Âé, !1); } } } } if (!$bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[364]] && $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]]) { $DñÀ‰Á»åµ[$F¥ÉŒÒ›–«[492]][] = $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]]; } $b‘øë‹´·Ã[] = $this->_makeItemData($bÊ²øÀ¦¼´, $a½Ì¦º—Ç, $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]]); goto F¼¼°ô¤°º; cœŸà¬œÒë: $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[78]] = _get($bÊ²øÀ¦¼´, $F¥ÉŒÒ›–«[78], 0); $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]] = _get($bÊ²øÀ¦¼´, $F¥ÉŒÒ›–«[412], 0); if (!isset($bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[531]]) && $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]]) { $DñÀ‰Á»åµ[$F¥ÉŒÒ›–«[528]][] = $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[412]]; } goto F¯‘´›ß¦¦; B‘å³¡¨: if (isset($Dæ¦‰Ñ·  [$bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]]])) { $bÊ²øÀ¦¼´ = $Dæ¦‰Ñ·  [$bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]]]; } $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[364]] = $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[29]] == $F¥ÉŒÒ›–«[77]; $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[366]] = _get($bÊ²øÀ¦¼´, $F¥ÉŒÒ›–«[155], $F¥ÉŒÒ›–«[33]); goto cœŸà¬œÒë; F¼¼°ô¤°º: } unset($bÊ²øÀ¦¼´); if (!empty($b‘øë‹´·Ã)) { $this->addAll($b‘øë‹´·Ã); } goto d½Ì½ƒ¿; d½Ì½ƒ¿: $BĞ«±›ëØµ = $this->_childrenList($D¬¬œµ¢¢ã); $BĞ«±›ëØµ = array_to_keyvalue($BĞ«±›ëØµ, $F¥ÉŒÒ›–«[28]); foreach ($dÔ÷¼‚£­Í as $bÊ²øÀ¦¼´) { $b…”Ï³ß¤¥ = $BĞ«±›ëØµ[$bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[28]]]; $cÉ÷òĞäùÒ = $b…”Ï³ß¤¥[$F¥ÉŒÒ›–«[363]]; $this->_copyApplyMeta($b…”Ï³ß¤¥, $DñÀ‰Á»åµ); if ($bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[29]] == $F¥ÉŒÒ›–«[77]) { $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[76]] = $EğÓ·ñ’¯¢->getPathInner($bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[76]]); $this->_copyChildTo($EğÓ·ñ’¯¢, $bÊ²øÀ¦¼´[$F¥ÉŒÒ›–«[76]], $cÉ÷òĞäùÒ, $B¤Å¬Âé, $DñÀ‰Á»åµ, $e—ç‰ß¹Ğ¯); } } goto e†ˆ¹‘ŞŞ; eáÓÄÃªˆ: $dÔ÷¼‚£­Í = array_merge($D¾÷À÷×ß[$F¥ÉŒÒ›–«[74]], $D¾÷À÷×ß[$F¥ÉŒÒ›–«[75]]); $Dæ¦‰Ñ·   = $this->_addFiles($EğÓ·ñ’¯¢, $D¾÷À÷×ß[$F¥ÉŒÒ›–«[74]], $e—ç‰ß¹Ğ¯); $b‘øë‹´·Ã = array(); goto F´ªóíÓİ­; e†ˆ¹‘ŞŞ: } private function _addFiles($A¬éšõß, $DØ§Öµìœ, $A¡áÈ…é³») { goto DŒÌ‘„‹Ôé; DŒÌ‘„‹Ôé: $E“˜ëõÆ¶½ =& $_SERVER[şÅ²é¤èİ]; if (!$DØ§Öµìœ || count($DØ§Öµìœ) == 0) { return array(); } $Fá½¼ÂŒˆÕ = array(); goto D÷® êŸÌ; dÌƒî”™­: $a²¾…ºœÇĞ = array(); foreach ($DØ§Öµìœ as $B©Ä“ã³É·) { if (isset($B©Ä“ã³É·[$E“˜ëõÆ¶½[531]]) && $B©Ä“ã³É·[$E“˜ëõÆ¶½[531]]) { continue; } $F›˜¹ÊÉŒö = $A¬éšõß->getPathInner($B©Ä“ã³É·[$E“˜ëõÆ¶½[76]]); $aº¾ÌŸ”‰Ò = $BÙœ½ù—æ->addFileMake($F›˜¹ÊÉŒö, $B©Ä“ã³É·[$E“˜ëõÆ¶½[78]], $B©Ä“ã³É·[$E“˜ëõÆ¶½[159]], $B©Ä“ã³É·[$E“˜ëõÆ¶½[158]], $B©Ä“ã³É·[$E“˜ëõÆ¶½[28]], $A¡áÈ…é³»); $a²¾…ºœÇĞ[] = $aº¾ÌŸ”‰Ò; } $BÙœ½ù—æ->addAll($a²¾…ºœÇĞ); goto C±Áù¿”ÎÌ; FŞªÚÅãö£: foreach ($E‰ôÕë¾•‰ as $aá•„­¯Â™) { if (!isset($Fá½¼ÂŒˆÕ[$aá•„­¯Â™[$E“˜ëõÆ¶½[158]]])) { continue; } $cÒƒîÂÖÑ„ =& $Fá½¼ÂŒˆÕ[$aá•„­¯Â™[$E“˜ëõÆ¶½[158]]]; foreach ($cÒƒîÂÖÑ„ as &$däË‘ïÁåì) { $däË‘ïÁåì[$E“˜ëõÆ¶½[412]] = $aá•„­¯Â™[$E“˜ëõÆ¶½[412]]; } unset($däË‘ïÁåì); } $C±Ø±Îªá² = array(); foreach ($DØ§Öµìœ as $DšŞ¿³ÏÂó) { $C±Ø±Îªá²[$DšŞ¿³ÏÂó[$E“˜ëõÆ¶½[28]]] = $DšŞ¿³ÏÂó; } goto Eéß÷ëÇÀã; D÷® êŸÌ: foreach ($DØ§Öµìœ as &$däË‘ïÁåì) { goto E‰ÔÈÔŞå‹; F£®Ç¨Èõ: $cÎšë«¢¿‰ = $A¬éšõß->hashMd5($däË‘ïÁåì[$E“˜ëõÆ¶½[76]]); if (strlen($cÎšë«¢¿‰) > 10 && !isset($Fá½¼ÂŒˆÕ[$cÎšë«¢¿‰])) { $Fá½¼ÂŒˆÕ[$cÎšë«¢¿‰] = array(); } $däË‘ïÁåì[$E“˜ëõÆ¶½[159]] = $f”ÅæºÏĞ¨; goto E¦ƒ‘ŠàŸ›; E‰ÔÈÔŞå‹: Hook::trigger($E“˜ëõÆ¶½[532], $däË‘ïÁåì); $däË‘ïÁåì[$E“˜ëõÆ¶½[76]] = $A¬éšõß->getPathInner($däË‘ïÁåì[$E“˜ëõÆ¶½[76]]); $f”ÅæºÏĞ¨ = $A¬éšõß->hashSimple($däË‘ïÁåì[$E“˜ëõÆ¶½[76]]); goto F£®Ç¨Èõ; f»ÆÃõ¦è¢: if (count($Fá½¼ÂŒˆÕ[$cÎšë«¢¿‰]) > 1) { $däË‘ïÁåì[$E“˜ëõÆ¶½[531]] = !0; } goto DåäÛÆ£·; E¦ƒ‘ŠàŸ›: $däË‘ïÁåì[$E“˜ëõÆ¶½[158]] = $cÎšë«¢¿‰; Hook::trigger($E“˜ëõÆ¶½[533], $däË‘ïÁåì); $Fá½¼ÂŒˆÕ[$cÎšë«¢¿‰][] =& $däË‘ïÁåì; goto f»ÆÃõ¦è¢; DåäÛÆ£·: } $b÷‘¨£ááŞ = array($E“˜ëõÆ¶½[158] => array($E“˜ëõÆ¶½[7], array_keys($Fá½¼ÂŒˆÕ))); $BÙœ½ù—æ = Model($E“˜ëõÆ¶½[534]); goto E¬ĞÎ¸äÇÌ; Eéß÷ëÇÀã: return $C±Ø±Îªá²; goto f™­ˆÖÓÂå; E¬ĞÎ¸äÇÌ: $E‰ôÕë¾•‰ = $BÙœ½ù—æ->where($b÷‘¨£ááŞ)->select(); $E‰ôÕë¾•‰ = $E‰ôÕë¾•‰ ? $E‰ôÕë¾•‰ : array(); foreach ($E‰ôÕë¾•‰ as $aá•„­¯Â™) { if (!isset($Fá½¼ÂŒˆÕ[$aá•„­¯Â™[$E“˜ëõÆ¶½[158]]])) { continue; } $aÖí£— = $Fá½¼ÂŒˆÕ[$aá•„­¯Â™[$E“˜ëõÆ¶½[158]]]; foreach ($aÖí£— as &$däË‘ïÁåì) { $däË‘ïÁåì[$E“˜ëõÆ¶½[412]] = $aá•„­¯Â™[$E“˜ëõÆ¶½[412]]; $däË‘ïÁåì[$E“˜ëõÆ¶½[531]] = !0; } unset($däË‘ïÁåì); } goto dÌƒî”™­; C±Áù¿”ÎÌ: $b÷‘¨£ááŞ = array($E“˜ëõÆ¶½[158] => array($E“˜ëõÆ¶½[7], array_keys($Fá½¼ÂŒˆÕ))); $E‰ôÕë¾•‰ = $BÙœ½ù—æ->where($b÷‘¨£ááŞ)->select(); $E‰ôÕë¾•‰ = $E‰ôÕë¾•‰ ? $E‰ôÕë¾•‰ : array(); goto FŞªÚÅãö£; f™­ˆÖÓÂå: } } define($_SERVER[şÅ²é¤èİ][535], $_SERVER[şÅ²é¤èİ][536]); goto bç½¾›öãƒ; d«º§¿á‚: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\x73\145\x72\x5f\x66\x61\166"; protected function cacheFunctionAlias($bà¶¦É³ñÏ) { $EÊ˜¸”Œ‰ =& $_SERVER[şÅ²é¤èİ]; return array($EÊ˜¸”Œ‰[2362] => array(USER_ID, $EÊ˜¸”Œ‰[2419])); } protected function listData() { $CÑÄ¸œÉˆ =& $_SERVER[şÅ²é¤èİ]; $c¥ˆùå‡±Ô = array($CÑÄ¸œÉˆ[1336] => USER_ID, $CÑÄ¸œÉˆ[429] => array($CÑÄ¸œÉˆ[2420], 0)); $C…ãˆ´”ã = $CÑÄ¸œÉˆ[2421]; $bÇø©Ó”ã¢ = $CÑÄ¸œÉˆ[2422]; $dÁÏğÓŞ = $this->field($C…ãˆ´”ã)->where($c¥ˆùå‡±Ô)->order($bÇø©Ó”ã¢)->select(); return $dÁÏğÓŞ ? $dÁÏğÓŞ : array(); } protected function listByTag($DÜöö¯Œ) { } protected function addToTag($Fñªâ“Œˆ‰, $A¥ÏÍÇğÜé) { $bï¾Îº£ùÉ =& $_SERVER[şÅ²é¤èİ]; if (!Model($bï¾Îº£ùÉ[2209])->listData($A¥ÏÍÇğÜé) || !Model($bï¾Îº£ùÉ[755])->pathInfo($Fñªâ“Œˆ‰)) { return !1; } $B—İÜ ñ¾Š = array($bï¾Îº£ùÉ[1336] => USER_ID, $bï¾Îº£ùÉ[429] => $A¥ÏÍÇğÜé, $bï¾Îº£ùÉ[381] => $Fñªâ“Œˆ‰, $bï¾Îº£ùÉ[382] => $bï¾Îº£ùÉ[376], $bï¾Îº£ùÉ[380] => $bï¾Îº£ùÉ[33], $bï¾Îº£ùÉ[2013] => 0); if ($this->where($B—İÜ ñ¾Š)->find()) { return !1; } return $this->add($B—İÜ ñ¾Š); } protected function removeFromTag($e„¦÷öÑ’®, $d­ÏõˆªË) { $Dğ¡ğÊÙƒµ =& $_SERVER[şÅ²é¤èİ]; if (!Model($Dğ¡ğÊÙƒµ[2209])->listData($d­ÏõˆªË) || !Model($Dğ¡ğÊÙƒµ[755])->pathInfo($e„¦÷öÑ’®)) { return !1; } $f‘±£ßŒä¥ = array($Dğ¡ğÊÙƒµ[1336] => USER_ID, $Dğ¡ğÊÙƒµ[429] => $d­ÏõˆªË, $Dğ¡ğÊÙƒµ[382] => $Dğ¡ğÊÙƒµ[376], $Dğ¡ğÊÙƒµ[381] => $e„¦÷öÑ’®); return $this->where($f‘±£ßŒä¥)->delete(); } protected function removeByTag($E²¹ˆØåÊø) { $A±çæâ‘ÌÜ =& $_SERVER[şÅ²é¤èİ]; if (!$E²¹ˆØåÊø) { return !1; } $cÒ‰İ½Ñòß = array($A±çæâ‘ÌÜ[1336] => USER_ID, $A±çæâ‘ÌÜ[429] => $E²¹ˆØåÊø); return $this->where($cÒ‰İ½Ñòß)->delete(); } protected function removeBySource($fóÇœ˜Ğ¢Œ) { $cìí½¦¢ÅÈ =& $_SERVER[şÅ²é¤èİ]; $Dù¡çí‰¢ˆ = array($cìí½¦¢ÅÈ[1336] => USER_ID, $cìí½¦¢ÅÈ[381] => $fóÇœ˜Ğ¢Œ, $cìí½¦¢ÅÈ[429] => array($cìí½¦¢ÅÈ[929], 0)); return $this->where($Dù¡çí‰¢ˆ)->delete(); } }